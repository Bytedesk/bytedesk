"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{7083:function(e,r,s){s.d(r,{Z:function(){return l}});var t=s(83910),a=s(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},i=s(5901),o=function(e,r){return a.createElement(i.Z,(0,t.Z)({},e,{ref:r,icon:n}))};var l=a.forwardRef(o)},35911:function(e,r,s){s.d(r,{Z:function(){return l}});var t=s(83910),a=s(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},i=s(5901),o=function(e,r){return a.createElement(i.Z,(0,t.Z)({},e,{ref:r,icon:n}))};var l=a.forwardRef(o)},83004:function(e,r,s){s.d(r,{Z:function(){return l}});var t=s(83910),a=s(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},i=s(5901),o=function(e,r){return a.createElement(i.Z,(0,t.Z)({},e,{ref:r,icon:n}))};var l=a.forwardRef(o)},11575:function(e,r,s){var t=s(83910),a=s(44194),n=s(85333),i=s(5901),o=function(e,r){return a.createElement(i.Z,(0,t.Z)({},e,{ref:r,icon:n.Z}))},l=a.forwardRef(o);r.Z=l},22014:function(e,r,s){s.d(r,{Z:function(){return l}});var t=s(83910),a=s(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=s(5901),o=function(e,r){return a.createElement(i.Z,(0,t.Z)({},e,{ref:r,icon:n}))};var l=a.forwardRef(o)},26608:function(e,r,s){var t=s(94433),a=s(38956),n=s(44194),i=s(46659),o=s(31549),l=["fieldProps","proFieldProps"],c=function(e,r){var s=e.fieldProps,n=e.proFieldProps,c=(0,a.Z)(e,l);return(0,o.jsx)(i.Z,(0,t.Z)({ref:r,valueType:"textarea",fieldProps:s,proFieldProps:n},c))};r.Z=n.forwardRef(c)},28016:function(e,r,s){s.d(r,{Z:function(){return w}});var t=s(90819),a=s.n(t),n=s(89933),i=s.n(n),o=s(45332),l=s.n(o),c=s(61489),d=s(68992),u=s(62395);function f(){return g.apply(this,arguments)}function g(){return(g=i()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/kaptcha/api/v1/get",{method:"GET",params:{channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,r){return m.apply(this,arguments)}function m(){return(m=i()(a()().mark((function e(r,s){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/kaptcha/api/v1/check",{method:"POST",data:{captchaUid:r,captchaCode:s,channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=s(80597),x=s(13243),y=s(44194),M=s(31549),w=function(e){var r=e.onKaptchaChange,s=e.onKaptchaCheck,t=(0,u.useIntl)(),n=(0,y.useState)(),o=l()(n,2),d=o[0],g=o[1],m=(0,y.useState)(),w=l()(m,2),v=w[0],j=w[1],Z=(0,y.useState)(!1),b=l()(Z,2),k=b[0],z=b[1],C=function(){var e=i()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=2;break}return e.abrupt("return");case 2:return z(!0),e.prev=3,e.next=6,f();case 6:200===(r=e.sent).code?(g(r.data.captchaUid),j(r.data.captchaImage)):c.yw.error(t.formatMessage({id:"kaptcha.get.error",defaultMessage:"获取验证码失败"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),c.yw.error(t.formatMessage({id:"kaptcha.get.error",defaultMessage:"获取验证码失败"}));case 13:return e.prev=13,z(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=i()(a()().mark((function e(r,t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r,t);case 2:n=e.sent,console.log("checkCaptcha response",n),200===n.code?s&&s(!0):s&&s(!1);case 5:case"end":return e.stop()}}),e)})));return function(r,s){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){C()}),[]);return(0,M.jsx)(M.Fragment,{children:v&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(x.Z,{onChange:function(e){r&&(r(d,e.target.value),e.target.value&&""!==e.target.value&&4===e.target.value.trim().length?S(d,e.target.value):s&&s(!1))},prefix:(0,M.jsx)(h.Z,{}),placeholder:t.formatMessage({id:"captcha",defaultMessage:"captcha"}),style:{width:"65%",float:"left",height:40},allowClear:!0}),(0,M.jsx)("img",{src:v,alt:"captcha",onClick:C})]})})}},65041:function(e,r,s){s.d(r,{G:function(){return g}});var t=s(73193),a=s.n(t),n=(s(44194),s(2348)),i=s(68992),o=s(45634),l=s.n(o),c=s(46130),d=s(61489),u=s(87005),f=s(31549),g=function(e){var r=e.children,s=e.onSuccess,t=e.onError,o={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:i.IrL,categoryUid:"",kbUid:"",channel:i.XtJ},g={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(i.LA8)},data:o,showUploadList:!1,beforeUpload:function(e){c.Z.log("beforeUpload",e);var r=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return o.file=e,o.fileName=r,o.fileType=e.type,c.Z.log("beforeUpload",o),!0},onChange:function(e){if("uploading"!==e.file.status&&c.Z.log("not uploading:",e.file),"done"===e.file.status)if(c.Z.log("response: ",e.file.response),200===e.file.response.code){var r=e.file.response.data.fileUrl;s(r),d.yw.success("".concat(e.file.name," 上传成功"))}else t(e.file),d.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(d.yw.error("".concat(e.file.name," 上传失败")),t(e.file))}};return(0,f.jsx)(n.Z,a()(a()({},g),{},{children:r}))}},30080:function(e,r,s){s.r(r),s.d(r,{default:function(){return fe}});var t=s(73193),a=s.n(t),n=s(90819),i=s.n(n),o=s(89933),l=s.n(o),c=s(45332),d=s.n(c),u=s(44194),f=s(62395),g=s(69650),p=s(63052),m=s(72264),h=s(21478),x=s(22888),y=s(89654),M=s(27401),w=s(33633),v=s(62954),j=s(56206),Z=s(64525),b=s(89007),k=s(47268),z=s(26608),C=s(57039),S=s(35911),P=s(22014),U=s(7083),R=s(6446),T=s(16829),A=s(83004),I=s(11575),F=s(68879),D=s(34937),V=s(76630),E=s(38086),O=s(38722),B=s(15883),L=s(42358),q=s(84332),H=s(61489),N=s(65041),Y=s(99754),K=s(62134),G=s(15331),W=s(28016),$=s(77686),J=s(68992),Q=s(82325),X=s(77957),_=s(66248),ee=s(31549),re=function(e){var r=e.open,s=e.onSubmit,t=e.onClose,a=(0,f.useIntl)(),n=b.A.useForm(),o=d()(n,1)[0],c=(0,Y.Z)().translateString,g=(0,L.L)((function(e){return{userInfo:e.userInfo,deviceUid:e.deviceUid}})),p=g.userInfo,m=g.deviceUid,h=(0,$.u)((function(e){return e.currentOrg})),x=(0,u.useRef)(),y=(0,u.useState)(""),M=d()(y,2),w=M[0],v=M[1],j=(0,u.useState)(""),Z=d()(j,2),z=Z[0],C=Z[1],S=(0,u.useState)(!1),P=d()(S,2),U=P[0],R=P[1],T=function(){var e=l()(i()().mark((function e(r,s){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captchaUid",r," captchaValue",s),v(r),C(s);case 3:case"end":return e.stop()}}),e)})));return function(r,s){return e.apply(this,arguments)}}(),A=function(){var e=l()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captcha check result",r),R(r);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),I=function(){var e=l()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.validateFields().then(function(){var e=l()(i()().mark((function e(r){var a,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("changeEmail:",r),(null==p?void 0:p.email)!==r.email){e.next=4;break}return H.yw.error("Email is not changed!"),e.abrupt("return");case 4:return a={email:r.email,code:r.code,platform:J.iw8},e.next=7,(0,q.Uk)(a);case 7:n=e.sent,console.log("changeEmail response:",n),200===n.code?(H.yw.success("Email changed successfully!"),s(r.email),t()):H.yw.error(c(n.message));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){setTimeout((function(){var e;console.log("endCaptchaTiming"),null===(e=x.current)||void 0===e||e.endTiming()}),2)};return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(_.Z,{title:a.formatMessage({id:"pages.settings.reset.email",defaultMessage:"重置邮箱"}),forceRender:!0,open:r,footer:null,onCancel:function(){t()},children:(0,ee.jsxs)(b.A,{form:o,onFinish:function(){var e=l()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("changeEmail:",r),I();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,ee.jsx)(k.Z,{fieldProps:{size:"large",prefix:(0,ee.jsx)(Q.Z,{})},name:"email",placeholder:a.formatMessage({id:"pages.login.email.placeholder",defaultMessage:"邮箱"}),rules:[{required:!0,message:(0,ee.jsx)(f.FormattedMessage,{id:"pages.login.email.required",defaultMessage:"请输入邮箱！"})},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"邮箱格式不正确"},{max:50,message:"邮箱不得超过50字符"}]}),(0,ee.jsx)(b.A.Item,{name:"captchaCode",rules:[],children:(0,ee.jsx)(W.Z,{onKaptchaChange:T,onKaptchaCheck:A})}),(0,ee.jsx)(X.Z,{fieldProps:{size:"large",prefix:(0,ee.jsx)(V.Z,{})},captchaProps:{size:"large",disabled:!U},placeholder:a.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,r){return e?"".concat(r," ").concat(a.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):a.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},phoneName:"email",name:"code",rules:[{required:!0,message:(0,ee.jsx)(f.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],fieldRef:x,onGetCaptcha:function(){var e=l()(i()().mark((function e(r){var s,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("email:",r),!r){e.next=18;break}if((null==p?void 0:p.email)!==r){e.next=6;break}return H.yw.error("Email is not changed!"),F(),e.abrupt("return");case 6:return s={email:r,type:J.Iju,captchaUid:w,captchaCode:z,deviceUid:m,userUid:null==p?void 0:p.uid,orgUid:null==h?void 0:h.uid,platform:J.iw8},e.next=9,(0,G.O8)(s);case 9:if(t=e.sent,console.log("sendEmailCode",t),200===t.code){e.next=15;break}return H.yw.error(t.message),F(),e.abrupt("return");case 15:H.yw.success(t.message),e.next=19;break;case 18:H.yw.error("手机号格式错误");case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()})]})})})},se=function(e){var r=e.open,s=e.onSubmit,t=e.onClose,a=(0,f.useIntl)(),n=b.A.useForm(),o=d()(n,1)[0],c=(0,Y.Z)().translateString,g=(0,L.L)((function(e){return{userInfo:e.userInfo,deviceUid:e.deviceUid}})),p=g.userInfo,m=g.deviceUid,h=(0,$.u)((function(e){return e.currentOrg})),x=(0,u.useRef)(),y=(0,u.useState)(""),M=d()(y,2),w=M[0],v=M[1],j=(0,u.useState)(""),Z=d()(j,2),z=Z[0],C=Z[1],S=(0,u.useState)(!1),P=d()(S,2),U=P[0],R=P[1],T=function(){var e=l()(i()().mark((function e(r,s){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captchaUid",r," captchaValue",s),v(r),C(s);case 3:case"end":return e.stop()}}),e)})));return function(r,s){return e.apply(this,arguments)}}(),A=function(){var e=l()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("captcha check result",r),R(r);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),I=function(){var e=l()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.validateFields().then(function(){var e=l()(i()().mark((function e(r){var a,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("changeMobile:",r),(null==p?void 0:p.mobile)!==r.mobile){e.next=4;break}return H.yw.error("mobile is not changed"),e.abrupt("return");case 4:return a={mobile:r.mobile,code:r.code,platform:J.iw8},e.next=7,(0,q.KF)(a);case 7:n=e.sent,console.log("changeMobile response:",n),200===n.code?(H.yw.success("Mobile changed successfully!"),s(r.mobile),t()):H.yw.error(c(n.message));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){setTimeout((function(){var e;console.log("endCaptchaTiming"),null===(e=x.current)||void 0===e||e.endTiming()}),2)};return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(_.Z,{title:a.formatMessage({id:"pages.settings.reset.mobile",defaultMessage:"重置手机号"}),forceRender:!0,open:r,footer:null,onCancel:function(){t()},children:(0,ee.jsxs)(b.A,{form:o,onFinish:function(){var e=l()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("changeMobile:",r),I();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,ee.jsx)(k.Z,{fieldProps:{size:"large",prefix:(0,ee.jsx)(Q.Z,{})},name:"mobile",placeholder:a.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,ee.jsx)(f.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})},{pattern:/^1\d{10}$/,message:(0,ee.jsx)(f.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})}]}),(0,ee.jsx)(b.A.Item,{name:"captchaCode",rules:[],children:(0,ee.jsx)(W.Z,{onKaptchaChange:T,onKaptchaCheck:A})}),(0,ee.jsx)(X.Z,{fieldProps:{size:"large",prefix:(0,ee.jsx)(V.Z,{})},captchaProps:{size:"large",disabled:!U},placeholder:a.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,r){return e?"".concat(r," ").concat(a.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):a.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},phoneName:"mobile",name:"code",rules:[{required:!0,message:(0,ee.jsx)(f.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],fieldRef:x,onGetCaptcha:function(){var e=l()(i()().mark((function e(r){var s,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("mobile:",r),!r||11!==r.length){e.next=18;break}if((null==p?void 0:p.mobile)!==r){e.next=6;break}return H.yw.error("mobile is not changed"),F(),e.abrupt("return");case 6:return s={mobile:r,type:J.BG8,captchaUid:w,captchaCode:z,deviceUid:m,userUid:null==p?void 0:p.uid,orgUid:null==h?void 0:h.uid,platform:J.iw8},e.next=9,(0,G.Y7)(s);case 9:if(t=e.sent,console.log("sendMobileCode",t),200===t.code){e.next=15;break}return H.yw.error(t.message),F(),e.abrupt("return");case 15:H.yw.success(t.message),e.next=19;break;case 18:H.yw.error("手机号格式错误");case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()})]})})})},te=s(70097),ae=s(75686),ne=s(67194),ie=g.Z.Text,oe=function(e){var r=e.open,s=e.onClose,t=(0,f.useIntl)(),a=(0,Y.Z)().translateString,n=(0,u.useState)(0),o=d()(n,2),c=o[0],g=o[1],p=(0,u.useState)(""),m=d()(p,2),h=m[0],x=m[1],M=function(e){return e>=80?"#52c41a":e>=60?"#faad14":e>=40?"#fa8c16":"#ff4d4f"};return(0,ee.jsx)(_.Z,{title:t.formatMessage({id:"pages.settings.reset.password",defaultMessage:"重置密码"}),forceRender:!0,open:r,footer:null,onCancel:function(){s()},children:(0,ee.jsxs)(b.A,{initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},onFinish:function(){var e=l()(i()().mark((function e(r){var n,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,ae.Qc)(r.newPassword)<40)){e.next=4;break}return H.yw.error(t.formatMessage({id:"pages.settings.password.weak",defaultMessage:"密码强度太弱，请设置更强的密码"})),e.abrupt("return");case 4:if(!(r.newPassword.trim().length<6)){e.next=7;break}return H.yw.error(t.formatMessage({id:"pages.settings.password.min.length",defaultMessage:"密码最小长度不能小于6"})),e.abrupt("return");case 7:if(r.newPassword===r.confirmPassword){e.next=10;break}return H.yw.error(t.formatMessage({id:"pages.settings.password.mismatch",defaultMessage:"两次输入密码不一致"})),e.abrupt("return");case 10:return n={oldPassword:r.oldPassword,newPassword:r.newPassword},e.next=13,(0,q.Cp)(n);case 13:200===(o=e.sent).code?(H.yw.success(t.formatMessage({id:"pages.settings.password.change.success",defaultMessage:"Password changed successfully!"})),s()):H.yw.error(a(o.message));case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),children:[(0,ee.jsx)(k.Z.Password,{name:"oldPassword",label:t.formatMessage({id:"pages.settings.password.old",defaultMessage:"原密码(手机号直接登录用户，可以留空)"})}),(0,ee.jsx)(k.Z.Password,{name:"newPassword",label:t.formatMessage({id:"pages.settings.password.new",defaultMessage:"新密码"}),fieldProps:{onChange:function(e){var r=e.target.value,s=(0,ae.Qc)(r),t=(0,ae.$g)(s);g(s),x(t)}},rules:[{required:!0,message:t.formatMessage({id:"pages.settings.password.new.required",defaultMessage:"请输入新密码"})},{min:6,message:t.formatMessage({id:"pages.settings.password.min.length",defaultMessage:"密码长度不能少于6位"})}]}),(0,ee.jsx)("div",{style:{marginBottom:16},children:(0,ee.jsx)(ie,{type:"secondary",style:{fontSize:"12px"},children:t.formatMessage({id:"pages.settings.password.suggestion",defaultMessage:"建议：包含大小写字母、数字和特殊字符，长度至少8位"})})}),c>0&&(0,ee.jsx)("div",{style:{marginBottom:16},children:(0,ee.jsxs)(y.Z,{direction:"vertical",style:{width:"100%"},children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ee.jsx)(ie,{type:"secondary",children:t.formatMessage({id:"pages.settings.password.strength",defaultMessage:"密码强度："})}),(0,ee.jsx)(ie,{strong:!0,style:{color:M(c)},children:h})]}),(0,ee.jsx)(ne.Z,{percent:c,strokeColor:M(c),showInfo:!1,size:"small"}),(0,ee.jsx)(ie,{type:"secondary",style:{fontSize:"12px"},children:t.formatMessage({id:"pages.settings.password.suggestion",defaultMessage:"建议：包含大小写字母、数字和特殊字符，长度至少8位"})})]})}),(0,ee.jsx)(k.Z.Password,{name:"confirmPassword",label:t.formatMessage({id:"pages.settings.password.confirm",defaultMessage:"确认密码"}),rules:[{required:!0,message:t.formatMessage({id:"pages.settings.password.confirm.required",defaultMessage:"请确认密码"})},function(e){var r=e.getFieldValue;return{validator:function(e,s){return s&&r("newPassword")!==s?Promise.reject(new Error(t.formatMessage({id:"pages.settings.password.confirm.error",defaultMessage:"两次输入密码不一致"}))):Promise.resolve()}}}]})]})})},le=s(46130),ce={labelCol:{span:6},wrapperCol:{span:18}},de=g.Z.Title,ue=g.Z.Text,fe=function(){var e,r,s=(0,f.useIntl)(),t=(0,te.Z)().isDarkMode,n=(0,f.useLocation)(),o=b.A.useForm(),c=d()(o,1)[0],g=(0,Y.Z)().translateString,G=(0,L.L)((function(e){return{userInfo:e.userInfo,setUserInfo:e.setUserInfo}})),W=G.userInfo,$=G.setUserInfo,J=(0,u.useState)(""),Q=d()(J,2),X=Q[0],_=Q[1],ae=(0,u.useState)(!1),ne=d()(ae,2),ie=ne[0],fe=ne[1],ge=(0,u.useState)(!1),pe=d()(ge,2),me=pe[0],he=pe[1],xe=(0,u.useState)(!1),ye=d()(xe,2),Me=ye[0],we=ye[1],ve=(0,u.useState)(!1),je=d()(ve,2),Ze=je[0],be=je[1],ke=function(e){if(0===e)return s.formatMessage({id:"password.modified.today",defaultMessage:"今天"});if(1===e)return s.formatMessage({id:"password.modified.yesterday",defaultMessage:"昨天"});if(-1===e)return s.formatMessage({id:"password.modified.tomorrow",defaultMessage:"明天"});if(e>0){if(e<7)return s.formatMessage({id:"password.modified.days.ago",defaultMessage:"".concat(e,"天前")},{days:e});if(e<30){var r=Math.floor(e/7);return s.formatMessage({id:"password.modified.weeks.ago",defaultMessage:"".concat(r,"周前")},{weeks:r})}if(e<365){var t=Math.floor(e/30);return s.formatMessage({id:"password.modified.months.ago",defaultMessage:"".concat(t,"个月前")},{months:t})}var a=Math.floor(e/365);return s.formatMessage({id:"password.modified.years.ago",defaultMessage:"".concat(a,"年前")},{years:a})}return s.formatMessage({id:"password.modified.today",defaultMessage:"今天"})},ze=function(){var e=(null==W?void 0:W.passwordModifiedAt)||(null==W?void 0:W.createdAt);if(!e)return null;var r=new Date(e),t=new Date,a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=n.getTime()-a.getTime(),o=Math.floor(i/864e5);return le.Z.debug("Password modification time calculation:",{originalPasswordDate:r.toISOString(),originalCurrentDate:t.toISOString(),passwordDateOnly:a.toISOString(),currentDateOnly:n.toISOString(),diffTime:i,diffDays:o,timeFieldUsed:null!=W&&W.passwordModifiedAt?"passwordModifiedAt":"createdAt (fallback)",note:null!=W&&W.passwordModifiedAt?"Using actual password modification time":"Using account creation time as fallback for password modification time"}),{passwordDate:r,diffDays:o,isLongTime:o>90,isVeryLongTime:o>180,isUsingCreatedAt:!(null!=W&&W.passwordModifiedAt),formattedDate:r.toLocaleDateString("zh-CN"===s.locale?"zh-CN":"en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),formattedTimeDiff:ke(o)}}(),Ce=function(){fe(!0)},Se=function(){var e=l()(i()().mark((function e(r,t){var a,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,q.ck)(r);case 3:if(a=e.sent,le.Z.debug("updateProfile response:",a),200!==a.code){e.next=12;break}return n=t||s.formatMessage({id:"update.success"}),H.yw.success(n),a.data.username!==W.username?(0,K.NZ)():($(a.data),c.setFieldsValue({uid:a.data.uid,username:a.data.username,nickname:g(a.data.nickname),email:a.data.email,mobile:a.data.mobile,country:a.data.country,description:g(a.data.description)})),e.abrupt("return",!0);case 12:return H.yw.error(a.message),e.abrupt("return",!1);case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(0),console.error("Update profile error:",e.t0),H.yw.error(s.formatMessage({id:"update.failed",defaultMessage:"更新失败"})),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(r,s){return e.apply(this,arguments)}}(),Pe=function(){var e=l()(i()().mark((function e(r){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le.Z.debug("handleUploadSuccess:",r),_(r),t=a()(a()({},W),{},{avatar:r}),e.next=5,Se(t,s.formatMessage({id:"avatar.upload.success",defaultMessage:"头像上传成功"}));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Ue=function(){var e=l()(i()().mark((function e(r){var s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a()(a()(a()({},W),r),{},{avatar:X}),le.Z.debug("Form submit userObject:",s),e.next=4,Se(s);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){W&&_(W.avatar)}),[W]);var Re=function(){var e=l()(i()().mark((function e(){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(!0),e.prev=1,e.next=4,(0,q.Ai)();case 4:r=e.sent,le.Z.debug("handleRefreshProfile getProfile response:",r),200===r.code?($(r.data),c.setFieldsValue({uid:r.data.uid,username:r.data.username,nickname:g(r.data.nickname),email:r.data.email,mobile:r.data.mobile,country:r.data.country,description:g(r.data.description)}),H.yw.success(s.formatMessage({id:"profile.refresh.success",defaultMessage:"刷新成功"}))):H.yw.error(r.message||s.formatMessage({id:"profile.refresh.failed",defaultMessage:"刷新失败"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Refresh profile error:",e.t0),H.yw.error(s.formatMessage({id:"profile.refresh.failed",defaultMessage:"刷新失败"}));case 13:return e.prev=13,be(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){Re()}),[]),(0,u.useEffect)((function(){if("true"===new URLSearchParams(n.search).get("showChangePassword")){var e=setTimeout((function(){fe(!0);var e=n.pathname;window.history.replaceState({},"",e)}),500);return function(){return clearTimeout(e)}}}),[n.search]),(0,ee.jsxs)("div",{style:{padding:"24px",backgroundColor:t?"#1f1f1f":"#f0f2f5",minHeight:"100vh"},children:[(0,ee.jsxs)(p.Z,{variant:"borderless",style:{maxWidth:800,margin:"0 auto",borderRadius:"12px",boxShadow:t?"0 2px 8px rgba(255, 255, 255, 0.05)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[(0,ee.jsxs)(de,{level:2,style:{marginBottom:"24px",textAlign:"center",position:"relative"},children:[(0,ee.jsx)(C.Z,{style:{marginRight:"8px",color:"#1890ff"}}),s.formatMessage({id:"profile.title",defaultMessage:"个人资料"}),(0,ee.jsx)(m.ZP,{type:"text",icon:(0,ee.jsx)(S.Z,{spin:Ze}),onClick:Re,loading:Ze,disabled:Ze,style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",color:Ze?"#ccc":"#1890ff"},title:Ze?s.formatMessage({id:"profile.refreshing",defaultMessage:"正在刷新..."}):s.formatMessage({id:"profile.refresh",defaultMessage:"刷新用户信息"})})]}),(0,ee.jsx)(p.Z,{size:"small",style:{marginBottom:"24px",backgroundColor:t?"#2d2d2d":"#fafafa",borderRadius:"8px"},children:(0,ee.jsx)(h.Z,{justify:"center",align:"middle",style:{padding:"20px 0"},children:(0,ee.jsx)(x.Z,{children:(0,ee.jsxs)(y.Z,{direction:"vertical",align:"center",size:"large",children:[(0,ee.jsx)(M.Z,{src:X,size:100,style:{border:"4px solid #fff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}}),(0,ee.jsx)(N.G,{onSuccess:Pe,onError:function(e){le.Z.debug("handleUploadError:",e)},children:(0,ee.jsx)(m.ZP,{type:"primary",icon:(0,ee.jsx)(P.Z,{}),style:{borderRadius:"20px"},children:s.formatMessage({id:"pages.robot.upload",defaultMessage:"上传头像"})})},"avatar")]})})})}),(0,ee.jsxs)(b.A,a()(a()({},ce),{},{form:c,onFinish:Ue,submitter:{render:function(e,r){return(0,ee.jsx)(h.Z,{justify:"center",style:{marginTop:"32px"},children:(0,ee.jsx)(x.Z,{children:(0,ee.jsx)(y.Z,{size:"middle",children:r})})})},submitButtonProps:{size:"large",style:{borderRadius:"8px",minWidth:"120px"}},resetButtonProps:{size:"large",style:{borderRadius:"8px",minWidth:"120px"}}},children:[(0,ee.jsxs)(p.Z,{title:(0,ee.jsxs)(ue,{strong:!0,style:{fontSize:"16px"},children:[(0,ee.jsx)(C.Z,{style:{marginRight:"8px",color:"#1890ff"}}),s.formatMessage({id:"profile.basic.info",defaultMessage:"基本信息"})]}),size:"small",style:{marginBottom:"24px",backgroundColor:t?"#262626":void 0},children:[(0,ee.jsx)(k.Z,{name:"uid",label:s.formatMessage({id:"profile.user.id",defaultMessage:"用户ID"}),rules:[{required:!0}],readonly:!0,fieldProps:{style:{backgroundColor:t?"#2a2a2a":"#f5f5f5"}}}),(0,ee.jsx)(k.Z,{name:"username",label:s.formatMessage({id:"username.change.tip",defaultMessage:"用户名"}),rules:[{required:!0}],fieldProps:{prefix:(0,ee.jsx)(C.Z,{style:{color:"#1890ff"}})}}),(0,ee.jsx)(k.Z,{name:"nickname",label:s.formatMessage({id:"nickname",defaultMessage:"昵称"}),rules:[{required:!0}],fieldProps:{prefix:(0,ee.jsx)(C.Z,{style:{color:"#52c41a"}})}}),(0,ee.jsx)(k.Z,{name:"country",label:s.formatMessage({id:"profile.country",defaultMessage:"国家/地区"}),readonly:!0,fieldProps:{prefix:(0,ee.jsx)(U.Z,{style:{color:"#722ed1"}}),style:{backgroundColor:t?"#2a2a2a":"#f5f5f5"}}}),(0,ee.jsx)(z.Z,{name:"description",label:s.formatMessage({id:"description",defaultMessage:"个人简介"}),fieldProps:{rows:4,placeholder:s.formatMessage({id:"profile.description.placeholder",defaultMessage:"请输入个人简介..."})}}),(0,ee.jsx)("div",{style:{marginTop:"16px"},children:(0,ee.jsxs)(h.Z,{gutter:[16,8],children:[(0,ee.jsx)(x.Z,{span:6,children:(0,ee.jsxs)(ue,{strong:!0,children:[s.formatMessage({id:"profile.account.type",defaultMessage:"账户类型"}),":"]})}),(0,ee.jsx)(x.Z,{span:18,children:(0,ee.jsxs)(y.Z,{children:[(null==W?void 0:W.superUser)&&(0,ee.jsx)(w.Z,{color:"red",icon:(0,ee.jsx)(R.Z,{}),children:s.formatMessage({id:"profile.super.user",defaultMessage:"超级管理员"})}),null!=W&&W.enabled?(0,ee.jsx)(w.Z,{color:"green",icon:(0,ee.jsx)(T.Z,{}),children:s.formatMessage({id:"profile.account.enabled",defaultMessage:"已启用"})}):(0,ee.jsx)(w.Z,{color:"red",icon:(0,ee.jsx)(A.Z,{}),children:s.formatMessage({id:"profile.account.disabled",defaultMessage:"已禁用"})})]})})]})})]}),(null==W?void 0:W.currentOrganization)&&(0,ee.jsxs)(p.Z,{title:(0,ee.jsxs)(ue,{strong:!0,style:{fontSize:"16px"},children:[(0,ee.jsx)(I.Z,{style:{marginRight:"8px",color:"#13c2c2"}}),s.formatMessage({id:"profile.organization.info",defaultMessage:"组织信息"})]}),size:"small",style:{marginBottom:"24px",backgroundColor:t?"#262626":void 0},children:[(0,ee.jsxs)(h.Z,{gutter:[16,8],children:[(0,ee.jsx)(x.Z,{span:6,children:(0,ee.jsxs)(ue,{strong:!0,children:[s.formatMessage({id:"profile.organization.name",defaultMessage:"组织名称"}),":"]})}),(0,ee.jsx)(x.Z,{span:18,children:(0,ee.jsxs)(y.Z,{children:[W.currentOrganization.logo&&(0,ee.jsx)(M.Z,{src:W.currentOrganization.logo,size:"small"}),(0,ee.jsx)(ue,{children:W.currentOrganization.name}),W.currentOrganization.vip&&(0,ee.jsx)(w.Z,{color:"gold",icon:(0,ee.jsx)(R.Z,{}),children:"VIP"})]})})]}),W.currentOrganization.description&&(0,ee.jsxs)(h.Z,{gutter:[16,8],style:{marginTop:"8px"},children:[(0,ee.jsx)(x.Z,{span:6,children:(0,ee.jsxs)(ue,{strong:!0,children:[s.formatMessage({id:"profile.organization.description",defaultMessage:"组织描述"}),":"]})}),(0,ee.jsx)(x.Z,{span:18,children:(0,ee.jsx)(ue,{type:"secondary",children:g(W.currentOrganization.description)})})]}),W.currentOrganization.code&&(0,ee.jsxs)(h.Z,{gutter:[16,8],style:{marginTop:"8px"},children:[(0,ee.jsx)(x.Z,{span:6,children:(0,ee.jsxs)(ue,{strong:!0,children:[s.formatMessage({id:"profile.organization.code",defaultMessage:"组织编码"}),":"]})}),(0,ee.jsx)(x.Z,{span:18,children:(0,ee.jsx)(ue,{code:!0,children:W.currentOrganization.code})})]})]}),((null==W||null===(e=W.currentRoles)||void 0===e?void 0:e.length)>0||(null==W||null===(r=W.authorities)||void 0===r?void 0:r.length)>0)&&(0,ee.jsxs)(p.Z,{title:(0,ee.jsxs)(ue,{strong:!0,style:{fontSize:"16px"},children:[(0,ee.jsx)(F.Z,{style:{marginRight:"8px",color:"#f5222d"}}),s.formatMessage({id:"profile.roles.permissions",defaultMessage:"角色与权限"})]}),size:"small",style:{marginBottom:"24px",backgroundColor:t?"#262626":void 0},children:[(null==W?void 0:W.currentRoles)&&W.currentRoles.length>0&&(0,ee.jsx)("div",{style:{marginBottom:"16px"},children:(0,ee.jsxs)(h.Z,{gutter:[16,8],children:[(0,ee.jsx)(x.Z,{span:6,children:(0,ee.jsxs)(ue,{strong:!0,children:[s.formatMessage({id:"profile.current.roles",defaultMessage:"当前角色"}),":"]})}),(0,ee.jsx)(x.Z,{span:18,children:(0,ee.jsx)(y.Z,{wrap:!0,children:W.currentRoles.map((function(e,r){return(0,ee.jsxs)(w.Z,{color:"blue",style:{margin:"2px"},children:[g(e.name),e.description&&(0,ee.jsx)(v.Z,{title:e.description,children:(0,ee.jsx)(D.Z,{style:{marginLeft:"4px"}})})]},e.uid||r)}))})})]})}),(null==W?void 0:W.userOrganizationRoles)&&W.userOrganizationRoles.length>0&&(0,ee.jsx)("div",{style:{marginBottom:"16px"},children:(0,ee.jsxs)(h.Z,{gutter:[16,8],children:[(0,ee.jsx)(x.Z,{span:6,children:(0,ee.jsxs)(ue,{strong:!0,children:[s.formatMessage({id:"profile.organization.roles",defaultMessage:"组织角色"}),":"]})}),(0,ee.jsx)(x.Z,{span:18,children:(0,ee.jsx)(y.Z,{direction:"vertical",style:{width:"100%"},children:W.userOrganizationRoles.map((function(e,r){var s,t;return(0,ee.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,ee.jsxs)(ue,{strong:!0,style:{marginRight:"8px"},children:[null===(s=e.organization)||void 0===s?void 0:s.name,":"]}),(0,ee.jsx)(y.Z,{wrap:!0,children:null===(t=e.roles)||void 0===t?void 0:t.map((function(e,r){return(0,ee.jsx)(w.Z,{color:"purple",style:{margin:"2px"},children:g(e.name)},e.uid||r)}))})]},r)}))})})]})})]}),(0,ee.jsxs)(p.Z,{title:(0,ee.jsxs)(ue,{strong:!0,style:{fontSize:"16px"},children:[(0,ee.jsx)(V.Z,{style:{marginRight:"8px",color:"#fa541c"}}),s.formatMessage({id:"profile.security.settings",defaultMessage:"安全设置"})]}),size:"small",style:{marginBottom:"24px",backgroundColor:t?"#262626":void 0},children:[ze&&(0,ee.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"},children:[(0,ee.jsxs)(y.Z,{children:[(0,ee.jsx)(V.Z,{style:{color:"#fa541c"}}),(0,ee.jsx)(ue,{children:s.formatMessage({id:"password.modified.time",defaultMessage:"密码修改时间"})})]}),(0,ee.jsxs)(y.Z,{direction:"vertical",align:"end",size:"small",children:[(0,ee.jsx)(ue,{type:"secondary",children:ze.formattedDate}),(0,ee.jsxs)(ue,{type:"secondary",style:{fontSize:"12px"},children:["(",ze.formattedTimeDiff,")"]})]})]}),ze.isLongTime&&(0,ee.jsx)(j.Z,{message:s.formatMessage({id:"password.security.reminder",defaultMessage:"密码安全提醒"}),description:ze.isVeryLongTime?s.formatMessage({id:"password.very.long.time.warning",defaultMessage:"您的密码已经 ".concat(ze.diffDays," 天没有修改，存在安全风险，强烈建议立即更换密码。")},{days:ze.diffDays}):s.formatMessage({id:"password.long.time.warning",defaultMessage:"您的密码已经 ".concat(ze.diffDays," 天没有修改，建议定期更换密码以确保账户安全。")},{days:ze.diffDays}),type:ze.isVeryLongTime?"error":"warning",showIcon:!0,style:{marginTop:"8px"},action:(0,ee.jsx)(m.ZP,{size:"small",type:"primary",onClick:Ce,danger:ze.isVeryLongTime,children:s.formatMessage({id:"password.change.now",defaultMessage:"立即修改"})})}),(0,ee.jsx)(Z.Z,{style:{margin:"16px 0"}})]}),(0,ee.jsx)(h.Z,{gutter:[16,16],children:(0,ee.jsx)(x.Z,{span:24,children:(0,ee.jsxs)(y.Z,{direction:"vertical",style:{width:"100%"},children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[(0,ee.jsxs)(y.Z,{children:[(0,ee.jsx)(V.Z,{style:{color:"#fa541c"}}),(0,ee.jsx)(ue,{children:s.formatMessage({id:"profile.login.password",defaultMessage:"登录密码"})})]}),(0,ee.jsx)(m.ZP,{type:"link",onClick:Ce,style:{fontWeight:"bold"},children:s.formatMessage({id:"pages.settings.reset.password",defaultMessage:"修改密码"})})]}),(0,ee.jsx)(Z.Z,{style:{margin:"8px 0"}})]})})})]}),(0,ee.jsx)(p.Z,{title:(0,ee.jsxs)(ue,{strong:!0,style:{fontSize:"16px"},children:[(0,ee.jsx)(E.Z,{style:{marginRight:"8px",color:"#722ed1"}}),s.formatMessage({id:"profile.contact.info",defaultMessage:"联系方式"})]}),size:"small",children:(0,ee.jsx)(h.Z,{gutter:[16,16],children:(0,ee.jsxs)(x.Z,{span:24,children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[(0,ee.jsxs)(y.Z,{children:[(0,ee.jsx)(E.Z,{style:{color:"#722ed1"}}),(0,ee.jsx)(ue,{children:s.formatMessage({id:"profile.email.address",defaultMessage:"邮箱地址"})}),null!=W&&W.emailVerified?(0,ee.jsx)(w.Z,{icon:(0,ee.jsx)(T.Z,{}),color:"success",children:s.formatMessage({id:"profile.verified",defaultMessage:"已验证"})}):(0,ee.jsx)(w.Z,{icon:(0,ee.jsx)(O.Z,{}),color:"error",children:s.formatMessage({id:"profile.not.verified",defaultMessage:"未验证"})})]}),(0,ee.jsxs)(y.Z,{children:[(0,ee.jsx)(ue,{type:"secondary",children:(null==W?void 0:W.email)||s.formatMessage({id:"profile.not.set",defaultMessage:"未设置"})}),(0,ee.jsx)(m.ZP,{type:"link",onClick:function(){he(!0)},style:{fontWeight:"bold"},children:s.formatMessage({id:"pages.settings.reset.email",defaultMessage:"修改邮箱"})})]})]}),(0,ee.jsx)(Z.Z,{style:{margin:"8px 0"}}),(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0"},children:[(0,ee.jsxs)(y.Z,{children:[(0,ee.jsx)(B.Z,{style:{color:"#13c2c2"}}),(0,ee.jsx)(ue,{children:s.formatMessage({id:"profile.mobile.number",defaultMessage:"手机号码"})}),null!=W&&W.mobileVerified?(0,ee.jsx)(w.Z,{icon:(0,ee.jsx)(T.Z,{}),color:"success",children:s.formatMessage({id:"profile.verified",defaultMessage:"已验证"})}):(0,ee.jsx)(w.Z,{icon:(0,ee.jsx)(O.Z,{}),color:"error",children:s.formatMessage({id:"profile.not.verified",defaultMessage:"未验证"})})]}),(0,ee.jsxs)(y.Z,{children:[(0,ee.jsx)(ue,{type:"secondary",children:(null==W?void 0:W.mobile)||s.formatMessage({id:"profile.not.set",defaultMessage:"未设置"})}),(0,ee.jsx)(m.ZP,{type:"link",onClick:function(){we(!0)},style:{fontWeight:"bold"},children:s.formatMessage({id:"pages.settings.reset.mobile",defaultMessage:"修改手机号"})})]})]})]})})})]}))]}),ie&&(0,ee.jsx)(oe,{open:ie,onClose:function(){fe(!1)}}),me&&(0,ee.jsx)(re,{open:me,onSubmit:function(e){he(!1),W.email=e,$(W),c.setFieldValue("email",e)},onClose:function(){he(!1)}}),Me&&(0,ee.jsx)(se,{open:Me,onSubmit:function(e){we(!1),W.mobile=e,$(W),c.setFieldValue("mobile",e)},onClose:function(){we(!1)}})]})}},75686:function(e,r,s){s.d(r,{$g:function(){return d},N9:function(){return l},Qc:function(){return c},vC:function(){return o}});var t=s(46803),a=s.n(t),n=s(46130);function i(e){return"bytedesk_salt"!==e&&e?a().SHA256(e).toString().substring(0,16):"bytedesk_license"}function o(e,r){if(!e)throw new Error("密码不能为空");if(!r)throw new Error("盐值不能为空");try{var s=i(r),t=a().enc.Utf8.parse(s);return a().AES.encrypt(e,t,{mode:a().mode.ECB,padding:a().pad.Pkcs7}).toString()}catch(e){throw n.Z.error("密码加密失败:",e),new Error("密码加密失败: "+e.message)}}function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="",t=0;t<e;t++)s+=r.charAt(Math.floor(Math.random()*r.length));return s}function c(e){var r=0;return e?(e.length>=8&&(r+=20),e.length>=12&&(r+=10),/\d/.test(e)&&(r+=20),/[a-z]/.test(e)&&(r+=20),/[A-Z]/.test(e)&&(r+=20),/[!@#$%^&*(),.?":{}|<>]/.test(e)&&(r+=10),Math.min(r,100)):0}function d(e){return e>=80?"强":e>=60?"中":e>=40?"弱":"很弱"}}}]);