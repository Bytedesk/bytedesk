"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1642],{5651:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(11757),r=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},i=n(54183),s=function(e,t){return r.createElement(i.Z,(0,o.Z)({},e,{ref:t,icon:a}))};var l=r.forwardRef(s)},2516:function(e,t,n){var o=n(17082),r=n(73457),a=n(44194),i=n(35175),s=n(31549),l=["fieldProps","request","params","proFieldProps"],u=function(e,t){var n=e.fieldProps,a=e.request,u=e.params,c=e.proFieldProps,d=(0,r.Z)(e,l);return(0,s.jsx)(i.Z,(0,o.Z)({valueType:"treeSelect",fieldProps:n,ref:t,request:a,params:u,filedConfig:{customLightMode:!0},proFieldProps:c},d))},c=a.forwardRef(u);t.Z=c},6807:function(e,t,n){var o=n(69169);t.ZP=o.A},200:function(e,t,n){n.d(t,{I2:function(){return h},dO:function(){return g},l8:function(){return m},o_:function(){return d},vD:function(){return y}});var o=n(90819),r=n.n(o),a=n(73193),i=n.n(a),s=n(89933),l=n.n(s),u=n(55735),c=n(41159);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/autoreply/fixed/query/org",{method:"GET",params:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/autoreply/fixed/create",{method:"POST",data:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/autoreply/fixed/update",{method:"POST",data:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/autoreply/fixed/delete",{method:"POST",data:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return(x=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/autoreply/fixed/enable",{method:"POST",data:{uid:t.uid,enabled:t.enabled,client:u.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},73669:function(e,t,n){n.d(t,{D$:function(){return g},EP:function(){return h},hS:function(){return m},z_:function(){return d}});var o=n(90819),r=n.n(o),a=n(73193),i=n.n(a),s=n(89933),l=n.n(s),u=n(55735),c=n(41159);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/member/query/org",{method:"GET",params:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/member/create",{method:"POST",data:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/member/update",{method:"POST",data:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/member/delete",{method:"POST",data:i()(i()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},75801:function(e,t,n){n.r(t),n.d(t,{default:function(){return Fe}});var o=n(75574),r=n(44194),a=n(8247),i=n(41159),s=n(90819),l=n.n(s),u=n(73193),c=n.n(u),d=n(89933),f=n.n(d),g=n(45332),p=n.n(g),m=n(86803),v=n(24170),h=n(76750),b=n(1902),y=n(6631),x=n(59908),C=n(69169),j=n(4499),M=n(32350),w=n(84288),k=n(75365),Z=n(31549),S=function(){var e=C.A.useForm(),t=p()(e,1)[0],n=(0,i.useIntl)(),o=(0,h.Z)().translateString,a=(0,b.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),s=a.currentAgent,u=a.setCurrentAgent,d=(0,r.useState)(""),g=p()(d,2),S=g[0],R=g[1];(0,r.useEffect)((function(){var e;s&&t.setFieldsValue({nickname:o(null==s?void 0:s.nickname),email:null==s?void 0:s.email,mobile:null==s?void 0:s.mobile,description:o(null==s?void 0:s.description),memberUid:null==s||null===(e=s.member)||void 0===e?void 0:e.uid})}),[s]);var T=function(){var e=f()(l()().mark((function e(t){var o,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),R(t),o=c()(c()({},s),{},{avatar:t}),e.next=5,(0,v.n1)(o);case 5:r=e.sent,console.log("updateAvatar response:",r),200===r.code?(m.yw.success(n.formatMessage({id:"update.success"})),u(r.data)):(m.yw.destroy(),m.yw.error(r.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=f()(l()().mark((function e(t){var o,r,a,i,d,f,g,p,h,b;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),m.yw.loading(n.formatMessage({id:"updating"})),h=c()(c()(c()({},s),t),{},{avatar:S,serviceSettings:c()(c()({},s.serviceSettings),{},{welcomeFaqUids:null==s||null===(o=s.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==s||null===(r=s.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null==s||null===(a=s.serviceSettings)||void 0===a||null===(a=a.faqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==s||null===(i=s.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==s||null===(d=s.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==s||null===(f=s.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))}),robotSettings:c()(c()({},s.robotSettings),{},{robotUid:null===(g=s.robotSettings)||void 0===g||null===(g=g.robot)||void 0===g?void 0:g.uid}),messageLeaveSettings:c()(c()({},s.messageLeaveSettings),{},{worktimeUids:null==s||null===(p=s.messageLeaveSettings)||void 0===p||null===(p=p.worktimes)||void 0===p?void 0:p.map((function(e){return e.uid}))})}),console.log("agentObject:",h),e.next=6,(0,v.sE)(h);case 6:b=e.sent,console.log("updateAgent response:",b),200===b.code?(m.yw.destroy(),m.yw.success(n.formatMessage({id:"update.success"})),u(b.data)):(m.yw.destroy(),m.yw.error(b.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e;s&&(R(s.avatar),t.setFieldsValue({member:null==s||null===(e=s.member)||void 0===e?void 0:e.nickname}))}),[s]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(C.A,{form:t,style:{marginLeft:"20px"},onFinish:A,children:[(0,Z.jsx)(C.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,Z.jsxs)(y.G,{onSuccess:T,onError:function(e){console.log("handleUploadError:",e),m.yw.error(e)},children:[(0,Z.jsx)(w.C,{src:S}),(0,Z.jsx)(k.ZP,{icon:(0,Z.jsx)(x.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,Z.jsx)(j.Z,{width:"md",name:"nickname",label:n.formatMessage({id:"agent.info.nickname"}),rules:[{required:!0,message:n.formatMessage({id:"agent.info.nickname.required"})}]}),(0,Z.jsx)(j.Z,{width:"md",name:"email",label:n.formatMessage({id:"agent.info.email"}),rules:[{required:!0,message:n.formatMessage({id:"agent.info.email.required"})}]}),(0,Z.jsx)(j.Z,{width:"md",name:"mobile",label:n.formatMessage({id:"agent.info.mobile"}),rules:[{required:!0,message:n.formatMessage({id:"agent.info.mobile.required"})}]}),(0,Z.jsx)(M.Z,{width:"md",name:"description",label:n.formatMessage({id:"agent.info.description"}),rules:[{required:!0,message:n.formatMessage({id:"agent.info.description.required"})}]}),(0,Z.jsx)(j.Z,{width:"md",name:"member",label:n.formatMessage({id:"agent.info.member"}),disabled:!0})]})})},R=n(55735),T=n(43705),A=n(71469),E=n(23635),q=(n(67560),n(40058),n(50796),n(75808)),F=n(40836),P=n(200),I=n(27522),$=n(40612),U=n(5651),O=n(48708),N=n(84881),z=n(32943),L=n(38775),V=function(e){var t,n,o=e.type,a=(0,i.useIntl)(),s=(0,i.useNavigate)(),u=C.A.useForm(),c=p()(u,1)[0],d=(0,h.Z)().translateString,g=(0,r.useState)(),y=p()(g,2),x=y[0],j=y[1],M=(0,r.useState)(),w=p()(M,2),S=w[0],T=w[1],A=(0,$.u)((function(e){return e.currentOrg})),E=(0,b.E)((function(e){return e.currentAgent})),q=(0,b.E)((function(e){return e.setCurrentAgent})),F=(0,r.useMemo)((function(){var e;return(null==E||null===(e=E.autoReplySettings)||void 0===e?void 0:e.autoReplyType)||R.DST}),[null==E||null===(t=E.autoReplySettings)||void 0===t?void 0:t.autoReplyType]),V=(0,r.useState)(F),D=p()(V,2),B=D[0],W=D[1],H=(0,r.useCallback)(f()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m.yw.loading(a.formatMessage({id:"loading"})),t={pageNumber:0,pageSize:50,orgUid:null==A?void 0:A.uid},e.next=5,(0,P.o_)(t);case 5:n=e.sent,console.log("getAutoReplyFixed response:",n),200===n.code?j(n):m.yw.error(n.message),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching auto replies:",e.t0),m.yw.error(a.formatMessage({id:"error.fetch.failed"}));case 14:return e.prev=14,m.yw.destroy(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])}))),[null==A?void 0:A.uid]),_=(0,r.useCallback)(function(){var e=f()(l()().mark((function e(t){var n,o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m.yw.loading(a.formatMessage({id:"loading"})),n={pageNumber:0,pageSize:50,type:t,orgUid:null==A?void 0:A.uid},e.next=5,(0,I.AP)(n);case 5:o=e.sent,console.log("getKeywordBase response:",o),200===o.code?T(o):m.yw.error(o.message),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching knowledge base:",e.t0),m.yw.error(a.formatMessage({id:"error.fetch.failed"}));case 14:return e.prev=14,m.yw.destroy(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[B,null==A?void 0:A.uid]);(0,r.useEffect)((function(){H(),_(R.WvL)}),[]),(0,r.useEffect)((function(){B===R.PZ1?_(R.WvL):B===R.PcP&&_(R.QPQ)}),[B]),(0,r.useEffect)((function(){var e,t,n,r,a,i;o===R.Njn&&null!=E&&E.autoReplySettings&&c.setFieldsValue({kbUid:null==E||null===(e=E.autoReplySettings)||void 0===e?void 0:e.kbUid,autoReplyEnabled:null==E||null===(t=E.autoReplySettings)||void 0===t?void 0:t.autoReplyEnabled,autoReplyType:null==E||null===(n=E.autoReplySettings)||void 0===n?void 0:n.autoReplyType,autoReplyUid:null==E||null===(r=E.autoReplySettings)||void 0===r?void 0:r.autoReplyUid,autoReplyContent:null==E||null===(a=E.autoReplySettings)||void 0===a?void 0:a.autoReplyContent,autoReplyContentType:null==E||null===(i=E.autoReplySettings)||void 0===i?void 0:i.autoReplyContentType})}),[E,c,o]);var Q=function(){var e=f()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleAutoReplySubmit:"),m.yw.loading(a.formatMessage({id:"autoreply.save.loading",defaultMessage:"Ê≠£Âú®‰øùÂ≠òÔºåËØ∑Á®çÂêé..."})),t={uid:null==E?void 0:E.uid,autoReplySettings:{autoReplyEnabled:c.getFieldValue("autoReplyEnabled"),autoReplyType:c.getFieldValue("autoReplyType"),autoReplyUid:c.getFieldValue("autoReplyUid"),autoReplyContent:c.getFieldValue("autoReplyContent"),autoReplyContentType:c.getFieldValue("autoReplyContentType"),kbUid:c.getFieldValue("kbUid")}},e.next=5,(0,v.i8)(t);case 5:n=e.sent,console.log("handleUpdateAutoReply:",n),200===n.code?(m.yw.destroy(),q(n.data)):(m.yw.destroy(),m.yw.error(a.formatMessage({id:"autoreply.save.error",defaultMessage:"‰øùÂ≠òÂ§±Ë¥•"})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(z.Z,{message:"Ëá™Âä®ÂõûÂ§ç",description:"Â∑≤ÁªèÊé•ÂÖ•‰∫∫Â∑•ÁöÑÊÉÖÂÜµ‰∏ãÔºåËá™Âä®ÂõûÂ§çÂèØ‰ª•‰Ωú‰∏∫ËæÖÂä©ÂõûÂ§çÔºåÊèêÈ´òÂõûÂ§çÊïàÁéá„ÄÇ",type:"info"}),(0,Z.jsx)(L.Z,{}),(0,Z.jsxs)(C.A,{form:c,onFinish:Q,children:[(0,Z.jsx)(O.Z,{width:"md",name:"autoReplyEnabled",label:"ÊòØÂê¶ÂêØÁî®Ëá™Âä®ÂõûÂ§ç",fieldProps:{onChange:Q}}),(0,Z.jsx)(N.Z,{width:"md",name:"autoReplyType",label:"Ëá™Âä®ÂõûÂ§çÁ±ªÂûã",options:[{label:"Âõ∫ÂÆöÂõûÂ§ç",value:R.DST},{label:"ÂÖ≥ÈîÆÂ≠óÂåπÈÖç",value:R.PZ1},{label:"Â§ßÊ®°ÂûãÂõûÂ§ç",value:R.PcP,disabled:!0}],fieldProps:{onChange:function(e,t){!function(e,t){console.log("handleAutoReplyTypeChange:",e),W(e)}(e)}}}),B===R.DST&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(C.A.Item,{children:(0,Z.jsx)(k.ZP,{icon:(0,Z.jsx)(U.Z,{}),onClick:function(){s("/kb/autoreply/data")},children:"Ê∑ªÂä†Âõ∫ÂÆöÂõûÂ§çÂÜÖÂÆπ"},"github")}),(0,Z.jsx)(N.Z,{width:"md",name:"autoReplyContent",label:"ÈÄâÊã©Âõ∫ÂÆöÂõûÂ§çÂÜÖÂÆπ",options:null==x||null===(n=x.data)||void 0===n?void 0:n.content.map((function(e){return{label:d(null==e?void 0:e.content),value:null==e?void 0:e.content}})),fieldProps:{onChange:function(e,t){!function(e,t){var n;console.log("handleAutoReplySelectChange:",e),null==x||null===(n=x.data.content)||void 0===n||n.forEach((function(t){t.uid===e&&c.setFieldsValue({autoReplyContentType:t.type,autoReplyContent:t.content})}))}(e)}}})]}),B===R.PZ1&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(C.A.Item,{children:(0,Z.jsx)(k.ZP,{icon:(0,Z.jsx)(U.Z,{}),onClick:function(){s("/kb/autoreply/data")},children:"Ê∑ªÂä†ÂÖ≥ÈîÆËØçÁü•ËØÜÂ∫ì"},"github")}),(0,Z.jsx)(N.Z,{width:"md",name:"kbUid",label:"ÈÄâÊã©ÂÖ≥ÈîÆËØçÁü•ËØÜÂ∫ì",options:null==S?void 0:S.data.content.map((function(e){return{label:d(e.name),value:e.uid}}))})]}),B===R.PcP&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(C.A.Item,{children:(0,Z.jsx)(k.ZP,{icon:(0,Z.jsx)(U.Z,{}),onClick:function(){s("/kb/llm/data")},children:"Ê∑ªÂä†Â§ßÊ®°ÂûãÁü•ËØÜÂ∫ì"},"github")}),(0,Z.jsx)(N.Z,{width:"md",name:"kbUid",label:"ÈÄâÊã©Â§ßÊ®°ÂûãÁü•ËØÜÂ∫ì",options:null==S?void 0:S.data.content.map((function(e){return{label:d(e.name),value:e.uid}}))})]})]})]})},D=n(98473),B=(n(68969),n(69539),n(66916),n(72614),n(66310),n(95490),function(){var e=(0,i.useIntl)(),t=(0,b.E)((function(e){return e.setCurrentAgent})),n=(0,$.u)((function(e){return e.currentOrg})),o=(0,b.E)((function(e){return e.currentAgent})),s=(0,r.useMemo)((function(){return[{key:"faq",label:(0,Z.jsx)(i.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,Z.jsx)(T.Z,{type:R.Njn})},{key:"quickFaqs",label:(0,Z.jsx)(i.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"QuickButton"}),children:(0,Z.jsx)(A.Z,{type:R.Njn})},{key:"rate",label:(0,Z.jsx)(i.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,Z.jsx)(E.Z,{type:R.Njn})},{key:"right",label:(0,Z.jsx)(i.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,Z.jsx)(F.Z,{type:R.Njn})},{key:"popup",label:(0,Z.jsx)(i.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,Z.jsx)(q.Z,{type:R.Njn})},{key:"trigger",label:(0,Z.jsx)(i.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,Z.jsx)(D.Z,{type:R.Njn})},{key:"autoreply",label:(0,Z.jsx)(i.FormattedMessage,{id:"autoreply",defaultMessage:"AutoReply"}),children:(0,Z.jsx)(V,{type:R.Njn})}]}),[e]),u=function(){var r=f()(l()().mark((function r(){var a,i;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,m.yw.loading(e.formatMessage({id:"loading"})),a={orgUid:null==n?void 0:n.uid,uid:null==o?void 0:o.uid},r.next=5,(0,v.tY)(a);case 5:i=r.sent,console.log("queryAgentDetail response:",i),200===i.code?t(i.data):m.yw.error(i.message),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.error("Error fetching agent detail:",r.t0),m.yw.error(e.formatMessage({id:"error.fetch.failed"}));case 14:return r.prev=14,m.yw.destroy(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,10,14,17]])})));return function(){return r.apply(this,arguments)}}();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(a.Z,{tabPosition:"left",items:s,onChange:function(e){console.log("key:",e),u()}})})}),W=n(35386),H=n(14238),_=n(87491),Q=n(88996),G=n(80601),X=n(88201),J=n(5602),K=n(62673),Y=n(59485),ee=n(80556),te=n(40074),ne=n(58791),oe=n(61353),re=n(16852),ae=n(40439),ie=n(86994),se=n(58087),le=n(70185),ue=function(){var e=(0,i.useIntl)(),t=(0,r.useContext)(le.I).isDarkMode,n=(0,b.E)((function(e){return e.currentAgent})),o=(0,$.u)((function(e){return e.currentOrg})),a=(0,r.useState)(!1),s=p()(a,2),u=s[0],d=s[1],g=(0,r.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),v=p()(g,2),h=v[0],y=v[1],x=function(){var t=f()(l()().mark((function t(){var r,a,i,s,u,c,f,g,p,v,h,b,x;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),d(!0),m.yw.info(e.formatMessage({id:"refresh",defaultMessage:"Ê≠£Âú®Âà∑Êñ∞ÈòüÂàóÊï∞ÊçÆ..."})),t.prev=3,r={pageNumber:0,pageSize:100,agentUid:null==n?void 0:n.uid,orgUid:null==o?void 0:o.uid},t.next=7,(0,_.Wq)(r);case 7:a=t.sent,console.log("queryQueuesByOrg response:",a.data),200==(null==a?void 0:a.code)?(m.yw.destroy(),null!=a&&null!==(i=a.data)&&void 0!==i&&i.content&&a.data.content.length>0?(x=a.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),y({totalCount:null!==(s=x.totalCount)&&void 0!==s?s:0,queuingCount:null!==(u=x.queuingCount)&&void 0!==u?u:0,chattingCount:null!==(c=x.chattingCount)&&void 0!==c?c:0,offlineCount:null!==(f=x.offlineCount)&&void 0!==f?f:0,closedCount:null!==(g=x.closedCount)&&void 0!==g?g:0,leaveMsgCount:null!==(p=x.leaveMsgCount)&&void 0!==p?p:0,robotToAgentCount:null!==(v=x.robotToAgentCount)&&void 0!==v?v:0,avgWaitTime:null!==(h=x.avgWaitTime)&&void 0!==h?h:0,avgResolveTime:null!==(b=x.avgResolveTime)&&void 0!==b?b:0})):y({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):m.yw.error(null==a?void 0:a.message);case 10:return t.prev=10,d(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){x()}),[n]);var C={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},j={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,Z.jsxs)("div",{style:{padding:"4px"},children:[(0,Z.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,Z.jsx)(Q.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"Âà∑Êñ∞Êï∞ÊçÆ"}),children:(0,Z.jsx)(k.ZP,{type:"primary",icon:(0,Z.jsx)(ee.Z,{}),loading:u,onClick:x,size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"Âà∑Êñ∞"})})})}),(0,Z.jsxs)(G.Z,{spinning:u,children:[(0,Z.jsxs)(X.Z,{gutter:[16,16],children:[(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.totalCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"ÊÄª‰ºöËØù"}),value:h.totalCount,prefix:(0,Z.jsx)(te.Z,{}),valueStyle:{color:j.totalCount.valueColor}})})}),(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.queuingCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"ÊéíÈòü‰∏≠"}),value:h.queuingCount,prefix:(0,Z.jsx)(ne.Z,{}),valueStyle:{color:j.queuingCount.valueColor}})})}),(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.chattingCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"‰ºöËØù‰∏≠"}),value:h.chattingCount,prefix:(0,Z.jsx)(oe.Z,{}),valueStyle:{color:j.chattingCount.valueColor}})})}),(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.offlineCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"Á¶ªÁ∫øÁïôË®Ä"}),value:h.offlineCount,prefix:(0,Z.jsx)(re.Z,{}),valueStyle:{color:j.offlineCount.valueColor}})})}),(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.closedCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"Â∑≤ÂÖ≥Èó≠"}),value:h.closedCount,prefix:(0,Z.jsx)(ae.Z,{}),valueStyle:{color:j.closedCount.valueColor}})})}),(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.leaveMsgCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"ÁïôË®ÄÊï∞"}),value:h.leaveMsgCount,prefix:(0,Z.jsx)(ie.Z,{}),valueStyle:{color:j.leaveMsgCount.valueColor}})})})]}),(0,Z.jsx)(L.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"Êõ¥Â§öÁªüËÆ°"})}),(0,Z.jsx)(X.Z,{gutter:[16,16],children:(0,Z.jsx)(J.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,Z.jsx)(K.Z,{style:c()(c()({},C),{},{backgroundColor:j.robotToAgentCount.bg}),hoverable:!0,children:(0,Z.jsx)(Y.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"ËΩ¨‰∫∫Â∑•Êï∞"}),value:h.robotToAgentCount,prefix:(0,Z.jsx)(se.Z,{}),valueStyle:{color:j.robotToAgentCount.valueColor}})})})})]})]})},ce=n(36310),de=function(){var e=(0,i.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,Z.jsx)(S,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,Z.jsx)(H.Z,{type:R.Njn})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,Z.jsx)(B,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,Z.jsx)(ue,{}),disabled:!(0,ce.OJ)()},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,Z.jsx)(W.Z,{type:R.Njn})}]}),[e]);return(0,Z.jsx)(a.Z,{defaultActiveKey:"basic",items:t})},fe=n(86222),ge=n.n(fe),pe=n(23864),me=n(15722),ve=n(82669),he=n(53530),be=n(27487),ye=n(9452),xe=n(76711),Ce=n.n(xe),je=n(19981),Me=n(73669),we=n(6807),ke=n(2516),Ze=n(52288),Se=n(90727),Re=function(e){var t=e.open,n=e.onClose,o=e.onSubmit,a=we.ZP.useForm(),i=p()(a,1)[0],s=(0,$.u)((function(e){return e.currentOrg})),u=(0,je.Z)((function(e){return e.memberResult})),d=(0,je.Z)((function(e){return e.setMemberResult})),g=(0,b.E)((function(e){return e.agentResult})),m=(0,r.useState)(0),v=p()(m,2),h=v[0],y=v[1],x=(0,r.useState)(""),C=p()(x,2),M=C[0],w=C[1],S=(0,r.useState)(!1),R=p()(S,2),T=R[0],A=R[1],E=(0,r.useState)([]),q=p()(E,2),F=q[0],P=q[1],I=(0,r.useRef)(null),U=(0,r.useState)(0),O=p()(U,2),N=O[0],z=O[1],L=(0,r.useState)(!0),V=p()(L,2),D=V[0],B=V[1],W=(0,r.useState)(!1),H=p()(W,2),_=H[0],Q=H[1],G=(0,r.useState)(0),X=p()(G,2),J=X[0],K=X[1],Y=(0,r.useState)(!0),ee=p()(Y,2),te=ee[0],ne=ee[1],oe=(0,r.useState)(!1),re=p()(oe,2),ae=re[0],ie=re[1];(0,r.useEffect)((function(){t&&(console.log("Modal opened, current agent data:",g),console.log("Current member data:",u))}),[t,g,u]),(0,r.useEffect)((function(){return function(){I.current&&clearTimeout(I.current)}}),[]);var se=(0,r.useMemo)((function(){var e=g.data.content.map((function(e){var t;return(null===(t=e.member)||void 0===t?void 0:t.uid)||e.memberUid})).filter((function(e){return e}));return console.log("Existing agent member UIDs:",e),console.log("Agent result data:",g.data.content),e}),[g]),le=(0,r.useMemo)((function(){var e,t,n=[],o=M.trim()?F:u.data.content;console.log("Total members:",o.length),console.log("Existing agent member UIDs:",se),console.log("Using search results:",!!M.trim());for(var r=0;r<o.length;r++){var a=o[r];if(se.includes(a.uid))console.log("Filtering out member:",a.nickname,a.uid);else{var i={title:"",value:"",children:[]};(t=i).title=(e=a).nickname,t.value=e.uid,n.push(i)}}return console.log("Filtered tree data:",n),n}),[u,F,M,se]),ue=function(){var e=f()(l()().mark((function e(t){var n,o,r,a,i=arguments;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],console.log("handleSearch:",t,"isLoadMore:",n),t.trim()||n){e.next=7;break}return P([]),z(0),B(!0),e.abrupt("return");case 7:return n?Q(!0):A(!0),e.prev=8,o={pageNumber:n?N+1:0,pageSize:20,orgUid:null==s?void 0:s.uid,searchText:t.trim()},e.next=12,(0,Me.z_)(o);case 12:r=e.sent,console.log("handleSearch Search members response:",r,o),200===r.code?(a=r.data.content||[],n?(P((function(e){return[].concat(Ce()(e),Ce()(a))})),z(N+1)):(P(a),z(0)),B(!r.data.last)):(console.error("handleSearch Search failed:",r.message),n||P([])),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),console.error("Search error:",e.t0),n||P([]);case 21:return e.prev=21,n?Q(!1):A(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[8,17,21,24]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){var t=e.target.value;w(t),I.current&&clearTimeout(I.current),t.trim()?I.current=setTimeout((function(){ue(t)}),300):(P([]),z(0),B(!0))},de=function(){ue(M)},fe=function(){!_&&D&&M.trim()&&ue(M,!0)},ge=function(){var e=f()(l()().mark((function e(){var t,n,o,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae||!te){e.next=17;break}return ie(!0),e.prev=2,t={pageNumber:J+1,pageSize:20,orgUid:null==s?void 0:s.uid},e.next=6,(0,Me.z_)(t);case 6:n=e.sent,console.log("Load more all members response:",n),200===n.code&&(o=n.data.content||[],r=[].concat(Ce()(u.data.content),Ce()(o)),d(c()(c()({},u),{},{data:c()(c()({},u.data),{},{content:r})})),K(J+1),ne(!n.data.last)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Load more all members error:",e.t0);case 14:return e.prev=14,ie(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsx)("div",{children:(0,Z.jsx)(he.Z,{title:"ÂàõÂª∫ÂÆ¢Êúç",open:t,forceRender:!0,onOk:function(){console.log("handleOk"),i.validateFields().then((function(e){console.log("form values:",e);var t=i.getFieldValue("memberUids"),n=i.getFieldValue("nickname"),r=i.getFieldValue("email"),a=i.getFieldValue("mobile"),l=M.trim()?F:u.data.content,c=[];if(1===t.length){var d={nickname:n,email:r,mobile:a,memberUid:t[0],orgUid:null==s?void 0:s.uid};c.push(d)}else t.forEach((function(e){var t=l.find((function(t){return t.uid===e}));if(t){var n={nickname:t.nickname,email:t.email,mobile:t.mobile,memberUid:e,orgUid:null==s?void 0:s.uid};c.push(n)}}));console.log("agents:",c),o(c)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){console.log("handleCancel"),n()},children:(0,Z.jsxs)(we.ZP,{form:i,name:"agentForm",style:{maxWidth:400},submitter:!1,children:[(0,Z.jsx)(ke.Z,{label:"ÁªëÂÆöÊàêÂëò",name:"memberUids",tooltip:"ËØ∑ÂÖàÂà∞ÁªÑÁªá-„ÄãÊàêÂëò-„ÄãÂàõÂª∫ÊàêÂëòÔºåÂ∑≤ÂàõÂª∫ËøáÂÆ¢ÊúçÁöÑÊàêÂëòÂ∞ÜË¢´ËøáÊª§",rules:[{required:!0,message:"ËØ∑ÈÄâÊã©ÊàêÂëò!"}],fieldProps:{multiple:!0,treeDefaultExpandAll:!0,placeholder:"ËØ∑ÈÄâÊã©ÊàêÂëòÔºàÂèØÂ§öÈÄâÔºâ",onChange:function(e){console.log("onTreeSelectChange:",e),y(e.length);var t=M.trim()?F:u.data.content;if(0===e.length)i.setFieldsValue({nickname:"",email:"",mobile:""});else if(1===e.length){var n=t.find((function(t){return t.uid===e[0]}));n&&i.setFieldsValue({nickname:n.nickname||"",email:n.email||"",mobile:n.mobile||""})}else{var o=t.filter((function(t){return e.includes(t.uid)})),r=o.map((function(e){return e.nickname})).filter(Boolean).join(", "),a=o.map((function(e){return e.email})).filter(Boolean).join(", "),s=o.map((function(e){return e.mobile})).filter(Boolean).join(", ");i.setFieldsValue({nickname:r,email:a,mobile:s})}},treeData:le,dropdownRender:function(e){return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{style:{padding:"8px",borderBottom:"1px solid #f0f0f0"},children:(0,Z.jsx)(Ze.Z,{placeholder:"ÊêúÁ¥¢ÊàêÂëò",value:M,onChange:ce,onPressEnter:function(){return de()},suffix:(0,Z.jsx)(Se.Z,{onClick:de,style:{cursor:"pointer",color:T?"#1890ff":void 0},spin:T}),allowClear:!0,size:"small"})}),e,(M.trim()?D:te)&&(0,Z.jsx)("div",{style:{padding:"8px",textAlign:"center",borderTop:"1px solid #f0f0f0"},children:(0,Z.jsx)(k.ZP,{type:"link",size:"small",loading:M.trim()?_:ae,onClick:M.trim()?fe:ge,disabled:M.trim()?_:ae,children:(M.trim()?_:ae)?"Âä†ËΩΩ‰∏≠...":"Âä†ËΩΩÊõ¥Â§ö"})})]})}}}),(0,Z.jsx)(j.Z,{label:"ÊòµÁß∞",name:"nickname",disabled:h>1,tooltip:h>1?"Â§öÈÄâÊ®°Âºè‰∏ãÊòµÁß∞Â∞ÜËá™Âä®‰ªéÈÄâ‰∏≠ÁöÑÊàêÂëò‰ø°ÊÅØ‰∏≠Ëé∑Âèñ":"ÊòµÁß∞Â∞ÜËá™Âä®‰ªéÈÄâ‰∏≠ÁöÑÊàêÂëò‰ø°ÊÅØ‰∏≠Ëé∑Âèñ"}),(0,Z.jsx)(j.Z,{label:"ÈÇÆÁÆ±",name:"email",disabled:h>1,tooltip:h>1?"Â§öÈÄâÊ®°Âºè‰∏ãÈÇÆÁÆ±Â∞ÜËá™Âä®‰ªéÈÄâ‰∏≠ÁöÑÊàêÂëò‰ø°ÊÅØ‰∏≠Ëé∑Âèñ":"ÈÇÆÁÆ±Â∞ÜËá™Âä®‰ªéÈÄâ‰∏≠ÁöÑÊàêÂëò‰ø°ÊÅØ‰∏≠Ëé∑Âèñ"}),(0,Z.jsx)(j.Z,{label:"ÊâãÊú∫Âè∑",name:"mobile",disabled:h>1,tooltip:h>1?"Â§öÈÄâÊ®°Âºè‰∏ãÊâãÊú∫Âè∑Â∞ÜËá™Âä®‰ªéÈÄâ‰∏≠ÁöÑÊàêÂëò‰ø°ÊÅØ‰∏≠Ëé∑Âèñ":"ÊâãÊú∫Âè∑Â∞ÜËá™Âä®‰ªéÈÄâ‰∏≠ÁöÑÊàêÂëò‰ø°ÊÅØ‰∏≠Ëé∑Âèñ"})]})})})},Te=function(){var e=(0,i.useIntl)(),t=(0,r.useRef)(!1),n=(0,h.Z)(),o=n.translateString,a=n.translateStringTranct,s=(0,pe.Z)().isDarkMode,u=(0,r.useState)(!1),c=p()(u,2),d=c[0],g=c[1],y=(0,$.u)((function(e){return e.currentOrg})),x=(0,je.Z)((function(e){return e.setMemberResult})),C=(0,b.E)((function(e){return{agentResult:e.agentResult,currentAgent:e.currentAgent,insertAgent:e.insertAgent,setAgentResult:e.setAgentResult,setCurrentAgent:e.setCurrentAgent,deleteCurrentAgent:e.deleteCurrentAgent}})),j=C.agentResult,M=C.currentAgent,S=C.insertAgent,T=C.setAgentResult,A=C.setCurrentAgent,E=C.deleteCurrentAgent,q=he.Z.useModal(),F=p()(q,2),P=F[0],I=F[1],U=function(){var t=f()(l()().mark((function t(n){var o;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("delete agent",n),m.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),t.next=4,(0,v.Lr)(n);case 4:o=t.sent,console.log("delete agent response",o),200===o.code?(m.yw.destroy(),m.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),E(n.uid)):(m.yw.destroy(),m.yw.error(o.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=f()(l()().mark((function e(){var n,o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=3;break}return console.log("isLoading: 1",t.current),e.abrupt("return");case 3:return t.current=!0,m.yw.loading("loading"),n={pageNumber:0,pageSize:50,sortDirection:"ascend",orgUid:null==y?void 0:y.uid},e.next=8,(0,v._t)(n);case 8:o=e.sent,console.log("queryAgentsByOrg: ",o),200===o.code?(m.yw.destroy(),T(o),(!M&&o.data.content.length>0||M&&o.data.content.length>0&&-1===o.data.content.findIndex((function(e){return e.uid===(null==M?void 0:M.uid)})))&&A(o.data.content[0])):(m.yw.destroy(),m.yw.error(a(o.message))),t.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=f()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,orgUid:null==y?void 0:y.uid},e.next=3,(0,Me.z_)(t);case 3:n=e.sent,console.log("queryAllMembers:",t,n),200===n.code?x(n):m.yw.error(a(n.message));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){O(),N()}),[]);var z=function(){var t=f()(l()().mark((function t(n){var o,r,a,i,s,u;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("save agents",n),m.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating"})),o=0,r=0,a=ge()(n),t.prev=5,a.s();case 7:if((i=a.n()).done){t.next=23;break}return s=i.value,t.prev=9,t.next=12,(0,v.x_)(s);case 12:u=t.sent,console.log("create agent:",u),200===u.code?(S(u.data),o++):(r++,console.error("Failed to create agent:",u.message)),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(9),r++,console.error("Error creating agent:",t.t0);case 21:t.next=7;break;case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(5),a.e(t.t1);case 28:return t.prev=28,a.f(),t.finish(28);case 31:m.yw.destroy(),o>0&&m.yw.success("".concat(e.formatMessage({id:"create.success"})," ").concat(o," ‰∏™ÂÆ¢Êúç")),r>0&&m.yw.error("ÂàõÂª∫Â§±Ë¥• ".concat(r," ‰∏™ÂÆ¢Êúç")),o>0&&g(!1);case 35:case"end":return t.stop()}}),t,null,[[5,25,28,31],[9,17]])})));return function(e){return t.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(be.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,Z.jsx)(k.ZP,{size:"small",type:"primary",icon:(0,Z.jsx)(ve.Z,{}),onClick:function(){g(!0)},children:e.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,Z.jsx)(k.ZP,{size:"small",onClick:O,children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,Z.jsx)(k.ZP,{onClick:function(){return function(t){P.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,Z.jsx)(me.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"„Äê").concat(o(t.nickname),"„ÄëÔºü"),onOk:function(){U(t)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(M)},size:"small",danger:!0,disabled:""===(null==M?void 0:M.uid),children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,Z.jsx)(ye.Z,{itemLayout:"horizontal",dataSource:j.data.content,renderItem:function(t,n){return(0,Z.jsx)(ye.Z.Item,{style:M.uid===t.uid?{backgroundColor:s?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){A(t)},children:(0,Z.jsx)(ye.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,Z.jsx)(w.C,{src:t.avatar}),title:(0,Z.jsx)(Z.Fragment,{children:a(t.nickname)}),description:(o=t,(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("span",{style:{color:"#999999",fontSize:12},children:[o.status===R.Ra4&&"[üòÄ-".concat(e.formatMessage({id:"agent.status.online"}),"]"),o.status===R.LZ1&&"[üîª-".concat(e.formatMessage({id:"agent.status.offline"}),"]"),o.status===R.tU$&&"[üèÉ‚Äç‚ôÄÔ∏è-".concat(e.formatMessage({id:"agent.status.busy"}),"]"),o.connected?" ‚úÖ".concat(e.formatMessage({id:"agent.connection.success"})):" ‚ùå".concat(e.formatMessage({id:"agent.connection.failed"}))]})}))})},t.uid);var o}}),d&&(0,Z.jsx)(Re,{open:d,onClose:function(){g(!1)},onSubmit:z}),I]})},Ae=n(96865),Ee=o.Z.Sider,qe=o.Z.Content,Fe=function(){var e=(0,Ae.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth;return(0,r.useEffect)((function(){}),[]),(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(Ee,{width:n,style:t,children:(0,Z.jsx)(Te,{})}),(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(qe,{children:(0,Z.jsx)(de,{})})})]})}},19981:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(55735),r=n(44435),a=n(83642),i=n(83890),s=(0,r.Ue)()((0,a.mW)((0,a.tJ)((0,i.n)((function(e,t){return{memberResult:{data:{content:[],totalElements:0}},insertMember:function(t){e((function(e){e.memberResult.data.content.unshift(t)}))},updateMember:function(t){e((function(e){var n=e.memberResult.data.content,o=n.findIndex((function(e){return e.uid===t.uid}));-1!==o?n[o]=t:console.warn("Member with uid ".concat(t.uid," not found."))}))},deleteMember:function(t){e((function(e){var n=e.memberResult.data.content,o=n.findIndex((function(e){return e.uid===t.uid}));-1!==o?n.splice(o,1):console.warn("Member with uid ".concat(t.uid," not found."))}))},setMemberResult:function(t){e({memberResult:t})},deleteMemberCache:function(){return e({},!0)}}})),{name:o.PQL})))},32943:function(e,t,n){n.d(t,{Z:function(){return U}});var o=n(44194),r=n(58644),a=n(92520),i=n(14377),s=n(64985),l=n(18701),u=n(51865),c=n.n(u),d=n(77588),f=n(67762),g=n(34221),p=n(79145),m=n(37167),v=n(47825),h=n(88874),b=n(65759);const y=(e,t,n,o,r)=>({background:e,border:`${(0,v.bf)(o.lineWidth)} ${o.lineType} ${t}`,[`${r}-icon`]:{color:n}}),x=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:o,marginSM:r,fontSize:a,fontSizeLG:i,lineHeight:s,borderRadiusLG:l,motionEaseInOutCirc:u,withDescriptionIconSize:c,colorText:d,colorTextHeading:f,withDescriptionPadding:g,defaultPadding:p}=e;return{[t]:Object.assign(Object.assign({},(0,h.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:l,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:a,lineHeight:s},"&-message":{color:f},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${u}, opacity ${n} ${u},\n        padding-top ${n} ${u}, padding-bottom ${n} ${u},\n        margin-bottom ${n} ${u}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:g,[`${t}-icon`]:{marginInlineEnd:r,fontSize:c,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:f,fontSize:i},[`${t}-description`]:{display:"block",color:d}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},C=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:a,colorWarningBorder:i,colorWarningBg:s,colorError:l,colorErrorBorder:u,colorErrorBg:c,colorInfo:d,colorInfoBorder:f,colorInfoBg:g}=e;return{[t]:{"&-success":y(r,o,n,e,t),"&-info":y(g,f,d,e,t),"&-warning":y(s,i,a,e,t),"&-error":Object.assign(Object.assign({},y(c,u,l,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},j=e=>{const{componentCls:t,iconCls:n,motionDurationMid:o,marginXS:r,fontSizeIcon:a,colorIcon:i,colorIconHover:s}=e;return{[t]:{"&-action":{marginInlineStart:r},[`${t}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:a,lineHeight:(0,v.bf)(a),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:i,transition:`color ${o}`,"&:hover":{color:s}}},"&-close-text":{color:i,transition:`color ${o}`,"&:hover":{color:s}}}}};var M=(0,b.I$)("Alert",(e=>[x(e),C(e),j(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}))),w=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const k={success:r.Z,info:l.Z,error:a.Z,warning:s.Z},Z=e=>{const{icon:t,prefixCls:n,type:r}=e,a=k[r]||null;return t?(0,p.wm)(t,o.createElement("span",{className:`${n}-icon`},t),(()=>({className:c()(`${n}-icon`,t.props.className)}))):o.createElement(a,{className:`${n}-icon`})},S=e=>{const{isClosable:t,prefixCls:n,closeIcon:r,handleClose:a,ariaProps:s}=e,l=!0===r||void 0===r?o.createElement(i.Z,null):r;return t?o.createElement("button",Object.assign({type:"button",onClick:a,className:`${n}-close-icon`,tabIndex:0},s),l):null},R=o.forwardRef(((e,t)=>{const{description:n,prefixCls:r,message:a,banner:i,className:s,rootClassName:l,style:u,onMouseEnter:p,onMouseLeave:v,onClick:h,afterClose:b,showIcon:y,closable:x,closeText:C,closeIcon:j,action:k,id:R}=e,T=w(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[A,E]=o.useState(!1);const q=o.useRef(null);o.useImperativeHandle(t,(()=>({nativeElement:q.current})));const{getPrefixCls:F,direction:P,alert:I}=o.useContext(m.E_),$=F("alert",r),[U,O,N]=M($),z=t=>{var n;E(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},L=o.useMemo((()=>void 0!==e.type?e.type:i?"warning":"info"),[e.type,i]),V=o.useMemo((()=>!("object"!=typeof x||!x.closeIcon)||(!!C||("boolean"==typeof x?x:!1!==j&&null!=j||!!(null==I?void 0:I.closable)))),[C,j,x,null==I?void 0:I.closable]),D=!(!i||void 0!==y)||y,B=c()($,`${$}-${L}`,{[`${$}-with-description`]:!!n,[`${$}-no-icon`]:!D,[`${$}-banner`]:!!i,[`${$}-rtl`]:"rtl"===P},null==I?void 0:I.className,s,l,N,O),W=(0,f.Z)(T,{aria:!0,data:!0}),H=o.useMemo((()=>{var e,t;return"object"==typeof x&&x.closeIcon?x.closeIcon:C||(void 0!==j?j:"object"==typeof(null==I?void 0:I.closable)&&(null===(e=null==I?void 0:I.closable)||void 0===e?void 0:e.closeIcon)?null===(t=null==I?void 0:I.closable)||void 0===t?void 0:t.closeIcon:null==I?void 0:I.closeIcon)}),[j,x,C,null==I?void 0:I.closeIcon]),_=o.useMemo((()=>{const e=null!=x?x:null==I?void 0:I.closable;if("object"==typeof e){const{closeIcon:t}=e;return w(e,["closeIcon"])}return{}}),[x,null==I?void 0:I.closable]);return U(o.createElement(d.ZP,{visible:!A,motionName:`${$}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:b},((t,r)=>{let{className:i,style:s}=t;return o.createElement("div",Object.assign({id:R,ref:(0,g.sQ)(q,r),"data-show":!A,className:c()(B,i),style:Object.assign(Object.assign(Object.assign({},null==I?void 0:I.style),u),s),onMouseEnter:p,onMouseLeave:v,onClick:h,role:"alert"},W),D?o.createElement(Z,{description:n,icon:e.icon,prefixCls:$,type:L}):null,o.createElement("div",{className:`${$}-content`},a?o.createElement("div",{className:`${$}-message`},a):null,n?o.createElement("div",{className:`${$}-description`},n):null),k?o.createElement("div",{className:`${$}-action`},k):null,o.createElement(S,{isClosable:V,prefixCls:$,closeIcon:H,handleClose:z,ariaProps:_}))})))}));var T=R,A=n(74592),E=n(32099),q=n(67019),F=n(14755);let P=function(e){function t(){var e;return(0,A.Z)(this,t),(e=(0,q.Z)(this,t,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,F.Z)(t,e),(0,E.Z)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:n,children:r}=this.props,{error:a,info:i}=this.state,s=(null==i?void 0:i.componentStack)||null,l=void 0===e?(a||"").toString():e,u=void 0===t?s:t;return a?o.createElement(T,{id:n,type:"error",message:l,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},u)}):r}}])}(o.Component);var I=P;const $=T;$.ErrorBoundary=I;var U=$},67019:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(42885),r=n(19567),a=n(27842);function i(e,t,n){return t=(0,o.Z)(t),(0,a.Z)(e,(0,r.Z)()?Reflect.construct(t,n||[],(0,o.Z)(e).constructor):t.apply(e,n))}}}]);