"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8472],{74840:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(83910),r=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},a=n(54183),o=function(e,t){return r.createElement(a.Z,(0,i.Z)({},e,{ref:t,icon:s}))};var l=r.forwardRef(o)},56663:function(e,t,n){var i=n(90819),r=n.n(i),s=n(89933),a=n.n(s),o=n(45332),l=n.n(o),u=n(73614),d=n(19433),c=n(12864),g=n(7704),f=n(91361),v=n(98830),m=n(39497),p=n(71256),h=n(25784),x=n(2250),w=n(14906),b=n(44194),S=n(11329),y=n(23753),M=n(31549);t.Z=function(e){var t,n,i,s,o=h.A.useForm(),j=l()(o,1)[0],k=(0,w.useIntl)(),C=(0,f.Z)().translateString,Z=(0,v.u)((function(e){return e.currentOrg})),F=(0,b.useState)(),U=l()(F,2),q=U[0],T=U[1],P=(0,b.useState)(),R=l()(P,2),A=R[0],K=R[1],I=(0,b.useState)(),z=l()(I,2),E=z[0],D=z[1],L=(0,b.useState)(""),N=l()(L,2),O=N[0],V=N[1],B=(0,b.useRef)(!1),H=(0,b.useRef)(),J=(0,b.useMemo)((function(){var t;return null!==(t=e.serviceSettings)&&void 0!==t?t:{}}),[e.serviceSettings]),W=(0,b.useMemo)((function(){var e,t;return null!==(e=null!==(t=null==J?void 0:J.draft)&&void 0!==t?t:null==J?void 0:J.live)&&void 0!==e?e:void 0}),[J]),Q=(0,b.useCallback)((function(t){var n;null===(n=e.onServiceSettingsChange)||void 0===n||n.call(e,t)}),[e.onServiceSettingsChange]),G=(0,b.useCallback)((function(e){j.setFieldValue("welcomeTip",e),Q({welcomeTip:e})}),[j,Q]);(0,b.useEffect)((function(){if(null!=Z&&Z.uid&&(H.current!==Z.uid&&(H.current=Z.uid,B.current=!1),!B.current)){B.current=!0;var e=function(){var e=a()(r()().mark((function e(){var t,n,i,s,a,o,l;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(k.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,type:m.QPQ,orgUid:Z.uid},e.next=4,(0,g.AP)(t);case 4:n=e.sent,y.Z.debug("TabServiceWelcome queryKbasesByOrg:",n,t),d.yw.destroy(),200===n.code?(K(n),a=(null===(i=n.data)||void 0===i?void 0:i.content)||[],o=null==W?void 0:W.welcomeKbUid,(l=o||E||(null===(s=a[0])||void 0===s?void 0:s.uid))&&(D(l),j.setFieldValue("welcomeKbUid",l),o!==l&&Q({welcomeKbUid:l}))):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}}),[null==Z?void 0:Z.uid,k,null==W?void 0:W.welcomeKbUid,E,j,Q]),(0,b.useEffect)((function(){if(null!=Z&&Z.uid&&E){var e=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(k.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:Z.uid,kbUid:E},e.next=4,(0,c.pf)(t);case 4:n=e.sent,y.Z.debug("TabServiceWelcome queryFaqsByOrg:",n,t),d.yw.destroy(),200===n.code?T(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}}),[null==Z?void 0:Z.uid,E,k]),(0,b.useEffect)((function(){if(W){var e=null==W?void 0:W.welcomeFaqs,t=Array.isArray(W.welcomeFaqUids)?W.welcomeFaqUids:Array.isArray(e)?e.map((function(e){return null==e?void 0:e.uid})).filter(Boolean):[];j.setFieldValue("welcomeFaqUids",t)}}),[j,null==q||null===(t=q.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length,null==W?void 0:W.welcomeFaqUids,W]);var Y=(0,b.useCallback)((function(e){D(e),j.setFieldValue("welcomeFaqUids",[]),Q({welcomeKbUid:e,welcomeFaqUids:[]})}),[Q,j]);return(0,b.useEffect)((function(){var e=C(null==W?void 0:W.welcomeTip);void 0!==e&&O!==e&&V(e),null!=W&&W.welcomeKbUid&&(j.setFieldValue("welcomeKbUid",W.welcomeKbUid),E!==W.welcomeKbUid&&D(W.welcomeKbUid))}),[C,null==W?void 0:W.welcomeTip,null==W?void 0:W.welcomeKbUid,O,j,E,null==A||null===(n=A.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length]),(0,M.jsxs)(h.A,{form:j,submitter:!1,style:{marginLeft:"20px"},children:[(0,M.jsx)(h.A.Item,{name:"welcomeTip",label:(0,M.jsxs)("span",{children:[k.formatMessage({id:"agent.settings.welcome.tip"}),(0,M.jsx)(u.Z,{type:"service",keys:["welcomeTip"],live:null==J?void 0:J.live,draft:null==J?void 0:J.draft})]}),tooltip:k.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:k.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,M.jsx)(S.Z,{placeholder:k.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:O,toolbarKeys:(0,p.eD)(),style:{height:"150px",width:"600px"},maxLength:200,onChange:G})}),(0,M.jsx)(x.Z,{name:"welcomeKbUid",width:"md",label:(0,M.jsxs)("span",{children:[k.formatMessage({id:"menu.kbase.select",defaultMessage:"é€‰æ‹©æ¬¢è¿è¯­å¸¸è§é—®é¢˜çŸ¥è¯†åº“"}),(0,M.jsx)(u.Z,{type:"service",keys:["welcomeKbUid"],live:null==J?void 0:J.live,draft:null==J?void 0:J.draft})]}),options:null==A||null===(i=A.data)||void 0===i||null===(i=i.content)||void 0===i?void 0:i.map((function(e){return{label:C(e.name)||e.name,value:e.uid}})),fieldProps:{onChange:function(e){return Y(e)},allowClear:!0,placeholder:(0,M.jsx)(w.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}}),(0,M.jsx)(x.Z,{name:"welcomeFaqUids",width:"md",label:(0,M.jsxs)("span",{children:[k.formatMessage({id:"menu.kbase.faq.welcome"}),(0,M.jsx)(u.Z,{type:"service",keys:["welcomeFaqUids"],live:null==J?void 0:J.live,draft:null==J?void 0:J.draft})]}),options:null==q||null===(s=q.data)||void 0===s||null===(s=s.content)||void 0===s?void 0:s.map((function(e){return{label:C(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(w.FormattedMessage,{id:"choose",defaultMessage:"Choose"}),onChange:function(e){return Q({welcomeFaqUids:e})}}})]})}},12305:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var i=n(44194),r=n(67738),s=n(14906),a=n(76711),o=n.n(a),l=n(90819),u=n.n(l),d=n(89933),c=n.n(d),g=n(73193),f=n.n(g),v=n(45332),m=n.n(v),p=n(77033),h=n(82770),x=n(39487),w=n(32525),b=n(50716),S=n(92354),y=n(81739),M=n(66431),j=n(63649),k=n(74840),C=n(29337),Z=n(68779),F=n(12322),U=n(56482),q=n(10162),T=n(90727),P=n(59304),R=n(54881),A=n(47944),K=n(80556),I=n(55785),z=n(49764),E=n(19433),D=n(88894),L=n(98830),N=n(75112),O=n(14597),V=n(99665),B=n(66547),H=(n(84262),n(94212),n(24479),n(90631)),J=n(1460),W=n(56663),Q=n(25197),G=n(27153),Y=n(23753),_=n(31549),$="welcome",X=function(){var e=(0,s.useIntl)(),t=(0,L.u)((function(e){return e.currentOrg})),n=(0,N.Z)().leftSiderStyle,a=(0,O.Z)().isDarkMode,l=(0,i.useState)(!1),d=m()(l,2),g=d[0],v=d[1],X=(0,i.useState)([]),ee=m()(X,2),te=ee[0],ne=ee[1],ie=(0,i.useState)(),re=m()(ie,2),se=re[0],ae=re[1],oe=(0,i.useState)(""),le=m()(oe,2),ue=le[0],de=le[1],ce=(0,i.useState)($),ge=m()(ce,2),fe=ge[0],ve=ge[1],me=(0,i.useState)(!1),pe=m()(me,2),he=pe[0],xe=pe[1],we=(0,i.useState)(null),be=m()(we,2),Se=be[0],ye=be[1],Me=(0,i.useMemo)((function(){return te.find((function(e){return e.uid===se}))||null}),[te,se]),je=(0,i.useState)(!1),ke=m()(je,2),Ce=ke[0],Ze=ke[1],Fe=(0,i.useState)(!1),Ue=m()(Fe,2),qe=Ue[0],Te=Ue[1],Pe=(0,i.useState)(!1),Re=m()(Pe,2),Ae=Re[0],Ke=Re[1],Ie=(0,i.useRef)(""),ze=(0,V.z)((function(e){return{setCurrentRobotSettings:e.setCurrentRobotSettings,currentRobotSettings:e.currentRobotSettings}})),Ee=ze.setCurrentRobotSettings,De=ze.currentRobotSettings,Le=(0,i.useMemo)((function(){var e;return null!==(e=null!=De?De:Me)&&void 0!==e?e:null}),[De,Me]),Ne=(0,i.useCallback)((function(e){if(De){var t=De.draftServiceSettings||De.serviceSettings||{};Ee(f()(f()({},De),{},{draftServiceSettings:f()(f()({},t),e)}))}}),[De,Ee]),Oe=(0,i.useCallback)((function(e){if(De){var t=De.draftInviteSettings||De.inviteSettings||{};Ee(f()(f()({},De),{},{draftInviteSettings:f()(f()({},t),e)}))}}),[De,Ee]),Ve=(0,i.useMemo)((function(){if(!ue)return te;var e=ue.toLowerCase();return te.filter((function(t){var n=(t.name||t.uid||"").toLowerCase(),i=(t.description||"").toLowerCase();return n.includes(e)||i.includes(e)}))}),[te,ue]),Be=(0,i.useCallback)(function(){var e=c()(u()().mark((function e(n,i){var r,s,a,o,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.uid){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.prev=3,s=(null!=n?n:"").trim(),a={orgUid:t.uid,pageNumber:0,pageSize:100,searchText:s||void 0},e.next=8,(0,D.VW)(a);case 8:o=e.sent,Y.Z.debug("åŠ è½½æœºå™¨äººé…ç½®æ¨¡æ¿åˆ—è¡¨: ",o,a),l=(null==o||null===(r=o.data)||void 0===r?void 0:r.content)||[],ne(l),!(l.length>0)||se&&l.some((function(e){return e.uid===se}))||(ae(l[0].uid),null!=i&&i.keepActive||ve($));case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[null==t?void 0:t.uid,se]),He=(0,i.useCallback)((function(e){Be(null!=e?e:ue)}),[Be,ue]);(0,i.useEffect)((function(){Be(ue)}),[null==t?void 0:t.uid]),(0,i.useEffect)((function(){Me?(Ee(Me),Ie.current=JSON.stringify(null!=Me?Me:{}),Ke(!1)):(Ee(null),Ie.current=JSON.stringify({}),Ke(!1))}),[null==Me?void 0:Me.uid]),(0,i.useEffect)((function(){if(Me)try{var e,t,n=JSON.stringify(null!=De?De:{}),i=n!==Ie.current;Y.Z.debug("ğŸ” [Dirty Check]",{isDirty:i,selectedUid:null==Me?void 0:Me.uid,currentWelcomeTip:(null==De||null===(e=De.draftServiceSettings)||void 0===e?void 0:e.welcomeTip)||(null==De||null===(t=De.serviceSettings)||void 0===t?void 0:t.welcomeTip),originalLength:Ie.current.length,nowLength:n.length}),Ke(i)}catch(e){Ke(!0)}}),[De,null==Me?void 0:Me.uid]);var Je=function(){var n=c()(u()().mark((function n(i){var r,s,a;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=(r=null!=i?i:Me)&&r.uid){n.next=3;break}return n.abrupt("return");case 3:return s={uid:r.uid,orgUid:null==t?void 0:t.uid,pageNumber:0,pageSize:100},n.next=6,(0,D.r$)(s);case 6:(a=n.sent)&&200===a.code?(E.yw.success(e.formatMessage({id:"common.deleted",defaultMessage:"åˆ é™¤æˆåŠŸ"})),Be(ue)):E.yw.error((null==a?void 0:a.message)||"åˆ é™¤å¤±è´¥");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),We=function(){var n=c()(u()().mark((function n(i,r){var s;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,D.sK)({uid:i,orgUid:null==t?void 0:t.uid,enabled:r});case 3:(s=n.sent)&&200===s.code?(E.yw.success(e.formatMessage({id:r?"common.enabled":"common.disabled",defaultMessage:r?"å·²å¯ç”¨":"å·²åœç”¨"})),Be(ue)):E.yw.error((null==s?void 0:s.message)||"æ“ä½œå¤±è´¥"),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("åˆ‡æ¢å¯ç”¨çŠ¶æ€å¤±è´¥:",n.t0),E.yw.error("æ“ä½œå¤±è´¥");case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),Qe=function(e,t){if(e){var n={};return t.forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n}},Ge=function(e){if(e){var t=Qe(e,["language","autoPopup","showTopTip","topTip","topTipStart","topTipEnd","showRateBtn","autoInviteRate","inviteRateTip","rateMsgCount","showPreForm","preFormRequired","preForm","showPreSearch","showHistory","showInputAssociation","showCaptcha","welcomeTip","welcomeFaqUids","welcomeKbUid","enableWorkflow","workflowUid","autoCloseMin","autoCloseTip","agentCloseTip","queueTip","leavemsgTip","showRightIframe","rightIframeUrl","showFaqs","faqUids","faqKbUid","showQuickFaqs","quickFaqUids","quickFaqKbUid","showGuessFaqs","guessFaqUids","showHotFaqs","hotFaqUids","showShortcutFaqs","shortcutFaqUids","relatedQuestionGuide","enableProactiveTrigger","noResponseTimeout","proactiveMessage","maxProactiveCount","proactiveInterval","triggerConditions","proactiveFaqUids","showLogo","validateUntil"]),n=function(n,i){if(void 0===t[n]){var r=null==e?void 0:e[i];if(Array.isArray(r)){var s=r.map((function(e){return null==e?void 0:e.uid})).filter(Boolean);s.length>0&&(t[n]=s)}}};n("welcomeFaqUids","welcomeFaqs"),n("faqUids","faqs"),n("quickFaqUids","quickFaqs"),n("guessFaqUids","guessFaqs"),n("hotFaqUids","hotFaqs"),n("shortcutFaqUids","shortcutFaqs"),n("proactiveFaqUids","proactiveFaqs");var i=function(e){if(e)return Qe(e,["smile","image","file","rate","leavemsg","orderSelector","ticket","audio","video","tel","order"])}(e.toolbar);return f()(f()({},t),i?{toolbar:i}:{})}},Ye=function(e){if(e)return Qe(e,["name","description","defaultTemplate","show","text","icon","delay","loop","loopDelay","loopCount","messageList","targetedInvite","targetedInviteUrls","smartTrigger","pageStayTriggerSeconds","scrollTrigger","scrollTriggerPerceninviteSettinge","exitIntentTrigger","referrerTrigger","referrerPatterns","deviceTypes","visitorSegmentation","newVisitorMessage","returningVisitorMessage","vipVisitorMessage","inviteStyle","inviteAnimation","abTesting"])},_e=function(e){if(e)return Qe(e,["name","description","color","order"])},$e=function(e){if(e)return Qe(e,["name","description","defaultTemplate","enabled","rateDownTagList","maxTagSelection","allowCustomFeedback","maxFeedbackLength","requireFollowup","showThankYouMessage","thankYouMessage","triggerSatisfactionSurvey","markForQualityInspection","offerHumanAgent"])},Xe=function(){var n=c()(u()().mark((function n(){var i,r,s,a,o,l;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=Me&&Me.uid){n.next=3;break}return E.yw.warning(e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})),n.abrupt("return");case 3:return Ze(!0),n.prev=4,i=De&&De.uid===Me.uid?De:Me,r=function(e,t){return f()(f()({},e||{}),t||{})},s={uid:Me.uid,orgUid:null==t?void 0:t.uid,name:null==i?void 0:i.name,description:null==i?void 0:i.description,isDefault:null==i?void 0:i.isDefault,enabled:null==i?void 0:i.enabled,serviceSettings:Ge(r(null==i?void 0:i.serviceSettings,null==i?void 0:i.draftServiceSettings)),inviteSettings:Ye(r(null==i?void 0:i.inviteSettings,null==i?void 0:i.draftInviteSettings)),intentionSettings:_e(r(null==i?void 0:i.intentionSettings,null==i?void 0:i.draftIntentionSettings)),rateDownSettings:$e(r(null==i?void 0:i.rateDownSettings,null==i?void 0:i.draftRateDownSettings))},n.next=10,(0,D.sK)(s);case 10:a=n.sent,Y.Z.debug("ä¿å­˜æœºå™¨äººé…ç½®æ¨¡æ¿: ",a,s),a&&200===a.code?(E.yw.success(e.formatMessage({id:"common.saved",defaultMessage:"ä¿å­˜æˆåŠŸ"})),Ie.current=JSON.stringify(null!==(o=null!==(l=a.data)&&void 0!==l?l:i)&&void 0!==o?o:{}),Ke(!1),Be(ue)):E.yw.error((null==a?void 0:a.message)||"ä¿å­˜å¤±è´¥"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("ä¿å­˜å¤±è´¥:",n.t0),E.yw.error("ä¿å­˜å¤±è´¥");case 19:return n.prev=19,Ze(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,15,19,22]])})));return function(){return n.apply(this,arguments)}}(),et=function(){var n=c()(u()().mark((function n(){var i,r,s;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=Me&&Me.uid){n.next=3;break}return E.yw.warning(e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})),n.abrupt("return");case 3:if(Te(!0),n.prev=4,!Ae){n.next=8;break}return n.next=8,Xe();case 8:return i={uid:Me.uid,orgUid:null==t?void 0:t.uid},n.next=11,(0,D.KF)(i);case 11:(r=n.sent)&&200===r.code?(E.yw.success(e.formatMessage({id:"common.published",defaultMessage:"å‘å¸ƒæˆåŠŸ"})),Ie.current=JSON.stringify(null!==(s=r.data)&&void 0!==s?s:{}),Ke(!1),Be(ue,{keepActive:!0})):E.yw.error((null==r?void 0:r.message)||"å‘å¸ƒå¤±è´¥"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("å‘å¸ƒå¤±è´¥:",n.t0),E.yw.error("å‘å¸ƒå¤±è´¥");case 19:return n.prev=19,Te(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,15,19,22]])})));return function(){return n.apply(this,arguments)}}(),tt=(0,i.useMemo)((function(){return null!=Me&&Me.uid?[{key:"welcome",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(k.Z,{})," ",(0,_.jsx)(s.FormattedMessage,{id:"robot.settings.service.welcome",defaultMessage:"æ¬¢è¿è¯­è®¾ç½®"})]}),children:(0,_.jsx)(W.Z,{serviceSettings:{live:null==Le?void 0:Le.serviceSettings,draft:null==Le?void 0:Le.draftServiceSettings},onServiceSettingsChange:Ne})},{key:"tips",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(C.Z,{})," ",(0,_.jsx)(s.FormattedMessage,{id:"robot.settings.service.tips",defaultMessage:"æç¤ºä¿¡æ¯"})]}),children:(0,_.jsx)(J.Z,{variant:"robot",serviceSettings:{live:null==Le?void 0:Le.serviceSettings,draft:null==Le?void 0:Le.draftServiceSettings},onServiceSettingsChange:Ne})},{key:"service",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(Z.Z,{})," ",(0,_.jsx)(s.FormattedMessage,{id:"robot.settings.service",defaultMessage:"æœåŠ¡è®¾ç½®"})]}),children:(0,_.jsx)(H.Z,{variant:"robot",serviceSettings:{live:null==Le?void 0:Le.serviceSettings,draft:null==Le?void 0:Le.draftServiceSettings},onServiceSettingsChange:Ne})},{key:"rate",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(F.Z,{})," ",(0,_.jsx)(s.FormattedMessage,{id:"rate",defaultMessage:"Rate"})]}),children:(0,_.jsx)(G.Z,{variant:"robot",serviceSettings:{live:null==Le?void 0:Le.serviceSettings,draft:null==Le?void 0:Le.draftServiceSettings},onServiceSettingsChange:Ne})}].concat(o()([]),[{key:"right",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(U.Z,{})," ",(0,_.jsx)(s.FormattedMessage,{id:"right",defaultMessage:"Right"})]}),children:(0,_.jsx)(B.Z,{variant:"robot",serviceSettings:{live:null==Le?void 0:Le.serviceSettings,draft:null==Le?void 0:Le.draftServiceSettings},onServiceSettingsChange:Ne,settingsUid:Me.uid,isActive:"right"===fe})}],o()([]),o()([])):[]}),[null==Me?void 0:Me.uid,Le,Ne,Oe,e,fe]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(p.Z,{style:{minHeight:"calc(100vh - 160px)"},children:[(0,_.jsx)(p.Z.Panel,{defaultSize:"20%",min:"14%",max:"40%",style:n,children:(0,_.jsxs)(z.Z,{title:e.formatMessage({id:"robot.settings.templates",defaultMessage:"æ¨¡æ¿åˆ—è¡¨"}),extra:(0,_.jsx)(h.ZP,{size:"small",icon:(0,_.jsx)(q.Z,{}),type:"primary",onClick:function(){ye(null),xe(!0)},children:(0,_.jsx)(s.FormattedMessage,{id:"common.new",defaultMessage:"æ–°å»º"})}),bodyStyle:{padding:8},loading:g,children:[(0,_.jsx)("div",{style:{margin:"0 0 8px 0"},children:(0,_.jsxs)(x.Z.Compact,{style:{width:"100%"},children:[(0,_.jsx)(w.Z,{placeholder:e.formatMessage({id:"robot.settings.template.search",defaultMessage:"æœç´¢æ¨¡æ¿åç§°"}),value:ue,onChange:function(e){return de(e.target.value)},onPressEnter:function(e){e.preventDefault();var t=e.currentTarget.value;de(t),He(t)},allowClear:!0,size:"middle"}),(0,_.jsx)(h.ZP,{type:"primary",icon:(0,_.jsx)(T.Z,{}),"aria-label":e.formatMessage({id:"common.search",defaultMessage:"æœç´¢"}),onClick:function(){return He()}})]})}),(0,_.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 280px)"},children:(0,_.jsx)(b.Z,{dataSource:Ve,locale:{emptyText:(0,_.jsx)(S.Z,{description:e.formatMessage({id:"empty",defaultMessage:"æš‚æ— æ•°æ®"}),image:S.Z.PRESENTED_IMAGE_SIMPLE})},renderItem:function(e){return(0,_.jsx)(b.Z.Item,{style:se===e.uid?{backgroundColor:a?"#333333":"#dddddd",cursor:"pointer",borderRadius:6,marginBottom:8,padding:10}:{cursor:"pointer",borderRadius:6,marginBottom:8,padding:10},onClick:function(){return ae(e.uid)},children:(0,_.jsx)(b.Z.Item.Meta,{title:(0,_.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)("div",{style:{fontWeight:500,flex:1},children:e.name||e.uid}),(0,_.jsx)(x.Z,{size:4,children:e.isDefault?(0,_.jsx)(y.Z,{color:"blue",children:"é»˜è®¤"}):null})]}),description:e.description?(0,_.jsx)("div",{style:{color:a?"#aaa":"#999",fontSize:12},children:e.description}):null})},e.uid)}})})]})}),(0,_.jsx)(p.Z.Panel,{children:Me?(0,_.jsx)(z.Z,{title:(0,_.jsxs)(x.Z,{children:[(0,_.jsxs)("span",{children:[e.formatMessage({id:"robot.settings.editing",defaultMessage:"ç¼–è¾‘æ¨¡æ¿"}),": ",Me.name||Me.uid]}),(0,_.jsx)(M.Z,{checked:!!Me.enabled,onChange:function(e){return We(Me.uid,e)},checkedChildren:e.formatMessage({id:"common.enabled",defaultMessage:"å¯ç”¨"}),unCheckedChildren:e.formatMessage({id:"common.disabled",defaultMessage:"åœç”¨"})}),(0,_.jsx)(h.ZP,{size:"small",icon:(0,_.jsx)(P.Z,{}),onClick:function(e){var t;e.stopPropagation(),ye(null!=(t=Me)?t:Me),xe(!0)},children:"ç¼–è¾‘"}),(0,_.jsx)(j.Z,{title:e.formatMessage({id:"common.delete.confirm",defaultMessage:"ç¡®å®šè¦åˆ é™¤å—?"}),onConfirm:function(e){null==e||e.stopPropagation(),Je(Me)},onCancel:function(e){return null==e?void 0:e.stopPropagation()},okText:e.formatMessage({id:"common.confirm",defaultMessage:"ç¡®å®š"}),cancelText:e.formatMessage({id:"common.cancel",defaultMessage:"å–æ¶ˆ"}),children:(0,_.jsx)(h.ZP,{size:"small",danger:!0,icon:(0,_.jsx)(R.Z,{}),onClick:function(e){e.stopPropagation()},children:"åˆ é™¤"})}),Me.isDefault?(0,_.jsx)(y.Z,{color:"blue",children:"é»˜è®¤"}):null]}),extra:(0,_.jsxs)(x.Z,{children:[(0,_.jsx)(j.Z,{title:"å‘å¸ƒåˆ°çº¿ä¸Šç¯å¢ƒ",description:"åªæœ‰å‘å¸ƒä¹‹åï¼Œæ‰ä¼šåº”ç”¨åˆ°çº¿ä¸Šç¯å¢ƒ",okText:"ç»§ç»­å‘å¸ƒ",cancelText:"å–æ¶ˆ",onConfirm:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),et()},onCancel:function(e){var t;return null==e||null===(t=e.stopPropagation)||void 0===t?void 0:t.call(e)},children:(0,_.jsx)(h.ZP,{onClick:function(e){return e.stopPropagation()},loading:qe,type:"default",icon:(0,_.jsx)(A.Z,{}),children:(0,_.jsx)(s.FormattedMessage,{id:"common.publish",defaultMessage:"å‘å¸ƒ"})})}),(0,_.jsx)(h.ZP,{onClick:function(){Me&&(Ee(Me),Ie.current=JSON.stringify(null!=Me?Me:{}),Ke(!1))},disabled:!Ae,icon:(0,_.jsx)(K.Z,{}),children:(0,_.jsx)(s.FormattedMessage,{id:"common.reset",defaultMessage:"é‡ç½®"})}),(0,_.jsx)(h.ZP,{type:"primary",loading:Ce,onClick:Xe,disabled:!Ae,icon:(0,_.jsx)(I.Z,{}),children:(0,_.jsx)(s.FormattedMessage,{id:"common.save",defaultMessage:"ä¿å­˜"})})]}),children:(0,_.jsx)(r.Z,{activeKey:fe,onChange:ve,items:tt})}):(0,_.jsx)(z.Z,{children:(0,_.jsx)(S.Z,{description:e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})})})})]}),(0,_.jsx)(Q.Z,{open:he,onOpenChange:xe,orgUid:(null==t?void 0:t.uid)||"",record:Se,onSuccess:function(){xe(!1),Be(ue)}})]})},ee=n(43187),te=function(){return(0,_.jsx)(r.Z,{defaultActiveKey:"table",style:{padding:"10px"},items:[{key:"table",label:(0,_.jsx)(s.FormattedMessage,{id:"menu.robot.table",defaultMessage:"Robot Account"}),children:(0,_.jsx)(ee.Z,{})},{key:"settings",label:(0,_.jsx)(s.FormattedMessage,{id:"menu.robot.settings",defaultMessage:"Robot Settings"}),children:(0,_.jsx)(X,{})}]})}}}]);