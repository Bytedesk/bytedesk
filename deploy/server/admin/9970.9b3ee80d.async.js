"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9970],{52382:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(83910),r=s(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},o=s(5901),c=function(e,t){return r.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:n}))};var i=r.forwardRef(c)},30422:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(83910),r=s(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},o=s(5901),c=function(e,t){return r.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:n}))};var i=r.forwardRef(c)},15338:function(e,t,s){s.d(t,{Bo:function(){return h},Gx:function(){return l},OI:function(){return x},Q3:function(){return p},hW:function(){return k},sz:function(){return m}});var a=s(90819),r=s.n(a),n=s(73193),o=s.n(n),c=s(89933),i=s.n(c),d=s(36265),u=s(5861);function l(e){return f.apply(this,arguments)}function f(){return(f=i()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/process/query/org",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=i()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/process/update",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return M.apply(this,arguments)}function M(){return(M=i()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/process/delete",{method:"POST",data:{uid:t,channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return(y=i()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/process/deploy",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=i()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/process/reset",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=i()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/process/undeploy",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},76071:function(e,t,s){var a=s(74494);t.Z=function(){var e=(0,a.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},20478:function(e,t,s){s.d(t,{Z:function(){return _}});var a=s(73193),r=s.n(a),n=s(84176),o=s.n(n),c=s(10154),i=s.n(c),d=s(86222),u=s.n(d),l=s(90819),f=s.n(l),p=s(89933),g=s.n(p),m=s(45332),M=s.n(m),h=s(5286),y=s(15338),x=s(71865),v=s(5014),k=s(91768),w=s(80503),b=s(41881),j=s(30422),S=s(52382),Z=s(28172),F=s(35911),T=s(31362),I=s(5861),O=s(25709),C=s(2157),P=s(95330),z=s(96082),q=s(96596),A=s.n(q),J=s(44194),D=s(87523),H=s(36265),B=s(31661),Q=s(42539),E=s(40845),L=s(44565),R=s(60857),V=s(2685),Y=s(63642),U=s(19095),X=s(76185),W=s(23513),G=s(31549),K=function(e){var t=e.open,s=e.process,a=e.onClose,r=e.onSuccess,n=Y.Z.useForm(),o=M()(n,1)[0],c=(0,I.useIntl)(),i=(0,x.u)((function(e){return e.currentOrg})),d=(0,J.useState)(!1),u=M()(d,2),l=u[0],p=u[1],m=(0,B.Z)().translateString;(0,J.useEffect)((function(){t&&s?o.setFieldsValue({name:m(s.name),description:m(s.description),type:s.type}):o.resetFields()}),[t,s,o]);var v=function(){var e=g()(f()().mark((function e(){var t,n,d;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.validateFields();case 3:return t=e.sent,p(!0),n={uid:null==s?void 0:s.uid,name:t.name,description:t.description,type:t.type,schema:null==s?void 0:s.schema,orgUid:null==i?void 0:i.uid},e.next=8,(0,y.Q3)(n);case 8:200===(d=e.sent).code?(h.yw.success(c.formatMessage({id:"process.update.success",defaultMessage:"更新成功"})),r(),a()):h.yw.error(d.message),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Form validation failed:",e.t0),h.yw.error(c.formatMessage({id:"form.validation.failed",defaultMessage:"表单验证失败"}));case 16:return e.prev=16,p(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,12,16,19]])})));return function(){return e.apply(this,arguments)}}();return(0,G.jsx)(U.Z,{title:(0,G.jsx)(I.FormattedMessage,{id:"process.edit.basic.info",defaultMessage:"编辑流程基本信息"}),onClose:a,open:t,width:500,destroyOnHidden:!0,extra:(0,G.jsxs)(X.Z,{children:[(0,G.jsx)(C.ZP,{onClick:a,children:(0,G.jsx)(I.FormattedMessage,{id:"cancel",defaultMessage:"取消"})}),(0,G.jsx)(C.ZP,{onClick:v,type:"primary",loading:l,children:(0,G.jsx)(I.FormattedMessage,{id:"save",defaultMessage:"保存"})})]}),children:(0,G.jsx)(W.Z,{spinning:l,children:(0,G.jsxs)(E.A,{form:o,submitter:!1,layout:"vertical",children:[(0,G.jsx)(L.Z,{name:"name",label:(0,G.jsx)(I.FormattedMessage,{id:"process.name",defaultMessage:"流程名称"}),placeholder:c.formatMessage({id:"process.name.placeholder",defaultMessage:"请输入流程名称"}),rules:[{required:!0,message:c.formatMessage({id:"process.name.required",defaultMessage:"请输入流程名称"})}]}),(0,G.jsx)(R.Z,{name:"description",label:(0,G.jsx)(I.FormattedMessage,{id:"process.description",defaultMessage:"流程描述"}),placeholder:c.formatMessage({id:"process.description.placeholder",defaultMessage:"请输入流程描述"}),fieldProps:{rows:4}}),(0,G.jsx)(V.Z,{name:"type",label:(0,G.jsx)(I.FormattedMessage,{id:"process.type",defaultMessage:"流程类型"}),placeholder:c.formatMessage({id:"process.type.placeholder",defaultMessage:"请选择流程类型"}),options:[{label:c.formatMessage({id:"process.type.ticket.internal",defaultMessage:"内部工单"}),value:H.O4J},{label:c.formatMessage({id:"process.type.ticket.external",defaultMessage:"外部工单"}),value:H.Qou},{label:c.formatMessage({id:"process.type.thread",defaultMessage:"会话流程"}),value:H.dQF}],rules:[{required:!0,message:c.formatMessage({id:"process.type.required",defaultMessage:"请选择流程类型"})}]})]})})})},$=["current","pageSize"],_=function(e){var t=e.superUser,s=void 0!==t&&t,a=(0,I.useIntl)(),n=(0,J.useRef)(),c=(0,B.Z)().translateString,d=(0,J.useState)(1),l=M()(d,2),p=(l[0],l[1]),m=(0,J.useState)(10),q=M()(m,2),E=(q[0],q[1]),L=(0,x.u)((function(e){return e.currentOrg})),R=(0,v.s)().selectedType,V=O.Z.useModal(),Y=M()(V,2),U=Y[0],X=Y[1],W=(0,J.useState)([]),_=M()(W,2),N=_[0],ee=_[1],te=(0,J.useState)([]),se=M()(te,2),ae=se[0],re=se[1],ne=(0,J.useState)({}),oe=M()(ne,2),ce=(oe[0],oe[1]),ie=(0,J.useState)(!1),de=M()(ie,2),ue=de[0],le=de[1],fe=(0,J.useState)(void 0),pe=M()(fe,2),ge=pe[0],me=pe[1];(0,J.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.reload()}),[R]);var Me=function(){window.open((0,D.LE)(),"_blank")},he=function(){var e=g()(f()().mark((function e(t){var s,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.sz)(t.uid);case 2:200===(s=e.sent).code?(h.yw.success(a.formatMessage({id:"delete.success",defaultMessage:"删除成功"})),null===(r=n.current)||void 0===r||r.reload()):h.yw.error(s.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=g()(f()().mark((function e(t){var s,r,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.schema){e.next=3;break}return h.yw.error(a.formatMessage({id:"process.schema.empty",defaultMessage:"流程定义不能为空"})),e.abrupt("return");case 3:return s={uid:t.uid,name:t.name,schema:t.schema},e.next=6,(0,y.Bo)(s);case 6:r=e.sent,console.log("handleDeployProcess response:",r,s),200===r.code?(h.yw.success(a.formatMessage({id:"process.deploy.success",defaultMessage:"部署成功"})),null===(o=n.current)||void 0===o||o.reload()):h.yw.error(r.message);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=g()(f()().mark((function e(t){var s,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.deploymentId){e.next=3;break}return h.yw.error(a.formatMessage({id:"process.not.deployed",defaultMessage:"流程未部署"})),e.abrupt("return");case 3:return e.next=5,(0,y.hW)({deploymentId:t.deploymentId});case 5:200===(s=e.sent).code?(h.yw.success(a.formatMessage({id:"process.undeploy.success",defaultMessage:"取消部署成功"})),null===(r=n.current)||void 0===r||r.reload()):h.yw.error(s.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=g()(f()().mark((function e(t){var s,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.OI)({uid:t.uid});case 2:200===(s=e.sent).code?(h.yw.success(a.formatMessage({id:"process.reset.success",defaultMessage:"重置成功"})),null===(r=n.current)||void 0===r||r.reload()):h.yw.error(s.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=g()(f()().mark((function e(){var t,s,r,o,c,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==ae.length){e.next=3;break}return h.yw.warning(a.formatMessage({id:"batch.delete.noselection",defaultMessage:"请选择要删除的项目"})),e.abrupt("return");case 3:h.yw.loading(a.formatMessage({id:"deleting",defaultMessage:"正在删除..."})),s=0,r=0,o=u()(ae),e.prev=7,o.s();case 9:if((c=o.n()).done){e.next=23;break}return i=c.value,e.prev=11,e.next=14,(0,y.sz)(i.uid);case 14:200===e.sent.code?s++:r++,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),r++;case 21:e.next=9;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(7),o.e(e.t1);case 28:return e.prev=28,o.f(),e.finish(28);case 31:h.yw.destroy(),0===r?h.yw.success(a.formatMessage({id:"batch.delete.success",defaultMessage:"成功删除 {count} 条记录"},{count:s})):h.yw.warning(a.formatMessage({id:"batch.delete.partial",defaultMessage:"成功删除 {success} 条记录，失败 {fail} 条"},{success:s,fail:r})),ee([]),re([]),null===(t=n.current)||void 0===t||t.reloadAndRest();case 36:case"end":return e.stop()}}),e,null,[[7,25,28,31],[11,18]])})));return function(){return e.apply(this,arguments)}}(),we={selectedRowKeys:N,onChange:function(e,t){ee(e),re(t)}},be=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left",align:"center"},{title:(0,G.jsx)(I.FormattedMessage,{id:"process.name",defaultMessage:"流程名称"}),dataIndex:"name",copyable:!0,ellipsis:!0,fixed:"left",tooltip:a.formatMessage({id:"process.name.tooltip",defaultMessage:"流程的名称"}),render:function(e,t){return c(t.name)||(0,G.jsx)("span",{style:{color:"#999"},children:"-"})}},{title:(0,G.jsx)(I.FormattedMessage,{id:"process.description",defaultMessage:"流程描述"}),dataIndex:"description",ellipsis:!0,hideInSearch:!0,tooltip:a.formatMessage({id:"process.description.tooltip",defaultMessage:"流程的详细描述"}),render:function(e,t){return c(t.description)||(0,G.jsx)("span",{style:{color:"#999"},children:"-"})}},{title:(0,G.jsx)(I.FormattedMessage,{id:"process.type",defaultMessage:"流程类型"}),dataIndex:"type",hideInSearch:!0,width:120,tooltip:a.formatMessage({id:"process.type.tooltip",defaultMessage:"流程的类型"}),valueEnum:i()(i()({},H.O4J,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.type.ticket.internal",defaultMessage:"内部工单"})}),H.Qou,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.type.ticket.external",defaultMessage:"外部工单"})}),render:function(e,t){var s,a=i()(i()({},H.O4J,"blue"),H.Qou,"cyan"),r=i()(i()({},H.O4J,"内部工单"),H.Qou,"外部工单");return t.type?(0,G.jsx)(z.Z,{color:a[t.type]||"default",children:(0,G.jsx)(I.FormattedMessage,{id:"process.type.".concat(null===(s=t.type)||void 0===s?void 0:s.toLowerCase()),defaultMessage:r[t.type]||t.type})}):(0,G.jsx)("span",{style:{color:"#999"},children:"-"})}},{title:(0,G.jsx)(I.FormattedMessage,{id:"process.status",defaultMessage:"状态"}),dataIndex:"status",tooltip:a.formatMessage({id:"process.status.tooltip",defaultMessage:"流程的当前状态"}),valueType:"select",valueEnum:i()(i()(i()(i()(i()({},H.Fne,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.status.draft",defaultMessage:"草稿"}),status:"Default"}),H.bSv,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.status.deployed",defaultMessage:"已部署"}),status:"Success"}),H.TmV,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.status.active",defaultMessage:"激活"}),status:"Processing"}),H.czy,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.status.suspended",defaultMessage:"暂停"}),status:"Warning"}),H.r$,{text:(0,G.jsx)(I.FormattedMessage,{id:"process.status.archived",defaultMessage:"归档"}),status:"Default"}),render:function(e,t){var s,a=i()(i()(i()(i()(i()({},H.Fne,"default"),H.bSv,"green"),H.TmV,"processing"),H.czy,"orange"),H.r$,"default");return(0,G.jsx)(z.Z,{color:a[t.status]||"default",children:(0,G.jsx)(I.FormattedMessage,{id:"process.status.".concat(null===(s=t.status)||void 0===s?void 0:s.toLowerCase()),defaultMessage:t.status})})}},{title:(0,G.jsx)(I.FormattedMessage,{id:"process.deployment.id",defaultMessage:"部署ID"}),dataIndex:"deploymentId",ellipsis:!0,hideInSearch:!0,width:300,tooltip:a.formatMessage({id:"process.deployment.id.tooltip",defaultMessage:"流程的部署ID"}),render:function(e,t){return t.deploymentId?(0,G.jsx)(z.Z,{color:"blue",children:t.deploymentId}):(0,G.jsx)("span",{style:{color:"#999"},children:"-"})}},{title:(0,G.jsx)(I.FormattedMessage,{id:"process.schema",defaultMessage:"Schema"}),dataIndex:"schema",hideInSearch:!0,width:100,tooltip:a.formatMessage({id:"process.schema.tooltip",defaultMessage:"查看流程定义(schema)"}),render:function(e,t){return t.schema?(0,G.jsx)(C.ZP,{type:"link",onClick:function(){return function(e){e.schema?U.info({title:a.formatMessage({id:"process.schema.title",defaultMessage:"Schema 内容"}),width:900,okText:a.formatMessage({id:"close",defaultMessage:"关闭"}),content:(0,G.jsx)("pre",{style:{maxHeight:520,overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",margin:0},children:e.schema})}):h.yw.warning(a.formatMessage({id:"process.schema.empty",defaultMessage:"流程定义不能为空"}))}(t)},children:(0,G.jsx)(I.FormattedMessage,{id:"view",defaultMessage:"查看"})}):(0,G.jsx)("span",{style:{color:"#999"},children:"-"})}},{title:(0,G.jsx)(I.FormattedMessage,{id:"createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",hideInSearch:!0,sorter:!0,tooltip:a.formatMessage({id:"process.createdAt.tooltip",defaultMessage:"流程创建时间"}),render:function(e,t){return A()(t.createdAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,G.jsx)(I.FormattedMessage,{id:"updatedAt",defaultMessage:"更新时间"}),dataIndex:"updatedAt",valueType:"dateTime",hideInSearch:!0,sorter:!0,tooltip:a.formatMessage({id:"process.updatedAt.tooltip",defaultMessage:"流程更新时间"}),render:function(e,t){return A()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,G.jsx)(I.FormattedMessage,{id:"action",defaultMessage:"操作"}),key:"option",dataIndex:"option",hideInSearch:!0,width:120,fixed:"right",tooltip:a.formatMessage({id:"process.action.tooltip",defaultMessage:"可执行的操作"}),render:function(e,t){var s=[{key:"editInfo",icon:(0,G.jsx)(b.Z,{}),label:a.formatMessage({id:"process.action.edit.info",defaultMessage:"编辑基本信息"}),onClick:function(){return me(t),void le(!0)}},{key:"editFlow",icon:(0,G.jsx)(j.Z,{}),label:a.formatMessage({id:"process.action.edit.flow",defaultMessage:"编辑流程"}),onClick:function(){return e=t,s="".concat((0,D.LE)(),"?processUid=").concat(e.uid),void window.open(s,"_blank");var e,s}},{type:"divider"},t.deploymentId?{key:"undeploy",icon:(0,G.jsx)(S.Z,{}),label:a.formatMessage({id:"process.action.undeploy",defaultMessage:"取消部署"}),onClick:function(){U.confirm({title:a.formatMessage({id:"process.undeploy.tip",defaultMessage:"取消部署提示"}),content:"".concat(a.formatMessage({id:"process.undeploy.affirm",defaultMessage:"确认取消部署"}),"【").concat(c(t.name),"】?"),onOk:function(){return xe(t)},okText:a.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:a.formatMessage({id:"cancel",defaultMessage:"取消"})})}}:{key:"deploy",icon:(0,G.jsx)(Z.Z,{}),label:a.formatMessage({id:"process.action.deploy",defaultMessage:"部署"}),onClick:function(){U.confirm({title:a.formatMessage({id:"process.deploy.tip",defaultMessage:"部署提示"}),content:"".concat(a.formatMessage({id:"process.deploy.affirm",defaultMessage:"确认部署"}),"【").concat(c(t.name),"】?"),onOk:function(){return ye(t)},okText:a.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:a.formatMessage({id:"cancel",defaultMessage:"取消"})})}}];return t.type!==H.O4J&&t.type!==H.Qou&&t.type!==H.dQF||s.push({key:"reset",icon:(0,G.jsx)(F.Z,{}),label:a.formatMessage({id:"process.action.reset",defaultMessage:"重置"}),onClick:function(){U.confirm({title:a.formatMessage({id:"process.reset.tip",defaultMessage:"重置提示"}),content:"".concat(a.formatMessage({id:"process.reset.affirm",defaultMessage:"确认重置"}),"【").concat(c(t.name),"】").concat(a.formatMessage({id:"process.reset.description",defaultMessage:"为默认内容？此操作将覆盖当前流程定义。"})),onOk:function(){return ve(t)},okText:a.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:a.formatMessage({id:"cancel",defaultMessage:"取消"})})}}),s.push({type:"divider"},{key:"delete",icon:(0,G.jsx)(k.Z,{}),danger:!0,label:a.formatMessage({id:"process.action.delete",defaultMessage:"删除"}),onClick:function(){U.confirm({title:a.formatMessage({id:"deleteTip",defaultMessage:"删除提示"}),content:"".concat(a.formatMessage({id:"deleteAffirm",defaultMessage:"确认删除"}),"【").concat(c(t.name),"】?"),onOk:function(){return he(t)},okText:a.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:a.formatMessage({id:"cancel",defaultMessage:"取消"}),okButtonProps:{danger:!0}})}}),(0,G.jsx)(P.Z,{menu:{items:s},placement:"bottomRight",trigger:["click"],children:(0,G.jsxs)(C.ZP,{type:"link",children:[(0,G.jsx)(I.FormattedMessage,{id:"action",defaultMessage:"操作"})," ",(0,G.jsx)(w.Z,{})]})})}}],je=function(){var e={};return[H.Fne,H.bSv,H.TmV,H.czy,H.r$].includes(R)?e.status=R:R!==H.O4J&&R!==H.Qou||(e.type=R),e};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(T.Z,{columns:be,actionRef:n,cardBordered:!0,rowSelection:we,scroll:{x:1300},columnsState:{defaultValue:{deploymentId:{show:!1}},persistenceKey:"process-table-columns",persistenceType:"localStorage"},request:function(){var e=g()(f()().mark((function e(t,a){var n,c,i,d,u,l,g,m,M,x,v;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.current,d=t.pageSize,u=o()(t,$),p(i||1),E(d||10),ce(u),l=void 0,g=void 0,a&&Object.keys(a).length>0&&(m=Object.keys(a)[0],l=m,g="ascend"===a[m]?"ascend":"descend"),M=je(),x=r()(r()(r()(r()({pageNumber:(i||1)-1,pageSize:d||10,orgUid:null==L?void 0:L.uid},s&&{superUser:s}),u),M),{},{sortBy:l,sortDirection:g}),e.next=11,(0,y.Gx)(x);case 11:return v=e.sent,Q.Z.debug("ProcessTable queryProcessesByOrg response:",v,x),200!==v.code&&h.yw.error(v.message),e.abrupt("return",{data:(null==v||null===(n=v.data)||void 0===n?void 0:n.content)||[],success:200===v.code,total:(null==v||null===(c=v.data)||void 0===c?void 0:c.totalElements)||0});case 15:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e,t){p(e),t&&E(t)}},dateFormatter:"string",headerTitle:a.formatMessage({id:"process.list",defaultMessage:"流程列表"}),toolBarRender:function(){var e=[(0,G.jsx)(C.ZP,{type:"primary",onClick:Me,children:(0,G.jsx)(I.FormattedMessage,{id:"process.action.open.flow.editor",defaultMessage:"打开流程编辑器"})},"editor")],t=[];return N.length>0&&t.push({key:"batchDelete",icon:(0,G.jsx)(k.Z,{}),danger:!0,label:a.formatMessage({id:"batch.delete",defaultMessage:"批量删除"})+" (".concat(N.length,")"),onClick:function(){U.confirm({title:a.formatMessage({id:"batch.deleteTip",defaultMessage:"批量删除提示"}),content:"".concat(a.formatMessage({id:"batch.deleteAffirm",defaultMessage:"确认删除"})," ").concat(N.length," ").concat(a.formatMessage({id:"items",defaultMessage:"项"}),"?"),onOk:ke,okText:a.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:a.formatMessage({id:"cancel",defaultMessage:"取消"})})}}),t.length>0&&e.push((0,G.jsx)(P.Z,{menu:{items:t},placement:"bottom",children:(0,G.jsxs)(C.ZP,{type:N.length>0?"primary":"default",danger:N.length>0,children:[N.length>0?a.formatMessage({id:"batch.operations",defaultMessage:"批量操作"})+" (".concat(N.length,")"):a.formatMessage({id:"more.operations",defaultMessage:"更多操作"}),(0,G.jsx)(w.Z,{})]})},"batchOperations")),e}}),X,(0,G.jsx)(K,{open:ue,process:ge,onClose:function(){le(!1),me(void 0)},onSuccess:function(){var e;null===(e=n.current)||void 0===e||e.reload()}})]})}},5014:function(e,t,s){s.d(t,{s:function(){return a}});var a=(0,s(74543).Ue)((function(e){return{selectedType:"ALL",setSelectedType:function(t){return e({selectedType:t})}}}))}}]);