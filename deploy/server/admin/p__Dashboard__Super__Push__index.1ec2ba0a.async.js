"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5159],{2250:function(e,t,r){var n=r(94433),a=r(38956),s=r(51997),o=r(44194),u=r(80228),i=r(50929),l=r(31549),d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var r=e.fieldProps,c=e.children,p=e.params,f=e.proFieldProps,g=e.mode,h=e.valueEnum,v=e.request,m=e.showSearch,y=e.options,M=(0,a.Z)(e,d),E=(0,o.useContext)(u.Z);return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:y,mode:g,showSearch:m,getPopupContainer:E.getPopupContainer},r),ref:t,proFieldProps:f},M),{},{children:c}))},f=o.forwardRef((function(e,t){var r=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,g=e.mode,h=e.valueEnum,v=e.request,m=e.options,y=(0,a.Z)(e,c),M=(0,n.Z)({options:m,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),E=(0,o.useContext)(u.Z);return(0,l.jsx)(i.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,s.h)(h),request:v,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:E.getPopupContainer},M),ref:t,proFieldProps:f},y),{},{children:d}))})),g=o.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",t.Z=g},89965:function(e,t,r){var n=r(32906),a=r(94433),s=r(38956),o=r(81424),u=r(41196),i=r(63924),l=r(34573),d=r(44194),c=r(50929),p=r(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],h="text",v=function(e){var t=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),r=(0,n.Z)(t,2),s=r[0],l=r[1];return(0,p.jsx)(u.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var r,n=t.getFieldValue(e.name||[]);return(0,p.jsx)(i.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return l(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(r=e.statusRender)||void 0===r?void 0:r.call(e,n),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:s,children:e.children}))}})},m=function(e){var t=e.fieldProps,r=e.proFieldProps,n=(0,s.Z)(e,f);return(0,p.jsx)(c.Z,(0,a.Z)({valueType:h,fieldProps:t,filedConfig:{valueType:h},proFieldProps:r},n))};m.Password=function(e){var t=e.fieldProps,r=e.proFieldProps,o=(0,s.Z)(e,g),u=(0,d.useState)(!1),i=(0,n.Z)(u,2),f=i[0],m=i[1];return null!=t&&t.statusRender&&o.name?(0,p.jsx)(v,{name:o.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:m,children:(0,p.jsx)("div",{children:(0,p.jsx)(c.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,l.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var r;null==t||null===(r=t.onBlur)||void 0===r||r.call(t,e),m(!1)},onClick:function(e){var r;null==t||null===(r=t.onClick)||void 0===r||r.call(t,e),m(!0)}}),proFieldProps:r,filedConfig:{valueType:h}},o))})}):(0,p.jsx)(c.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:r,filedConfig:{valueType:h}},o))},m.displayName="ProFormComponent",t.Z=m},80953:function(e,t,r){var n=r(94433),a=r(38956),s=r(44194),o=r(50929),u=r(31549),i=["fieldProps","proFieldProps"],l=function(e,t){var r=e.fieldProps,s=e.proFieldProps,l=(0,a.Z)(e,i);return(0,u.jsx)(o.Z,(0,n.Z)({ref:t,valueType:"textarea",fieldProps:r,proFieldProps:s},l))};t.Z=s.forwardRef(l)},75112:function(e,t,r){var n=r(14597);t.Z=function(){var e=(0,n.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},5405:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n=r(44194),a=r(73193),s=r.n(a),o=r(84176),u=r.n(o),i=r(90819),l=r.n(i),d=r(89933),c=r.n(d),p=r(45332),f=r.n(p),g=r(19433),h=r(14906);function v(e){return m.apply(this,arguments)}function m(){return(m=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/push/query/org",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return M.apply(this,arguments)}function M(){return(M=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/push/create",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return x.apply(this,arguments)}function x(){return(x=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/push/update",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/push/delete",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=r(10162),R=r(89246),I=r(82770),Z=r(98830),b=r(25784),w=r(2250),T=r(89965),F=r(80953),j=r(41196),k=r(82864),L=r(39487),A=r(31549),B=function(e){var t=e.isEdit,r=e.push,a=e.open,o=e.onClose,u=e.onSubmit,i=j.Z.useForm(),l=f()(i,1)[0],d=(0,Z.u)((function(e){return e.currentOrg})),c=(0,h.useIntl)();(0,n.useEffect)((function(){t&&r?l.setFieldsValue({type:r.type,receiver:r.receiver,content:r.content}):l.resetFields()}),[a]);return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(k.Z,{title:t?c.formatMessage({id:"pages.push.edit",defaultMessage:"Edit Push"}):c.formatMessage({id:"pages.push.create",defaultMessage:"Create Push"}),onClose:o,open:a,extra:(0,A.jsxs)(L.Z,{children:[(0,A.jsx)(I.ZP,{onClick:o,children:c.formatMessage({id:"pages.push.cancel",defaultMessage:"Cancel"})}),(0,A.jsx)(I.ZP,{onClick:function(){console.log("handleSubmit"),l.validateFields().then((function(e){console.log(e),u(s()(s()({},e),{},{uid:null==r?void 0:r.uid,orgUid:null==d?void 0:d.uid}))})).catch((function(e){console.log("Form errors:",e),g.yw.error(c.formatMessage({id:"pages.form.error",defaultMessage:"Please check the form inputs"}))}))},type:"primary",children:c.formatMessage({id:"pages.push.submit",defaultMessage:"Submit"})})]}),children:(0,A.jsxs)(b.A,{form:l,initialValues:s()({},r),submitter:{render:function(){return null}},children:[(0,A.jsx)(w.Z,{label:c.formatMessage({id:"pages.push.type",defaultMessage:"Type"}),name:"type",rules:[{required:!0,message:c.formatMessage({id:"pages.push.type",defaultMessage:"Type"})}],options:[{label:"MOBILE_REGISTER",value:"MOBILE_REGISTER"},{label:"MOBILE_LOGIN",value:"MOBILE_LOGIN"},{label:"MOBILE_RESET",value:"MOBILE_RESET"},{label:"MOBILE_VERIFY",value:"MOBILE_VERIFY"},{label:"EMAIL_REGISTER",value:"EMAIL_REGISTER"},{label:"EMAIL_LOGIN",value:"EMAIL_LOGIN"},{label:"EMAIL_RESET",value:"EMAIL_RESET"},{label:"EMAIL_VERIFY",value:"EMAIL_VERIFY"},{label:"USERNAME_REGISTER",value:"USERNAME_REGISTER"},{label:"USERNAME_LOGIN",value:"USERNAME_LOGIN"},{label:"USERNAME_RESET",value:"USERNAME_RESET"},{label:"USERNAME_VERIFY",value:"USERNAME_VERIFY"},{label:"SCAN_LOGIN",value:"SCAN_LOGIN"}],fieldProps:{allowClear:!0,placeholder:c.formatMessage({id:"pages.push.type",defaultMessage:"Type"})}}),(0,A.jsx)(T.Z,{label:c.formatMessage({id:"pages.push.receiver",defaultMessage:"Receiver"}),name:"receiver",rules:[{required:!0,message:c.formatMessage({id:"pages.push.receiver",defaultMessage:"Receiver"})}]}),(0,A.jsx)(F.Z,{label:c.formatMessage({id:"pages.push.content",defaultMessage:"Content"}),name:"content",rules:[{required:!0,message:c.formatMessage({id:"pages.push.content",defaultMessage:"Content"})}]})]})})})},O=r(26138),_=r(96596),N=r.n(_),z=r(55722),U=["current"],q=function(){var e=(0,h.useIntl)(),t=(0,n.useRef)(),r=(0,n.useState)(!0),a=f()(r,2),o=a[0],i=a[1],d=(0,n.useState)(),p=f()(d,2),m=p[0],M=p[1],x=(0,n.useState)(!1),S=f()(x,2),b=S[0],w=S[1],T=(0,Z.u)((function(e){return e.currentOrg})),F=(0,z.L)((function(e){return e.userInfo})),j=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:e.formatMessage({id:"pages.push.sender",defaultMessage:"Sender"}),dataIndex:"sender",copyable:!0,hideInSearch:!0},{title:e.formatMessage({id:"pages.push.content",defaultMessage:"Content"}),dataIndex:"content",copyable:!0},{title:e.formatMessage({id:"pages.push.receiver",defaultMessage:"Receiver"}),dataIndex:"receiver",copyable:!0},{title:e.formatMessage({id:"pages.push.type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:e.formatMessage({id:"pages.push.status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0},{title:e.formatMessage({id:"pages.push.createdAt",defaultMessage:"Created At"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180,render:function(e,t){return t.createdAt?N()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):""}},{title:e.formatMessage({id:"actions"}),valueType:"option",key:"option",width:100,render:function(r,n,a,s){return[(0,A.jsx)("a",{onClick:function(){_(n)},children:e.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,A.jsx)("a",{style:{color:"#ff4d4f",marginLeft:8},onClick:c()(l()().mark((function r(){var a,s,o;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.uid){r.next=2;break}return r.abrupt("return");case 2:return g.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),r.next=5,C({uid:n.uid});case 5:a=r.sent,g.yw.destroy(),200===a.code?(g.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete successful"})),null===(s=t.current)||void 0===s||null===(o=s.reloadAndRest)||void 0===o||o.call(s)):g.yw.error(a.message||e.formatMessage({id:"delete.error",defaultMessage:"Delete failed"}));case 8:case"end":return r.stop()}}),r)}))),children:e.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}],k=(0,O.v)((function(e){return e.currentCategory})),L=function(){M(void 0),i(!1),w(!0)},_=function(e){M(e),i(!0),w(!0)},q=function(){var r=c()(l()().mark((function r(n){var a,s,u;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o?g.yw.loading(e.formatMessage({id:"updating",defaultMessage:"Updating..."})):g.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating..."})),!o){r.next=7;break}return r.next=4,E(n);case 4:r.t0=r.sent,r.next=10;break;case 7:return r.next=9,y(n);case 9:r.t0=r.sent;case 10:a=r.t0,g.yw.destroy(),200===a.code?(g.yw.success(e.formatMessage({id:o?"update.success":"create.success",defaultMessage:o?"Update successful":"Create successful"})),w(!1),null===(s=t.current)||void 0===s||null===(u=s.reloadAndRest)||void 0===u||u.call(s)):g.yw.error(a.message||e.formatMessage({id:o?"update.error":"create.error",defaultMessage:o?"Update failed":"Create failed"}));case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,n.useEffect)((function(){var e;console.log("currentCategory:",k),null===(e=t.current)||void 0===e||e.reloadAndRest()}),[k]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(R.Z,{columns:j,actionRef:t,cardBordered:!0,request:function(){var t=c()(l()().mark((function t(r,n,a){var o,i,d;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("request:",r,n,a),g.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),r.current,o=u()(r,U),i=s()({pageNumber:(r.current||1)-1,pageSize:r.pageSize,orgUid:null==T?void 0:T.uid,superUser:null==F?void 0:F.superUser},o),t.next=6,v(i);case 6:return d=t.sent,console.log("getAllPushs response:",i,d),g.yw.destroy(),200===d.code||g.yw.error(d.message),t.abrupt("return",{data:d.data.content,success:!0,total:d.data.totalElements});case 11:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"pages.push.list",defaultMessage:"Push Records"}),toolBarRender:function(){return[(0,A.jsx)(I.ZP,{icon:(0,A.jsx)(P.Z,{}),type:"primary",onClick:L,children:e.formatMessage({id:"create",defaultMessage:"Create"})},"button")]}}),(0,A.jsx)(B,{isEdit:o,open:b,push:m,onClose:function(){w(!1)},onSubmit:q})]})},G=r(21563),V=r(75112),Y=G.Z.Content,D=function(){var e=(0,V.Z)().contentStyle;return(0,A.jsx)(G.Z,{children:(0,A.jsx)(Y,{style:e,children:(0,A.jsx)(q,{})})})}},26138:function(e,t,r){r.d(t,{v:function(){return g}});var n=r(86222),a=r.n(n),s=r(73193),o=r.n(s),u=r(76711),i=r.n(u),l=r(39497),d=r(58063),c=r(66266),p=r(31403),f=r(23753);var g=(0,d.Ue)()((0,c.mW)((0,c.tJ)((0,p.n)((function(e,t){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:l.zBg,name:l.zBg},setCategoryResult:function(t){var r=function(e){var t=[];return e.data.content.forEach((function(e){var r={label:e.name,value:e.uid};t.push(r)})),t}(t),n=function(e){var t,r=(null==e||null===(t=e.data)||void 0===t?void 0:t.content)||[],n=function e(t){var r={title:t.name||"",key:t.uid||""};return t.children&&t.children.length>0&&(r.children=t.children.map((function(t){return e(t)}))),r};return r.filter((function(e){return e&&e.uid&&e.uid!==l.zBg})).map((function(e){return n(e)}))}(t),a=[{title:l.zBg,key:l.zBg}].concat(i()(n)),s={uid:l.zBg,name:l.zBg},u=o()(o()({},t),{},{data:o()(o()({},t.data),{},{content:[s].concat(i()(t.data.content))})});e({categoryResult:u,categoryTreeOptions:a,categorySelectOptions:r}),0===t.data.content.length&&e({currentCategory:{uid:l.zBg,name:l.zBg}})},insertCategory:function(t){e((function(e){e.categoryResult.data.content.unshift(t)}))},upgradeCategory:function(t){e((function(e){var r=e.categoryResult.data.content,n=r.findIndex((function(e){return e.uid===t.uid}));-1!==n?r[n]=t:console.warn("Category with uid ".concat(t.uid," not found."))}))},setCurrentCategory:function(t){e({currentCategory:t})},resetDefaultCategory:function(){f.Z.log("resetDefaultCategory"),e({currentCategory:{uid:l.zBg,name:l.zBg}})},setCurrentCategoryUid:function(r){if(r!==l.zBg){var n=function e(t,r){if(t&&0!==t.length){var n,s=a()(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;if((null==o?void 0:o.uid)===r)return o;var u=e(null==o?void 0:o.children,r);if(u)return u}}catch(e){s.e(e)}finally{s.f()}}}(t().categoryResult.data.content,r);e({currentCategory:null!=n?n:{uid:l.zBg,name:l.zBg}})}else e({currentCategory:{uid:l.zBg,name:l.zBg}})},deleteCategoryCache:function(){return e({},!0)}}})),{name:l.OMm})))}}]);