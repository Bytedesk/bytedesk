"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4139],{26767:function(e,r,t){t.r(r),t.d(r,{default:function(){return De}});var s=t(73193),a=t.n(s),n=t(90819),i=t.n(n),c=t(89933),o=t.n(c),l=t(45332),u=t.n(l),d=t(44194),m=t(49053),f=t(55681),g=t(4934),x=t(81020),h=t(68943),p=t(51096),v=t(95526),j=t(4363),E=t(19924),y=t(17129),Z=t(51438),M=t(9110),A=t(13522),N=t(64024),R=t(90962),S=t(45135),I=t(50403),D=t(80700),k=t(75699),b=t(96108),O=t(16829),U=t(38722),T=t(4108),G=t(83381),w=t(80164),C=t(47719),P=t(61658),L=t(35911),H=t(83004),_=t(16849),V=t(33551),B=t(13883),F=t(65794),Y=t(7083),z=t(68806),W=t(17857),K=t(38086),q=t(77686),Q=t(67308),X=t(90417),J=t(4730),$=t(1803),ee=t(60107),re=t(12715),te=t(89348),se=t(14546);t(25191);function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=o()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("/api/v1/server/query/org",{method:"GET",params:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=o()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("/api/v1/server-metrics/query/org",{method:"GET",params:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe="ONLINE",le="OFFLINE",ue="ERROR",de="WARNING",me="OVERLOADED",fe=function(e){switch(e){case"ONLINE":return"在线运行";case"OFFLINE":return"离线";case"MAINTENANCE":return"维护中";case"STARTING":return"启动中";case"STOPPING":return"停止中";case"RESTARTING":return"重启中";case"ERROR":return"错误状态";case"WARNING":return"警告状态";case"DEGRADED":return"降级运行";case"OVERLOADED":return"过载";case"UNKNOWN":return"未知状态";default:return e}},ge=function(e){return"ONLINE"===e||"DEGRADED"===e},xe=function(e){return"ONLINE"===e||"DEGRADED"===e||"OVERLOADED"===e},he=function(e){var r=e.toUpperCase();if(["ONLINE","OFFLINE","MAINTENANCE","STARTING","STOPPING","RESTARTING","ERROR","WARNING","DEGRADED","OVERLOADED","UNKNOWN"].includes(r))return r;throw new Error("No ServerStatusEnum constant with value: ".concat(e))},pe=function(e){switch(e){case"ONLINE":return"#52c41a";case"DEGRADED":case"WARNING":return"#faad14";case"OVERLOADED":return"#fa8c16";case"ERROR":case"OFFLINE":return"#f5222d";case"MAINTENANCE":return"#1890ff";case"STARTING":case"STOPPING":case"RESTARTING":return"#722ed1";default:return"#d9d9d9"}},ve=function(e){switch(e){case"ONLINE":return"check-circle";case"DEGRADED":return"exclamation-circle";case"OVERLOADED":case"WARNING":return"warning";case"ERROR":return"close-circle";case"OFFLINE":return"stop";case"MAINTENANCE":return"tool";case"STARTING":return"play-circle";case"STOPPING":return"pause-circle";case"RESTARTING":return"reload";default:return"question-circle"}},je=function(e){switch(e){case"APPLICATION":return"应用服务器";case"DATABASE":return"数据库服务器";case"CACHE":return"缓存服务器";case"LOAD_BALANCER":return"负载均衡器";case"WEB_SERVER":return"Web服务器";case"FILE_SERVER":return"文件服务器";case"MAIL_SERVER":return"邮件服务器";case"DNS_SERVER":return"DNS服务器";case"PROXY_SERVER":return"代理服务器";case"MONITORING":return"监控服务器";case"BACKUP":return"备份服务器";case"GATEWAY":return"网关服务器";case"API_SERVER":return"API服务器";case"MESSAGE_QUEUE":return"消息队列服务器";case"SEARCH_ENGINE":return"搜索引擎服务器";case"CDN":return"CDN服务器";case"OTHER":return"其他类型";default:return e}},Ee=function(e){var r=e.toUpperCase();if(["APPLICATION","DATABASE","CACHE","LOAD_BALANCER","WEB_SERVER","FILE_SERVER","MAIL_SERVER","DNS_SERVER","PROXY_SERVER","MONITORING","BACKUP","GATEWAY","API_SERVER","MESSAGE_QUEUE","SEARCH_ENGINE","CDN","OTHER"].includes(r))return r;throw new Error("No ServerTypeEnum constant with value: ".concat(e))},ye=function(e){switch(e){case"APPLICATION":return"appstore";case"DATABASE":return"database";case"CACHE":return"thunderbolt";case"LOAD_BALANCER":return"share-alt";case"WEB_SERVER":return"global";case"FILE_SERVER":return"folder";case"MAIL_SERVER":return"mail";case"DNS_SERVER":return"link";case"PROXY_SERVER":return"swap";case"MONITORING":return"monitor";case"BACKUP":return"save";case"GATEWAY":return"gateway";case"API_SERVER":return"api";case"MESSAGE_QUEUE":return"message";case"SEARCH_ENGINE":return"search";case"CDN":return"cloud";default:return"server"}},Ze=function(e){switch(e){case"APPLICATION":return"#1890ff";case"DATABASE":return"#52c41a";case"CACHE":return"#faad14";case"LOAD_BALANCER":return"#722ed1";case"WEB_SERVER":return"#13c2c2";case"FILE_SERVER":return"#eb2f96";case"MAIL_SERVER":return"#fa8c16";case"DNS_SERVER":return"#a0d911";case"PROXY_SERVER":return"#f5222d";case"MONITORING":return"#2f54eb";case"BACKUP":return"#fa541c";case"GATEWAY":return"#531dab";case"API_SERVER":return"#08979c";case"MESSAGE_QUEUE":return"#d4380d";case"SEARCH_ENGINE":return"#389e0d";case"CDN":return"#096dd9";default:return"#8c8c8c"}};function Me(e){var r="string"==typeof e?he(e):e;return{value:r,label:fe(r),color:pe(r),icon:ve(r),isHealthy:ge(r),isOperational:xe(r)}}function Ae(e){var r="string"==typeof e?Ee(e):e;return{value:r,label:je(r),color:Ze(r),icon:ye(r)}}var Ne=t(28977),Re=t.n(Ne),Se=t(31549),Ie=m.Z.Option,De=function(){var e=(0,k.useIntl)(),r=(0,d.useState)([]),t=u()(r,2),s=t[0],n=t[1],c=(0,d.useState)([]),l=u()(c,2),ne=l[0],ce=l[1],fe=(0,d.useState)(!1),ge=u()(fe,2),xe=ge[0],he=ge[1],pe=(0,d.useState)(null),ve=u()(pe,2),je=ve[0],Ee=ve[1],ye=(0,d.useState)(!1),Ze=u()(ye,2),Ne=(Ze[0],Ze[1],(0,d.useState)(e.formatMessage({id:"server.form.add.title"}))),De=u()(Ne,2),ke=(De[0],De[1],f.Z.useForm()),be=(u()(ke,1)[0],(0,d.useState)(null)),Oe=u()(be,2),Ue=(Oe[0],Oe[1],(0,d.useState)(!1)),Te=u()(Ue,2),Ge=Te[0],we=Te[1],Ce=(0,d.useState)([Re()().subtract(24,"hour"),Re()()]),Pe=u()(Ce,2),Le=Pe[0],He=Pe[1],_e=(0,d.useState)(30),Ve=u()(_e,2),Be=Ve[0],Fe=Ve[1],Ye=function(){var r=o()(i()().mark((function r(){var t,s;return i()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return he(!0),r.prev=1,r.next=4,ae({pageNumber:0,pageSize:100});case 4:s=r.sent,console.log("queryServersByOrg response",s.data),null!==(t=s.data)&&void 0!==t&&t.content&&n(s.data.content),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),g.ZP.error(e.formatMessage({id:"server.message.fetchFailed"}));case 12:return r.prev=12,he(!1),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[1,9,12,15]])})));return function(){return r.apply(this,arguments)}}(),ze=function(){var r=o()(i()().mark((function r(t){var s,a;return i()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return we(!0),r.prev=3,r.next=6,ie({pageNumber:0,pageSize:1e3,serverUid:t});case 6:a=r.sent,null!==(s=a.data)&&void 0!==s&&s.content&&ce(a.data.content),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),console.error(e.formatMessage({id:"server.message.metricsFetchFailed"}),r.t0);case 13:return r.prev=13,we(!1),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[3,10,13,16]])})));return function(e){return r.apply(this,arguments)}}();(0,d.useEffect)((function(){Ye()}),[]),(0,d.useEffect)((function(){if(je){ze(je.uid);var e=setInterval((function(){ze(je.uid)}),1e3*Be);return function(){return clearInterval(e)}}}),[je,Be]);var We=function(e){if(!e)return"default";try{return Me(e).color}catch(e){return"default"}},Ke=function(e){if(!e)return(0,Se.jsx)(b.Z,{});try{switch(Me(e).icon){case"check-circle":return(0,Se.jsx)(O.Z,{});case"close-circle":return(0,Se.jsx)(U.Z,{});case"warning":return(0,Se.jsx)(T.Z,{});case"exclamation-circle":return(0,Se.jsx)(G.Z,{});case"tool":return(0,Se.jsx)(w.Z,{});case"play-circle":return(0,Se.jsx)(C.Z,{});case"pause-circle":return(0,Se.jsx)(P.Z,{});case"reload":return(0,Se.jsx)(L.Z,{});case"stop":return(0,Se.jsx)(H.Z,{});default:return(0,Se.jsx)(b.Z,{})}}catch(e){return(0,Se.jsx)(b.Z,{})}},qe=function(e){if(!e)return(0,Se.jsx)(_.Z,{});try{switch(Ae(e).icon){case"appstore":return(0,Se.jsx)(V.Z,{});case"database":return(0,Se.jsx)(B.Z,{});case"thunderbolt":return(0,Se.jsx)(F.Z,{});case"global":return(0,Se.jsx)(Y.Z,{});case"share-alt":return(0,Se.jsx)(z.Z,{});case"monitor":default:return(0,Se.jsx)(_.Z,{});case"folder":return(0,Se.jsx)(W.Z,{});case"mail":return(0,Se.jsx)(K.Z,{});case"link":return(0,Se.jsx)(q.Z,{});case"swap":return(0,Se.jsx)(Q.Z,{});case"save":return(0,Se.jsx)(X.Z,{});case"gateway":return(0,Se.jsx)(J.Z,{});case"api":return(0,Se.jsx)($.Z,{});case"message":return(0,Se.jsx)(ee.Z,{});case"search":return(0,Se.jsx)(re.Z,{});case"cloud":return(0,Se.jsx)(te.Z,{})}}catch(e){return(0,Se.jsx)(_.Z,{})}},Qe=[{title:e.formatMessage({id:"server.list.serverName"}),dataIndex:"serverName",key:"serverName",fixed:"left",width:250,render:function(e,r){return(0,Se.jsxs)(x.Z,{children:[qe(r.serverType),(0,Se.jsx)("span",{children:e})]})}},{title:e.formatMessage({id:"server.list.serverIp"}),dataIndex:"serverIp",key:"serverIp"},{title:e.formatMessage({id:"server.list.serverType"}),dataIndex:"serverType",key:"serverType",render:function(e){try{var r=Ae(e);return(0,Se.jsx)(h.Z,{color:r.color,children:r.label})}catch(r){return(0,Se.jsx)(h.Z,{color:"blue",children:e})}}},{title:e.formatMessage({id:"server.list.serverStatus"}),dataIndex:"serverStatus",key:"serverStatus",render:function(e){try{var r=Me(e);return(0,Se.jsx)(h.Z,{color:r.color,icon:Ke(e),children:r.label})}catch(r){return(0,Se.jsx)(h.Z,{color:We(e),icon:Ke(e),children:e})}}},{title:e.formatMessage({id:"server.list.cpuUsage"}),dataIndex:"cpuUsage",key:"cpuUsage",render:function(e){return(0,Se.jsx)(p.Z,{title:"".concat(e||0,"%"),children:(0,Se.jsx)(v.Z,{percent:e||0,size:"small",status:e&&e>80?"exception":"normal",showInfo:!1})})}},{title:e.formatMessage({id:"server.list.memoryUsage"}),dataIndex:"memoryUsage",key:"memoryUsage",render:function(e){return(0,Se.jsx)(p.Z,{title:"".concat(e||0,"%"),children:(0,Se.jsx)(v.Z,{percent:e||0,size:"small",status:e&&e>80?"exception":"normal",showInfo:!1})})}},{title:e.formatMessage({id:"server.list.diskUsage"}),dataIndex:"diskUsage",key:"diskUsage",render:function(e){return(0,Se.jsx)(p.Z,{title:"".concat(e||0,"%"),children:(0,Se.jsx)(v.Z,{percent:e||0,size:"small",status:e&&e>85?"exception":"normal",showInfo:!1})})}},{title:e.formatMessage({id:"server.list.lastHeartbeat"}),dataIndex:"lastHeartbeat",key:"lastHeartbeat",width:200,render:function(e){return e?Re()(e).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:e.formatMessage({id:"server.list.environment",defaultMessage:"环境"}),dataIndex:"environment",key:"environment"},{title:e.formatMessage({id:"server.list.port",defaultMessage:"端口"}),dataIndex:"serverPort",key:"serverPort",render:function(e){return e||"-"}},{title:e.formatMessage({id:"server.list.osInfo",defaultMessage:"操作系统"}),dataIndex:"osInfo",key:"osInfo",ellipsis:!0},{title:e.formatMessage({id:"server.list.appVersion",defaultMessage:"应用版本"}),dataIndex:"appVersion",key:"appVersion"},{title:e.formatMessage({id:"server.list.uptime",defaultMessage:"运行时长"}),dataIndex:"uptimeSeconds",key:"uptimeSeconds",render:function(e){if(!e)return"-";var r=Math.floor(e/86400),t=Math.floor(e%86400/3600);return"".concat(r,"d ").concat(t,"h")}},{title:e.formatMessage({id:"server.list.memory",defaultMessage:"内存(已用/总MB)"}),key:"memory",render:function(e,r){return r.totalMemoryMb&&r.usedMemoryMb?"".concat(r.usedMemoryMb," / ").concat(r.totalMemoryMb," MB"):"-"}},{title:e.formatMessage({id:"server.list.disk",defaultMessage:"磁盘(已用/总GB)"}),key:"disk",render:function(e,r){return r.totalDiskGb&&r.usedDiskGb?"".concat(r.usedDiskGb," / ").concat(r.totalDiskGb," GB"):"-"}},{title:e.formatMessage({id:"server.list.actions"}),key:"action",fixed:"right",render:function(r,t){return(0,Se.jsx)(x.Z,{size:"middle",children:(0,Se.jsx)(j.ZP,{type:"link",size:"small",onClick:function(){return Xe(t)},children:e.formatMessage({id:"server.list.viewMetrics"})})})}}],Xe=function(e){Ee(e)},Je=(ne||[]).filter((function(e){if(!e||!e.timestamp)return!1;var r=Re()(e.timestamp);return r.isAfter(Le[0])&&r.isBefore(Le[1])})),$e=function(){if(!Je||0===Je.length)return null;var e=Je[Je.length-1];return a()(a()({},e),{},{cpuUsage:Number(e.cpuUsage)||0,memoryUsage:Number(e.memoryUsage)||0,diskUsage:Number(e.diskUsage)||0,uptimeSeconds:Number(e.uptimeSeconds)||0})}(),er=Je&&0!==Je.length?Je.map((function(e){return{time:Re()(e.timestamp).format("HH:mm:ss"),cpu:Number(e.cpuUsage)||0,memory:Number(e.memoryUsage)||0,disk:Number(e.diskUsage)||0}})).sort((function(e,r){return Re()(e.time,"HH:mm:ss").valueOf()-Re()(r.time,"HH:mm:ss").valueOf()})):[],rr=Je&&0!==Je.length?Je.slice(-10).map((function(e){return{time:Re()(e.timestamp).format("MM-DD HH:mm"),cpu:Number(e.cpuUsage)||0,memory:Number(e.memoryUsage)||0,disk:Number(e.diskUsage)||0}})):[],tr=function(){if(!$e)return"unknown";var e=$e.cpuUsage,r=$e.memoryUsage,t=$e.diskUsage;return e&&e>90||r&&r>90||t&&t>95?"critical":e&&e>80||r&&r>80||t&&t>85?"warning":"healthy"}();return(0,Se.jsxs)("div",{style:{padding:"24px"},children:[(0,Se.jsxs)(E.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.statistics.total"}),value:s.length,prefix:(0,Se.jsx)(_.Z,{})})})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.statistics.online"}),value:s.filter((function(e){return e.serverStatus===oe})).length,prefix:(0,Se.jsx)(O.Z,{}),valueStyle:{color:"#3f8600"}})})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.statistics.offline"}),value:s.filter((function(e){return e.serverStatus===le})).length,prefix:(0,Se.jsx)(U.Z,{}),valueStyle:{color:"#cf1322"}})})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsx)(Z.Z,{children:(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.statistics.warning"}),value:s.filter((function(e){return e.serverStatus===de||e.serverStatus===me||e.serverStatus===ue})).length,prefix:(0,Se.jsx)(T.Z,{}),valueStyle:{color:"#faad14"}})})})]}),(0,Se.jsx)(Z.Z,{title:e.formatMessage({id:"server.list.title"}),extra:(0,Se.jsx)(x.Z,{children:(0,Se.jsx)(j.ZP,{icon:(0,Se.jsx)(L.Z,{}),onClick:Ye,children:e.formatMessage({id:"server.list.refresh"})})}),style:{marginBottom:"24px"},children:(0,Se.jsx)(A.Z,{columns:Qe,dataSource:s,loading:xe,rowKey:"uid",scroll:{x:3e3},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(r){return e.formatMessage({id:"server.pagination.total"},{total:r})}}})}),je&&(0,Se.jsxs)(Z.Z,{title:(0,Se.jsxs)(x.Z,{children:[(0,Se.jsxs)("span",{children:[je.serverName," - ",e.formatMessage({id:"server.metrics.title"})]}),(0,Se.jsx)(h.Z,{color:"healthy"===tr?"green":"warning"===tr?"orange":"red",children:"healthy"===tr?e.formatMessage({id:"server.health.healthy"}):"warning"===tr?e.formatMessage({id:"server.health.warning"}):e.formatMessage({id:"server.health.critical"})})]}),extra:(0,Se.jsxs)(x.Z,{children:[(0,Se.jsxs)(m.Z,{value:Be,onChange:Fe,style:{width:120},children:[(0,Se.jsx)(Ie,{value:10,children:e.formatMessage({id:"server.metrics.refreshInterval.10s"})}),(0,Se.jsx)(Ie,{value:30,children:e.formatMessage({id:"server.metrics.refreshInterval.30s"})}),(0,Se.jsx)(Ie,{value:60,children:e.formatMessage({id:"server.metrics.refreshInterval.1m"})}),(0,Se.jsx)(Ie,{value:300,children:e.formatMessage({id:"server.metrics.refreshInterval.5m"})})]}),(0,Se.jsx)(j.ZP,{icon:(0,Se.jsx)(L.Z,{}),onClick:function(){return ze(je.uid)},children:e.formatMessage({id:"server.metrics.refresh"})}),(0,Se.jsx)(j.ZP,{onClick:function(){return Ee(null)},children:e.formatMessage({id:"server.metrics.close"})})]}),style:{marginBottom:"24px"},children:[(0,Se.jsxs)(E.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Se.jsxs)(y.Z,{span:8,children:[(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.ip"}),":"]})," ",je.serverIp]}),(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.type"}),":"]})," ",je.serverType]}),(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.status"}),":"]})," ",je.serverStatus]})]}),(0,Se.jsxs)(y.Z,{span:8,children:[(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.environment"}),":"]})," ",je.environment]}),(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.port"}),":"]})," ",je.serverPort||"-"]}),(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.description"}),":"]})," ",je.description||"-"]})]}),(0,Se.jsxs)(y.Z,{span:8,children:[(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.lastHeartbeat"}),":"]})," ",je.lastHeartbeat?Re()(je.lastHeartbeat).format("YYYY-MM-DD HH:mm:ss"):"-"]}),(0,Se.jsxs)("p",{children:[(0,Se.jsxs)("strong",{children:[e.formatMessage({id:"server.info.createdAt"}),":"]})," ",je.createdAt?Re()(je.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"]})]})]}),(0,Se.jsxs)(E.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsxs)(Z.Z,{size:"small",children:[(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.metrics.cpu.title"}),value:(null==$e?void 0:$e.cpuUsage)||0,suffix:"%",valueStyle:{color:((null==$e?void 0:$e.cpuUsage)||0)>80?"#cf1322":"#3f8600"}}),(0,Se.jsx)(v.Z,{percent:(null==$e?void 0:$e.cpuUsage)||0,status:((null==$e?void 0:$e.cpuUsage)||0)>80?"exception":"normal",strokeColor:((null==$e?void 0:$e.cpuUsage)||0)>80?"#cf1322":"#3f8600"})]})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsxs)(Z.Z,{size:"small",children:[(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.metrics.memory.title"}),value:(null==$e?void 0:$e.memoryUsage)||0,suffix:"%",valueStyle:{color:((null==$e?void 0:$e.memoryUsage)||0)>80?"#cf1322":"#3f8600"}}),(0,Se.jsx)(v.Z,{percent:(null==$e?void 0:$e.memoryUsage)||0,status:((null==$e?void 0:$e.memoryUsage)||0)>80?"exception":"normal",strokeColor:((null==$e?void 0:$e.memoryUsage)||0)>80?"#cf1322":"#3f8600"})]})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsxs)(Z.Z,{size:"small",children:[(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.metrics.disk.title"}),value:(null==$e?void 0:$e.diskUsage)||0,suffix:"%",valueStyle:{color:((null==$e?void 0:$e.diskUsage)||0)>85?"#cf1322":"#3f8600"}}),(0,Se.jsx)(v.Z,{percent:(null==$e?void 0:$e.diskUsage)||0,status:((null==$e?void 0:$e.diskUsage)||0)>85?"exception":"normal",strokeColor:((null==$e?void 0:$e.diskUsage)||0)>85?"#cf1322":"#3f8600"})]})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsxs)(Z.Z,{size:"small",children:[(0,Se.jsx)(M.Z,{title:e.formatMessage({id:"server.metrics.uptime.title"}),value:(null==$e?void 0:$e.uptimeSeconds)||0,suffix:e.formatMessage({id:"server.metrics.uptime.seconds"}),prefix:(0,Se.jsx)(se.Z,{})}),(0,Se.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:null!=$e&&$e.uptimeSeconds?"".concat(Math.floor($e.uptimeSeconds/86400)).concat(e.formatMessage({id:"server.metrics.uptime.days"})," ").concat(Math.floor($e.uptimeSeconds%86400/3600)).concat(e.formatMessage({id:"server.metrics.uptime.hours"})):e.formatMessage({id:"server.metrics.uptime.unknown"})})]})})]}),(0,Se.jsxs)(E.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsxs)("span",{children:[e.formatMessage({id:"server.timeRange.label"}),":"]})}),(0,Se.jsx)(y.Z,{span:12,children:(0,Se.jsx)(N.default.RangePicker,{value:Le,onChange:function(e){e&&He([e[0],e[1]])},showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})}),(0,Se.jsx)(y.Z,{span:6,children:(0,Se.jsxs)(x.Z,{children:[(0,Se.jsx)(j.ZP,{size:"small",onClick:function(){return He([Re()().subtract(1,"hour"),Re()()])},children:e.formatMessage({id:"server.timeRange.last1Hour"})}),(0,Se.jsx)(j.ZP,{size:"small",onClick:function(){return He([Re()().subtract(24,"hour"),Re()()])},children:e.formatMessage({id:"server.timeRange.last24Hours"})})]})})]}),(0,Se.jsx)(R.Z,{items:[{key:"trend",label:e.formatMessage({id:"server.charts.trend"}),children:(0,Se.jsx)(Z.Z,{loading:Ge,children:er.length>0?(0,Se.jsxs)(E.Z,{gutter:16,children:[(0,Se.jsxs)(y.Z,{span:8,children:[(0,Se.jsx)("div",{style:{textAlign:"center",marginBottom:"8px"},children:(0,Se.jsx)("strong",{children:e.formatMessage({id:"server.metrics.cpu.title"})})}),(0,Se.jsx)(S.Z,{data:er,xField:"time",yField:"cpu",height:200,point:{size:2,shape:"circle"},smooth:!0,color:"#1890ff",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.cpu.title"}),value:"".concat(r.cpu,"%")}}}})]}),(0,Se.jsxs)(y.Z,{span:8,children:[(0,Se.jsx)("div",{style:{textAlign:"center",marginBottom:"8px"},children:(0,Se.jsx)("strong",{children:e.formatMessage({id:"server.metrics.memory.title"})})}),(0,Se.jsx)(S.Z,{data:er,xField:"time",yField:"memory",height:200,point:{size:2,shape:"circle"},smooth:!0,color:"#52c41a",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.memory.title"}),value:"".concat(r.memory,"%")}}}})]}),(0,Se.jsxs)(y.Z,{span:8,children:[(0,Se.jsx)("div",{style:{textAlign:"center",marginBottom:"8px"},children:(0,Se.jsx)("strong",{children:e.formatMessage({id:"server.metrics.disk.title"})})}),(0,Se.jsx)(S.Z,{data:er,xField:"time",yField:"disk",height:200,point:{size:2,shape:"circle"},smooth:!0,color:"#faad14",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.disk.title"}),value:"".concat(r.disk,"%")}}}})]})]}):(0,Se.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})},{key:"history",label:e.formatMessage({id:"server.charts.history"}),children:(0,Se.jsxs)(E.Z,{gutter:16,children:[(0,Se.jsx)(y.Z,{span:12,children:(0,Se.jsx)(Z.Z,{title:e.formatMessage({id:"server.charts.cpuHistory"}),loading:Ge,children:rr.length>0?(0,Se.jsx)(I.Z,{data:rr,xField:"time",yField:"cpu",height:250,color:"#1890ff",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.cpu.title"}),value:"".concat(r.cpu,"%")}}}}):(0,Se.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})}),(0,Se.jsx)(y.Z,{span:12,children:(0,Se.jsx)(Z.Z,{title:e.formatMessage({id:"server.charts.memoryHistory"}),loading:Ge,children:rr.length>0?(0,Se.jsx)(I.Z,{data:rr,xField:"time",yField:"memory",height:250,color:"#52c41a",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.memory.title"}),value:"".concat(r.memory,"%")}}}}):(0,Se.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})})]})},{key:"gauge",label:e.formatMessage({id:"server.charts.gauge"}),children:(0,Se.jsxs)(E.Z,{gutter:16,children:[(0,Se.jsx)(y.Z,{span:8,children:(0,Se.jsx)(Z.Z,{title:e.formatMessage({id:"server.charts.cpuGauge"}),loading:Ge,children:$e?(0,Se.jsx)(D.Z,{percent:($e.cpuUsage||0)/100||0,height:200,range:{color:["#52c41a","#faad14","#cf1322"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{style:{color:"#363636"}},content:{style:{color:"#363636"},formatter:function(){var e=Number($e.cpuUsage)||0;return"".concat(e,"%")}}}}):(0,Se.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})}),(0,Se.jsx)(y.Z,{span:8,children:(0,Se.jsx)(Z.Z,{title:e.formatMessage({id:"server.charts.memoryGauge"}),loading:Ge,children:$e?(0,Se.jsx)(D.Z,{percent:($e.memoryUsage||0)/100||0,height:200,range:{color:["#52c41a","#faad14","#cf1322"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{style:{color:"#363636"}},content:{style:{color:"#363636"},formatter:function(){var e=Number($e.memoryUsage)||0;return"".concat(e,"%")}}}}):(0,Se.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})}),(0,Se.jsx)(y.Z,{span:8,children:(0,Se.jsx)(Z.Z,{title:e.formatMessage({id:"server.charts.diskGauge"}),loading:Ge,children:$e?(0,Se.jsx)(D.Z,{percent:($e.diskUsage||0)/100||0,height:200,range:{color:["#52c41a","#faad14","#cf1322"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{style:{color:"#363636"}},content:{style:{color:"#363636"},formatter:function(){var e=Number($e.diskUsage)||0;return"".concat(e,"%")}}}}):(0,Se.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})})]})}]})]})]})}}}]);