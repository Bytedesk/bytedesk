"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4640],{753:function(e,n,r){r.d(n,{XS:function(){return d},k4:function(){return p},uu:function(){return v},yr:function(){return f}});var t=r(90819),u=r.n(t),a=r(73193),o=r.n(a),c=r(89933),s=r.n(c),i=r(36265),l=r(5861);function d(e){return g.apply(this,arguments)}function g(){return(g=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/query/org",{method:"GET",params:o()(o()({},n),{},{channel:i.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return y.apply(this,arguments)}function y(){return(y=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/create",{method:"POST",data:o()(o()({},n),{},{channel:i.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/update",{method:"POST",data:o()(o()({},n),{},{channel:i.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return(w=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/delete",{method:"POST",data:o()(o()({},n),{},{channel:i.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},94640:function(e,n,r){r.d(n,{HK:function(){return g},ht:function(){return y},i8:function(){return p},sT:function(){return f}});var t=r(90819),u=r.n(t),a=r(89933),o=r.n(a),c=r(5286),s=r(753),i=r(65717),l=r(36265),d=r(42539),g=function(){var e=o()(u()().mark((function e(n,r,t,a,o){var g,p,y;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=i.v.getState().setCategoryResult,null!=o&&o.showLoading&&c.yw.loading((null==o?void 0:o.loadingMessage)||"Loading..."),p={pageNumber:(null==o?void 0:o.pageNumber)||0,pageSize:(null==o?void 0:o.pageSize)||20,type:n,kbUid:t,orgUid:a===l.Hxq?"":r,level:a,name:(null==o?void 0:o.searchName)||""},e.prev=3,e.next=6,(0,s.XS)(p);case 6:if(y=e.sent,d.Z.debug("queryCategoriesByOrg response: ",y,p),200!==y.code){e.next=14;break}return g(y),null!=o&&o.showLoading&&c.yw.destroy(),e.abrupt("return",y);case 14:return null!=o&&o.showLoading&&c.yw.destroy(),c.yw.error(y.message),e.abrupt("return",null);case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(3),null!=o&&o.showLoading&&c.yw.destroy(),c.yw.error((null==o?void 0:o.errorMessage)||"Failed to fetch categories"),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(n,r,t,u,a){return e.apply(this,arguments)}}(),p=function(){var e=o()(u()().mark((function e(n,r){var t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=r&&r.showLoading&&c.yw.loading((null==r?void 0:r.loadingMessage)||"Creating..."),e.prev=1,e.next=4,(0,s.k4)(n);case 4:if(t=e.sent,console.log("createCategory response:",t),200!==t.code){e.next=12;break}return null!=r&&r.showLoading&&c.yw.destroy(),c.yw.success((null==r?void 0:r.successMessage)||"Create Success"),e.abrupt("return",t);case 12:return null!=r&&r.showLoading&&c.yw.destroy(),c.yw.error(t.message),e.abrupt("return",null);case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(1),null!=r&&r.showLoading&&c.yw.destroy(),c.yw.error((null==r?void 0:r.errorMessage)||"Failed to create category"),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(n,r){return e.apply(this,arguments)}}(),y=function(){var e=o()(u()().mark((function e(n,r){var t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=r&&r.showLoading&&c.yw.loading((null==r?void 0:r.loadingMessage)||"Updating..."),e.prev=1,e.next=4,(0,s.yr)(n);case 4:if(t=e.sent,console.log("updateCategory response:",t),200!==t.code){e.next=12;break}return null!=r&&r.showLoading&&c.yw.destroy(),c.yw.success((null==r?void 0:r.successMessage)||"Update Success"),e.abrupt("return",t);case 12:return null!=r&&r.showLoading&&c.yw.destroy(),c.yw.error(t.message),e.abrupt("return",null);case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(1),null!=r&&r.showLoading&&c.yw.destroy(),c.yw.error((null==r?void 0:r.errorMessage)||"Failed to update category"),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(n,r){return e.apply(this,arguments)}}(),f=function(){var e=o()(u()().mark((function e(n,r){var t;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=r&&r.showLoading&&c.yw.loading((null==r?void 0:r.loadingMessage)||"Deleting..."),e.prev=1,e.next=4,(0,s.uu)(n);case 4:if(t=e.sent,console.log("deleteCategory response:",t),200!==t.code){e.next=12;break}return null!=r&&r.showLoading&&c.yw.destroy(),c.yw.success((null==r?void 0:r.successMessage)||"Delete Success"),e.abrupt("return",t);case 12:return null!=r&&r.showLoading&&c.yw.destroy(),c.yw.error(t.message),e.abrupt("return",null);case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(1),null!=r&&r.showLoading&&c.yw.destroy(),c.yw.error((null==r?void 0:r.errorMessage)||"Failed to delete category"),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(n,r){return e.apply(this,arguments)}}()},65717:function(e,n,r){r.d(n,{v:function(){return y}});var t=r(86222),u=r.n(t),a=r(73193),o=r.n(a),c=r(76711),s=r.n(c),i=r(36265),l=r(74543),d=r(21152),g=r(72083),p=r(42539);var y=(0,l.Ue)()((0,d.mW)((0,d.tJ)((0,g.n)((function(e,n){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:i.zBg,name:i.zBg},setCategoryResult:function(n){var r=function(e){var n,r=[];return function e(n,t){n&&0!==n.length&&n.forEach((function(n){if(n&&n.uid&&n.uid!==i.zBg){var u=t?"".concat(t," / ").concat(n.name):n.name||"";r.push({label:u,value:n.uid}),n.children&&n.children.length>0&&e(n.children,u)}}))}((null==e||null===(n=e.data)||void 0===n?void 0:n.content)||[]),r}(n),t=function(e){var n,r=(null==e||null===(n=e.data)||void 0===n?void 0:n.content)||[],t=function e(n){var r={title:n.name||"",key:n.uid||""};return n.children&&n.children.length>0&&(r.children=n.children.map((function(n){return e(n)}))),r};return r.filter((function(e){return e&&e.uid&&e.uid!==i.zBg})).map((function(e){return t(e)}))}(n),u=[{title:i.zBg,key:i.zBg}].concat(s()(t)),a={uid:i.zBg,name:i.zBg},c=o()(o()({},n),{},{data:o()(o()({},n.data),{},{content:[a].concat(s()(n.data.content))})});e({categoryResult:c,categoryTreeOptions:u,categorySelectOptions:r}),0===n.data.content.length&&e({currentCategory:{uid:i.zBg,name:i.zBg}})},insertCategory:function(n){e((function(e){e.categoryResult.data.content.unshift(n)}))},upgradeCategory:function(n){e((function(e){var r=e.categoryResult.data.content,t=r.findIndex((function(e){return e.uid===n.uid}));-1!==t?r[t]=n:console.warn("Category with uid ".concat(n.uid," not found."))}))},setCurrentCategory:function(n){e({currentCategory:n})},resetDefaultCategory:function(){p.Z.log("resetDefaultCategory"),e({currentCategory:{uid:i.zBg,name:i.zBg}})},setCurrentCategoryUid:function(r){if(r!==i.zBg){var t=function e(n,r){if(n&&0!==n.length){var t,a=u()(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if((null==o?void 0:o.uid)===r)return o;var c=e(null==o?void 0:o.children,r);if(c)return c}}catch(e){a.e(e)}finally{a.f()}}}(n().categoryResult.data.content,r);e({currentCategory:null!=t?t:{uid:i.zBg,name:i.zBg}})}else e({currentCategory:{uid:i.zBg,name:i.zBg}})},deleteCategoryCache:function(){return e({},!0)}}})),{name:i.OMm})))}}]);