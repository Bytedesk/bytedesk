"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[6269],{6203:function(e,n,t){t.d(n,{D$:function(){return x},ZQ:function(){return g},eg:function(){return d},nd:function(){return P},s:function(){return f},zM:function(){return m}});var l=t(90819),a=t.n(l),r=t(73193),s=t.n(r),o=t(89933),i=t.n(o),p=t(39497),u=t(14906);function d(e){return c.apply(this,arguments)}function c(){return(c=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/email/query/org",{method:"GET",params:s()(s()({},n),{},{channel:p.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/email/query/uid",{method:"GET",params:s()(s()({},n),{},{channel:p.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return b.apply(this,arguments)}function b(){return(b=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/email/create",{method:"POST",data:s()(s()({},n),{},{channel:p.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return E.apply(this,arguments)}function E(){return(E=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/email/update",{method:"POST",data:s()(s()({},n),{},{channel:p.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return S.apply(this,arguments)}function S(){return(S=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/email/delete",{method:"POST",data:s()(s()({},n),{},{channel:p.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=i()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/email/sync/start",{method:"POST",params:s()(s()({},n),{},{channel:p.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},42496:function(e,n,t){var l,a=t(73193),r=t.n(a),s=t(45332),o=t.n(s),i=t(10154),p=t.n(i),u=t(91361),d=t(69851),c=t(98830),m=t(5932),h=t(25784),x=t(89965),b=t(2250),f=t(60796),E=t(42491),P=t(80953),S=t(82864),g=t(39487),v=t(82770),j=t(40110),y=t(78578),k=t(62640),w=t(32693),T=t(58422),C=t(44194),H=t(31549),Z="IMAP",L="POP3",R="SMTP",I="EXCHANGE",M="ONLINE_SERVICE",q="TICKET_SERVICE",A=function(e){return"SERVICE"===e?M:q},O="QQ",N="TENCENT_ENTERPRISE",z="SINA",B="GMAIL",F="NETEASE_163",_="NETEASE_ENTERPRISE",U="ALIYUN_ENTERPRISE",V="HOTMAIL",W="FEISHU_ENTERPRISE",D="YAHOO",J="OTHER",X=(l={},p()(p()(p()(p()(p()(p()(p()(p()(p()(p()(l,O,{smtpHost:"smtp.qq.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.qq.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.qq.com",pop3Port:995,pop3SslEnabled:!0}),N,{smtpHost:"smtp.exmail.qq.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.exmail.qq.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.exmail.qq.com",pop3Port:995,pop3SslEnabled:!0}),z,{smtpHost:"smtp.sina.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.sina.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.sina.com",pop3Port:995,pop3SslEnabled:!0}),B,{smtpHost:"smtp.gmail.com",smtpPort:587,smtpSslEnabled:!1,smtpTlsEnabled:!0,imapHost:"imap.gmail.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.gmail.com",pop3Port:995,pop3SslEnabled:!0}),F,{smtpHost:"smtp.163.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.163.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.163.com",pop3Port:995,pop3SslEnabled:!0}),_,{smtpHost:"smtp.qiye.163.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.qiye.163.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.qiye.163.com",pop3Port:995,pop3SslEnabled:!0}),U,{smtpHost:"smtp.qiye.aliyun.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.qiye.aliyun.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.qiye.aliyun.com",pop3Port:995,pop3SslEnabled:!0}),V,{smtpHost:"smtp-mail.outlook.com",smtpPort:587,smtpSslEnabled:!1,smtpTlsEnabled:!0,imapHost:"outlook.office365.com",imapPort:993,imapSslEnabled:!0,pop3Host:"outlook.office365.com",pop3Port:995,pop3SslEnabled:!0}),W,{smtpHost:"smtp.feishu.cn",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.feishu.cn",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.feishu.cn",pop3Port:995,pop3SslEnabled:!0}),D,{smtpHost:"smtp.mail.yahoo.com",smtpPort:587,smtpSslEnabled:!1,smtpTlsEnabled:!0,imapHost:"imap.mail.yahoo.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.mail.yahoo.com",pop3Port:995,pop3SslEnabled:!0}),p()(l,J,{smtpHost:"",smtpPort:587,smtpSslEnabled:!0,smtpTlsEnabled:!0,imapHost:"",imapPort:993,imapSslEnabled:!0,pop3Host:"",pop3Port:995,pop3SslEnabled:!0}));n.Z=function(e){var n=e.type,t=e.isEdit,l=e.email,a=e.open,s=e.loading,i=void 0!==s&&s,p=e.onClose,M=e.onSubmit,q=h.A.useForm(),G=o()(q,1)[0],Q=(0,u.Z)().translateStringTranct,Y=(0,c.u)((function(e){return e.currentOrg})),$=(0,C.useState)(!1),K=o()($,2),ee=K[0],ne=K[1],te=(0,C.useState)(Z),le=o()(te,2),ae=le[0],re=le[1],se=(0,C.useState)(!1),oe=o()(se,2),ie=oe[0],pe=oe[1],ue=(0,d.f)(),de=ue.workgroups,ce=ue.getDefaultUid,me=ue.getWorkgroupOptions,he=function(){console.log("handleSubmit"),ne(!0),G.validateFields().then((function(e){var n=r()(r()({},e),{},{orgUid:null==Y?void 0:Y.uid});console.log("submit",n),M(n)})).catch((function(){ne(!1)}))};(0,C.useEffect)((function(){if(t){var e=(null==l?void 0:l.protocol)||Z;re(e),G.setFieldsValue({name:null==l?void 0:l.name,description:null==l?void 0:l.description,provider:(null==l?void 0:l.provider)||U,usageType:(null==l?void 0:l.type)||A(n),protocol:e,enabled:!1!==(null==l?void 0:l.enabled),workgroupUid:null==l?void 0:l.workgroupUid,emailAddress:null==l?void 0:l.emailAddress,emailPassword:null==l?void 0:l.emailPassword,smtpHost:null==l?void 0:l.smtpHost,smtpPort:(null==l?void 0:l.smtpPort)||587,smtpSslEnabled:!1!==(null==l?void 0:l.smtpSslEnabled),smtpTlsEnabled:!1!==(null==l?void 0:l.smtpTlsEnabled),imapHost:null==l?void 0:l.imapHost,imapPort:(null==l?void 0:l.imapPort)||993,imapSslEnabled:!1!==(null==l?void 0:l.imapSslEnabled),pop3Host:null==l?void 0:l.pop3Host,pop3Port:(null==l?void 0:l.pop3Port)||995,pop3SslEnabled:!1!==(null==l?void 0:l.pop3SslEnabled),exchangeHost:null==l?void 0:l.exchangeHost,exchangePort:(null==l?void 0:l.exchangePort)||443,exchangeSslEnabled:!1!==(null==l?void 0:l.exchangeSslEnabled),senderName:null==l?void 0:l.senderName,syncInterval:(null==l?void 0:l.syncInterval)||5,autoSyncEnabled:!1!==(null==l?void 0:l.autoSyncEnabled),autoReplyEnabled:(null==l?void 0:l.autoReplyEnabled)||!1,autoReplyContent:null==l?void 0:l.autoReplyContent,debug:(null==l?void 0:l.debug)||!1})}else{var a=ce();re(Z),G.setFieldsValue({name:"",description:"",provider:U,usageType:A(n),protocol:Z,enabled:!0,workgroupUid:a,emailAddress:"",emailPassword:"",smtpHost:"smtp.qiye.aliyun.com",smtpPort:465,smtpSslEnabled:!0,smtpTlsEnabled:!1,imapHost:"imap.qiye.aliyun.com",imapPort:993,imapSslEnabled:!0,pop3Host:"pop.qiye.aliyun.com",pop3Port:995,pop3SslEnabled:!0,exchangeHost:"",exchangePort:443,exchangeSslEnabled:!0,senderName:"",syncInterval:5,autoSyncEnabled:!0,autoReplyEnabled:!1,autoReplyContent:"",debug:!1})}}),[t,l,n,G,de]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(S.Z,{title:"邮件应用配置",onClose:p,open:a,width:600,extra:(0,H.jsxs)(g.Z,{children:[(0,H.jsx)(v.ZP,{onClick:p,children:"取消"}),(0,H.jsx)(v.ZP,{type:"primary",onClick:he,loading:ee||i,children:ee||i?"保存中...":"保存"})]}),children:(0,H.jsxs)(h.A,{form:G,name:"emailForm",onFinish:he,submitter:!1,children:[(0,H.jsxs)(j.Z,{title:"基本信息",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(x.Z,{label:"应用名称",name:"name",rules:[{required:!0,message:"请输入应用名称"}],placeholder:"请输入邮件应用名称"}),(0,H.jsx)(x.Z,{label:"应用描述",name:"description",placeholder:"请输入应用描述，如：客服邮箱"}),(0,H.jsx)(b.Z,{label:"邮箱服务提供商",name:"provider",options:[{label:"阿里云企业邮箱",value:U},{label:"QQ邮箱",value:O},{label:"腾讯企业邮箱",value:N},{label:"新浪邮箱",value:z},{label:"Gmail",value:B},{label:"网易163邮箱",value:F},{label:"网易企业邮箱",value:_},{label:"Hotmail/Outlook",value:V},{label:"飞书企业邮箱",value:W},{label:"Yahoo邮箱",value:D},{label:"其他邮箱",value:J}],rules:[{required:!0,message:"请选择邮箱类型"}],extra:"选择您使用的邮箱服务商类型，系统将自动填充相应的服务器配置",fieldProps:{onChange:function(e){var n=X[e];n&&G.setFieldsValue({smtpHost:n.smtpHost,smtpPort:n.smtpPort,smtpSslEnabled:n.smtpSslEnabled,smtpTlsEnabled:n.smtpTlsEnabled,imapHost:n.imapHost,imapPort:n.imapPort,imapSslEnabled:n.imapSslEnabled,pop3Host:n.pop3Host,pop3Port:n.pop3Port,pop3SslEnabled:n.pop3SslEnabled})}}}),(0,H.jsx)(b.Z,{label:"邮箱协议",name:"protocol",options:[{label:"IMAP协议(推荐)",value:Z},{label:"POP3协议",value:L},{label:"SMTP协议",value:R},{label:"Exchange协议",value:I}],rules:[{required:!0,message:"请选择邮箱协议"}],extra:(0,H.jsx)("a",{href:(0,m.V)()+"/docs/zh-CN/docs/channel/email#邮件协议说明",target:"_blank",rel:"noopener noreferrer",children:"邮件协议说明"}),fieldProps:{onChange:function(e){re(e)}}})]}),(0,H.jsxs)(j.Z,{title:"邮箱账户",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(x.Z,{label:(0,H.jsxs)("span",{children:["邮箱地址",(0,H.jsx)(y.Z,{title:"用于接收和发送邮件的邮箱地址",children:(0,H.jsx)(w.Z,{style:{marginLeft:4}})})]}),name:"emailAddress",rules:[{required:!0,message:"请输入邮箱地址"},{type:"email",message:"请输入有效的邮箱地址"}],placeholder:"example@company.com"}),(0,H.jsx)(x.Z.Password,{label:(0,H.jsxs)("span",{children:["邮箱密码/授权码",(0,H.jsx)(y.Z,{title:"邮箱密码或第三方应用授权码，建议使用授权码以提高安全性",children:(0,H.jsx)(w.Z,{style:{marginLeft:4}})})]}),name:"emailPassword",rules:[{required:!0,message:"请输入邮箱密码或授权码"}],placeholder:"请输入邮箱密码或授权码",extra:(0,H.jsx)("a",{href:(0,m.V)()+"/docs/zh-CN/docs/channel/email#%E7%94%9F%E6%88%90%E4%B8%93%E6%9C%89%E5%AF%86%E7%A0%81%E9%9D%9E%E9%82%AE%E7%AE%B1%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81",target:"_blank",rel:"noopener noreferrer",children:"查看如何获取邮箱密码/授权码说明"})}),(0,H.jsx)(x.Z,{label:(0,H.jsxs)("span",{children:["发件人显示名称",(0,H.jsx)(y.Z,{title:"邮件发送时显示的发件人名称",children:(0,H.jsx)(w.Z,{style:{marginLeft:4}})})]}),name:"senderName",placeholder:"客服中心",extra:"留空则使用邮箱地址作为发件人名称"})]}),(0,H.jsxs)(j.Z,{title:"SMTP服务器配置（发件）",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(x.Z,{label:(0,H.jsxs)("span",{children:["SMTP服务器地址",(0,H.jsx)(y.Z,{title:"查看SMTP服务器配置说明",children:(0,H.jsx)(T.Z,{onClick:function(){return window.open((0,m.V)()+"docs/zh-CN/docs/channel/email#smtp服务器配置","_blank")},style:{cursor:"pointer",marginLeft:4}})})]}),name:"smtpHost",rules:[{required:!0,message:"请输入SMTP服务器地址"}],placeholder:"smtp.gmail.com",extra:"用于发送邮件的SMTP服务器地址"}),(0,H.jsx)(f.Z,{label:"SMTP端口",name:"smtpPort",min:1,max:65535,fieldProps:{precision:0},extra:"常用端口：25(不加密), 587(TLS), 465(SSL)"}),(0,H.jsx)(E.Z,{label:"启用SSL",name:"smtpSslEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"使用SSL加密连接（端口通常为465）"}),(0,H.jsx)(E.Z,{label:"启用TLS",name:"smtpTlsEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"使用TLS加密连接（端口通常为587）"})]}),(0,H.jsxs)(j.Z,{title:"IMAP服务器配置（收件）",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(x.Z,{label:(0,H.jsxs)("span",{children:["IMAP服务器地址",(0,H.jsx)(y.Z,{title:"查看IMAP服务器配置说明",children:(0,H.jsx)(T.Z,{onClick:function(){return window.open((0,m.V)()+"docs/zh-CN/docs/channel/email#imap服务器配置","_blank")},style:{cursor:"pointer",marginLeft:4}})})]}),name:"imapHost",rules:ae===Z?[{required:!0,message:"请输入IMAP服务器地址"}]:[],placeholder:"imap.gmail.com",extra:"用于接收邮件的IMAP服务器地址"}),(0,H.jsx)(f.Z,{label:"IMAP端口",name:"imapPort",min:1,max:65535,fieldProps:{precision:0},extra:"常用端口：143(不加密), 993(SSL)"}),(0,H.jsx)(E.Z,{label:"IMAP启用SSL",name:"imapSslEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"使用SSL加密IMAP连接"})]}),(0,H.jsxs)(j.Z,{title:"POP3服务器配置（收件）",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(x.Z,{label:(0,H.jsxs)("span",{children:["POP3服务器地址",(0,H.jsx)(y.Z,{title:"查看POP3服务器配置说明",children:(0,H.jsx)(T.Z,{onClick:function(){return window.open((0,m.V)()+"docs/zh-CN/docs/channel/email#pop3服务器配置","_blank")},style:{cursor:"pointer",marginLeft:4}})})]}),name:"pop3Host",rules:[{required:!0,message:"请输入POP3服务器地址"}],placeholder:"pop.gmail.com",extra:"POP3服务器地址，用于接收邮件"}),(0,H.jsx)(f.Z,{label:"POP3端口",name:"pop3Port",min:1,max:65535,fieldProps:{precision:0},extra:"常用端口：110(不加密), 995(SSL)"}),(0,H.jsx)(E.Z,{label:"POP3启用SSL",name:"pop3SslEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"使用SSL加密POP3连接"})]}),(0,H.jsxs)(j.Z,{title:"基本设置",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(b.Z,{label:"客服工作组",name:"workgroupUid",options:me().map((function(e){return{label:Q(e.label),value:e.value}})),fieldProps:{allowClear:!0},rules:[{required:!0,message:"请选择客服工作组"}],extra:"邮件消息将分配给选中的工作组处理"}),(0,H.jsx)(E.Z,{label:"启用应用",name:"enabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"控制应用是否启用，禁用后应用将无法接收和处理邮件"})]}),(0,H.jsx)("div",{style:{textAlign:"center",margin:"16px 0"},children:(0,H.jsx)(v.ZP,{type:"dashed",onClick:function(){return pe(!ie)},icon:ie?(0,H.jsx)("span",{children:"▼"}):(0,H.jsx)("span",{children:"▶"}),children:ie?"收起高级设置":"展开高级设置"})}),ie&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(j.Z,{title:"Exchange服务器配置（可选）",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(x.Z,{label:(0,H.jsxs)("span",{children:["Exchange服务器地址",(0,H.jsx)(y.Z,{title:"查看Exchange服务器配置说明",children:(0,H.jsx)(T.Z,{onClick:function(){return window.open((0,m.V)()+"docs/zh-CN/docs/channel/email#exchange服务器配置","_blank")},style:{cursor:"pointer",marginLeft:4}})})]}),name:"exchangeHost",rules:[{message:"请输入Exchange服务器地址"}],placeholder:"mail.company.com",extra:"Exchange服务器地址或Office 365服务器"}),(0,H.jsx)(f.Z,{label:"Exchange端口",name:"exchangePort",min:1,max:65535,fieldProps:{precision:0},extra:"Exchange常用端口：443(HTTPS), 993(IMAP over SSL)"}),(0,H.jsx)(E.Z,{label:"启用SSL/TLS",name:"exchangeSslEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"Exchange服务器通常要求SSL/TLS加密"})]}),(0,H.jsxs)(j.Z,{title:"邮件同步设置",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(E.Z,{label:"自动同步邮件",name:"autoSyncEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"是否自动定期同步邮件".concat(ae===L?"（POP3协议会删除服务器邮件）":"")}),(0,H.jsx)(f.Z,{label:"同步间隔（分钟）",name:"syncInterval",min:1,max:1440,fieldProps:{precision:0},extra:"邮件同步的时间间隔，建议".concat(ae===L?"10-60":"5-30","分钟")}),ae===L&&(0,H.jsxs)("div",{style:{background:"#fff7e6",border:"1px solid #ffd591",borderRadius:"6px",padding:"12px",margin:"12px 0"},children:[(0,H.jsx)("strong",{children:"注意："})," POP3协议会将邮件从服务器下载到本地，并可能删除服务器上的邮件副本。请谨慎配置同步间隔。"]})]}),(0,H.jsxs)(j.Z,{title:"自动回复设置",size:"small",style:{marginBottom:16},children:[(0,H.jsx)(E.Z,{label:"启用自动回复",name:"autoReplyEnabled",fieldProps:{checkedChildren:"启用",unCheckedChildren:"禁用"},extra:"收到邮件时是否自动发送回复"}),(0,H.jsx)(P.Z,{label:"自动回复内容",name:"autoReplyContent",fieldProps:{rows:4,maxLength:1e3,showCount:!0},placeholder:"感谢您的邮件，我们已收到并将尽快回复您。",extra:"启用自动回复时发送的内容，最多1000字符"})]}),(0,H.jsx)(j.Z,{title:"调试设置",size:"small",style:{marginBottom:16},children:(0,H.jsx)(E.Z,{label:"调试模式",name:"debug",fieldProps:{checkedChildren:"开启",unCheckedChildren:"关闭"},extra:"开启调试模式后，系统会记录详细的日志信息，便于问题排查"})})]}),(0,H.jsx)(k.Z,{}),(0,H.jsxs)("div",{style:{color:"#666",fontSize:"12px"},children:[(0,H.jsx)("p",{children:(0,H.jsx)("strong",{children:"协议说明："})}),ae===Z&&(0,H.jsxs)("div",{children:["• IMAP协议支持多设备同步，邮件保留在服务器上",(0,H.jsx)("br",{}),"• 需要配置SMTP用于发送邮件，IMAP用于接收邮件",(0,H.jsx)("br",{}),"• 推荐端口：IMAP 993(SSL), SMTP 587(TLS)或465(SSL)"]}),ae===L&&(0,H.jsxs)("div",{children:["• POP3协议会将邮件下载到本地，可能从服务器删除",(0,H.jsx)("br",{}),"• 需要配置SMTP用于发送邮件，POP3用于接收邮件",(0,H.jsx)("br",{}),"• 推荐端口：POP3 995(SSL), SMTP 587(TLS)或465(SSL)",(0,H.jsx)("br",{}),"• ",(0,H.jsx)("span",{style:{color:"#fa8c16"},children:"注意：POP3不支持多设备同步"})]}),ae===R&&(0,H.jsxs)("div",{children:["• SMTP协议仅用于发送邮件，无法接收邮件",(0,H.jsx)("br",{}),"• 推荐端口：587(TLS)或465(SSL)",(0,H.jsx)("br",{}),"• 适用于只需要发送邮件通知的场景"]}),ae===I&&(0,H.jsxs)("div",{children:["• Exchange协议适用于Microsoft Exchange服务器和Office 365",(0,H.jsx)("br",{}),"• 支持邮件、日历、联系人等功能",(0,H.jsx)("br",{}),"• 通常使用443端口(HTTPS)或993端口(IMAP over SSL)",(0,H.jsx)("br",{}),"• 需要企业管理员配置相关权限"]}),(0,H.jsxs)("p",{style:{marginTop:"12px"},children:[(0,H.jsx)("strong",{children:"通用提示："}),(0,H.jsx)("br",{}),"• 请确保邮箱服务商已开启相应协议服务",(0,H.jsx)("br",{}),"• Gmail等邮箱建议使用应用专用密码而非账户密码",(0,H.jsx)("br",{}),"• 建议启用SSL/TLS加密以提高安全性"]})]})]})})})}},69851:function(e,n,t){t.d(n,{f:function(){return E}});var l=t(90819),a=t.n(l),r=t(89933),s=t.n(r),o=t(45332),i=t.n(o),p=t(44194),u=t(24388),d=t(98830),c=t(19433),m=t(2077),h=t(39497),x=function(){var e=s()(a()().mark((function e(n,t){var l,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return c.yw.error("组织UID不能为空"),e.abrupt("return",null);case 3:return null!=t&&t.showLoading&&c.yw.loading(t.loadingMessage||"Loading"),e.prev=4,l={pageNumber:0,pageSize:(null==t?void 0:t.pageSize)||50,sortDirection:h.oys,orgUid:n},e.next=8,(0,m.LE)(l);case 8:if(r=e.sent,null!=t&&t.showLoading&&c.yw.destroy(),200!==r.code){e.next=15;break}return null!=t&&t.successMessage&&c.yw.success(t.successMessage),e.abrupt("return",r);case 15:return c.yw.error((null==t?void 0:t.errorMessage)||r.message),e.abrupt("return",null);case 17:e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(4),null!=t&&t.showLoading&&c.yw.destroy(),c.yw.error((null==t?void 0:t.errorMessage)||"获取工作组列表失败"),console.error("getWorkgroups error:",e.t0),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(n,t){return e.apply(this,arguments)}}(),b=function(){var e=s()(a()().mark((function e(n,t,l,r){var s,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=t&&null!==(s=t.data)&&void 0!==s&&s.content&&t.data.content.length>0)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,x(n,r);case 4:if(!(o=e.sent)){e.next=8;break}return l(o),e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(n,t,l,a){return e.apply(this,arguments)}}(),f=function(e){var n;return(null==e||null===(n=e.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length)>0?e.data.content[0].uid:""},E=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.autoLoad,l=void 0===t||t,r=n.showLoading,o=void 0===r||r,c=n.loadingMessage,m=void 0===c?"loading":c,h=(0,p.useState)(!1),x=i()(h,2),E=x[0],P=x[1],S=(0,d.u)((function(e){return e.currentOrg})),g=(0,u.$)((function(e){return{workgroupResult:e.workgroupResult,setWorkgroupResult:e.setWorkgroupResult}})),v=g.workgroupResult,j=g.setWorkgroupResult,y=function(){var e=s()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S&&S.uid){e.next=2;break}return e.abrupt("return",!1);case 2:return P(!0),e.next=5,b(S.uid,v,j,{showLoading:o,loadingMessage:m});case 5:return n=e.sent,P(!1),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){return f(v)},w=function(){var e;return(null==v||null===(e=v.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(e){return{label:e.nickname,value:e.uid}})))||[]};return(0,p.useEffect)((function(){l&&null!=S&&S.uid&&y()}),[l,null==S?void 0:S.uid]),{workgroupResult:v,workgroups:(null==v||null===(e=v.data)||void 0===e?void 0:e.content)||[],loading:E,loadWorkgroups:y,getDefaultUid:k,getWorkgroupOptions:w}}},10938:function(e,n,t){t.d(n,{n:function(){return d}});var l=t(73193),a=t.n(l),r=t(76711),s=t.n(r),o=t(39497),i=t(58063),p=t(66266),u=t(31403),d=(0,i.Ue)()((0,p.mW)((0,p.tJ)((0,u.n)((function(e,n){return{emailResult:{data:{content:[]}},currentEmail:{uid:"",nickname:"",avatar:"",description:""},insertEmail:function(n){e((function(e){e.emailResult.data.content.unshift(n)}))},updateEmail:function(n){e((function(e){var t=e.emailResult.data.content,l=t.findIndex((function(e){return e.uid===n.uid}));-1!==l?t[l]=n:console.warn("Email with uid ".concat(n.uid," not found."))}))},deleteEmail:function(n){e((function(e){var t=e.emailResult.data.content,l=t.findIndex((function(e){return e.uid===n.uid}));-1!==l?t.splice(l,1):console.warn("Email with uid ".concat(n.uid," not found."))}))},setEmailResult:function(t){var l;(e({emailResult:t}),""===n().currentEmail.uid)&&((null===(l=t.data)||void 0===l||null===(l=l.content)||void 0===l?void 0:l.length)>0&&e({currentEmail:t.data.content[0]}))},setCurrentEmail:function(t){var l=n().emailResult.data.content,r=l.findIndex((function(e){return e.uid===t.uid}));if(-1!==r){var o=[].concat(s()(l.slice(0,r)),[t],s()(l.slice(r+1))),i=a()(a()({},n().emailResult),{},{data:{content:o}});e({emailResult:i,currentEmail:t})}else console.warn("Email with the specified uid not found."),e({currentEmail:t})},refreshCurrentEmail:function(n){e((function(e){e.currentEmail=a()(a()({},e.currentEmail),n);var t=e.emailResult.data.content,l=t.findIndex((function(e){return e.uid===n.uid}));-1!==l&&(t[l]=a()(a()({},t[l]),n))}))},deleteCurrentEmail:function(t){var l=n().emailResult.data.content,r=l.findIndex((function(e){return e.uid===t}));-1!==r?e({emailResult:a()(a()({},n().emailResult),{},{data:{content:[].concat(s()(l.slice(0,r)),s()(l.slice(r+1)))}})}):console.warn("Email not found in cache:",t),n().currentEmail.uid===t&&e({currentEmail:{uid:""}})},deleteEmailCache:function(){return e({},!0)}}})),{name:o.e73})))}}]);