"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3959],{77098:function(e,t,r){r.d(t,{JP:function(){return k},Nf:function(){return m},PA:function(){return x},Z_:function(){return l},cG:function(){return f},k2:function(){return M},kO:function(){return y},sc:function(){return Z}});var n=r(90819),s=r.n(n),a=r(73193),i=r.n(a),o=r(89933),u=r.n(o),c=r(39497),p=r(14906);function l(){return d.apply(this,arguments)}function d(){return(d=u()(s()().mark((function e(){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/email",{method:"GET",params:{channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/email",{method:"POST",data:i()(i()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/email/test",{method:"POST",params:{testEmail:t,channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return v.apply(this,arguments)}function v(){return(v=u()(s()().mark((function e(){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/sms",{method:"GET",params:{channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return w.apply(this,arguments)}function w(){return(w=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/sms",{method:"POST",data:i()(i()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/sms/test",{method:"POST",params:{testMobile:t,channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return j.apply(this,arguments)}function j(){return(j=u()(s()().mark((function e(){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/ticket-center",{method:"GET",params:{channel:c.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return S.apply(this,arguments)}function S(){return(S=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/settings/platform/ticket-center",{method:"POST",data:i()(i()({},t),{},{channel:c.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2077:function(e,t,r){r.d(t,{LE:function(){return p},W5:function(){return h},p0:function(){return d},zl:function(){return g}});var n=r(90819),s=r.n(n),a=r(73193),i=r.n(a),o=r(89933),u=r.n(o),c=r(14906);function p(e){return l.apply(this,arguments)}function l(){return(l=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/query/org",{method:"GET",params:i()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/create",{method:"POST",data:i()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/update",{method:"POST",data:i()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return(k=u()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/delete",{method:"POST",data:i()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},75112:function(e,t,r){var n=r(14597);t.Z=function(){var e=(0,n.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},33591:function(e,t,r){r.r(t);var n=r(90819),s=r.n(n),a=r(89933),i=r.n(a),o=r(45332),u=r.n(o),c=r(44194),p=r(13847),l=r(41196),d=r(59533),f=r(65207),h=r(40110),m=r(39487),g=r(82770),k=r(70635),v=r(66431),x=r(62640),w=r(81739),y=r(80556),b=r(55785),Z=r(77098),j=r(2077),M=r(75112),S=r(23753),C=r(14906),P=r(31549),q=p.Z.Option,E="df_org_uid";t.default=function(){var e=l.Z.useForm(),t=u()(e,1)[0],r=(0,c.useState)(!1),n=u()(r,2),a=n[0],o=n[1],T=(0,c.useState)(!1),O=u()(T,2),J=O[0],F=O[1],L=(0,c.useState)([]),U=u()(L,2),X=U[0],A=U[1],G=(0,c.useState)(!1),I=u()(G,2),z=I[0],B=I[1],N=(0,M.Z)().contentStyle,V=(0,C.useIntl)(),W=function(){var e=i()(s()().mark((function e(){var r,n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,(0,Z.sc)();case 4:r=e.sent,S.Z.debug("工单中心配置:",r.data),200===(null==r?void 0:r.code)&&r.data&&t.setFieldsValue({workgroupUid:r.data.workgroupUid,ticketCenterEnabled:null===(n=r.data.ticketCenterEnabled)||void 0===n||n,description:r.data.description}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("加载工单中心配置失败:",e.t0),d.ZP.error(V.formatMessage({id:"super.ticket.message.loadSettingsFailed"}));case 13:return e.prev=13,o(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=i()(s()().mark((function e(){var t,r,n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),e.prev=1,r={orgUid:E,pageNumber:0,pageSize:100,superUser:!0},e.next=5,(0,j.LE)(r);case 5:n=e.sent,S.Z.debug("工作组列表:",n.data,r),200===(null==n?void 0:n.code)&&null!==(t=n.data)&&void 0!==t&&t.content&&A(n.data.content),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("加载工作组列表失败:",e.t0),d.ZP.error(V.formatMessage({id:"super.ticket.message.loadWorkgroupsFailed"}));case 14:return e.prev=14,B(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){W(),_()}),[]);var D=function(){var e=i()(s()().mark((function e(){var r,n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateFields();case 3:return r=e.sent,F(!0),e.next=7,(0,Z.k2)({workgroupUid:r.workgroupUid,ticketCenterEnabled:r.ticketCenterEnabled,description:r.description});case 7:200===(null==(n=e.sent)?void 0:n.code)?(d.ZP.success(V.formatMessage({id:"super.ticket.message.saveSuccess"})),W()):d.ZP.error((null==n?void 0:n.message)||V.formatMessage({id:"super.ticket.message.saveFailed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("保存工单中心配置失败:",e.t0),d.ZP.error(V.formatMessage({id:"super.ticket.message.saveFailed"}));case 15:return e.prev=15,F(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return(0,P.jsx)("div",{style:N,children:(0,P.jsx)(f.Z,{spinning:a,children:(0,P.jsxs)(h.Z,{title:V.formatMessage({id:"super.ticket.title"}),extra:(0,P.jsxs)(m.Z,{children:[(0,P.jsx)(g.ZP,{icon:(0,P.jsx)(y.Z,{}),onClick:function(){W(),_()},children:V.formatMessage({id:"super.common.refresh"})}),(0,P.jsx)(g.ZP,{type:"primary",icon:(0,P.jsx)(b.Z,{}),loading:J,onClick:D,children:V.formatMessage({id:"super.common.save"})})]}),children:[(0,P.jsx)(k.Z,{message:V.formatMessage({id:"super.common.alert.title"}),description:(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{children:V.formatMessage({id:"super.ticket.alert.desc"})}),(0,P.jsxs)("ul",{style:{marginBottom:0},children:[(0,P.jsx)("li",{children:V.formatMessage({id:"super.ticket.alert.item.assign"})}),(0,P.jsx)("li",{children:V.formatMessage({id:"super.ticket.alert.item.workgroupSource"},{orgUid:E})}),(0,P.jsx)("li",{children:V.formatMessage({id:"super.ticket.alert.item.otherSettings"})})]})]}),type:"info",showIcon:!0,style:{marginBottom:24}}),(0,P.jsxs)(l.Z,{form:t,layout:"vertical",initialValues:{ticketCenterEnabled:!0},children:[(0,P.jsx)(l.Z.Item,{name:"ticketCenterEnabled",label:V.formatMessage({id:"super.common.enableConfig"}),valuePropName:"checked",children:(0,P.jsx)(v.Z,{checkedChildren:V.formatMessage({id:"super.common.enabled"}),unCheckedChildren:V.formatMessage({id:"super.common.disabled"})})}),(0,P.jsx)(x.Z,{orientation:"left",children:V.formatMessage({id:"super.ticket.divider.workgroup"})}),(0,P.jsx)(l.Z.Item,{name:"workgroupUid",label:V.formatMessage({id:"super.ticket.form.workgroup.label"}),rules:[{required:!0,message:V.formatMessage({id:"super.ticket.form.workgroup.required"})}],tooltip:V.formatMessage({id:"super.ticket.form.workgroup.tooltip"}),extra:(0,P.jsxs)(m.Z,{style:{marginTop:8},children:[(0,P.jsx)("span",{children:V.formatMessage({id:"super.ticket.workgroup.count"},{count:X.length})}),(0,P.jsx)(g.ZP,{type:"link",size:"small",onClick:_,loading:z,children:V.formatMessage({id:"super.common.refreshList"})})]}),children:(0,P.jsx)(p.Z,{placeholder:V.formatMessage({id:"super.ticket.form.workgroup.placeholder"}),loading:z,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){var r;return null==t||null===(r=t.children)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase())},children:X.map((function(e){return(0,P.jsx)(q,{value:e.uid,children:(0,P.jsxs)(m.Z,{children:[(0,P.jsx)("span",{children:e.nickname||e.uid}),"AVAILABLE"===e.status&&(0,P.jsx)(w.Z,{color:"green",children:V.formatMessage({id:"super.ticket.workgroup.online"})}),void 0!==e.connectedAgentCount&&(0,P.jsx)(w.Z,{color:"blue",children:V.formatMessage({id:"super.ticket.workgroup.agentCount"},{count:e.connectedAgentCount})})]})},e.uid)}))})})]})]})})})}}}]);