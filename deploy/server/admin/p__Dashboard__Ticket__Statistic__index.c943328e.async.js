"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4480],{24170:function(t,e,n){n.d(e,{AT:function(){return p},Lr:function(){return j},_t:function(){return d},i8:function(){return k},n1:function(){return x},sE:function(){return h},x_:function(){return g}});var r=n(90819),a=n.n(r),i=n(73193),c=n.n(i),o=n(89933),s=n.n(o),u=n(55735),l=n(41159);function d(t){return f.apply(this,arguments)}function f(){return(f=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/query/org",{method:"GET",params:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return(m=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/query/uid",{method:"GET",params:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return v.apply(this,arguments)}function v(){return(v=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/create",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return y.apply(this,arguments)}function y(){return(y=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/update",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return w.apply(this,arguments)}function w(){return(w=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/update/avatar",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return b.apply(this,arguments)}function b(){return(b=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/update/autoreply",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return S.apply(this,arguments)}function S(){return(S=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/agent/delete",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},11603:function(t,e,n){n.d(e,{If:function(){return h},dF:function(){return d},j4:function(){return g},v$:function(){return p}});var r=n(90819),a=n.n(r),i=n(73193),c=n.n(i),o=n(89933),s=n.n(o),u=n(55735),l=n(41159);function d(t){return f.apply(this,arguments)}function f(){return(f=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/department/query/org",{method:"GET",params:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return m.apply(this,arguments)}function m(){return(m=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/department/create",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return v.apply(this,arguments)}function v(){return(v=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/department/update",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return y.apply(this,arguments)}function y(){return(y=s()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/v1/department/delete",{method:"POST",data:c()(c()({},e),{},{client:u.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},76750:function(t,e,n){var r=n(55735),a=n(65461),i=n(41159);e.Z=function(){var t=(0,i.useIntl)();return{translateString:function(e){return null==e?e:e&&(null!=e&&e.startsWith(r.VoP)||null!=e&&e.startsWith("ROLE_"))?t.formatMessage({id:e,defaultMessage:e}):e},translateStringTranct:function(e){return null==e?e:null!=e&&e.startsWith(r.VoP)||null!=e&&e.startsWith("ROLE_")?(0,a.aS)(t.formatMessage({id:e,defaultMessage:e}),10):(0,a.aS)(e,10)}}}},87075:function(t,e,n){n.r(e),n.d(e,{default:function(){return tt}});var r=n(90819),a=n.n(r),i=n(89933),c=n.n(i),o=n(45332),s=n.n(o),u=n(44194),l=n(98123),d=n(44781),f=n(62673),p=n(3849),m=n(67402),g=n(88996),v=n(75365),h=n(88201),y=n(5602),x=n(59485),w=n(7875),k=n(11757),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},j=n(54183),S=function(t,e){return u.createElement(j.Z,(0,k.Z)({},t,{ref:e,icon:b}))};var M=u.forwardRef(S),O=n(97413),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"},E=function(t,e){return u.createElement(j.Z,(0,k.Z)({},t,{ref:e,icon:R}))};var Z=u.forwardRef(E),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},A=function(t,e){return u.createElement(j.Z,(0,k.Z)({},t,{ref:e,icon:D}))};var T=u.forwardRef(A),C=n(61107),F=n(80556),z=n(41159),I=n(5939),$=n(73193),P=n.n($),q=n(55735);function V(t){return N.apply(this,arguments)}function N(){return(N=c()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,z.request)("/api/v1/ticket/statistic/query/date",{method:"GET",params:P()(P()({},e),{},{client:q.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y=n(86803),B=n(40612),U=n(1902),H=n(24170),W=n(76750),L=n(28977),_=n.n(L),G=n(11603),X=n(53782),J=n(31549),K=l.default.RangePicker,Q=d.Z.Option,tt=function(){var t,e,n=(0,z.useIntl)(),r=(0,W.Z)().translateStringTranct,i=(0,u.useState)(_()().startOf("day")),o=s()(i,2),l=o[0],k=o[1],b=(0,u.useState)(_()().endOf("day")),j=s()(b,2),S=j[0],R=j[1],E=(0,u.useState)("today"),D=s()(E,2),A=D[0],$=D[1],P=(0,u.useState)(q.AOk),N=s()(P,2),L=N[0],tt=N[1],et=(0,u.useState)(),nt=s()(et,2),rt=nt[0],at=nt[1],it=(0,u.useState)(),ct=s()(it,2),ot=ct[0],st=ct[1],ut=(0,B.u)((function(t){return t.currentOrg})),lt=(0,U.E)((function(t){return t})),dt=lt.agentResult,ft=lt.setAgentResult,pt=(0,X.H)((function(t){return t})),mt=pt.departmentResult,gt=pt.setDepartmentResult,vt=(0,u.useState)(),ht=s()(vt,2),yt=ht[0],xt=ht[1],wt=(0,u.useState)(q.OwA),kt=s()(wt,2),bt=kt[0],jt=kt[1],St=(0,u.useState)(!1),Mt=s()(St,2),Ot=Mt[0],Rt=Mt[1],Et=[{label:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}];(0,u.useEffect)((function(){if("custom"===A)k(l),R(S),jt(q.dd4);else{var t=_()();"today"===A?(k(t),R(t),jt(q.OwA)):"yesterday"===A?(k(t.subtract(1,"day")),R(t.subtract(1,"day")),jt(q.OwA)):"week"===A?(k(t.startOf("week")),R(t.endOf("week")),jt(q.dd4)):"lastWeek"===A?(k(t.subtract(1,"week").startOf("week")),R(t.subtract(1,"week").endOf("week")),jt(q.dd4)):"month"===A&&(k(t.startOf("month")),R(t.endOf("month")),jt(q.dd4))}}),[A]);var Zt=function(){var t=c()(a()().mark((function t(){var e,n;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y.yw.loading("loading"),e={pageNumber:0,pageSize:100,orgUid:null==ut?void 0:ut.uid},t.next=4,(0,G.dF)(e);case 4:n=t.sent,console.log("queryDepartmentsByOrg:",n,e),200===n.code?(Y.yw.destroy(),gt(n),n.data.content.length>0&&st(n.data.content[0].uid)):(Y.yw.destroy(),Y.yw.error(n.message));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Dt=function(){var t=c()(a()().mark((function t(){var e,n;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y.yw.loading("loading"),e={pageNumber:0,pageSize:50,orgUid:null==ut?void 0:ut.uid},t.next=4,(0,H._t)(e);case 4:n=t.sent,console.log("fetchAllAgents: ",n),200===n.code?(Y.yw.destroy(),ft(n),n.data.content.length>0&&at(n.data.content[0].uid)):(Y.yw.destroy(),Y.yw.error(r(n.message))),console.log("queryAllAgents response",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),At=function(){var t=c()(a()().mark((function t(){var e,r;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Rt(!0),t.prev=1,Y.yw.loading("loading"),e={type:L,statisticStartTime:null==l?void 0:l.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==S?void 0:S.format("YYYY-MM-DD 23:59:59"),departmentUid:ot,assigneeUid:rt,orgUid:null==ut?void 0:ut.uid},t.next=6,V(e);case 6:r=t.sent,console.log("queryStatisticTicketByDate response",r,e),200===r.code?(Y.yw.destroy(),xt(r.data)):(Y.yw.destroy(),Y.yw.error(r.message)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),Y.yw.error(n.formatMessage({id:"ticket.message.operation.failed"}));case 14:return t.prev=14,Rt(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(){return t.apply(this,arguments)}}(),Tt=function(){var t=c()(a()().mark((function t(){var e,n;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y.yw.loading("loading"),e={type:L,statisticStartTime:null==l?void 0:l.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==S?void 0:S.format("YYYY-MM-DD 23:59:59"),departmentUid:ot,assigneeUid:rt,orgUid:null==ut?void 0:ut.uid},t.next=4,V(e);case 4:n=t.sent,console.log("queryStatisticTicketByDate response",n,e),200===n.code?Y.yw.destroy():(Y.yw.destroy(),Y.yw.error(n.message));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){Zt(),Dt()}),[]),(0,u.useEffect)((function(){At()}),[L,rt,ot]),(0,u.useEffect)((function(){Tt()}),[bt,L,rt,ot]),(0,u.useEffect)((function(){At()}),[l,S]);var Ct=[{title:n.formatMessage({id:"ticket.statistic.total"}),value:(null==yt?void 0:yt.totalTickets)||0,icon:(0,J.jsx)(M,{}),color:"#1890ff"},{title:n.formatMessage({id:"ticket.statistic.resolved"}),value:(null==yt?void 0:yt.resolvedTickets)||0,icon:(0,J.jsx)(O.Z,{}),color:"#52c41a"},{title:n.formatMessage({id:"ticket.statistic.resolution.rate"}),value:"".concat((null==yt?void 0:yt.resolvedTickets)/(null==yt?void 0:yt.totalTickets)||0,"%"),icon:(0,J.jsx)(Z,{}),color:"#722ed1"},{title:n.formatMessage({id:"ticket.statistic.satisfaction"}),value:"".concat((null==yt?void 0:yt.customerSatisfactionRate)||0,"%"),icon:(0,J.jsx)(T,{}),color:"#fa8c16"}];return(0,J.jsxs)("div",{style:{padding:16},children:[(0,J.jsx)(f.Z,{style:{marginBottom:16},children:(0,J.jsxs)(p.Z,{direction:"vertical",style:{width:"100%"},children:[(0,J.jsxs)(p.Z,{wrap:!0,children:[(0,J.jsx)(m.ZP.Group,{value:A,onChange:function(t){return $(t.target.value)},children:Et.map((function(t){return(0,J.jsx)(m.ZP.Button,{value:t.value,children:t.label},t.value)}))}),"custom"===A&&(0,J.jsx)(K,{value:[l,S],onChange:function(t){k(t[0]),R(t[1])}})]}),(0,J.jsxs)(p.Z,{wrap:!0,children:[(0,J.jsxs)(d.Z,{placeholder:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.type"}),style:{width:200},value:L,onChange:function(t){return tt(t)},children:[(0,J.jsx)(Q,{value:q.AOk,children:(0,J.jsx)(z.FormattedMessage,{id:"i18n.all"})}),(0,J.jsx)(Q,{value:q.pHh,children:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.agent"})}),(0,J.jsx)(Q,{value:q.j0X,children:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.department"})})]}),L===q.pHh&&(0,J.jsx)(d.Z,{placeholder:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.agent"}),style:{width:200},value:rt,onChange:function(t){return at(t)},children:null===(t=dt.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(t){return(0,J.jsx)(Q,{value:null==t?void 0:t.uid,children:r(null==t?void 0:t.nickname)},null==t?void 0:t.uid)}))}),L===q.j0X&&(0,J.jsx)(d.Z,{placeholder:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.department"}),style:{width:200},value:ot,onChange:function(t){return st(t)},children:null===(e=mt.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(t){return(0,J.jsx)(Q,{value:null==t?void 0:t.uid,children:r(null==t?void 0:t.name)},null==t?void 0:t.uid)}))}),(0,J.jsx)(g.Z,{title:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.export"}),children:(0,J.jsx)(v.ZP,{icon:(0,J.jsx)(C.Z,{}),onClick:function(){Y.yw.warning("TODO: 待实现")},children:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.export"})})}),(0,J.jsx)(g.Z,{title:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.refresh"}),children:(0,J.jsx)(v.ZP,{icon:(0,J.jsx)(F.Z,{}),onClick:function(){return At()},children:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.filter.refresh"})})}),!1]})]})}),(0,J.jsx)(h.Z,{gutter:16,style:{marginBottom:24},children:Ct.map((function(t){return(0,J.jsx)(y.Z,{span:6,children:(0,J.jsx)(f.Z,{loading:Ot,children:(0,J.jsx)(x.Z,{title:t.title,value:t.value,prefix:u.cloneElement(t.icon,{style:{color:t.color}}),valueStyle:{color:t.color}})})},t.title)}))}),(0,J.jsx)(f.Z,{title:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.trend"}),style:{marginBottom:24,height:300},loading:Ot,children:(0,J.jsx)(I.Z,{data:[],xField:"date",yField:"value",seriesField:"type",legend:{position:"top"},meta:{type:{formatter:function(t){return n.formatMessage({id:"ticket.statistic.type.".concat(t)})}}}})}),(0,J.jsx)(f.Z,{title:(0,J.jsx)(z.FormattedMessage,{id:"ticket.statistic.agent.performance"}),loading:Ot,children:(0,J.jsx)(w.Z,{columns:[{title:n.formatMessage({id:"ticket.statistic.agent.name"}),dataIndex:"assigneeName",key:"assigneeName"},{title:n.formatMessage({id:"ticket.statistic.agent.tickets"}),dataIndex:"assigneeTickets",key:"assigneeTickets",sorter:!0},{title:n.formatMessage({id:"ticket.statistic.agent.resolution"}),dataIndex:"assigneeResolutionRate",key:"assigneeResolutionRate",render:function(t){return"".concat(t,"%")},sorter:!0},{title:n.formatMessage({id:"ticket.statistic.agent.satisfaction"}),dataIndex:"customerSatisfactionRate",key:"customerSatisfactionRate",render:function(t){return"".concat(t,"%")},sorter:!0}],rowKey:"assigneeUid",pagination:!1})})]})}},1902:function(t,e,n){n.d(e,{E:function(){return d}});var r=n(73193),a=n.n(r),i=n(76711),c=n.n(i),o=n(55735),s=n(44435),u=n(83642),l=n(83890),d=(0,s.Ue)()((0,u.mW)((0,u.tJ)((0,l.n)((function(t,e){return{agentResult:{data:{content:[]}},currentAgent:{uid:"",orgUid:""},insertAgent:function(e){t((function(t){t.agentResult.data.content.unshift(e)}))},updateAgent:function(e){t((function(t){var n=t.agentResult.data.content,r=n.findIndex((function(t){return t.uid===e.uid}));-1!==r?n[r]=e:console.warn("Agent with uid ".concat(e.uid," not found."))}))},setAgentResult:function(n){var r;(t({agentResult:n}),""===e().currentAgent.uid)&&((null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&t({currentAgent:n.data.content[0]}))},setCurrentAgent:function(n){var r=e().agentResult.data.content,i=r.findIndex((function(t){return t.uid===n.uid}));if(-1!==i){var o=[].concat(c()(r.slice(0,i)),[n],c()(r.slice(i+1))),s=a()(a()({},e().agentResult),{},{data:{content:o}});t({agentResult:s,currentAgent:n})}else console.warn("Agent with the specified uid not found."),t({currentAgent:n})},deleteCurrentAgent:function(n){var r=e().agentResult.data.content,i=r.findIndex((function(t){return t.uid===n}));-1!==i?t({agentResult:a()(a()({},e().agentResult),{},{data:{content:[].concat(c()(r.slice(0,i)),c()(r.slice(i+1)))}})}):console.warn("Agent not found in cache:",n),e().currentAgent.uid===n&&t({currentAgent:{uid:"",orgUid:""}})},deleteAgentCache:function(){return t({},!0)}}})),{name:o.zzK})))},53782:function(t,e,n){n.d(e,{H:function(){return p}});var r=n(86222),a=n.n(r),i=n(76711),c=n.n(i),o=n(73193),s=n.n(o),u=n(55735),l=n(44435),d=n(83642),f=n(83890),p=(0,l.Ue)()((0,d.mW)((0,d.tJ)((0,f.n)((function(t,e){return{departmentResult:{data:{content:[]}},currentDepartment:{uid:u.zBg,nickname:u.zBg},insertDepartment:function(e){t((function(t){var n=t.departmentResult.data.content;if(e.parentUid){var r=n.find((function(t){return t.uid===e.parentUid}));r&&(r.children||(r.children=[]),r.children.push(e))}else n.push(e)}))},upgradeDepartment:function(e){t((function(t){var n=t.departmentResult.data.content,r=n.findIndex((function(t){return t.uid===e.uid}));-1!==r?n[r]=e:n.forEach((function(t){if(t.children){var n=t.children.findIndex((function(t){return t.uid===e.uid}));-1!==n&&(t.children[n]=e)}}))}))},setDepartmentResult:function(n){var r,a={uid:u.zBg,name:u.zBg};(t({departmentResult:s()(s()({},n),{},{data:{content:[a].concat(c()(n.data.content))}})}),""===e().currentDepartment.uid)&&((null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&t({currentDepartment:n.data.content[0]}))},setCurrentDepartment:function(n){var r=e().departmentResult.data.content,a=r.findIndex((function(t){return t.uid===n.uid}));if(-1!==a){var i=[].concat(c()(r.slice(0,a)),[n],c()(r.slice(a+1))),o=s()(s()({},e().departmentResult),{},{data:{content:i}});t({departmentResult:o,currentDepartment:n})}else console.warn("Department with the specified uid not found."),t({currentDepartment:n})},removeDepartment:function(n){t((function(t){var e=t.departmentResult.data.content;t.departmentResult.data.content=function t(e,n){return e.filter((function(e){return e.uid!==n&&(e.children&&(e.children=t(e.children,n)),!0)}))}(e,n)})),e().currentDepartment.uid===n&&t({currentDepartment:{uid:""}})},setCurrentDepUid:function(n){var r,i,c=null===(r=e().departmentResult)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.find((function(t){return t.uid===n}));if(c)t({currentDepartment:c});else{!function e(r){var i,c=a()(r);try{for(c.s();!(i=c.n()).done;){var o=i.value;if(o.uid===n)return void t({currentDepartment:o});o.children&&o.children.length>0&&e(o.children)}}catch(t){c.e(t)}finally{c.f()}}((null===(i=e().departmentResult)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.content)||[])}},deleteDepartmentCache:function(){return t({},!0)}}})),{name:u.xY_})))},59485:function(t,e,n){n.d(e,{Z:function(){return S}});var r=n(44194),a=n(14365),i=n(79145),c=n(51865),o=n.n(c),s=n(67762),u=n(37167),l=n(10987);var d=t=>{const{value:e,formatter:n,precision:a,decimalSeparator:i,groupSeparator:c="",prefixCls:o}=t;let s;if("function"==typeof n)s=n(e);else{const t=String(e),n=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(n&&"-"!==t){const t=n[1];let e=n[2]||"0",u=n[4]||"";e=e.replace(/\B(?=(\d{3})+(?!\d))/g,c),"number"==typeof a&&(u=u.padEnd(a,"0").slice(0,a>0?a:0)),u&&(u=`${i}${u}`),s=[r.createElement("span",{key:"int",className:`${o}-content-value-int`},t,e),u&&r.createElement("span",{key:"decimal",className:`${o}-content-value-decimal`},u)]}else s=t}return r.createElement("span",{className:`${o}-content-value`},s)},f=n(88874),p=n(65759),m=n(77167);const g=t=>{const{componentCls:e,marginXXS:n,padding:r,colorTextDescription:a,titleFontSize:i,colorTextHeading:c,contentFontSize:o,fontFamily:s}=t;return{[e]:Object.assign(Object.assign({},(0,f.Wf)(t)),{[`${e}-title`]:{marginBottom:n,color:a,fontSize:i},[`${e}-skeleton`]:{paddingTop:r},[`${e}-content`]:{color:c,fontSize:o,fontFamily:s,[`${e}-content-value`]:{display:"inline-block",direction:"ltr"},[`${e}-content-prefix, ${e}-content-suffix`]:{display:"inline-block"},[`${e}-content-prefix`]:{marginInlineEnd:n},[`${e}-content-suffix`]:{marginInlineStart:n}}})}};var v=(0,p.I$)("Statistic",(t=>{const e=(0,m.IX)(t,{});return[g(e)]}),(t=>{const{fontSizeHeading3:e,fontSize:n}=t;return{titleFontSize:n,contentFontSize:e}})),h=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n};var y=t=>{const{prefixCls:e,className:n,rootClassName:a,style:i,valueStyle:c,value:f=0,title:p,valueRender:m,prefix:g,suffix:y,loading:x=!1,formatter:w,precision:k,decimalSeparator:b=".",groupSeparator:j=",",onMouseEnter:S,onMouseLeave:M}=t,O=h(t,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:R,direction:E,statistic:Z}=r.useContext(u.E_),D=R("statistic",e),[A,T,C]=v(D),F=r.createElement(d,{decimalSeparator:b,groupSeparator:j,prefixCls:D,formatter:w,precision:k,value:f}),z=o()(D,{[`${D}-rtl`]:"rtl"===E},null==Z?void 0:Z.className,n,a,T,C),I=(0,s.Z)(O,{aria:!0,data:!0});return A(r.createElement("div",Object.assign({},I,{className:z,style:Object.assign(Object.assign({},null==Z?void 0:Z.style),i),onMouseEnter:S,onMouseLeave:M}),p&&r.createElement("div",{className:`${D}-title`},p),r.createElement(l.Z,{paragraph:!1,loading:x,className:`${D}-skeleton`},r.createElement("div",{style:c,className:`${D}-content`},g&&r.createElement("span",{className:`${D}-content-prefix`},g),m?m(F):F,y&&r.createElement("span",{className:`${D}-content-suffix`},y)))))};const x=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function w(t,e){const{format:n=""}=e,r=new Date(t).getTime(),a=Date.now();return function(t,e){let n=t;const r=/\[[^\]]*]/g,a=(e.match(r)||[]).map((t=>t.slice(1,-1))),i=e.replace(r,"[]"),c=x.reduce(((t,e)=>{let[r,a]=e;if(t.includes(r)){const e=Math.floor(n/a);return n-=e*a,t.replace(new RegExp(`${r}+`,"g"),(t=>{const n=t.length;return e.toString().padStart(n,"0")}))}return t}),i);let o=0;return c.replace(r,(()=>{const t=a[o];return o+=1,t}))}(Math.max(r-a,0),n)}var k=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n};const b=t=>{const{value:e,format:n="HH:mm:ss",onChange:c,onFinish:o}=t,s=k(t,["value","format","onChange","onFinish"]),u=(0,a.Z)(),l=r.useRef(null),d=()=>{const t=function(t){return new Date(t).getTime()}(e);t>=Date.now()&&(l.current=setInterval((()=>{u(),null==c||c(t-Date.now()),t<Date.now()&&(null==o||o(),l.current&&(clearInterval(l.current),l.current=null))}),33.333333333333336))};r.useEffect((()=>(d(),()=>{l.current&&(clearInterval(l.current),l.current=null)})),[e]);return r.createElement(y,Object.assign({},s,{value:e,valueRender:t=>(0,i.Tm)(t,{title:void 0}),formatter:(t,e)=>w(t,Object.assign(Object.assign({},e),{format:n}))}))};var j=r.memo(b);y.Countdown=j;var S=y},23065:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(39482);function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,c=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}}}]);