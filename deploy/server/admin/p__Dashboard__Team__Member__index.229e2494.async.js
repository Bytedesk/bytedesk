"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7960,649],{83381:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(83910),a=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=n(5901),i=function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=a.forwardRef(i)},28031:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(83910),a=n(44194),s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},o=n(5901),i=function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=a.forwardRef(i)},17194:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(83910),a=n(44194),s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},o=n(5901),i=function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=a.forwardRef(i)},80503:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(83910),a=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},o=n(5901),i=function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=a.forwardRef(i)},90092:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(83910),a=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=n(5901),i=function(e,t){return a.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=a.forwardRef(i)},50447:function(e,t,n){var r=n(94433),a=n(38956),s=n(75477),o=n(44194),i=n(18758),l=n(46659),u=n(31549),d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var n=e.fieldProps,c=e.children,f=e.params,p=e.proFieldProps,m=e.mode,g=e.valueEnum,h=e.request,v=e.showSearch,x=e.options,b=(0,a.Z)(e,d),y=(0,o.useContext)(i.Z);return(0,u.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(g),request:h,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:x,mode:m,showSearch:v,getPopupContainer:y.getPopupContainer},n),ref:t,proFieldProps:p},b),{},{children:c}))},p=o.forwardRef((function(e,t){var n=e.fieldProps,d=e.children,f=e.params,p=e.proFieldProps,m=e.mode,g=e.valueEnum,h=e.request,v=e.options,x=(0,a.Z)(e,c),b=(0,r.Z)({options:v,mode:m||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),y=(0,o.useContext)(i.Z);return(0,u.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(g),request:h,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:y.getPopupContainer},b),ref:t,proFieldProps:p},x),{},{children:d}))})),m=o.forwardRef(f);m.SearchSelect=p,m.displayName="ProFormComponent",t.Z=m},47268:function(e,t,n){var r=n(32906),a=n(94433),s=n(38956),o=n(92032),i=n(70878),l=n(35068),u=n(21762),d=n(44194),c=n(46659),f=n(31549),p=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],g="text",h=function(e){var t=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),n=(0,r.Z)(t,2),s=n[0],u=n[1];return(0,f.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var n,r=t.getFieldValue(e.name||[]);return(0,f.jsx)(l.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return u(e)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[null===(n=e.statusRender)||void 0===n?void 0:n.call(e,r),e.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:s,children:e.children}))}})},v=function(e){var t=e.fieldProps,n=e.proFieldProps,r=(0,s.Z)(e,p);return(0,f.jsx)(c.Z,(0,a.Z)({valueType:g,fieldProps:t,filedConfig:{valueType:g},proFieldProps:n},r))};v.Password=function(e){var t=e.fieldProps,n=e.proFieldProps,o=(0,s.Z)(e,m),i=(0,d.useState)(!1),l=(0,r.Z)(i,2),p=l[0],v=l[1];return null!=t&&t.statusRender&&o.name?(0,f.jsx)(h,{name:o.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:p,onOpenChange:v,children:(0,f.jsx)("div",{children:(0,f.jsx)(c.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,u.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var n;null==t||null===(n=t.onBlur)||void 0===n||n.call(t,e),v(!1)},onClick:function(e){var n;null==t||null===(n=t.onClick)||void 0===n||n.call(t,e),v(!0)}}),proFieldProps:n,filedConfig:{valueType:g}},o))})}):(0,f.jsx)(c.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:n,filedConfig:{valueType:g}},o))},v.displayName="ProFormComponent",t.Z=v},26608:function(e,t,n){var r=n(94433),a=n(38956),s=n(44194),o=n(46659),i=n(31549),l=["fieldProps","proFieldProps"],u=function(e,t){var n=e.fieldProps,s=e.proFieldProps,u=(0,a.Z)(e,l);return(0,i.jsx)(o.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:s},u))};t.Z=s.forwardRef(u)},79481:function(e,t,n){var r=n(94433),a=n(38956),s=n(44194),o=n(46659),i=n(31549),l=["fieldProps","request","params","proFieldProps"],u=function(e,t){var n=e.fieldProps,s=e.request,u=e.params,d=e.proFieldProps,c=(0,a.Z)(e,l);return(0,i.jsx)(o.Z,(0,r.Z)({valueType:"treeSelect",fieldProps:n,ref:t,request:s,params:u,filedConfig:{customLightMode:!0},proFieldProps:d},c))},d=s.forwardRef(u);t.Z=d},11950:function(e,t,n){n.d(t,{E9:function(){return c},Rd:function(){return v},fA:function(){return p},ul:function(){return g}});var r=n(90819),a=n.n(r),s=n(73193),o=n.n(s),i=n(89933),l=n.n(i),u=n(68992),d=n(62395);function c(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/query/org",{method:"GET",params:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/create",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/update",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/delete",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55072:function(e,t,n){n.d(t,{If:function(){return v},dF:function(){return c},j4:function(){return g},v$:function(){return p}});var r=n(90819),a=n.n(r),s=n(73193),o=n.n(s),i=n(89933),l=n.n(i),u=n(68992),d=n(62395);function c(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/department/query/org",{method:"GET",params:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/department/create",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/department/update",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/department/delete",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6090:function(e,t,n){n.d(t,{D$:function(){return p},EP:function(){return v},hS:function(){return g},z_:function(){return c}});var r=n(90819),a=n.n(r),s=n(73193),o=n.n(s),i=n(89933),l=n.n(i),u=n(68992),d=n(62395);function c(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/member/query/org",{method:"GET",params:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/member/create",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/member/update",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/member/delete",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},85579:function(e,t,n){n.r(t),n.d(t,{default:function(){return xe}});var r=n(88130),a=n(44194),s=n(38552),o=n(73193),i=n.n(o),l=n(84176),u=n.n(l),d=n(76711),c=n.n(d),f=n(90819),p=n.n(f),m=n(89933),g=n.n(m),h=n(86222),v=n.n(h),x=n(45332),b=n.n(x),y=n(6090),M=n(74956),w=n(77686),j=n(6992),Z=n(91768),k=n(17194),P=n(28031),C=n(94011),S=n(80503),F=n(54596),D=n(66248),T=n(69650),E=n(33633),U=n(77902),z=n(72264),R=n(6237),I=n(68992),q=n(89007),O=n(79481),B=n(47268),N=n(50447),A=n(62395),$=n(41059),G=n(89654),V=n(67194),L=n(61489),H=n(11950),Q=n(99754),J=n(75686),X=n(31549),W=T.Z.Text,_=function(e){var t,n,r=e.isEdit,s=e.member,o=e.open,l=e.onClose,u=e.onSubmit,d=e.isSubmitting,f=void 0!==d&&d,m=q.A.useForm(),h=b()(m,1)[0],v=(0,A.useIntl)(),x=(0,Q.Z)().translateString,y=(0,M.H)((function(e){return e.departmentResult})),j=(0,w.u)((function(e){return e.currentOrg})),Z=(0,a.useState)([]),k=b()(Z,2),P=k[0],C=k[1],S=(0,a.useState)([]),F=b()(S,2),D=F[0],T=F[1],E=(0,a.useState)(0),U=b()(E,2),R=U[0],_=U[1],K=(0,a.useState)(!1),Y=b()(K,2),ee=Y[0],te=Y[1];(0,a.useEffect)((function(){r&&s&&h?h.setFieldsValue({uid:null==s?void 0:s.uid,nickname:null==s?void 0:s.nickname,email:null==s?void 0:s.email,mobile:null==s?void 0:s.mobile,jobNo:null==s?void 0:s.jobNo,jobTitle:x(null==s?void 0:s.jobTitle),seatNo:null==s?void 0:s.seatNo,telephone:null==s?void 0:s.telephone,deptUid:null==s?void 0:s.deptUid}):(console.log("form resetFields"),h.resetFields(),C([I.nGQ]),h.setFieldsValue({roleUids:[I.nGQ]}),_(0))}),[s,r]);var ne,re=function e(t,n){var r;if(null!=t&&null!==(r=t.name)&&void 0!==r&&r.startsWith(I.VoP)?n.title=v.formatMessage({id:t.name,defaultMessage:t.name}):n.title=t.name,n.value=t.uid,t.children)for(var a=0;a<t.children.length;a++){var s={title:"",value:"",children:[]};e(t.children[a],s),n.children.push(s)}},ae=(0,a.useMemo)((function(){for(var e=[],t=0;t<y.data.content.length;t++)if(y.data.content[t].name!==I.zBg){var n={title:"",value:"",children:[]};re(y.data.content[t],n),e.push(n)}return e}),[y]),se=function(){var e=g()(p()().mark((function e(){var t,n,r,a;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.yw.loading("正在获取角色列表..."),t={pageNumber:0,pageSize:100,orgUid:null==j?void 0:j.uid,orgAndPlatform:!0},e.next=4,(0,H.E9)(t);case 4:n=e.sent,console.log("queryRolesByOrg response ",n),200===n.code?(L.yw.destroy(),r=n.data.content.find((function(e){return e.uid===I.nGQ})),r||n.data.content.push({uid:I.nGQ,name:"member",description:"成员角色",system:!0}),a=n.data.content,T(a)):(L.yw.destroy(),L.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e,t=(null==s||null===(e=s.roleUids)||void 0===e?void 0:e.filter((function(e){return""!==e})))||[];C(t)}),[s]),(0,a.useEffect)((function(){o&&(se(),r||(C([I.nGQ]),h.setFieldsValue({roleUids:[I.nGQ]}),_(0)))}),[o,r]),(0,X.jsx)("div",{children:(0,X.jsx)($.Z,{title:r?(0,X.jsx)(A.FormattedMessage,{id:"team.member.drawer.edit.title"}):(0,X.jsx)(A.FormattedMessage,{id:"team.member.drawer.create.title"}),onClose:l,open:o,width:600,extra:(0,X.jsxs)(G.Z,{children:[(0,X.jsx)(z.ZP,{onClick:l,disabled:f,children:(0,X.jsx)(A.FormattedMessage,{id:"team.member.drawer.button.cancel"})}),(0,X.jsx)(z.ZP,{onClick:function(){console.log("handleSubmit"),h.validateFields().then((function(e){console.log("Form values:",e);var t=i()({uid:null==s?void 0:s.uid,nickname:e.nickname,email:e.email,mobile:e.mobile,jobNo:e.jobNo,jobTitle:e.jobTitle,seatNo:e.seatNo,telephone:e.telephone,deptUid:e.deptUid,orgUid:null==j?void 0:j.uid,roleUids:P},!r&&e.password&&{password:e.password});console.log("memberObject:",t),u(t)})).catch((function(e){console.log("Form errors:",e)}))},type:"primary",loading:f,disabled:f,children:(0,X.jsx)(A.FormattedMessage,{id:"team.member.drawer.button.save"})})]}),children:(0,X.jsxs)(q.A,{form:h,name:"memForm",submitter:!1,children:[(0,X.jsx)(O.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.department"}),name:"deptUid",width:"md",placeholder:v.formatMessage({id:"team.member.form.department.placeholder"}),allowClear:!0,rules:[{required:!0,message:v.formatMessage({id:"team.member.form.department.required"})}],fieldProps:{treeDefaultExpandAll:!0,styles:{popup:{root:{maxHeight:400,overflow:"auto"}}},treeData:ae,variant:"outlined"}}),(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.name",defaultMessage:"昵称"}),name:"nickname",rules:[{required:!0,message:v.formatMessage({id:"team.member.form.name.required"})}]}),(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.mobile"}),name:"mobile",disabled:r,rules:[{required:!0,message:v.formatMessage({id:"team.member.form.mobile.required"})},{pattern:/^1[3456789]\d{9}$/,message:v.formatMessage({id:"team.member.form.mobile.invalid"})}]}),(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.email"}),name:"email",disabled:r,rules:[{required:!0,message:v.formatMessage({id:"team.member.form.email.required"})},{type:"email",message:v.formatMessage({id:"team.member.form.email.invalid"})}]}),!r&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(B.Z.Password,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.password"}),name:"password",rules:[{required:!0,message:v.formatMessage({id:"team.member.form.password.required"})},{min:6,message:v.formatMessage({id:"team.member.form.password.min"})}],placeholder:v.formatMessage({id:"team.member.form.password.placeholder"}),fieldProps:{onChange:function(e){var t=e.target.value;if(t){var n=(0,J.Qc)(t);_(n)}else _(0)}}}),R>0&&(0,X.jsxs)("div",{style:{marginBottom:16},children:[(0,X.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,X.jsx)(W,{children:"密码强度:"}),(0,X.jsx)(W,{type:"secondary",children:(0,J.$g)(R)})]}),(0,X.jsx)(V.Z,{percent:R,strokeColor:(ne=R,ne>=80?"#52c41a":ne>=60?"#faad14":ne>=40?"#ff7a45":"#ff4d4f"),size:"small",showInfo:!1}),(0,X.jsx)("div",{style:{marginTop:4},children:(0,X.jsx)(W,{type:"secondary",style:{fontSize:"12px"},children:"建议：包含大小写字母、数字和特殊字符，长度至少8位"})})]})]}),(null==s||null===(t=s.user)||void 0===t?void 0:t.superUser)&&(0,X.jsx)("p",{children:"超级管理员拥有所有权限，禁止编辑角色"}),(0,X.jsx)(N.Z,{name:"roleUids",label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.role"}),width:"md",disabled:null==s||null===(n=s.user)||void 0===n?void 0:n.superUser,options:(D||[]).filter((function(e){return e.uid===I.nGQ||!e.system||P.includes(e.uid)})).map((function(e){return{value:e.uid,label:x(e.name),disabled:(!0===e.system||e.uid===I.nGQ)&&!P.includes(e.uid)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:v.formatMessage({id:"team.member.form.role.placeholder"}),value:P,onChange:function(e){console.log("selected ".concat(e));var t=D.filter((function(e){return!0===e.system})).map((function(e){return e.uid})),n=P.filter((function(n){return t.includes(n)&&!e.includes(n)}));if(n.length>0){var r=[].concat(c()(e),c()(n));L.yw.warning("系统角色不允许取消选择");var a=r.filter((function(e){return""!==e}));C(a)}else if(e.includes(I.nGQ)){var s=e.filter((function(e){return""!==e}));C(s)}else{var o=[].concat(c()(e),[I.nGQ]);L.yw.warning("成员角色不允许取消选择");var i=o.filter((function(e){return""!==e}));C(i)}},optionItemRender:function(e){var t=D.find((function(t){return t.uid===e.value}));return null!=t&&t.system?(0,X.jsxs)("span",{children:[e.label," ",P.includes(e.value)&&"(系统角色，不可取消)"]}):e.value===I.nGQ?(0,X.jsxs)("span",{children:[e.label," ",P.includes(e.value)&&"(成员角色，不可取消)"]}):e.label}}}),(0,X.jsx)("div",{style:{marginBottom:16},children:(0,X.jsx)(z.ZP,{type:"link",onClick:function(){return te(!ee)},style:{padding:0},children:ee?"隐藏高级设置":"高级设置"})}),ee&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.jobNo"}),name:"jobNo"}),(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.jobTitle"}),name:"jobTitle"}),(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.seatNo"}),name:"seatNo"}),(0,X.jsx)(B.Z,{label:(0,X.jsx)(A.FormattedMessage,{id:"team.member.form.telephone"}),name:"telephone"})]})]})})})},K=n(70878),Y=n(42365),ee=n(13243),te=n(84332),ne=function(e){var t,n,r,s=e.open,o=e.member,i=e.onClose,l=e.onSuccess,u=(0,A.useIntl)(),d=K.Z.useForm(),c=b()(d,1)[0],f=(0,a.useState)(!1),m=b()(f,2),h=m[0],v=m[1],x=(0,a.useState)(0),y=b()(x,2),M=y[0],w=y[1],j=(0,a.useState)(!1),Z=b()(j,2),k=Z[0],P=Z[1],C=function(){c.resetFields(),w(0),P(!1)},S=function(){C(),i()},F=function(){var e=g()(p()().mark((function e(t){var n,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=o&&null!==(n=o.user)&&void 0!==n&&n.uid){e.next=3;break}return Y.ZP.error(u.formatMessage({id:"change.password.error.noUid",defaultMessage:"用户ID不存在"})),e.abrupt("return");case 3:return M<40&&Y.ZP.warning(u.formatMessage({id:"change.password.warning.weakPassword",defaultMessage:"密码强度较弱，建议使用更强的密码"})),v(!0),e.prev=5,e.next=8,(0,te.TZ)({uid:o.user.uid,newPassword:t.newPassword});case 8:200===(r=e.sent).code?(Y.ZP.success(u.formatMessage({id:"change.password.success",defaultMessage:"密码修改成功"})),S(),null==l||l()):Y.ZP.error(r.message||u.formatMessage({id:"change.password.failed",defaultMessage:"密码修改失败"})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Y.ZP.error(u.formatMessage({id:"change.password.error",defaultMessage:"密码修改出错"}));case 15:return e.prev=15,v(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[5,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return e>=80?"#52c41a":e>=60?"#faad14":e>=40?"#fa8c16":"#ff4d4f"};return(0,a.useEffect)((function(){s||C()}),[s]),(0,X.jsx)(D.Z,{title:u.formatMessage({id:"change.password",defaultMessage:"修改密码"}),open:s,onCancel:S,footer:null,destroyOnHidden:!0,width:500,children:(0,X.jsxs)(K.Z,{form:c,onFinish:F,layout:"vertical",requiredMark:!1,children:[(0,X.jsx)(K.Z.Item,{label:u.formatMessage({id:"user.nickname",defaultMessage:"用户昵称"}),children:(0,X.jsx)(ee.Z,{value:(null==o?void 0:o.nickname)||"",disabled:!0,placeholder:u.formatMessage({id:"user.nickname.placeholder",defaultMessage:"用户昵称"})})}),(0,X.jsx)(K.Z.Item,{label:u.formatMessage({id:"user.username",defaultMessage:"用户名"}),children:(0,X.jsx)(ee.Z,{value:(null==o||null===(t=o.user)||void 0===t?void 0:t.username)||"",disabled:!0,placeholder:u.formatMessage({id:"user.username.placeholder",defaultMessage:"用户名"})})}),(0,X.jsx)(K.Z.Item,{name:"newPassword",label:u.formatMessage({id:"new.password",defaultMessage:"新密码"}),rules:[{required:!0,message:u.formatMessage({id:"new.password.required",defaultMessage:"请输入新密码"})},{min:6,message:u.formatMessage({id:"new.password.minLength",defaultMessage:"密码长度不能少于6位"})},{max:50,message:u.formatMessage({id:"new.password.maxLength",defaultMessage:"密码长度不能超过50位"})}],children:(0,X.jsx)(ee.Z.Password,{placeholder:u.formatMessage({id:"new.password.placeholder",defaultMessage:"请输入新密码"}),onChange:function(e){var t=e.target.value,n=(0,J.Qc)(t);w(n)},visibilityToggle:{visible:k,onVisibleChange:P}})}),M>0&&(0,X.jsxs)(K.Z.Item,{children:[(0,X.jsxs)("div",{style:{marginBottom:8},children:[(0,X.jsxs)("span",{style:{marginRight:8},children:[u.formatMessage({id:"password.strength",defaultMessage:"密码强度"}),":"]}),(0,X.jsx)("span",{style:{color:T(M),fontWeight:"bold"},children:(n=M,r=(0,J.$g)(n),u.formatMessage({id:"password.strength.".concat(r),defaultMessage:r}))})]}),(0,X.jsx)(V.Z,{percent:M,strokeColor:T(M),size:"small",showInfo:!1}),(0,X.jsx)("div",{style:{fontSize:"12px",color:"#666",marginTop:4},children:u.formatMessage({id:"password.strength.tip",defaultMessage:"建议使用包含大小写字母、数字和特殊字符的强密码"})})]}),(0,X.jsx)(K.Z.Item,{name:"confirmPassword",label:u.formatMessage({id:"confirm.password",defaultMessage:"确认密码"}),dependencies:["newPassword"],rules:[{required:!0,message:u.formatMessage({id:"confirm.password.required",defaultMessage:"请确认新密码"})},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("newPassword")!==n?Promise.reject(new Error(u.formatMessage({id:"confirm.password.mismatch",defaultMessage:"两次输入的密码不一致"}))):Promise.resolve()}}}],children:(0,X.jsx)(ee.Z.Password,{placeholder:u.formatMessage({id:"confirm.password.placeholder",defaultMessage:"请再次输入新密码"})})}),(0,X.jsx)(K.Z.Item,{children:(0,X.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,X.jsx)(z.ZP,{onClick:S,disabled:h,children:u.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,X.jsx)(z.ZP,{type:"primary",htmlType:"submit",loading:h,disabled:M<20,children:u.formatMessage({id:"confirm",defaultMessage:"确认"})})]})})]})})},re=n(87005),ae=n(5509),se=n(55072),oe=n(42358),ie=["current","pageSize"],le=function(){var e,t=(0,a.useRef)(),n=(0,A.useIntl)(),r=(0,a.useRef)(!1),s=(0,Q.Z)().translateString,o=(0,a.useState)(!0),l=b()(o,2),d=l[0],f=l[1],m=(0,a.useState)(1),h=b()(m,2),x=h[0],q=h[1],O=(0,a.useState)(10),B=b()(O,2),N=B[0],$=B[1],G=(0,a.useState)({}),V=b()(G,2),J=V[0],W=V[1],K=(0,a.useState)(),Y=b()(K,2),ee=Y[0],te=Y[1],le=(0,a.useState)(!1),ue=b()(le,2),de=ue[0],ce=ue[1],fe=(0,w.u)((function(e){return e.currentOrg})),pe=(0,oe.L)((function(e){return e.userInfo})),me=(0,M.H)((function(e){return e.currentDepartment})),ge=D.Z.useModal(),he=b()(ge,2),ve=(he[0],he[1]),xe=(0,a.useState)(!1),be=b()(xe,2),ye=be[0],Me=be[1],we=(0,a.useState)(),je=b()(we,2),Ze=je[0],ke=je[1],Pe=(0,M.H)((function(e){return{departmentResult:e.departmentResult,setDepartmentResult:e.setDepartmentResult}})),Ce=Pe.departmentResult,Se=Pe.setDepartmentResult,Fe=(0,a.useState)([]),De=b()(Fe,2),Te=De[0],Ee=De[1],Ue=(0,a.useState)([]),ze=b()(Ue,2),Re=ze[0],Ie=ze[1],qe=(0,a.useState)([]),Oe=b()(qe,2),Be=Oe[0],Ne=Oe[1],Ae=(0,a.useState)(0),$e=b()(Ae,2),Ge=$e[0],Ve=$e[1],Le=(0,a.useState)(!1),He=b()(Le,2),Qe=He[0],Je=He[1],Xe=(0,a.useState)(!1),We=b()(Xe,2),_e=We[0],Ke=We[1],Ye=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,X.jsx)(A.FormattedMessage,{id:"pages.user.nickname",defaultMessage:"昵称"}),dataIndex:"nickname",fixed:"left",copyable:!0,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.nickname.tooltip",defaultMessage:"成员的昵称或显示名称"})},{title:(0,X.jsx)(A.FormattedMessage,{id:"pages.user.username",defaultMessage:"Username"}),dataIndex:"username",tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.username.tooltip",defaultMessage:"成员的登录账号名称"}),render:function(e,t){var n,r=null==t||null===(n=t.user)||void 0===n?void 0:n.username;return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)("span",{children:r}),r&&(0,X.jsx)(T.Z.Text,{copyable:{text:r},style:{marginLeft:4}})]})}},{title:(0,X.jsx)(A.FormattedMessage,{id:"mobile",defaultMessage:"Mobile"}),dataIndex:"mobile",tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.mobile.tooltip",defaultMessage:"成员的手机号码联系方式"}),render:function(e,t){return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)("a",{href:"tel:".concat(t.mobile),children:t.mobile}),t.mobile&&(0,X.jsx)(T.Z.Text,{copyable:{text:t.mobile},style:{marginLeft:4}})]})}},{title:(0,X.jsx)(A.FormattedMessage,{id:"email",defaultMessage:"Email"}),dataIndex:"email",copyable:!0,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.email.tooltip",defaultMessage:"成员的电子邮箱地址"}),render:function(e,t){return(0,X.jsx)("a",{href:"mailto:".concat(e),children:e})}},{title:(0,X.jsx)(A.FormattedMessage,{id:"jobNo",defaultMessage:"工号"}),dataIndex:"jobNo",copyable:!0,hideInSearch:!1,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.jobNo.tooltip",defaultMessage:"成员在组织内部的工号标识"})},{title:(0,X.jsx)(A.FormattedMessage,{id:"jobTitle",defaultMessage:"职位"}),dataIndex:"jobTitle",copyable:!0,hideInSearch:!1,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.jobTitle.tooltip",defaultMessage:"成员在组织内的职位或职务名称"})},{title:(0,X.jsx)(A.FormattedMessage,{id:"seatNo",defaultMessage:"座席号"}),dataIndex:"seatNo",copyable:!0,hideInSearch:!0,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.seatNo.tooltip",defaultMessage:"成员的座席编号，通常用于客服系统"})},{title:(0,X.jsx)(A.FormattedMessage,{id:"telephone",defaultMessage:"电话"}),dataIndex:"telephone",copyable:!0,hideInSearch:!0,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.telephone.tooltip",defaultMessage:"成员的固定电话或分机号"}),render:function(e){return e?(0,X.jsx)("a",{href:"tel:".concat(e),children:e}):""}},{title:(0,X.jsx)(A.FormattedMessage,{id:"department",defaultMessage:"Department"}),dataIndex:"deptUid",valueType:"select",tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.department.tooltip",defaultMessage:"成员所属的部门或组织单位"}),fieldProps:{options:function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[],o=v()(t||[]);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.uid!==I.zBg){var l=s(i.name),u=r?"".concat(r," / ").concat(l):l;a.push({label:u,value:i.uid}),i.children&&i.children.length>0&&(a=a.concat(e(i.children,u)))}}}catch(e){o.e(e)}finally{o.f()}return a}((null==Ce||null===(e=Ce.data)||void 0===e?void 0:e.content)||[])},render:function(e,t){var n=function e(t,n){var r,a=v()(t||[]);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.uid===n)return s;if(s.children&&s.children.length>0){var o=e(s.children,n);if(o)return o}}}catch(e){a.e(e)}finally{a.f()}return null}(Ce.data.content,t.deptUid);return n?(0,X.jsx)(E.Z,{color:"green",children:s(n.name)}):""}},{title:(0,X.jsx)(A.FormattedMessage,{id:"roles",defaultMessage:"Roles"}),dataIndex:"roleUids",hideInSearch:!0,width:180,tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.roles.tooltip",defaultMessage:"成员拥有的角色，决定其系统权限"}),render:function(e,t){var n=t.roleUids.filter((function(e){return""!==e})).map((function(e){var t=Te.find((function(t){return t.uid===e}));return t?s(t.name):""}));return(0,X.jsx)(X.Fragment,{children:n.map((function(e,t){return e&&(0,X.jsx)(E.Z,{color:"blue",style:{margin:"2px"},children:e},t)}))})}},{title:(0,X.jsx)(A.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",width:180,hideInSearch:!0,sorter:!0,valueType:"dateTime",tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.createdAt.tooltip",defaultMessage:"成员创建或添加的时间"})},{title:(0,X.jsx)(A.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),dataIndex:"updatedAt",width:180,sorter:!0,hideInSearch:!0,valueType:"dateTime",tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.updatedAt.tooltip",defaultMessage:"成员信息最后更新的时间"})},{title:n.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:180,fixed:"right",tooltip:(0,X.jsx)(A.FormattedMessage,{id:"member.actions.tooltip",defaultMessage:"对成员可执行的操作，如编辑、删除等"}),render:function(e,t,r,a){var s,o,i=[(0,X.jsx)("a",{onClick:function(){console.log("editable:",t),ut(t)},children:n.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable")];return i.push((0,X.jsx)("a",{onClick:function(){console.log("changePassword:",t),mt(t)},children:n.formatMessage({id:"change.password",defaultMessage:"修改密码"})},"changePassword")),null!=t&&null!==(s=t.user)&&void 0!==s&&s.superUser||(null==t||null===(o=t.user)||void 0===o?void 0:o.uid)===(null==pe?void 0:pe.uid)||i.push((0,X.jsx)(U.Z,{title:n.formatMessage({id:"deleteTip"}),description:"".concat(n.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(t.nickname,"】？"),onConfirm:function(){return at(t)},okText:n.formatMessage({id:"ok"}),cancelText:n.formatMessage({id:"cancel"}),children:(0,X.jsx)(z.ZP,{type:"link",danger:!0,children:n.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")),i}}],et=function(){var e=g()(p()().mark((function e(){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Me(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=g()(p()().mark((function e(){var t,n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.yw.loading("正在获取角色列表..."),t={pageNumber:0,pageSize:100,orgUid:null==fe?void 0:fe.uid,orgAndPlatform:!0},e.next=4,(0,H.E9)(t);case 4:n=e.sent,console.log("queryRolesByOrg response ",n),200===n.code?(L.yw.destroy(),n.data.content.forEach((function(e){Te.find((function(t){return t.uid===e.uid}))||Ee((function(t){return[].concat(c()(t),[e])}))}))):(L.yw.destroy(),L.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=g()(p()().mark((function e(r){var a,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmitDrawer:",r),Ke(!0),e.prev=2,!d){e.next=11;break}return e.next=6,(0,y.hS)(r);case 6:a=e.sent,console.log("updateMember:",a),200===a.code?(L.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),t.current.reload(),dt()):L.yw.error(a.message),e.next=16;break;case 11:return e.next=13,(0,y.D$)(r);case 13:s=e.sent,console.log("createMember:",s),200===s.code?(L.yw.success(n.formatMessage({id:"create.success",defaultMessage:"create success"})),t.current.reload(),dt()):L.yw.error(s.message);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error("提交失败:",e.t0),L.yw.error(n.formatMessage({id:"submit.error",defaultMessage:"提交失败，请重试"}));case 22:return e.prev=22,Ke(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=g()(p()().mark((function e(){var t,n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:100,orgUid:null==fe?void 0:fe.uid},e.next=3,(0,se.dF)(t);case 3:n=e.sent,console.log("queryDepartmentsByOrg:",n,t),200===n.code?Se(n):L.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=g()(p()().mark((function e(r){var a;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete mem:",r),e.next=3,(0,y.EP)(r);case 3:a=e.sent,console.log("deleteMember:",a),200===a.code?(L.yw.success(n.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),t.current.reload()):L.yw.error(a.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st={selectedRowKeys:Re,onChange:function(e,t){Ie(e),Ne(t)},getCheckboxProps:function(e){var t,n;return{disabled:(null==e||null===(t=e.user)||void 0===t?void 0:t.superUser)||(null==e||null===(n=e.user)||void 0===n?void 0:n.uid)===(null==pe?void 0:pe.uid),name:e.nickname}}};(0,a.useEffect)((function(){tt()}),[]),(0,a.useEffect)((function(){t.current.reload()}),[me]);var ot,it=function(){var e=g()(p()().mark((function e(t,n,a){var s,o,l,d,c,f,m,g,h;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.current){e.next=3;break}return console.log("isLoading: 1",r.current),e.abrupt("return",{});case 3:return r.current=!0,L.yw.loading("正在加载"),o=t.current,l=t.pageSize,d=u()(t,ie),W(d),q(o),$(l),c=void 0,f=void 0,n&&Object.keys(n).length>0&&(m=Object.keys(n)[0],c=m,f="ascend"===n[m]?"ascend":"descend"),g=i()(i()({pageNumber:o-1,pageSize:l,orgUid:null==fe?void 0:fe.uid,deptUid:(null==me?void 0:me.uid)===I.zBg?"":null==me?void 0:me.uid,subDeptUids:(null==me||null===(s=me.children)||void 0===s?void 0:s.map((function(e){return e.uid})))||[]},d),{},{sortBy:c,sortDirection:f}),e.next=15,(0,y.z_)(g);case 15:return h=e.sent,console.log("queryMembersByOrg:",g,h),200===h.code?Ve(h.data.totalElements):L.yw.error(h.message),r.current=!1,L.yw.destroy(),e.abrupt("return",{data:h.data.content,success:!0,total:h.data.totalElements});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),lt=function(){te(void 0),f(!1),ce(!0)},ut=function(e){te(e),f(!0),ce(!0)},dt=function(){ce(!1)},ct=function(){var e=g()(p()().mark((function e(t,n,r){var a,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",t,n,r,J),a=localStorage.getItem(I.LA8),s=i()(i()({orgUid:(null==fe?void 0:fe.uid)||"",accessToken:a||"",exportType:t},J),{},{deptUid:(null==me?void 0:me.uid)===I.zBg?"":null==me?void 0:me.uid}),"current"===t?(s.pageNumber=String(x-1),s.pageSize=String(N)):"all"===t?(s.pageNumber="0",s.pageSize="1000"):"range"===t&&void 0!==n&&void 0!==r&&(s.pageNumber=String(n),s.pageSize=String(r)),window.open((0,re.kG)()+"/api/v1/member/export?"+new URLSearchParams(s).toString());case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ft=function(e){for(var t=[],n=1e3,r=Math.ceil(e/n),a=function(){var r=s,a=s*n+1,o=Math.min((s+1)*n,e);t.push({key:"export-".concat(s),label:"".concat(a,"-").concat(o," (").concat(o-a+1,"条)"),onClick:function(){return ct("range",r,n)}})},s=0;s<r;s++)a();return t},pt=function(){var e=g()(p()().mark((function e(){var r,a,s,o,i,l,u,d,c,f;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Be.length){e.next=3;break}return L.yw.warning(n.formatMessage({id:"batch.delete.noselection",defaultMessage:"请先选择要删除的项目"})),e.abrupt("return");case 3:if(a=Be.filter((function(e){var t,n;return!(null!=e&&null!==(t=e.user)&&void 0!==t&&t.superUser)&&(null==e||null===(n=e.user)||void 0===n?void 0:n.uid)!==(null==pe?void 0:pe.uid)})),0!==a.length){e.next=7;break}return L.yw.warning(n.formatMessage({id:"batch.delete.onlySuperUsers",defaultMessage:"选中的都是超级用户或当前登录用户，无法删除"})),e.abrupt("return");case 7:a.length<Be.length&&(s=Be.filter((function(e){var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.superUser})).length,o=Be.filter((function(e){var t;return(null==e||null===(t=e.user)||void 0===t?void 0:t.uid)===(null==pe?void 0:pe.uid)})).length,i=n.formatMessage({id:"batch.delete.containsSpecialUsers",defaultMessage:"选中的 {total} 项中包含 {skippedCount} 项无法删除"},{total:Be.length,skippedCount:Be.length-a.length}),s>0&&o>0?i+=n.formatMessage({id:"batch.delete.superAndCurrentUsers",defaultMessage:"（包括 {superCount} 个超级用户和当前登录用户）"},{superCount:s}):s>0?i+=n.formatMessage({id:"batch.delete.onlySuperUsers",defaultMessage:"（{superCount} 个超级用户）"},{superCount:s}):o>0&&(i+=n.formatMessage({id:"batch.delete.currentUser",defaultMessage:"（当前登录用户）"})),L.yw.warning(i)),L.yw.loading(n.formatMessage({id:"deleting",defaultMessage:"正在删除..."})),l=0,u=0,d=v()(a),e.prev=12,d.s();case 14:if((c=d.n()).done){e.next=28;break}return f=c.value,e.prev=16,e.next=19,(0,y.EP)(f);case 19:200===e.sent.code?l++:u++,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),u++;case 26:e.next=14;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(12),d.e(e.t1);case 33:return e.prev=33,d.f(),e.finish(33);case 36:L.yw.destroy(),0===u?L.yw.success(n.formatMessage({id:"batch.delete.success",defaultMessage:"成功删除 {count} 项"},{count:l})):L.yw.warning(n.formatMessage({id:"batch.delete.partial",defaultMessage:"已删除 {success} 项，{fail} 项删除失败"},{success:l,fail:u})),Ie([]),Ne([]),null===(r=t.current)||void 0===r||r.reloadAndRest();case 41:case"end":return e.stop()}}),e,null,[[12,30,33,36],[16,23]])})));return function(){return e.apply(this,arguments)}}(),mt=function(e){ke(e),Je(!0)};return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(F.Z,{columns:Ye,actionRef:t,cardBordered:!0,rowSelection:st,request:it,rowKey:"uid",scroll:{x:2500},search:{labelWidth:"auto"},pagination:{pageSize:N,showQuickJumper:!0,showSizeChanger:!0,onChange:function(e,t){q(e),$(t)}},headerTitle:null!=me&&null!==(ot=me.name)&&void 0!==ot&&ot.startsWith("i18n.")?n.formatMessage({id:null==me?void 0:me.name,defaultMessage:null==me?void 0:me.name}):null==me?void 0:me.name,toolBarRender:function(){var e=[(0,X.jsx)(z.ZP,{icon:(0,X.jsx)(j.Z,{}),type:"primary",onClick:lt,children:n.formatMessage({id:"create.member",defaultMessage:"创建成员"})},"create")],t=[];Re.length>0&&t.push({key:"batchDelete",icon:(0,X.jsx)(Z.Z,{}),danger:!0,label:n.formatMessage({id:"batch.delete",defaultMessage:"批量删除"})+" (".concat(Re.length,")"),onClick:function(){D.Z.confirm({title:n.formatMessage({id:"batch.deleteTip",defaultMessage:"批量删除确认"}),content:"".concat(n.formatMessage({id:"batch.deleteAffirm",defaultMessage:"确认删除选中的"})," ").concat(Re.length," ").concat(n.formatMessage({id:"items",defaultMessage:"项"}),"?"),onOk:pt,okText:n.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:n.formatMessage({id:"cancel",defaultMessage:"取消"})})}});var r=[{key:"import",icon:(0,X.jsx)(k.Z,{}),label:n.formatMessage({id:"import",defaultMessage:"导入"}),onClick:et},{key:"export-current",icon:(0,X.jsx)(P.Z,{}),label:n.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return ct("current")}}];return Ge>0&&(Ge<=1e3?r.push({key:"export-all",icon:(0,X.jsx)(P.Z,{}),label:n.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(Ge,"条)"),onClick:function(){return ct("all")}}):r.push({key:"export-range",icon:(0,X.jsx)(P.Z,{}),label:n.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(Ge,"条)"),children:ft(Ge)})),r.push({key:"download",icon:(0,X.jsx)(C.Z,{}),label:n.formatMessage({id:"download.template",defaultMessage:"下载模板"}),onClick:function(){return(0,re.$E)()}}),e.push((0,X.jsx)(R.Z,{menu:{items:r},placement:"bottom",children:(0,X.jsxs)(z.ZP,{type:"primary",children:[n.formatMessage({id:"import.export",defaultMessage:"导入导出"}),(0,X.jsx)(S.Z,{})]})},"importExport")),t.length>0&&e.push((0,X.jsx)(R.Z,{menu:{items:t},placement:"bottom",children:(0,X.jsxs)(z.ZP,{type:Re.length>0?"primary":"default",danger:Re.length>0,children:[Re.length>0?n.formatMessage({id:"batch.operations",defaultMessage:"批量操作"})+" (".concat(Re.length,")"):n.formatMessage({id:"more.operations",defaultMessage:"更多操作"}),(0,X.jsx)(S.Z,{})]})},"batchOperations")),e}}),de&&(0,X.jsx)(_,{isEdit:d,member:ee,open:de,onClose:dt,onSubmit:nt,isSubmitting:_e}),ye&&(0,X.jsx)(ae.Z,{type:I.zey,acceptType:".xls,.xlsx,.csv",isModalOpen:ye,handleSubmit:function(e){console.log("handleUploadDragSubmit",e),Me(!1),rt(),null==t||t.current.reload()},handleCancel:function(){console.log("handleUploadDragCancel"),Me(!1),null==t||t.current.reload()}}),(0,X.jsx)(ne,{open:Qe,member:Ze,onClose:function(){Je(!1)},onSuccess:function(){var e;null===(e=t.current)||void 0===e||e.reload()}}),ve]})},ue=n(11853),de=n(17061),ce=n(83381),fe=n(90092),pe=n(35911),me=n(41881),ge=n(26608),he=function(e){var t=e.open,n=e.isEdit,r=e.department,s=e.onCancel,o=e.onSubmit,i=K.Z.useForm(),l=b()(i,1)[0],u=(0,A.useIntl)(),d=(0,M.H)((function(e){return e.departmentResult})),c=(0,w.u)((function(e){return e.currentOrg})),f=(0,Q.Z)().translateString,m=(0,a.useRef)(null);(0,a.useEffect)((function(){if(t)if(n)l.setFieldsValue({uid:null==r?void 0:r.uid,parentUid:(null==r?void 0:r.parentUid)||I.zBg,name:f(null==r?void 0:r.name),description:null==r?void 0:r.description});else{l.resetFields();var e=null!=r&&r.uid&&r.uid!==I.zBg?r.uid:I.zBg;l.setFieldsValue({parentUid:e})}}),[t,n,null==r?void 0:r.uid]);var h=function e(t,n){var r;if(null!==(r=t.name)&&void 0!==r&&r.startsWith(I.VoP)?n.title=u.formatMessage({id:t.name,defaultMessage:t.name}):n.title=t.name||"",n.value=t.uid||"",t.children&&t.children.length>0){n.children=[];for(var a=0;a<t.children.length;a++){var s={title:"",value:""};e(t.children[a],s),n.children.push(s)}}},v=(0,a.useMemo)((function(){for(var e,t=[],a=(null==d||null===(e=d.data)||void 0===e?void 0:e.content)||[],s=0;s<a.length;s++){var o;if((null===(o=a[s])||void 0===o?void 0:o.uid)!==I.zBg){var i={title:"",value:""};h(a[s],i),t.push(i)}}var l=n?null==r?void 0:r.uid:void 0;if(l){var c=function e(t){var n;t&&(t.disabled=!0,null===(n=t.children)||void 0===n||n.forEach(e))};!function e(t){t&&t.forEach((function(t){t.value===l?c(t):t.children&&t.children.length>0&&e(t.children)}))}(t)}return[{title:u.formatMessage({id:"pages.category.drawer.parent.top",defaultMessage:"顶级（无上级）"}),value:I.zBg}].concat(t)}),[d,n,null==r?void 0:r.uid]),x=function(){l.validateFields().then(function(){var e=g()(p()().mark((function e(t){var a,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.parentUid===I.zBg?void 0:t.parentUid,s={uid:n?null==r?void 0:r.uid:"",name:t.name,description:t.description,parentUid:a,orgUid:null==c?void 0:c.uid},console.log("handleSaveDep:",t,s),o(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Failed:",e),L.yw.error(n?"更新部门失败":"创建部门失败")}))};return(0,X.jsx)("div",{children:(0,X.jsx)(D.Z,{title:n?"编辑部门":"创建部门",open:t,forceRender:!0,onOk:x,onCancel:s,children:(0,X.jsxs)(q.A,{form:l,name:"depForm",style:{maxWidth:400},submitter:{render:function(){return null}},children:[(0,X.jsx)(O.Z,{label:"上级部门",name:"parentUid",allowClear:!0,fieldProps:{treeData:v,fieldNames:{label:"title",value:"value",children:"children"},placeholder:"请选择上级部门(可选)",allowClear:!0,treeDefaultExpandAll:!0,filterTreeNode:function(e,t){var n;return(null!==(n=t&&t.title)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},variant:"outlined",styles:{popup:{root:{maxHeight:400,overflow:"auto"}}}}}),(0,X.jsx)(B.Z,{label:"部门名称",name:"name",rules:[{required:!0,message:"请输入名称!"}],fieldProps:{onPressEnter:function(){m.current&&m.current.focus()}}}),(0,X.jsx)(ge.Z,{label:"部门简介",name:"description",fieldProps:{ref:m,onPressEnter:function(e){e.preventDefault(),x()}}})]})})})},ve=function(){var e=(0,A.useIntl)(),t=(0,a.useState)(!1),n=b()(t,2),r=n[0],s=n[1],o=(0,a.useState)(!1),i=b()(o,2),l=i[0],u=i[1],d=(0,w.u)((function(e){return e.currentOrg})),c=D.Z.useModal(),f=b()(c,2),m=f[0],h=f[1],v=(0,a.useState)(!1),x=b()(v,2),y=x[0],j=x[1],k=(0,M.H)((function(e){return{currentDepartment:e.currentDepartment,departmentResult:e.departmentResult,insertDepartment:e.insertDepartment,upgradeDepartment:e.upgradeDepartment,removeDepartment:e.removeDepartment,setCurrentDepartment:e.setCurrentDepartment,setDepartmentResult:e.setDepartmentResult,setCurrentDepUid:e.setCurrentDepUid}})),P=k.currentDepartment,C=k.departmentResult,F=k.insertDepartment,T=k.upgradeDepartment,E=k.removeDepartment,U=k.setCurrentDepartment,q=k.setDepartmentResult,O=k.setCurrentDepUid,B=function(){var t=g()(p()().mark((function t(n){var r;return p()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handleDeleteDept",n),L.yw.loading(e.formatMessage({id:"deleting"})),t.next=4,(0,se.If)(n);case 4:r=t.sent,console.log("handleDeleteDept:",r),200===r.code?(L.yw.destroy(),L.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"delete success"})),E(null==n?void 0:n.uid),s(!1)):(L.yw.destroy(),L.yw.error(r.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function t(n,r){var a,s="";if(s=null!==(a=n.name)&&void 0!==a&&a.startsWith(I.VoP)?e.formatMessage({id:n.name,defaultMessage:n.name}):n.name||"",void 0!==n.memberCount&&null!==n.memberCount&&n.memberCount>=0?s="".concat(s," (").concat(n.memberCount,")"):null!==n.memberCount&&void 0!==n.memberCount||(s="".concat(s," (0)")),r.title=s,r.key=n.uid||"",n.children)for(var o=0;o<n.children.length;o++){var i={title:"",key:"",children:[]};t(n.children[o],i),r.children.push(i)}},$=(0,a.useMemo)((function(){var t=[],n=0;C.data.content&&C.data.content.forEach((function(e){if(e.uid!==I.zBg){var t,r=null!==(t=e.memberCount)&&void 0!==t?t:0;n+=r}}));for(var r=0;r<C.data.content.length;r++){var a={title:"",key:"",children:[]};if(C.data.content[r].uid===I.zBg){var s=e.formatMessage({id:"allDept",defaultMessage:"全部"});s="".concat(s," (").concat(n,")"),a.title=s,a.key=I.zBg}else N(C.data.content[r],a);t.push(a)}return t}),[C]),G=function(){var e=g()(p()().mark((function e(){var t,n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),t={pageNumber:0,pageSize:100,orgUid:null==d?void 0:d.uid},e.next=4,(0,se.dF)(t);case 4:n=e.sent,console.log("queryDepartmentsByOrg:",n,t),200===n.code?q(n):L.yw.error(n.message),j(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){G()}),[]);var V=function(){var t=g()(p()().mark((function t(n){var r;return p()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handleCreateDept",n),L.yw.loading(e.formatMessage({id:"creating"})),t.next=4,(0,se.v$)(n);case 4:r=t.sent,console.log("createDepartment:",r),200===r.code?(L.yw.destroy(),L.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),F(r.data),U(r.data),s(!1),G()):(L.yw.destroy(),L.yw.error(r.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=g()(p()().mark((function t(n){var r;return p()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L.yw.loading(e.formatMessage({id:"updating"})),t.next=3,(0,se.j4)(n);case 3:r=t.sent,console.log("handleUpdateDept:",n,r),200===r.code?(L.yw.destroy(),L.yw.success(e.formatMessage({id:"update.success",defaultMessage:"update success"})),U(r.data),T(r.data),s(!1),G()):(L.yw.destroy(),L.yw.error(r.message));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(ue.Z,{gap:"small",wrap:"nowrap",style:{padding:"10px",justifyContent:"space-between"},children:[(0,X.jsxs)(ue.Z,{gap:"small",children:[(0,X.jsx)(z.ZP,{type:"primary",size:"small",icon:(0,X.jsx)(fe.Z,{}),onClick:function(){console.log("new dep"),u(!1),s(!0)},children:e.formatMessage({id:"createDept",defaultMessage:"createDepartment"})}),(0,X.jsx)(z.ZP,{size:"small",icon:(0,X.jsx)(pe.Z,{spin:y}),onClick:G,loading:y,children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})})]}),(null==P?void 0:P.uid)&&(null==P?void 0:P.uid)!==I.zBg&&(0,X.jsx)(R.Z,{menu:{items:[{key:"edit",icon:(0,X.jsx)(me.Z,{}),label:e.formatMessage({id:"edit",defaultMessage:"Edit"}),onClick:function(){console.log("edit role"),u(!0),s(!0)}},{key:"delete",icon:(0,X.jsx)(Z.Z,{}),label:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"}),danger:!0,onClick:function(){return t=P,void m.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,X.jsx)(ce.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(t.name,"】？"),onOk:function(){B(t)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})});var t}}]},children:(0,X.jsx)(z.ZP,{size:"small",icon:(0,X.jsx)(S.Z,{})})})]}),(0,X.jsx)(de.Z,{defaultSelectedKeys:[(null==P?void 0:P.uid)||I.zBg],onSelect:function(e,t){console.log("selected",e,t),0!==e.length&&O(e[0].toString())},treeData:$,blockNode:!0}),r&&(0,X.jsx)(he,{open:r,isEdit:l,department:P,onCancel:function(){s(!1)},onSubmit:function(e){l?H(e):V(e)}}),h]})},xe=function(){var e=(0,s.Z)(),t=e.leftSiderStyle,n=e.contentStyle;return(0,X.jsxs)(r.Z,{style:{height:"100%"},children:[(0,X.jsx)(r.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:t,children:(0,X.jsx)(ve,{})}),(0,X.jsx)(r.Z.Panel,{style:n,children:(0,X.jsx)(le,{})})]})}},74956:function(e,t,n){n.d(t,{H:function(){return p}});var r=n(86222),a=n.n(r),s=n(76711),o=n.n(s),i=n(73193),l=n.n(i),u=n(68992),d=n(58063),c=n(66266),f=n(31403),p=(0,d.Ue)()((0,c.mW)((0,c.tJ)((0,f.n)((function(e,t){return{departmentResult:{data:{content:[]}},currentDepartment:{uid:u.zBg,nickname:u.zBg},insertDepartment:function(t){e((function(e){var n=e.departmentResult.data.content;if(t.parentUid){var r=n.find((function(e){return e.uid===t.parentUid}));r&&(r.children||(r.children=[]),r.children.push(t))}else n.push(t)}))},upgradeDepartment:function(t){e((function(e){var n=e.departmentResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:n.forEach((function(e){if(e.children){var n=e.children.findIndex((function(e){return e.uid===t.uid}));-1!==n&&(e.children[n]=t)}}))}))},setDepartmentResult:function(n){var r,a={uid:u.zBg,name:u.zBg};(e({departmentResult:l()(l()({},n),{},{data:{content:[a].concat(o()(n.data.content))}})}),""===t().currentDepartment.uid)&&((null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentDepartment:n.data.content[0]}))},setCurrentDepartment:function(n){var r=t().departmentResult.data.content,a=r.findIndex((function(e){return e.uid===n.uid}));if(-1!==a){var s=[].concat(o()(r.slice(0,a)),[n],o()(r.slice(a+1))),i=l()(l()({},t().departmentResult),{},{data:{content:s}});e({departmentResult:i,currentDepartment:n})}else console.warn("Department with the specified uid not found."),e({currentDepartment:n})},removeDepartment:function(n){e((function(e){var t=e.departmentResult.data.content;e.departmentResult.data.content=function e(t,n){return t.filter((function(t){return t.uid!==n&&(t.children&&(t.children=e(t.children,n)),!0)}))}(t,n)})),t().currentDepartment.uid===n&&e({currentDepartment:{uid:""}})},setCurrentDepUid:function(n){var r,s,o=null===(r=t().departmentResult)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.find((function(e){return e.uid===n}));if(o)e({currentDepartment:o});else{!function t(r){var s,o=a()(r);try{for(o.s();!(s=o.n()).done;){var i=s.value;if(i.uid===n)return void e({currentDepartment:i});i.children&&i.children.length>0&&t(i.children)}}catch(e){o.e(e)}finally{o.f()}}((null===(s=t().departmentResult)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.content)||[])}},deleteDepartmentCache:function(){return e({},!0)}}})),{name:u.xY_})))},75686:function(e,t,n){n.d(t,{$g:function(){return d},N9:function(){return l},Qc:function(){return u},vC:function(){return i}});var r=n(46803),a=n.n(r),s=n(46130);function o(e){return"bytedesk_salt"!==e&&e?a().SHA256(e).toString().substring(0,16):"bytedesk_license"}function i(e,t){if(!e)throw new Error("密码不能为空");if(!t)throw new Error("盐值不能为空");try{var n=o(t),r=a().enc.Utf8.parse(n);return a().AES.encrypt(e,r,{mode:a().mode.ECB,padding:a().pad.Pkcs7}).toString()}catch(e){throw s.Z.error("密码加密失败:",e),new Error("密码加密失败: "+e.message)}}function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function u(e){var t=0;return e?(e.length>=8&&(t+=20),e.length>=12&&(t+=10),/\d/.test(e)&&(t+=20),/[a-z]/.test(e)&&(t+=20),/[A-Z]/.test(e)&&(t+=20),/[!@#$%^&*(),.?":{}|<>]/.test(e)&&(t+=10),Math.min(t,100)):0}function d(e){return e>=80?"强":e>=60?"中":e>=40?"弱":"很弱"}},11853:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(44194),a=n(51865),s=n.n(a),o=n(21762),i=n(66692),l=n(35738),u=n(11973),d=n(10750);const c=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var m=function(e,t){return s()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&c.includes(n)}})(e,t)),((e,t)=>{const n={};return p.forEach((r=>{n[`${e}-align-${r}`]=t.align===r})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return f.forEach((r=>{n[`${e}-justify-${r}`]=t.justify===r})),n})(e,t)))};const g=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},h=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,n={};return c.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},x=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},b=e=>{const{componentCls:t}=e,n={};return f.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var y=(0,u.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,a=(0,d.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[g(a),h(a),v(a),x(a),b(a)]}),(()=>({})),{resetStyle:!1}),M=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const w=r.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:a,className:u,style:d,flex:c,gap:f,vertical:p=!1,component:g="div",children:h}=e,v=M(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component","children"]),{flex:x,direction:b,getPrefixCls:w}=r.useContext(l.E_),j=w("flex",n),[Z,k,P]=y(j),C=null!=p?p:null==x?void 0:x.vertical,S=s()(u,a,null==x?void 0:x.className,j,k,P,m(j,e),{[`${j}-rtl`]:"rtl"===b,[`${j}-gap-${f}`]:(0,i.n)(f),[`${j}-vertical`]:C}),F=Object.assign(Object.assign({},null==x?void 0:x.style),d);return c&&(F.flex=c),f&&!(0,i.n)(f)&&(F.gap=f),Z(r.createElement(g,Object.assign({ref:t,className:S,style:F},(0,o.Z)(v,["justify","wrap","align"])),h))}));var j=w}}]);