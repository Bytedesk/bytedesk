"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5275],{19971:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var s=i(30758);const o={},t=s.createContext(o);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},37848:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"development/fileupload","title":"File Upload","description":"The Weiyu system supports two file storage methods: Local File System and MinIO Object Storage. The system uses local file system storage by default, and only uses MinIO object storage when bytedesk.minio.enabled=true. You can choose the appropriate storage method based on your actual needs.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/development/fileupload.md","sourceDirName":"development","slug":"/development/fileupload","permalink":"/docs/docs/development/fileupload","draft":false,"unlisted":false,"editUrl":"https://github.com/bytedesk/bytedesk-docs/blob/main/docs/development/fileupload.md","tags":[],"version":"current","lastUpdatedBy":"jack ning","lastUpdatedAt":1761279339000,"sidebarPosition":32,"frontMatter":{"sidebar_label":"File Upload","sidebar_position":32},"sidebar":"tutorialSidebar","previous":{"title":"Internationalization","permalink":"/docs/docs/development/i18n"},"next":{"title":"MQTT","permalink":"/docs/docs/development/mqtt"}}');var o=i(86070),t=i(19971);const r={sidebar_label:"File Upload",sidebar_position:32},l="File Upload",a={},d=[{value:"Configuration Description",id:"configuration-description",level:2},{value:"1. Local File System Storage",id:"1-local-file-system-storage",level:3},{value:"2. MinIO Object Storage",id:"2-minio-object-storage",level:3},{value:"Docker Compose Configuration",id:"docker-compose-configuration",level:2},{value:"Storage Method Selection",id:"storage-method-selection",level:2},{value:"Default Configuration: Local File System",id:"default-configuration-local-file-system",level:3},{value:"Optional Configuration: MinIO Object Storage",id:"optional-configuration-minio-object-storage",level:3},{value:"Important Notes",id:"important-notes",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"file-upload",children:"File Upload"})}),"\n",(0,o.jsxs)(n.p,{children:["The Weiyu system supports two file storage methods: ",(0,o.jsx)(n.strong,{children:"Local File System"})," and ",(0,o.jsx)(n.strong,{children:"MinIO Object Storage"}),". The system uses local file system storage by default, and only uses MinIO object storage when ",(0,o.jsx)(n.code,{children:"bytedesk.minio.enabled=true"}),". You can choose the appropriate storage method based on your actual needs."]}),"\n",(0,o.jsx)(n.h2,{id:"configuration-description",children:"Configuration Description"}),"\n",(0,o.jsx)(n.h3,{id:"1-local-file-system-storage",children:"1. Local File System Storage"}),"\n",(0,o.jsx)(n.p,{children:"Local file system storage saves files in the server's local directory, suitable for small-scale deployments and testing environments."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"# ===============================\n#= Upload config\n# ===============================\n# Storage type: local indicates local file system\nbytedesk.upload.type=local\n# Upload directory, note not to end with '/'\n# Example: bytedesk.upload.dir=/var/www/html/weiyuai/file\nbytedesk.upload.dir=uploads\n# Access URL for uploaded files, please replace 127.0.0.1 with the server's actual IP address or domain name\nbytedesk.upload.url=http://127.0.0.1:9003\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configuration Description:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.upload.type=local"}),": Set to local file system storage"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.upload.dir"}),": Specify the local directory path for file storage"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.upload.url"}),": URL address for file access, need to replace 127.0.0.1 with your server's actual IP address or domain name"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"2-minio-object-storage",children:"2. MinIO Object Storage"}),"\n",(0,o.jsx)(n.p,{children:"MinIO is a high-performance object storage service, suitable for large-scale deployments and production environments."}),"\n",(0,o.jsx)(n.admonition,{title:"Detailed Configuration",type:"tip",children:(0,o.jsxs)(n.p,{children:["For detailed MinIO installation, configuration, and management instructions, please refer to the ",(0,o.jsx)(n.a,{href:"/docs/docs/deploy/depend/minio",children:"MinIO Object Storage"})," documentation."]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"# ===============================\n# = MinIO Object Storage Configuration\n# ===============================\n# Whether to enable MinIO storage\nbytedesk.minio.enabled=false\n# MinIO service address, please replace 127.0.0.1 with the server's actual IP address or domain name\nbytedesk.minio.endpoint=http://127.0.0.1:19000\n# MinIO access key\nbytedesk.minio.access-key=minioadmin\n# MinIO secret key\nbytedesk.minio.secret-key=minioadmin123\n# MinIO bucket name\nbytedesk.minio.bucket-name=bytedesk\n# MinIO region\nbytedesk.minio.region=us-east-1\n# Whether to use HTTPS\nbytedesk.minio.secure=false\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Configuration Description:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.enabled"}),": Whether to enable MinIO storage, default is false. Only when set to true will MinIO storage be used, otherwise local file system storage will be used"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.endpoint"}),": MinIO service access address, need to replace 127.0.0.1 with your server's actual IP address or domain name"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.access-key"}),": MinIO access key ID"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.secret-key"}),": MinIO access secret key"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.bucket-name"}),": MinIO bucket name"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.region"}),": MinIO service region"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bytedesk.minio.secure"}),": Whether to use HTTPS protocol"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"docker-compose-configuration",children:"Docker Compose Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["If you use Docker deployment, you can configure the file upload service in the ",(0,o.jsx)(n.code,{children:"docker-compose.yaml"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# MinIO configuration (when using MinIO)\nBYTEDESK_MINIO_ENABLED=false\n# MinIO service access address, please replace 127.0.0.1 with the server's actual IP address or domain name\nBYTEDESK_MINIO_ENDPOINT=http://127.0.0.1:19000\nBYTEDESK_MINIO_ACCESS_KEY=minioadmin\nBYTEDESK_MINIO_SECRET_KEY=minioadmin123\nBYTEDESK_MINIO_BUCKET_NAME=bytedesk\nBYTEDESK_MINIO_REGION=us-east-1\nBYTEDESK_MINIO_SECURE=false\n"})}),"\n",(0,o.jsx)(n.h2,{id:"storage-method-selection",children:"Storage Method Selection"}),"\n",(0,o.jsx)(n.h3,{id:"default-configuration-local-file-system",children:"Default Configuration: Local File System"}),"\n",(0,o.jsx)(n.p,{children:"The system uses local file system storage by default, no additional configuration required. Suitable for the following scenarios:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Applicable Scenarios"}),": Development testing, small-scale deployment"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Advantages"}),": Simple configuration, no additional services required, ready to use out of the box"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Disadvantages"}),": Does not support distributed deployment, storage capacity limited by server disk"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"optional-configuration-minio-object-storage",children:"Optional Configuration: MinIO Object Storage"}),"\n",(0,o.jsx)(n.p,{children:"When higher performance and scalability are needed, MinIO object storage can be enabled:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Enable Method"}),": Set ",(0,o.jsx)(n.code,{children:"bytedesk.minio.enabled=true"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Applicable Scenarios"}),": Production environment, large-scale deployment"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Advantages"}),": Supports distributed deployment, high availability, easy to scale"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Disadvantages"}),": Requires additional MinIO service deployment"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Default Behavior"}),": The system uses local file system storage by default, no additional configuration required"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"MinIO Enablement"}),": Only when ",(0,o.jsx)(n.code,{children:"bytedesk.minio.enabled=true"})," will MinIO storage be used"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"URL Configuration"}),": Ensure ",(0,o.jsx)(n.code,{children:"bytedesk.upload.url"})," is configured with the correct server address, need to replace 127.0.0.1 with the server's actual IP address or domain name, clients need to access uploaded files through this address"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Directory Permissions"}),": When using local file system, ensure the upload directory has appropriate read and write permissions"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Bucket Creation"}),": When using MinIO, the corresponding bucket needs to be created in advance"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Network Configuration"}),": In Docker environment, ensure normal network communication between services"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);