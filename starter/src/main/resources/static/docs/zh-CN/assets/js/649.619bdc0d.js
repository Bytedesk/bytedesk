"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[649],{40649:(e,a,t)=>{t.d(a,{uploadScreenshot:()=>i});var o=t(26629);async function i(e,a){var t;const i=`screenshot_${(new Date).toISOString().replace(/[-:T.]/g,"").slice(0,14)}.jpg`;return(null==(t=(await async function(e,a,t,i){try{const n=(new Date).toISOString().replace(/[-:T.]/g,"").slice(0,14),l=a||`${n}_${e.name}`,r=t||e.type||"image/jpeg",s=new FormData;s.append("file",e),s.append("fileName",l),s.append("fileType",r),s.append("isAvatar",(null==i?void 0:i.isAvatar)||"false"),s.append("kbType",(null==i?void 0:i.kbType)||"feedback");const d=(null==i?void 0:i.visitorUid)||localStorage.getItem("bytedesk_uid")||localStorage.getItem("bytedesk_visitor_uid")||"",p=(null==i?void 0:i.visitorNickname)||localStorage.getItem("bytedesk_nickname")||"",c=(null==i?void 0:i.visitorAvatar)||localStorage.getItem("bytedesk_avatar")||"",u=(null==i?void 0:i.orgUid)||"";s.append("visitorUid",d),s.append("visitorNickname",p),s.append("visitorAvatar",c),s.append("orgUid",u),s.append("client",(null==i?void 0:i.client)||"web"),null!=i&&i.isDebug&&console.log("handleUpload formData",s);const g=`${(0,o.e)()}/visitor/api/upload/file`,v=await fetch(g,{method:"POST",headers:{},body:s});if(!v.ok)throw new Error(`\u4e0a\u4f20\u5931\u8d25: ${v.status} ${v.statusText}`);const k=await v.json();return null!=i&&i.isDebug&&console.log("upload data:",k),k}catch(n){throw console.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25:",n),n}}(e,i,"image/jpeg",{...a,kbType:"feedback"})).data)?void 0:t.fileUrl)||""}}}]);