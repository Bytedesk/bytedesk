"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5131],{96865:function(e,n,t){var r=t(23864);n.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},76750:function(e,n,t){var r=t(55735),a=t(65461),s=t(30921);n.Z=function(){var e=(0,s.useIntl)();return{translateString:function(n){return null==n?n:n&&(null!=n&&n.startsWith(r.VoP)||null!=n&&n.startsWith("ROLE_"))?e.formatMessage({id:n,defaultMessage:n}):n},translateStringTranct:function(n){return null==n?n:null!=n&&n.startsWith(r.VoP)||null!=n&&n.startsWith("ROLE_")?(0,a.aS)(e.formatMessage({id:n,defaultMessage:n}),10):(0,a.aS)(n,10)}}}},45649:function(e,n,t){t.r(n),t.d(n,{default:function(){return Mn}});var r=t(96865),a=t(75574),s=t(45332),i=t.n(s),l=t(23864),o=t(73193),u=t.n(o),c=t(76711),d=t.n(c),p=t(55735),f=t(44435),h=t(83642),g=t(83890),m=(0,f.Ue)()((0,h.mW)((0,h.tJ)((0,g.n)((function(e,n){return{llmproviderResult:{data:{content:[]}},currentChannel:{name:"web",nickname:"网站/H5"},currentType:p.aZD,insertChannel:function(n){e((function(e){e.llmproviderResult.data.content.unshift(n)}))},setChannelResult:function(t){e({llmproviderResult:t});var r,a=n().currentChannel;""!==a.uid&&void 0!==a||(null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentChannel:t.data.content[0]})},setCurrentChannel:function(t){var r=n().llmproviderResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var s=[].concat(d()(r.slice(0,a)),[t],d()(r.slice(a+1))),i=u()(u()({},n().llmproviderResult),{},{data:{content:s}});e({llmproviderResult:i,currentChannel:t})}else e({currentChannel:t})},setCurrentType:function(n){e({currentType:n})},deleteCurrentChannel:function(t){var r=n().llmproviderResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({llmproviderResult:u()(u()({},n().llmproviderResult),{},{data:{content:[].concat(d()(r.slice(0,a)),d()(r.slice(a+1)))}})}):console.warn("Channel not found in cache:",t),n().currentChannel.uid===t&&e({currentChannel:{uid:""}})},deleteChannelCache:function(){return e({},!0)}}})),{name:p.uCV}))),x=t(9452),v=t(44194),y=t(31549),j=[{name:"web",nickname:"网站/H5"},{name:"npm",nickname:"Npm包"}],b=function(){var e=(0,l.Z)().isDarkMode,n=(0,v.useState)([]),t=i()(n,2),r=t[0],a=t[1],s=m((function(e){return{currentChannel:e.currentChannel,setCurrentChannel:e.setCurrentChannel}})),o=s.currentChannel,u=s.setCurrentChannel;return(0,v.useEffect)((function(){var e=[].concat(j);a(e)}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(x.Z,{itemLayout:"horizontal",dataSource:r,renderItem:function(n,t){return(0,y.jsx)(x.Z.Item,{style:(null==o?void 0:o.name)===n.name?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){u(n)},children:(0,y.jsx)(x.Z.Item.Meta,{title:(0,y.jsx)("div",{style:{marginLeft:10},children:n.nickname})})})}})})},w=t(8247),A=t(30921),k=function(){var e=(0,A.useAccess)();return e.canDebug&&console.log("Developing canDebug"),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(A.Access,{accessible:e.canDebug(),fallback:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(A.FormattedMessage,{id:p.h5w})}),children:"can debug"})})},Z=t(90819),M=t.n(Z),C=t(89933),S=t.n(C),R=t(10154),I=t.n(R),P=t(86803);function W(e){return E.apply(this,arguments)}function E(){return(E=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/create",{method:"POST",data:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return F.apply(this,arguments)}function F(){return(F=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/update",{method:"POST",data:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return B.apply(this,arguments)}function B(){return(B=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/delete",{method:"POST",data:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return K.apply(this,arguments)}function K(){return(K=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/query/org",{method:"GET",params:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=t(40612),U=t(15722),L=t(82669),N=t(53530),O=t(27487),z=t(75365),_=t(76750),G=t(72614),H=t(95490),X=t(69169),J=t(4499),Y=t(84881),Q=t(73442),$=t(3849),ee="MP",ne="MINI",te="WORK",re="KEFU",ae=function(e){var n,t=e.isEdit,r=e.wechatApp,a=e.open,s=e.onClose,l=e.onSubmit,o=X.A.useForm(),c=i()(o,1)[0],d=(0,_.Z)().translateStringTranct,p=(0,V.u)((function(e){return e.currentOrg})),f=(0,H.$)((function(e){return{workgroupResult:e.workgroupResult,setWorkgroupResult:e.setWorkgroupResult}})),h=f.workgroupResult,g=f.setWorkgroupResult;(0,v.useEffect)((function(){t?c.setFieldsValue({name:null==r?void 0:r.name,type:(null==r?void 0:r.type)||te,appId:null==r?void 0:r.appId,appSecret:null==r?void 0:r.appSecret,encodingAesKey:null==r?void 0:r.encodingAesKey,encryptMode:null==r?void 0:r.encryptMode,workgroupUid:null==r?void 0:r.workgroupUid}):c.setFieldsValue({name:"",type:te,appId:"",appSecret:"",encodingAesKey:"",encryptMode:"PLAINTEXT",workgroupUid:""})}),[t,r,c]);var m=function(){var e=S()(M()().mark((function e(){var n,t;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:null==p?void 0:p.uid},e.next=4,(0,G.LE)(n);case 4:t=e.sent,console.log("getWorkgroups",t),200===t.code?(P.yw.destroy(),g(t)):(P.yw.destroy(),P.yw.error(t.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){m()}),[]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(Q.Z,{title:"微信应用配置",onClose:s,open:a,width:600,children:(0,y.jsxs)(X.A,{form:c,name:"wechatWorkForm",onFinish:function(){console.log("handleSubmit"),c.validateFields().then((function(e){var n=u()(u()({},e),{},{orgUid:null==p?void 0:p.uid});console.log("submit",n),l(n)}))},children:[(0,y.jsx)(J.Z,{label:"名称",name:"name",rules:[{required:!0}]}),(0,y.jsx)(Y.Z,{label:"应用类型",name:"type",options:[{label:"微信公众号",value:ee},{label:"微信小程序",value:ne},{label:"企业微信",value:te},{label:"微信客服",value:re}],fieldProps:{defaultValue:te},rules:[{required:!0}]}),(0,y.jsx)(J.Z,{label:"企业ID(corpId)/AppID",name:"appId",rules:[{required:!0}]}),(0,y.jsx)(J.Z,{label:"应用Secret",name:"appSecret",rules:[{required:!0}]}),(0,y.jsx)(J.Z,{label:"EncodingAESKey",name:"encodingAesKey",rules:[{required:!0}],fieldProps:{addonAfter:(0,y.jsxs)($.Z,{children:[(0,y.jsx)(z.ZP,{size:"small",onClick:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",t=0;t<43;t++){var r=Math.floor(Math.random()*e.length);n+=e.charAt(r)}c.setFieldsValue({encodingAesKey:n})},children:"随机生成"}),(0,y.jsx)(z.ZP,{size:"small",onClick:function(){var e=c.getFieldValue("encodingAesKey");if(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),P.yw.success("已复制到剪切板")}},children:"复制"})]})}}),(0,y.jsx)(Y.Z,{label:"消息加解密方式",name:"encryptMode",options:[{label:"明文模式",value:"PLAINTEXT"},{label:"兼容模式",value:"COMPATIBLE"},{label:"安全模式",value:"SAFE"}],fieldProps:{defaultValue:"PLAINTEXT",allowClear:!0},rules:[{required:!0}]}),(0,y.jsx)(Y.Z,{label:"客服技能组",name:"workgroupUid",options:null==h||null===(n=h.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.map((function(e){return{label:d(e.nickname),value:e.uid}})),fieldProps:{allowClear:!0},rules:[{required:!0}]}),(0,y.jsx)("p",{children:"注：根据应用类型，到对应的平台获取相关配置信息"})]})})})},se=(0,f.Ue)()((0,h.mW)((0,h.tJ)((0,g.n)((function(e,n){return{wechatAppResult:{data:{content:[]}},currentWechatApp:{uid:"",nickname:"",avatar:"",description:""},insertWechatApp:function(n){e((function(e){e.wechatAppResult.data.content.unshift(n)}))},updateWechatApp:function(n){e((function(e){var t=e.wechatAppResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t[r]=n:console.warn("WechatApp with uid ".concat(n.uid," not found."))}))},deleteWechatApp:function(n){e((function(e){var t=e.wechatAppResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t.splice(r,1):console.warn("WechatApp with uid ".concat(n.uid," not found."))}))},setWechatAppResult:function(t){var r;(e({wechatAppResult:t}),""===n().currentWechatApp.uid)&&((null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentWechatApp:t.data.content[0]}))},setCurrentWechatApp:function(t){var r=n().wechatAppResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var s=[].concat(d()(r.slice(0,a)),[t],d()(r.slice(a+1))),i=u()(u()({},n().wechatAppResult),{},{data:{content:s}});e({wechatAppResult:i,currentWechatApp:t})}else console.warn("WechatApp with the specified uid not found."),e({currentWechatApp:t})},deleteCurrentWechatApp:function(t){var r=n().wechatAppResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({wechatAppResult:u()(u()({},n().wechatAppResult),{},{data:{content:[].concat(d()(r.slice(0,a)),d()(r.slice(a+1)))}})}):console.warn("WechatApp not found in cache:",t),n().currentWechatApp.uid===t&&e({currentWechatApp:{uid:""}})},deleteWechatAppCache:function(){return e({},!0)}}})),{name:p.x1y}))),ie=I()(I()(I()(I()({},p.a4q,"微信公众号"),p.qRy,"微信小程序"),p._oo,"企业微信"),p.rWo,"微信客服"),le=function(){var e=(0,A.useIntl)(),n=(0,v.useRef)(!1),t=(0,_.Z)().translateStringTranct,r=(0,l.Z)().isDarkMode,a=(0,v.useState)(!1),s=i()(a,2),o=s[0],u=s[1],c=(0,v.useState)(!1),d=i()(c,2),p=d[0],f=d[1],h=(0,V.u)((function(e){return e.currentOrg})),g=se((function(e){return{wechatAppResult:e.wechatAppResult,currentWechatApp:e.currentWechatApp,setWechatAppResult:e.setWechatAppResult,insertWechatApp:e.insertWechatApp,setCurrentWechatApp:e.setCurrentWechatApp,deleteCurrentWechatApp:e.deleteCurrentWechatApp}})),m=g.wechatAppResult,j=g.currentWechatApp,b=g.setWechatAppResult,w=g.insertWechatApp,k=g.setCurrentWechatApp,Z=g.deleteCurrentWechatApp,C=N.Z.useModal(),R=i()(C,2),I=R[0],E=R[1],F=function(){var n=S()(M()().mark((function n(t){var r;return M()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete wechatApp",t),P.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),n.next=4,q(t);case 4:r=n.sent,console.log("delete wechatApp response",r),200===r.code?(P.yw.destroy(),P.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),Z(t.uid)):(P.yw.destroy(),P.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),B=function(){var e=S()(M()().mark((function e(){var t,r;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,P.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==h?void 0:h.uid},e.next=8,D(t);case 8:r=e.sent,console.log("getWechatApps",r),200===r.code?(P.yw.destroy(),b(r)):(P.yw.destroy(),P.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){B()}),[]);var K=function(){var e=S()(M()().mark((function e(n){var t;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(n);case 2:t=e.sent,console.log("handleCreateWechatApp response:",t),200===t.code?(w(t.data),u(!1)):P.yw.error(t.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=S()(M()().mark((function e(n){var t;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.uid=null==j?void 0:j.uid,e.next=3,T(n);case 3:t=e.sent,console.log("handleUpdateWechatApp response:",t),200===t.code?(k(t.data),u(!1)):P.yw.error(t.message);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(O.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,y.jsx)(z.ZP,{size:"small",type:"primary",icon:(0,y.jsx)(L.Z,{}),onClick:function(){u(!0),f(!1)},children:e.formatMessage({id:"bind",defaultMessage:"Bind"})}),(0,y.jsx)(z.ZP,{size:"small",onClick:function(){f(!0),u(!0)},disabled:j&&""===j.uid,children:e.formatMessage({id:"edit",defaultMessage:"Edit"})}),(0,y.jsx)(z.ZP,{size:"small",danger:!0,onClick:function(){return n=j,void I.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,y.jsx)(U.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(n.name,"】？"),onOk:function(){F(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})});var n},disabled:j&&""===j.uid,children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,y.jsx)(x.Z,{itemLayout:"horizontal",dataSource:m.data.content,renderItem:function(e,n){return(0,y.jsx)(x.Z.Item,{style:j.uid===(null==e?void 0:e.uid)?{backgroundColor:r?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){k(e)},children:(0,y.jsx)(x.Z.Item.Meta,{style:{marginLeft:"10px"},title:(0,y.jsxs)(y.Fragment,{children:[t(null==e?void 0:e.name)," ",(0,y.jsxs)("span",{style:{color:"#1677ff"},children:["(",ie[null==e?void 0:e.type]||(null==e?void 0:e.type),")"]})]}),description:t(null==e?void 0:e.description)})})}}),o&&(0,y.jsx)(ae,{isEdit:p,open:o,wechatApp:j,onClose:function(){u(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),p?G(e):K(e)}}),E]})},oe=t(32327),ue=t(62673),ce=t(73589),de=t(29266),pe=t(19116),fe=t(38775),he=t(83337),ge=t(34600),me=t(15892),xe=t(54800),ve=t(28977),ye=t.n(ve),je=oe.Z.Text,be=oe.Z.Paragraph,we=I()(I()(I()(I()({},p.a4q,"微信公众号"),p.qRy,"微信小程序"),p._oo,"企业微信"),p.rWo,"微信客服"),Ae=I()(I()(I()(I()({},p.a4q,(0,y.jsx)(he.Z,{})),p.qRy,(0,y.jsx)(ge.Z,{})),p._oo,(0,y.jsx)(me.Z,{})),p.rWo,(0,y.jsx)(xe.Z,{})),ke={PLAINTEXT:"明文模式",COMPATIBLE:"兼容模式",SAFE:"安全模式"},Ze={PLAINTEXT:"orange",COMPATIBLE:"blue",SAFE:"green"},Me=function(){var e=(0,A.useIntl)(),n=se((function(e){return{currentWechatApp:e.currentWechatApp}})).currentWechatApp;return null!=n&&n.uid?(0,y.jsxs)(ue.Z,{title:(0,y.jsxs)($.Z,{children:[Ae[n.type]||(0,y.jsx)(he.Z,{}),(0,y.jsx)("span",{children:n.name||"微信应用详情"}),(0,y.jsx)(de.Z,{color:"blue",children:we[n.type]||n.type})]}),bordered:!1,children:[(0,y.jsxs)(pe.Z,{bordered:!0,column:1,children:[(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"app.uid",defaultMessage:"应用UID"}),children:(0,y.jsx)(je,{copyable:!0,children:n.uid})}),(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"app.name",defaultMessage:"应用名称"}),children:n.name}),(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"app.type",defaultMessage:"应用类型"}),children:(0,y.jsx)(de.Z,{color:"blue",children:we[n.type]||n.type})}),(0,y.jsx)(pe.Z.Item,{label:"AppID/企业ID",children:(0,y.jsx)(je,{copyable:!0,children:n.appId})}),(0,y.jsx)(pe.Z.Item,{label:"AppSecret",children:(0,y.jsx)(je,{copyable:{tooltips:["点击复制","已复制"]},children:n.appSecret})}),(0,y.jsx)(pe.Z.Item,{label:"加密模式",children:(0,y.jsx)(de.Z,{color:Ze[n.encryptMode]||"default",children:ke[n.encryptMode]||n.encryptMode})}),(0,y.jsx)(pe.Z.Item,{label:"Token",children:(0,y.jsx)(je,{copyable:!0,children:n.token||"-"})}),(0,y.jsx)(pe.Z.Item,{label:"EncodingAESKey",children:(0,y.jsx)(je,{copyable:!0,children:n.encodingAesKey||"-"})}),n.description&&(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"description",defaultMessage:"描述"}),children:(0,y.jsx)(be,{children:n.description})}),(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"createdAt",defaultMessage:"创建时间"}),children:n.createdAt?ye()(n.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"})]}),(0,y.jsx)(fe.Z,{}),(0,y.jsx)(oe.Z.Title,{level:5,children:"安全说明"}),(0,y.jsx)(be,{children:(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"请保管好您的微信应用凭证，避免泄露"}),(0,y.jsx)("li",{children:"如果使用安全模式，确保 EncodingAESKey 的安全性"}),(0,y.jsx)("li",{children:"建议定期检查应用访问日志，确保没有异常访问"}),(0,y.jsx)("li",{children:"如发现安全问题，请立即更新凭证并联系我们的支持团队"})]})})]}):(0,y.jsx)(ue.Z,{bordered:!1,children:(0,y.jsx)(ce.Z,{description:"请先在左侧列表选择一个微信应用",image:ce.Z.PRESENTED_IMAGE_SIMPLE})})},Ce=function(e){console.log(e)},Se=[{key:"detail",label:"应用详情",children:(0,y.jsx)(Me,{})}],Re=function(){var e=(0,v.useState)(Se),n=i()(e,2),t=n[0],r=n[1];return(0,v.useEffect)((function(){var e=[].concat(Se);r(e)}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(w.Z,{defaultActiveKey:"agent",items:t,onChange:Ce})})},Ie=a.Z.Sider,Pe=a.Z.Content,We=function(){var e=(0,r.Z)(),n=e.leftSiderStyle,t=e.leftSiderWidth;return(0,y.jsxs)(a.Z,{children:[(0,y.jsx)(Ie,{width:t,style:n,children:(0,y.jsx)(le,{})}),(0,y.jsx)(a.Z,{children:(0,y.jsx)(Pe,{children:(0,y.jsx)(Re,{})})})]})},Ee=t(24170),Te=t(91723),Fe=t(67402),qe=t(71529),Be=function(e){var n=e.platform,t=void 0===n?"react":n,r=(0,A.useIntl)(),a=(0,v.useState)(t),s=i()(a,2),l=s[0],o=s[1],u=l.charAt(0).toUpperCase()+l.slice(1),c="vanilla"===l?"BytedeskVanilla":"Bytedesk".concat(u);return(0,y.jsxs)("div",{style:{maxWidth:"800px"},children:[(0,y.jsxs)("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsx)("h2",{children:(0,y.jsx)("a",{href:"https://github.com/Bytedesk/bytedesk-web",target:"_blank",rel:"noopener noreferrer",children:r.formatMessage({id:"install.guide.github"})})}),(0,y.jsx)(z.ZP,{type:"primary",icon:(0,y.jsx)(qe.Z,{}),href:"".concat("https://www.weiyuai.cn/docs/zh-CN/docs/channel/").concat("vanilla"===l?"web":l),target:"_blank",children:r.formatMessage({id:"install.guide.docs"},{platform:"vanilla"===l?"Web":l.charAt(0).toUpperCase()+l.slice(1)})})]}),(0,y.jsx)(fe.Z,{orientation:"left",children:"选择框架"}),(0,y.jsx)(Fe.ZP.Group,{options:[{label:"React",value:"react"},{label:"Vue",value:"vue"},{label:"Svelte",value:"svelte"},{label:"Vanilla",value:"vanilla"}],value:l,onChange:function(e){o(e.target.value)},optionType:"button",buttonStyle:"solid",style:{marginBottom:"20px"}}),(0,y.jsx)("h2",{children:r.formatMessage({id:"install.guide.steps"})}),(0,y.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,y.jsx)("h3",{children:r.formatMessage({id:"install.guide.step1.title"})}),(0,y.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"npm install bytedesk-web\n# ".concat(r.formatMessage({id:"install.guide.step1.or"}),"\nyarn add bytedesk-web")})]}),(0,y.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,y.jsx)("h3",{children:r.formatMessage({id:"install.guide.step2.title"})}),(0,y.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:function(){switch(l){case"react":return"import { BytedeskReact } from 'bytedesk-web/react';\nimport type { BytedeskConfig } from 'bytedesk-web/react';";case"vue":return"import { BytedeskVue } from 'bytedesk-web/vue';\nimport type { BytedeskConfig } from 'bytedesk-web/vue';";case"svelte":return"import { BytedeskSvelte } from 'bytedesk-web/svelte';\nimport type { BytedeskConfig } from 'bytedesk-web/svelte';";default:return"import { BytedeskVanilla } from 'bytedesk-web';\nimport type { BytedeskConfig } from 'bytedesk-web';"}}()})]}),(0,y.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,y.jsx)("h3",{children:r.formatMessage({id:"install.guide.step3.title"})}),(0,y.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const config: BytedeskConfig = {\n  placement: 'bottom-right',\n  marginBottom: 20,\n  marginSide: 20,\n  chatConfig: {\n    org: 'df_org_uid',  // ".concat(r.formatMessage({id:"install.guide.step3.org.comment"}),"\n    t: \"2\",\n    sid: 'df_rt_uid'    // ").concat(r.formatMessage({id:"install.guide.step3.sid.comment"}),"\n  }\n};")})]}),(0,y.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,y.jsx)("h3",{children:r.formatMessage({id:"install.guide.step4.title"})}),(0,y.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const App = () => {\n  const handleInit = () => {\n    console.log('".concat(function(){switch(l){case"react":return"BytedeskReact";case"vue":return"BytedeskVue";case"svelte":return"BytedeskSvelte";default:return"BytedeskVanilla"}}()," initialized');\n  };\n\n  return (\n    <div>\n      <").concat(c," {...config} onInit={handleInit} />\n      <button onClick={() => (window as any).bytedesk?.showChat()}>\n        ").concat(r.formatMessage({id:"install.guide.step4.open.chat"}),"\n      </button>\n    </div>\n  );\n};")})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{children:r.formatMessage({id:"install.guide.step5.title"})}),(0,y.jsxs)("ul",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px",lineHeight:"1.6"},children:[(0,y.jsxs)("li",{children:[(0,y.jsx)("code",{children:"(window as any).bytedesk?.showChat()"})," - ",r.formatMessage({id:"install.guide.step5.show"})]}),(0,y.jsxs)("li",{children:[(0,y.jsx)("code",{children:"(window as any).bytedesk?.hideChat()"})," - ",r.formatMessage({id:"install.guide.step5.hide"})]})]})]})]})},De=t(1902),Ke=oe.Z.Title,Ve=oe.Z.Text,Ue=function(e){var n=e.channel,t=((0,v.useRef)(!1),(0,_.Z)().translateString),r=m((function(e){return{currentType:e.currentType,setCurrentType:e.setCurrentType}})),a=r.currentType,s=r.setCurrentType,l=(0,V.u)((function(e){return e.currentOrg})),o=[{label:"一对一",value:p.Njn},{label:"技能组",value:p.aZD}],u=(0,De.E)((function(e){return{agentResult:e.agentResult,currentAgent:e.currentAgent,setAgentResult:e.setAgentResult,setCurrentAgent:e.setCurrentAgent}})),c=u.agentResult,d=u.currentAgent,f=u.setAgentResult,h=u.setCurrentAgent,g=(0,v.useState)([]),x=i()(g,2),j=x[0],b=x[1],w=(0,H.$)((function(e){return{workgroupResult:e.workgroupResult,currentWorkgroup:e.currentWorkgroup,setWorkgroupResult:e.setWorkgroupResult,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=w.workgroupResult,k=w.currentWorkgroup,Z=w.setWorkgroupResult,C=w.setCurrentWorkgroup,R=(0,v.useState)(null==d?void 0:d.uid),I=i()(R,2),W=I[0],E=I[1],T=(0,v.useState)(null==k?void 0:k.uid),F=i()(T,2),q=F[0],B=F[1],D=(0,v.useState)([]),K=i()(D,2),U=K[0],L=K[1],N=function(){var e=S()(M()().mark((function e(){var n,r,a;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:null==l?void 0:l.uid},e.next=4,(0,Ee._t)(n);case 4:r=e.sent,console.log("queryAgentsByOrg: ",r),200===r.code?(P.yw.destroy(),f(r),r.data.content.length>0&&(h(r.data.content[0]),E(r.data.content[0].uid)),a=[],r.data.content.forEach((function(e){var n={label:t(e.nickname),value:e.uid};a.push(n)})),b(a)):(P.yw.destroy(),P.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=S()(M()().mark((function e(){var n,r,a;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:null==l?void 0:l.uid},e.next=4,(0,G.LE)(n);case 4:r=e.sent,console.log("getWorkgroups",r),200===r.code?(P.yw.destroy(),Z(r),r.data.content.length>0&&(C(r.data.content[0]),B(r.data.content[0].uid)),a=[],r.data.content.forEach((function(e){var n={label:t(e.nickname),value:e.uid};a.push(n)})),L(a)):(P.yw.destroy(),P.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){N(),O()}),[a]);var z=["web","npm","ios","android","flutter","uniapp"].includes((null==n?void 0:n.name)||"");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Fe.ZP.Group,{onChange:function(e){console.log("radio type checked:".concat(e.target.value)),s(e.target.value)},options:o,defaultValue:a,optionType:"button",buttonStyle:"solid"}),(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),a===p.Njn&&(null==d?void 0:d.uid)&&(0,y.jsx)(Fe.ZP.Group,{onChange:function(e){console.log("radio agent checked:".concat(e.target.value));var n=c.data.content.find((function(n){return n.uid===e.target.value}));h(n)},options:j,defaultValue:W,optionType:"button",buttonStyle:"solid"}),a===p.aZD&&(null==d?void 0:d.uid)&&(0,y.jsx)(Fe.ZP.Group,{onChange:function(e){console.log("radio workgroup checked:".concat(e.target.value));var n=A.data.content.find((function(n){return n.uid===e.target.value}));C(n)},options:U,defaultValue:q,optionType:"button",buttonStyle:"solid"}),(0,y.jsx)(fe.Z,{}),(0,y.jsx)(Ke,{level:5,children:"组织orgUid"}),(0,y.jsx)(Ve,{code:!0,copyable:!0,children:null==l?void 0:l.uid}),(0,y.jsx)(Ke,{level:5,children:"一对一当前客服Uid"}),(0,y.jsx)(Ve,{code:!0,copyable:!0,children:null==d?void 0:d.uid}),(0,y.jsx)(Ke,{level:5,children:"当前技能组Uid"}),(0,y.jsx)(Ve,{code:!0,copyable:!0,children:null==k?void 0:k.uid}),(0,y.jsx)(fe.Z,{}),z&&("web"===(null==n?void 0:n.name)?(0,y.jsx)(Te.Z,{type:p.aZD}):"npm"===(null==n?void 0:n.name)?(0,y.jsx)(Be,{}):null)]})};function Le(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/query/org",{method:"GET",params:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return ze.apply(this,arguments)}function ze(){return(ze=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/create",{method:"POST",data:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/update",{method:"POST",data:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=S()(M()().mark((function e(n){return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/delete",{method:"POST",data:u()(u()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je=(0,f.Ue)()((0,h.mW)((0,h.tJ)((0,g.n)((function(e,n){return{appResult:{data:{content:[]}},currentApp:{uid:"",name:"",appPlatform:"",description:""},insertApp:function(n){e((function(e){e.appResult.data.content.unshift(n)}))},updateApp:function(n){e((function(e){var t=e.appResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t[r]=n:console.warn("App with uid ".concat(n.uid," not found."))}))},deleteApp:function(n){e((function(e){var t=e.appResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t.splice(r,1):console.warn("App with uid ".concat(n.uid," not found."))}))},setAppResult:function(t){var r;(e({appResult:t}),""===n().currentApp.uid)&&((null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentApp:t.data.content[0]}))},setCurrentApp:function(t){var r=n().appResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var s=[].concat(d()(r.slice(0,a)),[t],d()(r.slice(a+1))),i=u()(u()({},n().appResult),{},{data:{content:s}});e({appResult:i,currentApp:t})}else e({currentApp:t})},deleteCurrentApp:function(t){var r=n().appResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({appResult:u()(u()({},n().appResult),{},{data:{content:[].concat(d()(r.slice(0,a)),d()(r.slice(a+1)))}})}):console.warn("App not found in cache:",t),n().currentApp.uid===t&&e({currentApp:{uid:""}})},deleteAppCache:function(){return e({},!0)}}})),{name:p.WJP}))),Ye=t(32350),Qe=function(e){var n=e.open,t=e.isEdit,r=e.app,a=e.onClose,s=e.onSubmit,l=(0,A.useIntl)(),o=X.A.useForm(),c=i()(o,1)[0],d=(0,V.u)((function(e){return e.currentOrg})),f=[{label:"Android",value:p.XCo},{label:"iOS",value:p.wTN},{label:"Flutter",value:p.oLY},{label:"UniApp",value:p.c7m},{label:"QuickApp",value:p.Cy5},{label:"Other",value:p.AJd}];return(0,v.useEffect)((function(){n&&t&&r?c.setFieldsValue({name:r.name,platform:r.appPlatform,appKey:r.appKey,appPackage:r.appPackage,description:r.description}):c.resetFields()}),[n,t,r,c]),(0,y.jsx)(Q.Z,{title:t?l.formatMessage({id:"edit",defaultMessage:"编辑应用"}):l.formatMessage({id:"add",defaultMessage:"添加应用"}),width:400,open:n,onClose:a,maskClosable:!1,footer:(0,y.jsxs)("div",{style:{textAlign:"right"},children:[(0,y.jsx)(z.ZP,{onClick:a,style:{marginRight:8},children:l.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,y.jsx)(z.ZP,{onClick:function(){c.validateFields().then((function(e){var n=u()(u()({},e),{},{orgUid:null==d?void 0:d.uid,uid:t?r.uid:void 0});s(n)}))},type:"primary",children:l.formatMessage({id:"confirm",defaultMessage:"确定"})})]}),children:(0,y.jsxs)(X.A,{form:c,layout:"vertical",submitter:!1,children:[(0,y.jsx)(J.Z,{name:"name",label:l.formatMessage({id:"app.name",defaultMessage:"应用名称"}),rules:[{required:!0,message:l.formatMessage({id:"app.name.required",defaultMessage:"请输入应用名称"})}],placeholder:l.formatMessage({id:"app.name.placeholder",defaultMessage:"请输入应用名称"})}),(0,y.jsx)(Y.Z,{name:"appPlatform",label:l.formatMessage({id:"app.platform",defaultMessage:"平台类型"}),rules:[{required:!0,message:l.formatMessage({id:"app.platform.required",defaultMessage:"请选择平台类型"})}],placeholder:l.formatMessage({id:"app.platform.placeholder",defaultMessage:"请选择平台类型"}),options:f}),(0,y.jsx)(J.Z,{name:"appPackage",label:l.formatMessage({id:"app.package",defaultMessage:"包名"}),rules:[{required:!0,message:l.formatMessage({id:"app.package.required",defaultMessage:"请输入包名"})}],placeholder:l.formatMessage({id:"app.package.placeholder",defaultMessage:"请输入包名"})}),(0,y.jsx)(J.Z,{name:"appKey",label:"App Key",placeholder:l.formatMessage({id:"app.appKey.placeholder",defaultMessage:"请输入App Key"}),fieldProps:{addonAfter:(0,y.jsx)(z.ZP,{type:"text",size:"small",onClick:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",t=0;t<16;t++)n+=e.charAt(Math.floor(Math.random()*e.length));c.setFieldsValue({appKey:n})},children:"随机生成"})}}),(0,y.jsx)(J.Z,{name:"appPackage",label:"Package Name",hidden:"android"!==c.getFieldValue("platform"),placeholder:l.formatMessage({id:"app.packageName.placeholder",defaultMessage:"请输入Android Package Name"})}),(0,y.jsx)(Ye.Z,{name:"description",label:l.formatMessage({id:"description",defaultMessage:"描述"}),placeholder:l.formatMessage({id:"description.placeholder",defaultMessage:"请输入描述信息"}),fieldProps:{rows:4}})]})})},$e=function(){var e=(0,A.useIntl)(),n=(0,v.useRef)(!1),t=(0,_.Z)().translateStringTranct,r=(0,l.Z)().isDarkMode,a=(0,v.useState)(!1),s=i()(a,2),o=s[0],u=s[1],c=(0,v.useState)(!1),d=i()(c,2),p=d[0],f=d[1],h=(0,V.u)((function(e){return e.currentOrg})),g=Je((function(e){return{appResult:e.appResult,currentApp:e.currentApp,setAppResult:e.setAppResult,insertApp:e.insertApp,setCurrentApp:e.setCurrentApp,deleteCurrentApp:e.deleteCurrentApp}})),m=g.appResult,j=g.currentApp,b=g.setAppResult,w=g.insertApp,k=g.setCurrentApp,Z=g.deleteCurrentApp,C=N.Z.useModal(),R=i()(C,2),I=R[0],W=R[1],E=function(){var n=S()(M()().mark((function n(t){var r;return M()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete app",t),P.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"正在删除"})),n.next=4,He(t);case 4:r=n.sent,console.log("delete app response",r),200===r.code?(P.yw.destroy(),P.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"删除成功"})),Z(t.uid)):(P.yw.destroy(),P.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),T=function(){var e=S()(M()().mark((function e(){var t,r;return M()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,P.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==h?void 0:h.uid},e.next=8,Le(t);case 8:r=e.sent,console.log("getApps",r),200===r.code?(P.yw.destroy(),b(r)):(P.yw.destroy(),P.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){T()}),[]);var F=function(){var n=S()(M()().mark((function n(t){var r;return M()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Oe(t);case 2:r=n.sent,console.log("handleCreateApp response:",r),200===r.code?(w(r.data),u(!1),P.yw.success(e.formatMessage({id:"app.create.success",defaultMessage:"应用创建成功"}))):P.yw.error(r.message);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),q=function(){var n=S()(M()().mark((function n(t){var r;return M()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.uid=null==j?void 0:j.uid,n.next=3,_e(t);case 3:r=n.sent,console.log("handleUpdateApp response:",r),200===r.code?(k(r.data),u(!1),P.yw.success(e.formatMessage({id:"app.update.success",defaultMessage:"应用更新成功"}))):P.yw.error(r.message);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(O.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,y.jsx)(z.ZP,{size:"small",type:"primary",icon:(0,y.jsx)(L.Z,{}),onClick:function(){u(!0),f(!1)},children:e.formatMessage({id:"create",defaultMessage:"新建"})}),(0,y.jsx)(z.ZP,{size:"small",onClick:function(){f(!0),u(!0)},disabled:""===(null==j?void 0:j.uid),children:e.formatMessage({id:"edit",defaultMessage:"编辑"})}),(0,y.jsx)(z.ZP,{size:"small",danger:!0,onClick:function(){return function(n){I.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,y.jsx)(U.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"确定删除"}),"【").concat(n.name,"】？"),onOk:function(){E(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(j)},disabled:""===(null==j?void 0:j.uid),children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"删除"})})]}),(0,y.jsx)(x.Z,{itemLayout:"horizontal",dataSource:m.data.content,renderItem:function(e,n){return(0,y.jsx)(x.Z.Item,{style:j.uid===(null==e?void 0:e.uid)?{backgroundColor:r?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){k(e)},children:(0,y.jsx)(x.Z.Item.Meta,{style:{marginLeft:"10px"},title:(0,y.jsxs)(y.Fragment,{children:[t(null==e?void 0:e.name)," ",(0,y.jsxs)("span",{style:{color:"#1677ff"},children:["(",t(null==e?void 0:e.appPlatform),")"]})]}),description:t(null==e?void 0:e.description)})})}}),o&&(0,y.jsx)(Qe,{isEdit:p,open:o,app:j,onClose:function(){u(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),p?q(e):F(e)}}),W]})},en=t(2523),nn=t(48006),tn=t(40795),rn=oe.Z.Text,an=oe.Z.Paragraph,sn={android:(0,y.jsx)(en.Z,{}),ios:(0,y.jsx)(nn.Z,{}),flutter:(0,y.jsx)(tn.Z,{}),uniapp:(0,y.jsx)(ge.Z,{})},ln={android:"Android",ios:"iOS",flutter:"Flutter",uniapp:"UniApp"},on=function(){var e=(0,A.useIntl)(),n=Je().currentApp;return null!=n&&n.uid?(0,y.jsxs)(ue.Z,{title:(0,y.jsxs)($.Z,{children:[sn[n.appPlatform]||(0,y.jsx)(tn.Z,{}),(0,y.jsx)("span",{children:n.name||"应用详情"}),(0,y.jsx)(de.Z,{color:"blue",children:ln[n.appPlatform]||n.appPlatform})]}),bordered:!1,children:[(0,y.jsxs)(pe.Z,{bordered:!0,column:1,children:[(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"app.uid",defaultMessage:"应用UID"}),children:(0,y.jsx)(rn,{copyable:!0,children:n.uid})}),(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"app.name",defaultMessage:"应用名称"}),children:n.name}),n.appKey&&(0,y.jsx)(pe.Z.Item,{label:"App Key",children:(0,y.jsx)(rn,{copyable:!0,children:n.appKey})}),"android"===n.appPlatform&&n.appPackage&&(0,y.jsx)(pe.Z.Item,{label:"Package Name",children:n.appPackage}),n.description&&(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"description",defaultMessage:"描述"}),children:(0,y.jsx)(an,{children:n.description})}),(0,y.jsx)(pe.Z.Item,{label:e.formatMessage({id:"createdAt",defaultMessage:"创建时间"}),children:n.createdAt})]}),(0,y.jsx)(fe.Z,{}),(0,y.jsx)(oe.Z.Title,{level:5,children:"安全说明"}),(0,y.jsx)(an,{children:(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"请保管好您的应用凭证（App Key 等），避免泄露"}),(0,y.jsx)("li",{children:"建议定期检查应用访问日志，确保没有异常访问"}),(0,y.jsx)("li",{children:"如发现安全问题，请立即更新凭证并联系我们的支持团队"})]})})]}):(0,y.jsx)(ue.Z,{bordered:!1,children:(0,y.jsx)(ce.Z,{description:"请先选择或创建一个应用",image:ce.Z.PRESENTED_IMAGE_SIMPLE})})},un=t(69079),cn=t(72608),dn=oe.Z.Title,pn=oe.Z.Paragraph,fn=oe.Z.Text,hn=(oe.Z.Link,w.Z.TabPane,{ANDROID:"https://github.com/Bytedesk/bytedesk-android",IOS:"https://github.com/Bytedesk/bytedesk-swift",FLUTTER:"https://github.com/Bytedesk/bytedesk-flutter",UNIAPP:"https://github.com/Bytedesk/bytedesk-uniapp"}),gn=function(){(0,A.useIntl)();var e=Je().currentApp,n=(0,V.u)((function(e){return e.currentOrg}));if(null==e||!e.uid)return(0,y.jsx)(ue.Z,{bordered:!1,children:(0,y.jsx)(ce.Z,{description:"请先选择或创建一个应用",image:ce.Z.PRESENTED_IMAGE_SIMPLE})});return(0,y.jsxs)(ue.Z,{title:"集成指南",bordered:!1,extra:(0,y.jsxs)($.Z,{children:[(0,y.jsx)(z.ZP,{icon:(0,y.jsx)(un.Z,{}),onClick:function(){var n=e.appPlatform,t=hn[n];t?window.open(t,"_blank"):cn.ZP.info("该平台暂无GitHub仓库链接")},children:"查看源码"}),(0,y.jsx)(z.ZP,{icon:(0,y.jsx)(qe.Z,{}),onClick:function(){window.open("https://www.weiyuai.cn/docs/zh-CN/docs/category/channel","_blank")},children:"查看文档"})]}),children:[(0,y.jsxs)(dn,{level:4,children:["集成 ",e.name," (",e.appPlatform,")"]}),(0,y.jsxs)(pn,{children:["以下是将客服功能集成到 ",e.name," 应用的步骤说明。请按照指南完成配置，使用提供的App Key和其他凭证进行初始化。"]}),(0,y.jsx)(fe.Z,{}),(0,y.jsx)(dn,{level:5,children:"1. 基本配置"}),(0,y.jsx)(pn,{children:(0,y.jsxs)("ul",{children:[e.appKey&&(0,y.jsxs)("li",{children:[(0,y.jsx)(fn,{strong:!0,children:"App Key:"})," ",(0,y.jsx)(fn,{copyable:!0,children:e.appKey})]}),(0,y.jsxs)("li",{children:[(0,y.jsx)(fn,{strong:!0,children:"组织ID:"})," ",(0,y.jsx)(fn,{copyable:!0,children:null==n?void 0:n.uid})]})]})}),(0,y.jsx)(fe.Z,{}),(0,y.jsx)(pn,{type:"secondary",children:"如果在集成过程中遇到任何问题，请联系技术支持团队：270580156@qq.com"})]})},mn=function(e){console.log(e)},xn=[{key:"details",label:"应用详情",children:(0,y.jsx)(on,{})},{key:"integration",label:"集成指南",children:(0,y.jsx)(gn,{})}],vn=function(){var e=(0,v.useState)([]),n=i()(e,2),t=n[0],r=n[1];Je((function(e){return{currentApp:e.currentApp}})).currentApp;return(0,v.useEffect)((function(){var e=[].concat(xn);r(e)}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(w.Z,{defaultActiveKey:"details",items:t,onChange:mn})})},yn=a.Z.Sider,jn=a.Z.Content,bn=function(){var e=(0,r.Z)(),n=e.leftSiderStyle,t=e.leftSiderWidth;return(0,y.jsxs)(a.Z,{children:[(0,y.jsx)(yn,{width:t,style:n,children:(0,y.jsx)($e,{})}),(0,y.jsx)(a.Z,{children:(0,y.jsx)(jn,{children:(0,y.jsx)(vn,{})})})]})},wn=function(e){var n=e.channel,t="web"===(null==n?void 0:n.name)||"npm"===(null==n?void 0:n.name);return(0,y.jsxs)("div",{children:[t&&(0,y.jsx)(Ue,{channel:n}),"app"===(null==n?void 0:n.name)&&(0,y.jsx)(bn,{}),"wechat-app"===(null==n?void 0:n.name)&&(0,y.jsx)(We,{}),"douyin"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"xiaohongshu"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"baidu"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"weibo"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"pdd"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"jd"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"qianniu"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"doudian"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"whatsapp"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"telegram"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"facebook"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"line"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"shopify"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"lazada"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"wordpress"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"woocommerce"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"opencart"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"magento"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"prestashop"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"dify"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{}),"coze"===(null==n?void 0:n.name)&&(0,y.jsx)(k,{})]})},An=function(){var e=(0,v.useState)(""),n=i()(e,2),t=n[0],r=n[1],a=(0,v.useState)([]),s=i()(a,2),l=s[0],o=s[1],u=m().currentChannel;(0,v.useEffect)((function(){u&&c(u)}),[u]);var c=function(e){var n=e.name;-1===l.findIndex((function(e){return e.key===n}))&&o([].concat(d()(l),[{label:e.nickname,key:n,children:(0,y.jsx)(wn,{channel:e}),channelInfo:e,closable:!0}])),r(n)};return(0,y.jsx)(w.Z,{hideAdd:!0,onChange:function(e){r(e)},activeKey:t,type:"editable-card",onEdit:function(e,n){"remove"===n&&function(e){var n=l.findIndex((function(n){return n.key===e})),a=l.filter((function(n){return n.key!==e}));if(a.length&&e===t){var s=a[n===a.length?n-1:n].key;r(s)}o(a)}(e)},items:l})},kn=a.Z.Sider,Zn=a.Z.Content,Mn=function(){var e=(0,r.Z)(),n=e.leftSiderStyle,t=e.contentStyle;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(a.Z,{children:[(0,y.jsx)(kn,{style:n,children:(0,y.jsx)(b,{})}),(0,y.jsx)(a.Z,{children:(0,y.jsx)(Zn,{style:t,children:(0,y.jsx)(An,{})})})]})})}}}]);