"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3868],{32045:function(e,t,r){r.d(t,{XS:function(){return u},k4:function(){return f},uu:function(){return v},yr:function(){return h}});var a=r(90819),n=r.n(a),o=r(73193),s=r.n(o),i=r(89933),d=r.n(i),c=r(55735),l=r(30921);function u(e){return g.apply(this,arguments)}function g(){return(g=d()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/query/org",{method:"GET",params:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=d()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/create",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=d()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/update",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=d()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/category/delete",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},14336:function(e,t,r){r.r(t),r.d(t,{default:function(){return X}});var a=r(8247),n=r(21182),o=r(73193),s=r.n(o),i=r(84176),d=r.n(i),c=r(90819),l=r.n(c),u=r(89933),g=r.n(u),f=r(45332),p=r.n(f),h=r(86803),m=r(30921);function v(e){return x.apply(this,arguments)}function x(){return(x=g()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/thread/invite/query/org",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=r(76750),M=r(40612),b=r(55735),S=r(44521),k=r(11090),w=r(81947),C=r(53530),I=r(29266),j=r(75365),T=r(44194),A=r(28977),E=r.n(A),F=r(31549),N=["current","pageSize"],O={INVITE_PENDING:{text:"invite.status.pending",defaultMessage:"邀请待处理",color:"blue"},INVITE_ACCEPTED:{text:"invite.status.accepted",defaultMessage:"接受邀请",color:"green"},INVITE_REJECTED:{text:"invite.status.rejected",defaultMessage:"拒绝邀请",color:"red"},INVITE_TIMEOUT:{text:"invite.status.timeout",defaultMessage:"邀请超时",color:"orange"},INVITE_CANCELED:{text:"invite.status.canceled",defaultMessage:"取消邀请",color:"gray"}},R=function(){var e=(0,m.useIntl)(),t=(0,T.useRef)(),r=(0,T.useState)(1),a=p()(r,2),n=a[0],o=a[1],i=(0,T.useState)(10),c=p()(i,2),u=c[0],f=c[1],x=(0,M.u)((function(e){return e.currentOrg})),A=(0,y.Z)().translateString,R=C.Z.useModal(),Y=p()(R,2),$=(Y[0],Y[1]),P=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,F.jsx)(m.FormattedMessage,{id:"sender",defaultMessage:"Sender"}),dataIndex:"sender",copyable:!0,render:function(e,t,r,a){var n;return A(null===(n=t.sender)||void 0===n?void 0:n.nickname)}},{title:(0,F.jsx)(m.FormattedMessage,{id:"receiver",defaultMessage:"Receiver"}),dataIndex:"receiverNickname",copyable:!0,render:function(e,t,r,a){var n;return A(null===(n=t.receiver)||void 0===n?void 0:n.nickname)}},{title:(0,F.jsx)(m.FormattedMessage,{id:"note",defaultMessage:"Note"}),dataIndex:"note",hideInSearch:!0,copyable:!0},{title:(0,F.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0,copyable:!0,render:function(e,t){var r=t.status,a=O[r]||{text:"invite.status.unknown",defaultMessage:"未知状态",color:"default"};return(0,F.jsx)(I.Z,{color:a.color,children:(0,F.jsx)(m.FormattedMessage,{id:a.text,defaultMessage:a.defaultMessage})})}},{title:(0,F.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return E()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],H=[].concat(P,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,fixed:"right",render:function(t,r,a,n){return[(0,F.jsx)("a",{onClick:function(){Z(r)},children:e.formatMessage({id:"view",defaultMessage:"View"})},"editable")]}}]),Z=function(e){var t,r;console.log("handleShowChatHistory",e);var a={chatConfig:{org:null==x?void 0:x.uid,t:b.IUl,sid:null==e||null===(t=e.thread)||void 0===t?void 0:t.uid}};null===(r=window.bytedesk)||void 0===r||r.showChat(a)},z=function(){var e=g()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,u),t=localStorage.getItem(b.LA8),window.open((0,S.kG)()+"/api/v1/thread/invite/export?"+new URLSearchParams({orgUid:(null==x?void 0:x.uid)||"",pageNumber:String(n-1),pageSize:String(u),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(w.Z,{columns:H,actionRef:t,cardBordered:!0,request:function(){var e=g()(l()().mark((function e(t,r,a){var n,i,c,u,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,r,a),n=t.current,i=t.pageSize,c=d()(t,N),o(n),f(i),u=s()({pageNumber:n-1,pageSize:i,orgUid:null==x?void 0:x.uid},c),e.next=7,v(u);case 7:return g=e.sent,console.log("getAllThreadInvites response:",g,u),200===g.code||h.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"thread.tab.invite",defaultMessage:"ThreadInvite"}),toolBarRender:function(){return[(0,F.jsx)(j.ZP,{icon:(0,F.jsx)(k.Z,{}),type:"primary",onClick:z,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),$]})};function Y(e){return $.apply(this,arguments)}function $(){return($=g()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/thread/transfer/query/org",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=["current","pageSize"],H={TRANSFER_PENDING:{text:"transfer.status.pending",defaultMessage:"转接待处理",color:"blue"},TRANSFER_ACCEPTED:{text:"transfer.status.accepted",defaultMessage:"接受转接",color:"green"},TRANSFER_REJECTED:{text:"transfer.status.rejected",defaultMessage:"拒绝转接",color:"red"},TRANSFER_TIMEOUT:{text:"transfer.status.timeout",defaultMessage:"转接超时",color:"orange"},TRANSFER_CANCELED:{text:"transfer.status.canceled",defaultMessage:"取消转接",color:"gray"}},Z={AGENT_TO_AGENT:{text:"transfer.type.agent_to_agent",defaultMessage:"人工转人工",color:"purple"},ROBOT_TO_AGENT:{text:"transfer.type.robot_to_agent",defaultMessage:"机器人转人工",color:"cyan"}},z=function(){var e=(0,m.useIntl)(),t=(0,T.useRef)(),r=(0,T.useState)(1),a=p()(r,2),n=a[0],o=a[1],i=(0,T.useState)(10),c=p()(i,2),u=c[0],f=c[1],v=(0,M.u)((function(e){return e.currentOrg})),x=(0,y.Z)().translateString,A=C.Z.useModal(),N=p()(A,2),O=(N[0],N[1]),R=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,F.jsx)(m.FormattedMessage,{id:"sender",defaultMessage:"Sender"}),dataIndex:"senderNickname",copyable:!0,render:function(e,t,r,a){var n;return x(null===(n=t.sender)||void 0===n?void 0:n.nickname)}},{title:(0,F.jsx)(m.FormattedMessage,{id:"receiver",defaultMessage:"Receiver"}),dataIndex:"receiverNickname",copyable:!0,render:function(e,t,r,a){var n;return x(null===(n=t.receiver)||void 0===n?void 0:n.nickname)}},{title:(0,F.jsx)(m.FormattedMessage,{id:"note",defaultMessage:"Note"}),dataIndex:"note",hideInSearch:!0,copyable:!0},{title:(0,F.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0,copyable:!0,render:function(e,t){var r=t.status,a=H[r]||{text:"transfer.status.unknown",defaultMessage:"未知状态",color:"default"};return(0,F.jsx)(I.Z,{color:a.color,children:(0,F.jsx)(m.FormattedMessage,{id:a.text,defaultMessage:a.defaultMessage})})}},{title:(0,F.jsx)(m.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0,copyable:!0,render:function(e,t){var r=t.type,a=Z[r]||{text:"transfer.type.unknown",defaultMessage:"未知类型",color:"default"};return(0,F.jsx)(I.Z,{color:a.color,children:(0,F.jsx)(m.FormattedMessage,{id:a.text,defaultMessage:a.defaultMessage})})}},{title:(0,F.jsx)(m.FormattedMessage,{id:"transfer.transferAt",defaultMessage:"转接时间"}),dataIndex:"transferAt",hideInSearch:!0,render:function(e,t){return t.transferAt?E()(t.transferAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,F.jsx)(m.FormattedMessage,{id:"transfer.acceptAt",defaultMessage:"接受时间"}),dataIndex:"acceptAt",hideInSearch:!0,render:function(e,t){return t.acceptAt?E()(t.acceptAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,F.jsx)(m.FormattedMessage,{id:"transfer.cancelAt",defaultMessage:"取消时间"}),dataIndex:"cancelAt",hideInSearch:!0,render:function(e,t){return t.cancelAt?E()(t.cancelAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,F.jsx)(m.FormattedMessage,{id:"transfer.rejectAt",defaultMessage:"拒绝时间"}),dataIndex:"rejectAt",hideInSearch:!0,render:function(e,t){return t.rejectAt?E()(t.rejectAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,F.jsx)(m.FormattedMessage,{id:"transfer.expireAt",defaultMessage:"超时时间"}),dataIndex:"expireAt",hideInSearch:!0,render:function(e,t){return t.expireAt?E()(t.expireAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,F.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return E()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],$=[].concat(R,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,fixed:"right",render:function(t,r,a,n){return[(0,F.jsx)("a",{onClick:function(){z(r)},children:e.formatMessage({id:"view",defaultMessage:"View"})},"editable")]}}]),z=function(e){var t,r;console.log("handleShowChatHistory",e);var a={chatConfig:{org:null==v?void 0:v.uid,t:b.IUl,sid:null==e||null===(t=e.thread)||void 0===t?void 0:t.uid}};null===(r=window.bytedesk)||void 0===r||r.showChat(a)},B=function(){var e=g()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,u),t=localStorage.getItem(b.LA8),window.open((0,S.kG)()+"/api/v1/thread/transfer/export?"+new URLSearchParams({orgUid:(null==v?void 0:v.uid)||"",pageNumber:String(n-1),pageSize:String(u),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(w.Z,{columns:$,actionRef:t,cardBordered:!0,scroll:{x:"max-content"},request:function(){var e=g()(l()().mark((function e(t,r,a){var n,i,c,u,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,r,a),n=t.current,i=t.pageSize,c=d()(t,P),o(n),f(i),u=s()({pageNumber:n-1,pageSize:i,orgUid:null==v?void 0:v.uid},c),e.next=7,Y(u);case 7:return g=e.sent,console.log("getAllThreadTransfers response:",g,u),200===g.code||h.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"thread.tab.transfer",defaultMessage:"ThreadTransfer"}),toolBarRender:function(){return[(0,F.jsx)(j.ZP,{icon:(0,F.jsx)(k.Z,{}),type:"primary",onClick:B,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),O]})},B=r(3849);function D(e){return q.apply(this,arguments)}function q(){return(q=g()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/thread/summary/query/org",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=r(32045),_=["current","pageSize"],L=function(){var e=(0,m.useIntl)(),t=(0,T.useRef)(),r=(0,T.useState)(1),a=p()(r,2),n=a[0],o=a[1],i=(0,T.useState)(10),c=p()(i,2),u=c[0],f=c[1],v=(0,M.u)((function(e){return e.currentOrg})),x=(0,y.Z)().translateString,A=C.Z.useModal(),N=p()(A,2),O=(N[0],N[1]),R=(0,T.useState)([]),Y=p()(R,2),$=(Y[0],Y[1]),P=(0,T.useState)({}),H=p()(P,2),Z=H[0],z=H[1],q=function(){var t=g()(l()().mark((function t(){var r,a,n,o,s;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={pageNumber:0,pageSize:100,type:b.ics,orgUid:null==v?void 0:v.uid},t.next=4,(0,U.XS)(a);case 4:n=t.sent,console.log("queryCategoriesByOrg response:",n.data,a),200===(null==n?void 0:n.code)&&null!==(r=n.data)&&void 0!==r&&r.content&&(o=n.data.content,$(o),s={},o.forEach((function(e){s[e.uid]=e.name})),z(s)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Fetch categories error:",t.t0),h.yw.error(e.formatMessage({id:"ticket.category.load.error"}));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();(0,T.useEffect)((function(){null!=v&&v.uid&&q()}),[null==v?void 0:v.uid]);var L=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,F.jsx)(m.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"title",copyable:!0},{title:(0,F.jsx)(m.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",copyable:!0},{title:(0,F.jsx)(m.FormattedMessage,{id:"solution",defaultMessage:"Solution"}),dataIndex:"solution",copyable:!0},{title:(0,F.jsx)(m.FormattedMessage,{id:"category",defaultMessage:"Category"}),dataIndex:"categoryUid",hideInSearch:!0,render:function(e,t){var r=Z[t.categoryUid]||t.categoryUid;return x(r)}},{title:(0,F.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0,copyable:!0,render:function(t,r){var a="",n="";switch(r.status){case b.kA8:a="orange",n=e.formatMessage({id:"summary.status.pending",defaultMessage:"待处理"});break;case b.zvK:a="blue",n=e.formatMessage({id:"summary.status.processing",defaultMessage:"处理中"});break;case b.fuK:a="green",n=e.formatMessage({id:"summary.status.resolved",defaultMessage:"已解决"});break;case b.cin:a="gray",n=e.formatMessage({id:"summary.status.closed",defaultMessage:"已关闭"});break;default:a="default",n=t}return(0,F.jsx)(I.Z,{color:a,children:n})}},{title:(0,F.jsx)(m.FormattedMessage,{id:"tags",defaultMessage:"Tags"}),hideInSearch:!0,render:function(e,t){return t.tagList&&Array.isArray(t.tagList)&&0!==t.tagList.length?(0,F.jsx)(B.Z,{size:[0,4],wrap:!0,children:t.tagList.map((function(e){return(0,F.jsx)(I.Z,{color:"blue",children:e},e)}))}):"-"}},{title:(0,F.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return E()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],G=[].concat(L,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,render:function(t,r,a,n){return[(0,F.jsx)("a",{onClick:function(){V(r)},children:e.formatMessage({id:"view",defaultMessage:"View"})},"editable")]}}]),V=function(e){var t;console.log("handleShowChatHistory",e);var r={chatConfig:{org:null==v?void 0:v.uid,t:b.IUl,sid:null==e?void 0:e.threadUid}};null===(t=window.bytedesk)||void 0===t||t.showChat(r)},W=function(){var e=g()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,u),t=localStorage.getItem(b.LA8),window.open((0,S.kG)()+"/api/v1/thread/summary/export?"+new URLSearchParams({orgUid:(null==v?void 0:v.uid)||"",pageNumber:String(n-1),pageSize:String(u),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(w.Z,{columns:G,actionRef:t,cardBordered:!0,request:function(){var e=g()(l()().mark((function e(t,r,a){var n,i,c,u,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,r,a),n=t.current,i=t.pageSize,c=d()(t,_),o(n),f(i),u=s()({pageNumber:n-1,pageSize:i,orgUid:null==v?void 0:v.uid},c),e.next=7,D(u);case 7:return g=e.sent,console.log("queryThreadSummariesByOrg response:",g,u),200===g.code||h.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"thread.tab.summary",defaultMessage:"ThreadSummary"}),toolBarRender:function(){return[(0,F.jsx)(j.ZP,{icon:(0,F.jsx)(k.Z,{}),type:"primary",onClick:W,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),O]})};function G(e){return V.apply(this,arguments)}function V(){return(V=g()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/thread/rating/query/org",{method:"GET",params:s()(s()({},t),{},{client:b.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=["current","pageSize"],K=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,F.jsx)(m.FormattedMessage,{id:"agent",defaultMessage:"Agent"}),dataIndex:"agent",hideInSearch:!0,render:function(e,t,r,a){var n;return null==t||null===(n=t.thread)||void 0===n||null===(n=n.agentProtobuf)||void 0===n?void 0:n.nickname}},{title:(0,F.jsx)(m.FormattedMessage,{id:"user",defaultMessage:"User"}),dataIndex:"user",hideInSearch:!0,render:function(e,t,r,a){var n;return null==t||null===(n=t.thread)||void 0===n||null===(n=n.user)||void 0===n?void 0:n.nickname}},{title:(0,F.jsx)(m.FormattedMessage,{id:"score",defaultMessage:"Score"}),dataIndex:"score"},{title:(0,F.jsx)(m.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"comment",copyable:!0},{title:(0,F.jsx)(m.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return E()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],J=function(){var e=(0,m.useIntl)(),t=(0,T.useRef)(),r=(0,T.useState)(1),a=p()(r,2),n=a[0],o=a[1],i=(0,T.useState)(10),c=p()(i,2),u=c[0],f=c[1],v=(0,M.u)((function(e){return e.currentOrg})),x=[].concat(K,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,render:function(t,r,a,n){return[(0,F.jsx)("a",{onClick:function(){y(r)},children:e.formatMessage({id:"view",defaultMessage:"View"})},"editable")]}}]),y=function(e){var t,r;console.log("handleShowChatHistory",e);var a={chatConfig:{org:null==v?void 0:v.uid,t:b.IUl,sid:null==e||null===(t=e.thread)||void 0===t?void 0:t.uid}};null===(r=window.bytedesk)||void 0===r||r.showChat(a)},C=function(){var e=g()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,u),t=localStorage.getItem(b.LA8),window.open((0,S.kG)()+"/api/v1/thread/rating/export?"+new URLSearchParams({orgUid:(null==v?void 0:v.uid)||"",pageNumber:String(n-1),pageSize:String(u),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(w.Z,{columns:x,actionRef:t,cardBordered:!0,request:function(){var e=g()(l()().mark((function e(t,r,a){var n,i,c,u,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.current,i=t.pageSize,c=d()(t,W),o(n),f(i),u=s()({pageNumber:n-1,pageSize:i,orgUid:null==v?void 0:v.uid},c),e.next=6,G(u);case 6:return g=e.sent,console.log("queryRatesByOrgUid response:",g.data,u),200===g.code||h.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 10:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"评价记录",toolBarRender:function(){return[(0,F.jsx)(j.ZP,{icon:(0,F.jsx)(k.Z,{}),type:"primary",onClick:C,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}})})},X=function(){var e=(0,m.useIntl)(),t=[{key:"thread",label:e.formatMessage({id:"thread.tab.all"}),children:(0,F.jsx)(n.Z,{type:b.Nqz})},{key:"rate",label:e.formatMessage({id:"thread.tab.rate"}),children:(0,F.jsx)(J,{})},{key:"transfer",label:e.formatMessage({id:"thread.tab.transfer"}),children:(0,F.jsx)(z,{})},{key:"invite",label:e.formatMessage({id:"thread.tab.invite"}),children:(0,F.jsx)(R,{})},{key:"summary",label:e.formatMessage({id:"thread.tab.summary"}),children:(0,F.jsx)(L,{})}];return(0,F.jsx)(a.Z,{defaultActiveKey:"thread",items:t})}},29266:function(e,t,r){r.d(t,{Z:function(){return E}});var a=r(44194),n=r(51865),o=r.n(n),s=r(97859),i=r(63125),d=r(80314),c=r(79145),l=r(18011),u=r(37167),g=r(47825),f=r(87471),p=r(88874),h=r(77167),m=r(65759);const v=e=>{const{lineWidth:t,fontSizeIcon:r,calc:a}=e,n=e.fontSizeSM;return(0,h.IX)(e,{tagFontSize:n,tagLineHeight:(0,g.bf)(a(e.lineHeightSM).mul(n).equal()),tagIconSize:a(r).sub(a(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},x=e=>({defaultBg:new f.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var y=(0,m.I$)("Tag",(e=>(e=>{const{paddingXXS:t,lineWidth:r,tagPaddingHorizontal:a,componentCls:n,calc:o}=e,s=o(a).sub(r).equal(),i=o(t).sub(r).equal();return{[n]:Object.assign(Object.assign({},(0,p.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:s,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,g.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${n}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${n}-close-icon`]:{marginInlineStart:i,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${n}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${n}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:s}}),[`${n}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(v(e))),x),M=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};const b=a.forwardRef(((e,t)=>{const{prefixCls:r,style:n,className:s,checked:i,onChange:d,onClick:c}=e,l=M(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:g,tag:f}=a.useContext(u.E_),p=g("tag",r),[h,m,v]=y(p),x=o()(p,`${p}-checkable`,{[`${p}-checkable-checked`]:i},null==f?void 0:f.className,s,m,v);return h(a.createElement("span",Object.assign({},l,{ref:t,style:Object.assign(Object.assign({},n),null==f?void 0:f.style),className:x,onClick:e=>{null==d||d(!i),null==c||c(e)}})))}));var S=b,k=r(85772);var w=(0,m.bk)(["Tag","preset"],(e=>(e=>(0,k.Z)(e,((t,r)=>{let{textColor:a,lightBorderColor:n,lightColor:o,darkColor:s}=r;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:a,background:o,borderColor:n,"&-inverse":{color:e.colorTextLightSolid,background:s,borderColor:s},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(v(e))),x);const C=(e,t,r)=>{const a="string"!=typeof(n=r)?n:n.charAt(0).toUpperCase()+n.slice(1);var n;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${r}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var I=(0,m.bk)(["Tag","status"],(e=>{const t=v(e);return[C(t,"success","Success"),C(t,"processing","Info"),C(t,"error","Error"),C(t,"warning","Warning")]}),x),j=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};const T=a.forwardRef(((e,t)=>{const{prefixCls:r,className:n,rootClassName:g,style:f,children:p,icon:h,color:m,onClose:v,bordered:x=!0,visible:M}=e,b=j(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:S,direction:k,tag:C}=a.useContext(u.E_),[T,A]=a.useState(!0),E=(0,s.Z)(b,["closeIcon","closable"]);a.useEffect((()=>{void 0!==M&&A(M)}),[M]);const F=(0,i.o2)(m),N=(0,i.yT)(m),O=F||N,R=Object.assign(Object.assign({backgroundColor:m&&!O?m:void 0},null==C?void 0:C.style),f),Y=S("tag",r),[$,P,H]=y(Y),Z=o()(Y,null==C?void 0:C.className,{[`${Y}-${m}`]:O,[`${Y}-has-color`]:m&&!O,[`${Y}-hidden`]:!T,[`${Y}-rtl`]:"rtl"===k,[`${Y}-borderless`]:!x},n,g,P,H),z=e=>{e.stopPropagation(),null==v||v(e),e.defaultPrevented||A(!1)},[,B]=(0,d.Z)((0,d.w)(e),(0,d.w)(C),{closable:!1,closeIconRender:e=>{const t=a.createElement("span",{className:`${Y}-close-icon`,onClick:z},e);return(0,c.wm)(e,t,(e=>({onClick:t=>{var r;null===(r=null==e?void 0:e.onClick)||void 0===r||r.call(e,t),z(t)},className:o()(null==e?void 0:e.className,`${Y}-close-icon`)})))}}),D="function"==typeof b.onClick||p&&"a"===p.type,q=h||null,U=q?a.createElement(a.Fragment,null,q,p&&a.createElement("span",null,p)):p,_=a.createElement("span",Object.assign({},E,{ref:t,className:Z,style:R}),U,B,F&&a.createElement(w,{key:"preset",prefixCls:Y}),N&&a.createElement(I,{key:"status",prefixCls:Y}));return $(D?a.createElement(l.Z,{component:"Tag"},_):_)})),A=T;A.CheckableTag=S;var E=A}}]);