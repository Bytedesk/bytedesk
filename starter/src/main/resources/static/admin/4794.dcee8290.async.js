"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4794],{84881:function(e,n,r){var t=r(17082),o=r(73457),a=r(82308),l=r(44194),s=r(63653),i=r(35175),c=r(31549),d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,n){var r=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,g=e.mode,b=e.valueEnum,m=e.request,v=e.showSearch,h=e.options,y=(0,o.Z)(e,d),x=(0,l.useContext)(s.Z);return(0,c.jsx)(i.Z,(0,t.Z)((0,t.Z)({valueEnum:(0,a.h)(b),request:m,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,t.Z)({options:h,mode:g,showSearch:v,getPopupContainer:x.getPopupContainer},r),ref:n,proFieldProps:f},y),{},{children:u}))},f=l.forwardRef((function(e,n){var r=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,g=e.mode,b=e.valueEnum,m=e.request,v=e.options,h=(0,o.Z)(e,u),y=(0,t.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),x=(0,l.useContext)(s.Z);return(0,c.jsx)(i.Z,(0,t.Z)((0,t.Z)({valueEnum:(0,a.h)(b),request:m,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,t.Z)({getPopupContainer:x.getPopupContainer},y),ref:n,proFieldProps:f},h),{},{children:d}))})),g=l.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",n.Z=g},32350:function(e,n,r){var t=r(17082),o=r(73457),a=r(44194),l=r(35175),s=r(31549),i=["fieldProps","proFieldProps"],c=function(e,n){var r=e.fieldProps,a=e.proFieldProps,c=(0,o.Z)(e,i);return(0,s.jsx)(l.Z,(0,t.Z)({ref:n,valueType:"textarea",fieldProps:r,proFieldProps:a},c))};n.Z=a.forwardRef(c)},83139:function(e,n,r){r.d(n,{Z:function(){return z}});var t=r(90819),o=r.n(t),a=r(89933),l=r.n(a),s=r(45332),i=r.n(s),c=r(53530),d=r(9452),u=r(44194),p=r(10154),f=r.n(p),g=r(73193),b=r.n(g),m=r(86803),v=r(76750),h=r(40612),y=r(55735),x=r(69169),k=r(84881),C=r(4499),w=r(32350),P=r(32327),j=r(62673),Z=r(40679),S=r(36605),K=r(31549),E=function(e){var n,r=e.open,t=e.isEdit,a=e.type,s=e.kbase,d=e.onCancel,p=e.onSubmit,g=x.A.useForm(),E=i()(g,1)[0],M=(0,v.Z)().translateString,$=(0,h.u)((function(e){return e.currentOrg})),F=(0,u.useRef)(null),O=(0,u.useState)([]),T=i()(O,2),R=T[0],H=T[1],I=(0,u.useState)({}),N=i()(I,2),z=N[0],B=N[1],q=(0,u.useState)(!1),L=i()(q,2),V=L[0],D=L[1],Q="ollama",A="bge-m3:latest",U=(0,u.useState)((null==s?void 0:s.embeddingProvider)||Q),_=i()(U,2),W=_[0],X=_[1],J=(0,u.useState)((null==s?void 0:s.embeddingModel)||A),G=i()(J,2),Y=G[0],ee=G[1],ne=(0,u.useState)(""),re=i()(ne,2),te=re[0],oe=re[1];(0,u.useEffect)((function(){t?(E.setFieldsValue({name:M(null==s?void 0:s.name)}),E.setFieldsValue({headline:M(null==s?void 0:s.headline)}),E.setFieldsValue({footerHtml:M(null==s?void 0:s.footerHtml)}),E.setFieldsValue({descriptionHtml:M(null==s?void 0:s.descriptionHtml)}),E.setFieldsValue({language:null==s?void 0:s.language}),null!=s&&s.embeddingProvider&&(X(s.embeddingProvider),E.setFieldsValue({embeddingProvider:s.embeddingProvider})),null!=s&&s.embeddingModel&&(ee(s.embeddingModel),E.setFieldsValue({embeddingModel:s.embeddingModel}))):(E.resetFields(),E.setFieldsValue({language:"ZH_CN"}),E.setFieldsValue({embeddingProvider:Q,embeddingModel:A})),r&&setTimeout((function(){var e;null===(e=F.current)||void 0===e||e.focus()}),100)}),[r,t,s]),(0,u.useEffect)((function(){r&&a===y.QPQ&&ae()}),[r,a]),(0,u.useEffect)((function(){if(W&&Y&&z[W]){var e=z[W].find((function(e){return e.value===Y}));e&&oe(e.label)}}),[z,W,Y]);var ae=function(){var e=l()(o()().mark((function e(){var n,r,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={pageNumber:0,pageSize:100,orgUid:null==$?void 0:$.uid,level:y.whQ},e.next=4,(0,S.mK)(n);case 4:r=e.sent,console.log("queryLlmProvidersByOrg: ",r.data,n),200===r.code?(t=r.data.content||[],H(t)):m.yw.error(r.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch providers:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),le=(0,u.useCallback)((function(){}),[]),se=(0,u.useCallback)((function(){D(!1)}),[]),ie=(0,u.useCallback)((function(e,n,r){X(e),ee(n),oe(r),E.setFieldValue("embeddingProvider",e),E.setFieldValue("embeddingModel",n),D(!1)}),[E]),ce=(0,u.useCallback)((function(e,n){B((function(r){return b()(b()({},r),{},f()({},e,n))}))}),[]),de=function(){E.validateFields().then(function(){var e=l()(o()().mark((function e(n){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleSaveDep:",n),r={uid:t?null==s?void 0:s.uid:"",name:n.name,headline:n.headline,descriptionHtml:n.descriptionHtml,footerHtml:n.footerHtml,type:a,language:n.language,embeddingProvider:n.embeddingProvider||Q,embeddingModel:n.embeddingModel||A,orgUid:null==$?void 0:$.uid},p(r);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Failed:",e),m.yw.error("创建知识库失败")}))},ue=function(e){"Enter"===e.key&&de()};return(0,K.jsxs)("div",{children:[(0,K.jsx)(c.Z,{title:"新建知识库",open:r,forceRender:!0,onOk:de,onCancel:d,children:(0,K.jsxs)(x.A,{form:E,submitter:!1,children:[(0,K.jsx)(k.Z,{label:"知识库语言",name:"language",rules:[{required:!0,message:"请选择知识库语言!"}],options:[{label:"简体中文",value:"ZH_CN"},{label:"English",value:"EN"},{label:"繁体中文",value:"ZH_TW"}],fieldProps:{onChange:function(e){console.log("handleLanguageSelect:",e)},placeholder:"请选择知识库语言",allowClear:!0}}),(0,K.jsx)(C.Z,{label:"知识库名称",name:"name",rules:[{required:!0,message:"请输入名称!"}],fieldProps:{onPressEnter:ue,placeholder:"请输入名称",ref:F}}),a===y.VX&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(C.Z,{label:"主标题",name:"headline",rules:[{required:!0,message:"请输入主标题!"}],fieldProps:{onPressEnter:ue,placeholder:"请输入名称"}}),(0,K.jsx)(w.Z,{label:"页脚",name:"footerHtml",rules:[{required:!0,message:"请输入页脚!"}]})]}),(0,K.jsx)(w.Z,{label:"描述",name:"descriptionHtml"}),a===y.QPQ&&(0,K.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,K.jsx)(P.Z.Text,{strong:!0,style:{marginRight:"8px"},children:"嵌入模型选择："}),(0,K.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:"8px"},children:(0,K.jsx)(j.Z,{size:"small",style:{width:"100%",cursor:"pointer",border:"1px solid #d9d9d9"},onClick:le,children:W&&Y?(0,K.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,K.jsxs)("div",{children:[(0,K.jsx)(P.Z.Text,{type:"secondary",children:"供应商："}),(0,K.jsx)(P.Z.Text,{strong:!0,children:M((null===(n=R.find((function(e){return e.name===W})))||void 0===n?void 0:n.nickname)||W)}),(0,K.jsx)("br",{}),(0,K.jsx)(P.Z.Text,{type:"secondary",children:"模型："}),(0,K.jsx)(P.Z.Text,{strong:!0,children:te||Y})]})}):(0,K.jsx)("div",{style:{textAlign:"center"}})})}),(0,K.jsxs)("div",{style:{display:"none"},children:[(0,K.jsx)(k.Z,{name:"embeddingProvider",width:"lg"}),(0,K.jsx)(k.Z,{name:"embeddingModel",width:"lg"})]})]})]})}),a===y.QPQ&&(0,K.jsx)(Z.Z,{visible:V,onCancel:se,onOk:ie,initialProvider:W,initialModel:Y,initialModelLabel:te,providers:R,currentOrgUid:null==$?void 0:$.uid,existingProviderModels:z,onModelsLoaded:ce,allowedModelTypes:[y.xTq]})]})},M=r(27522),$=r(6397),F=r(23864),O=r(30921),T=r(15722),R=r(27487),H=r(75365),I=function(e){var n=e.currentKbase,r=e.handleNewKbase,t=e.handleEditKbase,o=e.showDeleteConfirmModel,a=(0,O.useIntl)();return(0,K.jsx)("div",{children:(0,K.jsxs)(R.Z,{gap:"small",wrap:"wrap",style:{padding:"10px"},children:[(0,K.jsx)(H.ZP,{size:"small",type:"primary",onClick:r,children:a.formatMessage({id:"createKb",defaultMessage:"Create Knowledge Base"})}),""!==(null==n?void 0:n.uid)&&(null==n?void 0:n.uid)!==y.zBg&&(0,K.jsx)(H.ZP,{size:"small",onClick:t,children:a.formatMessage({id:"edit",defaultMessage:"Edit"})}),""!==(null==n?void 0:n.uid)&&(null==n?void 0:n.uid)!==y.zBg&&(0,K.jsx)(H.ZP,{onClick:function(){return o(n)},size:"small",style:{float:"right"},danger:!0,children:a.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})})},N=c.Z.confirm,z=function(e){var n=e.type,r=(0,O.useIntl)(),t=(0,u.useRef)(!1),a=(0,u.useState)(!1),s=i()(a,2),c=s[0],p=s[1],f=(0,F.Z)().isDarkMode,g=(0,v.Z)().translateString,b=(0,h.u)((function(e){return e.currentOrg})),x=(0,u.useState)(!0),k=i()(x,2),C=k[0],w=k[1],P=(0,$.j)((function(e){return{kbaseResult:e.kbaseResult,currentKbase:e.currentKbase,insertKbase:e.insertKbase,updateLocalKbase:e.updateKbase,setKbaseResult:e.setKbaseResult,setCurrentKbase:e.setCurrentKbase,removeKbase:e.removeKbase}})),j=P.kbaseResult,Z=P.currentKbase,S=P.insertKbase,R=P.updateLocalKbase,H=P.setKbaseResult,z=P.setCurrentKbase,B=P.removeKbase,q=function(){var e=l()(o()().mark((function e(){var r,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=3;break}return console.log("isLoading: 1",t.current),e.abrupt("return");case 3:return t.current=!0,m.yw.loading("loading"),r={pageNumber:0,pageSize:50,type:n,orgUid:null==b?void 0:b.uid},e.next=8,(0,M.AP)(r);case 8:a=e.sent,console.log("queryKbasesByOrg: ",a),200===a.code?(m.yw.destroy(),H(a)):(m.yw.destroy(),m.yw.error(a.message)),t.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){console.log("useEffect"),q()}),[]);var L=function(){var e=l()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C?D(n):V(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=l()(o()().mark((function e(n){var r,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create kb",n),r="createKbase",m.yw.loading({content:"正在创建...",key:r}),e.next=5,(0,M.v_)(n);case 5:t=e.sent,console.log("create kb response",t),200===t.code?(S(t.data),z(t.data),m.yw.success({content:"创建成功！",key:r,duration:2}),p(!1)):(console.log("create kb failed",t),m.yw.error({content:t.message,key:r,duration:2}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=l()(o()().mark((function e(n){var r,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update kb",n),r="updateKbase",m.yw.loading({content:"正在更新...",key:r}),e.next=5,(0,M.t5)(n);case 5:t=e.sent,console.log("update kb response",t),200===t.code?(R(t.data),z(t.data),m.yw.success({content:"更新成功！",key:r,duration:2}),p(!1)):(console.log("update kb failed",t),m.yw.error({content:t.message,key:r,duration:2}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=l()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleEditKbase: ",Z),w(!0),p(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=l()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleDeleteKbase: ",n),1!==j.data.content.length){e.next=4;break}return m.yw.error(r.formatMessage({id:"deleteKbaseTip"})),e.abrupt("return");case 4:return e.next=6,(0,M._J)(n);case 6:t=e.sent,console.log("handleDeleteKbase: ",t),200==t.code?(B(n.uid),q()):(console.log("handleDeleteKbase: ",t),m.yw.error(t.message));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(e){return n!=y._FS?g(e.descriptionHtml):e.level===y.Hxq?"全平台客服可见":e.level===y.whQ?"本组织客服可见":e.level===y.fyH?"本客服可见":g(e.descriptionHtml)};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(I,{currentKbase:Z,handleNewKbase:function(){console.log("new kb"),w(!1),p(!0)},handleEditKbase:Q,showDeleteConfirmModel:function(e){N({title:r.formatMessage({id:"deleteTip"}),icon:(0,K.jsx)(T.Z,{}),content:"".concat(r.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(g(e.name),"】？"),onOk:function(){A(e)},onCancel:function(){},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})})}}),(0,K.jsx)(d.Z,{itemLayout:"horizontal",dataSource:j.data.content,renderItem:function(e,n){return(0,K.jsx)(d.Z.Item,{style:Z.uid===e.uid?{backgroundColor:f?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){z(e)},children:(0,K.jsx)(d.Z.Item.Meta,{style:{marginLeft:"10px"},title:g(e.name),description:U(e)})})}}),c&&(0,K.jsx)(E,{open:c,isEdit:C,type:n,kbase:Z,onSubmit:L,onCancel:function(){p(!1)}})]})}},6397:function(e,n,r){r.d(n,{j:function(){return u}});var t=r(73193),o=r.n(t),a=r(76711),l=r.n(a),s=r(55735),i=r(44435),c=r(83642),d=r(83890),u=(0,i.Ue)()((0,c.mW)((0,c.tJ)((0,d.n)((function(e,n){return{currentKbase:{uid:"",orgUid:""},kbaseResult:{data:{content:[]}},insertKbase:function(n){e((function(e){e.kbaseResult.data.content.unshift(n)}))},updateKbase:function(n){e((function(e){var r=e.kbaseResult.data.content,t=r.findIndex((function(e){return e.uid===n.uid}));-1!==t?r[t]=n:console.warn("Kbase with uid ".concat(n.uid," not found."))}))},setKbaseResult:function(n){var r;e({kbaseResult:n}),(null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentKbase:n.data.content[0]})},setCurrentKbase:function(r){var t=n().kbaseResult.data.content,a=t.findIndex((function(e){return e.uid===r.uid}));if(-1!==a){var s=[].concat(l()(t.slice(0,a)),[r],l()(t.slice(a+1))),i=o()(o()({},n().kbaseResult),{},{data:{content:s}});e({kbaseResult:i,currentKbase:r})}else console.warn("Kbase with the specified uid not found."),e({currentKbase:r})},removeKbase:function(r){var t=n().kbaseResult.data.content,a=t.findIndex((function(e){return e.uid===r}));-1!==a?e({kbaseResult:o()(o()({},n().kbaseResult),{},{data:{content:[].concat(l()(t.slice(0,a)),l()(t.slice(a+1)))}})}):console.warn("Kbase not found in cache:",r),n().currentKbase.uid===r&&e({currentKbase:{uid:"",orgUid:""}})},deleteKbaseCache:function(){return e({},!0)}}})),{name:s.wKE})))},29266:function(e,n,r){r.d(n,{Z:function(){return M}});var t=r(44194),o=r(51865),a=r.n(o),l=r(97859),s=r(63125),i=r(80314),c=r(79145),d=r(18011),u=r(37167),p=r(47825),f=r(87471),g=r(88874),b=r(77167),m=r(65759);const v=e=>{const{lineWidth:n,fontSizeIcon:r,calc:t}=e,o=e.fontSizeSM;return(0,b.IX)(e,{tagFontSize:o,tagLineHeight:(0,p.bf)(t(e.lineHeightSM).mul(o).equal()),tagIconSize:t(r).sub(t(n).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},h=e=>({defaultBg:new f.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var y=(0,m.I$)("Tag",(e=>(e=>{const{paddingXXS:n,lineWidth:r,tagPaddingHorizontal:t,componentCls:o,calc:a}=e,l=a(t).sub(r).equal(),s=a(n).sub(r).equal();return{[o]:Object.assign(Object.assign({},(0,g.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:l,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,p.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:s,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:l}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(v(e))),h),x=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r};const k=t.forwardRef(((e,n)=>{const{prefixCls:r,style:o,className:l,checked:s,onChange:i,onClick:c}=e,d=x(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:f}=t.useContext(u.E_),g=p("tag",r),[b,m,v]=y(g),h=a()(g,`${g}-checkable`,{[`${g}-checkable-checked`]:s},null==f?void 0:f.className,l,m,v);return b(t.createElement("span",Object.assign({},d,{ref:n,style:Object.assign(Object.assign({},o),null==f?void 0:f.style),className:h,onClick:e=>{null==i||i(!s),null==c||c(e)}})))}));var C=k,w=r(85772);var P=(0,m.bk)(["Tag","preset"],(e=>(e=>(0,w.Z)(e,((n,r)=>{let{textColor:t,lightBorderColor:o,lightColor:a,darkColor:l}=r;return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:t,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(v(e))),h);const j=(e,n,r)=>{const t="string"!=typeof(o=r)?o:o.charAt(0).toUpperCase()+o.slice(1);var o;return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:e[`color${r}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Z=(0,m.bk)(["Tag","status"],(e=>{const n=v(e);return[j(n,"success","Success"),j(n,"processing","Info"),j(n,"error","Error"),j(n,"warning","Warning")]}),h),S=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r};const K=t.forwardRef(((e,n)=>{const{prefixCls:r,className:o,rootClassName:p,style:f,children:g,icon:b,color:m,onClose:v,bordered:h=!0,visible:x}=e,k=S(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:C,direction:w,tag:j}=t.useContext(u.E_),[K,E]=t.useState(!0),M=(0,l.Z)(k,["closeIcon","closable"]);t.useEffect((()=>{void 0!==x&&E(x)}),[x]);const $=(0,s.o2)(m),F=(0,s.yT)(m),O=$||F,T=Object.assign(Object.assign({backgroundColor:m&&!O?m:void 0},null==j?void 0:j.style),f),R=C("tag",r),[H,I,N]=y(R),z=a()(R,null==j?void 0:j.className,{[`${R}-${m}`]:O,[`${R}-has-color`]:m&&!O,[`${R}-hidden`]:!K,[`${R}-rtl`]:"rtl"===w,[`${R}-borderless`]:!h},o,p,I,N),B=e=>{e.stopPropagation(),null==v||v(e),e.defaultPrevented||E(!1)},[,q]=(0,i.Z)((0,i.w)(e),(0,i.w)(j),{closable:!1,closeIconRender:e=>{const n=t.createElement("span",{className:`${R}-close-icon`,onClick:B},e);return(0,c.wm)(e,n,(e=>({onClick:n=>{var r;null===(r=null==e?void 0:e.onClick)||void 0===r||r.call(e,n),B(n)},className:a()(null==e?void 0:e.className,`${R}-close-icon`)})))}}),L="function"==typeof k.onClick||g&&"a"===g.type,V=b||null,D=V?t.createElement(t.Fragment,null,V,g&&t.createElement("span",null,g)):g,Q=t.createElement("span",Object.assign({},M,{ref:n,className:z,style:T}),D,q,$&&t.createElement(P,{key:"preset",prefixCls:R}),F&&t.createElement(Z,{key:"status",prefixCls:R}));return H(L?t.createElement(d.Z,{component:"Tag"},Q):Q)})),E=K;E.CheckableTag=C;var M=E}}]);