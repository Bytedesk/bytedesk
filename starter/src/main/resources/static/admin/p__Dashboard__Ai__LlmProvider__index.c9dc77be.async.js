"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[325],{93689:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},54495:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},77274:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},15722:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},11090:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},30617:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},80556:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},59908:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(83910),n=r(44194),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},o=r(54183),i=function(e,t){return n.createElement(o.Z,(0,a.Z)({},e,{ref:t,icon:l}))};var s=n.forwardRef(i)},59005:function(e,t,r){var a=r(94433),n=r(38956),l=r(57343),o=r(44194),i=r(45441),s=r(9953),d=r(31549),c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],m=function(e,t){var r=e.fieldProps,u=e.children,m=e.params,p=e.proFieldProps,f=e.mode,g=e.valueEnum,v=e.request,h=e.showSearch,x=e.options,y=(0,n.Z)(e,c),b=(0,o.useContext)(i.Z);return(0,d.jsx)(s.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,l.h)(g),request:v,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:x,mode:f,showSearch:h,getPopupContainer:b.getPopupContainer},r),ref:t,proFieldProps:p},y),{},{children:u}))},p=o.forwardRef((function(e,t){var r=e.fieldProps,c=e.children,m=e.params,p=e.proFieldProps,f=e.mode,g=e.valueEnum,v=e.request,h=e.options,x=(0,n.Z)(e,u),y=(0,a.Z)({options:h,mode:f||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),b=(0,o.useContext)(i.Z);return(0,d.jsx)(s.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,l.h)(g),request:v,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({getPopupContainer:b.getPopupContainer},y),ref:t,proFieldProps:p},x),{},{children:c}))})),f=o.forwardRef(m);f.SearchSelect=p,f.displayName="ProFormComponent",t.Z=f},50628:function(e,t,r){var a=r(94433),n=r(38956),l=r(44194),o=r(9953),i=r(31549),s=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],d=l.forwardRef((function(e,t){var r=e.fieldProps,l=e.unCheckedChildren,d=e.checkedChildren,c=e.proFieldProps,u=(0,n.Z)(e,s);return(0,i.jsx)(o.Z,(0,a.Z)({valueType:"switch",fieldProps:(0,a.Z)({unCheckedChildren:l,checkedChildren:d},r),ref:t,valuePropName:"checked",proFieldProps:c,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},u))}));t.Z=d},86702:function(e,t,r){var a=r(32906),n=r(94433),l=r(38956),o=r(81424),i=r(69705),s=r(65641),d=r(34573),c=r(44194),u=r(9953),m=r(31549),p=["fieldProps","proFieldProps"],f=["fieldProps","proFieldProps"],g="text",v=function(e){var t=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),r=(0,a.Z)(t,2),l=r[0],d=r[1];return(0,m.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var r,a=t.getFieldValue(e.name||[]);return(0,m.jsx)(s.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return d(e)},content:(0,m.jsxs)("div",{style:{padding:"4px 0"},children:[null===(r=e.statusRender)||void 0===r?void 0:r.call(e,a),e.strengthText?(0,m.jsx)("div",{style:{marginTop:10},children:(0,m.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:l,children:e.children}))}})},h=function(e){var t=e.fieldProps,r=e.proFieldProps,a=(0,l.Z)(e,p);return(0,m.jsx)(u.Z,(0,n.Z)({valueType:g,fieldProps:t,filedConfig:{valueType:g},proFieldProps:r},a))};h.Password=function(e){var t=e.fieldProps,r=e.proFieldProps,o=(0,l.Z)(e,f),i=(0,c.useState)(!1),s=(0,a.Z)(i,2),p=s[0],h=s[1];return null!=t&&t.statusRender&&o.name?(0,m.jsx)(v,{name:o.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:p,onOpenChange:h,children:(0,m.jsx)("div",{children:(0,m.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,d.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var r;null==t||null===(r=t.onBlur)||void 0===r||r.call(t,e),h(!1)},onClick:function(e){var r;null==t||null===(r=t.onClick)||void 0===r||r.call(t,e),h(!0)}}),proFieldProps:r,filedConfig:{valueType:g}},o))})}):(0,m.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:t,proFieldProps:r,filedConfig:{valueType:g}},o))},h.displayName="ProFormComponent",t.Z=h},42268:function(e,t,r){r.d(t,{Jr:function(){return p},LF:function(){return u},Oh:function(){return h},WS:function(){return g}});var a=r(90819),n=r.n(a),l=r(73193),o=r.n(l),i=r(89933),s=r.n(i),d=r(94976),c=r(4628);function u(e){return m.apply(this,arguments)}function m(){return(m=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/query/org",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/create",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/update",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/delete",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},94527:function(e,t,r){r.d(t,{G9:function(){return Z},J$:function(){return P},N6:function(){return w},VM:function(){return u},c8:function(){return p},gF:function(){return h},rg:function(){return g},sF:function(){return y}});var a=r(90819),n=r.n(a),l=r(73193),o=r.n(l),i=r(89933),s=r.n(i),d=r(94976),c=r(4628);function u(e){return m.apply(this,arguments)}function m(){return(m=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/ping",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/local-models",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/models",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/library/models/details",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/models/details",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return M.apply(this,arguments)}function M(){return(M=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/models/pull",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return j.apply(this,arguments)}function j(){return(j=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/ollama4j/models/delete",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return k.apply(this,arguments)}function k(){return(k=s()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/springai/ollama/embedding-model/exists",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},11818:function(e,t,r){r.d(t,{G:function(){return p}});var a=r(73193),n=r.n(a),l=(r(44194),r(47710)),o=r(94976),i=r(96596),s=r.n(i),d=r(67242),c=r(43388),u=r(58620),m=r(31549),p=function(e){var t=e.children,r=e.onSuccess,a=e.onError,i={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:o.IrL,categoryUid:"",kbUid:"",channel:o.XtJ},p={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(o.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){d.Z.log("beforeUpload",e);var t=s()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return i.file=e,i.fileName=t,i.fileType=e.type,d.Z.log("beforeUpload",i),!0},onChange:function(e){if("uploading"!==e.file.status&&d.Z.log("not uploading:",e.file),"done"===e.file.status)if(d.Z.log("response: ",e.file.response),200===e.file.response.code){var t,n=null===(t=e.file.response)||void 0===t?void 0:t.data.fileUrl;r(n),c.yw.success("".concat(e.file.name," 上传成功"))}else a(e.file),c.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(c.yw.error("".concat(e.file.name," 上传失败")),a(e.file))}};return(0,m.jsx)(l.Z,n()(n()({},p),{},{children:t}))}},21850:function(e,t,r){var a=r(25553);t.Z=function(){var e=(0,a.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},4784:function(e,t,r){r.r(t),r.d(t,{default:function(){return Xe}});var a=r(44194),n=r(21850),l=r(81581),o=r(76711),i=r.n(o),s=r(73193),d=r.n(s),c=r(90819),u=r.n(c),m=r(89933),p=r.n(m),f=r(45332),g=r.n(f),v=r(90084),h=r(43388),x=r(25553),y=r(88722),b=r(4628),w=r(27729),M=r(65051),Z=r(69533),j=r(30310),P=r(1282),k=r(83281),C=r(28582),S=r(90581),T=r(74171),L=r(94976),U=r(15722),D=r(10162),E=r(83910),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"},z=r(54183),O=function(e,t){return a.createElement(z.Z,(0,E.Z)({},e,{ref:t,icon:I}))};var N=a.forwardRef(O),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM310.3 167.1a8 8 0 00-12.6 0L185.7 309c-4.2 5.3-.4 13 6.3 13h76v530c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V322h76c6.7 0 10.5-7.8 6.3-13l-112-141.9z"}}]},name:"sort-descending",theme:"outlined"},q=function(e,t){return a.createElement(z.Z,(0,E.Z)({},e,{ref:t,icon:R}))};var F=a.forwardRef(q),A=r(90727),B=r(60926),V=r(10154),H=r.n(V),K=r(99036),$=r(59005),G=r(86702),J=r(60241),W=r(50628),X=r(69705),_=r(30857),Y=r(11818),Q=r(59908),ee=r(58620),te=r(67242),re=r(31549),ae=function(e){var t,r=e.open,n=e.isEdit,l=e.llmProvider,o=e.level,i=e.onCancel,s=e.onSubmit,c=(0,b.useIntl)(),m=X.Z.useForm(),f=g()(m,1)[0],v=(0,T.u)((function(e){return e.currentOrg})),x=(0,a.useState)(),y=g()(x,2),w=y[0],M=y[1],j=(0,a.useState)(""),P=g()(j,2),k=P[0],S=P[1],U=(t={},H()(H()(H()(H()(H()(H()(H()(H()(H()(H()(t,L.CZ7,{nickname:"Ollama",logo:"ollama.png",baseUrl:"http://127.0.0.1:11434",webUrl:"https://ollama.com/",status:"PRODUCTION"}),L.hBm,{nickname:"智谱",logo:"zhipu.png",baseUrl:"https://open.bigmodel.cn/api/paas",webUrl:"https://open.bigmodel.cn/",status:"PRODUCTION"}),L.JZt,{nickname:"DeepSeek",logo:"deepseek.png",baseUrl:"https://api.deepseek.com",webUrl:"https://deepseek.com/",status:"PRODUCTION"}),L.dtX,{nickname:"通义千问",logo:"dashscope.png",baseUrl:"https://dashscope.aliyuncs.com",webUrl:"https://dashscope.aliyun.com/",status:"PRODUCTION"}),L.cEx,{nickname:"硅基流动",logo:"silicon.png",baseUrl:"https://api.siliconflow.cn",webUrl:"https://www.siliconflow.cn/",status:"PRODUCTION"}),L.ADi,{nickname:"Gitee魔力方舟",logo:"gitee.png",baseUrl:"https://ai.gitee.com",webUrl:"https://ai.gitee.com/",status:"PRODUCTION"}),L.qqA,{nickname:"腾讯混元",logo:"hunyuan.png",baseUrl:"https://api.hunyuan.cloud.tencent.com",webUrl:"https://hunyuan.tencent.com/",status:"PRODUCTION"}),L.Gh5,{nickname:"百度千帆",logo:"yiyan.png",baseUrl:"https://qianfan.baidubce.com/v2",webUrl:"https://console.bce.baidu.com/iam/#/iam/apikey/list",status:"PRODUCTION"}),L.dAZ,{nickname:"火山引擎",logo:"doubao.png",baseUrl:"https://ark.cn-beijing.volces.com/api/v3",webUrl:"https://console.volcengine.com/ark/",status:"PRODUCTION"}),L.tjv,{nickname:"Minimax",logo:"minimax.png",baseUrl:"https://api.minimax.chat/v1/",webUrl:"https://platform.minimaxi.com/",status:"PRODUCTION"}),H()(H()(H()(H()(H()(H()(H()(H()(H()(H()(t,L.CA4,{nickname:"OpenAI",logo:"openai.png",baseUrl:"https://api.openai.com",webUrl:"https://openai.com/",status:"PRODUCTION"}),L.d_o,{nickname:"Coze",logo:"coze.png",baseUrl:"https://api.coze.cn",webUrl:"https://www.coze.cn/",status:"PRODUCTION"}),L.UPk,{nickname:"Dify",logo:"dify.png",baseUrl:"https://api.dify.ai/v1",webUrl:"https://www.dify.ai/",status:"PRODUCTION"}),L.lhE,{nickname:"MaxKB",logo:"maxkb.png",baseUrl:"https://api.maxkb.cn",webUrl:"https://www.maxkb.cn/",status:"PRODUCTION"}),L.PL6,{nickname:"n8n",logo:"n8n.png",baseUrl:"https://api.n8n.io",webUrl:"https://n8n.io/",status:"PRODUCTION"}),L.TDs,{nickname:"Ragflow",logo:"ragflow.png",baseUrl:"https://api.ragflow.io",webUrl:"https://www.ragflow.io/",status:"PRODUCTION"}),L.eZp,{nickname:"OpenRouter",logo:"openrouter.png",baseUrl:"https://openrouter.ai/api",webUrl:"https://openrouter.ai/",status:"PRODUCTION"}),L.AQo,{nickname:"讯飞星火",logo:"xinghuo.png",baseUrl:"https://xinghuo.xfyun.cn/sparkapi",webUrl:"https://xinghuo.xfyun.cn/sparkapi",status:"DEVELOPMENT"}),L.S6p,{nickname:"Kimi",logo:"moonshot.png",baseUrl:"https://api.moonshot.cn",webUrl:"https://moonshot.ai/",status:"DEVELOPMENT"}),L.JN,{nickname:"百小应",logo:"baichuan.png",baseUrl:"https://api.baichuan-ai.com",webUrl:"https://www.baichuan-ai.com/",status:"DEVELOPMENT"}),H()(H()(H()(H()(H()(H()(t,L.ZeX,{nickname:"Yi",logo:"yi.png",baseUrl:"https://api.lingyiwanwu.com",webUrl:"https://platform.lingyiwanwu.com/",status:"DEVELOPMENT"}),L.i10,{nickname:"StepFun",logo:"stepfun.png",baseUrl:"https://api.stepfun.com",webUrl:"https://platform.stepfun.com/",status:"DEVELOPMENT"}),L.TkL,{nickname:"Groq",logo:"groq.png",baseUrl:"https://api.groq.com/openai",webUrl:"https://groq.com/",status:"DEVELOPMENT"}),L.fjv,{nickname:"Anthropic",logo:"anthropic.png",baseUrl:"https://api.anthropic.com/",webUrl:"https://anthropic.com/",status:"DEVELOPMENT"}),L.yTV,{nickname:"Gemini",logo:"gemini.png",baseUrl:"https://generativelanguage.googleapis.com",webUrl:"https://gemini.google.com/",status:"DEVELOPMENT"}),L.A2J,{nickname:"AIHubMix",logo:"aihubmix.png",baseUrl:"https://aihubmix.com",webUrl:"https://aihubmix.com/",status:"DEVELOPMENT"})),D=[{label:"Ollama",value:L.CZ7,category:"production"},{label:"智谱AI",value:L.hBm,category:"production"},{label:"DeepSeek",value:L.JZt,category:"production"},{label:"阿里云DashScope",value:L.dtX,category:"production"},{label:"SiliconFlow",value:L.cEx,category:"production"},{label:"Gitee AI",value:L.ADi,category:"production"},{label:"腾讯云",value:L.qqA,category:"production"},{label:"百度云",value:L.Gh5,category:"production"},{label:"火山引擎",value:L.dAZ,category:"production"},{label:"MiniMax",value:L.tjv,category:"production"},{label:"星火",value:L.AQo,category:"development"},{label:"Moonshot",value:L.S6p,category:"development"},{label:"百川",value:L.JN,category:"development"},{label:"零一万物",value:L.ZeX,category:"development"},{label:"阶跃星辰",value:L.i10,category:"development"},{label:"OpenRouter",value:L.eZp,category:"development"},{label:"Groq",value:L.TkL,category:"development"},{label:"Anthropic",value:L.fjv,category:"development"},{label:"OpenAI",value:L.CA4,category:"development"},{label:"Google Gemini",value:L.yTV,category:"development"},{label:"AiHubMix",value:L.A2J,category:"development"},{label:"自定义",value:L.ZPo,category:"custom"},{label:"Coze",value:L.d_o,category:"thirdparty"},{label:"Dify",value:L.UPk,category:"thirdparty"},{label:"N8N",value:L.PL6,category:"thirdparty"},{label:"MaxKB",value:L.lhE,category:"thirdparty"},{label:"RagFlow",value:L.TDs,category:"thirdparty"}],E=[{label:"已上线",options:D.filter((function(e){return"production"===e.category}))},{label:"开发中",options:D.filter((function(e){return"development"===e.category}))},{label:"自定义",options:D.filter((function(e){return"custom"===e.category}))},{label:"第三方知识库",options:D.filter((function(e){return"thirdparty"===e.category}))}],I=[L.CZ7,L.hBm,L.JZt,L.dtX,L.cEx,L.ADi,L.qqA,L.Gh5,L.dAZ,L.tjv,L.AQo,L.S6p,L.JN,L.ZeX,L.i10,L.eZp,L.TkL,L.fjv,L.CA4,L.yTV,L.A2J],z=n&&I.includes((null==l?void 0:l.type)||""),O=f.getFieldValue("type")===L.d_o,N=f.getFieldValue("type")===L.TDs;(0,a.useEffect)((function(){var e;n?(M(l),S((null==l?void 0:l.logo)||""),f.setFieldsValue({logo:null==l?void 0:l.logo,type:null==l?void 0:l.type,nickname:null==l?void 0:l.nickname,description:null==l?void 0:l.description,webUrl:null==l?void 0:l.webUrl,status:null==l?void 0:l.status,baseUrl:null==l?void 0:l.baseUrl,apiKey:null==l?void 0:l.apiKey,cozeBotId:null==l?void 0:l.cozeBotId,ragflowType:null==l?void 0:l.ragflowType,ragflowId:null==l?void 0:l.ragflowId,enabled:null===(e=null==l?void 0:l.enabled)||void 0===e||e})):(f.resetFields(),S(""),f.setFieldsValue({enabled:!0,status:L.KY}))}),[n,l]);return(0,re.jsx)("div",{children:(0,re.jsx)(_.Z,{title:n?c.formatMessage({id:"ai.provider.edit"}):c.formatMessage({id:"ai.provider.create"}),open:r,onClose:i,width:500,extra:(0,re.jsx)(Z.ZP,{type:"primary",onClick:function(){f.validateFields().then(function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={uid:n?null==l?void 0:l.uid:"",type:null==t?void 0:t.type,nickname:null==t?void 0:t.nickname,logo:k||(null==w?void 0:w.logo),description:null==t?void 0:t.description,webUrl:null==t?void 0:t.webUrl,status:(null==t?void 0:t.status)||L.L2A,baseUrl:null==t?void 0:t.baseUrl,apiKey:null==t?void 0:t.apiKey,cozeBotId:null==t?void 0:t.cozeBotId,ragflowType:null==t?void 0:t.ragflowType,ragflowId:null==t?void 0:t.ragflowId,enabled:null===(r=null==t?void 0:t.enabled)||void 0===r||r,level:o,orgUid:null==v?void 0:v.uid},te.Z.debug("handleSaveLlmProvider:",t,a),s(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){te.Z.debug("Failed:",e),h.yw.error(n?c.formatMessage({id:"ai.provider.update.failed"}):c.formatMessage({id:"ai.provider.create.failed"}))}))},children:n?c.formatMessage({id:"ai.provider.update"}):c.formatMessage({id:"ai.provider.confirm"})}),children:(0,re.jsxs)(K.A,{form:f,name:"form",style:{maxWidth:400},submitter:{render:function(){return null}},children:[(0,re.jsx)(K.A.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:c.formatMessage({id:"ai.provider.logo"}),children:(0,re.jsxs)(Y.G,{onSuccess:function(e){te.Z.debug("handleUploadSuccess:",e),S(e)},onError:function(e){te.Z.debug("handleUploadError:",e),h.yw.error(c.formatMessage({id:"ai.provider.upload.failed"}))},children:[(0,re.jsx)(C.Z,{src:k,size:64}),(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(Q.Z,{}),style:{marginLeft:8},children:c.formatMessage({id:"ai.provider.uploadLogo"})})]})}),(0,re.jsx)($.Z,{width:"md",name:"type",label:c.formatMessage({id:"ai.provider.type"}),placeholder:c.formatMessage({id:"ai.provider.type.placeholder"}),disabled:z,options:E,rules:[{required:!0,message:c.formatMessage({id:"ai.provider.type.required"})}],fieldProps:{showSearch:!0,onChange:function(e){te.Z.debug("Provider type changed:",e);D.find((function(t){return t.value===e}));M(d()(d()({},w),{},{type:e}));var t=U[e];if(e&&t){var r=(0,ee.kG)()+"/assets/images/llm/provider/"+e+".png";S(r),f.setFieldsValue({logo:r,baseUrl:t.baseUrl,webUrl:t.webUrl})}f.validateFields([])}},tooltip:z?c.formatMessage({id:"ai.provider.type.system.tooltip"}):void 0}),(0,re.jsx)(G.Z,{label:c.formatMessage({id:"ai.provider.nickname"}),name:"nickname",rules:[{required:!0,message:c.formatMessage({id:"ai.provider.nickname.required"})}],fieldProps:{onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}}}),(0,re.jsx)(J.Z,{label:c.formatMessage({id:"ai.provider.description"}),name:"description",fieldProps:{onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}}}),(0,re.jsx)(G.Z,{label:c.formatMessage({id:"ai.provider.webUrl"}),name:"webUrl",placeholder:c.formatMessage({id:"ai.provider.webUrl.placeholder"}),rules:[{type:"url",message:c.formatMessage({id:"ai.provider.webUrl.invalid"})}],fieldProps:{onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}}}),(0,re.jsx)($.Z,{label:c.formatMessage({id:"ai.provider.status"}),name:"status",options:[{label:c.formatMessage({id:"ai.provider.status.development"}),value:L.L2A},{label:c.formatMessage({id:"ai.provider.status.production"}),value:L.KY}],rules:[{required:!0,message:c.formatMessage({id:"ai.provider.status.required"})}],fieldProps:{placeholder:c.formatMessage({id:"ai.provider.status.placeholder"})}}),(0,re.jsx)(G.Z,{label:c.formatMessage({id:"ai.provider.baseUrl"}),name:"baseUrl",placeholder:c.formatMessage({id:"ai.provider.baseUrl.placeholder"}),rules:[{required:!0,message:c.formatMessage({id:"ai.provider.baseUrl.required"})},{validator:function(e,t){if(t){if(t.endsWith("/"))return Promise.reject(new Error(c.formatMessage({id:"ai.provider.baseUrl.noTrailingSlash"})));if(!t.startsWith("http://")&&!t.startsWith("https://"))return Promise.reject(new Error(c.formatMessage({id:"ai.provider.baseUrl.mustStartWithHttp"})))}return Promise.resolve()}}],fieldProps:{onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}},extra:c.formatMessage({id:"ai.provider.baseUrl.extra"})}),(null==w?void 0:w.type)!==L.CZ7&&(0,re.jsx)(G.Z.Password,{label:c.formatMessage({id:"ai.provider.apiKey"}),name:"apiKey",fieldProps:{placeholder:c.formatMessage({id:"ai.provider.apiKey.placeholder"}),allowClear:!0,visibilityToggle:!0,onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}}}),O&&(0,re.jsx)(G.Z,{label:c.formatMessage({id:"ai.provider.cozeBotId"}),name:"cozeBotId",placeholder:c.formatMessage({id:"ai.provider.cozeBotId.placeholder"}),rules:[{required:!0,message:c.formatMessage({id:"ai.provider.cozeBotId.required"})}],fieldProps:{onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}},extra:c.formatMessage({id:"ai.provider.cozeBotId.extra"})}),N&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)($.Z,{label:c.formatMessage({id:"ai.provider.ragflowType"}),name:"ragflowType",placeholder:c.formatMessage({id:"ai.provider.ragflowType.placeholder"}),options:[{label:c.formatMessage({id:"ai.provider.ragflowType.chat"}),value:"chat"},{label:c.formatMessage({id:"ai.provider.ragflowType.agent"}),value:"agent"}],rules:[{required:!0,message:c.formatMessage({id:"ai.provider.ragflowType.required"})}],extra:c.formatMessage({id:"ai.provider.ragflowType.extra"})}),(0,re.jsx)(G.Z,{label:c.formatMessage({id:"ai.provider.ragflowId"}),name:"ragflowId",placeholder:c.formatMessage({id:"ai.provider.ragflowId.placeholder"}),rules:[{required:!0,message:c.formatMessage({id:"ai.provider.ragflowId.required"})}],fieldProps:{onPressEnter:function(e){te.Z.debug("onPressEnter:",e)}},extra:c.formatMessage({id:"ai.provider.ragflowId.extra"})})]}),(0,re.jsx)(W.Z,{label:c.formatMessage({id:"ai.provider.enabled"}),name:"enabled",tooltip:c.formatMessage({id:"ai.provider.enabled.tooltip"}),checkedChildren:c.formatMessage({id:"ai.provider.enabled.checked"}),unCheckedChildren:c.formatMessage({id:"ai.provider.enabled.unchecked"})})]})})})},ne=r(26557),le=r(26407),oe=r(20744),ie=(0,ne.Ue)()((0,le.mW)((0,le.tJ)((0,oe.n)((function(e,t){return{llmproviderResultPlatform:{data:{content:[]}},currentLlmProviderPlatform:{uid:"",nickname:""},tabsToClosePlatform:[],insertLlmProviderPlatform:function(t){e((function(e){e.llmproviderResultPlatform.data.content.unshift(t)}))},upgradeLlmProviderPlatform:function(t){e((function(e){var r=e.llmproviderResultPlatform.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));-1!==a?r[a]=t:console.warn("LlmProvider with uid ".concat(t.uid," not found."))}))},setLlmProviderResultPlatform:function(r){e({llmproviderResultPlatform:r});var a,n=t().currentLlmProviderPlatform;""!==n.uid&&void 0!==n||(null===(a=r.data)||void 0===a||null===(a=a.content)||void 0===a?void 0:a.length)>0&&e({currentLlmProviderPlatform:r.data.content[0]})},setCurrentLlmProviderPlatform:function(r){var a=t().llmproviderResultPlatform.data.content,n=a.findIndex((function(e){return e.uid===r.uid}));if(-1!==n){var l=[].concat(i()(a.slice(0,n)),[r],i()(a.slice(n+1))),o=d()(d()({},t().llmproviderResultPlatform),{},{data:{content:l}});e({llmproviderResultPlatform:o,currentLlmProviderPlatform:r})}else e({currentLlmProviderPlatform:r})},deleteCurrentLlmProviderPlatform:function(r){var a=t().llmproviderResultPlatform.data.content,n=a.findIndex((function(e){return e.uid===r}));-1!==n?e({llmproviderResultPlatform:d()(d()({},t().llmproviderResultPlatform),{},{data:{content:[].concat(i()(a.slice(0,n)),i()(a.slice(n+1)))}})}):console.warn("LlmProvider not found in cache:",r),t().currentLlmProviderPlatform.uid===r&&e({currentLlmProviderPlatform:{uid:""}})},addTabToClosePlatform:function(t){e((function(e){e.tabsToClosePlatform.includes(t)||e.tabsToClosePlatform.push(t)}))},removeTabToClosePlatform:function(t){e((function(e){e.tabsToClosePlatform=e.tabsToClosePlatform.filter((function(e){return e!==t}))}))},deleteLlmProviderCachePlatform:function(){return e({},!0)}}})),{name:L.dNm}))),se=r(78112),de=r(85977),ce=function(e){var t,r,n,l,o,s,c,m,f,E,I,z,O=e.level,R=e.superUser,q=(0,x.Z)().isDarkMode,V=(0,b.useIntl)(),H=(0,b.useAccess)(),K=(0,y.Z)().translateString,$=(0,T.u)((function(e){return e.currentOrg})),G=(0,a.useRef)(!1),J=(0,a.useMemo)((function(){var e;return null==H||null===(e=H.getModulePermission)||void 0===e?void 0:e.call(H,de.MY.LLM_PROVIDER)}),[H]),W=Boolean(R||null!==(t=null==J||null===(r=J.canRead)||void 0===r?void 0:r.call(J))&&void 0!==t&&t),X=Boolean(R||null!==(n=null==J||null===(l=J.canCreate)||void 0===l?void 0:l.call(J))&&void 0!==n&&n),_=Boolean(R||null!==(o=null==J||null===(s=J.canUpdate)||void 0===s?void 0:s.call(J))&&void 0!==o&&o),Y=Boolean(R||null!==(c=null==J||null===(m=J.canDelete)||void 0===m?void 0:m.call(J))&&void 0!==c&&c),Q=(0,a.useState)(!1),ee=g()(Q,2),ne=ee[0],le=ee[1],oe=(0,a.useState)(!1),ce=g()(oe,2),ue=ce[0],me=ce[1],pe=(0,a.useState)(!1),fe=g()(pe,2),ge=fe[0],ve=fe[1],he=(0,a.useState)(!0),xe=g()(he,2),ye=xe[0],be=xe[1],we=(0,a.useState)(0),Me=g()(we,2),Ze=Me[0],je=Me[1],Pe=(0,a.useState)((function(){var e=localStorage.getItem("llmProviderSortDirection");return"ascend"===e||"descend"===e?e:"descend"})),ke=g()(Pe,2),Ce=ke[0],Se=ke[1],Te=(0,a.useState)(""),Le=g()(Te,2),Ue=Le[0],De=Le[1],Ee=(0,a.useState)(!1),Ie=g()(Ee,2),ze=Ie[0],Oe=Ie[1],Ne=(0,a.useMemo)((function(){var e=O===L.Hxq?"platform":(null==$?void 0:$.uid)||"org";return"llmProviderSelected:".concat(O,":").concat(e)}),[O,null==$?void 0:$.uid]),Re=(0,a.useState)(null),qe=g()(Re,2),Fe=(qe[0],qe[1]);(0,a.useEffect)((function(){Fe(localStorage.getItem(Ne))}),[Ne]);var Ae=(0,B.A)((function(e){return{llmproviderResult:e.llmproviderResult,currentLlmProvider:e.currentLlmProvider,setLlmProviderResult:e.setLlmProviderResult,insertLlmProvider:e.insertLlmProvider,setCurrentLlmProvider:e.setCurrentLlmProvider,upgradeLlmProvider:e.upgradeLlmProvider,deleteCurrentLlmProvider:e.deleteCurrentLlmProvider,addTabToClose:e.addTabToClose}})),Be=Ae.llmproviderResult,Ve=Ae.currentLlmProvider,He=Ae.setLlmProviderResult,Ke=Ae.insertLlmProvider,$e=Ae.setCurrentLlmProvider,Ge=Ae.upgradeLlmProvider,Je=Ae.deleteCurrentLlmProvider,We=Ae.addTabToClose,Xe=ie((function(e){return{llmproviderResultPlatform:e.llmproviderResultPlatform,currentLlmProviderPlatform:e.currentLlmProviderPlatform,setLlmProviderResultPlatform:e.setLlmProviderResultPlatform,insertLlmProviderPlatform:e.insertLlmProviderPlatform,setCurrentLlmProviderPlatform:e.setCurrentLlmProviderPlatform,upgradeLlmProviderPlatform:e.upgradeLlmProviderPlatform,deleteCurrentLlmProviderPlatform:e.deleteCurrentLlmProviderPlatform,addTabToClosePlatform:e.addTabToClosePlatform}})),_e=Xe.llmproviderResultPlatform,Ye=Xe.currentLlmProviderPlatform,Qe=Xe.setLlmProviderResultPlatform,et=Xe.insertLlmProviderPlatform,tt=Xe.setCurrentLlmProviderPlatform,rt=Xe.upgradeLlmProviderPlatform,at=Xe.deleteCurrentLlmProviderPlatform,nt=Xe.addTabToClosePlatform,lt=(0,a.useState)(O===L.Hxq),ot=g()(lt,1)[0],it=ot?Ye:Ve,st=w.Z.useModal(),dt=g()(st,2),ct=dt[0],ut=dt[1],mt=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=3;break}return h.yw.warning(V.formatMessage({id:"no.permission.delete",defaultMessage:"无删除权限"})),e.abrupt("return");case 3:return te.Z.debug("delete robot",t),h.yw.loading(V.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=7,(0,v.HH)(t);case 7:if(r=e.sent,te.Z.debug("delete robot response",r),200===r.code){h.yw.destroy(),h.yw.success(V.formatMessage({id:"delete.success",defaultMessage:"Delete success"}));try{(a=localStorage.getItem(Ne))&&a===t.uid&&localStorage.removeItem(Ne)}catch(e){}ot?(at(t.uid),nt(t.uid)):(Je(t.uid),We(t.uid))}else h.yw.destroy(),h.yw.error(r.message);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=(0,a.useCallback)(p()(u()().mark((function e(){var t,r,a,n,l,o,s,c,m,p,f,g,x,y,b,w,M,Z,j=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.length>0&&void 0!==j[0]?j[0]:0,r=j.length>1&&void 0!==j[1]&&j[1],te.Z.debug("getLlmProviders",{page:t,isLoadMore:r,sortDirection:Ce}),W){e.next=8;break}return G.current||(G.current=!0,h.yw.warning(V.formatMessage({id:"no.permission.read",defaultMessage:"无查看权限"}))),be(!1),ve(!1),e.abrupt("return");case 8:if(!ge){e.next=10;break}return e.abrupt("return");case 10:return ve(!0),a={pageNumber:t,pageSize:20,sortBy:"updatedAt",sortDirection:Ce,searchText:Ue,orgUid:O===L.Hxq?"":null==$?void 0:$.uid,level:O},e.prev=12,e.next=15,(0,v.mK)(a);case 15:n=e.sent,te.Z.debug("queryLlmProvidersByOrg: ",n,a),200===n.code?(s=(null==n||null===(l=n.data)||void 0===l?void 0:l.content)||[],c=(null==n||null===(o=n.data)||void 0===o?void 0:o.last)||!1,be(!c),je(t),ot?r?(p=(null==_e||null===(m=_e.data)||void 0===m?void 0:m.content)||[],f=d()(d()({},n),{},{data:d()(d()({},null==n?void 0:n.data),{},{content:[].concat(i()(p),i()(s))})}),Qe(f)):(Qe(n),s.length>0&&(g=function(){try{return localStorage.getItem(Ne)}catch(e){return null}}(),x=g?s.find((function(e){return e.uid===g})):null,tt(x||s[0])),Oe(!0)):r?(b=(null==Be||null===(y=Be.data)||void 0===y?void 0:y.content)||[],w=d()(d()({},n),{},{data:d()(d()({},null==n?void 0:n.data),{},{content:[].concat(i()(b),i()(s))})}),He(w)):(He(n),s.length>0&&(M=function(){try{return localStorage.getItem(Ne)}catch(e){return null}}(),Z=M?s.find((function(e){return e.uid===M})):null,$e(Z||s[0])),Oe(!0))):h.yw.error(n.message),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(12),console.error("获取LLM提供商失败:",e.t0),h.yw.error("获取数据失败");case 24:return e.prev=24,ve(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[12,20,24,27]])}))),[W,V,ge,Ce,Ue,O,null==$?void 0:$.uid,ot,_e,Be,Qe,He,tt,$e,Ne]);(0,a.useEffect)((function(){je(0),be(!0),Oe(!1),pt(0,!1)}),[W,O,null==$?void 0:$.uid,Ce,Ue]);var ft=function(){var e=p()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=3;break}return h.yw.warning(V.formatMessage({id:"no.permission.create",defaultMessage:"无新增权限"})),e.abrupt("return");case 3:return te.Z.debug("createLlmProvider",t),h.yw.loading(V.formatMessage({id:"creating"})),e.next=7,(0,v.T)(t);case 7:r=e.sent,te.Z.debug("createLlmProvider:",r),200===r.code?(h.yw.destroy(),h.yw.success(V.formatMessage({id:"create.success",defaultMessage:"create success"})),ot?(et(null==r?void 0:r.data),tt(null==r?void 0:r.data)):(Ke(null==r?void 0:r.data),$e(null==r?void 0:r.data)),le(!1)):(h.yw.destroy(),h.yw.error(r.message));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(){var e=p()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return h.yw.warning(V.formatMessage({id:"no.permission.update",defaultMessage:"无编辑权限"})),e.abrupt("return");case 3:return h.yw.loading(V.formatMessage({id:"updating"})),e.next=6,(0,v.fx)(t);case 6:r=e.sent,te.Z.debug("updateLlmProvider:",t,r),200===r.code?(h.yw.destroy(),h.yw.success(V.formatMessage({id:"update.success",defaultMessage:"update success"})),ot?(rt(null==r?void 0:r.data),tt(null==r?void 0:r.data)):(Ge(null==r?void 0:r.data),$e(null==r?void 0:r.data)),le(!1)):(h.yw.destroy(),h.yw.error(r.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=function(e){te.Z.debug("搜索内容:",e)};return(0,a.useEffect)((function(){if(ze)try{it&&it.uid&&localStorage.setItem(Ne,it.uid)}catch(e){}}),[ze,null==it?void 0:it.uid,Ne]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{style:{margin:10},children:[(0,re.jsxs)(M.Z,{gap:"small",align:"flex-start",children:[X&&(0,re.jsx)(Z.ZP,{size:"small",type:"primary",icon:(0,re.jsx)(D.Z,{}),onClick:function(){X?(te.Z.debug("new llmProvider"),me(!1),le(!0)):h.yw.warning(V.formatMessage({id:"no.permission.create",defaultMessage:"无新增权限"}))},children:V.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),_&&(0,re.jsx)(Z.ZP,{size:"small",onClick:function(){_?(te.Z.debug("edit llmProvider"),me(!0),le(!0)):h.yw.warning(V.formatMessage({id:"no.permission.update",defaultMessage:"无编辑权限"}))},disabled:""===(null==it?void 0:it.uid),children:V.formatMessage({id:"edit",defaultMessage:"Edit"})}),(0,re.jsx)(Z.ZP,{size:"small",icon:"descend"===Ce?(0,re.jsx)(N,{}):(0,re.jsx)(F,{}),onClick:function(){if(W){var e="descend"===Ce?"ascend":"descend";Se(e),localStorage.setItem("llmProviderSortDirection",e),je(0),be(!0),pt(0,!1)}else h.yw.warning(V.formatMessage({id:"no.permission.read",defaultMessage:"无查看权限"}))},title:"descend"===Ce?"当前降序排列，点击切换为升序":"当前升序排列，点击切换为降序",disabled:!W,children:"descend"===Ce?"升序":"降序"}),Y&&(0,re.jsx)(Z.ZP,{onClick:function(){return function(e){Y?ct.confirm({title:V.formatMessage({id:"deleteTip"}),icon:(0,re.jsx)(U.Z,{}),content:"".concat(V.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(K(e.nickname),"】？"),onOk:function(){mt(e)},onCancel:function(){},okText:V.formatMessage({id:"ok"}),cancelText:V.formatMessage({id:"cancel"})}):h.yw.warning(V.formatMessage({id:"no.permission.delete",defaultMessage:"无删除权限"}))}(it)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==it?void 0:it.uid),children:V.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,re.jsx)("div",{style:{marginTop:16},children:(0,re.jsxs)(j.Z.Compact,{style:{width:"100%"},children:[(0,re.jsx)(P.Z,{placeholder:V.formatMessage({id:"search.placeholder",defaultMessage:"搜索提供商名称或描述"}),value:Ue,disabled:!W,onChange:function(e){return De(e.target.value)},onPressEnter:function(e){e.preventDefault(),vt(e.currentTarget.value)},allowClear:!0}),(0,re.jsx)(Z.ZP,{type:"primary",icon:(0,re.jsx)(A.Z,{}),"aria-label":V.formatMessage({id:"common.search",defaultMessage:"搜索"}),onClick:function(){return vt(Ue)},disabled:!W})]})})]}),(0,re.jsxs)("div",{style:{maxHeight:"calc(100vh - 100px)",overflowY:"auto",paddingBottom:"20px"},onScroll:function(e){var t=e.currentTarget,r=t.scrollTop;t.scrollHeight-r-t.clientHeight<50&&ye&&!ge&&!ge&&ye&&pt(Ze+1,!0)},children:[(0,re.jsx)(k.Z,{itemLayout:"horizontal",loading:ge&&0===Ze,dataSource:(W?ot?(null==_e||null===(f=_e.data)||void 0===f?void 0:f.content)||[]:(null==Be||null===(E=Be.data)||void 0===E?void 0:E.content)||[]:[]).filter((function(e){return!se.ju.includes(e.type)})),renderItem:function(e,t){return(0,re.jsx)(k.Z.Item,{style:d()(d()({},(null==it?void 0:it.uid)===e.uid?{backgroundColor:q?"#333333":"#dddddd"}:{}),{},{cursor:"pointer"}),onClick:function(){return function(e,t){ot?tt(e):$e(e);try{null!=e&&e.uid&&(localStorage.setItem(Ne,e.uid),Fe(e.uid))}catch(e){}}(e)},children:(0,re.jsx)(k.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,re.jsxs)("span",{style:{fontSize:"14px",color:q?"#888":"#666",minWidth:"20px",textAlign:"right"},children:[t+1,"."]}),(0,re.jsx)(C.Z,{src:e.logo})]}),title:(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,re.jsx)("span",{children:null==e?void 0:e.nickname}),(0,re.jsx)(S.Z,{color:null!=e&&e.enabled?"green":"red",children:null!=e&&e.enabled?V.formatMessage({id:"ai.provider.status.enabled"}):V.formatMessage({id:"ai.provider.status.disabled"})})]}),description:(0,re.jsxs)("div",{children:[R&&(0,re.jsx)("div",{children:(null==e?void 0:e.status)===L.KY?V.formatMessage({id:"ai.provider.status.production"}):V.formatMessage({id:"ai.provider.status.development"})}),(null==e?void 0:e.description)&&(0,re.jsx)("div",{style:{marginTop:R?"4px":"0",color:"#666"},children:e.description})]})})})}}),ge&&Ze>0&&(0,re.jsx)("div",{style:{textAlign:"center",padding:"12px"},children:(0,re.jsx)("span",{style:{color:"#999"},children:"加载中..."})}),!ye&&(ot?null==_e||null===(I=_e.data)||void 0===I||null===(I=I.content)||void 0===I?void 0:I.length:null==Be||null===(z=Be.data)||void 0===z||null===(z=z.content)||void 0===z?void 0:z.length)>0&&(0,re.jsx)("div",{style:{textAlign:"center",padding:"12px"},children:(0,re.jsx)("span",{style:{color:"#999"},children:"已加载全部数据"})})]}),ne&&(0,re.jsx)(ae,{open:ne,isEdit:ue,level:O,llmProvider:it,onCancel:function(){le(!1)},onSubmit:function(e){ue?gt(e):ft(e)}}),ut]})},ue=r(21600),me=r(86222),pe=r.n(me),fe=r(42268),ge=r(16658),ve=r(82404),he=r(12461),xe=r(5957),ye=r(55533),be=r(26874),we=r(95018),Me=r(82878),Ze=r(92351),je=r(10390),Pe=r(94974),ke=function(e){var t=e.isEdit,r=e.llmmodel,n=e.provider,l=e.open,o=e.level,i=e.onClose,s=e.onSubmit,d=K.A.useForm(),c=g()(d,1)[0],u=(0,b.useIntl)(),m=(0,T.u)((function(e){return e.currentOrg})),p=[{label:u.formatMessage({id:"model.type.text"}),value:L.l55},{label:u.formatMessage({id:"model.type.embedding"}),value:L.xTq},{label:u.formatMessage({id:"model.type.rerank"}),value:L.SeQ},{label:u.formatMessage({id:"model.type.vision"}),value:L.xZ8},{label:u.formatMessage({id:"model.type.code"}),value:L.rrk},{label:u.formatMessage({id:"model.type.reasoning"}),value:L.GNM},{label:u.formatMessage({id:"model.type.text2image"}),value:L.eQL},{label:u.formatMessage({id:"model.type.image2text"}),value:L.ztv},{label:u.formatMessage({id:"model.type.audio2text"}),value:L._D8},{label:u.formatMessage({id:"model.type.text2audio"}),value:L.YNO},{label:u.formatMessage({id:"model.type.text2video"}),value:L.GZK},{label:u.formatMessage({id:"model.type.video2text"}),value:L.B6M}];(0,a.useEffect)((function(){var e;t&&r&&c?c.setFieldsValue({uid:null==r?void 0:r.uid,name:null==r?void 0:r.name,nickname:null==r?void 0:r.nickname,description:null==r?void 0:r.description,type:null==r?void 0:r.type,enabled:null!==(e=null==r?void 0:r.enabled)&&void 0!==e&&e}):(te.Z.debug("form resetFields"),c.resetFields(),c.setFieldValue("type",L.l55),c.setFieldValue("enabled",!0))}),[r]);return(0,a.useEffect)((function(){}),[r]),(0,re.jsx)("div",{children:(0,re.jsx)(_.Z,{title:t?u.formatMessage({id:"model.edit"}):u.formatMessage({id:"model.create"}),width:600,onClose:i,open:l,extra:(0,re.jsxs)(j.Z,{children:[(0,re.jsx)(Z.ZP,{onClick:i,children:u.formatMessage({id:"cancel"})}),(0,re.jsx)(Z.ZP,{onClick:function(){te.Z.debug("handleSubmit"),c.validateFields().then((function(e){var a;te.Z.debug("Form values:",e);var l={uid:t?null==r?void 0:r.uid:"",name:e.name,nickname:e.nickname,description:e.description,type:e.type,enabled:null===(a=e.enabled)||void 0===a||a,providerUid:null==n?void 0:n.uid,providerType:null==n?void 0:n.type,level:o,orgUid:null==m?void 0:m.uid};te.Z.debug("llmmodelObject:",l),s(l)})).catch((function(e){te.Z.debug("Form errors:",e)}))},type:"primary",children:u.formatMessage({id:"ok"})})]}),children:(0,re.jsxs)(K.A,{form:c,name:"model",submitter:!1,children:[(0,re.jsx)(G.Z,{label:u.formatMessage({id:"model.name"}),name:"name"}),(0,re.jsx)(G.Z,{label:u.formatMessage({id:"model.nickname"}),name:"nickname"}),(0,re.jsx)(J.Z,{label:u.formatMessage({id:"model.description"}),name:"description",placeholder:u.formatMessage({id:"model.description.placeholder"}),fieldProps:{rows:3,maxLength:500,showCount:!0}}),(0,re.jsx)($.Z,{label:u.formatMessage({id:"model.type"}),name:"type",options:p,placeholder:u.formatMessage({id:"model.type.placeholder"}),rules:[{required:!0,message:u.formatMessage({id:"model.type.required"})}]}),(0,re.jsx)(W.Z,{label:u.formatMessage({id:"model.enabled",defaultMessage:"启用状态"}),name:"enabled",tooltip:u.formatMessage({id:"model.enabled.tooltip",defaultMessage:"是否启用该大模型"}),checkedChildren:u.formatMessage({id:"enabled",defaultMessage:"启用"}),unCheckedChildren:u.formatMessage({id:"disabled",defaultMessage:"禁用"})})]})})})},Ce=r(11090),Se=r(59304),Te=r(80556),Le=r(7358),Ue=r(30617),De=r(93953),Ee=r(96798),Ie=Me.Z.Text,ze=function(e){var t=e.provider,r=e.open,n=(e.level,e.onClose),l=e.onSubmit,o=e.existingModels,i=void 0===o?[]:o,s=(0,b.useIntl)(),c=(0,a.useState)(!1),m=g()(c,2),f=m[0],v=m[1],x=(0,a.useState)([]),y=g()(x,2),w=y[0],M=y[1],P=(0,a.useState)([]),k=g()(P,2),C=k[0],T=k[1],U=(0,a.useState)({current:1,pageSize:10,total:0}),D=g()(U,2),E=D[0],I=D[1],z=function(e){return i.some((function(t){return t.name===e.name}))},O=function(){var e=p()(u()().mark((function e(){var r,a,n,l,o,i,d,c,m,p,f,g,x,y,b,w,Z,j=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.length>0&&void 0!==j[0]?j[0]:E.current,a=j.length>1&&void 0!==j[1]?j[1]:E.pageSize,v(!0),e.prev=3,n={pageNumber:Math.max(0,(r||1)-1),pageSize:a||10,level:L.Hxq,providerType:t.type},e.next=7,(0,fe.LF)(n);case 7:l=e.sent,console.log("获取平台模型列表:",l,n),200===l.code?(g=(null==l?void 0:l.data)||{},x=g.content||[],M(x),y=null!==(o=null!==(i=null!==(d=null!==(c=g.totalElements)&&void 0!==c?c:g.total)&&void 0!==d?d:g.totalCount)&&void 0!==i?i:g.totalItems)&&void 0!==o?o:0,b=(null!==(m=g.number)&&void 0!==m?m:(r||1)-1)+1,w=null!==(p=null!==(f=g.size)&&void 0!==f?f:a)&&void 0!==p?p:10,I({current:b,pageSize:w,total:y}),1===(r||1)&&0===C.length&&(Z=x.filter((function(e){return z(e)})).map((function(e){return e.uid})),T(Z))):h.yw.error(l.message||s.formatMessage({id:"ai.model.import.fetchFailed"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("获取平台模型异常:",e.t0),h.yw.error(s.formatMessage({id:"ai.model.import.fetchError"}));case 16:return e.prev=16,v(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){r&&(I((function(e){return d()(d()({},e),{},{current:1})})),O(1,E.pageSize))}),[r]);var N=[{title:s.formatMessage({id:"ai.model.import.modelName"}),dataIndex:"name",key:"name",render:function(e,t){return(0,re.jsxs)(j.Z,{children:[e,z(t)&&(0,re.jsx)(S.Z,{color:"green",children:s.formatMessage({id:"ai.model.import.alreadyExists"})})]})}},{title:s.formatMessage({id:"ai.model.import.modelNickname"}),dataIndex:"nickname",key:"nickname"},{title:s.formatMessage({id:"ai.model.import.modelDescription"}),dataIndex:"description",key:"description",ellipsis:!0,render:function(e){return(0,re.jsx)(Ze.Z,{placement:"topLeft",zIndex:2e3,styles:{body:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"60vw"}},getPopupContainer:function(e){var t;return(null==e||null===(t=e.ownerDocument)||void 0===t?void 0:t.body)||document.body},title:e||"-",children:(0,re.jsx)("span",{children:e||"-"})})}}],R={selectedRowKeys:C,onChange:function(e){T(e)}};return(0,re.jsxs)(_.Z,{title:s.formatMessage({id:"ai.model.import.title"},{provider:t.nickname}),width:700,open:r,onClose:n,destroyOnHidden:!0,footer:(0,re.jsxs)(j.Z,{children:[(0,re.jsx)(Z.ZP,{onClick:n,children:s.formatMessage({id:"ai.model.import.cancel"})}),(0,re.jsx)(Z.ZP,{type:"primary",onClick:function(){if(0!==C.length){var e=w.filter((function(e){return C.includes(e.uid)}));l(e)}else h.yw.warning(s.formatMessage({id:"ai.model.import.noSelection"}))},disabled:0===C.length,children:s.formatMessage({id:"ai.model.import.importSelected"},{count:C.length})})]}),children:[(0,re.jsxs)(Ie,{type:"secondary",children:[s.formatMessage({id:"ai.model.import.description"},{provider:t.nickname}),i.length>0&&(0,re.jsx)(Ie,{type:"secondary",style:{marginLeft:8},children:s.formatMessage({id:"ai.model.import.existingTip"})})]}),(0,re.jsx)("div",{style:{marginTop:16},children:(0,re.jsx)(De.Z,{spinning:f,children:(0,re.jsx)(Ee.Z,{rowKey:"uid",columns:N,dataSource:w,pagination:{current:E.current,pageSize:E.pageSize,total:E.total,showSizeChanger:!0},rowSelection:R,size:"small",onChange:function(e){var t=(null==e?void 0:e.current)||1,r=(null==e?void 0:e.pageSize)||E.pageSize;O(t,r)}})})}),0===w.length&&!f&&(0,re.jsx)("div",{style:{textAlign:"center",margin:"20px 0"},children:(0,re.jsx)(Ie,{type:"secondary",children:s.formatMessage({id:"ai.model.import.noPlatformModels"})})})]})},Oe=function(e){var t=e.provider,r=e.level,n=(0,b.useIntl)(),l=(0,x.Z)().isDarkMode,o=(0,a.useState)(!0),i=g()(o,2),s=i[0],c=i[1],m=(0,a.useState)(!0),f=g()(m,2),M=f[0],S=f[1],E=(0,y.Z)().translateString,I=(0,a.useState)(),z=g()(I,2),O=z[0],N=z[1],R=(0,a.useState)(!1),q=g()(R,2),F=q[0],V=q[1],H=(0,a.useState)(!1),K=g()(H,2),$=K[0],G=K[1],J=(0,T.u)((function(e){return e.currentOrg})),W=(0,a.useState)([]),X=g()(W,2),_=X[0],Y=X[1],Q=(0,B.A)((function(e){return e.upgradeLlmProvider})),ee=w.Z.useModal(),ne=g()(ee,2),le=ne[0],oe=ne[1],ie=(0,a.useState)(!1),se=g()(ie,2),de=se[0],ce=se[1],ue=(0,a.useState)(""),me=g()(ue,2),De=me[0],Ee=me[1],Ie=(0,a.useState)(!0),Oe=g()(Ie,2),Ne=Oe[0],Re=Oe[1],qe=(0,a.useState)(!1),Fe=g()(qe,2),Ae=Fe[0],Be=Fe[1],Ve=(0,a.useState)(!1),He=g()(Ve,2),Ke=He[0],$e=He[1],Ge=(0,a.useState)(!1),Je=g()(Ge,2),We=Je[0],Xe=Je[1],_e=(0,a.useState)({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," / ").concat(e)},pageSizeOptions:["10","20","50","100"]}),Ye=g()(_e,2),Qe=Ye[0],et=Ye[1],tt=(0,a.useState)(window.innerHeight),rt=g()(tt,2),at=(rt[0],rt[1]);(0,a.useEffect)((function(){var e=function(){at(window.innerHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var nt=(0,B.A)((function(e){var t;return(null===(t=e.llmproviderResult)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.content)||[]})).find((function(e){return e.uid===(null==t?void 0:t.uid)}))||t,lt=function(){var e=p()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.Z.debug("delete robot",t),h.yw.loading(n.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,fe.Oh)(t);case 4:r=e.sent,te.Z.debug("delete robot response",r),200===r.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),ot(Qe.current,Qe.pageSize,De)):(h.yw.destroy(),h.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=p()(u()().mark((function e(){var t,a,n,l,o,i=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:1,a=i.length>1&&void 0!==i[1]?i[1]:10,n=i.length>2&&void 0!==i[2]?i[2]:De,te.Z.debug("requestModels",{page:t,size:a,search:n}),Be(!0),l={pageNumber:t-1,pageSize:a,providerUid:null==nt?void 0:nt.uid,orgUid:null==J?void 0:J.uid,level:r,searchText:n},e.next=8,(0,fe.LF)(l);case 8:o=e.sent,te.Z.debug("queryLlmModelsByOrg: ",o,l),200===o.code?(Y(null==o?void 0:o.data.content),et((function(e){return d()(d()({},e),{},{current:t,pageSize:a,total:(null==o?void 0:o.data.totalElements)||0})})),Be(!1)):(Be(!1),h.yw.error(o.message));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=p()(u()().mark((function e(){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xe(!0),e.prev=1,e.next=4,ot(Qe.current,Qe.pageSize,De);case 4:return e.prev=4,Xe(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}(),st=function(e){Ee(e),ot(1,Qe.pageSize,e)},dt=function(){var e=p()(u()().mark((function e(){var t,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te.Z.debug("refreshProvider"),null!=nt&&nt.uid){e.next=4;break}return h.yw.error(n.formatMessage({id:"provider.uid.notexist"})),e.abrupt("return");case 4:return $e(!0),h.yw.loading(n.formatMessage({id:"loading",defaultMessage:"Loading"})),t={uid:nt.uid,orgUid:null==J?void 0:J.uid,level:r},e.prev=7,e.next=10,(0,v.N0)(t);case 10:a=e.sent,te.Z.debug("queryLlmProviderByUid: ",a,t),200===a.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"provider.refresh.success"})),Q(null==a?void 0:a.data)):(h.yw.destroy(),h.yw.error(a.message)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(7),h.yw.destroy(),h.yw.error(n.formatMessage({id:"provider.refresh.failed"})),console.error("refreshProvider error:",e.t0);case 20:return e.prev=20,$e(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[7,15,20,23]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){ot(1,10)}),[]),(0,a.useEffect)((function(){var e=function(e){if(!(F||$||de)&&(e.ctrlKey||e.metaKey))switch(e.key){case"r":e.preventDefault(),it();break;case"n":e.preventDefault(),c(!1),V(!0)}};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[Qe.current,Qe.pageSize,F,$,de]);var ct=function(){V(!1)},ut=function(){G(!1)},mt=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te.Z.debug("handleSubmitDrawer:",t),!s){e.next=9;break}return e.next=4,(0,fe.WS)(t);case 4:r=e.sent,te.Z.debug("updateLlmModel:",null==r?void 0:r.data),200===r.code?(h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),ot(Qe.current,Qe.pageSize,De),ct()):h.yw.error(r.message),e.next=14;break;case 9:return e.next=11,(0,fe.Jr)(t);case 11:a=e.sent,te.Z.debug("createLlmModel:",null==a?void 0:a.data),200===a.code?(h.yw.success(n.formatMessage({id:"create.success",defaultMessage:"create success"})),ot(1,Qe.pageSize,De),ct()):h.yw.error(a.message);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=p()(u()().mark((function e(t){var a,l,o,i,s,d,c,m;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te.Z.debug("导入选中的模型:",t),t&&0!==t.length){e.next=5;break}return h.yw.warning(n.formatMessage({id:"model.import.none.selected"})),ut(),e.abrupt("return");case 5:if(a=_.map((function(e){return e.name})),l=t.filter((function(e){return!a.includes(e.name)})),0!==l.length){e.next=11;break}return h.yw.info(n.formatMessage({id:"model.import.already.exist"})),ut(),e.abrupt("return");case 11:h.yw.loading("".concat(n.formatMessage({id:"loading"})).concat(l.length).concat(n.formatMessage({id:"model.add"}),"...")),e.prev=12,o=0,i=pe()(l),e.prev=15,i.s();case 17:if((s=i.n()).done){e.next=27;break}return d=s.value,c={name:d.name,nickname:d.nickname,description:d.description,type:d.type,enabled:!0,providerUid:nt.uid,orgUid:null==J?void 0:J.uid,level:r},e.next=22,(0,fe.Jr)(c);case 22:m=e.sent,te.Z.debug("createLlmModel:",m,c),200===m.code&&o++;case 25:e.next=17;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(15),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:h.yw.destroy(),o>0?(h.yw.success(n.formatMessage({id:"model.import.success"},{count:o})),ot(1,Qe.pageSize,De)):h.yw.warning(n.formatMessage({id:"model.import.none.success"})),e.next=44;break;case 39:e.prev=39,e.t1=e.catch(12),console.error("导入模型出错:",e.t1),h.yw.destroy(),h.yw.error(n.formatMessage({id:"model.import.failed"}));case 44:ut();case 45:case"end":return e.stop()}}),e,null,[[12,39],[15,29,32,35]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.Z.debug("handleUpdateProvider:",nt),r=d()(d()({},nt),{},{status:t?L.KY:L.L2A}),e.next=4,(0,v.fx)(r);case 4:a=e.sent,te.Z.debug("updateLlmProvider:",r,a),200===a.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),Q(null==a?void 0:a.data)):(h.yw.destroy(),h.yw.error(a.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(e){var t;te.Z.debug("list on delete",e),t=e,le.confirm({title:n.formatMessage({id:"deleteTip"}),icon:(0,re.jsx)(U.Z,{}),content:"".concat(n.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(E(t.nickname),"】？"),onOk:function(){lt(t)},onCancel:function(){},okText:n.formatMessage({id:"ok"}),cancelText:n.formatMessage({id:"cancel"})})},vt=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.Z.debug("switch enabled to ".concat(t)),r=d()(d()({},nt),{},{enabled:t}),h.yw.loading(n.formatMessage({id:"updating"})),e.next=5,(0,v.fx)(r);case 5:a=e.sent,te.Z.debug("updateLlmProvider enabled:",r,a),200===a.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),Q(null==a?void 0:a.data)):(h.yw.destroy(),h.yw.error(a.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=p()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.yw.loading(n.formatMessage({id:"updating"})),e.next=3,(0,v.fx)(t);case 3:r=e.sent,te.Z.debug("updateLlmProvider:",t,r),200===r.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),Q(null==r?void 0:r.data),ce(!1),null!=r&&r.data.apiKey&&Re(!0)):(h.yw.destroy(),h.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=p()(u()().mark((function e(t,a){var l,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.Z.debug("switch model enabled to ".concat(t),a),l=d()(d()({},a),{},{enabled:t,providerUid:null==nt?void 0:nt.uid,orgUid:null==J?void 0:J.uid,level:r}),h.yw.loading(n.formatMessage({id:"updating"})),e.next=5,(0,fe.WS)(l);case 5:o=e.sent,te.Z.debug("updateLlmModel enabled:",l,o),200===o.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),Y((function(e){return e.map((function(e){return e.uid===a.uid?d()(d()({},e),{},{enabled:t}):e}))}))):(h.yw.destroy(),h.yw.error(o.message));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),yt=function(){var e=p()(u()().mark((function e(t,r){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:ve.ZP.success(n.formatMessage({id:"copy.success",defaultMessage:"复制成功"},{field:r})),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("复制失败:",e.t0),ve.ZP.error(n.formatMessage({id:"copy.failed",defaultMessage:"复制失败"}));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}();return(0,re.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,re.jsxs)("div",{style:{flexShrink:0,padding:"16px 24px",borderBottom:"1px solid #f0f0f0"},children:[(0,re.jsxs)("h1",{children:[(0,re.jsx)(C.Z,{src:null==nt?void 0:nt.logo}),(0,re.jsx)("span",{style:{marginLeft:"12px"},children:null==nt?void 0:nt.nickname}),(0,re.jsx)(he.Z,{checked:null==nt?void 0:nt.enabled,onChange:vt,checkedChildren:n.formatMessage({id:"provider.enabled"}),unCheckedChildren:n.formatMessage({id:"provider.disabled"}),style:{marginLeft:"8px"}}),(0,re.jsx)(Z.ZP,{type:"text",icon:(0,re.jsx)(Ce.Z,{}),onClick:function(){window.open(null==nt?void 0:nt.webUrl,"_blank")}}),(0,re.jsx)(Z.ZP,{type:"text",icon:(0,re.jsx)(Se.Z,{}),onClick:function(){S(!0),ce(!0)}}),(0,re.jsx)(Z.ZP,{type:"text",icon:(0,re.jsx)(Te.Z,{}),loading:Ke,onClick:dt})]}),(null==nt?void 0:nt.description)&&(0,re.jsx)("div",{style:{marginBottom:"16px",color:"#666",fontSize:"14px"},children:nt.description}),(0,re.jsx)(xe.Z,{message:n.formatMessage({id:"provider.config.alert"}),type:null!=nt&&nt.enabled?"success":"warning",showIcon:!0,style:{marginBottom:"16px"}}),(0,re.jsx)(ye.Z,{size:"small",style:{marginBottom:"16px"},items:[{key:"config",label:n.formatMessage({id:"provider.config.info",defaultMessage:"配置信息"}),extra:(0,re.jsx)(Z.ZP,{type:"primary",size:"small",icon:(0,re.jsx)(Se.Z,{}),onClick:function(e){e.stopPropagation(),S(!0),ce(!0)},children:n.formatMessage({id:"provider.edit"})}),children:(0,re.jsxs)(be.Z,{gutter:[16,12],children:[(0,re.jsx)(we.Z,{xs:24,sm:24,md:12,lg:8,children:(0,re.jsxs)("div",{className:"provider-field-item",children:[(0,re.jsx)("div",{className:"field-label",children:n.formatMessage({id:"ai.provider.baseUrl"})}),(0,re.jsxs)("div",{className:"field-value",children:[(0,re.jsx)(Me.Z.Text,{copyable:!1,ellipsis:{tooltip:null==nt?void 0:nt.baseUrl},style:{maxWidth:"calc(100% - 32px)"},children:(null==nt?void 0:nt.baseUrl)||"-"}),(null==nt?void 0:nt.baseUrl)&&(0,re.jsx)(Ze.Z,{title:n.formatMessage({id:"copy",defaultMessage:"复制"}),children:(0,re.jsx)(Z.ZP,{type:"text",size:"small",icon:(0,re.jsx)(Le.Z,{}),onClick:function(){return yt(nt.baseUrl,"Base URL")},style:{flexShrink:0}})})]})]})}),(0,re.jsx)(we.Z,{xs:24,sm:24,md:12,lg:8,children:(0,re.jsxs)("div",{className:"provider-field-item",children:[(0,re.jsx)("div",{className:"field-label",children:n.formatMessage({id:"ai.provider.apiKey"})}),(0,re.jsxs)("div",{className:"field-value",children:[(0,re.jsx)(Me.Z.Text,{copyable:!1,ellipsis:{tooltip:null!=nt&&nt.apiKey?"".concat(nt.apiKey.slice(0,3)).concat("*".repeat(20)):""},style:{maxWidth:"calc(100% - 32px)"},children:null!=nt&&nt.apiKey?"".concat(nt.apiKey.slice(0,3)).concat("*".repeat(20)):"-"}),(null==nt?void 0:nt.apiKey)&&(0,re.jsx)(Ze.Z,{title:n.formatMessage({id:"copy",defaultMessage:"复制"}),children:(0,re.jsx)(Z.ZP,{type:"text",size:"small",icon:(0,re.jsx)(Le.Z,{}),onClick:function(){return yt(nt.apiKey,"API Key")},style:{flexShrink:0}})})]})]})}),(null==nt?void 0:nt.cozeBotId)&&(0,re.jsx)(we.Z,{xs:24,sm:24,md:12,lg:8,children:(0,re.jsxs)("div",{className:"provider-field-item",children:[(0,re.jsx)("div",{className:"field-label",children:n.formatMessage({id:"ai.provider.cozeBotId"})}),(0,re.jsxs)("div",{className:"field-value",children:[(0,re.jsx)(Me.Z.Text,{copyable:!1,ellipsis:{tooltip:nt.cozeBotId},style:{maxWidth:"calc(100% - 32px)"},children:nt.cozeBotId}),(0,re.jsx)(Ze.Z,{title:n.formatMessage({id:"copy",defaultMessage:"复制"}),children:(0,re.jsx)(Z.ZP,{type:"text",size:"small",icon:(0,re.jsx)(Le.Z,{}),onClick:function(){return yt(nt.cozeBotId,"Coze Bot ID")},style:{flexShrink:0}})})]})]})}),(null==nt?void 0:nt.ragflowType)&&(0,re.jsx)(we.Z,{xs:24,sm:24,md:12,lg:8,children:(0,re.jsxs)("div",{className:"provider-field-item",children:[(0,re.jsx)("div",{className:"field-label",children:n.formatMessage({id:"ai.provider.ragflowType"})}),(0,re.jsxs)("div",{className:"field-value",children:[(0,re.jsx)(Me.Z.Text,{copyable:!1,ellipsis:{tooltip:nt.ragflowType},style:{maxWidth:"calc(100% - 32px)"},children:nt.ragflowType}),(0,re.jsx)(Ze.Z,{title:n.formatMessage({id:"copy",defaultMessage:"复制"}),children:(0,re.jsx)(Z.ZP,{type:"text",size:"small",icon:(0,re.jsx)(Le.Z,{}),onClick:function(){return yt(nt.ragflowType,"Ragflow Type")},style:{flexShrink:0}})})]})]})}),(null==nt?void 0:nt.ragflowId)&&(0,re.jsx)(we.Z,{xs:24,sm:24,md:12,lg:8,children:(0,re.jsxs)("div",{className:"provider-field-item",children:[(0,re.jsx)("div",{className:"field-label",children:n.formatMessage({id:"ai.provider.ragflowId"})}),(0,re.jsxs)("div",{className:"field-value",children:[(0,re.jsx)(Me.Z.Text,{copyable:!1,ellipsis:{tooltip:nt.ragflowId},style:{maxWidth:"calc(100% - 32px)"},children:nt.ragflowId}),(0,re.jsx)(Ze.Z,{title:n.formatMessage({id:"copy",defaultMessage:"复制"}),children:(0,re.jsx)(Z.ZP,{type:"text",size:"small",icon:(0,re.jsx)(Le.Z,{}),onClick:function(){return yt(nt.ragflowId,"Ragflow ID")},style:{flexShrink:0}})})]})]})})]})}]}),!(null!=nt&&nt.apiKey)&&Ne&&(0,re.jsx)(xe.Z,{message:n.formatMessage({id:"provider.apikey.empty.warning",defaultMessage:"API Key未配置"}),description:n.formatMessage({id:"provider.apikey.empty.description",defaultMessage:"请配置API Key以正常使用AI服务"}),type:"warning",showIcon:!0,closable:!0,onClose:function(){return Re(!1)},style:{marginBottom:"16px"},action:(0,re.jsx)(Z.ZP,{size:"small",type:"primary",onClick:function(){S(!0),ce(!0)},children:n.formatMessage({id:"provider.config.now",defaultMessage:"立即配置"})})}),r===L.Hxq&&(0,re.jsx)(he.Z,{checkedChildren:n.formatMessage({id:"provider.online"}),unCheckedChildren:n.formatMessage({id:"provider.offline"}),defaultChecked:(null==nt?void 0:nt.status)===L.KY,onChange:function(e){te.Z.debug("switch to ".concat(e)),ft(e)}}),(0,re.jsx)(je.Z,{orientation:"left",children:n.formatMessage({id:"model.list"})}),(0,re.jsxs)(j.Z,{wrap:!0,children:[(0,re.jsx)(Ze.Z,{title:"".concat(n.formatMessage({id:"model.add"})," (Ctrl/Cmd + N)"),children:(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(D.Z,{}),type:"primary",onClick:function(){c(!1),V(!0)},children:n.formatMessage({id:"model.add"})})}),"ollama"!==nt.type&&r===L.whQ&&(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(Ue.Z,{}),onClick:function(){return G(!0)},children:n.formatMessage({id:"model.import"})}),(0,re.jsx)(Ze.Z,{title:"".concat(n.formatMessage({id:"model.refresh"})," (Ctrl/Cmd + R)"),children:(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(Te.Z,{}),loading:We,onClick:it,children:n.formatMessage({id:"model.refresh"})})}),(0,re.jsxs)(j.Z.Compact,{style:{maxWidth:300},children:[(0,re.jsx)(P.Z,{placeholder:n.formatMessage({id:"model.search.placeholder",defaultMessage:"搜索模型名称或描述..."}),value:De,onChange:function(e){var t=e.target.value;Ee(t),t||(Ee(""),ot(1,Qe.pageSize,""))},onPressEnter:function(e){e.preventDefault(),st(e.currentTarget.value)},allowClear:!0}),(0,re.jsx)(Z.ZP,{type:"primary",icon:(0,re.jsx)(A.Z,{}),"aria-label":n.formatMessage({id:"common.search",defaultMessage:"搜索"}),onClick:function(){return st(De)}})]})]})]}),(0,re.jsx)("div",{className:"llm-model-list-container",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"16px 24px 0 24px",display:"flex",flexDirection:"column"},children:(0,re.jsx)(k.Z,{itemLayout:"horizontal",className:"llm-model-list",loading:Ae,dataSource:_,pagination:!1,renderItem:function(e,t){return(0,re.jsx)(k.Z.Item,{style:(null==O?void 0:O.uid)===e.uid?{backgroundColor:l?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){N(e)},actions:[(0,re.jsx)(Z.ZP,{type:"link",onClick:function(){return t=e,te.Z.debug("list on edit",t),N(t),c(!0),void V(!0);var t},children:n.formatMessage({id:"edit",defaultMessage:"Edit"})},"edit"),(0,re.jsx)(Z.ZP,{type:"link",onClick:function(){return gt(e)},children:n.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})},"delete")],children:(0,re.jsx)(k.Z.Item.Meta,{style:{marginLeft:"15px"},title:(0,re.jsxs)(j.Z,{children:[(0,re.jsxs)("span",{style:{color:"#999",fontWeight:"normal",minWidth:"30px",fontSize:"14px"},children:[(Qe.current-1)*Qe.pageSize+t+1,"."]}),(0,re.jsx)("span",{children:e.nickname}),(0,ge.Rb)(e.type),(0,re.jsx)(he.Z,{size:"small",checked:e.enabled,onChange:function(t){return xt(t,e)},checkedChildren:n.formatMessage({id:"model.enabled"}),unCheckedChildren:n.formatMessage({id:"model.disabled"})},"enabled")]}),description:(0,re.jsxs)("div",{children:[(0,re.jsx)(Me.Z.Text,{type:"secondary",children:e.name}),e.description&&(0,re.jsx)("div",{style:{marginTop:"4px"},children:(0,re.jsx)(Me.Z.Text,{type:"secondary",ellipsis:{tooltip:e.description},children:e.description})})]})})})}})}),(0,re.jsx)("div",{style:{flexShrink:0,padding:"16px 24px 16px 24px",borderTop:l?"1px solid #333":"1px solid #f0f0f0",backgroundColor:l?"#141414":"#f5f5f5",display:"flex",justifyContent:"center"},children:_.length>0&&(0,re.jsx)(Pe.Z,{current:Qe.current,pageSize:Qe.pageSize,total:Qe.total,showSizeChanger:Qe.showSizeChanger,showQuickJumper:Qe.showQuickJumper,showTotal:Qe.showTotal,pageSizeOptions:Qe.pageSizeOptions,onChange:function(e,t){te.Z.debug("Pagination onChange:",{page:e,pageSize:t}),ot(e,t,De)},onShowSizeChange:function(e,t){te.Z.debug("Pagination onShowSizeChange:",{current:e,size:t}),ot(1,t,De)}})}),F&&(0,re.jsx)(ke,{isEdit:s,llmmodel:O,provider:nt,open:F,level:r,onClose:ct,onSubmit:mt}),$&&(0,re.jsx)(ze,{provider:nt,open:$,level:r,onClose:ut,onSubmit:pt,existingModels:_}),de&&(0,re.jsx)(ae,{open:de,isEdit:M,level:r,llmProvider:nt,onCancel:function(){return ce(!1)},onSubmit:ht}),oe]})},Ne=r(94527),Re=r(77274),qe=r(82690),Fe=r(54881),Ae=r(43275),Be=r(98280),Ve=r(93689),He=r(54495),Ke=function(e,t,r){var a=function(e,t,r){var a=e.toLowerCase(),n=(null==t?void 0:t.toLowerCase())||"",l=(null==r?void 0:r.toLowerCase())||"";return a.includes("llama")||a.includes("mistral")||a.includes("gemma")||a.includes("phi")?"chat":a.includes("embedding")||a.includes("embed")||a.includes("instructor")?"embedding":a.includes("vision")||a.includes("llava")||a.includes("bakllava")||a.includes("qwen-vl")?"vision":a.includes("code")||a.includes("codellama")||a.includes("wizardcoder")?"code":a.includes("rerank")||a.includes("bge-rerank")?"rerank":a.includes("audio")||a.includes("whisper")?"audio2text":a.includes("text2image")||a.includes("stable-diffusion")?"text2image":n.includes("llama")||n.includes("mistral")||n.includes("gemma")?"chat":n.includes("embedding")?"embedding":n.includes("vision")||n.includes("multimodal")?"vision":n.includes("code")?"code":(l.includes("gguf")||l.includes("ggml"),"chat")}(e,t,r),n="default",l=a;switch(a){case"chat":n="blue",l="对话";break;case"embedding":n="purple",l="向量嵌入";break;case"vision":n="green",l="视觉";break;case"code":n="cyan",l="代码";break;case"rerank":n="cyan",l="排序";break;case"audio2text":n="volcano",l="语音转文本";break;case"text2image":n="magenta",l="文本生成图像";break;default:n="default",l=a}return(0,re.jsx)(S.Z,{color:n,children:l})},$e=function(e){var t,r,n,l,o,i,s,d,c,u,m,p,f,v=e.visible,h=e.onClose,x=e.modelName,y=e.modelDetails,w=e.loading,M=e.onRefresh,C=e.onPull,T=e.onDelete,L=(e.isRemoteModel,e.isLocalModel),U=e.pullingModelName,D=e.localModelNames,E=void 0===D?[]:D,I=(0,b.useIntl)(),z=(0,a.useState)(""),O=g()(z,2),N=O[0],R=O[1],q=y&&"model"in y&&"tags"in y,F=y&&"license"in y&&"modelfile"in y,B=E.includes(x);return(0,re.jsxs)(_.Z,{title:I.formatMessage({id:"ai.ollama.modelDetails.title"},{modelName:x}),width:600,placement:"right",onClose:h,open:v,zIndex:1002,children:[w?(0,re.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80%"},children:(0,re.jsx)(De.Z,{tip:I.formatMessage({id:"ai.ollama.modelDetails.loading"}),spinning:!0,children:(0,re.jsx)("div",{style:{padding:"50px",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",minHeight:"200px"}})})}):y?(0,re.jsxs)(re.Fragment,{children:[q&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(Be.Z,{bordered:!0,column:1,title:I.formatMessage({id:"ai.ollama.modelDetails.basicInfo"}),styles:{label:{width:"120px"}},children:[(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.name"}),children:(0,re.jsxs)(j.Z,{children:[(null===(t=y.model)||void 0===t?void 0:t.name)||x,B&&(0,re.jsx)(S.Z,{color:"success",children:I.formatMessage({id:"ai.ollama.modelDetails.installed"})})]})}),(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.type"}),children:Ke(x)}),(null===(r=y.model)||void 0===r?void 0:r.description)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.description"}),children:y.model.description}),(null===(n=y.model)||void 0===n?void 0:n.lastUpdated)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.lastUpdated"}),children:y.model.lastUpdated}),(null===(l=y.model)||void 0===l?void 0:l.pullCount)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.pullCount"}),children:y.model.pullCount}),(null===(o=y.model)||void 0===o?void 0:o.totalTags)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.totalTags"}),children:y.model.totalTags}),(null===(i=y.model)||void 0===i?void 0:i.popularTags)&&y.model.popularTags.length>0&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.popularTags"}),children:(0,re.jsx)(j.Z,{wrap:!0,children:y.model.popularTags.map((function(e,t){return(0,re.jsx)(S.Z,{color:"blue",children:e},t)}))})}),(null===(s=y.model)||void 0===s?void 0:s.modified_at)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.modifiedAt"}),children:(0,se.mr)(y.model.modified_at.toString())})]}),y.tags&&y.tags.length>0&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(je.Z,{orientation:"left",children:I.formatMessage({id:"ai.ollama.modelDetails.availableVersions"})}),(0,re.jsx)(P.Z,{placeholder:I.formatMessage({id:"ai.ollama.modelDetails.searchVersions"}),prefix:(0,re.jsx)(A.Z,{}),value:N,onChange:function(e){return R(e.target.value)},style:{marginBottom:16},allowClear:!0}),(0,re.jsx)(k.Z,{itemLayout:"horizontal",dataSource:function(){if(!q||!y.tags)return[];var e=y.tags;if(!N)return e;var t=N.toLowerCase();return e.filter((function(e){return e.tag.toLowerCase().includes(t)||e.name.toLowerCase().includes(t)}))}(),renderItem:function(e){var t=function(e,t){var r="".concat(e,":").concat(t);return E.includes(r)}(x,e.tag),r="".concat(x,":").concat(e.tag);return(0,re.jsxs)(k.Z.Item,{children:[(0,re.jsx)(k.Z.Item.Meta,{title:(0,re.jsxs)(j.Z,{children:[(0,re.jsx)("span",{children:e.name}),(0,re.jsx)(S.Z,{color:"green",children:e.tag}),Ke(x),e.size&&(0,re.jsx)(S.Z,{color:"orange",children:e.size}),t&&(0,re.jsx)(S.Z,{color:"success",children:I.formatMessage({id:"ai.ollama.modelDetails.installed"})})]}),description:(0,re.jsxs)("span",{children:[I.formatMessage({id:"ai.ollama.modelDetails.lastUpdated"}),": ",e.lastUpdated]})}),(0,re.jsx)(j.Z,{children:(0,re.jsx)(Ze.Z,{title:t?I.formatMessage({id:"ai.ollama.modelDetails.versionExists"}):I.formatMessage({id:"ai.ollama.modelDetails.pullThisVersion"}),children:(0,re.jsx)(Z.ZP,{type:"primary",size:"small",icon:t?(0,re.jsx)(Ve.Z,{}):(0,re.jsx)(He.Z,{}),loading:U===r,onClick:function(){C(r)},disabled:t,children:t?I.formatMessage({id:"ai.ollama.modelDetails.installed"}):I.formatMessage({id:"ai.ollama.modelDetails.pullVersion"})})})})]})}})]})]}),F&&(0,re.jsxs)(Be.Z,{bordered:!0,column:1,title:I.formatMessage({id:"ai.ollama.modelDetails.localModel"}),styles:{label:{width:"120px"}},children:[(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.type"}),children:Ke(x,null===(d=y.details)||void 0===d?void 0:d.family,null===(c=y.details)||void 0===c?void 0:c.format)}),(null===(u=y.details)||void 0===u?void 0:u.format)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.modelFormat"}),children:y.details.format}),(null===(m=y.details)||void 0===m?void 0:m.family)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.modelFamily"}),children:y.details.family}),(null===(p=y.details)||void 0===p?void 0:p.parameter_size)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.parameterSize"}),children:y.details.parameter_size}),(null===(f=y.details)||void 0===f?void 0:f.quantization_level)&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.quantizationLevel"}),children:y.details.quantization_level}),y.system&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.systemInfo"}),children:y.system}),y.template&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.template"}),children:(0,re.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:y.template})}),y.modelfile&&(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.modelfile"}),children:(0,re.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:y.modelfile})}),(0,re.jsx)(Be.Z.Item,{label:I.formatMessage({id:"ai.ollama.modelDetails.license"}),children:y.license})]})]}):(0,re.jsx)(xe.Z,{message:I.formatMessage({id:"ai.ollama.modelDetails.error"}),type:"warning"}),(0,re.jsx)(je.Z,{}),(0,re.jsxs)(j.Z,{children:[!w&&(0,re.jsx)(Z.ZP,{type:"primary",onClick:function(){return M(x)},icon:(0,re.jsx)(Te.Z,{}),children:I.formatMessage({id:"ai.ollama.modelDetails.refresh"})}),L&&(0,re.jsx)(Ae.Z,{title:I.formatMessage({id:"ai.ollama.modelDetails.delete.confirm"}),description:I.formatMessage({id:"ai.ollama.modelDetails.delete.description"},{modelName:x}),onConfirm:function(){T(x),h()},okText:I.formatMessage({id:"ai.ollama.modelDetails.delete.ok"}),cancelText:I.formatMessage({id:"ai.ollama.modelDetails.delete.cancel"}),children:(0,re.jsx)(Z.ZP,{type:"primary",danger:!0,icon:(0,re.jsx)(Fe.Z,{}),children:I.formatMessage({id:"ai.ollama.modelDetails.delete"})})})]})]})},Ge=function(e){var t=e.visible,r=e.onClose,n=e.models,l=e.loading,o=e.onRefresh,i=e.onModelDetails,s=e.onPull,d=e.pullingModelName,c=e.localModelNames,u=void 0===c?[]:c,m=(0,b.useIntl)(),p=(0,a.useState)(""),f=g()(p,2),v=f[0],h=f[1],x=n.filter((function(e){var t=v.toLowerCase();return e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.popularTags&&e.popularTags.some((function(e){return e.toLowerCase().includes(t)}))}));return(0,re.jsxs)(_.Z,{title:m.formatMessage({id:"ai.ollama.title"}),width:600,placement:"right",onClose:r,open:t,zIndex:1001,children:[(0,re.jsxs)(j.Z,{direction:"vertical",style:{width:"100%",marginBottom:16},children:[(0,re.jsxs)(j.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(Te.Z,{}),loading:l,onClick:o,children:m.formatMessage({id:"ai.ollama.refreshRemote"})}),(0,re.jsx)("span",{style:{color:"#999",fontSize:"14px"},children:m.formatMessage({id:"ai.ollama.modelDetails.modelCount"},{filteredCount:x.length,totalCount:n.length})})]}),(0,re.jsx)(P.Z,{placeholder:m.formatMessage({id:"ai.ollama.modelDetails.searchModels"}),prefix:(0,re.jsx)(A.Z,{}),onChange:function(e){return h(e.target.value)},allowClear:!0})]}),(0,re.jsx)(k.Z,{itemLayout:"vertical",loading:l,dataSource:x,renderItem:function(e){var t,r,a=(r=e.name,u.includes(r));return(0,re.jsx)(k.Z.Item,{extra:(0,re.jsxs)(j.Z,{children:[(0,re.jsx)(Z.ZP,{type:"default",icon:(0,re.jsx)(qe.Z,{}),onClick:function(){return i(e.name)},style:{marginRight:8},children:m.formatMessage({id:"ai.ollama.modelDetails.details"})}),(0,re.jsx)(Ze.Z,{title:a?m.formatMessage({id:"ai.ollama.modelDetails.modelExistsTooltip"}):m.formatMessage({id:"ai.ollama.modelDetails.modelNotExistsTooltip"}),children:(0,re.jsx)(Z.ZP,{type:"primary",icon:a?(0,re.jsx)(Ve.Z,{}):(0,re.jsx)(He.Z,{}),loading:d===e.name,onClick:function(){return s(e.name)},disabled:a,children:a?m.formatMessage({id:"ai.ollama.modelDetails.installed"}):m.formatMessage({id:"ai.ollama.modelDetails.pullModel"})})})]}),children:(0,re.jsx)(k.Z.Item.Meta,{title:(0,re.jsxs)(j.Z,{children:[(0,re.jsx)("strong",{children:e.name}),Ke(e.name),a&&(0,re.jsx)(S.Z,{color:"success",children:m.formatMessage({id:"ai.ollama.modelDetails.installed"})})]}),description:(0,re.jsxs)(j.Z,{direction:"vertical",style:{width:"100%"},children:[(0,re.jsxs)(j.Z,{children:[e.pullCount&&(0,re.jsx)(S.Z,{color:"cyan",children:m.formatMessage({id:"ai.ollama.modelDetails.downloads"},{count:e.pullCount})}),e.lastUpdated&&(0,re.jsx)(S.Z,{color:"orange",children:m.formatMessage({id:"ai.ollama.modelDetails.updated"},{time:e.lastUpdated})})]}),(0,re.jsx)("div",{children:e.description||m.formatMessage({id:"ai.ollama.modelDetails.noDescription"})}),(0,re.jsx)(j.Z,{style:{marginTop:8},children:null===(t=e.popularTags)||void 0===t?void 0:t.map((function(e,t){return(0,re.jsx)(S.Z,{color:"blue",children:e},t)}))})]})})})}})]})},Je=function(e){var t=e.provider,r=e.level,n=(0,b.useIntl)(),l=(0,x.Z)().isDarkMode,o=(0,a.useState)(!1),i=g()(o,2),s=i[0],c=i[1],m=(0,a.useState)(!1),f=g()(m,2),y=f[0],w=f[1],M=(0,a.useState)(!1),P=g()(M,2),T=P[0],L=P[1],U=(0,a.useState)([]),D=g()(U,2),E=D[0],I=D[1],z=(0,a.useState)(!1),O=g()(z,2),N=O[0],R=O[1],q=(0,B.A)((function(e){return e.upgradeLlmProvider})),F=(0,a.useState)(),A=g()(F,2),V=A[0],H=A[1],K=(0,B.A)((function(e){var t;return(null===(t=e.llmproviderResult)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.content)||[]})).find((function(e){return e.uid===(null==t?void 0:t.uid)}))||t,$=(0,a.useState)(!1),G=g()($,2),J=G[0],W=G[1],X=(0,a.useState)([]),_=g()(X,2),Y=_[0],Q=_[1],ee=(0,a.useState)(!1),ne=g()(ee,2),le=ne[0],oe=ne[1],ie=(0,a.useState)(""),de=g()(ie,2),ce=de[0],ue=de[1],me=(0,a.useState)(""),pe=g()(me,2),fe=pe[0],ge=pe[1],ve=(0,a.useState)(!1),ye=g()(ve,2),be=ye[0],we=ye[1],Me=(0,a.useState)(!1),Pe=g()(Me,2),ke=Pe[0],Le=Pe[1],Ue=(0,a.useState)(null),De=g()(Ue,2),Ee=De[0],Ie=De[1],ze=(0,a.useState)(""),Oe=g()(ze,2),Be=Oe[0],Ve=Oe[1],He=function(){var e=p()(u()().mark((function e(){var t,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=K&&K.baseUrl){e.next=4;break}return h.yw.error(n.formatMessage({id:"ai.ollama.apiUrlNotConfigured"})),L(!1),e.abrupt("return");case 4:return te.Z.debug("pingOllama",null==K?void 0:K.baseUrl),t={baseUrl:null==K?void 0:K.baseUrl},e.next=8,(0,Ne.VM)(t);case 8:r=e.sent,te.Z.debug("getOllamaServerStatus: ",r,t),200===r.code?L(null==r?void 0:r.data):L(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=p()(u()().mark((function e(){var t,r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.Z.debug("requestLocalModels"),w(!0),t={baseUrl:null==K?void 0:K.baseUrl},e.next=5,(0,Ne.c8)(t);case 5:r=e.sent,te.Z.debug("getOllamaLocalModels: ",r,t),200===r.code&&(a=null==r?void 0:r.data.map((function(e){var t=e.name.split(":"),r=t[0]||e.name,a=t.length>1?t[1]:"default";return d()(d()({},e),{},{modelName:r,modelVersion:a})})),I(a)),w(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=p()(u()().mark((function e(){var t,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),t={baseUrl:null==K?void 0:K.baseUrl},e.next=4,(0,Ne.rg)(t);case 4:r=e.sent,te.Z.debug("getOllamaLibraryModels: ",r,t),200===r.code?Q(null==r?void 0:r.data):h.yw.error(r.message||n.formatMessage({id:"ai.ollama.remoteModels.fetchFailed"})),oe(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=p()(u()().mark((function e(){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,Promise.all([He(),Je()]);case 4:return e.prev=4,c(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){Xe()}),[]),(0,a.useEffect)((function(){var e=function(e){if(!(N||J||be)&&(e.ctrlKey||e.metaKey))switch(e.key){case"r":e.preventDefault(),Xe();break;case"m":e.preventDefault(),_e()}};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[N,J,be]);var _e=function(){W(!0),We()},Ye=function(){var e=p()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.yw.loading(n.formatMessage({id:"updating"})),e.next=3,(0,v.fx)(t);case 3:r=e.sent,te.Z.debug("updateLlmProvider:",t,r),200===r.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),q(null==r?void 0:r.data),R(!1)):(h.yw.destroy(),h.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te.Z.debug("switch enabled to ".concat(t)),!t||T){e.next=4;break}return h.yw.error(n.formatMessage({id:"ai.ollama.startFirst"})),e.abrupt("return");case 4:return r=d()(d()({},K),{},{enabled:t}),h.yw.loading(n.formatMessage({id:"updating"})),e.next=8,(0,v.fx)(r);case 8:a=e.sent,te.Z.debug("updateLlmProvider enabled:",r,a),200===a.code?(h.yw.destroy(),h.yw.success(n.formatMessage({id:"update.success",defaultMessage:"update success"})),q(null==a?void 0:a.data)):(h.yw.destroy(),h.yw.error(a.message));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=3;break}return h.yw.error(n.formatMessage({id:"ai.ollama.notRunning"})),e.abrupt("return");case 3:return ue(t),h.yw.loading(n.formatMessage({id:"ai.ollama.modelDetails.deleteModel.loading"},{modelName:t})),e.prev=5,r={baseUrl:null==K?void 0:K.baseUrl,model:t},e.next=9,(0,Ne.G9)(r);case 9:a=e.sent,te.Z.debug("deleteOllamaModel:",null==a?void 0:a.data,t),200===a.code&&null!=a&&a.data?(h.yw.success(n.formatMessage({id:"ai.ollama.modelDetails.deleteModel.success"},{modelName:t})),Je()):h.yw.error(a.message||n.formatMessage({id:"ai.ollama.modelDetails.deleteModel.failed"},{modelName:t})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error("删除模型出错:",e.t0),h.yw.error(n.formatMessage({id:"ai.ollama.modelDetails.deleteModel.error"},{error:e.t0}));case 18:return e.prev=18,ue(""),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,14,18,21]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=p()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=3;break}return h.yw.error(n.formatMessage({id:"ai.ollama.notRunning"})),e.abrupt("return");case 3:return ge(t),h.yw.loading(n.formatMessage({id:"ai.ollama.modelDetails.pulling"},{modelName:t})),e.prev=5,r={baseUrl:null==K?void 0:K.baseUrl,model:t},e.next=9,(0,Ne.N6)(r);case 9:200===(a=e.sent).code&&null!=a&&a.data?(h.yw.success(n.formatMessage({id:"ai.ollama.modelDetails.pullSuccess"},{modelName:t})),W(!1),Je()):h.yw.error(a.message||n.formatMessage({id:"ai.ollama.modelDetails.pullFailed"},{modelName:t})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("拉取模型出错:",e.t0),h.yw.error(n.formatMessage({id:"ai.ollama.modelDetails.pullFailed"},{modelName:t}));case 17:return e.prev=17,ge(""),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=p()(u()().mark((function e(t){var r,a,l,o,i,s,d;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le(!0),Ve(t),we(!0),e.prev=3,r=E.some((function(e){return e.name===t})),a=Y.some((function(e){return e.name===t})),!r){e.next=14;break}return o={baseUrl:null==K?void 0:K.baseUrl,model:t},e.next=10,(0,Ne.sF)(o);case 10:l=e.sent,te.Z.debug("getOllamaModelDetails (local):",l),e.next=27;break;case 14:if(!a){e.next=22;break}return i={baseUrl:null==K?void 0:K.baseUrl,model:t},e.next=18,(0,Ne.gF)(i);case 18:l=e.sent,te.Z.debug("getOllamaLibraryModelDetails (remote):",l),e.next=27;break;case 22:return s={baseUrl:null==K?void 0:K.baseUrl,model:t},e.next=25,(0,Ne.gF)(s);case 25:l=e.sent,te.Z.debug("getOllamaLibraryModelDetails (default):",l);case 27:200===l.code?Ie(null===(d=l)||void 0===d?void 0:d.data):(h.yw.error(l.message||n.formatMessage({id:"ai.ollama.modelDetails.fetchFailed"},{modelName:t})),Ie(null)),e.next=35;break;case 30:e.prev=30,e.t0=e.catch(3),console.error("获取模型详情出错:",e.t0),h.yw.error(n.formatMessage({id:"ai.ollama.modelDetails.fetchError"},{error:e.t0})),Ie(null);case 35:return e.prev=35,Le(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[3,30,35,38]])})));return function(t){return e.apply(this,arguments)}}();return(0,re.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,re.jsxs)("div",{style:{flexShrink:0,padding:"16px 24px",borderBottom:"1px solid #f0f0f0"},children:[(0,re.jsxs)("h1",{children:[(0,re.jsx)(C.Z,{src:null==K?void 0:K.logo}),(0,re.jsx)("span",{style:{marginLeft:"12px"},children:null==K?void 0:K.nickname}),(0,re.jsx)(he.Z,{checked:null==K?void 0:K.enabled,onChange:Qe,checkedChildren:n.formatMessage({id:"ai.ollama.modelDetails.enableSwitch.checked"}),unCheckedChildren:n.formatMessage({id:"ai.ollama.modelDetails.enableSwitch.unchecked"}),style:{marginLeft:"8px"}}),(0,re.jsx)(Z.ZP,{type:"text",icon:(0,re.jsx)(Ce.Z,{}),onClick:function(){window.open(null==K?void 0:K.webUrl,"_blank")}}),(0,re.jsx)(Z.ZP,{type:"text",icon:(0,re.jsx)(Se.Z,{}),onClick:function(){return R(!0)}})]}),(null==K?void 0:K.description)&&(0,re.jsx)("div",{style:{marginBottom:"16px",color:"#666",fontSize:"14px"},children:K.description}),(0,re.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,re.jsxs)("span",{children:["baseUrl: ",null==K?void 0:K.baseUrl]}),(0,re.jsx)(Z.ZP,{type:"link",size:"small",icon:(0,re.jsx)(Se.Z,{}),onClick:function(){return R(!0)},children:n.formatMessage({id:"ai.ollama.modelDetails.edit"})})]}),(0,re.jsxs)(j.Z,{children:[(0,re.jsx)(Ze.Z,{title:"".concat(n.formatMessage({id:"ai.ollama.refresh"})," (Ctrl/Cmd + R)"),children:(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(Te.Z,{}),loading:s,type:"primary",onClick:Xe,children:n.formatMessage({id:"ai.ollama.refresh"})})}),(0,re.jsx)(Ze.Z,{title:"".concat(n.formatMessage({id:"ai.ollama.remoteModels"})," (Ctrl/Cmd + M)"),children:(0,re.jsx)(Z.ZP,{icon:(0,re.jsx)(Re.Z,{}),type:"primary",onClick:_e,children:n.formatMessage({id:"ai.ollama.remoteModels"})})})]}),(0,re.jsx)("br",{}),(0,re.jsx)("br",{}),T?(0,re.jsx)(xe.Z,{message:n.formatMessage({id:"ai.ollama.running"}),type:"success"}):(0,re.jsx)(xe.Z,{message:n.formatMessage({id:"ai.ollama.notRunning"}),type:"error"}),(0,re.jsx)(je.Z,{orientation:"left",children:n.formatMessage({id:"ai.ollama.localModels"})})]}),(0,re.jsx)("div",{className:"llm-model-list-container",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"16px 24px"},children:(0,re.jsx)(k.Z,{itemLayout:"horizontal",className:"llm-model-list",loading:y,dataSource:E,renderItem:function(e,t){return(0,re.jsx)(k.Z.Item,{style:(null==V?void 0:V.name)===(null==e?void 0:e.name)?{backgroundColor:l?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){H(e)},actions:[(0,re.jsx)(Z.ZP,{type:"text",icon:(0,re.jsx)(qe.Z,{}),onClick:function(t){t.stopPropagation(),rt(null==e?void 0:e.name)},children:n.formatMessage({id:"ai.ollama.modelDetails.details"})},"details"),(0,re.jsx)(Ae.Z,{title:n.formatMessage({id:"ai.ollama.modelDetails.delete.confirm"}),description:n.formatMessage({id:"ai.ollama.modelDetails.delete.description"},{modelName:null==e?void 0:e.name}),onConfirm:function(t){null==t||t.stopPropagation(),et(null==e?void 0:e.modelName)},okText:n.formatMessage({id:"ai.ollama.modelDetails.delete.ok"}),cancelText:n.formatMessage({id:"ai.ollama.modelDetails.delete.cancel"}),onCancel:function(e){return null==e?void 0:e.stopPropagation()},children:(0,re.jsx)(Z.ZP,{type:"text",danger:!0,icon:(0,re.jsx)(Fe.Z,{}),loading:ce===(null==e?void 0:e.modelName),onClick:function(e){return e.stopPropagation()},children:n.formatMessage({id:"ai.ollama.modelDetails.deleteModel"})})},"delete")],children:(0,re.jsx)(k.Z.Item.Meta,{title:(0,re.jsxs)(j.Z,{children:[(0,re.jsx)("span",{children:null==e?void 0:e.modelName}),(0,re.jsx)(S.Z,{color:"blue",children:null==e?void 0:e.modelVersion}),Ke(null==e?void 0:e.modelName,null==e?void 0:e.family,null==e?void 0:e.format),(null==e?void 0:e.size)&&(0,re.jsx)(S.Z,{color:"green",children:(0,se.sS)(null==e?void 0:e.size)}),(null==e?void 0:e.parameter_size)&&(0,re.jsx)(Ze.Z,{title:"参数大小",children:(0,re.jsx)(S.Z,{color:"purple",children:null==e?void 0:e.parameter_size})})]}),description:(0,re.jsxs)(j.Z,{direction:"vertical",children:[(0,re.jsx)("div",{children:n.formatMessage({id:"ai.ollama.modelDetails.fullName"},{name:null==e?void 0:e.name})}),(0,re.jsx)("div",{children:n.formatMessage({id:"ai.ollama.modelDetails.digest"},{digest:null==e?void 0:e.digest})}),(null==e?void 0:e.family)&&(0,re.jsx)("div",{children:n.formatMessage({id:"ai.ollama.modelDetails.family"},{family:null==e?void 0:e.family})}),(null==e?void 0:e.quantization_level)&&(0,re.jsx)("div",{children:n.formatMessage({id:"ai.ollama.modelDetails.quantization"},{level:null==e?void 0:e.quantization_level})}),(0,re.jsx)("div",{children:n.formatMessage({id:"ai.ollama.modelDetails.updateTime"},{time:(0,se.mr)(null==e?void 0:e.modified_at.toString())})})]}),style:{marginLeft:"15px"}})})}})}),(0,re.jsx)(Ge,{visible:J,onClose:function(){return W(!1)},models:Y,loading:le,onRefresh:We,onModelDetails:rt,onPull:tt,pullingModelName:fe,localModelNames:E.map((function(e){return e.modelName}))}),(0,re.jsx)($e,{visible:be,onClose:function(){return we(!1)},modelName:Be,modelDetails:Ee,loading:ke,onRefresh:rt,onPull:tt,onDelete:et,isRemoteModel:Y.some((function(e){return e.name===Be})),isLocalModel:E.some((function(e){return e.name===Be})),pullingModelName:fe,localModelNames:E.map((function(e){return e.name}))}),N&&(0,re.jsx)(ae,{open:N,isEdit:!0,level:r,llmProvider:K,onCancel:function(){return R(!1)},onSubmit:Ye})]})},We=function(e){var t=e.level,r=(0,a.useState)(""),n=g()(r,2),l=n[0],o=n[1],s=(0,a.useState)([]),d=g()(s,2),c=d[0],u=d[1];(0,a.useEffect)((function(){return document.body.classList.add("no-scroll"),function(){document.body.classList.remove("no-scroll")}}),[]);var m=(0,B.A)((function(e){return{currentLlmProvider:e.currentLlmProvider,llmproviderResult:e.llmproviderResult,setCurrentLlmProvider:e.setCurrentLlmProvider,tabsToClose:e.tabsToClose,removeTabToClose:e.removeTabToClose}})),p=m.currentLlmProvider,f=m.llmproviderResult,v=m.setCurrentLlmProvider,h=m.tabsToClose,x=m.removeTabToClose,y=ie((function(e){return{currentLlmProviderPlatform:e.currentLlmProviderPlatform,llmproviderResultPlatform:e.llmproviderResultPlatform,setCurrentLlmProviderPlatform:e.setCurrentLlmProviderPlatform,tabsToClosePlatform:e.tabsToClosePlatform,removeTabToClosePlatform:e.removeTabToClosePlatform}})),b=y.currentLlmProviderPlatform,w=y.llmproviderResultPlatform,M=y.setCurrentLlmProviderPlatform,Z=y.tabsToClosePlatform,j=y.removeTabToClosePlatform,P=(0,a.useState)(t===L.Hxq),k=g()(P,1)[0],C=k?b:p,S=k?Z:h,T=k?j:x;(0,a.useEffect)((function(){S.length>0&&S.forEach((function(e){c.find((function(t){return t.key===e}))?(U(e),T(e)):T(e)}))}),[S,c,T]),(0,a.useEffect)((function(){if(C&&C.uid)if(console.log("llmProvider: ",C),c.find((function(e){return e.key===C.uid})))o(C.uid);else{var e=i()(c);C.type===L.CZ7?e.push({label:C.nickname||C.type,children:(0,re.jsx)("div",{className:"llm-provider-tab-pane-content",children:(0,re.jsx)(Je,{provider:C,level:t})}),key:C.uid,closable:!0}):e.push({label:C.nickname||C.type,children:(0,re.jsx)("div",{className:"llm-provider-tab-pane-content",children:(0,re.jsx)(Oe,{provider:C,level:t})}),key:C.uid,closable:!0}),u(e),o(C.uid)}}),[C,c]);var U=function(e){var t=l,r=-1;c.forEach((function(t,a){t.key===e&&(r=a-1)}));var a=c.filter((function(t){return t.key!==e}));if(a.length&&t===e){var n,i;t=r>=0?a[r].key:a[0].key;var s=(k?(null==w||null===(n=w.data)||void 0===n?void 0:n.content)||[]:(null==f||null===(i=f.data)||void 0===i?void 0:i.content)||[]).find((function(e){return e.uid===t}));s&&(k?M(s):v(s))}u(a),o(t)};return 0===c.length?null:(0,re.jsx)("div",{className:"llm-provider-tab-container",children:(0,re.jsx)(ue.Z,{type:"editable-card",onChange:function(e){var t,r;o(e);var a=(k?(null==w||null===(t=w.data)||void 0===t?void 0:t.content)||[]:(null==f||null===(r=f.data)||void 0===r?void 0:r.content)||[]).find((function(t){return t.uid===e}));a&&(k?M(a):v(a))},activeKey:l,onEdit:function(e,t){"remove"===t&&U(e)},items:c,className:"llm-provider-tabs",hideAdd:!0})})},Xe=function(){var e=(0,n.Z)(),t=e.leftSiderStyle,r=e.contentStyle;return(0,re.jsxs)(l.Z,{style:{height:"100%"},children:[(0,re.jsx)(l.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:t,children:(0,re.jsx)(ce,{level:L.whQ,superUser:!1})}),(0,re.jsx)(l.Z.Panel,{style:r,children:(0,re.jsx)(We,{level:L.whQ,superUser:!1})})]})}},65051:function(e,t,r){r.d(t,{Z:function(){return Z}});var a=r(44194),n=r(51865),l=r.n(n),o=r(34573),i=r(6243),s=r(5924),d=r(20914),c=r(77167);const u=["wrap","nowrap","wrap-reverse"],m=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var f=function(e,t){return l()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const r=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${r}`]:r&&u.includes(r)}})(e,t)),((e,t)=>{const r={};return p.forEach((a=>{r[`${e}-align-${a}`]=t.align===a})),r[`${e}-align-stretch`]=!t.align&&!!t.vertical,r})(e,t)),((e,t)=>{const r={};return m.forEach((a=>{r[`${e}-justify-${a}`]=t.justify===a})),r})(e,t)))};const g=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},v=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},h=e=>{const{componentCls:t}=e,r={};return u.forEach((e=>{r[`${t}-wrap-${e}`]={flexWrap:e}})),r},x=e=>{const{componentCls:t}=e,r={};return p.forEach((e=>{r[`${t}-align-${e}`]={alignItems:e}})),r},y=e=>{const{componentCls:t}=e,r={};return m.forEach((e=>{r[`${t}-justify-${e}`]={justifyContent:e}})),r};var b=(0,d.I$)("Flex",(e=>{const{paddingXS:t,padding:r,paddingLG:a}=e,n=(0,c.IX)(e,{flexGapSM:t,flexGap:r,flexGapLG:a});return[g(n),v(n),h(n),x(n),y(n)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};const M=a.forwardRef(((e,t)=>{const{prefixCls:r,rootClassName:n,className:d,style:c,flex:u,gap:m,vertical:p=!1,component:g="div",children:v}=e,h=w(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component","children"]),{flex:x,direction:y,getPrefixCls:M}=a.useContext(s.E_),Z=M("flex",r),[j,P,k]=b(Z),C=null!=p?p:null==x?void 0:x.vertical,S=l()(d,n,null==x?void 0:x.className,Z,P,k,f(Z,e),{[`${Z}-rtl`]:"rtl"===y,[`${Z}-gap-${m}`]:(0,i.n)(m),[`${Z}-vertical`]:C}),T=Object.assign(Object.assign({},null==x?void 0:x.style),c);return u&&(T.flex=u),m&&!(0,i.n)(m)&&(T.gap=m),j(a.createElement(g,Object.assign({ref:t,className:S,style:T},(0,o.Z)(h,["justify","wrap","align"])),v))}));var Z=M},43275:function(e,t,r){r.d(t,{Z:function(){return P}});var a=r(44194),n=r(64985),l=r(51865),o=r.n(l),i=r(81424),s=r(34573),d=r(5924),c=r(65641),u=r(42371),m=r(23897),p=r(69533),f=r(65925),g=r(43612),v=r(79394),h=r(98021),x=r(20914);var y=(0,x.I$)("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:r,antCls:a,zIndexPopup:n,colorText:l,colorWarning:o,marginXXS:i,marginXS:s,fontSize:d,fontWeightStrong:c,colorTextHeading:u}=e;return{[t]:{zIndex:n,[`&${a}-popover`]:{fontSize:d},[`${t}-message`]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${r}`]:{color:o,fontSize:d,lineHeight:1,marginInlineEnd:s},[`${t}-title`]:{fontWeight:c,color:u,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:i,color:l}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1}),b=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};const w=e=>{const{prefixCls:t,okButtonProps:r,cancelButtonProps:l,title:o,description:i,cancelText:s,okText:c,okType:h="primary",icon:x=a.createElement(n.Z,null),showCancel:y=!0,close:b,onConfirm:w,onCancel:M,onPopupClick:Z}=e,{getPrefixCls:j}=a.useContext(d.E_),[P]=(0,g.Z)("Popconfirm",v.Z.Popconfirm),k=(0,m.Z)(o),C=(0,m.Z)(i);return a.createElement("div",{className:`${t}-inner-content`,onClick:Z},a.createElement("div",{className:`${t}-message`},x&&a.createElement("span",{className:`${t}-message-icon`},x),a.createElement("div",{className:`${t}-message-text`},k&&a.createElement("div",{className:`${t}-title`},k),C&&a.createElement("div",{className:`${t}-description`},C))),a.createElement("div",{className:`${t}-buttons`},y&&a.createElement(p.ZP,Object.assign({onClick:M,size:"small"},l),s||(null==P?void 0:P.cancelText)),a.createElement(u.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,f.nx)(h)),r),actionFn:w,close:b,prefixCls:j("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},c||(null==P?void 0:P.okText))))};var M=e=>{const{prefixCls:t,placement:r,className:n,style:l}=e,i=b(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=a.useContext(d.E_),c=s("popconfirm",t),[u]=y(c);return u(a.createElement(h.ZP,{placement:r,className:o()(c,n),style:l,content:a.createElement(w,Object.assign({prefixCls:c},i))}))},Z=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};const j=a.forwardRef(((e,t)=>{var r,l;const{prefixCls:u,placement:m="top",trigger:p="click",okType:f="primary",icon:g=a.createElement(n.Z,null),children:v,overlayClassName:h,onOpenChange:x,onVisibleChange:b,overlayStyle:M,styles:j,classNames:P}=e,k=Z(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:C,className:S,style:T,classNames:L,styles:U}=(0,d.dj)("popconfirm"),[D,E]=(0,i.Z)(!1,{value:null!==(r=e.open)&&void 0!==r?r:e.visible,defaultValue:null!==(l=e.defaultOpen)&&void 0!==l?l:e.defaultVisible}),I=(e,t)=>{E(e,!0),null==b||b(e),null==x||x(e,t)},z=C("popconfirm",u),O=o()(z,S,h,L.root,null==P?void 0:P.root),N=o()(L.body,null==P?void 0:P.body),[R]=y(z);return R(a.createElement(c.Z,Object.assign({},(0,s.Z)(k,["title"]),{trigger:p,placement:m,onOpenChange:(t,r)=>{const{disabled:a=!1}=e;a||I(t,r)},open:D,ref:t,classNames:{root:O,body:N},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},U.root),T),M),null==j?void 0:j.root),body:Object.assign(Object.assign({},U.body),null==j?void 0:j.body)},content:a.createElement(w,Object.assign({okType:f,icon:g},e,{prefixCls:z,close:e=>{I(!1,e)},onConfirm:t=>{var r;return null===(r=e.onConfirm)||void 0===r?void 0:r.call(void 0,t)},onCancel:t=>{var r;I(!1,t),null===(r=e.onCancel)||void 0===r||r.call(void 0,t)}})),"data-popover-inject":!0}),v))}));j._InternalPanelDoNotUseOrYouWillBeFired=M;var P=j}}]);