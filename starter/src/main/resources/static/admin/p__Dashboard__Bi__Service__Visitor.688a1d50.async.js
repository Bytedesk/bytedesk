"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1391],{91768:function(e,t,i){i.d(t,{Z:function(){return d}});var r=i(38404),s=i(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},n=i(5901),o=function(e,t){return s.createElement(n.Z,(0,r.Z)({},e,{ref:t,icon:a}))};var d=s.forwardRef(o)},35911:function(e,t,i){i.d(t,{Z:function(){return d}});var r=i(38404),s=i(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},n=i(5901),o=function(e,t){return s.createElement(n.Z,(0,r.Z)({},e,{ref:t,icon:a}))};var d=s.forwardRef(o)},12201:function(e,t,i){i.d(t,{Z:function(){return d}});var r=i(38404),s=i(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},n=i(5901),o=function(e,t){return s.createElement(n.Z,(0,r.Z)({},e,{ref:t,icon:a}))};var d=s.forwardRef(o)},18267:function(e,t,i){i.d(t,{A_:function(){return p},PJ:function(){return m},mY:function(){return g},vf:function(){return u}});var r=i(90819),s=i.n(r),a=i(73193),n=i.n(a),o=i(89933),d=i.n(o),l=i(27353),c=i(2290);function u(e){return f.apply(this,arguments)}function f(){return(f=d()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/visitor/query/org",{method:"GET",params:n()(n()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=d()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/visitor/update",{method:"POST",data:n()(n()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=d()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/visitor/update/tagList",{method:"POST",data:n()(n()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return x.apply(this,arguments)}function x(){return(x=d()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/visitor/delete",{method:"POST",data:n()(n()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},83506:function(e,t,i){i.r(t);var r=i(90819),s=i.n(r),a=i(73193),n=i.n(a),o=i(89933),d=i.n(o),l=i(45332),c=i.n(l),u=i(44194),f=i(29888),m=i(25456),v=i(69159),g=i(25462),h=i(35746),p=i(83801),x=i(38623),b=i(46206),j=i(90883),M=i(99065),y=i(20615),Z=i(41455),k=i(46589),w=i(69711),Y=i(97368),S=i(18221),P=i(48861),D=i(31461),O=i(57039),A=i(43837),C=i(41881),z=i(91768),L=i(35911),V=i(36868),R=i(14546),I=i(12201),B=i(28520),F=i(18267),H=i(96596),E=i.n(H),q=i(2290),T=i(97765),J=i(31549),U=f.default.RangePicker;m.Z.Option;t.default=function(){var e=(0,q.useIntl)(),t=(0,B.u)((function(e){return e.currentOrg})),i=(0,u.useState)(!1),r=c()(i,2),a=r[0],o=r[1],l=(0,u.useState)(null),f=c()(l,2),H=f[0],W=f[1],X=(0,u.useState)([]),G=c()(X,2),N=G[0],_=G[1],K=(0,u.useState)(0),Q=c()(K,2),$=Q[0],ee=Q[1],te=(0,u.useState)(1),ie=c()(te,2),re=ie[0],se=ie[1],ae=(0,u.useState)(10),ne=c()(ae,2),oe=ne[0],de=ne[1],le=(0,u.useState)({pageNumber:1,pageSize:10,orgUid:null==t?void 0:t.uid}),ce=c()(le,2),ue=ce[0],fe=ce[1],me=(0,u.useState)("today"),ve=c()(me,2),ge=ve[0],he=ve[1],pe=(0,u.useState)(E()().startOf("day")),xe=c()(pe,2),be=xe[0],je=xe[1],Me=(0,u.useState)(E()().endOf("day")),ye=c()(Me,2),Ze=ye[0],ke=ye[1],we=(0,u.useState)([E()().startOf("day"),E()().endOf("day")]),Ye=c()(we,2),Se=Ye[0],Pe=Ye[1],De=(0,u.useState)({totalVisitors:0,newVisitors:0,oldVisitors:0,resolutionRate:0}),Oe=c()(De,2),Ae=Oe[0],Ce=Oe[1],ze=(0,u.useState)(!1),Le=c()(ze,2),Ve=Le[0],Re=Le[1],Ie=(0,u.useState)(null),Be=c()(Ie,2),Fe=Be[0],He=Be[1],Ee=v.Z.useForm(),qe=c()(Ee,1)[0],Te=[{label:(0,J.jsx)(q.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,J.jsx)(q.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,J.jsx)(q.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,J.jsx)(q.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,J.jsx)(q.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,J.jsx)(q.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}];(0,u.useEffect)((function(){if("custom"===ge)je(be),ke(Ze);else{var e=E()();"today"===ge?(je(e.startOf("day")),ke(e.endOf("day"))):"yesterday"===ge?(je(e.subtract(1,"day").startOf("day")),ke(e.subtract(1,"day").endOf("day"))):"week"===ge?(je(e.startOf("week")),ke(e.endOf("week"))):"lastWeek"===ge?(je(e.subtract(1,"week").startOf("week")),ke(e.subtract(1,"week").endOf("week"))):"month"===ge&&(je(e.startOf("month")),ke(e.endOf("month")))}}),[ge]),(0,u.useEffect)((function(){Pe([be,Ze])}),[be,Ze]);var Je=function(){var i=d()(s()().mark((function i(r){var a,d,l,u,f,m,v,h,p;return s()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!=t&&t.uid){i.next=2;break}return i.abrupt("return");case 2:return o(!0),W(null),i.prev=4,a=n()(n()({},r),{},{orgUid:t.uid}),Se&&2===Se.length&&(d=c()(Se,2),l=d[0],u=d[1],l&&u&&(a.startDate=l.format("YYYY-MM-DD"),a.endDate=u.format("YYYY-MM-DD"))),i.next=9,(0,F.vf)(a);case 9:f=i.sent,T.Z.debug("queryVisitorsByOrg response",null==f?void 0:f.data,a),200===f.code&&null!=f&&f.data&&(m=(null==f?void 0:f.data.content)||[],Se&&2===Se.length&&(v=c()(Se,2),h=v[0],p=v[1],h&&p&&(m=m.filter((function(e){var t=E()(e.createdAt);return t.isAfter(h)&&t.isBefore(p.add(1,"day"))})))),_(m),ee((null==f?void 0:f.data.totalElements)||0),Ue(m)),i.next=19;break;case 14:i.prev=14,i.t0=i.catch(4),console.error("获取访客数据失败:",i.t0),W(e.formatMessage({id:"bi.visitor.fetchError"})),g.ZP.error(e.formatMessage({id:"bi.visitor.fetchFailed"}));case 19:return i.prev=19,o(!1),i.finish(19);case 22:case"end":return i.stop()}}),i,null,[[4,14,19,22]])})));return function(e){return i.apply(this,arguments)}}(),Ue=function(e){var t=e.length,i=e.filter((function(e){var t=E()(e.createdAt),i=E()().startOf("day");return t.isAfter(i)})).length,r=t-i,s=t>0?Math.round(r/t*100):0;Ce({totalVisitors:t,newVisitors:i,oldVisitors:r,resolutionRate:s})},We=function(){var i=d()(s()().mark((function i(){var r,a,o;return s()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,qe.validateFields();case 3:if(r=i.sent,null!=Fe&&Fe.uid){i.next=6;break}return i.abrupt("return");case 6:return a=n()(n()({uid:Fe.uid},r),{},{orgUid:null==t?void 0:t.uid}),i.next=9,(0,F.PJ)(a);case 9:200===(o=i.sent).code?(g.ZP.success(e.formatMessage({id:"bi.visitor.edit.success"})),Re(!1),Je(ue)):g.ZP.error(o.message||e.formatMessage({id:"bi.visitor.edit.failed"})),i.next=17;break;case 13:i.prev=13,i.t0=i.catch(0),g.ZP.error(e.formatMessage({id:"bi.visitor.edit.failed"})),console.error("更新访客失败:",i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,13]])})));return function(){return i.apply(this,arguments)}}(),Xe=function(){var i=d()(s()().mark((function i(r,a){var n;return s()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,F.mY)({uid:r,tagList:a,orgUid:null==t?void 0:t.uid});case 3:200===(n=i.sent).code?(g.ZP.success(e.formatMessage({id:"bi.visitor.tags.updateSuccess"})),Je(ue)):g.ZP.error(n.message||e.formatMessage({id:"bi.visitor.tags.updateFailed"})),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),g.ZP.error(e.formatMessage({id:"bi.visitor.tags.updateFailed"})),console.error("更新标签失败:",i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,7]])})));return function(e,t){return i.apply(this,arguments)}}(),Ge=[{title:e.formatMessage({id:"bi.visitor.table.visitorInfo"}),key:"visitor",render:function(t){return(0,J.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,J.jsx)(p.Z,{src:t.avatar,icon:(0,J.jsx)(O.Z,{})}),(0,J.jsxs)("div",{style:{marginLeft:8},children:[(0,J.jsx)("div",{children:t.nickname||e.formatMessage({id:"bi.visitor.anonymousVisitor"})}),(0,J.jsx)("div",{style:{fontSize:"12px",color:"#999"},children:t.uid})]})]})}},{title:e.formatMessage({id:"bi.visitor.table.contact"}),key:"contact",render:function(e){return(0,J.jsxs)("div",{children:[e.email&&(0,J.jsx)("div",{children:e.email}),e.mobile&&(0,J.jsx)("div",{children:e.mobile})]})}},{title:e.formatMessage({id:"bi.visitor.table.deviceInfo"}),key:"device",render:function(e){var t,i,r;return(0,J.jsxs)("div",{children:[(null===(t=e.device)||void 0===t?void 0:t.browser)&&(0,J.jsx)("div",{children:e.device.browser}),(null===(i=e.device)||void 0===i?void 0:i.os)&&(0,J.jsx)("div",{children:e.device.os}),(null===(r=e.device)||void 0===r?void 0:r.ipLocation)&&(0,J.jsx)("div",{children:e.device.ipLocation})]})}},{title:e.formatMessage({id:"bi.visitor.table.tags"}),key:"tags",render:function(e){var t;return(0,J.jsx)("div",{children:null===(t=e.tagList)||void 0===t?void 0:t.map((function(t,i){return(0,J.jsx)(x.Z,{color:"blue",closable:!0,onClose:function(){var t,r=(null===(t=e.tagList)||void 0===t?void 0:t.filter((function(e,t){return t!==i})))||[];Xe(e.uid,r)},children:t},i)}))})}},{title:e.formatMessage({id:"bi.visitor.table.status"}),key:"status",render:function(t){return(0,J.jsx)(x.Z,{color:"online"===t.status?"green":"default",children:"online"===t.status?e.formatMessage({id:"bi.visitor.status.online"}):e.formatMessage({id:"bi.visitor.status.offline"})})}},{title:e.formatMessage({id:"bi.visitor.table.createdAt"}),key:"createdAt",render:function(e){return(0,J.jsx)("div",{children:e.createdAt?E()(e.createdAt).format("YYYY-MM-DD HH:mm"):"-"})}},{title:e.formatMessage({id:"bi.visitor.table.action"}),key:"action",render:function(i){return(0,J.jsxs)(b.Z,{children:[(0,J.jsx)(j.ZP,{type:"link",icon:(0,J.jsx)(A.Z,{}),onClick:function(){var t,r,s,a,n,o;h.Z.info({title:e.formatMessage({id:"bi.visitor.detail.title"}),width:600,content:(0,J.jsxs)("div",{children:[(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.uid"}),":"]})," ",i.uid]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.nickname"}),":"]})," ",i.nickname]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.email"}),":"]})," ",i.email||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.mobile"}),":"]})," ",i.mobile||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.note"}),":"]})," ",i.note||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.channel"}),":"]})," ",i.channel||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.ipAddress"}),":"]})," ",(null===(t=i.device)||void 0===t?void 0:t.ip)||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.ipLocation"}),":"]})," ",(null===(r=i.device)||void 0===r?void 0:r.ipLocation)||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.browser"}),":"]})," ",(null===(s=i.device)||void 0===s?void 0:s.browser)||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.os"}),":"]})," ",(null===(a=i.device)||void 0===a?void 0:a.os)||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.device"}),":"]})," ",(null===(n=i.device)||void 0===n?void 0:n.device)||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.referrer"}),":"]})," ",(null===(o=i.device)||void 0===o?void 0:o.referrer)||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.lang"}),":"]})," ",i.lang||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.vipLevel"}),":"]})," ",i.vipLevel||"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.createdAt"}),":"]})," ",i.createdAt?E()(i.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"]}),(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[e.formatMessage({id:"bi.visitor.detail.updatedAt"}),":"]})," ",i.updatedAt?E()(i.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"-"]})]})})},children:e.formatMessage({id:"bi.visitor.action.view"})}),(0,J.jsx)(j.ZP,{type:"link",icon:(0,J.jsx)(C.Z,{}),onClick:function(){return function(e){He(e),qe.setFieldsValue({nickname:e.nickname,email:e.email,mobile:e.mobile,note:e.note,tagList:e.tagList}),Re(!0)}(i)},children:e.formatMessage({id:"bi.visitor.action.edit"})}),(0,J.jsx)(j.ZP,{type:"link",danger:!0,icon:(0,J.jsx)(z.Z,{}),onClick:function(){return function(i){var r;h.Z.confirm({title:e.formatMessage({id:"bi.visitor.delete.confirmTitle"}),content:e.formatMessage({id:"bi.visitor.delete.confirmContent"},{nickname:i.nickname||e.formatMessage({id:"bi.visitor.anonymousVisitor"})}),onOk:(r=d()(s()().mark((function r(){var a;return s()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,F.A_)({uid:i.uid,orgUid:null==t?void 0:t.uid});case 3:200===(a=r.sent).code?(g.ZP.success(e.formatMessage({id:"bi.visitor.delete.success"})),Je(ue)):g.ZP.error(a.message||e.formatMessage({id:"bi.visitor.delete.failed"})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),g.ZP.error(e.formatMessage({id:"bi.visitor.delete.failed"})),console.error("删除访客失败:",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,7]])}))),function(){return r.apply(this,arguments)})})}(i)},children:e.formatMessage({id:"bi.visitor.action.delete"})})]})}}];return(0,u.useEffect)((function(){null!=t&&t.uid&&Je(ue)}),[null==t?void 0:t.uid,Se]),(0,J.jsxs)("div",{style:{padding:"24px"},children:[(0,J.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,J.jsx)("h2",{children:e.formatMessage({id:"bi.visitor.title"})}),(0,J.jsxs)("p",{children:[e.formatMessage({id:"bi.visitor.description"}),"today"===ge&&(0,J.jsxs)("span",{style:{color:"#666",marginLeft:8},children:["(",be.format("YYYY-MM-DD"),")"]}),"yesterday"===ge&&(0,J.jsxs)("span",{style:{color:"#666",marginLeft:8},children:["(",be.format("YYYY-MM-DD"),")"]}),("week"===ge||"lastWeek"===ge||"month"===ge||"custom"===ge)&&(0,J.jsxs)("span",{style:{color:"#666",marginLeft:8},children:["(",be.format("YYYY-MM-DD")," ~ ",Ze.format("YYYY-MM-DD"),")"]})]})]}),(0,J.jsx)(M.Z,{style:{marginBottom:"24px"},children:(0,J.jsx)(b.Z,{direction:"vertical",style:{width:"100%"},children:(0,J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,J.jsxs)(b.Z,{wrap:!0,children:[(0,J.jsx)(y.ZP.Group,{value:ge,onChange:function(e){return he(e.target.value)},children:Te.map((function(e){return(0,J.jsx)(y.ZP.Button,{value:e.value,children:e.label},e.value)}))}),"custom"===ge&&(0,J.jsx)(U,{value:Se,onChange:function(e){e&&2===e.length&&Pe([e[0],e[1]])}})]}),(0,J.jsx)(j.ZP,{type:"primary",icon:(0,J.jsx)(L.Z,{}),onClick:function(){W(null),Je(ue)},loading:a,children:e.formatMessage({id:"bi.common.refresh"})})]})})}),(0,J.jsxs)(Z.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,J.jsx)(k.Z,{span:6,children:(0,J.jsx)(M.Z,{children:(0,J.jsx)(w.Z,{title:e.formatMessage({id:"bi.visitor.card.totalVisitors"}),value:Ae.totalVisitors,prefix:(0,J.jsx)(V.Z,{}),valueStyle:{color:"#3f8600"}})})}),(0,J.jsx)(k.Z,{span:6,children:(0,J.jsx)(M.Z,{children:(0,J.jsx)(w.Z,{title:e.formatMessage({id:"bi.visitor.card.newVisitors"}),value:Ae.newVisitors,prefix:(0,J.jsx)(O.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,J.jsx)(k.Z,{span:6,children:(0,J.jsx)(M.Z,{children:(0,J.jsx)(w.Z,{title:e.formatMessage({id:"bi.visitor.card.oldVisitors"}),value:Ae.oldVisitors,prefix:(0,J.jsx)(R.Z,{}),valueStyle:{color:"#722ed1"}})})}),(0,J.jsx)(k.Z,{span:6,children:(0,J.jsx)(M.Z,{children:(0,J.jsx)(w.Z,{title:e.formatMessage({id:"bi.visitor.card.oldVisitorRatio"}),value:Ae.resolutionRate,prefix:(0,J.jsx)(I.Z,{}),valueStyle:{color:"#eb2f96"},suffix:"%"})})})]}),(0,J.jsx)(M.Z,{title:e.formatMessage({id:"bi.visitor.detailData"}),children:(0,J.jsxs)(Y.Z,{spinning:a,children:[H&&(0,J.jsx)(S.Z,{message:e.formatMessage({id:"bi.common.error"}),description:H,type:"error",showIcon:!0,style:{marginBottom:16},closable:!0,onClose:function(){return W(null)}}),!(null!=t&&t.uid)&&(0,J.jsx)(S.Z,{message:e.formatMessage({id:"bi.common.selectOrg"}),description:e.formatMessage({id:"bi.visitor.selectOrgDescription"}),type:"warning",showIcon:!0,style:{marginBottom:16}}),0===N.length&&!a&&!H&&(0,J.jsx)(S.Z,{message:e.formatMessage({id:"bi.common.noData"}),description:e.formatMessage({id:"bi.visitor.noDataDescription"}),type:"info",showIcon:!0,style:{marginBottom:16}}),(0,J.jsx)(P.Z,{columns:Ge,dataSource:N,rowKey:"uid",pagination:{current:re,pageSize:oe,total:$,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")}},onChange:function(e){var t=n()(n()({},ue),{},{pageNumber:e.current,pageSize:e.pageSize});fe(t),se(e.current),de(e.pageSize),Je(t)},size:"middle",locale:{emptyText:e.formatMessage({id:"bi.common.noData"})}})]})}),(0,J.jsx)(h.Z,{title:e.formatMessage({id:"bi.visitor.edit.title"}),open:Ve,onOk:We,onCancel:function(){return Re(!1)},width:600,children:(0,J.jsxs)(v.Z,{form:qe,layout:"vertical",children:[(0,J.jsx)(v.Z.Item,{name:"nickname",label:e.formatMessage({id:"bi.visitor.edit.nickname"}),rules:[{required:!0,message:e.formatMessage({id:"bi.visitor.edit.nicknameRequired"})}],children:(0,J.jsx)(D.Z,{placeholder:e.formatMessage({id:"bi.visitor.edit.nicknamePlaceholder"})})}),(0,J.jsx)(v.Z.Item,{name:"email",label:e.formatMessage({id:"bi.visitor.edit.email"}),rules:[{type:"email",message:e.formatMessage({id:"bi.visitor.edit.emailInvalid"})}],children:(0,J.jsx)(D.Z,{placeholder:e.formatMessage({id:"bi.visitor.edit.emailPlaceholder"})})}),(0,J.jsx)(v.Z.Item,{name:"mobile",label:e.formatMessage({id:"bi.visitor.edit.mobile"}),children:(0,J.jsx)(D.Z,{placeholder:e.formatMessage({id:"bi.visitor.edit.mobilePlaceholder"})})}),(0,J.jsx)(v.Z.Item,{name:"note",label:e.formatMessage({id:"bi.visitor.edit.note"}),children:(0,J.jsx)(D.Z.TextArea,{rows:3,placeholder:e.formatMessage({id:"bi.visitor.edit.notePlaceholder"})})}),(0,J.jsx)(v.Z.Item,{name:"tagList",label:e.formatMessage({id:"bi.visitor.edit.tags"}),children:(0,J.jsx)(m.Z,{mode:"tags",placeholder:e.formatMessage({id:"bi.visitor.edit.tagsPlaceholder"}),style:{width:"100%"}})})]})})]})}}}]);