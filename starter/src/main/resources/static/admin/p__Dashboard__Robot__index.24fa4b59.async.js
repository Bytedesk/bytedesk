"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[693],{8760:function(on,Te,m){m.r(Te),m.d(Te,{default:function(){return an}});var L=m(34886),g=m(52983),He=m(45332),k=m.n(He),Ve=m(76711),Pe=m.n(Ve),Ye=m(90819),b=m.n(Ye),Ge=m(89933),M=m.n(Ge),Ke=m(14618),de=m(58472),Ee=m(53083),w=m(77108);function We(r){return he.apply(this,arguments)}function he(){return he=M()(b()().mark(function r(t){return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,w.request)("/api/v1/robot/query",{method:"GET",params:{page:t.page,size:t.size,client:"web"}}));case 1:case"end":return n.stop()}},r)})),he.apply(this,arguments)}function Qe(r){return me.apply(this,arguments)}function me(){return me=M()(b()().mark(function r(t){return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,w.request)("/api/v1/robot/create",{method:"POST",data:{name:t,client:"web"}}));case 1:case"end":return n.stop()}},r)})),me.apply(this,arguments)}function Je(r){return be.apply(this,arguments)}function be(){return be=M()(b()().mark(function r(t){return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,w.request)("/api/v1/robot/update",{method:"POST",data:{rid:t.rid,name:t.name,description:t.description,welcome_tip:t.welcome_tip,avatar:t.avatar,show_history:t.show_history,history_count:t.history_count,kb_name:t.kb_name,top_k:t.top_k,score_threshold:t.score_threshold,model_name:t.model_name,model_api_key:t.model_api_key,model_api_secret:t.model_api_key,embeddings_name:t.embeddings_name,temperature:t.temperature,prompt:t.prompt,is_published:t.is_published,client:"web"}}));case 1:case"end":return n.stop()}},r)})),be.apply(this,arguments)}function Xe(r){return ge.apply(this,arguments)}function ge(){return ge=M()(b()().mark(function r(t){return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,w.request)("/api/v1/robot/delete",{method:"POST",data:{rid:t,client:"web"}}));case 1:case"end":return n.stop()}},r)})),ge.apply(this,arguments)}var E=(0,Ke.Ue)()((0,de.mW)((0,de.tJ)((0,Ee.n)(function(r,t){return{robots:[],currentRobot:{rid:"",name:""},items:[],fetchRobots:function(){var o=M()(b()().mark(function a(){var u,i;return b()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(t().robots.length>0)){d.next=3;break}return console.log("should not fetch robots"),d.abrupt("return");case 3:return u={page:0,size:10},d.next=6,We(u);case 6:i=d.sent,console.log("robotPage:",i,i.statusCode,i.message),r({robots:i.data,items:i.data.map(function(s){return{key:s.rid,label:s.name}})}),i.data.length>0&&r({currentRobot:i.data[0]});case 10:case"end":return d.stop()}},a)}));function n(){return o.apply(this,arguments)}return n}(),createRobot:function(){var o=M()(b()().mark(function a(u){var i;return b()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Qe(u);case 2:i=d.sent,console.log("create robot",i),r(function(s){return{robots:[].concat(Pe()(s.robots),[i.data])}});case 5:case"end":return d.stop()}},a)}));function n(a){return o.apply(this,arguments)}return n}(),updateRobot:function(){var o=M()(b()().mark(function a(u,i){var f,d;return b()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("before update:",u),p.next=3,Je(u);case 3:f=p.sent,i(f),console.log("upate robot",f),d=t().robots.filter(function(h){return h.rid!==u.rid}),r(function(h){return{robots:[u].concat(Pe()(d)),currentRobot:u}});case 8:case"end":return p.stop()}},a)}));function n(a,u){return o.apply(this,arguments)}return n}(),deleteRobot:function(){var o=M()(b()().mark(function a(u){var i;return b()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Xe(u);case 2:i=d.sent,console.log("delete robot",i),r(function(s){return{robots:s.robots.filter(function(p){return p.rid!==u}),currentRobot:s.robots[0]}});case 5:case"end":return d.stop()}},a)}));function n(a){return o.apply(this,arguments)}return n}(),setCurrentRobot:function(n){var a=t().robots.find(function(u){return u.rid===n});console.log("welcomeTip:",a.welcome_tip),r({currentRobot:a})},deleteRobotCache:function(){return r({},!0)}}}),{name:"ROBOT_STORE"}))),S=m(77159),P=m(3206),Ie=m(45312),qe=m(35456),F=m(97596),ee=m(64116),et=m(72583),tt=m(13664),e=m(97458),nt=function(){var t=S.Z.useForm(),o=k()(t,1),n=o[0],a=(0,w.useIntl)(),u=E(function(v){return{robots:v.robots,currentRobot:v.currentRobot,fetchRobots:v.fetchRobots,createRobot:v.createRobot,deleteRobot:v.deleteRobot,setCurrentRobot:v.setCurrentRobot}}),i=u.robots,f=u.currentRobot,d=u.fetchRobots,s=u.createRobot,p=u.deleteRobot,h=u.setCurrentRobot;(0,g.useEffect)(function(){console.log("fetchRobots"),d()},[]);var c=(0,g.useState)(!1),C=k()(c,2),D=C[0],A=C[1],j=function(){A(!0)},K=function(){var I=n.getFieldValue("nickname");console.log("nickname",I),I?(s(I),A(!1)):P.ZP.error("\u673A\u5668\u4EBA\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A")},Z=function(){A(!1)},W=function(I){console.log("handleClick",I),h(I)},z=function(){j()},Q=Ie.Z.useModal(),O=k()(Q,2),J=O[0],$=O[1],X=function(){if(console.log("handleDeleteRobotClicked"),i.length===1){P.ZP.error("can not delete all robot");return}J.confirm({title:"\u786E\u8BA4\u5220\u9664\uFF1F",icon:(0,e.jsx)(et.Z,{}),content:"\u786E\u5B9A\u8981\u5220\u9664 {"+f.name+"} ?",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){console.log("OK"),p(f.rid)},onCancel:function(){console.log("Cancel")}})};return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{margin:10},children:(0,e.jsxs)(qe.Z,{gap:"small",align:"flex-start",children:[(0,e.jsx)(F.ZP,{size:"small",type:"primary",icon:(0,e.jsx)(tt.Z,{}),onClick:z,children:a.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,e.jsx)(F.ZP,{onClick:X,size:"small",style:{float:"right"},danger:!0,disabled:f.rid==="",children:a.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),i.map(function(v){return(0,e.jsxs)("li",{className:f.rid===v.rid?"list-item active":"list-item",onClick:function(){return W(v.rid)},children:[(0,e.jsx)("div",{className:"list-left",children:(0,e.jsx)("img",{src:v.avatar,style:{width:40,height:40}})}),(0,e.jsxs)("div",{className:"list-right",children:[(0,e.jsxs)("div",{className:"top",children:[(0,e.jsx)("span",{className:"nickname",children:v.name}),(0,e.jsx)("span",{className:"timestamp"})]}),(0,e.jsx)("div",{className:"bottom",children:(0,e.jsx)("span",{className:"content",children:v.description})})]})]},v.rid)}),(0,e.jsx)(Ie.Z,{title:"\u65B0\u5EFA\u673A\u5668\u4EBA",open:D,okText:"\u4FDD\u5B58",onOk:K,onCancel:Z,children:(0,e.jsx)(S.Z,{form:n,name:"basic",style:{maxWidth:400},children:(0,e.jsx)(S.Z.Item,{label:"\u673A\u5668\u4EBA\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}],children:(0,e.jsx)(ee.Z,{})})})}),$]})},rt=nt,ae=m(11114),ve=m(34019),at=m(2716),ot=m(73193),te=m.n(ot),Oe=m(89104),Ae=m(33272),lt=m(37778),Fe=m(14193),Be=m(79770),it=m(8392),st=m(27860),xe=m.n(st),ut=function(){var r=S.Z.useForm(),t=k()(r,1),o=t[0],n=(0,w.useIntl)(),a=E(function(p){return{updateRobot:p.updateRobot}}),u=a.updateRobot,i=E(function(p){return p.currentRobot});E.subscribe(function(p,h){console.log("currentRobot.name: ",p.currentRobot.name),o.setFieldValue("name",p.currentRobot.name),o.setFieldValue("welcome_tip",p.currentRobot.welcome_tip),o.setFieldValue("description",p.currentRobot.description)});var f=function(){var p=M()(b()().mark(function h(c){return b()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("handleSubmit",c),c.rid=i.rid,c.avatar=i.avatar,c.show_history=i.show_history,c.history_count=i.history_count,c.kb_name=i.kb_name,c.prompt=i.prompt,c.model_name=i.model_name,c.model_api_key=i.model_api_key,c.model_api_secret=i.model_api_secret,c.embeddings_name=i.embeddings_name,c.top_k=i.top_k,c.score_threshold=i.score_threshold,c.temperature=i.temperature,c.is_published=i.is_published,D.next=17,u(c,function(A){A.statusCode===200&&P.ZP.success("update success")});case 17:case"end":return D.stop()}},h)}));return function(c){return p.apply(this,arguments)}}(),d={file_name:"test.png",username:"",type:"",kbname:"",client:"web"},s={name:"file",action:"/visitor/api/upload/avatar",showUploadList:!1,data:d,beforeUpload:function(h){console.log("file:",h," uploadData:",d);var c=xe()(new Date).format("YYYYMMDDHHmmss");return d.file_name=c+h.name,d.kbname=i.rid,!0},onChange:function(h){if(h.file.status!=="uploading"&&console.log(h.file,h.fileList),h.file.status==="done"){var c=h.file.response.data;console.log("url: ",c),i.avatar=c,o.setFieldValue("avatar",i.avatar),P.ZP.success("".concat(h.file.name," file uploaded successfully"))}else h.file.status==="error"&&P.ZP.error("".concat(h.file.name," file upload failed."))}};return(0,e.jsxs)(Ae.A,{form:o,onFinish:function(){var p=M()(b()().mark(function h(c){return b()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("onFinish:",c),D.next=3,f(c);case 3:case"end":return D.stop()}},h)}));return function(h){return p.apply(this,arguments)}}(),initialValues:{name:i.name,welcome_tip:i.welcome_tip,description:i.description},children:[(0,e.jsx)(S.Z.Item,{name:"avatar",label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,e.jsxs)(Be.Z,te()(te()({},s),{},{children:[(0,e.jsx)(it.C,{src:i.avatar}),(0,e.jsx)(F.ZP,{icon:(0,e.jsx)(Oe.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]}),"avatar")}),(0,e.jsx)(lt.Z,{width:"md",name:"name",label:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),tooltip:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),placeholder:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"})}),(0,e.jsx)(Fe.Z,{width:"md",name:"welcome_tip",label:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),placeholder:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}),(0,e.jsx)(Fe.Z,{width:"md",name:"description",label:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})})]})},_e=function(){var t=(0,w.useIntl)(),o=(0,g.useState)(!1),n=k()(o,2),a=n[0],u=n[1],i=E(function(p){return{currentRobot:p.currentRobot}}),f=i.currentRobot;function d(){var p=window.open("/chaty?tid=&","chaty","width=1000,height=800,top=100,left=200,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");p.onload=function(){p.document.title="Chaty - Bytedesk AI Playground"}}function s(){var p=window.open("https://visitor.bytedesk.com/ai?rid="+f.rid+"&","chaty","width=400,height=600,top=100,left=500,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");p.onload=function(){p.document.title="Chaty Mobile - Bytedesk AI Playground"}}return(0,e.jsx)(at.Z,{onResize:function(h){u(h.width<596)},children:(0,e.jsxs)(ve.Z,{split:a?"horizontal":"vertical",bordered:!0,headerBordered:!0,children:[(0,e.jsx)(ve.Z,{colSpan:"50%",layout:"center",children:(0,e.jsx)(ut,{})}),(0,e.jsx)(ve.Z,{title:t.formatMessage({id:"pages.robot.tab.preview",defaultMessage:"Preview"}),bordered:!0,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(F.ZP,{type:"link",size:"small",onClick:d,children:"Chaty"}),(0,e.jsx)(F.ZP,{type:"link",size:"small",onClick:s,children:"Mobile"})]}),tooltip:t.formatMessage({id:"pages.robot.tab.preview",defaultMessage:"Preview"}),layout:"center",children:(0,e.jsx)("div",{className:"chat-iframe-outer",children:(0,e.jsx)("iframe",{id:"chat-iframe",src:"https://visitor.bytedesk.com/ai?rid="+f.rid+"&",title:"demo",width:"100%",height:"100%",style:{border:0},"data-loaded":"true"})})})]})},"resize-observer")};function ln(r){return ye.apply(this,arguments)}function ye(){return ye=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/kb/query",{method:"GET",params:{page:t.page,size:t.size,client:"web"}}));case 1:case"end":return n.stop()}},r)})),ye.apply(this,arguments)}function ct(r,t){return ke.apply(this,arguments)}function ke(){return ke=M()(b()().mark(function r(t,o){return b()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,w.request)("/api/v1/kb/file/query",{method:"GET",params:{kbName:t,page:o.page,size:o.size,client:"web"}}));case 1:case"end":return a.stop()}},r)})),ke.apply(this,arguments)}function dt(r,t){return je.apply(this,arguments)}function je(){return je=M()(b()().mark(function r(t,o){return b()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,w.request)("/api/v1/kb/doc/query",{method:"GET",params:{kbName:t,page:o.page,size:o.size,client:"web"}}));case 1:case"end":return a.stop()}},r)})),je.apply(this,arguments)}function sn(r,t){return Re.apply(this,arguments)}function Re(){return Re=_asyncToGenerator(_regeneratorRuntime().mark(function r(t,o){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/llm/kb/file/doc/update",{method:"POST",data:{did:t,pageContent:o,client:"web"}}));case 1:case"end":return a.stop()}},r)})),Re.apply(this,arguments)}function un(r,t,o){return De.apply(this,arguments)}function De(){return De=_asyncToGenerator(_regeneratorRuntime().mark(function r(t,o,n){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/update/doc",{method:"POST",data:{did:t,content:o,metadata:n,client:"web"}}));case 1:case"end":return u.stop()}},r)})),De.apply(this,arguments)}function ft(r){return(0,w.request)("/api/v1/kb/file/delete",{method:"POST",params:{kid:r,client:"web"}})}function pt(r){return we.apply(this,arguments)}function we(){return we=M()(b()().mark(function r(t){return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,w.request)("/api/v1/kb/doc/delete",{method:"POST",params:{did:t,client:"web"}}));case 1:case"end":return n.stop()}},r)})),we.apply(this,arguments)}function cn(r){return Ce.apply(this,arguments)}function Ce(){return Ce=_asyncToGenerator(_regeneratorRuntime().mark(function r(t){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/delete/doc",{method:"POST",data:{did:t,client:"web"}}));case 1:case"end":return n.stop()}},r)})),Ce.apply(this,arguments)}var ne=(0,Ke.Ue)()((0,de.mW)((0,de.tJ)((0,Ee.n)(function(r,t){return{kbFileResult:{},kbFileDocResult:{items:[]},currentKbFile:{},currentKbFileDoc:{fileName:"",pageContent:""},fetchFiles:function(){var o=M()(b()().mark(function a(u,i){var f;return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("kbName",u," pageParams",i),s.next=3,ct(u,i);case 3:f=s.sent,console.log("kbName kbFiles",f),r({kbFileResult:f}),f.items.length>0&&r({currentKbFile:f.items[0]});case 7:case"end":return s.stop()}},a)}));function n(a,u){return o.apply(this,arguments)}return n}(),deleteFile:function(){var o=M()(b()().mark(function a(u){var i,f,d,s,p;return b()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("delete file",u),c.next=3,ft(u);case 3:i=c.sent,f=t().kbFileResult.items.filter(function(C){return C.kid!==u}),r(function(C){return{kbFileResult:{items:f}}}),console.log("delete file result",i),d=t().kbFileDocResult.items,s=b()().mark(function C(){var D;return b()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:D=i.data[p],d=d.filter(function(K){return K.did!==D});case 2:case"end":return j.stop()}},C)}),p=0;case 10:if(!(p<i.data.length)){c.next=15;break}return c.delegateYield(s(),"t0",12);case 12:p++,c.next=10;break;case 15:r(function(C){return{kbFileDocResult:{items:d}}});case 16:case"end":return c.stop()}},a)}));function n(a){return o.apply(this,arguments)}return n}(),fetchFileDocs:function(){var o=M()(b()().mark(function a(u,i){var f;return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("fetchFileDocs kbName",u," pageParams",i),s.next=3,dt(u,i);case 3:f=s.sent,console.log("kbName kbFileDocs",f),r({kbFileDocResult:f});case 6:case"end":return s.stop()}},a)}));function n(a,u){return o.apply(this,arguments)}return n}(),deleteFileDoc:function(){var o=M()(b()().mark(function a(u){var i,f;return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("delete file doc",u),s.next=3,pt(u);case 3:i=s.sent,console.log("delete file doc result",i),f=t().kbFileDocResult.items.filter(function(p){return p.did!==u}),r(function(p){return{kbFileDocResult:{items:f}}});case 7:case"end":return s.stop()}},a)}));function n(a){return o.apply(this,arguments)}return n}(),setCurrentFile:function(n){var a=t().kbFileResult.items.find(function(u){return u.kid===n});r({currentKbFile:a})},setCurrentFileDoc:function(n){var a=t().kbFileDocResult.items.find(function(u){return u.did===n});console.log("setCurrentFileDoc",n,a),r({currentKbFileDoc:a})},updateKbFileDocPython:function(){var o=M()(b()().mark(function a(u,i,f){return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log("updateKbFileDocPython",u,i,f);case 1:case"end":return s.stop()}},a)}));function n(a,u,i){return o.apply(this,arguments)}return n}(),deleteKbCache:function(){return r({},!0)}}}),{name:"KB_STORE"}))),fe=m(17501),pe=m(79811),Se=m(74969),G=m(45454),ht=function(){var t=(0,w.useIntl)(),o=S.Z.useForm(),n=k()(o,1),a=n[0],u=E(function(l){return{currentRobot:l.currentRobot}}),i=u.currentRobot,f=(0,g.useRef)(),d=(0,g.useState)(1),s=k()(d,2),p=s[0],h=s[1],c=(0,g.useState)(20),C=k()(c,2),D=C[0],A=C[1],j=ne(function(l){return{kbFileDocResult:l.kbFileDocResult,currentKbFileDoc:l.currentKbFileDoc,fetchFileDocs:l.fetchFileDocs,setCurrentFileDoc:l.setCurrentFileDoc,updateKbFileDocPython:l.updateKbFileDocPython}}),K=j.kbFileDocResult,Z=j.currentKbFileDoc,W=j.fetchFileDocs,z=j.setCurrentFileDoc,Q=j.updateKbFileDocPython;ne.subscribe(function(l,x){a.setFieldValue("fileName",l.currentKbFileDoc.file_name),a.setFieldValue("pageContent",l.currentKbFileDoc.page_content)});var O=function(){};(0,g.useEffect)(function(){O()},[]),(0,g.useEffect)(function(){O()},[p,D]),(0,g.useEffect)(function(){h(1),O()},[i]),(0,g.useEffect)(function(){f.current.reload()},[K]);var J=(0,g.useState)(!1),$=k()(J,2),X=$[0],v=$[1],I=(0,g.useState)("\u7F16\u8F91\u6587\u672C"),_=k()(I,2),N=_[0],V=_[1],R=(0,g.useState)(""),y=k()(R,2),Y=y[0],re=y[1],U=function(){v(!0)},Ne=function(){v(!1)},H=function(){v(!1)},oe=function(){console.log("handleInputText"),V("\u8F93\u5165\u6587\u672C"),U()},Ue=function(){console.log("handleInputUrl"),V("\u8F93\u5165\u7F51\u5740"),U()};function le(l){z(l.did),U()}function ie(l){console.log("handleDelete",l)}var se=[{title:t.formatMessage({id:"pages.robot.file.title",defaultMessage:"Title"}),width:150,dataIndex:"file_name"},{title:t.formatMessage({id:"pages.robot.file.content",defaultMessage:"Content"}),dataIndex:"page_content"},{title:t.formatMessage({id:"pages.robot.file.type",defaultMessage:"Type"}),width:80,dataIndex:"type",render:function(x,T){return[(0,e.jsx)(e.Fragment,{children:T.type==="file"?"\u6587\u4EF6":"\u6587\u672C"})]}},{title:t.formatMessage({id:"pages.robot.file.action",defaultMessage:"Action"}),width:150,key:"option",valueType:"option",render:function(x,T){return[(0,e.jsx)(F.ZP,{type:"link",size:"small",onClick:function(){return le(T)},children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(pe.Z,{title:t.formatMessage({id:"pages.robot.file.delete",defaultMessage:"Delete"}),onConfirm:function(){return ie(T)},onCancel:function(){return H()},children:(0,e.jsx)(F.ZP,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"},"delete")},"confirm_delete")]}}],ue=function(x){console.log("Success:",x,Z.did,Z.meta_data),Q(Z.did,x.pageContent,Z.meta_data),P.ZP.success("\u66F4\u65B0\u6210\u529F"),v(!1)},ce=function(x){console.log("Failed:",x)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{actionRef:f,columns:se,headerTitle:"\u89E3\u6790\u6587\u672C\u5185\u5BB9",request:function(x,T,B){return console.log("request:",x,T,B),h(x.current-1),A(x.pageSize),Promise.resolve({data:K.items,success:!0,total:K.total})},rowKey:"did",pagination:{showQuickJumper:!0},search:!1,toolBarRender:function(){return[(0,e.jsx)(F.ZP,{onClick:oe,children:"\u8F93\u5165\u95EE\u7B54\u5BF9"},"text")]}}),(0,e.jsx)(Se.Z,{title:N,size:"default",placement:"right",onClose:H,open:X,extra:(0,e.jsx)(G.Z,{children:(0,e.jsx)(F.ZP,{onClick:H,children:"\u53D6\u6D88"})}),children:(0,e.jsxs)(S.Z,{form:a,name:"basic",onFinish:ue,onFinishFailed:ce,autoComplete:"off",children:[(0,e.jsx)(S.Z.Item,{label:"\u6807\u9898",name:"fileName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898!"}],children:(0,e.jsx)(ee.Z,{disabled:Z.type==="file"})}),(0,e.jsx)(S.Z.Item,{label:"\u5185\u5BB9",name:"pageContent",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9!"}],children:(0,e.jsx)(ee.Z.TextArea,{rows:15})}),(0,e.jsx)(S.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(F.ZP,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"})})]})})]})};function mt(r){if(r<1024)return r+"B";if(r<1024*1024){var t=r/1024;return t.toFixed(2)+"KB"}else if(r<1024*1024*1024){var o=r/1048576;return o.toFixed(2)+"MB"}else{var n=r/1073741824;return n.toFixed(2)+"GB"}}var bt=function(){var t=(0,w.useIntl)(),o=P.ZP.useMessage(),n=k()(o,2),a=n[0],u=n[1],i=(0,w.useModel)("@@initialState"),f=i.initialState,d=E(function(R){return{currentRobot:R.currentRobot}}),s=d.currentRobot,p=(0,g.useRef)(),h=(0,g.useState)(1),c=k()(h,2),C=c[0],D=c[1],A=(0,g.useState)(10),j=k()(A,2),K=j[0],Z=j[1],W=ne(function(R){return{kbFileResult:R.kbFileResult,fetchFiles:R.fetchFiles,fetchFileDocs:R.fetchFileDocs,deleteFile:R.deleteFile}}),z=W.kbFileResult,Q=W.fetchFiles,O=W.fetchFileDocs,J=W.deleteFile;function $(R){console.log("handleEdit",R)}function X(R){console.log("handleDelete",R),J(R.kid)}function v(){console.log("handleCancel")}var I=[{title:t.formatMessage({id:"pages.robot.file.title",defaultMessage:"Title"}),dataIndex:"name"},{title:t.formatMessage({id:"pages.robot.file.type",defaultMessage:"Type"}),dataIndex:"ext"},{title:t.formatMessage({id:"pages.robot.file.size",defaultMessage:"Size"}),dataIndex:"size",render:function(y,Y){return[(0,e.jsx)(e.Fragment,{children:mt(Y.size)})]}},{title:t.formatMessage({id:"pages.robot.file.action",defaultMessage:"Action"}),width:150,key:"option",valueType:"option",render:function(y,Y){return[(0,e.jsx)(pe.Z,{title:t.formatMessage({id:"pages.robot.file.delete",defaultMessage:"Delete"}),onConfirm:function(){return X(Y)},onCancel:function(){return v()},children:(0,e.jsx)(F.ZP,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"},"delete")},"confirm_delete")]}}],_=function(){var y={page:C,size:K};Q(s.rid,y),O(s.rid,y)};(0,g.useEffect)(function(){_()},[]),(0,g.useEffect)(function(){_()},[C,K]),(0,g.useEffect)(function(){D(1),_()},[s]),(0,g.useEffect)(function(){p.current.reload()},[z]);var N={file_name:"test.png",file_kid:xe()(new Date).format("YYYYMMDDHHmmss"),rid:s.rid,client:"web"},V={name:"file",action:"/visitor/api/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem("ACCESS_TOKEN").replaceAll('"',"")},showUploadList:!1,data:N,beforeUpload:function(y){if(y.name.includes("_"))return P.ZP.error(t.formatMessage({id:"pages.robot.file.name_invalid",defaultMessage:"File name should not contain _"})),!1;N.file_name=y.name;var Y=xe()(new Date).format("YYYYMMDDHHmmss");return N.file_kid=Y,N.rid=s.rid,console.log("file:",y," uploadData:",N),a.open({type:"loading",content:t.formatMessage({id:"pages.robot.file.uploading",defaultMessage:"Uploading..."}),duration:0}),!0},onChange:function(y){y.file.status!=="uploading"&&console.log(y.file,y.fileList),y.file.status==="done"?(console.log(y.file.response.data),a.destroy(),P.ZP.success("".concat(y.file.name," file uploaded successfully")),_()):y.file.status==="error"&&P.ZP.error("".concat(y.file.name," file upload failed."))}};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{actionRef:p,columns:I,headerTitle:s.name,request:function(y,Y,re){return console.log("request:",y,Y,re),D(y.current),Z(y.pageSize),Promise.resolve({data:z.items,success:!0,total:z.total})},rowKey:"kid",pagination:{showQuickJumper:!0},search:!1,toolBarRender:function(){return[(0,e.jsx)(Be.Z,te()(te()({},V),{},{children:(0,e.jsx)(F.ZP,{icon:(0,e.jsx)(Oe.Z,{}),type:"primary",children:t.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})}),"upload")]}}),u]})},gt=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(bt,{})})},vt=function(){var t=(0,w.useIntl)(),o=S.Z.useForm(),n=k()(o,1),a=n[0],u=E(function(l){return{currentRobot:l.currentRobot}}),i=u.currentRobot,f=(0,g.useRef)(),d=(0,g.useState)(1),s=k()(d,2),p=s[0],h=s[1],c=(0,g.useState)(20),C=k()(c,2),D=C[0],A=C[1],j=ne(function(l){return{kbFileDocResult:l.kbFileDocResult,currentKbFileDoc:l.currentKbFileDoc,fetchFileDocs:l.fetchFileDocs,setCurrentFileDoc:l.setCurrentFileDoc,updateKbFileDocPython:l.updateKbFileDocPython}}),K=j.kbFileDocResult,Z=j.currentKbFileDoc,W=j.fetchFileDocs,z=j.setCurrentFileDoc,Q=j.updateKbFileDocPython;ne.subscribe(function(l,x){a.setFieldValue("fileName",l.currentKbFileDoc.file_name),a.setFieldValue("pageContent",l.currentKbFileDoc.page_content)});var O=function(){};(0,g.useEffect)(function(){O()},[]),(0,g.useEffect)(function(){O()},[p,D]),(0,g.useEffect)(function(){h(1),O()},[i]),(0,g.useEffect)(function(){f.current.reload()},[K]);var J=(0,g.useState)(!1),$=k()(J,2),X=$[0],v=$[1],I=(0,g.useState)("\u7F16\u8F91\u6587\u672C"),_=k()(I,2),N=_[0],V=_[1],R=(0,g.useState)(""),y=k()(R,2),Y=y[0],re=y[1],U=function(){v(!0)},Ne=function(){v(!1)},H=function(){v(!1)},oe=function(){console.log("handleInputText"),V("\u8F93\u5165\u6587\u672C"),U()},Ue=function(){console.log("handleInputUrl"),V("\u8F93\u5165\u7F51\u5740"),U()};function le(l){z(l.did),U()}function ie(l){console.log("handleDelete",l)}var se=[{title:t.formatMessage({id:"pages.robot.file.title",defaultMessage:"Title"}),width:150,dataIndex:"file_name"},{title:t.formatMessage({id:"pages.robot.file.content",defaultMessage:"Content"}),dataIndex:"page_content"},{title:t.formatMessage({id:"pages.robot.file.type",defaultMessage:"Type"}),width:80,dataIndex:"type",render:function(x,T){return[(0,e.jsx)(e.Fragment,{children:T.type==="file"?"\u6587\u4EF6":"\u6587\u672C"})]}},{title:t.formatMessage({id:"pages.robot.file.action",defaultMessage:"Action"}),width:150,key:"option",valueType:"option",render:function(x,T){return[(0,e.jsx)(F.ZP,{type:"link",size:"small",onClick:function(){return le(T)},children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(pe.Z,{title:t.formatMessage({id:"pages.robot.file.delete",defaultMessage:"Delete"}),onConfirm:function(){return ie(T)},onCancel:function(){return H()},children:(0,e.jsx)(F.ZP,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"},"delete")},"confirm_delete")]}}],ue=function(x){console.log("Success:",x,Z.did,Z.meta_data),Q(Z.did,x.pageContent,Z.meta_data),P.ZP.success("\u66F4\u65B0\u6210\u529F"),v(!1)},ce=function(x){console.log("Failed:",x)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{actionRef:f,columns:se,headerTitle:"\u89E3\u6790\u6587\u672C\u5185\u5BB9",request:function(x,T,B){return console.log("request:",x,T,B),h(x.current-1),A(x.pageSize),Promise.resolve({data:K.items,success:!0,total:K.total})},rowKey:"did",pagination:{showQuickJumper:!0},search:!1,toolBarRender:function(){return[(0,e.jsx)(F.ZP,{onClick:oe,children:"\u8F93\u5165\u95EE\u7B54\u5BF9"},"text")]}}),(0,e.jsx)(Se.Z,{title:N,size:"default",placement:"right",onClose:H,open:X,extra:(0,e.jsx)(G.Z,{children:(0,e.jsx)(F.ZP,{onClick:H,children:"\u53D6\u6D88"})}),children:(0,e.jsxs)(S.Z,{form:a,name:"basic",onFinish:ue,onFinishFailed:ce,autoComplete:"off",children:[(0,e.jsx)(S.Z.Item,{label:"\u6807\u9898",name:"fileName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898!"}],children:(0,e.jsx)(ee.Z,{disabled:Z.type==="file"})}),(0,e.jsx)(S.Z.Item,{label:"\u5185\u5BB9",name:"pageContent",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9!"}],children:(0,e.jsx)(ee.Z.TextArea,{rows:15})}),(0,e.jsx)(S.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(F.ZP,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"})})]})})]})},Ft=function(){var t=(0,w.useIntl)(),o=S.Z.useForm(),n=k()(o,1),a=n[0],u=E(function(l){return{currentRobot:l.currentRobot}}),i=u.currentRobot,f=(0,g.useRef)(),d=(0,g.useState)(1),s=k()(d,2),p=s[0],h=s[1],c=(0,g.useState)(20),C=k()(c,2),D=C[0],A=C[1],j=ne(function(l){return{kbFileDocResult:l.kbFileDocResult,currentKbFileDoc:l.currentKbFileDoc,fetchFileDocs:l.fetchFileDocs,setCurrentFileDoc:l.setCurrentFileDoc,updateKbFileDocPython:l.updateKbFileDocPython}}),K=j.kbFileDocResult,Z=j.currentKbFileDoc,W=j.fetchFileDocs,z=j.setCurrentFileDoc,Q=j.updateKbFileDocPython;ne.subscribe(function(l,x){a.setFieldValue("fileName",l.currentKbFileDoc.file_name),a.setFieldValue("pageContent",l.currentKbFileDoc.page_content)});var O=function(){};(0,g.useEffect)(function(){O()},[]),(0,g.useEffect)(function(){O()},[p,D]),(0,g.useEffect)(function(){h(1),O()},[i]),(0,g.useEffect)(function(){f.current.reload()},[K]);var J=(0,g.useState)(!1),$=k()(J,2),X=$[0],v=$[1],I=(0,g.useState)("\u7F16\u8F91\u6587\u672C"),_=k()(I,2),N=_[0],V=_[1],R=(0,g.useState)(""),y=k()(R,2),Y=y[0],re=y[1],U=function(){v(!0)},Ne=function(){v(!1)},H=function(){v(!1)},oe=function(){console.log("handleInputText"),V("\u8F93\u5165\u6587\u672C"),U()},Ue=function(){console.log("handleInputUrl"),V("\u8F93\u5165\u7F51\u5740"),U()};function le(l){z(l.did),U()}function ie(l){console.log("handleDelete",l)}var se=[{title:t.formatMessage({id:"pages.robot.file.title",defaultMessage:"Title"}),width:150,dataIndex:"file_name"},{title:t.formatMessage({id:"pages.robot.file.content",defaultMessage:"Content"}),dataIndex:"page_content"},{title:t.formatMessage({id:"pages.robot.file.type",defaultMessage:"Type"}),width:80,dataIndex:"type",render:function(x,T){return[(0,e.jsx)(e.Fragment,{children:T.type==="file"?"\u6587\u4EF6":"\u6587\u672C"})]}},{title:t.formatMessage({id:"pages.robot.file.action",defaultMessage:"Action"}),width:150,key:"option",valueType:"option",render:function(x,T){return[(0,e.jsx)(F.ZP,{type:"link",size:"small",onClick:function(){return le(T)},children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(pe.Z,{title:t.formatMessage({id:"pages.robot.file.delete",defaultMessage:"Delete"}),onConfirm:function(){return ie(T)},onCancel:function(){return H()},children:(0,e.jsx)(F.ZP,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"},"delete")},"confirm_delete")]}}],ue=function(x){console.log("Success:",x,Z.did,Z.meta_data),Q(Z.did,x.pageContent,Z.meta_data),P.ZP.success("\u66F4\u65B0\u6210\u529F"),v(!1)},ce=function(x){console.log("Failed:",x)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{actionRef:f,columns:se,headerTitle:"\u89E3\u6790\u6587\u672C\u5185\u5BB9",request:function(x,T,B){return console.log("request:",x,T,B),h(x.current-1),A(x.pageSize),Promise.resolve({data:K.items,success:!0,total:K.total})},rowKey:"did",pagination:{showQuickJumper:!0},search:!1,toolBarRender:function(){return[(0,e.jsx)(F.ZP,{onClick:oe,children:"\u8F93\u5165\u95EE\u7B54\u5BF9"},"text")]}}),(0,e.jsx)(Se.Z,{title:N,size:"default",placement:"right",onClose:H,open:X,extra:(0,e.jsx)(G.Z,{children:(0,e.jsx)(F.ZP,{onClick:H,children:"\u53D6\u6D88"})}),children:(0,e.jsxs)(S.Z,{form:a,name:"basic",onFinish:ue,onFinishFailed:ce,autoComplete:"off",children:[(0,e.jsx)(S.Z.Item,{label:"\u6807\u9898",name:"fileName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898!"}],children:(0,e.jsx)(ee.Z,{disabled:Z.type==="file"})}),(0,e.jsx)(S.Z.Item,{label:"\u5185\u5BB9",name:"pageContent",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9!"}],children:(0,e.jsx)(ee.Z.TextArea,{rows:15})}),(0,e.jsx)(S.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(F.ZP,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"})})]})})]})},xt=function(){var t=(0,w.useIntl)(),o=[{key:"file",label:t.formatMessage({id:"pages.robot.kb.file",defaultMessage:"File"}),children:(0,e.jsx)(gt,{})},{key:"text",label:t.formatMessage({id:"pages.robot.kb.text",defaultMessage:"Text"}),children:(0,e.jsx)(ht,{})},{key:"qa",label:t.formatMessage({id:"pages.robot.kb.qa",defaultMessage:"Q&A"}),children:(0,e.jsx)(vt,{})},{key:"web",label:t.formatMessage({id:"pages.robot.kb.web",defaultMessage:"Website"}),children:(0,e.jsx)(Ft,{})}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,{tabPosition:"left",items:o})})},Le=xt,q=m(34347),yt=function(){var r=E(function(n){return n.currentRobot}),t=function(){navigator.clipboard.writeText("/?rid="+r.rid+"&"),P.ZP.success("\u590D\u5236\u6210\u529F")},o=function(){window.open("/?rid="+r.rid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+r.rid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(F.ZP,{onClick:t,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:o,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},kt=function(){var r=E(function(n){return n.currentRobot}),t=function(){navigator.clipboard.writeText("/?rid="+r.rid+"&"),P.ZP.success("\u590D\u5236\u6210\u529F")},o=function(){window.open("/?rid="+r.rid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+r.rid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(F.ZP,{onClick:t,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:o,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},jt=function(){var r=E(function(n){return n.currentRobot}),t=function(){navigator.clipboard.writeText("/?rid="+r.rid+"&"),P.ZP.success("\u590D\u5236\u6210\u529F")},o=function(){window.open("/?rid="+r.rid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+r.rid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(F.ZP,{onClick:t,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:o,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Rt=function(){var r=E(function(n){return n.currentRobot}),t=function(){navigator.clipboard.writeText("/?rid="+r.rid+"&"),P.ZP.success("\u590D\u5236\u6210\u529F")},o=function(){window.open("/?rid="+r.rid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+r.rid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(F.ZP,{onClick:t,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:o,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Dt=function(){var r=E(function(n){return n.currentRobot}),t=function(){navigator.clipboard.writeText("/?rid="+r.rid+"&"),P.ZP.success("\u590D\u5236\u6210\u529F")},o=function(){window.open("/?rid="+r.rid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+r.rid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(F.ZP,{onClick:t,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:o,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},wt=function(){var r=E(function(n){return n.currentRobot}),t=function(){navigator.clipboard.writeText("/?rid="+r.rid+"&"),P.ZP.success("\u590D\u5236\u6210\u529F")},o=function(){window.open("/?rid="+r.rid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+r.rid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(F.ZP,{onClick:t,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:o,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Ct=[{key:"web",label:"Web",children:(0,e.jsx)(yt,{})},{key:"h5",label:"H5",children:(0,e.jsx)(Rt,{})},{key:"ios",label:"iOS",children:(0,e.jsx)(kt,{})},{key:"android",label:"Android",children:(0,e.jsx)(wt,{})},{key:"uniapp",label:"Uniapp",children:(0,e.jsx)(jt,{})},{key:"flutter",label:"Flutter",children:(0,e.jsx)(Dt,{})}],St=function(){var t=(0,w.useIntl)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,{tabPosition:"left",items:Ct})})},ze=St,Ze=m(52069),Zt=m(10829);function Mt(r){var t=(0,Ze.O1)({id:"draggable"}),o=t.attributes,n=t.listeners,a=t.setNodeRef,u=t.transform,i=u?{transform:Zt.ux.Translate.toString(u)}:void 0;return(0,e.jsx)(F.ZP,te()(te()(te()({ref:a,style:i},n),o),{},{children:r.children}))}function Tt(r){var t=(0,Ze.Zj)({id:"droppable"}),o=t.isOver,n=t.setNodeRef,a={color:o?"green":void 0};return(0,e.jsx)("div",{ref:n,style:a,children:r.children})}var dn=L.Z.Header,fn=L.Z.Footer,Pt=L.Z.Sider,Kt=L.Z.Content,Et={},It={textAlign:"center",lineHeight:"120px",color:"#fff",backgroundColor:"#EEFAE0"},Ot={minHeight:120,backgroundColor:"#EEFAE0"},At=function(){var t=(0,w.useIntl)(),o=(0,g.useState)(!1),n=k()(o,2),a=n[0],u=n[1],i=(0,e.jsx)(Mt,{children:"Drag me"});function f(c){console.log("handleDragStart",c)}function d(c){console.log("handleDragMove",c)}function s(c){console.log("handleDragOver",c)}function p(c){c.over&&c.over.id==="droppable"&&u(!0)}function h(c){console.log("handleDragCancel",c)}return(0,e.jsx)(Ze.LB,{onDragEnd:p,children:(0,e.jsxs)(L.Z,{style:Et,children:[(0,e.jsx)(Pt,{style:It,children:a?null:i}),(0,e.jsx)(Kt,{style:Ot,children:(0,e.jsx)(Tt,{children:a?i:"Drop here"})})]})})},Bt=At,_t=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Z,{children:(0,e.jsx)("div",{children:"\u4F1A\u8BDD\u8BB0\u5F55"})})})},Lt=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Z,{children:(0,e.jsx)("div",{children:"\u6D88\u606F\u8BB0\u5F55"})})})},zt=[{key:"1",label:"\u4F1A\u8BDD",children:(0,e.jsx)(_t,{})},{key:"2",label:"\u6D88\u606F",children:(0,e.jsx)(Lt,{})}],$t=function(){var t=(0,w.useIntl)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,{tabPosition:"left",items:zt})})},Nt=$t,$e=m(67159),Me=m(79047),pn={labelCol:{span:8},wrapperCol:{span:16}},Ut=function(){var r=S.Z.useForm(),t=k()(r,1),o=t[0],n=E(function(f){return{currentRobot:f.currentRobot,updateRobot:f.updateRobot}}),a=n.currentRobot,u=n.updateRobot;E.subscribe(function(f,d){o.setFieldValue("prompt",f.currentRobot.prompt),o.setFieldValue("model_name",f.currentRobot.model_name)});var i=function(){var f=M()(b()().mark(function d(s){return b()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return console.log("handleSubmit",s),s.rid=a.rid,s.name=a.name,s.description=a.description,s.welcome_tip=a.welcome_tip,s.avatar=a.avatar,s.show_history=a.show_history,s.history_count=a.history_count,s.kb_name=a.kb_name,s.is_published=a.is_published,h.next=12,u(s,function(c){c.statusCode===200&&P.ZP.success("update success")});case 12:case"end":return h.stop()}},d)}));return function(s){return f.apply(this,arguments)}}();return(0,e.jsxs)(Ae.A,{form:o,size:"large",onFinish:function(){var f=M()(b()().mark(function d(s){return b()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return console.log("onFinish:",s),h.next=3,i(s);case 3:case"end":return h.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),initialValues:{prompt:a.prompt,model_name:a.model_name,model_api_key:a.model_api_key,model_api_secret:a.model_api_secret,embeddings_name:a.embeddings_name,top_k:a.top_k,score_threshold:a.score_threshold,temperature:a.temperature},children:[(0,e.jsx)(Fe.Z,{width:"lg",name:"prompt",label:"prompt",placeholder:"\u8BF7\u8F93\u5165prompt"}),(0,e.jsx)($e.Z,{width:"lg",name:"model_name",label:"model_name",allowClear:!0,options:[{value:"model_name",label:"model_name"}]}),(0,e.jsx)($e.Z,{width:"lg",name:"embeddings_name",label:"embeddings_name",allowClear:!0,options:[{value:"embeddings_name",label:"embeddings_name"}]}),(0,e.jsx)(Me.Z,{width:"lg",label:"top_k",name:"top_k",min:1,max:3}),(0,e.jsx)(Me.Z,{width:"lg",label:"score_threshold",name:"score_threshold",min:0,max:1,fieldProps:{precision:1,step:.1}}),(0,e.jsx)(Me.Z,{width:"lg",label:"temperature",name:"temperature",min:0,max:1,fieldProps:{precision:1,step:.1}})]})},Ht=function(){return(0,e.jsx)(e.Fragment,{children:"quick replies"})},Vt=function(){return(0,e.jsx)(e.Fragment,{children:"appearance"})},Yt=function(){return(0,e.jsx)(e.Fragment,{children:"pop tip"})},Gt=[{key:"appearance",label:"Appearance",children:(0,e.jsx)(Vt,{})},{key:"poptip",label:"Poptip",children:(0,e.jsx)(Yt,{})},{key:"quick",label:"QuickReplies",children:(0,e.jsx)(Ht,{})},{key:"llm",label:"LLm",children:(0,e.jsx)(Ut,{})}],Wt=function(){var t=(0,w.useIntl)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,{tabPosition:"left",items:Gt})})},Qt=Wt,Jt=function(){var t=(0,w.useIntl)(),o=function(i){},n=[{key:"basic",label:t.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(_e,{})},{key:"kb",label:t.formatMessage({id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,e.jsx)(Le,{})},{key:"channel",label:t.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(ze,{})},{key:"statistic",label:t.formatMessage({id:"pages.robot.tab.statistic",defaultMessage:"Statistic"}),children:(0,e.jsx)(Nt,{})},{key:"advanced",label:t.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,e.jsx)(Qt,{})},{key:"flow",label:t.formatMessage({id:"pages.robot.tab.flow",defaultMessage:"Flow"}),children:(0,e.jsx)(Bt,{})}],a=[{key:"basic",label:t.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(_e,{})},{key:"kb",label:t.formatMessage({id:"pages.robot.tab.kb",defaultMessage:"Knowledge Basic"}),children:(0,e.jsx)(Le,{})},{key:"channel",label:t.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(ze,{})}];return(0,e.jsx)(ae.Z,{defaultActiveKey:"1",items:a,onChange:o})},Xt=Jt,hn=L.Z.Header,mn=L.Z.Footer,qt=L.Z.Sider,en=L.Z.Content,tn={minHeight:120,backgroundColor:"#EEFAE0"},nn={backgroundColor:"#EEFAE0",borderRight:"1px solid #ccc"},bn={backgroundColor:"#EEFAE0"},rn=function(){return(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(qt,{style:nn,children:(0,e.jsx)(rt,{})}),(0,e.jsx)(L.Z,{children:(0,e.jsx)(en,{style:tn,children:(0,e.jsx)(Xt,{})})})]})},an=rn}}]);
