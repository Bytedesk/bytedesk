"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[915],{70127:function(Q,x,e){e.d(x,{Z:function(){return h}});var r=e(20361),a=e(52983),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},M=E,T=e(77990),g=function(i,d){return a.createElement(T.Z,(0,r.Z)((0,r.Z)({},i),{},{ref:d,icon:M}))};g.displayName="LockOutlined";var h=a.forwardRef(g)},79048:function(Q,x,e){e.d(x,{Z:function(){return h}});var r=e(20361),a=e(52983),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},M=E,T=e(77990),g=function(i,d){return a.createElement(T.Z,(0,r.Z)((0,r.Z)({},i),{},{ref:d,icon:M}))};g.displayName="MobileOutlined";var h=a.forwardRef(g)},46423:function(Q,x,e){var r=e(20361),a=e(19982),E=e(60024),M=e(27867),T=e(49486),g=e(77159),h=e(64116),R=e(97596),i=e(52983),d=e(34773),F=e(97458),N=["rules","name","phoneName","fieldProps","onTiming","captchaTextRender","captchaProps"],l=i.forwardRef(function(u,_){var f=g.Z.useFormInstance(),s=(0,i.useState)(u.countDown||60),o=(0,T.Z)(s,2),t=o[0],D=o[1],O=(0,i.useState)(!1),W=(0,T.Z)(O,2),A=W[0],n=W[1],y=(0,i.useState)(),p=(0,T.Z)(y,2),z=p[0],m=p[1],J=u.rules,w=u.name,V=u.phoneName,K=u.fieldProps,G=u.onTiming,C=u.captchaTextRender,k=C===void 0?function(P,U){return P?"".concat(U," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:C,q=u.captchaProps,H=(0,M.Z)(u,N),$=function(){var P=(0,E.Z)((0,a.Z)().mark(function U(B){return(0,a.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,m(!0),c.next=4,H.onGetCaptcha(B);case 4:m(!1),n(!0),c.next=13;break;case 8:c.prev=8,c.t0=c.catch(0),n(!1),m(!1),console.log(c.t0);case 13:case"end":return c.stop()}},U,null,[[0,8]])}));return function(B){return P.apply(this,arguments)}}();return(0,i.useImperativeHandle)(_,function(){return{startTiming:function(){return n(!0)},endTiming:function(){return n(!1)}}}),(0,i.useEffect)(function(){var P=0,U=u.countDown;return A&&(P=window.setInterval(function(){D(function(B){return B<=1?(n(!1),clearInterval(P),U||60):B-1})},1e3)),function(){return clearInterval(P)}},[A]),(0,i.useEffect)(function(){G&&G(t)},[t,G]),(0,F.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},K==null?void 0:K.style),{},{display:"flex",alignItems:"center"}),ref:_,children:[(0,F.jsx)(h.Z,(0,r.Z)((0,r.Z)({},K),{},{style:(0,r.Z)({flex:1,transition:"width .3s",marginRight:8},K==null?void 0:K.style)})),(0,F.jsx)(R.ZP,(0,r.Z)((0,r.Z)({style:{display:"block"},disabled:A,loading:z},q),{},{onClick:(0,E.Z)((0,a.Z)().mark(function P(){var U;return(0,a.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.prev=0,!V){v.next=9;break}return v.next=4,f.validateFields([V].flat(1));case 4:return U=f.getFieldValue([V].flat(1)),v.next=7,$(U);case 7:v.next=11;break;case 9:return v.next=11,$("");case 11:v.next=16;break;case 13:v.prev=13,v.t0=v.catch(0),console.log(v.t0);case 16:case"end":return v.stop()}},P,null,[[0,13]])})),children:k(A,t)}))]})}),Z=(0,d.G)(l);x.Z=Z},37778:function(Q,x,e){var r=e(49486),a=e(20361),E=e(27867),M=e(26308),T=e(77159),g=e(66360),h=e(36490),R=e(52983),i=e(18607),d=e(97458),F=["fieldProps","proFieldProps"],N=["fieldProps","proFieldProps"],l="text",Z=function(o){var t=o.fieldProps,D=o.proFieldProps,O=(0,E.Z)(o,F);return(0,d.jsx)(i.Z,(0,a.Z)({valueType:l,fieldProps:t,filedConfig:{valueType:l},proFieldProps:D},O))},u=function(o){var t=(0,M.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),D=(0,r.Z)(t,2),O=D[0],W=D[1];return(0,d.jsx)(T.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(n){var y,p=n.getFieldValue(o.name||[]);return(0,d.jsx)(g.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(m){return m&&m.parentNode?m.parentNode:m},onOpenChange:W,content:(0,d.jsxs)("div",{style:{padding:"4px 0"},children:[(y=o.statusRender)===null||y===void 0?void 0:y.call(o,p),o.strengthText?(0,d.jsx)("div",{style:{marginTop:10},children:(0,d.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"right"},o.popoverProps),{},{open:O,children:o.children}))}})},_=function(o){var t=o.fieldProps,D=o.proFieldProps,O=(0,E.Z)(o,N),W=(0,R.useState)(!1),A=(0,r.Z)(W,2),n=A[0],y=A[1];return t!=null&&t.statusRender&&O.name?(0,d.jsx)(u,{name:O.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:n,onOpenChange:y,children:(0,d.jsx)(i.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,h.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(z){var m;t==null||(m=t.onBlur)===null||m===void 0||m.call(t,z),y(!1)},onClick:function(z){var m;t==null||(m=t.onClick)===null||m===void 0||m.call(t,z),y(!0)}}),proFieldProps:D,filedConfig:{valueType:l}},O))}):(0,d.jsx)(i.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:D,filedConfig:{valueType:l}},O))},f=Z;f.Password=_,f.displayName="ProFormComponent",x.Z=f},92188:function(Q,x,e){e.d(x,{U:function(){return u}});var r=e(20361),a=e(27867),E=e(14522),M=e(7734),T=e(51865),g=e.n(T),h=e(52983),R=e(33272),i=e(43818),d=e(61679),F=function(f){return(0,i.Z)((0,i.Z)({},f.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:f.colorTextSecondary,fontSize:f.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,i.Z)({},"".concat(f.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function N(_){return(0,d.Xj)("LoginForm",function(f){var s=(0,r.Z)((0,r.Z)({},f),{},{componentCls:".".concat(_)});return[F(s)]})}var l=e(97458),Z=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function u(_){var f,s=_.logo,o=_.message,t=_.contentStyle,D=_.title,O=_.subTitle,W=_.actions,A=_.children,n=_.containerStyle,y=_.otherStyle,p=(0,a.Z)(_,Z),z=(0,E.YB)(),m=p.submitter===!1?!1:(0,r.Z)((0,r.Z)({searchConfig:{submitText:z.getMessage("loginForm.submitText","\u767B\u5F55")}},p.submitter),{},{submitButtonProps:(0,r.Z)({size:"large",style:{width:"100%"}},(f=p.submitter)===null||f===void 0?void 0:f.submitButtonProps),render:function(H,$){var P,U=$.pop();if(typeof(p==null||(P=p.submitter)===null||P===void 0?void 0:P.render)=="function"){var B,v;return p==null||(B=p.submitter)===null||B===void 0||(v=B.render)===null||v===void 0?void 0:v.call(B,H,$)}return U}}),J=(0,h.useContext)(M.ZP.ConfigContext),w=J.getPrefixCls("pro-form-login"),V=N(w),K=V.wrapSSR,G=V.hashId,C=function(H){return"".concat(w,"-").concat(H," ").concat(G)},k=(0,h.useMemo)(function(){return s?typeof s=="string"?(0,l.jsx)("img",{src:s}):s:null},[s]);return K((0,l.jsxs)("div",{className:g()(C("container"),G),style:n,children:[(0,l.jsxs)("div",{className:"".concat(C("top")," ").concat(G).trim(),children:[D||k?(0,l.jsxs)("div",{className:"".concat(C("header")),children:[k?(0,l.jsx)("span",{className:C("logo"),children:k}):null,D?(0,l.jsx)("span",{className:C("title"),children:D}):null]}):null,O?(0,l.jsx)("div",{className:C("desc"),children:O}):null]}),(0,l.jsxs)("div",{className:C("main"),style:(0,r.Z)({width:328},t),children:[(0,l.jsxs)(R.A,(0,r.Z)((0,r.Z)({isKeyPressSubmit:!0},p),{},{submitter:m,children:[o,A]})),W?(0,l.jsx)("div",{className:C("main-other"),style:y,children:W}):null]})]}))}},66097:function(Q,x,e){var r=e(45332),a=e.n(r),E=e(52983),M=function(g,h){var R=(0,E.useState)(function(){try{var l=localStorage.getItem(g);return l?JSON.parse(l):(localStorage.setItem(g,JSON.stringify(h)),h)}catch(Z){return localStorage.setItem(g,JSON.stringify(h)),h}}),i=a()(R,2),d=i[0],F=i[1],N=function(Z){var u;if(typeof Z=="function"){var _=Z;u=_(d)}else u=Z;localStorage.setItem(g,JSON.stringify(u)),F(u)};return[d,N]};x.Z=M},67542:function(Q,x,e){e.r(x);var r=e(90819),a=e.n(r),E=e(73193),M=e.n(E),T=e(89933),g=e.n(T),h=e(45332),R=e.n(h),i=e(53936),d=e(32405),F=e(24255),N=e(70127),l=e(79048),Z=e(92188),u=e(37778),_=e(46423),f=e(56306),s=e(77108),o=e(69687),t=e(3206),D=e(52983),O=e(63730),W=e(93711),A=e(66097),n=e(97458),y=function(){var J=(0,f.l)(function(w){var V=w.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:V.borderRadius,":hover":{backgroundColor:V.colorBgTextHover}}});return(0,n.jsx)("div",{className:J,"data-lang":!0,children:s.SelectLang&&(0,n.jsx)(s.SelectLang,{})})},p=function(J){var w=J.content;return(0,n.jsx)(o.Z,{style:{marginBottom:24},message:w,type:"error",showIcon:!0})},z=function(){var J=(0,A.Z)("ACCESS_TOKEN",""),w=R()(J,2),V=w[0],K=w[1],G=(0,D.useState)("account"),C=R()(G,2),k=C[0],q=C[1],H=(0,s.useModel)("@@initialState"),$=H.initialState,P=H.loading,U=H.refresh,B=H.setInitialState,v=(0,f.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('./assets/images/bg-wide.png')",backgroundSize:"100% 100%"}}),c=(0,s.useIntl)(),te=function(){var X=g()(a()().mark(function L(){var b,S;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,$==null||(b=$.fetchUserInfo)===null||b===void 0?void 0:b.call($);case 2:S=I.sent,S&&(0,O.flushSync)(function(){B(function(ee){return M()(M()({},ee),{},{userInfo:S})})});case 4:case"end":return I.stop()}},L)}));return function(){return X.apply(this,arguments)}}(),ae=function(){var X=g()(a()().mark(function L(b){var S,Y,I,ee;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,i.x4)(M()({},b));case 3:if(S=j.sent,console.log("LoginResult:",S),!S.data.access_token){j.next=14;break}return K(S.data.access_token),Y=c.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),t.ZP.success(Y),j.next=11,te();case 11:return I=new URL(window.location.href).searchParams,s.history.push(I.get("redirect")||"/"),j.abrupt("return");case 14:console.log(S),j.next=22;break;case 17:j.prev=17,j.t0=j.catch(0),ee=c.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(j.t0),t.ZP.error(ee);case 22:case"end":return j.stop()}},L,null,[[0,17]])}));return function(b){return X.apply(this,arguments)}}(),ne="account";return(0,n.jsxs)("div",{className:v,children:[(0,n.jsx)(s.Helmet,{children:(0,n.jsxs)("title",{children:[c.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",W.Z.title]})}),(0,n.jsx)(y,{}),(0,n.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,n.jsxs)(Z.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,n.jsx)("img",{alt:"logo",src:"/images/logo.png"}),title:"\u5FAE\u8BED",subTitle:c.formatMessage({id:"pages.login.forgotPassword"}),initialValues:{autoLogin:!0},actions:[],onFinish:function(){var X=g()(a()().mark(function L(b){var S;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return S={username:b.username,password:b.password},console.log("login info:",S),I.next=4,ae(S);case 4:case"end":return I.stop()}},L)}));return function(L){return X.apply(this,arguments)}}(),children:[status==="error"&&ne==="account"&&(0,n.jsx)(p,{content:c.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),k==="account"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(F.Z,{})},placeholder:c.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,n.jsx)(u.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(N.Z,{})},placeholder:c.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),status==="error"&&ne==="mobile"&&(0,n.jsx)(p,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),k==="mobile"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{fieldProps:{size:"large",prefix:(0,n.jsx)(l.Z,{})},name:"mobile",placeholder:c.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,n.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,n.jsx)(N.Z,{})},captchaProps:{size:"large"},placeholder:c.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(L,b){return L?"".concat(b," ").concat(c.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):c.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var X=g()(a()().mark(function L(b){return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:t.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F");case 1:case"end":return Y.stop()}},L)}));return function(L){return X.apply(this,arguments)}}()})]}),(0,n.jsx)("div",{style:{marginBottom:64},children:(0,n.jsxs)("div",{style:{float:"right"},children:[(0,n.jsx)(s.Link,{to:"/auth/login",children:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.submit",defaultMessage:"\u767B\u5F55 "})}),(0,n.jsx)(s.Link,{to:"/auth/register",children:(0,n.jsx)(s.FormattedMessage,{id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C"})})]})})]})}),(0,n.jsx)(d.$_,{})]})};x.default=z}}]);
