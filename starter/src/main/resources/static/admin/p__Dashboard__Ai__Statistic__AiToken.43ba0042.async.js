"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2180],{2484:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(83910),r=a(44194),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},i=a(54183),o=function(e,t){return r.createElement(i.Z,(0,s.Z)({},e,{ref:t,icon:n}))};var c=r.forwardRef(o)},68385:function(e,t,a){var s=(0,a(84783).i)("Column");t.Z=s},46587:function(e,t,a){a.d(t,{Jr:function(){return h},LF:function(){return l},Oh:function(){return x},WS:function(){return g}});var s=a(90819),r=a.n(s),n=a(73193),i=a.n(n),o=a(89933),c=a.n(o),d=a(39497),u=a(14906);function l(e){return p.apply(this,arguments)}function p(){return(p=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/query/org",{method:"GET",params:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/create",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/update",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/model/delete",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},87328:function(e,t,a){a.d(t,{EN:function(){return l},G_:function(){return h},Vh:function(){return M},WN:function(){return x},ry:function(){return g}});var s=a(90819),r=a.n(s),n=a(73193),i=a.n(n),o=a(89933),c=a.n(o),d=a(39497),u=a(14906);function l(e){return p.apply(this,arguments)}function p(){return(p=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ai/statistic/token/query/org",{method:"GET",params:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=c()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ai/statistic/token/delete",{method:"POST",data:i()(i()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return m.apply(this,arguments)}function m(){return(m=c()(r()().mark((function e(t,a){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ai/statistic/token/hourly",{method:"GET",params:{orgUid:t,date:a,channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,a){return v.apply(this,arguments)}function v(){return(v=c()(r()().mark((function e(t,a,s){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ai/statistic/token/hourly/provider",{method:"GET",params:{orgUid:t,date:a,aiProvider:s,channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,a){return k.apply(this,arguments)}function k(){return(k=c()(r()().mark((function e(t,a,s){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ai/statistic/token/hourly/model",{method:"GET",params:{orgUid:t,date:a,aiModelType:s,channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},30893:function(e,t,a){a.r(t);var s=a(84176),r=a.n(s),n=a(86222),i=a.n(n),o=a(10154),c=a.n(o),d=a(73193),u=a.n(d),l=a(90819),p=a.n(l),h=a(89933),f=a.n(h),g=a(45332),m=a.n(g),x=a(19433),v=a(91361),M=a(98830),k=a(54881),y=a(2484),j=a(89246),w=a(14906),b=a(83001),F=a(13847),T=a(81739),S=a(2142),Z=a(63649),R=a(86895),I=a(2907),q=a(82770),C=a(40110),D=a(34201),P=a(79489),A=a(35281),U=a(44194),Y=a(87328),E=a(68790),O=a(46587),z=a(39497),J=a(71194),N=a(68385),B=a(96596),G=a.n(B),X=a(31549),L=["current","pageSize"],H=b.Z.Title,W=F.Z.Option;t.default=function(){var e=(0,w.useIntl)(),t=(0,U.useRef)(),a=((0,v.Z)().translateString,(0,M.u)((function(e){return e.currentOrg}))),s=(0,U.useState)(1),n=m()(s,2),o=(n[0],n[1]),d=(0,U.useState)(10),l=m()(d,2),h=(l[0],l[1]),g=(0,U.useState)([]),b=m()(g,2),B=b[0],K=b[1],Q=(0,U.useState)([]),$=m()(Q,2),_=$[0],V=$[1],ee=(0,U.useState)(0),te=m()(ee,2),ae=(te[0],te[1]),se=(0,U.useState)({}),re=m()(se,2),ne=(re[0],re[1]),ie=(0,U.useState)(G()().format("YYYY-MM-DD")),oe=m()(ie,2),ce=oe[0],de=oe[1],ue=(0,U.useState)(""),le=m()(ue,2),pe=le[0],he=le[1],fe=(0,U.useState)(""),ge=m()(fe,2),me=ge[0],xe=ge[1],ve=(0,U.useState)([]),Me=m()(ve,2),ke=Me[0],ye=Me[1],je=(0,U.useState)(!1),we=m()(je,2),be=we[0],Fe=we[1],Te=(0,U.useState)([]),Se=m()(Te,2),Ze=Se[0],Re=Se[1],Ie=(0,U.useState)({}),qe=m()(Ie,2),Ce=qe[0],De=qe[1],Pe=(0,U.useState)(!1),Ae=m()(Pe,2),Ue=Ae[0],Ye=Ae[1],Ee=(0,U.useState)(!1),Oe=m()(Ee,2),ze=Oe[0],Je=Oe[1];(0,U.useEffect)((function(){null!=a&&a.uid&&Ne()}),[null==a?void 0:a.uid]);var Ne=function(){var e=f()(p()().mark((function e(){var t,s,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Je(!0),e.prev=1,t={pageNumber:0,pageSize:100,sortBy:"createdAt",sortDirection:"ascend",orgUid:null==a?void 0:a.uid,level:z.whQ},e.next=5,(0,E.mK)(t);case 5:200===(s=e.sent).code?(r=s.data.content||[],Re(r)):x.yw.error(s.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to fetch providers:",e.t0);case 12:return e.prev=12,Je(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var t=f()(p()().mark((function t(s){var r,n,i,o;return p()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a&&a.uid&&!Ce[s]){t.next=2;break}return t.abrupt("return");case 2:if(Ye(!0),t.prev=3,r=Ze.find((function(e){return e.type===s}))){t.next=7;break}return t.abrupt("return");case 7:return n={pageNumber:0,pageSize:50,providerUid:r.uid,orgUid:a.uid,level:z.whQ},t.next=10,(0,O.LF)(n);case 10:200===(i=t.sent).code?(o=i.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,type:e.type,providerName:r.type}})),De((function(e){return u()(u()({},e),{},c()({},s,o))}))):x.yw.error(i.message),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),console.error("Failed to fetch models:",t.t0),x.yw.error(e.formatMessage({id:"error"}));case 18:return t.prev=18,Ye(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[3,14,18,21]])})));return function(e){return t.apply(this,arguments)}}(),Ge=function(e){he(e),xe(""),e&&!Ce[e]&&Be(e)},Xe=function(){var t=f()(p()().mark((function t(){var s,r;return p()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a&&a.uid){t.next=2;break}return t.abrupt("return");case 2:if(Fe(!0),t.prev=3,!pe||!me){t.next=10;break}return t.next=7,(0,Y.WN)(a.uid,ce,pe);case 7:r=t.sent,t.next=25;break;case 10:if(!pe){t.next=16;break}return t.next=13,(0,Y.WN)(a.uid,ce,pe);case 13:r=t.sent,t.next=25;break;case 16:if(!me){t.next=22;break}return t.next=19,(0,Y.Vh)(a.uid,ce,me);case 19:r=t.sent,t.next=25;break;case 22:return t.next=24,(0,Y.ry)(a.uid,ce);case 24:r=t.sent;case 25:200===r.code&&null!==(s=r.data)&&void 0!==s&&s.hourlyData?ye(r.data.hourlyData):ye([]),t.next=33;break;case 28:t.prev=28,t.t0=t.catch(3),console.error("Failed to fetch hourly data:",t.t0),x.yw.error(e.formatMessage({id:"statistic.token.chart.load.error",defaultMessage:"Failed to load chart data"})),ye([]);case 33:return t.prev=33,Fe(!1),t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[3,28,33,36]])})));return function(){return t.apply(this,arguments)}}();(0,U.useEffect)((function(){Xe()}),[ce,pe,me,null==a?void 0:a.uid]);var Le,He={data:ke.map((function(t){return{hour:"".concat(t.hour,":00"),value:t.totalTokens||0,type:e.formatMessage({id:"statistic.token.chart.totalTokens",defaultMessage:"Total Tokens"})}})),xField:"hour",yField:"value",seriesField:"type",smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},color:"#1890ff",point:{size:5,shape:"diamond"},tooltip:{showCrosshairs:!0,shared:!0}},We={data:ke.map((function(t){return{hour:"".concat(t.hour,":00"),value:t.totalCost||0,type:e.formatMessage({id:"statistic.token.chart.totalCost",defaultMessage:"Total Cost ($)"})}})),xField:"hour",yField:"value",seriesField:"type",smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},color:"#52c41a",point:{size:5,shape:"diamond"},tooltip:{showCrosshairs:!0,shared:!0}},Ke={data:ke.flatMap((function(t){return[{hour:"".concat(t.hour,":00"),value:t.successRequests||0,type:e.formatMessage({id:"statistic.token.chart.success",defaultMessage:"Success"})},{hour:"".concat(t.hour,":00"),value:t.failedRequests||0,type:e.formatMessage({id:"statistic.token.chart.failed",defaultMessage:"Failed"})}]})),xField:"hour",yField:"value",seriesField:"type",isGroup:!0,columnStyle:{radius:[20,20,0,0]},color:["#52c41a","#ff4d4f"],tooltip:{showCrosshairs:!0,shared:!0}},Qe={data:ke.map((function(t){return{hour:"".concat(t.hour,":00"),value:t.avgResponseTime||0,type:e.formatMessage({id:"statistic.token.chart.avgResponseTime",defaultMessage:"Avg Response Time (ms)"})}})),xField:"hour",yField:"value",seriesField:"type",smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},color:"#722ed1",point:{size:5,shape:"diamond"},tooltip:{showCrosshairs:!0,shared:!0}},$e=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,X.jsx)(w.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,fixed:"left"},{title:(0,X.jsx)(w.FormattedMessage,{id:"ai.provider",defaultMessage:"AI Provider"}),dataIndex:"aiProvider",width:120,copyable:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.aiProvider.tooltip"})},{title:(0,X.jsx)(w.FormattedMessage,{id:"ai.model",defaultMessage:"AI Model"}),dataIndex:"aiModelType",width:120,copyable:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.aiModelType.tooltip"})},{title:(0,X.jsx)(w.FormattedMessage,{id:"ai.tokens.prompt",defaultMessage:"Prompt Tokens"}),dataIndex:"promptTokens",width:140,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.promptTokens.tooltip"}),render:function(e,t){var a=t.promptTokens;return a?(0,X.jsx)(T.Z,{color:"blue",children:a.toLocaleString()}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"ai.tokens.completion",defaultMessage:"Completion Tokens"}),dataIndex:"completionTokens",width:160,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.completionTokens.tooltip"}),render:function(e,t){var a=t.completionTokens;return a?(0,X.jsx)(T.Z,{color:"green",children:a.toLocaleString()}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"ai.tokens.total",defaultMessage:"Total Tokens"}),dataIndex:"totalTokens",width:140,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.totalTokens.tooltip"}),render:function(e,t){var a=t.totalTokens;return a?(0,X.jsx)(T.Z,{color:"orange",children:a.toLocaleString()}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.totalRequests",defaultMessage:"Total Requests"}),dataIndex:"totalRequests",width:140,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.totalRequests.tooltip"}),render:function(e,t){var a=t.totalRequests;return a?(0,X.jsx)(T.Z,{color:"geekblue",children:a.toLocaleString()}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.successRequests",defaultMessage:"Success Requests"}),dataIndex:"successRequests",width:140,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.successRequests.tooltip"}),render:function(e,t){var a=t.successRequests;return a?(0,X.jsx)(T.Z,{color:"success",children:a.toLocaleString()}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.failedRequests",defaultMessage:"Failed Requests"}),dataIndex:"failedRequests",width:140,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.failedRequests.tooltip"}),render:function(e,t){var a=t.failedRequests;return a?(0,X.jsx)(T.Z,{color:"error",children:a.toLocaleString()}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.successRate",defaultMessage:"Success Rate"}),dataIndex:"successRate",width:120,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.successRate.tooltip"}),render:function(e,t){var a=t.totalRequests||0,s=t.successRequests||0;if(0===a)return"-";var r=(s/a*100).toFixed(1);return(0,X.jsx)(S.Z,{status:Number(r)>=90?"success":Number(r)>=70?"warning":"error",text:"".concat(r,"%")})}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.tokenUnitPrice",defaultMessage:"Token Unit Price"}),dataIndex:"tokenUnitPrice",width:140,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.tokenUnitPrice.tooltip"}),render:function(e,t){var a=t.tokenUnitPrice;return a?(0,X.jsxs)(T.Z,{color:"gold",children:["$",a.toFixed(6)]}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.totalCost",defaultMessage:"Total Cost"}),dataIndex:"totalCost",width:120,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.totalCost.tooltip"}),render:function(e,t){var a=t.totalCost;return a?(0,X.jsxs)(T.Z,{color:"volcano",children:["$",a.toFixed(4)]}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.avgResponseTime",defaultMessage:"Avg Response Time"}),dataIndex:"avgResponseTime",width:160,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.avgResponseTime.tooltip"}),render:function(e,t){var a=t.avgResponseTime;return a?(0,X.jsxs)(T.Z,{color:"magenta",children:[a.toFixed(0),"ms"]}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.hour",defaultMessage:"Hour"}),dataIndex:"hour",width:80,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.hour.tooltip"}),render:function(e,t){var a=t.hour;return null==a?"-":(0,X.jsxs)(T.Z,{color:"lime",children:[a,":00"]})}},{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.date",defaultMessage:"Date"}),dataIndex:"date",width:120,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.date.tooltip"}),render:function(e,t){var a=t.date;return a?(0,X.jsx)(T.Z,{color:"blue",children:a}):"-"}},{title:(0,X.jsx)(w.FormattedMessage,{id:"createdAt",defaultMessage:"Created At"}),key:"createdAt",dataIndex:"createdAt",width:180,sorter:!0,hideInSearch:!0,tooltip:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.createdAt.tooltip"})},{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,fixed:"right",render:function(t,a,s,r){return[(0,X.jsx)(Z.Z,{title:e.formatMessage({id:"deleteTip"}),description:"".concat(e.formatMessage({id:"deleteAffirm"}),"【").concat(null==a?void 0:a.uid,"】？"),onConfirm:function(){return _e(a)},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"}),children:(0,X.jsx)("a",{style:{color:"red"},children:e.formatMessage({id:"delete",defaultMessage:"删除"})})},"delete")]}}],_e=function(){var a=f()(p()().mark((function a(s){var r,n;return p()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("handleDeleteConfirm",s),x.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),a.prev=2,a.next=5,(0,Y.G_)(s);case 5:r=a.sent,x.yw.destroy(),200===r.code?(x.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null==t||null===(n=t.current)||void 0===n||n.reload()):x.yw.error(r.message||e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"})),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),x.yw.destroy(),x.yw.error(e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}(),Ve=function(){var a=f()(p()().mark((function a(){var s,r,n,o,c,d;return p()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==_.length){a.next=3;break}return x.yw.warning(e.formatMessage({id:"batch.delete.noselection",defaultMessage:"Please select items to delete"})),a.abrupt("return");case 3:x.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),r=0,n=0,o=i()(_),a.prev=7,o.s();case 9:if((c=o.n()).done){a.next=23;break}return d=c.value,a.prev=11,a.next=14,(0,Y.G_)(d);case 14:200===a.sent.code?r++:n++,a.next=21;break;case 18:a.prev=18,a.t0=a.catch(11),n++;case 21:a.next=9;break;case 23:a.next=28;break;case 25:a.prev=25,a.t1=a.catch(7),o.e(a.t1);case 28:return a.prev=28,o.f(),a.finish(28);case 31:x.yw.destroy(),0===n?x.yw.success(e.formatMessage({id:"batch.delete.success",defaultMessage:"Successfully deleted {count} items"},{count:r})):x.yw.warning(e.formatMessage({id:"batch.delete.partial",defaultMessage:"Deleted {success} items, failed to delete {fail} items"},{success:r,fail:n})),K([]),V([]),null===(s=t.current)||void 0===s||s.reloadAndRest();case 36:case"end":return a.stop()}}),a,null,[[7,25,28,31],[11,18]])})));return function(){return a.apply(this,arguments)}}(),et={selectedRowKeys:B,onChange:function(e,t){K(e),V(t)}};return(0,X.jsxs)("div",{children:[(0,X.jsxs)(C.Z,{style:{marginBottom:16},children:[(0,X.jsx)(H,{level:4,children:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.title",defaultMessage:"Token Usage Statistics"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(C.Z,{style:{marginBottom:16},children:(0,X.jsxs)(D.Z,{gutter:16,align:"middle",children:[(0,X.jsxs)(P.Z,{children:[(0,X.jsxs)("span",{style:{marginRight:8},children:[(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.date",defaultMessage:"Date"}),":"]}),(0,X.jsx)(A.default,{value:G()(ce),onChange:function(e){return de(e?e.format("YYYY-MM-DD"):G()().format("YYYY-MM-DD"))},format:"YYYY-MM-DD",style:{width:150}})]}),(0,X.jsxs)(P.Z,{children:[(0,X.jsxs)("span",{style:{marginRight:8},children:[(0,X.jsx)(w.FormattedMessage,{id:"ai.provider",defaultMessage:"AI Provider"}),":"]}),(0,X.jsx)(F.Z,{value:pe,onChange:Ge,allowClear:!0,loading:ze,placeholder:e.formatMessage({id:"statistic.token.chart.select.provider",defaultMessage:"Select Provider"}),style:{width:150},children:Ze.map((function(e){return(0,X.jsx)(W,{value:e.type,children:e.nickname},e.type)}))})]}),(0,X.jsxs)(P.Z,{children:[(0,X.jsxs)("span",{style:{marginRight:8},children:[(0,X.jsx)(w.FormattedMessage,{id:"ai.model",defaultMessage:"AI Model"}),":"]}),(0,X.jsx)(F.Z,{value:me,onChange:function(e){return xe(e)},allowClear:!0,loading:Ue,placeholder:e.formatMessage({id:"statistic.token.chart.select.model",defaultMessage:"Select Model"}),style:{width:150},children:null===(Le=Ce[pe])||void 0===Le?void 0:Le.map((function(e){return(0,X.jsx)(W,{value:e.value,children:e.label},e.value)}))})]}),(0,X.jsx)(P.Z,{children:(0,X.jsx)(q.ZP,{type:"primary",onClick:Xe,loading:be,children:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.refresh",defaultMessage:"Refresh"})})})]})}),(0,X.jsxs)(D.Z,{gutter:[16,16],children:[(0,X.jsx)(P.Z,{span:12,children:(0,X.jsx)(C.Z,{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.tokenUsage",defaultMessage:"Token Usage by Hour"}),children:(0,X.jsx)(J.Z,u()(u()({},He),{},{height:300}))})}),(0,X.jsx)(P.Z,{span:12,children:(0,X.jsx)(C.Z,{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.cost",defaultMessage:"Cost by Hour"}),children:(0,X.jsx)(J.Z,u()(u()({},We),{},{height:300}))})}),(0,X.jsx)(P.Z,{span:12,children:(0,X.jsx)(C.Z,{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.requests",defaultMessage:"Request Statistics by Hour"}),children:(0,X.jsx)(N.Z,u()(u()({},Ke),{},{height:300}))})}),(0,X.jsx)(P.Z,{span:12,children:(0,X.jsx)(C.Z,{title:(0,X.jsx)(w.FormattedMessage,{id:"statistic.token.chart.responseTime",defaultMessage:"Average Response Time by Hour"}),children:(0,X.jsx)(J.Z,u()(u()({},Qe),{},{height:300}))})})]})]})]}),(0,X.jsx)(C.Z,{children:(0,X.jsx)(j.Z,{columns:$e,actionRef:t,cardBordered:!0,rowSelection:et,scroll:{x:3e3},request:function(){var e=f()(p()().mark((function e(t,s,n){var i,c,d,u,l,f,g,m;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,s,n),i=t.current,c=t.pageSize,d=r()(t,L),o(i),h(c),ne(d),u=void 0,l=void 0,s&&Object.keys(s).length>0&&(f=Object.keys(s)[0],u=f,l="ascend"===s[f]?"ascend":"descend"),g={pageNumber:i-1,pageSize:c,orgUid:null==a?void 0:a.uid,aiProvider:d.aiProvider,aiModelType:d.aiModelType,status:d.status,sortBy:u,sortDirection:l},e.next=11,(0,Y.EN)(g);case 11:return m=e.sent,console.log("queryStatisticTokenByOrg response:",g,m),200===m.code?ae(m.data.totalElements):x.yw.error(m.message),e.abrupt("return",{data:m.data.content,success:!0,total:m.data.totalElements});case 15:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"Token统计",toolBarRender:function(){return t=[],a=[],B.length>0&&a.push({key:"batchDelete",icon:(0,X.jsx)(k.Z,{}),danger:!0,label:e.formatMessage({id:"batch.delete"})+" (".concat(B.length,")"),onClick:function(){R.Z.confirm({title:e.formatMessage({id:"batch.deleteTip"}),content:"".concat(e.formatMessage({id:"batch.deleteAffirm"})," ").concat(B.length," ").concat(e.formatMessage({id:"items"}),"?"),onOk:Ve,okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}}),a.length>0&&t.push((0,X.jsx)(I.Z,{menu:{items:a},placement:"bottom",children:(0,X.jsxs)(q.ZP,{type:B.length>0?"primary":"default",danger:B.length>0,children:[B.length>0?e.formatMessage({id:"batch.operations",defaultMessage:"批量操作"})+" (".concat(B.length,")"):e.formatMessage({id:"more.operations",defaultMessage:"更多操作"}),(0,X.jsx)(y.Z,{})]})},"batchOperations")),t;var t,a}})})]})}}}]);