"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4139],{82076:function(e,r,t){t.r(r),t.d(r,{default:function(){return Ie}});var s=t(73193),a=t.n(s),n=t(90819),i=t.n(n),c=t(89933),o=t.n(c),l=t(45332),u=t.n(l),d=t(44194),m=t(69174),f=t(82404),g=t(30310),x=t(90581),h=t(92351),p=t(2287),v=t(69533),j=t(26874),E=t(95018),y=t(68177),Z=t(87989),M=t(96798),A=t(30861),N=t(21600),R=t(71194),S=t(68385),I=t(87825),D=t(4628),k=t(32693),b=t(93689),O=t(40439),U=t(57976),T=t(15722),G=t(15892),w=t(82945),C=t(85255),P=t(80556),L=t(36099),H=t(33492),_=t(34600),V=t(29818),B=t(94322),F=t(55439),Y=t(28812),z=t(89976),W=t(31806),K=t(71529),q=t(24429),Q=t(55785),X=t(69762),J=t(68455),$=t(59145),ee=t(90727),re=t(77274),te=t(48004);t(94976);function se(e){return ae.apply(this,arguments)}function ae(){return(ae=o()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.request)("/api/v1/server/query/org",{method:"GET",params:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return ie.apply(this,arguments)}function ie(){return(ie=o()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,D.request)("/api/v1/server-metrics/query/org",{method:"GET",params:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce="ONLINE",oe="OFFLINE",le="ERROR",ue="WARNING",de="OVERLOADED",me=function(e){switch(e){case"ONLINE":return"在线运行";case"OFFLINE":return"离线";case"MAINTENANCE":return"维护中";case"STARTING":return"启动中";case"STOPPING":return"停止中";case"RESTARTING":return"重启中";case"ERROR":return"错误状态";case"WARNING":return"警告状态";case"DEGRADED":return"降级运行";case"OVERLOADED":return"过载";case"UNKNOWN":return"未知状态";default:return e}},fe=function(e){return"ONLINE"===e||"DEGRADED"===e},ge=function(e){return"ONLINE"===e||"DEGRADED"===e||"OVERLOADED"===e},xe=function(e){var r=e.toUpperCase();if(["ONLINE","OFFLINE","MAINTENANCE","STARTING","STOPPING","RESTARTING","ERROR","WARNING","DEGRADED","OVERLOADED","UNKNOWN"].includes(r))return r;throw new Error("No ServerStatusEnum constant with value: ".concat(e))},he=function(e){switch(e){case"ONLINE":return"#52c41a";case"DEGRADED":case"WARNING":return"#faad14";case"OVERLOADED":return"#fa8c16";case"ERROR":case"OFFLINE":return"#f5222d";case"MAINTENANCE":return"#1890ff";case"STARTING":case"STOPPING":case"RESTARTING":return"#722ed1";default:return"#d9d9d9"}},pe=function(e){switch(e){case"ONLINE":return"check-circle";case"DEGRADED":return"exclamation-circle";case"OVERLOADED":case"WARNING":return"warning";case"ERROR":return"close-circle";case"OFFLINE":return"stop";case"MAINTENANCE":return"tool";case"STARTING":return"play-circle";case"STOPPING":return"pause-circle";case"RESTARTING":return"reload";default:return"question-circle"}},ve=function(e){switch(e){case"APPLICATION":return"应用服务器";case"DATABASE":return"数据库服务器";case"CACHE":return"缓存服务器";case"LOAD_BALANCER":return"负载均衡器";case"WEB_SERVER":return"Web服务器";case"FILE_SERVER":return"文件服务器";case"MAIL_SERVER":return"邮件服务器";case"DNS_SERVER":return"DNS服务器";case"PROXY_SERVER":return"代理服务器";case"MONITORING":return"监控服务器";case"BACKUP":return"备份服务器";case"GATEWAY":return"网关服务器";case"API_SERVER":return"API服务器";case"MESSAGE_QUEUE":return"消息队列服务器";case"SEARCH_ENGINE":return"搜索引擎服务器";case"CDN":return"CDN服务器";case"OTHER":return"其他类型";default:return e}},je=function(e){var r=e.toUpperCase();if(["APPLICATION","DATABASE","CACHE","LOAD_BALANCER","WEB_SERVER","FILE_SERVER","MAIL_SERVER","DNS_SERVER","PROXY_SERVER","MONITORING","BACKUP","GATEWAY","API_SERVER","MESSAGE_QUEUE","SEARCH_ENGINE","CDN","OTHER"].includes(r))return r;throw new Error("No ServerTypeEnum constant with value: ".concat(e))},Ee=function(e){switch(e){case"APPLICATION":return"appstore";case"DATABASE":return"database";case"CACHE":return"thunderbolt";case"LOAD_BALANCER":return"share-alt";case"WEB_SERVER":return"global";case"FILE_SERVER":return"folder";case"MAIL_SERVER":return"mail";case"DNS_SERVER":return"link";case"PROXY_SERVER":return"swap";case"MONITORING":return"monitor";case"BACKUP":return"save";case"GATEWAY":return"gateway";case"API_SERVER":return"api";case"MESSAGE_QUEUE":return"message";case"SEARCH_ENGINE":return"search";case"CDN":return"cloud";default:return"server"}},ye=function(e){switch(e){case"APPLICATION":return"#1890ff";case"DATABASE":return"#52c41a";case"CACHE":return"#faad14";case"LOAD_BALANCER":return"#722ed1";case"WEB_SERVER":return"#13c2c2";case"FILE_SERVER":return"#eb2f96";case"MAIL_SERVER":return"#fa8c16";case"DNS_SERVER":return"#a0d911";case"PROXY_SERVER":return"#f5222d";case"MONITORING":return"#2f54eb";case"BACKUP":return"#fa541c";case"GATEWAY":return"#531dab";case"API_SERVER":return"#08979c";case"MESSAGE_QUEUE":return"#d4380d";case"SEARCH_ENGINE":return"#389e0d";case"CDN":return"#096dd9";default:return"#8c8c8c"}};function Ze(e){var r="string"==typeof e?xe(e):e;return{value:r,label:me(r),color:he(r),icon:pe(r),isHealthy:fe(r),isOperational:ge(r)}}function Me(e){var r="string"==typeof e?je(e):e;return{value:r,label:ve(r),color:ye(r),icon:Ee(r)}}var Ae=t(96596),Ne=t.n(Ae),Re=t(31549),Se=m.Z.Option,Ie=function(){var e=(0,D.useIntl)(),r=(0,d.useState)([]),t=u()(r,2),s=t[0],n=t[1],c=(0,d.useState)([]),l=u()(c,2),ae=l[0],ie=l[1],me=(0,d.useState)(!1),fe=u()(me,2),ge=fe[0],xe=fe[1],he=(0,d.useState)(null),pe=u()(he,2),ve=pe[0],je=pe[1],Ee=(0,d.useState)(!1),ye=u()(Ee,2),Ae=(ye[0],ye[1],(0,d.useState)(e.formatMessage({id:"server.form.add.title"}))),Ie=u()(Ae,2),De=(Ie[0],Ie[1],(0,d.useState)(null)),ke=u()(De,2),be=(ke[0],ke[1],(0,d.useState)(!1)),Oe=u()(be,2),Ue=Oe[0],Te=Oe[1],Ge=(0,d.useState)([Ne()().subtract(24,"hour"),Ne()()]),we=u()(Ge,2),Ce=we[0],Pe=we[1],Le=(0,d.useState)(30),He=u()(Le,2),_e=He[0],Ve=He[1],Be=function(){var r=o()(i()().mark((function r(){var t,s;return i()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return xe(!0),r.prev=1,r.next=4,se({pageNumber:0,pageSize:100});case 4:s=r.sent,console.log("queryServersByOrg response",null==s?void 0:s.data),null!=s&&null!==(t=s.data)&&void 0!==t&&t.content&&n(null==s?void 0:s.data.content),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),f.ZP.error(e.formatMessage({id:"server.message.fetchFailed"}));case 12:return r.prev=12,xe(!1),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[1,9,12,15]])})));return function(){return r.apply(this,arguments)}}(),Fe=function(){var r=o()(i()().mark((function r(t){var s,a;return i()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return Te(!0),r.prev=3,r.next=6,ne({pageNumber:0,pageSize:1e3,serverUid:t});case 6:null!=(a=r.sent)&&null!==(s=a.data)&&void 0!==s&&s.content&&ie(null==a?void 0:a.data.content),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),console.error(e.formatMessage({id:"server.message.metricsFetchFailed"}),r.t0);case 13:return r.prev=13,Te(!1),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[3,10,13,16]])})));return function(e){return r.apply(this,arguments)}}();(0,d.useEffect)((function(){Be()}),[]),(0,d.useEffect)((function(){if(ve){Fe(ve.uid);var e=setInterval((function(){Fe(ve.uid)}),1e3*_e);return function(){return clearInterval(e)}}}),[ve,_e]);var Ye=function(e){if(!e)return"default";try{return Ze(e).color}catch(e){return"default"}},ze=function(e){if(!e)return(0,Re.jsx)(k.Z,{});try{switch(Ze(e).icon){case"check-circle":return(0,Re.jsx)(b.Z,{});case"close-circle":return(0,Re.jsx)(O.Z,{});case"warning":return(0,Re.jsx)(U.Z,{});case"exclamation-circle":return(0,Re.jsx)(T.Z,{});case"tool":return(0,Re.jsx)(G.Z,{});case"play-circle":return(0,Re.jsx)(w.Z,{});case"pause-circle":return(0,Re.jsx)(C.Z,{});case"reload":return(0,Re.jsx)(P.Z,{});case"stop":return(0,Re.jsx)(L.Z,{});default:return(0,Re.jsx)(k.Z,{})}}catch(e){return(0,Re.jsx)(k.Z,{})}},We=function(e){if(!e)return(0,Re.jsx)(H.Z,{});try{switch(Me(e).icon){case"appstore":return(0,Re.jsx)(_.Z,{});case"database":return(0,Re.jsx)(V.Z,{});case"thunderbolt":return(0,Re.jsx)(B.Z,{});case"global":return(0,Re.jsx)(F.Z,{});case"share-alt":return(0,Re.jsx)(Y.Z,{});case"monitor":default:return(0,Re.jsx)(H.Z,{});case"folder":return(0,Re.jsx)(z.Z,{});case"mail":return(0,Re.jsx)(W.Z,{});case"link":return(0,Re.jsx)(K.Z,{});case"swap":return(0,Re.jsx)(q.Z,{});case"save":return(0,Re.jsx)(Q.Z,{});case"gateway":return(0,Re.jsx)(X.Z,{});case"api":return(0,Re.jsx)(J.Z,{});case"message":return(0,Re.jsx)($.Z,{});case"search":return(0,Re.jsx)(ee.Z,{});case"cloud":return(0,Re.jsx)(re.Z,{})}}catch(e){return(0,Re.jsx)(H.Z,{})}},Ke=[{title:e.formatMessage({id:"server.list.serverName"}),dataIndex:"serverName",key:"serverName",fixed:"left",width:250,render:function(e,r){return(0,Re.jsxs)(g.Z,{children:[We(r.serverType),(0,Re.jsx)("span",{children:e})]})}},{title:e.formatMessage({id:"server.list.serverIp"}),dataIndex:"serverIp",key:"serverIp"},{title:e.formatMessage({id:"server.list.serverType"}),dataIndex:"serverType",key:"serverType",render:function(e){try{var r=Me(e);return(0,Re.jsx)(x.Z,{color:r.color,children:r.label})}catch(r){return(0,Re.jsx)(x.Z,{color:"blue",children:e})}}},{title:e.formatMessage({id:"server.list.serverStatus"}),dataIndex:"serverStatus",key:"serverStatus",render:function(e){try{var r=Ze(e);return(0,Re.jsx)(x.Z,{color:r.color,icon:ze(e),children:r.label})}catch(r){return(0,Re.jsx)(x.Z,{color:Ye(e),icon:ze(e),children:e})}}},{title:e.formatMessage({id:"server.list.cpuUsage"}),dataIndex:"cpuUsage",key:"cpuUsage",render:function(e){return(0,Re.jsx)(h.Z,{title:"".concat(e||0,"%"),children:(0,Re.jsx)(p.Z,{percent:e||0,size:"small",status:e&&e>80?"exception":"normal",showInfo:!1})})}},{title:e.formatMessage({id:"server.list.memoryUsage"}),dataIndex:"memoryUsage",key:"memoryUsage",render:function(e){return(0,Re.jsx)(h.Z,{title:"".concat(e||0,"%"),children:(0,Re.jsx)(p.Z,{percent:e||0,size:"small",status:e&&e>80?"exception":"normal",showInfo:!1})})}},{title:e.formatMessage({id:"server.list.diskUsage"}),dataIndex:"diskUsage",key:"diskUsage",render:function(e){return(0,Re.jsx)(h.Z,{title:"".concat(e||0,"%"),children:(0,Re.jsx)(p.Z,{percent:e||0,size:"small",status:e&&e>85?"exception":"normal",showInfo:!1})})}},{title:e.formatMessage({id:"server.list.lastHeartbeat"}),dataIndex:"lastHeartbeat",key:"lastHeartbeat",width:200,render:function(e){return e?Ne()(e).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:e.formatMessage({id:"server.list.environment",defaultMessage:"环境"}),dataIndex:"environment",key:"environment"},{title:e.formatMessage({id:"server.list.port",defaultMessage:"端口"}),dataIndex:"serverPort",key:"serverPort",render:function(e){return e||"-"}},{title:e.formatMessage({id:"server.list.osInfo",defaultMessage:"操作系统"}),dataIndex:"osInfo",key:"osInfo",ellipsis:!0},{title:e.formatMessage({id:"server.list.appVersion",defaultMessage:"应用版本"}),dataIndex:"appVersion",key:"appVersion"},{title:e.formatMessage({id:"server.list.uptime",defaultMessage:"运行时长"}),dataIndex:"uptimeSeconds",key:"uptimeSeconds",render:function(e){if(!e)return"-";var r=Math.floor(e/86400),t=Math.floor(e%86400/3600);return"".concat(r,"d ").concat(t,"h")}},{title:e.formatMessage({id:"server.list.memory",defaultMessage:"内存(已用/总MB)"}),key:"memory",render:function(e,r){return r.totalMemoryMb&&r.usedMemoryMb?"".concat(r.usedMemoryMb," / ").concat(r.totalMemoryMb," MB"):"-"}},{title:e.formatMessage({id:"server.list.disk",defaultMessage:"磁盘(已用/总GB)"}),key:"disk",render:function(e,r){return r.totalDiskGb&&r.usedDiskGb?"".concat(r.usedDiskGb," / ").concat(r.totalDiskGb," GB"):"-"}},{title:e.formatMessage({id:"server.list.actions"}),key:"action",fixed:"right",render:function(r,t){return(0,Re.jsx)(g.Z,{size:"middle",children:(0,Re.jsx)(v.ZP,{type:"link",size:"small",onClick:function(){return qe(t)},children:e.formatMessage({id:"server.list.viewMetrics"})})})}}],qe=function(e){je(e)},Qe=(ae||[]).filter((function(e){if(!e||!e.timestamp)return!1;var r=Ne()(e.timestamp);return r.isAfter(Ce[0])&&r.isBefore(Ce[1])})),Xe=function(){if(!Qe||0===Qe.length)return null;var e=Qe[Qe.length-1];return a()(a()({},e),{},{cpuUsage:Number(e.cpuUsage)||0,memoryUsage:Number(e.memoryUsage)||0,diskUsage:Number(e.diskUsage)||0,uptimeSeconds:Number(e.uptimeSeconds)||0})}(),Je=Qe&&0!==Qe.length?Qe.map((function(e){return{time:Ne()(e.timestamp).format("HH:mm:ss"),cpu:Number(e.cpuUsage)||0,memory:Number(e.memoryUsage)||0,disk:Number(e.diskUsage)||0}})).sort((function(e,r){return Ne()(e.time,"HH:mm:ss").valueOf()-Ne()(r.time,"HH:mm:ss").valueOf()})):[],$e=Qe&&0!==Qe.length?Qe.slice(-10).map((function(e){return{time:Ne()(e.timestamp).format("MM-DD HH:mm"),cpu:Number(e.cpuUsage)||0,memory:Number(e.memoryUsage)||0,disk:Number(e.diskUsage)||0}})):[],er=function(){if(!Xe)return"unknown";var e=Xe.cpuUsage,r=Xe.memoryUsage,t=Xe.diskUsage;return e&&e>90||r&&r>90||t&&t>95?"critical":e&&e>80||r&&r>80||t&&t>85?"warning":"healthy"}();return(0,Re.jsxs)("div",{style:{padding:"24px"},children:[(0,Re.jsxs)(j.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsx)(y.Z,{children:(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.statistics.total"}),value:s.length,prefix:(0,Re.jsx)(H.Z,{})})})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsx)(y.Z,{children:(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.statistics.online"}),value:s.filter((function(e){return e.serverStatus===ce})).length,prefix:(0,Re.jsx)(b.Z,{}),valueStyle:{color:"#3f8600"}})})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsx)(y.Z,{children:(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.statistics.offline"}),value:s.filter((function(e){return e.serverStatus===oe})).length,prefix:(0,Re.jsx)(O.Z,{}),valueStyle:{color:"#cf1322"}})})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsx)(y.Z,{children:(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.statistics.warning"}),value:s.filter((function(e){return e.serverStatus===ue||e.serverStatus===de||e.serverStatus===le})).length,prefix:(0,Re.jsx)(U.Z,{}),valueStyle:{color:"#faad14"}})})})]}),(0,Re.jsx)(y.Z,{title:e.formatMessage({id:"server.list.title"}),extra:(0,Re.jsx)(g.Z,{children:(0,Re.jsx)(v.ZP,{icon:(0,Re.jsx)(P.Z,{}),onClick:Be,children:e.formatMessage({id:"server.list.refresh"})})}),style:{marginBottom:"24px"},children:(0,Re.jsx)(M.Z,{columns:Ke,dataSource:s,loading:ge,rowKey:"uid",scroll:{x:3e3},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(r){return e.formatMessage({id:"server.pagination.total"},{total:r})}}})}),ve&&(0,Re.jsxs)(y.Z,{title:(0,Re.jsxs)(g.Z,{children:[(0,Re.jsxs)("span",{children:[ve.serverName," - ",e.formatMessage({id:"server.metrics.title"})]}),(0,Re.jsx)(x.Z,{color:"healthy"===er?"green":"warning"===er?"orange":"red",children:"healthy"===er?e.formatMessage({id:"server.health.healthy"}):"warning"===er?e.formatMessage({id:"server.health.warning"}):e.formatMessage({id:"server.health.critical"})})]}),extra:(0,Re.jsxs)(g.Z,{children:[(0,Re.jsxs)(m.Z,{value:_e,onChange:Ve,style:{width:120},children:[(0,Re.jsx)(Se,{value:10,children:e.formatMessage({id:"server.metrics.refreshInterval.10s"})}),(0,Re.jsx)(Se,{value:30,children:e.formatMessage({id:"server.metrics.refreshInterval.30s"})}),(0,Re.jsx)(Se,{value:60,children:e.formatMessage({id:"server.metrics.refreshInterval.1m"})}),(0,Re.jsx)(Se,{value:300,children:e.formatMessage({id:"server.metrics.refreshInterval.5m"})})]}),(0,Re.jsx)(v.ZP,{icon:(0,Re.jsx)(P.Z,{}),onClick:function(){return Fe(ve.uid)},children:e.formatMessage({id:"server.metrics.refresh"})}),(0,Re.jsx)(v.ZP,{onClick:function(){return je(null)},children:e.formatMessage({id:"server.metrics.close"})})]}),style:{marginBottom:"24px"},children:[(0,Re.jsxs)(j.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Re.jsxs)(E.Z,{span:8,children:[(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.ip"}),":"]})," ",ve.serverIp]}),(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.type"}),":"]})," ",ve.serverType]}),(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.status"}),":"]})," ",ve.serverStatus]})]}),(0,Re.jsxs)(E.Z,{span:8,children:[(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.environment"}),":"]})," ",ve.environment]}),(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.port"}),":"]})," ",ve.serverPort||"-"]}),(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.description"}),":"]})," ",ve.description||"-"]})]}),(0,Re.jsxs)(E.Z,{span:8,children:[(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.lastHeartbeat"}),":"]})," ",ve.lastHeartbeat?Ne()(ve.lastHeartbeat).format("YYYY-MM-DD HH:mm:ss"):"-"]}),(0,Re.jsxs)("p",{children:[(0,Re.jsxs)("strong",{children:[e.formatMessage({id:"server.info.createdAt"}),":"]})," ",ve.createdAt?Ne()(ve.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"]})]})]}),(0,Re.jsxs)(j.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsxs)(y.Z,{size:"small",children:[(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.metrics.cpu.title"}),value:(null==Xe?void 0:Xe.cpuUsage)||0,suffix:"%",valueStyle:{color:((null==Xe?void 0:Xe.cpuUsage)||0)>80?"#cf1322":"#3f8600"}}),(0,Re.jsx)(p.Z,{percent:(null==Xe?void 0:Xe.cpuUsage)||0,status:((null==Xe?void 0:Xe.cpuUsage)||0)>80?"exception":"normal",strokeColor:((null==Xe?void 0:Xe.cpuUsage)||0)>80?"#cf1322":"#3f8600"})]})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsxs)(y.Z,{size:"small",children:[(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.metrics.memory.title"}),value:(null==Xe?void 0:Xe.memoryUsage)||0,suffix:"%",valueStyle:{color:((null==Xe?void 0:Xe.memoryUsage)||0)>80?"#cf1322":"#3f8600"}}),(0,Re.jsx)(p.Z,{percent:(null==Xe?void 0:Xe.memoryUsage)||0,status:((null==Xe?void 0:Xe.memoryUsage)||0)>80?"exception":"normal",strokeColor:((null==Xe?void 0:Xe.memoryUsage)||0)>80?"#cf1322":"#3f8600"})]})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsxs)(y.Z,{size:"small",children:[(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.metrics.disk.title"}),value:(null==Xe?void 0:Xe.diskUsage)||0,suffix:"%",valueStyle:{color:((null==Xe?void 0:Xe.diskUsage)||0)>85?"#cf1322":"#3f8600"}}),(0,Re.jsx)(p.Z,{percent:(null==Xe?void 0:Xe.diskUsage)||0,status:((null==Xe?void 0:Xe.diskUsage)||0)>85?"exception":"normal",strokeColor:((null==Xe?void 0:Xe.diskUsage)||0)>85?"#cf1322":"#3f8600"})]})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsxs)(y.Z,{size:"small",children:[(0,Re.jsx)(Z.Z,{title:e.formatMessage({id:"server.metrics.uptime.title"}),value:(null==Xe?void 0:Xe.uptimeSeconds)||0,suffix:e.formatMessage({id:"server.metrics.uptime.seconds"}),prefix:(0,Re.jsx)(te.Z,{})}),(0,Re.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:null!=Xe&&Xe.uptimeSeconds?"".concat(Math.floor(Xe.uptimeSeconds/86400)).concat(e.formatMessage({id:"server.metrics.uptime.days"})," ").concat(Math.floor(Xe.uptimeSeconds%86400/3600)).concat(e.formatMessage({id:"server.metrics.uptime.hours"})):e.formatMessage({id:"server.metrics.uptime.unknown"})})]})})]}),(0,Re.jsxs)(j.Z,{gutter:16,style:{marginBottom:"24px"},children:[(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsxs)("span",{children:[e.formatMessage({id:"server.timeRange.label"}),":"]})}),(0,Re.jsx)(E.Z,{span:12,children:(0,Re.jsx)(A.default.RangePicker,{value:Ce,onChange:function(e){e&&Pe([e[0],e[1]])},showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})}),(0,Re.jsx)(E.Z,{span:6,children:(0,Re.jsxs)(g.Z,{children:[(0,Re.jsx)(v.ZP,{size:"small",onClick:function(){return Pe([Ne()().subtract(1,"hour"),Ne()()])},children:e.formatMessage({id:"server.timeRange.last1Hour"})}),(0,Re.jsx)(v.ZP,{size:"small",onClick:function(){return Pe([Ne()().subtract(24,"hour"),Ne()()])},children:e.formatMessage({id:"server.timeRange.last24Hours"})})]})})]}),(0,Re.jsx)(N.Z,{items:[{key:"trend",label:e.formatMessage({id:"server.charts.trend"}),children:(0,Re.jsx)(y.Z,{loading:Ue,children:Je.length>0?(0,Re.jsxs)(j.Z,{gutter:16,children:[(0,Re.jsxs)(E.Z,{span:8,children:[(0,Re.jsx)("div",{style:{textAlign:"center",marginBottom:"8px"},children:(0,Re.jsx)("strong",{children:e.formatMessage({id:"server.metrics.cpu.title"})})}),(0,Re.jsx)(R.Z,{data:Je,xField:"time",yField:"cpu",height:200,point:{size:2,shape:"circle"},smooth:!0,color:"#1890ff",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.cpu.title"}),value:"".concat(r.cpu,"%")}}}})]}),(0,Re.jsxs)(E.Z,{span:8,children:[(0,Re.jsx)("div",{style:{textAlign:"center",marginBottom:"8px"},children:(0,Re.jsx)("strong",{children:e.formatMessage({id:"server.metrics.memory.title"})})}),(0,Re.jsx)(R.Z,{data:Je,xField:"time",yField:"memory",height:200,point:{size:2,shape:"circle"},smooth:!0,color:"#52c41a",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.memory.title"}),value:"".concat(r.memory,"%")}}}})]}),(0,Re.jsxs)(E.Z,{span:8,children:[(0,Re.jsx)("div",{style:{textAlign:"center",marginBottom:"8px"},children:(0,Re.jsx)("strong",{children:e.formatMessage({id:"server.metrics.disk.title"})})}),(0,Re.jsx)(R.Z,{data:Je,xField:"time",yField:"disk",height:200,point:{size:2,shape:"circle"},smooth:!0,color:"#faad14",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.disk.title"}),value:"".concat(r.disk,"%")}}}})]})]}):(0,Re.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})},{key:"history",label:e.formatMessage({id:"server.charts.history"}),children:(0,Re.jsxs)(j.Z,{gutter:16,children:[(0,Re.jsx)(E.Z,{span:12,children:(0,Re.jsx)(y.Z,{title:e.formatMessage({id:"server.charts.cpuHistory"}),loading:Ue,children:$e.length>0?(0,Re.jsx)(S.Z,{data:$e,xField:"time",yField:"cpu",height:250,color:"#1890ff",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.cpu.title"}),value:"".concat(r.cpu,"%")}}}}):(0,Re.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})}),(0,Re.jsx)(E.Z,{span:12,children:(0,Re.jsx)(y.Z,{title:e.formatMessage({id:"server.charts.memoryHistory"}),loading:Ue,children:$e.length>0?(0,Re.jsx)(S.Z,{data:$e,xField:"time",yField:"memory",height:250,color:"#52c41a",yAxis:{label:{formatter:function(e){return"".concat(e,"%")}}},tooltip:{formatter:function(r){return{name:e.formatMessage({id:"server.metrics.memory.title"}),value:"".concat(r.memory,"%")}}}}):(0,Re.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})})]})},{key:"gauge",label:e.formatMessage({id:"server.charts.gauge"}),children:(0,Re.jsxs)(j.Z,{gutter:16,children:[(0,Re.jsx)(E.Z,{span:8,children:(0,Re.jsx)(y.Z,{title:e.formatMessage({id:"server.charts.cpuGauge"}),loading:Ue,children:Xe?(0,Re.jsx)(I.Z,{percent:(Xe.cpuUsage||0)/100||0,height:200,range:{color:["#52c41a","#faad14","#cf1322"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{style:{color:"#363636"}},content:{style:{color:"#363636"},formatter:function(){var e=Number(Xe.cpuUsage)||0;return"".concat(e,"%")}}}}):(0,Re.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})}),(0,Re.jsx)(E.Z,{span:8,children:(0,Re.jsx)(y.Z,{title:e.formatMessage({id:"server.charts.memoryGauge"}),loading:Ue,children:Xe?(0,Re.jsx)(I.Z,{percent:(Xe.memoryUsage||0)/100||0,height:200,range:{color:["#52c41a","#faad14","#cf1322"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{style:{color:"#363636"}},content:{style:{color:"#363636"},formatter:function(){var e=Number(Xe.memoryUsage)||0;return"".concat(e,"%")}}}}):(0,Re.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})}),(0,Re.jsx)(E.Z,{span:8,children:(0,Re.jsx)(y.Z,{title:e.formatMessage({id:"server.charts.diskGauge"}),loading:Ue,children:Xe?(0,Re.jsx)(I.Z,{percent:(Xe.diskUsage||0)/100||0,height:200,range:{color:["#52c41a","#faad14","#cf1322"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{style:{color:"#363636"}},content:{style:{color:"#363636"},formatter:function(){var e=Number(Xe.diskUsage)||0;return"".concat(e,"%")}}}}):(0,Re.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#999"},children:e.formatMessage({id:"server.metrics.noData"})})})})]})}]})]})]})}}}]);