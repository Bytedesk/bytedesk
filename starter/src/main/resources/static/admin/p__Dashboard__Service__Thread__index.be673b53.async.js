"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2148],{83163:function(e,t,a){a.d(t,{Wq:function(){return m}});var n=a(90819),r=a.n(n),s=a(73193),o=a.n(s),i=a(89933),u=a.n(i),d=a(94976),l=a(4628);function m(e){return c.apply(this,arguments)}function c(){return(c=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queue/query/org",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},16265:function(e,t,a){a.d(t,{C8:function(){return g},E1:function(){return h},WR:function(){return f},nV:function(){return m}});var n=a(90819),r=a.n(n),s=a(73193),o=a.n(s),i=a(89933),u=a.n(i),d=a(94976),l=a(4628);function m(e){return c.apply(this,arguments)}function c(){return(c=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queue/member/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queue/member/intention",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return M.apply(this,arguments)}function M(){return(M=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queue/member/emotion",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/queue/member/summary",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89307:function(e,t,a){a.r(t),a.d(t,{default:function(){return me}});var n=a(76711),r=a.n(n),s=a(21600),o=a(34075),i=a(40128),u=a(1396),d=a(4628),l=a(78847),m=a(73193),c=a.n(m),g=a(90819),p=a.n(g),f=a(89933),M=a.n(f),h=a(45332),x=a.n(h),b=a(43388),v=a(88722),y=a(74171),F=a(94976),q=a(44565),j=a(27729),A=a(30310),I=a(90581),S=a(43275),w=a(44194);function k(e){return C.apply(this,arguments)}function C(){return(C=M()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/intention/query/org",{method:"GET",params:c()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=M()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/intention/delete",{method:"POST",data:c()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=a(32503),L=a(67242),D=a(85977),E=a(31549),H=function(e){var t,a,n,s,o,i,u=e.superUser,l=(0,d.useIntl)(),m=(0,d.useAccess)(),g=(0,w.useMemo)((function(){var e;return null==m||null===(e=m.getModulePermission)||void 0===e?void 0:e.call(m,D.MY.THREAD_INTENTION)}),[m]),f=null!==(t=null==g||null===(a=g.canRead)||void 0===a?void 0:a.call(g))&&void 0!==t&&t,h=(n=null==g||null===(s=g.canExport)||void 0===s?void 0:s.call(g),null!==(o=null==g||null===(i=g.canDelete)||void 0===i?void 0:i.call(g))&&void 0!==o&&o),C=(0,w.useRef)(),R=(0,w.useState)(1),H=x()(R,2),Z=H[0],U=H[1],N=(0,w.useState)(10),O=x()(N,2),z=O[0],P=O[1],B=(0,y.u)((function(e){return e.currentOrg})),_=(0,v.Z)().translateString,W=j.Z.useModal(),J=x()(W,2)[1],K=(0,w.useState)({}),Q=x()(K,2),V=Q[0],G=Q[1],X=function(){var e=M()(p()().mark((function e(){var t,a,n,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={pageNumber:0,pageSize:100,type:F.ics,orgUid:null==B?void 0:B.uid},e.next=4,(0,Y.XS)(a);case 4:n=e.sent,L.Z.debug("queryCategoriesByOrg response:",null==n?void 0:n.data,a),200===(null==n?void 0:n.code)&&null!=n&&null!==(t=n.data)&&void 0!==t&&t.content&&(r={},n.data.content.forEach((function(e){r[e.uid]=e.name})),G(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),L.Z.error("Fetch categories error:",e.t0),b.yw.error(l.formatMessage({id:"ticket.category.load.error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,w.useEffect)((function(){null!=B&&B.uid&&X()}),[null==B?void 0:B.uid]);var $=function(){var e=M()(p()().mark((function e(t){var a,n,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=3;break}return b.yw.warning(l.formatMessage({id:"no.permission.delete",defaultMessage:"无删除权限"})),e.abrupt("return");case 3:return b.yw.loading(l.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),e.prev=4,e.next=7,T({uid:t.uid});case 7:a=e.sent,b.yw.destroy(),200===(null==a?void 0:a.code)?(b.yw.success(l.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null==C||null===(n=C.current)||void 0===n||n.reload()):b.yw.error(null!==(r=null==a?void 0:a.message)&&void 0!==r?r:l.formatMessage({id:"delete.error",defaultMessage:"Delete Error"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),b.yw.destroy(),b.yw.error(l.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),ee=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,ellipsis:!0,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"intentionType",defaultMessage:"Intention Type"}),dataIndex:"type",copyable:!0,ellipsis:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"thread.summary.intention",defaultMessage:"Intention Analysis"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"confidence",defaultMessage:"Confidence"}),dataIndex:"confidence",hideInSearch:!0,width:110,render:function(e,t){if(null===(null==t?void 0:t.confidence)||void 0===(null==t?void 0:t.confidence))return"-";var a=Number(t.confidence);return Number.isNaN(a)?String(t.confidence):a.toFixed(2)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",copyable:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"content",defaultMessage:"Content"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"solution",defaultMessage:"Solution"}),dataIndex:"solution",copyable:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"solution",defaultMessage:"Solution"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"category",defaultMessage:"Category"}),dataIndex:"categoryUid",hideInSearch:!0,render:function(e,t){var a=V[t.categoryUid]||t.categoryUid;return _(a)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"tags",defaultMessage:"Tags"}),hideInSearch:!0,render:function(e,t){var a;return null!=t&&t.tagList&&Array.isArray(null==t?void 0:t.tagList)&&0!==(null==t?void 0:t.tagList.length)?(0,E.jsx)(A.Z,{size:[0,4],wrap:!0,children:null==t||null===(a=t.tagList)||void 0===a?void 0:a.map((function(e){return(0,E.jsx)(I.Z,{color:"blue",children:e},e)}))}):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180},{title:(0,E.jsx)(d.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:l.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,fixed:"right",render:function(e,t){return[(0,E.jsx)("a",{onClick:function(){var e,a,n;e=t,n={chatConfig:{org:null==B?void 0:B.uid,t:F.CCt,sid:null==e?void 0:e.threadUid}},null===(a=window.bytedesk)||void 0===a||a.showChat(n)},children:l.formatMessage({id:"view",defaultMessage:"View"})},"view")].concat(r()(h?[(0,E.jsx)(S.Z,{title:l.formatMessage({id:"delete.tip",defaultMessage:"删除确认"}),description:l.formatMessage({id:"delete.confirm",defaultMessage:"确定要删除此记录吗？此操作不可恢复!"}),onConfirm:function(){return $(t)},okText:l.formatMessage({id:"ok"}),cancelText:l.formatMessage({id:"cancel"}),children:(0,E.jsx)("a",{style:{color:"red",marginLeft:8},children:l.formatMessage({id:"delete",defaultMessage:"删除"})})},"delete")]:[]))}}];return f?(0,E.jsxs)(E.Fragment,{children:[J,(0,E.jsx)(q.Z,{actionRef:C,rowKey:"uid",columns:ee,scroll:{x:"max-content"},search:{labelWidth:"auto"},pagination:{current:Z,pageSize:z,showSizeChanger:!0},request:function(){var e=M()(p()().mark((function e(t,a){var n,r,s,o,i,d,l,m,g,f;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=c()({pageNumber:(null!==(n=t.current)&&void 0!==n?n:1)-1,pageSize:null!==(r=t.pageSize)&&void 0!==r?r:10,sortBy:null===(s=Object.keys(a))||void 0===s?void 0:s[0],sortDirection:null===(o=Object.values(a))||void 0===o?void 0:o[0],orgUid:null==B?void 0:B.uid,superUser:u},t),e.next=3,k(g);case 3:return f=e.sent,e.abrupt("return",{data:null!==(i=null==f||null===(d=f.data)||void 0===d?void 0:d.content)&&void 0!==i?i:[],success:200===(null==f?void 0:f.code),total:null!==(l=null==f||null===(m=f.data)||void 0===m?void 0:m.totalElements)&&void 0!==l?l:0});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onChange:function(e){U(e.current||1),P(e.pageSize||10)},toolBarRender:function(){return[]}})]}):null};function Z(e){return U.apply(this,arguments)}function U(){return(U=M()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/emotion/query/org",{method:"GET",params:c()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return O.apply(this,arguments)}function O(){return(O=M()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/emotion/delete",{method:"POST",data:c()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(e){var t,a,n,s,o,i,u=e.superUser,l=(0,d.useIntl)(),m=(0,d.useAccess)(),g=(0,w.useMemo)((function(){var e;return null==m||null===(e=m.getModulePermission)||void 0===e?void 0:e.call(m,D.MY.THREAD_EMOTION)}),[m]),f=null!==(t=null==g||null===(a=g.canRead)||void 0===a?void 0:a.call(g))&&void 0!==t&&t,h=(n=null==g||null===(s=g.canExport)||void 0===s?void 0:s.call(g),null!==(o=null==g||null===(i=g.canDelete)||void 0===i?void 0:i.call(g))&&void 0!==o&&o),k=(0,w.useRef)(),C=(0,w.useState)(1),T=x()(C,2),R=T[0],H=T[1],U=(0,w.useState)(10),O=x()(U,2),z=O[0],P=O[1],B=(0,y.u)((function(e){return e.currentOrg})),_=(0,v.Z)().translateString,W=j.Z.useModal(),J=x()(W,2)[1],K=(0,w.useState)({}),Q=x()(K,2),V=Q[0],G=Q[1],X=function(){var e=M()(p()().mark((function e(){var t,a,n,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={pageNumber:0,pageSize:100,type:F.ics,orgUid:null==B?void 0:B.uid},e.next=4,(0,Y.XS)(a);case 4:n=e.sent,L.Z.debug("queryCategoriesByOrg response:",null==n?void 0:n.data,a),200===(null==n?void 0:n.code)&&null!=n&&null!==(t=n.data)&&void 0!==t&&t.content&&(r={},n.data.content.forEach((function(e){r[e.uid]=e.name})),G(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),L.Z.error("Fetch categories error:",e.t0),b.yw.error(l.formatMessage({id:"ticket.category.load.error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,w.useEffect)((function(){null!=B&&B.uid&&X()}),[null==B?void 0:B.uid]);var $=function(){var e=M()(p()().mark((function e(t){var a,n,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=3;break}return b.yw.warning(l.formatMessage({id:"no.permission.delete",defaultMessage:"无删除权限"})),e.abrupt("return");case 3:return b.yw.loading(l.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),e.prev=4,e.next=7,N({uid:t.uid});case 7:a=e.sent,b.yw.destroy(),200===(null==a?void 0:a.code)?(b.yw.success(l.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null==k||null===(n=k.current)||void 0===n||n.reload()):b.yw.error(null!==(r=null==a?void 0:a.message)&&void 0!==r?r:l.formatMessage({id:"delete.error",defaultMessage:"Delete Error"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),b.yw.destroy(),b.yw.error(l.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),ee=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,ellipsis:!0,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"emotionType",defaultMessage:"Emotion Type"}),dataIndex:"type",copyable:!0,ellipsis:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"thread.summary.emotion",defaultMessage:"Emotion Analysis"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"confidence",defaultMessage:"Confidence"}),dataIndex:"confidence",hideInSearch:!0,width:110,render:function(e,t){if(null===(null==t?void 0:t.confidence)||void 0===(null==t?void 0:t.confidence))return"-";var a=Number(t.confidence);return Number.isNaN(a)?String(t.confidence):a.toFixed(2)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",copyable:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"content",defaultMessage:"Content"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"solution",defaultMessage:"Solution"}),dataIndex:"solution",copyable:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"solution",defaultMessage:"Solution"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"category",defaultMessage:"Category"}),dataIndex:"categoryUid",hideInSearch:!0,render:function(e,t){var a=V[t.categoryUid]||t.categoryUid;return _(a)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"tags",defaultMessage:"Tags"}),hideInSearch:!0,render:function(e,t){var a;return null!=t&&t.tagList&&Array.isArray(null==t?void 0:t.tagList)&&0!==(null==t?void 0:t.tagList.length)?(0,E.jsx)(A.Z,{size:[0,4],wrap:!0,children:null==t||null===(a=t.tagList)||void 0===a?void 0:a.map((function(e){return(0,E.jsx)(I.Z,{color:"blue",children:e},e)}))}):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180},{title:(0,E.jsx)(d.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:l.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,fixed:"right",render:function(e,t){return[(0,E.jsx)("a",{onClick:function(){var e,a,n;e=t,n={chatConfig:{org:null==B?void 0:B.uid,t:F.CCt,sid:null==e?void 0:e.threadUid}},null===(a=window.bytedesk)||void 0===a||a.showChat(n)},children:l.formatMessage({id:"view",defaultMessage:"View"})},"view")].concat(r()(h?[(0,E.jsx)(S.Z,{title:l.formatMessage({id:"delete.tip",defaultMessage:"删除确认"}),description:l.formatMessage({id:"delete.confirm",defaultMessage:"确定要删除此记录吗？此操作不可恢复!"}),onConfirm:function(){return $(t)},okText:l.formatMessage({id:"ok"}),cancelText:l.formatMessage({id:"cancel"}),children:(0,E.jsx)("a",{style:{color:"red",marginLeft:8},children:l.formatMessage({id:"delete",defaultMessage:"删除"})})},"delete")]:[]))}}];return f?(0,E.jsxs)(E.Fragment,{children:[J,(0,E.jsx)(q.Z,{actionRef:k,rowKey:"uid",columns:ee,scroll:{x:"max-content"},search:{labelWidth:"auto"},pagination:{current:R,pageSize:z,showSizeChanger:!0},request:function(){var e=M()(p()().mark((function e(t,a){var n,r,s,o,i,d,l,m,g,f;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=c()({pageNumber:(null!==(n=t.current)&&void 0!==n?n:1)-1,pageSize:null!==(r=t.pageSize)&&void 0!==r?r:10,sortBy:null===(s=Object.keys(a))||void 0===s?void 0:s[0],sortDirection:null===(o=Object.values(a))||void 0===o?void 0:o[0],orgUid:null==B?void 0:B.uid,superUser:u},t),e.next=3,Z(g);case 3:return f=e.sent,e.abrupt("return",{data:null!==(i=null==f||null===(d=f.data)||void 0===d?void 0:d.content)&&void 0!==i?i:[],success:200===(null==f?void 0:f.code),total:null!==(l=null==f||null===(m=f.data)||void 0===m?void 0:m.totalElements)&&void 0!==l?l:0});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onChange:function(e){H(e.current||1),P(e.pageSize||10)},toolBarRender:function(){return[]}})]}):null},P=a(96063),B=a(58620),_=a(84176),W=a.n(_),J=a(10154),K=a.n(J),Q=a(16265),V=a(16658),G=a(11090),X=a(69533),$=a(96596),ee=a.n($),te=["current","pageSize"],ae=function(){var e,t,a,n,r,s,o=(0,d.useIntl)(),i=(0,w.useRef)(),u=(0,v.Z)().translateString,l=(0,w.useState)(1),m=x()(l,2),g=m[0],f=m[1],h=(0,w.useState)(10),j=x()(h,2),k=j[0],C=j[1],T=(0,y.u)((function(e){return e.currentOrg})),R=(0,d.useAccess)(),Y=(0,w.useMemo)((function(){var e;return null==R||null===(e=R.getModulePermission)||void 0===e?void 0:e.call(R,D.MY.QUEUE_MEMBER)}),[R]),H=null!==(e=null==Y||null===(t=Y.canRead)||void 0===t?void 0:t.call(Y))&&void 0!==e&&e,Z=null!==(a=null==Y||null===(n=Y.canExport)||void 0===n?void 0:n.call(Y))&&void 0!==a&&a,U=null!==(r=null==Y||null===(s=Y.canUpdate)||void 0===s?void 0:s.call(Y))&&void 0!==r&&r,N=function(e,t){b.yw.warning(o.formatMessage({id:e,defaultMessage:t}))},O=(0,w.useState)(),z=x()(O,2),P=(z[0],z[1],3e4),_=(0,w.useState)({}),J=x()(_,2),$=J[0],ae=J[1],ne=(0,w.useState)({}),re=x()(ne,2),se=re[0],oe=re[1],ie=function(e,t){return"".concat(e,":").concat(t||"")},ue=function(e,t){var a=ie(e,null==t?void 0:t.uid);if($[a])return!0;var n=se[a];return!!n&&Date.now()-n<P},de=function(){var e=M()(p()().mark((function e(t,a){var n,r,s,u,d,l,m,g;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=3;break}return N("queue.member.permission.update.denied","无权限：更新队列成员"),e.abrupt("return");case 3:if(null!=a&&a.uid){e.next=6;break}return b.yw.warning(o.formatMessage({id:"queue.member.uid.missing",defaultMessage:"Missing queue member UID"})),e.abrupt("return");case 6:if(r=ie(t,a.uid),!$[r]){e.next=10;break}return b.yw.info(o.formatMessage({id:"queue.member.ai.processing",defaultMessage:"Processing, please wait..."})),e.abrupt("return");case 10:if(!((s=se[r])&&Date.now()-s<P)){e.next=15;break}return u=Math.ceil((P-(Date.now()-s))/1e3),b.yw.warning(o.formatMessage({id:"queue.member.ai.tooFrequent",defaultMessage:"Too frequent, please retry after {seconds}s"},{seconds:u})),e.abrupt("return");case 15:if(d={uid:a.uid,threadUid:null==a||null===(n=a.thread)||void 0===n?void 0:n.uid,orgUid:null==T?void 0:T.uid},ae((function(e){return c()(c()({},e),{},K()({},r,!0))})),oe((function(e){return c()(c()({},e),{},K()({},r,Date.now()))})),b.yw.loading(o.formatMessage({id:"loading",defaultMessage:"Loading"})),e.prev=19,"intention"!==t){e.next=26;break}return e.next=23,(0,Q.C8)(d);case 23:e.t0=e.sent,e.next=36;break;case 26:if("emotion"!==t){e.next=32;break}return e.next=29,(0,Q.WR)(d);case 29:e.t1=e.sent,e.next=35;break;case 32:return e.next=34,(0,Q.E1)(d);case 34:e.t1=e.sent;case 35:e.t0=e.t1;case 36:l=e.t0,b.yw.destroy(),200===(null==l?void 0:l.code)?(b.yw.success(o.formatMessage({id:"intention"===t?"queue.member.ai.intention.success":"emotion"===t?"queue.member.ai.emotion.success":"queue.member.ai.summary.success",defaultMessage:"intention"===t?"Intention identified":"emotion"===t?"Emotion identified":"Summary generated"})),null===(m=i.current)||void 0===m||null===(g=m.reload)||void 0===g||g.call(m)):b.yw.error((null==l?void 0:l.message)||o.formatMessage({id:"intention"===t?"queue.member.ai.intention.failed":"emotion"===t?"queue.member.ai.emotion.failed":"queue.member.ai.summary.failed",defaultMessage:"intention"===t?"Failed to identify intention":"emotion"===t?"Failed to identify emotion":"Failed to generate summary"}));case 39:return e.prev=39,ae((function(e){return c()(c()({},e),{},K()({},r,!1))})),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[19,,39,42]])})));return function(t,a){return e.apply(this,arguments)}}(),le=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.nickname"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.nickname.tooltip"}),dataIndex:"visitorNickname",width:180,copyable:!0,render:function(e,t){var a;return u(null==t||null===(a=t.thread)||void 0===a||null===(a=a.user)||void 0===a?void 0:a.nickname)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.number"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.number.tooltip"}),dataIndex:"queueNumber",hideInSearch:!0},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.queueNickname"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.nickname.tooltip"}),dataIndex:"queueNickname",copyable:!0,width:120,hideInSearch:!0,render:function(e,t){var a;return u(null==t||null===(a=t.queue)||void 0===a?void 0:a.nickname)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robot"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robot.tooltip"}),dataIndex:"robotNickname",copyable:!0,render:function(e,t){var a,n=null==t||null===(a=t.thread)||void 0===a?void 0:a.robotProtobuf;return u(null==n?void 0:n.nickname)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.waitTime"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.waitTime.tooltip"}),dataIndex:"waitLength",hideInSearch:!0,render:function(e,t){if(!t.waitLength&&0!==t.waitLength)return"-";var a=Math.floor(t.waitLength/60),n=t.waitLength%60;return a>0?"".concat(a,"分").concat(n,"秒"):"".concat(n,"秒")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorPriority"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorPriority.tooltip"}),dataIndex:"visitorPriority",hideInSearch:!0,render:function(e,t){return t.visitorPriority||0}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorFirstMessageAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorFirstMessageAt.tooltip"}),dataIndex:"visitorFirstMessageAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.visitorFirstMessageAt?ee()(null==t?void 0:t.visitorFirstMessageAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorLastMessageAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorLastMessageAt.tooltip"}),dataIndex:"visitorLastMessageAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.visitorLastMessageAt?ee()(null==t?void 0:t.visitorLastMessageAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.enqueueTime"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.enqueueTime.tooltip"}),dataIndex:"visitorEnqueueAt",hideInSearch:!0,render:function(e,t){return ee()(null==t?void 0:t.visitorEnqueueAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.status"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.status.tooltip"}),dataIndex:"status",hideInSearch:!0,render:function(e,t){var a;switch(null==t||null===(a=t.thread)||void 0===a?void 0:a.status){case F.ach:return(0,E.jsx)(d.FormattedMessage,{id:"thread.process.status.new"});case F.j0C:return(0,E.jsx)(d.FormattedMessage,{id:"thread.process.status.roboting"});case F.Q7C:return(0,E.jsx)(d.FormattedMessage,{id:"thread.process.status.offline"});case F.v1N:return(0,E.jsx)(d.FormattedMessage,{id:"thread.process.status.queuing"});case F.hl2:return(0,E.jsx)(d.FormattedMessage,{id:"thread.process.status.chatting"});case F.V1n:return(0,E.jsx)(d.FormattedMessage,{id:"thread.process.status.closed"});default:return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.status.unknown"})}}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotAcceptType"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotAcceptType.tooltip"}),dataIndex:"robotAcceptType",hideInSearch:!0,render:function(e,t){switch(null==t?void 0:t.robotAcceptType){case"AUTO":return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.auto"});case"MANUAL":return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.manual"});case"ROBOT":return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.robot"});default:return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.unknown"})}}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotAcceptTime"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotAcceptTime.tooltip"}),dataIndex:"robotAcceptedAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotAcceptedAt?ee()(null==t?void 0:t.robotAcceptedAt).format("YYYY-MM-DD HH:mm:ss"):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.unknown",defaultMessage:"Not Accepted"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotFirstResponse"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotFirstResponse.tooltip"}),dataIndex:"robotFirstResponse",hideInSearch:!0,render:function(e,t){return t.robotFirstResponse?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotFirstResponse.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotFirstResponse.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotFirstResponseAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotFirstResponseAt.tooltip"}),dataIndex:"robotFirstResponseAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotFirstResponseAt?ee()(null==t?void 0:t.robotFirstResponseAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotLastResponseAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotLastResponseAt.tooltip"}),dataIndex:"robotLastResponseAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotLastResponseAt?ee()(null==t?void 0:t.robotLastResponseAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotClosedAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotClosedAt.tooltip"}),dataIndex:"robotClosedAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotClosedAt?ee()(null==t?void 0:t.robotClosedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotToAgent"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotToAgent.tooltip"}),dataIndex:"robotToAgent",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotToAgent?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.offline.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.offline.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotToAgentTime"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotToAgentTime.tooltip"}),dataIndex:"robotToAgentAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotToAgent?ee()(null==t?void 0:t.robotToAgentAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotAvgResponseLength"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotAvgResponseLength.tooltip"}),dataIndex:"robotAvgResponseLength",hideInSearch:!0,render:function(e,t){if(!t.robotAvgResponseLength&&0!==t.robotAvgResponseLength)return"-";var a=Math.floor(t.robotAvgResponseLength/60),n=t.robotAvgResponseLength%60;return a>0?"".concat(a,"分").concat(n,"秒"):"".concat(n,"秒")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotMaxResponseLength"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotMaxResponseLength.tooltip"}),dataIndex:"robotMaxResponseLength",hideInSearch:!0,render:function(e,t){if(!t.robotMaxResponseLength&&0!==t.robotMaxResponseLength)return"-";var a=Math.floor(t.robotMaxResponseLength/60),n=t.robotMaxResponseLength%60;return a>0?"".concat(a,"分").concat(n,"秒"):"".concat(n,"秒")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotTimeout"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotTimeout.tooltip"}),dataIndex:"robotTimeout",hideInSearch:!0,render:function(e,t){return t.robotTimeout?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotTimeout.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotTimeout.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotTimeoutAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotTimeoutAt.tooltip"}),dataIndex:"robotTimeoutAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotTimeoutAt?ee()(null==t?void 0:t.robotTimeoutAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agent"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agent.tooltip"}),dataIndex:"agentNickname",copyable:!0,render:function(e,t){var a,n=JSON.parse((null==t||null===(a=t.thread)||void 0===a?void 0:a.agent)||"{}");return u(null==n?void 0:n.nickname)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.offline"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.offline.tooltip"}),dataIndex:"agentOffline",hideInSearch:!0,render:function(e,t){return null!=t&&t.robotToAgent?null!=t&&t.agentOffline?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.offline.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.offline.no"}):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentAcceptType"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentAcceptType.tooltip"}),dataIndex:"agentAcceptType",hideInSearch:!0,render:function(e,t){switch(null==t?void 0:t.agentAcceptType){case"AUTO":return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.auto"});case"MANUAL":return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.manual"});case"ROBOT":return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.robot"});default:return(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.unknown"})}}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentAcceptTime"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentAcceptTime.tooltip"}),dataIndex:"agentAcceptedAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.agentAcceptedAt?ee()(null==t?void 0:t.agentAcceptedAt).format("YYYY-MM-DD HH:mm:ss"):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.acceptType.unknown",defaultMessage:"Not Accepted"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponse"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponse.tooltip"}),dataIndex:"agentFirstResponse",hideInSearch:!0,render:function(e,t){return t.agentFirstResponse?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponse.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponse.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponseLength"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponseLength.tooltip"}),dataIndex:"agentFirstResponseLength",hideInSearch:!0,render:function(e,t){if(!t.agentFirstResponseLength&&0!==t.agentFirstResponseLength)return"-";var a=Math.floor(t.agentFirstResponseLength/60),n=t.agentFirstResponseLength%60;return a>0?"".concat(a,"分").concat(n,"秒"):"".concat(n,"秒")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponseAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentFirstResponseAt.tooltip"}),dataIndex:"agentFirstResponseAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.agentFirstResponseAt?ee()(null==t?void 0:t.agentFirstResponseAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentLastResponseAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentLastResponseAt.tooltip"}),dataIndex:"agentLastResponseAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.agentLastResponseAt?ee()(null==t?void 0:t.agentLastResponseAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentClosedAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentClosedAt.tooltip"}),dataIndex:"agentClosedAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.agentClosedAt?ee()(null==t?void 0:t.agentClosedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.solved"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.solved.tooltip"}),dataIndex:"resolved",hideInSearch:!0,render:function(e,t){return t.resolved?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.solved.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.solved.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rated"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rated.tooltip"}),dataIndex:"rated",hideInSearch:!0,render:function(e,t){return t.rated?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rated.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rated.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rateScore"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rateScore.tooltip"}),dataIndex:"rateScore",hideInSearch:!0},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rateAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.rateAt.tooltip"}),dataIndex:"rateAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.rateAt?ee()(null==t?void 0:t.rateAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityChecked"}),dataIndex:"qualityChecked",key:"qualityChecked",width:150,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityChecked.tooltip"}),valueEnum:{true:{text:o.formatMessage({id:"queue.member.qualityChecked.yes",defaultMessage:"Yes"}),status:"Success"},false:{text:o.formatMessage({id:"queue.member.qualityChecked.no",defaultMessage:"No"}),status:"Processing"}},render:function(e,t){return(0,E.jsx)(I.Z,{color:t.qualityChecked?"green":"blue",children:t.qualityChecked?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityChecked.yes",defaultMessage:"Yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityChecked.no",defaultMessage:"No"})})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityCheckScore"}),dataIndex:"qualityCheckScore",key:"qualityCheckScore",width:100,hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityCheckScore.tooltip"}),render:function(e,t){return(0,E.jsx)(I.Z,{color:t.qualityCheckScore>=90?"green":t.qualityCheckScore>=80?"orange":"red",children:(t.qualityCheckScore||0)+o.formatMessage({id:"quality.score.unit",defaultMessage:"points"})})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityCheckedAt"}),dataIndex:"qualityCheckedAt",key:"qualityCheckedAt",valueType:"dateTime",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.qualityCheckedAt.tooltip"}),render:function(e,t){return t.qualityCheckedAt||"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.summarized"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.summarized.tooltip"}),dataIndex:"summarized",hideInSearch:!0,render:function(e,t){return t.summarized?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.summarized.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.summarized.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorMessageCount"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.visitorMessageCount.tooltip"}),dataIndex:"visitorMessageCount",hideInSearch:!0,render:function(e,t){return t.visitorMessageCount||0}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentMessageCount"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentMessageCount.tooltip"}),dataIndex:"agentMessageCount",hideInSearch:!0,render:function(e,t){return t.agentMessageCount||0}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentAvgResponseLength"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentAvgResponseLength.tooltip"}),dataIndex:"agentAvgResponseLength",hideInSearch:!0,render:function(e,t){if(!t.agentAvgResponseLength&&0!==t.agentAvgResponseLength)return"-";var a=Math.floor(t.agentAvgResponseLength/60),n=t.agentAvgResponseLength%60;return a>0?"".concat(a,"分").concat(n,"秒"):"".concat(n,"秒")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentMaxResponseLength"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentMaxResponseLength.tooltip"}),dataIndex:"agentMaxResponseLength",hideInSearch:!0,render:function(e,t){if(!t.agentMaxResponseLength&&0!==t.agentMaxResponseLength)return"-";var a=Math.floor(t.agentMaxResponseLength/60),n=t.agentMaxResponseLength%60;return a>0?"".concat(a,"分").concat(n,"秒"):"".concat(n,"秒")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeout"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeout.tooltip"}),dataIndex:"agentTimeout",hideInSearch:!0,render:function(e,t){return t.agentTimeout?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeout.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeout.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeoutAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeoutAt.tooltip"}),dataIndex:"agentTimeoutAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.agentTimeoutAt?ee()(null==t?void 0:t.agentTimeoutAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeoutCount"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentTimeoutCount.tooltip"}),dataIndex:"agentTimeoutCount",hideInSearch:!0,render:function(e,t){return t.agentTimeoutCount||0}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentClose"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentClose.tooltip"}),dataIndex:"agentClose",hideInSearch:!0,render:function(e,t){return t.agentClose?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentClose.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.agentClose.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemFirstResponseAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemFirstResponseAt.tooltip"}),dataIndex:"systemFirstResponseAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.systemFirstResponseAt?ee()(null==t?void 0:t.systemFirstResponseAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemLastResponseAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemLastResponseAt.tooltip"}),dataIndex:"systemLastResponseAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.systemLastResponseAt?ee()(null==t?void 0:t.systemLastResponseAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemClosedAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemClosedAt.tooltip"}),dataIndex:"systemClosedAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.systemClosedAt?ee()(null==t?void 0:t.systemClosedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemClose"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemClose.tooltip"}),dataIndex:"systemClose",hideInSearch:!0,render:function(e,t){return t.systemClose?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemClose.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemClose.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemMessageCount"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.systemMessageCount.tooltip"}),dataIndex:"systemMessageCount",hideInSearch:!0,render:function(e,t){return t.systemMessageCount||0}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.threadIntentionResult",defaultMessage:"意图识别原始结果"}),dataIndex:"threadIntentionResult",hideInSearch:!0,width:220,ellipsis:!0,copyable:!0,render:function(e,t){return t.threadIntentionResult||"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.threadEmotionResult",defaultMessage:"情绪分析原始结果"}),dataIndex:"threadEmotionResult",hideInSearch:!0,width:220,ellipsis:!0,copyable:!0,render:function(e,t){return t.threadEmotionResult||"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.threadSummaryResult",defaultMessage:"会话小结原始结果"}),dataIndex:"threadSummaryResult",hideInSearch:!0,width:240,ellipsis:!0,copyable:!0,render:function(e,t){return t.threadSummaryResult||"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.messageLeaveAt"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.messageLeaveAt.tooltip"}),dataIndex:"messageLeaveAt",hideInSearch:!0,render:function(e,t){return null!=t&&t.messageLeaveAt?ee()(null==t?void 0:t.messageLeaveAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotMessageCount"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.robotMessageCount.tooltip"}),dataIndex:"robotMessageCount",hideInSearch:!0,render:function(e,t){return t.robotMessageCount||0}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.leaveMsg"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.leaveMsg.tooltip"}),dataIndex:"messageLeave",hideInSearch:!0,render:function(e,t){return t.messageLeave?(0,E.jsx)(d.FormattedMessage,{id:"queue.member.leaveMsg.yes"}):(0,E.jsx)(d.FormattedMessage,{id:"queue.member.leaveMsg.no"})}},{title:(0,E.jsx)(d.FormattedMessage,{id:"channel"}),tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.channel.tooltip"}),dataIndex:"channel",copyable:!0,hideInSearch:!0,render:function(e,t){var a;return(0,V.YG)(null==t||null===(a=t.thread)||void 0===a?void 0:a.channel)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",width:180,hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.tooltip.createdAt"}),render:function(e,t,a,n){return ee()(t.createdAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,E.jsx)(d.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",width:180,hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.tooltip.updatedAt"}),render:function(e,t,a,n){return ee()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}];(0,B.OJ)()&&le.push({title:o.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:280,fixed:"right",render:function(e,t,a,n){return(0,E.jsxs)(A.Z,{size:4,children:[(0,E.jsx)("a",{onClick:function(){me(t)},children:o.formatMessage({id:"view",defaultMessage:"View"})},"view"),(0,E.jsx)(S.Z,{title:o.formatMessage({id:"queue.member.ai.confirm.intention.title",defaultMessage:"Confirm intention identification?"}),okText:o.formatMessage({id:"ok",defaultMessage:"OK"}),cancelText:o.formatMessage({id:"cancel",defaultMessage:"Cancel"}),onConfirm:function(){return de("intention",t)},children:(0,E.jsx)(X.ZP,{type:"link",size:"small",disabled:ue("intention",t),children:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.ai.intention",defaultMessage:"Intention"})})},"intention"),(0,E.jsx)(S.Z,{title:o.formatMessage({id:"queue.member.ai.confirm.emotion.title",defaultMessage:"Confirm emotion identification?"}),okText:o.formatMessage({id:"ok",defaultMessage:"OK"}),cancelText:o.formatMessage({id:"cancel",defaultMessage:"Cancel"}),onConfirm:function(){return de("emotion",t)},children:(0,E.jsx)(X.ZP,{type:"link",size:"small",disabled:ue("emotion",t),children:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.ai.emotion",defaultMessage:"Emotion"})})},"emotion"),(0,E.jsx)(S.Z,{title:o.formatMessage({id:"queue.member.ai.confirm.summary.title",defaultMessage:"Confirm generating summary?"}),okText:o.formatMessage({id:"ok",defaultMessage:"OK"}),cancelText:o.formatMessage({id:"cancel",defaultMessage:"Cancel"}),onConfirm:function(){return de("summary",t)},children:(0,E.jsx)(X.ZP,{type:"link",size:"small",disabled:ue("summary",t),children:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.ai.summary",defaultMessage:"Summary"})})},"summary")]})}});var me=function(e){var t,a,n;L.Z.debug("handleShowChatHistory",e);var r={chatConfig:{org:null==e||null===(t=e.thread)||void 0===t?void 0:t.orgUid,t:F.CCt,sid:null==e||null===(a=e.thread)||void 0===a?void 0:a.uid}};null===(n=window.bytedesk)||void 0===n||n.showChat(r)},ce=function(){var e=M()(p()().mark((function e(){var t;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=3;break}return N("queue.member.permission.export.denied","无权限：导出队列成员"),e.abrupt("return");case 3:L.Z.debug("handleExportExcel",g,k),t=localStorage.getItem(F.LA8),window.open((0,B.kG)()+"/api/v1/queue/member/export?"+new URLSearchParams({orgUid:(null==T?void 0:T.uid)||"",pageNumber:String(g-1),pageSize:String(k),accessToken:t||""}).toString());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(q.Z,{columns:le,actionRef:i,cardBordered:!0,scroll:{x:"max-content"},request:function(){var e=M()(p()().mark((function e(t,a,n){var r,s,i,u,d;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return N("queue.member.permission.read.denied","无权限：查看队列成员"),e.abrupt("return",{data:[],success:!0,total:0});case 3:return b.yw.loading(o.formatMessage({id:"loading",defaultMessage:"Loading"})),r=t.current,s=t.pageSize,i=W()(t,te),f(r),C(s),u=c()({pageNumber:r-1,pageSize:s,orgUid:null==T?void 0:T.uid},i),e.next=10,(0,Q.nV)(u);case 10:return d=e.sent,L.Z.debug("queryQueueMembersByOrg response:",u,d),b.yw.destroy(),200===d.code||b.yw.error(d.message),e.abrupt("return",{data:null==d?void 0:d.data.content,success:!0,total:null==d?void 0:d.data.totalElements});case 15:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){L.Z.debug("page:",e)}},dateFormatter:"string",headerTitle:o.formatMessage({id:"queue.member.list"}),toolBarRender:function(){return Z?[(0,E.jsx)(X.ZP,{icon:(0,E.jsx)(G.Z,{}),type:"primary",onClick:ce,children:(0,E.jsx)(d.FormattedMessage,{id:"queue.member.export"})},"button")]:[]},columnsState:{persistenceKey:"queue-member-table",defaultValue:{}},options:{setting:{draggable:!0,checkable:!0,checkedReset:!0,extra:[(0,E.jsx)("a",{onClick:function(){var e,t;null===(e=i.current)||void 0===e||null===(t=e.reset)||void 0===t||t.call(e)},children:(0,E.jsx)(d.FormattedMessage,{id:"table.columns.reset"})},"reset")]}}})})},ne=a(86222),re=a.n(ne),se=a(83163),oe=a(68177),ie=a(93953),ue=a(71194),de=["current","pageSize"],le=function(){var e,t,a,n,r=(0,d.useIntl)(),s=(0,w.useRef)(),o=(0,v.Z)().translateString,i=(0,w.useState)(1),u=x()(i,2),l=u[0],m=u[1],g=(0,w.useState)(10),f=x()(g,2),h=f[0],j=f[1],A=(0,y.u)((function(e){return e.currentOrg})),I=(0,w.useState)([]),S=x()(I,2),k=S[0],C=S[1],T=(0,w.useState)([]),R=x()(T,2),Y=R[0],H=R[1],Z=(0,w.useState)(!1),U=x()(Z,2),N=U[0],O=U[1],z=(0,d.useAccess)(),P=(0,w.useMemo)((function(){var e;return null==z||null===(e=z.getModulePermission)||void 0===e?void 0:e.call(z,D.MY.QUEUE)}),[z]),_=null!==(e=null==P||null===(t=P.canRead)||void 0===t?void 0:t.call(P))&&void 0!==e&&e,J=null!==(a=null==P||null===(n=P.canExport)||void 0===n?void 0:n.call(P))&&void 0!==a&&a,K=function(e,t){b.yw.warning(r.formatMessage({id:e,defaultMessage:t}))},Q=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,fixed:"left"},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.nickname"}),dataIndex:"nickname",copyable:!0,width:150,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.nickname.tooltip",defaultMessage:"客服或工作组的名称"}),render:function(e,t){return o(null==t?void 0:t.nickname)}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.type"}),dataIndex:"type",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.type.tooltip",defaultMessage:"接待类型：工作组、客服或机器人"}),render:function(e,t){switch(t.type){case F.VXt:return(0,E.jsx)(d.FormattedMessage,{id:"queue.type.workgroup"});case F.BOH:return(0,E.jsx)(d.FormattedMessage,{id:"queue.type.agent"});case F.aOw:return(0,E.jsx)(d.FormattedMessage,{id:"queue.type.robot"});default:return(0,E.jsx)(d.FormattedMessage,{id:"queue.type.unknown"})}}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.day"}),dataIndex:"day",valueType:"date",tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.day.tooltip",defaultMessage:"统计的日期"}),search:{transform:function(e){return ee()(e).format("YYYY-MM-DD")}}},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.totalCount"}),dataIndex:"totalCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.totalCount.tooltip",defaultMessage:"今日请求服务总人数"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.robotingCount"}),dataIndex:"robotingCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.robotingCount.tooltip",defaultMessage:"机器人服务中人次"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.offlineCount"}),dataIndex:"offlineCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.offlineCount.tooltip",defaultMessage:"客服离线人次"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.leaveMsgCount"}),dataIndex:"leaveMsgCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.leaveMsgCount.tooltip",defaultMessage:"访客留言数量"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.robotToAgentCount"}),dataIndex:"robotToAgentCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.robotToAgentCount.tooltip",defaultMessage:"从机器人转人工的次数"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.queuingCount"}),dataIndex:"queuingCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.queuingCount.tooltip",defaultMessage:"当前排队中人数"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.chattingCount"}),dataIndex:"chattingCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.chattingCount.tooltip",defaultMessage:"正在服务中人数"})},{title:(0,E.jsx)(d.FormattedMessage,{id:"queue.closedCount"}),dataIndex:"closedCount",hideInSearch:!0,tooltip:(0,E.jsx)(d.FormattedMessage,{id:"queue.closedCount.tooltip",defaultMessage:"已结束会话数量"})}],V=function(){var e=M()(p()().mark((function e(){var t;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=3;break}return K("queue.permission.export.denied","无权限：导出队列"),e.abrupt("return");case 3:L.Z.debug("handleExportExcel",l,h),t=localStorage.getItem(F.LA8),window.open((0,B.kG)()+"/api/v1/queue/export?"+new URLSearchParams({orgUid:(null==A?void 0:A.uid)||"",pageNumber:String(l-1),pageSize:String(h),accessToken:t||""}).toString());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(q.Z,{columns:Q,actionRef:s,cardBordered:!0,scroll:{x:"max-content"},request:function(){var e=M()(p()().mark((function e(t,a,n){var s,i,u,d,l,g,f,M,h,x;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=3;break}return K("queue.permission.read.denied","无权限：查看队列"),e.abrupt("return",{data:[],success:!0,total:0});case 3:return b.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),O(!0),s=t.current,i=t.pageSize,u=W()(t,de),m(s),j(i),d=c()({pageNumber:s-1,pageSize:i,orgUid:null==A?void 0:A.uid},u),e.next=11,(0,se.Wq)(d);case 11:if(l=e.sent,L.Z.debug("queryQueuesByOrg response:",d,l),b.yw.destroy(),O(!1),200!==l.code){e.next=40;break}(g=null==l?void 0:l.data.content.map((function(e){return{day:e.day,totalCount:e.totalCount,nickname:o(e.nickname)}}))).sort((function(e,t){return ee()(e.day).diff(ee()(t.day))})),C(g),f=[],M=re()(null==l?void 0:l.data.content),e.prev=21,x=p()().mark((function e(){var t,a,n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=h.value).threadsCountByHour&&t.threadsCountByHour.length>0&&(a=o(t.nickname),n=t.day||"",t.threadsCountByHour.forEach((function(e,t){f.push({hour:String(t)+"点",count:e,nickname:a,day:n})})));case 2:case"end":return e.stop()}}),e)})),M.s();case 24:if((h=M.n()).done){e.next=28;break}return e.delegateYield(x(),"t0",26);case 26:e.next=24;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(21),M.e(e.t1);case 33:return e.prev=33,M.f(),e.finish(33);case 36:H(f),L.Z.debug("Hourly chart data sample:",f.slice(0,3)),e.next=41;break;case 40:b.yw.error(l.message);case 41:return e.abrupt("return",{data:null==l?void 0:l.data.content,success:!0,total:null==l?void 0:l.data.totalElements});case 42:case"end":return e.stop()}}),e,null,[[21,30,33,36]])})));return function(t,a,n){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){L.Z.debug("page:",e)}},dateFormatter:"string",headerTitle:r.formatMessage({id:"queue.list"}),toolBarRender:function(){return J?[(0,E.jsx)(X.ZP,{icon:(0,E.jsx)(G.Z,{}),type:"primary",onClick:V,children:(0,E.jsx)(d.FormattedMessage,{id:"queue.export"})},"button")]:[]}}),(0,E.jsx)(oe.Z,{title:r.formatMessage({id:"queue.totalCount.trend",defaultMessage:"总数趋势"}),style:{marginTop:16},children:(0,E.jsx)(ie.Z,{spinning:N,children:k.length>0?(0,E.jsx)(ue.Z,{data:k,xField:"day",yField:"totalCount",seriesField:"nickname",colorField:"nickname",tooltip:function(e){return{name:e.nickname,title:e.day,value:e.totalCount}}}):(0,E.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:r.formatMessage({id:"noData",defaultMessage:"暂无数据"})})})}),(0,E.jsx)(oe.Z,{title:r.formatMessage({id:"queue.hourly.trend",defaultMessage:"24小时接待人数趋势"}),style:{marginTop:16},children:(0,E.jsx)(ie.Z,{spinning:N,children:Y.length>0?(0,E.jsx)(ue.Z,c()(c()({},{smooth:!0,animation:!1,lineStyle:{lineWidth:100},point:{size:5,style:{lineWidth:15}},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},tooltip:{shared:!0}}),{},{data:Y,xField:"hour",yField:"count",seriesField:"nickname",colorField:"nickname",tooltip:function(e){return{name:e.nickname,title:"".concat(e.hour,":00"),value:"".concat(e.count).concat(e.day?" (".concat(e.day,")"):"")}}})):(0,E.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:r.formatMessage({id:"noData",defaultMessage:"暂无数据"})})})})]})},me=function(){var e,t,a,n,m,c,g,p,f,M,h,x,b,v,y,F,q,j,A,I,S=(0,d.useIntl)(),w=(0,d.useAccess)(),k=null!==(e=null==w||null===(t=w.hasAnyModulePermission)||void 0===t?void 0:t.call(w,D.MY.THREAD))&&void 0!==e&&e,C=null!==(a=null==w||null===(n=w.hasAnyModulePermission)||void 0===n?void 0:n.call(w,D.MY.QUEUE))&&void 0!==a&&a,T=null!==(m=null==w||null===(c=w.hasAnyModulePermission)||void 0===c?void 0:c.call(w,D.MY.QUEUE_MEMBER))&&void 0!==m&&m,R=null!==(g=null==w||null===(p=w.hasAnyModulePermission)||void 0===p?void 0:p.call(w,D.MY.THREAD_RATING))&&void 0!==g&&g,Y=null!==(f=null==w||null===(M=w.hasAnyModulePermission)||void 0===M?void 0:M.call(w,D.MY.THREAD_TRANSFER))&&void 0!==f&&f,L=null!==(h=null==w||null===(x=w.hasAnyModulePermission)||void 0===x?void 0:x.call(w,D.MY.THREAD_INVITE))&&void 0!==h&&h,Z=null!==(b=null==w||null===(v=w.hasAnyModulePermission)||void 0===v?void 0:v.call(w,D.MY.THREAD_SUMMARY))&&void 0!==b&&b,U=null!==(y=null==w||null===(F=w.hasAnyModulePermission)||void 0===F?void 0:F.call(w,D.MY.THREAD_INTENTION))&&void 0!==y&&y,N=null!==(q=null==w||null===(j=w.hasAnyModulePermission)||void 0===j?void 0:j.call(w,D.MY.THREAD_EMOTION))&&void 0!==q&&q,O=r()(k?[{key:"thread",label:S.formatMessage({id:"thread.tab.all"}),children:(0,E.jsx)(o.Z,{})}]:[]);if((0,B.OJ)()&&O.push.apply(O,r()(C?[{key:"queue",label:S.formatMessage({id:"queue.tab.list"}),children:(0,E.jsx)(le,{})}]:[]).concat(r()(T?[{key:"queue_member",label:S.formatMessage({id:"queue.tab.member"}),children:(0,E.jsx)(ae,{})}]:[]),r()(R?[{key:"rate",label:S.formatMessage({id:"thread.tab.rate"}),children:(0,E.jsx)(P.Z,{})}]:[]),r()(Y?[{key:"transfer",label:S.formatMessage({id:"thread.tab.transfer"}),children:(0,E.jsx)(u.Z,{})}]:[]),r()(L?[{key:"invite",label:S.formatMessage({id:"thread.tab.invite"}),children:(0,E.jsx)(i.Z,{})}]:[]),r()(Z?[{key:"summary",label:S.formatMessage({id:"thread.tab.summary"}),children:(0,E.jsx)(l.Z,{})}]:[]),r()(U?[{key:"intention",label:S.formatMessage({id:"thread.summary.intention",defaultMessage:"意图识别"}),children:(0,E.jsx)(H,{})}]:[]),r()(N?[{key:"emotion",label:S.formatMessage({id:"thread.summary.emotion",defaultMessage:"情绪分析"}),children:(0,E.jsx)(z,{})}]:[]))),!O||0===O.length)return null;var _=String(null!==(A=null===(I=O[0])||void 0===I?void 0:I.key)&&void 0!==A?A:"thread");return(0,E.jsx)(s.Z,{defaultActiveKey:_,items:O,style:{padding:"10px"}})}}}]);