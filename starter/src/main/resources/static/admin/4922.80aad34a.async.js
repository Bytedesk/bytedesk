"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4922],{11591:function(e,t,n){n.d(t,{Bv:function(){return T},L0:function(){return j},QB:function(){return k},RF:function(){return q},YO:function(){return C},YQ:function(){return A},Yg:function(){return m},kh:function(){return p},kv:function(){return y},pf:function(){return d},y:function(){return h}});var r=n(90819),a=n.n(r),o=n(73193),i=n.n(o),u=n(89933),s=n.n(u),l=n(6844),c=n(19736);function d(e){return f.apply(this,arguments)}function f(){return(f=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/query/org",{method:"GET",params:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/create",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/update",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/delete",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/enable",{method:"POST",data:{uid:t.uid,enabled:t.enabled,channel:l.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return x.apply(this,arguments)}function x(){return(x=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/deleteAll",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return S.apply(this,arguments)}function S(){return(S=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/updateIndex",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return M.apply(this,arguments)}function M(){return(M=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/updateVectorIndex",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return R.apply(this,arguments)}function R(){return(R=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/updateAllIndex",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return U.apply(this,arguments)}function U(){return(U=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/updateAllVectorIndex",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return I.apply(this,arguments)}function I(){return(I=s()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/agent/text/faq-similar-questions",{method:"POST",data:i()(i()({},t),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},54166:function(e,t,n){n.d(t,{Ck:function(){return m},dv:function(){return k},pw:function(){return y},qL:function(){return p},z4:function(){return h}});var r=n(90819),a=n.n(r),o=n(89933),i=n.n(o),u=n(73193),s=n.n(u),l=n(6844),c=n(19736),d="/api/v1/quickbutton";function f(e){var t;return s()(s()({},e),{},{channel:null!==(t=null==e?void 0:e.channel)&&void 0!==t?t:l.XtJ})}function p(e){return g.apply(this,arguments)}function g(){return(g=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/query/org"),{method:"GET",params:f(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/create"),{method:"POST",data:f(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/update"),{method:"POST",data:f(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/delete"),{method:"POST",data:f(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return x.apply(this,arguments)}function x(){return(x=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/enable"),{method:"POST",data:f(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},47460:function(e,t,n){n(90819),n(89933),n(73193),n(45332),n(46219),n(73268),n(14281),n(6844),n(19736),n(44194),n(5719),n(74341),n(31549)},21914:function(e,t,n){var r=n(90819),a=n.n(r),o=n(89933),i=n.n(o),u=n(45332),s=n.n(u),l=(n(90104),n(30064)),c=n(93312),d=n(19736),f=n(44194),p=(n(53816),n(44679)),g=n(31549);t.Z=function(e){e.variant;var t=e.serviceSettings,n=e.onServiceSettingsChange,r=(0,d.useIntl)(),o=l.A.useForm(),u=s()(o,1)[0],h=(0,p.Z)().translateString,v=(0,f.useState)(!1),m=s()(v,2),b=(m[0],m[1]),y=(0,f.useState)(""),w=s()(y,2),k=(w[0],w[1]),x=(0,f.useMemo)((function(){var e,n;return null!==(e=null!==(n=null==t?void 0:t.draft)&&void 0!==n?n:null==t?void 0:t.live)&&void 0!==e?e:void 0}),[null==t?void 0:t.draft,null==t?void 0:t.live]);(0,f.useEffect)((function(){var e=!(null==x||!x.showRateBtn),t=h(null==x?void 0:x.inviteRateTip)||"";u.setFieldsValue({showRateBtn:null==x?void 0:x.showRateBtn,autoInviteRate:null==x?void 0:x.autoInviteRate}),b(e),k(t)}),[x,u,h]);var q=function(){var e=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onFinish:",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabRating handleChange autoInviteRate",t),u.setFieldValue("autoInviteRate",t),null==n||n({autoInviteRate:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.A,{form:u,onFinish:q,submitter:!1,style:{marginLeft:"20px"},children:[(0,g.jsx)(c.Z,{width:"md",name:"autoInviteRate",label:r.formatMessage({id:"rate.auto.invite.rate"}),tooltip:r.formatMessage({id:"rate.auto.invite.rate.tooltip"}),fieldProps:{onChange:S}}),!1]})})}},2061:function(e,t,n){var r=n(90819),a=n.n(r),o=n(89933),i=n.n(o),u=n(45332),s=n.n(u),l=n(93527),c=n(11591),d=n(67559),f=n(14888),p=n(44679),g=n(6844),h=n(74341),v=n(30064),m=n(93312),b=n(86684),y=n(68263),w=n(19736),k=n(44194),x=n(31167),q=n(36125),S=n(31549);t.Z=function(e){e.variant;var t,n,r=e.serviceSettings,o=e.onServiceSettingsChange,u=(e.settingsUid,e.isActive,(0,w.useIntl)()),C=v.A.useForm(),M=s()(C,1)[0],j=(0,f.u)((function(e){return e.currentOrg})),R=(0,p.Z)().translateString,T=null==r?void 0:r.live,U=null==r?void 0:r.draft,A=(0,k.useMemo)((function(){var e;return null!==(e=null!=U?U:T)&&void 0!==e?e:{}}),[U,T]),I=(0,k.useState)(),F=s()(I,2),Z=F[0],P=F[1],O=(0,k.useState)(),B=s()(O,2),W=B[0],E=B[1],K=(0,k.useState)(),V=s()(K,2),L=V[0],Q=V[1],J=(0,k.useState)("iframe"),D=s()(J,2),Y=D[0],X=D[1],N=(0,k.useCallback)(function(){var e=i()(a()().mark((function e(t){var n,r,o,i,s,d,f,p;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||L){e.next=4;break}return console.log("TabRight: 没有选择知识库，无法获取FAQ"),P(void 0),e.abrupt("return");case 4:return l.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:100,orgUid:null==j?void 0:j.uid,kbUid:t||L},e.prev=6,e.next=9,(0,c.pf)(n);case 9:r=e.sent,q.Z.debug("TabRight.getFaqs response:",n,r),l.yw.destroy(),200===r.code?(o={code:r.code,message:r.message,data:{content:null==r?void 0:r.data.content.map((function(e){return{uid:e.uid,question:e.question,answer:e.answer,kbUid:e.kbUid,orgUid:e.orgUid}})),totalElements:null==r?void 0:r.data.totalElements,totalPages:null==r?void 0:r.data.totalPages,number:null==r?void 0:r.data.number}},P(o),i=t||L,s=M.getFieldValue("faqUids")||[],i&&s.length>0&&(f=(null==o||null===(d=o.data.content)||void 0===d?void 0:d.map((function(e){return e.uid})))||[],(p=s.filter((function(e){return f.includes(e)}))).length!==s.length&&M.setFieldValue("faqUids",p))):l.yw.error(r.message),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),l.yw.destroy(),console.error("TabRight 获取FAQ失败:",e.t0),l.yw.error("获取FAQ失败");case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),[null==j?void 0:j.uid,M,u,L]),H=(0,k.useCallback)(i()(a()().mark((function e(){var t,n,r,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,type:g.QPQ,orgUid:null==j?void 0:j.uid},e.prev=2,e.next=5,(0,d.AP)(t);case 5:n=e.sent,q.Z.debug("TabRight.getKbases response:",t,n),l.yw.destroy(),200===n.code?(o={code:n.code,message:n.message,data:{content:null==n?void 0:n.data.content.map((function(e){return{uid:e.uid,name:e.name,type:e.type,orgUid:e.orgUid}})),totalElements:null==n?void 0:n.data.totalElements,totalPages:null==n?void 0:n.data.totalPages,number:null==n?void 0:n.data.number}},E(o),null!=U&&U.faqKbUid?i=U.faqKbUid:null!=T&&T.faqKbUid?i=T.faqKbUid:(null==o||null===(r=o.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&(i=null==o?void 0:o.data.content[0].uid),i&&(Q(i),M.setFieldValue("faqKbUid",i),N(i))):l.yw.error(n.message),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),l.yw.destroy(),console.error("TabRight 获取知识库失败:",e.t0),l.yw.error("获取知识库失败");case 16:case"end":return e.stop()}}),e,null,[[2,11]])}))),[null==j?void 0:j.uid,M,N,u,null==U?void 0:U.faqKbUid,null==T?void 0:T.faqKbUid]);(0,k.useEffect)((function(){var e=Array.isArray(null==A?void 0:A.faqs)?(null==A?void 0:A.faqs).map((function(e){return null==e?void 0:e.uid})).filter(Boolean):[];M.setFieldsValue({showRightIframe:null==A?void 0:A.showRightIframe,rightIframeUrl:null==A?void 0:A.rightIframeUrl,showFaqs:null==A?void 0:A.showFaqs,faqKbUid:null==A?void 0:A.faqKbUid,faqUids:Array.isArray(null==A?void 0:A.faqUids)?null==A?void 0:A.faqUids:e}),null!=A&&A.faqKbUid&&A.faqKbUid!==L&&(Q(A.faqKbUid),N(A.faqKbUid))}),[M,N,A,L]),(0,k.useEffect)((function(){null!=j&&j.uid&&H()}),[null==j?void 0:j.uid,H]);var z=function(){var e=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabRight handleChange showRightIframe",t),M.setFieldValue("showRightIframe",t),null==o||o({showRightIframe:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabRight handleChange showFaqs",t),M.setFieldValue("showFaqs",t),null==o||o({showFaqs:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{width:"md",name:"showRightIframe",label:(0,S.jsxs)("span",{children:[u.formatMessage({id:"showRightIframe"}),(0,S.jsx)(h.Z,{type:"service",keys:["showRightIframe"],live:T,draft:U})]}),fieldProps:{onChange:z}}),(0,S.jsx)(b.Z,{width:"md",name:"rightIframeUrl",label:(0,S.jsxs)("span",{children:[u.formatMessage({id:"rightIframeUrl"}),(0,S.jsx)(h.Z,{type:"service",keys:["rightIframeUrl"],live:T,draft:U})]}),placeholder:u.formatMessage({id:"rightIframeUrl.placeholder",defaultMessage:"请输入以 http:// 或 https:// 开头的URL"}),rules:[{type:"url",message:u.formatMessage({id:"rightIframeUrl.invalid",defaultMessage:"请输入有效的URL地址"})},{pattern:/^https?:\/\/[^\s]+$/i,message:u.formatMessage({id:"rightIframeUrl.scheme.required",defaultMessage:"必须以 http:// 或 https:// 开头"})}],fieldProps:{type:"url",inputMode:"url",allowClear:!0}})]}),G=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.Z,{width:"md",name:"showFaqs",label:(0,S.jsxs)("span",{children:[u.formatMessage({id:"faq.show.faqs"}),(0,S.jsx)(h.Z,{type:"service",keys:["showFaqs"],live:T,draft:U})]}),fieldProps:{onChange:$}}),(0,S.jsx)(y.Z,{name:"faqKbUid",width:"md",label:(0,S.jsxs)("span",{children:[u.formatMessage({id:"faq.kbase.select",defaultMessage:"选择侧边栏常见问题知识库"}),(0,S.jsx)(h.Z,{type:"service",keys:["faqKbUid"],live:T,draft:U})]}),options:null==W||null===(t=W.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:R(e.name),value:e.uid}})),fieldProps:{onChange:function(e){console.log("TabRight selected kbase:",e),Q(e),M.setFieldValue("faqUids",[]),N(e),null==o||o({faqKbUid:e,faqUids:[]})},allowClear:!0,placeholder:u.formatMessage({id:"choose",defaultMessage:"Choose"})}}),(0,S.jsx)(y.Z,{name:"faqUids",width:"md",label:(0,S.jsxs)("span",{children:[u.formatMessage({id:"menu.kbase.faq"}),(0,S.jsx)(h.Z,{type:"service",keys:["faqUids"],live:T,draft:U})]}),tooltip:u.formatMessage({id:"faq.uids.dependency.tooltip",defaultMessage:"FAQ options depend on the knowledge base selected above."}),extra:u.formatMessage({id:"faq.uids.dependency.note",defaultMessage:"Choose a knowledge base first; switching it refreshes the FAQ list and clears current selections."}),options:null==Z||null===(n=Z.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.map((function(e){return{label:R(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:u.formatMessage({id:"choose",defaultMessage:"Choose"})}})]});return(0,S.jsx)("div",{style:{padding:"0 16px",height:"100%",overflowY:"auto"},children:(0,S.jsx)(v.A,{form:M,onValuesChange:function(e,t){var n={};Object.prototype.hasOwnProperty.call(e,"rightIframeUrl")&&(n.rightIframeUrl=t.rightIframeUrl),Object.prototype.hasOwnProperty.call(e,"faqUids")&&(n.faqUids=t.faqUids),Object.prototype.hasOwnProperty.call(e,"faqKbUid")&&(n.faqKbUid=t.faqKbUid),Object.keys(n).length>0&&(null==o||o(n))},submitter:!1,children:(0,S.jsx)(x.Z,{activeKey:Y,onChange:X,items:[{key:"iframe",label:u.formatMessage({id:"showRightIframe",defaultMessage:"右侧iframe"}),children:_},{key:"faq",label:u.formatMessage({id:"faq.show.faqs",defaultMessage:"常见问题"}),children:G}]})})})}},23312:function(e,t,n){var r=n(73193),a=n.n(r),o=n(45332),i=n.n(o),u=n(74341),s=n(61952),l=n(6844),c=n(30064),d=n(69438),f=n(19736),p=n(9428),g=n(48769),h=n(44194),v=n(31549);t.Z=function(e){var t,n=c.A.useForm(),r=i()(n,1)[0],o=(0,f.useIntl)(),m={width:320},b=(0,s.z)((function(e){return{currentRobotSettings:e.currentRobotSettings,currentAgentSettings:e.currentAgentSettings,currentWorkgroupSettings:e.currentWorkgroupSettings,setCurrentRobotSettings:e.setCurrentRobotSettings,setCurrentAgentSettings:e.setCurrentAgentSettings,setCurrentWorkgroupSettings:e.setCurrentWorkgroupSettings}})),y=b.currentRobotSettings,w=b.currentAgentSettings,k=b.currentWorkgroupSettings,x=b.setCurrentRobotSettings,q=b.setCurrentAgentSettings,S=b.setCurrentWorkgroupSettings,C=void 0!==e.variant,M=C?e:null,j=C?M.variant:(t=e.type)===l.Njn?"agent":t===l._X4?"robot":"workgroup",R=(0,h.useMemo)((function(){var e;return C?null!==(e=null==M?void 0:M.serviceSettings)&&void 0!==e?e:{}:"agent"===j?{live:null==w?void 0:w.serviceSettings,draft:null==w?void 0:w.draftServiceSettings}:"robot"===j?{live:null==y?void 0:y.serviceSettings,draft:null==y?void 0:y.draftServiceSettings}:{live:null==k?void 0:k.serviceSettings,draft:null==k?void 0:k.draftServiceSettings}}),[C,M,j,w,y,k]),T=(0,h.useMemo)((function(){return"agent"!==j?null:C?null!==(e=null==M?void 0:M.agentMeta)&&void 0!==e?e:null:{maxThreadCount:null==w?void 0:w.maxThreadCount,timeoutRemindTime:null==w?void 0:w.timeoutRemindTime};var e}),[j,C,M,w]),U=(0,h.useCallback)((function(e){"agent"===j&&w?q(a()(a()({},w),{},{serviceSettings:a()(a()({},w.serviceSettings),e),draftServiceSettings:a()(a()({},w.draftServiceSettings||{}),e)})):"robot"===j&&y?x(a()(a()({},y),{},{serviceSettings:a()(a()({},y.serviceSettings),e),draftServiceSettings:a()(a()({},y.draftServiceSettings||{}),e)})):"workgroup"===j&&k&&S(a()(a()({},k),{},{serviceSettings:a()(a()({},k.serviceSettings),e),draftServiceSettings:a()(a()({},k.draftServiceSettings||{}),e)}))}),[j,w,y,k,q,x,S]),A=(0,h.useCallback)((function(e){"agent"===j&&w&&q(a()(a()({},w),e))}),[j,w,q]),I=(0,h.useCallback)((function(e){var t;C?null==M||null===(t=M.onServiceSettingsChange)||void 0===t||t.call(M,e):U(e)}),[C,M,U]),F=(0,h.useCallback)((function(e){var t;"agent"===j&&(C?null==M||null===(t=M.onAgentMetaChange)||void 0===t||t.call(M,e):A(e))}),[j,C,M,A]),Z=(0,h.useMemo)((function(){var e,t;return null!==(e=null!==(t=null==R?void 0:R.draft)&&void 0!==t?t:null==R?void 0:R.live)&&void 0!==e?e:void 0}),[R]);return(0,h.useEffect)((function(){r.setFieldsValue({autoCloseMin:null==Z?void 0:Z.autoCloseMin,showLogo:null==Z?void 0:Z.showLogo})}),[r,Z]),(0,h.useEffect)((function(){"agent"===j&&r.setFieldsValue({maxThreadCount:null==T?void 0:T.maxThreadCount,timeoutRemindTime:null==T?void 0:T.timeoutRemindTime})}),[r,j,null==T?void 0:T.maxThreadCount,null==T?void 0:T.timeoutRemindTime]),(0,v.jsxs)(c.A,{form:r,submitter:!1,style:{marginLeft:"20px"},children:["agent"===j&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{width:"md",name:"maxThreadCount",label:o.formatMessage({id:"agent.settings.max.thread"}),tooltip:o.formatMessage({id:"agent.settings.max.thread.tooltip",defaultMessage:"超出此设置数量会自动进入排队队列，需要手动接入"}),min:0,formItemProps:{style:m},fieldProps:{style:{width:"100%"},onChange:function(e){"number"==typeof e&&F({maxThreadCount:e})}}}),(0,v.jsx)(c.A.Item,{label:o.formatMessage({id:"agent.settings.timeout.remind",defaultMessage:"超时提醒时间"}),tooltip:o.formatMessage({id:"agent.settings.timeout.remind.tooltip",defaultMessage:"超过设定时间未回复客户将收到提醒"}),style:m,children:(0,v.jsxs)(p.Z.Compact,{block:!0,children:[(0,v.jsx)(d.Z,{formItemProps:{noStyle:!0},width:"md",name:"timeoutRemindTime",min:1,fieldProps:{style:{width:"100%"},onChange:function(e){"number"==typeof e&&F({timeoutRemindTime:e})}}}),(0,v.jsx)(g.Z,{disabled:!0,value:o.formatMessage({id:"time.minute",defaultMessage:"分钟"}),style:{width:72,textAlign:"center"},readOnly:!0,tabIndex:-1})]})})]}),(0,v.jsx)(d.Z,{width:"md",name:"autoCloseMin",label:(0,v.jsxs)("span",{children:[o.formatMessage({id:"agent.settings.auto.close.time"}),(0,v.jsx)(u.Z,{type:"service",keys:["autoCloseMin"],live:null==R?void 0:R.live,draft:null==R?void 0:R.draft})]}),tooltip:o.formatMessage({id:"agent.settings.auto.close.time.tooltip"}),min:1,formItemProps:{style:m},fieldProps:{style:{width:"100%"},onChange:function(e){"number"==typeof e&&I({autoCloseMin:e})}}})]})}},1725:function(e,t,n){var r=n(45332),a=n.n(r),o=n(74341),i=n(44679),u=n(90104),s=n(30064),l=n(22576),c=n(19736),d=n(44194),f=n(53816),p=n(31549);t.Z=function(e){var t=s.A.useForm(),n=a()(t,1)[0],r=(0,c.useIntl)(),g=(0,i.Z)().translateString,h=e.variant,v=e.serviceSettings,m=e.onServiceSettingsChange,b=(0,d.useState)(!1),y=a()(b,2),w=y[0],k=y[1],x=(0,d.useState)(""),q=a()(x,2),S=q[0],C=q[1],M=(0,d.useState)(""),j=a()(M,2),R=j[0],T=j[1],U=(0,d.useState)(""),A=a()(U,2),I=A[0],F=A[1],Z=(0,d.useRef)({topTip:"",agentCloseTip:"",autoCloseTip:""}),P=(0,d.useMemo)((function(){return null!=v?v:{}}),[v]),O=(0,d.useCallback)((function(e){null==m||m(e)}),[m]),B=(0,d.useMemo)((function(){var e,t;return null!==(e=null!==(t=null==P?void 0:P.draft)&&void 0!==t?t:null==P?void 0:P.live)&&void 0!==e?e:void 0}),[P]);(0,d.useEffect)((function(){var e=!(null==B||!B.showTopTip);w!==e&&(k(e),n.setFieldValue("showTopTip",e));var t=function(e,t){var r=g(t)||"";Z.current[e]!==r&&(Z.current[e]=r,"topTip"===e?C(r):"agentCloseTip"===e?T(r):"autoCloseTip"===e&&F(r),n.setFieldValue(e,r))};B?(t("topTip",B.topTip),t("agentCloseTip",B.agentCloseTip),t("autoCloseTip",B.autoCloseTip)):(t("topTip",""),t("agentCloseTip",""),t("autoCloseTip",""))}),[B,n,w,g,h]);var W=(0,d.useCallback)((function(e){Z.current.topTip=e,C(e),n.setFieldValue("topTip",e),O({topTip:e})}),[n,O]),E=(0,d.useCallback)((function(e){Z.current.agentCloseTip=e,T(e),n.setFieldValue("agentCloseTip",e),O({agentCloseTip:e})}),[n,O]),K=(0,d.useCallback)((function(e){Z.current.autoCloseTip=e,F(e),n.setFieldValue("autoCloseTip",e),O({autoCloseTip:e})}),[n,O]);return(0,p.jsxs)(s.A,{form:n,submitter:!1,style:{marginLeft:"20px"},children:[(0,p.jsx)(l.Z,{name:"showTopTip",width:"md",label:(0,p.jsxs)("span",{children:[r.formatMessage({id:"agent.settings.show.top.tip"}),(0,p.jsx)(o.Z,{type:"service",keys:["showTopTip"],live:null==P?void 0:P.live,draft:null==P?void 0:P.draft})]}),fieldProps:{onChange:function(e){k(e.target.checked),e.target.checked&&C(g(null==B?void 0:B.topTip)),O({showTopTip:e.target.checked})}}}),w&&(0,p.jsx)(s.A.Item,{name:"topTip",label:(0,p.jsxs)("span",{children:[r.formatMessage({id:"agent.settings.top.tip"}),(0,p.jsx)(o.Z,{type:"service",keys:["topTip"],live:null==P?void 0:P.live,draft:null==P?void 0:P.draft})]}),rules:[{required:!0,message:r.formatMessage({id:"agent.settings.top.tip.required"})}],children:(0,p.jsx)(f.Z,{placeholder:r.formatMessage({id:"agent.settings.top.tip.placeholder"}),value:S,toolbarKeys:(0,u.eD)(),style:{height:"150px",width:"600px"},maxLength:200,onChange:function(e){return W(e)}},"topTipEditor")}),"agent"===h&&(0,p.jsx)(s.A.Item,{name:"agentCloseTip",label:(0,p.jsxs)("span",{children:[r.formatMessage({id:"agent.settings.agent.close.tip"}),(0,p.jsx)(o.Z,{type:"service",keys:["agentCloseTip"],live:null==P?void 0:P.live,draft:null==P?void 0:P.draft})]}),tooltip:r.formatMessage({id:"agent.settings.agent.close.tip.tooltip"}),rules:[{required:!0,message:r.formatMessage({id:"agent.settings.agent.close.tip.required"})}],children:(0,p.jsx)(f.Z,{placeholder:r.formatMessage({id:"agent.settings.agent.close.tip.placeholder"}),value:R,toolbarKeys:(0,u.eD)(),style:{height:"150px",width:"600px"},maxLength:200,onChange:function(e){return E(e)}},"agentCloseTipEditor")}),(0,p.jsx)(s.A.Item,{name:"autoCloseTip",label:(0,p.jsxs)("span",{children:[r.formatMessage({id:"agent.settings.auto.close.tip"}),(0,p.jsx)(o.Z,{type:"service",keys:["autoCloseTip"],live:null==P?void 0:P.live,draft:null==P?void 0:P.draft})]}),tooltip:r.formatMessage({id:"agent.settings.auto.close.tip.tooltip"}),rules:[{required:!0,message:r.formatMessage({id:"agent.settings.auto.close.tip.required"})}],children:(0,p.jsx)(f.Z,{placeholder:r.formatMessage({id:"agent.settings.auto.close.tip.placeholder"}),value:I,toolbarKeys:(0,u.eD)(),style:{height:"150px",width:"600px"},maxLength:200,onChange:function(e){return K(e)}},"autoCloseTipEditor")})]})}},42670:function(e,t,n){var r=n(73193),a=n.n(r),o=n(90819),i=n.n(o),u=n(89933),s=n.n(u),l=n(45332),c=n.n(l),d=n(93527),f=n(54166),p=n(14888),g=n(30064),h=n(93312),v=n(68263),m=n(19736),b=n(44194),y=n(98986),w=n(96123),k=n(31167),x=n(44679),q=n(74341),S=n(31549),C=["smile","image","file","rate","leavemsg"];t.Z=function(e){var t=e.serviceSettings,n=e.onServiceSettingsChange,r=(0,m.useIntl)(),o=g.A.useForm(),u=c()(o,1)[0],l=(0,x.Z)().translateString,M=(0,p.u)((function(e){return e.currentOrg})),j=(0,b.useState)("toolbar"),R=c()(j,2),T=R[0],U=R[1],A=(0,b.useState)([]),I=c()(A,2),F=I[0],Z=I[1],P=(0,b.useState)(!1),O=c()(P,2),B=O[0],W=O[1],E=null==t?void 0:t.live,K=null==t?void 0:t.draft,V=(0,b.useMemo)((function(){return null!=K?K:E}),[K,E]),L=(0,b.useCallback)(s()(i()().mark((function e(){var t,n,a,o,s,l,c,p;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=M&&M.uid){e.next=3;break}return Z([]),e.abrupt("return");case 3:return W(!0),t=d.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),e.prev=5,e.next=8,(0,f.qL)({pageNumber:0,pageSize:200,orgUid:M.uid});case 8:200===(n=e.sent).code?(o=((null==n||null===(a=n.data)||void 0===a?void 0:a.content)||[]).filter((function(e){return Boolean(null==e?void 0:e.uid)})),s=o.sort((function(e,t){var n,r;return(null!==(n=null==e?void 0:e.orderIndex)&&void 0!==n?n:0)-(null!==(r=null==t?void 0:t.orderIndex)&&void 0!==r?r:0)})),Z(s),l=new Set(s.map((function(e){return e.uid}))),c=u.getFieldValue("quickButtonUids")||[],(p=c.filter((function(e){return l.has(e)}))).length!==c.length&&u.setFieldValue("quickButtonUids",p)):d.yw.error(n.message||r.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),d.yw.error(r.formatMessage({id:"request.failed",defaultMessage:"Request failed"}));case 15:return e.prev=15,null==t||t(),W(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[5,12,15,19]])}))),[null==M?void 0:M.uid,u,r]);(0,b.useEffect)((function(){L()}),[L]),(0,b.useEffect)((function(){var e,t,n,r,a,o,i,s,l,c;if(V){var d=V.toolbar||{},f=null==V?void 0:V.quickButtons;u.setFieldsValue({smile:null===(e=d.smile)||void 0===e||e,image:null===(t=d.image)||void 0===t||t,file:null===(n=d.file)||void 0===n||n,rate:null===(r=d.rate)||void 0===r||r,leavemsg:null===(a=d.leavemsg)||void 0===a||a,orderSelector:null===(o=d.orderSelector)||void 0===o||o,ticket:null===(i=d.ticket)||void 0===i||i,audio:null===(s=d.audio)||void 0===s||s,video:null===(l=d.video)||void 0===l||l,tel:null===(c=d.tel)||void 0===c||c,toolbarOrder:Array.isArray(d.order)&&d.order.length>0?d.order:[].concat(C),showQuickButtons:V.showQuickButtons,quickButtonUids:Array.isArray(null==V?void 0:V.quickButtonUids)?V.quickButtonUids:Array.isArray(f)?f.map((function(e){return null==e?void 0:e.uid})).filter(Boolean):[]})}}),[V,u]);var Q=(0,b.useCallback)((function(e){u.setFieldValue("showQuickButtons",e),null==n||n({showQuickButtons:e})}),[u,n]),J=(0,b.useMemo)((function(){return null!=F&&F.length?F.filter((function(e){return Boolean(null==e?void 0:e.uid)})).map((function(e){return{label:l(e.title)||e.title||e.uid,value:e.uid}})):[]}),[F,l]),D=(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(y.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,S.jsx)(w.Z,{span:12,children:(0,S.jsx)(h.Z,{name:"smile",label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"chat.toolbar.emoji",defaultMessage:"Emoji"}),(0,S.jsx)(q.Z,{type:"service",keys:["toolbar"],live:E,draft:K})]}),formItemProps:{style:{marginBottom:8}}})}),(0,S.jsx)(w.Z,{span:12,children:(0,S.jsx)(h.Z,{name:"image",label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"chat.toolbar.image",defaultMessage:"Image"}),(0,S.jsx)(q.Z,{type:"service",keys:["toolbar"],live:E,draft:K})]}),formItemProps:{style:{marginBottom:8}}})}),(0,S.jsx)(w.Z,{span:12,children:(0,S.jsx)(h.Z,{name:"file",label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"chat.toolbar.file",defaultMessage:"File"}),(0,S.jsx)(q.Z,{type:"service",keys:["toolbar"],live:E,draft:K})]}),formItemProps:{style:{marginBottom:8}}})}),(0,S.jsx)(w.Z,{span:12,children:(0,S.jsx)(h.Z,{name:"rate",label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"chat.toolbar.rate",defaultMessage:"Rate"}),(0,S.jsx)(q.Z,{type:"service",keys:["toolbar"],live:E,draft:K})]}),formItemProps:{style:{marginBottom:8}}})}),(0,S.jsx)(w.Z,{span:12,children:(0,S.jsx)(h.Z,{name:"leavemsg",label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"chat.toolbar.leaveMsg",defaultMessage:"Leave Msg"}),(0,S.jsx)(q.Z,{type:"service",keys:["toolbar"],live:E,draft:K})]}),formItemProps:{style:{marginBottom:8}}})})]})}),Y=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Z,{label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"faq.show.quick.buttons"}),(0,S.jsx)(q.Z,{type:"service",keys:["showQuickButtons"],live:E,draft:K})]}),name:"showQuickButtons",width:"md",fieldProps:{onChange:Q}}),(0,S.jsx)(v.Z,{name:"quickButtonUids",width:"lg",label:(0,S.jsxs)("span",{children:[r.formatMessage({id:"menu.kbase.quickbutton"}),(0,S.jsx)(q.Z,{type:"service",keys:["quickButtonUids","quickButtons"],live:E,draft:K})]}),options:J,fieldProps:{mode:"multiple",allowClear:!0,showSearch:!0,optionFilterProp:"label",placeholder:(0,S.jsx)(m.FormattedMessage,{id:"choose",defaultMessage:"Choose"}),loading:B}})]});return(0,S.jsx)("div",{style:{padding:"0 16px",height:"100%",overflowY:"auto"},children:(0,S.jsx)(g.A,{form:u,onValuesChange:function(e,t){var r={};["smile","image","file","rate","leavemsg"].forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=t[n])}));var o=Object.prototype.hasOwnProperty.call(e,"toolbarOrder"),i={},u=a()(a()({},(null==E?void 0:E.toolbar)||{}),(null==K?void 0:K.toolbar)||{});Object.keys(r).length>0&&(i.toolbar=a()(a()({},u),r)),o&&(i.toolbar=a()(a()({},i.toolbar||u),{},{order:t.toolbarOrder||[]})),["showQuickButtons","quickButtonUids"].forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=t[n])})),0!==Object.keys(i).length&&(null==n||n(i))},submitter:!1,children:(0,S.jsx)(k.Z,{activeKey:T,onChange:U,items:[{key:"toolbar",label:r.formatMessage({id:"chat.toolbar.settings",defaultMessage:"工具栏设置"}),children:D},{key:"quickButton",label:r.formatMessage({id:"quick.faq.settings",defaultMessage:"快捷按钮设置"}),children:Y}]})})})}},15012:function(e,t,n){n(73193),n(45332),n(89957),n(74341),n(19736),n(44194),n(31549)},53816:function(e,t,n){var r=n(73193),a=n.n(r),o=n(93527),i=n(26710),u=n(65819),s=n(6844),l=n(19736),c=n(53411),d=(n(90744),n(96596)),f=n.n(d),p=n(44194),g=n(31549);t.Z=function(e){var t=e.placeholder,n=e.defaultValue,r=e.value,d=e.style,h=e.toolbarKeys,v=e.maxLength,m=e.onChange,b=e.options,y=(0,l.useIntl)(),w=(0,i.Z)().isDarkMode,k=(0,p.useRef)(null),x=(0,p.useRef)(null),q=(0,p.useRef)(!1),S=(0,p.useRef)(m);(0,p.useEffect)((function(){S.current=m}),[m]);var C=function(e,t,n){"function"!=typeof S.current||q.current||S.current(e,t,n)};return(0,p.useEffect)((function(){if(k.current){if(!x.current){var e=new c.cW(a()(a()({element:k.current,theme:w?"dark":"light",placeholder:t,content:n,toolbarKeys:h},b||{}),{},{image:{uploadUrl:(0,u.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},uploader:function(e,t,n,r){console.log("uploader:",e,t,n,r);var i=f()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,u=new FormData;return u.append("file",e),u.append("fileName",i),u.append("fileType",e.type),u.append("isAvatar","false"),u.append("kbType",s.QPQ),u.append("categoryUid",""),u.append("kbUid",""),u.append("orgUid",""),u.append("client",s.XtJ),new Promise((function(e,r){fetch(t,{method:"POST",headers:a()({Accept:"application/json"},n),body:u}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){o.yw.destroy(),o.yw.success("".concat(i," 上传成功"));var n={errorCode:0,data:{src:t.data.fileUrl,alt:i}};e(n)}else o.yw.destroy(),o.yw.error("".concat(i," 上传失败"))})).catch((function(e){r(e)}))}))}},video:{uploadUrl:(0,u.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},uploader:function(e,t,n,r){console.log("uploader:",e,t,n,r);var i=f()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,u=new FormData;return u.append("file",e),u.append("fileName",i),u.append("fileType",e.type),u.append("isAvatar","false"),u.append("kbType",s.QPQ),u.append("categoryUid",""),u.append("kbUid",""),u.append("client",s.XtJ),new Promise((function(e,r){fetch(t,{method:"POST",headers:a()({Accept:"application/json"},n),body:u}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){o.yw.destroy(),o.yw.success("".concat(i," 上传成功"));var n={errorCode:0,data:{src:t.data.fileUrl,poster:"https://www.weiyuai.cn/avatars/video_poster.png"}};e(n)}else o.yw.destroy(),o.yw.error("".concat(i," 上传失败"))})).catch((function(e){r(e)}))}))}},attachment:{uploadUrl:(0,u.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},uploader:function(e,t,n,r){console.log("uploader:",e,t,n,r);var i=f()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,u=new FormData;return u.append("file",e),u.append("fileName",i),u.append("fileType",e.type),u.append("isAvatar","false"),u.append("kbType",s.QPQ),u.append("categoryUid",""),u.append("kbUid",""),u.append("client",s.XtJ),new Promise((function(e,r){fetch(t,{method:"POST",headers:a()({Accept:"application/json"},n),body:u}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){o.yw.destroy(),o.yw.success("".concat(i," 上传成功"));var n={errorCode:0,data:{href:t.data.fileUrl,fileName:i}};e(n)}else o.yw.destroy(),o.yw.error("".concat(i," 上传失败"))})).catch((function(e){r(e)}))}))}},onChange:function(e){var t=e.getText(),n=t.length,r="number"==typeof v?v:Number.POSITIVE_INFINITY;if(n>r){var a,i;o.yw.warning(y.formatMessage({id:"character.limit.reached"},{limit:r})||"已达到 ".concat(r," 字符限制"));var u=t.substring(0,r);q.current=!0,setTimeout((function(){x.current&&x.current.setContent(u),q.current=!1}),0),C((null===(a=x.current)||void 0===a?void 0:a.getHtml())||"",(null===(i=x.current)||void 0===i?void 0:i.getMarkdown())||"",u)}else C(e.getHtml(),e.getMarkdown(),e.getText())}}));x.current=e}return function(){x.current&&(x.current.destroy(),x.current=null)}}}),[]),(0,p.useEffect)((function(){x.current&&void 0!==r&&r!==x.current.getHtml()&&(q.current=!0,x.current.setContent(r||"",!1),requestAnimationFrame((function(){q.current=!1})))}),[r]),(0,g.jsx)("div",{ref:k,style:a()({height:"100%"},d)})}},74341:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(73193),a=n.n(r),o=n(44194),i=n(1691),u=n(66810),s=n(86222),l=n.n(s),c=n(89957),d=n.n(c),f=["welcomeFaqUids","faqUids","quickButtonUids","guessFaqUids","hotFaqUids","shortcutFaqUids","proactiveFaqUids"],p=["welcomeFaqs","faqs","quickButtons","guessFaqs","hotFaqs","shortcutFaqs","proactiveFaqs"];function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function h(e,t){if(!e)return e;if(!t||0===t.length)return e;var n={};return t.forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])})),n}function v(e){var t=e&&g(e)?a()({},e):{};return p.forEach((function(e){t[e]&&(t[e.replace(/s$/,"Uids")]=function(e){if(Array.isArray(e))return e.map((function(e){return null==e?void 0:e.uid})).filter(Boolean).map(String)}(t[e]),delete t[e])})),f.forEach((function(e){t[e]&&(t[e]=function(e){if(!Array.isArray(e))return e;var t=e.slice();return t.every((function(e){return["string","number","boolean"].includes(d()(e))}))?t.map((function(e){return"string"==typeof e?e:String(e)})).sort():t}(t[e]))})),t}function m(e){return e&&g(e)?a()({},e):{}}function b(e){var t=new WeakSet;return JSON.stringify(function e(n){if(null===n||"object"!==d()(n))return n;if(!t.has(n)){if(t.add(n),Array.isArray(n))return n.map((function(t){return e(t)}));var r,a=Object.keys(n).sort(),o={},i=l()(a);try{for(i.s();!(r=i.n()).done;){var u=r.value;o[u]=e(n[u])}}catch(e){i.e(e)}finally{i.f()}return o}}(e))}function y(e,t){return b(e)===b(t)}var w=n(31549),k=function(e){var t=e.hasDiff,n=e.type,r=void 0===n?"service":n,s=e.live,l=e.draft,c=e.keys,d=e.text,f=void 0===d?"草稿未发布":d,p=e.style;return(0,o.useMemo)((function(){if("boolean"==typeof t)return t;if(!s&&!l)return!1;switch(r){case"service":return function(e,t,n){return!y(h(v(e),n),h(v(t),n))}(s,l,c);case"messageLeave":return function(e,t,n){return!y(h(m(e),n),h(m(t),n))}(s,l,c);default:return function(e,t,n){return!y(h(e||{},n),h(t||{},n))}(s,l,c)}}),[t,r,s,l,c])?(0,w.jsx)(i.Z,{title:"string"==typeof f?f:"草稿与线上不一致",children:(0,w.jsx)(u.Z,{color:"orange",style:a()({marginLeft:8,height:20,lineHeight:"18px"},p),children:"Draft"})}):null}},73268:function(e,t,n){n.d(t,{V:function(){return d}});var r=n(73193),a=n.n(r),o=n(76711),i=n.n(o),u=n(6844),s=n(26557),l=n(26407),c=n(20744),d=(0,s.Ue)()((0,l.mW)((0,l.tJ)((0,c.n)((function(e,t){return{robotResult:{data:{content:[]}},currentRobot:{uid:"",nickname:""},insertRobot:function(t){e((function(e){e.robotResult.data.content.unshift(t)}))},setRobotResult:function(n){e({robotResult:n});var r,a=t().currentRobot;""!==a.uid&&void 0!==a||(null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentRobot:n.data.content[0]})},setCurrentRobot:function(n){var r=t().robotResult.data.content,o=r.findIndex((function(e){return e.uid===n.uid}));if(-1!==o){var u=[].concat(i()(r.slice(0,o)),[n],i()(r.slice(o+1))),s=a()(a()({},t().robotResult),{},{data:{content:u}});e({robotResult:s,currentRobot:n})}else console.warn("Robot with the specified uid not found."),e({currentRobot:n})},deleteCurrentRobot:function(n){var r=t().robotResult.data.content,o=r.findIndex((function(e){return e.uid===n}));-1!==o?e({robotResult:a()(a()({},t().robotResult),{},{data:{content:[].concat(i()(r.slice(0,o)),i()(r.slice(o+1)))}})}):console.warn("Robot not found in cache:",n),t().currentRobot.uid===n&&e({currentRobot:{uid:""}})},deleteRobotCache:function(){return e({},!0)}}})),{name:u.Eis})))},46219:function(e,t,n){n.d(t,{E:function(){return d}});var r=n(73193),a=n.n(r),o=n(76711),i=n.n(o),u=n(6844),s=n(26557),l=n(26407),c=n(20744),d=(0,s.Ue)()((0,l.mW)((0,l.tJ)((0,c.n)((function(e,t){return{agentResult:{data:{content:[]}},currentAgent:{uid:"",orgUid:""},insertAgent:function(t){e((function(e){e.agentResult.data.content.unshift(t)}))},updateAgent:function(t){e((function(e){var n=e.agentResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:console.warn("Agent with uid ".concat(t.uid," not found."))}))},setAgentResult:function(n){var r;(e({agentResult:n}),""===t().currentAgent.uid)&&((null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentAgent:n.data.content[0]}))},setCurrentAgent:function(n){var r=t().agentResult.data.content,o=r.findIndex((function(e){return e.uid===n.uid}));if(-1!==o){var u=[].concat(i()(r.slice(0,o)),[n],i()(r.slice(o+1))),s=a()(a()({},t().agentResult),{},{data:{content:u}});e({agentResult:s,currentAgent:n})}else console.warn("Agent with the specified uid not found."),e({currentAgent:n})},deleteCurrentAgent:function(n){var r=t().agentResult.data.content,o=r.findIndex((function(e){return e.uid===n}));-1!==o?e({agentResult:a()(a()({},t().agentResult),{},{data:{content:[].concat(i()(r.slice(0,o)),i()(r.slice(o+1)))}})}):console.warn("Agent not found in cache:",n),t().currentAgent.uid===n&&e({currentAgent:{uid:"",orgUid:""}})},deleteAgentCache:function(){return e({},!0)}}})),{name:u.zzK})))},61952:function(e,t,n){n.d(t,{z:function(){return u}});var r=n(6844),a=n(26557),o=n(26407),i=n(20744),u=(0,a.Ue)()((0,o.mW)((0,o.tJ)((0,i.n)((function(e){return{currentAgentSettings:null,currentRobotSettings:null,currentWorkgroupSettings:null,setCurrentAgentSettings:function(t){return e({currentAgentSettings:t})},setCurrentRobotSettings:function(t){return e({currentRobotSettings:t})},setCurrentWorkgroupSettings:function(t){return e({currentWorkgroupSettings:t})},clear:function(){return e({currentAgentSettings:null,currentRobotSettings:null,currentWorkgroupSettings:null})}}})),{name:r.rpR})))},14281:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(73193),a=n.n(r),o=n(76711),i=n.n(o),u=n(6844),s=n(26557),l=n(26407),c=n(20744),d=(0,s.Ue)()((0,l.mW)((0,l.tJ)((0,c.n)((function(e,t){return{workgroupResult:{data:{content:[]}},currentWorkgroup:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},insertWorkgroup:function(t){e((function(e){e.workgroupResult.data.content.unshift(t)}))},updateWorkgroup:function(t){e((function(e){var n=e.workgroupResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:console.warn("Workgroup with uid ".concat(t.uid," not found."))}))},deleteWorkgroup:function(t){e((function(e){var n=e.workgroupResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n.splice(r,1):console.warn("Workgroup with uid ".concat(t.uid," not found."))}))},setWorkgroupResult:function(n){var r;(e({workgroupResult:n}),""===t().currentWorkgroup.uid)&&((null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentWorkgroup:n.data.content[0]}))},setCurrentWorkgroup:function(n){var r=t().workgroupResult.data.content,o=r.findIndex((function(e){return e.uid===n.uid}));if(-1!==o){var u=[].concat(i()(r.slice(0,o)),[n],i()(r.slice(o+1))),s=a()(a()({},t().workgroupResult),{},{data:{content:u}});e({workgroupResult:s,currentWorkgroup:n})}else console.warn("Workgroup with the specified uid not found."),e({currentWorkgroup:n})},deleteCurrentWorkgroup:function(n){var r=t().workgroupResult.data.content,o=r.findIndex((function(e){return e.uid===n}));-1!==o?e({workgroupResult:a()(a()({},t().workgroupResult),{},{data:{content:[].concat(i()(r.slice(0,o)),i()(r.slice(o+1)))}})}):console.warn("Workgroup not found in cache:",n),t().currentWorkgroup.uid===n&&e({currentWorkgroup:{uid:"",orgUid:""}})},deleteWorkgroupCache:function(){return e({},!0)}}})),{name:u.b6l})))}}]);