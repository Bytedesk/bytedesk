"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2522],{82863:function(e,t,n){n.d(t,{Jr:function(){return p},LF:function(){return d},Oh:function(){return h},WS:function(){return v}});var r=n(90819),o=n.n(r),a=n(73193),s=n.n(a),i=n(89933),l=n.n(i),u=n(55735),c=n(30921);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/query/org",{method:"GET",params:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/create",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/update",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/model/delete",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},36605:function(e,t,n){n.d(t,{HH:function(){return h},T:function(){return p},fx:function(){return v},mK:function(){return d}});var r=n(90819),o=n.n(r),a=n(73193),s=n.n(a),i=n(89933),l=n.n(i),u=n(55735),c=n(30921);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/provider/query/org",{method:"GET",params:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/provider/create",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/provider/update",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/provider/delete",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},92053:function(e,t,n){n.d(t,{V:function(){return u},c:function(){return d}});var r=n(90819),o=n.n(r),a=n(89933),s=n.n(a),i=n(55735),l=n(30921);function u(){return c.apply(this,arguments)}function c(){return(c=s()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ollama4j/ping",{method:"GET",params:{client:i.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return(f=s()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/ollama4j/local-models",{method:"GET",params:{client:i.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27522:function(e,t,n){n.d(t,{AP:function(){return d},_J:function(){return h},t5:function(){return v},v_:function(){return p}});var r=n(90819),o=n.n(r),a=n(73193),s=n.n(a),i=n(89933),l=n.n(i),u=n(55735),c=n(30921);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/kbase/query/org",{method:"GET",params:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/kbase/create",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/kbase/update",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/kbase/delete",{method:"POST",data:s()(s()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},91903:function(e,t,n){n.r(t),n.d(t,{default:function(){return Oe}});var r=n(75574),o=n(44194),a=n(90819),s=n.n(a),i=n(89933),l=n.n(i),u=n(45332),c=n.n(u),d=n(66310),f=n(53530),p=n(27487),g=n(75365),v=n(9452),m=n(84288),h=n(15722),x=n(82669),b=n(30921),y=n(23864),C=n(40612),w=n(55735),M=n(69169),j=n(4499),k=n(84881),q=n(31549),Z=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,a=(0,b.useIntl)(),s=M.A.useForm(),i=c()(s,1)[0],l=(0,C.u)((function(e){return e.currentOrg}));return(0,o.useEffect)((function(){console.log("RobotForm useEffect"),i.setFieldsValue({type:w.f4h})}),[]),(0,q.jsx)("div",{children:(0,q.jsx)(f.Z,{title:a.formatMessage({id:"pages.robot.new",defaultMessage:"New"}),open:t,forceRender:!0,okText:a.formatMessage({id:"save",defaultMessage:"Save"}),onOk:function(){console.log("handleSaveRobot"),i.validateFields().then((function(e){console.log("handleSaveRobot values:",e);var t={name:e.nickname,nickname:e.nickname,type:e.type,serviceSettings:{showQuickFaqs:!1,quickFaqs:[],showFaqs:!1,faqs:[],showGuessFaqs:!1,guessFaqs:[],showHotFaqs:!1,hotFaqs:[],showShortcutFaqs:!1,shortcutFaqs:[]},orgUid:null==l?void 0:l.uid};console.log("robotObject:",t),r(t)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){n()},children:(0,q.jsxs)(M.A,{form:i,name:"basic",style:{maxWidth:400},submitter:!1,children:[(0,q.jsx)(j.Z,{label:a.formatMessage({id:"nickname",defaultMessage:"Nickname"}),name:"nickname",rules:[{required:!0,message:a.formatMessage({id:"nickname",defaultMessage:"Nickname"})}]}),(0,q.jsx)(k.Z,{label:a.formatMessage({id:"type",defaultMessage:"Type"}),name:["type"],options:[{label:a.formatMessage({id:w.f4h,defaultMessage:"Service"}),value:w.f4h}],rules:[{required:!0,message:a.formatMessage({id:"choose",defaultMessage:"Choose"})}],fieldProps:{placeholder:a.formatMessage({id:"choose",defaultMessage:"Choose"}),onChange:function(e){console.log("onTreeSelectChange:",e)},allowClear:!0}})]})})})},S=n(66916),F=n(86803),T=n(76750),R=function(){var e=(0,y.Z)().isDarkMode,t=(0,b.useIntl)(),n=((0,o.useRef)(!1),(0,T.Z)()),r=n.translateString,a=n.translateStringTranct,i=(0,d.V)((function(e){return{robotResult:e.robotResult,currentRobot:e.currentRobot,insertRobot:e.insertRobot,deleteCurrentRobot:e.deleteCurrentRobot,setRobotResult:e.setRobotResult,setCurrentRobot:e.setCurrentRobot}})),u=i.robotResult,M=i.currentRobot,j=i.insertRobot,k=i.deleteCurrentRobot,R=i.setRobotResult,P=i.setCurrentRobot,U=(0,C.u)((function(e){return e.currentOrg})),A=f.Z.useModal(),V=c()(A,2),O=V[0],L=V[1],I=function(){var e=l()(s()().mark((function e(n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),F.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,S.gf)(n);case 4:r=e.sent,console.log("delete robot response",r),200===r.code?(F.yw.destroy(),F.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),k(n.uid)):(F.yw.destroy(),F.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=l()(s()().mark((function e(){var t,n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.yw.loading("loading"),t={pageNumber:0,pageSize:100,categoryUid:"",level:w.whQ,type:w.f4h,orgUid:null==U?void 0:U.uid},e.next=4,(0,S.p0)(t);case 4:n=e.sent,console.log("queryRobotsByOrg: ",n,t),200===n.code?(F.yw.destroy(),R(n),!M&&n.data.content.length>0&&P(n.data.content[0])):(F.yw.destroy(),F.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){N()}),[]);var E=(0,o.useState)(!1),z=c()(E,2),W=z[0],B=z[1],Q=function(){var e=l()(s()().mark((function e(n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.yw.loading(t.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=3,(0,S.lg)(n);case 3:r=e.sent,console.log("handleSaveRobot response:",r),200===r.code?(F.yw.destroy(),F.yw.success(t.formatMessage({id:"create.success"})),j(r.data),B(!1)):(F.yw.destroy(),B(!1),F.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return t.formatMessage({id:null==e?void 0:e.type,defaultMessage:null==e?void 0:e.type})};return(0,q.jsxs)("div",{children:[(0,q.jsx)("div",{style:{margin:10},children:(0,q.jsxs)(p.Z,{gap:"small",align:"flex-start",children:[(0,q.jsx)(g.ZP,{size:"small",type:"primary",icon:(0,q.jsx)(x.Z,{}),onClick:function(){B(!0)},children:t.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,q.jsx)(g.ZP,{size:"small",onClick:N,children:t.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,q.jsx)(g.ZP,{onClick:function(){return function(e){O.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,q.jsx)(h.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(r(e.nickname),"】？"),onOk:function(){I(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})}(M)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==M?void 0:M.uid),children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),(0,q.jsx)(v.Z,{itemLayout:"horizontal",dataSource:u.data.content,renderItem:function(t,n){return(0,q.jsx)(v.Z.Item,{style:(null==M?void 0:M.uid)===t.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){P(t)},children:(0,q.jsx)(v.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,q.jsx)(m.C,{src:t.avatar}),title:(0,q.jsx)(q.Fragment,{children:a(null==t?void 0:t.nickname)}),description:_(t)})})}}),W&&(0,q.jsx)(Z,{open:W,onClose:function(){B(!1)},onSubmit:Q}),L]})},P=n(8247),U=n(80690),A=n(73193),V=n.n(A),O=n(6631),L=n(59908),I=n(32350),N=n(57178),E=(n(26286),function(){var e,t=M.A.useForm(),n=c()(t,1)[0],r=(0,b.useIntl)(),a=(0,T.Z)().translateString,i=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),u=i.currentRobot,f=i.setCurrentRobot,p=(0,o.useState)(""),v=c()(p,2),h=v[0],x=v[1],y=(0,o.useState)(a(null==u||null===(e=u.serviceSettings)||void 0===e?void 0:e.welcomeTip)||""),C=c()(y,2),w=C[0],k=C[1];(0,o.useEffect)((function(){var e;u&&(n.setFieldValue("nickname",a(null==u?void 0:u.nickname)),k(a(null==u||null===(e=u.serviceSettings)||void 0===e?void 0:e.welcomeTip)),n.setFieldValue("description",a(null==u?void 0:u.description)))}),[u]);var Z=function(){var e=l()(s()().mark((function e(t){var n,o,a,i,l,c,d,p;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),F.yw.loading(r.formatMessage({id:"updating"})),d=V()(V()({},u),{},{serviceSettings:V()(V()({},u.serviceSettings),{},{welcomeTip:w,welcomeFaqUids:null==u||null===(n=u.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),quickFaqUids:null==u||null===(o=u.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==u||null===(a=u.serviceSettings)||void 0===a||null===(a=a.faqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==u||null===(i=u.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==u||null===(l=u.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==u||null===(c=u.serviceSettings)||void 0===c||null===(c=c.shortcutFaqs)||void 0===c?void 0:c.map((function(e){return e.uid}))}),nickname:t.nickname,description:t.description,avatar:h}),console.log("robotObject:",d),e.next=6,(0,S.$l)(d);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(F.yw.success(r.formatMessage({id:"update.success"})),f(p.data)):F.yw.error(p.message),F.yw.destroy();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=l()(s()().mark((function e(t){var n,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),x(t),n=V()(V()({},u),{},{avatar:t}),e.next=5,(0,S.n1)(n);case 5:o=e.sent,console.log("updateAvatar response:",o),200===o.code?(F.yw.success(r.formatMessage({id:"update.success"})),f(o.data)):F.yw.error(o.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){x(null==u?void 0:u.avatar)}),[u]),(0,q.jsxs)(M.A,{form:n,style:{marginLeft:"20px"},onFinish:Z,children:[(0,q.jsx)(N.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:null==e?void 0:e.fileList},label:r.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,q.jsxs)(O.G,{onSuccess:R,onError:function(e){console.log("handleUploadError:",e)},children:[(0,q.jsx)(m.C,{src:h}),(0,q.jsx)(g.ZP,{icon:(0,q.jsx)(L.Z,{}),children:r.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,q.jsx)(j.Z,{width:"md",name:"nickname",label:r.formatMessage({id:"agent.info.nickname"}),rules:[{required:!0,message:r.formatMessage({id:"agent.info.nickname.required"})}]}),(0,q.jsx)(I.Z,{width:"md",name:"description",label:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),rules:[{required:!0,message:r.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})}]})]})}),z=n(27522),W=n(5651),B=function(){var e=(0,b.useIntl)(),t=(0,b.useNavigate)(),n=M.A.useForm(),r=c()(n,1)[0],a=(0,T.Z)().translateString,i=(0,o.useState)(),u=c()(i,2),f=u[0],p=u[1],v=(0,C.u)((function(e){return e.currentOrg})),m=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),h=m.currentRobot,x=m.setCurrentRobot,y=function(){var t=l()(s()().mark((function t(){var n,r;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,type:w.QPQ,orgUid:null==v?void 0:v.uid},t.next=4,(0,z.AP)(n);case 4:r=t.sent,console.log("getKeywordBase response:",n,r),F.yw.destroy(),200===r.code?p(r):F.yw.error(r.message);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){y()}),[]),(0,o.useEffect)((function(){r.setFieldValue("kbUid",null==h?void 0:h.kbUid)}),[h]);var j=function(){var t=l()(s()().mark((function t(n){var r,o,a,i,l,u,c;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onFinish values:",n),u=V()(V()({},h),{},{serviceSettings:V()(V()({},h.serviceSettings),{},{faqUids:null==h||null===(r=h.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==h||null===(o=h.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==h||null===(a=h.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==h||null===(i=h.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==h||null===(l=h.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))}),kbUid:n.kbUid}),console.log("robotObject:",u),t.next=5,(0,S.$l)(u);case 5:c=t.sent,console.log("updateRobot response:",c),200===c.code?(F.yw.destroy(),F.yw.success(e.formatMessage({id:"update.success"})),x(c.data)):(F.yw.destroy(),F.yw.error(c.message));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,q.jsx)("div",{children:(0,q.jsxs)(M.A,{form:r,onFinish:j,children:[(0,q.jsx)(k.Z,{width:"md",name:"kbUid",label:"知识库",options:null==f?void 0:f.data.content.map((function(e){return{value:e.uid,label:a(e.name)}})),fieldProps:{onChange:function(e){console.log("kbUid:",e)}}}),(0,q.jsx)(M.A.Item,{children:(0,q.jsx)(g.ZP,{icon:(0,q.jsx)(W.Z,{}),onClick:function(){t("/kb/llm/data")},children:"添加大模型知识库"},"github")})]})})},Q=n(43705),_=n(71469),K=n(50796),X=n(10154),G=n.n(X),D=n(36605),H=n(82863),$=n(48708),J=n(79907),Y=n(32327),ee=n(62673),te=n(92053),ne=n(40269),re=n(3849),oe=n(73442),ae=Y.Z.Text,se=o.memo((function(e){var t,n=e.visible,r=e.onCancel,a=e.onOk,i=e.initialProvider,u=e.initialModel,d=e.initialModelLabel,f=e.providers,p=e.currentOrgUid,v=e.existingProviderModels,m=void 0===v?{}:v,h=e.onModelsLoaded,x=(0,b.useIntl)(),y=(0,T.Z)().translateString,C=(0,o.useState)(i||""),M=c()(C,2),j=M[0],k=M[1],Z=(0,o.useState)(m),S=c()(Z,2),R=S[0],U=S[1],A=(0,o.useState)(i||""),O=c()(A,2),L=O[0],I=O[1],N=(0,o.useState)(u||""),E=c()(N,2),z=E[0],W=E[1],B=(0,o.useState)(d||""),Q=c()(B,2),_=Q[0],K=Q[1],X=(0,o.useState)(!1),D=c()(X,2),$=D[0],J=D[1];(0,o.useEffect)((function(){I(i),W(u),K(d),k(i)}),[i,u,d,n]),(0,o.useEffect)((function(){if(n&&L&&!R[L]&&!$){J(!0),F.yw.loading({content:x.formatMessage({id:"loading"}),key:"modelLoading"});var e=f.find((function(e){return e.name===L}));e&&("ollama"===e.name?ie():ue(e))}}),[n,L,f]);var se=(0,o.useCallback)((function(){L&&z&&a(L,z,_)}),[L,z,_,a]),ie=function(){var e=l()(s()().mark((function e(){var t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.V)();case 3:200===(t=e.sent).code&&t.data?le():(F.yw.error(t.message),F.yw.destroy("modelLoading"),J(!1)),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to check Ollama status:",e.t0),F.yw.error(x.formatMessage({id:"error"})),F.yw.destroy("modelLoading"),J(!1);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=l()(s()().mark((function e(){var t,n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.c)();case 3:200===(t=e.sent).code?(n=t.data.map((function(e){return{value:e.name,label:e.name,providerName:"ollama"}})),U((function(e){return V()(V()({},e),{},{ollama:n})})),h&&h("ollama",n)):F.yw.error(t.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to fetch local models:",e.t0),F.yw.error(x.formatMessage({id:"error"}));case 11:return e.prev=11,F.yw.destroy("modelLoading"),J(!1),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,7,11,15]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=l()(s()().mark((function e(t){var n,r,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={pageNumber:0,pageSize:50,providerUid:null==t?void 0:t.uid,orgUid:p,level:w.whQ},e.next=4,(0,H.LF)(n);case 4:200===(r=e.sent).code?(o=r.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,providerName:t.name}})),U((function(e){return V()(V()({},e),{},G()({},t.name,o))})),h&&h(t.name,o)):F.yw.error(r.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch models:",e.t0),F.yw.error(x.formatMessage({id:"error"}));case 12:return e.prev=12,F.yw.destroy("modelLoading"),J(!1),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,8,12,16]])})));return function(t){return e.apply(this,arguments)}}(),ce=(0,o.useCallback)((function(e,t){I(e),W(t.value),K(t.label)}),[]),de=(0,o.useCallback)((function(e){if(k(e),I(e),!R[e]&&!$){J(!0),F.yw.loading({content:x.formatMessage({id:"loading"}),key:"modelLoading"});var t=f.find((function(t){return t.name===e}));t&&("ollama"===t.name?ie():ue(t))}}),[f,R,$]),fe=o.memo((function(e){var t=e.model,n=e.providerName;return(0,q.jsxs)(ee.Z,{hoverable:!0,style:{cursor:"pointer",border:z===t.value&&L===n?"2px solid #1890ff":"1px solid #e8e8e8"},onClick:function(){return ce(n,t)},children:[(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,q.jsx)(Y.Z.Title,{level:5,style:{margin:0},children:t.label}),z===t.value&&L===n&&(0,q.jsx)(ne.Z,{status:"processing",text:"已选"})]}),t.description&&(0,q.jsx)(Y.Z.Paragraph,{ellipsis:{rows:2},type:"secondary",children:t.description})]},t.value)}),(function(e,t){return e.model.value===t.model.value&&e.providerName===t.providerName&&(z===e.model.value&&L===e.providerName)===(z===t.model.value&&L===t.providerName)})),pe=(0,o.useMemo)((function(){return f.map((function(e){var t,n;return{key:e.name,label:y(e.nickname),children:(0,q.jsx)("div",{style:{minHeight:"400px",width:"100%"},children:(0,q.jsxs)(re.Z,{direction:"vertical",style:{width:"100%"},children:[$&&j===e.name&&!R[e.name]?(0,q.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:(0,q.jsx)(ae,{type:"secondary",children:"加载模型中..."})}):(!R[e.name]||0===(null===(t=R[e.name])||void 0===t?void 0:t.length))&&(0,q.jsx)(ae,{type:"secondary",children:"暂无可用模型"}),(0,q.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"16px"},children:null===(n=R[e.name])||void 0===n?void 0:n.map((function(t){return(0,q.jsx)(fe,{model:t,providerName:e.name},t.value)}))})]})})}}))}),[f,R,j,$,z,L,y]);return(0,q.jsx)(oe.Z,{title:"选择AI模型",open:n,onClose:r,width:700,destroyOnClose:!1,footer:(0,q.jsxs)("div",{style:{textAlign:"right"},children:[(0,q.jsx)(g.ZP,{onClick:r,style:{marginRight:8},children:"取消"}),(0,q.jsx)(g.ZP,{onClick:se,type:"primary",children:"确定"})]}),children:f.length>0&&(0,q.jsx)(P.Z,{activeKey:j||L||(null===(t=f[0])||void 0===t?void 0:t.name),onChange:de,items:pe,destroyInactiveTabPane:!1})})}),(function(e,t){return e.visible===t.visible&&e.initialProvider===t.initialProvider&&e.initialModel===t.initialModel&&e.initialModelLabel===t.initialModelLabel})),ie=se,le=(Y.Z.Text,function(){var e,t=(0,b.useIntl)(),n=M.A.useForm(),r=c()(n,1)[0],a=(0,T.Z)().translateString,i=(0,C.u)((function(e){return e.currentOrg})),u=(0,o.useState)([]),f=c()(u,2),p=f[0],v=f[1],m=(0,o.useState)({}),h=c()(m,2),x=h[0],y=h[1],j=(0,o.useState)(!1),Z=c()(j,2),R=Z[0],P=Z[1],U=(0,o.useState)(""),A=c()(U,2),O=A[0],L=A[1],N=(0,o.useState)(""),E=c()(N,2),z=E[0],W=E[1],B=(0,o.useState)(""),Q=c()(B,2),_=Q[0],K=Q[1],X=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),ne=X.currentRobot,re=X.setCurrentRobot;(0,o.useEffect)((function(){var e,t,n,o,s,i,l,u,c,d;r.setFieldValue("enabled",null==ne||null===(e=ne.llm)||void 0===e?void 0:e.enabled),r.setFieldValue("topK",null==ne||null===(t=ne.llm)||void 0===t?void 0:t.topK),r.setFieldValue("scoreThreshold",null==ne||null===(n=ne.llm)||void 0===n?void 0:n.scoreThreshold),r.setFieldValue("provider",null==ne||null===(o=ne.llm)||void 0===o?void 0:o.provider),r.setFieldValue("model",null==ne||null===(s=ne.llm)||void 0===s?void 0:s.model),r.setFieldValue("temperature",null==ne||null===(i=ne.llm)||void 0===i?void 0:i.temperature),r.setFieldValue("prompt",a(null==ne||null===(l=ne.llm)||void 0===l?void 0:l.prompt)),r.setFieldValue("contextMsgCount",null==ne||null===(u=ne.llm)||void 0===u?void 0:u.contextMsgCount);var f=(null==ne||null===(c=ne.llm)||void 0===c?void 0:c.provider)||"",p=(null==ne||null===(d=ne.llm)||void 0===d?void 0:d.model)||"";L(f),W(p),p&&!_&&K(p)}),[ne]),(0,o.useEffect)((function(){var e=O,t=z;if(e&&t&&x[e]){var n=x[e].find((function(e){return e.value===t}));n&&K(n.label)}}),[x,O,z]);var oe=function(){var e=l()(s()().mark((function e(){var t,n,r,o,a,l;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={pageNumber:0,pageSize:100,orgUid:null==i?void 0:i.uid,level:w.whQ},e.next=4,(0,D.mK)(t);case 4:n=e.sent,console.log("queryLlmProvidersByOrg: ",n.data,t),200===n.code?(o=n.data.content||[],v(o),(a=null==ne||null===(r=ne.llm)||void 0===r?void 0:r.provider)&&(l=o.find((function(e){return e.name===a})))&&("ollama"===l.name?fe():ge(l))):F.yw.error(n.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch providers:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){oe()}),[]);var ae=(0,o.useCallback)((function(){P(!0)}),[]),se=(0,o.useCallback)((function(){P(!1)}),[]),le=(0,o.useCallback)((function(e,t,n){L(e),W(t),K(n),r.setFieldValue("provider",e),r.setFieldValue("model",t),P(!1)}),[r]),ue=(0,o.useCallback)((function(e,t){y((function(n){return V()(V()({},n),{},G()({},e,t))}))}),[]),ce=function(){var e=l()(s()().mark((function e(n){var r,o,a,i,l,u,c,d;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.yw.loading(t.formatMessage({id:"updating"})),c=V()(V()({},ne),{},{serviceSettings:V()(V()({},ne.serviceSettings),{},{welcomeFaqUids:null==ne||null===(r=ne.serviceSettings)||void 0===r||null===(r=r.welcomeFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null===(o=ne.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==ne||null===(a=ne.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==ne||null===(i=ne.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==ne||null===(l=ne.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==ne||null===(u=ne.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),llm:V()(V()({},ne.llm),{},{enabled:n.enabled,topK:n.topK,scoreThreshold:n.scoreThreshold,provider:n.provider,model:n.model,temperature:n.temperature,prompt:n.prompt,contextMsgCount:n.contextMsgCount})}),e.next=4,(0,S.$l)(c);case 4:200===(d=e.sent).code?(F.yw.destroy(),F.yw.success(t.formatMessage({id:"update.success"})),re(d.data)):(F.yw.destroy(),F.yw.error(d.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=(0,o.useCallback)((function(e,t){return[(0,q.jsx)(g.ZP,{type:"default",onClick:function(){var t;null===(t=e.form)||void 0===t||t.resetFields()},children:"重置"},"reset"),(0,q.jsx)(g.ZP,{type:"primary",onClick:function(){var t;null===(t=e.form)||void 0===t||t.submit()},children:"保存"},"submit")]}),[]),fe=function(){var e=l()(s()().mark((function e(){var n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.V)();case 3:200===(n=e.sent).code&&n.data?pe():F.yw.error(n.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to check Ollama status:",e.t0),F.yw.error(t.formatMessage({id:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=l()(s()().mark((function e(){var n,r,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.c)();case 3:n=e.sent,console.log("getOllamaLocalModels: ",n.data),200===n.code?(r=n.data.map((function(e){return{value:e.name,label:e.name,providerName:"ollama"}})),y((function(e){return V()(V()({},e),{},{ollama:r})})),"ollama"===O&&z&&(o=r.find((function(e){return e.value===z})))&&K(o.label)):F.yw.error(n.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch local models:",e.t0),F.yw.error(t.formatMessage({id:"error"}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=l()(s()().mark((function e(n){var o,a,l,u;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={pageNumber:0,pageSize:50,providerName:null==n?void 0:n.name,orgUid:null==i?void 0:i.uid,level:w.whQ},e.next=4,(0,H.LF)(o);case 4:a=e.sent,console.log("queryLlmModelsByOrg: ",a.data,o),200===a.code?(l=a.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,providerName:n.name}})),y((function(e){return V()(V()({},e),{},G()({},n.name,l))})),n.name===r.getFieldValue("provider")&&z&&(u=l.find((function(e){return e.value===z})))&&K(u.label)):F.yw.error(a.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch models:",e.t0),F.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(M.A,{form:r,size:"large",submitter:{render:de,submitButtonProps:{size:"large",htmlType:"button"}},onFinish:ce,children:[(0,q.jsx)($.Z,{width:"lg",name:"enabled",label:"启用大模型",tooltip:"启用大模型后，将会关闭关键词。用户在发送消息时，将会直接请求大模型。"}),(0,q.jsx)(I.Z,{width:"lg",name:"prompt",label:"提示词",placeholder:"请输入提示词",rules:[{required:!0,message:"请输入提示词"}]}),(0,q.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,q.jsx)(Y.Z.Text,{strong:!0,style:{marginRight:"8px"},children:"AI 模型选择："}),(0,q.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:"8px"},children:(0,q.jsx)(ee.Z,{size:"small",style:{width:"100%",maxWidth:"500px",cursor:"pointer",border:"1px solid #d9d9d9"},onClick:ae,children:O&&z?(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,q.jsxs)("div",{children:[(0,q.jsx)(Y.Z.Text,{type:"secondary",children:"供应商："}),(0,q.jsx)(Y.Z.Text,{strong:!0,children:a((null===(e=p.find((function(e){return e.name===O})))||void 0===e?void 0:e.nickname)||O)}),(0,q.jsx)("br",{}),(0,q.jsx)(Y.Z.Text,{type:"secondary",children:"模型："}),(0,q.jsx)(Y.Z.Text,{strong:!0,children:_||z})]}),(0,q.jsx)(g.ZP,{type:"primary",children:"更换模型"})]}):(0,q.jsx)("div",{style:{textAlign:"center"},children:(0,q.jsx)(g.ZP,{type:"primary",children:"选择AI模型"})})})}),(0,q.jsxs)("div",{style:{display:"none"},children:[(0,q.jsx)(k.Z,{name:"provider",width:"lg"}),(0,q.jsx)(k.Z,{name:"model",width:"lg"})]})]}),(0,q.jsx)(J.Z,{width:"lg",label:"温度",name:"temperature",min:0,max:1,fieldProps:{precision:1,step:.1},rules:[{required:!0,message:"请输入温度"}]}),(0,q.jsx)(J.Z,{width:"lg",label:"上下文消息数",name:"contextMsgCount",min:0,max:10,fieldProps:{precision:0,step:1},rules:[{required:!0,message:"请输入上下文消息数"}]})]}),(0,q.jsx)(ie,{visible:R,onCancel:se,onOk:le,initialProvider:O,initialModel:z,initialModelLabel:_,providers:p,currentOrgUid:null==i?void 0:i.uid,existingProviderModels:x,onModelsLoaded:ue})]})}),ue=(n(40058),n(75808)),ce=n(40836),de=n(98473),fe=n(23635),pe=function(){var e=(0,b.useIntl)(),t=(0,o.useMemo)((function(){return[{key:"kb",label:(0,q.jsx)(b.FormattedMessage,{id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,q.jsx)(B,{})},{key:"faq",label:(0,q.jsx)(b.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,q.jsx)(Q.Z,{type:w._X4})},{key:"quickFaqs",label:(0,q.jsx)(b.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"Quick Button"}),children:(0,q.jsx)(_.Z,{type:w._X4})},{key:"llm",label:(0,q.jsx)(b.FormattedMessage,{id:"llm",defaultMessage:"LLM"}),children:(0,q.jsx)(le,{})},{key:"rate",label:(0,q.jsx)(b.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,q.jsx)(fe.Z,{type:w._X4})},{key:"right",label:(0,q.jsx)(b.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,q.jsx)(ce.Z,{type:w._X4})},{key:"popup",label:(0,q.jsx)(b.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,q.jsx)(ue.Z,{type:w._X4})},{key:"trigger",label:(0,q.jsx)(b.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,q.jsx)(de.Z,{type:w._X4})},{key:"inputassociation",label:(0,q.jsx)(b.FormattedMessage,{id:"inputassociation",defaultMessage:"Input Association"}),children:(0,q.jsx)(K.Z,{type:w._X4})}]}),[e]);return(0,q.jsx)(P.Z,{tabPosition:"left",items:t})},ge=n(14238),ve=n(87491),me=n(88996),he=n(80601),xe=n(88201),be=n(5602),ye=n(59485),Ce=n(38775),we=n(80556),Me=n(40074),je=n(58791),ke=n(61353),qe=n(16852),Ze=n(40439),Se=n(59145),Fe=n(58087),Te=n(70185),Re=function(){var e=(0,b.useIntl)(),t=(0,o.useContext)(Te.I).isDarkMode,n=(0,d.V)((function(e){return e.currentRobot})),r=(0,C.u)((function(e){return e.currentOrg})),a=(0,o.useState)(!1),i=c()(a,2),u=i[0],f=i[1],p=(0,o.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),v=c()(p,2),m=v[0],h=v[1],x=function(){var t=l()(s()().mark((function t(){var o,a,i,l,u,c,d,p,g,v,m,x,b;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),f(!0),F.yw.info(e.formatMessage({id:"refresh",defaultMessage:"正在刷新队列数据..."})),t.prev=3,o={pageNumber:0,pageSize:100,agentUid:null==n?void 0:n.uid,orgUid:null==r?void 0:r.uid},t.next=7,(0,ve.Wq)(o);case 7:a=t.sent,console.log("queryQueuesByOrg response:",a.data),200==(null==a?void 0:a.code)?(F.yw.destroy(),null!=a&&null!==(i=a.data)&&void 0!==i&&i.content&&a.data.content.length>0?(b=a.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),h({totalCount:null!==(l=b.totalCount)&&void 0!==l?l:0,queuingCount:null!==(u=b.queuingCount)&&void 0!==u?u:0,chattingCount:null!==(c=b.chattingCount)&&void 0!==c?c:0,offlineCount:null!==(d=b.offlineCount)&&void 0!==d?d:0,closedCount:null!==(p=b.closedCount)&&void 0!==p?p:0,leaveMsgCount:null!==(g=b.leaveMsgCount)&&void 0!==g?g:0,robotToAgentCount:null!==(v=b.robotToAgentCount)&&void 0!==v?v:0,avgWaitTime:null!==(m=b.avgWaitTime)&&void 0!==m?m:0,avgResolveTime:null!==(x=b.avgResolveTime)&&void 0!==x?x:0})):h({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):F.yw.error(null==a?void 0:a.message);case 10:return t.prev=10,f(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){x()}),[n]);var y={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},w={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,q.jsxs)("div",{style:{padding:"4px"},children:[(0,q.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,q.jsx)(me.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"刷新数据"}),children:(0,q.jsx)(g.ZP,{type:"primary",icon:(0,q.jsx)(we.Z,{}),loading:u,onClick:x,size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})})})}),(0,q.jsxs)(he.Z,{spinning:u,children:[(0,q.jsxs)(xe.Z,{gutter:[16,16],children:[(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.totalCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"总会话"}),value:m.totalCount,prefix:(0,q.jsx)(Me.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.queuingCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"排队中"}),value:m.queuingCount,prefix:(0,q.jsx)(je.Z,{}),valueStyle:{color:"#fa8c16"}})})}),(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.chattingCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"会话中"}),value:m.chattingCount,prefix:(0,q.jsx)(ke.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.offlineCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"离线留言"}),value:m.offlineCount,prefix:(0,q.jsx)(qe.Z,{}),valueStyle:{color:"#8c8c8c"}})})}),(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.closedCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"已关闭"}),value:m.closedCount,prefix:(0,q.jsx)(Ze.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.leaveMsgCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"留言数"}),value:m.leaveMsgCount,prefix:(0,q.jsx)(Se.Z,{}),valueStyle:{color:w.leaveMsgCount.valueColor}})})})]}),(0,q.jsx)(Ce.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"更多统计"})}),(0,q.jsx)(xe.Z,{gutter:[16,16],children:(0,q.jsx)(be.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,q.jsx)(ee.Z,{style:V()(V()({},y),{},{backgroundColor:w.robotToAgentCount.bg}),hoverable:!0,children:(0,q.jsx)(ye.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"转人工数"}),value:m.robotToAgentCount,prefix:(0,q.jsx)(Fe.Z,{}),valueStyle:{color:w.robotToAgentCount.valueColor}})})})})]})]})},Pe=function(){var e=(0,b.useIntl)(),t=(0,o.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,q.jsx)(E,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,q.jsx)(ge.Z,{type:w._X4})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,q.jsx)(pe,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,q.jsx)(Re,{})},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,q.jsx)(U.Z,{type:w._X4})}]}),[e]);return(0,q.jsx)(P.Z,{defaultActiveKey:"basic",items:t})},Ue=n(96865),Ae=r.Z.Sider,Ve=r.Z.Content,Oe=function(){var e=(0,Ue.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,o=e.contentStyle;return(0,q.jsxs)(r.Z,{children:[(0,q.jsx)(Ae,{width:n,style:t,children:(0,q.jsx)(R,{})}),(0,q.jsx)(r.Z,{children:(0,q.jsx)(Ve,{style:o,children:(0,q.jsx)(Pe,{})})})]})}}}]);