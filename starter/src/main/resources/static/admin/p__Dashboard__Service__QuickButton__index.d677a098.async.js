"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7646],{93689:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var u=n.forwardRef(i)},40439:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var u=n.forwardRef(i)},42085:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var u=n.forwardRef(i)},2484:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var u=n.forwardRef(i)},48058:function(e,t,a){var r=a(94433),n=a(38956),s=a(44194),o=a(9953),i=a(31549),u=["fieldProps","min","proFieldProps","max"],d=function(e,t){var a=e.fieldProps,s=e.min,d=e.proFieldProps,l=e.max,c=(0,n.Z)(e,u);return(0,i.jsx)(o.Z,(0,r.Z)({valueType:"digit",fieldProps:(0,r.Z)({min:s,max:l},a),ref:t,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:d},c))},l=s.forwardRef(d);t.Z=l},59005:function(e,t,a){var r=a(94433),n=a(38956),s=a(57343),o=a(44194),i=a(45441),u=a(9953),d=a(31549),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var a=e.fieldProps,c=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,h=e.request,v=e.showSearch,b=e.options,x=(0,n.Z)(e,l),M=(0,o.useContext)(i.Z);return(0,d.jsx)(u.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:h,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:b,mode:g,showSearch:v,getPopupContainer:M.getPopupContainer},a),ref:t,proFieldProps:f},x),{},{children:c}))},f=o.forwardRef((function(e,t){var a=e.fieldProps,l=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,h=e.request,v=e.options,b=(0,n.Z)(e,c),x=(0,r.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},a),M=(0,o.useContext)(i.Z);return(0,d.jsx)(u.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:h,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:M.getPopupContainer},x),ref:t,proFieldProps:f},b),{},{children:l}))})),g=o.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",t.Z=g},50628:function(e,t,a){var r=a(94433),n=a(38956),s=a(44194),o=a(9953),i=a(31549),u=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],d=s.forwardRef((function(e,t){var a=e.fieldProps,s=e.unCheckedChildren,d=e.checkedChildren,l=e.proFieldProps,c=(0,n.Z)(e,u);return(0,i.jsx)(o.Z,(0,r.Z)({valueType:"switch",fieldProps:(0,r.Z)({unCheckedChildren:s,checkedChildren:d},a),ref:t,valuePropName:"checked",proFieldProps:l,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},c))}));t.Z=d},86702:function(e,t,a){var r=a(32906),n=a(94433),s=a(38956),o=a(81424),i=a(69705),u=a(65641),d=a(34573),l=a(44194),c=a(9953),p=a(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",h=function(e){var t=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),a=(0,r.Z)(t,2),s=a[0],d=a[1];return(0,p.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var a,r=t.getFieldValue(e.name||[]);return(0,p.jsx)(u.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return d(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(a=e.statusRender)||void 0===a?void 0:a.call(e,r),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:s,children:e.children}))}})},v=function(e){var t=e.fieldProps,a=e.proFieldProps,r=(0,s.Z)(e,f);return(0,p.jsx)(c.Z,(0,n.Z)({valueType:m,fieldProps:t,filedConfig:{valueType:m},proFieldProps:a},r))};v.Password=function(e){var t=e.fieldProps,a=e.proFieldProps,o=(0,s.Z)(e,g),i=(0,l.useState)(!1),u=(0,r.Z)(i,2),f=u[0],v=u[1];return null!=t&&t.statusRender&&o.name?(0,p.jsx)(h,{name:o.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:v,children:(0,p.jsx)("div",{children:(0,p.jsx)(c.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,d.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var a;null==t||null===(a=t.onBlur)||void 0===a||a.call(t,e),v(!1)},onClick:function(e){var a;null==t||null===(a=t.onClick)||void 0===a||a.call(t,e),v(!0)}}),proFieldProps:a,filedConfig:{valueType:m}},o))})}):(0,p.jsx)(c.Z,(0,n.Z)({valueType:"password",fieldProps:t,proFieldProps:a,filedConfig:{valueType:m}},o))},v.displayName="ProFormComponent",t.Z=v},84553:function(e,t,a){a.d(t,{Bv:function(){return S},L0:function(){return P},QB:function(){return y},RF:function(){return q},YO:function(){return w},YQ:function(){return C},Yg:function(){return v},kh:function(){return f},kv:function(){return x},pf:function(){return c},y:function(){return m}});var r=a(90819),n=a.n(r),s=a(73193),o=a.n(s),i=a(89933),u=a.n(i),d=a(94976),l=a(4628);function c(e){return p.apply(this,arguments)}function p(){return(p=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/query/org",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/create",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/update",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/delete",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return M.apply(this,arguments)}function M(){return(M=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/enable",{method:"POST",data:{uid:t.uid,enabled:t.enabled,channel:d.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/deleteAll",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return j.apply(this,arguments)}function j(){return(j=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/updateIndex",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return F.apply(this,arguments)}function F(){return(F=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/updateVectorIndex",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return Z.apply(this,arguments)}function Z(){return(Z=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/updateAllIndex",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return U.apply(this,arguments)}function U(){return(U=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/faq/updateAllVectorIndex",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return T.apply(this,arguments)}function T(){return(T=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/robot/agent/text/faq-similar-questions",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},13845:function(e,t,a){a.d(t,{AP:function(){return c},_J:function(){return v},t5:function(){return m},v_:function(){return f}});var r=a(90819),n=a.n(r),s=a(73193),o=a.n(s),i=a(89933),u=a.n(i),d=a(94976),l=a(4628);function c(e){return p.apply(this,arguments)}function p(){return(p=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/kbase/query/org",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/kbase/create",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/kbase/update",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/kbase/delete",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},25552:function(e,t,a){a.d(t,{Ck:function(){return v},dv:function(){return y},pw:function(){return x},qL:function(){return f},z4:function(){return m}});var r=a(90819),n=a.n(r),s=a(89933),o=a.n(s),i=a(73193),u=a.n(i),d=a(94976),l=a(4628),c="/api/v1/quickbutton";function p(e){var t;return u()(u()({},e),{},{channel:null!==(t=null==e?void 0:e.channel)&&void 0!==t?t:d.XtJ})}function f(e){return g.apply(this,arguments)}function g(){return(g=o()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("".concat(c,"/query/org"),{method:"GET",params:p(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=o()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("".concat(c,"/create"),{method:"POST",data:p(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=o()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("".concat(c,"/update"),{method:"POST",data:p(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return M.apply(this,arguments)}function M(){return(M=o()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("".concat(c,"/delete"),{method:"POST",data:p(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=o()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("".concat(c,"/enable"),{method:"POST",data:p(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},82961:function(e,t,a){a.d(t,{dI:function(){return f},xg:function(){return c}});var r=a(90819),n=a.n(r),s=a(73193),o=a.n(s),i=a(89933),u=a.n(i),d=a(94976),l=a(4628);function c(e){return p.apply(this,arguments)}function p(){return(p=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/form/query/org",{method:"GET",params:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/form/delete",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21850:function(e,t,a){var r=a(25553);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},74001:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ie}});var r=a(76711),n=a.n(r),s=a(21850),o=a(44194),i=a(6853),u=a(21600),d=a(4628),l=a(84176),c=a.n(l),p=a(73193),f=a.n(p),g=a(86222),m=a.n(g),h=a(90819),v=a.n(h),b=a(89933),x=a.n(b),M=a(45332),y=a.n(M),k=a(89957),q=a.n(k),j=a(43388),w=a(25552),F=a(88722),P=a(74171),Z=a(34512),S=a(27729),U=a(30310),C=a(92351),T=a(12461),A=a(69533),E=a(28508),O=a(93689),R=a(40439),D=a(54881),V=a(10162),Q=a(2484),I=a(94976),N="/api/v1/goods";function B(e){var t;return f()(f()({},e),{},{channel:null!==(t=null==e?void 0:e.channel)&&void 0!==t?t:I.XtJ})}function L(e){return z.apply(this,arguments)}function z(){return(z=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(N,"/query/org"),{method:"GET",params:B(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return G.apply(this,arguments)}function G(){return(G=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(N,"/create"),{method:"POST",data:B(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(N,"/update"),{method:"POST",data:B(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return H.apply(this,arguments)}function H(){return(H=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(N,"/delete"),{method:"POST",data:B(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W="/api/v1/order";function _(e){var t;return f()(f()({},e),{},{channel:null!==(t=null==e?void 0:e.channel)&&void 0!==t?t:I.XtJ})}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(W,"/query/org"),{method:"GET",params:_(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(W,"/create"),{method:"POST",data:_(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(W,"/update"),{method:"POST",data:_(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return oe.apply(this,arguments)}function oe(){return(oe=x()(v()().mark((function e(t){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("".concat(W,"/delete"),{method:"POST",data:_(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=a(84553),ue=a(13845),de=a(82961),le=a(58620),ce=a(99036),pe=a(59005),fe=a(86702),ge=a(60241),me=a(50628),he=a(42085),ve=a(47710),be=a(30857),xe=a(96596),Me=a.n(xe),ye=a(31549),ke=ve.Z.Dragger,qe=[I.V1U,I.mef,I.ICe,I.Qm,I.Qn,I.Yu1,I.tVi,I.JpA,I.QMK,I.JZh,I.DCc,I.kDq],je=[I.V1U,I.mef,I.ICe,I.Qm,I.Qn,I.Yu1,I.tVi,I.JpA,I.QMK,I.JZh],we=je[0]||I.V1U,Fe=function(e){var t=e.open,a=e.isEdit,r=e.quickbutton,s=e.onClose,i=e.onSubmit,u=ce.A.useForm(),l=y()(u,1)[0],c=(0,d.useIntl)(),p=(0,o.useState)(we),g=y()(p,2),m=g[0],h=g[1],b=(0,P.u)((function(e){return e.currentOrg})),M=(0,F.Z)().translateString,k=(0,o.useState)(".png,.jpg,.jpeg,.gif,.bmp"),w=y()(k,2),Z=w[0],S=w[1],C=(0,o.useState)([]),T=y()(C,2),E=T[0],O=T[1],R=(0,o.useState)([]),D=y()(R,2),V=D[0],Q=D[1],N=(0,o.useState)([]),B=y()(N,2),z=B[0],J=B[1],G=(0,o.useState)([]),X=y()(G,2),Y=X[0],K=X[1],H=(0,o.useState)([]),W=y()(H,2),_=W[0],ee=W[1],te=(0,o.useState)(!1),ae=y()(te,2),re=ae[0],ne=ae[1],se=(0,o.useState)(!1),oe=y()(se,2),ve=oe[0],xe=oe[1],Fe=(0,o.useState)(!1),Pe=y()(Fe,2),Ze=Pe[0],Se=Pe[1],Ue=(0,o.useState)(!1),Ce=y()(Ue,2),Te=Ce[0],Ae=Ce[1],Ee=(0,o.useState)(!1),Oe=y()(Ee,2),Re=Oe[0],De=Oe[1],Ve=(0,o.useState)(),Qe=y()(Ve,2),Ie=Qe[0],Ne=Qe[1],Be=(0,o.useMemo)((function(){return function(e){if(!e)return{};try{var t=JSON.parse(e);return t&&"object"===q()(t)?t:{}}catch(e){return{}}}(null==r?void 0:r.content)}),[null==r?void 0:r.content]),Le=(0,o.useMemo)((function(){return qe.map((function(e){return{value:e,label:c.formatMessage({id:"quickbutton.type.".concat(e),defaultMessage:e}),disabled:!je.includes(e)&&(null==r?void 0:r.type)!==e}}))}),[c,null==r?void 0:r.type]),ze=(0,o.useCallback)((function(){var e,a,n,s,o,i,u,d,c,p,f;if(!t)return l.resetFields(),h(we),Ne(void 0),O([]),Q([]),J([]),K([]),void ee([]);var g=(null==r?void 0:r.type)||we;h(g);var m=g===I.mef?null==r?void 0:r.kbUid:void 0;if(Ne(m),g!==I.mef)Q([]);else{var v=Be.faqUid;Q(v?[{uid:v,question:Be.faqQuestion,answer:Be.faqAnswer}]:[])}var b=Be;l.setFieldsValue({title:null==r?void 0:r.title,subtitle:null==r?void 0:r.subtitle,description:null==r?void 0:r.description,icon:null==r?void 0:r.icon,color:null==r?void 0:r.color,badge:null==r?void 0:r.badge,code:null==r?void 0:r.code,imageUrl:null==r?void 0:r.imageUrl,content:null==r?void 0:r.content,type:g,orderIndex:null!==(e=null==r?void 0:r.orderIndex)&&void 0!==e?e:0,highlight:null!==(a=null==r?void 0:r.highlight)&&void 0!==a&&a,enabled:null===(n=null==r?void 0:r.enabled)||void 0===n||n,kbUid:m,payloadFaqUid:b.faqUid,payloadFaqQuestion:b.faqQuestion,payloadFaqAnswer:b.faqAnswer,payloadUrl:b.url,payloadUrlTarget:null!==(s=null!==(o=b.target)&&void 0!==o?o:b.urlTarget)&&void 0!==s?s:"_blank",payloadFormUid:b.formUid,payloadFormSchema:b.formSchema,payloadImageUrl:null!==(i=b.url)&&void 0!==i?i:b.imageUrl,payloadFileUrl:null!==(u=b.url)&&void 0!==u?u:b.fileUrl,payloadAudioUrl:null!==(d=b.url)&&void 0!==d?d:b.audioUrl,payloadVideoUrl:null!==(c=b.url)&&void 0!==c?c:b.videoUrl,payloadPhoneNumber:b.phoneNumber,payloadEmailAddress:b.emailAddress,payloadEmailSubject:b.emailSubject,payloadEmailBody:b.emailBody,payloadWechatNumber:b.wechatNumber,payloadGoodsUid:null!==(p=b.uid)&&void 0!==p?p:b.goodsUid,payloadOrderUid:null!==(f=b.uid)&&void 0!==f?f:b.orderUid})}),[Be,l,t,r]);(0,o.useEffect)((function(){ze()}),[ze]),(0,o.useEffect)((function(){m===I.Qm?S(".png,.jpg,.jpeg,.gif,.bmp"):m===I.tVi?S(".mp4,.avi,.mov,.wmv"):m===I.Yu1?S(".mp3,.wav,.flac"):m===I.Qn&&S(".doc,.xls,.ppt,.pdf,.docx,.txt,.csv,.xlsx,.rtf,.zip,.7z,.tar,.gz,.rar,.iso")}),[m]);var Je=(0,o.useCallback)(x()(v()().mark((function e(){var t,a,r,s;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=b&&b.uid){e.next=3;break}return O([]),e.abrupt("return");case 3:return ne(!0),e.prev=4,e.next=7,(0,ue.AP)({pageNumber:0,pageSize:100,orgUid:b.uid,type:I.QPQ});case 7:200===(t=e.sent).code?(r=n()((null==t||null===(a=t.data)||void 0===a?void 0:a.content)||[]),(s=l.getFieldValue("kbUid"))&&!r.some((function(e){return(null==e?void 0:e.uid)===s}))&&r.push({uid:s,name:c.formatMessage({id:"quickbutton.kbase.missingOption",defaultMessage:"已删除知识库 ({uid})"},{uid:s})}),O(r)):j.yw.error(t.message||c.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("QuickButtonDrawer.loadKbases",e.t0),j.yw.error(c.formatMessage({id:"quickbutton.kbase.loadError",defaultMessage:"知识库加载失败"}));case 15:return e.prev=15,ne(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])}))),[null==b?void 0:b.uid,l,c]),Ge=(0,o.useCallback)(function(){var e=x()(v()().mark((function e(t){var a,r,n,s;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=b&&b.uid){e.next=3;break}return Q([]),e.abrupt("return");case 3:return xe(!0),e.prev=4,e.next=7,(0,ie.pf)({pageNumber:0,pageSize:200,orgUid:b.uid,kbUid:t});case 7:200===(a=e.sent).code?(n=((null==a||null===(r=a.data)||void 0===r?void 0:r.content)||[]).filter((function(e){return Boolean(null==e?void 0:e.uid)})).map((function(e){return{uid:e.uid,question:e.question,answer:e.answer}})),(s=l.getFieldValue("payloadFaqUid"))&&!n.some((function(e){return e.uid===s}))&&n.push({uid:s,question:Be.faqQuestion||c.formatMessage({id:"quickbutton.faq.missingOption",defaultMessage:"已删除常见问题 ({uid})"},{uid:s}),answer:Be.faqAnswer}),Q(n)):j.yw.error(a.message||c.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("QuickButtonDrawer.loadFaqs",e.t0),j.yw.error(c.formatMessage({id:"quickbutton.faq.loadError",defaultMessage:"常见问题加载失败"}));case 15:return e.prev=15,xe(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),[null==b?void 0:b.uid,Be.faqAnswer,Be.faqQuestion,l,c]);(0,o.useEffect)((function(){t&&m===I.mef&&Je()}),[Je,t,m]);var Xe=(0,o.useCallback)(x()(v()().mark((function e(){var t,a,r,s;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=b&&b.uid){e.next=3;break}return J([]),e.abrupt("return");case 3:return Se(!0),e.prev=4,e.next=7,(0,de.xg)({pageNumber:0,pageSize:200,orgUid:b.uid});case 7:200===(t=e.sent).code?(r=n()((null==t||null===(a=t.data)||void 0===a?void 0:a.content)||[]),(s=l.getFieldValue("payloadFormUid"))&&!r.some((function(e){return(null==e?void 0:e.uid)===s}))&&r.push({uid:s,name:c.formatMessage({id:"quickbutton.form.missingOption",defaultMessage:"已删除表单 ({uid})"},{uid:s}),status:"PUBLISHED",schema:l.getFieldValue("payloadFormSchema")}),J(r)):j.yw.error(t.message||c.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("QuickButtonDrawer.loadForms",e.t0),j.yw.error(c.formatMessage({id:"quickbutton.form.loadError",defaultMessage:"表单加载失败"}));case 15:return e.prev=15,Se(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])}))),[null==b?void 0:b.uid,l,c]),Ye=(0,o.useCallback)(x()(v()().mark((function e(){var t,a,r,s;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=b&&b.uid){e.next=3;break}return K([]),e.abrupt("return");case 3:return Ae(!0),e.prev=4,e.next=7,L({pageNumber:0,pageSize:200,orgUid:b.uid});case 7:200===(t=e.sent).code?(r=n()((null==t||null===(a=t.data)||void 0===a?void 0:a.content)||[]),(s=l.getFieldValue("payloadGoodsUid"))&&!r.some((function(e){return(null==e?void 0:e.uid)===s}))&&r.push({uid:s,title:c.formatMessage({id:"quickbutton.goods.missingOption",defaultMessage:"已删除商品 ({uid})"},{uid:s})}),K(r.map((function(e){return{uid:e.uid,title:e.title}})))):j.yw.error(t.message||c.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("QuickButtonDrawer.loadGoods",e.t0),j.yw.error(c.formatMessage({id:"quickbutton.goods.loadError",defaultMessage:"商品加载失败"}));case 15:return e.prev=15,Ae(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])}))),[null==b?void 0:b.uid,l,c]),Ke=(0,o.useCallback)(x()(v()().mark((function e(){var t,a,r,s;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=b&&b.uid){e.next=3;break}return ee([]),e.abrupt("return");case 3:return De(!0),e.prev=4,e.next=7,$({pageNumber:0,pageSize:200,orgUid:b.uid});case 7:200===(t=e.sent).code?(r=n()((null==t||null===(a=t.data)||void 0===a?void 0:a.content)||[]),(s=l.getFieldValue("payloadOrderUid"))&&!r.some((function(e){return(null==e?void 0:e.uid)===s}))&&r.push({uid:s,title:c.formatMessage({id:"quickbutton.order.missingOption",defaultMessage:"已删除订单 ({uid})"},{uid:s})}),ee(r.map((function(e){return{uid:e.uid,title:e.title}})))):j.yw.error(t.message||c.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("QuickButtonDrawer.loadOrders",e.t0),j.yw.error(c.formatMessage({id:"quickbutton.order.loadError",defaultMessage:"订单加载失败"}));case 15:return e.prev=15,De(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])}))),[null==b?void 0:b.uid,l,c]);(0,o.useEffect)((function(){t&&m===I.mef&&(Ie?Ge(Ie):Q([]))}),[Ge,t,Ie,m]);var He={name:"file",accept:Z,action:(0,le.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(I.LA8)},data:function(e){return function(e){return{fileName:Me()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,fileType:e.type,isAvatar:"false",kbType:I.YjS,categoryUid:"",kbUid:void 0,channel:I.XtJ}}(e)},showUploadList:!1,onChange:function(e){if("uploading"===e.file.status&&j.yw.loading(c.formatMessage({id:"quickbutton.upload.uploading",defaultMessage:"{name} 上传中"},{name:e.file.name})),"done"===e.file.status){var t=e.file.response;if(200===(null==t?void 0:t.code)){var a,r=null==t||null===(a=t.data)||void 0===a?void 0:a.fileUrl;if(r)switch(m){case I.Qm:l.setFieldValue("payloadImageUrl",r);break;case I.Qn:l.setFieldValue("payloadFileUrl",r);break;case I.Yu1:l.setFieldValue("payloadAudioUrl",r);break;case I.tVi:l.setFieldValue("payloadVideoUrl",r)}j.yw.destroy(),j.yw.success(c.formatMessage({id:"quickbutton.upload.success",defaultMessage:"{name} 上传成功"},{name:e.file.name}))}else j.yw.destroy(),j.yw.error(c.formatMessage({id:"quickbutton.upload.fail",defaultMessage:"{name} 上传失败"},{name:e.file.name}))}else"error"===e.file.status&&j.yw.error(c.formatMessage({id:"quickbutton.upload.fail",defaultMessage:"{name} 上传失败"},{name:e.file.name}))}};return(0,ye.jsx)(be.Z,{title:a?c.formatMessage({id:"quickbutton.drawer.title.edit",defaultMessage:"Edit Quick Button"}):c.formatMessage({id:"quickbutton.drawer.title.create",defaultMessage:"Create Quick Button"}),width:720,open:t,onClose:s,destroyOnHidden:!0,extra:(0,ye.jsxs)(U.Z,{children:[(0,ye.jsx)(A.ZP,{onClick:s,children:(0,ye.jsx)(ye.Fragment,{children:c.formatMessage({id:"pages.common.cancel",defaultMessage:"Cancel"})})}),(0,ye.jsx)(A.ZP,{type:"primary",onClick:function(){l.validateFields().then((function(e){var t,a,n,s=(e.title||"").trim();if(s){var o,u=e.payloadFaqUid&&m===I.mef?V.find((function(t){return t.uid===e.payloadFaqUid}))||(Be.faqUid===e.payloadFaqUid?{question:Be.faqQuestion,answer:Be.faqAnswer}:void 0):void 0;switch(m){case I.mef:o={faqUid:e.payloadFaqUid,faqQuestion:null==u?void 0:u.question,faqAnswer:null==u?void 0:u.answer};break;case I.V1U:o={url:e.payloadUrl,target:e.payloadUrlTarget||"_blank"};break;case I.ICe:o={formUid:e.payloadFormUid,formSchema:e.payloadFormSchema};break;case I.Qm:o={url:e.payloadImageUrl};break;case I.Qn:o={url:e.payloadFileUrl};break;case I.Yu1:o={url:e.payloadAudioUrl};break;case I.tVi:o={url:e.payloadVideoUrl};break;case I.JpA:o={phoneNumber:e.payloadPhoneNumber};break;case I.QMK:o={emailAddress:e.payloadEmailAddress,emailSubject:e.payloadEmailSubject,emailBody:e.payloadEmailBody};break;case I.JZh:o={wechatNumber:e.payloadWechatNumber};break;case I.kDq:o={uid:e.payloadGoodsUid};break;case I.DCc:o={uid:e.payloadOrderUid};break;default:o=void 0}var d=o?Object.entries(o).filter((function(e){var t=y()(e,2)[1];return null!=t&&""!==t})):[],l=d.length>0?Object.fromEntries(d):void 0,p=l?JSON.stringify(l):void 0;i({uid:null==r?void 0:r.uid,title:s,subtitle:e.subtitle,description:e.description,icon:e.icon,color:e.color,badge:e.badge,code:e.code,imageUrl:e.imageUrl,content:p,type:m,orderIndex:null!==(t=e.orderIndex)&&void 0!==t?t:0,highlight:null!==(a=e.highlight)&&void 0!==a&&a,enabled:null===(n=e.enabled)||void 0===n||n,kbUid:m===I.mef?e.kbUid:void 0})}else j.yw.error(c.formatMessage({id:"quickbutton.title.required",defaultMessage:"Please enter a title"}))})).catch((function(){j.yw.error(c.formatMessage({id:"form.validation.error",defaultMessage:"Please check the form inputs."}))}))},children:(0,ye.jsx)(ye.Fragment,{children:c.formatMessage({id:"pages.common.save",defaultMessage:"Save"})})})]}),children:(0,ye.jsxs)(ce.A,{form:l,layout:"vertical",submitter:!1,children:[(0,ye.jsx)(pe.Z,{name:"type",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.type",defaultMessage:"Type"}),options:Le,rules:[{required:!0,message:c.formatMessage({id:"quickbutton.type.required",defaultMessage:"Please choose a type"})}],fieldProps:{onChange:function(e){h(e),e!==I.mef&&(Ne(void 0),Q([]),l.setFieldsValue({kbUid:void 0,payloadFaqUid:void 0,payloadFaqQuestion:void 0,payloadFaqAnswer:void 0})),e!==I.kDq&&l.setFieldsValue({payloadGoodsUid:void 0}),e!==I.DCc&&l.setFieldsValue({payloadOrderUid:void 0}),e!==I.ICe&&l.setFieldsValue({payloadFormUid:void 0,payloadFormSchema:void 0}),e!==I.V1U&&l.setFieldsValue({payloadUrl:void 0,payloadUrlTarget:"_blank"}),e!==I.Qm&&l.setFieldsValue({payloadImageUrl:void 0}),e!==I.Qn&&l.setFieldsValue({payloadFileUrl:void 0}),e!==I.Yu1&&l.setFieldsValue({payloadAudioUrl:void 0}),e!==I.tVi&&l.setFieldsValue({payloadVideoUrl:void 0}),e!==I.JpA&&l.setFieldsValue({payloadPhoneNumber:void 0}),e!==I.QMK&&l.setFieldsValue({payloadEmailAddress:void 0,payloadEmailSubject:void 0,payloadEmailBody:void 0}),e!==I.JZh&&l.setFieldsValue({payloadWechatNumber:void 0}),e===I.Qm?S(".png,.jpg,.jpeg,.gif,.bmp"):e===I.tVi?S(".mp4,.avi,.mov,.wmv"):e===I.Yu1?S(".mp3,.wav,.flac"):e===I.Qn&&S(".doc,.xls,.ppt,.pdf,.docx,.txt,.csv,.xlsx,.rtf,.zip,.7z,.tar,.gz,.rar,.iso")}}}),(0,ye.jsx)(fe.Z,{name:"title",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.title",defaultMessage:"Title"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.title.required",defaultMessage:"Please enter a title"})}]}),m===I.mef&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(pe.Z,{name:"kbUid",label:(0,ye.jsx)(d.FormattedMessage,{id:"faq.kbase.select",defaultMessage:"选择常见问题知识库"}),options:E.filter((function(e){return Boolean(null==e?void 0:e.uid)})).map((function(e){return{label:M(e.name)||e.name||e.uid,value:e.uid}})),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.faq.kb.required",defaultMessage:"请选择知识库"})}],fieldProps:{showSearch:!0,allowClear:!0,loading:re,optionFilterProp:"label",placeholder:c.formatMessage({id:"quickbutton.payload.faq.kb.placeholder",defaultMessage:"Select a knowledge base"}),onChange:function(e){Ne(e),l.setFieldsValue({kbUid:e,payloadFaqUid:void 0,payloadFaqQuestion:void 0,payloadFaqAnswer:void 0})},disabled:!(null!=b&&b.uid)}}),(0,ye.jsx)(pe.Z,{name:"payloadFaqUid",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.faq.uid",defaultMessage:"FAQ Identifier"}),options:V.map((function(e){return{label:M(e.question)||e.question||e.uid,value:e.uid}})),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.faq.uid.required",defaultMessage:"请选择常见问题"})}],fieldProps:{showSearch:!0,allowClear:!0,loading:ve,optionFilterProp:"label",placeholder:c.formatMessage({id:"quickbutton.payload.faq.uid.placeholder",defaultMessage:"Select FAQ"}),onChange:function(e){return function(e){if(e){var t=V.find((function(t){return t.uid===e}));l.setFieldsValue({payloadFaqUid:e,payloadFaqQuestion:null==t?void 0:t.question,payloadFaqAnswer:null==t?void 0:t.answer})}else l.setFieldsValue({payloadFaqUid:void 0,payloadFaqQuestion:void 0,payloadFaqAnswer:void 0})}(e)},disabled:!Ie}})]}),m===I.V1U&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(fe.Z,{name:"payloadUrl",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.url",defaultMessage:"URL"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.url.required",defaultMessage:"Please input URL"})}]}),(0,ye.jsx)(pe.Z,{name:"payloadUrlTarget",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.urlTarget",defaultMessage:"Open link in"}),options:[{label:c.formatMessage({id:"quickbutton.payload.urlTarget.blank",defaultMessage:"New window"}),value:"_blank"}],fieldProps:{disabled:!0}})]}),m===I.ICe&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(pe.Z,{name:"payloadFormUid",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.form.uid",defaultMessage:"选择表单"}),options:z.filter((function(e){return Boolean(null==e?void 0:e.uid)})).map((function(e){return{label:M(e.name)||e.name||e.uid,value:e.uid}})),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.form.uid.required",defaultMessage:"请选择表单"})}],fieldProps:{showSearch:!0,allowClear:!0,loading:Ze,optionFilterProp:"label",placeholder:c.formatMessage({id:"quickbutton.payload.form.uid.placeholder",defaultMessage:"Select form"}),disabled:!(null!=b&&b.uid),onChange:function(e){return function(e){if(e){var t=z.find((function(t){return t.uid===e}));l.setFieldsValue({payloadFormUid:e,payloadFormSchema:null==t?void 0:t.schema})}else l.setFieldsValue({payloadFormUid:void 0,payloadFormSchema:void 0})}(e)},onDropdownVisibleChange:function(e){e&&Xe()}}}),(0,ye.jsx)(ge.Z,{name:"payloadFormSchema",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.form",defaultMessage:"Form Schema"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.form.required",defaultMessage:"Please input schema"})}],fieldProps:{rows:3,readOnly:!0}})]}),m===I.Qm&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(fe.Z,{name:"payloadImageUrl",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.image",defaultMessage:"Image URL"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.image.required",defaultMessage:"Please input image url"})}],fieldProps:{placeholder:c.formatMessage({id:"quickbutton.payload.image.placeholder",defaultMessage:"上传成功后会自动填充（也可手动填写 URL）"})}}),(0,ye.jsxs)(ke,f()(f()({},He),{},{children:[(0,ye.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ye.jsx)(he.Z,{})}),(0,ye.jsx)("p",{className:"ant-upload-text",children:c.formatMessage({id:"quickbutton.upload.dragger.text",defaultMessage:"点击或拖拽上传文件"})})]}))]}),m===I.Qn&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(fe.Z,{name:"payloadFileUrl",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.file",defaultMessage:"File URL"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.file.required",defaultMessage:"Please input file url"})}],fieldProps:{placeholder:c.formatMessage({id:"quickbutton.payload.file.placeholder",defaultMessage:"上传成功后会自动填充（也可手动填写 URL）"})}}),(0,ye.jsxs)(ke,f()(f()({},He),{},{children:[(0,ye.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ye.jsx)(he.Z,{})}),(0,ye.jsx)("p",{className:"ant-upload-text",children:c.formatMessage({id:"quickbutton.upload.dragger.text",defaultMessage:"点击或拖拽上传文件"})})]}))]}),m===I.Yu1&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(fe.Z,{name:"payloadAudioUrl",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.audio",defaultMessage:"Audio URL"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.audio.required",defaultMessage:"Please input audio url"})}],fieldProps:{placeholder:c.formatMessage({id:"quickbutton.payload.audio.placeholder",defaultMessage:"上传成功后会自动填充（也可手动填写 URL）"})}}),(0,ye.jsxs)(ke,f()(f()({},He),{},{children:[(0,ye.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ye.jsx)(he.Z,{})}),(0,ye.jsx)("p",{className:"ant-upload-text",children:c.formatMessage({id:"quickbutton.upload.dragger.text",defaultMessage:"点击或拖拽上传文件"})})]}))]}),m===I.tVi&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(fe.Z,{name:"payloadVideoUrl",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.video",defaultMessage:"Video URL"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.video.required",defaultMessage:"Please input video url"})}],fieldProps:{placeholder:c.formatMessage({id:"quickbutton.payload.video.placeholder",defaultMessage:"上传成功后会自动填充（也可手动填写 URL）"})}}),(0,ye.jsxs)(ke,f()(f()({},He),{},{children:[(0,ye.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ye.jsx)(he.Z,{})}),(0,ye.jsx)("p",{className:"ant-upload-text",children:c.formatMessage({id:"quickbutton.upload.dragger.text",defaultMessage:"点击或拖拽上传文件"})})]}))]}),m===I.JpA&&(0,ye.jsx)(fe.Z,{name:"payloadPhoneNumber",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.phoneNumber",defaultMessage:"Phone Number"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.phoneNumber.required",defaultMessage:"Please input phone number"})}]}),m===I.QMK&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(fe.Z,{name:"payloadEmailAddress",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.emailAddress",defaultMessage:"Email Address"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.emailAddress.required",defaultMessage:"Please input email address"})}]}),(0,ye.jsx)(fe.Z,{name:"payloadEmailSubject",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.emailSubject",defaultMessage:"Email Subject"})}),(0,ye.jsx)(ge.Z,{name:"payloadEmailBody",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.emailBody",defaultMessage:"Email Body"}),fieldProps:{rows:3}})]}),m===I.JZh&&(0,ye.jsx)(fe.Z,{name:"payloadWechatNumber",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.wechatNumber",defaultMessage:"WeChat Number"}),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.wechatNumber.required",defaultMessage:"Please input wechat number"})}]}),m===I.kDq&&(0,ye.jsx)(pe.Z,{name:"payloadGoodsUid",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.goods.uid",defaultMessage:"选择商品"}),options:Y.filter((function(e){return Boolean(null==e?void 0:e.uid)})).map((function(e){return{label:M(e.title)||e.title||e.uid,value:e.uid}})),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.goods.uid.required",defaultMessage:"请选择商品"})}],fieldProps:{showSearch:!0,allowClear:!0,loading:Te,optionFilterProp:"label",placeholder:c.formatMessage({id:"quickbutton.payload.goods.uid.placeholder",defaultMessage:"Select goods"}),disabled:!(null!=b&&b.uid),onDropdownVisibleChange:function(e){e&&Ye()}}}),m===I.DCc&&(0,ye.jsx)(pe.Z,{name:"payloadOrderUid",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.payload.order.uid",defaultMessage:"选择订单"}),options:_.filter((function(e){return Boolean(null==e?void 0:e.uid)})).map((function(e){return{label:M(e.title)||e.title||e.uid,value:e.uid}})),rules:[{required:!0,message:c.formatMessage({id:"quickbutton.payload.order.uid.required",defaultMessage:"请选择订单"})}],fieldProps:{showSearch:!0,allowClear:!0,loading:Re,optionFilterProp:"label",placeholder:c.formatMessage({id:"quickbutton.payload.order.uid.placeholder",defaultMessage:"Select order"}),disabled:!(null!=b&&b.uid),onDropdownVisibleChange:function(e){e&&Ke()}}}),(0,ye.jsx)(me.Z,{name:"enabled",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.enabled",defaultMessage:"Enabled"})})]})})},Pe=a(67242),Ze=["current","pageSize"],Se=[I.V1U,I.mef,I.ICe,I.Qm,I.Qn,I.Yu1,I.tVi,I.JpA,I.QMK,I.JZh,I.DCc,I.kDq],Ue=function(){var e=(0,d.useIntl)(),t=(0,o.useRef)(),a=(0,F.Z)().translateString,r=(0,P.u)((function(e){return e.currentOrg})),n=(0,o.useState)(!1),s=y()(n,2),i=s[0],u=s[1],l=(0,o.useState)(!1),p=y()(l,2),g=p[0],h=p[1],b=(0,o.useState)(),M=y()(b,2),k=M[0],I=M[1],N=(0,o.useState)([]),B=y()(N,2),L=B[0],z=B[1],J=(0,o.useState)([]),G=y()(J,2),X=G[0],Y=G[1],K=(0,o.useMemo)((function(){return Se.reduce((function(t,a){return t[a]={text:e.formatMessage({id:"quickbutton.type.".concat(a),defaultMessage:a})},t}),{})}),[e]),H=(0,o.useCallback)((function(){z([]),Y([])}),[]),W=(0,o.useCallback)((function(){I(void 0),h(!1),u(!0)}),[]),_=(0,o.useCallback)((function(e){I(e),h(!0),u(!0)}),[]),$=(0,o.useCallback)((function(r){var n;S.Z.confirm({title:e.formatMessage({id:"pages.common.deleteTip",defaultMessage:"Delete Confirmation"}),content:e.formatMessage({id:"pages.common.deleteConfirm"},{name:a(r.title)||r.uid}),okText:e.formatMessage({id:"pages.common.ok",defaultMessage:"OK"}),cancelText:e.formatMessage({id:"pages.common.cancel",defaultMessage:"Cancel"}),onOk:(n=x()(v()().mark((function a(){var n,s,o;return v()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=j.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),a.next=3,(0,w.pw)({uid:r.uid});case 3:s=a.sent,null==n||n(),200===s.code?(j.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),H(),null===(o=t.current)||void 0===o||o.reloadAndRest()):j.yw.error(s.message||e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return a.stop()}}),a)}))),function(){return n.apply(this,arguments)})})}),[e,H,a]),ee=(0,o.useCallback)(function(){var a=x()(v()().mark((function a(r,n){var s,o;return v()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,w.dv)({uid:r.uid,enabled:n});case 2:200===(s=a.sent).code?(j.yw.success(n?e.formatMessage({id:"enable.success",defaultMessage:"Enabled"}):e.formatMessage({id:"disable.success",defaultMessage:"Disabled"})),null===(o=t.current)||void 0===o||o.reload()):j.yw.error(s.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[e]),te=(0,o.useCallback)(function(){var a=x()(v()().mark((function a(r){var n,s,o,i,u,d;return v()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==X.length){a.next=2;break}return a.abrupt("return");case 2:s=j.yw.loading(r?e.formatMessage({id:"enabling",defaultMessage:"Enabling"}):e.formatMessage({id:"disabling",defaultMessage:"Disabling"})),o=0,i=m()(X),a.prev=5,i.s();case 7:if((u=i.n()).done){a.next=15;break}return d=u.value,a.next=11,(0,w.dv)({uid:d.uid,enabled:r});case 11:200===a.sent.code&&(o+=1);case 13:a.next=7;break;case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(5),i.e(a.t0);case 20:return a.prev=20,i.f(),a.finish(20);case 23:null==s||s(),j.yw.success(e.formatMessage({id:r?"quickbutton.batch.enable.result":"quickbutton.batch.disable.result",defaultMessage:r?"Enabled {success}/{total}":"Disabled {success}/{total}"},{success:o,total:X.length})),H(),null===(n=t.current)||void 0===n||n.reloadAndRest();case 27:case"end":return a.stop()}}),a,null,[[5,17,20,23]])})));return function(e){return a.apply(this,arguments)}}(),[e,H,X]),ae=(0,o.useCallback)((function(){var a;0!==X.length&&S.Z.confirm({title:e.formatMessage({id:"batch.deleteTip",defaultMessage:"Delete Selected"}),content:e.formatMessage({id:"batch.deleteAffirm"},{count:X.length}),okText:e.formatMessage({id:"pages.common.ok",defaultMessage:"OK"}),cancelText:e.formatMessage({id:"pages.common.cancel",defaultMessage:"Cancel"}),onOk:(a=x()(v()().mark((function a(){var r,n,s,o,i;return v()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=j.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),s=m()(X),a.prev=2,s.s();case 4:if((o=s.n()).done){a.next=10;break}return i=o.value,a.next=8,(0,w.pw)({uid:i.uid});case 8:a.next=4;break;case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),s.e(a.t0);case 15:return a.prev=15,s.f(),a.finish(15);case 18:null==n||n(),H(),null===(r=t.current)||void 0===r||r.reloadAndRest();case 21:case"end":return a.stop()}}),a,null,[[2,12,15,18]])}))),function(){return a.apply(this,arguments)})})}),[e,X,H]),re=(0,o.useCallback)(function(){var a=x()(v()().mark((function a(n){var s,o,i,d;return v()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!=r&&r.uid){a.next=3;break}return j.yw.error(e.formatMessage({id:"quickbutton.notice.needOrg",defaultMessage:"Please select an organization first."})),a.abrupt("return");case 3:if(s=f()(f()({},n),{},{orgUid:r.uid}),o=j.yw.loading(e.formatMessage({id:g?"updating":"creating"})),!g){a.next=11;break}return a.next=8,(0,w.Ck)(s);case 8:a.t0=a.sent,a.next=14;break;case 11:return a.next=13,(0,w.z4)(s);case 13:a.t0=a.sent;case 14:i=a.t0,null==o||o(),200===i.code?(j.yw.success(e.formatMessage({id:g?"update.success":"create.success"})),u(!1),null===(d=t.current)||void 0===d||d.reloadAndRest()):j.yw.error(i.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"}));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[null==r?void 0:r.uid,e,g]),ne=(0,o.useCallback)((function(t){var r=(t.type||"FAQ").toUpperCase(),n=function(e){if(!e)return{};try{var t=JSON.parse(e);return t&&"object"===q()(t)?t:{}}catch(e){return{}}}(t.content);if("FAQ"===r){var s=a(n.faqQuestion)||n.faqQuestion||n.faqUid||"-",o=a(n.faqAnswer)||n.faqAnswer,i=(0,ye.jsxs)(U.Z,{direction:"vertical",size:4,children:[(0,ye.jsx)("span",{children:s}),o&&(0,ye.jsx)("span",{style:{color:"#999"},children:o})]});return(0,ye.jsx)(C.Z,{title:i,styles:{body:{maxWidth:360}},placement:"topLeft",children:(0,ye.jsx)("span",{children:s})})}if("URL"===r){var u=n.url;return(0,ye.jsx)(U.Z,{direction:"vertical",size:4,children:u?(0,ye.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:u}):(0,ye.jsx)("span",{children:"-"})})}if("FORM"===r){var d=n.formUid?"formUid: ".concat(n.formUid):n.formSchema?e.formatMessage({id:"quickbutton.payload.form",defaultMessage:"Form schema"}):"-";return(0,ye.jsx)("span",{children:d})}if("IMAGE"===r)return(0,ye.jsx)("span",{children:n.url||n.imageUrl||"-"});if("FILE"===r)return(0,ye.jsx)("span",{children:n.url||n.fileUrl||"-"});if("AUDIO"===r)return(0,ye.jsx)("span",{children:n.url||n.audioUrl||"-"});if("VIDEO"===r)return(0,ye.jsx)("span",{children:n.url||n.videoUrl||"-"});if("PHONE_NUMBER"===r)return(0,ye.jsx)("span",{children:n.phoneNumber||"-"});if("EMAILL_ADDRESS"===r){var l=n.emailAddress||"-",c=n.emailSubject,p=n.emailBody,f=(0,ye.jsxs)(U.Z,{direction:"vertical",size:4,children:[(0,ye.jsx)("span",{children:l}),c&&(0,ye.jsx)("span",{style:{color:"#999"},children:c}),p&&(0,ye.jsx)("span",{style:{color:"#999"},children:p})]});return c||p?(0,ye.jsx)(C.Z,{title:f,styles:{body:{maxWidth:360}},placement:"topLeft",children:(0,ye.jsx)("span",{children:l})}):(0,ye.jsx)("span",{children:l})}return"WECHAT_NUMBER"===r?(0,ye.jsx)("span",{children:n.wechatNumber||"-"}):"GOODS"===r?(0,ye.jsx)("span",{children:n.uid||n.goodsUid||"-"}):"ORDER"===r?(0,ye.jsx)("span",{children:n.uid||n.orderUid||"-"}):(0,ye.jsx)("span",{children:"-"})}),[e,a]),se=[{dataIndex:"index",valueType:"indexBorder"},{title:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.title",defaultMessage:"Title"}),dataIndex:"title",render:function(e,t){return a(t.title)||t.title||"-"},copyable:!0},{title:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.type",defaultMessage:"Type"}),dataIndex:"type",valueType:"select",valueEnum:K},{title:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.enabled",defaultMessage:"Enabled"}),dataIndex:"enabled",valueType:"select",search:!1,valueEnum:{true:{text:e.formatMessage({id:"quickreply.enabled.true",defaultMessage:"Enabled"}),status:"Success"},false:{text:e.formatMessage({id:"quickreply.enabled.false",defaultMessage:"Disabled"}),status:"Error"}},render:function(e,t){return(0,ye.jsx)(T.Z,{size:"small",checked:t.enabled,onChange:function(e){return ee(t,e)}})}},{title:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.content",defaultMessage:"Content"}),dataIndex:"content",search:!1,render:function(e,t){return ne(t)},width:240},{title:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.updatedAt",defaultMessage:"Updated"}),dataIndex:"updatedAt",valueType:"dateTime",sorter:!0,width:180,search:!1},{title:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.actions",defaultMessage:"Actions"}),valueType:"option",fixed:"right",width:160,render:function(e,t){return(0,ye.jsxs)(U.Z,{children:[(0,ye.jsx)(A.ZP,{type:"link",size:"small",onClick:function(){return _(t)},children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.edit",defaultMessage:"Edit"})}),(0,ye.jsx)(A.ZP,{type:"link",danger:!0,size:"small",onClick:function(){return $(t)},children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.delete",defaultMessage:"Delete"})})]})}}],oe={selectedRowKeys:L,onChange:function(e,t){z(e),Y(t)}},ie=[{key:"batchEnable",icon:(0,ye.jsx)(O.Z,{}),label:e.formatMessage({id:"quickbutton.action.batch.enable",defaultMessage:"Enable Selected"})+" (".concat(L.length,")"),onClick:function(){return te(!0)}},{key:"batchDisable",icon:(0,ye.jsx)(R.Z,{}),label:e.formatMessage({id:"quickbutton.action.batch.disable",defaultMessage:"Disable Selected"})+" (".concat(L.length,")"),onClick:function(){return te(!1)}},{key:"batchDelete",icon:(0,ye.jsx)(D.Z,{}),danger:!0,label:e.formatMessage({id:"quickbutton.action.batch.delete",defaultMessage:"Delete Selected"})+" (".concat(L.length,")"),onClick:ae}];return(0,o.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.reloadAndRest()}),[null==r?void 0:r.uid]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Z.Z,{columns:se,actionRef:t,rowKey:"uid",cardBordered:!0,rowSelection:oe,search:{labelWidth:"auto"},request:function(){var t=x()(v()().mark((function t(a,n){var s,o,i,u,d,l,p,g,m,h,b;return v()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=r&&r.uid){t.next=2;break}return t.abrupt("return",{data:[],success:!0,total:0});case 2:return i=a.current,u=void 0===i?1:i,d=a.pageSize,l=void 0===d?10:d,p=c()(a,Ze),g=n?Object.keys(n)[0]:void 0,m=f()({pageNumber:u-1,pageSize:l,orgUid:r.uid},p),g&&(m.sortBy=g,m.sortDirection="ascend"===n[g]?"ascend":"descend"),t.next=8,(0,w.qL)(m);case 8:if(h=t.sent,Pe.Z.debug("QuickButtonTable queryQuickbuttonsByOrg response:",null==h?void 0:h.data,m),200===h.code){t.next=13;break}return j.yw.error(h.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),t.abrupt("return",{data:[],success:!1,total:0});case 13:return b=(null==h||null===(s=h.data)||void 0===s?void 0:s.content)||[],t.abrupt("return",{data:b,success:!0,total:(null==h||null===(o=h.data)||void 0===o?void 0:o.totalElements)||0});case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),toolBarRender:function(){var e=[(0,ye.jsx)(A.ZP,{type:"primary",icon:(0,ye.jsx)(V.Z,{}),onClick:W,children:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.action.create",defaultMessage:"Create Quick Button"})},"create")];return L.length>0&&e.push((0,ye.jsx)(E.Z,{menu:{items:ie},placement:"bottomRight",children:(0,ye.jsx)(A.ZP,{icon:(0,ye.jsx)(Q.Z,{}),children:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.action.batch",defaultMessage:"Batch Actions"})})},"batch")),e},headerTitle:e.formatMessage({id:"quickbutton.list",defaultMessage:"快捷按钮列表"}),tooltip:{title:e.formatMessage({id:"quickbutton.tooltip",defaultMessage:"Create buttons shown above the chat input toolbar."}),placement:"top"},dateFormatter:"string"}),i&&(0,ye.jsx)(Fe,{open:i,isEdit:g,quickbutton:k,onClose:function(){return u(!1)},onSubmit:re})]})},Ce=a(48058),Te=function(e){var t=e.open,a=e.isEdit,r=e.record,n=e.onClose,s=e.onSubmit,i=ce.A.useForm(),u=y()(i,1)[0],l=(0,d.useIntl)(),c=(0,o.useMemo)((function(){return[{label:l.formatMessage({id:"order.status.pending",defaultMessage:"pending"}),value:"pending"},{label:l.formatMessage({id:"order.status.paid",defaultMessage:"paid"}),value:"paid"},{label:l.formatMessage({id:"order.status.shipped",defaultMessage:"shipped"}),value:"shipped"},{label:l.formatMessage({id:"order.status.delivered",defaultMessage:"delivered"}),value:"delivered"}]}),[l]),p=(0,o.useMemo)((function(){var e;return{uid:null==r?void 0:r.uid,title:null==r?void 0:r.title,description:null==r?void 0:r.description,time:null==r?void 0:r.time,status:null==r?void 0:r.status,statusText:null==r?void 0:r.statusText,totalAmount:null==r?void 0:r.totalAmount,paymentMethod:null==r?void 0:r.paymentMethod,extra:null==r?void 0:r.extra,shippingName:null==r?void 0:r.shippingName,shippingPhone:null==r?void 0:r.shippingPhone,shippingAddress:null==r?void 0:r.shippingAddress,goodsUid:null==r?void 0:r.goodsUid,goodsTitle:null==r?void 0:r.goodsTitle,goodsImage:null==r?void 0:r.goodsImage,goodsDescription:null==r?void 0:r.goodsDescription,goodsPrice:null==r?void 0:r.goodsPrice,goodsUrl:null==r?void 0:r.goodsUrl,goodsTagList:null==r||null===(e=r.goodsTagList)||void 0===e?void 0:e.join(","),goodsExtra:null==r?void 0:r.goodsExtra,goodsQuantity:null==r?void 0:r.goodsQuantity}}),[r]);(0,o.useEffect)((function(){t?u.setFieldsValue(p):u.resetFields()}),[u,p,t]);var f=(0,o.useCallback)((function(){u.validateFields().then(function(){var e=x()(v()().mark((function e(t){var a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a={uid:t.uid,title:(t.title||"").trim(),description:t.description,time:t.time,status:t.status,statusText:t.statusText,totalAmount:t.totalAmount,paymentMethod:t.paymentMethod,extra:t.extra,shippingName:t.shippingName,shippingPhone:t.shippingPhone,shippingAddress:t.shippingAddress,goodsUid:t.goodsUid,goodsTitle:t.goodsTitle,goodsImage:t.goodsImage,goodsDescription:t.goodsDescription,goodsPrice:t.goodsPrice,goodsUrl:t.goodsUrl,goodsTagList:"string"==typeof t.goodsTagList?t.goodsTagList.split(",").map((function(e){return e.trim()})).filter(Boolean):void 0,goodsExtra:t.goodsExtra,goodsQuantity:t.goodsQuantity}).title){e.next=4;break}return j.yw.error(l.formatMessage({id:"order.title.required",defaultMessage:"Please enter a title"})),e.abrupt("return");case 4:return e.next=6,s(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){j.yw.error(l.formatMessage({id:"form.validation.error",defaultMessage:"Please check the form inputs."}))}))}),[u,l,s]);return(0,ye.jsx)(be.Z,{title:a?l.formatMessage({id:"order.drawer.title.edit",defaultMessage:"Edit Order"}):l.formatMessage({id:"order.drawer.title.create",defaultMessage:"Create Order"}),width:600,open:t,onClose:n,destroyOnHidden:!0,extra:(0,ye.jsxs)(U.Z,{children:[(0,ye.jsx)(A.ZP,{onClick:n,children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.cancel",defaultMessage:"Cancel"})}),(0,ye.jsx)(A.ZP,{type:"primary",onClick:f,children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.save",defaultMessage:"Save"})})]}),children:(0,ye.jsxs)(ce.A,{form:u,layout:"vertical",submitter:!1,children:[(0,ye.jsx)(fe.Z,{name:"uid",hidden:!0}),(0,ye.jsx)(fe.Z,{name:"title",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.title",defaultMessage:"Title"}),rules:[{required:!0,message:l.formatMessage({id:"order.title.required",defaultMessage:"Please enter a title"})}]}),(0,ye.jsx)(ge.Z,{name:"description",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.description",defaultMessage:"Description"}),fieldProps:{rows:2}}),(0,ye.jsx)(fe.Z,{name:"time",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.time",defaultMessage:"Time"}),fieldProps:{placeholder:l.formatMessage({id:"order.time.placeholder",defaultMessage:"2025-01-01 12:00:00"})}}),(0,ye.jsx)(pe.Z,{name:"status",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.status",defaultMessage:"Status"}),options:c,allowClear:!0}),(0,ye.jsx)(fe.Z,{name:"statusText",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.statusText",defaultMessage:"Status Text"})}),(0,ye.jsx)(Ce.Z,{name:"totalAmount",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.totalAmount",defaultMessage:"Total Amount"}),fieldProps:{min:0,precision:2}}),(0,ye.jsx)(fe.Z,{name:"paymentMethod",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.paymentMethod",defaultMessage:"Payment Method"})}),(0,ye.jsx)(ge.Z,{name:"extra",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.extra",defaultMessage:"Extra"}),fieldProps:{rows:3}}),(0,ye.jsx)(fe.Z,{name:"shippingName",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.shipping.name",defaultMessage:"Shipping Name"})}),(0,ye.jsx)(fe.Z,{name:"shippingPhone",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.shipping.phone",defaultMessage:"Shipping Phone"})}),(0,ye.jsx)(ge.Z,{name:"shippingAddress",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.shipping.address",defaultMessage:"Shipping Address"}),fieldProps:{rows:2}}),(0,ye.jsx)(fe.Z,{name:"goodsUid",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.uid",defaultMessage:"Goods UID"})}),(0,ye.jsx)(fe.Z,{name:"goodsTitle",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.title",defaultMessage:"Goods Title"})}),(0,ye.jsx)(fe.Z,{name:"goodsImage",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.image",defaultMessage:"Goods Image"})}),(0,ye.jsx)(ge.Z,{name:"goodsDescription",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.description",defaultMessage:"Goods Description"}),fieldProps:{rows:2}}),(0,ye.jsx)(Ce.Z,{name:"goodsPrice",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.price",defaultMessage:"Goods Price"}),fieldProps:{min:0,precision:2}}),(0,ye.jsx)(fe.Z,{name:"goodsUrl",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.url",defaultMessage:"Goods URL"})}),(0,ye.jsx)(fe.Z,{name:"goodsTagList",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.tagList",defaultMessage:"Goods Tags (comma separated)"})}),(0,ye.jsx)(Ce.Z,{name:"goodsQuantity",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.quantity",defaultMessage:"Goods Quantity"}),fieldProps:{min:0,precision:0}}),(0,ye.jsx)(ge.Z,{name:"goodsExtra",label:(0,ye.jsx)(d.FormattedMessage,{id:"order.goods.extra",defaultMessage:"Goods Extra"}),fieldProps:{rows:2}})]})})},Ae=["current","pageSize"],Ee=function(){var e=(0,d.useIntl)(),t=(0,o.useRef)(),a=(0,P.u)((function(e){return e.currentOrg})),r=(0,F.Z)().translateString,n=(0,o.useState)(!1),s=y()(n,2),i=s[0],u=s[1],l=(0,o.useState)(!1),p=y()(l,2),g=p[0],m=p[1],h=(0,o.useState)(),b=y()(h,2),M=b[0],k=b[1],q=(0,o.useCallback)((function(){m(!1),k(void 0),u(!0)}),[]),w=(0,o.useCallback)((function(e){m(!0),k(e),u(!0)}),[]),C=(0,o.useCallback)((function(a){var n;S.Z.confirm({title:e.formatMessage({id:"pages.common.deleteTip",defaultMessage:"Delete Confirmation"}),content:r(a.title)||a.title||a.uid,okText:e.formatMessage({id:"pages.common.ok",defaultMessage:"OK"}),cancelText:e.formatMessage({id:"pages.common.cancel",defaultMessage:"Cancel"}),onOk:(n=x()(v()().mark((function r(){var n,s;return v()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,se({uid:a.uid});case 2:200===(n=r.sent).code?(j.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null===(s=t.current)||void 0===s||s.reloadAndRest()):j.yw.error(n.message||e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 4:case"end":return r.stop()}}),r)}))),function(){return n.apply(this,arguments)})})}),[e,r]),T=(0,o.useMemo)((function(){return[{dataIndex:"index",valueType:"indexBorder"},{title:(0,ye.jsx)(d.FormattedMessage,{id:"order.title",defaultMessage:"Title"}),dataIndex:"title",render:function(e,t){return r(t.title)||t.title||t.uid||"-"},copyable:!0},{title:(0,ye.jsx)(d.FormattedMessage,{id:"order.status",defaultMessage:"Status"}),dataIndex:"status",width:140},{title:(0,ye.jsx)(d.FormattedMessage,{id:"order.totalAmount",defaultMessage:"Total"}),dataIndex:"totalAmount",valueType:"money",search:!1,width:140},{title:(0,ye.jsx)(d.FormattedMessage,{id:"updatedAt",defaultMessage:"Updated"}),dataIndex:"updatedAt",valueType:"dateTime",search:!1,width:180,sorter:!0},{title:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.actions",defaultMessage:"Actions"}),valueType:"option",fixed:"right",width:150,render:function(e,t){return(0,ye.jsxs)(U.Z,{children:[(0,ye.jsx)(A.ZP,{type:"link",size:"small",onClick:function(){return w(t)},children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.edit",defaultMessage:"Edit"})}),(0,ye.jsx)(A.ZP,{type:"link",danger:!0,size:"small",onClick:function(){return C(t)},children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.delete",defaultMessage:"Delete"})})]})}}]}),[r]);return(0,o.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.reloadAndRest()}),[null==a?void 0:a.uid]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Z.Z,{columns:T,actionRef:t,rowKey:"uid",cardBordered:!0,search:{labelWidth:"auto"},request:function(){var t=x()(v()().mark((function t(r,n){var s,o,i,u,d,l,p,g,m,h,b,x;return v()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a&&a.uid){t.next=2;break}return t.abrupt("return",{data:[],success:!0,total:0});case 2:return u=(i=r).current,d=void 0===u?1:u,l=i.pageSize,p=void 0===l?10:l,g=c()(i,Ae),m=n?Object.keys(n)[0]:void 0,h=f()({pageNumber:d-1,pageSize:p,orgUid:a.uid},g),m&&(h.sortBy=m,h.sortDirection="ascend"===n[m]?"ascend":"descend"),t.next=8,$(h);case 8:if(b=t.sent,Pe.Z.debug("OrdersTable queryOrdersByOrg response:",b,h),200===b.code){t.next=13;break}return j.yw.error(b.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),t.abrupt("return",{data:[],success:!1,total:0});case 13:return x=(null==b||null===(s=b.data)||void 0===s?void 0:s.content)||[],t.abrupt("return",{data:x,success:!0,total:(null==b||null===(o=b.data)||void 0===o?void 0:o.totalElements)||0});case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),headerTitle:e.formatMessage({id:"order.list",defaultMessage:"订单列表"}),toolBarRender:function(){return[(0,ye.jsx)(A.ZP,{type:"primary",onClick:q,children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.create",defaultMessage:"Create"})},"create")]},dateFormatter:"string"}),i&&(0,ye.jsx)(Te,{open:i,isEdit:g,record:M,onClose:function(){return u(!1)},onSubmit:function(){var r=x()(v()().mark((function r(n){var s,o,i;return v()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=a&&a.uid){r.next=3;break}return j.yw.error(e.formatMessage({id:"quickbutton.notice.needOrg",defaultMessage:"Please select an organization first."})),r.abrupt("return");case 3:if(s=f()(f()({},n),{},{orgUid:a.uid}),!g){r.next=10;break}return r.next=7,re(s);case 7:r.t0=r.sent,r.next=13;break;case 10:return r.next=12,te(s);case 12:r.t0=r.sent;case 13:200===(o=r.t0).code?(j.yw.success(e.formatMessage({id:g?"update.success":"create.success"})),u(!1),null===(i=t.current)||void 0===i||i.reloadAndRest()):j.yw.error(o.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"}));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})]})},Oe=function(e){var t=e.open,a=e.isEdit,r=e.record,n=e.onClose,s=e.onSubmit,i=ce.A.useForm(),u=y()(i,1)[0],l=(0,d.useIntl)();(0,o.useEffect)((function(){var e;t?u.setFieldsValue({uid:null==r?void 0:r.uid,title:null==r?void 0:r.title,image:null==r?void 0:r.image,description:null==r?void 0:r.description,price:null==r?void 0:r.price,url:null==r?void 0:r.url,tagList:null==r||null===(e=r.tagList)||void 0===e?void 0:e.join(","),extra:null==r?void 0:r.extra,quantity:null==r?void 0:r.quantity}):u.resetFields()}),[u,t,r]);var c=(0,o.useCallback)((function(){u.validateFields().then(function(){var e=x()(v()().mark((function e(t){var a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a={uid:t.uid,title:(t.title||"").trim(),image:t.image,description:t.description,price:t.price,url:t.url,tagList:"string"==typeof t.tagList?t.tagList.split(",").map((function(e){return e.trim()})).filter(Boolean):void 0,extra:t.extra,quantity:t.quantity}).title){e.next=4;break}return j.yw.error(l.formatMessage({id:"goods.title.required",defaultMessage:"Please enter a title"})),e.abrupt("return");case 4:return e.next=6,s(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){j.yw.error(l.formatMessage({id:"form.validation.error",defaultMessage:"Please check the form inputs."}))}))}),[u,l,s]);return(0,ye.jsx)(be.Z,{title:a?l.formatMessage({id:"goods.drawer.title.edit",defaultMessage:"Edit Goods"}):l.formatMessage({id:"goods.drawer.title.create",defaultMessage:"Create Goods"}),width:600,open:t,onClose:n,destroyOnHidden:!0,extra:(0,ye.jsxs)(U.Z,{children:[(0,ye.jsx)(A.ZP,{onClick:n,children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.cancel",defaultMessage:"Cancel"})}),(0,ye.jsx)(A.ZP,{type:"primary",onClick:c,children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.save",defaultMessage:"Save"})})]}),children:(0,ye.jsxs)(ce.A,{form:u,layout:"vertical",submitter:!1,children:[(0,ye.jsx)(fe.Z,{name:"uid",hidden:!0}),(0,ye.jsx)(fe.Z,{name:"title",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.title",defaultMessage:"Title"}),rules:[{required:!0,message:l.formatMessage({id:"goods.title.required",defaultMessage:"Please enter a title"})}]}),(0,ye.jsx)(fe.Z,{name:"image",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.image",defaultMessage:"Image"})}),(0,ye.jsx)(ge.Z,{name:"description",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.description",defaultMessage:"Description"}),fieldProps:{rows:2}}),(0,ye.jsx)(Ce.Z,{name:"price",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.price",defaultMessage:"Price"}),fieldProps:{min:0,precision:2}}),(0,ye.jsx)(fe.Z,{name:"url",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.url",defaultMessage:"URL"})}),(0,ye.jsx)(fe.Z,{name:"tagList",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.tagList",defaultMessage:"Tags (comma separated)"}),fieldProps:{placeholder:l.formatMessage({id:"goods.tagList.placeholder",defaultMessage:"tag1,tag2"})}}),(0,ye.jsx)(Ce.Z,{name:"quantity",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.quantity",defaultMessage:"Quantity"}),fieldProps:{min:0,precision:0}}),(0,ye.jsx)(ge.Z,{name:"extra",label:(0,ye.jsx)(d.FormattedMessage,{id:"goods.extra",defaultMessage:"Extra"}),fieldProps:{rows:3}})]})})},Re=["current","pageSize"],De=function(){var e=(0,d.useIntl)(),t=(0,o.useRef)(),a=(0,P.u)((function(e){return e.currentOrg})),r=(0,F.Z)().translateString,n=(0,o.useState)(!1),s=y()(n,2),i=s[0],u=s[1],l=(0,o.useState)(!1),p=y()(l,2),g=p[0],m=p[1],h=(0,o.useState)(),b=y()(h,2),M=b[0],k=b[1],q=(0,o.useCallback)((function(){m(!1),k(void 0),u(!0)}),[]),w=(0,o.useCallback)((function(e){m(!0),k(e),u(!0)}),[]),C=(0,o.useCallback)((function(a){var n;S.Z.confirm({title:e.formatMessage({id:"pages.common.deleteTip",defaultMessage:"Delete Confirmation"}),content:r(a.title)||a.title||a.uid,okText:e.formatMessage({id:"pages.common.ok",defaultMessage:"OK"}),cancelText:e.formatMessage({id:"pages.common.cancel",defaultMessage:"Cancel"}),onOk:(n=x()(v()().mark((function r(){var n,s;return v()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,K({uid:a.uid});case 2:200===(n=r.sent).code?(j.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null===(s=t.current)||void 0===s||s.reloadAndRest()):j.yw.error(n.message||e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 4:case"end":return r.stop()}}),r)}))),function(){return n.apply(this,arguments)})})}),[e,r]),T=(0,o.useMemo)((function(){return[{dataIndex:"index",valueType:"indexBorder"},{title:(0,ye.jsx)(d.FormattedMessage,{id:"goods.title",defaultMessage:"Title"}),dataIndex:"title",render:function(e,t){return r(t.title)||t.title||t.uid||"-"},copyable:!0},{title:(0,ye.jsx)(d.FormattedMessage,{id:"goods.price",defaultMessage:"Price"}),dataIndex:"price",valueType:"money",search:!1,width:120},{title:(0,ye.jsx)(d.FormattedMessage,{id:"goods.url",defaultMessage:"URL"}),dataIndex:"url",search:!1,render:function(e,t){return t.url?(0,ye.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.url}):"-"},ellipsis:!0},{title:(0,ye.jsx)(d.FormattedMessage,{id:"updatedAt",defaultMessage:"Updated"}),dataIndex:"updatedAt",valueType:"dateTime",search:!1,width:180,sorter:!0},{title:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.actions",defaultMessage:"Actions"}),valueType:"option",fixed:"right",width:150,render:function(e,t){return(0,ye.jsxs)(U.Z,{children:[(0,ye.jsx)(A.ZP,{type:"link",size:"small",onClick:function(){return w(t)},children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.edit",defaultMessage:"Edit"})}),(0,ye.jsx)(A.ZP,{type:"link",danger:!0,size:"small",onClick:function(){return C(t)},children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.delete",defaultMessage:"Delete"})})]})}}]}),[r]);return(0,o.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.reloadAndRest()}),[null==a?void 0:a.uid]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Z.Z,{columns:T,actionRef:t,rowKey:"uid",cardBordered:!0,search:{labelWidth:"auto"},request:function(){var t=x()(v()().mark((function t(r,n){var s,o,i,u,d,l,p,g,m,h,b,x;return v()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a&&a.uid){t.next=2;break}return t.abrupt("return",{data:[],success:!0,total:0});case 2:return u=(i=r).current,d=void 0===u?1:u,l=i.pageSize,p=void 0===l?10:l,g=c()(i,Re),m=n?Object.keys(n)[0]:void 0,h=f()({pageNumber:d-1,pageSize:p,orgUid:a.uid},g),m&&(h.sortBy=m,h.sortDirection="ascend"===n[m]?"ascend":"descend"),t.next=8,L(h);case 8:if(b=t.sent,Pe.Z.debug("GoodsTable queryGoodsByOrg response:",b,h),200===b.code){t.next=13;break}return j.yw.error(b.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"})),t.abrupt("return",{data:[],success:!1,total:0});case 13:return x=(null==b||null===(s=b.data)||void 0===s?void 0:s.content)||[],t.abrupt("return",{data:x,success:!0,total:(null==b||null===(o=b.data)||void 0===o?void 0:o.totalElements)||0});case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),headerTitle:e.formatMessage({id:"goods.list",defaultMessage:"商品列表"}),toolBarRender:function(){return[(0,ye.jsx)(A.ZP,{type:"primary",onClick:q,children:(0,ye.jsx)(d.FormattedMessage,{id:"pages.common.create",defaultMessage:"Create"})},"create")]},dateFormatter:"string"}),i&&(0,ye.jsx)(Oe,{open:i,isEdit:g,record:M,onClose:function(){return u(!1)},onSubmit:function(){var r=x()(v()().mark((function r(n){var s,o,i;return v()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=a&&a.uid){r.next=3;break}return j.yw.error(e.formatMessage({id:"quickbutton.notice.needOrg",defaultMessage:"Please select an organization first."})),r.abrupt("return");case 3:if(s=f()(f()({},n),{},{orgUid:a.uid}),!g){r.next=10;break}return r.next=7,X(s);case 7:r.t0=r.sent,r.next=13;break;case 10:return r.next=12,J(s);case 12:r.t0=r.sent;case 13:200===(o=r.t0).code?(j.yw.success(e.formatMessage({id:g?"update.success":"create.success"})),u(!1),null===(i=t.current)||void 0===i||i.reloadAndRest()):j.yw.error(o.message||e.formatMessage({id:"request.failed",defaultMessage:"Request failed"}));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()})]})},Ve=a(85977),Qe=i.Z.Content,Ie=function(){var e,t,a,r,o,l,c,p,f=(0,s.Z)().contentStyle,g=(0,d.useAccess)(),m=null!==(e=null==g||null===(t=g.hasAnyModulePermission)||void 0===t?void 0:t.call(g,Ve.MY.QUICK_BUTTON))&&void 0!==e&&e,h=null!==(a=null==g||null===(r=g.hasAnyModulePermission)||void 0===r?void 0:r.call(g,Ve.MY.ORDER))&&void 0!==a&&a,v=null!==(o=null==g||null===(l=g.hasAnyModulePermission)||void 0===l?void 0:l.call(g,Ve.MY.GOODS))&&void 0!==o&&o,b=[].concat(n()(m?[{key:"quickbuttons",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.tab.quickbuttons",defaultMessage:"QuickButton"}),children:(0,ye.jsx)(Ue,{})}]:[]),n()(v?[{key:"goods",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.tab.goods",defaultMessage:"Goods"}),children:(0,ye.jsx)(De,{})}]:[]),n()(h?[{key:"orders",label:(0,ye.jsx)(d.FormattedMessage,{id:"quickbutton.tab.orders",defaultMessage:"Orders"}),children:(0,ye.jsx)(Ee,{})}]:[]));if(0===b.length)return null;var x=String(null!==(c=null===(p=b[0])||void 0===p?void 0:p.key)&&void 0!==c?c:"quickbuttons");return(0,ye.jsx)(i.Z,{children:(0,ye.jsx)(Qe,{style:f,children:(0,ye.jsx)(u.Z,{defaultActiveKey:x,items:b})})})}}}]);