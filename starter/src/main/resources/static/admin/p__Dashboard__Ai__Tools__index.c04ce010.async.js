"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[135],{15722:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(83910),a=r(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=r(54183),i=function(e,t){return a.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var l=a.forwardRef(i)},11090:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(83910),a=r(44194),o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},s=r(54183),i=function(e,t){return a.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var l=a.forwardRef(i)},2484:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(83910),a=r(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},s=r(54183),i=function(e,t){return a.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:o}))};var l=a.forwardRef(i)},50628:function(e,t,r){var n=r(94433),a=r(38956),o=r(44194),s=r(9953),i=r(31549),l=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],c=o.forwardRef((function(e,t){var r=e.fieldProps,o=e.unCheckedChildren,c=e.checkedChildren,u=e.proFieldProps,d=(0,a.Z)(e,l);return(0,i.jsx)(s.Z,(0,n.Z)({valueType:"switch",fieldProps:(0,n.Z)({unCheckedChildren:o,checkedChildren:c},r),ref:t,valuePropName:"checked",proFieldProps:u,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},d))}));t.Z=c},86702:function(e,t,r){var n=r(32906),a=r(94433),o=r(38956),s=r(81424),i=r(69705),l=r(65641),c=r(34573),u=r(44194),d=r(9953),p=r(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",v=function(e){var t=(0,s.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),r=(0,n.Z)(t,2),o=r[0],c=r[1];return(0,p.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var r,n=t.getFieldValue(e.name||[]);return(0,p.jsx)(l.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return c(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(r=e.statusRender)||void 0===r?void 0:r.call(e,n),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:o,children:e.children}))}})},h=function(e){var t=e.fieldProps,r=e.proFieldProps,n=(0,o.Z)(e,f);return(0,p.jsx)(d.Z,(0,a.Z)({valueType:m,fieldProps:t,filedConfig:{valueType:m},proFieldProps:r},n))};h.Password=function(e){var t=e.fieldProps,r=e.proFieldProps,s=(0,o.Z)(e,g),i=(0,u.useState)(!1),l=(0,n.Z)(i,2),f=l[0],h=l[1];return null!=t&&t.statusRender&&s.name?(0,p.jsx)(v,{name:s.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:h,children:(0,p.jsx)("div",{children:(0,p.jsx)(d.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,c.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var r;null==t||null===(r=t.onBlur)||void 0===r||r.call(t,e),h(!1)},onClick:function(e){var r;null==t||null===(r=t.onClick)||void 0===r||r.call(t,e),h(!0)}}),proFieldProps:r,filedConfig:{valueType:m}},s))})}):(0,p.jsx)(d.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:r,filedConfig:{valueType:m}},s))},h.displayName="ProFormComponent",t.Z=h},60241:function(e,t,r){var n=r(94433),a=r(38956),o=r(44194),s=r(9953),i=r(31549),l=["fieldProps","proFieldProps"],c=function(e,t){var r=e.fieldProps,o=e.proFieldProps,c=(0,a.Z)(e,l);return(0,i.jsx)(s.Z,(0,n.Z)({ref:t,valueType:"textarea",fieldProps:r,proFieldProps:o},c))};t.Z=o.forwardRef(c)},9431:function(e,t,r){r.r(t),r.d(t,{default:function(){return re}});var n=r(21600),a=r(84176),o=r.n(a),s=r(73193),i=r.n(s),l=r(90819),c=r.n(l),u=r(89933),d=r.n(u),p=r(45332),f=r.n(p),g=r(44565),m=r(92351),v=r(69533),h=r(43275),M=r(28508),x=r(44194),y=r(4628),C=r(59304),Z=r(15722),P=r(54881),S=r(10162),w=r(11090),b=r(2484),j=r(96596),k=r.n(j),T=r(1715),z=r(74171),O=r(88722),B=r(94976);function F(e){return I.apply(this,arguments)}function I(){return(I=d()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.request)("/api/v1/mcp/server/query/org",{method:"GET",params:i()(i()({},t),{},{channel:B.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=d()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.request)("/api/v1/mcp/server/create",{method:"POST",data:i()(i()({},t),{},{channel:B.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return J.apply(this,arguments)}function J(){return(J=d()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.request)("/api/v1/mcp/server/update",{method:"POST",data:i()(i()({},t),{},{channel:B.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return E.apply(this,arguments)}function E(){return(E=d()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.request)("/api/v1/mcp/server/delete",{method:"POST",data:i()(i()({},t),{},{channel:B.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=r(58620),D=r(99036),H=r(86702),V=r(60241),Y=r(50628),L=r(30857),X=r(30310),G=r(31549),W=function(e){var t=e.isEdit,r=e.mcpServer,n=e.open,a=e.level,o=e.onClose,s=e.onSubmit,i=D.A.useForm(),l=f()(i,1)[0],c=(0,y.useIntl)(),u=(0,z.u)((function(e){return e.currentOrg})),d=(0,T.v)((function(e){return e.currentCategory})),p=(0,T.v)((function(e){return e.categorySelectOptions}));(0,x.useEffect)((function(){if(t&&r&&l){var e={};if(r.serverConfig)try{e="string"==typeof r.serverConfig?JSON.parse(r.serverConfig):r.serverConfig}catch(e){console.error("Failed to parse serverConfig:",e)}l.setFieldsValue({uid:null==r?void 0:r.uid,name:null==r?void 0:r.name,description:null==r?void 0:r.description,serverType:null==r?void 0:r.type,status:null==r?void 0:r.status,enabled:null==r?void 0:r.enabled,categoryUid:(null==r?void 0:r.categoryUid)||(null==d?void 0:d.uid),serverConfig:JSON.stringify(e,null,2)})}else{l.resetFields();var n=p&&p.length>0?p[0].value:void 0;l.setFieldsValue({categoryUid:n,enabled:!0,status:"INACTIVE",serverConfig:JSON.stringify({serverVersion:"1.0.0",protocol:"http",connectionTimeout:3e4,readTimeout:6e4,maxRetries:3,autoStart:!1},null,2)})}}),[r,t,l,d,p]);return(0,G.jsx)(L.Z,{title:t?c.formatMessage({id:"pages.mcp.edit",defaultMessage:"编辑MCP服务器"}):c.formatMessage({id:"pages.mcp.create",defaultMessage:"创建MCP服务器"}),width:600,open:n,onClose:o,extra:(0,G.jsxs)(X.Z,{children:[(0,G.jsx)(v.ZP,{onClick:o,children:c.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,G.jsx)(v.ZP,{type:"primary",onClick:function(){l.validateFields().then((function(e){var n;console.log("Form values:",e);var o={};if(e.serverConfig)try{o=JSON.parse(e.serverConfig)}catch(e){return void console.error("Invalid JSON in serverConfig:",e)}var i=p&&p.length>0?p[0].value:void 0,l={uid:t?null==r?void 0:r.uid:"",name:e.name,description:e.description,serverType:e.serverType,status:e.status,enabled:null===(n=e.enabled)||void 0===n||n,categoryUid:e.categoryUid||i,serverConfig:JSON.stringify(o),level:a,orgUid:null==u?void 0:u.uid};console.log("mcpServerObject:",l),s(l)})).catch((function(e){console.log("Form errors:",e)}))},children:c.formatMessage({id:"ok",defaultMessage:"确定"})})]}),children:(0,G.jsxs)(D.A,{form:l,layout:"vertical",submitter:!1,children:[(0,G.jsx)(H.Z,{name:"name",label:c.formatMessage({id:"pages.mcp.name",defaultMessage:"名称"}),placeholder:c.formatMessage({id:"pages.mcp.name.placeholder",defaultMessage:"请输入MCP服务器名称"}),rules:[{required:!0,message:c.formatMessage({id:"pages.mcp.name.required",defaultMessage:"请输入名称"})}]}),(0,G.jsx)(V.Z,{name:"description",label:c.formatMessage({id:"pages.mcp.description",defaultMessage:"描述"}),placeholder:c.formatMessage({id:"pages.mcp.description.placeholder",defaultMessage:"请输入MCP服务器描述"}),rows:3}),(0,G.jsx)(V.Z,{name:"serverConfig",label:c.formatMessage({id:"pages.mcp.serverConfig",defaultMessage:"服务器配置"}),placeholder:c.formatMessage({id:"pages.mcp.serverConfig.placeholder",defaultMessage:"请输入JSON格式的服务器配置"}),rows:20,tooltip:c.formatMessage({id:"pages.mcp.serverConfig.tooltip",defaultMessage:"包含服务器版本、URL、认证、超时、能力等配置的JSON字符串"}),rules:[{validator:function(e,t){if(!t)return Promise.resolve();try{return JSON.parse(t),Promise.resolve()}catch(e){return Promise.reject(new Error(c.formatMessage({id:"mcp.serverConfig.validation.json",defaultMessage:"请输入有效的JSON格式"})))}}}]}),(0,G.jsx)(Y.Z,{name:"enabled",label:c.formatMessage({id:"pages.mcp.enabled",defaultMessage:"启用状态"}),checkedChildren:c.formatMessage({id:"enabled",defaultMessage:"启用"}),unCheckedChildren:c.formatMessage({id:"disabled",defaultMessage:"禁用"}),initialValue:!0})]})})},K=r(43388),Q=r(67242),$=["current","pageSize","prompt"],_=function(e){var t=e.level,r=(e.type,(0,x.useRef)()),n=(0,y.useIntl)(),a=(0,x.useState)(!0),s=f()(a,2),l=s[0],u=s[1],p=(0,O.Z)().translateString,j=(0,x.useState)(1),I=f()(j,2),N=I[0],J=I[1],E=(0,x.useState)(10),D=f()(E,2),H=D[0],V=D[1],Y=(0,x.useState)(!1),L=f()(Y,2),X=L[0],_=L[1],ee=(0,x.useState)([]),te=f()(ee,2),re=(te[0],te[1]),ne=(0,x.useState)({}),ae=f()(ne,2),oe=ae[0],se=ae[1],ie=(0,T.v)((function(e){return e.currentCategory})),le=(0,z.u)((function(e){return e.currentOrg})),ce=(0,x.useState)(0),ue=f()(ce,2),de=ue[0],pe=ue[1],fe=(0,x.useState)({}),ge=f()(fe,2),me=ge[0],ve=ge[1],he=function(){var e=d()(c()().mark((function e(t){var a,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K.yw.loading(n.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,A(t);case 3:200===(a=e.sent).code?(K.yw.success(n.formatMessage({id:"delete.success"})),null===(o=r.current)||void 0===o||o.reload()):K.yw.error(a.message||n.formatMessage({id:"delete.error"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=d()(c()().mark((function e(t){var a,o,s,i;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=7;break}return e.next=3,U(t);case 3:200===(a=e.sent).code?(K.yw.success(n.formatMessage({id:"update.success"})),_(!1),null===(o=r.current)||void 0===o||o.reload()):K.yw.error(a.message||n.formatMessage({id:"update.error"})),e.next=11;break;case 7:return e.next=9,R(t);case 9:200===(s=e.sent).code?(K.yw.success(n.formatMessage({id:"create.success"})),_(!1),null===(i=r.current)||void 0===i||i.reload()):K.yw.error(s.message||n.formatMessage({id:"create.error"}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){u(!1),se({}),_(!0)};(0,x.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.reload()}),[ie]);var ye=function(){var e=d()(c()().mark((function e(r,n,a){var o,s,l;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",r,n,a),o=localStorage.getItem(B.LA8),s=i()({categoryUid:(null==ie?void 0:ie.uid)===B.zBg?"":null==ie?void 0:ie.uid,orgUid:t===B.Hxq?"":null==le?void 0:le.uid,level:t,accessToken:o||"",exportType:r},me),"current"===r?(s.pageNumber=String(N-1),s.pageSize=String(H)):"all"===r?(s.pageNumber="0",s.pageSize="1000"):"range"===r&&void 0!==n&&void 0!==a&&(s.pageNumber=String(n),s.pageSize=String(a)),l=Object.fromEntries(Object.entries(s).filter((function(e){var t=f()(e,2),r=(t[0],t[1]);return null!=r})).map((function(e){var t=f()(e,2),r=t[0],n=t[1];return[r,String(n)]}))),Q.Z.debug("Export MCP Servers url:",(0,q.kG)()+"/api/v1/mcp/server/export?"+new URLSearchParams(l).toString()),window.open((0,q.kG)()+"/api/v1/mcp/server/export?"+new URLSearchParams(l).toString());case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Ce=function(e){for(var t=[],r=1e3,n=Math.ceil(e/r),a=function(){var n=o,a=o*r+1,s=Math.min((o+1)*r,e);t.push({key:"export-".concat(o),label:"".concat(a,"-").concat(s," (").concat(s-a+1,"条)"),onClick:function(){return ye("range",n,r)}})},o=0;o<n;o++)a();return t},Ze=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:n.formatMessage({id:"pages.mcp.uid",defaultMessage:"UID"}),dataIndex:"uid",hideInSearch:!0,fixed:"left",width:180,copyable:!0,ellipsis:!0},{title:n.formatMessage({id:"pages.mcp.name",defaultMessage:"名称"}),dataIndex:"name",hideInSearch:!1,fixed:"left",width:200,copyable:!0,ellipsis:!0,tooltip:n.formatMessage({id:"pages.mcp.name.tooltip",defaultMessage:"MCP服务器的名称"})},{title:n.formatMessage({id:"pages.mcp.description",defaultMessage:"描述"}),dataIndex:"description",width:250,copyable:!0,ellipsis:!0,tooltip:n.formatMessage({id:"pages.mcp.description.tooltip",defaultMessage:"MCP服务器的功能描述"})},{title:n.formatMessage({id:"pages.mcp.enabled",defaultMessage:"启用状态"}),dataIndex:"enabled",hideInSearch:!0,width:100,tooltip:n.formatMessage({id:"pages.mcp.enabled.tooltip",defaultMessage:"是否启用该MCP服务器"}),render:function(e,t){return t.enabled?"已启用":"已禁用"}},{title:n.formatMessage({id:"pages.mcp.serverConfig",defaultMessage:"服务器配置"}),dataIndex:"serverConfig",hideInSearch:!0,width:200,ellipsis:!0,tooltip:n.formatMessage({id:"pages.mcp.serverConfig.tooltip",defaultMessage:"MCP服务器的配置信息"}),render:function(e,t){if(!t.serverConfig)return"-";try{var r="string"==typeof t.serverConfig?JSON.parse(t.serverConfig):t.serverConfig,n=[r.serverUrl&&"URL: ".concat(r.serverUrl),r.host&&"Host: ".concat(r.host),r.port&&"Port: ".concat(r.port)].filter(Boolean).join(", ");return(0,G.jsx)(m.Z,{title:(0,G.jsx)("pre",{children:JSON.stringify(r,null,2)}),children:(0,G.jsx)("span",{children:n||"查看配置"})})}catch(e){return(0,G.jsx)(m.Z,{title:String(t.serverConfig),children:(0,G.jsx)("span",{children:"配置信息"})})}}},{title:n.formatMessage({id:"pages.mcp.createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,width:160,hideInSearch:!0,tooltip:n.formatMessage({id:"pages.mcp.createdAt.tooltip",defaultMessage:"MCP服务器创建的时间"}),render:function(e,t){return t.createdAt?k()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:n.formatMessage({id:"pages.mcp.updatedAt",defaultMessage:"更新时间"}),dataIndex:"updatedAt",valueType:"dateTime",sorter:!0,hideInSearch:!0,width:160,tooltip:n.formatMessage({id:"pages.mcp.updatedAt.tooltip",defaultMessage:"MCP服务器最后更新的时间"}),render:function(e,t){return t.updatedAt?k()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:n.formatMessage({id:"actions",defaultMessage:"操作"}),dataIndex:"option",valueType:"option",width:120,fixed:"right",tooltip:n.formatMessage({id:"pages.mcp.actions.tooltip",defaultMessage:"可进行的操作"}),render:function(e,t){return[(0,G.jsx)(m.Z,{title:n.formatMessage({id:"edit",defaultMessage:"编辑"}),children:(0,G.jsx)(v.ZP,{type:"text",size:"small",icon:(0,G.jsx)(C.Z,{}),onClick:function(){return function(e){u(!0),se(e),_(!0)}(t)}})},"edit"),(0,G.jsx)(h.Z,{title:n.formatMessage({id:"deleteTip",defaultMessage:"删除确认"}),description:"".concat(n.formatMessage({id:"deleteAffirm",defaultMessage:"确认删除"}),"【").concat(p(t.name),"】？"),onConfirm:function(){return he(t)},okText:n.formatMessage({id:"ok",defaultMessage:"确定"}),cancelText:n.formatMessage({id:"cancel",defaultMessage:"取消"}),icon:(0,G.jsx)(Z.Z,{style:{color:"red"}}),children:(0,G.jsx)(m.Z,{title:n.formatMessage({id:"delete",defaultMessage:"删除"}),children:(0,G.jsx)(v.ZP,{type:"text",size:"small",danger:!0,icon:(0,G.jsx)(P.Z,{})})})},"delete")]}}],Pe=function(){var e=d()(c()().mark((function e(r,a,s){var l,u,d,p,f,g,m,v,h,M,x,y;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current,r.pageSize,r.prompt,l=o()(r,$),ve({name:r.name,description:r.description}),u=r.current?r.current-1:0,d=r.pageSize||10,J(r.current||1),V(d),p="createdAt",f="desc",a&&Object.keys(a).length>0&&(g=Object.keys(a)[0],p=g,f="ascend"===a[g]?"asc":"desc"),m=i()({pageNumber:u,pageSize:d,sortBy:p,sortDirection:f,level:t,orgUid:null==le?void 0:le.uid,categoryUid:(null==ie?void 0:ie.uid)===B.zBg?"":null==ie?void 0:ie.uid},l),e.prev=10,e.next=13,F(m);case 13:if(v=e.sent,Q.Z.debug("queryMcpServersByOrg:",v,m),200!==v.code){e.next=22;break}return y=(null==v||null===(h=v.data)||void 0===h?void 0:h.content)||[],re(y),pe((null==v||null===(M=v.data)||void 0===M?void 0:M.totalElements)||0),e.abrupt("return",{data:y,success:!0,total:(null==v||null===(x=v.data)||void 0===x?void 0:x.totalElements)||0});case 22:return K.yw.error(v.message||n.formatMessage({id:"request.error"})),e.abrupt("return",{data:[],success:!1,total:0});case 24:e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(10),console.error("查询MCP服务器失败:",e.t0),K.yw.error(n.formatMessage({id:"request.error"})),e.abrupt("return",{data:[],success:!1,total:0});case 31:case"end":return e.stop()}}),e,null,[[10,26]])})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(g.Z,{headerTitle:n.formatMessage({id:"pages.mcp.title",defaultMessage:"MCP服务器管理"}),actionRef:r,rowKey:"uid",search:{labelWidth:"auto"},toolBarRender:function(){return e=[(0,G.jsx)(v.ZP,{type:"primary",icon:(0,G.jsx)(S.Z,{}),onClick:xe,children:n.formatMessage({id:"create.mcp",defaultMessage:"新建MCP服务器"})},"create")],t=[{key:"export-current",icon:(0,G.jsx)(w.Z,{}),label:n.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return ye("current")}}],de>0&&(de<=1e3?t.push({key:"export-all",icon:(0,G.jsx)(w.Z,{}),label:n.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(de,"条)"),onClick:function(){return ye("all")}}):t.push({key:"export-range",icon:(0,G.jsx)(w.Z,{}),label:n.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(de,"条)"),children:Ce(de)})),e.push((0,G.jsx)(M.Z,{menu:{items:t},placement:"bottom",children:(0,G.jsxs)(v.ZP,{type:"primary",icon:(0,G.jsx)(w.Z,{}),children:[n.formatMessage({id:"export",defaultMessage:"导出"}),(0,G.jsx)(b.Z,{})]})},"export")),e;var e,t},request:Pe,columns:Ze,scroll:{x:"max-content"},pagination:{pageSize:H,current:N,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," / ").concat(e," ").concat(n.formatMessage({id:"items",defaultMessage:"条"}))}},options:{setting:{listsHeight:400}},size:"small"}),X&&(0,G.jsx)(W,{isEdit:l,mcpServer:oe,open:X,level:t,onClose:function(){return _(!1)},onSubmit:Me})]})},ee=function(){return(0,G.jsx)("div",{children:"McpClient Tool Page"})},te=function(){return(0,G.jsx)("div",{children:"Calling Tools Component"})},re=function(){var e=[{key:"mcpserver",label:"MCP服务器",children:(0,G.jsx)(_,{level:B.whQ})},{key:"mcpclient",label:"MCP客户端",children:(0,G.jsx)(ee,{})},{key:"callingtools",label:"Tools Calling",children:(0,G.jsx)(te,{})}];return(0,G.jsx)(n.Z,{style:{padding:"10px"},defaultActiveKey:"mcpserver",items:e})}},1715:function(e,t,r){r.d(t,{v:function(){return g}});var n=r(86222),a=r.n(n),o=r(73193),s=r.n(o),i=r(76711),l=r.n(i),c=r(94976),u=r(26557),d=r(26407),p=r(20744),f=r(67242);var g=(0,u.Ue)()((0,d.mW)((0,d.tJ)((0,p.n)((function(e,t){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:c.zBg,name:c.zBg},setCategoryResult:function(t){var r=function(e){var t,r=[];return function e(t,n){t&&0!==t.length&&t.forEach((function(t){if(t&&t.uid&&t.uid!==c.zBg){var a=n?"".concat(n," / ").concat(t.name):t.name||"";r.push({label:a,value:t.uid}),t.children&&t.children.length>0&&e(t.children,a)}}))}((null==e||null===(t=e.data)||void 0===t?void 0:t.content)||[]),r}(t),n=function(e){var t,r=(null==e||null===(t=e.data)||void 0===t?void 0:t.content)||[],n=function e(t){var r={title:t.name||"",key:t.uid||""};return t.children&&t.children.length>0&&(r.children=t.children.map((function(t){return e(t)}))),r};return r.filter((function(e){return e&&e.uid&&e.uid!==c.zBg})).map((function(e){return n(e)}))}(t),a=[{title:c.zBg,key:c.zBg}].concat(l()(n)),o={uid:c.zBg,name:c.zBg},i=s()(s()({},t),{},{data:s()(s()({},t.data),{},{content:[o].concat(l()(t.data.content))})});e({categoryResult:i,categoryTreeOptions:a,categorySelectOptions:r}),0===t.data.content.length&&e({currentCategory:{uid:c.zBg,name:c.zBg}})},insertCategory:function(t){e((function(e){e.categoryResult.data.content.unshift(t)}))},upgradeCategory:function(t){e((function(e){var r=e.categoryResult.data.content,n=r.findIndex((function(e){return e.uid===t.uid}));-1!==n?r[n]=t:console.warn("Category with uid ".concat(t.uid," not found."))}))},setCurrentCategory:function(t){e({currentCategory:t})},resetDefaultCategory:function(){f.Z.log("resetDefaultCategory"),e({currentCategory:{uid:c.zBg,name:c.zBg}})},setCurrentCategoryUid:function(r){if(r!==c.zBg){var n=function e(t,r){if(t&&0!==t.length){var n,o=a()(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if((null==s?void 0:s.uid)===r)return s;var i=e(null==s?void 0:s.children,r);if(i)return i}}catch(e){o.e(e)}finally{o.f()}}}(t().categoryResult.data.content,r);e({currentCategory:null!=n?n:{uid:c.zBg,name:c.zBg}})}else e({currentCategory:{uid:c.zBg,name:c.zBg}})},deleteCategoryCache:function(){return e({},!0)}}})),{name:c.OMm})))}}]);