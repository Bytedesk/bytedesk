"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9368],{88678:function(e,a,t){t.d(a,{Z:function(){return y}});var n=t(90819),s=t.n(n),r=t(89933),o=t.n(r),i=t(45332),c=t.n(i),l=t(55735),u=t(30921);function d(){return g.apply(this,arguments)}function g(){return(g=o()(s()().mark((function e(){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/kaptcha/api/v1/get",{method:"GET",params:{client:l.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,a){return f.apply(this,arguments)}function f(){return(f=o()(s()().mark((function e(a,t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/kaptcha/api/v1/check",{method:"POST",data:{captchaUid:a,captchaCode:t,client:l.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=t(58087),m=t(52288),v=t(44194),x=t(31549),y=function(e){var a=e.onKaptchaChange,t=e.onKaptchaCheck,n=(0,u.useIntl)(),r=(0,v.useState)(),i=c()(r,2),l=i[0],g=i[1],f=(0,v.useState)(),y=c()(f,2),w=y[0],b=y[1],M=function(){var e=o()(s()().mark((function e(){var a;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:200===(a=e.sent).code&&(g(a.data.captchaUid),b(a.data.captchaImage));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=o()(s()().mark((function e(a,n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(a,n);case 2:r=e.sent,console.log("checkCaptcha response",r),200===r.code?t&&t(!0):t&&t(!1);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){M()}),[]);return(0,x.jsx)(x.Fragment,{children:w&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{onChange:function(e){a&&(a(l,e.target.value),e.target.value&&""!==e.target.value&&4===e.target.value.trim().length?k(l,e.target.value):t&&t(!1))},prefix:(0,x.jsx)(h.Z,{}),placeholder:n.formatMessage({id:"captcha",defaultMessage:"captcha"}),style:{width:"65%",float:"left",height:40},allowClear:!0}),(0,x.jsx)("img",{src:w,alt:"captcha",onClick:M})]})})}},39527:function(e,a,t){t.r(a),t.d(a,{default:function(){return oe}});var n=t(73193),s=t.n(n),r=t(90819),o=t.n(r),i=t(89933),c=t.n(i),l=t(45332),u=t.n(l),d=t(45739),g=t(69169),p=t(60183),f=t(65821),h=t(57245),m=t(93769),v=t(30921),x=t(42540),y=t(8247),w=t(75365),b=t(96839),M=t(98094),k=t(44194),j=t(56321),C=t(51239),S=t(86803),Z=t(98240),U=t(23864),I=t(55735),F=t(88678),T=t(10022),P=t(26978),K=t(4499),z=t(31549),D=function(e){var a=e.loginType,t=e.onKaptchaChange,n=e.onKaptchaCheck,s=(0,v.useIntl)(),r=function(){var e=c()(o()().mark((function e(a,n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t(a,n);case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=c()(o()().mark((function e(a){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&n(a);case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,z.jsx)(z.Fragment,{children:"account"===a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(K.Z,{name:"username",fieldProps:{size:"large",prefix:(0,z.jsx)(T.Z,{})},placeholder:s.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"用户名/邮箱"}),rules:[{required:!0,message:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"请输入用户名/邮箱!"})}]}),(0,z.jsx)(K.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,z.jsx)(P.Z,{})},placeholder:s.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"密码"}),rules:[{required:!0,message:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"请输入密码！"})}]}),(0,z.jsx)(g.A.Item,{name:"captchaCode",rules:[{required:!0,message:s.formatMessage({id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],children:(0,z.jsx)(F.Z,{onKaptchaChange:r,onKaptchaCheck:i})})]})})},L=t(65461),q=t(40795),R=t(84881),V=t(59129),A=t(88201),E=t(5602),N=t(32943),B=function(e){var a=e.loginType,t=e.onKaptchaChange,n=e.onKaptchaCheck,s=(0,v.useIntl)(),r=(0,k.useRef)(),i=(0,k.useState)(""),l=u()(i,2),p=l[0],f=l[1],h=(0,k.useState)(""),m=u()(h,2),x=m[0],y=m[1],w=(0,k.useState)(!1),b=u()(w,2),M=b[0],j=b[1],Z=(0,C.L)((function(e){return{deviceUid:e.deviceUid,setDeviceUid:e.setDeviceUid}})),U=Z.deviceUid,T=Z.setDeviceUid,D=function(){var e=c()(o()().mark((function e(a,n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(a),y(n),t&&t(a,n);case 3:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),B=function(){var e=c()(o()().mark((function e(a){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(a),n&&n(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){void 0!==U&&""!==U||T((0,L.Zx)())}),[]);var H=[{label:s.formatMessage({id:"pages.login.country.china"}),value:"86",icon:"🇨🇳",code:"CN"},{label:s.formatMessage({id:"pages.login.country.hongkong"}),value:"852",icon:"🇭🇰",code:"HK"},{label:s.formatMessage({id:"pages.login.country.taiwan"}),value:"886",icon:"🇹🇼",code:"TW"},{label:s.formatMessage({id:"pages.login.country.macao"}),value:"853",icon:"🇲🇴",code:"MO"},{label:s.formatMessage({id:"pages.login.country.japan"}),value:"81",icon:"🇯🇵",code:"JP"},{label:s.formatMessage({id:"pages.login.country.korea"}),value:"82",icon:"🇰🇷",code:"KR"},{label:s.formatMessage({id:"pages.login.country.singapore"}),value:"65",icon:"🇸🇬",code:"SG"},{label:s.formatMessage({id:"pages.login.country.malaysia"}),value:"60",icon:"🇲🇾",code:"MY"},{label:s.formatMessage({id:"pages.login.country.thailand"}),value:"66",icon:"🇹🇭",code:"TH"},{label:s.formatMessage({id:"pages.login.country.vietnam"}),value:"84",icon:"🇻🇳",code:"VN"},{label:s.formatMessage({id:"pages.login.country.philippines"}),value:"63",icon:"🇵🇭",code:"PH"},{label:s.formatMessage({id:"pages.login.country.indonesia"}),value:"62",icon:"🇮🇩",code:"ID"},{label:s.formatMessage({id:"pages.login.country.usa"}),value:"1-us",icon:"🇺🇸",code:"US"},{label:s.formatMessage({id:"pages.login.country.canada"}),value:"1-ca",icon:"🇨🇦",code:"CA"},{label:s.formatMessage({id:"pages.login.country.uk"}),value:"44",icon:"🇬🇧",code:"GB"},{label:s.formatMessage({id:"pages.login.country.germany"}),value:"49",icon:"🇩🇪",code:"DE"},{label:s.formatMessage({id:"pages.login.country.france"}),value:"33",icon:"🇫🇷",code:"FR"},{label:s.formatMessage({id:"pages.login.country.italy"}),value:"39",icon:"🇮🇹",code:"IT"},{label:s.formatMessage({id:"pages.login.country.spain"}),value:"34",icon:"🇪🇸",code:"ES"},{label:s.formatMessage({id:"pages.login.country.russia"}),value:"7",icon:"🇷🇺",code:"RU"},{label:s.formatMessage({id:"pages.login.country.australia"}),value:"61",icon:"🇦🇺",code:"AU"},{label:s.formatMessage({id:"pages.login.country.newzealand"}),value:"64",icon:"🇳🇿",code:"NZ"}];return(0,z.jsx)(z.Fragment,{children:"mobile"===a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(A.Z,{gutter:16,children:[(0,z.jsx)(E.Z,{span:10,children:(0,z.jsx)(R.Z,{name:"country",options:H,fieldProps:{size:"large",placeholder:s.formatMessage({id:"pages.login.country.placeholder",defaultMessage:"选择国家/地区"}),optionLabelProp:"label",optionItemRender:function(e){var a=e.value.includes("-")?e.value.split("-")[0]:e.value;return(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{role:"img","aria-label":e.label,style:{marginRight:8},children:e.icon}),e.label," (+",a,")"]})}},initialValue:"86"})}),(0,z.jsx)(E.Z,{span:14,children:(0,z.jsx)(K.Z,{fieldProps:{size:"large",prefix:(0,z.jsx)(q.Z,{})},name:"mobile",placeholder:s.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"手机号"}),rules:[{required:!0,message:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"请输入手机号！"})},{pattern:/^1\d{10}$/,message:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"手机号格式错误！"})}]})})]}),(0,z.jsx)(g.A.Item,{name:"captchaCode",rules:[{required:!0,message:s.formatMessage({id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],children:(0,z.jsx)(F.Z,{onKaptchaChange:D,onKaptchaCheck:B})}),(0,z.jsx)(V.Z,{fieldProps:{size:"large",prefix:(0,z.jsx)(P.Z,{})},captchaProps:{size:"large",disabled:!M},placeholder:s.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"请输入验证码"}),captchaTextRender:function(e,a){return e?"".concat(a," ").concat(s.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"获取验证码"})):s.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"获取验证码"})},phoneName:"mobile",name:"code",rules:[{required:!0,message:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"请输入验证码！"})}],fieldRef:r,onGetCaptcha:function(){var e=c()(o()().mark((function e(a){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("mobile:",a),!a||11!==a.length){e.next=13;break}return t={mobile:a,type:I.UUF,captchaUid:p,captchaCode:x,deviceUid:U,platform:I.iw8},e.next=5,(0,d.Y7)(t);case 5:if(200===(n=e.sent).code){e.next=10;break}return S.yw.error(s.formatMessage({id:n.message,defaultMessage:n.message})),setTimeout((function(){var e;console.log("endCaptchaTiming"),null===(e=r.current)||void 0===e||e.endTiming()}),2),e.abrupt("return");case 10:S.yw.success(s.formatMessage({id:n.message,defaultMessage:n.message})),e.next=14;break;case 13:S.yw.error("手机号格式错误");case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}),(0,z.jsx)(N.Z,{message:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.auto.register",defaultMessage:"Mobile will auto register"}),type:"info"})]})})},H=t(70185),Q=t(44521),G=t(99749),W=t(11757),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},O=t(54183),J=function(e,a){return k.createElement(O.Z,(0,W.Z)({},e,{ref:a,icon:Y}))};var X=k.forwardRef(J),$=t(85954),_=function(){var e=x.Z.useToken().token,a=(0,k.useContext)(H.I),t=a.isCustomServer,n=a.setIsCustomServer,s=g.A.useForm(),r=u()(s,1)[0],o=(0,k.useState)(!1),i=u()(o,2),c=i[0],l=i[1],d=(0,k.useState)(""),p=u()(d,2),f=p[0],h=p[1],m=(0,k.useState)(""),v=u()(m,2),y=(v[0],v[1]);(0,k.useEffect)((function(){f&&f.length>0&&(r.setFieldsValue({apiUrl:f}),console.log("apiUrl:",f))}),[f]),(0,k.useEffect)((function(){if(t){var e=localStorage.getItem(I.Ss2);"true"===e&&(l(!0),r.setFieldsValue({isCustomServerEnabled:!0})),console.log("isCustomServer customEnabled:",e);var a=localStorage.getItem(I.DuM);a&&r.setFieldsValue({apiUrl:(0,L.Qj)(a)});var n=localStorage.getItem(I.sZT);n&&r.setFieldsValue({websocketUrl:(0,L.Qj)(n)})}}),[t]);return(0,z.jsx)("div",{className:"ant-pro-form-server-container",style:{backgroundColor:e.colorBgContainer,display:"flex",justifyContent:"center",flexDirection:"column",height:"100%",width:"80%",marginLeft:"10%"},children:(0,z.jsxs)(g.A,{className:"ant-pro-form-server-main",form:r,submitter:{render:function(e,a){return console.log("props:",e,a),(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:[(0,z.jsx)(w.ZP,{icon:(0,z.jsx)(X,{}),onClick:function(){console.log("switch server"),n((function(e){return!e}))},children:"返回"},"back"),(0,z.jsx)(w.ZP,{type:"primary",onClick:function(){var a=e.form.getFieldValue("apiUrl");a=(0,L.Qj)(a.trim());var t=e.form.getFieldValue("websocketUrl");t=(0,L.Qj)(t.trim()),a&&a.trim().length>0&&t&&t.trim().length>0?(localStorage.setItem(I.DuM,a),localStorage.setItem(I.sZT,t),localStorage.setItem(I.Ss2,"true"),S.yw.success("保存成功")):S.yw.error("请输入正确的服务器地址")},children:"保存"},"submit"),(0,z.jsx)(w.ZP,{onClick:function(){var a;null===(a=e.form)||void 0===a||a.resetFields(),h(""),localStorage.setItem(I.Ss2,"false"),localStorage.setItem(I.DuM,""),localStorage.setItem(I.sZT,""),S.yw.success("重置成功，已恢复默认云服务器")},children:"重置"},"reset"),(0,z.jsx)(w.ZP,{onClick:function(){window.open("https://www.weiyuai.cn/docs/zh-CN/docs/manual/agent/auth/login")},children:"帮助"},"help")]})}},children:[(0,z.jsx)($.Z,{name:"isCustomServerEnabled",fieldProps:{onChange:function(e){console.log("e:",e),function(e){if(console.log("handleCustomServerChange e:",e),l(e.target.checked),e.target.checked){var a=localStorage.getItem(I.DuM);a&&r.setFieldsValue({apiUrl:(0,L.Qj)(a)});var t=localStorage.getItem(I.sZT);t&&r.setFieldsValue({websocketUrl:(0,L.Qj)(t)}),console.log("initData apiUrl:",a,"websocketUrl:",t)}else localStorage.setItem(I.Ss2,"false")}(e)}},children:"是否启用自定义服务器"}),c&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(K.Z,{name:"apiUrl",label:"API 服务器地址（例如：http://127.0.0.1:9003 或 https://api.bytedesk.com）",fieldProps:{disabled:!c,placeholder:"http://127.0.0.1:9003",onChange:function(e){return h(e.target.value)}}}),(0,z.jsx)(K.Z,{name:"websocketUrl",label:"WebSocket 服务器地址（例如：ws://127.0.0.1:9885/websocket 或 wss://api.bytedesk.com/websocket）",fieldProps:{disabled:!c,placeholder:"ws://127.0.0.1:9885/websocket",onChange:function(e){return y(e.target.value)}}})]})]})})},ee=t(11184),ae=t(16439),te=x.Z.defaultAlgorithm,ne=x.Z.darkAlgorithm,se=function(){var e=(0,m.l)((function(e){var a=e.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:a.borderRadius,":hover":{backgroundColor:a.colorBgTextHover}}}));return(0,z.jsx)("div",{className:e,"data-lang":!0,children:v.SelectLang&&(0,z.jsx)(v.SelectLang,{})})},re=function(){var e=(0,v.useIntl)(),a=g.A.useForm(),t=u()(a,1)[0],n=x.Z.useToken().token,r=(0,U.Z)().isDarkMode,i=(0,ee.M)(),l=i.config,m=i.updateConfig,b=(0,k.useState)("/admin/icons/logo.png"),M=u()(b,2),F=(M[0],M[1]),T=(0,k.useState)(""),P=u()(T,2),K=(P[0],P[1]),q=(0,k.useState)(""),R=u()(q,2),V=(R[0],R[1]),A=(0,Z.t)((function(e){return e.setAccessToken})),E=(0,k.useContext)(H.I),N=E.isCustomServer,W=(E.setIsCustomServer,(0,k.useState)("mobile")),Y=u()(W,2),O=Y[0],J=Y[1],X=(0,v.useModel)("@@initialState").setInitialState,$=(0,k.useState)(!1),te=u()($,2),ne=te[0],re=(te[1],(0,C.L)((function(e){return{deviceUid:e.deviceUid,setDeviceUid:e.setDeviceUid,setUserInfo:e.setUserInfo}}))),oe=re.deviceUid,ie=re.setDeviceUid,ce=re.setUserInfo,le=(0,k.useState)(!1),ue=u()(le,2),de=ue[0],ge=ue[1],pe=(0,k.useState)(""),fe=u()(pe,2),he=fe[0],me=fe[1],ve=function(){var e=c()(o()().mark((function e(a,n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me(a),t.setFieldValue("captchaCode",n);case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),xe=function(){var e=c()(o()().mark((function e(a){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleKaptchaCheck:",a);case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ye=[{key:"account",label:e.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"账户密码登录"}),children:(0,z.jsx)(D,{loginType:O,onKaptchaChange:ve,onKaptchaCheck:xe})},{key:"mobile",label:e.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"手机号登录"}),children:(0,z.jsx)(B,{loginType:O,onKaptchaChange:ve,onKaptchaCheck:xe})}],we=((0,p.uK)(n.colorTextBase,.2),function(){var a=c()(o()().mark((function a(){var t,n,s,r,i,c,l,u,d;return o()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return void 0!==oe&&""!==oe||ie((0,L.Zx)()),a.next=3,(0,Q.Xs)();case 3:null!=(n=a.sent)&&null!==(t=n.custom)&&void 0!==t&&t.enabled?(null!=n&&null!==(s=n.custom)&&void 0!==s&&s.logo?F(null==n||null===(l=n.custom)||void 0===l?void 0:l.logo):F("/admin/icons/logo.png"),null!=n&&null!==(r=n.custom)&&void 0!==r&&r.name?K(null==n||null===(u=n.custom)||void 0===u?void 0:u.name):K(e.formatMessage({id:"app.title"})),null!=n&&null!==(i=n.custom)&&void 0!==i&&i.description?V(null==n||null===(d=n.custom)||void 0===d?void 0:d.description):V(e.formatMessage({id:"pages.layouts.userLayout.title"})),null!=n&&null!==(c=n.custom)&&void 0!==c&&c.showRightCornerChat||m({bubbleConfig:{show:!1},buttonConfig:{show:!1}})):(F("/admin/icons/logo.png"),K(e.formatMessage({id:"app.title"})),V(e.formatMessage({id:"pages.layouts.userLayout.title"}))),(0,Q.ME)();case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}());(0,k.useEffect)((function(){(0,L.pr)(),we()}),[]);var be=function(){var e=c()(o()().mark((function e(a){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&(0,j.flushSync)((function(){X((function(e){return s()(s()({},e),{},{userInfo:a})}))}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Me=function(){var a=c()(o()().mark((function a(t){var n;return o()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,de){a.next=4;break}return S.yw.error("请阅读并同意隐私协议"),a.abrupt("return");case 4:return S.yw.loading(e.formatMessage({id:"logging",defaultMessage:"logging..."})),a.next=7,(0,d.x4)(s()({},t));case 7:n=a.sent,console.log("LoginResult:",n),200===n.code?(S.yw.destroy(),S.yw.success(e.formatMessage({id:"login.success",defaultMessage:"login success"})),A(n.data.accessToken),be(n.data.user),ce(n.data.user),v.history.push("/")):(S.yw.destroy(),S.yw.error(e.formatMessage({id:n.message,defaultMessage:n.message}))),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0),S.yw.error(e.formatMessage({id:"login.error",defaultMessage:"login failed"}));case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}(),ke=function(){var a=c()(o()().mark((function a(t){var n,r,i;return o()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,de){a.next=4;break}return S.yw.error("请阅读并同意隐私协议"),a.abrupt("return");case 4:return S.yw.loading(e.formatMessage({id:"logging",defaultMessage:"logging..."})),a.next=7,(0,d.N9)(s()({},t));case 7:n=a.sent,console.log("LoginMobileResult:",n),200===n.code?(S.yw.destroy(),S.yw.success(e.formatMessage({id:"login.success",defaultMessage:"login success"})),A(null==n?void 0:n.data.accessToken),be(null==n||null===(r=n.data)||void 0===r?void 0:r.user),ce(null==n||null===(i=n.data)||void 0===i?void 0:i.user),v.history.push("/")):(S.yw.destroy(),S.yw.error(e.formatMessage({id:n.message,defaultMessage:n.message}))),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0),S.yw.error(e.formatMessage({id:"login.error",defaultMessage:"login failed"}));case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}();return(0,z.jsxs)(f._Y,{hashed:!1,dark:r,children:[(0,z.jsx)(se,{}),(0,z.jsxs)("div",{style:{backgroundColor:n.colorBgContainer,textAlign:"center",height:"100%",backgroundImage:"url('/admin/assets/images/bg-wide.png')"},children:[!N&&(0,z.jsxs)(h.U,{form:t,contentStyle:{minWidth:400,maxWidth:"75vw"},logo:(0,z.jsx)("img",{alt:"logo",src:"https://kf.gxzgt.com:9003/assets/images/logos/zhiguitong.png"}),title:"全场景云客服平台",actions:ne&&!1,onFinish:function(){var e=c()(o()().mark((function e(a){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("login values:",a),"account"!==O){e.next=8;break}return t={username:a.username,password:a.password,captchaUid:he,captchaCode:a.captchaCode,deviceUid:oe,platform:I.iw8},console.log("login info:",t),e.next=6,Me(t);case 6:e.next=12;break;case 8:return n={mobile:a.mobile,code:a.code,captchaUid:he,captchaCode:a.captchaCode,deviceUid:oe,platform:I.iw8},console.log("login mobile info:",n),e.next=12,ke(n);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),children:[(0,z.jsx)(y.Z,{activeKey:O,onChange:J,centered:!0,items:ye}),(0,z.jsx)("div",{style:{marginTop:14,marginBottom:14},children:(0,z.jsxs)("div",{style:{float:"right",marginBottom:24},children:[(0,z.jsx)(G.Z,{onChange:function(e){console.log("checked = ".concat(e.target.checked)),ge(e.target.checked)},children:(0,z.jsx)(w.ZP,{size:"small",type:"link",onClick:function(){window.open("https://zgtapp.zwfw.gxzf.gov.cn/zgt-h5/userProtocol/index.html")},children:"同意《用户隐私&协议》"})}),ne&&(0,z.jsx)(v.Link,{to:"/auth/register",children:(0,z.jsx)(v.FormattedMessage,{id:"pages.login.registerAccount",defaultMessage:"注册 "})}),!1]})})]}),N&&(0,z.jsx)(_,{}),(0,z.jsx)(ae.Q,s()(s()({},l),{},{onInit:function(){console.log("ByteDesk initialized admin")}}))]})]})},oe=function(){var e=(0,U.Z)().isDarkMode;return(0,z.jsx)(H.w,{children:(0,z.jsx)(b.ZP,{theme:{algorithm:e?ne:te},children:(0,z.jsxs)(M.Z,{style:{height:"100%"},children:[(0,z.jsx)(S.ZP,{}),(0,z.jsx)(re,{})]})})})}}}]);