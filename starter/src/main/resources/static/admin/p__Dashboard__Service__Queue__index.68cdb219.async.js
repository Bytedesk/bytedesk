"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9614],{96865:function(e,t,r){var a=r(23864);t.Z=function(){var e=(0,a.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},48875:function(e,t,r){r.d(t,{Z:function(){return I}});var a=r(73193),n=r.n(a),u=r(84176),s=r.n(u),i=r(90819),d=r.n(i),o=r(89933),c=r.n(o),l=r(45332),g=r.n(l),m=r(86803),p=r(55735),f=r(30921);function x(e){return h.apply(this,arguments)}function h(){return(h=c()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/queue/query/org",{method:"GET",params:n()(n()({},t),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=r(76750),v=r(40612),y=r(44521),S=r(11090),j=r(81947),q=r(75365),M=r(44194),w=r(31549),k=["current","pageSize"],I=function(){var e=(0,f.useIntl)(),t=(0,M.useRef)(),r=((0,b.Z)().translateString,(0,M.useState)(1)),a=g()(r,2),u=a[0],i=a[1],o=(0,M.useState)(10),l=g()(o,2),h=l[0],I=l[1],F=(0,v.u)((function(e){return e.currentOrg})),N=["index","nickname","type","day","currentNumber","waitingNumber","servingNumber","servedNumber","avgWaitTime"],T=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.nickname"}),dataIndex:"nickname",copyable:!0},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.type"}),dataIndex:"type",hideInSearch:!0,render:function(e,t){switch(t.type){case p.VXt:return(0,w.jsx)(f.FormattedMessage,{id:"queue.type.workgroup"});case p.BOH:return(0,w.jsx)(f.FormattedMessage,{id:"queue.type.agent"});case p.aOw:return(0,w.jsx)(f.FormattedMessage,{id:"queue.type.robot"});default:return(0,w.jsx)(f.FormattedMessage,{id:"queue.type.unknown"})}}},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.day"}),dataIndex:"day",hideInSearch:!0},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.status"}),dataIndex:"status",hideInSearch:!0,render:function(e,t){switch(t.status){case"ACTIVE":return(0,w.jsx)(f.FormattedMessage,{id:"queue.status.active"});case"PAUSED":return(0,w.jsx)(f.FormattedMessage,{id:"queue.status.paused"});case"CLOSED":return(0,w.jsx)(f.FormattedMessage,{id:"queue.status.closed"});case"MAINTENANCE":return(0,w.jsx)(f.FormattedMessage,{id:"queue.status.maintenance"});default:return(0,w.jsx)(f.FormattedMessage,{id:"queue.status.unknown"})}}},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.currentNumber"}),dataIndex:"currentNumber",hideInSearch:!0},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.waitingNumber"}),dataIndex:"waitingNumber",hideInSearch:!0,render:function(t,r){return"".concat(r.waitingNumber).concat(e.formatMessage({id:"queue.number.unit"}))}},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.servingNumber"}),dataIndex:"servingNumber",hideInSearch:!0},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.servedNumber"}),dataIndex:"servedNumber",hideInSearch:!0},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.avgWaitTime"}),dataIndex:"avgWaitTime",hideInSearch:!0,render:function(t,r){return"".concat(r.avgWaitTime).concat(e.formatMessage({id:"queue.time.unit"}))}},{title:(0,w.jsx)(f.FormattedMessage,{id:"queue.avgSolveTime"}),dataIndex:"avgSolveTime",hideInSearch:!0}],Z=function(){var e=c()(d()().mark((function e(){var t;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",u,h),t=localStorage.getItem(p.LA8),window.open((0,y.kG)()+"/api/v1/queue/export?"+new URLSearchParams({orgUid:(null==F?void 0:F.uid)||"",pageNumber:String(u-1),pageSize:String(h),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsx)(j.Z,{columns:T,actionRef:t,cardBordered:!0,request:function(){var e=c()(d()().mark((function e(t,r,a){var u,o,c,l,g;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,r,a),u=t.current,o=t.pageSize,c=s()(t,k),i(u),I(o),l=n()({pageNumber:u-1,pageSize:o,orgUid:null==F?void 0:F.uid},c),e.next=7,x(l);case 7:return g=e.sent,console.log("queryQueuesByOrg response:",l,g),200===g.code||m.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"queue.list"}),toolBarRender:function(){return[(0,w.jsx)(q.ZP,{icon:(0,w.jsx)(S.Z,{}),type:"primary",onClick:Z,children:(0,w.jsx)(f.FormattedMessage,{id:"queue.export"})},"button")]},columnsState:{defaultValue:n()({},Object.fromEntries(T.map((function(e){return[e.dataIndex,{show:N.includes(e.dataIndex)}]})))),persistenceKey:"queue-table-columns",persistenceType:"localStorage"},options:{setting:{draggable:!0,checkable:!0,checkedReset:!0,extra:[(0,w.jsx)("a",{onClick:function(){var e,r;null===(e=t.current)||void 0===e||null===(r=e.reset)||void 0===r||r.call(e)},children:(0,w.jsx)(f.FormattedMessage,{id:"table.columns.reset"})},"reset")]}}})}},51489:function(e,t,r){r.r(t);var a=r(96865),n=r(30921),u=r(75574),s=r(8247),i=(r(44194),r(45516)),d=r(48875),o=r(15678),c=r(31549),l=(u.Z.Sider,u.Z.Content);n.FormattedMessage;t.default=function(){(0,i.s0)();var e=(0,a.Z)(),t=(e.leftSiderStyle,e.contentStyle),r=[{key:"list",label:(0,c.jsx)(n.FormattedMessage,{id:"queue.tab.list"}),children:(0,c.jsx)(d.Z,{})},{key:"member",label:(0,c.jsx)(n.FormattedMessage,{id:"queue.tab.member"}),children:(0,c.jsx)(o.default,{})}];return(0,c.jsx)(u.Z,{children:(0,c.jsx)(u.Z,{children:(0,c.jsx)(l,{style:t,children:(0,c.jsx)(s.Z,{defaultActiveKey:"list",items:r,destroyInactiveTabPane:!0})})})})}}}]);