"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9828],{33428:function(e,t,o){o.r(t),o.d(t,{default:function(){return at}});var n=o(75574),r=o(44194),s=o(90819),i=o.n(s),u=o(89933),a=o.n(u),l=o(45332),d=o.n(l),c=o(86803),g=o(24170),f=o(72614),p=o(23864),v=o(1902),m=o(40612),h=o(95490),x=o(15722),b=o(82669),k=o(30921),y=o(53530),w=o(27487),C=o(75365),j=o(9452),M=o(84288),Z=o(76750),S=o(69169),F=o(4499),q=o(84881),R=o(31549),W=function(e){var t=e.open,o=e.onClose,n=e.onSubmit,s=S.A.useForm(),i=d()(s,1)[0],u=(0,Z.Z)().translateString,a=(0,m.u)((function(e){return e.currentOrg})),l=(0,v.E)((function(e){return e.agentResult})),c=(0,r.useState)([]),g=d()(c,2),f=g[0],p=g[1];(0,r.useEffect)((function(){i.setFieldsValue({nickname:"",agents:[]})}),[]);return(0,R.jsx)("div",{children:(0,R.jsx)(y.Z,{title:"创建技能组",open:t,forceRender:!0,onOk:function(){console.log("handleOk"),i.validateFields().then((function(e){console.log("form values:",e);var t={nickname:i.getFieldValue("nickname"),agentUids:i.getFieldValue("agents"),orgUid:null==a?void 0:a.uid};console.log("workgroup:",t),n(t)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){console.log("handleCancel"),o()},children:(0,R.jsxs)(S.A,{form:i,name:"wgForm",submitter:{render:function(e,t){return(0,R.jsx)(R.Fragment,{})}},children:[(0,R.jsx)(F.Z,{label:"技能组昵称",name:"nickname",rules:[{required:!0,message:"请输入昵称!"}]}),(0,R.jsx)(q.Z,{name:"agents",label:"成员",options:l.data.content.map((function(e){return{value:e.uid,label:u(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"请选择成员",value:f,onChange:function(e){console.log("selected ".concat(e)),p(e)}}})]})})})},A=function(){var e=(0,k.useIntl)(),t=(0,r.useRef)(!1),o=(0,Z.Z)().translateStringTranct,n=(0,p.Z)().isDarkMode,s=(0,r.useState)(!1),u=d()(s,2),l=u[0],S=u[1],F=(0,m.u)((function(e){return e.currentOrg})),q=(0,v.E)((function(e){return e.setAgentResult})),A=(0,h.$)((function(e){return{workgroupResult:e.workgroupResult,currentWorkgroup:e.currentWorkgroup,setWorkgroupResult:e.setWorkgroupResult,insertWorkgroup:e.insertWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup,deleteCurrentWorkgroup:e.deleteCurrentWorkgroup}})),T=A.workgroupResult,P=A.currentWorkgroup,U=A.setWorkgroupResult,E=A.insertWorkgroup,L=A.setCurrentWorkgroup,V=A.deleteCurrentWorkgroup,D=y.Z.useModal(),z=d()(D,2),I=z[0],O=z[1],B=function(){var t=a()(i()().mark((function t(o){var n;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("delete workgroup",o),c.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),t.next=4,(0,f.zl)(o);case 4:n=t.sent,console.log("delete workgroup response",n),200===n.code?(c.yw.destroy(),c.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),V(o.uid)):(c.yw.destroy(),c.yw.error(n.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var e=a()(i()().mark((function e(){var t,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,orgUid:null==F?void 0:F.uid},e.next=3,(0,g._t)(t);case 3:o=e.sent,console.log("queryAgentsByOrg: ",o),200===o.code?q(o):c.yw.error(o.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=a()(i()().mark((function e(){var o,n,r,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=3;break}return console.log("isLoading: 1",t.current),e.abrupt("return");case 3:return t.current=!0,c.yw.loading("loading"),o={pageNumber:0,pageSize:50,orgUid:null==F?void 0:F.uid},e.next=8,(0,f.LE)(o);case 8:n=e.sent,console.log("getWorkgroups",n),200===n.code?(c.yw.destroy(),U(n),null===P&&(null==n||null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&L(null==n||null===(s=n.data)||void 0===s?void 0:s.content[0])):(c.yw.destroy(),c.yw.error(n.message)),t.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){H(),N()}),[]);var G=function(){var t=a()(i()().mark((function t(o){var n;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handleSave",o),c.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating"})),t.next=4,(0,f.p0)(o);case 4:n=t.sent,console.log("create workgroup:",n),200===n.code?(c.yw.destroy(),c.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),S(!1),E(n.data)):(c.yw.destroy(),S(!1),c.yw.error(n.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(w.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,R.jsx)(C.ZP,{size:"small",type:"primary",icon:(0,R.jsx)(b.Z,{}),onClick:function(){S(!0)},children:e.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,R.jsx)(C.ZP,{size:"small",onClick:H,children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,R.jsx)(C.ZP,{onClick:function(){return function(t){I.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,R.jsx)(x.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(t.nickname,"】？"),onOk:function(){B(t)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(P)},size:"small",danger:!0,disabled:P&&""===P.uid,children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,R.jsx)(j.Z,{itemLayout:"horizontal",dataSource:T.data.content,renderItem:function(e,t){return(0,R.jsx)(j.Z.Item,{style:P.uid===e.uid?{backgroundColor:n?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){L(e)},children:(0,R.jsx)(j.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,R.jsx)(M.C,{src:e.avatar}),title:(0,R.jsx)(R.Fragment,{children:o(e.nickname)}),description:o(e.description)})},e.uid)}}),l&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(W,{open:l,onClose:function(){S(!1)},onSubmit:G})}),O]})},T=o(8247),P=o(73193),U=o.n(P),E=o(32350),L=o(59908),V=o(6631),D=function(){var e,t,o=S.A.useForm(),n=d()(o,1)[0],s=(0,k.useIntl)(),u=(0,Z.Z)().translateString,l=(0,v.E)((function(e){return e.agentResult})),g=(0,h.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),p=g.currentWorkgroup,m=g.setCurrentWorkgroup,x=(0,r.useState)((null===(e=p.agents)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]),b=d()(x,2),y=b[0],w=b[1],j=(0,r.useState)(""),W=d()(j,2),A=W[0],T=W[1];(0,r.useEffect)((function(){if(p){var e;n.setFieldValue("nickname",u(null==p?void 0:p.nickname)),n.setFieldValue("description",u(null==p?void 0:p.description));var t=[];null===(e=p.agents)||void 0===e||e.forEach((function(e){t.push(e.uid)})),w(t)}}),[p]),(0,r.useEffect)((function(){p.agents&&(w(p.agents.map((function(e){return e.uid}))),n.setFieldsValue({agents:p.agents.map((function(e){return e.uid}))}))}),[p]);var P=function(){var e=a()(i()().mark((function e(t){var o,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),T(t),o=U()(U()({},p),{},{avatar:t}),e.next=5,(0,f.n1)(o);case 5:n=e.sent,console.log("updateAvatar response:",n),200===n.code?(c.yw.success(s.formatMessage({id:"update.success"})),m(n.data)):(c.yw.destroy(),c.yw.error(n.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=a()(i()().mark((function e(t){var o,n,r,u,a,l,d,g,v,h;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish",t),c.yw.loading(s.formatMessage({id:"updating"})),v=U()(U()(U()({},p),t),{},{avatar:A,agentUids:y,serviceSettings:U()(U()({},p.serviceSettings),{},{welcomeFaqUids:null==p||null===(o=p.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==p||null===(n=p.serviceSettings)||void 0===n||null===(n=n.quickFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),faqUids:null==p||null===(r=p.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==p||null===(u=p.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null===(a=p.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==p||null===(l=p.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))}),robotSettings:U()(U()({},p.robotSettings),{},{robotUid:null===(d=p.robotSettings)||void 0===d||null===(d=d.robot)||void 0===d?void 0:d.uid}),messageLeaveSettings:U()(U()({},p.messageLeaveSettings),{},{worktimeUids:null===(g=p.messageLeaveSettings)||void 0===g||null===(g=g.worktimes)||void 0===g?void 0:g.map((function(e){return e.uid}))}),queueSettings:U()({},p.queueSettings)}),console.log("workgroupObject:",v),e.next=6,(0,f.W5)(v);case 6:h=e.sent,console.log("updateWorkGroup response:",h),200===h.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),m(h.data)):(c.yw.destroy(),c.yw.error(h.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){T(null==p?void 0:p.avatar)}),[p]),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(S.A,{form:n,style:{marginLeft:"20px"},onFinish:D,children:[(0,R.jsx)(S.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:s.formatMessage({id:"avatar"}),children:(0,R.jsxs)(V.G,{onSuccess:P,onError:function(e){console.log("handleUploadError:",e),c.yw.error(e)},children:[(0,R.jsx)(M.C,{src:A}),(0,R.jsx)(C.ZP,{icon:(0,R.jsx)(L.Z,{}),children:s.formatMessage({id:"upload"})})]},"avatar")}),(0,R.jsx)(F.Z,{width:"md",name:"nickname",label:s.formatMessage({id:"nickname"}),rules:[{required:!0,message:s.formatMessage({id:"please.input.nickname"})}]}),(0,R.jsx)(q.Z,{name:"agents",label:s.formatMessage({id:"members"}),tooltip:s.formatMessage({id:"please.create.agents.tooltip"}),width:"md",initialValue:null===(t=p.agents)||void 0===t?void 0:t.map((function(e){return e.uid})),options:l.data.content.map((function(e){return{value:e.uid,label:u(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:s.formatMessage({id:"please.select.members"}),onChange:function(e){console.log("selected ".concat(e)),w(e)}},rules:[{required:!0,message:s.formatMessage({id:"please.select.members"})}]}),(0,R.jsx)(E.Z,{width:"md",name:"description",label:s.formatMessage({id:"description"}),rules:[{required:!0,message:s.formatMessage({id:"please.input.description"})}]})]})})},z=o(55735),I=o(43705),O=o(71469),B=o(23635),N=(o(67560),o(40058),o(50796)),H=o(75808),G=o(40836),Q=o(17082),$=o(73457),X=o(82308),J=o(67402),K=o(69088),_=o(5369),Y=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],ee=r.forwardRef((function(e,t){var o=e.fieldProps,n=e.options,r=e.radioType,s=e.layout,i=e.proFieldProps,u=e.valueEnum,a=(0,$.Z)(e,Y);return(0,R.jsx)(_.Z,(0,Q.Z)((0,Q.Z)({valueType:"button"===r?"radioButton":"radio",ref:t,valueEnum:(0,X.h)(u,void 0)},a),{},{fieldProps:(0,Q.Z)({options:n,layout:s},o),proFieldProps:i,filedConfig:{customLightMode:!0}}))})),te=r.forwardRef((function(e,t){var o=e.fieldProps,n=e.children;return(0,R.jsx)(J.ZP,(0,Q.Z)((0,Q.Z)({},o),{},{ref:t,children:n}))})),oe=(0,K.G)(te,{valuePropName:"checked",ignoreWidth:!0});oe.Group=ee,oe.Button=J.ZP.Button,oe.displayName="ProFormComponent";var ne=oe,re=o(57178),se=o(3849),ie=function(){var e=re.Z.useForm(),t=d()(e,1)[0],o=(0,k.useIntl)(),n=(0,h.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),s=n.currentWorkgroup,u=n.setCurrentWorkgroup,l=(0,r.useState)(z.vXk),g=d()(l,2),p=g[0],v=g[1];(0,r.useEffect)((function(){s&&(v(s.routingMode),t.setFieldValue("routingMode",s.routingMode))}),[s]);var m=function(){var e=a()(i()().mark((function e(t){var n,r,a,l,d,g,p,v,m,h;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),c.yw.loading(o.formatMessage({id:"workgroup.route.updating"})),m=U()(U()(U()({},s),t),{},{serviceSettings:U()(U()({},s.serviceSettings),{},{welcomeFaqUids:null==s||null===(n=s.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),faqUids:null==s||null===(r=s.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null===(a=s.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==s||null===(l=s.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==s||null===(d=s.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==s||null===(g=s.serviceSettings)||void 0===g||null===(g=g.shortcutFaqs)||void 0===g?void 0:g.map((function(e){return e.uid}))}),robotSettings:U()(U()({},s.robotSettings),{},{robotUid:null==s||null===(p=s.robotSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid}),messageLeaveSettings:U()(U()({},s.messageLeaveSettings),{},{worktimeUids:null==s||null===(v=s.messageLeaveSettings)||void 0===v||null===(v=v.worktimes)||void 0===v?void 0:v.map((function(e){return e.uid}))}),agentUids:s.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",m),e.next=6,(0,f.W5)(m);case 6:h=e.sent,console.log("updateWorkGroup response:",h),200===h.code?(c.yw.destroy(),c.yw.success(o.formatMessage({id:"workgroup.route.update.success"})),u(h.data)):(c.yw.destroy(),c.yw.error(o.formatMessage({id:"workgroup.route.update.error"})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsxs)(S.A,{form:t,onFinish:m,children:[(0,R.jsx)(ne.Group,{name:"routingMode",label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.type",defaultMessage:"Route Type"}),options:[{label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.roundRobin",defaultMessage:"Round Robin"}),value:z.vXk},{label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.leastActive",defaultMessage:"Least Active"}),value:z.ZD$},{label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.random",defaultMessage:"Random"}),value:z.owQ},{label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.weightedRandom",defaultMessage:"Weighted Random"}),value:z.e2F},{label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.consistentHash",defaultMessage:"Consistent Hash"}),value:z.zWk},{label:(0,R.jsx)(k.FormattedMessage,{id:"workgroup.route.fastestResponse",defaultMessage:"Fastest Response"}),value:z.HQF}],fieldProps:{value:p,onChange:function(e){console.log("radio checked",e.target.value),v(e.target.value)}}}),(0,R.jsxs)(S.A.Item,{children:[p===z.vXk&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.roundRobin.desc"})}),p===z.ZD$&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.leastActive.desc"})}),p===z.owQ&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.random.desc"})}),p===z.e2F&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.weightedRandom.desc"})}),p===z.zWk&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.consistentHash.desc"})}),p===z.HQF&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.fastestResponse.desc"})}),p===z.JEC&&(0,R.jsx)("p",{children:o.formatMessage({id:"workgroup.route.broadcast.desc"})})]})]}),(0,R.jsxs)(se.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,R.jsx)(C.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:o.formatMessage({id:"workgroup.chat.show"})}),(0,R.jsx)(C.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:o.formatMessage({id:"workgroup.chat.hide"})})]})]})},ue=o(98473),ae=o(66916),le=(o(66310),o(68969),function(){var e=(0,k.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"faq",label:(0,R.jsx)(k.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,R.jsx)(I.Z,{type:z.aZD})},{key:"quickFaqs",label:(0,R.jsx)(k.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"QuickButton"}),children:(0,R.jsx)(O.Z,{type:z.aZD})},{key:"rate",label:(0,R.jsx)(k.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,R.jsx)(B.Z,{type:z.aZD})},{key:"right",label:(0,R.jsx)(k.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,R.jsx)(G.Z,{type:z.aZD})},{key:"popup",label:(0,R.jsx)(k.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,R.jsx)(H.Z,{type:z.aZD})},{key:"trigger",label:(0,R.jsx)(k.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,R.jsx)(ue.Z,{type:z.aZD})},{key:"route",label:(0,R.jsx)(k.FormattedMessage,{id:"pages.workgroup.tab.route",defaultMessage:"Route"}),children:(0,R.jsx)(ie,{})},{key:"inputassociation",label:(0,R.jsx)(k.FormattedMessage,{id:"inputassociation",defaultMessage:"Input Association"}),children:(0,R.jsx)(N.Z,{type:z.aZD})}]}),[e]);return(0,R.jsx)(T.Z,{tabPosition:"left",items:t})}),de=o(80690),ce=o(76711),ge=o.n(ce),fe=o(85954),pe=o(62577),ve=o(42965),me=o(63653),he=["fieldProps","proFieldProps"],xe=["fieldProps","proFieldProps"],be="time",ke=r.forwardRef((function(e,t){var o=e.fieldProps,n=e.proFieldProps,s=(0,$.Z)(e,he),i=(0,r.useContext)(me.Z);return(0,R.jsx)(_.Z,(0,Q.Z)({ref:t,fieldProps:(0,Q.Z)({getPopupContainer:i.getPopupContainer},o),valueType:"timeRange",proFieldProps:n,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(e){return(0,ve.c)(e,"HH:mm:ss")}}},s))})),ye=function(e){var t=e.fieldProps,o=e.proFieldProps,n=(0,$.Z)(e,xe),s=(0,r.useContext)(me.Z);return(0,R.jsx)(_.Z,(0,Q.Z)({fieldProps:(0,Q.Z)({getPopupContainer:s.getPopupContainer},t),valueType:be,proFieldProps:o,filedConfig:{customLightMode:!0,valueType:be}},n))};ye.RangePicker=ke;var we=ye,Ce=o(28977),je=o.n(Ce);function Me(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=a()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("/api/v1/worktime/create",{method:"POST",data:U()(U()({},t),{},{client:z.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=a()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("/api/v1/worktime/update",{method:"POST",data:U()(U()({},t),{},{client:z.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return Re.apply(this,arguments)}function Re(){return(Re=a()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("/api/v1/worktime/delete",{method:"POST",data:U()(U()({},t),{},{client:z.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var We="HH:mm:ss",Ae=function(e){var t=e.type,o=S.A.useForm(),n=d()(o,1)[0],s=(0,k.useIntl)(),u=(0,r.useRef)(!1),l=(0,r.useRef)(),p=(0,v.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),x=p.currentAgent,b=p.setCurrentAgent,y=(0,h.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),w=y.currentWorkgroup,C=y.setCurrentWorkgroup,j=(0,r.useState)([]),M=d()(j,2),F=M[0],W=M[1],A=(0,m.u)((function(e){return e.currentOrg})),T=(0,Z.Z)().translateString,P=(0,r.useState)([]),E=d()(P,2),L=E[0],V=E[1];(0,r.useEffect)((function(){var e,o,r,s,i;if(t===z.Njn)V(null==x||null===(e=x.messageLeaveSettings)||void 0===e?void 0:e.worktimes),n.setFieldValue("defaultRobot",null==x||null===(o=x.robotSettings)||void 0===o?void 0:o.defaultRobot),n.setFieldValue("offlineRobot",null==x||null===(r=x.robotSettings)||void 0===r?void 0:r.offlineRobot),n.setFieldValue("nonWorktimeRobot",null==x||null===(s=x.robotSettings)||void 0===s?void 0:s.nonWorktimeRobot),n.setFieldValue("robotUid",null==x||null===(i=x.robotSettings)||void 0===i||null===(i=i.robot)||void 0===i?void 0:i.uid);else if(t===z.aZD){var u,a,l,d,c;V(null==w||null===(u=w.messageLeaveSettings)||void 0===u?void 0:u.worktimes),n.setFieldValue("defaultRobot",null==w||null===(a=w.robotSettings)||void 0===a?void 0:a.defaultRobot),n.setFieldValue("offlineRobot",null==w||null===(l=w.robotSettings)||void 0===l?void 0:l.offlineRobot),n.setFieldValue("nonWorktimeRobot",null==w||null===(d=w.robotSettings)||void 0===d?void 0:d.nonWorktimeRobot),n.setFieldValue("robotUid",null==w||null===(c=w.robotSettings)||void 0===c||null===(c=c.robot)||void 0===c?void 0:c.uid)}}),[x,w]);var D=function(){var e=a()(i()().mark((function e(){var t,o,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.current){e.next=3;break}return console.log("isLoading: 1",u.current),e.abrupt("return");case 3:return u.current=!0,c.yw.loading("loading"),t={pageNumber:0,pageSize:50,type:z.f4h,orgUid:null==A?void 0:A.uid},e.next=8,(0,ae.p0)(t);case 8:o=e.sent,console.log("queryRobotsByOrg: ",o),200===o.code?W(null===(n=o.data)||void 0===n?void 0:n.content):c.yw.error(o.message),u.current=!1,c.yw.destroy();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){D()}),[]);var I,O,B=function(){var e=a()(i()().mark((function e(o){var n,r,u,a,l,d,p,v,m,h,k,y,j,M,Z,S,F;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",o),!(o.defaultRobot||o.offlineRobot||o.nonWorktimeRobot)){e.next=5;break}if(o.robotUid){e.next=5;break}return c.yw.error("请选择客服机器人"),e.abrupt("return");case 5:if(c.yw.loading(s.formatMessage({id:"updating",defaultMessage:"updating"})),t!==z.Njn){e.next=16;break}return p=U()(U()({},x),{},{serviceSettings:U()(U()({},x.serviceSettings),{},{welcomeFaqUids:null==x||null===(n=x.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),quickFaqUids:null===(r=x.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null===(u=x.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==x||null===(a=x.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==x||null===(l=x.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(d=x.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),messageLeaveSettings:U()(U()({},x.messageLeaveSettings),{},{worktimeUids:L.map((function(e){return null==e?void 0:e.uid}))}),robotSettings:U()(U()({},x.robotSettings),{},{defaultRobot:o.defaultRobot,offlineRobot:o.offlineRobot,nonWorktimeRobot:o.nonWorktimeRobot,robotUid:o.robotUid}),maxThreadCount:(null==o?void 0:o.maxThreadCount)||10,autoReplySettings:U()({},x.autoReplySettings)}),console.log("agentObject:",p),e.next=11,(0,g.sE)(p);case 11:v=e.sent,console.log("updateAgent response:",v),200===v.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),b(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=24;break;case 16:if(t!==z.aZD){e.next=24;break}return S=U()(U()({},w),{},{serviceSettings:U()(U()({},w.serviceSettings),{},{welcomeFaqUids:null==w||null===(m=w.serviceSettings)||void 0===m||null===(m=m.welcomeFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null===(h=w.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null===(k=w.serviceSettings)||void 0===k||null===(k=k.faqs)||void 0===k?void 0:k.map((function(e){return e.uid})),guessFaqUids:null==w||null===(y=w.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==w||null===(j=w.serviceSettings)||void 0===j||null===(j=j.hotFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),shortcutFaqUids:null==w||null===(M=w.serviceSettings)||void 0===M||null===(M=M.shortcutFaqs)||void 0===M?void 0:M.map((function(e){return e.uid}))}),messageLeaveSettings:U()(U()({},w.messageLeaveSettings),{},{worktimeUids:L.map((function(e){return null==e?void 0:e.uid}))}),robotSettings:U()(U()({},w.robotSettings),{},{defaultRobot:o.defaultRobot,offlineRobot:o.offlineRobot,nonWorktimeRobot:o.nonWorktimeRobot,robotUid:o.robotUid}),agentUids:null==w||null===(Z=w.agents)||void 0===Z?void 0:Z.map((function(e){return e.uid}))}),console.log("workgroupObject:",S),e.next=21,(0,f.W5)(S);case 21:F=e.sent,console.log("updateWorkGroup response:",F),200===F.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),C(F.data)):(c.yw.destroy(),c.yw.error(F.message));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=[];return L.map((function(t){e.push({worktime:[je()(t.startTime,We),je()(t.endTime,We)]})})),e},H=function(){var e=a()(i()().mark((function e(t,o,n){var r,s,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onWorktimeChange:",n,o),s={uid:null===(r=L[n])||void 0===r?void 0:r.uid,startTime:o[0],endTime:o[1]},e.next=4,Se(s);case 4:u=e.sent,console.log("updateWorktime response:",u),200===u.code||c.yw.error(u.message);case 7:case"end":return e.stop()}}),e)})));return function(t,o,n){return e.apply(this,arguments)}}(),G=function(){var e=a()(i()().mark((function e(){var t,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createWorktime"),t={startTime:"00:00:00",endTime:"23:59:59"},e.next=4,Me(t);case 4:o=e.sent,console.log("createWorktime response:",o),200===o.code?V([].concat(ge()(L),[o.data])):c.yw.error(o.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=a()(i()().mark((function e(t){var o,n,r,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWorktime:",t,null===(o=L[t])||void 0===o?void 0:o.uid),r={uid:null===(n=L[t])||void 0===n?void 0:n.uid},e.next=4,qe(r);case 4:s=e.sent,console.log("deleteWorktime response:",s),200===s.code?V(L.filter((function(e,o){return o!==t}))):c.yw.error(s.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){console.log("worktimes:",L),n.setFieldValue("worktimes",N())}),[L]),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(S.A,{form:n,style:{marginLeft:"20px"},onFinish:B,children:[(0,R.jsx)(fe.Z,{name:"defaultRobot",width:"md",label:"默认启用机器人"}),(0,R.jsx)(fe.Z,{name:"offlineRobot",width:"md",label:"无客服在线时启用机器人"}),(0,R.jsx)(fe.Z,{name:"nonWorktimeRobot",width:"md",label:"非工作时间启用机器人"}),(0,R.jsx)(pe.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"工作时间区间，支持多个",creatorRecord:{worktime:[je()("00:00:00",We),je()("23:59:59",We)]},initialValue:N(),creatorButtonProps:{creatorButtonText:"添加",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"删除"},itemRender:function(e){var t=e.listDom,o=e.action;return(0,R.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[t,o]})},min:1,max:4,actionRef:l,actionGuard:{beforeAddRow:(O=a()(i()().mark((function e(t,o,n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("beforeAddRow:",t,o),e.next=3,G();case 3:return e.abrupt("return",new Promise((function(e){e(!0)})));case 4:case"end":return e.stop()}}),e)}))),function(e,t,o){return O.apply(this,arguments)}),beforeRemoveRow:(I=a()(i()().mark((function e(t,o){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("beforeRemoveRow:",t),e.next=3,Q(t);case 3:return e.abrupt("return",new Promise((function(e){e(0!==t)})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)})},children:function(e,t,o){return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(we.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(e,o){H(e,o,t)},format:We}},"worktime")})}}),(0,R.jsx)(q.Z,{name:"robotUid",label:"客服机器人",width:"md",options:F.map((function(e){return{value:e.uid,label:T(e.nickname)}})),fieldProps:{allowClear:!0,placeholder:"请选择客服机器人"}})]})})},Te=o(14238),Pe=o(87491),Ue=o(88996),Ee=o(80601),Le=o(88201),Ve=o(5602),De=o(62673),ze=o(59485),Ie=o(38775),Oe=o(80556),Be=o(40074),Ne=o(58791),He=o(61353),Ge=o(16852),Qe=o(40439),$e=o(59145),Xe=o(58087),Je=o(10022),Ke=o(11757),_e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Ye=o(54183),et=function(e,t){return r.createElement(Ye.Z,(0,Ke.Z)({},e,{ref:t,icon:_e}))};var tt=r.forwardRef(et),ot=o(70185),nt=function(){var e=(0,k.useIntl)(),t=(0,r.useContext)(ot.I).isDarkMode,o=(0,h.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),n=o.currentWorkgroup,s=o.setCurrentWorkgroup,u=(0,m.u)((function(e){return e.currentOrg})),l=(0,r.useState)(!1),g=d()(l,2),p=g[0],v=g[1],b=(0,r.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),y=d()(b,2),w=y[0],j=y[1],M={connectedAgentCount:(null==n?void 0:n.connectedAgentCount)||0,availableAgentCount:(null==n?void 0:n.availableAgentCount)||0,offlineAgentCount:(null==n?void 0:n.offlineAgentCount)||0,busyAgentCount:(null==n?void 0:n.busyAgentCount)||0,awayAgentCount:(null==n?void 0:n.awayAgentCount)||0},Z=function(){var t=a()(i()().mark((function t(){var o,r,s,a,l,d,g,f,p,m,h,x,b;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),v(!0),c.yw.info(e.formatMessage({id:"refresh",defaultMessage:"正在刷新队列数据..."})),t.prev=3,o={pageNumber:0,pageSize:100,agentUid:null==n?void 0:n.uid,orgUid:null==u?void 0:u.uid},t.next=7,(0,Pe.Wq)(o);case 7:r=t.sent,console.log("queryQueuesByOrg response:",r.data),200==(null==r?void 0:r.code)?(c.yw.destroy(),null!=r&&null!==(s=r.data)&&void 0!==s&&s.content&&r.data.content.length>0?(b=r.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),j({totalCount:null!==(a=b.totalCount)&&void 0!==a?a:0,queuingCount:null!==(l=b.queuingCount)&&void 0!==l?l:0,chattingCount:null!==(d=b.chattingCount)&&void 0!==d?d:0,offlineCount:null!==(g=b.offlineCount)&&void 0!==g?g:0,closedCount:null!==(f=b.closedCount)&&void 0!==f?f:0,leaveMsgCount:null!==(p=b.leaveMsgCount)&&void 0!==p?p:0,robotToAgentCount:null!==(m=b.robotToAgentCount)&&void 0!==m?m:0,avgWaitTime:null!==(h=b.avgWaitTime)&&void 0!==h?h:0,avgResolveTime:null!==(x=b.avgResolveTime)&&void 0!==x?x:0})):j({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):c.yw.error(null==r?void 0:r.message);case 10:return t.prev=10,v(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var e=a()(i()().mark((function e(){var t,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("requestWorkgroup"),t={pageNumber:0,pageSize:100,uid:null==n?void 0:n.uid,orgUid:null==u?void 0:u.uid},e.next=4,(0,f.c$)(t);case 4:o=e.sent,console.log("queryWorkgroupByUid response:",o),200==(null==o?void 0:o.code)&&(c.yw.destroy(),s(o.data));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){Z()}),[n]);var F={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},q={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,R.jsxs)("div",{style:{padding:"4px"},children:[(0,R.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,R.jsx)(Ue.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"刷新数据"}),children:(0,R.jsx)(C.ZP,{type:"primary",icon:(0,R.jsx)(Oe.Z,{}),loading:p,onClick:function(){console.log("handleRefresh"),Z(),S()},size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})})})}),(0,R.jsxs)(Ee.Z,{spinning:p,children:[(0,R.jsxs)(Le.Z,{gutter:[16,16],children:[(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.totalCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"总会话"}),value:w.totalCount,prefix:(0,R.jsx)(Be.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.queuingCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"排队中"}),value:w.queuingCount,prefix:(0,R.jsx)(Ne.Z,{}),valueStyle:{color:"#fa8c16"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.chattingCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"会话中"}),value:w.chattingCount,prefix:(0,R.jsx)(He.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.offlineCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"离线留言"}),value:w.offlineCount,prefix:(0,R.jsx)(Ge.Z,{}),valueStyle:{color:"#8c8c8c"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.closedCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"已关闭"}),value:w.closedCount,prefix:(0,R.jsx)(Qe.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.leaveMsgCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"留言数"}),value:w.leaveMsgCount,prefix:(0,R.jsx)($e.Z,{}),valueStyle:{color:q.leaveMsgCount.valueColor}})})})]}),(0,R.jsx)(Ie.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"更多统计"})}),(0,R.jsx)(Le.Z,{gutter:[16,16],children:(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.robotToAgentCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"转人工数"}),value:w.robotToAgentCount,prefix:(0,R.jsx)(Xe.Z,{}),valueStyle:{color:q.robotToAgentCount.valueColor}})})})}),(0,R.jsx)(Ie.Z,{style:{margin:"16px 0",fontSize:"14px"},children:"客服状态"}),(0,R.jsxs)(Le.Z,{gutter:[16,16],children:[(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.totalCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"agent.connectedCount",defaultMessage:"在线客服"}),value:M.connectedAgentCount,prefix:(0,R.jsx)(Je.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.queuingCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"agent.availableCount",defaultMessage:"空闲客服"}),value:M.availableAgentCount,prefix:(0,R.jsx)(tt,{}),valueStyle:{color:"#52c41a"}})})}),(0,R.jsx)(Ve.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,R.jsx)(De.Z,{style:U()(U()({},F),{},{backgroundColor:q.chattingCount.bg}),hoverable:!0,children:(0,R.jsx)(ze.Z,{title:e.formatMessage({id:"agent.busyCount",defaultMessage:"忙碌客服"}),value:M.busyAgentCount,prefix:(0,R.jsx)(x.Z,{}),valueStyle:{color:"#fa8c16"}})})})]})]})]})},rt=function(){var e=(0,k.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,R.jsx)(D,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,R.jsx)(Te.Z,{type:z.aZD})},{key:"robot",label:e.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,R.jsx)(Ae,{type:z.aZD})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,R.jsx)(le,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,R.jsx)(nt,{})},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,R.jsx)(de.Z,{type:z.aZD})}]}),[e]);return(0,R.jsx)(T.Z,{defaultActiveKey:"basic",items:t})},st=o(96865),it=n.Z.Sider,ut=n.Z.Content,at=function(){var e=(0,st.Z)(),t=e.leftSiderStyle,o=e.leftSiderWidth;return(0,R.jsxs)(n.Z,{children:[(0,R.jsx)(it,{width:o,style:t,children:(0,R.jsx)(A,{})}),(0,R.jsx)(n.Z,{children:(0,R.jsx)(ut,{children:(0,R.jsx)(rt,{})})})]})}}}]);