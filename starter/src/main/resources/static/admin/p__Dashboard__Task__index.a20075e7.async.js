"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4759],{21850:function(e,t,r){var n=r(25553);t.Z=function(){var e=(0,n.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},6266:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n=r(73193),a=r.n(n),i=r(21850),u=r(21600),s=r(44194),o=r(90819),c=r.n(o),d=r(89933),l=r.n(d),p=r(43388),h=r(94976),f=r(4628);function v(e){return x.apply(this,arguments)}function x(){return(x=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/quartz_task/query/org",{method:"GET",params:a()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/quartz_task/startJob",{method:"POST",data:a()(a()({},t),{},{channel:h.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/quartz_task/pauseJob",{method:"POST",data:a()(a()({},t),{},{channel:h.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return g.apply(this,arguments)}function g(){return(g=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/quartz_task/resumeJob",{method:"POST",data:a()(a()({},t),{},{channel:h.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return S.apply(this,arguments)}function S(){return(S=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/quartz_task/deleteJob",{method:"POST",data:a()(a()({},t),{},{channel:h.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=r(74171),j=r(44565),z=r(69533),J=r(31549),T=function(){var e=(0,q.u)((function(e){return e.currentOrg})),t=(0,s.useRef)(),r=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:"任务名称",dataIndex:"jobName",copyable:!0,width:180,fixed:"left"},{title:"任务组",dataIndex:"jobGroup",copyable:!0,width:160},{title:"方法",dataIndex:"jobMethodName",ellipsis:!0,width:160},{title:"Cron",dataIndex:"cronExpression",copyable:!0,ellipsis:!0,width:200},{title:"状态",dataIndex:"triggerState",width:140},{title:"更新时间",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:"操作",valueType:"option",key:"option",width:240,fixed:"right",render:function(e,r){return[(0,J.jsx)(z.ZP,{size:"small",onClick:l()(c()().mark((function e(){var n,a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(r);case 2:200===(n=e.sent).code?(p.yw.success("启动成功"),null===(a=t.current)||void 0===a||a.reload()):p.yw.error(n.message||"启动失败");case 4:case"end":return e.stop()}}),e)}))),children:"启动"},"start"),(0,J.jsx)(z.ZP,{size:"small",onClick:l()(c()().mark((function e(){var n,a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:200===(n=e.sent).code?(p.yw.success("暂停成功"),null===(a=t.current)||void 0===a||a.reload()):p.yw.error(n.message||"暂停失败");case 4:case"end":return e.stop()}}),e)}))),children:"停止"},"pause"),(0,J.jsx)(z.ZP,{size:"small",onClick:l()(c()().mark((function e(){var n,a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(r);case 2:200===(n=e.sent).code?(p.yw.success("重启成功"),null===(a=t.current)||void 0===a||a.reload()):p.yw.error(n.message||"重启失败");case 4:case"end":return e.stop()}}),e)}))),children:"重启"},"resume"),(0,J.jsx)(z.ZP,{size:"small",danger:!0,onClick:l()(c()().mark((function e(){var n,a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(r);case 2:200===(n=e.sent).code?(p.yw.success("删除成功"),null===(a=t.current)||void 0===a||a.reload()):p.yw.error(n.message||"删除失败");case 4:case"end":return e.stop()}}),e)}))),children:"删除"},"delete")]}}];return(0,J.jsx)(j.Z,{columns:r,actionRef:t,cardBordered:!0,rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0},request:function(){var t=l()(c()().mark((function t(r,n){var i,u,s,o,d,l;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object.keys(n||{})[0],o=s?n[s]:void 0,delete(d=a()(a()({pageNumber:r.current?r.current-1:0,pageSize:r.pageSize,orgUid:null==e?void 0:e.uid},r),{},{sortBy:s,sortDirection:o})).current,t.next=6,v(d);case 6:return 200!==(l=t.sent).code&&p.yw.error(l.message),t.abrupt("return",{data:(null==l||null===(i=l.data)||void 0===i?void 0:i.content)||[],success:!0,total:(null==l||null===(u=l.data)||void 0===u?void 0:u.totalElements)||0});case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()})};function Z(e){return O.apply(this,arguments)}function O(){return(O=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/task_list/query/org",{method:"GET",params:a()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(){var e=(0,q.u)((function(e){return e.currentOrg}));return(0,J.jsx)(j.Z,{columns:[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:"名称",dataIndex:"name",copyable:!0,width:180,fixed:"left"},{title:"描述",dataIndex:"description",ellipsis:!0,width:240},{title:"类型",dataIndex:"type",width:160,ellipsis:!0},{title:"UID",dataIndex:"uid",copyable:!0,hideInSearch:!0,width:200,ellipsis:!0},{title:"创建时间",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180},{title:"更新时间",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],cardBordered:!0,rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0},request:function(){var t=l()(c()().mark((function t(r,n){var i,u,s,o,d,l;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object.keys(n||{})[0],o=s?n[s]:void 0,delete(d=a()(a()({pageNumber:r.current?r.current-1:0,pageSize:r.pageSize,orgUid:null==e?void 0:e.uid},r),{},{sortBy:s,sortDirection:o})).current,t.next=6,Z(d);case 6:return 200!==(l=t.sent).code&&p.yw.error(l.message),t.abrupt("return",{data:(null==l||null===(i=l.data)||void 0===i?void 0:i.content)||[],success:!0,total:(null==l||null===(u=l.data)||void 0===u?void 0:u.totalElements)||0});case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()})};function P(e){return C.apply(this,arguments)}function C(){return(C=l()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/v1/task/query/org",{method:"GET",params:a()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=(0,q.u)((function(e){return e.currentOrg}));return(0,J.jsx)(j.Z,{columns:[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:"名称",dataIndex:"name",copyable:!0,width:180,fixed:"left"},{title:"描述",dataIndex:"description",ellipsis:!0,width:240},{title:"类型",dataIndex:"type",width:160,ellipsis:!0},{title:"UID",dataIndex:"uid",copyable:!0,hideInSearch:!0,width:200,ellipsis:!0},{title:"创建时间",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180},{title:"更新时间",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],cardBordered:!0,rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0},request:function(){var t=l()(c()().mark((function t(r,n){var i,u,s,o,d,l;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object.keys(n||{})[0],o=s?n[s]:void 0,delete(d=a()(a()({pageNumber:r.current?r.current-1:0,pageSize:r.pageSize,orgUid:null==e?void 0:e.uid},r),{},{sortBy:s,sortDirection:o})).current,t.next=6,P(d);case 6:return 200!==(l=t.sent).code&&p.yw.error(l.message),t.abrupt("return",{data:(null==l||null===(i=l.data)||void 0===i?void 0:i.content)||[],success:!0,total:(null==l||null===(u=l.data)||void 0===u?void 0:u.totalElements)||0});case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()})},D=function(){var e=(0,i.Z)().contentStyle,t=[{key:"quartz",label:"定时任务",children:(0,J.jsx)(T,{})},{key:"todo",label:"待办任务",children:(0,J.jsx)(E,{})},{key:"list",label:"待办列表",children:(0,J.jsx)(B,{})}];return(0,J.jsx)("div",{style:a()(a()({},e),{},{height:"100%"}),children:(0,J.jsx)(u.Z,{items:t})})}}}]);