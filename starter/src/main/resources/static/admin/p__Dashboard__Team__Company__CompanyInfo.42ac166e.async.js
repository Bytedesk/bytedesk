"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9814],{59908:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(11757),a=n(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=n(54183),i=function(e,r){return a.createElement(s.Z,(0,t.Z)({},e,{ref:r,icon:o}))};var c=a.forwardRef(i)},32350:function(e,r,n){var t=n(17082),a=n(73457),o=n(44194),s=n(7010),i=n(31549),c=["fieldProps","proFieldProps"],u=function(e,r){var n=e.fieldProps,o=e.proFieldProps,u=(0,a.Z)(e,c);return(0,i.jsx)(s.Z,(0,t.Z)({ref:r,valueType:"textarea",fieldProps:n,proFieldProps:o},u))};r.Z=o.forwardRef(u)},17208:function(e,r,n){n.d(r,{A8:function(){return f},Kq:function(){return p},RL:function(){return m}});var t=n(90819),a=n.n(t),o=n(73193),s=n.n(o),i=n(89933),c=n.n(i),u=n(55735),l=n(30921);function f(e){return d.apply(this,arguments)}function d(){return(d=c()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/query",{method:"GET",params:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=c()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/create",{method:"POST",data:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=c()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/org/update",{method:"POST",data:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6631:function(e,r,n){n.d(r,{G:function(){return d}});var t=n(73193),a=n.n(t),o=(n(44194),n(30348)),s=n(55735),i=n(28977),c=n.n(i),u=n(86803),l=n(44521),f=n(31549),d=function(e){var r=e.children,n=e.onSuccess,t=e.onError,i={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:s.IrL,categoryUid:"",kbUid:"",client:s.bVn},d={name:"file",accept:"image/*",action:(0,l.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var r=c()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return i.file=e,i.fileName=r,i.fileType=e.type,console.log("beforeUpload",i),!0},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var r=e.file.response.data.fileUrl;n(r),u.yw.success("".concat(e.file.name," 上传成功"))}else t(e.file),u.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(u.yw.error("".concat(e.file.name," 上传失败")),t(e.file))}};return(0,f.jsx)(o.Z,a()(a()({},d),{},{children:r}))}},76125:function(e,r,n){n.r(r);var t=n(90819),a=n.n(t),o=n(73193),s=n.n(o),i=n(89933),c=n.n(i),u=n(45332),l=n.n(u),f=n(86803),d=n(17208),p=n(40612),g=n(6631),m=n(59908),h=n(69169),v=n(4499),y=n(32350),w=n(30921),b=n(57178),M=n(84288),x=n(75365),Z=n(44194),j=n(31549);r.default=function(){var e=b.Z.useForm(),r=l()(e,1)[0],n=(0,w.useIntl)(),t=(0,p.u)((function(e){return{currentOrg:e.currentOrg,setCurrentOrg:e.setCurrentOrg}})),o=t.currentOrg,i=t.setCurrentOrg,u=(0,Z.useState)(""),k=l()(u,2),O=k[0],P=k[1],U=function(){var e=c()(a()().mark((function e(r){var t,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.yw.loading({content:n.formatMessage({id:"saveing"}),key:"save",duration:0}),t=s()(s()(s()({},o),r),{},{logo:O}),console.log("orgObject:",t),e.next=5,(0,d.RL)(t);case 5:c=e.sent,console.log("updateOrg response:",c),200===c.code?(f.yw.destroy(),f.yw.success(n.formatMessage({id:"update.success"})),i(c.data)):(f.yw.destroy(),f.yw.error(c.message));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,Z.useEffect)((function(){o&&P(o.logo)}),[o]),(0,j.jsx)("div",{children:(0,j.jsxs)(h.A,{form:r,initialValues:{name:o.name,description:o.description},onFinish:U,children:[(0,j.jsx)(b.Z.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,j.jsxs)(g.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),P(e)},onError:function(e){console.log("handleUploadError:",e)},children:[(0,j.jsx)(M.C,{src:O}),(0,j.jsx)(x.ZP,{icon:(0,j.jsx)(m.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,j.jsx)(v.Z,{rules:[{required:!0,message:n.formatMessage({id:"name",defaultMessage:"Name"})}],label:n.formatMessage({id:"name",defaultMessage:"Name"}),name:"name",width:"md"}),(0,j.jsx)(y.Z,{rules:[{required:!0,message:n.formatMessage({id:"description",defaultMessage:"Description"})}],label:n.formatMessage({id:"description",defaultMessage:"Description"}),name:"description",width:"md"})]})})}}}]);