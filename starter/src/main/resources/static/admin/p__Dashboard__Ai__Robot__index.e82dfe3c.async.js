"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8472],{33798:function(e,t,n){var i=n(90819),r=n.n(i),s=n(89933),o=n.n(s),a=n(45332),l=n.n(a),u=n(74341),d=n(93527),c=n(11591),g=n(67559),f=n(44679),v=n(14888),m=n(6844),p=n(90104),h=n(30064),x=n(68263),b=n(19736),S=n(44194),w=n(53816),y=n(36125),M=n(31549);t.Z=function(e){var t,n,i,s,a=h.A.useForm(),j=l()(a,1)[0],k=(0,b.useIntl)(),C=(0,f.Z)().translateString,Z=(0,v.u)((function(e){return e.currentOrg})),F=(0,S.useState)(),U=l()(F,2),T=U[0],q=U[1],P=(0,S.useState)(),I=l()(P,2),R=I[0],K=I[1],A=(0,S.useState)(),D=l()(A,2),E=D[0],L=D[1],N=(0,S.useState)(""),O=l()(N,2),z=O[0],B=O[1],J=(0,S.useRef)(!1),V=(0,S.useRef)(),W=(0,S.useMemo)((function(){var t;return null!==(t=e.serviceSettings)&&void 0!==t?t:{}}),[e.serviceSettings]),H=(0,S.useMemo)((function(){var e,t;return null!==(e=null!==(t=null==W?void 0:W.draft)&&void 0!==t?t:null==W?void 0:W.live)&&void 0!==e?e:void 0}),[W]),Q=(0,S.useCallback)((function(t){var n;null===(n=e.onServiceSettingsChange)||void 0===n||n.call(e,t)}),[e.onServiceSettingsChange]),G=(0,S.useCallback)((function(e){j.setFieldValue("welcomeTip",e),Q({welcomeTip:e})}),[j,Q]);(0,S.useEffect)((function(){if(null!=Z&&Z.uid&&(V.current!==Z.uid&&(V.current=Z.uid,J.current=!1),!J.current)){J.current=!0;var e=function(){var e=o()(r()().mark((function e(){var t,n,i,s,o,a,l;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(k.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,type:m.QPQ,orgUid:Z.uid},e.next=4,(0,g.AP)(t);case 4:n=e.sent,y.Z.debug("TabServiceWelcome queryKbasesByOrg:",n,t),d.yw.destroy(),200===n.code?(K(n),o=(null==n||null===(i=n.data)||void 0===i?void 0:i.content)||[],a=null==H?void 0:H.welcomeKbUid,(l=a||E||(null===(s=o[0])||void 0===s?void 0:s.uid))&&(L(l),j.setFieldValue("welcomeKbUid",l),a!==l&&Q({welcomeKbUid:l}))):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}}),[null==Z?void 0:Z.uid,k,null==H?void 0:H.welcomeKbUid,E,j,Q]),(0,S.useEffect)((function(){if(null!=Z&&Z.uid&&E){var e=function(){var e=o()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(k.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:Z.uid,kbUid:E},e.next=4,(0,c.pf)(t);case 4:n=e.sent,y.Z.debug("TabServiceWelcome queryFaqsByOrg:",n,t),d.yw.destroy(),200===n.code?q(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}}),[null==Z?void 0:Z.uid,E,k]),(0,S.useEffect)((function(){if(H){var e=null==H?void 0:H.welcomeFaqs,t=Array.isArray(H.welcomeFaqUids)?H.welcomeFaqUids:Array.isArray(e)?e.map((function(e){return null==e?void 0:e.uid})).filter(Boolean):[];j.setFieldValue("welcomeFaqUids",t)}}),[j,null==T||null===(t=T.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length,null==H?void 0:H.welcomeFaqUids,H]);var Y=(0,S.useCallback)((function(e){L(e),j.setFieldValue("welcomeFaqUids",[]),Q({welcomeKbUid:e,welcomeFaqUids:[]})}),[Q,j]);return(0,S.useEffect)((function(){var e=C(null==H?void 0:H.welcomeTip);void 0!==e&&z!==e&&B(e),null!=H&&H.welcomeKbUid&&(j.setFieldValue("welcomeKbUid",H.welcomeKbUid),E!==H.welcomeKbUid&&L(H.welcomeKbUid))}),[C,null==H?void 0:H.welcomeTip,null==H?void 0:H.welcomeKbUid,z,j,E,null==R||null===(n=R.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length]),(0,M.jsxs)(h.A,{form:j,submitter:!1,style:{marginLeft:"20px"},children:[(0,M.jsx)(h.A.Item,{name:"welcomeTip",label:(0,M.jsxs)("span",{children:[k.formatMessage({id:"agent.settings.welcome.tip"}),(0,M.jsx)(u.Z,{type:"service",keys:["welcomeTip"],live:null==W?void 0:W.live,draft:null==W?void 0:W.draft})]}),tooltip:k.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:k.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,M.jsx)(w.Z,{placeholder:k.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:z,toolbarKeys:(0,p.eD)(),style:{height:"150px",width:"600px"},maxLength:200,onChange:G})}),(0,M.jsx)(x.Z,{name:"welcomeKbUid",width:"md",label:(0,M.jsxs)("span",{children:[k.formatMessage({id:"menu.kbase.select",defaultMessage:"é€‰æ‹©æ¬¢è¿è¯­å¸¸è§é—®é¢˜çŸ¥è¯†åº“"}),(0,M.jsx)(u.Z,{type:"service",keys:["welcomeKbUid"],live:null==W?void 0:W.live,draft:null==W?void 0:W.draft})]}),options:null==R||null===(i=R.data)||void 0===i||null===(i=i.content)||void 0===i?void 0:i.map((function(e){return{label:C(e.name)||e.name,value:e.uid}})),fieldProps:{onChange:function(e){return Y(e)},allowClear:!0,placeholder:(0,M.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}}),(0,M.jsx)(x.Z,{name:"welcomeFaqUids",width:"md",label:(0,M.jsxs)("span",{children:[k.formatMessage({id:"menu.kbase.faq.welcome"}),(0,M.jsx)(u.Z,{type:"service",keys:["welcomeFaqUids"],live:null==W?void 0:W.live,draft:null==W?void 0:W.draft})]}),options:null==T||null===(s=T.data)||void 0===s||null===(s=s.content)||void 0===s?void 0:s.map((function(e){return{label:C(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"}),onChange:function(e){return Q({welcomeFaqUids:e})}}})]})}},19935:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var i=n(44194),r=n(31167),s=n(19736),o=n(76711),a=n.n(o),l=n(90819),u=n.n(l),d=n(89933),c=n.n(d),g=n(73193),f=n.n(g),v=n(45332),m=n.n(v),p=n(85255),h=n(3925),x=n(9428),b=n(48769),S=n(71876),w=n(12792),y=n(66810),M=n(65513),j=n(77359),k=n(74840),C=n(29337),Z=n(68779),F=n(12322),U=n(34600),T=n(56482),q=n(10162),P=n(90727),I=n(59304),R=n(54881),K=n(47944),A=n(80556),D=n(55785),E=n(79866),L=n(93527),N=n(29195),O=n(14888),z=n(88449),B=n(26710),J=n(61952),V=n(2061),W=(n(47460),n(15012),n(42670)),H=n(23312),Q=n(1725),G=n(33798),Y=(n(74341),n(31549)),_=n(68972),$=n(21914),X=n(36125),ee=n(65819),te="welcome",ne=function(){var e=(0,s.useIntl)(),t=(0,O.u)((function(e){return e.currentOrg})),n=(0,z.Z)().leftSiderStyle,o=(0,B.Z)().isDarkMode,l=(0,i.useState)(!1),d=m()(l,2),g=d[0],v=d[1],ne=(0,i.useState)([]),ie=m()(ne,2),re=ie[0],se=ie[1],oe=(0,i.useState)(),ae=m()(oe,2),le=ae[0],ue=ae[1],de=(0,i.useState)(""),ce=m()(de,2),ge=ce[0],fe=ce[1],ve=(0,i.useState)(te),me=m()(ve,2),pe=me[0],he=me[1],xe=(0,i.useState)(!1),be=m()(xe,2),Se=be[0],we=be[1],ye=(0,i.useState)(null),Me=m()(ye,2),je=Me[0],ke=Me[1],Ce=(0,i.useMemo)((function(){return re.find((function(e){return e.uid===le}))||null}),[re,le]),Ze=(0,i.useState)(!1),Fe=m()(Ze,2),Ue=Fe[0],Te=Fe[1],qe=(0,i.useState)(!1),Pe=m()(qe,2),Ie=Pe[0],Re=Pe[1],Ke=(0,i.useState)(!1),Ae=m()(Ke,2),De=Ae[0],Ee=Ae[1],Le=(0,i.useRef)(""),Ne=(0,J.z)((function(e){return{setCurrentRobotSettings:e.setCurrentRobotSettings,currentRobotSettings:e.currentRobotSettings}})),Oe=Ne.setCurrentRobotSettings,ze=Ne.currentRobotSettings,Be=(0,i.useMemo)((function(){var e;return null!==(e=null!=ze?ze:Ce)&&void 0!==e?e:null}),[ze,Ce]),Je=(0,i.useCallback)((function(e){if(ze){var t=ze.draftServiceSettings||ze.serviceSettings||{};Oe(f()(f()({},ze),{},{draftServiceSettings:f()(f()({},t),e)}))}}),[ze,Oe]),Ve=(0,i.useCallback)((function(e){if(ze){var t=ze.draftInviteSettings||ze.inviteSettings||{};Oe(f()(f()({},ze),{},{draftInviteSettings:f()(f()({},t),e)}))}}),[ze,Oe]),We=(0,i.useCallback)((function(e){var t;if(ze){var n=ze.draftToolsSettings||ze.toolsSettings||{};Oe(f()(f()({},ze),{},{draftToolsSettings:f()(f()(f()({},n),e),{},{toolConfigs:null!==(t=e.toolConfigs)&&void 0!==t?t:n.toolConfigs})}))}}),[ze,Oe]),He=(0,i.useMemo)((function(){if(!ge)return re;var e=ge.toLowerCase();return re.filter((function(t){var n=(t.name||t.uid||"").toLowerCase(),i=(t.description||"").toLowerCase();return n.includes(e)||i.includes(e)}))}),[re,ge]),Qe=(0,i.useCallback)(function(){var e=c()(u()().mark((function e(n,i){var r,s,o,a,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.uid){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.prev=3,s=(null!=n?n:"").trim(),o={orgUid:t.uid,pageNumber:0,pageSize:100,searchText:s||void 0},e.next=8,(0,N.VW)(o);case 8:a=e.sent,X.Z.debug("åŠ è½½æœºå™¨äººé…ç½®æ¨¡æ¿åˆ—è¡¨: ",a,o),l=(null==a||null===(r=a.data)||void 0===r?void 0:r.content)||[],se(l),!(l.length>0)||le&&l.some((function(e){return e.uid===le}))||(ue(l[0].uid),null!=i&&i.keepActive||he(te));case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[null==t?void 0:t.uid,le]),Ge=(0,i.useCallback)((function(e){Qe(null!=e?e:ge)}),[Qe,ge]);(0,i.useEffect)((function(){Qe(ge)}),[null==t?void 0:t.uid]),(0,i.useEffect)((function(){Ce?(Oe(Ce),Le.current=JSON.stringify(null!=Ce?Ce:{}),Ee(!1)):(Oe(null),Le.current=JSON.stringify({}),Ee(!1))}),[null==Ce?void 0:Ce.uid]),(0,i.useEffect)((function(){if(Ce)try{var e,t,n=JSON.stringify(null!=ze?ze:{}),i=n!==Le.current;X.Z.debug("ğŸ” [Dirty Check]",{isDirty:i,selectedUid:null==Ce?void 0:Ce.uid,currentWelcomeTip:(null==ze||null===(e=ze.draftServiceSettings)||void 0===e?void 0:e.welcomeTip)||(null==ze||null===(t=ze.serviceSettings)||void 0===t?void 0:t.welcomeTip),originalLength:Le.current.length,nowLength:n.length}),Ee(i)}catch(e){Ee(!0)}}),[ze,null==Ce?void 0:Ce.uid]);var Ye=function(){var n=c()(u()().mark((function n(i){var r,s,o;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=(r=null!=i?i:Ce)&&r.uid){n.next=3;break}return n.abrupt("return");case 3:return s={uid:r.uid,orgUid:null==t?void 0:t.uid,pageNumber:0,pageSize:100},n.next=6,(0,N.r$)(s);case 6:(o=n.sent)&&200===o.code?(L.yw.success(e.formatMessage({id:"common.deleted",defaultMessage:"åˆ é™¤æˆåŠŸ"})),Qe(ge)):L.yw.error((null==o?void 0:o.message)||"åˆ é™¤å¤±è´¥");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),_e=function(){var n=c()(u()().mark((function n(i,r){var s;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,N.sK)({uid:i,orgUid:null==t?void 0:t.uid,enabled:r});case 3:(s=n.sent)&&200===s.code?(L.yw.success(e.formatMessage({id:r?"common.enabled":"common.disabled",defaultMessage:r?"å·²å¯ç”¨":"å·²åœç”¨"})),Qe(ge)):L.yw.error((null==s?void 0:s.message)||"æ“ä½œå¤±è´¥"),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("åˆ‡æ¢å¯ç”¨çŠ¶æ€å¤±è´¥:",n.t0),L.yw.error("æ“ä½œå¤±è´¥");case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),$e=function(e,t){if(e){var n={};return t.forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n}},Xe=function(e){if(e){var t=$e(e,["language","autoPopup","showTopTip","topTip","topTipStart","topTipEnd","showRateBtn","autoInviteRate","inviteRateTip","rateMsgCount","showPreForm","preFormRequired","preForm","showPreSearch","showHistory","showInputAssociation","showCaptcha","welcomeTip","welcomeFaqUids","welcomeKbUid","enableWorkflow","workflowUid","autoCloseMin","autoCloseTip","agentCloseTip","queueTip","leavemsgTip","showRightIframe","rightIframeUrl","showFaqs","faqUids","faqKbUid","showQuickButtons","quickButtonUids","showGuessFaqs","guessFaqUids","showHotFaqs","hotFaqUids","showShortcutFaqs","shortcutFaqUids","relatedQuestionGuide","enableProactiveTrigger","noResponseTimeout","proactiveMessage","maxProactiveCount","proactiveInterval","triggerConditions","proactiveFaqUids","showLogo","validateUntil"]),n=function(n,i){if(void 0===t[n]){var r=null==e?void 0:e[i];if(Array.isArray(r)){var s=r.map((function(e){return null==e?void 0:e.uid})).filter(Boolean);s.length>0&&(t[n]=s)}}};n("welcomeFaqUids","welcomeFaqs"),n("faqUids","faqs"),n("quickButtonUids","quickButtons"),n("guessFaqUids","guessFaqs"),n("hotFaqUids","hotFaqs"),n("shortcutFaqUids","shortcutFaqs"),n("proactiveFaqUids","proactiveFaqs");var i=function(e){if(e)return $e(e,["smile","image","file","rate","leavemsg","orderSelector","ticket","audio","video","tel","order"])}(e.toolbar);return f()(f()({},t),i?{toolbar:i}:{})}},et=function(e){if(e)return $e(e,["name","description","defaultTemplate","show","text","icon","delay","loop","loopDelay","loopCount","messageList","targetedInvite","targetedInviteUrls","smartTrigger","pageStayTriggerSeconds","scrollTrigger","scrollTriggerPerceninviteSettinge","exitIntentTrigger","referrerTrigger","referrerPatterns","deviceTypes","visitorSegmentation","newVisitorMessage","returningVisitorMessage","vipVisitorMessage","inviteStyle","inviteAnimation","abTesting"])},tt=function(e){if(e)return $e(e,["name","description","color","order"])},nt=function(e){if(e)return $e(e,["name","description","defaultTemplate","enabled","rateDownTagList","maxTagSelection","allowCustomFeedback","maxFeedbackLength","requireFollowup","showThankYouMessage","thankYouMessage","triggerSatisfactionSurvey","markForQualityInspection","offerHumanAgent"])},it=function(e){if(e){var t=$e(e,["enabled","invocationMode","toolChoice","maxToolInvocations","defaultToolPrompt"]);return e.toolConfigs&&(t.toolConfigs=e.toolConfigs.map((function(e){return $e(e,["key","name","description","category","icon","enabled","bindingType","beanName","className","methodName","endpoint","inputSchema","outputSchema","systemPrompt","orderIndex","requiresApproval","metadata"])}))),t}},rt=function(){var n=c()(u()().mark((function n(){var i,r,s,o,a,l;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=Ce&&Ce.uid){n.next=3;break}return L.yw.warning(e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})),n.abrupt("return");case 3:return Te(!0),n.prev=4,i=ze&&ze.uid===Ce.uid?ze:Ce,r=function(e,t){return f()(f()({},e||{}),t||{})},s={uid:Ce.uid,orgUid:null==t?void 0:t.uid,name:null==i?void 0:i.name,description:null==i?void 0:i.description,isDefault:null==i?void 0:i.isDefault,enabled:null==i?void 0:i.enabled,serviceSettings:Xe(r(null==i?void 0:i.serviceSettings,null==i?void 0:i.draftServiceSettings)),inviteSettings:et(r(null==i?void 0:i.inviteSettings,null==i?void 0:i.draftInviteSettings)),intentionSettings:tt(r(null==i?void 0:i.intentionSettings,null==i?void 0:i.draftIntentionSettings)),rateDownSettings:nt(r(null==i?void 0:i.rateDownSettings,null==i?void 0:i.draftRateDownSettings)),toolsSettings:it(r(null==i?void 0:i.toolsSettings,null==i?void 0:i.draftToolsSettings))},n.next=10,(0,N.sK)(s);case 10:o=n.sent,X.Z.debug("ä¿å­˜æœºå™¨äººé…ç½®æ¨¡æ¿: ",o,s),o&&200===o.code?(L.yw.success(e.formatMessage({id:"common.saved",defaultMessage:"ä¿å­˜æˆåŠŸ"})),Le.current=JSON.stringify(null!==(a=null!==(l=null==o?void 0:o.data)&&void 0!==l?l:i)&&void 0!==a?a:{}),Ee(!1),Qe(ge)):L.yw.error((null==o?void 0:o.message)||"ä¿å­˜å¤±è´¥"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("ä¿å­˜å¤±è´¥:",n.t0),L.yw.error("ä¿å­˜å¤±è´¥");case 19:return n.prev=19,Te(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,15,19,22]])})));return function(){return n.apply(this,arguments)}}(),st=function(){var n=c()(u()().mark((function n(){var i,r,s;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=Ce&&Ce.uid){n.next=3;break}return L.yw.warning(e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})),n.abrupt("return");case 3:if(Re(!0),n.prev=4,!De){n.next=8;break}return n.next=8,rt();case 8:return i={uid:Ce.uid,orgUid:null==t?void 0:t.uid},n.next=11,(0,N.KF)(i);case 11:(r=n.sent)&&200===r.code?(L.yw.success(e.formatMessage({id:"common.published",defaultMessage:"å‘å¸ƒæˆåŠŸ"})),Le.current=JSON.stringify(null!==(s=null==r?void 0:r.data)&&void 0!==s?s:{}),Ee(!1),Qe(ge,{keepActive:!0})):L.yw.error((null==r?void 0:r.message)||"å‘å¸ƒå¤±è´¥"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("å‘å¸ƒå¤±è´¥:",n.t0),L.yw.error("å‘å¸ƒå¤±è´¥");case 19:return n.prev=19,Re(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,15,19,22]])})));return function(){return n.apply(this,arguments)}}(),ot=(0,i.useMemo)((function(){return null!=Ce&&Ce.uid?[{key:"welcome",label:(0,Y.jsxs)("span",{children:[(0,Y.jsx)(k.Z,{})," ",(0,Y.jsx)(s.FormattedMessage,{id:"robot.settings.service.welcome",defaultMessage:"æ¬¢è¿è¯­è®¾ç½®"})]}),children:(0,Y.jsx)(G.Z,{serviceSettings:{live:null==Be?void 0:Be.serviceSettings,draft:null==Be?void 0:Be.draftServiceSettings},onServiceSettingsChange:Je})},{key:"tips",label:(0,Y.jsxs)("span",{children:[(0,Y.jsx)(C.Z,{})," ",(0,Y.jsx)(s.FormattedMessage,{id:"robot.settings.service.tips",defaultMessage:"æç¤ºä¿¡æ¯"})]}),children:(0,Y.jsx)(Q.Z,{variant:"robot",serviceSettings:{live:null==Be?void 0:Be.serviceSettings,draft:null==Be?void 0:Be.draftServiceSettings},onServiceSettingsChange:Je})},{key:"service",label:(0,Y.jsxs)("span",{children:[(0,Y.jsx)(Z.Z,{})," ",(0,Y.jsx)(s.FormattedMessage,{id:"robot.settings.service",defaultMessage:"æœåŠ¡è®¾ç½®"})]}),children:(0,Y.jsx)(H.Z,{variant:"robot",serviceSettings:{live:null==Be?void 0:Be.serviceSettings,draft:null==Be?void 0:Be.draftServiceSettings},onServiceSettingsChange:Je})}].concat(a()((0,ee.OJ)()?[{key:"rate",label:(0,Y.jsxs)("span",{children:[(0,Y.jsx)(F.Z,{})," ",(0,Y.jsx)(s.FormattedMessage,{id:"rate",defaultMessage:"Rate"})]}),children:(0,Y.jsx)($.Z,{variant:"robot",serviceSettings:{live:null==Be?void 0:Be.serviceSettings,draft:null==Be?void 0:Be.draftServiceSettings},onServiceSettingsChange:Je})}]:[]),a()((0,ee.OJ)()?[{key:"toolbar",label:(0,Y.jsxs)("span",{children:[(0,Y.jsx)(U.Z,{})," ",(0,Y.jsx)(s.FormattedMessage,{id:"toolbar",defaultMessage:"Toolbar"})]}),children:(0,Y.jsx)(W.Z,{variant:"robot",serviceSettings:{live:null==Be?void 0:Be.serviceSettings,draft:null==Be?void 0:Be.draftServiceSettings},settingsUid:Ce.uid,isActive:"toolbar"===pe,onServiceSettingsChange:Je})}]:[]),a()((0,ee.OJ)()?[{key:"right",label:(0,Y.jsxs)("span",{children:[(0,Y.jsx)(T.Z,{})," ",(0,Y.jsx)(s.FormattedMessage,{id:"right",defaultMessage:"Right"})]}),children:(0,Y.jsx)(V.Z,{variant:"robot",serviceSettings:{live:null==Be?void 0:Be.serviceSettings,draft:null==Be?void 0:Be.draftServiceSettings},onServiceSettingsChange:Je,settingsUid:Ce.uid,isActive:"right"===pe})}]:[]),a()([]),a()([]),a()([])):[]}),[null==Ce?void 0:Ce.uid,Be,Je,Ve,We,e,pe]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(p.Z,{style:{minHeight:"calc(100vh - 160px)"},children:[(0,Y.jsx)(p.Z.Panel,{defaultSize:"20%",min:"14%",max:"40%",style:n,children:(0,Y.jsxs)(E.Z,{title:e.formatMessage({id:"robot.settings.templates",defaultMessage:"æ¨¡æ¿åˆ—è¡¨"}),extra:(0,Y.jsx)(h.ZP,{size:"small",icon:(0,Y.jsx)(q.Z,{}),type:"primary",onClick:function(){ke(null),we(!0)},children:(0,Y.jsx)(s.FormattedMessage,{id:"common.new",defaultMessage:"æ–°å»º"})}),bodyStyle:{padding:8},loading:g,children:[(0,Y.jsx)("div",{style:{margin:"0 0 8px 0"},children:(0,Y.jsxs)(x.Z.Compact,{style:{width:"100%"},children:[(0,Y.jsx)(b.Z,{placeholder:e.formatMessage({id:"robot.settings.template.search",defaultMessage:"æœç´¢æ¨¡æ¿åç§°"}),value:ge,onChange:function(e){return fe(e.target.value)},onPressEnter:function(e){e.preventDefault();var t=e.currentTarget.value;fe(t),Ge(t)},allowClear:!0,size:"middle"}),(0,Y.jsx)(h.ZP,{type:"primary",icon:(0,Y.jsx)(P.Z,{}),"aria-label":e.formatMessage({id:"common.search",defaultMessage:"æœç´¢"}),onClick:function(){return Ge()}})]})}),(0,Y.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 280px)"},children:(0,Y.jsx)(S.Z,{dataSource:He,locale:{emptyText:(0,Y.jsx)(w.Z,{description:e.formatMessage({id:"empty",defaultMessage:"æš‚æ— æ•°æ®"}),image:w.Z.PRESENTED_IMAGE_SIMPLE})},renderItem:function(e){return(0,Y.jsx)(S.Z.Item,{style:le===e.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer",borderRadius:6,marginBottom:8,padding:10}:{cursor:"pointer",borderRadius:6,marginBottom:8,padding:10},onClick:function(){return ue(e.uid)},children:(0,Y.jsx)(S.Z.Item.Meta,{title:(0,Y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Y.jsx)("div",{style:{fontWeight:500,flex:1},children:e.name||e.uid}),(0,Y.jsx)(x.Z,{size:4,children:e.isDefault?(0,Y.jsx)(y.Z,{color:"blue",children:"é»˜è®¤"}):null})]}),description:e.description?(0,Y.jsx)("div",{style:{color:o?"#aaa":"#999",fontSize:12},children:e.description}):null})},e.uid)}})})]})}),(0,Y.jsx)(p.Z.Panel,{children:Ce?(0,Y.jsx)(E.Z,{title:(0,Y.jsxs)(x.Z,{children:[(0,Y.jsxs)("span",{children:[e.formatMessage({id:"robot.settings.editing",defaultMessage:"ç¼–è¾‘æ¨¡æ¿"}),": ",Ce.name||Ce.uid]}),(0,Y.jsx)(M.Z,{checked:!!Ce.enabled,onChange:function(e){return _e(Ce.uid,e)},checkedChildren:e.formatMessage({id:"common.enabled",defaultMessage:"å¯ç”¨"}),unCheckedChildren:e.formatMessage({id:"common.disabled",defaultMessage:"åœç”¨"})}),(0,Y.jsx)(h.ZP,{size:"small",icon:(0,Y.jsx)(I.Z,{}),onClick:function(e){var t;e.stopPropagation(),ke(null!=(t=Ce)?t:Ce),we(!0)},children:"ç¼–è¾‘"}),(0,Y.jsx)(j.Z,{title:e.formatMessage({id:"common.delete.confirm",defaultMessage:"ç¡®å®šè¦åˆ é™¤å—?"}),onConfirm:function(e){null==e||e.stopPropagation(),Ye(Ce)},onCancel:function(e){return null==e?void 0:e.stopPropagation()},okText:e.formatMessage({id:"common.confirm",defaultMessage:"ç¡®å®š"}),cancelText:e.formatMessage({id:"common.cancel",defaultMessage:"å–æ¶ˆ"}),children:(0,Y.jsx)(h.ZP,{size:"small",danger:!0,icon:(0,Y.jsx)(R.Z,{}),onClick:function(e){e.stopPropagation()},children:"åˆ é™¤"})}),Ce.isDefault?(0,Y.jsx)(y.Z,{color:"blue",children:"é»˜è®¤"}):null]}),extra:(0,Y.jsxs)(x.Z,{children:[(0,Y.jsx)(j.Z,{title:"å‘å¸ƒåˆ°çº¿ä¸Šç¯å¢ƒ",description:"åªæœ‰å‘å¸ƒä¹‹åï¼Œæ‰ä¼šåº”ç”¨åˆ°çº¿ä¸Šç¯å¢ƒ",okText:"ç»§ç»­å‘å¸ƒ",cancelText:"å–æ¶ˆ",onConfirm:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),st()},onCancel:function(e){var t;return null==e||null===(t=e.stopPropagation)||void 0===t?void 0:t.call(e)},children:(0,Y.jsx)(h.ZP,{onClick:function(e){return e.stopPropagation()},loading:Ie,type:"default",icon:(0,Y.jsx)(K.Z,{}),children:(0,Y.jsx)(s.FormattedMessage,{id:"common.publish",defaultMessage:"å‘å¸ƒ"})})}),(0,Y.jsx)(h.ZP,{onClick:function(){Ce&&(Oe(Ce),Le.current=JSON.stringify(null!=Ce?Ce:{}),Ee(!1))},disabled:!De,icon:(0,Y.jsx)(A.Z,{}),children:(0,Y.jsx)(s.FormattedMessage,{id:"common.reset",defaultMessage:"é‡ç½®"})}),(0,Y.jsx)(h.ZP,{type:"primary",loading:Ue,onClick:rt,disabled:!De,icon:(0,Y.jsx)(D.Z,{}),children:(0,Y.jsx)(s.FormattedMessage,{id:"common.save",defaultMessage:"ä¿å­˜"})})]}),children:(0,Y.jsx)(r.Z,{activeKey:pe,onChange:he,items:ot})}):(0,Y.jsx)(E.Z,{children:(0,Y.jsx)(w.Z,{description:e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})})})})]}),(0,Y.jsx)(_.Z,{open:Se,onOpenChange:we,orgUid:(null==t?void 0:t.uid)||"",record:je,onSuccess:function(){we(!1),Qe(ge)}})]})},ie=n(47009),re=function(){return(0,Y.jsx)(r.Z,{defaultActiveKey:"table",style:{padding:"10px"},items:[{key:"table",label:(0,Y.jsx)(s.FormattedMessage,{id:"menu.robot.table",defaultMessage:"Robot Account"}),children:(0,Y.jsx)(ie.Z,{})},{key:"settings",label:(0,Y.jsx)(s.FormattedMessage,{id:"menu.robot.settings",defaultMessage:"Robot Settings"}),children:(0,Y.jsx)(ne,{})}]})}}}]);