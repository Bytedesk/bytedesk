"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8238],{11090:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(11757),o=r(44194),a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},s=r(54183),l=function(e,t){return o.createElement(s.Z,(0,n.Z)({},e,{ref:t,icon:a}))};var i=o.forwardRef(l)},2041:function(e,t,r){r.d(t,{bN:function(){return g},fk:function(){return d}});var n=r(90819),o=r.n(n),a=r(73193),s=r.n(a),l=r(89933),i=r.n(l),c=r(30921);function d(e){return u.apply(this,arguments)}function u(){return(u=i()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/thread/query/org",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=i()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/thread/process/history/activity",{method:"GET",params:s()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21182:function(e,t,r){var n=r(73193),o=r.n(n),a=r(84176),s=r.n(a),l=r(90819),i=r.n(l),c=r(89933),d=r.n(c),u=r(45332),g=r.n(u),p=r(86803),m=r(2041),f=r(76750),h=r(40612),b=r(55735),v=r(44521),x=r(11090),k=r(81947),y=r(30921),C=r(53530),w=r(75365),M=r(44194),S=r(28977),j=r.n(S),I=r(88721),$=r(31549),F=["current","pageSize"];t.Z=function(e){var t=e.type,r=(0,y.useIntl)(),n=(0,M.useRef)(),a=(0,M.useState)(1),l=g()(a,2),c=l[0],u=l[1],S=(0,M.useState)(10),T=g()(S,2),O=T[0],N=T[1],E=(0,h.u)((function(e){return e.currentOrg})),P=((0,f.Z)().translateString,C.Z.useModal()),B=g()(P,2),z=(B[0],B[1]),q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,$.jsx)(y.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0},{title:(0,$.jsx)(y.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"userNickname",render:function(e,t){var r;return(0,$.jsx)($.Fragment,{children:null==t||null===(r=t.user)||void 0===r?void 0:r.nickname})}},{title:(0,$.jsx)(y.FormattedMessage,{id:"queue.member.agent",defaultMessage:"Nickname"}),dataIndex:"agentNickname",render:function(e,t){var r,n;return(0,$.jsx)($.Fragment,{children:null!=t&&null!==(r=t.agentProtobuf)&&void 0!==r&&r.nickname?null==t||null===(n=t.agentProtobuf)||void 0===n?void 0:n.nickname:"无"})}},{title:(0,$.jsx)(y.FormattedMessage,{id:"queue.member.robot",defaultMessage:"robotNickname"}),dataIndex:"robotNickname",render:function(e,t){var r,n;return(0,$.jsx)($.Fragment,{children:null!=t&&null!==(r=t.robot)&&void 0!==r&&r.nickname?null==t||null===(n=t.robot)||void 0===n?void 0:n.nickname:"无"})}},{title:(0,$.jsx)(y.FormattedMessage,{id:"queue.member.workgroup",defaultMessage:"workgroupNickname"}),dataIndex:"workgroupNickname",render:function(e,t){var r,n;return(0,$.jsx)($.Fragment,{children:null!=t&&null!==(r=t.workgroup)&&void 0!==r&&r.nickname?null==t||null===(n=t.workgroup)||void 0===n?void 0:n.nickname:"无"})}},{title:(0,$.jsx)(y.FormattedMessage,{id:"state",defaultMessage:"state"}),dataIndex:"status",copyable:!0,hideInSearch:!0,render:function(e,t){switch(null==t?void 0:t.status){case b.ach:return(0,$.jsx)(y.FormattedMessage,{id:"thread.process.status.new"});case b.j0C:return(0,$.jsx)(y.FormattedMessage,{id:"thread.process.status.roboting"});case b.Q7C:return(0,$.jsx)(y.FormattedMessage,{id:"thread.process.status.offline"});case b.v1N:return(0,$.jsx)(y.FormattedMessage,{id:"thread.process.status.queuing"});case b.hl2:return(0,$.jsx)(y.FormattedMessage,{id:"thread.process.status.chatting"});case b.V1n:return(0,$.jsx)(y.FormattedMessage,{id:"thread.process.status.closed"});default:return(0,$.jsx)(y.FormattedMessage,{id:"queue.member.status.unknown"})}}},{title:(0,$.jsx)(y.FormattedMessage,{id:"client"}),dataIndex:"client",width:120,copyable:!0,hideInSearch:!0,render:function(e,t){return(0,I.qF)(t.client)}},{title:(0,$.jsx)(y.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",hideInSearch:!0,sorter:!0,render:function(e,t){return j()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,$.jsx)(y.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",copyable:!0,hideInTable:!0,hideInSearch:!0},{title:(0,$.jsx)(y.FormattedMessage,{id:"topic",defaultMessage:"Topic"}),dataIndex:"topic",ellipsis:!0,copyable:!0,hideInTable:!0,hideInSearch:!0},{title:(0,$.jsx)(y.FormattedMessage,{id:"owner",defaultMessage:"Owner"}),dataIndex:"owner",hideInTable:!0,hideInSearch:!0,render:function(e,t){var r;return(0,$.jsx)($.Fragment,{children:null==t||null===(r=t.owner)||void 0===r?void 0:r.nickname})}},{title:(0,$.jsx)(y.FormattedMessage,{id:"tagList",defaultMessage:"Tags"}),dataIndex:"tagList",hideInTable:!0,hideInSearch:!0,render:function(e,t){var r;return null===(r=t.tagList)||void 0===r?void 0:r.map((function(e,t){return(0,$.jsxs)("span",{style:{marginRight:4},children:["#",e]},t)}))}}],H=[].concat(q,[{title:r.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,render:function(e,t,n,o){return[(0,$.jsx)("a",{onClick:function(){Z(t)},children:r.formatMessage({id:"view",defaultMessage:"View"})},"editable")]}}]),Z=function(e){var t;console.log("handleShowChatHistory",e);var r={chatConfig:{org:null==E?void 0:E.uid,t:b.IUl,sid:null==e?void 0:e.uid}};null===(t=window.bytedesk)||void 0===t||t.showChat(r)},A=function(){var e=d()(i()().mark((function e(){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",c,O),r=localStorage.getItem(b.LA8),window.open((0,v.kG)()+"/api/v1/thread/export?"+new URLSearchParams({componentType:t,orgUid:(null==E?void 0:E.uid)||"",pageNumber:String(c-1),pageSize:String(O),accessToken:r||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(k.Z,{columns:H,actionRef:n,cardBordered:!0,request:function(){var e=d()(i()().mark((function e(r,n,a){var l,c,d,g,f;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",r,n,a),l=r.current,c=r.pageSize,d=s()(r,F),u(l),N(c),g=o()({pageNumber:l-1,pageSize:c,componentType:t,orgUid:null==E?void 0:E.uid,mergeByTopic:!1},d),e.next=7,(0,m.fk)(g);case 7:return f=e.sent,console.log("getAllThreads response:",f,g),200===f.code||p.yw.error(f.message),e.abrupt("return",{data:f.data.content,success:!0,total:f.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:r.formatMessage({id:"thread",defaultMessage:"Thread"}),toolBarRender:function(e){return[(0,$.jsx)(w.ZP,{icon:(0,$.jsx)(x.Z,{}),type:"primary",onClick:A,children:r.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),z]})}},29266:function(e,t,r){r.d(t,{Z:function(){return T}});var n=r(44194),o=r(51865),a=r.n(o),s=r(97859),l=r(63125),i=r(80314),c=r(79145),d=r(18011),u=r(37167),g=r(47825),p=r(87471),m=r(88874),f=r(77167),h=r(65759);const b=e=>{const{lineWidth:t,fontSizeIcon:r,calc:n}=e,o=e.fontSizeSM;return(0,f.IX)(e,{tagFontSize:o,tagLineHeight:(0,g.bf)(n(e.lineHeightSM).mul(o).equal()),tagIconSize:n(r).sub(n(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},v=e=>({defaultBg:new p.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var x=(0,h.I$)("Tag",(e=>(e=>{const{paddingXXS:t,lineWidth:r,tagPaddingHorizontal:n,componentCls:o,calc:a}=e,s=a(n).sub(r).equal(),l=a(t).sub(r).equal();return{[o]:Object.assign(Object.assign({},(0,m.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:s,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,g.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:l,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:s}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(b(e))),v),k=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const y=n.forwardRef(((e,t)=>{const{prefixCls:r,style:o,className:s,checked:l,onChange:i,onClick:c}=e,d=k(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:g,tag:p}=n.useContext(u.E_),m=g("tag",r),[f,h,b]=x(m),v=a()(m,`${m}-checkable`,{[`${m}-checkable-checked`]:l},null==p?void 0:p.className,s,h,b);return f(n.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),null==p?void 0:p.style),className:v,onClick:e=>{null==i||i(!l),null==c||c(e)}})))}));var C=y,w=r(85772);var M=(0,h.bk)(["Tag","preset"],(e=>(e=>(0,w.Z)(e,((t,r)=>{let{textColor:n,lightBorderColor:o,lightColor:a,darkColor:s}=r;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:n,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:s,borderColor:s},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(b(e))),v);const S=(e,t,r)=>{const n="string"!=typeof(o=r)?o:o.charAt(0).toUpperCase()+o.slice(1);var o;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${r}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var j=(0,h.bk)(["Tag","status"],(e=>{const t=b(e);return[S(t,"success","Success"),S(t,"processing","Info"),S(t,"error","Error"),S(t,"warning","Warning")]}),v),I=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const $=n.forwardRef(((e,t)=>{const{prefixCls:r,className:o,rootClassName:g,style:p,children:m,icon:f,color:h,onClose:b,bordered:v=!0,visible:k}=e,y=I(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:C,direction:w,tag:S}=n.useContext(u.E_),[$,F]=n.useState(!0),T=(0,s.Z)(y,["closeIcon","closable"]);n.useEffect((()=>{void 0!==k&&F(k)}),[k]);const O=(0,l.o2)(h),N=(0,l.yT)(h),E=O||N,P=Object.assign(Object.assign({backgroundColor:h&&!E?h:void 0},null==S?void 0:S.style),p),B=C("tag",r),[z,q,H]=x(B),Z=a()(B,null==S?void 0:S.className,{[`${B}-${h}`]:E,[`${B}-has-color`]:h&&!E,[`${B}-hidden`]:!$,[`${B}-rtl`]:"rtl"===w,[`${B}-borderless`]:!v},o,g,q,H),A=e=>{e.stopPropagation(),null==b||b(e),e.defaultPrevented||F(!1)},[,R]=(0,i.Z)((0,i.w)(e),(0,i.w)(S),{closable:!1,closeIconRender:e=>{const t=n.createElement("span",{className:`${B}-close-icon`,onClick:A},e);return(0,c.wm)(e,t,(e=>({onClick:t=>{var r;null===(r=null==e?void 0:e.onClick)||void 0===r||r.call(e,t),A(t)},className:a()(null==e?void 0:e.className,`${B}-close-icon`)})))}}),L="function"==typeof y.onClick||m&&"a"===m.type,U=f||null,W=U?n.createElement(n.Fragment,null,U,m&&n.createElement("span",null,m)):m,D=n.createElement("span",Object.assign({},T,{ref:t,className:Z,style:P}),W,R,O&&n.createElement(M,{key:"preset",prefixCls:B}),N&&n.createElement(j,{key:"status",prefixCls:B}));return z(L?n.createElement(d.Z,{component:"Tag"},D):D)})),F=$;F.CheckableTag=C;var T=F}}]);