"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5131],{96865:function(e,n,t){var r=t(23864);n.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},76750:function(e,n,t){var r=t(55735),a=t(65461),s=t(30921);n.Z=function(){var e=(0,s.useIntl)();return{translateString:function(n){return null==n?n:n&&(null!=n&&n.startsWith(r.VoP)||null!=n&&n.startsWith("ROLE_"))?e.formatMessage({id:n,defaultMessage:n}):n},translateStringTranct:function(n){return null==n?n:null!=n&&n.startsWith(r.VoP)||null!=n&&n.startsWith("ROLE_")?(0,a.aS)(e.formatMessage({id:n,defaultMessage:n}),10):(0,a.aS)(n,10)}}}},45649:function(e,n,t){t.r(n),t.d(n,{default:function(){return Cn}});var r=t(96865),a=t(75574),s=t(45332),i=t.n(s),l=t(23864),o=t(73193),c=t.n(o),u=t(76711),d=t.n(u),p=t(55735),f=t(44435),h=t(83642),g=t(83890),m=(0,f.Ue)()((0,h.mW)((0,h.tJ)((0,g.n)((function(e,n){return{llmproviderResult:{data:{content:[]}},currentChannel:{name:"web",nickname:"网站/H5"},currentType:p.aZD,insertChannel:function(n){e((function(e){e.llmproviderResult.data.content.unshift(n)}))},setChannelResult:function(t){e({llmproviderResult:t});var r,a=n().currentChannel;""!==a.uid&&void 0!==a||(null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentChannel:t.data.content[0]})},setCurrentChannel:function(t){var r=n().llmproviderResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var s=[].concat(d()(r.slice(0,a)),[t],d()(r.slice(a+1))),i=c()(c()({},n().llmproviderResult),{},{data:{content:s}});e({llmproviderResult:i,currentChannel:t})}else e({currentChannel:t})},setCurrentType:function(n){e({currentType:n})},deleteCurrentChannel:function(t){var r=n().llmproviderResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({llmproviderResult:c()(c()({},n().llmproviderResult),{},{data:{content:[].concat(d()(r.slice(0,a)),d()(r.slice(a+1)))}})}):console.warn("Channel not found in cache:",t),n().currentChannel.uid===t&&e({currentChannel:{uid:""}})},deleteChannelCache:function(){return e({},!0)}}})),{name:p.uCV}))),x=t(9452),v=t(44194),y=t(44521),j=t(31549),b=[{name:"web",nickname:"网站/H5"},{name:"npm",nickname:"Npm包"}],w=function(){var e=(0,l.Z)().isDarkMode,n=(0,v.useState)([]),t=i()(n,2),r=t[0],a=t[1],s=m((function(e){return{currentChannel:e.currentChannel,setCurrentChannel:e.setCurrentChannel}})),o=s.currentChannel,c=s.setCurrentChannel;return(0,v.useEffect)((function(){var e=[].concat(b);(0,y.Ox)()||e.push({name:"app",nickname:"App应用"},{name:"wechat-app",nickname:"微信应用"}),a(e)}),[]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(x.Z,{itemLayout:"horizontal",dataSource:r,renderItem:function(n,t){return(0,j.jsx)(x.Z.Item,{style:(null==o?void 0:o.name)===n.name?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){c(n)},children:(0,j.jsx)(x.Z.Item.Meta,{title:(0,j.jsx)("div",{style:{marginLeft:10},children:n.nickname})})})}})})},k=t(8247),A=t(30921),Z=function(){var e=(0,A.useAccess)();return e.canDebug&&console.log("Developing canDebug"),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(A.Access,{accessible:e.canDebug(),fallback:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(A.FormattedMessage,{id:p.h5w})}),children:"can debug"})})},M=t(90819),C=t.n(M),S=t(89933),R=t.n(S),I=t(10154),P=t.n(I),W=t(86803);function T(e){return E.apply(this,arguments)}function E(){return(E=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/create",{method:"POST",data:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return B.apply(this,arguments)}function B(){return(B=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/update",{method:"POST",data:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return q.apply(this,arguments)}function q(){return(q=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/delete",{method:"POST",data:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return K.apply(this,arguments)}function K(){return(K=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/wechat/app/query/org",{method:"GET",params:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=t(40612),U=t(15722),O=t(82669),N=t(53530),z=t(27487),_=t(75365),G=t(76750),H=t(72614),X=t(95490),J=t(69169),Y=t(4499),Q=t(84881),$=t(73442),ee=t(3849),ne="MP",te="MINI",re="WORK",ae="KEFU",se=function(e){var n,t=e.isEdit,r=e.wechatApp,a=e.open,s=e.onClose,l=e.onSubmit,o=J.A.useForm(),u=i()(o,1)[0],d=(0,G.Z)().translateStringTranct,p=(0,L.u)((function(e){return e.currentOrg})),f=(0,X.$)((function(e){return{workgroupResult:e.workgroupResult,setWorkgroupResult:e.setWorkgroupResult}})),h=f.workgroupResult,g=f.setWorkgroupResult;(0,v.useEffect)((function(){t?u.setFieldsValue({name:null==r?void 0:r.name,type:(null==r?void 0:r.type)||re,appId:null==r?void 0:r.appId,appSecret:null==r?void 0:r.appSecret,token:null==r?void 0:r.token,encodingAesKey:null==r?void 0:r.encodingAesKey,encryptMode:null==r?void 0:r.encryptMode,workgroupUid:null==r?void 0:r.workgroupUid}):u.setFieldsValue({name:"",type:re,appId:"",appSecret:"",token:"",encodingAesKey:"",encryptMode:"PLAINTEXT",workgroupUid:""})}),[t,r,u]);var m=function(){var e=R()(C()().mark((function e(){var n,t;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:null==p?void 0:p.uid},e.next=4,(0,H.LE)(n);case 4:t=e.sent,console.log("getWorkgroups",t),200===t.code?(W.yw.destroy(),g(t)):(W.yw.destroy(),W.yw.error(t.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){m()}),[]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)($.Z,{title:"微信应用配置",onClose:s,open:a,width:600,children:(0,j.jsxs)(J.A,{form:u,name:"wechatWorkForm",onFinish:function(){console.log("handleSubmit"),u.validateFields().then((function(e){var n=c()(c()({},e),{},{orgUid:null==p?void 0:p.uid});console.log("submit",n),l(n)}))},children:[(0,j.jsx)(Y.Z,{label:"名称",name:"name",rules:[{required:!0}]}),(0,j.jsx)(Q.Z,{label:"应用类型",name:"type",options:[{label:"微信公众号",value:ne},{label:"微信小程序",value:te},{label:"企业微信",value:re},{label:"微信客服",value:ae}],fieldProps:{defaultValue:re},rules:[{required:!0}]}),(0,j.jsx)(Y.Z,{label:"企业ID(corpId)/AppID",name:"appId"}),(0,j.jsx)(Y.Z,{label:"应用Secret",name:"appSecret"}),(0,j.jsx)(Y.Z,{label:"Token",name:"token",fieldProps:{addonAfter:(0,j.jsx)(_.ZP,{size:"small",onClick:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",t=0;t<32;t++){var r=Math.floor(Math.random()*e.length);n+=e.charAt(r)}u.setFieldsValue({token:n})},children:"随机生成"})}}),(0,j.jsx)(Y.Z,{label:"EncodingAESKey",name:"encodingAesKey",rules:[{required:!0}],fieldProps:{addonAfter:(0,j.jsxs)(ee.Z,{children:[(0,j.jsx)(_.ZP,{size:"small",onClick:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",t=0;t<43;t++){var r=Math.floor(Math.random()*e.length);n+=e.charAt(r)}u.setFieldsValue({encodingAesKey:n})},children:"随机生成"}),(0,j.jsx)(_.ZP,{size:"small",onClick:function(){var e=u.getFieldValue("encodingAesKey");if(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),W.yw.success("已复制到剪切板")}},children:"复制"})]})}}),(0,j.jsx)(Q.Z,{label:"消息加解密方式",name:"encryptMode",options:[{label:"明文模式",value:"PLAINTEXT"},{label:"兼容模式",value:"COMPATIBLE"},{label:"安全模式",value:"SAFE"}],fieldProps:{defaultValue:"PLAINTEXT",allowClear:!0},rules:[{required:!0}]}),(0,j.jsx)(Q.Z,{label:"客服技能组",name:"workgroupUid",options:null==h||null===(n=h.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.map((function(e){return{label:d(e.nickname),value:e.uid}})),fieldProps:{allowClear:!0},rules:[{required:!0}]}),(0,j.jsx)("p",{children:"注：根据应用类型，到对应的平台获取相关配置信息"})]})})})},ie=(0,f.Ue)()((0,h.mW)((0,h.tJ)((0,g.n)((function(e,n){return{wechatAppResult:{data:{content:[]}},currentWechatApp:{uid:"",nickname:"",avatar:"",description:""},insertWechatApp:function(n){e((function(e){e.wechatAppResult.data.content.unshift(n)}))},updateWechatApp:function(n){e((function(e){var t=e.wechatAppResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t[r]=n:console.warn("WechatApp with uid ".concat(n.uid," not found."))}))},deleteWechatApp:function(n){e((function(e){var t=e.wechatAppResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t.splice(r,1):console.warn("WechatApp with uid ".concat(n.uid," not found."))}))},setWechatAppResult:function(t){var r;(e({wechatAppResult:t}),""===n().currentWechatApp.uid)&&((null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentWechatApp:t.data.content[0]}))},setCurrentWechatApp:function(t){var r=n().wechatAppResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var s=[].concat(d()(r.slice(0,a)),[t],d()(r.slice(a+1))),i=c()(c()({},n().wechatAppResult),{},{data:{content:s}});e({wechatAppResult:i,currentWechatApp:t})}else console.warn("WechatApp with the specified uid not found."),e({currentWechatApp:t})},deleteCurrentWechatApp:function(t){var r=n().wechatAppResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({wechatAppResult:c()(c()({},n().wechatAppResult),{},{data:{content:[].concat(d()(r.slice(0,a)),d()(r.slice(a+1)))}})}):console.warn("WechatApp not found in cache:",t),n().currentWechatApp.uid===t&&e({currentWechatApp:{uid:""}})},deleteWechatAppCache:function(){return e({},!0)}}})),{name:p.x1y}))),le=P()(P()(P()(P()({},p.a4q,"微信公众号"),p.qRy,"微信小程序"),p._oo,"企业微信"),p.rWo,"微信客服"),oe=function(){var e=(0,A.useIntl)(),n=(0,v.useRef)(!1),t=(0,G.Z)().translateStringTranct,r=(0,l.Z)().isDarkMode,a=(0,v.useState)(!1),s=i()(a,2),o=s[0],c=s[1],u=(0,v.useState)(!1),d=i()(u,2),p=d[0],f=d[1],h=(0,L.u)((function(e){return e.currentOrg})),g=ie((function(e){return{wechatAppResult:e.wechatAppResult,currentWechatApp:e.currentWechatApp,setWechatAppResult:e.setWechatAppResult,insertWechatApp:e.insertWechatApp,setCurrentWechatApp:e.setCurrentWechatApp,deleteCurrentWechatApp:e.deleteCurrentWechatApp}})),m=g.wechatAppResult,y=g.currentWechatApp,b=g.setWechatAppResult,w=g.insertWechatApp,k=g.setCurrentWechatApp,Z=g.deleteCurrentWechatApp,M=N.Z.useModal(),S=i()(M,2),I=S[0],P=S[1],E=function(){var n=R()(C()().mark((function n(t){var r;return C()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete wechatApp",t),W.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),n.next=4,D(t);case 4:r=n.sent,console.log("delete wechatApp response",r),200===r.code?(W.yw.destroy(),W.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),Z(t.uid)):(W.yw.destroy(),W.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),B=function(){var e=R()(C()().mark((function e(){var t,r;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,W.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==h?void 0:h.uid},e.next=8,V(t);case 8:r=e.sent,console.log("getWechatApps",r),200===r.code?(W.yw.destroy(),b(r)):(W.yw.destroy(),W.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){B()}),[]);var q=function(){var e=R()(C()().mark((function e(n){var t;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:t=e.sent,console.log("handleCreateWechatApp response:",t),200===t.code?(w(t.data),c(!1)):W.yw.error(t.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=R()(C()().mark((function e(n){var t;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.uid=null==y?void 0:y.uid,e.next=3,F(n);case 3:t=e.sent,console.log("handleUpdateWechatApp response:",t),200===t.code?(k(t.data),c(!1)):W.yw.error(t.message);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(z.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,j.jsx)(_.ZP,{size:"small",type:"primary",icon:(0,j.jsx)(O.Z,{}),onClick:function(){c(!0),f(!1)},children:e.formatMessage({id:"bind",defaultMessage:"Bind"})}),(0,j.jsx)(_.ZP,{size:"small",onClick:function(){f(!0),c(!0)},disabled:y&&""===y.uid,children:e.formatMessage({id:"edit",defaultMessage:"Edit"})}),(0,j.jsx)(_.ZP,{size:"small",danger:!0,onClick:function(){return n=y,void I.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,j.jsx)(U.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(n.name,"】？"),onOk:function(){E(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})});var n},disabled:y&&""===y.uid,children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,j.jsx)(x.Z,{itemLayout:"horizontal",dataSource:m.data.content,renderItem:function(e,n){return(0,j.jsx)(x.Z.Item,{style:y.uid===(null==e?void 0:e.uid)?{backgroundColor:r?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){k(e)},children:(0,j.jsx)(x.Z.Item.Meta,{style:{marginLeft:"10px"},title:(0,j.jsxs)(j.Fragment,{children:[t(null==e?void 0:e.name)," ",(0,j.jsxs)("span",{style:{color:"#1677ff"},children:["(",le[null==e?void 0:e.type]||(null==e?void 0:e.type),")"]})]}),description:t(null==e?void 0:e.description)})})}}),o&&(0,j.jsx)(se,{isEdit:p,open:o,wechatApp:y,onClose:function(){c(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),p?K(e):q(e)}}),P]})},ce=t(32327),ue=t(62673),de=t(73589),pe=t(29266),fe=t(19116),he=t(38775),ge=t(83337),me=t(34600),xe=t(15892),ve=t(54800),ye=t(28977),je=t.n(ye),be=ce.Z.Text,we=ce.Z.Paragraph,ke=P()(P()(P()(P()({},p.a4q,"微信公众号"),p.qRy,"微信小程序"),p._oo,"企业微信"),p.rWo,"微信客服"),Ae=P()(P()(P()(P()({},p.a4q,(0,j.jsx)(ge.Z,{})),p.qRy,(0,j.jsx)(me.Z,{})),p._oo,(0,j.jsx)(xe.Z,{})),p.rWo,(0,j.jsx)(ve.Z,{})),Ze={PLAINTEXT:"明文模式",COMPATIBLE:"兼容模式",SAFE:"安全模式"},Me={PLAINTEXT:"orange",COMPATIBLE:"blue",SAFE:"green"},Ce=function(){var e,n=(0,A.useIntl)(),t=ie((function(e){return{currentWechatApp:e.currentWechatApp}})).currentWechatApp;return null!=t&&t.uid?(0,j.jsxs)(ue.Z,{title:(0,j.jsxs)(ee.Z,{children:[Ae[t.type]||(0,j.jsx)(ge.Z,{}),(0,j.jsx)("span",{children:t.name||"微信应用详情"}),(0,j.jsx)(pe.Z,{color:"blue",children:ke[t.type]||t.type})]}),bordered:!1,children:[(0,j.jsxs)(fe.Z,{bordered:!0,column:1,children:[(0,j.jsx)(fe.Z.Item,{label:n.formatMessage({id:"app.uid",defaultMessage:"应用UID"}),children:(0,j.jsx)(be,{copyable:!0,children:t.uid})}),(0,j.jsx)(fe.Z.Item,{label:n.formatMessage({id:"app.name",defaultMessage:"应用名称"}),children:t.name}),(0,j.jsx)(fe.Z.Item,{label:n.formatMessage({id:"app.type",defaultMessage:"应用类型"}),children:(0,j.jsx)(pe.Z,{color:"blue",children:ke[t.type]||t.type})}),(0,j.jsx)(fe.Z.Item,{label:"AppID/企业ID",children:(0,j.jsx)(be,{copyable:!0,children:t.appId})}),(0,j.jsx)(fe.Z.Item,{label:"AppSecret",children:(0,j.jsx)(be,{copyable:{tooltips:["点击复制","已复制"]},children:t.appSecret})}),(0,j.jsx)(fe.Z.Item,{label:"加密模式",children:(0,j.jsx)(pe.Z,{color:Me[t.encryptMode]||"default",children:Ze[t.encryptMode]||t.encryptMode})}),(0,j.jsx)(fe.Z.Item,{label:"URL",children:(0,j.jsx)(be,{copyable:!0,children:(0,y.kG)()+"/wechat/"+(null==t||null===(e=t.type)||void 0===e?void 0:e.toLowerCase())+"/hook/"+t.uid})}),(0,j.jsx)(fe.Z.Item,{label:"Token",children:(0,j.jsx)(be,{copyable:!0,children:t.token||"-"})}),(0,j.jsx)(fe.Z.Item,{label:"EncodingAESKey",children:(0,j.jsx)(be,{copyable:!0,children:t.encodingAesKey||"-"})}),t.description&&(0,j.jsx)(fe.Z.Item,{label:n.formatMessage({id:"description",defaultMessage:"描述"}),children:(0,j.jsx)(we,{children:t.description})}),(0,j.jsx)(fe.Z.Item,{label:n.formatMessage({id:"createdAt",defaultMessage:"创建时间"}),children:t.createdAt?je()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"})]}),(0,j.jsx)(he.Z,{}),(0,j.jsx)(ce.Z.Title,{level:5,children:"安全说明"}),(0,j.jsx)(we,{children:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:"请保管好您的微信应用凭证，避免泄露"}),(0,j.jsx)("li",{children:"如果使用安全模式，确保 EncodingAESKey 的安全性"}),(0,j.jsx)("li",{children:"建议定期检查应用访问日志，确保没有异常访问"}),(0,j.jsx)("li",{children:"如发现安全问题，请立即更新凭证并联系我们的支持团队"})]})})]}):(0,j.jsx)(ue.Z,{bordered:!1,children:(0,j.jsx)(de.Z,{description:"请先在左侧列表选择一个微信应用",image:de.Z.PRESENTED_IMAGE_SIMPLE})})},Se=function(e){console.log(e)},Re=[{key:"detail",label:"应用详情",children:(0,j.jsx)(Ce,{})}],Ie=function(){var e=(0,v.useState)(Re),n=i()(e,2),t=n[0],r=n[1];return(0,v.useEffect)((function(){var e=[].concat(Re);r(e)}),[]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.Z,{defaultActiveKey:"agent",items:t,onChange:Se})})},Pe=a.Z.Sider,We=a.Z.Content,Te=function(){var e=(0,r.Z)(),n=e.leftSiderStyle,t=e.leftSiderWidth;return(0,j.jsxs)(a.Z,{children:[(0,j.jsx)(Pe,{width:t,style:n,children:(0,j.jsx)(oe,{})}),(0,j.jsx)(a.Z,{children:(0,j.jsx)(We,{children:(0,j.jsx)(Ie,{})})})]})},Ee=t(24170),Fe=t(91723),Be=t(67402),De=t(71529),qe=function(e){var n=e.platform,t=void 0===n?"react":n,r=(0,A.useIntl)(),a=(0,v.useState)(t),s=i()(a,2),l=s[0],o=s[1],c=l.charAt(0).toUpperCase()+l.slice(1),u="vanilla"===l?"BytedeskVanilla":"Bytedesk".concat(c);return(0,j.jsxs)("div",{style:{maxWidth:"800px"},children:[(0,j.jsxs)("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsx)("h2",{children:(0,j.jsx)("a",{href:"https://github.com/Bytedesk/bytedesk-web",target:"_blank",rel:"noopener noreferrer",children:r.formatMessage({id:"install.guide.github"})})}),(0,j.jsx)(_.ZP,{type:"primary",icon:(0,j.jsx)(De.Z,{}),href:"".concat("https://www.weiyuai.cn/docs/zh-CN/docs/channel/").concat("vanilla"===l?"web":l),target:"_blank",children:r.formatMessage({id:"install.guide.docs"},{platform:"vanilla"===l?"Web":l.charAt(0).toUpperCase()+l.slice(1)})})]}),(0,j.jsx)(he.Z,{orientation:"left",children:"选择框架"}),(0,j.jsx)(Be.ZP.Group,{options:[{label:"React",value:"react"},{label:"Vue",value:"vue"},{label:"Svelte",value:"svelte"},{label:"Vanilla",value:"vanilla"}],value:l,onChange:function(e){o(e.target.value)},optionType:"button",buttonStyle:"solid",style:{marginBottom:"20px"}}),(0,j.jsx)("h2",{children:r.formatMessage({id:"install.guide.steps"})}),(0,j.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,j.jsx)("h3",{children:r.formatMessage({id:"install.guide.step1.title"})}),(0,j.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"npm install bytedesk-web\n# ".concat(r.formatMessage({id:"install.guide.step1.or"}),"\nyarn add bytedesk-web")})]}),(0,j.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,j.jsx)("h3",{children:r.formatMessage({id:"install.guide.step2.title"})}),(0,j.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:function(){switch(l){case"react":return"import { BytedeskReact } from 'bytedesk-web/react';\nimport type { BytedeskConfig } from 'bytedesk-web/react';";case"vue":return"import { BytedeskVue } from 'bytedesk-web/vue';\nimport type { BytedeskConfig } from 'bytedesk-web/vue';";case"svelte":return"import { BytedeskSvelte } from 'bytedesk-web/svelte';\nimport type { BytedeskConfig } from 'bytedesk-web/svelte';";default:return"import { BytedeskVanilla } from 'bytedesk-web';\nimport type { BytedeskConfig } from 'bytedesk-web';"}}()})]}),(0,j.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,j.jsx)("h3",{children:r.formatMessage({id:"install.guide.step3.title"})}),(0,j.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const config: BytedeskConfig = {\n  placement: 'bottom-right',\n  marginBottom: 20,\n  marginSide: 20,\n  chatConfig: {\n    org: 'df_org_uid',  // ".concat(r.formatMessage({id:"install.guide.step3.org.comment"}),"\n    t: \"2\",\n    sid: 'df_rt_uid'    // ").concat(r.formatMessage({id:"install.guide.step3.sid.comment"}),"\n  }\n};")})]}),(0,j.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,j.jsx)("h3",{children:r.formatMessage({id:"install.guide.step4.title"})}),(0,j.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const App = () => {\n  const handleInit = () => {\n    console.log('".concat(function(){switch(l){case"react":return"BytedeskReact";case"vue":return"BytedeskVue";case"svelte":return"BytedeskSvelte";default:return"BytedeskVanilla"}}()," initialized');\n  };\n\n  return (\n    <div>\n      <").concat(u," {...config} onInit={handleInit} />\n      <button onClick={() => (window as any).bytedesk?.showChat()}>\n        ").concat(r.formatMessage({id:"install.guide.step4.open.chat"}),"\n      </button>\n    </div>\n  );\n};")})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{children:r.formatMessage({id:"install.guide.step5.title"})}),(0,j.jsxs)("ul",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px",lineHeight:"1.6"},children:[(0,j.jsxs)("li",{children:[(0,j.jsx)("code",{children:"(window as any).bytedesk?.showChat()"})," - ",r.formatMessage({id:"install.guide.step5.show"})]}),(0,j.jsxs)("li",{children:[(0,j.jsx)("code",{children:"(window as any).bytedesk?.hideChat()"})," - ",r.formatMessage({id:"install.guide.step5.hide"})]})]})]})]})},Ve=t(1902),Ke=ce.Z.Title,Le=ce.Z.Text,Ue=function(e){var n=e.channel,t=((0,v.useRef)(!1),(0,G.Z)().translateString),r=m((function(e){return{currentType:e.currentType,setCurrentType:e.setCurrentType}})),a=r.currentType,s=r.setCurrentType,l=(0,L.u)((function(e){return e.currentOrg})),o=[{label:"一对一",value:p.Njn},{label:"技能组",value:p.aZD}],c=(0,Ve.E)((function(e){return{agentResult:e.agentResult,currentAgent:e.currentAgent,setAgentResult:e.setAgentResult,setCurrentAgent:e.setCurrentAgent}})),u=c.agentResult,d=c.currentAgent,f=c.setAgentResult,h=c.setCurrentAgent,g=(0,v.useState)([]),x=i()(g,2),y=x[0],b=x[1],w=(0,X.$)((function(e){return{workgroupResult:e.workgroupResult,currentWorkgroup:e.currentWorkgroup,setWorkgroupResult:e.setWorkgroupResult,setCurrentWorkgroup:e.setCurrentWorkgroup}})),k=w.workgroupResult,A=w.currentWorkgroup,Z=w.setWorkgroupResult,M=w.setCurrentWorkgroup,S=(0,v.useState)(null==d?void 0:d.uid),I=i()(S,2),P=I[0],T=I[1],E=(0,v.useState)(null==A?void 0:A.uid),F=i()(E,2),B=F[0],D=F[1],q=(0,v.useState)([]),V=i()(q,2),K=V[0],U=V[1],O=function(){var e=R()(C()().mark((function e(){var n,r,a;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:null==l?void 0:l.uid},e.next=4,(0,Ee._t)(n);case 4:r=e.sent,console.log("queryAgentsByOrg: ",r),200===r.code?(W.yw.destroy(),f(r),r.data.content.length>0&&(h(r.data.content[0]),T(r.data.content[0].uid)),a=[],r.data.content.forEach((function(e){var n={label:t(e.nickname),value:e.uid};a.push(n)})),b(a)):(W.yw.destroy(),W.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=R()(C()().mark((function e(){var n,r,a;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:null==l?void 0:l.uid},e.next=4,(0,H.LE)(n);case 4:r=e.sent,console.log("getWorkgroups",r),200===r.code?(W.yw.destroy(),Z(r),r.data.content.length>0&&(M(r.data.content[0]),D(r.data.content[0].uid)),a=[],r.data.content.forEach((function(e){var n={label:t(e.nickname),value:e.uid};a.push(n)})),U(a)):(W.yw.destroy(),W.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){O(),N()}),[a]);var z=["web","npm","ios","android","flutter","uniapp"].includes((null==n?void 0:n.name)||"");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Be.ZP.Group,{onChange:function(e){console.log("radio type checked:".concat(e.target.value)),s(e.target.value)},options:o,defaultValue:a,optionType:"button",buttonStyle:"solid"}),(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),a===p.Njn&&(null==d?void 0:d.uid)&&(0,j.jsx)(Be.ZP.Group,{onChange:function(e){console.log("radio agent checked:".concat(e.target.value));var n=u.data.content.find((function(n){return n.uid===e.target.value}));h(n)},options:y,defaultValue:P,optionType:"button",buttonStyle:"solid"}),a===p.aZD&&(null==d?void 0:d.uid)&&(0,j.jsx)(Be.ZP.Group,{onChange:function(e){console.log("radio workgroup checked:".concat(e.target.value));var n=k.data.content.find((function(n){return n.uid===e.target.value}));M(n)},options:K,defaultValue:B,optionType:"button",buttonStyle:"solid"}),(0,j.jsx)(he.Z,{}),(0,j.jsx)(Ke,{level:5,children:"组织orgUid"}),(0,j.jsx)(Le,{code:!0,copyable:!0,children:null==l?void 0:l.uid}),(0,j.jsx)(Ke,{level:5,children:"一对一当前客服Uid"}),(0,j.jsx)(Le,{code:!0,copyable:!0,children:null==d?void 0:d.uid}),(0,j.jsx)(Ke,{level:5,children:"当前技能组Uid"}),(0,j.jsx)(Le,{code:!0,copyable:!0,children:null==A?void 0:A.uid}),(0,j.jsx)(he.Z,{}),z&&("web"===(null==n?void 0:n.name)?(0,j.jsx)(Fe.Z,{type:p.aZD}):"npm"===(null==n?void 0:n.name)?(0,j.jsx)(qe,{}):null)]})};function Oe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/query/org",{method:"GET",params:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return _e.apply(this,arguments)}function _e(){return(_e=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/create",{method:"POST",data:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return He.apply(this,arguments)}function He(){return(He=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/update",{method:"POST",data:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Je.apply(this,arguments)}function Je(){return(Je=R()(C()().mark((function e(n){return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,A.request)("/api/v1/channel/app/delete",{method:"POST",data:c()(c()({},n),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=(0,f.Ue)()((0,h.mW)((0,h.tJ)((0,g.n)((function(e,n){return{appResult:{data:{content:[]}},currentApp:{uid:"",name:"",appPlatform:"",description:""},insertApp:function(n){e((function(e){e.appResult.data.content.unshift(n)}))},updateApp:function(n){e((function(e){var t=e.appResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t[r]=n:console.warn("App with uid ".concat(n.uid," not found."))}))},deleteApp:function(n){e((function(e){var t=e.appResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t.splice(r,1):console.warn("App with uid ".concat(n.uid," not found."))}))},setAppResult:function(t){var r;(e({appResult:t}),""===n().currentApp.uid)&&((null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentApp:t.data.content[0]}))},setCurrentApp:function(t){var r=n().appResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var s=[].concat(d()(r.slice(0,a)),[t],d()(r.slice(a+1))),i=c()(c()({},n().appResult),{},{data:{content:s}});e({appResult:i,currentApp:t})}else e({currentApp:t})},deleteCurrentApp:function(t){var r=n().appResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({appResult:c()(c()({},n().appResult),{},{data:{content:[].concat(d()(r.slice(0,a)),d()(r.slice(a+1)))}})}):console.warn("App not found in cache:",t),n().currentApp.uid===t&&e({currentApp:{uid:""}})},deleteAppCache:function(){return e({},!0)}}})),{name:p.WJP}))),Qe=t(32350),$e=function(e){var n=e.open,t=e.isEdit,r=e.app,a=e.onClose,s=e.onSubmit,l=(0,A.useIntl)(),o=J.A.useForm(),u=i()(o,1)[0],d=(0,L.u)((function(e){return e.currentOrg})),f=[{label:"Android",value:p.XCo},{label:"iOS",value:p.wTN},{label:"Flutter",value:p.oLY},{label:"UniApp",value:p.c7m},{label:"QuickApp",value:p.Cy5},{label:"Other",value:p.AJd}];return(0,v.useEffect)((function(){n&&t&&r?u.setFieldsValue({name:r.name,platform:r.appPlatform,appKey:r.appKey,appPackage:r.appPackage,description:r.description}):u.resetFields()}),[n,t,r,u]),(0,j.jsx)($.Z,{title:t?l.formatMessage({id:"edit",defaultMessage:"编辑应用"}):l.formatMessage({id:"add",defaultMessage:"添加应用"}),width:400,open:n,onClose:a,maskClosable:!1,footer:(0,j.jsxs)("div",{style:{textAlign:"right"},children:[(0,j.jsx)(_.ZP,{onClick:a,style:{marginRight:8},children:l.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,j.jsx)(_.ZP,{onClick:function(){u.validateFields().then((function(e){var n=c()(c()({},e),{},{orgUid:null==d?void 0:d.uid,uid:t?r.uid:void 0});s(n)}))},type:"primary",children:l.formatMessage({id:"confirm",defaultMessage:"确定"})})]}),children:(0,j.jsxs)(J.A,{form:u,layout:"vertical",submitter:!1,children:[(0,j.jsx)(Y.Z,{name:"name",label:l.formatMessage({id:"app.name",defaultMessage:"应用名称"}),rules:[{required:!0,message:l.formatMessage({id:"app.name.required",defaultMessage:"请输入应用名称"})}],placeholder:l.formatMessage({id:"app.name.placeholder",defaultMessage:"请输入应用名称"})}),(0,j.jsx)(Q.Z,{name:"appPlatform",label:l.formatMessage({id:"app.platform",defaultMessage:"平台类型"}),rules:[{required:!0,message:l.formatMessage({id:"app.platform.required",defaultMessage:"请选择平台类型"})}],placeholder:l.formatMessage({id:"app.platform.placeholder",defaultMessage:"请选择平台类型"}),options:f}),(0,j.jsx)(Y.Z,{name:"appPackage",label:l.formatMessage({id:"app.package",defaultMessage:"包名"}),rules:[{required:!0,message:l.formatMessage({id:"app.package.required",defaultMessage:"请输入包名"})}],placeholder:l.formatMessage({id:"app.package.placeholder",defaultMessage:"请输入包名"})}),(0,j.jsx)(Y.Z,{name:"appKey",label:"App Key",placeholder:l.formatMessage({id:"app.appKey.placeholder",defaultMessage:"请输入App Key"}),fieldProps:{addonAfter:(0,j.jsx)(_.ZP,{type:"text",size:"small",onClick:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",t=0;t<16;t++)n+=e.charAt(Math.floor(Math.random()*e.length));u.setFieldsValue({appKey:n})},children:"随机生成"})}}),(0,j.jsx)(Y.Z,{name:"appPackage",label:"Package Name",hidden:"android"!==u.getFieldValue("platform"),placeholder:l.formatMessage({id:"app.packageName.placeholder",defaultMessage:"请输入Android Package Name"})}),(0,j.jsx)(Qe.Z,{name:"description",label:l.formatMessage({id:"description",defaultMessage:"描述"}),placeholder:l.formatMessage({id:"description.placeholder",defaultMessage:"请输入描述信息"}),fieldProps:{rows:4}})]})})},en=function(){var e=(0,A.useIntl)(),n=(0,v.useRef)(!1),t=(0,G.Z)().translateStringTranct,r=(0,l.Z)().isDarkMode,a=(0,v.useState)(!1),s=i()(a,2),o=s[0],c=s[1],u=(0,v.useState)(!1),d=i()(u,2),p=d[0],f=d[1],h=(0,L.u)((function(e){return e.currentOrg})),g=Ye((function(e){return{appResult:e.appResult,currentApp:e.currentApp,setAppResult:e.setAppResult,insertApp:e.insertApp,setCurrentApp:e.setCurrentApp,deleteCurrentApp:e.deleteCurrentApp}})),m=g.appResult,y=g.currentApp,b=g.setAppResult,w=g.insertApp,k=g.setCurrentApp,Z=g.deleteCurrentApp,M=N.Z.useModal(),S=i()(M,2),I=S[0],P=S[1],T=function(){var n=R()(C()().mark((function n(t){var r;return C()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete app",t),W.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"正在删除"})),n.next=4,Xe(t);case 4:r=n.sent,console.log("delete app response",r),200===r.code?(W.yw.destroy(),W.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"删除成功"})),Z(t.uid)):(W.yw.destroy(),W.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),E=function(){var e=R()(C()().mark((function e(){var t,r;return C()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,W.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==h?void 0:h.uid},e.next=8,Oe(t);case 8:r=e.sent,console.log("getApps",r),200===r.code?(W.yw.destroy(),b(r)):(W.yw.destroy(),W.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){E()}),[]);var F=function(){var n=R()(C()().mark((function n(t){var r;return C()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ze(t);case 2:r=n.sent,console.log("handleCreateApp response:",r),200===r.code?(w(r.data),c(!1),W.yw.success(e.formatMessage({id:"app.create.success",defaultMessage:"应用创建成功"}))):W.yw.error(r.message);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),B=function(){var n=R()(C()().mark((function n(t){var r;return C()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.uid=null==y?void 0:y.uid,n.next=3,Ge(t);case 3:r=n.sent,console.log("handleUpdateApp response:",r),200===r.code?(k(r.data),c(!1),W.yw.success(e.formatMessage({id:"app.update.success",defaultMessage:"应用更新成功"}))):W.yw.error(r.message);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(z.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,j.jsx)(_.ZP,{size:"small",type:"primary",icon:(0,j.jsx)(O.Z,{}),onClick:function(){c(!0),f(!1)},children:e.formatMessage({id:"create",defaultMessage:"新建"})}),(0,j.jsx)(_.ZP,{size:"small",onClick:function(){f(!0),c(!0)},disabled:""===(null==y?void 0:y.uid),children:e.formatMessage({id:"edit",defaultMessage:"编辑"})}),(0,j.jsx)(_.ZP,{size:"small",danger:!0,onClick:function(){return function(n){I.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,j.jsx)(U.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"确定删除"}),"【").concat(n.name,"】？"),onOk:function(){T(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(y)},disabled:""===(null==y?void 0:y.uid),children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"删除"})})]}),(0,j.jsx)(x.Z,{itemLayout:"horizontal",dataSource:m.data.content,renderItem:function(e,n){return(0,j.jsx)(x.Z.Item,{style:y.uid===(null==e?void 0:e.uid)?{backgroundColor:r?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){k(e)},children:(0,j.jsx)(x.Z.Item.Meta,{style:{marginLeft:"10px"},title:(0,j.jsxs)(j.Fragment,{children:[t(null==e?void 0:e.name)," ",(0,j.jsxs)("span",{style:{color:"#1677ff"},children:["(",t(null==e?void 0:e.appPlatform),")"]})]}),description:t(null==e?void 0:e.description)})})}}),o&&(0,j.jsx)($e,{isEdit:p,open:o,app:y,onClose:function(){c(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),p?B(e):F(e)}}),P]})},nn=t(2523),tn=t(48006),rn=t(40795),an=ce.Z.Text,sn=ce.Z.Paragraph,ln={android:(0,j.jsx)(nn.Z,{}),ios:(0,j.jsx)(tn.Z,{}),flutter:(0,j.jsx)(rn.Z,{}),uniapp:(0,j.jsx)(me.Z,{})},on={android:"Android",ios:"iOS",flutter:"Flutter",uniapp:"UniApp"},cn=function(){var e=(0,A.useIntl)(),n=Ye().currentApp;return null!=n&&n.uid?(0,j.jsxs)(ue.Z,{title:(0,j.jsxs)(ee.Z,{children:[ln[n.appPlatform]||(0,j.jsx)(rn.Z,{}),(0,j.jsx)("span",{children:n.name||"应用详情"}),(0,j.jsx)(pe.Z,{color:"blue",children:on[n.appPlatform]||n.appPlatform})]}),bordered:!1,children:[(0,j.jsxs)(fe.Z,{bordered:!0,column:1,children:[(0,j.jsx)(fe.Z.Item,{label:e.formatMessage({id:"app.uid",defaultMessage:"应用UID"}),children:(0,j.jsx)(an,{copyable:!0,children:n.uid})}),(0,j.jsx)(fe.Z.Item,{label:e.formatMessage({id:"app.name",defaultMessage:"应用名称"}),children:n.name}),n.appKey&&(0,j.jsx)(fe.Z.Item,{label:"App Key",children:(0,j.jsx)(an,{copyable:!0,children:n.appKey})}),"android"===n.appPlatform&&n.appPackage&&(0,j.jsx)(fe.Z.Item,{label:"Package Name",children:n.appPackage}),n.description&&(0,j.jsx)(fe.Z.Item,{label:e.formatMessage({id:"description",defaultMessage:"描述"}),children:(0,j.jsx)(sn,{children:n.description})}),(0,j.jsx)(fe.Z.Item,{label:e.formatMessage({id:"createdAt",defaultMessage:"创建时间"}),children:n.createdAt})]}),(0,j.jsx)(he.Z,{}),(0,j.jsx)(ce.Z.Title,{level:5,children:"安全说明"}),(0,j.jsx)(sn,{children:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:"请保管好您的应用凭证（App Key 等），避免泄露"}),(0,j.jsx)("li",{children:"建议定期检查应用访问日志，确保没有异常访问"}),(0,j.jsx)("li",{children:"如发现安全问题，请立即更新凭证并联系我们的支持团队"})]})})]}):(0,j.jsx)(ue.Z,{bordered:!1,children:(0,j.jsx)(de.Z,{description:"请先选择或创建一个应用",image:de.Z.PRESENTED_IMAGE_SIMPLE})})},un=t(69079),dn=t(72608),pn=ce.Z.Title,fn=ce.Z.Paragraph,hn=ce.Z.Text,gn=(ce.Z.Link,k.Z.TabPane,{ANDROID:"https://github.com/Bytedesk/bytedesk-android",IOS:"https://github.com/Bytedesk/bytedesk-swift",FLUTTER:"https://github.com/Bytedesk/bytedesk-flutter",UNIAPP:"https://github.com/Bytedesk/bytedesk-uniapp"}),mn=function(){(0,A.useIntl)();var e=Ye().currentApp,n=(0,L.u)((function(e){return e.currentOrg}));if(null==e||!e.uid)return(0,j.jsx)(ue.Z,{bordered:!1,children:(0,j.jsx)(de.Z,{description:"请先选择或创建一个应用",image:de.Z.PRESENTED_IMAGE_SIMPLE})});return(0,j.jsxs)(ue.Z,{title:"集成指南",bordered:!1,extra:(0,j.jsxs)(ee.Z,{children:[(0,j.jsx)(_.ZP,{icon:(0,j.jsx)(un.Z,{}),onClick:function(){var n=e.appPlatform,t=gn[n];t?window.open(t,"_blank"):dn.ZP.info("该平台暂无GitHub仓库链接")},children:"查看源码"}),(0,j.jsx)(_.ZP,{icon:(0,j.jsx)(De.Z,{}),onClick:function(){window.open("https://www.weiyuai.cn/docs/zh-CN/docs/category/channel","_blank")},children:"查看文档"})]}),children:[(0,j.jsxs)(pn,{level:4,children:["集成 ",e.name," (",e.appPlatform,")"]}),(0,j.jsxs)(fn,{children:["以下是将客服功能集成到 ",e.name," 应用的步骤说明。请按照指南完成配置，使用提供的App Key和其他凭证进行初始化。"]}),(0,j.jsx)(he.Z,{}),(0,j.jsx)(pn,{level:5,children:"1. 基本配置"}),(0,j.jsx)(fn,{children:(0,j.jsxs)("ul",{children:[e.appKey&&(0,j.jsxs)("li",{children:[(0,j.jsx)(hn,{strong:!0,children:"App Key:"})," ",(0,j.jsx)(hn,{copyable:!0,children:e.appKey})]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(hn,{strong:!0,children:"组织ID:"})," ",(0,j.jsx)(hn,{copyable:!0,children:null==n?void 0:n.uid})]})]})}),(0,j.jsx)(he.Z,{}),(0,j.jsx)(fn,{type:"secondary",children:"如果在集成过程中遇到任何问题，请联系技术支持团队：270580156@qq.com"})]})},xn=function(e){console.log(e)},vn=[{key:"details",label:"应用详情",children:(0,j.jsx)(cn,{})},{key:"integration",label:"集成指南",children:(0,j.jsx)(mn,{})}],yn=function(){var e=(0,v.useState)([]),n=i()(e,2),t=n[0],r=n[1];Ye((function(e){return{currentApp:e.currentApp}})).currentApp;return(0,v.useEffect)((function(){var e=[].concat(vn);r(e)}),[]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(k.Z,{defaultActiveKey:"details",items:t,onChange:xn})})},jn=a.Z.Sider,bn=a.Z.Content,wn=function(){var e=(0,r.Z)(),n=e.leftSiderStyle,t=e.leftSiderWidth;return(0,j.jsxs)(a.Z,{children:[(0,j.jsx)(jn,{width:t,style:n,children:(0,j.jsx)(en,{})}),(0,j.jsx)(a.Z,{children:(0,j.jsx)(bn,{children:(0,j.jsx)(yn,{})})})]})},kn=function(e){var n=e.channel,t="web"===(null==n?void 0:n.name)||"npm"===(null==n?void 0:n.name);return(0,j.jsxs)("div",{children:[t&&(0,j.jsx)(Ue,{channel:n}),"app"===(null==n?void 0:n.name)&&(0,j.jsx)(wn,{}),"wechat-app"===(null==n?void 0:n.name)&&(0,j.jsx)(Te,{}),"douyin"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"xiaohongshu"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"baidu"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"weibo"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"pdd"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"jd"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"qianniu"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"doudian"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"whatsapp"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"telegram"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"facebook"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"line"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"shopify"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"lazada"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"wordpress"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"woocommerce"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"opencart"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"magento"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"prestashop"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"dify"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{}),"coze"===(null==n?void 0:n.name)&&(0,j.jsx)(Z,{})]})},An=function(){var e=(0,v.useState)(""),n=i()(e,2),t=n[0],r=n[1],a=(0,v.useState)([]),s=i()(a,2),l=s[0],o=s[1],c=m().currentChannel;(0,v.useEffect)((function(){c&&u(c)}),[c]);var u=function(e){var n=e.name;-1===l.findIndex((function(e){return e.key===n}))&&o([].concat(d()(l),[{label:e.nickname,key:n,children:(0,j.jsx)(kn,{channel:e}),channelInfo:e,closable:!0}])),r(n)};return(0,j.jsx)(k.Z,{hideAdd:!0,onChange:function(e){r(e)},activeKey:t,type:"editable-card",onEdit:function(e,n){"remove"===n&&function(e){var n=l.findIndex((function(n){return n.key===e})),a=l.filter((function(n){return n.key!==e}));if(a.length&&e===t){var s=a[n===a.length?n-1:n].key;r(s)}o(a)}(e)},items:l})},Zn=a.Z.Sider,Mn=a.Z.Content,Cn=function(){var e=(0,r.Z)(),n=e.leftSiderStyle,t=e.contentStyle;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(a.Z,{children:[(0,j.jsx)(Zn,{style:n,children:(0,j.jsx)(w,{})}),(0,j.jsx)(a.Z,{children:(0,j.jsx)(Mn,{style:t,children:(0,j.jsx)(An,{})})})]})})}}}]);