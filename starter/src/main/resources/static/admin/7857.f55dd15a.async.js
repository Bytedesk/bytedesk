"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7857],{66916:function(e,t,a){a.d(t,{$l:function(){return h},JT:function(){return b},Xd:function(){return S},gf:function(){return j},lg:function(){return f},lz:function(){return x},p0:function(){return p},s9:function(){return m}});var r=a(90819),n=a.n(r),o=a(73193),s=a.n(o),i=a(89933),l=a.n(i),d=a(55735),u=a(30921);function p(e){return c.apply(this,arguments)}function c(){return(c=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/query/org",{method:"GET",params:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create/prompt",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return M.apply(this,arguments)}function M(){return(M=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return(y=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update/avatar",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update/prompt",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update/kbUid",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return I.apply(this,arguments)}function I(){return(I=l()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/delete",{method:"POST",data:s()(s()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},67857:function(e,t,a){a.d(t,{Z:function(){return R}});var r=a(84176),n=a.n(r),o=a(73193),s=a.n(o),i=a(90819),l=a.n(i),d=a(89933),u=a.n(d),p=a(45332),c=a.n(p),f=a(44194),g=a(53530),m=a(98036),v=a(75365),h=a(96485),M=a(86803),x=a(66916),y=a(30921),b=a(55735),w=a(90838),S=a(40612),k=a(69169),j=a(84881),I=a(4499),E=a(32350),Z=a(73442),T=a(3849),P=a(84288),C=a(6631),U=a(59908),A=a(76750),q=a(31549),z=function(e){var t,a=e.isEdit,r=e.robot,n=e.open,o=e.level,s=e.onClose,i=e.onSubmit,l=k.A.useForm(),d=c()(l,1)[0],u=(0,y.useIntl)(),p=(0,S.u)((function(e){return e.currentOrg})),g=(0,f.useState)("https://cdn.weiyuai.cn/assets/images/llm/provider/zhipu.png"),m=c()(g,2),h=m[0],x=(m[1],(0,f.useState)()),z=c()(x,2),O=z[0],D=z[1],Y=(0,w.v)((function(e){return e.categoryResult})),B=(0,A.Z)(),V=B.translateString,F=(B.translateStringTranct,(0,f.useState)(!1)),H=c()(F,2),L=H[0],N=H[1];(0,f.useEffect)((function(){if(a&&r&&d){var e,t;d.setFieldsValue({uid:null==r?void 0:r.uid,nickname:null==r?void 0:r.nickname,name:null==r?void 0:r.name,prompt:null==r||null===(e=r.llm)||void 0===e?void 0:e.prompt,description:null==r?void 0:r.description,categoryUid:null==r?void 0:r.categoryUid});var n=null==Y||null===(t=Y.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.find((function(e){return e.uid===(null==r?void 0:r.categoryUid)}));D(n),N((null==r?void 0:r.system)||!1)}else console.log("form resetFields"),d.resetFields(),N(!1)}),[r]);(0,f.useEffect)((function(){}),[r]);return(0,q.jsx)("div",{children:(0,q.jsx)(Z.Z,{title:a?"编辑提示语":"新建提示语",width:650,onClose:s,open:n,extra:(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(v.ZP,{onClick:s,children:"取消"}),(0,q.jsx)(v.ZP,{onClick:function(){console.log("handleSubmit"),d.validateFields().then((function(e){console.log("Form values:",e);var t={uid:a?null==r?void 0:r.uid:"",nickname:e.nickname,name:e.name,avatar:h,categoryUid:null==O?void 0:O.uid,llm:{prompt:e.prompt},description:e.description,type:b.Qeb,level:o,orgUid:null==p?void 0:p.uid};console.log("robotObject:",t),i(t)})).catch((function(e){console.log("Form errors:",e)}))},type:"primary",children:"保存"})]}),children:(0,q.jsxs)(k.A,{form:d,name:"model",submitter:!1,children:[(0,q.jsx)(j.Z,{label:"类别",name:"categoryUid",required:!0,options:null==Y||null===(t=Y.data)||void 0===t||null===(t=t.content)||void 0===t||null===(t=t.filter((function(e){return e.uid!==b.zBg})))||void 0===t?void 0:t.map((function(e){return{label:V(null==e?void 0:e.name),value:null==e?void 0:e.uid}})),fieldProps:{allowClear:!0,onChange:function(e){var t;console.log("handleChange:",e),D(null==Y||null===(t=Y.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.find((function(t){return t.uid===e})))}}}),(0,q.jsx)(I.Z,{label:"昵称",name:"nickname",required:!0,tooltip:"显示给用户的名称"}),(0,q.jsx)(I.Z,{label:"名称",name:"name",tooltip:"内部识别使用的名称",disabled:L,fieldProps:{placeholder:L?"系统代理不可修改名称":"请输入名称"}}),L&&(0,q.jsx)("div",{style:{color:"#ff4d4f",fontSize:"12px",marginTop:"-20px",marginBottom:"10px"},children:"系统内置代理，无法修改名称"}),(0,q.jsx)(k.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:u.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,q.jsxs)(C.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e)},onError:function(e){console.log("handleUploadError:",e),M.yw.error(e)},children:[(0,q.jsx)(P.C,{src:h}),(0,q.jsx)(v.ZP,{icon:(0,q.jsx)(U.Z,{}),children:u.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,q.jsx)(E.Z,{label:"提示语Prompt",name:"prompt",required:!0}),(0,q.jsx)(E.Z,{label:"简介描述",name:"description"})]})})})},O=a(15722),D=a(7358),Y=a(10162),B=a(11090),V=a(2484),F=a(81947),H=a(28977),L=a.n(H),N=a(36310),K=["current","pageSize","prompt"],R=function(e){var t=e.level,a=(e.type,(0,f.useRef)()),r=(0,y.useIntl)(),o=(0,f.useState)(!0),i=c()(o,2),d=i[0],p=i[1],k=(0,A.Z)().translateString,j=(0,f.useState)(1),I=c()(j,2),E=I[0],Z=I[1],T=(0,f.useState)(10),P=c()(T,2),C=P[0],U=P[1],H=(0,f.useState)(!1),R=c()(H,2),G=R[0],Q=R[1],J=(0,f.useState)([]),W=c()(J,2),$=(W[0],W[1]),_=(0,f.useState)({}),X=c()(_,2),ee=X[0],te=X[1],ae=(0,w.v)((function(e){return e.currentCategory})),re=(0,S.u)((function(e){return e.currentOrg})),ne=g.Z.useModal(),oe=c()(ne,2),se=oe[0],ie=oe[1],le=(0,f.useState)(0),de=c()(le,2),ue=de[0],pe=de[1],ce=(0,f.useState)({}),fe=c()(ce,2),ge=fe[0],me=fe[1],ve=function(){var e=u()(l()().mark((function e(t){var n,o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.yw.loading(r.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,(0,x.gf)(t);case 3:200===(n=e.sent).code?(M.yw.destroy(),M.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),null===(o=a.current)||void 0===o||o.reload()):(M.yw.destroy(),M.yw.error(n.message));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=u()(l()().mark((function e(t){var n,o,s,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=8;break}return M.yw.loading(r.formatMessage({id:"updating",defaultMessage:"Updating"})),e.next=4,(0,x.JT)(t);case 4:200===(n=e.sent).code?(M.yw.success(r.formatMessage({id:"update.success",defaultMessage:"update success"})),null===(o=a.current)||void 0===o||o.reload(),Q(!1)):M.yw.error(n.message),e.next=13;break;case 8:return M.yw.loading(r.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=11,(0,x.s9)(t);case 11:200===(s=e.sent).code?(M.yw.success(r.formatMessage({id:"create.success",defaultMessage:"create success"})),null===(i=a.current)||void 0===i||i.reload(),Q(!1)):M.yw.error(s.message);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.reload()}),[ae]);var Me=function(){var e=u()(l()().mark((function e(a,r,n){var o,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",a,r,n),o=localStorage.getItem(b.LA8),i=s()({categoryUid:(null==ae?void 0:ae.uid)===b.zBg?"":null==ae?void 0:ae.uid,orgUid:t===b.Hxq?"":null==re?void 0:re.uid,level:t,type:b.Qeb,accessToken:o||"",exportType:a},ge),"current"===a?(i.pageNumber=String(E-1),i.pageSize=String(C)):"all"===a?(i.pageNumber="0",i.pageSize="1000"):"range"===a&&void 0!==r&&void 0!==n&&(i.pageNumber=String(r),i.pageSize=String(n)),window.open((0,N.kG)()+"/api/v1/robot/export?"+new URLSearchParams(i).toString());case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),xe=function(e){for(var t=[],a=1e3,r=Math.ceil(e/a),n=function(){var r=o,n=o*a+1,s=Math.min((o+1)*a,e);t.push({key:"export-".concat(o),label:"".concat(n,"-").concat(s," (").concat(s-n+1,"条)"),onClick:function(){return Me("range",r,a)}})},o=0;o<r;o++)n();return t},ye=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:r.formatMessage({id:"pages.prompt.nickname",defaultMessage:"昵称"}),dataIndex:"nickname",hideInSearch:!1,fixed:"left",width:150,copyable:!0,ellipsis:!0,tooltip:r.formatMessage({id:"pages.prompt.nickname.tooltip",defaultMessage:"代理的昵称，用于展示"})},{title:r.formatMessage({id:"pages.prompt.name",defaultMessage:"名称"}),dataIndex:"name",width:200,copyable:!0,ellipsis:!0,tooltip:r.formatMessage({id:"pages.prompt.name.tooltip",defaultMessage:"代理的名称，用于内部识别"})},{title:r.formatMessage({id:"pages.prompt.description",defaultMessage:"描述"}),dataIndex:"description",width:200,copyable:!0,ellipsis:!0,tooltip:r.formatMessage({id:"pages.prompt.description.tooltip",defaultMessage:"代理的功能描述"})},{title:r.formatMessage({id:"pages.prompt.prompt",defaultMessage:"提示词"}),dataIndex:"prompt",ellipsis:!0,hideInSearch:!1,copyable:!0,width:250,tooltip:r.formatMessage({id:"pages.prompt.prompt.tooltip",defaultMessage:"传递给模型的指令和上下文"}),render:function(e,t){var a,n=(null===(a=t.llm)||void 0===a?void 0:a.prompt)||"-";return(0,q.jsx)(m.Z,{content:(0,q.jsxs)("div",{children:[(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,q.jsx)("span",{children:r.formatMessage({id:"pages.prompt.prompt.content",defaultMessage:"提示词内容"})}),(0,q.jsx)(v.ZP,{type:"text",icon:(0,q.jsx)(D.Z,{}),onClick:function(e){var t;e.stopPropagation(),t=n,navigator.clipboard.writeText(t).then((function(){M.yw.success(r.formatMessage({id:"copy.success",defaultMessage:"复制成功"}))}),(function(e){console.error("复制失败: ",e),M.yw.error(r.formatMessage({id:"copy.failed",defaultMessage:"复制失败"}))}))},title:r.formatMessage({id:"copy.to.clipboard",defaultMessage:"复制到剪贴板"})})]}),(0,q.jsx)("div",{style:{maxWidth:"600px",maxHeight:"400px",overflow:"auto",whiteSpace:"pre-wrap"},children:n})]}),title:r.formatMessage({id:"pages.prompt.prompt",defaultMessage:"提示词"}),trigger:"hover",overlayStyle:{maxWidth:"800px"},children:(0,q.jsx)("span",{style:{cursor:"pointer"},children:n})})}},{title:r.formatMessage({id:"pages.prompt.model",defaultMessage:"模型"}),dataIndex:["llm","model"],hideInSearch:!0,width:150,tooltip:r.formatMessage({id:"pages.prompt.model.tooltip",defaultMessage:"使用的大语言模型"})},{title:r.formatMessage({id:"pages.prompt.provider",defaultMessage:"提供商"}),dataIndex:["llm","provider"],hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.provider.tooltip",defaultMessage:"模型提供商"})},{title:r.formatMessage({id:"pages.prompt.visionEnabled",defaultMessage:"视觉模型启用"}),dataIndex:["llm","visionEnabled"],hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.visionEnabled.tooltip",defaultMessage:"是否启用视觉模型功能"}),render:function(e,t){var a;return null!==(a=t.llm)&&void 0!==a&&a.visionEnabled?"是":"否"}},{title:r.formatMessage({id:"pages.prompt.visionProvider",defaultMessage:"视觉提供商"}),dataIndex:["llm","visionProvider"],hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.visionProvider.tooltip",defaultMessage:"视觉模型的服务提供商"}),render:function(e,t){var a;return(null===(a=t.llm)||void 0===a?void 0:a.visionProvider)||"-"}},{title:r.formatMessage({id:"pages.prompt.visionModel",defaultMessage:"视觉模型"}),dataIndex:["llm","visionModel"],hideInSearch:!0,width:150,tooltip:r.formatMessage({id:"pages.prompt.visionModel.tooltip",defaultMessage:"使用的视觉模型名称"}),render:function(e,t){var a;return(null===(a=t.llm)||void 0===a?void 0:a.visionModel)||"-"}},{title:r.formatMessage({id:"pages.prompt.speechEnabled",defaultMessage:"语音模型启用"}),dataIndex:["llm","speechEnabled"],hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.speechEnabled.tooltip",defaultMessage:"是否启用语音模型功能"}),render:function(e,t){var a;return null!==(a=t.llm)&&void 0!==a&&a.speechEnabled?"是":"否"}},{title:r.formatMessage({id:"pages.prompt.speechProvider",defaultMessage:"语音提供商"}),dataIndex:["llm","speechProvider"],hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.speechProvider.tooltip",defaultMessage:"语音模型的服务提供商"}),render:function(e,t){var a;return(null===(a=t.llm)||void 0===a?void 0:a.speechProvider)||"-"}},{title:r.formatMessage({id:"pages.prompt.speechModel",defaultMessage:"语音模型"}),dataIndex:["llm","speechModel"],hideInSearch:!0,width:150,tooltip:r.formatMessage({id:"pages.prompt.speechModel.tooltip",defaultMessage:"使用的语音模型名称"}),render:function(e,t){var a;return(null===(a=t.llm)||void 0===a?void 0:a.speechModel)||"-"}},{title:r.formatMessage({id:"pages.prompt.temperature",defaultMessage:"温度"}),dataIndex:["llm","temperature"],hideInSearch:!0,width:80,tooltip:r.formatMessage({id:"pages.prompt.temperature.tooltip",defaultMessage:"控制输出的随机性，值越高输出越随机创新"}),render:function(e,t){var a,r;return 0===(null===(a=t.llm)||void 0===a?void 0:a.temperature)?"0":(null===(r=t.llm)||void 0===r?void 0:r.temperature)||"-"}},{title:r.formatMessage({id:"pages.prompt.topK",defaultMessage:"Top K"}),dataIndex:["llm","topK"],hideInSearch:!0,width:80,tooltip:r.formatMessage({id:"pages.prompt.topK.tooltip",defaultMessage:"检索时返回的相关文档数量"}),render:function(e,t){var a;return(null===(a=t.llm)||void 0===a?void 0:a.topK)||"-"}},{title:r.formatMessage({id:"pages.prompt.system",defaultMessage:"系统"}),dataIndex:"system",hideInSearch:!0,width:80,tooltip:r.formatMessage({id:"pages.prompt.system.tooltip",defaultMessage:"是否为系统内置代理"}),render:function(e,t){return t.system?"是":"否"}},{title:r.formatMessage({id:"pages.prompt.kbEnabled",defaultMessage:"知识库启用"}),dataIndex:"kbEnabled",hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.kbEnabled.tooltip",defaultMessage:"是否启用知识库增强功能"}),render:function(e,t){return t.kbEnabled?"是":"否"}},{title:r.formatMessage({id:"pages.prompt.flowEnabled",defaultMessage:"流程启用"}),dataIndex:"flowEnabled",hideInSearch:!0,width:120,tooltip:r.formatMessage({id:"pages.prompt.flowEnabled.tooltip",defaultMessage:"是否启用流程控制功能"}),render:function(e,t){return t.flowEnabled?"是":"否"}},{title:r.formatMessage({id:"pages.prompt.createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,width:160,hideInSearch:!0,tooltip:r.formatMessage({id:"pages.prompt.createdAt.tooltip",defaultMessage:"代理创建的时间"}),render:function(e,t){return t.createdAt?L()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:r.formatMessage({id:"pages.prompt.updatedAt",defaultMessage:"更新时间"}),dataIndex:"updatedAt",valueType:"dateTime",sorter:!0,hideInSearch:!0,width:160,tooltip:r.formatMessage({id:"pages.prompt.updatedAt.tooltip",defaultMessage:"代理最后更新的时间"}),render:function(e,t){return t.updatedAt?L()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:r.formatMessage({id:"actions",defaultMessage:"操作"}),dataIndex:"option",valueType:"option",width:120,fixed:"right",tooltip:r.formatMessage({id:"pages.prompt.actions.tooltip",defaultMessage:"可进行的操作"}),render:function(e,t){var a;return[(0,q.jsx)("a",{onClick:function(){return function(e){p(!0),te(e),Q(!0)}(t)},children:r.formatMessage({id:"pages.robot.edit",defaultMessage:"Edit"})},"edit"),!(null!=t&&null!==(a=t.uid)&&void 0!==a&&a.includes("void_agent"))&&(0,q.jsx)("a",{onClick:function(){return e=t,void se.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,q.jsx)(O.Z,{}),content:"".concat(r.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(k(e.nickname),"】？"),onOk:function(){ve(e)},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})});var e},children:r.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})},"delete")]}}],be=function(){var e=u()(l()().mark((function e(a,o,i){var d,u,p,c,f,g,m,v,h;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),d=a.current,u=a.pageSize,p=a.prompt,c=n()(a,K),Z(d),U(u),me(s()(s()({},c),{},{prompt:p})),f=void 0,g=void 0,o&&Object.keys(o).length>0&&(m=Object.keys(o)[0],f=m,g="ascend"===o[m]?"ascend":"descend"),v=s()(s()({pageNumber:d-1,pageSize:u,nickname:"",orgUid:t===b.Hxq?"":null==re?void 0:re.uid,categoryUid:(null==ae?void 0:ae.uid)===b.zBg?"":null==ae?void 0:ae.uid,type:b.Qeb,level:t},c),{},{prompt:p,sortBy:f,sortDirection:g}),e.next=11,(0,x.p0)(v);case 11:if(h=e.sent,console.log("queryRobotsByOrg response:",h,v),200!==h.code){e.next=20;break}return M.yw.destroy(),$(h.data.content),pe(h.data.totalElements),e.abrupt("return",{data:h.data.content,success:!0,total:h.data.totalElements});case 20:return M.yw.destroy(),M.yw.error(h.message),e.abrupt("return",{data:[],success:!1,total:0});case 23:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(F.Z,{columns:ye,actionRef:a,cardBordered:!0,rowKey:"uid",scroll:{x:2400},search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,pageSize:10,onChange:function(e,t){Z(e),U(t)}},dateFormatter:"string",headerTitle:r.formatMessage({id:"pages.prompt.list",defaultMessage:"提示语列表"}),toolBarRender:function(){var e=[(0,q.jsx)(v.ZP,{type:"primary",onClick:function(){p(!1),te({}),Q(!0)},icon:(0,q.jsx)(Y.Z,{}),children:r.formatMessage({id:"pages.prompt.create",defaultMessage:"添加提示语"})},"create")],t=[{key:"export-current",icon:(0,q.jsx)(B.Z,{}),label:r.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return Me("current")}}];return ue>0&&(ue<=1e3?t.push({key:"export-all",icon:(0,q.jsx)(B.Z,{}),label:r.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(ue,"条)"),onClick:function(){return Me("all")}}):t.push({key:"export-range",icon:(0,q.jsx)(B.Z,{}),label:r.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(ue,"条)"),children:xe(ue)})),e.push((0,q.jsx)(h.Z,{menu:{items:t},placement:"bottom",children:(0,q.jsxs)(v.ZP,{type:"primary",icon:(0,q.jsx)(B.Z,{}),children:[r.formatMessage({id:"export",defaultMessage:"导出"}),(0,q.jsx)(V.Z,{})]})},"export")),e},request:be}),G&&(0,q.jsx)(z,{isEdit:d,robot:ee,level:t,open:G,onClose:function(){return Q(!1)},onSubmit:he}),ie]})}},6631:function(e,t,a){a.d(t,{G:function(){return c}});var r=a(73193),n=a.n(r),o=(a(44194),a(30348)),s=a(55735),i=a(28977),l=a.n(i),d=a(86803),u=a(36310),p=a(31549),c=function(e){var t=e.children,a=e.onSuccess,r=e.onError,i={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:s.IrL,categoryUid:"",kbUid:"",client:s.bVn},c={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return i.file=e,i.fileName=t,i.fileType=e.type,console.log("beforeUpload",i),!0},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data.fileUrl;a(t),d.yw.success("".concat(e.file.name," 上传成功"))}else r(e.file),d.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(d.yw.error("".concat(e.file.name," 上传失败")),r(e.file))}};return(0,p.jsx)(o.Z,n()(n()({},c),{},{children:t}))}}}]);