"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1469],{66916:function(e,t,n){n.d(t,{$l:function(){return m},JT:function(){return x},gf:function(){return q},lg:function(){return g},n1:function(){return b},p0:function(){return c},s9:function(){return f}});var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),u=n(89933),a=n.n(u),l=n(55735),d=n(30921);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update/avatar",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return S.apply(this,arguments)}function S(){return(S=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return k.apply(this,arguments)}function k(){return(k=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},99885:function(e,t,n){n.d(t,{Yg:function(){return m},kh:function(){return g},kv:function(){return b},pf:function(){return c},y:function(){return f}});var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),u=n(89933),a=n.n(u),l=n(55735),d=n(30921);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/enable",{method:"POST",data:{uid:t.uid,enabled:t.enabled,client:l.bVn}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},43705:function(e,t,n){var i=n(73193),o=n.n(i),s=n(90819),r=n.n(s),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(99885),g=n(66916),p=n(76750),f=n(66310),h=n(40612),m=n(5651),w=n(69169),b=n(48708),y=n(84881),x=n(30921),S=n(75365),q=n(3849),k=n(44194),F=n(1902),C=n(95490),j=n(55735),U=n(24170),M=n(72614),R=n(11184),T=n(31549);t.Z=function(e){var t,n=e.type,i=w.A.useForm(),s=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),I=(0,p.Z)().translateString,Z=(0,R.M)(),A=Z.config,P=Z.updateConfig,_=(0,h.u)((function(e){return e.currentOrg})),L=(0,k.useState)(),W=d()(L,2),V=W[0],B=W[1],D=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=D.currentRobot,O=D.setCurrentRobot,E=(0,F.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),z=E.currentAgent,X=E.setCurrentAgent,Y=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=Y.currentWorkgroup,H=Y.setCurrentWorkgroup,G=(0,k.useMemo)((function(){return n===j._X4?{chatType:j.xtN,chatSid:N.uid}:n===j.Njn?{chatType:j.scI,chatSid:z.uid}:n===j.aZD?{chatType:j.vPY,chatSid:$.uid}:{chatType:j.xtN,chatSid:""}}),[n,N,z,$]),Q=G.chatType,K=G.chatSid,J=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:100,orgUid:null==_?void 0:_.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){J()}),[]),(0,k.useEffect)((function(){var e,t,i;if(n===j._X4)s.setFieldsValue({showFaqs:null==N||null===(e=N.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==N||null===(t=N.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),null!=N&&null!==(i=N.serviceSettings)&&void 0!==i&&i.showFaqs?P(o()(o()({},A),{},{window:o()(o()({},A.window),{},{width:680}),chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})})):P(o()(o()({},A),{},{window:o()(o()({},A.window),{},{width:380}),chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})}));else if(n===j.Njn){var r,u,a;s.setFieldsValue({showFaqs:null==z||null===(r=z.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==z||null===(u=z.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),null!=z&&null!==(a=z.serviceSettings)&&void 0!==a&&a.showFaqs?P(o()(o()({},A),{},{window:o()(o()({},A.window),{},{width:680}),chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})})):P(o()(o()({},A),{},{window:o()(o()({},A.window),{},{width:380}),chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})}))}else if(n===j.aZD){var l,d,c;s.setFieldsValue({showFaqs:null==$||null===(l=$.serviceSettings)||void 0===l?void 0:l.showFaqs,faqUids:null==$||null===(d=$.serviceSettings)||void 0===d||null===(d=d.faqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),null!=$&&null!==(c=$.serviceSettings)&&void 0!==c&&c.showFaqs?P(o()(o()({},A),{},{window:o()(o()({},A.window),{},{width:680}),chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})})):P(o()(o()({},A),{},{window:o()(o()({},A.window),{},{width:380}),chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})}))}}),[N,z,$,Q,K]);var ee=function(){var e=a()(r()().mark((function e(t){var i,s,a,l,d,v,p,f,h,m,w,b,y,x,S,q,k,F,C,R,T,I,Z,A,P;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==j._X4){e.next=11;break}return v=o()(o()({},N),{},{serviceSettings:o()(o()({},N.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,welcomeFaqUids:null==N||null===(i=N.serviceSettings)||void 0===i||null===(i=i.welcomeFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),quickFaqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(d=N.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",v),e.next=6,(0,g.$l)(v);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),O(p.data)):(c.yw.destroy(),c.yw.error(p.message)),e.next=29;break;case 11:if(n!==j.Njn){e.next=21;break}return S=o()(o()({},z),{},{serviceSettings:o()(o()({},null==z?void 0:z.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,welcomeFaqUids:null==z||null===(f=z.serviceSettings)||void 0===f||null===(f=f.welcomeFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),quickFaqUids:null==z||null===(h=z.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),guessFaqUids:null==z||null===(m=z.serviceSettings)||void 0===m||null===(m=m.guessFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),hotFaqUids:null==z||null===(w=z.serviceSettings)||void 0===w||null===(w=w.hotFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),shortcutFaqUids:null==z||null===(b=z.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),messageLeaveSettings:o()(o()({},z.messageLeaveSettings),{},{worktimeUids:null==z||null===(y=z.messageLeaveSettings)||void 0===y||null===(y=y.worktimes)||void 0===y?void 0:y.map((function(e){return e.uid}))}),robotSettings:o()(o()({},z.robotSettings),{},{robotUid:null==z||null===(x=z.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),autoReplySettings:o()({},z.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,U.sE)(S);case 16:q=e.sent,console.log("updateAgent response:",q),200===q.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(q.data)):(c.yw.destroy(),c.yw.error(q.message)),e.next=29;break;case 21:if(n!==j.aZD){e.next=29;break}return A=o()(o()({},$),{},{serviceSettings:o()(o()({},$.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,welcomeFaqUids:null==$||null===(k=$.serviceSettings)||void 0===k||null===(k=k.welcomeFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),quickFaqUids:null==$||null===(F=$.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==$||null===(C=$.serviceSettings)||void 0===C||null===(C=C.guessFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),hotFaqUids:null==$||null===(R=$.serviceSettings)||void 0===R||null===(R=R.hotFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(T=$.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),robotSettings:o()(o()({},$.robotSettings),{},{robotUid:null==$||null===(I=$.robotSettings)||void 0===I||null===(I=I.robot)||void 0===I?void 0:I.uid}),messageLeaveSettings:o()(o()({},$.messageLeaveSettings),{},{worktimeUids:null==$||null===(Z=$.messageLeaveSettings)||void 0===Z||null===(Z=Z.worktimes)||void 0===Z?void 0:Z.map((function(e){return e.uid}))}),agentUids:$.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",A),e.next=26,(0,M.W5)(A);case 26:P=e.sent,console.log("updateWorkGroup response:",P),200===P.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(P.data)):(c.yw.destroy(),c.yw.error(P.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsxs)(w.A,{form:s,layout:"vertical",onFinish:ee,children:[(0,T.jsx)(b.Z,{label:u.formatMessage({id:"faq.show.faqs"}),name:"showFaqs",fieldProps:{onChange:te}}),(0,T.jsx)(w.A.Item,{children:(0,T.jsx)(S.ZP,{type:"primary",icon:(0,T.jsx)(m.Z,{}),onClick:function(){l("/kb/llm/data")},children:u.formatMessage({id:"faq.add.faqs"})},"github")}),(0,T.jsx)(y.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.kbase.faq"}),options:null==V||null===(t=V.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(q.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(S.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,T.jsx)(S.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},71469:function(e,t,n){var i=n(73193),o=n.n(i),s=n(90819),r=n.n(s),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(99885),g=n(66916),p=n(76750),f=n(66310),h=n(40612),m=n(5651),w=n(69169),b=n(48708),y=n(84881),x=n(30921),S=n(75365),q=n(3849),k=n(44194),F=n(1902),C=n(95490),j=n(55735),U=n(24170),M=n(72614),R=n(11184),T=n(31549);t.Z=function(e){var t,n=e.type,i=w.A.useForm(),s=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),I=(0,p.Z)().translateString,Z=(0,R.M)(),A=Z.config,P=Z.updateConfig,_=(0,h.u)((function(e){return e.currentOrg})),L=(0,k.useState)(),W=d()(L,2),V=W[0],B=W[1],D=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=D.currentRobot,O=D.setCurrentRobot,E=(0,F.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),z=E.currentAgent,X=E.setCurrentAgent,Y=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=Y.currentWorkgroup,H=Y.setCurrentWorkgroup,G=(0,k.useMemo)((function(){return n===j._X4?{chatType:j.xtN,chatSid:N.uid}:n===j.Njn?{chatType:j.scI,chatSid:z.uid}:n===j.aZD?{chatType:j.vPY,chatSid:$.uid}:{chatType:j.xtN,chatSid:""}}),[n,N,z,$]),Q=G.chatType,K=G.chatSid,J=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==_?void 0:_.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){J()}),[_]),(0,k.useEffect)((function(){var e,t;if(n===j._X4)s.setFieldsValue({showQuickFaqs:null==N||null===(e=N.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==N||null===(t=N.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),P(o()(o()({},A),{},{chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})}));else if(n===j.Njn){var i,r;s.setFieldsValue({showQuickFaqs:null==z||null===(i=z.serviceSettings)||void 0===i?void 0:i.showQuickFaqs,quickFaqUids:null==z||null===(r=z.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),P(o()(o()({},A),{},{chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})}))}else if(n===j.aZD){var u,a;s.setFieldsValue({showQuickFaqs:null==$||null===(u=$.serviceSettings)||void 0===u?void 0:u.showQuickFaqs,quickFaqUids:null==$||null===(a=$.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),P(o()(o()({},A),{},{chatConfig:o()(o()({},A.chatConfig),{},{org:null==_?void 0:_.uid,t:Q,sid:K})}))}}),[N,z,$,Q,K]);var ee=function(){var e=a()(r()().mark((function e(t){var i,s,a,l,d,v,p,f,h,m,w,b,y,x,S,q,k,F,C,R,T,I,Z,A,P;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==j._X4){e.next=11;break}return v=o()(o()({},N),{},{serviceSettings:o()(o()({},N.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,welcomeFaqUids:null==N||null===(i=N.serviceSettings)||void 0===i||null===(i=i.welcomeFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(d=N.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",v),e.next=6,(0,g.$l)(v);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),O(p.data)):(c.yw.destroy(),c.yw.error(p.message)),e.next=29;break;case 11:if(n!==j.Njn){e.next=21;break}return S=o()(o()({},z),{},{serviceSettings:o()(o()({},null==z?void 0:z.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,welcomeFaqUids:null==z||null===(f=z.serviceSettings)||void 0===f||null===(f=f.welcomeFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==z||null===(h=z.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),guessFaqUids:null==z||null===(m=z.serviceSettings)||void 0===m||null===(m=m.guessFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),hotFaqUids:null==z||null===(w=z.serviceSettings)||void 0===w||null===(w=w.hotFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),shortcutFaqUids:null==z||null===(b=z.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),robotSettings:o()(o()({},z.robotSettings),{},{robotUid:null==z||null===(y=z.robotSettings)||void 0===y||null===(y=y.robot)||void 0===y?void 0:y.uid}),messageLeaveSettings:o()(o()({},z.messageLeaveSettings),{},{worktimeUids:null==z||null===(x=z.messageLeaveSettings)||void 0===x||null===(x=x.worktimes)||void 0===x?void 0:x.map((function(e){return e.uid}))}),autoReplySettings:o()({},z.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,U.sE)(S);case 16:q=e.sent,console.log("updateAgent response:",q),200===q.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(q.data)):(c.yw.destroy(),c.yw.error(q.message)),e.next=29;break;case 21:if(n!==j.aZD){e.next=29;break}return A=o()(o()({},$),{},{serviceSettings:o()(o()({},$.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,welcomeFaqUids:null==$||null===(k=$.serviceSettings)||void 0===k||null===(k=k.welcomeFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),faqUids:null===(F=$.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==$||null===(C=$.serviceSettings)||void 0===C||null===(C=C.guessFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),hotFaqUids:null==$||null===(R=$.serviceSettings)||void 0===R||null===(R=R.hotFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(T=$.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),robotSettings:o()(o()({},$.robotSettings),{},{robotUid:null==$||null===(I=$.robotSettings)||void 0===I||null===(I=I.robot)||void 0===I?void 0:I.uid}),messageLeaveSettings:o()(o()({},$.messageLeaveSettings),{},{worktimeUids:null==$||null===(Z=$.messageLeaveSettings)||void 0===Z||null===(Z=Z.worktimes)||void 0===Z?void 0:Z.map((function(e){return e.uid}))}),agentUids:$.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",A),e.next=26,(0,M.W5)(A);case 26:P=e.sent,console.log("updateWorkGroup response:",P),200===P.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(P.data)):(c.yw.destroy(),c.yw.error(P.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsxs)(w.A,{form:s,layout:"vertical",onFinish:ee,children:[(0,T.jsx)(b.Z,{label:u.formatMessage({id:"faq.show.quick.buttons"}),name:"showQuickFaqs",fieldProps:{onChange:te}}),(0,T.jsx)(w.A.Item,{children:(0,T.jsx)(S.ZP,{type:"primary",icon:(0,T.jsx)(m.Z,{}),onClick:function(){l("/kb/llm/data")},children:u.formatMessage({id:"faq.add.quick.buttons"})},"github")}),(0,T.jsx)(y.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.kbase.quickbutton"}),options:null==V||null===(t=V.data)||void 0===t?void 0:t.content.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(q.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(S.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"show.chat.window"})}),(0,T.jsx)(S.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"hide.chat.window"})})]})]})}},40058:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(24170),n(66916),n(72614),n(1902),n(66310),n(95490),n(55735),n(30921),n(44194),n(31549)},50796:function(e,t,n){var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(1902),h=n(66310),m=n(95490),w=n(55735),b=n(69169),y=n(48708),x=n(30921),S=n(44194),q=n(31549);t.Z=function(e){var t=e.type,n=(0,x.useIntl)(),i=b.A.useForm(),s=d()(i,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),l=u.currentRobot,k=u.setCurrentRobot,F=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),C=F.currentAgent,j=F.setCurrentAgent,U=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),M=U.currentWorkgroup,R=U.setCurrentWorkgroup;(0,S.useEffect)((function(){var e;if(t===w._X4)s.setFieldsValue({showInputAssociation:null==l||null===(e=l.serviceSettings)||void 0===e?void 0:e.showInputAssociation});else if(t===w.Njn){var n;s.setFieldsValue({showInputAssociation:null==C||null===(n=C.serviceSettings)||void 0===n?void 0:n.showInputAssociation})}else if(t===w.aZD){var i;s.setFieldsValue({showInputAssociation:null==M||null===(i=M.serviceSettings)||void 0===i?void 0:i.showInputAssociation})}}),[l,C,M]);var T=function(){var e=a()(o()().mark((function e(i){var s,u,a,d,f,h,m,b,y,x,S,q,F,U,T,I,Z,A,P,_,L,W,V,B,D;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleInputAssociationSubmit:",i),t!==w._X4){e.next=11;break}return h=r()(r()({},l),{},{serviceSettings:r()(r()({},l.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==C||null===(s=C.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),quickFaqUids:null==l||null===(u=l.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==l||null===(a=l.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==l||null===(d=l.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==l||null===(f=l.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),k(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return T=r()(r()({},C),{},{serviceSettings:r()(r()({},null==C?void 0:C.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==C||null===(b=C.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),quickFaqUids:null==C||null===(y=C.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==C||null===(x=C.serviceSettings)||void 0===x||null===(x=x.guessFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),hotFaqUids:null==C||null===(S=C.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==C||null===(q=C.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:r()(r()({},C.robotSettings),{},{robotUid:null==C||null===(F=C.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),messageLeaveSettings:r()(r()({},C.messageLeaveSettings),{},{worktimeUids:null==C||null===(U=C.messageLeaveSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),autoReplySettings:r()({},C.autoReplySettings)}),console.log("agentObject:",T),e.next=16,(0,v.sE)(T);case 16:I=e.sent,console.log("updateAgent response:",I),200===I.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),j(I.data)):(c.yw.destroy(),c.yw.error(I.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return B=r()(r()({},M),{},{serviceSettings:r()(r()({},M.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==C||null===(Z=C.serviceSettings)||void 0===Z||null===(Z=Z.faqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),quickFaqUids:null===(A=M.serviceSettings)||void 0===A||null===(A=A.quickFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),guessFaqUids:null==M||null===(P=M.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==M||null===(_=M.serviceSettings)||void 0===_||null===(_=_.hotFaqs)||void 0===_?void 0:_.map((function(e){return e.uid})),shortcutFaqUids:null==M||null===(L=M.serviceSettings)||void 0===L||null===(L=L.shortcutFaqs)||void 0===L?void 0:L.map((function(e){return e.uid}))}),robotSettings:r()(r()({},M.robotSettings),{},{robotUid:null==M||null===(W=M.robotSettings)||void 0===W||null===(W=W.robot)||void 0===W?void 0:W.uid}),messageLeaveSettings:r()(r()({},M.messageLeaveSettings),{},{worktimeUids:null==M||null===(V=M.messageLeaveSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),agentUids:M.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",B),e.next=26,(0,p.W5)(B);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),R(D.data)):(c.yw.destroy(),c.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,q.jsx)("div",{children:(0,q.jsx)(b.A,{form:s,onFinish:T,children:(0,q.jsx)(y.Z,{width:"md",name:"showInputAssociation",label:n.formatMessage({id:"showInputAssociation",defaultMessage:"Show Input Association"})})})})}},75808:function(e,t,n){var i=n(90819),o=n.n(i),s=n(89933),r=n.n(s),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(1902),h=n(66310),m=n(95490),w=n(55735),b=n(69169),y=n(48708),x=n(32350),S=n(30921),q=n(44194),k=n(11184),F=n(3849),C=n(75365),j=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),i=b.A.useForm(),s=d()(i,1)[0],u=(0,k.M)(),l=u.config,U=u.updateConfig,M=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),R=M.currentRobot,T=M.setCurrentRobot,I=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Z=I.currentAgent,A=I.setCurrentAgent,P=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=P.currentWorkgroup,L=P.setCurrentWorkgroup,W=(0,q.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:R.uid}:t===w.Njn?{chatType:w.scI,chatSid:Z.uid}:t===w.aZD?{chatType:w.vPY,chatSid:_.uid}:{chatType:w.xtN,chatSid:""}}),[t,R,Z,_]),V=W.chatType,B=W.chatSid;(0,q.useEffect)((function(){var e,n,i,o,r,u;if(t===w._X4)s.setFieldsValue({autoPopup:null==R||null===(e=R.serviceSettings)||void 0===e?void 0:e.autoPopup,showInvite:null==R||null===(n=R.inviteSettings)||void 0===n?void 0:n.show,inviteText:null==R||null===(i=R.inviteSettings)||void 0===i?void 0:i.text}),U(a()(a()({},l),{},{autoPopup:null==R||null===(o=R.serviceSettings)||void 0===o?void 0:o.autoPopup,inviteConfig:{show:null==R||null===(r=R.inviteSettings)||void 0===r?void 0:r.show,text:null==R||null===(u=R.inviteSettings)||void 0===u?void 0:u.text},chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B})}));else if(t===w.Njn){var d,c,v,g,p,f;s.setFieldsValue({autoPopup:null==Z||null===(d=Z.serviceSettings)||void 0===d?void 0:d.autoPopup,showInvite:null==Z||null===(c=Z.inviteSettings)||void 0===c?void 0:c.show,inviteText:null==Z||null===(v=Z.inviteSettings)||void 0===v?void 0:v.text}),U(a()(a()({},l),{},{autoPopup:null==Z||null===(g=Z.serviceSettings)||void 0===g?void 0:g.autoPopup,inviteConfig:{show:null==Z||null===(p=Z.inviteSettings)||void 0===p?void 0:p.show,text:null==Z||null===(f=Z.inviteSettings)||void 0===f?void 0:f.text},chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B})}))}else if(t===w.aZD){var h,m,b,y,x,S;s.setFieldsValue({autoPopup:null==_||null===(h=_.serviceSettings)||void 0===h?void 0:h.autoPopup,showInvite:null==_||null===(m=_.inviteSettings)||void 0===m?void 0:m.show,inviteText:null==_||null===(b=_.inviteSettings)||void 0===b?void 0:b.text}),U(a()(a()({},l),{},{autoPopup:null==_||null===(y=_.serviceSettings)||void 0===y?void 0:y.autoPopup,inviteConfig:{show:null==_||null===(x=_.inviteSettings)||void 0===x?void 0:x.show,text:null==_||null===(S=_.inviteSettings)||void 0===S?void 0:S.text},chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B})}))}}),[R,Z,_,V,B]);var D=function(){var e=r()(o()().mark((function e(i){var s,r,u,l,d,f,h,m,b,y,x,S,q,k,F,C,j,U,M,I,P,W,V,B,D,N,O,E;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),t!==w._X4){e.next=11;break}return h=a()(a()({},R),{},{serviceSettings:a()(a()({},R.serviceSettings),{},{autoPopup:i.autoPopup,welcomeFaqUids:null==R||null===(s=R.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==R||null===(r=R.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==R||null===(u=R.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==R||null===(l=R.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==R||null===(d=R.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(f=R.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},R.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return j=a()(a()({},Z),{},{serviceSettings:a()(a()({},null==Z?void 0:Z.serviceSettings),{},{autoPopup:i.autoPopup,welcomeFaqUids:null==Z||null===(b=Z.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),faqUids:null==Z||null===(y=Z.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),quickFaqUids:null==Z||null===(x=Z.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(S=Z.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(q=Z.serviceSettings)||void 0===q||null===(q=q.hotFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(k=Z.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:a()(a()({},Z.robotSettings),{},{robotUid:null==Z||null===(F=Z.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),messageLeaveSettings:a()(a()({},Z.messageLeaveSettings),{},{worktimeUids:null==Z||null===(C=Z.messageLeaveSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:a()({},Z.autoReplySettings),inviteSettings:a()(a()({},Z.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",j),e.next=16,(0,v.sE)(j);case 16:U=e.sent,console.log("updateAgent response:",U),200===U.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),A(U.data)):(c.yw.destroy(),c.yw.error(U.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return O=a()(a()({},_),{},{serviceSettings:a()(a()({},_.serviceSettings),{},{autoPopup:i.autoPopup,welcomeFaqUids:null==_||null===(M=_.serviceSettings)||void 0===M||null===(M=M.faqs)||void 0===M?void 0:M.map((function(e){return e.uid})),faqUids:null==_||null===(I=_.serviceSettings)||void 0===I||null===(I=I.faqs)||void 0===I?void 0:I.map((function(e){return e.uid})),quickFaqUids:null===(P=_.serviceSettings)||void 0===P||null===(P=P.quickFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),guessFaqUids:null==_||null===(W=_.serviceSettings)||void 0===W||null===(W=W.guessFaqs)||void 0===W?void 0:W.map((function(e){return e.uid})),hotFaqUids:null==_||null===(V=_.serviceSettings)||void 0===V||null===(V=V.hotFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(B=_.serviceSettings)||void 0===B||null===(B=B.shortcutFaqs)||void 0===B?void 0:B.map((function(e){return e.uid}))}),robotSettings:a()(a()({},_.robotSettings),{},{robotUid:null==_||null===(D=_.robotSettings)||void 0===D||null===(D=D.robot)||void 0===D?void 0:D.uid}),messageLeaveSettings:a()(a()({},_.messageLeaveSettings),{},{worktimeUids:null==_||null===(N=_.messageLeaveSettings)||void 0===N||null===(N=N.worktimes)||void 0===N?void 0:N.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},_.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:_.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",O),e.next=26,(0,p.W5)(O);case 26:E=e.sent,console.log("updateWorkGroup response:",E),200===E.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),L(E.data)):(c.yw.destroy(),c.yw.error(E.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{children:[(0,j.jsxs)(b.A,{form:s,onFinish:D,children:[(0,j.jsx)(y.Z,{width:"md",name:"autoPopup",label:n.formatMessage({id:"autoPopup",defaultMessage:"Auto Popup"})}),(0,j.jsx)(y.Z,{width:"md",name:"showInvite",label:n.formatMessage({id:"showInvite",defaultMessage:"Show Invite"})}),(0,j.jsx)(x.Z,{width:"md",name:"inviteText",label:n.formatMessage({id:"inviteText",defaultMessage:"Invite Text"})})]}),(0,j.jsxs)(F.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,j.jsx)(C.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,j.jsx)(C.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},23635:function(e,t,n){var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(72614),p=n(1902),f=n(95490),h=n(55735),m=n(65461),w=n(69169),b=n(48708),y=n(30921),x=n(44194),S=n(51990),q=n(66310),k=n(66916),F=n(76750),C=n(31549);t.Z=function(e){var t=e.type,n=(0,y.useIntl)(),i=w.A.useForm(),s=d()(i,1)[0],u=(0,F.Z)().translateString,l=(0,x.useState)(!1),j=d()(l,2),U=(j[0],j[1],(0,x.useState)("")),M=d()(U,2),R=M[0],T=M[1],I=(0,q.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Z=I.currentRobot,A=I.setCurrentRobot,P=(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),_=P.currentAgent,L=P.setCurrentAgent,W=(0,f.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),V=W.currentWorkgroup,B=W.setCurrentWorkgroup;(0,x.useEffect)((function(){var e,n,i;if(t===h.Njn)s.setFieldValue("showRateBtn",null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showRateBtn),s.setFieldValue("autoInviteRate",null==_||null===(n=_.serviceSettings)||void 0===n?void 0:n.autoInviteRate),T(u(null==_||null===(i=_.serviceSettings)||void 0===i?void 0:i.inviteRateTip));else if(t===h.aZD){var o,r,a;s.setFieldValue("showRateBtn",null==V||null===(o=V.serviceSettings)||void 0===o?void 0:o.showRateBtn),s.setFieldValue("autoInviteRate",null==V||null===(r=V.serviceSettings)||void 0===r?void 0:r.autoInviteRate),T(u(null==V||null===(a=V.serviceSettings)||void 0===a?void 0:a.inviteRateTip))}else if(t===h._X4){var l,d,c;s.setFieldValue("showRateBtn",null==Z||null===(l=Z.serviceSettings)||void 0===l?void 0:l.showRateBtn),s.setFieldValue("autoInviteRate",null==Z||null===(d=Z.serviceSettings)||void 0===d?void 0:d.autoInviteRate),T(u(null==Z||null===(c=Z.serviceSettings)||void 0===c?void 0:c.inviteRateTip))}}),[_,V]);var D=function(){var e=a()(o()().mark((function e(i){var s,u,a,l,d,p,f,m,w,b,y,x,S,q,F,C,j,U,M,T,I,P,W,D,N,O,E;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",i),t!==h._X4){e.next=11;break}return p=r()(r()({},Z),{},{serviceSettings:r()(r()({},Z.serviceSettings),{},{showRateBtn:i.showRateBtn,autoInviteRate:i.autoInviteRate,inviteRateTip:R,rateMsgCount:i.rateMsgCount,welcomeFaqUids:null==i?void 0:i.welcomeFaqUids,quickFaqUids:null===(s=_.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==Z||null===(u=Z.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(a=Z.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(l=Z.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(d=Z.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",p),e.next=6,(0,k.$l)(p);case 6:f=e.sent,console.log("updateRobot response:",f),200===f.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),A(f.data)):(c.yw.destroy(),c.yw.error(f.message)),e.next=29;break;case 11:if(t!==h.Njn){e.next=21;break}return C=r()(r()({},_),{},{serviceSettings:r()(r()({},null==_?void 0:_.serviceSettings),{},{showRateBtn:i.showRateBtn,autoInviteRate:i.autoInviteRate,inviteRateTip:R,rateMsgCount:i.rateMsgCount,welcomeFaqUids:null==_||null===(m=_.serviceSettings)||void 0===m||null===(m=m.welcomeFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==_||null===(w=_.serviceSettings)||void 0===w||null===(w=w.quickFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),faqUids:null==_||null===(b=_.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==_||null===(y=_.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==_||null===(x=_.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(S=_.serviceSettings)||void 0===S||null===(S=S.shortcutFaqs)||void 0===S?void 0:S.map((function(e){return e.uid}))}),robotSettings:r()(r()({},_.robotSettings),{},{robotUid:null==_||null===(q=_.robotSettings)||void 0===q||null===(q=q.robot)||void 0===q?void 0:q.uid}),messageLeaveSettings:r()(r()({},_.messageLeaveSettings),{},{worktimeUids:null==_||null===(F=_.messageLeaveSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:r()({},_.autoReplySettings)}),console.log("agentObject:",C),e.next=16,(0,v.sE)(C);case 16:j=e.sent,console.log("updateAgent response:",j),200===j.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),L(j.data)):(c.yw.destroy(),c.yw.error(j.message)),e.next=29;break;case 21:if(t!==h.aZD){e.next=29;break}return O=r()(r()({},V),{},{serviceSettings:r()(r()({},V.serviceSettings),{},{showRateBtn:i.showRateBtn,autoInviteRate:i.autoInviteRate,inviteRateTip:R,rateMsgCount:i.rateMsgCount,welcomeFaqUids:null==V||null===(U=V.serviceSettings)||void 0===U||null===(U=U.welcomeFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),quickFaqUids:null===(M=V.serviceSettings)||void 0===M||null===(M=M.quickFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),faqUids:null==V||null===(T=V.serviceSettings)||void 0===T||null===(T=T.faqs)||void 0===T?void 0:T.map((function(e){return e.uid})),guessFaqUids:null==V||null===(I=V.serviceSettings)||void 0===I||null===(I=I.guessFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),hotFaqUids:null===(P=V.serviceSettings)||void 0===P||null===(P=P.hotFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),shortcutFaqUids:null==V||null===(W=V.serviceSettings)||void 0===W||null===(W=W.shortcutFaqs)||void 0===W?void 0:W.map((function(e){return e.uid}))}),robotSettings:r()(r()({},V.robotSettings),{},{robotUid:null==V||null===(D=V.robotSettings)||void 0===D||null===(D=D.robot)||void 0===D?void 0:D.uid}),messageLeaveSettings:r()(r()({},V.messageLeaveSettings),{},{worktimeUids:null==V||null===(N=V.messageLeaveSettings)||void 0===N||null===(N=N.worktimes)||void 0===N?void 0:N.map((function(e){return e.uid}))}),agentUids:V.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",O),e.next=26,(0,g.W5)(O);case 26:E=e.sent,console.log("updateWorkGroup response:",E),200===E.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),B(E.data)):(c.yw.destroy(),c.yw.error(E.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(w.A,{form:s,onFinish:D,style:{marginLeft:"20px"},children:[(0,C.jsx)(b.Z,{width:"md",name:"showRateBtn",label:n.formatMessage({id:"rate.show.button"}),tooltip:n.formatMessage({id:"rate.show.button.tooltip"})}),(0,C.jsx)(b.Z,{width:"md",name:"autoInviteRate",label:n.formatMessage({id:"rate.auto.invite.rate"}),tooltip:n.formatMessage({id:"rate.auto.invite.rate.tooltip"})}),(0,C.jsx)(w.A.Item,{name:"inviteRateTip",label:n.formatMessage({id:"rate.auto.invite.rate.tip"}),tooltip:n.formatMessage({id:"rate.auto.invite.rate.tip.tooltip"}),rules:[{required:!0,message:n.formatMessage({id:"rate.auto.invite.rate.tip.required"})}],children:(0,C.jsx)(S.Z,{placeholder:n.formatMessage({id:"rate.auto.invite.rate.tip.placeholder"}),value:R,toolbarKeys:(0,m.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){T(e)}})}),!1]})})}},40836:function(e,t,n){var i=n(90819),o=n.n(i),s=n(89933),r=n.n(s),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(1902),h=n(66310),m=n(95490),w=n(55735),b=n(69169),y=n(48708),x=n(32350),S=n(30921),q=n(44194),k=n(3849),F=n(75365),C=n(11184),j=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),i=b.A.useForm(),s=d()(i,1)[0],u=(0,C.M)(),l=u.config,U=u.updateConfig,M=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),R=M.currentRobot,T=M.setCurrentRobot,I=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Z=I.currentAgent,A=I.setCurrentAgent,P=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=P.currentWorkgroup,L=P.setCurrentWorkgroup,W=(0,q.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:R.uid}:t===w.Njn?{chatType:w.scI,chatSid:Z.uid}:t===w.aZD?{chatType:w.vPY,chatSid:_.uid}:{chatType:w.xtN,chatSid:""}}),[t,R,Z,_]),V=W.chatType,B=W.chatSid;(0,q.useEffect)((function(){if(t===w._X4){var e,n,i=null==R||null===(e=R.serviceSettings)||void 0===e?void 0:e.showRightIframe;s.setFieldsValue({showRightIframe:i,rightIframeUrl:null==R||null===(n=R.serviceSettings)||void 0===n?void 0:n.rightIframeUrl}),U(i?a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.Njn){var o,r,u=null==Z||null===(o=Z.serviceSettings)||void 0===o?void 0:o.showRightIframe;s.setFieldsValue({showRightIframe:u,rightIframeUrl:null==Z||null===(r=Z.serviceSettings)||void 0===r?void 0:r.rightIframeUrl}),U(u?a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.aZD){var d,c,v=null==_||null===(d=_.serviceSettings)||void 0===d?void 0:d.showRightIframe;s.setFieldsValue({showRightIframe:v,rightIframeUrl:null==_||null===(c=_.serviceSettings)||void 0===c?void 0:c.rightIframeUrl}),U(v?a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:V,sid:B}),window:a()(a()({},l.window),{},{width:380})}))}}),[R,Z,_,V,B]);var D=function(){var e=r()(o()().mark((function e(i){var s,r,u,l,d,f,h,m,b,y,x,S,q,k,F,C,j,U,M,I,P,W,V,B,D,N,O,E,z;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleRightSubmit:",i),t!==w._X4){e.next=11;break}return h=a()(a()({},R),{},{serviceSettings:a()(a()({},R.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,welcomeFaqUids:null==R||null===(s=R.serviceSettings)||void 0===s||null===(s=s.welcomeFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==R||null===(r=R.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==R||null===(u=R.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==R||null===(l=R.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==R||null===(d=R.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(f=R.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return j=a()(a()({},Z),{},{serviceSettings:a()(a()({},null==Z?void 0:Z.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,welcomeFaqUids:null==Z||null===(b=Z.serviceSettings)||void 0===b||null===(b=b.welcomeFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),faqUids:null==Z||null===(y=Z.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),quickFaqUids:null==Z||null===(x=Z.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(S=Z.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(q=Z.serviceSettings)||void 0===q||null===(q=q.hotFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(k=Z.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:a()(a()({},Z.robotSettings),{},{robotUid:null==Z||null===(F=Z.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),messageLeaveSettings:a()(a()({},Z.messageLeaveSettings),{},{worktimeUids:null==Z||null===(C=Z.messageLeaveSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:a()({},Z.autoReplySettings)}),console.log("agentObject:",j),e.next=16,(0,v.sE)(j);case 16:U=e.sent,console.log("updateAgent response:",U),200===U.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),A(U.data)):(c.yw.destroy(),c.yw.error(U.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return E=a()(a()({},_),{},{serviceSettings:a()(a()({},_.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,welcomeFaqUids:null==_||null===(M=_.serviceSettings)||void 0===M||null===(M=M.welcomeFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),faqUids:null==_||null===(I=_.serviceSettings)||void 0===I||null===(I=I.faqs)||void 0===I?void 0:I.map((function(e){return e.uid})),quickFaqUids:null==_||null===(P=_.serviceSettings)||void 0===P||null===(P=P.quickFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),guessFaqUids:null==_||null===(W=_.serviceSettings)||void 0===W||null===(W=W.guessFaqs)||void 0===W?void 0:W.map((function(e){return e.uid})),hotFaqUids:null==_||null===(V=_.serviceSettings)||void 0===V||null===(V=V.hotFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(B=_.serviceSettings)||void 0===B||null===(B=B.shortcutFaqs)||void 0===B?void 0:B.map((function(e){return e.uid}))}),robotSettings:a()(a()({},_.robotSettings),{},{robotUid:null==_||null===(D=_.robotSettings)||void 0===D||null===(D=D.robot)||void 0===D?void 0:D.uid}),messageLeaveSettings:a()(a()({},_.messageLeaveSettings),{},{worktimeUids:null==_||null===(N=_.messageLeaveSettings)||void 0===N||null===(N=N.worktimes)||void 0===N?void 0:N.map((function(e){return e.uid}))}),agentUids:null==_||null===(O=_.agents)||void 0===O?void 0:O.map((function(e){return e.uid}))}),console.log("workgroupObject:",E),e.next=26,(0,p.W5)(E);case 26:z=e.sent,console.log("updateWorkGroup response:",z),200===z.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),L(z.data)):(c.yw.destroy(),c.yw.error(z.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{children:[(0,j.jsxs)(b.A,{form:s,onFinish:D,children:[(0,j.jsx)(y.Z,{width:"md",name:"showRightIframe",label:n.formatMessage({id:"showRightIframe"})}),(0,j.jsx)(x.Z,{width:"md",name:"rightIframeUrl",label:n.formatMessage({id:"rightIframeUrl"}),placeholder:n.formatMessage({id:"rightIframeUrl.placeholder",defaultMessage:"请输入有效的URL地址"}),rules:[{pattern:/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([\/\w.-]*)*\/?$/,message:n.formatMessage({id:"rightIframeUrl.invalid",defaultMessage:"请输入有效的URL地址"})}]})]}),(0,j.jsxs)(k.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,j.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,j.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},14238:function(e,t,n){var i=n(73193),o=n.n(i),s=n(90819),r=n.n(s),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(76750),h=n(1902),m=n(66310),w=n(95490),b=n(55735),y=n(69169),x=n(85954),S=n(84881),q=n(79907),k=n(30921),F=n(44194),C=n(51990),j=n(65461),U=n(40612),M=n(99885),R=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),s=d()(i,1)[0],u=(0,k.useIntl)(),l=(0,f.Z)().translateString,T=(0,F.useState)(!1),I=d()(T,2),Z=I[0],A=I[1],P=(0,U.u)((function(e){return e.currentOrg})),_=(0,F.useState)(),L=d()(_,2),W=L[0],V=L[1],B=(0,m.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),D=B.currentRobot,N=B.setCurrentRobot,O=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),E=O.currentAgent,z=O.setCurrentAgent,X=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=X.currentWorkgroup,$=X.setCurrentWorkgroup,H=(0,F.useState)(""),G=d()(H,2),Q=G[0],K=G[1],J=(0,F.useState)(""),ee=d()(J,2),te=ee[0],ne=ee[1],ie=(0,F.useState)(""),oe=d()(ie,2),se=oe[0],re=oe[1],ue=(0,F.useState)(""),ae=d()(ue,2),le=ae[0],de=ae[1],ce=(0,F.useState)(""),ve=d()(ce,2),ge=ve[0],pe=ve[1],fe=(0,F.useState)(!1),he=d()(fe,2),me=he[0],we=he[1],be=(0,F.useState)(""),ye=d()(be,2),xe=ye[0],Se=ye[1],qe=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==P?void 0:P.uid},e.next=4,(0,M.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?V(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,F.useEffect)((function(){qe()}),[]);var ke=function(e){var t;if(console.log("setFormValues:",e),K(l(null==e?void 0:e.welcomeTip)),re(l(null==e?void 0:e.topTip)),de(l(null==e?void 0:e.agentCloseTip)),pe(l(null==e?void 0:e.autoCloseTip)),A(null==e?void 0:e.showTopTip),we(null==e?void 0:e.showUnknownAnswer),Se(l(null==e?void 0:e.unknownAnswer)),s.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),s.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),s.setFieldValue("showLogo",null==e?void 0:e.showLogo),s.setFieldValue("showUnknownAnswer",null==e?void 0:e.showUnknownAnswer),s.setFieldValue("welcomeFaqUids",null==e||null===(t=e.welcomeFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))),n===b._X4);else if(n===b.Njn){var i;ne(l(null==E||null===(i=E.messageLeaveSettings)||void 0===i?void 0:i.messageLeaveTip))}else if(n===b.aZD){var o;ne(l(null==Y||null===(o=Y.messageLeaveSettings)||void 0===o?void 0:o.messageLeaveTip))}};(0,F.useEffect)((function(){n===b._X4?ke(null==D?void 0:D.serviceSettings):n===b.Njn?(ke(null==E?void 0:E.serviceSettings),s.setFieldValue("maxThreadCount",null==E?void 0:E.maxThreadCount)):n===b.aZD&&ke(null==Y?void 0:Y.serviceSettings)}),[D,E,Y]);var Fe=function(){var e=a()(r()().mark((function e(t){var i,s,a,l,d,f,h,m,w,y,x,S,q,k,F,C,j,U,M,R,T,I,A,P,_;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",t," showTopTip:",Z),c.yw.loading(u.formatMessage({id:"updating"})),n!==b._X4){e.next=12;break}return f=o()(o()({},D),{},{serviceSettings:o()(o()({},D.serviceSettings),{},{topTip:se,showTopTip:Z,welcomeTip:Q,autoCloseTip:ge,autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,showUnknownAnswer:me,unknownAnswer:xe,welcomeFaqUids:null==t?void 0:t.welcomeFaqUids,quickFaqUids:null===(i=E.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==D||null===(s=D.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==D||null===(a=D.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==D||null===(l=D.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==D||null===(d=D.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,g.$l)(f);case 7:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),N(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=30;break;case 12:if(n!==b.Njn){e.next=22;break}return F=o()(o()({},E),{},{serviceSettings:o()(o()({},E.serviceSettings),{},{topTip:se,showTopTip:Z,welcomeTip:Q,agentCloseTip:le,autoCloseTip:ge,autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,showUnknownAnswer:me,unknownAnswer:xe,welcomeFaqUids:null==t?void 0:t.welcomeFaqUids,quickFaqUids:null===(m=E.serviceSettings)||void 0===m||null===(m=m.quickFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),faqUids:null===(w=E.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==E||null===(y=E.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==E||null===(x=E.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==E||null===(S=E.serviceSettings)||void 0===S||null===(S=S.shortcutFaqs)||void 0===S?void 0:S.map((function(e){return e.uid}))}),messageLeaveSettings:o()(o()({},E.messageLeaveSettings),{},{messageLeaveTip:te,worktimeUids:null===(q=E.messageLeaveSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:o()(o()({},E.robotSettings),{},{robotUid:null===(k=E.robotSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid}),maxThreadCount:(null==t?void 0:t.maxThreadCount)||10}),console.log("agentObject:",F),e.next=17,(0,v.sE)(F);case 17:C=e.sent,console.log("updateAgent response:",C),200===C.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),z(C.data)):(c.yw.destroy(),c.yw.error(C.message)),e.next=30;break;case 22:if(n!==b.aZD){e.next=30;break}return P=o()(o()({},Y),{},{serviceSettings:o()(o()({},Y.serviceSettings),{},{topTip:se,showTopTip:Z,welcomeTip:Q,agentCloseTip:le,autoCloseTip:ge,autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,showUnknownAnswer:me,unknownAnswer:xe,welcomeFaqUids:null==t?void 0:t.welcomeFaqUids,quickFaqUids:null===(j=Y.serviceSettings)||void 0===j||null===(j=j.quickFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),faqUids:null===(U=Y.serviceSettings)||void 0===U||null===(U=U.faqs)||void 0===U?void 0:U.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(M=Y.serviceSettings)||void 0===M||null===(M=M.guessFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(R=Y.serviceSettings)||void 0===R||null===(R=R.hotFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(T=Y.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),messageLeaveSettings:o()(o()({},Y.messageLeaveSettings),{},{messageLeaveTip:te,worktimeUids:null===(I=Y.messageLeaveSettings)||void 0===I||null===(I=I.worktimes)||void 0===I?void 0:I.map((function(e){return e.uid}))}),robotSettings:o()(o()({},Y.robotSettings),{},{robotUid:null===(A=Y.robotSettings)||void 0===A||null===(A=A.robot)||void 0===A?void 0:A.uid}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",P),e.next=27,(0,p.W5)(P);case 27:_=e.sent,console.log("updateWorkGroup response:",_),200===_.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(_.data)):(c.yw.destroy(),c.yw.error(_.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)(y.A,{form:s,onFinish:Fe,style:{marginLeft:"20px"},children:[(0,R.jsx)(x.Z,{name:"showTopTip",width:"md",label:u.formatMessage({id:"agent.settings.show.top.tip"}),fieldProps:{onChange:function(e){var t,i;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==E||null===(t=E.serviceSettings)||void 0===t?void 0:t.showTopTip)),A(e.target.checked),e.target.checked)if(n===b._X4)re(l(null==D||null===(i=D.serviceSettings)||void 0===i?void 0:i.topTip));else if(n===b.Njn){var o;re(l(null==E||null===(o=E.serviceSettings)||void 0===o?void 0:o.topTip))}else if(n===b.aZD){var s;re(l(null==Y||null===(s=Y.serviceSettings)||void 0===s?void 0:s.topTip))}}}}),Z&&(0,R.jsx)(y.A.Item,{name:"topTip",label:u.formatMessage({id:"agent.settings.top.tip"}),rules:[{required:!0,message:u.formatMessage({id:"agent.settings.top.tip.required"})}],children:(0,R.jsx)(C.Z,{placeholder:u.formatMessage({id:"agent.settings.top.tip.placeholder"}),value:se,toolbarKeys:(0,j.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){re(e)}})}),(0,R.jsx)(y.A.Item,{name:"welcomeTip",label:u.formatMessage({id:"agent.settings.welcome.tip"}),tooltip:u.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:u.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,R.jsx)(C.Z,{placeholder:u.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:Q,toolbarKeys:(0,j.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){K(e)}})}),(0,R.jsx)(S.Z,{name:"welcomeFaqUids",width:"md",label:u.formatMessage({id:"menu.kbase.faq.welcome"}),options:null==W||null===(t=W.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:l(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}}),n!=b._X4&&(0,R.jsx)(y.A.Item,{name:"messageLeaveTip",label:u.formatMessage({id:"agent.settings.leave.msg"}),rules:[{required:!0,message:u.formatMessage({id:"agent.settings.leave.msg.required"})}],children:(0,R.jsx)(C.Z,{placeholder:u.formatMessage({id:"agent.settings.leave.msg.placeholder"}),value:te,toolbarKeys:(0,j.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){ne(e)}})}),(0,R.jsx)(q.Z,{width:"md",name:"autoCloseMin",label:u.formatMessage({id:"agent.settings.auto.close.time"}),tooltip:u.formatMessage({id:"agent.settings.auto.close.time.tooltip"}),min:1}),n!=b._X4&&(0,R.jsx)(y.A.Item,{name:"agentCloseTip",label:u.formatMessage({id:"agent.settings.agent.close.tip"}),tooltip:u.formatMessage({id:"agent.settings.agent.close.tip.tooltip"}),rules:[{required:!0,message:u.formatMessage({id:"agent.settings.agent.close.tip.required"})}],children:(0,R.jsx)(C.Z,{placeholder:u.formatMessage({id:"agent.settings.agent.close.tip.placeholder"}),value:le,toolbarKeys:(0,j.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){de(e)}})}),(0,R.jsx)(y.A.Item,{name:"autoCloseTip",label:u.formatMessage({id:"agent.settings.auto.close.tip"}),tooltip:u.formatMessage({id:"agent.settings.auto.close.tip.tooltip"}),rules:[{required:!0,message:u.formatMessage({id:"agent.settings.auto.close.tip.required"})}],children:(0,R.jsx)(C.Z,{placeholder:u.formatMessage({id:"agent.settings.auto.close.tip.placeholder"}),value:ge,toolbarKeys:(0,j.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){pe(e)}})}),n===b._X4&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x.Z,{name:"showUnknownAnswer",width:"md",label:u.formatMessage({id:"agent.settings.show.unknown.answer",defaultMessage:"启用未知问题固定回复"}),fieldProps:{onChange:function(e){var t;if(console.log("checked = ".concat(e.target.checked)),we(e.target.checked),e.target.checked)if(n===b._X4)Se(l(null==D||null===(t=D.serviceSettings)||void 0===t?void 0:t.unknownAnswer));else if(n===b.Njn){var i;Se(l(null==E||null===(i=E.serviceSettings)||void 0===i?void 0:i.unknownAnswer))}else if(n===b.aZD){var o;Se(l(null==Y||null===(o=Y.serviceSettings)||void 0===o?void 0:o.unknownAnswer))}}}}),me&&(0,R.jsx)(y.A.Item,{name:"unknownAnswer",label:u.formatMessage({id:"agent.settings.unknown.answer",defaultMessage:"未知问题固定回复"}),rules:[{required:!0,message:u.formatMessage({id:"agent.settings.unknown.answer.required",defaultMessage:"请输入未知问题固定回复"})}],children:(0,R.jsx)(C.Z,{placeholder:u.formatMessage({id:"agent.settings.unknown.answer.placeholder",defaultMessage:"请输入未知问题固定回复"}),value:xe,toolbarKeys:(0,j.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){Se(e)}})})]}),n===b.Njn&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("p",{children:u.formatMessage({id:"agent.settings.max.thread.tip1"})}),(0,R.jsx)("p",{children:u.formatMessage({id:"agent.settings.max.thread.tip2"})}),(0,R.jsx)("p",{children:u.formatMessage({id:"agent.settings.max.thread.tip3"})}),(0,R.jsx)(q.Z,{width:"md",name:"maxThreadCount",label:u.formatMessage({id:"agent.settings.max.thread"}),min:0})]}),(0,R.jsx)(x.Z,{name:"showLogo",width:"md",label:u.formatMessage({id:"agent.settings.show.logo"}),tooltip:u.formatMessage({id:"agent.settings.show.logo.tooltip"}),fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}},98473:function(e,t,n){var i=n(76711),o=n.n(i),s=n(90819),r=n.n(s),u=n(73193),a=n.n(u),l=n(89933),d=n.n(l),c=n(45332),v=n.n(c),g=n(86803),p=n(24170),f=n(66916),h=n(72614),m=n(1902),w=n(66310),b=n(95490),y=n(55735),x=n(69169),S=n(48708),q=n(32350),k=n(79907),F=n(30921),C=n(44194),j=n(32327),U=n(71738),M=n(44781),R=n(57178),T=n(78819),I=n(52288),Z=(n(29266),n(3849),n(75365),n(62673)),A=n(38775),P=n(53530),_=(n(59304),n(54881),n(31549)),L=(j.Z.Text,U.Z.Panel,M.Z.Option),W="no_response",V="keyword_match",B="visit_count",D="page_stay",N="time_range",O=[{label:"无响应触发",value:W}];t.Z=function(e){var t=e.type,n=(0,F.useIntl)(),i=x.A.useForm(),s=v()(i,1)[0],u=(0,C.useState)([]),l=v()(u,2),c=l[0],j=l[1],U=(0,C.useState)(!1),E=v()(U,2),z=E[0],X=E[1],Y=(0,C.useState)(null),$=v()(Y,2),H=($[0],$[1],R.Z.useForm()),G=v()(H,1)[0],Q=(0,C.useState)(null),K=v()(Q,2),J=K[0],ee=(K[1],(0,w.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}}))),te=ee.currentRobot,ne=ee.setCurrentRobot,ie=(0,m.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),oe=ie.currentAgent,se=ie.setCurrentAgent,re=(0,b.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),ue=re.currentWorkgroup,ae=re.setCurrentWorkgroup,le=(0,C.useMemo)((function(){return t===y._X4?{chatType:y.xtN,chatSid:te.uid}:t===y.Njn?{chatType:y.scI,chatSid:oe.uid}:t===y.aZD?{chatType:y.vPY,chatSid:ue.uid}:{chatType:y.xtN,chatSid:""}}),[t,te,oe,ue]),de=le.chatType,ce=le.chatSid;(0,C.useEffect)((function(){if(t===y._X4){var e,n,i,o,r,u,a,l,d,c,v,g=null!=te&&null!==(e=te.serviceSettings)&&void 0!==e&&e.triggerConditions&&(null===(n=JSON.parse(null==te||null===(i=te.serviceSettings)||void 0===i?void 0:i.triggerConditions))||void 0===n?void 0:n.conditions)||[];s.setFieldsValue({autoPopup:null==te||null===(o=te.serviceSettings)||void 0===o?void 0:o.autoPopup,showInvite:null==te||null===(r=te.inviteSettings)||void 0===r?void 0:r.show,inviteText:null==te||null===(u=te.inviteSettings)||void 0===u?void 0:u.text,enableProactiveTrigger:null==te||null===(a=te.serviceSettings)||void 0===a?void 0:a.enableProactiveTrigger,noResponseTimeout:(null==te||null===(l=te.serviceSettings)||void 0===l?void 0:l.noResponseTimeout)||300,proactiveMessage:null==te||null===(d=te.serviceSettings)||void 0===d?void 0:d.proactiveMessage,maxProactiveCount:(null==te||null===(c=te.serviceSettings)||void 0===c?void 0:c.maxProactiveCount)||3,proactiveInterval:(null==te||null===(v=te.serviceSettings)||void 0===v?void 0:v.proactiveInterval)||600}),j(g)}else if(t===y.Njn){var p,f,h,m,w,b,x,S,q,k,F,C=null!=oe&&null!==(p=oe.serviceSettings)&&void 0!==p&&p.triggerConditions&&(null===(f=JSON.parse(null==oe||null===(h=oe.serviceSettings)||void 0===h?void 0:h.triggerConditions))||void 0===f?void 0:f.conditions)||[];s.setFieldsValue({autoPopup:null==oe||null===(m=oe.serviceSettings)||void 0===m?void 0:m.autoPopup,showInvite:null==oe||null===(w=oe.inviteSettings)||void 0===w?void 0:w.show,inviteText:null==oe||null===(b=oe.inviteSettings)||void 0===b?void 0:b.text,enableProactiveTrigger:null==oe||null===(x=oe.serviceSettings)||void 0===x?void 0:x.enableProactiveTrigger,noResponseTimeout:(null==oe||null===(S=oe.serviceSettings)||void 0===S?void 0:S.noResponseTimeout)||300,proactiveMessage:null==oe||null===(q=oe.serviceSettings)||void 0===q?void 0:q.proactiveMessage,maxProactiveCount:(null==oe||null===(k=oe.serviceSettings)||void 0===k?void 0:k.maxProactiveCount)||3,proactiveInterval:(null==oe||null===(F=oe.serviceSettings)||void 0===F?void 0:F.proactiveInterval)||600}),j(C)}else if(t===y.aZD){var U,M,R,T,I,Z,A,P,_,L,W,V=null!=ue&&null!==(U=ue.serviceSettings)&&void 0!==U&&U.triggerConditions&&(null===(M=JSON.parse(null==ue||null===(R=ue.serviceSettings)||void 0===R?void 0:R.triggerConditions))||void 0===M?void 0:M.conditions)||[];s.setFieldsValue({autoPopup:null==ue||null===(T=ue.serviceSettings)||void 0===T?void 0:T.autoPopup,showInvite:null==ue||null===(I=ue.inviteSettings)||void 0===I?void 0:I.show,inviteText:null==ue||null===(Z=ue.inviteSettings)||void 0===Z?void 0:Z.text,enableProactiveTrigger:null==ue||null===(A=ue.serviceSettings)||void 0===A?void 0:A.enableProactiveTrigger,noResponseTimeout:(null==ue||null===(P=ue.serviceSettings)||void 0===P?void 0:P.noResponseTimeout)||300,proactiveMessage:null==ue||null===(_=ue.serviceSettings)||void 0===_?void 0:_.proactiveMessage,maxProactiveCount:(null==ue||null===(L=ue.serviceSettings)||void 0===L?void 0:L.maxProactiveCount)||3,proactiveInterval:(null==ue||null===(W=ue.serviceSettings)||void 0===W?void 0:W.proactiveInterval)||600}),j(V)}}),[te,oe,ue,de,ce]);var ve=function(){var e=d()(r()().mark((function e(i){var o,s,u,l,d,v,m,w,b,x,S,q,k,F,C,j,U,M,R,T,I,Z,A,P,_,L,W,V,B;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),o=JSON.stringify({conditions:c}),t!==y._X4){e.next=12;break}return w=a()(a()({},te),{},{serviceSettings:a()(a()({},te.serviceSettings),{},{autoPopup:i.autoPopup,enableProactiveTrigger:i.enableProactiveTrigger,noResponseTimeout:i.noResponseTimeout,proactiveMessage:i.proactiveMessage,maxProactiveCount:i.maxProactiveCount,proactiveInterval:i.proactiveInterval,triggerConditions:o,welcomeFaqUids:null==te||null===(s=te.serviceSettings)||void 0===s||null===(s=s.welcomeFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==te||null===(u=te.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),quickFaqUids:null==te||null===(l=te.serviceSettings)||void 0===l||null===(l=l.quickFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==te||null===(d=te.serviceSettings)||void 0===d||null===(d=d.guessFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),hotFaqUids:null==te||null===(v=te.serviceSettings)||void 0===v||null===(v=v.hotFaqs)||void 0===v?void 0:v.map((function(e){return e.uid})),shortcutFaqUids:null==te||null===(m=te.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},te.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",w),e.next=7,(0,f.$l)(w);case 7:b=e.sent,console.log("updateRobot response:",b),200===b.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),ne(b.data)):(g.yw.destroy(),g.yw.error(b.message)),e.next=30;break;case 12:if(t!==y.Njn){e.next=22;break}return M=a()(a()({},oe),{},{serviceSettings:a()(a()({},null==oe?void 0:oe.serviceSettings),{},{autoPopup:i.autoPopup,enableProactiveTrigger:i.enableProactiveTrigger,noResponseTimeout:i.noResponseTimeout,proactiveMessage:i.proactiveMessage,maxProactiveCount:i.maxProactiveCount,proactiveInterval:i.proactiveInterval,triggerConditions:o,welcomeFaqUids:null==oe||null===(x=oe.serviceSettings)||void 0===x||null===(x=x.welcomeFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null==oe||null===(S=oe.serviceSettings)||void 0===S||null===(S=S.faqs)||void 0===S?void 0:S.map((function(e){return e.uid})),quickFaqUids:null==oe||null===(q=oe.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==oe||null===(k=oe.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==oe||null===(F=oe.serviceSettings)||void 0===F||null===(F=F.hotFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),shortcutFaqUids:null==oe||null===(C=oe.serviceSettings)||void 0===C||null===(C=C.shortcutFaqs)||void 0===C?void 0:C.map((function(e){return e.uid}))}),robotSettings:a()(a()({},oe.robotSettings),{},{robotUid:null==oe||null===(j=oe.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),messageLeaveSettings:a()(a()({},oe.messageLeaveSettings),{},{worktimeUids:null==oe||null===(U=oe.messageLeaveSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),autoReplySettings:a()({},oe.autoReplySettings),inviteSettings:a()(a()({},oe.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",M),e.next=17,(0,p.sE)(M);case 17:R=e.sent,console.log("updateAgent response:",R),200===R.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),se(R.data)):(g.yw.destroy(),g.yw.error(R.message)),e.next=30;break;case 22:if(t!==y.aZD){e.next=30;break}return V=a()(a()({},ue),{},{serviceSettings:a()(a()({},ue.serviceSettings),{},{autoPopup:i.autoPopup,enableProactiveTrigger:i.enableProactiveTrigger,noResponseTimeout:i.noResponseTimeout,proactiveMessage:i.proactiveMessage,maxProactiveCount:i.maxProactiveCount,proactiveInterval:i.proactiveInterval,triggerConditions:o,welcomeFaqUids:null==ue||null===(T=ue.serviceSettings)||void 0===T||null===(T=T.welcomeFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),faqUids:null==ue||null===(I=ue.serviceSettings)||void 0===I||null===(I=I.faqs)||void 0===I?void 0:I.map((function(e){return e.uid})),quickFaqUids:null===(Z=ue.serviceSettings)||void 0===Z||null===(Z=Z.quickFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),guessFaqUids:null==ue||null===(A=ue.serviceSettings)||void 0===A||null===(A=A.guessFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),hotFaqUids:null==ue||null===(P=ue.serviceSettings)||void 0===P||null===(P=P.hotFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),shortcutFaqUids:null==ue||null===(_=ue.serviceSettings)||void 0===_||null===(_=_.shortcutFaqs)||void 0===_?void 0:_.map((function(e){return e.uid}))}),robotSettings:a()(a()({},ue.robotSettings),{},{robotUid:null==ue||null===(L=ue.robotSettings)||void 0===L||null===(L=L.robot)||void 0===L?void 0:L.uid}),messageLeaveSettings:a()(a()({},ue.messageLeaveSettings),{},{worktimeUids:null==ue||null===(W=ue.messageLeaveSettings)||void 0===W||null===(W=W.worktimes)||void 0===W?void 0:W.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},ue.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:ue.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",V),e.next=27,(0,h.W5)(V);case 27:B=e.sent,console.log("updateWorkGroup response:",B),200===B.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),ae(B.data)):(g.yw.destroy(),g.yw.error(B.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,_.jsxs)("div",{children:[(0,_.jsxs)(x.A,{form:s,onFinish:ve,children:[(0,_.jsxs)(Z.Z,{title:"主动触发设置",children:[(0,_.jsx)(S.Z,{width:"md",name:"enableProactiveTrigger",label:"启用主动触发"}),(0,_.jsx)(x.A.Group,{children:(0,_.jsx)(q.Z,{width:"md",name:"proactiveMessage",label:"主动发送的消息内容",placeholder:"例如：您好，看起来您有一段时间没有互动了。请问还需要帮助吗？"})}),(0,_.jsx)(x.A.Group,{children:(0,_.jsx)(k.Z,{width:"xs",name:"noResponseTimeout",label:"无响应超时时间(秒)",min:1,fieldProps:{addonAfter:"秒"}})})]}),(0,_.jsx)(A.Z,{})]}),(0,_.jsx)(P.Z,{title:null!==J?"编辑触发条件":"添加触发条件",open:z,onOk:function(){G.validateFields().then((function(e){var t=e.keywords;t&&"string"==typeof t&&(t=t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})));var n={type:e.type,message:e.message,timeout:e.type===W||e.type===D?e.timeout:void 0,keywords:e.type===V?t:void 0,threshold:e.type===B?e.threshold:void 0,start:e.type===N?e.start:void 0,end:e.type===N?e.end:void 0};if(null!==J){var i=o()(c);i[J]=n,j(i)}else j([].concat(o()(c),[n]));X(!1),G.resetFields()}))},onCancel:function(){return X(!1)},width:600,children:(0,_.jsxs)(R.Z,{form:G,layout:"vertical",initialValues:{type:W,timeout:300,message:"您好，需要帮助吗？"},children:[(0,_.jsx)(R.Z.Item,{name:"type",label:"触发类型",rules:[{required:!0,message:"请选择触发类型"}],children:(0,_.jsx)(M.Z,{children:O.map((function(e){return(0,_.jsx)(L,{value:e.value,children:e.label},e.value)}))})}),function(){switch(G.getFieldValue("type")){case W:return(0,_.jsx)(R.Z.Item,{name:"timeout",label:"无响应超时时间(秒)",rules:[{required:!0,message:"请输入超时时间"}],children:(0,_.jsx)(T.Z,{min:1})});case V:return(0,_.jsx)(R.Z.Item,{name:"keywords",label:"关键词列表(逗号分隔)",rules:[{required:!0,message:"请输入关键词"}],children:(0,_.jsx)(I.Z,{placeholder:"例如: 价格, 费用, 多少钱"})});case B:return(0,_.jsx)(R.Z.Item,{name:"threshold",label:"访问次数阈值",rules:[{required:!0,message:"请输入访问次数"}],children:(0,_.jsx)(T.Z,{min:1})});case D:return(0,_.jsx)(R.Z.Item,{name:"timeout",label:"页面停留时间(秒)",rules:[{required:!0,message:"请输入停留时间"}],children:(0,_.jsx)(T.Z,{min:1})});case N:return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(R.Z.Item,{name:"start",label:"开始时间",rules:[{required:!0,message:"请输入开始时间"}],children:(0,_.jsx)(I.Z,{placeholder:"格式: HH:mm, 例如: 09:00"})}),(0,_.jsx)(R.Z.Item,{name:"end",label:"结束时间",rules:[{required:!0,message:"请输入结束时间"}],children:(0,_.jsx)(I.Z,{placeholder:"格式: HH:mm, 例如: 18:00"})})]});default:return null}}(),(0,_.jsx)(R.Z.Item,{name:"message",label:"触发消息",rules:[{required:!0,message:"请输入触发后发送的消息"}],children:(0,_.jsx)(I.Z.TextArea,{rows:3,placeholder:"触发条件满足后发送给用户的消息"})})]})})]})}},51990:function(e,t,n){var i=n(73193),o=n.n(i),s=n(84176),r=n.n(s),u=n(86803),a=n(23864),l=n(44521),d=n(55735),c=n(30921),v=n(83905),g=(n(26286),n(28977)),p=n.n(g),f=n(44194),h=n(31549),m=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];t.Z=function(e){var t=e.placeholder,n=e.defaultValue,i=e.value,s=e.style,g=e.toolbarKeys,w=e.onChange,b=(e.options,r()(e,m)),y=((0,c.useIntl)(),(0,a.Z)().isDarkMode),x=(0,f.useRef)(null),S=(0,f.useRef)(null);return(0,f.useEffect)((function(){if(x.current){if(!S.current){var e=new v.cW({element:x.current,theme:y?"dark":"light",placeholder:t,content:n,toolbarKeys:g,image:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(d.LA8)},uploader:function(e,t,n,i){console.log("uploader:",e,t,n,i);var s=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,r=new FormData;return r.append("file",e),r.append("file_name",s),r.append("file_type",e.type),r.append("is_avatar","false"),r.append("kb_type",d.bE7),r.append("category_uid",""),r.append("kb_uid",""),r.append("client",d.bVn),new Promise((function(e,i){fetch(t,{method:"POST",headers:o()({Accept:"application/json"},n),body:r}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){u.yw.destroy(),u.yw.success("".concat(s," 上传成功"));var n={errorCode:0,data:{src:t.data.fileUrl,alt:s}};e(n)}else u.yw.destroy(),u.yw.error("".concat(s," 上传失败"))})).catch((function(e){i(e)}))}))}},video:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(d.LA8)},uploader:function(e,t,n,i){console.log("uploader:",e,t,n,i);var s=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,r=new FormData;return r.append("file",e),r.append("file_name",s),r.append("file_type",e.type),r.append("is_avatar","false"),r.append("kb_type",d.bE7),r.append("category_uid",""),r.append("kb_uid",""),r.append("client",d.bVn),new Promise((function(e,i){fetch(t,{method:"POST",headers:o()({Accept:"application/json"},n),body:r}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){u.yw.destroy(),u.yw.success("".concat(s," 上传成功"));var n={errorCode:0,data:{src:t.data.fileUrl,poster:"https://www.weiyuai.cn/avatars/video_poster.png"}};e(n)}else u.yw.destroy(),u.yw.error("".concat(s," 上传失败"))})).catch((function(e){i(e)}))}))}},attachment:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(d.LA8)},uploader:function(e,t,n,i){console.log("uploader:",e,t,n,i);var s=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,r=new FormData;return r.append("file",e),r.append("file_name",s),r.append("file_type",e.type),r.append("is_avatar","false"),r.append("kb_type",d.bE7),r.append("category_uid",""),r.append("kb_uid",""),r.append("client",d.bVn),new Promise((function(e,i){fetch(t,{method:"POST",headers:o()({Accept:"application/json"},n),body:r}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){u.yw.destroy(),u.yw.success("".concat(s," 上传成功"));var n={errorCode:0,data:{href:t.data.fileUrl,fileName:s}};e(n)}else u.yw.destroy(),u.yw.error("".concat(s," 上传失败"))})).catch((function(e){i(e)}))}))}},onChange:function(e){"function"==typeof w&&w(e.getHtml(),e.getMarkdown())}});S.current=e}return function(){S.current&&(S.current.destroy(),S.current=null)}}}),[]),(0,f.useEffect)((function(){S.current&&i!==S.current.getHtml()&&S.current.setContent(i||"")}),[i]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",o()(o()({ref:x},b),{},{style:o()({height:"100%"},s)}))})}},80690:function(e,t,n){n.d(t,{Z:function(){return X}});var i=n(44194),o=n(8247),s=n(30921),r=n(31549),u=function(){var e=(0,s.useIntl)();return(0,r.jsxs)("div",{style:{maxWidth:"800px"},children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{href:"https://github.com/Bytedesk/bytedesk-web",target:"_blank",rel:"noopener noreferrer",children:e.formatMessage({id:"install.guide.github"})})}),(0,r.jsx)("h2",{children:e.formatMessage({id:"install.guide.steps"})}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:e.formatMessage({id:"install.guide.step1.title"})}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"npm install bytedesk-web\n# ".concat(e.formatMessage({id:"install.guide.step1.or"}),"\nyarn add bytedesk-web")})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:e.formatMessage({id:"install.guide.step2.title"})}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"import { BytedeskReact } from 'bytedesk-web/react';\nimport type { BytedeskConfig } from 'bytedesk-web/react';"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:e.formatMessage({id:"install.guide.step3.title"})}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const config: BytedeskConfig = {\n  placement: 'bottom-right',\n  marginBottom: 20,\n  marginSide: 20,\n  chatConfig: {\n    org: 'df_org_uid',  // ".concat(e.formatMessage({id:"install.guide.step3.org.comment"}),"\n    t: \"2\",\n    sid: 'df_rt_uid'    // ").concat(e.formatMessage({id:"install.guide.step3.sid.comment"}),"\n  }\n};")})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:e.formatMessage({id:"install.guide.step4.title"})}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const App = () => {\n  const handleInit = () => {\n    console.log('BytedeskReact initialized');\n  };\n\n  return (\n    <div>\n      <BytedeskReact {...config} onInit={handleInit} />\n      <button onClick={() => (window as any).bytedesk?.showChat()}>\n        ".concat(e.formatMessage({id:"install.guide.step4.open.chat"}),"\n      </button>\n    </div>\n  );\n};")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:e.formatMessage({id:"install.guide.step5.title"})}),(0,r.jsxs)("ul",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px",lineHeight:"1.6"},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.showChat()"})," - ",e.formatMessage({id:"install.guide.step5.show"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.hideChat()"})," - ",e.formatMessage({id:"install.guide.step5.hide"})]})]})]})]})},a=function(e){e.type;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u,{})})},l=function(e){e.type,(0,s.useIntl)();return(0,r.jsx)(r.Fragment,{})},d=function(){return(0,r.jsxs)("div",{style:{maxWidth:"800px"},children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{href:"https://github.com/Bytedesk/bytedesk-web",target:"_blank",rel:"noopener noreferrer",children:"More Demo on -》Github"})}),(0,r.jsx)("h2",{children:"安装步骤"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"1. 安装依赖"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"npm install bytedesk-web\n# 或\nyarn add bytedesk-web"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"2. 导入组件"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"import { BytedeskReact } from 'bytedesk-web/svelte';\nimport type { BytedeskConfig } from 'bytedesk-web/svelte';"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"3. 配置参数"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const config: BytedeskConfig = {\n  placement: 'bottom-right',\n  marginBottom: 20,\n  marginSide: 20,\n  chatConfig: {\n    org: 'df_org_uid',  // 替换为您的组织ID\n    t: \"2\",\n    sid: 'df_rt_uid'      // 替换为您的SID\n  }\n};"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"4. 使用组件"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const App = () => {\n  const handleInit = () => {\n    console.log('BytedeskReact initialized');\n  };\n\n  return (\n    <div>\n      <BytedeskReact {...config} onInit={handleInit} />\n      <button onClick={() => (window as any).bytedesk?.showChat()}>\n        打开聊天\n      </button>\n    </div>\n  );\n};"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"5. 可用方法"}),(0,r.jsxs)("ul",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px",lineHeight:"1.6"},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.showChat()"})," - 显示聊天窗口"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.hideChat()"})," - 隐藏聊天窗口"]})]})]})]})},c=function(e){e.type;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d,{})})},v=function(){return(0,r.jsxs)("div",{style:{maxWidth:"800px"},children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{href:"https://github.com/Bytedesk/bytedesk-web",target:"_blank",rel:"noopener noreferrer",children:"More Demo on -》Github"})}),(0,r.jsx)("h2",{children:"安装步骤"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"1. 安装依赖"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"npm install bytedesk-web\n# 或\nyarn add bytedesk-web"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"2. 导入组件"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"import { BytedeskReact } from 'bytedesk-web';\nimport type { BytedeskConfig } from 'bytedesk-web';"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"3. 配置参数"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const config: BytedeskConfig = {\n  placement: 'bottom-right',\n  marginBottom: 20,\n  marginSide: 20,\n  chatConfig: {\n    org: 'df_org_uid',  // 替换为您的组织ID\n    t: \"2\",\n    sid: 'df_rt_uid'      // 替换为您的SID\n  }\n};"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"4. 使用组件"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const App = () => {\n  const handleInit = () => {\n    console.log('BytedeskReact initialized');\n  };\n\n  return (\n    <div>\n      <BytedeskReact {...config} onInit={handleInit} />\n      <button onClick={() => (window as any).bytedesk?.showChat()}>\n        打开聊天\n      </button>\n    </div>\n  );\n};"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"5. 可用方法"}),(0,r.jsxs)("ul",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px",lineHeight:"1.6"},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.showChat()"})," - 显示聊天窗口"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.hideChat()"})," - 隐藏聊天窗口"]})]})]})]})},g=function(e){e.type;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v,{})})},p=function(){return(0,r.jsxs)("div",{style:{maxWidth:"800px"},children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{href:"https://github.com/Bytedesk/bytedesk-web",target:"_blank",rel:"noopener noreferrer",children:"More Demo on -》Github"})}),(0,r.jsx)("h2",{children:"安装步骤"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"1. 安装依赖"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"npm install bytedesk-web\n# 或\nyarn add bytedesk-web"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"2. 导入组件"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"import { BytedeskReact } from 'bytedesk-web/vue';\nimport type { BytedeskConfig } from 'bytedesk-web/vue';"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"3. 配置参数"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const config: BytedeskConfig = {\n  placement: 'bottom-right',\n  marginBottom: 20,\n  marginSide: 20,\n  chatConfig: {\n    org: 'df_org_uid',  // 替换为您的组织ID\n    t: \"2\",\n    sid: 'df_rt_uid'      // 替换为您的SID\n  }\n};"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("h3",{children:"4. 使用组件"}),(0,r.jsx)("pre",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px"},children:"const App = () => {\n  const handleInit = () => {\n    console.log('BytedeskReact initialized');\n  };\n\n  return (\n    <div>\n      <BytedeskReact {...config} onInit={handleInit} />\n      <button onClick={() => (window as any).bytedesk?.showChat()}>\n        打开聊天\n      </button>\n    </div>\n  );\n};"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"5. 可用方法"}),(0,r.jsxs)("ul",{style:{background:"#dddddd",padding:"15px",borderRadius:"4px",lineHeight:"1.6"},children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.showChat()"})," - 显示聊天窗口"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"(window as any).bytedesk?.hideChat()"})," - 隐藏聊天窗口"]})]})]})]})},f=function(e){e.type;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p,{})})},h=n(73193),m=n.n(h),w=n(45332),b=n.n(w),y=n(7358),x=n(71529),S=n(1430),q=n(3849),k=n(75365),F=n(11184),C=n(69169),j=n(48708),U=n(84881),M=n(85954),R=n(32350),T=n(62673),I=n(66310),Z=n(40612),A=n(1902),P=n(95490),_=n(44521),L=n(55735),W=n(86803),V=n(76711),B=n.n(V),D=n(44435),N=n(83642),O=n(83890),E=(0,D.Ue)()((0,N.mW)((0,N.tJ)((0,O.n)((function(e,t){return{unifiedResult:{data:{content:[]}},currentUnified:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},insertUnified:function(t){e((function(e){e.unifiedResult.data.content.unshift(t)}))},updateUnified:function(t){e((function(e){var n=e.unifiedResult.data.content,i=n.findIndex((function(e){return e.uid===t.uid}));-1!==i?n[i]=t:console.warn("Unified with uid ".concat(t.uid," not found."))}))},deleteUnified:function(t){e((function(e){var n=e.unifiedResult.data.content,i=n.findIndex((function(e){return e.uid===t.uid}));-1!==i?n.splice(i,1):console.warn("Unified with uid ".concat(t.uid," not found."))}))},setUnifiedResult:function(n){var i;(e({unifiedResult:n}),""===t().currentUnified.uid)&&((null===(i=n.data)||void 0===i||null===(i=i.content)||void 0===i?void 0:i.length)>0&&e({currentUnified:n.data.content[0]}))},setCurrentUnified:function(n){var i=t().unifiedResult.data.content,o=i.findIndex((function(e){return e.uid===n.uid}));if(-1!==o){var s=[].concat(B()(i.slice(0,o)),[n],B()(i.slice(o+1))),r=m()(m()({},t().unifiedResult),{},{data:{content:s}});e({unifiedResult:r,currentUnified:n})}else console.warn("Unified with the specified uid not found."),e({currentUnified:n})},deleteCurrentUnified:function(n){var i=t().unifiedResult.data.content,o=i.findIndex((function(e){return e.uid===n}));-1!==o?e({unifiedResult:m()(m()({},t().unifiedResult),{},{data:{content:[].concat(B()(i.slice(0,o)),B()(i.slice(o+1)))}})}):console.warn("Unified not found in cache:",n),t().currentUnified.uid===n&&e({currentUnified:{uid:"",orgUid:""}})},deleteUnifiedCache:function(){return e({},!0)}}})),{name:L.jlI}))),z=function(e){var t,n,o,u,a,l,d,c,v=e.type,g=C.A.useForm(),p=b()(g,1)[0],f=(0,F.M)(),h=f.config,w=f.updateConfig,V=(0,Z.u)((function(e){return e.currentOrg})),B=(0,I.V)((function(e){return e.currentRobot})),D=(0,A.E)((function(e){return e.currentAgent})),N=(0,P.$)((function(e){return e.currentWorkgroup})),O=E((function(e){return e.currentUnified})),z=(0,i.useState)(!1),X=b()(z,2),Y=X[0],$=X[1],H=(0,i.useState)(!1),G=b()(H,2),Q=G[0],K=G[1],J=(0,i.useState)("zh-cn"),ee=b()(J,2),te=ee[0],ne=ee[1],ie=(0,i.useState)("system"),oe=b()(ie,2),se=oe[0],re=oe[1],ue=(0,s.useIntl)(),ae=(0,i.useMemo)((function(){return v===L._X4?{chatType:L.xtN,chatSid:B.uid}:v===L.Njn?{chatType:L.scI,chatSid:D.uid}:v===L.aZD?{chatType:L.vPY,chatSid:N.uid}:v===L.RB4?{chatType:L.vIe,chatSid:O.uid}:{chatType:L.xtN,chatSid:""}}),[v,B,D,N]),le=ae.chatType,de=ae.chatSid;(0,i.useEffect)((function(){var e,t;null!=V&&V.uid&&le&&de&&w({chatConfig:{org:null==V?void 0:V.uid,t:le,sid:de},theme:{backgroundColor:null===(e=h.theme)||void 0===e?void 0:e.backgroundColor,textColor:null===(t=h.theme)||void 0===t?void 0:t.textColor}})}),[null==V?void 0:V.uid,le,de,null===(t=h.theme)||void 0===t?void 0:t.backgroundColor,null===(n=h.theme)||void 0===n?void 0:n.textColor]);var ce=function(e){var t,n,i=e+"?".concat(L.I3Y,"=").concat(null==V?void 0:V.uid)+"&".concat(L.ZfG,"=").concat(le)+"&".concat(L.RI9,"=").concat(de);(Y&&(i+="&".concat(L.ErC,"=").concat(te)),Q)&&(i+="&".concat(L.N1q,"=").concat(se)+"&".concat(L.spX,"=").concat(null===(t=h.theme)||void 0===t?void 0:t.backgroundColor)+"&".concat(L.cW9,"=").concat(null===(n=h.theme)||void 0===n?void 0:n.textColor));return i+"&"},ve=(0,i.useMemo)((function(){return ce((0,_.Cn)())}),[null==V?void 0:V.uid,B,D,N,Y,te,Q,se,null===(o=h.theme)||void 0===o?void 0:o.backgroundColor,null===(u=h.theme)||void 0===u?void 0:u.textColor]),ge=(0,i.useMemo)((function(){return ce((0,_.Z$)())}),[null==V?void 0:V.uid,B,D,N,Y,te,Q,se,null===(a=h.theme)||void 0===a?void 0:a.backgroundColor,null===(l=h.theme)||void 0===l?void 0:l.textColor]),pe=function(e){var t,n,i,o,s,r,u,a,l,d;return'\x3c!-- bytedesk.com --\x3e\n<script src="https://www.weiyuai.cn/embed/bytedesk-web.js"><\/script>\n<script>\n  const config = {\n    baseUrl: \''.concat(e.baseUrl||"https://www.weiyuai.cn/chat","',\n    placement: '").concat(e.placement||"bottom-right","',\n    autoPopup: ").concat(e.autoPopup||!1,",\n    locale: '").concat(te,"',\n    inviteConfig: {\n      show: ").concat((null===(t=e.inviteConfig)||void 0===t?void 0:t.show)||!1,",\n      text: '").concat((null===(n=e.inviteConfig)||void 0===n?void 0:n.text)||"需要帮助么","',\n    },\n    bubbleConfig: {\n      show: ").concat(null===(i=null===(o=e.bubbleConfig)||void 0===o?void 0:o.show)||void 0===i||i,",\n      icon: '").concat((null===(s=e.bubbleConfig)||void 0===s?void 0:s.icon)||"👋","',\n      title: '").concat((null===(r=e.bubbleConfig)||void 0===r?void 0:r.title)||"需要帮助么","',\n      subtitle: '").concat((null===(u=e.bubbleConfig)||void 0===u?void 0:u.subtitle)||"点击我，与我对话","'\n    },\n    theme: {\n      mode: '").concat(se,"',\n      backgroundColor: '").concat((null===(a=e.theme)||void 0===a?void 0:a.backgroundColor)||"#0066FF","',\n      textColor: '").concat((null===(l=e.theme)||void 0===l?void 0:l.textColor)||"#ffffff","'\n    },\n    window: {\n      width: '").concat((null===(d=e.window)||void 0===d?void 0:d.width)||380,"'\n    },\n    chatConfig: {\n      org: '").concat(null==V?void 0:V.uid,"',\n      t: '").concat(le,"',\n      sid: '").concat(de,"'\n    }\n  };\n  const bytedesk = new BytedeskWeb(config);\n  bytedesk.init();\n<\/script>")};(0,i.useEffect)((function(){var e,t;h&&(p.setFieldValue("codeFullUrl",ve),p.setFieldValue("codeFrameUrl",ge),p.setFieldValue("buttonColor",null===(e=h.theme)||void 0===e?void 0:e.backgroundColor),p.setFieldValue("showBubble",null===(t=h.bubbleConfig)||void 0===t?void 0:t.show),p.setFieldsValue({rightPlacement:"bottom-right"===h.placement,configText:pe(h)}))}),[h]);return(0,r.jsx)(T.Z,{title:ue.formatMessage({id:"channel.web.config.title"}),children:(0,r.jsxs)(C.A,{form:p,submitter:!1,onValuesChange:function(e,t){var n=t.rightPlacement?{placement:"bottom-right"}:{placement:"bottom-left"};w(n),p.setFieldsValue({configText:pe(m()(m()({},h),n))})},children:[(0,r.jsx)(j.Z,{name:"rightPlacement",label:ue.formatMessage({id:"channel.web.position"}),tooltip:ue.formatMessage({id:"channel.web.position.tooltip"}),fieldProps:{checked:"bottom-right"===h.placement}}),(0,r.jsx)(U.Z,{name:"buttonColor",width:"md",label:ue.formatMessage({id:"channel.web.button.color"}),options:[{label:ue.formatMessage({id:"channel.web.button.color.blue"}),value:"#0066FF"},{label:ue.formatMessage({id:"channel.web.button.color.green"}),value:"#52c41a"},{label:ue.formatMessage({id:"channel.web.button.color.red"}),value:"#ff4d4f"},{label:ue.formatMessage({id:"channel.web.button.color.yellow"}),value:"#faad14"},{label:ue.formatMessage({id:"channel.web.button.color.purple"}),value:"#722ed1"}],fieldProps:{value:null===(d=h.theme)||void 0===d?void 0:d.backgroundColor,onChange:function(e){w({theme:m()(m()({},h.theme),{},{textColor:"#ffffff",backgroundColor:e})}),p.setFieldsValue({configText:pe(m()(m()({},h),{},{theme:m()(m()({},h.theme),{},{textColor:"#ffffff",backgroundColor:e})}))})}},addonAfter:(0,r.jsx)(S.Z,{value:null===(c=h.theme)||void 0===c?void 0:c.backgroundColor,onChange:function(e){var t=e.toHexString();w({theme:m()(m()({},h.theme),{},{backgroundColor:t})}),p.setFieldsValue({buttonColor:t,configText:pe(m()(m()({},h),{},{theme:m()(m()({},h.theme),{},{backgroundColor:t})}))})}})}),(0,r.jsx)(M.Z,{name:"showBubble",width:"xl",tooltip:ue.formatMessage({id:"channel.web.show.bubble.tooltip"}),label:ue.formatMessage({id:"channel.web.show.bubble"}),fieldProps:{onChange:function(e){var t=e.target.checked;w({bubbleConfig:m()(m()({},h.bubbleConfig),{},{show:t})}),p.setFieldsValue({configText:pe(m()(m()({},h),{},{bubbleConfig:m()(m()({},h.bubbleConfig),{},{show:t})}))})}}}),(0,r.jsx)(M.Z,{name:"showLang",width:"xl",tooltip:ue.formatMessage({id:"channel.web.enable.multilang.tooltip"}),label:ue.formatMessage({id:"channel.web.enable.multilang"}),fieldProps:{checked:Y,onChange:function(e){var t=e.target.checked;$(t),t||ne("zh-cn")}}}),Y&&(0,r.jsx)(U.Z,{name:"language",width:"md",label:ue.formatMessage({id:"channel.web.select.language"}),options:[{label:ue.formatMessage({id:"channel.web.lang.zh_cn"}),value:"zh-cn"},{label:ue.formatMessage({id:"channel.web.lang.zh_tw"}),value:"zh-tw"},{label:ue.formatMessage({id:"channel.web.lang.en"}),value:"en"}],fieldProps:{onChange:function(e){return ne(e)}}}),(0,r.jsx)(M.Z,{name:"showTheme",width:"xl",tooltip:ue.formatMessage({id:"channel.web.enable.theme.tooltip"}),label:ue.formatMessage({id:"channel.web.enable.theme"}),fieldProps:{checked:Q,onChange:function(e){var t=e.target.checked;K(t),t||re("system")}}}),Q&&(0,r.jsx)(U.Z,{name:"theme",width:"md",label:ue.formatMessage({id:"channel.web.theme.select"}),options:[{label:ue.formatMessage({id:"channel.web.theme.follow.system"}),value:"system"},{label:ue.formatMessage({id:"channel.web.theme.light"}),value:"light"},{label:ue.formatMessage({id:"channel.web.theme.dark"}),value:"dark"}],fieldProps:{value:se,onChange:re}}),(0,r.jsx)(R.Z,{name:"configText",width:"xl",label:ue.formatMessage({id:"channel.web.code.embed"}),tooltip:ue.formatMessage({id:"channel.web.code.embed.desc"}),fieldProps:{autoSize:{minRows:15,maxRows:25},readOnly:!0}}),(0,r.jsxs)(q.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,r.jsx)(k.ZP,{type:"primary",icon:(0,r.jsx)(y.Z,{}),onClick:function(){var e=p.getFieldValue("configText");navigator.clipboard.writeText(e).then((function(){W.yw.success(ue.formatMessage({id:"channel.web.copy.success"}))})).catch((function(){W.yw.error(ue.formatMessage({id:"channel.web.copy.error"}))}))},children:ue.formatMessage({id:"channel.web.copy.code"})}),(0,r.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:ue.formatMessage({id:"channel.web.show.chat"})}),(0,r.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:ue.formatMessage({id:"channel.web.hide.chat"})})]}),(0,r.jsx)(R.Z,{name:"codeFullUrl",width:"xl",label:ue.formatMessage({id:"channel.web.code.fullscreen"}),tooltip:ue.formatMessage({id:"channel.web.code.fullscreen.desc"}),fieldProps:{autoSize:{minRows:2,maxRows:5},readOnly:!0}}),(0,r.jsxs)(q.Z,{direction:"horizontal",style:{width:"100%",marginBottom:10},children:[(0,r.jsx)(k.ZP,{type:"primary",icon:(0,r.jsx)(y.Z,{}),onClick:function(){navigator.clipboard.writeText(ve).then((function(){W.yw.success(ue.formatMessage({id:"channel.web.fullscreen.copy.success"}))})).catch((function(){W.yw.error(ue.formatMessage({id:"channel.web.copy.error"}))}))},children:ue.formatMessage({id:"channel.web.copy.fullscreen"})}),(0,r.jsx)(k.ZP,{type:"primary",icon:(0,r.jsx)(x.Z,{}),onClick:function(){window.open(ve)},children:ue.formatMessage({id:"channel.web.open.fullscreen"})})]}),(0,r.jsx)(R.Z,{name:"codeFrameUrl",width:"xl",label:ue.formatMessage({id:"channel.web.code.frame"}),tooltip:ue.formatMessage({id:"channel.web.code.frame.desc"}),fieldProps:{autoSize:{minRows:2,maxRows:5},readOnly:!0}}),(0,r.jsxs)(q.Z,{direction:"horizontal",style:{width:"100%"},children:[(0,r.jsx)(k.ZP,{type:"primary",icon:(0,r.jsx)(y.Z,{}),onClick:function(){var e=p.getFieldValue("codeFrameUrl");navigator.clipboard.writeText(e).then((function(){W.yw.success(ue.formatMessage({id:"channel.web.frame.copy.success"}))})).catch((function(){W.yw.error(ue.formatMessage({id:"channel.web.copy.error"}))}))},children:ue.formatMessage({id:"channel.web.copy.frame"})}),(0,r.jsx)(k.ZP,{type:"primary",icon:(0,r.jsx)(x.Z,{}),onClick:function(){window.open(ge)},children:ue.formatMessage({id:"channel.web.open.frame"})})]})]})})},X=function(e){var t=e.type,n=[{key:"web",label:"Web",children:(0,r.jsx)(z,{type:t})},{key:"react",label:"React",children:(0,r.jsx)(a,{type:t})},{key:"vue",label:"Vue",children:(0,r.jsx)(f,{type:t})},{key:"svelte",label:"Svelte",children:(0,r.jsx)(c,{type:t})},{key:"vanilla",label:"Vanilla",children:(0,r.jsx)(g,{type:t})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{type:t}),(0,r.jsx)(o.Z,{tabPosition:"left",items:n})]})}},6631:function(e,t,n){n.d(t,{G:function(){return v}});var i=n(73193),o=n.n(i),s=(n(44194),n(30348)),r=n(55735),u=n(28977),a=n.n(u),l=n(86803),d=n(44521),c=n(31549),v=function(e){var t=e.children,n=e.onSuccess,i=e.onError,u={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,d.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:u,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=a()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;u.file=e,u.file_name=t,u.file_type=e.type,console.log("beforeUpload",u)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data.fileUrl;n(t),l.yw.success("".concat(e.file.name," 上传成功"))}else i(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),i(e.file))}};return(0,c.jsx)(s.Z,o()(o()({},v),{},{children:t}))}},96865:function(e,t,n){var i=n(23864);t.Z=function(){var e=(0,i.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},66310:function(e,t,n){n.d(t,{V:function(){return c}});var i=n(73193),o=n.n(i),s=n(76711),r=n.n(s),u=n(55735),a=n(44435),l=n(83642),d=n(83890),c=(0,a.Ue)()((0,l.mW)((0,l.tJ)((0,d.n)((function(e,t){return{robotResult:{data:{content:[]}},currentRobot:{uid:"",nickname:""},insertRobot:function(t){e((function(e){e.robotResult.data.content.unshift(t)}))},setRobotResult:function(n){e({robotResult:n});var i,o=t().currentRobot;""!==o.uid&&void 0!==o||(null===(i=n.data)||void 0===i||null===(i=i.content)||void 0===i?void 0:i.length)>0&&e({currentRobot:n.data.content[0]})},setCurrentRobot:function(n){var i=t().robotResult.data.content,s=i.findIndex((function(e){return e.uid===n.uid}));if(-1!==s){var u=[].concat(r()(i.slice(0,s)),[n],r()(i.slice(s+1))),a=o()(o()({},t().robotResult),{},{data:{content:u}});e({robotResult:a,currentRobot:n})}else console.warn("Robot with the specified uid not found."),e({currentRobot:n})},deleteCurrentRobot:function(n){var i=t().robotResult.data.content,s=i.findIndex((function(e){return e.uid===n}));-1!==s?e({robotResult:o()(o()({},t().robotResult),{},{data:{content:[].concat(r()(i.slice(0,s)),r()(i.slice(s+1)))}})}):console.warn("Robot not found in cache:",n),t().currentRobot.uid===n&&e({currentRobot:{uid:""}})},deleteRobotCache:function(){return e({},!0)}}})),{name:u.Eis})))}}]);