"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2724],{82724:function(e,t,a){a.d(t,{Z:function(){return fe}});var n=a(84176),r=a.n(n),s=a(76711),i=a.n(s),o=a(73193),l=a.n(o),c=a(86222),u=a.n(c),d=a(90819),p=a.n(d),f=a(89933),g=a.n(f),m=a(45332),h=a.n(m),y=a(43388),v=a(94976),x=a(4628);function b(e){return M.apply(this,arguments)}function M(){return(M=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.request)("/api/v1/quickreply/query/org",{method:"GET",params:l()(l()({},t),{},{channel:v.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.request)("/api/v1/quickreply/create",{method:"POST",data:l()(l()({},t),{},{channel:v.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return S.apply(this,arguments)}function S(){return(S=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.request)("/api/v1/quickreply/update",{method:"POST",data:l()(l()({},t),{},{channel:v.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return C.apply(this,arguments)}function C(){return(C=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.request)("/api/v1/quickreply/delete",{method:"POST",data:l()(l()({},t),{},{channel:v.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return U.apply(this,arguments)}function U(){return(U=g()(p()().mark((function e(t){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.request)("/api/v1/quickreply/enable",{method:"POST",data:{uid:t.uid,enabled:t.enabled,channel:v.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=a(74171),T=a(10162),D=a(54881),P=a(93689),E=a(40439),A=a(30617),z=a(2484),O=a(44565),I=a(27729),R=a(90581),B=a(30310),Y=a(69533),N=a(43275),L=a(28508),K=a(44194),J=a(1715),Q=a(8732),X=a(99036),V=a(38106),H=a(59005),_=a(86702),G=a(30857),W=a(47710),$=a(42085),ee=a(96596),te=a.n(ee),ae=a(88722),ne=a(58620),re=a(66406),se=a(78112),ie=a(31549),oe=W.Z.Dragger,le=function(e){var t=e.isEdit,a=e.quickreply,n=e.open,r=e.onClose,s=e.onSubmit,i=X.A.useForm(),o=h()(i,1)[0],c=(0,K.useState)((null==a?void 0:a.content)||""),d=h()(c,2),p=d[0],f=d[1],g=(0,ae.Z)().translateString,m=(0,F.u)((function(e){return e.currentOrg})),x=(0,Q.j)((function(e){return e.currentKbase})),b=(0,J.v)((function(e){return e.categorySelectOptions})),M=(0,J.v)((function(e){return e.categoryTreeOptions})),k=(0,K.useState)(),w=h()(k,2),j=w[0],S=w[1],q=(0,K.useState)(v.PYi),C=h()(q,2),Z=C[0],U=C[1],T=(0,K.useState)(".png,.jpg,.jpeg"),D=h()(T,2),P=D[0],E=D[1],A=(0,K.useState)({file:void 0,fileName:"test.pdf",fileType:"application/pdf",isAvatar:"false",kbType:"type",categoryUid:"",kbUid:(null==x?void 0:x.uid)||"",channel:v.XtJ}),z=h()(A,2),O=z[0],I=(z[1],function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=u()(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.key!==v.zBg)return r.key;var s=e(r.children||[]);if(s)return s}}catch(e){n.e(e)}finally{n.f()}return""});(0,K.useEffect)((function(){if(t)o.setFieldsValue({type:null==a?void 0:a.type,title:null==a?void 0:a.title,content:null==a?void 0:a.content,categoryUid:null==a?void 0:a.categoryUid,kbUid:null==x?void 0:x.uid}),f((null==a?void 0:a.content)||"");else{var e=I(M||[])||(b.length>0?b[0].value:"");o.resetFields(),o.setFieldsValue({type:v.PYi,title:"",content:"",categoryUid:e,kbUid:null==x?void 0:x.uid}),e&&S(e),f("")}}),[n,b,M]);var R={name:"file",accept:P,action:(0,ne.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(v.LA8)},data:O,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=te()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;O.file=e,O.fileName=t,O.fileType=e.type,O.kbType=v.YjS,O.categoryUid=j||"",O.kbUid=null==x?void 0:x.uid,console.log("beforeUpload",O)},onChange:function(e){if("uploading"===e.file.status&&y.yw.loading("".concat(e.file.name," 上传中")),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t,a=null===(t=e.file.response)||void 0===t?void 0:t.data.fileUrl;f(a),y.yw.destroy(),y.yw.success("".concat(e.file.name," 上传成功"))}else y.yw.destroy(),y.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&y.yw.error("".concat(e.file.name," 上传失败"))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(G.Z,{title:t?"修改快捷回复":"新建快捷回复",width:650,onClose:r,open:n,extra:(0,ie.jsxs)(B.Z,{children:[(0,ie.jsx)(Y.ZP,{onClick:r,children:"取消"}),(0,ie.jsx)(Y.ZP,{onClick:function(){console.log("handleSubmit"),o.validateFields().then((function(e){console.log(e),s(l()(l()(l()({},a),e),{},{kbUid:null==x?void 0:x.uid,orgUid:null==m?void 0:m.uid,content:p}))})).catch((function(e){console.log("Form errors:",e),y.yw.error("请检查表单填写")}))},type:"primary",children:"保存"})]}),children:(0,ie.jsxs)(X.A,{form:o,initialValues:l()({},a),submitter:{render:function(){return null}},children:[(0,ie.jsx)(V.Z,{label:"分类",name:"categoryUid",rules:[{required:!0,message:"请选择分类"}],fieldProps:{allowClear:!0,placeholder:"请选择分类",onChange:function(e){console.log("category selected ".concat(e)),S(e)},treeData:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter((function(e){return e.key!==v.zBg})).map((function(t){return l()(l()({},t),{},{title:g(t.title),children:e(t.children||[])})}))}(M||[]),showSearch:!0,treeDefaultExpandAll:!1,fieldNames:{label:"title",value:"key",children:"children"}}}),(0,ie.jsx)(H.Z,{label:"类型",name:"type",rules:[{required:!0,message:"请选择类型"}],options:[{label:"文本",value:v.PYi}],fieldProps:{allowClear:!0,placeholder:"请选择类型",onChange:function(e){console.log("type selected ".concat(e)),U(e),e===v.Qm?E(".png,.jpg,.jpeg,.gif,.bmp"):e===v.tVi?E(".mp4,.avi,.mov,.wmv"):e===v.Yu1?E(".mp3,.wav,.flac"):e===v.Qn&&E(".doc,.xls,.ppt,.pdf,.docx,.txt,.csv,.xlsx,.rtf,.zip,.7z,.tar,.gz,.rar,.iso")}}}),(0,ie.jsx)(_.Z,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题"}]}),(0,ie.jsx)(X.A.Item,{name:"content",label:"回复",rules:[{required:!0,message:"请输入回复"}],children:(0,ie.jsx)(re.Z,{placeholder:"content content..",value:p,toolbarKeys:(0,se.eD)(),style:{height:"200px",width:"600px"},maxLength:200,onChange:function(e,t){f(e)}})}),Z!=v.PYi&&(0,ie.jsxs)(oe,l()(l()({},R),{},{children:[(0,ie.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ie.jsx)($.Z,{})}),(0,ie.jsx)("p",{className:"ant-upload-text",children:"点击或拖拽上传文件"})]}))]})})})},ce=a(54974),ue=a(78069),de=a(16658),pe=["current","pageSize"],fe=function(e){var t=e.superUser,a=(0,x.useIntl)(),n=(0,K.useRef)(),s=(0,K.useState)(!0),o=h()(s,2),c=o[0],d=o[1],f=(0,K.useState)(!1),m=h()(f,2),M=m[0],w=m[1],S=(0,ae.Z)().translateString,C=(0,K.useState)(1),U=h()(C,2),X=U[0],V=U[1],H=(0,K.useState)(10),_=h()(H,2),G=_[0],W=_[1],$=(0,F.u)((function(e){return e.currentOrg})),ee=(0,Q.j)((function(e){return e.currentKbase})),te=(0,J.v)((function(e){return e.currentCategory})),re=(0,J.v)((function(e){return e.categorySelectOptions})),se=(0,K.useState)(!1),oe=h()(se,2),fe=oe[0],ge=oe[1],me=(0,K.useState)(),he=h()(me,2),ye=he[0],ve=he[1],xe=(0,K.useState)([]),be=h()(xe,2),Me=be[0],ke=be[1],we=(0,K.useState)([]),je=h()(we,2),Se=je[0],qe=je[1],Ce=I.Z.useModal(),Ze=h()(Ce,2),Ue=(Ze[0],Ze[1]),Fe=(0,K.useState)({}),Te=h()(Fe,2),De=Te[0],Pe=Te[1],Ee=(0,K.useState)(0),Ae=h()(Ee,2),ze=Ae[0],Oe=Ae[1],Ie=function(){var e=g()(p()().mark((function e(t){var r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,q(t);case 3:r=e.sent,console.log("delete response:",r),200===r.code?(null==n||n.current.reload(),y.yw.success(a.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):y.yw.error(a.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=g()(p()().mark((function e(){var t,r,s,i,o,l;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Se.length){e.next=3;break}return y.yw.warning(a.formatMessage({id:"batch.delete.noselection",defaultMessage:"Please select items to delete"})),e.abrupt("return");case 3:y.yw.loading(a.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),r=0,s=0,i=u()(Se),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=23;break}return l=o.value,e.prev=11,e.next=14,q(l);case 14:200===e.sent.code?r++:s++,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),s++;case 21:e.next=9;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(7),i.e(e.t1);case 28:return e.prev=28,i.f(),e.finish(28);case 31:y.yw.destroy(),0===s?y.yw.success(a.formatMessage({id:"batch.delete.success",defaultMessage:"Successfully deleted {count} items"},{count:r})):y.yw.warning(a.formatMessage({id:"batch.delete.partial",defaultMessage:"Deleted {success} items, failed to delete {fail} items"},{success:r,fail:s})),ke([]),qe([]),null===(t=n.current)||void 0===t||t.reloadAndRest();case 36:case"end":return e.stop()}}),e,null,[[7,25,28,31],[11,18]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=g()(p()().mark((function e(t){var r,s,i,o,l,c;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Se.length){e.next=3;break}return y.yw.warning(a.formatMessage({id:"batch.noselection",defaultMessage:"Please select items to process"})),e.abrupt("return");case 3:y.yw.loading(t?a.formatMessage({id:"enabling",defaultMessage:"Enabling..."}):a.formatMessage({id:"disabling",defaultMessage:"Disabling..."})),s=0,i=0,o=u()(Se),e.prev=7,o.s();case 9:if((l=o.n()).done){e.next=23;break}return c=l.value,e.prev=11,e.next=14,Z({uid:c.uid,enabled:t});case 14:200===e.sent.code?s++:i++,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),i++;case 21:e.next=9;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(7),o.e(e.t1);case 28:return e.prev=28,o.f(),e.finish(28);case 31:y.yw.destroy(),0===i?y.yw.success(t?a.formatMessage({id:"batch.enable.success",defaultMessage:"Successfully enabled {count} items"},{count:s}):a.formatMessage({id:"batch.disable.success",defaultMessage:"Successfully disabled {count} items"},{count:s})):y.yw.warning(t?a.formatMessage({id:"batch.enable.partial",defaultMessage:"Enabled {success} items, failed to enable {fail} items"},{success:s,fail:i}):a.formatMessage({id:"batch.disable.partial",defaultMessage:"Disabled {success} items, failed to disable {fail} items"},{success:s,fail:i})),ke([]),qe([]),null===(r=n.current)||void 0===r||r.reloadAndRest();case 36:case"end":return e.stop()}}),e,null,[[7,25,28,31],[11,18]])})));return function(t){return e.apply(this,arguments)}}(),Ye=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.title.field",defaultMessage:"Title"}),dataIndex:"title",copyable:!0,fixed:"left",width:200,ellipsis:!0,search:!0,render:function(e,t){return S(null==t?void 0:t.title)},tooltip:a.formatMessage({id:"quickreply.title.tooltip",defaultMessage:"快捷回复的标题或名称"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.content",defaultMessage:"Content"}),dataIndex:"content",copyable:!0,width:300,ellipsis:!0,search:!0,render:function(e,t){return S(null==t?void 0:t.content)},tooltip:a.formatMessage({id:"quickreply.content.tooltip",defaultMessage:"快捷回复的具体内容"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.type",defaultMessage:"Type"}),dataIndex:"type",width:100,render:function(e,t){return(0,de.OI)(t.type)},valueEnum:{text:{text:a.formatMessage({id:"quickreply.type.text"})},image:{text:a.formatMessage({id:"quickreply.type.image"})},video:{text:a.formatMessage({id:"quickreply.type.video"})},file:{text:a.formatMessage({id:"quickreply.type.file"})}},tooltip:a.formatMessage({id:"quickreply.type.tooltip",defaultMessage:"快捷回复的内容类型"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.shortcut",defaultMessage:"Shortcut"}),dataIndex:"shortCut",width:120,ellipsis:!0,search:!0,tooltip:a.formatMessage({id:"quickreply.shortcut.tooltip",defaultMessage:"用于快速触发的快捷键"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.enabled",defaultMessage:"Status"}),dataIndex:"enabled",width:100,valueEnum:{true:{text:a.formatMessage({id:"quickreply.enabled.true"}),status:"Success"},false:{text:a.formatMessage({id:"quickreply.enabled.false"}),status:"Error"}},tooltip:a.formatMessage({id:"quickreply.enabled.tooltip",defaultMessage:"快捷回复是否启用"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.category",defaultMessage:"Category"}),dataIndex:"categoryUid",hideInSearch:!0,width:120,render:function(e,t){var a=re.find((function(e){return e.value===(null==t?void 0:t.categoryUid)}));return(0,ie.jsx)(R.Z,{color:"blue",children:(null==a?void 0:a.label)||"-"})},filters:re.map((function(e){return{text:e.label,value:e.value}})),filterMode:"tree",tooltip:a.formatMessage({id:"quickreply.category.tooltip",defaultMessage:"快捷回复的分类"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.updatedAt",defaultMessage:"Updated At"}),dataIndex:"updatedAt",width:160,valueType:"dateTime",sorter:!0,hideInSearch:!0,tooltip:a.formatMessage({id:"quickreply.updatedAt.tooltip",defaultMessage:"最后更新的时间"})},{title:(0,ie.jsx)(x.FormattedMessage,{id:"pages.common.actions",defaultMessage:"Actions"}),valueType:"option",fixed:"right",width:150,render:function(e,t){return(0,ie.jsxs)(B.Z,{children:[(0,ie.jsx)(Y.ZP,{type:"link",size:"small",onClick:function(){return Le(t)},children:(0,ie.jsx)(x.FormattedMessage,{id:"pages.common.edit",defaultMessage:"Edit"})}),(0,ie.jsx)(N.Z,{title:(0,ie.jsx)(x.FormattedMessage,{id:"pages.common.deleteTip",defaultMessage:"Delete Confirmation"}),description:a.formatMessage({id:"pages.common.deleteConfirm"},{name:t.title}),onConfirm:function(){return Ie(t)},okText:(0,ie.jsx)(x.FormattedMessage,{id:"pages.common.ok"}),cancelText:(0,ie.jsx)(x.FormattedMessage,{id:"pages.common.cancel"}),children:(0,ie.jsx)(Y.ZP,{type:"link",danger:!0,size:"small",children:(0,ie.jsx)(x.FormattedMessage,{id:"pages.common.delete"})})})]})}}],Ne=function(){ve(void 0),d(!1),w(!0)},Le=function(e){ve(e),d(!0),w(!0)},Ke=function(){var e=g()(p()().mark((function e(t){var r,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmitDrawer",t),c?y.yw.loading(a.formatMessage({id:"updating"})):y.yw.loading(a.formatMessage({id:"creating"})),!c){e.next=8;break}return e.next=5,j(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,k(t);case 10:e.t0=e.sent;case 11:r=e.t0,console.log("createQuickreply response:",t,r),200===r.code?(y.yw.destroy(),y.yw.loading(a.formatMessage({id:"create.success"})),w(!1),null===(s=n.current)||void 0===s||s.reloadAndRest()):(y.yw.destroy(),y.yw.error(r.message));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=g()(p()().mark((function e(){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=g()(p()().mark((function e(t,a,n){var r,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",t,a,n),r=localStorage.getItem(v.LA8),s=l()({categoryUid:(null==te?void 0:te.uid)===v.zBg?"":null==te?void 0:te.uid,kbUid:null==ee?void 0:ee.uid,orgUid:(null==$?void 0:$.uid)||"",accessToken:r||"",exportType:t},De),"current"===t?(s.pageNumber=String(X-1),s.pageSize=String(G)):"all"===t?(s.pageNumber="0",s.pageSize="1000"):"range"===t&&void 0!==a&&void 0!==n&&(s.pageNumber=String(a),s.pageSize=String(n)),window.open((0,ne.kG)()+"/api/v1/quickreply/export?"+new URLSearchParams(s).toString());case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Xe=function(e){for(var t=[],a=1e3,n=Math.ceil(e/a),r=function(){var n=s,r=s*a+1,i=Math.min((s+1)*a,e);t.push({key:"export-".concat(s),label:"".concat(r,"-").concat(i," (").concat(i-r+1,"条)"),onClick:function(){return Qe("range",n,a)}})},s=0;s<n;s++)r();return t};(0,K.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.reloadAndRest()}),[ee,te]);var Ve=function(){var e=g()(p()().mark((function e(){return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ue.HK)(v._FS,null==$?void 0:$.uid,null==ee?void 0:ee.uid,v.whQ,{showLoading:!0,loadingMessage:a.formatMessage({id:"loading"}),errorMessage:a.formatMessage({id:"fetch.categories.error",defaultMessage:"Failed to fetch categories"})});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He={selectedRowKeys:Me,onChange:function(e,t){ke(e),qe(t)}},_e=function(){var e=[(0,ie.jsx)(Y.ZP,{icon:(0,ie.jsx)(T.Z,{}),type:"primary",onClick:Ne,children:(0,ie.jsx)(x.FormattedMessage,{id:"quickreply.action.create",defaultMessage:"Create Quick Reply"})},"create")],t=[];Me.length>0&&t.push({key:"batchDelete",icon:(0,ie.jsx)(D.Z,{}),danger:!0,label:a.formatMessage({id:"batch.delete"})+" (".concat(Me.length,")"),onClick:function(){I.Z.confirm({title:a.formatMessage({id:"batch.deleteTip"}),content:"".concat(a.formatMessage({id:"batch.deleteAffirm"})," ").concat(Me.length," ").concat(a.formatMessage({id:"items"}),"?"),onOk:Re,okText:a.formatMessage({id:"ok"}),cancelText:a.formatMessage({id:"cancel"})})}},{key:"batchEnable",icon:(0,ie.jsx)(P.Z,{}),label:a.formatMessage({id:"batch.enable"})+" (".concat(Me.length,")"),onClick:function(){return Be(!0)}},{key:"batchDisable",icon:(0,ie.jsx)(E.Z,{}),label:a.formatMessage({id:"batch.disable"})+" (".concat(Me.length,")"),onClick:function(){return Be(!1)}});var n,r=[{key:"import",icon:(0,ie.jsx)(A.Z,{}),label:a.formatMessage({id:"quickreply.action.import",defaultMessage:"导入快捷回复"}),onClick:Je}].concat(i()((n=[{key:"export-current",label:a.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return Qe("current")}}],ze>0&&(ze<=1e3?n.push({key:"export-all",label:a.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(ze,"条)"),onClick:function(){return Qe("all")}}):n.push({key:"export-range",label:a.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(ze,"条)"),children:Xe(ze)})),n.push({key:"download",label:a.formatMessage({id:"download.template",defaultMessage:"下载模板"}),onClick:function(){return(0,ne.os)()}}),n)));return e.push((0,ie.jsx)(L.Z,{menu:{items:r},placement:"bottomRight",children:(0,ie.jsxs)(Y.ZP,{type:"primary",children:[(0,ie.jsx)(x.FormattedMessage,{id:"import.export",defaultMessage:"导入导出"}),(0,ie.jsx)(z.Z,{})]})},"importExport")),t.length>0&&e.push((0,ie.jsx)(L.Z,{menu:{items:t},placement:"bottomRight",children:(0,ie.jsxs)(Y.ZP,{type:"primary",danger:!0,children:[a.formatMessage({id:"batch.operations",defaultMessage:"批量操作"})," (",Me.length,")",(0,ie.jsx)(z.Z,{})]})},"batchOperations")),e};return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(O.Z,{columns:Ye,actionRef:n,cardBordered:!0,rowSelection:He,request:function(){var e=g()(p()().mark((function e(n,s,i){var o,c,u,d,f,g,m,h,x,M;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",n,s,i),y.yw.loading(a.formatMessage({id:"loading",defaultMessage:"Loading"})),o=n.current,c=n.pageSize,u=r()(n,pe),V(o),W(c),Pe(u),d=void 0,f=void 0,s&&Object.keys(s).length>0&&(g=Object.keys(s)[0],d=g,f="ascend"===s[g]?"ascend":"descend"),m=t?void 0:(null==te?void 0:te.uid)===v.zBg?"":null==te?void 0:te.uid,h=t||null==ee?void 0:ee.uid,x=l()(l()({pageNumber:o-1,pageSize:c,categoryUid:m,kbUid:h,orgUid:null==$?void 0:$.uid,superUser:t},u),{},{sortBy:d,sortDirection:f}),e.next=14,b(x);case 14:return M=e.sent,console.log("queryQuickRepliesByOrg response:",x,M),y.yw.destroy(),200===M.code?Oe(null==M?void 0:M.data.totalElements):y.yw.error(M.message),e.abrupt("return",{data:null==M?void 0:M.data.content,success:!0,total:null==M?void 0:M.data.totalElements});case 19:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),scroll:{x:1800},rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:10,onChange:function(e,t){V(e),W(t)}},dateFormatter:"string",headerTitle:S(null==ee?void 0:ee.name)+" - "+a.formatMessage({id:"quickreply.title",defaultMessage:"快捷回复"}),tooltip:{title:a.formatMessage({id:"quickreply.tooltip",defaultMessage:"客服->一对一->高级设置->快捷回复"}),placement:"top"},toolBarRender:function(){return t?[]:_e()},columnsState:{persistenceKey:"quickreply-table",defaultValue:{tagList:{show:!0},startDate:{show:!1},endDate:{show:!1},level:{show:!0},enabled:{show:!0}}}}),(0,ie.jsx)(le,{isEdit:c,open:M,quickreply:ye,onClose:function(){return w(!1)},onSubmit:Ke}),fe&&(0,ie.jsx)(ce.Z,{type:v._FS,acceptType:".xlsx,.xls,.csv",isModalOpen:fe,handleSubmit:function(e){console.log("handleUploadDragSubmit",e),ge(!1),null==n||n.current.reload(),Ve()},handleCancel:function(){console.log("handleUploadDragCancel"),ge(!1),null==n||n.current.reload()}}),Ue]})}}}]);