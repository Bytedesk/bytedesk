"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5553],{71914:function(e,t,r){r.d(t,{EP:function(){return l},md:function(){return m},t7:function(){return p}});var a=r(90819),n=r.n(a),i=r(73193),o=r.n(i),s=r(89933),c=r.n(s),u=r(68992),d=r(62395);function l(e){return f.apply(this,arguments)}function f(){return(f=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/check/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/check/create",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/check/delete",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},23149:function(e,t,r){r.d(t,{LX:function(){return m},T:function(){return l},ay:function(){return y},eY:function(){return p}});var a=r(90819),n=r.n(a),i=r(73193),o=r.n(i),s=r(89933),c=r.n(s),u=r(68992),d=r(62395);function l(e){return f.apply(this,arguments)}function f(){return(f=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/plan/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/plan/create",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/plan/update",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/quality/plan/delete",{method:"POST",data:o()(o()({},t),{},{channel:u.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},42266:function(e,t,r){r.d(t,{nV:function(){return d}});var a=r(90819),n=r.n(a),i=r(73193),o=r.n(i),s=r(89933),c=r.n(s),u=(r(68992),r(62395));function d(e){return l.apply(this,arguments)}function l(){return(l=c()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/queue/member/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},27831:function(e,t,r){r.r(t),r.d(t,{default:function(){return H}});var a=r(73193),n=r.n(a),i=r(84176),o=r.n(i),s=r(90819),c=r.n(s),u=r(89933),d=r.n(u),l=r(45332),f=r.n(l),m=r(44194),h=r(33633),p=r(72264),g=r(35911),y=r(54596),v=r(62395),x=r(42266),M=r(10154),q=r.n(M),b=r(13243),j=r(78380),k=r(69650),w=r(70878),S=r(41059),C=r(89654),F=r(63052),Z=r(64525),P=r(53747),I=r(43837),N=r(23149),A=r(71914),T=r(77686),E=r(68992),z=r(61489),V=r(31549),O=b.Z.TextArea,U=j.Z.Option,_=k.Z.Title,Y=k.Z.Text,B="quality_plan_selection",L=function(e){var t,r,a=e.visible,i=e.onClose,o=e.queueMember,s=e.onSubmit,u=(0,v.useIntl)(),l=w.Z.useForm(),g=f()(l,1)[0],y=(0,m.useState)([]),x=f()(y,2),M=x[0],b=x[1],k=(0,m.useState)(null),L=f()(k,2),D=L[0],W=L[1],X=(0,m.useState)(!1),H=f()(X,2),J=H[0],G=H[1],R=(0,m.useState)({}),K=f()(R,2),Q=K[0],$=K[1],ee=(0,T.u)((function(e){return e.currentOrg})),te=function(e){try{localStorage.setItem(B,e)}catch(e){console.error("保存质检方案选择到本地存储失败:",e)}},re=function(){try{return localStorage.getItem(B)}catch(e){return console.error("从本地存储获取质检方案选择失败:",e),null}},ae=function(){var e=d()(c()().mark((function e(){var t,r,a,n,i,o,s;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,N.T)({pageNumber:0,pageSize:100,enabled:!0,orgUid:null==ee?void 0:ee.uid});case 3:200===(t=e.sent).code&&t.data&&(r=t.data.content||[],b(r),r.length>0&&((a=re())&&r.find((function(e){return e.uid===a}))?n=a:(n=r[0].uid,te(n)),(i=r.find((function(e){return e.uid===n})))&&(W(i),g.setFieldsValue({qualityPlanUid:n}),s={},null===(o=i.indicators)||void 0===o||o.forEach((function(e){s[e.indicatorName]=0,g.setFieldsValue(q()({},"indicator_".concat(e.indicatorName),0))})),$(s)))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("获取质检方案失败:",e.t0),z.yw.error(u.formatMessage({id:"quality.plan.fetch.error",defaultMessage:"获取质检方案失败"}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ne=function(e){return e>=90?{level:"excellent",color:"green"}:e>=80?{level:"good",color:"blue"}:e>=70?{level:"average",color:"orange"}:{level:"poor",color:"red"}},ie=function(){var e=d()(c()().mark((function e(){var t,r,a,d,l,f,m,h,p,y,v,x;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.validateFields();case 3:if(a=e.sent,D){e.next=7;break}return z.yw.error(u.formatMessage({id:"quality.plan.select.required",defaultMessage:"请选择质检方案"})),e.abrupt("return");case 7:return G(!0),d=0,l=0,f=0,null===(t=D.indicators)||void 0===t||t.forEach((function(e){var t=a["indicator_".concat(e.indicatorName)]||0;e.deduction?(f+=t,d-=t):(l+=t,d+=t)})),d=Math.max(0,d),m=ne(d),h=m.level,p=m.color,y=(null===(r=D.indicators)||void 0===r?void 0:r.map((function(e){return n()(n()({},e),{},{indicatorScore:a["indicator_".concat(e.indicatorName)]||0})})))||[],v={indicators:y,comment:a.comment,qualityPlanUid:D.uid,queueMemberUid:null==o?void 0:o.uid,orgUid:null==ee?void 0:ee.uid},e.next=18,(0,A.md)(v);case 18:if(x=e.sent,console.log("qualityCheckData response",x.data,v),200!==x.code){e.next=29;break}return z.yw.success(u.formatMessage({id:"quality.check.create.success",defaultMessage:"质检结果提交成功"})),g.resetFields(),W(null),i(),e.next=27,s(n()(n()({},a),{},{totalScore:d,qualityLevel:h,qualityLevelColor:p,bonusScore:l,deductionScore:f}));case 27:e.next=30;break;case 29:z.yw.error(x.message||u.formatMessage({id:"quality.check.create.error",defaultMessage:"提交失败"}));case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(0),console.error("表单验证失败:",e.t0),z.yw.error(u.formatMessage({id:"quality.check.create.error",defaultMessage:"提交失败，请重试"}));case 36:return e.prev=36,G(!1),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[0,32,36,39]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=g.getFieldValue("qualityPlanUid"),t=M.find((function(t){return t.uid===e}));if(g.resetFields(),e&&(g.setFieldsValue({qualityPlanUid:e}),null!=t&&t.indicators)){var r={};t.indicators.forEach((function(e){r[e.indicatorName]=0,g.setFieldsValue(q()({},"indicator_".concat(e.indicatorName),0))})),$(r)}W(null),i()},se=function(e,t){$((function(r){return n()(n()({},r),{},q()({},e,t))})),g.setFieldsValue(q()({},"indicator_".concat(e),t))};return(0,m.useEffect)((function(){a&&(ae(),g.setFieldsValue({comment:""}))}),[a,g]),(0,V.jsx)(S.Z,{title:u.formatMessage({id:"quality.scoring.review",defaultMessage:"重新质检"}),width:700,open:a,onClose:oe,extra:(0,V.jsxs)(C.Z,{children:[(0,V.jsx)(p.ZP,{onClick:oe,children:u.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,V.jsx)(p.ZP,{type:"primary",onClick:ie,loading:J,children:u.formatMessage({id:"submit",defaultMessage:"提交"})})]}),children:o&&(0,V.jsxs)("div",{children:[(0,V.jsx)(F.Z,{title:u.formatMessage({id:"quality.chat.history",defaultMessage:"聊天记录"}),style:{marginBottom:24},children:(0,V.jsx)(p.ZP,{type:"primary",icon:(0,V.jsx)(I.Z,{}),onClick:function(){var e,t;if(null!=o&&null!==(e=o.thread)&&void 0!==e&&e.uid){var r={chatConfig:{org:null==ee?void 0:ee.uid,t:E.CCt,sid:o.thread.uid}};null===(t=window.bytedesk)||void 0===t||t.showChat(r)}else z.yw.warning(u.formatMessage({id:"quality.chat.history.no.thread",defaultMessage:"会话信息不存在"}))},children:u.formatMessage({id:"quality.view.chat.history",defaultMessage:"查看聊天记录"})})}),(0,V.jsxs)(w.Z,{form:g,layout:"vertical",children:[(0,V.jsx)(w.Z.Item,{label:u.formatMessage({id:"quality.plan.select",defaultMessage:"选择质检方案"}),name:"qualityPlanUid",rules:[{required:!0,message:u.formatMessage({id:"quality.plan.select.required",defaultMessage:"请选择质检方案"})}],children:(0,V.jsx)(j.Z,{placeholder:u.formatMessage({id:"quality.plan.select.placeholder",defaultMessage:"请选择质检方案"}),onChange:function(e){var t=M.find((function(t){return t.uid===e}));W(t||null),e&&te(e);var r=g.getFieldsValue(),a=n()({},r);if(Object.keys(a).forEach((function(e){e.startsWith("indicator_")&&delete a[e]})),g.setFieldsValue(a),$({}),null!=t&&t.indicators){var i={};t.indicators.forEach((function(e){i[e.indicatorName]=0,g.setFieldsValue(q()({},"indicator_".concat(e.indicatorName),0))})),$(i)}},showSearch:!0,filterOption:function(e,t){var r;return null==t||null===(r=t.children)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase())},labelInValue:!1,optionLabelProp:"label",children:M.map((function(e){var t;return(0,V.jsx)(U,{value:e.uid,label:e.name,children:(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),(0,V.jsxs)("div",{style:{fontSize:"12px",color:"#999"},children:[e.description||u.formatMessage({id:"quality.plan.no.description",defaultMessage:"暂无描述"})," (",(null===(t=e.indicators)||void 0===t?void 0:t.length)||0," ",u.formatMessage({id:"quality.plan.indicators.count",defaultMessage:"个指标"}),")"]})]})},e.uid)}))})}),D&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Z.Z,{children:(0,V.jsx)(_,{level:4,children:u.formatMessage({id:"quality.indicators.scoring",defaultMessage:"质检指标评分"})})}),null===(t=D.indicators)||void 0===t?void 0:t.map((function(e,t){return(0,V.jsx)(w.Z.Item,{label:(0,V.jsxs)(C.Z,{children:[(0,V.jsx)("span",{children:e.indicatorName}),e.mandatory&&(0,V.jsx)(h.Z,{color:"red",children:u.formatMessage({id:"quality.indicator.mandatory",defaultMessage:"必检"})}),e.deduction?(0,V.jsx)(h.Z,{color:"red",children:u.formatMessage({id:"quality.indicator.deduction",defaultMessage:"减分项"})}):(0,V.jsx)(h.Z,{color:"green",children:u.formatMessage({id:"quality.indicator.bonus",defaultMessage:"加分项"})}),e.indicatorScore&&(0,V.jsxs)(Y,{type:"secondary",children:["(",u.formatMessage({id:"quality.indicator.max.score",defaultMessage:"满分"}),": ",e.indicatorScore,"分)"]}),(0,V.jsx)(h.Z,{color:e.deduction?"red":"green",style:{marginLeft:"auto"},children:e.deduction?"".concat(u.formatMessage({id:"quality.indicator.current.deduction",defaultMessage:"当前减分"}),": ").concat(Q[e.indicatorName]||0,"分"):"".concat(u.formatMessage({id:"quality.indicator.current.score",defaultMessage:"当前评分"}),": ").concat(Q[e.indicatorName]||0,"分")})]}),name:"indicator_".concat(e.indicatorName),rules:[{required:e.mandatory,message:u.formatMessage({id:"quality.indicator.score.required",defaultMessage:"请评分"})},{validator:function(t,r){return!e.mandatory||null!=r&&""!==r?r<0||r>(e.indicatorScore||100)?Promise.reject(new Error(u.formatMessage({id:"quality.indicator.score.range.error",defaultMessage:"评分范围应为 0-".concat(e.indicatorScore||100," 分")}))):Promise.resolve():Promise.reject(new Error(u.formatMessage({id:"quality.indicator.score.required",defaultMessage:"请评分"})))}}],extra:e.description&&(0,V.jsx)(Y,{type:"secondary",style:{fontSize:"12px"},children:e.description}),children:(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{style:{marginBottom:8},children:(0,V.jsx)(P.Z,{min:0,max:e.indicatorScore||100,step:1,value:Q[e.indicatorName]||0,onChange:function(t){return se(e.indicatorName,t)},marks:q()(q()(q()(q()({0:"0"},Math.floor(.25*(e.indicatorScore||100)),"".concat(Math.floor(.25*(e.indicatorScore||100)))),Math.floor(.5*(e.indicatorScore||100)),"".concat(Math.floor(.5*(e.indicatorScore||100)))),Math.floor(.75*(e.indicatorScore||100)),"".concat(Math.floor(.75*(e.indicatorScore||100)))),e.indicatorScore||100,"".concat(e.indicatorScore||100)),tooltip:{formatter:function(t){return e.deduction?"".concat(t,"分(减分)"):"".concat(t,"分")}},keyboard:!1,onChangeComplete:function(t){return se(e.indicatorName,t)}})}),(0,V.jsx)("div",{style:{textAlign:"center",fontSize:"12px",color:"#666",marginTop:16},children:e.deduction?"".concat(u.formatMessage({id:"quality.indicator.deduction.range",defaultMessage:"减分范围"}),": 0 - ").concat(e.indicatorScore||100," ").concat(u.formatMessage({id:"quality.indicator.score.unit",defaultMessage:"分"})," "):"".concat(u.formatMessage({id:"quality.indicator.score.range",defaultMessage:"评分范围"}),": 0 - ").concat(e.indicatorScore||100," ").concat(u.formatMessage({id:"quality.indicator.score.unit",defaultMessage:"分"}))})]})},t)}))]}),D&&(0,V.jsx)(F.Z,{title:u.formatMessage({id:"quality.total.score.summary",defaultMessage:"评分统计"}),style:{marginBottom:24},children:(0,V.jsx)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:(r=function(){if(null==D||!D.indicators)return{total:0,bonus:0,deduction:0};var e=0,t=0,r=0;return D.indicators.forEach((function(a){var n=g.getFieldValue("indicator_".concat(a.indicatorName)),i=void 0!==n?n:Q[a.indicatorName]||0;a.deduction?(r+=i,e-=i):(t+=i,e+=i)})),{total:e=Math.max(0,e),bonus:t,deduction:r}}(),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{style:{textAlign:"center"},children:[(0,V.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1890ff"},children:r.total}),(0,V.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:u.formatMessage({id:"quality.total.score",defaultMessage:"总分"})})]}),(0,V.jsxs)("div",{style:{textAlign:"center"},children:[(0,V.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#52c41a"},children:["+",r.bonus]}),(0,V.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:u.formatMessage({id:"quality.bonus.score",defaultMessage:"正面评分"})})]}),(0,V.jsxs)("div",{style:{textAlign:"center"},children:[(0,V.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ff4d4f"},children:["-",r.deduction]}),(0,V.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:u.formatMessage({id:"quality.deduction.score",defaultMessage:"负面评分"})})]})]}))})}),(0,V.jsx)(w.Z.Item,{label:u.formatMessage({id:"quality.comments",defaultMessage:"质检评语"}),name:"comment",rules:[{required:!0,message:u.formatMessage({id:"quality.comments.required",defaultMessage:"请输入质检评语"})}],children:(0,V.jsx)(O,{rows:4,placeholder:u.formatMessage({id:"quality.comments.placeholder",defaultMessage:"请输入质检评语..."})})})]})]})})},D=r(45634),W=r.n(D),X=["current","pageSize"],H=function(){var e=(0,v.useIntl)(),t=(0,m.useRef)(),r=(0,m.useState)(!1),a=f()(r,2),i=a[0],s=a[1],u=(0,m.useState)(null),l=f()(u,2),M=l[0],q=l[1],b=(0,T.u)((function(e){return e.currentOrg})),j=function(){var e=d()(c()().mark((function e(r){var a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("质检结果提交成功:",r),s(!1),null===(a=t.current)||void 0===a||a.reload()}catch(e){console.error("处理质检结果失败:",e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,V.jsx)(v.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:["thread","uid"],key:"threadUid",copyable:!0,fixed:"left",ellipsis:!0,hideInSearch:!0,tooltip:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.nickname.tooltip"})},{title:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.agent"}),dataIndex:["thread","agentProtobuf","nickname"],key:"agentNickname",ellipsis:!0,hideInSearch:!0,tooltip:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.agent.tooltip"}),render:function(e,t){var r,a,n=null===(r=t.thread)||void 0===r||null===(r=r.robotProtobuf)||void 0===r?void 0:r.nickname,i=null===(a=t.thread)||void 0===a||null===(a=a.agentProtobuf)||void 0===a?void 0:a.nickname;return n&&i?"".concat(n," / ").concat(i):n||(i||"-")}},{title:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.nickname"}),dataIndex:["thread","user","nickname"],key:"visitorNickname",ellipsis:!0,search:!0,tooltip:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.nickname.tooltip"}),render:function(e,t){var r;return(null===(r=t.thread)||void 0===r||null===(r=r.user)||void 0===r?void 0:r.nickname)||"-"}},{title:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.qualityChecked"}),dataIndex:"qualityChecked",key:"qualityChecked",hideInSearch:!0,tooltip:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.qualityChecked.tooltip"}),valueEnum:{true:{text:"已质检",status:"Success"},false:{text:"待质检",status:"Processing"}},render:function(e,t){return(0,V.jsx)(h.Z,{color:t.qualityChecked?"green":"blue",children:t.qualityChecked?"已质检":"待质检"})}},{title:(0,V.jsx)(v.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",width:180,sorter:!0,hideInSearch:!0,tooltip:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.tooltip.createdAt"}),render:function(e,t,r,a){return W()(t.createdAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,V.jsx)(v.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",width:180,sorter:!0,hideInSearch:!0,tooltip:(0,V.jsx)(v.FormattedMessage,{id:"queue.member.tooltip.updatedAt"}),render:function(e,t,r,a){return W()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}},{title:e.formatMessage({id:"actions",defaultMessage:"操作"}),valueType:"option",key:"option",width:120,fixed:"right",render:function(t,r,a,n){return[(0,V.jsx)("a",{onClick:function(){!function(e){var t,r;console.log("handleShowChatHistory",e);var a={chatConfig:{org:null==b?void 0:b.uid,t:E.CCt,sid:null==e||null===(t=e.thread)||void 0===t?void 0:t.uid}};null===(r=window.bytedesk)||void 0===r||r.showChat(a)}(r)},children:e.formatMessage({id:"view",defaultMessage:"查看"})},"view"),(0,V.jsx)("a",{onClick:function(){!function(e){q(e),s(!0)}(r)},children:e.formatMessage({id:"quality.scoring.review",defaultMessage:"质检"})},"quality")]}}],w=function(){var t=d()(c()().mark((function t(r,a,i){var s,u,d,l,f,m,h,p;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("request:",r,a,i),z.yw.loading(e.formatMessage({id:"quality.scoring.loading",defaultMessage:"加载中..."})),s=r.current,u=r.pageSize,d=o()(r,X),l=void 0,f=void 0,a&&Object.keys(a).length>0&&(m=Object.keys(a)[0],l=m,f="ascend"===a[m]?"ascend":"descend"),h=n()(n()({pageNumber:s-1,pageSize:u,qualityChecked:!1},d),{},{sortBy:l,sortDirection:f,orgUid:null==b?void 0:b.uid}),t.prev=7,t.next=10,(0,x.nV)(h);case 10:if(p=t.sent,console.log("queryQueueMembersByOrg response:",p.data,h),z.yw.destroy(),200!==p.code||!p.data){t.next=17;break}return t.abrupt("return",{data:p.data.content||[],success:!0,total:p.data.totalElements||0});case 17:return z.yw.error(p.message||e.formatMessage({id:"quality.scoring.fetch.error",defaultMessage:"获取数据失败"})),t.abrupt("return",{data:[],success:!1,total:0});case 19:t.next=27;break;case 21:return t.prev=21,t.t0=t.catch(7),z.yw.destroy(),z.yw.error(e.formatMessage({id:"quality.scoring.fetch.error",defaultMessage:"获取数据失败"})),console.error("Fetch scoring records error:",t.t0),t.abrupt("return",{data:[],success:!1,total:0});case 27:case"end":return t.stop()}}),t,null,[[7,21]])})));return function(e,r,a){return t.apply(this,arguments)}}();return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(y.Z,{columns:k,actionRef:t,cardBordered:!0,request:w,scroll:{x:1200},rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:10},dateFormatter:"string",headerTitle:e.formatMessage({id:"quality.scoring.management",defaultMessage:"会话质检评分"}),toolBarRender:function(){return(r=[]).push((0,V.jsx)(p.ZP,{icon:(0,V.jsx)(g.Z,{}),onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.reload()},children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})},"refresh")),r.push((0,V.jsx)(p.ZP,{type:"primary",children:e.formatMessage({id:"export",defaultMessage:"导出"})},"export")),r;var r}}),(0,V.jsx)(L,{visible:i,onClose:function(){return s(!1)},queueMember:M,onSubmit:j})]})}}}]);