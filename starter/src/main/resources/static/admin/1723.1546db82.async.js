"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1723],{91723:function(e,n,t){t.d(n,{Z:function(){return W}});var o=t(73193),i=t.n(o),a=t(45332),c=t.n(a),l=t(7358),r=t(71529),d=t(3340),u=t(61107),s=t(32327),f=t(1430),h=t(3849),b=t(75365),m=t(53530),g=t(88958),w=t(11184),v=t(69169),p=t(48708),x=t(84881),C=t(85954),y=t(32350),M=t(62673),k=t(44194),R=t(66310),j=t(40612),Z=t(1902),U=t(95490),P=t(44521),F=t(55735),T=t(86803),S=t(30921),V=t(76711),z=t.n(V),I=t(44435),q=t(83642),B=t(83890),E=(0,I.Ue)()((0,q.mW)((0,q.tJ)((0,B.n)((function(e,n){return{unifiedResult:{data:{content:[]}},currentUnified:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},insertUnified:function(n){e((function(e){e.unifiedResult.data.content.unshift(n)}))},updateUnified:function(n){e((function(e){var t=e.unifiedResult.data.content,o=t.findIndex((function(e){return e.uid===n.uid}));-1!==o?t[o]=n:console.warn("Unified with uid ".concat(n.uid," not found."))}))},deleteUnified:function(n){e((function(e){var t=e.unifiedResult.data.content,o=t.findIndex((function(e){return e.uid===n.uid}));-1!==o?t.splice(o,1):console.warn("Unified with uid ".concat(n.uid," not found."))}))},setUnifiedResult:function(t){var o;(e({unifiedResult:t}),""===n().currentUnified.uid)&&((null===(o=t.data)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.length)>0&&e({currentUnified:t.data.content[0]}))},setCurrentUnified:function(t){var o=n().unifiedResult.data.content,a=o.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var c=[].concat(z()(o.slice(0,a)),[t],z()(o.slice(a+1))),l=i()(i()({},n().unifiedResult),{},{data:{content:c}});e({unifiedResult:l,currentUnified:t})}else console.warn("Unified with the specified uid not found."),e({currentUnified:t})},deleteCurrentUnified:function(t){var o=n().unifiedResult.data.content,a=o.findIndex((function(e){return e.uid===t}));-1!==a?e({unifiedResult:i()(i()({},n().unifiedResult),{},{data:{content:[].concat(z()(o.slice(0,a)),z()(o.slice(a+1)))}})}):console.warn("Unified not found in cache:",t),n().currentUnified.uid===t&&e({currentUnified:{uid:"",orgUid:""}})},deleteUnifiedCache:function(){return e({},!0)}}})),{name:F.jlI}))),A=t(31549),W=(s.Z.Text,function(e){var n,t,o,a,s,V,z,I,q=e.type,B=v.A.useForm(),W=c()(B,1)[0],N=(0,w.M)(),O=N.config,L=N.updateConfig,_=(0,j.u)((function(e){return e.currentOrg})),D=(0,R.V)((function(e){return e.currentRobot})),H=(0,Z.E)((function(e){return e.currentAgent})),J=(0,U.$)((function(e){return e.currentWorkgroup})),X=E((function(e){return e.currentUnified})),Y=(0,k.useState)(!1),$=c()(Y,2),G=$[0],K=$[1],Q=(0,k.useState)(!1),ee=c()(Q,2),ne=ee[0],te=ee[1],oe=(0,k.useState)("zh-cn"),ie=c()(oe,2),ae=ie[0],ce=ie[1],le=(0,k.useState)("system"),re=c()(le,2),de=re[0],ue=re[1],se=(0,S.useIntl)(),fe=(0,k.useState)(!1),he=c()(fe,2),be=he[0],me=he[1],ge=(0,k.useState)("full"),we=c()(ge,2),ve=we[0],pe=we[1],xe=(0,k.useMemo)((function(){return q===F._X4?{chatType:F.xtN,chatSid:D.uid}:q===F.Njn?{chatType:F.scI,chatSid:H.uid}:q===F.aZD?{chatType:F.vPY,chatSid:J.uid}:q===F.RB4?{chatType:F.vIe,chatSid:X.uid}:{chatType:F.xtN,chatSid:""}}),[q,D,H,J]),Ce=xe.chatType,ye=xe.chatSid;(0,k.useEffect)((function(){var e,n;null!=_&&_.uid&&Ce&&ye&&L({chatConfig:{org:null==_?void 0:_.uid,t:Ce,sid:ye},theme:{backgroundColor:null===(e=O.theme)||void 0===e?void 0:e.backgroundColor,textColor:null===(n=O.theme)||void 0===n?void 0:n.textColor}})}),[null==_?void 0:_.uid,Ce,ye,null===(n=O.theme)||void 0===n?void 0:n.backgroundColor,null===(t=O.theme)||void 0===t?void 0:t.textColor]);var Me=function(e){var n,t,o=e+"?".concat(F.I3Y,"=").concat(null==_?void 0:_.uid)+"&".concat(F.ZfG,"=").concat(Ce)+"&".concat(F.RI9,"=").concat(ye);(G&&(o+="&".concat(F.ErC,"=").concat(ae)),ne)&&(o+="&".concat(F.N1q,"=").concat(de)+"&".concat(F.spX,"=").concat(null===(n=O.theme)||void 0===n?void 0:n.backgroundColor)+"&".concat(F.cW9,"=").concat(null===(t=O.theme)||void 0===t?void 0:t.textColor));return o+"&"},ke=(0,k.useMemo)((function(){return Me((0,P.Cn)())}),[null==_?void 0:_.uid,D,H,J,G,ae,ne,de,null===(o=O.theme)||void 0===o?void 0:o.backgroundColor,null===(a=O.theme)||void 0===a?void 0:a.textColor]),Re=(0,k.useMemo)((function(){return Me((0,P.Z$)())}),[null==_?void 0:_.uid,D,H,J,G,ae,ne,de,null===(s=O.theme)||void 0===s?void 0:s.backgroundColor,null===(V=O.theme)||void 0===V?void 0:V.textColor]),je=function(e){var n,t,o,i,a,c,l,r,d,u;return'\x3c!-- bytedesk.com --\x3e\n<script src="https://www.weiyuai.cn/embed/bytedesk-web.js"><\/script>\n<script>\n  const config = {\n    baseUrl: \''.concat(e.baseUrl||"https://www.weiyuai.cn/chat","',\n    placement: '").concat(e.placement||"bottom-right","',\n    autoPopup: ").concat(e.autoPopup||!1,",\n    locale: '").concat(ae,"',\n    inviteConfig: {\n      show: ").concat((null===(n=e.inviteConfig)||void 0===n?void 0:n.show)||!1,",\n      text: '").concat((null===(t=e.inviteConfig)||void 0===t?void 0:t.text)||"ÈúÄË¶ÅÂ∏ÆÂä©‰πà","',\n    },\n    bubbleConfig: {\n      show: ").concat(null===(o=null===(i=e.bubbleConfig)||void 0===i?void 0:i.show)||void 0===o||o,",\n      icon: '").concat((null===(a=e.bubbleConfig)||void 0===a?void 0:a.icon)||"üëã","',\n      title: '").concat((null===(c=e.bubbleConfig)||void 0===c?void 0:c.title)||"ÈúÄË¶ÅÂ∏ÆÂä©‰πà","',\n      subtitle: '").concat((null===(l=e.bubbleConfig)||void 0===l?void 0:l.subtitle)||"ÁÇπÂáªÊàëÔºå‰∏éÊàëÂØπËØù","'\n    },\n    theme: {\n      mode: '").concat(de,"',\n      backgroundColor: '").concat((null===(r=e.theme)||void 0===r?void 0:r.backgroundColor)||"#0066FF","',\n      textColor: '").concat((null===(d=e.theme)||void 0===d?void 0:d.textColor)||"#ffffff","'\n    },\n    window: {\n      width: '").concat((null===(u=e.window)||void 0===u?void 0:u.width)||380,"'\n    },\n    chatConfig: {\n      org: '").concat(null==_?void 0:_.uid,"',\n      t: '").concat(Ce,"',\n      sid: '").concat(ye,"'\n    }\n  };\n  const bytedesk = new BytedeskWeb(config);\n  bytedesk.init();\n<\/script>")};(0,k.useEffect)((function(){var e,n;O&&(W.setFieldValue("codeFullUrl",ke),W.setFieldValue("codeFrameUrl",Re),W.setFieldValue("buttonColor",null===(e=O.theme)||void 0===e?void 0:e.backgroundColor),W.setFieldValue("showBubble",null===(n=O.bubbleConfig)||void 0===n?void 0:n.show),W.setFieldsValue({rightPlacement:"bottom-right"===O.placement,configText:je(O)}))}),[O]);var Ze=function(e){pe(e),me(!0)};return(0,A.jsxs)(M.Z,{title:se.formatMessage({id:"channel.web.config.title"}),children:[(0,A.jsxs)(v.A,{form:W,submitter:!1,onValuesChange:function(e,n){var t=n.rightPlacement?{placement:"bottom-right"}:{placement:"bottom-left"};L(t),W.setFieldsValue({configText:je(i()(i()({},O),t))})},children:[(0,A.jsx)(p.Z,{name:"rightPlacement",label:se.formatMessage({id:"channel.web.position"}),tooltip:se.formatMessage({id:"channel.web.position.tooltip"}),fieldProps:{checked:"bottom-right"===O.placement}}),(0,A.jsx)(x.Z,{name:"buttonColor",width:"md",label:se.formatMessage({id:"channel.web.button.color"}),options:[{label:se.formatMessage({id:"channel.web.button.color.blue"}),value:"#0066FF"},{label:se.formatMessage({id:"channel.web.button.color.green"}),value:"#52c41a"},{label:se.formatMessage({id:"channel.web.button.color.red"}),value:"#ff4d4f"},{label:se.formatMessage({id:"channel.web.button.color.yellow"}),value:"#faad14"},{label:se.formatMessage({id:"channel.web.button.color.purple"}),value:"#722ed1"}],fieldProps:{value:null===(z=O.theme)||void 0===z?void 0:z.backgroundColor,onChange:function(e){L({theme:i()(i()({},O.theme),{},{textColor:"#ffffff",backgroundColor:e})}),W.setFieldsValue({configText:je(i()(i()({},O),{},{theme:i()(i()({},O.theme),{},{textColor:"#ffffff",backgroundColor:e})}))})}},addonAfter:(0,A.jsx)(f.Z,{value:null===(I=O.theme)||void 0===I?void 0:I.backgroundColor,onChange:function(e){var n=e.toHexString();L({theme:i()(i()({},O.theme),{},{backgroundColor:n})}),W.setFieldsValue({buttonColor:n,configText:je(i()(i()({},O),{},{theme:i()(i()({},O.theme),{},{backgroundColor:n})}))})}})}),(0,A.jsx)(C.Z,{name:"showBubble",width:"xl",tooltip:se.formatMessage({id:"channel.web.show.bubble.tooltip"}),label:se.formatMessage({id:"channel.web.show.bubble"}),fieldProps:{onChange:function(e){var n=e.target.checked;L({bubbleConfig:i()(i()({},O.bubbleConfig),{},{show:n})}),W.setFieldsValue({configText:je(i()(i()({},O),{},{bubbleConfig:i()(i()({},O.bubbleConfig),{},{show:n})}))})}}}),(0,A.jsx)(C.Z,{name:"showLang",width:"xl",tooltip:se.formatMessage({id:"channel.web.enable.multilang.tooltip"}),label:se.formatMessage({id:"channel.web.enable.multilang"}),fieldProps:{checked:G,onChange:function(e){var n=e.target.checked;K(n),n||ce("zh-cn")}}}),G&&(0,A.jsx)(x.Z,{name:"language",width:"md",label:se.formatMessage({id:"channel.web.select.language"}),options:[{label:se.formatMessage({id:"channel.web.lang.zh_cn"}),value:"zh-cn"},{label:se.formatMessage({id:"channel.web.lang.zh_tw"}),value:"zh-tw"},{label:se.formatMessage({id:"channel.web.lang.en"}),value:"en"}],fieldProps:{onChange:function(e){return ce(e)}}}),(0,A.jsx)(C.Z,{name:"showTheme",width:"xl",tooltip:se.formatMessage({id:"channel.web.enable.theme.tooltip"}),label:se.formatMessage({id:"channel.web.enable.theme"}),fieldProps:{checked:ne,onChange:function(e){var n=e.target.checked;te(n),n||ue("system")}}}),ne&&(0,A.jsx)(x.Z,{name:"theme",width:"md",label:se.formatMessage({id:"channel.web.theme.select"}),options:[{label:se.formatMessage({id:"channel.web.theme.follow.system"}),value:"system"},{label:se.formatMessage({id:"channel.web.theme.light"}),value:"light"},{label:se.formatMessage({id:"channel.web.theme.dark"}),value:"dark"}],fieldProps:{value:de,onChange:ue}}),(0,A.jsx)(y.Z,{name:"configText",width:"xl",label:se.formatMessage({id:"channel.web.code.embed"}),tooltip:se.formatMessage({id:"channel.web.code.embed.desc"}),fieldProps:{autoSize:{minRows:15,maxRows:25},readOnly:!0}}),(0,A.jsxs)(h.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(l.Z,{}),onClick:function(){var e=W.getFieldValue("configText");navigator.clipboard.writeText(e).then((function(){T.yw.success(se.formatMessage({id:"channel.web.copy.success"}))})).catch((function(){T.yw.error(se.formatMessage({id:"channel.web.copy.error"}))}))},children:se.formatMessage({id:"channel.web.copy.code"})}),(0,A.jsx)(b.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:se.formatMessage({id:"channel.web.show.chat"})}),(0,A.jsx)(b.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:se.formatMessage({id:"channel.web.hide.chat"})})]}),(0,A.jsx)(y.Z,{name:"codeFullUrl",width:"xl",label:se.formatMessage({id:"channel.web.code.fullscreen"}),tooltip:se.formatMessage({id:"channel.web.code.fullscreen.desc"}),fieldProps:{autoSize:{minRows:2,maxRows:5},readOnly:!0}}),(0,A.jsxs)(h.Z,{direction:"horizontal",style:{width:"100%",marginBottom:10},children:[(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(l.Z,{}),onClick:function(){navigator.clipboard.writeText(ke).then((function(){T.yw.success(se.formatMessage({id:"channel.web.fullscreen.copy.success"}))})).catch((function(){T.yw.error(se.formatMessage({id:"channel.web.copy.error"}))}))},children:se.formatMessage({id:"channel.web.copy.fullscreen"})}),(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(r.Z,{}),onClick:function(){window.open(ke)},children:se.formatMessage({id:"channel.web.open.fullscreen"})}),(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(d.Z,{}),onClick:function(){return Ze("full")},children:se.formatMessage({id:"channel.web.generate.qrcode",defaultMessage:"ÁîüÊàê‰∫åÁª¥Á†Å"})})]}),(0,A.jsx)(y.Z,{name:"codeFrameUrl",width:"xl",label:se.formatMessage({id:"channel.web.code.frame"}),tooltip:se.formatMessage({id:"channel.web.code.frame.desc"}),fieldProps:{autoSize:{minRows:2,maxRows:5},readOnly:!0}}),(0,A.jsxs)(h.Z,{direction:"horizontal",style:{width:"100%"},children:[(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(l.Z,{}),onClick:function(){var e=W.getFieldValue("codeFrameUrl");navigator.clipboard.writeText(e).then((function(){T.yw.success(se.formatMessage({id:"channel.web.frame.copy.success"}))})).catch((function(){T.yw.error(se.formatMessage({id:"channel.web.copy.error"}))}))},children:se.formatMessage({id:"channel.web.copy.frame"})}),(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(r.Z,{}),onClick:function(){window.open(Re)},children:se.formatMessage({id:"channel.web.open.frame"})}),(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(d.Z,{}),onClick:function(){return Ze("frame")},children:se.formatMessage({id:"channel.web.generate.qrcode",defaultMessage:"ÁîüÊàê‰∫åÁª¥Á†Å"})})]})]}),(0,A.jsx)(m.Z,{title:se.formatMessage({id:"channel.web.qrcode.title",defaultMessage:"ÂÆ¢Êúç‰∫åÁª¥Á†Å"}),open:be,onCancel:function(){return me(!1)},footer:[(0,A.jsx)(b.ZP,{onClick:function(){return me(!1)},children:se.formatMessage({id:"common.close",defaultMessage:"ÂÖ≥Èó≠"})},"close"),(0,A.jsx)(b.ZP,{type:"primary",icon:(0,A.jsx)(u.Z,{}),onClick:function(){var e,n=null===(e=document.getElementById("bytedesk-qrcode-canvas"))||void 0===e?void 0:e.querySelector("canvas");if(n){var t=n.toDataURL(),o=document.createElement("a");o.download="bytedesk-".concat(ve,"-qrcode.png"),o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),T.yw.success(se.formatMessage({id:"channel.web.qrcode.download.success"}))}},children:se.formatMessage({id:"channel.web.qrcode.download",defaultMessage:"‰∏ãËΩΩ‰∫åÁª¥Á†Å"})},"download")],width:400,centered:!0,children:(0,A.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},id:"bytedesk-qrcode-canvas",children:[(0,A.jsx)(g.Z,{value:"full"===ve?ke:Re,size:280,style:{margin:"0 auto"},errorLevel:"H"}),(0,A.jsx)("div",{style:{marginTop:10},children:se.formatMessage({id:"channel.web.qrcode.scan",defaultMessage:"Êâ´Êèè‰∫åÁª¥Á†ÅÂí®ËØ¢ÂÆ¢Êúç"})})]})})]})})},66310:function(e,n,t){t.d(n,{V:function(){return s}});var o=t(73193),i=t.n(o),a=t(76711),c=t.n(a),l=t(55735),r=t(44435),d=t(83642),u=t(83890),s=(0,r.Ue)()((0,d.mW)((0,d.tJ)((0,u.n)((function(e,n){return{robotResult:{data:{content:[]}},currentRobot:{uid:"",nickname:""},insertRobot:function(n){e((function(e){e.robotResult.data.content.unshift(n)}))},setRobotResult:function(t){e({robotResult:t});var o,i=n().currentRobot;""!==i.uid&&void 0!==i||(null===(o=t.data)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.length)>0&&e({currentRobot:t.data.content[0]})},setCurrentRobot:function(t){var o=n().robotResult.data.content,a=o.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var l=[].concat(c()(o.slice(0,a)),[t],c()(o.slice(a+1))),r=i()(i()({},n().robotResult),{},{data:{content:l}});e({robotResult:r,currentRobot:t})}else console.warn("Robot with the specified uid not found."),e({currentRobot:t})},deleteCurrentRobot:function(t){var o=n().robotResult.data.content,a=o.findIndex((function(e){return e.uid===t}));-1!==a?e({robotResult:i()(i()({},n().robotResult),{},{data:{content:[].concat(c()(o.slice(0,a)),c()(o.slice(a+1)))}})}):console.warn("Robot not found in cache:",t),n().currentRobot.uid===t&&e({currentRobot:{uid:""}})},deleteRobotCache:function(){return e({},!0)}}})),{name:l.Eis})))}}]);