"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[530],{45067:function(e,t,r){r.d(t,{Lp:function(){return h},Pn:function(){return x},c5:function(){return M},ln:function(){return f},p:function(){return c}});var a=r(90819),n=r.n(a),s=r(73193),o=r.n(s),i=r(89933),u=r.n(i),d=r(94976),l=r(4628);function c(e){return p.apply(this,arguments)}function p(){return(p=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/tag/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/tag/create",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/tag/update",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/tag/delete",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return b.apply(this,arguments)}function b(){return(b=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/tag/delete/all",{method:"POST",data:o()(o()({},t),{},{channel:d.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},32428:function(e,t,r){r.d(t,{EG:function(){return p},fk:function(){return l},l8:function(){return g}});var a=r(90819),n=r.n(a),s=r(73193),o=r.n(s),i=r(89933),u=r.n(i),d=r(4628);function l(e){return c.apply(this,arguments)}function c(){return(c=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/update/tagList",{method:"POST",data:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=u()(n()().mark((function e(t){return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/thread/delete",{method:"POST",data:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},10530:function(e,t,r){r.d(t,{Z:function(){return B}});var a=r(84176),n=r.n(a),s=r(73193),o=r.n(s),i=r(86222),u=r.n(i),d=r(90819),l=r.n(d),c=r(89933),p=r.n(c),f=r(45332),g=r.n(f),h=r(43388),m=r(32428),x=r(74171),v=r(94976),M=r(58620),b=r(54881),y=r(11090),k=r(2484),w=r(44565),j=r(4628),S=r(27729),F=r(90581),Z=r(43275),T=r(28508),I=r(69533),C=r(44194),L=r(16658),P=r(69705),q=r(30857),N=r(30310),A=r(69174),E=r(45067),U=r(88722),O=r(31549),D=function(e){var t=e.open,r=e.onClose,a=e.onSubmit,n=e.thread,s=e.orgUid,o=(0,j.useIntl)(),i=(0,U.Z)().translateString,u=P.Z.useForm(),d=g()(u,1)[0],c=(0,C.useState)([]),f=g()(c,2),x=f[0],M=f[1],b=(0,C.useState)(!1),y=g()(b,2),k=y[0],w=y[1],S=(0,C.useMemo)((function(){var e;return 1===(null==n||null===(e=n.tagList)||void 0===e?void 0:e.length)&&""===n.tagList[0]?[]:(null==n?void 0:n.tagList)||[]}),[null==n?void 0:n.tagList]);(0,C.useEffect)((function(){t&&s&&F()}),[t,s]),(0,C.useEffect)((function(){t&&n&&d.setFieldsValue({tagList:S})}),[t,n,S,d]);var F=function(){var e=p()(l()().mark((function e(){var t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.p)({orgUid:s,type:v.bDv});case 3:200===(t=e.sent).code?M((null==t?void 0:t.data.content)||[]):h.yw.error(t.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching tags:",e.t0),h.yw.error(o.formatMessage({id:"fetch.tags.error"}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=p()(l()().mark((function e(){var t,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,w(!0),e.next=6,d.validateFields();case 6:return t=e.sent,e.next=9,(0,m.EG)({uid:n.uid,tagList:t.tagList||[],orgUid:n.orgUid});case 9:200===(s=e.sent).code?(h.yw.success(o.formatMessage({id:"save.success",defaultMessage:"保存成功"})),a(),r()):h.yw.error(s.message||o.formatMessage({id:"save.error",defaultMessage:"保存失败"})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Validation failed:",e.t0),h.yw.error(o.formatMessage({id:"save.error",defaultMessage:"保存失败"}));case 17:return e.prev=17,w(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,13,17,20]])})));return function(){return e.apply(this,arguments)}}();return(0,O.jsx)(q.Z,{title:o.formatMessage({id:"edit.thread",defaultMessage:"编辑会话"}),placement:"right",onClose:r,open:t,width:400,extra:(0,O.jsxs)(N.Z,{children:[(0,O.jsx)(I.ZP,{onClick:r,children:o.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,O.jsx)(I.ZP,{type:"primary",onClick:Z,loading:k,children:o.formatMessage({id:"ok",defaultMessage:"确定"})})]}),children:(0,O.jsx)(P.Z,{form:d,layout:"vertical",initialValues:{tagList:S},children:(0,O.jsx)(P.Z.Item,{name:"tagList",label:o.formatMessage({id:"tags",defaultMessage:"标签"}),rules:[{type:"array"}],children:(0,O.jsx)(A.Z,{mode:"multiple",allowClear:!0,showSearch:!0,placeholder:o.formatMessage({id:"select.tags",defaultMessage:"请选择标签"}),style:{width:"100%"},options:x.map((function(e){return{label:i(e.name),value:e.name}})),filterOption:function(e,t){var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())}})})})})},R=r(85977),z=r(67242),G=["current","pageSize"],B=function(e){var t,r,a,s,i,d,c,f,P=e.type,q=e.superUser,N=(0,j.useIntl)(),A=(0,C.useRef)(),E=(0,C.useState)(1),U=g()(E,2),B=U[0],J=U[1],V=(0,C.useState)(10),X=g()(V,2),H=X[0],K=X[1],Q=(0,x.u)((function(e){return e.currentOrg})),Y=S.Z.useModal(),W=g()(Y,2),$=(W[0],W[1]),_=(0,C.useState)([]),ee=g()(_,2),te=ee[0],re=ee[1],ae=(0,C.useState)([]),ne=g()(ae,2),se=ne[0],oe=ne[1],ie=(0,C.useState)(0),ue=g()(ie,2),de=ue[0],le=ue[1],ce=(0,C.useState)({}),pe=g()(ce,2),fe=pe[0],ge=pe[1],he=(0,C.useState)(!1),me=g()(he,2),xe=me[0],ve=me[1],Me=(0,C.useState)(null),be=g()(Me,2),ye=be[0],ke=be[1],we=(0,j.useAccess)(),je=(0,C.useMemo)((function(){var e;return null==we||null===(e=we.getModulePermission)||void 0===e?void 0:e.call(we,R.MY.THREAD)}),[we]),Se=null!==(t=null==je||null===(r=je.canRead)||void 0===r?void 0:r.call(je))&&void 0!==t&&t,Fe=null!==(a=null==je||null===(s=je.canExport)||void 0===s?void 0:s.call(je))&&void 0!==a&&a,Ze=null!==(i=null==je||null===(d=je.canUpdate)||void 0===d?void 0:d.call(je))&&void 0!==i&&i,Te=null!==(c=null==je||null===(f=je.canDelete)||void 0===f?void 0:f.call(je))&&void 0!==c&&c,Ie=function(e,t){h.yw.warning(N.formatMessage({id:e,defaultMessage:t}))},Ce=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left",tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.index.tooltip"})},{title:(0,O.jsx)(j.FormattedMessage,{id:"uid",defaultMessage:"Uid"}),dataIndex:"uid",hideInSearch:!0,ellipsis:!0,fixed:"left",tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.uid.tooltip"})},{title:(0,O.jsx)(j.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"userNickname",copyable:!0,ellipsis:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.userNickname.tooltip"}),render:function(e,t){var r;return(0,O.jsx)(O.Fragment,{children:null==t||null===(r=t.user)||void 0===r?void 0:r.nickname})}},{title:(0,O.jsx)(j.FormattedMessage,{id:"queue.member.agent",defaultMessage:"Nickname"}),dataIndex:"agentNickname",copyable:!0,ellipsis:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.agentNickname.tooltip"}),render:function(e,t){var r,a;return(0,O.jsx)(O.Fragment,{children:null!=t&&null!==(r=t.agentProtobuf)&&void 0!==r&&r.nickname?null==t||null===(a=t.agentProtobuf)||void 0===a?void 0:a.nickname:"无"})}},{title:(0,O.jsx)(j.FormattedMessage,{id:"queue.member.robot",defaultMessage:"robotNickname"}),dataIndex:"robotNickname",copyable:!0,ellipsis:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.robotNickname.tooltip"}),render:function(e,t){var r,a;return(0,O.jsx)(O.Fragment,{children:null!=t&&null!==(r=t.robotProtobuf)&&void 0!==r&&r.nickname?null==t||null===(a=t.robotProtobuf)||void 0===a?void 0:a.nickname:"无"})}},{title:(0,O.jsx)(j.FormattedMessage,{id:"queue.member.workgroup",defaultMessage:"workgroupNickname"}),dataIndex:"workgroupNickname",copyable:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.workgroupNickname.tooltip"}),render:function(e,t){var r,a;return(0,O.jsx)(O.Fragment,{children:null!=t&&null!==(r=t.workgroupProtobuf)&&void 0!==r&&r.nickname?null==t||null===(a=t.workgroupProtobuf)||void 0===a?void 0:a.nickname:"无"})}},{title:(0,O.jsx)(j.FormattedMessage,{id:"state",defaultMessage:"state"}),dataIndex:"status",copyable:!0,hideInSearch:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.status.tooltip"}),render:function(e,t){switch(null==t?void 0:t.status){case v.ach:return(0,O.jsx)(j.FormattedMessage,{id:"thread.process.status.new"});case v.j0C:return(0,O.jsx)(j.FormattedMessage,{id:"thread.process.status.roboting"});case v.Q7C:return(0,O.jsx)(j.FormattedMessage,{id:"thread.process.status.offline"});case v.v1N:return(0,O.jsx)(j.FormattedMessage,{id:"thread.process.status.queuing"});case v.hl2:return(0,O.jsx)(j.FormattedMessage,{id:"thread.process.status.chatting"});case v.V1n:return(0,O.jsx)(j.FormattedMessage,{id:"thread.process.status.closed"});default:return(0,O.jsx)(j.FormattedMessage,{id:"queue.member.status.unknown"})}}},{title:(0,O.jsx)(j.FormattedMessage,{id:"channel"}),dataIndex:"channel",width:120,copyable:!0,hideInSearch:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.channel.tooltip"}),render:function(e,t){return(0,L.YG)(t.channel)}},{title:(0,O.jsx)(j.FormattedMessage,{id:"thread.tagList",defaultMessage:"Tag List"}),dataIndex:"tagList",hideInSearch:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.tagList.tooltip"}),render:function(e,t){var r;return null==t||null===(r=t.tagList)||void 0===r?void 0:r.map((function(e,t){return(0,O.jsx)(F.Z,{color:"blue",style:{marginRight:4},children:e},t)}))}},{title:(0,O.jsx)(j.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180},{title:(0,O.jsx)(j.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:(0,O.jsx)(j.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",copyable:!0,hideInTable:!0,hideInSearch:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.type.tooltip"})},{title:(0,O.jsx)(j.FormattedMessage,{id:"topic",defaultMessage:"Topic"}),dataIndex:"topic",ellipsis:!0,copyable:!0,hideInTable:!0,hideInSearch:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.topic.tooltip"})},{title:(0,O.jsx)(j.FormattedMessage,{id:"owner",defaultMessage:"Owner"}),dataIndex:"owner",hideInTable:!0,hideInSearch:!0,tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.owner.tooltip"}),render:function(e,t){var r;return(0,O.jsx)(O.Fragment,{children:null==t||null===(r=t.owner)||void 0===r?void 0:r.nickname})}}],Le=function(){var e=p()(l()().mark((function e(t){var r,a;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=3;break}return Ie("thread.permission.delete.denied","无权限：删除会话"),e.abrupt("return");case 3:return z.Z.debug("handleDeleteConfirm",t),h.yw.loading(N.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),e.prev=5,e.next=8,(0,m.l8)({uid:t.uid});case 8:r=e.sent,h.yw.destroy(),200===r.code?(h.yw.success(N.formatMessage({id:"delete.success",defaultMessage:"Delete Success"})),null==A||null===(a=A.current)||void 0===a||a.reload()):h.yw.error(r.message||N.formatMessage({id:"delete.error",defaultMessage:"Delete Error"})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),h.yw.destroy(),h.yw.error(N.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),Pe=[].concat(Ce,[{title:N.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:150,fixed:"right",tooltip:(0,O.jsx)(j.FormattedMessage,{id:"thread.actions.tooltip"}),render:function(e,t,r,a){return[(0,O.jsx)("a",{onClick:function(){!function(e){var t;z.Z.debug("handleShowChatHistory",e);var r={chatConfig:{org:null==e?void 0:e.orgUid,t:v.CCt,sid:null==e?void 0:e.uid}};null===(t=window.bytedesk)||void 0===t||t.showChat(r)}(t)},children:N.formatMessage({id:"view",defaultMessage:"View"})},"editable"),Ze?(0,O.jsx)("a",{style:{marginLeft:8},onClick:function(){ke(t),ve(!0)},children:N.formatMessage({id:"edit",defaultMessage:"编辑"})},"edit"):null,Te?(0,O.jsx)(Z.Z,{title:N.formatMessage({id:"deleteTip"}),description:"".concat(N.formatMessage({id:"deleteAffirm"}),"【").concat(null==t?void 0:t.uid,"】？"),onConfirm:function(){return Le(t)},okText:N.formatMessage({id:"ok"}),cancelText:N.formatMessage({id:"cancel"}),children:(0,O.jsx)("a",{style:{color:"red",marginLeft:8},children:N.formatMessage({id:"delete",defaultMessage:"删除"})})},"delete"):null]}}]),qe=function(){var e=p()(l()().mark((function e(){var t,r,a,n,s,o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=3;break}return Ie("thread.permission.delete.denied","无权限：批量删除会话"),e.abrupt("return");case 3:if(0!==se.length){e.next=6;break}return h.yw.warning(N.formatMessage({id:"batch.delete.noselection",defaultMessage:"Please select items to delete"})),e.abrupt("return");case 6:h.yw.loading(N.formatMessage({id:"deleting",defaultMessage:"Deleting..."})),r=0,a=0,n=u()(se),e.prev=10,n.s();case 12:if((s=n.n()).done){e.next=26;break}return o=s.value,e.prev=14,e.next=17,(0,m.l8)({uid:o.uid});case 17:200===e.sent.code?r++:a++,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(14),a++;case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(10),n.e(e.t1);case 31:return e.prev=31,n.f(),e.finish(31);case 34:h.yw.destroy(),0===a?h.yw.success(N.formatMessage({id:"batch.delete.success",defaultMessage:"Successfully deleted {count} items"},{count:r})):h.yw.warning(N.formatMessage({id:"batch.delete.partial",defaultMessage:"Deleted {success} items, failed to delete {fail} items"},{success:r,fail:a})),re([]),oe([]),null===(t=A.current)||void 0===t||t.reloadAndRest();case 39:case"end":return e.stop()}}),e,null,[[10,28,31,34],[14,21]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=p()(l()().mark((function e(t,r,a){var n,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe){e.next=3;break}return Ie("thread.permission.export.denied","无权限：导出会话"),e.abrupt("return");case 3:z.Z.debug("handleExportExcel",t,r,a),n=localStorage.getItem(v.LA8),s=o()({componentType:P,orgUid:(null==Q?void 0:Q.uid)||"",accessToken:n||"",exportType:t},fe),"current"===t?(s.pageNumber=String(B-1),s.pageSize=String(H)):"all"===t?(s.pageNumber="0",s.pageSize="1000"):"range"===t&&void 0!==r&&void 0!==a&&(s.pageNumber=String(r),s.pageSize=String(a)),window.open((0,M.kG)()+"/api/v1/thread/export?"+new URLSearchParams(s).toString());case 8:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),Ae=function(e){for(var t=[],r=1e3,a=Math.ceil(e/r),n=function(){var a=s,n=s*r+1,o=Math.min((s+1)*r,e);t.push({key:"export-".concat(s),label:"".concat(n,"-").concat(o," (").concat(o-n+1,"条)"),onClick:function(){return Ne("range",a,r)}})},s=0;s<a;s++)n();return t},Ee={selectedRowKeys:te,onChange:function(e,t){re(e),oe(t)}};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w.Z,{columns:Pe,actionRef:A,cardBordered:!0,rowSelection:Ee,scroll:{x:"max-content"},request:function(){var e=p()(l()().mark((function e(t,r,a){var s,i,u,d,c,p,f,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Se){e.next=4;break}return Ie("thread.permission.read.denied","无权限：查看会话"),le(0),e.abrupt("return",{data:[],success:!0,total:0});case 4:return z.Z.debug("request:",t,r,a),s=t.current,i=t.pageSize,u=n()(t,G),J(s),K(i),ge(u),d=void 0,c=void 0,r&&Object.keys(r).length>0&&(p=Object.keys(r)[0],d=p,c="ascend"===r[p]?"ascend":"descend"),f=o()(o()({pageNumber:s-1,pageSize:i,componentType:P,orgUid:null==Q?void 0:Q.uid,mergeByTopic:!1,superUser:q},u),{},{sortBy:d,sortDirection:c}),e.next=15,(0,m.fk)(f);case 15:return g=e.sent,z.Z.debug("getAllThreads response:",g,f),200===g.code?le(null==g?void 0:g.data.totalElements):h.yw.error(g.message),e.abrupt("return",{data:null==g?void 0:g.data.content,success:!0,total:null==g?void 0:g.data.totalElements});case 19:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){z.Z.debug("page:",e)}},dateFormatter:"string",headerTitle:N.formatMessage({id:"thread",defaultMessage:"Thread"}),toolBarRender:function(){return function(){var e=[],t=[];Te&&te.length>0&&t.push({key:"batchDelete",icon:(0,O.jsx)(b.Z,{}),danger:!0,label:N.formatMessage({id:"batch.delete"})+" (".concat(te.length,")"),onClick:function(){S.Z.confirm({title:N.formatMessage({id:"batch.deleteTip"}),content:"".concat(N.formatMessage({id:"batch.deleteAffirm"})," ").concat(te.length," ").concat(N.formatMessage({id:"items"}),"?"),onOk:qe,okText:N.formatMessage({id:"ok"}),cancelText:N.formatMessage({id:"cancel"})})}});var r=[{key:"export-current",icon:(0,O.jsx)(y.Z,{}),label:N.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return Ne("current")}}];return de>0&&(de<=1e3?r.push({key:"export-all",icon:(0,O.jsx)(y.Z,{}),label:N.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(de,"条)"),onClick:function(){return Ne("all")}}):r.push({key:"export-range",icon:(0,O.jsx)(y.Z,{}),label:N.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(de,"条)"),children:Ae(de)})),Fe&&e.push((0,O.jsx)(T.Z,{menu:{items:r},placement:"bottom",children:(0,O.jsxs)(I.ZP,{icon:(0,O.jsx)(y.Z,{}),type:"primary",children:[N.formatMessage({id:"export",defaultMessage:"Export"}),(0,O.jsx)(k.Z,{})]},"button")},"export")),t.length>0&&e.push((0,O.jsx)(T.Z,{menu:{items:t},placement:"bottom",children:(0,O.jsxs)(I.ZP,{type:te.length>0?"primary":"default",danger:te.length>0,children:[te.length>0?N.formatMessage({id:"batch.operations",defaultMessage:"批量操作"})+" (".concat(te.length,")"):N.formatMessage({id:"more.operations",defaultMessage:"更多操作"}),(0,O.jsx)(k.Z,{})]})},"batchOperations")),e}()}}),(0,O.jsx)(D,{open:xe,onClose:function(){ve(!1),ke(null)},onSubmit:function(){var e;null===(e=A.current)||void 0===e||e.reload()},thread:ye,orgUid:(null==ye?void 0:ye.orgUid)||(null==Q?void 0:Q.uid)}),$]})}}}]);