"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185],{17208:function(e,t,s){s.d(t,{Kq:function(){return u},RL:function(){return m}});var i=s(90819),r=s.n(i),a=s(73193),n=s.n(a),o=s(89933),d=s.n(o),l=s(55735),c=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=d()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/create",{method:"POST",data:n()(n()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=d()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/update",{method:"POST",data:n()(n()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},50528:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var i=s(45332),r=s.n(i),a=s(40612),n=s(55735),o=s(65461),d=s(30921),l=s(44194),c=s(90819),u=s.n(c),x=s(89933),m=s.n(x),f=s(98123),g=s(44781),v=s(62673),j=s(3849),p=s(67402),h=s(88996),Z=s(75365),y=s(88201),M=s(5602),w=s(59485),k=s(7875),b=s(61107),F=s(80556),T=s(58791),S=s(58368),C=s(59145),R=s(48004),O=s(93689),Y=s(429),I=s(27995),A=s(24429),D=s(34545),P=s(25640),q=s(52294),E=s(86803),U=s(1902),W=s(95490),z=s(24170),H=s(76750),V=s(72614),B=s(28977),G=s.n(B),L=s(73193),N=s.n(L);function K(e){return $.apply(this,arguments)}function $(){return($=m()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/service/statistic/query/date",{method:"GET",params:N()(N()({},t),{},{client:n.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=s(32327),J=s(44521),Q=s(31549),X=_.Z.Title,ee=f.default.RangePicker,te=g.Z.Option,se=function(){var e,t,s=(0,d.useIntl)(),i=(0,H.Z)().translateStringTranct,o=(0,l.useState)(G()().startOf("day")),c=r()(o,2),x=c[0],f=c[1],B=(0,l.useState)(G()().endOf("day")),L=r()(B,2),N=L[0],$=L[1],_=(0,l.useState)("today"),se=r()(_,2),ie=se[0],re=se[1],ae=(0,l.useState)(n.AOk),ne=r()(ae,2),oe=ne[0],de=ne[1],le=(0,l.useState)(),ce=r()(le,2),ue=ce[0],xe=ce[1],me=(0,l.useState)(),fe=r()(me,2),ge=fe[0],ve=fe[1],je=(0,a.u)((function(e){return e.currentOrg})),pe=(0,U.E)((function(e){return e})),he=pe.agentResult,Ze=pe.setAgentResult,ye=(0,W.$)((function(e){return e})),Me=ye.workgroupResult,we=ye.setWorkgroupResult,ke=(0,l.useState)(),be=r()(ke,2),Fe=be[0],Te=be[1],Se=(0,l.useState)(n.OwA),Ce=r()(Se,2),Re=Ce[0],Oe=Ce[1],Ye=(0,l.useState)(!1),Ie=r()(Ye,2),Ae=(Ie[0],Ie[1]),De=[{label:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}],Pe=(s.formatMessage({id:"service.statistic.status.online"}),s.formatMessage({id:"service.statistic.status.busy"}),s.formatMessage({id:"service.statistic.status.away"}),s.formatMessage({id:"service.statistic.status.offline"}),[{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.agent"}),dataIndex:"name",key:"name"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.onlineTime"}),dataIndex:"onlineTime",key:"onlineTime"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.sessionCount"}),dataIndex:"sessionCount",key:"sessionCount"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.avgResponseTime"}),dataIndex:"avgResponseTime",key:"avgResponseTime"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.avgSessionTime"}),dataIndex:"avgSessionTime",key:"avgSessionTime"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.satisfaction"}),dataIndex:"satisfaction",key:"satisfaction"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.workingHours"}),dataIndex:"workingHours",key:"workingHours"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.transferRate"}),dataIndex:"transferRate",key:"transferRate"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.firstResolutionRate"}),dataIndex:"firstResolutionRate",key:"firstResolutionRate"},{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.table.overdueCount"}),dataIndex:"overdueCount",key:"overdueCount"}]);(0,l.useEffect)((function(){if("custom"===ie)f(x),$(N),Oe(n.dd4);else{var e=G()();"today"===ie?(f(e),$(e),Oe(n.OwA)):"yesterday"===ie?(f(e.subtract(1,"day")),$(e.subtract(1,"day")),Oe(n.OwA)):"week"===ie?(f(e.startOf("week")),$(e.endOf("week")),Oe(n.dd4)):"lastWeek"===ie?(f(e.subtract(1,"week").startOf("week")),$(e.subtract(1,"week").endOf("week")),Oe(n.dd4)):"month"===ie&&(f(e.startOf("month")),$(e.endOf("month")),Oe(n.dd4))}}),[ie]);var qe=function(){var e=m()(u()().mark((function e(){var t,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==je?void 0:je.uid},e.next=4,(0,V.u7)(t);case 4:s=e.sent,console.log("fetchAllWorkgroups: ",s),200===s.code?(E.yw.destroy(),we(s),s.data.content.length>0&&ve(s.data.content[0].uid)):(E.yw.destroy(),E.yw.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=m()(u()().mark((function e(){var t,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==je?void 0:je.uid},e.next=4,(0,z._t)(t);case 4:s=e.sent,console.log("fetchAllAgents: ",s),200===s.code?(E.yw.destroy(),Ze(s),s.data.content.length>0&&xe(s.data.content[0].uid)):(E.yw.destroy(),E.yw.error(i(s.message))),console.log("queryAllAgents response",s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=m()(u()().mark((function e(){var t,i;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ae(!0),e.prev=1,E.yw.loading("loading"),t={type:oe,statisticStartTime:null==x?void 0:x.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==N?void 0:N.format("YYYY-MM-DD 23:59:59"),workgroupUid:ge,agentUid:ue,orgUid:null==je?void 0:je.uid},e.next=6,K(t);case 6:i=e.sent,console.log("queryStatisticServicesByOrg response",i,t),200===i.code?(E.yw.destroy(),Te(i.data)):(E.yw.destroy(),E.yw.error(i.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),E.yw.error(s.formatMessage({id:"ticket.message.operation.failed"}));case 14:return e.prev=14,Ae(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=m()(u()().mark((function e(){var t,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.yw.loading("loading"),t={type:oe,statisticStartTime:null==x?void 0:x.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==N?void 0:N.format("YYYY-MM-DD 23:59:59"),workgroupUid:ge,agentUid:ue,orgUid:null==je?void 0:je.uid},e.next=4,K(t);case 4:s=e.sent,console.log("queryStatisticServicesByOrg response",s,t),200===s.code?E.yw.destroy():(E.yw.destroy(),E.yw.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){qe(),Ee()}),[]),(0,l.useEffect)((function(){Ue()}),[oe,ue,ge]),(0,l.useEffect)((function(){We()}),[Re,oe,ue,ge]),(0,l.useEffect)((function(){Ue()}),[x,N]),(0,Q.jsxs)("div",{style:{padding:16},children:[(0,Q.jsx)(v.Z,{style:{marginBottom:16},children:(0,Q.jsxs)(j.Z,{direction:"vertical",style:{width:"100%"},children:[(0,Q.jsxs)(j.Z,{wrap:!0,children:[(0,Q.jsx)(p.ZP.Group,{value:ie,onChange:function(e){return re(e.target.value)},children:De.map((function(e){return(0,Q.jsx)(p.ZP.Button,{value:e.value,children:e.label},e.value)}))}),"custom"===ie&&(0,Q.jsx)(ee,{value:[x,N],onChange:function(e){f(e[0]),$(e[1])}})]}),(0,Q.jsxs)(j.Z,{wrap:!0,children:[(0,Q.jsxs)(g.Z,{placeholder:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.type"}),style:{width:200},value:oe,onChange:function(e){return de(e)},children:[(0,Q.jsx)(te,{value:n.AOk,children:(0,Q.jsx)(d.FormattedMessage,{id:"i18n.all"})}),(0,Q.jsx)(te,{value:n.pHh,children:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.agent"})}),(0,Q.jsx)(te,{value:n.ti4,children:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.workgroup"})})]}),oe===n.pHh&&(0,Q.jsx)(g.Z,{placeholder:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.agent"}),style:{width:200},value:ue,onChange:function(e){return xe(e)},children:null===(e=he.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(e){return(0,Q.jsx)(te,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),oe===n.ti4&&(0,Q.jsx)(g.Z,{placeholder:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.department"}),style:{width:200},value:ge,onChange:function(e){return ve(e)},children:null===(t=Me.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return(0,Q.jsx)(te,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),(0,Q.jsx)(h.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.export"}),children:(0,Q.jsx)(Z.ZP,{icon:(0,Q.jsx)(b.Z,{}),onClick:function(){var e=localStorage.getItem(n.LA8);window.open((0,J.kG)()+"/api/v1/service/statistic/export?"+new URLSearchParams({type:oe,statisticStartTime:null==x?void 0:x.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==N?void 0:N.format("YYYY-MM-DD 23:59:59"),workgroupUid:ge,agentUid:ue,orgUid:null==je?void 0:je.uid,accessToken:e||""}).toString())},children:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.export"})})}),(0,Q.jsx)(h.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.refresh"}),children:(0,Q.jsx)(Z.ZP,{icon:(0,Q.jsx)(F.Z,{}),onClick:function(){return Ue()},children:(0,Q.jsx)(d.FormattedMessage,{id:"ticket.statistic.filter.refresh"})})}),!1]})]})}),(0,Q.jsxs)(y.Z,{gutter:24,children:[(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.onlineAgentCount"}),value:(null==Fe?void 0:Fe.onlineAgentCount)||0,prefix:(0,Q.jsx)(T.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.offlineAgentCount"}),value:(null==Fe?void 0:Fe.offlineAgentCount)||0,prefix:(0,Q.jsx)(S.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.queuingThreadCount"}),value:(null==Fe?void 0:Fe.queuingThreadCount)||0,prefix:(0,Q.jsx)(T.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.currentThreadCount"}),value:(null==Fe?void 0:Fe.currentThreadCount)||0,prefix:(0,Q.jsx)(C.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.session"})})})})]}),(0,Q.jsxs)(y.Z,{gutter:24,style:{marginTop:24},children:[(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.maxResponseTime"}),value:(null==Fe?void 0:Fe.maxResponseTime)||0,prefix:(0,Q.jsx)(R.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.minResponseTime"}),value:(null==Fe?void 0:Fe.minResponseTime)||0,prefix:(0,Q.jsx)(R.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.avgFirstResponseTime"}),value:(null==Fe?void 0:Fe.avgFirstResponseTime)||0,prefix:(0,Q.jsx)(R.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.avgWaitingTime"}),value:(null==Fe?void 0:Fe.avgWaitingTime)||0,prefix:(0,Q.jsx)(R.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.seconds"})})})})]}),(0,Q.jsxs)(y.Z,{gutter:24,style:{marginTop:24},children:[(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.totalIncomingThreads"}),value:(null==Fe?void 0:Fe.totalIncomingThreads)||0,prefix:(0,Q.jsx)(C.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.acceptedThreadCount"}),value:(null==Fe?void 0:Fe.acceptedThreadCount)||0,prefix:(0,Q.jsx)(O.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.acceptRate"}),value:(null==Fe?void 0:Fe.acceptRate)||0,prefix:(0,Q.jsx)(O.Z,{}),suffix:"%"})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.firstSolveRate"}),value:(null==Fe?void 0:Fe.firstSolveRate)||0,prefix:(0,Q.jsx)(Y.Z,{}),suffix:"%"})})})]}),(0,Q.jsxs)(y.Z,{gutter:24,style:{marginTop:24},children:[(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.robotThreadCount"}),value:(null==Fe?void 0:Fe.robotThreadCount)||0,prefix:(0,Q.jsx)(I.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.robotToHumanCount"}),value:(null==Fe?void 0:Fe.robotToHumanCount)||0,prefix:(0,Q.jsx)(A.Z,{}),suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.robotSolveRate"}),value:(null==Fe?void 0:Fe.robotSolveRate)||0,prefix:(0,Q.jsx)(O.Z,{}),suffix:"%"})})}),(0,Q.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,Q.jsx)(v.Z,{bordered:!1,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.transferRate"}),value:(null==Fe?void 0:Fe.transferRate)||0,prefix:(0,Q.jsx)(D.Z,{}),suffix:"%"})})})]}),(0,Q.jsxs)(v.Z,{style:{marginTop:24},children:[(0,Q.jsx)(X,{level:4,children:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.sessionDuration"})}),(0,Q.jsxs)(y.Z,{gutter:24,children:[(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.duration.within5min"}),value:(null==Fe?void 0:Fe.durationWithin5Min)||0,suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.sessions"})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.duration.within15min"}),value:(null==Fe?void 0:Fe.durationWithin15Min)||0,suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.sessions"})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(w.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.duration.over15min"}),value:(null==Fe?void 0:Fe.durationOver15Min)||0,suffix:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.unit.sessions"})})})]})]}),(0,Q.jsx)(v.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.performance"}),style:{marginTop:24},extra:(0,Q.jsxs)(j.Z,{children:[(0,Q.jsx)(h.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.export.excel"}),children:(0,Q.jsx)(Z.ZP,{icon:(0,Q.jsx)(P.Z,{})})}),(0,Q.jsx)(h.Z,{title:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.export.pdf"}),children:(0,Q.jsx)(Z.ZP,{icon:(0,Q.jsx)(q.Z,{})})})]}),children:(0,Q.jsx)(k.Z,{columns:Pe,dataSource:[],scroll:{x:!0},size:"small",locale:{emptyText:(0,Q.jsx)(d.FormattedMessage,{id:"service.statistic.tips.noData"})}})})]})},ie=s(53530),re=s(52288),ae=s(17208),ne=function(e){var t=e.open,s=e.onClose,i=e.onSuccess,a=(0,d.useIntl)(),n=((0,d.useModel)("@@initialState").initialState||{}).userInfo,o=(0,l.useState)(!1),c=r()(o,2),x=c[0],f=c[1],g=(0,l.useState)(""),v=r()(g,2),j=v[0],p=v[1],h=(0,l.useState)(!1),y=r()(h,2),M=y[0],w=y[1],k=function(){var e=m()(u()().mark((function e(){var t,r,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==j){e.next=3;break}return E.yw.error(a.formatMessage({id:"welcome.message.org.name.required"})),e.abrupt("return");case 3:return f(!0),E.yw.loading(a.formatMessage({id:"welcome.message.org.creating"})),t=null!=n&&n.mobile?null==n?void 0:n.mobile:null==n?void 0:n.email,r={name:j,code:t,logo:"https://www.weiyuai.cn/logo.png",description:j+"description"},e.prev=7,e.next=10,(0,ae.Kq)(r);case 10:200===(o=e.sent).code?(f(!1),E.yw.destroy(),E.yw.success(a.formatMessage({id:"welcome.message.create.success"})),i(o.data),s()):(f(!1),E.yw.destroy(),E.yw.error(a.formatMessage({id:"welcome.message.create.failed"}))),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),f(!1),E.yw.destroy(),E.yw.error(a.formatMessage({id:"welcome.message.create.failed"}));case 19:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();return(0,Q.jsxs)(ie.Z,{title:a.formatMessage({id:"welcome.modal.title"}),closable:!1,open:t,onCancel:function(){E.yw.error(a.formatMessage({id:"welcome.message.org.required"}))},maskClosable:!1,footer:[(0,Q.jsx)(Z.ZP,{type:"primary",onClick:function(){s()},disabled:!0,children:a.formatMessage({id:"welcome.modal.join"})},"join"),(0,Q.jsx)(Z.ZP,{type:"primary",loading:x,onClick:function(){M?k():(w(!0),f(!1))},children:a.formatMessage({id:"welcome.modal.create"})},"create")],children:[(0,Q.jsx)("p",{children:a.formatMessage({id:"welcome.modal.description"})}),M&&(0,Q.jsx)(re.Z,{placeholder:a.formatMessage({id:"welcome.modal.input.placeholder"}),value:j,onChange:function(e){return p(e.target.value)},onPressEnter:k,autoFocus:!0})]})},oe=function(e){var t=e.open,s=e.onClose,i=(0,d.useIntl)(),r=(0,d.useNavigate)(),a=function(){localStorage.setItem("skipVerification","true"),s()};return(0,Q.jsx)(ie.Z,{title:i.formatMessage({id:"welcome.verify.modal.title",defaultMessage:"账号验证提示"}),open:t,onCancel:a,footer:[(0,Q.jsx)(Z.ZP,{onClick:a,children:i.formatMessage({id:"welcome.verify.later",defaultMessage:"稍后验证"})},"later"),(0,Q.jsx)(Z.ZP,{type:"primary",onClick:function(){s(),r("/setting/certification")},children:i.formatMessage({id:"welcome.verify.now",defaultMessage:"立即验证"})},"now")],children:(0,Q.jsx)("p",{children:i.formatMessage({id:"welcome.verify.modal.description",defaultMessage:"您的邮箱和手机号尚未验证，为保障账号安全，建议您尽快完成验证。"})})})},de=s(73589),le=function(){var e=((0,d.useModel)("@@initialState").initialState||{}).userInfo,t=(0,a.u)((function(e){return e.setCurrentOrg})),s=(0,d.useAccess)();s.canDebug&&console.log("Developing canDebug");var i=(0,l.useState)(!1),c=r()(i,2),u=c[0],x=c[1],m=(0,l.useState)(!1),f=r()(m,2),g=f[0],v=f[1];return(0,l.useEffect)((function(){!function(){if(e){if(!e.currentOrganization)return console.log("before initOrganization",e),void(e.platform===n.Ogg&&x(!0));console.log("after initOrganization"),t(e.currentOrganization)}}(),"true"!==localStorage.getItem("skipVerification")&&(!e||e.emailVerified||e.mobileVerified||v(!0)),(0,o.Bc)()&&console.log("weiyuaiSaas")}),[e]),(0,Q.jsxs)("div",{children:[(0,Q.jsx)(d.Access,{accessible:s.canAdmin(),fallback:(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(de.Z,{description:"欢迎"})}),children:(0,Q.jsx)(se,{})}),(0,Q.jsx)(ne,{open:u,onClose:function(){return x(!1)},onSuccess:function(e){t(e),window.location.reload()}}),(0,Q.jsx)(oe,{open:g,onClose:function(){return v(!1)}})]})}}}]);