"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8472],{1238:function(e,t,n){var i=n(90819),s=n.n(i),r=n(89933),o=n.n(r),a=n(45332),l=n.n(a),u=n(74491),d=n(5286),c=n(18877),g=n(3771),f=n(31661),v=n(71865),m=n(36265),p=n(14267),h=n(40845),x=n(2685),b=n(5861),S=n(44194),w=n(73001),y=n(42539),j=n(31549);t.Z=function(e){var t,n,i,r,a=h.A.useForm(),M=l()(a,1)[0],k=(0,b.useIntl)(),C=(0,f.Z)().translateString,Z=(0,v.u)((function(e){return e.currentOrg})),F=(0,S.useState)(),U=l()(F,2),T=U[0],q=U[1],P=(0,S.useState)(),A=l()(P,2),I=A[0],K=A[1],R=(0,S.useState)(),E=l()(R,2),D=E[0],O=E[1],L=(0,S.useState)(""),N=l()(L,2),z=N[0],B=N[1],J=(0,S.useRef)(!1),V=(0,S.useRef)(),W=(0,S.useMemo)((function(){var t;return null!==(t=e.serviceSettings)&&void 0!==t?t:{}}),[e.serviceSettings]),H=(0,S.useMemo)((function(){var e,t;return null!==(e=null!==(t=null==W?void 0:W.draft)&&void 0!==t?t:null==W?void 0:W.live)&&void 0!==e?e:void 0}),[W]),Q=(0,S.useCallback)((function(t){var n;null===(n=e.onServiceSettingsChange)||void 0===n||n.call(e,t)}),[e.onServiceSettingsChange]),G=(0,S.useCallback)((function(e){M.setFieldValue("welcomeTip",e),Q({welcomeTip:e})}),[M,Q]);(0,S.useEffect)((function(){if(null!=Z&&Z.uid&&(V.current!==Z.uid&&(V.current=Z.uid,J.current=!1),!J.current)){J.current=!0;var e=function(){var e=o()(s()().mark((function e(){var t,n,i,r,o,a,l;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(k.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,type:m.QPQ,orgUid:Z.uid},e.next=4,(0,g.AP)(t);case 4:n=e.sent,y.Z.debug("TabServiceWelcome queryKbasesByOrg:",n,t),d.yw.destroy(),200===n.code?(K(n),o=(null==n||null===(i=n.data)||void 0===i?void 0:i.content)||[],a=null==H?void 0:H.welcomeKbUid,(l=a||D||(null===(r=o[0])||void 0===r?void 0:r.uid))&&(O(l),M.setFieldValue("welcomeKbUid",l),a!==l&&Q({welcomeKbUid:l}))):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}}),[null==Z?void 0:Z.uid,k,null==H?void 0:H.welcomeKbUid,D,M,Q]),(0,S.useEffect)((function(){if(null!=Z&&Z.uid&&D){var e=function(){var e=o()(s()().mark((function e(){var t,n;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(k.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:Z.uid,kbUid:D},e.next=4,(0,c.pf)(t);case 4:n=e.sent,y.Z.debug("TabServiceWelcome queryFaqsByOrg:",n,t),d.yw.destroy(),200===n.code?q(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}}),[null==Z?void 0:Z.uid,D,k]),(0,S.useEffect)((function(){if(H){var e=null==H?void 0:H.welcomeFaqs,t=Array.isArray(H.welcomeFaqUids)?H.welcomeFaqUids:Array.isArray(e)?e.map((function(e){return null==e?void 0:e.uid})).filter(Boolean):[];M.setFieldValue("welcomeFaqUids",t)}}),[M,null==T||null===(t=T.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length,null==H?void 0:H.welcomeFaqUids,H]);var Y=(0,S.useCallback)((function(e){O(e),M.setFieldValue("welcomeFaqUids",[]),Q({welcomeKbUid:e,welcomeFaqUids:[]})}),[Q,M]);return(0,S.useEffect)((function(){var e=C(null==H?void 0:H.welcomeTip);void 0!==e&&z!==e&&B(e),null!=H&&H.welcomeKbUid&&(M.setFieldValue("welcomeKbUid",H.welcomeKbUid),D!==H.welcomeKbUid&&O(H.welcomeKbUid))}),[C,null==H?void 0:H.welcomeTip,null==H?void 0:H.welcomeKbUid,z,M,D,null==I||null===(n=I.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length]),(0,j.jsxs)(h.A,{form:M,submitter:!1,style:{marginLeft:"20px"},children:[(0,j.jsx)(h.A.Item,{name:"welcomeTip",label:(0,j.jsxs)("span",{children:[k.formatMessage({id:"agent.settings.welcome.tip"}),(0,j.jsx)(u.Z,{type:"service",keys:["welcomeTip"],live:null==W?void 0:W.live,draft:null==W?void 0:W.draft})]}),tooltip:k.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:k.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,j.jsx)(w.Z,{placeholder:k.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:z,toolbarKeys:(0,p.eD)(),style:{height:"150px",width:"600px"},maxLength:200,onChange:G})}),(0,j.jsx)(x.Z,{name:"welcomeKbUid",width:"md",label:(0,j.jsxs)("span",{children:[k.formatMessage({id:"menu.kbase.select",defaultMessage:"é€‰æ‹©æ¬¢è¿è¯­å¸¸è§é—®é¢˜çŸ¥è¯†åº“"}),(0,j.jsx)(u.Z,{type:"service",keys:["welcomeKbUid"],live:null==W?void 0:W.live,draft:null==W?void 0:W.draft})]}),options:null==I||null===(i=I.data)||void 0===i||null===(i=i.content)||void 0===i?void 0:i.map((function(e){return{label:C(e.name)||e.name,value:e.uid}})),fieldProps:{onChange:function(e){return Y(e)},allowClear:!0,placeholder:(0,j.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}}),(0,j.jsx)(x.Z,{name:"welcomeFaqUids",width:"md",label:(0,j.jsxs)("span",{children:[k.formatMessage({id:"menu.kbase.faq.welcome"}),(0,j.jsx)(u.Z,{type:"service",keys:["welcomeFaqUids"],live:null==W?void 0:W.live,draft:null==W?void 0:W.draft})]}),options:null==T||null===(r=T.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.map((function(e){return{label:C(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,j.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"}),onChange:function(e){return Q({welcomeFaqUids:e})}}})]})}},91327:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var i=n(44194),s=n(73120),r=n(5861),o=n(76711),a=n.n(o),l=n(90819),u=n.n(l),d=n(89933),c=n.n(d),g=n(73193),f=n.n(g),v=n(45332),m=n.n(v),p=n(33154),h=n(2157),x=n(76185),b=n(33122),S=n(92011),w=n(11258),y=n(96082),j=n(95111),M=n(44877),k=n(12201),C=n(88565),Z=n(6430),F=n(12715),U=n(47192),T=n(33551),q=n(86775),P=n(6992),A=n(41881),I=n(91768),K=n(28172),R=n(35911),E=n(90417),D=n(67878),O=n(5286),L=n(14592),N=n(71865),z=n(76071),B=n(74494),J=n(28902),V=n(93458),W=n(61401),H=(n(14368),n(43769),n(74008)),Q=n(20427),G=n(62742),Y=n(1238),_=(n(74491),n(31549)),$=n(12038),X=n(98896),ee=n(42539),te=n(87523),ne="welcome",ie=function(){var e=(0,r.useIntl)(),t=(0,N.u)((function(e){return e.currentOrg})),n=(0,z.Z)().leftSiderStyle,o=(0,B.Z)().isDarkMode,l=(0,i.useState)(!1),d=m()(l,2),g=d[0],v=d[1],ie=(0,i.useState)([]),se=m()(ie,2),re=se[0],oe=se[1],ae=(0,i.useState)(),le=m()(ae,2),ue=le[0],de=le[1],ce=(0,i.useState)(""),ge=m()(ce,2),fe=ge[0],ve=ge[1],me=(0,i.useState)(ne),pe=m()(me,2),he=pe[0],xe=pe[1],be=(0,i.useState)(!1),Se=m()(be,2),we=Se[0],ye=Se[1],je=(0,i.useState)(null),Me=m()(je,2),ke=Me[0],Ce=Me[1],Ze=(0,i.useMemo)((function(){return re.find((function(e){return e.uid===ue}))||null}),[re,ue]),Fe=(0,i.useState)(!1),Ue=m()(Fe,2),Te=Ue[0],qe=Ue[1],Pe=(0,i.useState)(!1),Ae=m()(Pe,2),Ie=Ae[0],Ke=Ae[1],Re=(0,i.useState)(!1),Ee=m()(Re,2),De=Ee[0],Oe=Ee[1],Le=(0,i.useRef)(""),Ne=(0,J.z)((function(e){return{setCurrentRobotSettings:e.setCurrentRobotSettings,currentRobotSettings:e.currentRobotSettings}})),ze=Ne.setCurrentRobotSettings,Be=Ne.currentRobotSettings,Je=(0,i.useMemo)((function(){var e;return null!==(e=null!=Be?Be:Ze)&&void 0!==e?e:null}),[Be,Ze]),Ve=(0,i.useCallback)((function(e){if(Be){var t=Be.draftServiceSettings||Be.serviceSettings||{};ze(f()(f()({},Be),{},{draftServiceSettings:f()(f()({},t),e)}))}}),[Be,ze]),We=(0,i.useCallback)((function(e){if(Be){var t=Be.draftInviteSettings||Be.inviteSettings||{};ze(f()(f()({},Be),{},{draftInviteSettings:f()(f()({},t),e)}))}}),[Be,ze]),He=(0,i.useCallback)((function(e){var t;if(Be){var n=Be.draftToolsSettings||Be.toolsSettings||{};ze(f()(f()({},Be),{},{draftToolsSettings:f()(f()(f()({},n),e),{},{toolConfigs:null!==(t=e.toolConfigs)&&void 0!==t?t:n.toolConfigs})}))}}),[Be,ze]),Qe=(0,i.useMemo)((function(){if(!fe)return re;var e=fe.toLowerCase();return re.filter((function(t){var n=(t.name||t.uid||"").toLowerCase(),i=(t.description||"").toLowerCase();return n.includes(e)||i.includes(e)}))}),[re,fe]),Ge=(0,i.useCallback)(function(){var e=c()(u()().mark((function e(n,i){var s,r,o,a,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.uid){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.prev=3,r=(null!=n?n:"").trim(),o={orgUid:t.uid,pageNumber:0,pageSize:100,searchText:r||void 0},e.next=8,(0,L.VW)(o);case 8:a=e.sent,ee.Z.debug("åŠ è½½æœºå™¨äººé…ç½®æ¨¡æ¿åˆ—è¡¨: ",a,o),l=(null==a||null===(s=a.data)||void 0===s?void 0:s.content)||[],oe(l),!(l.length>0)||ue&&l.some((function(e){return e.uid===ue}))||(de(l[0].uid),null!=i&&i.keepActive||xe(ne));case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,,13,16]])})));return function(t,n){return e.apply(this,arguments)}}(),[null==t?void 0:t.uid,ue]),Ye=(0,i.useCallback)((function(e){Ge(null!=e?e:fe)}),[Ge,fe]);(0,i.useEffect)((function(){Ge(fe)}),[null==t?void 0:t.uid]),(0,i.useEffect)((function(){Ze?(ze(Ze),Le.current=JSON.stringify(null!=Ze?Ze:{}),Oe(!1)):(ze(null),Le.current=JSON.stringify({}),Oe(!1))}),[null==Ze?void 0:Ze.uid]),(0,i.useEffect)((function(){if(Ze)try{var e,t,n=JSON.stringify(null!=Be?Be:{}),i=n!==Le.current;ee.Z.debug("ğŸ” [Dirty Check]",{isDirty:i,selectedUid:null==Ze?void 0:Ze.uid,currentWelcomeTip:(null==Be||null===(e=Be.draftServiceSettings)||void 0===e?void 0:e.welcomeTip)||(null==Be||null===(t=Be.serviceSettings)||void 0===t?void 0:t.welcomeTip),originalLength:Le.current.length,nowLength:n.length}),Oe(i)}catch(e){Oe(!0)}}),[Be,null==Ze?void 0:Ze.uid]);var _e=function(){var n=c()(u()().mark((function n(i){var s,r,o;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=(s=null!=i?i:Ze)&&s.uid){n.next=3;break}return n.abrupt("return");case 3:return r={uid:s.uid,orgUid:null==t?void 0:t.uid,pageNumber:0,pageSize:100},n.next=6,(0,L.r$)(r);case 6:(o=n.sent)&&200===o.code?(O.yw.success(e.formatMessage({id:"common.deleted",defaultMessage:"åˆ é™¤æˆåŠŸ"})),Ge(fe)):O.yw.error((null==o?void 0:o.message)||"åˆ é™¤å¤±è´¥");case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),$e=function(){var n=c()(u()().mark((function n(i,s){var r;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,L.sK)({uid:i,orgUid:null==t?void 0:t.uid,enabled:s});case 3:(r=n.sent)&&200===r.code?(O.yw.success(e.formatMessage({id:s?"common.enabled":"common.disabled",defaultMessage:s?"å·²å¯ç”¨":"å·²åœç”¨"})),Ge(fe)):O.yw.error((null==r?void 0:r.message)||"æ“ä½œå¤±è´¥"),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("åˆ‡æ¢å¯ç”¨çŠ¶æ€å¤±è´¥:",n.t0),O.yw.error("æ“ä½œå¤±è´¥");case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}(),Xe=function(e,t){if(e){var n={};return t.forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n}},et=function(e){if(e){var t=Xe(e,["language","autoPopup","showTopTip","topTip","topTipStart","topTipEnd","showRateBtn","autoInviteRate","inviteRateTip","rateMsgCount","showPreForm","preFormRequired","preForm","inputAssociationEnabled","inputAssociationKbUid","showHistory","showInputAssociation","showCaptcha","welcomeTip","welcomeFaqUids","welcomeKbUid","enableWorkflow","workflowUid","autoCloseMin","autoCloseTip","agentCloseTip","queueTip","leavemsgTip","showRightIframe","rightIframeUrl","showFaqs","faqUids","faqKbUid","showQuickButtons","quickButtonUids","showGuessFaqs","guessFaqUids","showHotFaqs","hotFaqUids","showShortcutFaqs","shortcutFaqUids","relatedQuestionGuide","enableProactiveTrigger","noResponseTimeout","proactiveMessage","maxProactiveCount","proactiveInterval","triggerConditions","proactiveFaqUids","showLogo","validateUntil"]),n=function(n,i){if(void 0===t[n]){var s=null==e?void 0:e[i];if(Array.isArray(s)){var r=s.map((function(e){return null==e?void 0:e.uid})).filter(Boolean);r.length>0&&(t[n]=r)}}};n("welcomeFaqUids","welcomeFaqs"),n("faqUids","faqs"),n("quickButtonUids","quickButtons"),n("guessFaqUids","guessFaqs"),n("hotFaqUids","hotFaqs"),n("shortcutFaqUids","shortcutFaqs"),n("proactiveFaqUids","proactiveFaqs");var i=function(e){if(e)return Xe(e,["smile","image","file","rate","leavemsg","orderSelector","ticket","audio","video","tel","order"])}(e.toolbar);return f()(f()({},t),i?{toolbar:i}:{})}},tt=function(e){if(e)return Xe(e,["name","description","defaultTemplate","show","text","icon","delay","loop","loopDelay","loopCount","messageList","targetedInvite","targetedInviteUrls","smartTrigger","pageStayTriggerSeconds","scrollTrigger","scrollTriggerPerceninviteSettinge","exitIntentTrigger","referrerTrigger","referrerPatterns","deviceTypes","visitorSegmentation","newVisitorMessage","returningVisitorMessage","vipVisitorMessage","inviteStyle","inviteAnimation","abTesting"])},nt=function(e){if(e)return Xe(e,["name","description","color","order"])},it=function(e){if(e)return Xe(e,["name","description","defaultTemplate","enabled","rateDownTagList","maxTagSelection","allowCustomFeedback","maxFeedbackLength","requireFollowup","showThankYouMessage","thankYouMessage","triggerSatisfactionSurvey","markForQualityInspection","offerHumanAgent"])},st=function(e){if(e){var t=Xe(e,["enabled","invocationMode","toolChoice","maxToolInvocations","defaultToolPrompt"]);return e.toolConfigs&&(t.toolConfigs=e.toolConfigs.map((function(e){return Xe(e,["key","name","description","category","icon","enabled","bindingType","beanName","className","methodName","endpoint","inputSchema","outputSchema","systemPrompt","orderIndex","requiresApproval","metadata"])}))),t}},rt=function(){var n=c()(u()().mark((function n(){var i,s,r,o,a,l;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=Ze&&Ze.uid){n.next=3;break}return O.yw.warning(e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})),n.abrupt("return");case 3:return qe(!0),n.prev=4,i=Be&&Be.uid===Ze.uid?Be:Ze,s=function(e,t){return f()(f()({},e||{}),t||{})},r={uid:Ze.uid,orgUid:null==t?void 0:t.uid,name:null==i?void 0:i.name,description:null==i?void 0:i.description,isDefault:null==i?void 0:i.isDefault,enabled:null==i?void 0:i.enabled,serviceSettings:et(s(null==i?void 0:i.serviceSettings,null==i?void 0:i.draftServiceSettings)),inviteSettings:tt(s(null==i?void 0:i.inviteSettings,null==i?void 0:i.draftInviteSettings)),intentionSettings:nt(s(null==i?void 0:i.intentionSettings,null==i?void 0:i.draftIntentionSettings)),rateDownSettings:it(s(null==i?void 0:i.rateDownSettings,null==i?void 0:i.draftRateDownSettings)),toolsSettings:st(s(null==i?void 0:i.toolsSettings,null==i?void 0:i.draftToolsSettings))},n.next=10,(0,L.sK)(r);case 10:o=n.sent,ee.Z.debug("ä¿å­˜æœºå™¨äººé…ç½®æ¨¡æ¿: ",o,r),o&&200===o.code?(O.yw.success(e.formatMessage({id:"common.saved",defaultMessage:"ä¿å­˜æˆåŠŸ"})),Le.current=JSON.stringify(null!==(a=null!==(l=null==o?void 0:o.data)&&void 0!==l?l:i)&&void 0!==a?a:{}),Oe(!1),Ge(fe)):O.yw.error((null==o?void 0:o.message)||"ä¿å­˜å¤±è´¥"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("ä¿å­˜å¤±è´¥:",n.t0),O.yw.error("ä¿å­˜å¤±è´¥");case 19:return n.prev=19,qe(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,15,19,22]])})));return function(){return n.apply(this,arguments)}}(),ot=function(){var n=c()(u()().mark((function n(){var i,s,r;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=Ze&&Ze.uid){n.next=3;break}return O.yw.warning(e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})),n.abrupt("return");case 3:if(Ke(!0),n.prev=4,!De){n.next=8;break}return n.next=8,rt();case 8:return i={uid:Ze.uid,orgUid:null==t?void 0:t.uid},n.next=11,(0,L.KF)(i);case 11:(s=n.sent)&&200===s.code?(O.yw.success(e.formatMessage({id:"common.published",defaultMessage:"å‘å¸ƒæˆåŠŸ"})),Le.current=JSON.stringify(null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{}),Oe(!1),Ge(fe,{keepActive:!0})):O.yw.error((null==s?void 0:s.message)||"å‘å¸ƒå¤±è´¥"),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(4),console.error("å‘å¸ƒå¤±è´¥:",n.t0),O.yw.error("å‘å¸ƒå¤±è´¥");case 19:return n.prev=19,Ke(!1),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,15,19,22]])})));return function(){return n.apply(this,arguments)}}(),at=(0,i.useMemo)((function(){return null!=Ze&&Ze.uid?[{key:"welcome",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(k.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"robot.settings.service.welcome",defaultMessage:"æ¬¢è¿è¯­è®¾ç½®"})]}),children:(0,_.jsx)(Y.Z,{serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},onServiceSettingsChange:Ve})},{key:"tips",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(C.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"robot.settings.service.tips",defaultMessage:"æç¤ºä¿¡æ¯"})]}),children:(0,_.jsx)(G.Z,{variant:"robot",serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},onServiceSettingsChange:Ve})},{key:"service",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(Z.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"robot.settings.service",defaultMessage:"æœåŠ¡è®¾ç½®"})]}),children:(0,_.jsx)(Q.Z,{variant:"robot",serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},onServiceSettingsChange:Ve})}].concat(a()((0,te.OJ)()?[{key:"inputAssociation",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(F.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"robot.settings.input.association",defaultMessage:"è¾“å…¥è”æƒ³"})]}),children:(0,_.jsx)(V.Z,{variant:"robot",serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},onServiceSettingsChange:Ve})}]:[]),a()((0,te.OJ)()?[{key:"rate",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(U.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"rate",defaultMessage:"Rate"})]}),children:(0,_.jsx)(X.Z,{variant:"robot",serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},onServiceSettingsChange:Ve})}]:[]),a()((0,te.OJ)()?[{key:"toolbar",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(T.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"toolbar",defaultMessage:"Toolbar"})]}),children:(0,_.jsx)(H.Z,{variant:"robot",serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},settingsUid:Ze.uid,isActive:"toolbar"===he,onServiceSettingsChange:Ve})}]:[]),a()((0,te.OJ)()?[{key:"right",label:(0,_.jsxs)("span",{children:[(0,_.jsx)(q.Z,{})," ",(0,_.jsx)(r.FormattedMessage,{id:"right",defaultMessage:"Right"})]}),children:(0,_.jsx)(W.Z,{variant:"robot",serviceSettings:{live:null==Je?void 0:Je.serviceSettings,draft:null==Je?void 0:Je.draftServiceSettings},onServiceSettingsChange:Ve,settingsUid:Ze.uid,isActive:"right"===he})}]:[]),a()([]),a()([]),a()([])):[]}),[null==Ze?void 0:Ze.uid,Je,Ve,We,He,e,he]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(p.Z,{style:{minHeight:"calc(100vh - 160px)"},children:[(0,_.jsx)(p.Z.Panel,{defaultSize:"20%",min:"14%",max:"40%",style:n,children:(0,_.jsxs)(D.Z,{title:e.formatMessage({id:"robot.settings.templates",defaultMessage:"æ¨¡æ¿åˆ—è¡¨"}),extra:(0,_.jsx)(h.ZP,{size:"small",icon:(0,_.jsx)(P.Z,{}),type:"primary",onClick:function(){Ce(null),ye(!0)},children:(0,_.jsx)(r.FormattedMessage,{id:"common.new",defaultMessage:"æ–°å»º"})}),bodyStyle:{padding:8},loading:g,children:[(0,_.jsx)("div",{style:{margin:"0 0 8px 0"},children:(0,_.jsxs)(x.Z.Compact,{style:{width:"100%"},children:[(0,_.jsx)(b.Z,{placeholder:e.formatMessage({id:"robot.settings.template.search",defaultMessage:"æœç´¢æ¨¡æ¿åç§°"}),value:fe,onChange:function(e){return ve(e.target.value)},onPressEnter:function(e){e.preventDefault();var t=e.currentTarget.value;ve(t),Ye(t)},allowClear:!0,size:"middle"}),(0,_.jsx)(h.ZP,{type:"primary",icon:(0,_.jsx)(F.Z,{}),"aria-label":e.formatMessage({id:"common.search",defaultMessage:"æœç´¢"}),onClick:function(){return Ye()}})]})}),(0,_.jsx)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 280px)"},children:(0,_.jsx)(S.Z,{dataSource:Qe,locale:{emptyText:(0,_.jsx)(w.Z,{description:e.formatMessage({id:"empty",defaultMessage:"æš‚æ— æ•°æ®"}),image:w.Z.PRESENTED_IMAGE_SIMPLE})},renderItem:function(e){return(0,_.jsx)(S.Z.Item,{style:ue===e.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer",borderRadius:6,marginBottom:8,padding:10}:{cursor:"pointer",borderRadius:6,marginBottom:8,padding:10},onClick:function(){return de(e.uid)},children:(0,_.jsx)(S.Z.Item.Meta,{title:(0,_.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)("div",{style:{fontWeight:500,flex:1},children:e.name||e.uid}),(0,_.jsx)(x.Z,{size:4,children:e.isDefault?(0,_.jsx)(y.Z,{color:"blue",children:"é»˜è®¤"}):null})]}),description:e.description?(0,_.jsx)("div",{style:{color:o?"#aaa":"#999",fontSize:12},children:e.description}):null})},e.uid)}})})]})}),(0,_.jsx)(p.Z.Panel,{children:Ze?(0,_.jsx)(D.Z,{title:(0,_.jsxs)(x.Z,{children:[(0,_.jsxs)("span",{children:[e.formatMessage({id:"robot.settings.editing",defaultMessage:"ç¼–è¾‘æ¨¡æ¿"}),": ",Ze.name||Ze.uid]}),(0,_.jsx)(j.Z,{checked:!!Ze.enabled,onChange:function(e){return $e(Ze.uid,e)},checkedChildren:e.formatMessage({id:"common.enabled",defaultMessage:"å¯ç”¨"}),unCheckedChildren:e.formatMessage({id:"common.disabled",defaultMessage:"åœç”¨"})}),(0,_.jsx)(h.ZP,{size:"small",icon:(0,_.jsx)(A.Z,{}),onClick:function(e){var t;e.stopPropagation(),Ce(null!=(t=Ze)?t:Ze),ye(!0)},children:"ç¼–è¾‘"}),(0,_.jsx)(M.Z,{title:e.formatMessage({id:"common.delete.confirm",defaultMessage:"ç¡®å®šè¦åˆ é™¤å—?"}),onConfirm:function(e){null==e||e.stopPropagation(),_e(Ze)},onCancel:function(e){return null==e?void 0:e.stopPropagation()},okText:e.formatMessage({id:"common.confirm",defaultMessage:"ç¡®å®š"}),cancelText:e.formatMessage({id:"common.cancel",defaultMessage:"å–æ¶ˆ"}),children:(0,_.jsx)(h.ZP,{size:"small",danger:!0,icon:(0,_.jsx)(I.Z,{}),onClick:function(e){e.stopPropagation()},children:"åˆ é™¤"})}),Ze.isDefault?(0,_.jsx)(y.Z,{color:"blue",children:"é»˜è®¤"}):null]}),extra:(0,_.jsxs)(x.Z,{children:[(0,_.jsx)(M.Z,{title:"å‘å¸ƒåˆ°çº¿ä¸Šç¯å¢ƒ",description:"åªæœ‰å‘å¸ƒä¹‹åï¼Œæ‰ä¼šåº”ç”¨åˆ°çº¿ä¸Šç¯å¢ƒ",okText:"ç»§ç»­å‘å¸ƒ",cancelText:"å–æ¶ˆ",onConfirm:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),ot()},onCancel:function(e){var t;return null==e||null===(t=e.stopPropagation)||void 0===t?void 0:t.call(e)},children:(0,_.jsx)(h.ZP,{onClick:function(e){return e.stopPropagation()},loading:Ie,type:"default",icon:(0,_.jsx)(K.Z,{}),children:(0,_.jsx)(r.FormattedMessage,{id:"common.publish",defaultMessage:"å‘å¸ƒ"})})}),(0,_.jsx)(h.ZP,{onClick:function(){Ze&&(ze(Ze),Le.current=JSON.stringify(null!=Ze?Ze:{}),Oe(!1))},disabled:!De,icon:(0,_.jsx)(R.Z,{}),children:(0,_.jsx)(r.FormattedMessage,{id:"common.reset",defaultMessage:"é‡ç½®"})}),(0,_.jsx)(h.ZP,{type:"primary",loading:Te,onClick:rt,disabled:!De,icon:(0,_.jsx)(E.Z,{}),children:(0,_.jsx)(r.FormattedMessage,{id:"common.save",defaultMessage:"ä¿å­˜"})})]}),children:(0,_.jsx)(s.Z,{activeKey:he,onChange:xe,items:at})}):(0,_.jsx)(D.Z,{children:(0,_.jsx)(w.Z,{description:e.formatMessage({id:"robot.settings.template.select",defaultMessage:"è¯·ä»å·¦ä¾§é€‰æ‹©æ¨¡æ¿"})})})})]}),(0,_.jsx)($.Z,{open:we,onOpenChange:ye,orgUid:(null==t?void 0:t.uid)||"",record:ke,onSuccess:function(){ye(!1),Ge(fe)}})]})},se=n(57902),re=function(){return(0,_.jsx)(s.Z,{defaultActiveKey:"table",style:{padding:"10px"},items:[{key:"table",label:(0,_.jsx)(r.FormattedMessage,{id:"menu.robot.table",defaultMessage:"Robot Account"}),children:(0,_.jsx)(se.Z,{})},{key:"settings",label:(0,_.jsx)(r.FormattedMessage,{id:"menu.robot.settings",defaultMessage:"Robot Settings"}),children:(0,_.jsx)(ie,{})}]})}}}]);