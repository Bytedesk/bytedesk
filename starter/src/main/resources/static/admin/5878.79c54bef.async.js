"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5878],{15722:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(83910),a=t(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=t(54183),s=function(e,r){return a.createElement(o.Z,(0,n.Z)({},e,{ref:r,icon:i}))};var u=a.forwardRef(s)},82669:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(83910),a=t(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=t(54183),s=function(e,r){return a.createElement(o.Z,(0,n.Z)({},e,{ref:r,icon:i}))};var u=a.forwardRef(s)},60241:function(e,r,t){var n=t(94433),a=t(38956),i=t(44194),o=t(9953),s=t(31549),u=["fieldProps","proFieldProps"],l=function(e,r){var t=e.fieldProps,i=e.proFieldProps,l=(0,a.Z)(e,u);return(0,s.jsx)(o.Z,(0,n.Z)({ref:r,valueType:"textarea",fieldProps:t,proFieldProps:i},l))};r.Z=i.forwardRef(l)},35761:function(e,r,t){t.d(r,{Qz:function(){return p},SA:function(){return c},vj:function(){return v}});var n=t(90819),a=t.n(n),i=t(73193),o=t.n(i),s=t(89933),u=t.n(s),l=t(94976),d=t(4628);function c(e){return f.apply(this,arguments)}function f(){return(f=u()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/authority/query/org",{method:"GET",params:o()(o()({},r),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=u()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/authority/update",{method:"POST",data:o()(o()({},r),{},{channel:l.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=u()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/authority/reset/level",{method:"POST",data:{channel:l.XtJ}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},39862:function(e,r,t){t.d(r,{Z:function(){return L}});var n=t(73193),a=t.n(n),i=t(90819),o=t.n(i),s=t(89933),u=t.n(s),l=t(45332),d=t.n(l),c=t(33979),f=t(76711),p=t.n(f),m=t(43388),v=t(35761),g=t(88722),h=t(94976),x=t(67242),y=t(4628),w=t(30857),M=t(30310),b=t(69533),k=t(1282),R=t(83281),Z=t(96955),j=t(93646),C=t(82878),S=t(44194),P=t(31549),U=function(e){var r=e.open,t=e.onClose,n=e.superUser,a=e.orgUid,i=e.existedAuthorityUids,s=e.onConfirm,l=(0,y.useIntl)(),c=(0,g.Z)().translateString,f=h.whQ,U=(0,S.useMemo)((function(){return new Set((i||[]).filter(Boolean))}),[i]),E=(0,S.useState)(!1),O=d()(E,2),T=O[0],A=O[1],q=(0,S.useState)([]),z=d()(q,2),I=z[0],L=z[1],B=(0,S.useState)(0),$=d()(B,2),F=$[0],N=$[1],K=(0,S.useState)(1),D=d()(K,2),G=D[0],W=D[1],H=(0,S.useState)(10),J=d()(H,2),X=J[0],Q=J[1],V=(0,S.useState)([]),_=d()(V,2),Y=_[0],ee=_[1],re=(0,S.useState)(""),te=d()(re,2),ne=te[0],ae=te[1],ie=(0,S.useState)(""),oe=d()(ie,2),se=oe[0],ue=oe[1],le=(0,S.useState)([]),de=d()(le,2),ce=de[0],fe=de[1],pe=(se||"").trim().toLowerCase();(0,S.useEffect)((function(){if(r){var e=(ne||"").trim();if(e){var t=window.setTimeout((function(){ue(e),W(1)}),300);return function(){window.clearTimeout(t)}}}}),[300,ne,r]);var me=function(){var e=u()(o()().mark((function e(){var r,t,i,s,u,l,d,c,m;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=200,t=200,i=[],s=0;case 4:if(!(s<t)){e.next=20;break}return d={pageNumber:s,pageSize:r,superUser:n,level:f,orgUid:n?void 0:a},e.next=8,(0,v.SA)(d);case 8:if(c=e.sent,x.Z.debug("AddRoleAuthoritiesDrawer queryAuthoritiesByOrg(all) resp:",c,d),200===(null==c?void 0:c.code)){e.next=12;break}throw new Error((null==c?void 0:c.message)||"queryAuthoritiesByOrg failed");case 12:if(m=(null==c||null===(u=c.data)||void 0===u?void 0:u.content)||[],i.push.apply(i,p()(m)),!(!(null==c||null===(l=c.data)||void 0===l||!l.last)||m.length<r)){e.next=17;break}return e.abrupt("break",20);case 17:s+=1,e.next=4;break;case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=(0,S.useMemo)((function(){return pe?(ce||[]).filter((function(e){var r=(null==e?void 0:e.uid)||"";return!r||!U.has(r)})).filter((function(e){return function(e,r){var t=(r||"").trim().toLowerCase();if(!t)return!0;var n=c(null==e?void 0:e.name)||"",a=c(null==e?void 0:e.description)||"";return[null==e?void 0:e.uid,null==e?void 0:e.name,n,null==e?void 0:e.value,null==e?void 0:e.description,a,null==e?void 0:e.level].filter(Boolean).join(" ").toLowerCase().includes(t)}(e,pe)})):[]}),[ce,U,pe]),ge=pe?ve.length:Math.max(0,F-U.size),he=(0,S.useMemo)((function(){return pe?l.formatMessage({id:"authority.search.empty",defaultMessage:"暂无匹配的权限"}):F>0&&Math.max(0,F-U.size)<=0?l.formatMessage({id:"authority.add.none.left",defaultMessage:"当前角色已包含全部权限，无更多可添加权限"}):l.formatMessage({id:"authority.empty",defaultMessage:"暂无权限数据"})}),[U.size,l,pe,F]),xe=(0,S.useMemo)((function(){if(!pe)return I;var e=(G-1)*X,r=e+X;return ve.slice(e,r)}),[G,I,ve,pe,X]),ye=function(){var e=u()(o()().mark((function e(r,t){var i,s,u,d,c,p;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={pageNumber:r-1,pageSize:t,superUser:n,level:f,orgUid:n?void 0:a,sortBy:"createdAt",sortDirection:"ascend"},A(!0),e.prev=2,e.next=5,(0,v.SA)(i);case 5:if(d=e.sent,x.Z.debug("AddRoleAuthoritiesDrawer queryAuthoritiesByOrg resp:",d,i),200===(null==d?void 0:d.code)){e.next=12;break}return m.yw.error(null==d?void 0:d.message),L([]),N(0),e.abrupt("return");case 12:c=((null==d||null===(s=d.data)||void 0===s?void 0:s.content)||[]).filter((function(e){var r=(null==e?void 0:e.uid)||"";return!r||!U.has(r)})),p=(null==d||null===(u=d.data)||void 0===u?void 0:u.totalElements)||0,L(c),N(p),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),m.yw.error(l.formatMessage({id:"query.failed",defaultMessage:"查询失败"})),L([]),N(0);case 23:return e.prev=23,A(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[2,18,23,26]])})));return function(r,t){return e.apply(this,arguments)}}();(0,S.useEffect)((function(){if(!r)return ee([]),L([]),N(0),W(1),Q(10),ae(""),ue(""),void fe([]);ee([]),W(1),ae(""),ue(""),fe([]),ye(1,X)}),[r]),(0,S.useEffect)((function(){if(r&&pe){var e=!1,t=function(){var r=u()(o()().mark((function r(){var t;return o()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((ce||[]).length>0)){r.next=2;break}return r.abrupt("return");case 2:return A(!0),r.prev=3,r.next=6,me();case 6:if(t=r.sent,!e){r.next=9;break}return r.abrupt("return");case 9:fe(t),r.next=18;break;case 12:if(r.prev=12,r.t0=r.catch(3),!e){r.next=16;break}return r.abrupt("return");case 16:m.yw.error(l.formatMessage({id:"query.failed",defaultMessage:"查询失败"})),fe([]);case 18:return r.prev=18,e||A(!1),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[3,12,18,21]])})));return function(){return r.apply(this,arguments)}}();return t(),function(){e=!0}}}),[r,pe]);var we=function(){var e=u()(o()().mark((function e(){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(r=(Y||[]).filter(Boolean)).length){e.next=4;break}return m.yw.warning(l.formatMessage({id:"authority.select.required",defaultMessage:"请先勾选要添加的权限"})),e.abrupt("return");case 4:return e.next=6,s(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.jsxs)(w.Z,{title:l.formatMessage({id:"authority.add",defaultMessage:"添加角色权限"}),open:r,onClose:t,width:580,destroyOnHidden:!0,extra:(0,P.jsxs)(M.Z,{size:8,children:[(0,P.jsx)(b.ZP,{onClick:t,children:l.formatMessage({id:"cancel",defaultMessage:"取消"})}),(0,P.jsx)(b.ZP,{type:"primary",onClick:we,children:l.formatMessage({id:"ok",defaultMessage:"确定"})})]}),children:[(0,P.jsx)(k.Z.Search,{placeholder:l.formatMessage({id:"search",defaultMessage:"搜索"}),allowClear:!0,value:ne,onChange:function(e){var r=e.target.value||"";ae(r),r.trim()||(ue(""),W(1),fe([]),ye(1,X))},onSearch:function(e){var r=(e||"").trim();ae(e||""),ue(r),W(1)},style:{marginBottom:12}}),(0,P.jsx)(R.Z,{loading:T,dataSource:xe,locale:{emptyText:(0,P.jsx)(Z.Z,{description:he})},pagination:{current:G,pageSize:X,total:ge,showSizeChanger:!0,showQuickJumper:!0,onChange:function(e,r){W(e),Q(r),pe||ye(e,r)}},renderItem:function(e){var r=(null==e?void 0:e.uid)||"",t=!!r&&Y.includes(r);return(0,P.jsx)(R.Z.Item,{onClick:function(){r&&ee((function(e){var t=new Set(e);return t.has(r)?t.delete(r):t.add(r),Array.from(t)}))},children:(0,P.jsxs)(M.Z,{size:12,align:"start",children:[(0,P.jsx)(j.Z,{disabled:!r,checked:t,onChange:function(e){var t=e.target.checked;ee((function(e){var n=new Set(e);return t?r&&n.add(r):n.delete(r),Array.from(n)}))},onClick:function(e){return e.stopPropagation()}}),(0,P.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,P.jsx)(C.Z.Text,{strong:!0,children:c(null==e?void 0:e.name)||(null==e?void 0:e.value)||""}),null!=e&&e.description?(0,P.jsx)("div",{children:(0,P.jsx)(C.Z.Text,{type:"secondary",children:c(e.description)||e.description})}):null,null!=e&&e.value?(0,P.jsx)("div",{children:(0,P.jsxs)(C.Z.Text,{type:"secondary",children:[l.formatMessage({id:"authority.value",defaultMessage:"权限值"}),"：",e.value]})}):null]})]})},r||e.value||e.name)}})]})},E=t(74171),O=t(29892),T=t(25689),A=t(27729),q=t(43275),z=t(34512),I=t(85977),L=function(e){var r,t,n,i,s,l,f=e.superUser,p=(0,y.useIntl)(),v=(0,y.useAccess)(),h=A.Z.useModal(),w=d()(h,2),R=w[0],j=w[1],L=(0,g.Z)().translateString,B=(0,E.u)((function(e){return e.currentOrg})),$=(0,O.Z)((function(e){return{currentRole:e.currentRole,currentRolePlatform:e.currentRolePlatform,setCurrentRole:e.setCurrentRole,setCurrentRolePlatform:e.setCurrentRolePlatform}})),F=$.currentRole,N=$.currentRolePlatform,K=$.setCurrentRole,D=$.setCurrentRolePlatform,G=null!==(r=null==v||null===(t=v.getModulePermission)||void 0===t?void 0:t.call(v,I.MY.ROLE))&&void 0!==r?r:null==v?void 0:v.rolePermission,W=null!==(n=null==G||null===(i=G.canRead)||void 0===i?void 0:i.call(G))&&void 0!==n&&n,H=null!==(s=null==G||null===(l=G.canUpdate)||void 0===l?void 0:l.call(G))&&void 0!==s&&s,J=f?N:F,X=(0,S.useRef)(),Q=(0,S.useState)([]),V=d()(Q,2),_=V[0],Y=V[1],ee=(0,S.useState)([]),re=d()(ee,2),te=re[0],ne=re[1],ae=(0,S.useState)(""),ie=d()(ae,2),oe=ie[0],se=ie[1],ue=(0,S.useState)(""),le=d()(ue,2),de=le[0],ce=le[1],fe=(0,S.useState)(!1),pe=d()(fe,2),me=pe[0],ve=pe[1],ge=(0,S.useState)(!1),he=d()(ge,2),xe=he[0],ye=he[1],we=function(){var e,r,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n&&"function"==typeof(null===(e=X.current)||void 0===e?void 0:e.reloadAndRest)?null===(t=X.current)||void 0===t||t.reloadAndRest():null===(r=X.current)||void 0===r||r.reload()};(0,S.useEffect)((function(){var e=(oe||"").trim(),r=(de||"").trim();if(e&&e!==r){var t=window.setTimeout((function(){ce(e),we(!0)}),300);return function(){window.clearTimeout(t)}}}),[300,oe]);var Me=function(){m.yw.warning(p.formatMessage({id:"role.permission.denied",defaultMessage:"暂无操作权限"}))},be=function(e){return e.value||e.name||""},ke=function(e){var r=e.join("_");return r.startsWith("i18n.")?r.slice("i18n.".length):r},Re=function(e){var r=(e||"").split("_").filter(Boolean);if(r.length<2)return null;var t=r[r.length-1],n=r.slice(0,r.length-1);return{module:ke(n),action:t}},Ze=(0,S.useMemo)((function(){var e;return null!==(e=f?null==N?void 0:N.authorities:null==F?void 0:F.authorities)&&void 0!==e?e:[]}),[null==F?void 0:F.authorities,null==N?void 0:N.authorities,f]),je=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=null!=e?e:{uid:"",orgUid:"",authorities:[]};f?D(t):K(t),r&&(Y([]),ne([]))},Ce=function(){var e=u()(o()().mark((function e(r){var t,n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return Me(),e.abrupt("return");case 3:if(null!=J&&J.uid){e.next=6;break}return m.yw.warning(p.formatMessage({id:"role.select.required",defaultMessage:"请先选择角色"})),e.abrupt("return");case 6:if(!(0,T.LK)(J,f)){e.next=9;break}return m.yw.warning(p.formatMessage({id:"role.system.cannot.modify",defaultMessage:"系统角色不允许修改权限"})),e.abrupt("return");case 9:if(r&&0!==r.length){e.next=11;break}return e.abrupt("return");case 11:return t={uid:J.uid,authorityUids:r,system:f},m.yw.loading(p.formatMessage({id:"updating"})),e.prev=13,e.next=16,(0,c.Fr)(t);case 16:if(200===(null==(a=e.sent)?void 0:a.code)){e.next=21;break}return m.yw.destroy(),m.yw.error(null==a?void 0:a.message),e.abrupt("return");case 21:m.yw.destroy(),m.yw.success(p.formatMessage({id:"update.success"})),je(null==a?void 0:a.data),null===(n=X.current)||void 0===n||n.reload(),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(13),x.Z.error("failed to add role authorities",e.t0),m.yw.destroy(),m.yw.error(p.formatMessage({id:"update.failed",defaultMessage:"更新失败"}));case 32:case"end":return e.stop()}}),e,null,[[13,27]])})));return function(r){return e.apply(this,arguments)}}(),Se=function(){var e=u()(o()().mark((function e(r){var t,n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return Me(),e.abrupt("return");case 3:if(null!=J&&J.uid){e.next=6;break}return m.yw.warning(p.formatMessage({id:"role.select.required",defaultMessage:"请先选择角色"})),e.abrupt("return");case 6:if(!(0,T.LK)(J,f)){e.next=9;break}return m.yw.warning(p.formatMessage({id:"role.system.cannot.modify",defaultMessage:"系统角色不允许修改权限"})),e.abrupt("return");case 9:if(r&&0!==r.length){e.next=11;break}return e.abrupt("return");case 11:return t={uid:J.uid,authorityUids:r,system:f},m.yw.loading(p.formatMessage({id:"updating"})),e.prev=13,e.next=16,(0,c.N)(t);case 16:if(200===(null==(a=e.sent)?void 0:a.code)){e.next=21;break}return m.yw.destroy(),m.yw.error(null==a?void 0:a.message),e.abrupt("return");case 21:m.yw.destroy(),m.yw.success(p.formatMessage({id:"update.success"})),je(null==a?void 0:a.data),null===(n=X.current)||void 0===n||n.reload(),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(13),x.Z.error("failed to remove role authorities",e.t0),m.yw.destroy(),m.yw.error(p.formatMessage({id:"update.failed",defaultMessage:"更新失败"}));case 32:case"end":return e.stop()}}),e,null,[[13,27]])})));return function(r){return e.apply(this,arguments)}}(),Pe=function(){if(H)if(null!=J&&J.uid){var e,r=(te||[]).map((function(e){return e.uid})).filter(Boolean);if(0!==r.length)R.confirm({title:p.formatMessage({id:"deleteTip"}),content:p.formatMessage({id:"authority.remove.confirm",defaultMessage:"确认从该角色删除所选权限？"}),okText:p.formatMessage({id:"ok"}),cancelText:p.formatMessage({id:"cancel"}),onOk:(e=u()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(r);case 2:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});else m.yw.warning(p.formatMessage({id:"authority.select.required",defaultMessage:"请先勾选要删除的权限"}))}else m.yw.warning(p.formatMessage({id:"role.select.required",defaultMessage:"请先选择角色"}));else Me()},Ue=function(){var e=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return Me(),e.abrupt("return");case 3:if(null!=J&&J.uid){e.next=6;break}return m.yw.warning(p.formatMessage({id:"role.select.required",defaultMessage:"请先选择角色"})),e.abrupt("return");case 6:if(null!=r&&r.uid){e.next=9;break}return m.yw.warning(p.formatMessage({id:"authority.uid.missing",defaultMessage:"权限UID为空，无法删除"})),e.abrupt("return");case 9:return e.next=11,Se([r.uid]);case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Ee=function(){H?null!=J&&J.uid?(0,T.LK)(J,f)?m.yw.warning(p.formatMessage({id:"role.system.cannot.modify",defaultMessage:"系统角色不允许修改权限"})):ve(!0):m.yw.warning(p.formatMessage({id:"role.select.required",defaultMessage:"请先选择角色"})):Me()},Oe=function(){var e=u()(o()().mark((function e(){var r,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=3;break}return Me(),e.abrupt("return");case 3:if(f){e.next=6;break}return Me(),e.abrupt("return");case 6:if(null!=J&&J.uid){e.next=9;break}return m.yw.warning(p.formatMessage({id:"role.reset.select",defaultMessage:"请先选择角色"})),e.abrupt("return");case 9:return ye(!0),e.prev=10,e.next=13,(0,c.Cd)({uid:J.uid});case 13:if(200===(null==(t=e.sent)?void 0:t.code)){e.next=17;break}return m.yw.error(null==t?void 0:t.message),e.abrupt("return");case 17:m.yw.success(p.formatMessage({id:"role.reset.success",defaultMessage:"已恢复默认权限"})),je(t.data),null===(r=X.current)||void 0===r||r.reload(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(10),x.Z.error("failed to reset role authorities",e.t0),m.yw.error(p.formatMessage({id:"role.reset.failed",defaultMessage:"重置失败，请稍后再试"}));case 26:return e.prev=26,ye(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[10,22,26,29]])})));return function(){return e.apply(this,arguments)}}(),Te=function(e){var r=Re(e),t=(null==r?void 0:r.action)||e.split("_").pop()||e;return L("i18n.".concat(t))},Ae=(0,S.useMemo)((function(){return[{dataIndex:"index",valueType:"indexBorder",width:48,search:!1,fixed:"left"},{title:p.formatMessage({id:"authority.name",defaultMessage:"权限名称"}),dataIndex:"name",ellipsis:!0,search:!1,fixed:"left",render:function(e,r){var t=L(r.name);return(0,P.jsx)(C.Z.Text,{copyable:{text:t||""},children:t})}},{title:"UID",dataIndex:"uid",width:220,ellipsis:!0,search:!1,render:function(e,r){return(0,P.jsx)(C.Z.Text,{copyable:{text:r.uid||""},children:r.uid})}},{title:p.formatMessage({id:"authority.value",defaultMessage:"权限值"}),dataIndex:"value",width:200,ellipsis:!0,render:function(e,r){return(0,P.jsx)(C.Z.Text,{copyable:{text:r.value||""},children:r.value})}},{title:p.formatMessage({id:"authority.description",defaultMessage:"权限描述"}),dataIndex:"description",width:260,ellipsis:!0,render:function(e,r){var t=r.description||"",n=L(t)||"";return n&&n!==t?n:L(r.name)||""||r.value||"-"}},{title:p.formatMessage({id:"createdAt",defaultMessage:"Created At"}),dataIndex:"createdAt",width:180,sorter:!0,hideInSearch:!0},{title:p.formatMessage({id:"updatedAt",defaultMessage:"Updated At"}),dataIndex:"updatedAt",width:180,sorter:!0,hideInSearch:!0},{title:p.formatMessage({id:"operate",defaultMessage:"操作"}),dataIndex:"option",width:120,fixed:"right",search:!1,render:function(e,r){return(0,P.jsx)(q.Z,{title:p.formatMessage({id:"deleteTip"}),description:p.formatMessage({id:"authority.remove.confirm.single",defaultMessage:"确认删除该权限？"}),okText:p.formatMessage({id:"ok"}),cancelText:p.formatMessage({id:"cancel"}),onConfirm:function(){return Ue(r)},disabled:!H||!(null!=J&&J.uid)||(0,T.LK)(J,f),children:(0,P.jsx)(b.ZP,{type:"link",danger:!0,disabled:!H||!(null!=J&&J.uid)||(0,T.LK)(J,f),children:p.formatMessage({id:"delete",defaultMessage:"删除"})})})}}]}),[H,p,J,L,Ze]),qe=(0,S.useMemo)((function(){return(Ze||[]).map((function(e){return null==e?void 0:e.uid})).filter(Boolean)}),[Ze]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(z.Z,{actionRef:X,headerTitle:null!=J&&J.name?L(J.name):void 0,columns:Ae,rowKey:function(e){return e.uid||be(e)},params:{roleUid:null==J?void 0:J.uid,keyword:de},request:function(){var e=u()(o()().mark((function e(r){var t,n,i,s,u,l,d,p,v,g,h;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W){e.next=3;break}return Me(),e.abrupt("return",{data:[],success:!0,total:0});case 3:if(n=(null==r?void 0:r.roleUid)||(null==J?void 0:J.uid)){e.next=6;break}return e.abrupt("return",{data:[],success:!0,total:0});case 6:return i=null==r?void 0:r.keyword,s={uid:n,superUser:f,orgUid:f||null==B?void 0:B.uid,system:!!f||void 0},e.next=10,(0,c.yq)(s);case 10:if(u=e.sent,x.Z.debug("RoleAuthority queryRoleByUid resp:",u,s),200===(null==u?void 0:u.code)){e.next=15;break}return m.yw.error(null==u?void 0:u.message),e.abrupt("return",{data:[],success:!1,total:0});case 15:return je(u.data,!1),o=(null===(t=u.data)||void 0===t?void 0:t.authorities)||[],l=(o||[]).map((function(e){var r=be(e),t=Re(r);return a()(a()({},e),{},{moduleName:(null==t?void 0:t.module)||"",action:(null==t?void 0:t.action)||"",actionLabel:Te(r)})})).sort((function(e,r){var t=e.moduleName||"",n=r.moduleName||"";return t!==n?t.localeCompare(n):be(e).localeCompare(be(r))})),d=l.filter((function(e){return r=e,!(t=(i||""||"").trim().toLowerCase())||[be(r)||"",r.name||"",L(r.name)||"",r.actionLabel||"",r.value||"",r.description||"",L(r.description)||"",r.moduleName||"",r.action||"",r.uid||""].filter(Boolean).join(" ").toLowerCase().includes(t);var r,t})),p=Number((null==r?void 0:r.current)||1),v=Number((null==r?void 0:r.pageSize)||10),g=(p-1)*v,h=d.slice(g,g+v),e.abrupt("return",{data:h,success:!0,total:d.length});case 23:case"end":return e.stop()}var o}),e)})));return function(r){return e.apply(this,arguments)}}(),search:!1,scroll:{x:1100},toolBarRender:function(){return[(0,P.jsxs)(M.Z,{size:8,children:[(0,P.jsx)(k.Z.Search,{allowClear:!0,placeholder:p.formatMessage({id:"authority.search.placeholder",defaultMessage:"在当前角色权限中搜索（名称/值/描述/模块/操作/UID）"}),disabled:!W,onSearch:function(e){var r=e||"";se(r),ce(r.trim()),we(!0)},onChange:function(e){var r=e.target.value||"";se(r),r||(ce(""),we(!0))},value:oe,style:{width:360}}),f&&H&&(0,P.jsx)(q.Z,{title:p.formatMessage({id:"role.reset.confirm.title",defaultMessage:"重置【{name}】的权限？"},{name:null!=J&&J.name?L(J.name):p.formatMessage({id:"role.reset.none",defaultMessage:"未选择角色"})}),description:p.formatMessage({id:"role.reset.confirm.desc",defaultMessage:"仅保留当前层级默认权限，继续？"}),okText:p.formatMessage({id:"ok"}),cancelText:p.formatMessage({id:"cancel"}),onConfirm:Oe,disabled:!(null!=J&&J.uid)||xe,children:(0,P.jsx)(b.ZP,{disabled:!(null!=J&&J.uid),loading:xe,children:p.formatMessage({id:"role.reset.button",defaultMessage:"重置权限"})})}),(0,P.jsx)(b.ZP,{type:"primary",onClick:Ee,disabled:!W||!H||!(null!=J&&J.uid)||(0,T.LK)(J,f),children:p.formatMessage({id:"authority.add",defaultMessage:"添加角色权限"})}),(0,P.jsx)(b.ZP,{danger:!0,onClick:Pe,disabled:!W||!H||!(null!=J&&J.uid)||0===_.length||(0,T.LK)(J,f),children:p.formatMessage({id:"authority.remove",defaultMessage:"删除角色权限"})})]},"actions")]},rowSelection:W&&H?{selectedRowKeys:_,onChange:function(e,r){Y(e),ne(r)}}:void 0,pagination:{showSizeChanger:!0,pageSize:10},locale:{emptyText:(0,P.jsx)(Z.Z,{description:p.formatMessage({id:"authority.empty",defaultMessage:"暂无权限数据"})})}}),me&&(0,P.jsx)(U,{open:me,onClose:function(){return ve(!1)},superUser:f,orgUid:null==B?void 0:B.uid,existedAuthorityUids:qe,onConfirm:function(){var e=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(r);case 2:ve(!1);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}),j]})}},34432:function(e,r,t){t.d(r,{Z:function(){return N}});var n=t(73193),a=t.n(n),i=t(90819),o=t.n(i),s=t(89933),u=t.n(s),l=t(45332),d=t.n(l),c=t(29892),f=t(44194),p=t(33979),m=t(74171),v=t(43388),g=t(4628),h=t(13921),x=t(27729),y=t(65051),w=t(69533),M=t(30310),b=t(1282),k=t(83281),R=t(96955),Z=t(28582),j=t(25553),C=t(88722),S=t(15722),P=t(82669),U=t(90727),E=t(94976),O=t(99036),T=t(86702),A=t(60241),q=t(69705),z=t(31549),I=function(e){var r=e.open,t=e.superUser,n=e.isEdit,a=e.role,i=e.onCancel,s=e.onSubmit,l=q.Z.useForm(),c=d()(l,1)[0],p=(0,g.useIntl)(),h=(0,C.Z)().translateString,y=(0,m.u)((function(e){return e.currentOrg}));(0,f.useEffect)((function(){n&&a?c.setFieldsValue({uid:a.uid,value:a.value,name:h(a.name),description:h(a.description)}):c.resetFields()}),[n,a]);var w=function(){c.validateFields().then(function(){var e=u()(o()().mark((function e(r){var i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={uid:n?null==a?void 0:a.uid:"",name:r.name,description:r.description,orgUid:null==y?void 0:y.uid,system:t,level:t?E.Hxq:E.whQ},s(i);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){console.log("Failed:",e),v.yw.error(p.formatMessage({id:"role.message.operation.failed"}))}))};return(0,z.jsx)(x.Z,{title:p.formatMessage({id:n?"role.edit.title":"role.create.title"}),open:r,forceRender:!0,onOk:w,onCancel:i,children:(0,z.jsxs)(O.A,{form:c,name:"roleForm",style:{maxWidth:400},submitter:{render:function(){return null}},children:[t&&n&&(0,z.jsx)(T.Z,{label:p.formatMessage({id:"role.value"}),name:"value",fieldProps:{disabled:!0,readOnly:!0}}),(0,z.jsx)(T.Z,{label:p.formatMessage({id:"role.name"}),name:"name",rules:[{required:!0,message:p.formatMessage({id:"role.name.required"})}],fieldProps:{onPressEnter:function(){c.validateFields(["description"]).then((function(){w()}))}}}),(0,z.jsx)(A.Z,{label:p.formatMessage({id:"role.description"}),name:"description",rules:[{required:!0,message:p.formatMessage({id:"role.description.required"})}],fieldProps:{onPressEnter:function(){w()},autoSize:{minRows:2,maxRows:6}}})]})})},L=t(67242),B=t(58620),$=t(85977),F=t(25689),N=function(e){var r,t,n,i,s,l,E,O,T,A,q=e.superUser,N=(0,g.useIntl)(),K=(0,g.useAccess)(),D=(0,j.Z)().isDarkMode,G=h.Z.useToken().token,W=x.Z.useModal(),H=d()(W,2),J=H[0],X=H[1],Q=(0,C.Z)().translateString,V=(0,f.useState)(!1),_=d()(V,2),Y=_[0],ee=_[1],re=(0,f.useState)(""),te=d()(re,2),ne=te[0],ae=te[1],ie=(0,f.useState)(!1),oe=d()(ie,2),se=oe[0],ue=oe[1],le=(0,m.u)((function(e){return e.currentOrg})),de=(0,c.Z)((function(e){return{roleResult:e.roleResult,roleResultPlatform:e.roleResultPlatform,setRoleResult:e.setRoleResult,setRoleResultPlatform:e.setRoleResultPlatform,insertRole:e.insertRole,insertRolePlatform:e.insertRolePlatform,upgradeRole:e.upgradeRole,upgradeRolePlatform:e.upgradeRolePlatform,currentRole:e.currentRole,currentRolePlatform:e.currentRolePlatform,removeRole:e.removeRole,removeRolePlatform:e.removeRolePlatform,setCurrentRole:e.setCurrentRole,setCurrentRolePlatform:e.setCurrentRolePlatform}})),ce=de.roleResult,fe=de.roleResultPlatform,pe=de.setRoleResult,me=de.setRoleResultPlatform,ve=de.insertRole,ge=de.insertRolePlatform,he=de.upgradeRole,xe=de.upgradeRolePlatform,ye=de.removeRole,we=de.removeRolePlatform,Me=de.currentRole,be=de.currentRolePlatform,ke=de.setCurrentRole,Re=de.setCurrentRolePlatform,Ze=null!==(r=null==K||null===(t=K.getModulePermission)||void 0===t?void 0:t.call(K,$.MY.ROLE))&&void 0!==r?r:null==K?void 0:K.rolePermission,je=null!==(n=null==Ze||null===(i=Ze.canRead)||void 0===i?void 0:i.call(Ze))&&void 0!==n&&n,Ce=null!==(s=null==Ze||null===(l=Ze.canCreate)||void 0===l?void 0:l.call(Ze))&&void 0!==s&&s,Se=null!==(E=null==Ze||null===(O=Ze.canUpdate)||void 0===O?void 0:O.call(Ze))&&void 0!==E&&E,Pe=null!==(T=null==Ze||null===(A=Ze.canDelete)||void 0===A?void 0:A.call(Ze))&&void 0!==T&&T,Ue=(0,f.useRef)(""),Ee=(0,f.useRef)(!1),Oe=function(){v.yw.warning(N.formatMessage({id:"role.permission.denied",defaultMessage:"暂无操作权限"}))},Te=q?be:Me,Ae=[G.colorPrimary,G.colorInfo,G.colorSuccess,G.colorWarning,G.colorError].filter(Boolean),qe=function(e){var r=null!=e?e:{uid:"",orgUid:"",authorities:[]};q?Re(r):ke(r)},ze=function(){var e=u()(o()().mark((function e(r){var t,n,a,i,s=arguments;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>1&&void 0!==s[1]&&s[1],je){e.next=4;break}return Oe(),e.abrupt("return");case 4:if(n=null==r?void 0:r.uid){e.next=7;break}return e.abrupt("return");case 7:if(!(!t&&null!=r&&r.authorities&&r.authorities.length>0)){e.next=10;break}return qe(r),e.abrupt("return");case 10:return Ue.current=n,e.prev=11,e.next=14,(0,p.yq)({uid:n,superUser:q,orgUid:q||null==le?void 0:le.uid,system:!!q||void 0});case 14:if(a=e.sent,Ue.current===n){e.next=17;break}return e.abrupt("return");case 17:if(200===a.code){e.next=19;break}throw new Error(a.message);case 19:qe(null==a?void 0:a.data),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),L.Z.error("failed to load role detail",e.t0),v.yw.error(null!==(i=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==i?i:N.formatMessage({id:"role.load.failed",defaultMessage:"角色加载失败"}));case 26:case"end":return e.stop()}}),e,null,[[11,22]])})));return function(r){return e.apply(this,arguments)}}(),Ie=function(){var e=u()(o()().mark((function e(){var r,t,n,i,s,u,l,d,c;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je){e.next=5;break}return Oe(),r={data:{content:[]}},q?(me(r),Re({uid:"",orgUid:"",authorities:[]})):(pe(r),ke({uid:"",orgUid:"",authorities:[]})),e.abrupt("return");case 5:return v.yw.loading(N.formatMessage({id:"loading"})),e.prev=6,t={pageNumber:0,pageSize:100,searchText:ne,superUser:q},n=q?a()(a()({},t),{},{system:!0}):a()(a()({},t),{},{orgUid:null==le?void 0:le.uid}),e.next=11,(0,p.E9)(n);case 11:if(i=e.sent,L.Z.debug("queryRolesByOrg response: ",null==i?void 0:i.data,n),200===i.code){e.next=15;break}throw new Error(i.message);case 15:q?(me(i),""===(null==be?void 0:be.uid)&&null!=i&&null!==(s=i.data)&&void 0!==s&&null!==(s=s.content)&&void 0!==s&&s.length&&(u=i.data.content[0],Re(u))):(pe(i),""===(null==Me?void 0:Me.uid)&&null!=i&&null!==(l=i.data)&&void 0!==l&&null!==(l=l.content)&&void 0!==l&&l.length&&(d=i.data.content[0],ke(d))),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),L.Z.error("failed to load roles",e.t0),v.yw.error(null!==(c=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==c?c:N.formatMessage({id:"role.load.failed",defaultMessage:"角色加载失败"}));case 22:return e.prev=22,v.yw.destroy(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[6,18,22,25]])})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){Ie()}),[je,ne,null==le?void 0:le.uid]),(0,f.useEffect)((function(){Ee.current=!1}),[q,null==le?void 0:le.uid]),(0,f.useEffect)((function(){if(null!=Te&&Te.uid){var e=!Ee.current;e&&(Ee.current=!0),ze(Te,e)}}),[je,null==Te?void 0:Te.uid]);var Le=function(){var e=u()(o()().mark((function e(r){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce){e.next=3;break}return Oe(),e.abrupt("return");case 3:return v.yw.loading(N.formatMessage({id:"creating"})),e.next=6,(0,p.fA)(a()({},r));case 6:t=e.sent,L.Z.debug("createRole response: ",t,r),200===t.code?(v.yw.destroy(),v.yw.success(N.formatMessage({id:"create.success"})),ee(!1),q?(ge(null==t?void 0:t.data),Re(null==t?void 0:t.data)):(ve(null==t?void 0:t.data),ke(null==t?void 0:t.data))):(v.yw.destroy(),v.yw.error(t.message));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Be=function(){var e=u()(o()().mark((function e(r){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Se){e.next=3;break}return Oe(),e.abrupt("return");case 3:return t={uid:null==r?void 0:r.uid,name:null==r?void 0:r.name,description:null==r?void 0:r.description,system:q},v.yw.loading(N.formatMessage({id:"updating"})),e.next=7,(0,p.ul)(t);case 7:if(n=e.sent,L.Z.debug("updateRole response: ",n,t),200!==n.code){e.next=19;break}if(v.yw.destroy(),v.yw.success(N.formatMessage({id:"update.success"})),q?xe(null==n?void 0:n.data):he(null==n?void 0:n.data),null==r||!r.uid){e.next=16;break}return e.next=16,ze(a()(a()(a()({},Te),null==n?void 0:n.data),{},{uid:r.uid}),!0);case 16:ee(!1),e.next=21;break;case 19:v.yw.destroy(),v.yw.error(n.message);case 21:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),$e=function(){var e=u()(o()().mark((function e(r){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe){e.next=3;break}return Oe(),e.abrupt("return");case 3:return v.yw.loading(N.formatMessage({id:"deleting"})),e.next=6,(0,p.Rd)(r);case 6:200===(t=e.sent).code?(v.yw.destroy(),v.yw.success(N.formatMessage({id:"delete.success"})),q?we(r.uid):ye(r.uid),ee(!1),Ie()):(v.yw.destroy(),v.yw.error(t.message));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Fe=q?fe.data.content:ce.data.content;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(y.Z,{gap:"small",wrap:"wrap",style:{padding:"10px"},children:[Ce&&(0,z.jsx)(w.ZP,{type:"primary",size:"small",icon:(0,z.jsx)(P.Z,{}),onClick:function(){Ce?(ue(!1),ee(!0)):Oe()},disabled:!(0,B.OJ)(),children:N.formatMessage({id:"create"})}),(0,z.jsx)(w.ZP,{size:"small",onClick:Ie,disabled:!je,children:N.formatMessage({id:"refresh"})}),(null==Te?void 0:Te.uid)&&(0,z.jsxs)(z.Fragment,{children:[Se&&(0,z.jsx)(w.ZP,{size:"small",onClick:function(){Se?(0,F.LK)(Te,q)?v.yw.error(N.formatMessage({id:"role.system.noedit"})):(ue(!0),ee(!0)):Oe()},children:N.formatMessage({id:"edit"})}),!(0,F.lq)(Te)&&Pe&&(0,z.jsx)(w.ZP,{onClick:function(){return function(e){Pe?(0,F.lq)(e)?v.yw.error(N.formatMessage({id:"role.system.nodelete"})):J.confirm({title:N.formatMessage({id:"deleteTip"}),icon:(0,z.jsx)(S.Z,{}),content:"".concat(N.formatMessage({id:"deleteAffirm"}),"【").concat(Q(e.name),"】？"),onOk:function(){$e(e)},okText:N.formatMessage({id:"ok"}),cancelText:N.formatMessage({id:"cancel"})}):Oe()}(Te)},size:"small",style:{float:"right"},danger:!0,children:N.formatMessage({id:"delete"})})]})]}),(0,z.jsx)("div",{style:{margin:5},children:(0,z.jsxs)(M.Z.Compact,{style:{width:"100%"},children:[(0,z.jsx)(b.Z,{placeholder:N.formatMessage({id:"role.search.placeholder",defaultMessage:"搜索角色名称"}),value:ne,onChange:function(e){return ae(e.target.value)},onPressEnter:function(){return Ie()},allowClear:!0,disabled:!je}),(0,z.jsx)(w.ZP,{onClick:function(){return Ie()},icon:(0,z.jsx)(U.Z,{}),disabled:!je})]})}),(0,z.jsx)(k.Z,{dataSource:Fe,locale:{emptyText:(0,z.jsx)(R.Z,{description:je?N.formatMessage({id:"role.empty",defaultMessage:"暂无角色数据"}):N.formatMessage({id:"role.permission.denied",defaultMessage:"暂无操作权限"})})},renderItem:function(e){return(0,z.jsx)(k.Z.Item,{style:{backgroundColor:(null==Te?void 0:Te.uid)===e.uid?D?"#333333":"#dddddd":void 0,cursor:"pointer"},onClick:function(){qe(e)},children:(0,z.jsx)(k.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(r=(0,F.c6)(Q(e.name)||e.name),(0,z.jsx)(Z.Z,{size:"small",style:{backgroundColor:(0,F.xt)(r,Ae,G.colorPrimary)},children:r})),title:(0,z.jsx)(z.Fragment,{children:Q(e.name)}),description:Q(e.description)})},e.uid);var r}}),Y&&(0,z.jsx)(I,{open:Y,superUser:q,isEdit:se,role:Te,onCancel:function(){ee(!1)},onSubmit:function(e){se?Be(e):Le(e)}}),X]})}},21850:function(e,r,t){var n=t(25553);r.Z=function(){var e=(0,n.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},25689:function(e,r,t){t.d(r,{LK:function(){return o},c6:function(){return n},lq:function(){return i},xt:function(){return a}});var n=function(e){var r=(null!=e?e:"").trim();return r?r.slice(0,1).toUpperCase():"?"},a=function(e,r,t){var n=(null!=r?r:[]).filter(Boolean);if(0===n.length)return null!=t?t:"#1677ff";for(var a=0,i=0;i<e.length;i+=1)a=31*a+e.charCodeAt(i)>>>0;return n[a%n.length]},i=function(e){return!0===(null==e?void 0:e.system)},o=function(e,r){return!r&&i(e)}},65051:function(e,r,t){t.d(r,{Z:function(){return k}});var n=t(44194),a=t(51865),i=t.n(a),o=t(34573),s=t(6243),u=t(5924),l=t(20914),d=t(77167);const c=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var m=function(e,r){return i()(Object.assign(Object.assign(Object.assign({},((e,r)=>{const t=!0===r.wrap?"wrap":r.wrap;return{[`${e}-wrap-${t}`]:t&&c.includes(t)}})(e,r)),((e,r)=>{const t={};return p.forEach((n=>{t[`${e}-align-${n}`]=r.align===n})),t[`${e}-align-stretch`]=!r.align&&!!r.vertical,t})(e,r)),((e,r)=>{const t={};return f.forEach((n=>{t[`${e}-justify-${n}`]=r.justify===n})),t})(e,r)))};const v=e=>{const{componentCls:r}=e;return{[r]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},g=e=>{const{componentCls:r}=e;return{[r]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},h=e=>{const{componentCls:r}=e,t={};return c.forEach((e=>{t[`${r}-wrap-${e}`]={flexWrap:e}})),t},x=e=>{const{componentCls:r}=e,t={};return p.forEach((e=>{t[`${r}-align-${e}`]={alignItems:e}})),t},y=e=>{const{componentCls:r}=e,t={};return f.forEach((e=>{t[`${r}-justify-${e}`]={justifyContent:e}})),t};var w=(0,l.I$)("Flex",(e=>{const{paddingXS:r,padding:t,paddingLG:n}=e,a=(0,d.IX)(e,{flexGapSM:r,flexGap:t,flexGapLG:n});return[v(a),g(a),h(a),x(a),y(a)]}),(()=>({})),{resetStyle:!1}),M=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t};const b=n.forwardRef(((e,r)=>{const{prefixCls:t,rootClassName:a,className:l,style:d,flex:c,gap:f,vertical:p=!1,component:v="div",children:g}=e,h=M(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component","children"]),{flex:x,direction:y,getPrefixCls:b}=n.useContext(u.E_),k=b("flex",t),[R,Z,j]=w(k),C=null!=p?p:null==x?void 0:x.vertical,S=i()(l,a,null==x?void 0:x.className,k,Z,j,m(k,e),{[`${k}-rtl`]:"rtl"===y,[`${k}-gap-${f}`]:(0,s.n)(f),[`${k}-vertical`]:C}),P=Object.assign(Object.assign({},null==x?void 0:x.style),d);return c&&(P.flex=c),f&&!(0,s.n)(f)&&(P.gap=f),R(n.createElement(v,Object.assign({ref:r,className:S,style:P},(0,o.Z)(h,["justify","wrap","align"])),g))}));var k=b}}]);