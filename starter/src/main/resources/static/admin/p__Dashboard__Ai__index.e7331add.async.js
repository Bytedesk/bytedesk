"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2522],{5651:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(11757),r=n(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},l=n(54183),a=function(e,t){return r.createElement(l.Z,(0,o.Z)({},e,{ref:t,icon:s}))};var i=r.forwardRef(a)},50772:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(24170),n(66916),n(72614),n(1902),n(66310),n(95490),n(55735),n(30921),n(44194),n(31549)},80876:function(e,t,n){var o=n(45332),r=n.n(o),s=n(40612),l=n(55735),a=n(69169),i=n(4499),u=n(84881),d=n(30921),c=n(53530),f=n(44194),g=n(31549);t.Z=function(e){var t=e.open,n=e.onClose,o=e.onSubmit,v=(0,d.useIntl)(),m=a.A.useForm(),p=r()(m,1)[0],b=(0,s.u)((function(e){return e.currentOrg})),h=function(){console.log("handleSaveRobot"),p.validateFields().then((function(e){console.log("handleSaveRobot values:",e);var t={name:e.nickname,nickname:e.nickname,type:e.type,serviceSettings:{showQuickFaqs:!1,quickFaqs:[],showFaqs:!1,faqs:[],showGuessFaqs:!1,guessFaqs:[],showHotFaqs:!1,hotFaqs:[],showShortcutFaqs:!1,shortcutFaqs:[]},kbEnabled:!1,orgUid:null==b?void 0:b.uid};console.log("robotObject:",t),o(t),p.resetFields()})).catch((function(e){console.log("Form errors:",e)}))};return(0,f.useEffect)((function(){console.log("RobotForm useEffect"),t&&(p.resetFields(),p.setFieldsValue({type:l.f4h}))}),[t,p]),(0,g.jsx)("div",{children:(0,g.jsx)(c.Z,{title:v.formatMessage({id:"pages.robot.new",defaultMessage:"New"}),open:t,forceRender:!0,okText:v.formatMessage({id:"save",defaultMessage:"Save"}),onOk:h,onCancel:function(){p.resetFields(),n()},children:(0,g.jsxs)(a.A,{form:p,name:"basic",style:{maxWidth:400},submitter:!1,children:[(0,g.jsx)(i.Z,{label:v.formatMessage({id:"nickname",defaultMessage:"Nickname"}),name:"nickname",rules:[{required:!0,message:v.formatMessage({id:"nickname",defaultMessage:"Nickname"})}],fieldProps:{onPressEnter:function(){return h()}}}),(0,g.jsx)(u.Z,{label:v.formatMessage({id:"type",defaultMessage:"Type"}),name:["type"],options:[{label:v.formatMessage({id:l.f4h,defaultMessage:"Service"}),value:l.f4h}],rules:[{required:!0,message:v.formatMessage({id:"choose",defaultMessage:"Choose"})}],fieldProps:{placeholder:v.formatMessage({id:"choose",defaultMessage:"Choose"}),onChange:function(e){console.log("onTreeSelectChange:",e)},allowClear:!0}})]})})})}},38588:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ve}});var o=n(75574),r=n(44194),s=n(90819),l=n.n(s),a=n(89933),i=n.n(a),u=n(45332),d=n.n(u),c=n(66310),f=n(53530),g=n(27487),v=n(75365),m=n(9452),p=n(84288),b=n(15722),h=n(82669),x=n(30921),y=n(23864),C=n(80876),M=n(66916),j=n(86803),k=n(40612),w=n(76750),Z=n(55735),F=n(31549),q=function(){var e=(0,y.Z)().isDarkMode,t=(0,x.useIntl)(),n=((0,r.useRef)(!1),(0,w.Z)()),o=n.translateString,s=n.translateStringTranct,a=(0,c.V)((function(e){return{robotResult:e.robotResult,currentRobot:e.currentRobot,insertRobot:e.insertRobot,deleteCurrentRobot:e.deleteCurrentRobot,setRobotResult:e.setRobotResult,setCurrentRobot:e.setCurrentRobot}})),u=a.robotResult,q=a.currentRobot,S=a.insertRobot,R=a.deleteCurrentRobot,T=a.setRobotResult,P=a.setCurrentRobot,A=(0,k.u)((function(e){return e.currentOrg})),U=f.Z.useModal(),V=d()(U,2),E=V[0],I=V[1],L=function(){var e=i()(l()().mark((function e(n){var o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),j.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,M.gf)(n);case 4:o=e.sent,console.log("delete robot response",o),200===o.code?(j.yw.destroy(),j.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),R(n.uid)):(j.yw.destroy(),j.yw.error(o.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=i()(l()().mark((function e(){var t,n,o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading("loading"),t={pageNumber:0,pageSize:100,categoryUid:"",level:Z.whQ,type:Z.f4h,orgUid:null==A?void 0:A.uid},e.next=4,(0,M.p0)(t);case 4:n=e.sent,console.log("queryRobotsByOrg: ",n,t),200===n.code?(j.yw.destroy(),T(n),o=q&&n.data.content.some((function(e){return e.uid===q.uid})),q&&o||!(n.data.content.length>0)||P(n.data.content[0])):(j.yw.destroy(),j.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){O()}),[]);var z=(0,r.useState)(!1),N=d()(z,2),W=N[0],B=N[1],Q=function(){var e=i()(l()().mark((function e(n){var o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading(t.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=3,(0,M.lg)(n);case 3:o=e.sent,console.log("handleSaveRobot response:",o),200===o.code?(j.yw.destroy(),j.yw.success(t.formatMessage({id:"create.success"})),S(o.data),P(o.data),B(!1)):(j.yw.destroy(),B(!1),j.yw.error(o.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return t.formatMessage({id:null==e?void 0:e.type,defaultMessage:null==e?void 0:e.type})};return(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{margin:10},children:(0,F.jsxs)(g.Z,{gap:"small",align:"flex-start",children:[(0,F.jsx)(v.ZP,{size:"small",type:"primary",icon:(0,F.jsx)(h.Z,{}),onClick:function(){B(!0)},children:t.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,F.jsx)(v.ZP,{size:"small",onClick:O,children:t.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,F.jsx)(v.ZP,{onClick:function(){return function(e){E.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,F.jsx)(b.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(o(e.nickname),"】？"),onOk:function(){L(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})}(q)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==q?void 0:q.uid),children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),(0,F.jsx)(m.Z,{itemLayout:"horizontal",dataSource:u.data.content,renderItem:function(t,n){return(0,F.jsx)(m.Z.Item,{style:(null==q?void 0:q.uid)===t.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){P(t)},children:(0,F.jsx)(m.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,F.jsx)(p.C,{src:t.avatar}),title:(0,F.jsx)(F.Fragment,{children:s(null==t?void 0:t.nickname)}),description:D(t)})})}}),W&&(0,F.jsx)(C.Z,{open:W,onClose:function(){B(!1)},onSubmit:Q}),I]})},S=n(8247),R=n(35386),T=n(73193),P=n.n(T),A=n(6631),U=n(59908),V=n(69169),E=n(4499),I=n(32350),L=n(16309),O=(n(27015),function(){var e,t=V.A.useForm(),n=d()(t,1)[0],o=(0,x.useIntl)(),s=(0,w.Z)().translateString,a=(0,c.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),u=a.currentRobot,f=a.setCurrentRobot,g=(0,r.useState)(""),m=d()(g,2),b=m[0],h=m[1],y=(0,r.useState)(s(null==u||null===(e=u.serviceSettings)||void 0===e?void 0:e.welcomeTip)||""),C=d()(y,2),k=C[0],Z=C[1];(0,r.useEffect)((function(){var e;u&&(n.setFieldValue("nickname",s(null==u?void 0:u.nickname)),Z(s(null==u||null===(e=u.serviceSettings)||void 0===e?void 0:e.welcomeTip)),n.setFieldValue("description",s(null==u?void 0:u.description)))}),[u]);var q=function(){var e=i()(l()().mark((function e(t){var n,r,s,a,i,d,c,g;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),j.yw.loading(o.formatMessage({id:"updating"})),c=P()(P()({},u),{},{serviceSettings:P()(P()({},u.serviceSettings),{},{welcomeTip:k,welcomeFaqUids:null==u||null===(n=u.serviceSettings)||void 0===n||null===(n=n.welcomeFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})),quickFaqUids:null==u||null===(r=u.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null==u||null===(s=u.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==u||null===(a=u.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==u||null===(i=u.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==u||null===(d=u.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),nickname:t.nickname,description:t.description,avatar:b}),console.log("robotObject:",c),e.next=6,(0,M.$l)(c);case 6:g=e.sent,console.log("updateRobot response:",g),200===g.code?(j.yw.success(o.formatMessage({id:"update.success"})),f(g.data)):j.yw.error(g.message),j.yw.destroy();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=i()(l()().mark((function e(t){var n,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",t),h(t),n=P()(P()({},u),{},{avatar:t}),e.next=5,(0,M.lz)(n);case 5:r=e.sent,console.log("updateAvatar response:",r),200===r.code?(j.yw.success(o.formatMessage({id:"update.success"})),f(r.data)):j.yw.error(r.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h(null==u?void 0:u.avatar)}),[u]),(0,F.jsxs)(V.A,{form:n,style:{marginLeft:"20px"},onFinish:q,children:[(0,F.jsx)(L.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:null==e?void 0:e.fileList},label:o.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,F.jsxs)(A.G,{onSuccess:S,onError:function(e){console.log("handleUploadError:",e)},children:[(0,F.jsx)(p.C,{src:b}),(0,F.jsx)(v.ZP,{icon:(0,F.jsx)(U.Z,{}),children:o.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,F.jsx)(E.Z,{width:"md",name:"nickname",label:o.formatMessage({id:"agent.info.nickname"}),rules:[{required:!0,message:o.formatMessage({id:"agent.info.nickname.required"})}]}),(0,F.jsx)(I.Z,{width:"md",name:"description",label:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),rules:[{required:!0,message:o.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})}]})]})}),z=n(27522),N=n(5651),W=n(48708),B=n(84881),Q=function(){var e=(0,x.useIntl)(),t=(0,x.useNavigate)(),n=V.A.useForm(),o=d()(n,1)[0],s=(0,w.Z)().translateString,a=(0,r.useState)(),u=d()(a,2),f=u[0],g=u[1],m=(0,k.u)((function(e){return e.currentOrg})),p=(0,c.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),b=p.currentRobot,h=p.setCurrentRobot,y=function(){var t=i()(l()().mark((function t(){var n,o;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,type:Z.QPQ,orgUid:null==m?void 0:m.uid},t.next=4,(0,z.AP)(n);case 4:o=t.sent,console.log("getKeywordBase response:",n,o),j.yw.destroy(),200===o.code?g(o):j.yw.error(o.message);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){y()}),[]),(0,r.useEffect)((function(){o.setFieldValue("kbUid",null==b?void 0:b.kbUid),o.setFieldValue("kbEnabled",null==b?void 0:b.kbEnabled)}),[b]);var C=function(){var t=i()(l()().mark((function t(n){var o,r,s,a,i,u,d;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onFinish values:",n),u=P()(P()({},b),{},{serviceSettings:P()(P()({},b.serviceSettings),{},{faqUids:null==b||null===(o=b.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==b||null===(r=b.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==b||null===(s=b.serviceSettings)||void 0===s||null===(s=s.guessFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),hotFaqUids:null==b||null===(a=b.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==b||null===(i=b.serviceSettings)||void 0===i||null===(i=i.shortcutFaqs)||void 0===i?void 0:i.map((function(e){return e.uid}))}),kbUid:n.kbUid,kbEnabled:n.kbEnabled}),console.log("robotObject:",u),t.next=5,(0,M.$l)(u);case 5:d=t.sent,console.log("updateRobot response:",d),200===d.code?(j.yw.destroy(),j.yw.success(e.formatMessage({id:"update.success"})),h(d.data)):(j.yw.destroy(),j.yw.error(d.message));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var e=i()(l()().mark((function e(t){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setFieldValue("kbEnabled",t),e.prev=1,e.next=4,o.validateFields();case 4:n=e.sent,C(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("验证失败:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsx)("div",{children:(0,F.jsxs)(V.A,{form:o,onFinish:C,children:[(0,F.jsx)(W.Z,{name:"kbEnabled",label:e.formatMessage({id:"robot.kb.enable",defaultMessage:"启用知识库"}),tooltip:e.formatMessage({id:"robot.kb.enable.tooltip",defaultMessage:"开启后，机器人将优先使用知识库回答问题"}),fieldProps:{onChange:q}}),(0,F.jsx)(B.Z,{width:"md",name:"kbUid",label:"知识库",options:null==f?void 0:f.data.content.map((function(e){return{value:e.uid,label:s(e.name)}})),fieldProps:{onChange:function(e){console.log("kbUid:",e)}}}),(0,F.jsx)(V.A.Item,{children:(0,F.jsx)(v.ZP,{icon:(0,F.jsx)(N.Z,{}),onClick:function(){t("/kb/llm/data")},children:"添加大模型知识库"},"github")})]})})},D=n(43705),K=n(71469),X=(n(50796),n(10154)),_=n.n(X),G=n(36605),$=n(82863),H=n(17082),J=n(73457),Y=n(35175),ee=["fieldProps","proFieldProps","min","max","step","marks","vertical","range"],te=r.forwardRef((function(e,t){var n=e.fieldProps,o=e.proFieldProps,r=e.min,s=e.max,l=e.step,a=e.marks,i=e.vertical,u=e.range,d=(0,J.Z)(e,ee);return(0,F.jsx)(Y.Z,(0,H.Z)({valueType:"slider",fieldProps:(0,H.Z)((0,H.Z)({},n),{},{min:r,max:s,step:l,marks:a,vertical:i,range:u,style:null==n?void 0:n.style}),ref:t,proFieldProps:o,filedConfig:{ignoreWidth:!0}},d))})),ne=n(32327),oe=n(62673),re=n(92053),se=n(40679),le=n(36310),ae=(ne.Z.Text,function(){var e,t=(0,x.useIntl)(),n=(0,y.Z)().isDarkMode,o=V.A.useForm(),s=d()(o,1)[0],a=(0,w.Z)().translateString,u=(0,k.u)((function(e){return e.currentOrg})),f=(0,r.useState)([]),g=d()(f,2),m=g[0],p=g[1],b=(0,r.useState)({}),h=d()(b,2),C=h[0],q=h[1],S=(0,r.useState)(!1),R=d()(S,2),T=R[0],A=R[1],U=(0,r.useState)(""),E=d()(U,2),L=E[0],O=E[1],z=(0,r.useState)(""),N=d()(z,2),Q=N[0],D=N[1],K=(0,r.useState)(""),X=d()(K,2),H=X[0],J=X[1],Y=(0,r.useState)(""),ee=d()(Y,2),ae=(ee[0],ee[1]),ie=(0,r.useState)(""),ue=d()(ie,2),de=(ue[0],ue[1]),ce=(0,r.useState)(!1),fe=d()(ce,2),ge=fe[0],ve=fe[1],me=(0,r.useState)(""),pe=d()(me,2),be=pe[0],he=pe[1],xe=(0,r.useState)(""),ye=d()(xe,2),Ce=ye[0],Me=ye[1],je=(0,r.useState)(""),ke=d()(je,2),we=ke[0],Ze=ke[1],Fe=(0,r.useState)({}),qe=d()(Fe,2),Se=qe[0],Re=qe[1],Te=(0,c.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Pe=Te.currentRobot,Ae=Te.setCurrentRobot;(0,r.useEffect)((function(){var e,t,n,o,r,l,i,u,d,c,f,g,v,m,p,b,h,x,y,C,M;s.setFieldValue("enabled",null==Pe||null===(e=Pe.llm)||void 0===e?void 0:e.enabled),s.setFieldValue("streamEnabled",null==Pe||null===(t=Pe.llm)||void 0===t?void 0:t.streamEnabled),s.setFieldValue("topK",null==Pe||null===(n=Pe.llm)||void 0===n?void 0:n.topK),s.setFieldValue("scoreThreshold",null==Pe||null===(o=Pe.llm)||void 0===o?void 0:o.scoreThreshold),s.setFieldValue("provider",null==Pe||null===(r=Pe.llm)||void 0===r?void 0:r.provider),s.setFieldValue("model",null==Pe||null===(l=Pe.llm)||void 0===l?void 0:l.model),s.setFieldValue("temperature",null==Pe||null===(i=Pe.llm)||void 0===i?void 0:i.temperature),s.setFieldValue("topP",null==Pe||null===(u=Pe.llm)||void 0===u?void 0:u.topP),s.setFieldValue("prompt",a(null==Pe||null===(d=Pe.llm)||void 0===d?void 0:d.prompt)),s.setFieldValue("defaultReply",null==Pe||null===(c=Pe.llm)||void 0===c?void 0:c.defaultReply),s.setFieldValue("contextMsgCount",null==Pe||null===(f=Pe.llm)||void 0===f?void 0:f.contextMsgCount),s.setFieldValue("rerankEnabled",null==Pe||null===(g=Pe.llm)||void 0===g?void 0:g.rerankEnabled),s.setFieldValue("rerankProvider",null==Pe||null===(v=Pe.llm)||void 0===v?void 0:v.rerankProvider),s.setFieldValue("rerankModel",null==Pe||null===(m=Pe.llm)||void 0===m?void 0:m.rerankModel),s.setFieldValue("searchType",(null==Pe||null===(p=Pe.llm)||void 0===p?void 0:p.searchType)||"MIXED");var j=(null==Pe||null===(b=Pe.llm)||void 0===b?void 0:b.provider)||"",k=(null==Pe||null===(h=Pe.llm)||void 0===h?void 0:h.model)||"";ae((null==Pe||null===(x=Pe.llm)||void 0===x?void 0:x.rerankProvider)||""),de((null==Pe||null===(y=Pe.llm)||void 0===y?void 0:y.rerankModel)||""),O(j),D(k);var w=(null==Pe||null===(C=Pe.llm)||void 0===C?void 0:C.rerankProvider)||"",Z=(null==Pe||null===(M=Pe.llm)||void 0===M?void 0:M.rerankModel)||"";he(w),Me(Z),k&&!H&&J(k)}),[Pe]),(0,r.useEffect)((function(){var e=L,t=Q;if(e&&t&&C[e]){var n=C[e].find((function(e){return e.value===t}));n&&J(n.label)}}),[C,L,Q]),(0,r.useEffect)((function(){var e=be,t=Ce;if(e&&t&&Se[e]){var n=Se[e].find((function(e){return e.value===t}));n&&Ze(n.label)}}),[Se,be,Ce]);var Ue=function(){var e=i()(l()().mark((function e(){var t,n,o,r,s,a;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={pageNumber:0,pageSize:100,sortBy:"createdAt",sortDirection:"ascend",orgUid:null==u?void 0:u.uid,level:Z.whQ},e.next=4,(0,G.mK)(t);case 4:n=e.sent,console.log("queryLlmProvidersByOrg response:",n.data,t),200===n.code?(r=n.data.content||[],p(r),(s=null==Pe||null===(o=Pe.llm)||void 0===o?void 0:o.provider)&&(a=r.find((function(e){return e.name===s})))&&("ollama"===a.name?Qe():Ke(a))):j.yw.error(n.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch providers:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){Ue()}),[]);var Ve=(0,r.useCallback)((function(){A(!0)}),[]),Ee=(0,r.useCallback)((function(){A(!1)}),[]),Ie=(0,r.useCallback)((function(e,t,n){O(e),D(t),J(n),s.setFieldValue("provider",e),s.setFieldValue("model",t),A(!1),s.submit()}),[s]),Le=((0,r.useCallback)((function(){ve(!0)}),[]),(0,r.useCallback)((function(){ve(!1)}),[])),Oe=(0,r.useCallback)((function(e,t,n){he(e),Me(t),Ze(n),s.setFieldValue("rerankProvider",e),s.setFieldValue("rerankModel",t),ve(!1),s.submit()}),[s]),ze=(0,r.useCallback)((function(e,t){q((function(n){return P()(P()({},n),{},_()({},e,t))}))}),[]),Ne=(0,r.useCallback)((function(e,t){Re((function(n){return P()(P()({},n),{},_()({},e,t))}))}),[]),We=function(){var e=i()(l()().mark((function e(n){var o,r,s,a,i,u,d,c;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading(t.formatMessage({id:"updating"})),d=P()(P()({},Pe),{},{serviceSettings:P()(P()({},Pe.serviceSettings),{},{welcomeFaqUids:null==Pe||null===(o=Pe.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null===(r=Pe.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==Pe||null===(s=Pe.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==Pe||null===(a=Pe.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==Pe||null===(i=Pe.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==Pe||null===(u=Pe.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),llm:P()(P()({},Pe.llm),{},{enabled:n.enabled,streamEnabled:n.streamEnabled,topK:n.topK,scoreThreshold:n.scoreThreshold,provider:n.provider,model:n.model,temperature:n.temperature,topP:n.topP,prompt:n.prompt,defaultReply:n.defaultReply,contextMsgCount:n.contextMsgCount,rerankEnabled:n.rerankEnabled,rerankProvider:n.rerankProvider,rerankModel:n.rerankModel,searchType:n.searchType})}),e.next=4,(0,M.$l)(d);case 4:200===(c=e.sent).code?(j.yw.destroy(),j.yw.success(t.formatMessage({id:"update.success"})),Ae(c.data)):(j.yw.destroy(),j.yw.error(c.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=(0,r.useCallback)((function(e,t){return[(0,F.jsx)(v.ZP,{type:"default",onClick:function(){var t;null===(t=e.form)||void 0===t||t.resetFields()},children:"重置"},"reset"),(0,F.jsx)(v.ZP,{type:"primary",onClick:function(){var t;null===(t=e.form)||void 0===t||t.submit()},children:"保存"},"submit")]}),[]),Qe=function(){var e=i()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,re.VM)();case 3:200===(n=e.sent).code&&n.data?De():j.yw.error(n.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to check Ollama status:",e.t0),j.yw.error(t.formatMessage({id:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=i()(l()().mark((function e(){var n,o,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,re.c8)();case 3:n=e.sent,console.log("getOllamaLocalModels: ",n.data),200===n.code?(o=n.data.map((function(e){return{value:e.name,label:e.name,providerName:"ollama"}})),q((function(e){return P()(P()({},e),{},{ollama:o})})),"ollama"===L&&Q&&(r=o.find((function(e){return e.value===Q})))&&J(r.label)):j.yw.error(n.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch local models:",e.t0),j.yw.error(t.formatMessage({id:"error"}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=i()(l()().mark((function e(n){var o,r,a,i;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={pageNumber:0,pageSize:50,providerName:null==n?void 0:n.name,orgUid:null==u?void 0:u.uid,level:Z.whQ},e.next=4,(0,$.LF)(o);case 4:r=e.sent,console.log("queryLlmModelsByOrg: ",r.data,o),200===r.code?(a=r.data.content.map((function(e){return{value:e.name,label:e.nickname,description:e.description,providerName:n.name}})),q((function(e){return P()(P()({},e),{},_()({},n.name,a))})),n.name===s.getFieldValue("provider")&&Q&&(i=a.find((function(e){return e.value===Q})))&&J(i.label)):j.yw.error(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to fetch models:",e.t0),j.yw.error(t.formatMessage({id:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(V.A,{form:s,size:"large",layout:"vertical",style:{maxWidth:"800px"},submitter:{render:Be,submitButtonProps:{size:"large",htmlType:"button"}},onFinish:We,children:[!(0,le.Ox)()&&(0,F.jsx)(B.Z,{width:"lg",name:"searchType",label:"搜索类型",tooltip:"选择合适的知识库检索方式，不同检索方式适用于不同场景",options:[{label:"全文检索",value:Z.ccx},{label:"向量检索",value:Z.DGp,disabled:!0},{label:"混合检索",value:Z.rk3,disabled:!0}],rules:[{required:!0,message:"请选择搜索类型"}],fieldProps:{dropdownRender:function(e){return(0,F.jsxs)("div",{children:[e,(0,F.jsxs)("div",{style:{padding:"8px 12px"},children:[(0,F.jsx)("div",{style:{borderTop:"1px solid #e8e8e8",margin:"4px 0"}}),(0,F.jsxs)("div",{style:{padding:"8px 0",fontSize:"12px",color:n?"rgba(255, 255, 255, 0.7)":"rgba(0,0,0,0.45)"},children:[(0,F.jsx)("strong",{children:"全文检索："}),"基于关键词匹配，搜索速度快，适合精确查询和简单问答，但可能无法理解语义相关性",(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsx)("strong",{children:"向量检索："}),"基于语义相似度，能够理解问题的上下文和意图，适合复杂查询和模糊匹配，但计算成本较高",(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsx)("strong",{children:"混合检索："}),"结合全文检索和向量检索的优势，先用关键词筛选，再通过语义排序，平衡效率和准确性，适合大多数场景"]})]})]})}}}),!1,(0,F.jsx)(W.Z,{width:"lg",name:"enabled",label:"启用对话模型",tooltip:"启用对话模型后，将会关闭关键词。用户在发送消息时，将会直接请求大模型。",fieldProps:{onChange:function(e){setTimeout((function(){s.submit()}),100)}}}),s.getFieldValue("enabled")&&(0,F.jsxs)(F.Fragment,{children:[!1,(0,F.jsx)(I.Z,{width:"lg",name:"prompt",label:"提示词",tooltip:"系统提示词用于指导AI模型的行为和回答方式，设置AI角色定位和回答风格。",placeholder:"请输入提示词",fieldProps:{rows:13,maxLength:16383,showCount:!0},rules:[{required:!0,message:"请输入提示词"},{max:16383,message:"提示词不能超过16383个字符"}]}),(0,F.jsx)(I.Z,{width:"lg",name:"defaultReply",label:"未知问题回复",tooltip:"当AI无法回答用户问题时，系统将返回此回复。注意：修改后仅对新会话生效，已经进行中会话的回复不受影响。",placeholder:"请输入默认回复",fieldProps:{rows:1,maxLength:100,showCount:!0},rules:[{required:!0,message:"请输入默认回复"},{max:100,message:"提示词不能超过100个字符"}]}),(0,F.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,F.jsx)(ne.Z.Text,{strong:!0,style:{marginRight:"8px"},children:"AI 模型选择："}),(0,F.jsx)("div",{style:{display:"flex",alignItems:"center",marginTop:"8px"},children:(0,F.jsx)(oe.Z,{size:"small",style:{width:"100%",maxWidth:"500px",cursor:"pointer",border:"1px solid #d9d9d9"},onClick:Ve,children:L&&Q?(0,F.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(ne.Z.Text,{type:"secondary",children:"供应商："}),(0,F.jsx)(ne.Z.Text,{strong:!0,children:a((null===(e=m.find((function(e){return e.name===L})))||void 0===e?void 0:e.nickname)||L)}),(0,F.jsx)("br",{}),(0,F.jsx)(ne.Z.Text,{type:"secondary",children:"模型："}),(0,F.jsx)(ne.Z.Text,{strong:!0,children:H||Q})]}),(0,F.jsx)(v.ZP,{type:"primary",children:"更换模型"})]}):(0,F.jsx)("div",{style:{textAlign:"center"},children:(0,F.jsx)(v.ZP,{type:"primary",children:"选择AI模型"})})})}),(0,F.jsxs)("div",{style:{display:"none"},children:[(0,F.jsx)(B.Z,{name:"provider",width:"lg"}),(0,F.jsx)(B.Z,{name:"model",width:"lg"})]})]}),(0,F.jsxs)("div",{style:{width:"500px"},children:[(0,F.jsx)(te,{width:"md",label:"温度",name:"temperature",min:0,max:1,step:.1,marks:{0:"精确",.5:"均衡",1:"创造性"},tooltip:"温度参数控制回答的随机性和创造性。值越低(接近0)，回答越确定、一致和可预测，适合需要精确答案的场景；值越高(接近1)，回答越多样化、创造性但可能不那么准确，适合创意性内容生成。",rules:[{required:!0,message:"请输入温度"}]}),(0,F.jsx)(te,{width:"md",label:"Top-P",name:"topP",min:0,max:1,step:.05,marks:{0:"低",.5:"中",1:"高"},tooltip:"核采样参数，与温度不同，它限制模型只考虑概率总和达到设定值P的词汇。设置为0.9表示模型只从占总概率90%的词汇中选择，忽略低概率词。相比温度参数，Top-P在保持回答质量的同时提供更可控的多样性。"}),(0,F.jsx)(te,{width:"md",label:"Top-K",name:"topK",min:1,max:20,step:1,marks:{1:"1",10:"10",20:"20"},tooltip:"检索相似内容时返回的最大结果数量。数值越大，检索范围越广，但可能包含不太相关的内容。"}),(0,F.jsx)(te,{width:"md",label:"相似度阈值",name:"scoreThreshold",min:0,max:1,step:.05,marks:{0:"低",.5:"中",1:"高"},tooltip:"检索相似内容时的最低相似度阈值。值越高，要求匹配度越高，结果越精准但可能较少；值越低，匹配要求宽松，结果更多但可能相关性较低。"}),(0,F.jsx)(te,{width:"md",label:"上下文消息数",name:"contextMsgCount",min:0,max:10,step:1,marks:{0:"0",5:"5",10:"10"},tooltip:"模型在回答时考虑的历史对话轮数。值越大，模型记忆的对话历史越长，但可能增加响应时间和成本。",rules:[{required:!0,message:"请输入上下文消息数"}]})]})]})]}),(0,F.jsx)(se.Z,{visible:T,onCancel:Ee,onOk:Ie,initialProvider:L,initialModel:Q,initialModelLabel:H,providers:m,currentOrgUid:null==u?void 0:u.uid,existingProviderModels:C,onModelsLoaded:ze,allowedModelTypes:[Z.JiM]}),(0,F.jsx)(se.Z,{visible:ge,onCancel:Le,onOk:Oe,initialProvider:be,initialModel:Ce,initialModelLabel:we,providers:m,currentOrgUid:null==u?void 0:u.uid,existingProviderModels:Se,onModelsLoaded:Ne,allowedModelTypes:[Z.SeQ]})]})}),ie=(n(40058),n(75808)),ue=n(40836),de=n(98473),ce=n(23635),fe=(n(69539),n(50772),function(){var e=(0,x.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"kb",label:(0,F.jsx)(x.FormattedMessage,{id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,F.jsx)(Q,{})},{key:"faq",label:(0,F.jsx)(x.FormattedMessage,{id:"menu.kbase.faq",defaultMessage:"FAQ"}),children:(0,F.jsx)(D.Z,{type:Z._X4})},{key:"quickFaqs",label:(0,F.jsx)(x.FormattedMessage,{id:"menu.kbase.quickbutton",defaultMessage:"Quick Button"}),children:(0,F.jsx)(K.Z,{type:Z._X4})},{key:"llm",label:(0,F.jsx)(x.FormattedMessage,{id:"llm",defaultMessage:"LLM"}),children:(0,F.jsx)(ae,{})},{key:"rate",label:(0,F.jsx)(x.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,F.jsx)(ce.Z,{type:Z._X4})},{key:"right",label:(0,F.jsx)(x.FormattedMessage,{id:"right",defaultMessage:"Right"}),children:(0,F.jsx)(ue.Z,{type:Z._X4})},{key:"popup",label:(0,F.jsx)(x.FormattedMessage,{id:"popup",defaultMessage:"Popup"}),children:(0,F.jsx)(ie.Z,{type:Z._X4})},{key:"trigger",label:(0,F.jsx)(x.FormattedMessage,{id:"trigger",defaultMessage:"Trigger"}),children:(0,F.jsx)(de.Z,{type:Z._X4})}]}),[e]);return(0,F.jsx)(S.Z,{tabPosition:"left",items:t})}),ge=n(14238),ve=n(87491),me=n(88996),pe=n(80601),be=n(88201),he=n(5602),xe=n(59485),ye=n(38775),Ce=n(80556),Me=n(40074),je=n(58791),ke=n(61353),we=n(16852),Ze=n(40439),Fe=n(86994),qe=n(58087),Se=n(70185),Re=function(){var e=(0,x.useIntl)(),t=(0,r.useContext)(Se.I).isDarkMode,n=(0,c.V)((function(e){return e.currentRobot})),o=(0,k.u)((function(e){return e.currentOrg})),s=(0,r.useState)(!1),a=d()(s,2),u=a[0],f=a[1],g=(0,r.useState)({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),m=d()(g,2),p=m[0],b=m[1],h=function(){var t=i()(l()().mark((function t(){var r,s,a,i,u,d,c,g,v,m,p,h,x;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("requestQueue"),f(!0),j.yw.info(e.formatMessage({id:"refresh",defaultMessage:"正在刷新队列数据..."})),t.prev=3,r={pageNumber:0,pageSize:100,agentUid:null==n?void 0:n.uid,orgUid:null==o?void 0:o.uid},t.next=7,(0,ve.Wq)(r);case 7:s=t.sent,console.log("queryQueuesByOrg response:",s.data),200==(null==s?void 0:s.code)?(j.yw.destroy(),null!=s&&null!==(a=s.data)&&void 0!==a&&a.content&&s.data.content.length>0?(x=s.data.content.reduce((function(e,t){return e.totalCount+=t.totalCount||0,e.queuingCount+=t.queuingCount||0,e.chattingCount+=t.chattingCount||0,e.offlineCount+=t.offlineCount||0,e.closedCount+=t.closedCount||0,e.leaveMsgCount+=t.leaveMsgCount||0,e.robotToAgentCount+=t.robotToAgentCount||0,e.avgWaitTime=t.avgWaitTime,e.avgResolveTime=t.avgResolveTime,e}),{totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0}),b({totalCount:null!==(i=x.totalCount)&&void 0!==i?i:0,queuingCount:null!==(u=x.queuingCount)&&void 0!==u?u:0,chattingCount:null!==(d=x.chattingCount)&&void 0!==d?d:0,offlineCount:null!==(c=x.offlineCount)&&void 0!==c?c:0,closedCount:null!==(g=x.closedCount)&&void 0!==g?g:0,leaveMsgCount:null!==(v=x.leaveMsgCount)&&void 0!==v?v:0,robotToAgentCount:null!==(m=x.robotToAgentCount)&&void 0!==m?m:0,avgWaitTime:null!==(p=x.avgWaitTime)&&void 0!==p?p:0,avgResolveTime:null!==(h=x.avgResolveTime)&&void 0!==h?h:0})):b({totalCount:0,queuingCount:0,chattingCount:0,offlineCount:0,closedCount:0,leaveMsgCount:0,robotToAgentCount:0,avgWaitTime:0,avgResolveTime:0})):j.yw.error(null==s?void 0:s.message);case 10:return t.prev=10,f(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[3,,10,13]])})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){h()}),[n]);var y={boxShadow:t?"0 4px 8px rgba(255,255,255,0.05)":"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",height:"100%",transition:"transform 0.3s",cursor:"pointer"},C={totalCount:{bg:t?"#0a2642":"#e6f7ff",valueColor:"#1890ff"},queuingCount:{bg:t?"#3b2500":"#fff7e6",valueColor:"#fa8c16"},chattingCount:{bg:t?"#162312":"#f6ffed",valueColor:"#52c41a"},offlineCount:{bg:t?"#1f1f1f":"#fcfcfc",valueColor:t?"#d9d9d9":"#8c8c8c"},closedCount:{bg:t?"#2a0e0d":"#fff1f0",valueColor:"#ff4d4f"},leaveMsgCount:{bg:t?"#230e2c":"#f9f0ff",valueColor:"#722ed1"},robotToAgentCount:{bg:t?"#102039":"#e6fffb",valueColor:"#13c2c2"},avgWaitTime:{bg:t?"#273010":"#fcffe6",valueColor:"#a0d911"},avgResolveTime:{bg:t?"#172b4d":"#f0f5ff",valueColor:"#2f54eb"}};return(0,F.jsxs)("div",{style:{padding:"4px"},children:[(0,F.jsx)("div",{style:{marginBottom:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,F.jsx)(me.Z,{title:e.formatMessage({id:"refresh",defaultMessage:"刷新数据"}),children:(0,F.jsx)(v.ZP,{type:"primary",icon:(0,F.jsx)(Ce.Z,{}),loading:u,onClick:h,size:"small",children:e.formatMessage({id:"refresh",defaultMessage:"刷新"})})})}),(0,F.jsxs)(pe.Z,{spinning:u,children:[(0,F.jsxs)(be.Z,{gutter:[16,16],children:[(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.totalCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.totalCount",defaultMessage:"总会话"}),value:p.totalCount,prefix:(0,F.jsx)(Me.Z,{}),valueStyle:{color:"#1890ff"}})})}),(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.queuingCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.queuingCount",defaultMessage:"排队中"}),value:p.queuingCount,prefix:(0,F.jsx)(je.Z,{}),valueStyle:{color:"#fa8c16"}})})}),(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.chattingCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.chattingCount",defaultMessage:"会话中"}),value:p.chattingCount,prefix:(0,F.jsx)(ke.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.offlineCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.offlineCount",defaultMessage:"离线留言"}),value:p.offlineCount,prefix:(0,F.jsx)(we.Z,{}),valueStyle:{color:"#8c8c8c"}})})}),(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.closedCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.closedCount",defaultMessage:"已关闭"}),value:p.closedCount,prefix:(0,F.jsx)(Ze.Z,{}),valueStyle:{color:"#ff4d4f"}})})}),(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.leaveMsgCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.leaveMsgCount",defaultMessage:"留言数"}),value:p.leaveMsgCount,prefix:(0,F.jsx)(Fe.Z,{}),valueStyle:{color:C.leaveMsgCount.valueColor}})})})]}),(0,F.jsx)(ye.Z,{style:{margin:"16px 0",fontSize:"14px"},children:e.formatMessage({id:"queue.additionalStats",defaultMessage:"更多统计"})}),(0,F.jsx)(be.Z,{gutter:[16,16],children:(0,F.jsx)(he.Z,{xs:24,sm:12,md:8,lg:8,xl:4,children:(0,F.jsx)(oe.Z,{style:P()(P()({},y),{},{backgroundColor:C.robotToAgentCount.bg}),hoverable:!0,children:(0,F.jsx)(xe.Z,{title:e.formatMessage({id:"queue.robotToAgentCount",defaultMessage:"转人工数"}),value:p.robotToAgentCount,prefix:(0,F.jsx)(qe.Z,{}),valueStyle:{color:C.robotToAgentCount.valueColor}})})})})]})]})},Te=function(){var e=(0,x.useIntl)(),t=(0,r.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,F.jsx)(O,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,F.jsx)(ge.Z,{type:Z._X4})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,F.jsx)(fe,{})},{key:"monitor",label:e.formatMessage({id:"queue.dashboard.title",defaultMessage:"Monitor"}),children:(0,F.jsx)(Re,{})},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,F.jsx)(R.Z,{type:Z._X4})}]}),[e]);return(0,F.jsx)(S.Z,{defaultActiveKey:"basic",items:t})},Pe=n(96865),Ae=o.Z.Sider,Ue=o.Z.Content,Ve=function(){var e=(0,Pe.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,r=e.contentStyle;return(0,F.jsxs)(o.Z,{children:[(0,F.jsx)(Ae,{width:n,style:t,children:(0,F.jsx)(q,{})}),(0,F.jsx)(o.Z,{children:(0,F.jsx)(Ue,{style:r,children:(0,F.jsx)(Te,{})})})]})}}}]);