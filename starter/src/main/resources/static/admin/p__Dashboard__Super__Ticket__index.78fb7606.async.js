"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3959],{80556:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(83910),o=t(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},a=t(54183),s=function(e,r){return o.createElement(a.Z,(0,n.Z)({},e,{ref:r,icon:i}))};var u=o.forwardRef(s)},55785:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(83910),o=t(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},a=t(54183),s=function(e,r){return o.createElement(a.Z,(0,n.Z)({},e,{ref:r,icon:i}))};var u=o.forwardRef(s)},68263:function(e,r,t){var n=t(94433),o=t(38956),i=t(37150),a=t(44194),s=t(85618),u=t(35865),c=t(31549),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,r){var t=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,m=e.mode,h=e.valueEnum,g=e.request,v=e.showSearch,k=e.options,w=(0,o.Z)(e,l),x=(0,a.useContext)(s.Z);return(0,c.jsx)(u.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,i.h)(h),request:g,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:k,mode:m,showSearch:v,getPopupContainer:x.getPopupContainer},t),ref:r,proFieldProps:f},w),{},{children:d}))},f=a.forwardRef((function(e,r){var t=e.fieldProps,l=e.children,p=e.params,f=e.proFieldProps,m=e.mode,h=e.valueEnum,g=e.request,v=e.options,k=(0,o.Z)(e,d),w=(0,n.Z)({options:v,mode:m||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},t),x=(0,a.useContext)(s.Z);return(0,c.jsx)(u.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,i.h)(h),request:g,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:x.getPopupContainer},w),ref:r,proFieldProps:f},k),{},{children:l}))})),m=a.forwardRef(p);m.SearchSelect=f,m.displayName="ProFormComponent",r.Z=m},93312:function(e,r,t){var n=t(94433),o=t(38956),i=t(44194),a=t(35865),s=t(31549),u=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],c=i.forwardRef((function(e,r){var t=e.fieldProps,i=e.unCheckedChildren,c=e.checkedChildren,l=e.proFieldProps,d=(0,o.Z)(e,u);return(0,s.jsx)(a.Z,(0,n.Z)({valueType:"switch",fieldProps:(0,n.Z)({unCheckedChildren:i,checkedChildren:c},t),ref:r,valuePropName:"checked",proFieldProps:l,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},d))}));r.Z=c},16581:function(e,r,t){t.d(r,{LE:function(){return l},W5:function(){return m},p0:function(){return p},zl:function(){return g}});var n=t(90819),o=t.n(n),i=t(73193),a=t.n(i),s=t(89933),u=t.n(s),c=t(19736);function l(e){return d.apply(this,arguments)}function d(){return(d=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/query/org",{method:"GET",params:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/create",{method:"POST",data:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/update",{method:"POST",data:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/workgroup/delete",{method:"POST",data:a()({},r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},88449:function(e,r,t){var n=t(26710);r.Z=function(){var e=(0,n.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto",padding:10}}}},65122:function(e,r,t){t.r(r);var n=t(90819),o=t.n(n),i=t(89933),a=t.n(i),s=t(45332),u=t.n(s),c=t(44194),l=t(20921),d=t(51891),p=t(9428),f=t(3925),m=t(53229),h=t(48907),g=t(66810),v=t(80556),k=t(55785),w=t(30064),x=t(93312),Z=t(68263),C=t(32960),b=t(16581),y=t(88449),M=t(36125),P=t(19736),j=t(93527),S=t(31549),E="df_org_uid";r.default=function(){var e=w.A.useForm(),r=u()(e,1)[0],t=(0,c.useState)(!1),n=u()(t,2),i=n[0],s=n[1],F=(0,c.useState)(!1),q=u()(F,2),L=q[0],A=q[1],V=(0,c.useState)([]),z=u()(V,2),T=z[0],U=z[1],R=(0,c.useState)(!1),I=u()(R,2),B=I[0],H=I[1],N=(0,y.Z)().contentStyle,O=(0,P.useIntl)(),W=(0,c.useMemo)((function(){return T.map((function(e){return{label:e.nickname||e.uid,value:e.uid,status:e.status,connectedAgentCount:e.connectedAgentCount}}))}),[T]),_=function(){var e=a()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,(0,C.sc)();case 4:t=e.sent,M.Z.debug("工单中心配置:",null==t?void 0:t.data),200===(null==t?void 0:t.code)&&null!=t&&t.data&&r.setFieldsValue({workgroupUid:null==t?void 0:t.data.workgroupUid,ticketCenterEnabled:null===(n=null==t?void 0:t.data.ticketCenterEnabled)||void 0===n||n,description:null==t?void 0:t.data.description}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("加载工单中心配置失败:",e.t0),j.yw.error(O.formatMessage({id:"super.ticket.message.loadSettingsFailed"}));case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=a()(o()().mark((function e(){var r,t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.prev=1,t={orgUid:E,pageNumber:0,pageSize:100,superUser:!0},e.next=5,(0,b.LE)(t);case 5:n=e.sent,M.Z.debug("工作组列表:",null==n?void 0:n.data,t),200===(null==n?void 0:n.code)&&null!=n&&null!==(r=n.data)&&void 0!==r&&r.content&&U(null==n?void 0:n.data.content),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("加载工作组列表失败:",e.t0),j.yw.error(O.formatMessage({id:"super.ticket.message.loadWorkgroupsFailed"}));case 14:return e.prev=14,H(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){_(),D()}),[]);var G=function(){var e=a()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.validateFields();case 3:return t=e.sent,A(!0),e.next=7,(0,C.k2)({workgroupUid:t.workgroupUid,ticketCenterEnabled:t.ticketCenterEnabled,description:t.description});case 7:200===(null==(n=e.sent)?void 0:n.code)?(j.yw.success(O.formatMessage({id:"super.ticket.message.saveSuccess"})),_()):j.yw.error((null==n?void 0:n.message)||O.formatMessage({id:"super.ticket.message.saveFailed"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("保存工单中心配置失败:",e.t0),j.yw.error(O.formatMessage({id:"super.ticket.message.saveFailed"}));case 15:return e.prev=15,A(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return(0,S.jsx)("div",{style:N,children:(0,S.jsx)(l.Z,{spinning:i,children:(0,S.jsxs)(d.Z,{title:O.formatMessage({id:"super.ticket.title"}),extra:(0,S.jsxs)(p.Z,{children:[(0,S.jsx)(f.ZP,{icon:(0,S.jsx)(v.Z,{}),onClick:function(){_(),D()},children:O.formatMessage({id:"super.common.refresh"})}),(0,S.jsx)(f.ZP,{type:"primary",icon:(0,S.jsx)(k.Z,{}),loading:L,onClick:G,children:O.formatMessage({id:"super.common.save"})})]}),children:[(0,S.jsx)(m.Z,{message:O.formatMessage({id:"super.common.alert.title"}),description:(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{children:O.formatMessage({id:"super.ticket.alert.desc"})}),(0,S.jsxs)("ul",{style:{marginBottom:0},children:[(0,S.jsx)("li",{children:O.formatMessage({id:"super.ticket.alert.item.assign"})}),(0,S.jsx)("li",{children:O.formatMessage({id:"super.ticket.alert.item.workgroupSource"},{orgUid:E})}),(0,S.jsx)("li",{children:O.formatMessage({id:"super.ticket.alert.item.otherSettings"})})]})]}),type:"info",showIcon:!0,style:{marginBottom:24}}),(0,S.jsxs)(w.A,{form:r,layout:"vertical",submitter:!1,initialValues:{ticketCenterEnabled:!0},children:[(0,S.jsx)(x.Z,{name:"ticketCenterEnabled",label:O.formatMessage({id:"super.common.enableConfig"}),extra:O.formatMessage({id:"super.ticket.form.ticketCenterEnabled.extra",defaultMessage:"启用则开启平台工单中心，否则关闭平台工单中心"}),fieldProps:{checkedChildren:O.formatMessage({id:"super.common.enabled"}),unCheckedChildren:O.formatMessage({id:"super.common.disabled"})}}),(0,S.jsx)(h.Z,{orientation:"left",children:O.formatMessage({id:"super.ticket.divider.workgroup"})}),(0,S.jsx)(Z.Z,{name:"workgroupUid",label:O.formatMessage({id:"super.ticket.form.workgroup.label"}),rules:[{required:!0,message:O.formatMessage({id:"super.ticket.form.workgroup.required"})}],tooltip:O.formatMessage({id:"super.ticket.form.workgroup.tooltip"}),extra:(0,S.jsxs)(p.Z,{style:{marginTop:8},children:[(0,S.jsx)("span",{children:O.formatMessage({id:"super.ticket.workgroup.count"},{count:T.length})}),(0,S.jsx)(f.ZP,{type:"link",size:"small",onClick:D,loading:B,children:O.formatMessage({id:"super.common.refreshList"})})]}),placeholder:O.formatMessage({id:"super.ticket.form.workgroup.placeholder"}),options:W,fieldProps:{loading:B,showSearch:!0,optionFilterProp:"label",filterOption:function(e,r){var t;return String(null!==(t=null==r?void 0:r.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},optionItemRender:function(e){return(0,S.jsxs)(p.Z,{children:[(0,S.jsx)("span",{children:e.label}),"AVAILABLE"===e.status&&(0,S.jsx)(g.Z,{color:"green",children:O.formatMessage({id:"super.ticket.workgroup.online"})}),"number"==typeof e.connectedAgentCount&&(0,S.jsx)(g.Z,{color:"blue",children:O.formatMessage({id:"super.ticket.workgroup.agentCount"},{count:e.connectedAgentCount})})]})}}})]})]})})})}}}]);