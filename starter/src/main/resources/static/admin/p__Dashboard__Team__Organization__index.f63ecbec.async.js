"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4822],{59908:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(11757),o=r(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=r(54183),i=function(e,n){return o.createElement(s.Z,(0,t.Z)({},e,{ref:n,icon:a}))};var l=o.forwardRef(i)},4499:function(e,n,r){var t=r(42601),o=r(17082),a=r(73457),s=r(46015),i=r(16309),l=r(98036),u=r(36490),c=r(44194),p=r(35175),d=r(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",v=function(e){var n=(0,s.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),r=(0,t.Z)(n,2),a=r[0],u=r[1];return(0,d.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(n){var r,t=n.getFieldValue(e.name||[]);return(0,d.jsx)(l.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return u(e)},content:(0,d.jsxs)("div",{style:{padding:"4px 0"},children:[null===(r=e.statusRender)||void 0===r?void 0:r.call(e,t),e.strengthText?(0,d.jsx)("div",{style:{marginTop:10},children:(0,d.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:a,children:e.children}))}})},h=function(e){var n=e.fieldProps,r=e.proFieldProps,t=(0,a.Z)(e,f);return(0,d.jsx)(p.Z,(0,o.Z)({valueType:m,fieldProps:n,filedConfig:{valueType:m},proFieldProps:r},t))};h.Password=function(e){var n=e.fieldProps,r=e.proFieldProps,s=(0,a.Z)(e,g),i=(0,c.useState)(!1),l=(0,t.Z)(i,2),f=l[0],h=l[1];return null!=n&&n.statusRender&&s.name?(0,d.jsx)(v,{name:s.name,statusRender:null==n?void 0:n.statusRender,popoverProps:null==n?void 0:n.popoverProps,strengthText:null==n?void 0:n.strengthText,open:f,onOpenChange:h,children:(0,d.jsx)("div",{children:(0,d.jsx)(p.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,u.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var r;null==n||null===(r=n.onBlur)||void 0===r||r.call(n,e),h(!1)},onClick:function(e){var r;null==n||null===(r=n.onClick)||void 0===r||r.call(n,e),h(!0)}}),proFieldProps:r,filedConfig:{valueType:m}},s))})}):(0,d.jsx)(p.Z,(0,o.Z)({valueType:"password",fieldProps:n,proFieldProps:r,filedConfig:{valueType:m}},s))},h.displayName="ProFormComponent",n.Z=h},32350:function(e,n,r){var t=r(17082),o=r(73457),a=r(44194),s=r(35175),i=r(31549),l=["fieldProps","proFieldProps"],u=function(e,n){var r=e.fieldProps,a=e.proFieldProps,u=(0,o.Z)(e,l);return(0,i.jsx)(s.Z,(0,t.Z)({ref:n,valueType:"textarea",fieldProps:r,proFieldProps:a},u))};n.Z=a.forwardRef(u)},17208:function(e,n,r){r.d(n,{A8:function(){return p},Kq:function(){return f},RL:function(){return m}});var t=r(90819),o=r.n(t),a=r(73193),s=r.n(a),i=r(89933),l=r.n(i),u=r(55735),c=r(41159);function p(e){return d.apply(this,arguments)}function d(){return(d=l()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/query",{method:"GET",params:s()(s()({},n),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/create",{method:"POST",data:s()(s()({},n),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/update",{method:"POST",data:s()(s()({},n),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6631:function(e,n,r){r.d(n,{G:function(){return d}});var t=r(73193),o=r.n(t),a=(r(44194),r(30348)),s=r(55735),i=r(28977),l=r.n(i),u=r(86803),c=r(36310),p=r(31549),d=function(e){var n=e.children,r=e.onSuccess,t=e.onError,i={file:null,fileName:"test.png",fileType:"image/png",isAvatar:"true",kbType:s.IrL,categoryUid:"",kbUid:"",client:s.bVn},d={name:"file",accept:"image/*",action:(0,c.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var n=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return i.file=e,i.fileName=n,i.fileType=e.type,console.log("beforeUpload",i),!0},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var n=e.file.response.data.fileUrl;r(n),u.yw.success("".concat(e.file.name," 上传成功"))}else t(e.file),u.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(u.yw.error("".concat(e.file.name," 上传失败")),t(e.file))}};return(0,p.jsx)(a.Z,o()(o()({},d),{},{children:n}))}},87860:function(e,n,r){r.r(n);var t=r(90819),o=r.n(t),a=r(73193),s=r.n(a),i=r(89933),l=r.n(i),u=r(45332),c=r.n(u),p=r(86803),d=r(17208),f=r(40612),g=r(6631),m=r(59908),v=r(69169),h=r(4499),y=r(32350),x=r(41159),Z=r(16309),P=r(84288),w=r(75365),b=r(44194),j=r(31549);n.default=function(){var e=Z.Z.useForm(),n=c()(e,1)[0],r=(0,x.useIntl)(),t=(0,f.u)((function(e){return{currentOrg:e.currentOrg,setCurrentOrg:e.setCurrentOrg}})),a=t.currentOrg,i=t.setCurrentOrg,u=(0,b.useState)(""),T=c()(u,2),M=T[0],C=T[1],F=function(){var e=l()(o()().mark((function e(n){var t,l;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.yw.loading({content:r.formatMessage({id:"saving"}),key:"save",duration:0}),t=s()(s()(s()({},a),n),{},{logo:M}),console.log("orgObject:",t),e.next=5,(0,d.RL)(t);case 5:l=e.sent,console.log("updateOrg response:",l),200===l.code?(p.yw.destroy(),p.yw.success(r.formatMessage({id:"update.success"})),i(l.data)):(p.yw.destroy(),p.yw.error(l.message));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,b.useEffect)((function(){a&&C(a.logo)}),[a]),(0,j.jsx)("div",{style:{padding:"10px"},children:(0,j.jsxs)(v.A,{form:n,initialValues:{name:a.name,description:a.description},onFinish:F,children:[(0,j.jsx)(Z.Z.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:r.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,j.jsxs)(g.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),C(e)},onError:function(e){console.log("handleUploadError:",e)},children:[(0,j.jsx)(P.C,{src:M}),(0,j.jsx)(w.ZP,{icon:(0,j.jsx)(m.Z,{}),children:r.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,j.jsx)(h.Z,{rules:[{required:!0,message:r.formatMessage({id:"name",defaultMessage:"Name"})}],label:r.formatMessage({id:"name",defaultMessage:"Name"}),name:"name",width:"md"}),(0,j.jsx)(y.Z,{rules:[{required:!0,message:r.formatMessage({id:"description",defaultMessage:"Description"})}],label:r.formatMessage({id:"description",defaultMessage:"Description"}),name:"description",width:"md"})]})})}}}]);