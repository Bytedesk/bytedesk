"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2187],{51956:function(e,t,n){n.d(t,{Z:function(){return C}});var a=n(73193),r=n.n(a),s=n(84176),d=n.n(s),i=n(90819),o=n.n(i),u=n(89933),l=n.n(u),c=n(45332),f=n.n(c),p=n(86803),g=n(30921);function m(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/v1/upload/query/org",{method:"GET",params:r()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return M.apply(this,arguments)}function M(){return(M=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/v1/upload/delete",{method:"POST",data:r()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=n(40612),y=(n(44521),n(55735)),w=n(81947),k=n(61355),I=n(75365),S=n(28977),j=n.n(S),T=n(44194),F=n(31549),b=["current","pageSize"],C=function(e){var t=e.level,n=(0,g.useIntl)(),a=(0,T.useRef)(),s=((0,g.useNavigate)(),(0,T.useState)(1)),i=f()(s,2),u=(i[0],i[1]),c=(0,T.useState)(10),h=f()(c,2),M=(h[0],h[1]),S=(0,v.u)((function(e){return e.currentOrg})),C=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,F.jsx)(g.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"nickname",render:function(e,t){return(0,F.jsx)(F.Fragment,{children:(n=null==t?void 0:t.user,a=JSON.parse(n),null==a?void 0:a.nickname)});var n,a}},{title:(0,F.jsx)(g.FormattedMessage,{id:"fileName",defaultMessage:"fileName"}),dataIndex:"fileName"},{title:(0,F.jsx)(g.FormattedMessage,{id:"fileType",defaultMessage:"fileType"}),dataIndex:"fileType",hideInSearch:!0},{title:(0,F.jsx)(g.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0},{title:(0,F.jsx)(g.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,F.jsx)(g.FormattedMessage,{id:"client",defaultMessage:"Client"}),dataIndex:"client",hideInSearch:!0},{title:(0,F.jsx)(g.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",width:180,hideInSearch:!0,render:function(e,t,n,a){return j()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],A=function(){var e=l()(o()().mark((function e(t){var r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,x(t);case 3:r=e.sent,console.log("delete response:",r),200===r.code?(null==a||a.current.reload(),p.yw.success(n.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):p.yw.error(n.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=[].concat(C,[{title:n.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:150,render:function(e,t,a,r){return[(0,F.jsx)("a",{onClick:function(){var e=null==t?void 0:t.fileUrl,n=encodeURIComponent(e);window.open(decodeURIComponent(n))},children:n.formatMessage({id:"open",defaultMessage:"Open"})},"editable"),(0,F.jsx)(k.Z,{title:n.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(n.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(null==t?void 0:t.fileName,"】？"),onConfirm:function(){return A(t)},okText:n.formatMessage({id:"ok"}),cancelText:n.formatMessage({id:"cancel"}),children:(0,F.jsx)(I.ZP,{size:"small",type:"link",danger:!0,children:n.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}]);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(w.Z,{columns:N,actionRef:a,cardBordered:!0,style:{padding:16},request:function(){var e=l()(o()().mark((function e(n,a,s){var i,l,c,f,g;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",n,a,s),i=n.current,l=n.pageSize,c=d()(n,b),u(i),M(l),f=r()({pageNumber:i-1,pageSize:l,categoryUid:"",kbUid:"",orgUid:t===y.Hxq?"":null==S?void 0:S.uid},c),e.next=7,m(f);case 7:return g=e.sent,console.log("getAllUploads response:",g,f),200===g.code||p.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"文档",toolBarRender:function(){return[]}})})}},25541:function(e,t,n){n.r(t);var a=n(51956),r=n(55735),s=n(30921),d=n(75574),i=(n(44194),n(31549));d.Z.Sider,d.Z.Content,s.FormattedMessage;t.default=function(){return(0,i.jsx)(a.Z,{level:r.whQ})}}}]);