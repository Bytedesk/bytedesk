import{u as o,a as c,T as i,q as g}from"./index-Bi1NyqrF.js";const l={async loadThreads(){const{setThreads:r,setLoading:t,setError:a}=o.getState();try{t(!0),a(null);const e={pageNumber:0,pageSize:100,type:i},s=await g(e);if(console.log("queryThreads response",s.data,e),s.data.code===200){const n=s.data.data.content.filter(d=>!d.hide);r(n)}else throw new Error(s.data.message)}catch(e){a(e instanceof Error?e.message:"加载会话失败")}finally{t(!1)}},async resetAndLoad(){const{setPagination:r}=o.getState(),t=c.getState().currentOrg;return r({pageNumber:0,pageSize:100,total:0}),this.loadThreads(t.uid)},async loadThreadsWithFilters(r){const{setFilter:t}=o.getState();return Object.entries(r).forEach(([a,e])=>{t(a,e)}),this.resetAndLoad()}};export{l as threadService};
