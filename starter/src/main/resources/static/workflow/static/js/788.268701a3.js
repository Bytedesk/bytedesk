/*! For license information please see 788.268701a3.js.LICENSE.txt */
(self.webpackChunk_flowgram_ai_demo_free_layout=self.webpackChunk_flowgram_ai_demo_free_layout||[]).push([["788"],{2276:function(e,n,r){var i=r(8124);e.exports={Graph:i.Graph,json:r(6067),alg:r(3044),version:i.version}},5861:function(e){e.exports=function(e){var n,r={},i=[];return e.nodes().forEach(function(o){n=[],function i(o){r.hasOwnProperty(o)||(r[o]=!0,n.push(o),e.successors(o).forEach(i),e.predecessors(o).forEach(i))}(o),n.length&&i.push(n)}),i}},2096:function(e){function n(e,n,r,o){for(var s=[[e,!1]];s.length>0;){var a=s.pop();a[1]?o.push(a[0]):r.hasOwnProperty(a[0])||(r[a[0]]=!0,s.push([a[0],!0]),i(n(a[0]),e=>s.push([e,!1])))}}function r(e,n,r,o){for(var s=[e];s.length>0;){var a=s.pop();r.hasOwnProperty(a)||(r[a]=!0,o.push(a),i(n(a),e=>s.push(e)))}}function i(e,n){for(var r=e.length;r--;)n(e[r],r,e);return e}e.exports=function(e,i,o){Array.isArray(i)||(i=[i]);var s=e.isDirected()?n=>e.successors(n):n=>e.neighbors(n),a="post"===o?n:r,l=[],h={};return i.forEach(n=>{if(!e.hasNode(n))throw Error("Graph does not have node: "+n);a(n,s,h,l)}),l}},4145:function(e,n,r){var i=r(9530);e.exports=function(e,n,r){return e.nodes().reduce(function(o,s){return o[s]=i(e,s,n,r),o},{})}},9530:function(e,n,r){var i=r(3829);e.exports=function(e,n,r,s){return function(e,n,r,o){var s,a,l={},h=new i,c=function(e){var n=e.v!==s?e.v:e.w,i=l[n],o=r(e),c=a.distance+o;if(o<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);c<i.distance&&(i.distance=c,i.predecessor=s,h.decrease(n,c))};for(e.nodes().forEach(function(e){var r=e===n?0:Number.POSITIVE_INFINITY;l[e]={distance:r},h.add(e,r)});h.size()>0&&(a=l[s=h.removeMin()]).distance!==Number.POSITIVE_INFINITY;)o(s).forEach(c);return l}(e,String(n),r||o,s||function(n){return e.outEdges(n)})};var o=()=>1},1510:function(e,n,r){var i=r(1669);e.exports=function(e){return i(e).filter(function(n){return n.length>1||1===n.length&&e.hasEdge(n[0],n[0])})}},5550:function(e){e.exports=function(e,r,i){var o,s,a,l,h;return o=e,s=r||n,a=i||function(n){return e.outEdges(n)},l={},(h=o.nodes()).forEach(function(e){l[e]={},l[e][e]={distance:0},h.forEach(function(n){e!==n&&(l[e][n]={distance:Number.POSITIVE_INFINITY})}),a(e).forEach(function(n){var r=n.v===e?n.w:n.v,i=s(n);l[e][r]={distance:i,predecessor:e}})}),h.forEach(function(e){var n=l[e];h.forEach(function(r){var i=l[r];h.forEach(function(r){var o=i[e],s=n[r],a=i[r],l=o.distance+s.distance;l<a.distance&&(a.distance=l,a.predecessor=s.predecessor)})})}),l};var n=()=>1},3044:function(e,n,r){e.exports={components:r(5861),dijkstra:r(9530),dijkstraAll:r(4145),findCycles:r(1510),floydWarshall:r(5550),isAcyclic:r(6984),postorder:r(5731),preorder:r(3691),prim:r(749),tarjan:r(1669),topsort:r(195)}},6984:function(e,n,r){var i=r(195);e.exports=function(e){try{i(e)}catch(e){if(e instanceof i.CycleException)return!1;throw e}return!0}},5731:function(e,n,r){var i=r(2096);e.exports=function(e,n){return i(e,n,"post")}},3691:function(e,n,r){var i=r(2096);e.exports=function(e,n){return i(e,n,"pre")}},749:function(e,n,r){var i=r(2090),o=r(3829);e.exports=function(e,n){var r,s=new i,a={},l=new o;function h(e){var i=e.v===r?e.w:e.v,o=l.priority(i);if(void 0!==o){var s=n(e);s<o&&(a[i]=r,l.decrease(i,s))}}if(0===e.nodeCount())return s;e.nodes().forEach(function(e){l.add(e,Number.POSITIVE_INFINITY),s.setNode(e)}),l.decrease(e.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),a.hasOwnProperty(r))s.setEdge(r,a[r]);else if(c)throw Error("Input graph is not connected: "+e);else c=!0;e.nodeEdges(r).forEach(h)}return s}},1669:function(e){e.exports=function(e){var n=0,r=[],i={},o=[];return e.nodes().forEach(function(s){i.hasOwnProperty(s)||function s(a){var l=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),e.successors(a).forEach(function(e){i.hasOwnProperty(e)?i[e].onStack&&(l.lowlink=Math.min(l.lowlink,i[e].index)):(s(e),l.lowlink=Math.min(l.lowlink,i[e].lowlink))}),l.lowlink===l.index){var h,c=[];do i[h=r.pop()].onStack=!1,c.push(h);while(a!==h);o.push(c)}}(s)}),o}},195:function(e){function n(e){var n={},i={},o=[];if(e.sinks().forEach(function s(a){if(i.hasOwnProperty(a))throw new r;n.hasOwnProperty(a)||(i[a]=!0,n[a]=!0,e.predecessors(a).forEach(s),delete i[a],o.push(a))}),Object.keys(n).length!==e.nodeCount())throw new r;return o}class r extends Error{constructor(){super(...arguments)}}e.exports=n,n.CycleException=r},3829:function(e){e.exports=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var n=this._keyIndices[e];if(void 0!==n)return this._arr[n].priority}min(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key}add(e,n){var r=this._keyIndices;if(e=String(e),!r.hasOwnProperty(e)){var i=this._arr,o=i.length;return r[e]=o,i.push({key:e,priority:n}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,n){var r=this._keyIndices[e];if(n>this._arr[r].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(e){var n=this._arr,r=2*e,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(this._swap(e,o),this._heapify(o)))}_decrease(e){for(var n,r=this._arr,i=r[e].priority;0!==e&&!(r[n=e>>1].priority<i);)this._swap(e,n),e=n}_swap(e,n){var r=this._arr,i=this._keyIndices,o=r[e],s=r[n];r[e]=s,r[n]=o,i[s.key]=e,i[o.key]=n}}},2090:function(e){"use strict";function n(e,n){e[n]?e[n]++:e[n]=1}function r(e,n){--e[n]||delete e[n]}function i(e,n,r,i){var o=""+n,s=""+r;if(!e&&o>s){var a=o;o=s,s=a}return o+"\x01"+s+"\x01"+(void 0===i?"\0":i)}function o(e,n){return i(e,n.v,n.w,n.name)}e.exports=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>void 0;_defaultEdgeLabelFn=()=>void 0;_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!e.hasOwnProperty("directed")||e.directed,this._isMultigraph=!!e.hasOwnProperty("multigraph")&&e.multigraph,this._isCompound=!!e.hasOwnProperty("compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(n=>0===Object.keys(e._in[n]).length)}sinks(){var e=this;return this.nodes().filter(n=>0===Object.keys(e._out[n]).length)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(e){r.length>1?i.setNode(e,n):i.setNode(e)}),this}setNode(e,n){return this._nodes.hasOwnProperty(e)?arguments.length>1&&(this._nodes[e]=n):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var n=this;if(this._nodes.hasOwnProperty(e)){var r=e=>n.removeEdge(n._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(e){n.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(r),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,n){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(void 0===n)n="\0";else{n+="";for(var r=n;void 0!==r;r=this.parent(r))if(r===e)throw Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var n=this._parent[e];if("\0"!==n)return n}}children(e="\0"){if(this._isCompound){var n=this._children[e];if(n)return Object.keys(n)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var n=this._preds[e];if(n)return Object.keys(n)}successors(e){var n=this._sucs[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){let i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([r,i]){e(r)&&n.setNode(r,i)}),Object.values(this._edgeObjs).forEach(function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,r.edge(e))});var i={};return this._isCompound&&n.nodes().forEach(e=>n.setParent(e,function e(o){var s=r.parent(o);return void 0===s||n.hasNode(s)?(i[o]=s,s):s in i?i[s]:e(s)}(e))),n}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,n){var r=this,i=arguments;return e.reduce(function(e,o){return i.length>1?r.setEdge(e,o,n):r.setEdge(e,o),o}),this}setEdge(){var e,r,o,s,a=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,r=l.w,o=l.name,2==arguments.length&&(s=arguments[1],a=!0)):(e=l,r=arguments[1],o=arguments[3],arguments.length>2&&(s=arguments[2],a=!0)),e=""+e,r=""+r,void 0!==o&&(o=""+o);var h=i(this._isDirected,e,r,o);if(this._edgeLabels.hasOwnProperty(h))return a&&(this._edgeLabels[h]=s),this;if(void 0!==o&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[h]=a?s:this._defaultEdgeLabelFn(e,r,o);var c=function(e,n,r,i){var o=""+n,s=""+r;if(!e&&o>s){var a=o;o=s,s=a}var l={v:o,w:s};return i&&(l.name=i),l}(this._isDirected,e,r,o);return e=c.v,r=c.w,Object.freeze(c),this._edgeObjs[h]=c,n(this._preds[r],e),n(this._sucs[e],r),this._in[r][h]=c,this._out[e][h]=c,this._edgeCount++,this}edge(e,n,r){var s=1==arguments.length?o(this._isDirected,arguments[0]):i(this._isDirected,e,n,r);return this._edgeLabels[s]}edgeAsObj(){let e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,n,r){var s=1==arguments.length?o(this._isDirected,arguments[0]):i(this._isDirected,e,n,r);return this._edgeLabels.hasOwnProperty(s)}removeEdge(e,n,s){var a=1==arguments.length?o(this._isDirected,arguments[0]):i(this._isDirected,e,n,s),l=this._edgeObjs[a];return l&&(e=l.v,n=l.w,delete this._edgeLabels[a],delete this._edgeObjs[a],r(this._preds[n],e),r(this._sucs[e],n),delete this._in[n][a],delete this._out[e][a],this._edgeCount--),this}inEdges(e,n){var r=this._in[e];if(r){var i=Object.values(r);return n?i.filter(e=>e.v===n):i}}outEdges(e,n){var r=this._out[e];if(r){var i=Object.values(r);return n?i.filter(e=>e.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}}},8124:function(e,n,r){e.exports={Graph:r(2090),version:r(1955)}},6067:function(e,n,r){var i=r(2090);e.exports={write:function(e){var n,r,i={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(n=e).nodes().map(function(e){var r=n.node(e),i=n.parent(e),o={v:e};return void 0!==r&&(o.value=r),void 0!==i&&(o.parent=i),o}),edges:(r=e).edges().map(function(e){var n=r.edge(e),i={v:e.v,w:e.w};return void 0!==e.name&&(i.name=e.name),void 0!==n&&(i.value=n),i})};return void 0!==e.graph()&&(i.value=structuredClone(e.graph())),i},read:function(e){var n=new i(e.options).setGraph(e.value);return e.nodes.forEach(function(e){n.setNode(e.v,e.value),e.parent&&n.setParent(e.v,e.parent)}),e.edges.forEach(function(e){n.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),n}}},1955:function(e){e.exports="2.2.2"},3024:function(e,n,r){"use strict";r.d(n,{A:()=>h,Z:()=>c});var i=r(4194),o=r(1229),s=r.n(o),a=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let l=i.forwardRef((e,n)=>{let{svg:r,spin:o=!1,rotate:l,style:h,className:c,prefixCls:u="semi",type:d,size:p="default"}=e,f=a(e,["svg","spin","rotate","style","className","prefixCls","type","size"]),g=s()(`${u}-icon`,{[`${u}-icon-extra-small`]:"extra-small"===p,[`${u}-icon-small`]:"small"===p,[`${u}-icon-default`]:"default"===p,[`${u}-icon-large`]:"large"===p,[`${u}-icon-extra-large`]:"extra-large"===p,[`${u}-icon-spinning`]:!0===o,[`${u}-icon-${d}`]:!!d},c),y={};return Number.isSafeInteger(l)&&(y.transform=`rotate(${l}deg)`),Object.assign(y,h),i.createElement("span",Object.assign({role:"img",ref:n,"aria-label":d,className:g,style:y},f),r)});l.elementType="Icon";let h=(e,n)=>{let r=i.forwardRef((r,o)=>i.createElement(l,Object.assign({svg:i.createElement(e),type:n,ref:o},r)));return r.elementType="Icon",r},c=l},8341:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08 7.6a1.5 1.5 0 0 1 2.12 0l5.66 5.65 5.66-5.65a1.5 1.5 0 1 1 2.12 2.12l-6.72 6.72a1.5 1.5 0 0 1-2.12 0L4.08 9.72a1.5 1.5 0 0 1 0-2.12Z",fill:"currentColor"}))},"chevron_down")},5384:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.44 19.8a1.5 1.5 0 0 1 0-2.13l5.66-5.65-5.66-5.66a1.5 1.5 0 1 1 2.12-2.12l6.72 6.72a1.5 1.5 0 0 1 0 2.12L9.56 19.8a1.5 1.5 0 0 1-2.12 0Z",fill:"currentColor"}))},"chevron_right")},2439:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M7 4c0-1.1.9-2 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2h-1V8c0-2-1-3-3-3H7V4Z",fill:"currentColor"}),i.createElement("path",{d:"M5 7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2H5Z",fill:"currentColor"}))},"copy")},9603:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-11 9a9 9 0 1 0 0-18 9 9 0 0 0 0 18ZM8.11 8.11a1 1 0 0 1 1.42 0L12 10.6l2.47-2.48a1 1 0 1 1 1.42 1.42L13.4 12l2.48 2.47a1 1 0 0 1-1.42 1.42L12 13.4 9.53 15.9a1 1 0 0 1-1.42-1.42L10.6 12 8.1 9.53a1 1 0 0 1 0-1.42Z",fill:"currentColor"}))},"cross_circle_stroked")},1883:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 5V4h4v1h-4ZM8 5V3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2h4a1 1 0 1 1 0 2h-1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7H4a1 1 0 0 1 0-2h4Zm7 2H7v13h10V7h-2ZM9 9.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7Zm4 0c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7Z",fill:"currentColor"}))},"delete_stroked")},8786:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M10 2a1.5 1.5 0 0 1 0 3H7.12l3.94 3.94a1.5 1.5 0 0 1-2.12 2.12L5 7.12V10a1.5 1.5 0 0 1-3 0V3.5C2 2.67 2.67 2 3.5 2H10Z",fill:"currentColor"}),i.createElement("path",{d:"M19 14a1.5 1.5 0 0 1 3 0v6.5c0 .83-.67 1.5-1.5 1.5H14a1.5 1.5 0 0 1 0-3h2.88l-3.94-3.94a1.5 1.5 0 0 1 2.12-2.12L19 16.88V14Z",fill:"currentColor"}))},"expand")},7059:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M9 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}),i.createElement("path",{d:"M9 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}),i.createElement("path",{d:"M11 19a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",fill:"currentColor"}),i.createElement("path",{d:"M15 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}),i.createElement("path",{d:"M17 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",fill:"currentColor"}),i.createElement("path",{d:"M15 21a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",fill:"currentColor"}))},"handle")},2753:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm2-16a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-5 3.75c0-.41.34-.75.75-.75h2.75a1 1 0 0 1 1 1v5.5h.75a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5h.75v-5h-.75a.75.75 0 0 1-.75-.75Z",fill:"currentColor"}))},"info_circle")},1175:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a6.5 6.5 0 0 0-6.5 6.5V10H5a2 2 0 0 0-2 2v8c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-.5V8.5A6.5 6.5 0 0 0 12 2Zm3.5 8V8.5a3.5 3.5 0 1 0-7 0V10h7Z",fill:"currentColor"}))},"lock")},9682:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M7 12a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z",fill:"currentColor"}),i.createElement("path",{d:"M14.5 12a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z",fill:"currentColor"}),i.createElement("path",{d:"M19.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",fill:"currentColor"}))},"more")},3845:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M20.5 13.5a1.5 1.5 0 0 0 0-3h-7v-7a1.5 1.5 0 0 0-3 0v7h-7a1.5 1.5 0 0 0 0 3h7v7a1.5 1.5 0 0 0 3 0v-7h7Z",fill:"currentColor"}))},"plus")},6088:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.44 2.44a1.5 1.5 0 0 0 0 2.12L16.88 7H9.25C5.16 7 2 10.58 2 14.5S5.16 22 9.25 22h3.25a1.5 1.5 0 0 0 0-3H9.25C6.98 19 5 16.93 5 14.5S6.98 10 9.25 10h7.63l-2.44 2.44a1.5 1.5 0 0 0 2.12 2.12l5-5a1.5 1.5 0 0 0 0-2.12l-5-5a1.5 1.5 0 0 0-2.12 0Z",fill:"currentColor"}))},"redo")},4376:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M2.44 2.44a1.5 1.5 0 0 0 0 2.12L6.88 9H4a1.5 1.5 0 0 0 0 3h6.5a1.5 1.5 0 0 0 1.5-1.5V4a1.5 1.5 0 0 0-3 0v2.88L4.56 2.44a1.5 1.5 0 0 0-2.12 0Z",fill:"currentColor"}),i.createElement("path",{d:"M20 12a1.5 1.5 0 0 1 0 3h-2.88l4.44 4.44a1.5 1.5 0 1 1-2.12 2.12L15 17.12V20a1.5 1.5 0 1 1-3 0v-6.5a1.5 1.5 0 0 1 1.5-1.5H20Z",fill:"currentColor"}))},"shrink")},3589:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M6.95 7.72h10.13c.4 0 .64.45.42.78l-5.07 7.6a.5.5 0 0 1-.83 0L6.54 8.5a.5.5 0 0 1 .41-.78Z",fill:"currentColor"}))},"small_triangle_down")},8349:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M16.32 6.96v10.13a.5.5 0 0 1-.78.41l-7.6-5.06a.5.5 0 0 1 0-.83l7.6-5.07a.5.5 0 0 1 .78.42Z",fill:"currentColor"}))},"small_triangle_left")},6578:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.56 2.44a1.5 1.5 0 0 1 0 2.12L7.12 7h7.63C18.84 7 22 10.58 22 14.5S18.84 22 14.75 22H11.5a1.5 1.5 0 0 1 0-3h3.25c2.27 0 4.25-2.07 4.25-4.5S17.02 10 14.75 10H7.12l2.44 2.44a1.5 1.5 0 0 1-2.12 2.12l-5-5a1.5 1.5 0 0 1 0-2.12l5-5a1.5 1.5 0 0 1 2.12 0Z",fill:"currentColor"}))},"undo")},708:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=r(4194);let o=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M5.5 7.5A6.5 6.5 0 0 1 18.48 7h-3.02a3.5 3.5 0 0 0-6.96.5V10H19a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h.5V7.5Z",fill:"currentColor"}))},"unlock")},3427:function(e,n,r){"use strict";r.d(n,{ZPm:()=>i});let i=r(3024).Z},413:function(e,n,r){"use strict";let i,o;r.d(n,{vT:()=>sp,zx:()=>ek,u:()=>ng,iV:()=>sg,hE:()=>eF,Sx:()=>a7,JO:()=>sV,II:()=>tQ,iz:()=>sv,FN:()=>af,Ct:()=>et,Od:()=>s8,mP:()=>a1,Lt:()=>sz,hU:()=>em,J2:()=>n_,XZ:()=>n3,Uu:()=>sY,Vp:()=>rI});var s,a,l,h,c,u,d,p,f,g,y,m,b,_,E,w,x,C,S,D,N,O,M,I,T,k,P,A,L,j,R,z,V,F=r(1607),$=r.n(F),B=r(6705),H=r.n(B),K=r(3224),U=r.n(K),W=r(4194),G=r(1229),Y=r.n(G),Z=r(7862),X=r.n(Z);let Q=W.createContext({}),q="semi";var J=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let ee={PREFIX:`${q}-badge`}.PREFIX;class et extends W.PureComponent{render(){let e,{direction:n}=this.context,r=this.props,{count:i,dot:o,type:s,countClassName:a,countStyle:l,theme:h,position:c="rtl"===n?"leftTop":"rightTop",overflowCount:u,style:d,children:p,className:f}=r,g=J(r,["count","dot","type","countClassName","countStyle","theme","position","overflowCount","style","children","className"]),y=i&&!(U()(i)||H()(i)),m=null!=i,b=Y()(a,{[`${ee}-${s}`]:!y,[`${ee}-${h}`]:!y,[`${ee}-${c}`]:!!c&&!!p,[`${ee}-block`]:!p,[`${ee}-dot`]:o,[`${ee}-count`]:!o&&!y&&m,[`${ee}-custom`]:y});return e=U()(i)?u&&u<i?`${u}+`:`${i}`:i,W.createElement("span",Object.assign({className:Y()(ee,f)},g),p,W.createElement("span",{className:b,style:d||l,"x-semi-prop":"count"},o?null:e))}}et.contextType=Q,et.propTypes={count:X().node,dot:X().bool,type:X().oneOf(["success","primary","secondary","tertiary","warning","danger"]),theme:X().oneOf(["solid","light","inverted"]),position:X().oneOf(["leftTop","leftBottom","rightTop","rightBottom"]),overflowCount:X().number,style:X().object,className:X().string,children:X().node,onClick:X().func,onMouseEnter:X().func,onMouseLeave:X().func,countClassName:X().string,countStyle:X().object},et.defaultProps={dot:!1,type:"primary",theme:"solid",className:"",onClick:()=>$(),onMouseEnter:()=>$(),onMouseLeave:()=>$()};var en=r(3352),er=r.n(en);let ei={PREFIX:`${q}-button`},eo={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light","outline"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"};function es(){}var ea=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let el=eo.sizes,{htmlTypes:eh,btnTypes:ec}=eo;class eu extends W.PureComponent{render(){let e=this.props,{children:n,block:r,htmlType:i,loading:o,circle:s,className:a,style:l,disabled:h,size:c,theme:u,type:d,prefixCls:p,iconPosition:f}=e,g=ea(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),y=Object.assign(Object.assign({disabled:h},er()(g,["x-semi-children-alias"])),{className:Y()(p,{[`${p}-${d}`]:!h&&d,[`${p}-disabled`]:h,[`${p}-size-large`]:"large"===c,[`${p}-size-small`]:"small"===c,[`${p}-light`]:"light"===u,[`${p}-block`]:r,[`${p}-circle`]:s,[`${p}-borderless`]:"borderless"===u,[`${p}-outline`]:"outline"===u,[`${p}-${d}-disabled`]:h&&d},a),type:i,"aria-disabled":h}),m={};return a&&a.includes("-with-icon")||(m["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),W.createElement("button",Object.assign({},y,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:l}),W.createElement("span",Object.assign({className:Y()(`${p}-content`,this.props.contentClassName),onClick:e=>h&&e.stopPropagation()},m),n))}}eu.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:es,onClick:es,onMouseEnter:es,onMouseLeave:es,prefixCls:ei.PREFIX},eu.propTypes={children:X().node,disabled:X().bool,prefixCls:X().string,style:X().object,size:X().oneOf(el),type:X().oneOf(ec),block:X().bool,onClick:X().func,onMouseDown:X().func,circle:X().bool,loading:X().bool,htmlType:X().oneOf(eh),theme:X().oneOf(eo.themes),className:X().string,onMouseEnter:X().func,onMouseLeave:X().func,"aria-label":X().string,contentClassName:X().string};var ed=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let ep=-1,ef=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:r,className:i}=n,o=ed(n,["id","className"]),s=r;null==s&&(s=++ep);let a=`linearGradient-${s}`;return W.createElement("svg",Object.assign({},o,{className:i,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),W.createElement("defs",null,W.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:a},W.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),W.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),W.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),W.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},W.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),W.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${a})`,strokeWidth:"4",strokeLinecap:"round"})))};var eg=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};class ey extends W.PureComponent{render(){let e=this.props,{children:n,iconPosition:r,iconSize:i,iconStyle:o,style:s,icon:a,noHorizontalPadding:l,theme:h,className:c,prefixCls:u,loading:d}=e,p=eg(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),f=Object.assign({},s);Array.isArray(l)?(l.includes("left")&&(f.paddingLeft=0),l.includes("right")&&(f.paddingRight=0)):!0===l?(f.paddingLeft=0,f.paddingRight=0):"string"==typeof l&&("left"===l&&(f.paddingLeft=0),"right"===l&&(f.paddingRight=0));let g=null,y=null;d&&!p.disabled?y=W.createElement(ef,null):W.isValidElement(a)&&(y=a);let m=Y()({[`${u}-content-left`]:"right"===r,[`${u}-content-right`]:"left"===r}),b=this.props["x-semi-children-alias"]||"children",_=null!=n?W.createElement("span",{className:m,"x-semi-prop":b},n):null;g="left"===r?W.createElement(W.Fragment,null,y,_):W.createElement(W.Fragment,null,_,y);let E=Y()(c,`${u}-with-icon`,{[`${u}-with-icon-only`]:null==_||""===_,[`${u}-loading`]:d});return W.createElement(eu,Object.assign({},p,{className:E,theme:h,style:f}),g)}}ey.defaultProps={iconPosition:eo.DEFAULT_ICON_POSITION,prefixCls:ei.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:$(),onMouseLeave:$()},ey.elementType="IconButton",ey.propTypes={iconStyle:X().object,style:X().object,loading:X().bool,prefixCls:X().string,icon:X().oneOfType([X().object,X().string,X().node]),iconSize:X().oneOf(["extra-small","small","default","large","extra-large","custom"]),noHorizontalPadding:X().oneOfType([X().bool,X().string,X().array]),children:X().node,theme:X().string,iconPosition:X().oneOf(eo.iconPositions),className:X().string,onMouseEnter:X().func,onMouseLeave:X().func};let em=ey;var ev=r(3546),eb=r.n(ev),e_=r(6226),eE=r.n(e_),ew=r(7692),ex=r.n(ew);function eC(e){try{return e instanceof HTMLElement}catch(n){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}let eS=new class{constructor(){this.config={}}};var eD=function(e,n,r,i){return new(r||(r=Promise))(function(o,s){function a(e){try{h(i.next(e))}catch(e){s(e)}}function l(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var n;e.done?o(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,l)}h((i=i.apply(e,n||[])).next())})};function eN(e,n){e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),!n&&e.nativeEvent&&"function"==typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}let eO=e=>W.isValidElement(e)&&"Icon"===eb()(e.type,"elementType");function eM(e,n){return eD(this,void 0,void 0,function*(){return 0===n?void(yield e()):void(yield new Promise(r=>{setTimeout(()=>eD(this,void 0,void 0,function*(){yield eM(e,n-1),r()}),0)}))})}function eI(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=()=>{var n,r;return(null==(r=null==(n=null==eS?void 0:eS.config)?void 0:n.overrideDefaultProps)?void 0:r[e])||{}};return new Proxy(Object.assign({},n),{get(e,n,i){let o=r();return n in o?o[n]:Reflect.get(e,n,i)},set:(e,n,r,i)=>Reflect.set(e,n,r,i),ownKeys(){let e=r();return Array.from(new Set([...Reflect.ownKeys(n),...Object.keys(e)]))},getOwnPropertyDescriptor(e,n){let i=r();return n in i?Reflect.getOwnPropertyDescriptor(i,n):Reflect.getOwnPropertyDescriptor(e,n)}})}class eT extends W.PureComponent{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e)}render(){let e=Object.assign({},this.props),n=!!e.icon,r=!!e.loading,i=!!e.disabled;return n||r&&!i?W.createElement(em,Object.assign({},e)):W.createElement(eu,Object.assign({},e))}}eT.__SemiComponentName__="Button",eT.propTypes=Object.assign(Object.assign({},eu.propTypes),em.propTypes),eT.defaultProps=eI(eT.__SemiComponentName__),eT.elementType="Button";let ek=eT,eP=function(e){if("development"===eb()(process,"env.NODE_ENV")){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console.log(e,...r)}};function eA(e){return Object.keys(e).reduce((n,r)=>("data-"===r.substr(0,5)&&(n[r]=e[r]),n),{})}let{hasOwnProperty:eL}=Object.prototype;class ej extends W.Component{constructor(e){super(e),this.isControlled=e=>!!(e&&this.props&&"object"==typeof this.props&&eL.call(this.props,e)),this.setStateAsync=e=>new Promise(n=>{this.setState(e,n)}),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&"function"==typeof this.foundation.init&&this.foundation.init()}componentWillUnmount(){this.foundation&&"function"==typeof this.foundation.destroy&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,n)=>this.setState(Object.assign({},e),n),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,n)=>e&&(this.cache[e]=n),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch(e){}},persistEvent:e=>{e&&e.persist&&"function"==typeof e.persist&&e.persist()}}}log(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return eP(e,...r)}getDataAttr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return eA(e)}}ej.propTypes={},ej.defaultProps={};var eR=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let ez=ei.PREFIX,eV=eo.sizes;class eF extends ej{getInnerWithLine(e){let n=[];return e.length>1?(e.slice(0,-1).forEach((e,r)=>{let i="Button"===eb()(e,"type.elementType"),o=eb()(e,"props"),{type:s,theme:a,disabled:l}=null!=o?o:{};if(i&&"outline"!==a){let i=Y()(`${ez}-group-line`,`${ez}-group-line-${null!=a?a:"light"}`,`${ez}-group-line-${null!=s?s:"primary"}`,{[`${ez}-group-line-disabled`]:l});n.push(e,W.createElement("span",{className:i,key:`line-${r}`}))}else n.push(e)}),n.push(e.slice(-1)),n):e}render(){let e,n=this.props,{children:r,disabled:i,size:o,type:s,className:a,style:l,"aria-label":h}=n,c=eR(n,["children","disabled","size","type","className","style","aria-label"]),u=[],d=Y()(`${ez}-group`,a);return r&&(e=(Array.isArray(r)?r:[r]).map((e,n)=>{var r;return(0,W.isValidElement)(e)?(0,W.cloneElement)(e,Object.assign(Object.assign(Object.assign({disabled:i,size:o,type:s},e.props),c),{key:null!=(r=e.key)?r:n})):e}),u=this.getInnerWithLine(e)),W.createElement("div",{className:d,style:l,role:"group","aria-label":h},u)}}eF.propTypes={children:X().node,disabled:X().bool,type:X().string,size:X().oneOf(eV),theme:X().oneOf(eo.themes),"aria-label":X().string},eF.defaultProps={size:"default"};var e$=r(3702),eB=r.n(e$),eH=r(5563),eK=r.n(eH),eU=r(9787),eW=r.n(eU),eG=r(5466),eY=r.n(eG),eZ=r(693),eX=r.n(eZ),eQ=r(6321),eq=r(2876),eJ=r.n(eq),e0=r(311),e1=r.n(e0),e2=r(6474),e3=r.n(e2),e4=r(5271),e5=r.n(e4);class e6{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:$(),getProps:$(),getState:$(),getStates:$(),setState:$(),getContext:$(),getContexts:$(),getCache:$(),setCache:$(),getCaches:$(),stopPropagation:$(),persistEvent:$()}}constructor(e){this._adapter=Object.assign(Object.assign({},e6.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,n){return this._adapter.setState(Object.assign({},e),n)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,n){return e&&this._adapter.setCache(e,n)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value";return e in this.getProps()}_isInProps(e){return e in this.getProps()}init(e){}destroy(){}log(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];eP(e,...r)}_persistEvent(e){this._adapter.persistEvent(e)}}let e8=e6;var e9=r(9335),e7=r.n(e9),te=r(7534),tt=r.n(te),tn=r(6492),tr=r.n(tn),ti=r(292),to=r.n(ti);function ts(e){return!tt()(e)&&!e3()(e)}function ta(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],s=!!i,a=eb()(r,"key","key"),l=eb()(r,"children","children");return e3()(e)?[]:(!function e(h){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return h.map((u,d)=>{var p;let f=(p=c?c.pos:"0",`${p}-${d}`),g=u[a],y={};r&&Object.entries(er()(r,"children")).forEach(e=>{let[n,r]=e,i=u[r];e3()(i)||(y[n]=i)});let m=Object.assign(Object.assign(Object.assign({},e7()(u,["key","label","value","icon","disabled","isLeaf"])),y),{parent:c,pos:f,children:null,data:u,_innerDataTag:!0,isEnd:[...c?c.isEnd:[],d===h.length-1]}),b="boolean"==typeof i;return(!s||!b&&i.has(g))&&o.push(m),n.has(g)&&(!s||!b&&i.has(g))?m.children=e(u[l]||[],m):m.children=[],m})}(e),o)}function tl(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!ts(e))return[];if(!r&&Array.isArray(e)?e=e.length?[e[0]]:[]:Array.isArray(e)||(e=[e]),eW()(n))return e;let i=[];return e.forEach(e=>{e in n?i.push(n[e]):e&&i.push(e)}),i}function th(e,n){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=[],o=e=>{if(!e)return;let{children:r}=e;ts(r)&&r.forEach(e=>{i.push(e.key),o(n[e.key])})};return e.forEach(e=>{r&&i.push(e),o(n[e])}),i}function tc(e,n){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=[];return e.forEach(e=>{n[e]&&n[e].parent&&i.push(n[e].parent.key)}),function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=[];return e&&e.forEach(e=>{let o=n[e];o&&o.children&&o.children.forEach(e=>{r.length&&r.includes(e.key)||i.push(e.key)})}),i}(to()(i),n,r?[]:e)}function tu(e,n){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=[],o=e=>{e.parent&&(i.push(e.parent.key),o(e.parent))};return e.forEach(e=>{n[e]&&o(n[e]),r&&i.push(e)}),i}function td(e,n){let r=Array.isArray(e)?e:[e],i=new Set([...th(r,n,!0)]),o=new Set([]),s=[],a=function(e,n){let r={};return e.forEach(e=>{if(!n[e])return;let{level:i}=n[e];r[i]?r[i].push(e):r[i]=[e]}),r}(r,n),l=e=>{let{key:r,parent:l,level:h}=e;if(!l||s.includes(r))return;let c=tc([r],n);if(s=[...s,...c],c.every(e=>i.has(e)))i.add(l.key),h-1 in a&&h?a[h-1].push(l.key):a[h-1]=[l.key];else{let e=tu([r],n,!1);o=new Set([...o,...e])}};for(;!eW()(a);){let e=tr()(Object.keys(a).map(e=>Number(e)));a[e].forEach(e=>l(n[e])),delete a[e]}return{checkedKeys:i,halfCheckedKeys:o}}function tp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return new Set((Array.isArray(e)||(e=[e]),r)?tu(e,n,!0):e)}function tf(e,n,r,i){return new Set(tu(tl(e,i,r),n,!1))}function tg(e,n,r){let i="show",o=[...e],s=[...n];if(1!==Math.abs(o.length-s.length))return{motionType:i,motionKeys:[]};let a=[];return o.length>s.length?(i="hide",a=e5()(o,s)):a=e5()(s,o),{motionType:1===a.length?i:"show",motionKeys:1===a.length?th(a,r,!1):[]}}function ty(e,n,r,i){if(!r)return!0;let o=r,s=n;return"boolean"==typeof r&&(o=(e,n)=>{let r=e.toLowerCase();return n.toString().toLowerCase().includes(r)}),i&&(s=n[i]),o(e,s,n)}function tm(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=[],s=new Set(e);return r?e.forEach(e=>{n[e]&&!ts(n[e].children)&&o.push(e),!n[e]&&i&&o.push(e)}):e.forEach(e=>{if(!n[e]){i&&o.push(e);return}let{parent:r}=n[e];r&&s.has(r.key)||o.push(e)}),o}function tv(e,n,r){let i=[],o=e=>{r[e].children&&r[e].children.forEach(e=>{let{key:r}=e;i.push(r),n.has(r)&&o(r)})};return o(e),i}function tb(e,n,r,i){let o=th([e],n,!0),s=n[e];r=new Set([...r,e]);let a=e=>{if(!e.parent)return;let{key:o}=e;if(tc([o],n).every(e=>r.has(e))){let n=e.parent;r.add(n.key),a(n)}else{let e=tu([o],n,!1);i=new Set([...i,...e])}};return a(s),{checkedKeys:new Set([...r,...o]),halfCheckedKeys:i}}function t_(e,n,r,i){let o=th([e],n,!0),s=n[e];o.forEach(e=>{r.has(e)&&r.delete(e),i.has(e)&&i.delete(e)});let a=e=>{let o=e.parent;if(!o||!r.has(o.key)&&!i.has(o.key))return;let{key:s}=e,l=tc([s],n).some(e=>r.has(e)||i.has(e)),h=tu([s],n,!1);l?h.forEach(e=>{r.has(e)&&(r.delete(e),i.add(e))}):(r.has(o.key)&&r.delete(o.key),i.has(o.key)&&i.delete(o.key),a(o))};return s&&a(s),{checkedKeys:r,halfCheckedKeys:i}}function tE(e,n){let r=eb()(n,"value","value"),i=eb()(n,"key","key");return Array.isArray(e)?e.map(e=>eb()(e,r,e[i])):eb()(e,r,e[i])}function tw(e,n,r){return n&&ts(e)?tE(e,r):e}function tx(e,n){return[...e].filter(e=>e in n)}function tC(e,n){let r=eb()(n,"disabled","disabled"),{checkedKeys:i}=td(Object.keys(e).filter(n=>e[n].data[r]),e);return i}let tS={PREFIX:`${q}-cascader`,PREFIX_OPTION:`${q}-cascader-option`},tD={SIZE_SET:["small","large","default"],VALIDATE_STATUS:["success","default","error","warning"],SHOW_NEXT_BY_CLICK:"click",SHOW_NEXT_BY_HOVER:"hover",LEAF_ONLY_MERGE_TYPE:"leafOnly",AUTO_MERGE_VALUE_MERGE_TYPE:"autoMergeValue",NONE_MERGE_TYPE:"none",SEARCH_POSITION_TRIGGER:"trigger",RELATED:"related",UN_RELATED:"unRelated"},tN="_SEMI_CASCADER_SPLIT_";function tO(e){return e.join(tN)}function tM(e){let n={};var r=e=>{let{key:r,parentKey:i}=e,o=Object.assign({},e);n[r]=o,o.parent=n[i],o.parent&&(o.parent.children=o.parent.children||[],o.parent.children.push(o))};let i=(n,o,s)=>{let a=n?n.children:e,l=null;if(n){var h;let e=s?`${s.key}${tN}${n.value}`:`${n.value}`,i=s?(h=s.pos,`${h}-${o}`):`${o}`;r(l={data:Object.assign({},n),ind:o,key:e,pos:i,level:s?s.level+1:0,parentKey:s?s.key:null,path:s?[...s.path,e]:[e],valuePath:s?[...s.valuePath,n.value]:[n.value]})}a&&a.forEach((e,n)=>{i(e,n,l)})};return i(null),n}function tI(e,n){let r;return n?tD.LEAF_ONLY_MERGE_TYPE:e?tD.AUTO_MERGE_VALUE_MERGE_TYPE:tD.NONE_MERGE_TYPE}let tT="Enter",tk="Escape",tP={BACKSPACE:8,ENTER:13,ESC:27},tA=function(e){return eb()(e,"key")===tT};class tL extends e8{constructor(e){super(Object.assign({},e)),this.handleKeyDown=e=>{e.key===tk&&this.getState("isOpen")&&this.close(e)},this.updateSearching=e=>{this._adapter.updateStates({isSearching:!1})},this.handleTagRemoveByKey=e=>{var n,r;let{keyEntities:i}=this.getStates(),{disabled:o}=this.getProps();if(o)return;let s=null!=(n=i[e])?n:{};(null==(r=null==s?void 0:s.data)?void 0:r.disable)||this._handleMultipleSelect(s),this._adapter.rePositionDropdown()},this.handleTagRemoveInTrigger=e=>{let{treeData:n}=this.getStates(),r=function(e,n){let r=e.split("-").map(e=>Number(e)),i=n,o=[];return r.forEach((e,n)=>{var r;i=0===n?i[e]:null==(r=null==i?void 0:i.children)?void 0:r[e],o.push(null==i?void 0:i.value)}),tO(o)}(e,n);this.handleTagRemoveByKey(r)}}init(){let e=this.getProp("open")||this.getProp("defaultOpen");this.collectOptions(!0),this._adapter.updateLoadingKeyRefValue(new Set),this._adapter.updateLoadedKeyRefValue(new Set),e&&!this._isDisabled()&&this.open()}_setEmptyContentMinWidth(){let e,{style:n}=this.getProps();e=n&&U()(n.width)||n&&H()(n.width)&&!n.width.includes("%")?n.width:this._adapter.getTriggerWidth(),this._adapter.setEmptyContentMinWidth(e)}destroy(){this._adapter.unregisterClickOutsideHandler()}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return!!this.getProp("filterTreeNode")}_notifyChange(e){let{onChangeWithObject:n,multiple:r}=this.getProps(),i=n?[]:"value";if(r){let n=[];e.forEach(e=>{let r=this.getItemPropPath(e,i);n.push(r)}),this._adapter.notifyChange(n)}else{let n=!e3()(e)&&"key"in e?this.getItemPropPath(e.key,i):[];this._adapter.notifyChange(n)}}_isLeaf(e){return this.getProp("loadData")?!!e.isLeaf:!e.children||!e.children.length}_clearInput(){this._adapter.updateInputValue("")}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}_isOptionDisabled(e,n){return tu([e],n,!0).some(e=>n[e].data.disabled)}getItemPropPath(e,n,r){let i=r||this.getState("keyEntities"),o=i[e],s=[];if(o)if(o._notExist)s=o.path;else{let e=o.path;s=Array.isArray(n)?e.map(e=>i[e].data):e.map(e=>i[e].data[n])}return s}_getCacheValue(e){let n,{selectedKeys:r}=this.getStates(),i=Array.from(r)[0];if(eW()(e[i]))if(eJ()(i,"not-exist-")){let r=i.match(/not-exist-(\S*)/)[1];n=eW()(e[r])?r:e[r].valuePath}else n=i;else n=e[i].valuePath;return n}collectOptions(){let e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{treeData:r,value:i,defaultValue:o}=this.getProps(),s=tM(r);this._adapter.rePositionDropdown(),n?e=o:eW()(s)||(e=this._getCacheValue(s));let a=this._isControlledComponent()?e3()(i)?[]:i:e;tt()(a)||e3()(a)?this._adapter.updateStates({keyEntities:s}):this.updateSelectedKey(a,s)}handleValueChange(e){let{keyEntities:n}=this.getStates();this.updateSelectedKey(e,n)}_getClearSelectedKey(e){let n={},{searchPlaceholder:r,placeholder:i,multiple:o}=this.getProps();return n.selectedKeys=new Set([]),n.activeKeys=new Set([]),n.filteredKeys=new Set([]),e&&!o&&(n.inputPlaceHolder=r||i||"",n.inputValue=""),n}updateSelectedKey(e,n){let{changeOnSelect:r,onChangeWithObject:i,multiple:o}=this.getProps(),{activeKeys:s,loading:a,keyEntities:l,selectedKeys:h}=this.getStates(),c=this._adapter.getLoadingKeyRefValue(),u=this._isFilterable(),d=[...s].filter(e=>c.has(e)),p=Array.isArray(e)?e:[e],f=i&&eB()(p[0])?p.map(e=>e.value):p,g=function(e){if(null==e?void 0:e.length)if(Array.isArray(e[0]))return e.map(e=>tO(e));else return[tO(e)];return[]}(f),y={},m=g.length>0?g[0]:void 0,b=m?n[m]:void 0;if(b)if(r||this._isLeaf(b.data)){if(y.selectedKeys=new Set([m]),d.length||(y.activeKeys=new Set(b.path)),u&&!o){let e=this.renderDisplayText(m,n);y.inputPlaceHolder=e}}else eY()(g,Array.from(h))&&(y=this._getClearSelectedKey(u));else if(e&&e.length){let e=f[f.length-1],r=`not-exist-${e}`;if(y.selectedKeys=new Set([r]),u&&!o){let e=this._defaultRenderText(f);y.inputPlaceHolder=e}n[r]={data:{label:e,value:e},key:r,path:f,_notExist:!0}}else if(a){y.keyEntities=e1()(l,n),this._adapter.updateStates(y);return}else y=this._getClearSelectedKey(u);y.keyEntities=n,this._adapter.updateStates(y)}open(){let e=this._isFilterable(),{multiple:n}=this.getProps();this._adapter.openMenu(),e&&(this._clearInput(),n||this.toggle2SearchInput(!0)),this._isControlledComponent()&&this.reCalcActiveKeys(),this._adapter.notifyDropdownVisibleChange(!0),this._adapter.registerClickOutsideHandler(e=>this.close(e)),this._setEmptyContentMinWidth()}reCalcActiveKeys(){let{selectedKeys:e,activeKeys:n,keyEntities:r}=this.getStates(),i=r[[...e][0]];if(!i)return;let o=new Set(i.path);eY()(o,n)||this._adapter.updateStates({activeKeys:o})}close(e,n){let{multiple:r}=this.getProps();if(this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.unregisterClickOutsideHandler(),this._isFilterable()){let{selectedKeys:e,isSearching:i}=this.getStates(),o="";n&&!r?o=this.renderDisplayText(n):e.size&&!r&&(o=this.renderDisplayText([...e][0])),this._adapter.updateStates({inputValue:o}),r||this.toggle2SearchInput(!1),r||this._adapter.updateFocusState(!1)}this._notifyBlur(e)}focus(){let{filterTreeNode:e}=this.getProps();e&&this._adapter.focusInput(),this._adapter.updateFocusState(!0)}blur(){let{filterTreeNode:e}=this.getProps();e&&this._adapter.blurInput(),this._adapter.updateFocusState(!1)}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,()=>this.focus()):this._adapter.toggleInputShow(e,()=>void 0)}handleItemClick(e,n){this._isDisabled()||(this.handleSingleSelect(e,n),this._adapter.rePositionDropdown())}handleItemHover(e,n){this._isDisabled()||this.handleShowNextByHover(n)}handleShowNextByHover(e){let{keyEntities:n}=this.getStates(),{data:r,key:i}=e,o=this._isLeaf(r),s=n[i].path;this._adapter.updateStates({activeKeys:new Set(s)}),o||this.notifyIfLoadData(e)}onItemCheckboxClick(e){this._isDisabled()||(this._handleMultipleSelect(e),this._adapter.rePositionDropdown())}handleClick(e){let n=this._isDisabled(),r=this._isFilterable(),{isOpen:i}=this.getStates();n||(i?i&&!r&&this.close(e):(this.open(),this._notifyFocus(e)))}handleSelectionEnterPress(e){tA(e)&&this.handleClick(e)}toggleHoverState(e){this._adapter.toggleHovering(e)}_defaultRenderText(e,n){let r=this.getProp("separator");return n&&"function"==typeof n?n(e):e.join(r)}renderDisplayText(e,n){let r=this.getProp("displayRender"),i=this.getProp("displayProp"),o=this.getItemPropPath(e,i,n);return this._defaultRenderText(o,r)}handleNodeLoad(e){let{data:n,key:r}=e,i=new Set(this._adapter.getLoadingKeyRefValue()),o=new Set(this._adapter.getLoadedKeyRefValue()).add(r),s=new Set([...i]);s.delete(r),this._adapter.notifyOnLoad(o,n),this._adapter.updateLoadingKeyRefValue(s),this._adapter.updateLoadedKeyRefValue(o),this._adapter.updateStates({loadingKeys:s,loadedKeys:o})}notifyIfLoadData(e){let{data:n,key:r}=e;if(this._adapter.updateStates({loading:!1}),!n.isLeaf&&!n.children&&this.getProp("loadData")){let n=this._adapter.getLoadedKeyRefValue(),i=new Set(this._adapter.getLoadingKeyRefValue());if(n.has(r)||i.has(r))return;this._adapter.updateStates({loading:!0});let{keyEntities:o}=this.getStates(),s=this.getItemPropPath(r,[],o),a=i.add(r);this._adapter.updateLoadingKeyRefValue(a),this._adapter.updateStates({loadingKeys:a}),this._adapter.notifyLoadData(s,this.handleNodeLoad.bind(this,e))}}handleSingleSelect(e,n){let{changeOnSelect:r,filterLeafOnly:i,multiple:o,enableLeafClick:s}=this.getProps(),{keyEntities:a,selectedKeys:l,isSearching:h}=this.getStates(),c=this._isFilterable(),{data:u,key:d}=n,p=this._isLeaf(u),f=a[d].path,g=[d],y=d!==[...l][0];if(!p&&!r&&!h){this._adapter.updateStates({activeKeys:new Set(f)}),this.notifyIfLoadData(n);return}if(o)this._adapter.updateStates({activeKeys:new Set(f)}),p&&s&&this.onItemCheckboxClick(n);else if(this._adapter.notifySelect(u.value),y){if(this._notifyChange(n),this.notifyIfLoadData(n),this._isControlledComponent()){this._adapter.updateStates({activeKeys:new Set(f)}),p&&this.close(e);return}this._adapter.updateStates({activeKeys:new Set(f),selectedKeys:new Set(g)});let r=this.renderDisplayText(d);c&&this._adapter.updateInputPlaceHolder(r),p?this.close(e,d):!i&&h&&this.close(e,d)}else this.close(e)}_handleMultipleSelect(e){let{checkRelation:n}=this.getProps();n===tD.RELATED?this._handleRelatedMultipleSelect(e):"unRelated"===n&&this._handleUnRelatedMultipleSelect(e),this._adapter.updateStates({inputValue:""})}_handleRelatedMultipleSelect(e){let{key:n}=e,{checkedKeys:r,keyEntities:i,resolvedCheckedKeys:o}=this.getStates(),{autoMergeValue:s,max:a,disableStrictly:l,leafOnly:h}=this.getProps(),c=r.has(n),u=l?this.calcCheckedStatus(!c,n):!c,{checkedKeys:d,halfCheckedKeys:p}=l?this.calcNonDisabledCheckedKeys(n,u):this.calcCheckedKeys(n,u),f=tI(s,h),g=f===tD.LEAF_ONLY_MERGE_TYPE,y=f===tD.NONE_MERGE_TYPE,m=new Set(tm(d,i,g)),b=y?d:m;if(U()(a)){if(y){if(r.size<d.size&&d.size>a){let e=[];d.forEach(n=>{e.push(i[n])}),this._adapter.notifyOnExceed(e);return}}else if(o.size<m.size&&m.size>a){let e=[];m.forEach(n=>{e.push(i[n])}),this._adapter.notifyOnExceed(e);return}}this._isControlledComponent()||this._adapter.updateStates({checkedKeys:d,halfCheckedKeys:p,resolvedCheckedKeys:m}),this._notifyChange(b),u&&this._notifySelect(b)}_handleUnRelatedMultipleSelect(e){let n,{key:r}=e,{checkedKeys:i,keyEntities:o}=this.getStates(),{max:s}=this.getProps(),a=new Set(i);if(i.has(r))a.delete(r),n=!1;else{if(U()(s)&&i.size>=s){let e=[];i.forEach(n=>{e.push(o[n])}),this._adapter.notifyOnExceed(e);return}a.add(r),n=!0}this._isControlledComponent()||this._adapter.updateStates({checkedKeys:a}),this._notifyChange(a),n&&this._notifySelect(a)}calcNonDisabledCheckedKeys(e,n){let{keyEntities:r,disabledKeys:i}=this.getStates(),o=new Set(this.getState("checkedKeys")),s=tm(th([e],r,!1),r,!0);if(!s.some(e=>i.has(e)))return this.calcCheckedKeys(e,n);let a=s.filter(e=>!i.has(e));return td(n?[...a,...o]:e5()(tm([...o],r,!0),a),r)}calcCheckedStatus(e,n){if(!e)return e;let{checkedKeys:r,keyEntities:i,disabledKeys:o}=this.getStates(),s=tm(th([n],i,!1),i,!0);return s.some(e=>o.has(e))?!s.filter(e=>!o.has(e)).every(e=>r.has(e)):e}_notifySelect(e){let{keyEntities:n}=this.getStates(),r=[];e.forEach(e=>{var i,o;let s=null==(o=null==(i=n[e])?void 0:i.data)?void 0:o.value;void 0!==s&&r.push(s)});let i=1===r.length?r[0]:r;this._adapter.notifySelect(i)}calcCheckedKeys(e,n){let{keyEntities:r}=this.getStates(),i=new Set(this.getState("checkedKeys")),o=new Set(this.getState("halfCheckedKeys"));return n?tb(e,r,i,o):t_(e,r,i,o)}handleInputChange(e){this._adapter.updateInputValue(e);let{keyEntities:n}=this.getStates(),{treeNodeFilterProp:r,filterTreeNode:i,filterLeafOnly:o}=this.getProps(),s=[];e&&(s=Object.values(n).filter(n=>{let o,{key:s,_notExist:a,data:l}=n;if(a)return!1;let h=this.getItemPropPath(s,r);if(!i)return!0;let c=i;return"boolean"==typeof i?(c=(e,n)=>{let r=e.toLowerCase();return n.toLowerCase().includes(r)},o=h.join("")):o=h.join(),c(e,o,l)}).filter(e=>i&&!o||this._isLeaf(e)).map(e=>e.key)),this._adapter.updateStates({isSearching:!!e,filteredKeys:new Set(s)}),this._adapter.notifyOnSearch(e),this._adapter.rePositionDropdown()}handleClear(){let{isSearching:e}=this.getStates(),{searchPlaceholder:n,placeholder:r,multiple:i}=this.getProps(),o=this._isFilterable(),s=this._isControlledComponent(),a={};i?(a.isSearching=!1,this._adapter.updateInputValue(""),this._adapter.notifyOnSearch(""),a.checkedKeys=new Set([]),a.halfCheckedKeys=new Set([]),a.selectedKeys=new Set([]),a.activeKeys=new Set([]),a.resolvedCheckedKeys=new Set([]),this._adapter.notifyChange([])):o&&e?(a.isSearching=!1,this._adapter.updateInputValue(""),this._adapter.notifyOnSearch("")):(o&&(a.inputValue="",a.inputPlaceHolder=n||r||"",this._adapter.updateInputValue(""),this._adapter.notifyOnSearch("")),s||(a.selectedKeys=new Set([])),a.activeKeys=new Set([]),a.filteredKeys=new Set([]),this._adapter.notifyChange([])),this._adapter.updateStates(a),this._adapter.notifyClear(),this._adapter.rePositionDropdown()}handleClearEnterPress(e){tA(e)&&this.handleClear()}getRenderData(){let{keyEntities:e,isSearching:n}=this.getStates(),r=this._isFilterable();return n&&r?this.getFilteredData():Object.values(e).filter(e=>null===e.parentKey&&!e._notExist).sort((e,n)=>parseInt(e.ind,10)-parseInt(n.ind,10))}getFilteredData(){let{treeNodeFilterProp:e,filterSorter:n}=this.getProps(),{filteredKeys:r,keyEntities:i,inputValue:o}=this.getStates(),s=[];return[...r].forEach(n=>{let r=i[n];if(!r)return;let o=this.getItemPropPath(n,[]),a=o.map(n=>n[e]),l=this._isOptionDisabled(n,i);s.push({data:r.data,pathData:o,key:n,disabled:l,searchText:a})}),eK()(n)&&s.sort((e,r)=>n(e.pathData,r.pathData,o)),s}handleListScroll(e,n){let{activeKeys:r,keyEntities:i}=this.getStates(),o=[...r][r.size-1],s=o?eb()(i,[o,"data"],null):null;this._adapter.notifyListScroll(e,{panelIndex:n,activeNode:s})}}let tj={PREFIX:`${q}-tooltip`},tR={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},tz={offsetX:0,offsetY:2,width:24,height:7},tV={PREFIX:`${q}-popover`,ARROW:`${q}-popover-icon-arrow`},tF={ARROW_BOUNDING:Object.assign(Object.assign({},tz),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var t$=r(3024);let tB=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm5.04-6.14a1.5 1.5 0 0 1-2.13.04l-2.87-2.78L9.26 17A1.5 1.5 0 0 1 7.1 14.9l2.78-2.87L7 9.26A1.5 1.5 0 1 1 9.1 7.1l2.87 2.78L14.74 7A1.5 1.5 0 0 1 16.9 9.1l-2.78 2.87L17 14.74c.6.58.61 1.53.04 2.12Z",fill:"currentColor"}))},"clear");var tH=r(8341);let tK={PREFIX:`${q}-input`};class tU extends e8{static get inputDefaultAdapter(){return{notifyChange:$(),setValue:$()}}constructor(e){super(Object.assign(Object.assign({},tU.inputDefaultAdapter),e))}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}setValue(e){this._adapter.setValue(e)}handleChange(e,n){let{maxLength:r,minLength:i,getValueLength:o}=this._adapter.getProps(),s=e;r&&eK()(o)&&(s=this.handleVisibleMaxLength(e)),i&&eK()(o)&&this.handleVisibleMinLength(s),this._isControlledComponent()||this._adapter.setValue(s),this._adapter.notifyChange(s,n)}handleVisibleMinLength(e){let{minLength:n,getValueLength:r}=this._adapter.getProps(),{minLength:i}=this._adapter.getStates();if(U()(n)&&n>=0&&eK()(r)&&H()(e)){let o=r(e);if(o<n){let r=e.length+(n-o);r!==i&&this._adapter.setMinLength(r)}else i!==n&&this._adapter.setMinLength(n)}}handleVisibleMaxLength(e){let{maxLength:n,getValueLength:r}=this._adapter.getProps();return U()(n)&&n>=0&&eK()(r)&&H()(e)&&r(e)>n?(console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit"),this.handleTruncateValue(e,n)):e}handleTruncateValue(e,n){let{getValueLength:r}=this._adapter.getProps();return function(e){let{value:n,maxLength:r,getValueLength:i}=e;if(!eK()(i))return n.slice(0,r);{let e=0,o=n.length;for(;e<o;){let s=e+Math.floor((o-e)/2);i(n.slice(0,s+1))>r?o=s:e=s+1}return n.slice(0,e)}}({value:e,maxLength:n,getValueLength:r})}handleClear(e){let n=e;this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),n&&"object"==typeof n||(n={}),eE()(n,"__fromClearBtn",!0),this._adapter.notifyChange("",n),this._adapter.notifyClear(n),n&&this.stopPropagation(n)}handleClick(e){let{disabled:n}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();n||r||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){"password"===e?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){let n=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!n)}handleInputType(e){let n=this._adapter.getProp("mode"),r=this._adapter.getState("eyeClosed");return"password"===n?r?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){let{value:n}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(n,e)}handleFocus(e){let{value:n}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(n,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===tT&&this._adapter.notifyEnterPress(e)}isAllowClear(){let{value:e,isFocus:n,isHovering:r}=this._adapter.getStates(),{showClear:i,disabled:o,showClearIgnoreDisabled:s}=this._adapter.getProps();return e&&i&&(!o||s)&&(n||r)}handleClickPrefixOrSuffix(e){let{disabled:n}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();n||r||(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&eK()(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(null==e?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}let tW=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7 3.7a1 1 0 0 0-1.4-1.4L17.3 5.26A11.59 11.59 0 0 0 12 4C5 4 1 10 1 12c0 1.18 1.38 3.73 3.94 5.64L2.3 20.3a1 1 0 1 0 1.42 1.42l18-18ZM7.84 14.77l1.46-1.47a3 3 0 0 1 4-4l1.47-1.46a5 5 0 0 0-6.93 6.93Z",fill:"currentColor"}),W.createElement("path",{d:"M12 20c-1.22 0-2.35-.18-3.38-.5l2.57-2.57a5 5 0 0 0 5.75-5.75l3.56-3.56C22.13 9.27 23 11.07 23 12c0 2-4 8-11 8Z",fill:"currentColor"}))},"eye_closed_solid"),tG=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12s4 8 11 8 11-6 11-8-4-8-11-8Zm5 8a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-5 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",fill:"currentColor"}))},"eye_opened");var tY=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let tZ=tK.PREFIX;class tX extends ej{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleMouseOver=e=>{this.setState({isHovering:!0})},this.handleMouseLeave=e=>{this.setState({isHovering:!1})},this.handleModeChange=e=>{this.foundation.handleModeChange(e)},this.handleClickEye=e=>{this.foundation.handleClickEye(e)},this.handleMouseDown=e=>{this.foundation.handleMouseDown(e)},this.handleMouseUp=e=>{this.foundation.handleMouseUp(e)},this.handleModeEnterPress=e=>{this.foundation.handleModeEnterPress(e)},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)};let n="value"in e?e.value:e.defaultValue;this.state={value:n,cachedValue:e.value,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:"password"===e.mode,minLength:e.minLength},this.inputRef=W.createRef(),this.prefixRef=W.createRef(),this.suffixRef=W.createRef(),this.foundation=new tU(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{let{preventScroll:e}=this.props,n=this.inputRef&&this.inputRef.current;n&&n.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,n)=>this.props.onChange(e,n),notifyBlur:(e,n)=>this.props.onBlur(n),notifyFocus:(e,n)=>this.props.onFocus(n),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,n){let r={};return e.value!==n.cachedValue&&(r.value=e.value,r.cachedValue=e.value),r}componentDidUpdate(e){let{mode:n}=this.props;e.mode!==n&&this.handleModeChange(n)}componentDidMount(){let{disabled:e,autoFocus:n,preventScroll:r}=this.props;!e&&(n||this.props.autofocus)&&this.inputRef.current.focus({preventScroll:r})}renderPrepend(){let{addonBefore:e}=this.props;if(e){let n=Y()({[`${tZ}-prepend`]:!0,[`${tZ}-prepend-text`]:e&&H()(e),[`${tZ}-prepend-icon`]:eO(e)});return W.createElement("div",{className:n,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){let{addonAfter:e}=this.props;if(e){let n=Y()({[`${tZ}-append`]:!0,[`${tZ}-append-text`]:e&&H()(e),[`${tZ}-append-icon`]:eO(e)});return W.createElement("div",{className:n,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){let e=Y()(`${tZ}-clearbtn`),{clearIcon:n}=this.props;return this.foundation.isAllowClear()?W.createElement("div",{className:e,onMouseDown:this.handleClear},n||W.createElement(tB,null)):null}renderModeBtn(){let{eyeClosed:e}=this.state,{mode:n,disabled:r}=this.props,i=Y()(`${tZ}-modebtn`),o=e?W.createElement(tW,null):W.createElement(tG,null);return"password"!==n||r?null:W.createElement("div",{role:"button",tabIndex:0,"aria-label":e?"Show password":"Hidden password",className:i,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},o)}renderPrefix(){let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n;if(!i)return null;let o=Y()({[`${tZ}-prefix`]:!0,[`${tZ}-inset-label`]:n,[`${tZ}-prefix-text`]:i&&H()(i),[`${tZ}-prefix-icon`]:eO(i)});return W.createElement("div",{className:o,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:r,"x-semi-prop":"prefix,insetLabel"},i)}renderSuffix(e){let{suffix:n,hideSuffix:r}=this.props;if(!n)return null;let i=Y()({[`${tZ}-suffix`]:!0,[`${tZ}-suffix-text`]:n&&H()(n),[`${tZ}-suffix-icon`]:eO(n),[`${tZ}-suffix-hidden`]:e&&!!r});return W.createElement("div",{className:i,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},n)}getInputRef(){let{forwardRef:e}=this.props;if(!e3()(e)){if("function"==typeof e)return n=>{e(n),this.inputRef={current:n}};else if("[object Object]"===Object.prototype.toString.call(e))return this.inputRef=e,e}return this.inputRef}render(){let e=this.props,{addonAfter:n,addonBefore:r,autoFocus:i,clearIcon:o,className:s,disabled:a,defaultValue:l,placeholder:h,prefix:c,mode:u,insetLabel:d,insetLabelId:p,validateStatus:f,type:g,readonly:y,size:m,suffix:b,style:_,showClear:E,onEnterPress:w,onClear:x,hideSuffix:C,inputStyle:S,forwardRef:D,maxLength:N,getValueLength:O,preventScroll:M,borderless:I,showClearIgnoreDisabled:T,onlyBorder:k}=e,P=tY(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled","onlyBorder"]),{value:A,isFocus:L,minLength:j}=this.state,R=this.foundation.isAllowClear(),z=eO(b),V=this.getInputRef(),F=`${tZ}-wrapper`,$=Y()(F,s,{[`${tZ}-wrapper__with-prefix`]:c||d,[`${tZ}-wrapper__with-suffix`]:b,[`${tZ}-wrapper__with-suffix-hidden`]:R&&!!C,[`${tZ}-wrapper__with-suffix-icon`]:z,[`${tZ}-wrapper__with-append`]:r,[`${tZ}-wrapper__with-prepend`]:n,[`${tZ}-wrapper__with-append-only`]:r&&!n,[`${tZ}-wrapper__with-prepend-only`]:!r&&n,[`${F}-readonly`]:y,[`${F}-disabled`]:a,[`${F}-warning`]:"warning"===f,[`${F}-error`]:"error"===f,[`${F}-focus`]:L,[`${F}-clearable`]:E,[`${F}-modebtn`]:"password"===u,[`${F}-hidden`]:"hidden"===g,[`${F}-${m}`]:m,[`${tZ}-borderless`]:I,[`${tZ}-only_border`]:null!=k}),B=Y()(tZ,{[`${tZ}-${m}`]:m,[`${tZ}-disabled`]:a,[`${tZ}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${tZ}-sibling-modebtn`]:"password"===u}),H=Object.assign(Object.assign({},P),{style:S,className:B,disabled:a,readOnly:y,type:this.foundation.handleInputType(g),placeholder:h,onInput:e=>this.foundation.handleInput(e),onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e),onKeyUp:e=>this.foundation.handleKeyUp(e),onKeyDown:e=>this.foundation.handleKeyDown(e),onKeyPress:e=>this.foundation.handleKeyPress(e),value:null==A?"":A});eK()(O)||(H.maxLength=N),j&&(H.minLength=j),"error"===f&&(H["aria-invalid"]="true");let K=Object.assign({},_);return void 0!==k&&(K=Object.assign({borderWidth:k},_)),W.createElement("div",{className:$,style:K,onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e),onClick:e=>this.handleClick(e)},this.renderPrepend(),this.renderPrefix(),W.createElement("input",Object.assign({},H,{ref:V})),this.renderClearBtn(),this.renderSuffix(R),this.renderModeBtn(),this.renderAppend())}}tX.propTypes={"aria-label":X().string,"aria-labelledby":X().string,"aria-invalid":X().bool,"aria-errormessage":X().string,"aria-describedby":X().string,"aria-required":X().bool,addonBefore:X().node,addonAfter:X().node,clearIcon:X().node,prefix:X().node,suffix:X().node,mode:X().oneOf(["password"]),value:X().any,defaultValue:X().any,disabled:X().bool,readonly:X().bool,autoFocus:X().bool,type:X().string,showClear:X().bool,hideSuffix:X().bool,placeholder:X().any,size:X().oneOf(["small","large","default"]),className:X().string,style:X().object,validateStatus:X().oneOf(["default","error","warning","success"]),onClear:X().func,onChange:X().func,onBlur:X().func,onFocus:X().func,onInput:X().func,onKeyDown:X().func,onKeyUp:X().func,onKeyPress:X().func,onEnterPress:X().func,insetLabel:X().node,insetLabelId:X().string,inputStyle:X().object,getValueLength:X().func,preventScroll:X().bool,borderless:X().bool},tX.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:$(),onChange:$(),onBlur:$(),onFocus:$(),onInput:$(),onKeyDown:$(),onKeyUp:$(),onKeyPress:$(),onEnterPress:$(),validateStatus:"default",borderless:!1};let tQ=W.forwardRef((e,n)=>W.createElement(tX,Object.assign({},e,{forwardRef:n})));var tq=r(678),tJ=r.n(tq),t0=r(4633),t1=r.n(t0);function t2(e,n){e&&console.warn(`Warning: ${n}`)}class t3{constructor(){this._eventMap=new Map}on(e,n){return e&&"function"==typeof n&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(n)),this}once(e,n){var r=this;if(e&&"function"==typeof n){let i=function(){n(...arguments),r.off(e,i)};this.on(e,i)}}off(e,n){if(e)if("function"==typeof n){let r=this._eventMap.get(e);if(Array.isArray(r)&&r.length){let e=-1;for(;(e=r.findIndex(e=>e===n))>-1;)r.splice(e,1)}}else null==n&&this._eventMap.delete(e);return this}emit(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return!!this._eventMap.has(e)&&([...this._eventMap.get(e)].forEach(e=>e(...r)),!0)}}function t4(e){e.stopPropagation(),e.preventDefault()}function t5(e,n){for(let r=0;r<e.length;r++)e[r]===n?(e[r].tabIndex=0,e[r].focus()):e[r].tabIndex=-1}let t6={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},t8={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};class t9 extends e8{constructor(e){var n;super(Object.assign({},e)),n=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(e,n)=>{this._adapter.setDisplayNone(e,n)},this.updateStateIfCursorOnTrigger=e=>{var n,r;if(null==(n=null==e?void 0:e.matches)?void 0:n.call(e,":hover")){let e=this._adapter.getEventName(),n=this.getState("triggerEventSet");null==(r=n[e.mouseEnter])||r.call(n)}},this.onResize=()=>{this.getState("visible")&&this.calcPosition()},this.delayShow=()=>{let e=this.getProp("mouseEnterDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout(()=>{this.show(),this.clearDelayTimer()},e):this.show()},this.show=()=>{if(this._adapter.getAnimatingState())return;let e=this.getProp("content"),n=this.getProp("trigger"),r=this.getProp("clickTriggerToHide"),{visible:i,displayNone:o}=this.getStates();if(o&&this.setDisplayNone(!1),!i){if(this.clearDelayTimer(),this._adapter.on("portalInserted",()=>{this.calcPosition()}),"hover"===n){let e=()=>{var r;let i=this._adapter.getTriggerDOM();!n||(null==(r=null==i?void 0:i.matches)?void 0:r.call(i,":hover"))||this.hide(),this._adapter.off("portalInserted",e)};this._adapter.on("portalInserted",e)}this._adapter.on("positionUpdated",()=>{this._togglePortalVisible(!0)}),this._adapter.insertPortal(e,{left:-9999,top:-9999}),"custom"===n&&this._adapter.registerClickOutsideHandler(()=>{}),("click"===n||r||"contextMenu"===n)&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent()}},this.calcPosition=function(e,r,i){let o=!(arguments.length>3)||void 0===arguments[3]||arguments[3];e=(eW()(e)?n._adapter.getTriggerBounding():e)||Object.assign({},t8),i=(eW()(i)?n._adapter.getPopupContainerRect():i)||Object.assign({},t8),r=(eW()(r)?n._adapter.getWrapperBounding():r)||Object.assign({},t8);let s=n.calcPosStyle({triggerRect:e,wrapperRect:r,containerRect:i}),a=n.getProp("position");if(n.getProp("autoAdjustOverflow")){let{position:o,isHeightOverFlow:l,isWidthOverFlow:h}=n.adjustPosIfNeed(a,s,e,r,i);(a!==o||l||h)&&(a=o,s=n.calcPosStyle({triggerRect:e,wrapperRect:r,containerRect:i,position:a,spacing:null,isOverFlow:[l,h]}))}return o&&n._mounted&&n._adapter.setPosition(Object.assign(Object.assign({},s),{position:a})),s},this.delayHide=()=>{let e=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout(()=>{this.hide(),this.clearDelayTimer()},e):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=e=>{let{guardFocus:n,closeOnEsc:r}=this.getProps();switch(e&&e.key){case"Escape":r&&this._handleEscKeyDown(e);break;case"Tab":if(n){let n=this._adapter.getContainer(),r=this._adapter.getFocusableElements(n);r.length&&(e.shiftKey?this._handleContainerShiftTabKeyDown(r,e):this._handleContainerTabKeyDown(r,e))}}},this._timer=null}init(){let{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){let e=this.getProp("trigger"),{triggerEventSet:n,portalEventSet:r}=this._generateEvent(e);this._bindTriggerEvent(n),this._bindPortalEvent(r),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"reverse",i=arguments.length>3?arguments[3]:void 0;switch(r){case"reverse":default:return this._reversePos(e,n);case"expand":return this._expandPos(e,i);case"reduce":return this._reducePos(e)}}_reversePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n){if(t6.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");else if(t6.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else if(t6.LEFT.test(e))return e.replace("left","right").replace("Left","Right");else if(t6.RIGHT.test(e))return e.replace("right","left").replace("Right","Left");return e}_expandPos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return e.concat(n)}_reducePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=["Top","Bottom","Left","Right"].find(n=>e.endsWith(n));return n?e.replace(n,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){let n=this._adapter.getEventName(),r={[n.keydown]:e=>{this._handleTriggerKeydown(e)}},i={};switch(e){case"focus":r[n.focus]=()=>{this.delayShow()},r[n.blur]=()=>{this.delayHide()},i=r;break;case"click":r[n.click]=()=>{this.show()},i={};break;case"hover":r[n.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},r[n.mouseLeave]=()=>{this.delayHide()},r[n.focus]=()=>{let{disableFocusListener:e}=this.getProps();e||this.delayShow()},r[n.blur]=()=>{let{disableFocusListener:e}=this.getProps();e||this.delayHide()},i=Object.assign({},r),this.getProp("clickToHide")&&(i[n.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},i[n.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":break;case"contextMenu":r[n.contextMenu]=e=>{e.preventDefault(),this.show()}}return{triggerEventSet:r,portalEventSet:i}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){let n=this.getState("visible"),r=this.getState("isInsert");(n!==e||r!==e)&&this._adapter.togglePortalVisible(e,()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)})}_roundPixel(e){return"number"==typeof e?Math.round(e):e}calcTransformOrigin(e,n,r,i){if(e&&n&&null!=r&&null!=i){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(n.width/2)}px ${-(100*i)}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(n.width/2)}px) ${-(100*i)}%`;if(["leftTop","rightTop"].includes(e))return`${-(100*r)}% ${this._roundPixel(n.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${-(100*r)}% calc(100% - ${this._roundPixel(n.height/2)}px)`}return`${-(100*r)}% ${-(100*i)}%`}return null}calcPosStyle(e){var n;let r,i,{spacing:o,isOverFlow:s}=e,{innerWidth:a}=window,l=(eW()(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},t8),h=(eW()(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},t8),c=(eW()(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},t8),u=null!=e.position?e.position:this.getProp("position"),d=null!=o?o:this.getProp("spacing"),{arrowPointAtCenter:p,showArrow:f,arrowBounding:g}=this.getProps(),y=f&&p,m=d,b=0;if("number"!=typeof d){let e=u.includes("top")||u.includes("bottom");m=e?d.y:d.x,b=e?d.x:d.y}let _=eb()(g,"width",24),E=eb()(g,"width",24),w=eb()(g,"offsetY",0),x=0,C=0,S=l.left+l.width/2,D=l.top+l.height/2,N=6+_/2,O=6+E/2,M=c.height-h.height,I=c.width-h.width,T=M>0?M:0,k=I>0?I:0,P=s&&s[0],A=s&&s[1],L=S-h.left<h.right-S,j=D-h.top<h.bottom-D,R=c.width>a,z=Math.abs((null==c?void 0:c.width)-(null==(n=this._adapter.getContainer())?void 0:n.clientWidth))>1;switch(z&&(m=m*c.width/this._adapter.getContainer().clientWidth),u){case"top":r=A?L?h.left+c.width/2:h.right-c.width/2+k:S+b,i=P?h.bottom+T:l.top-m,x=-.5,C=-1;break;case"topLeft":r=A?R?h.left:h.right-c.width:y?S-N+b:l.left+b,i=P?h.bottom+T:l.top-m,C=-1;break;case"topRight":r=A?h.right+k:y?S+N+b:l.right+b,i=P?h.bottom+T:l.top-m,C=-1,x=-1;break;case"left":r=A?h.right+k-m+N:l.left-m,i=P?j?h.top+c.height/2:h.bottom-c.height/2+T:D+b,x=-1,C=-.5;break;case"leftTop":r=A?h.right+k-m+N:l.left-m,i=P?h.top:y?D-O+b:l.top+b,x=-1;break;case"leftBottom":r=A?h.right+k-m+N:l.left-m,i=P?h.bottom+T:y?D+O+b:l.bottom+b,x=-1,C=-1;break;case"bottom":r=A?L?h.left+c.width/2:h.right-c.width/2+k:S+b,i=P?h.top+O-m:l.top+l.height+m,x=-.5;break;case"bottomLeft":r=A?R?h.left:h.right-c.width:y?S-N+b:l.left+b,i=P?h.top+O-m:l.top+l.height+m;break;case"bottomRight":r=A?h.right+k:y?S+N+b:l.right+b,i=P?h.top+O-m:l.top+l.height+m,x=-1;break;case"right":r=A?h.left-m+N:l.right+m,i=P?j?h.top+c.height/2:h.bottom-c.height/2+T:D+b,C=-.5;break;case"rightTop":r=A?h.left-m+N:l.right+m,i=P?h.top:y?D-O+b:l.top+b;break;case"rightBottom":r=A?h.left-m+N:l.right+m,i=P?h.bottom+T:y?D+O+b:l.bottom+b,C=-1;break;case"leftTopOver":r=l.left-m,i=l.top-m;break;case"rightTopOver":r=l.right+m,i=l.top-m,x=-1;break;case"leftBottomOver":r=l.left-m,i=l.bottom+m,C=-1;break;case"rightBottomOver":r=l.right+m,i=l.bottom+m,x=-1,C=-1}let V=this.calcTransformOrigin(u,l,x,C),F=this._adapter.containerIsBody();if(r-=h.left,i-=h.top,z&&(r/=c.width/this._adapter.getContainer().clientWidth),z&&(i/=c.height/this._adapter.getContainer().clientHeight),F&&!this._adapter.containerIsRelativeOrAbsolute()){let e=this._adapter.getDocumentElementBounding();r+=h.left-e.left,i+=h.top-e.top}r=F?r:r+h.scrollLeft,i=F?i:i+h.scrollTop;let $=l.height;if(this.getProp("showArrow")&&!p&&$<=(E/2+w)*2){let e=$/2-(w+E/2);(u.includes("Top")||u.includes("Bottom"))&&!u.includes("Over")&&(i=u.includes("Top")?i+e:i-e)}let B={left:this._roundPixel(r),top:this._roundPixel(i)},H="";return null!=x&&(H+=`translateX(${100*x}%) `,Object.defineProperty(B,"translateX",{enumerable:!1,value:x})),null!=C&&(H+=`translateY(${100*C}%) `,Object.defineProperty(B,"translateY",{enumerable:!1,value:C})),null!=V&&(B.transformOrigin=V),H&&(B.transform=H),B}isLR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,n,r){return e<r&&n>r}isOverFlow(e,n,r){return e<r&&n<r}isHalfOverFlow(e,n,r){return e<r||n<r}isHalfAllEnough(e,n,r){return e>=r||n>=r}getReverse(e,n,r,i){return e&&i||r}adjustPosIfNeed(e,n,r,i,o){let{innerWidth:s,innerHeight:a}=window,{margin:l}=this.getProps(),h="number"==typeof l?l:l.marginLeft,c="number"==typeof l?l:l.marginTop,u="number"==typeof l?l:l.marginRight,d="number"==typeof l?l:l.marginBottom,p=!1,f=!1,g=this.getProp("spacing"),y=g,m=0;if("number"!=typeof g){let n=e.includes("top")||e.includes("bottom");y=n?g.y:g.x,m=n?g.x:g.y}if(i.width>0&&i.height>0){let n=r.left,l=r.right,g=r.top,b=r.bottom,_=s-n,E=a-g,w=s-l,x=a-b,C=i.width>r.width,S=i.height>r.height,D=g-c<i.height+y&&x-d>i.height+y,N=n-h<i.width+y&&w-u>i.width+y,O=x-d<i.height+y&&g-c>i.height+y,M=w-u<i.width+y&&n-h>i.width+y;E-d<i.height+y&&i.height,b-c<i.height+y&&i.height;let I=E<i.height+m&&b>i.height+m,T=b<i.height+m&&E>i.height+m,k=_<i.width+m&&l>i.width+m,P=l<i.width+m&&_>i.width+m,A=E<i.height+y&&b>i.height+y,L=b<i.height+y&&E>i.height+y,j=_<i.width&&l>i.width,R=l<i.width&&_>i.width,z=g-o.top,V=n-o.left,F=z+r.height,$=V+r.width,B=o.bottom-b,H=o.right-l,K=B+r.height,U=H+r.width,W=this.isReverse(z-c,B-d,i.height+y),G=this.isReverse(V-h,H-u,i.width+y),Y=this.isReverse(B-d,z-c,i.height+y),Z=this.isReverse(H-u,V-h,i.width+y);this.isReverse(K-d,F-c,i.height+y),this.isReverse(F-c,K-d,i.height+y);let X=this.isReverse(K,F,i.height+m),Q=this.isReverse(F,K,i.height+m),q=this.isReverse(U,$,i.width+m),J=this.isReverse($,U,i.width+m),ee=r.height/2,et=r.width/2,en=this.isOverFlow(g-c,x-d,i.height+y),er=this.isOverFlow(n-h,w-u,i.width+y),ei=this.isOverFlow(b-c,E-d,i.height+y),eo=this.isOverFlow(l-h,_-u,i.width+y),es=this.isHalfOverFlow(b-ee,E-ee,(i.height+m)/2),ea=this.isHalfOverFlow(l-et,_-et,(i.width+m)/2),el=this.isHalfAllEnough(b-ee,E-ee,(i.height+m)/2),eh=this.isHalfAllEnough(l-et,_-et,(i.width+m)/2),ec=this.isOverFlow(z-c,B-d,i.height+y),eu=this.isOverFlow(V-h,H-u,i.width+y),ed=this.isOverFlow(F-c,K-d,i.height+y),ep=this.isOverFlow($-h,U-u,i.width+y),ef=this.isHalfOverFlow(F-ee,K-ee,(i.height+m)/2),eg=this.isHalfOverFlow($-et,U-et,(i.width+m)/2),ey=this.isHalfAllEnough(F-ee,K-ee,(i.height+m)/2),em=this.isHalfAllEnough($-et,U-et,(i.width+m)/2),ev=this.getReverse(en,ec,D,W),eb=this.getReverse(er,eu,N,G),e_=this.getReverse(en,ec,O,Y),eE=this.getReverse(er,eu,M,Z),ew=this.getReverse(ei,ed,I,X),ex=this.getReverse(ei,ed,T,Q),eC=this.getReverse(eo,ep,k,q),eS=this.getReverse(eo,ep,P,J),eD=es&&ef,eN=ea&&eg;switch(e){case"top":ev&&(e=this._adjustPos(e,!0)),eN&&(eC||eS)&&(e=this._adjustPos(e,!0,"expand",eC?"Right":"Left"));break;case"topLeft":ev&&(e=this._adjustPos(e,!0)),eC&&C&&(e=this._adjustPos(e)),f&&(eh||em)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":ev&&(e=this._adjustPos(e,!0)),eS&&C&&(e=this._adjustPos(e)),f&&(eh||em)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":eb&&(e=this._adjustPos(e)),eD&&(ew||ex)&&(e=this._adjustPos(e,!1,"expand",ew?"Bottom":"Top"));break;case"leftTop":eb&&(e=this._adjustPos(e)),ew&&S&&(e=this._adjustPos(e,!0)),p&&(el||ey)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":eb&&(e=this._adjustPos(e)),ex&&S&&(e=this._adjustPos(e,!0)),p&&(el||ey)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":e_&&(e=this._adjustPos(e,!0)),eN&&(eC||eS)&&(e=this._adjustPos(e,!0,"expand",eC?"Right":"Left"));break;case"bottomLeft":e_&&(e=this._adjustPos(e,!0)),eC&&C&&(e=this._adjustPos(e)),f&&(eh||em)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":e_&&(e=this._adjustPos(e,!0)),eS&&C&&(e=this._adjustPos(e)),f&&(eh||em)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":eE&&(e=this._adjustPos(e)),eD&&(ew||ex)&&(e=this._adjustPos(e,!1,"expand",ew?"Bottom":"Top"));break;case"rightTop":eE&&(e=this._adjustPos(e)),ew&&S&&(e=this._adjustPos(e,!0)),p&&(el||ey)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":eE&&(e=this._adjustPos(e)),ex&&S&&(e=this._adjustPos(e,!0)),p&&(el||ey)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":A&&(e=this._adjustPos(e,!0)),j&&(e=this._adjustPos(e));break;case"leftBottomOver":L&&(e=this._adjustPos(e,!0)),j&&(e=this._adjustPos(e));break;case"rightTopOver":A&&(e=this._adjustPos(e,!0)),R&&(e=this._adjustPos(e));break;case"rightBottomOver":L&&(e=this._adjustPos(e,!0)),R&&(e=this._adjustPos(e))}this.isTB(e)&&(p=en&&ec,f="top"===e||"bottom"===e?ea&&eg||l<0||w<0:eo&&ep||l<0||w<0),this.isLR(e)&&(f=er&&eu,p="left"===e||"right"===e?es&&ef||g<0||E<0:ei&&ed||g<0||E<0)}return{position:e,isHeightOverFlow:p,isWidthOverFlow:f}}_bindScrollEvent(){this._adapter.registerScrollHandler(()=>this.calcPosition())}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){let{closeOnEsc:n,disableArrowKeyDown:r}=this.getProps(),i=this._adapter.getContainer(),o=this._adapter.getFocusableElements(i),s=o.length;switch(e&&e.key){case"Escape":t4(e),n&&this._handleEscKeyDown(e);break;case"ArrowUp":!r&&s&&this._handleTriggerArrowUpKeydown(o,e);break;case"ArrowDown":!r&&s&&this._handleTriggerArrowDownKeydown(o,e)}}focusTrigger(){let{trigger:e,returnFocusOnClose:n,preventScroll:r}=this.getProps();if(n&&"custom"!==e){let e=this._adapter.getTriggerNode();e&&"focus"in e&&e.focus({preventScroll:r})}}_handleEscKeyDown(e){let{trigger:n}=this.getProps();"custom"!==n&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,n){let{preventScroll:r}=this.getProps(),i=this._adapter.getActiveElement();e[e.length-1]===i&&(e[0].focus({preventScroll:r}),n.preventDefault())}_handleContainerShiftTabKeyDown(e,n){let{preventScroll:r}=this.getProps(),i=this._adapter.getActiveElement();e[0]===i&&(e[e.length-1].focus({preventScroll:r}),n.preventDefault())}_handleTriggerArrowDownKeydown(e,n){let{preventScroll:r}=this.getProps();e[0].focus({preventScroll:r}),n.preventDefault()}_handleTriggerArrowUpKeydown(e,n){let{preventScroll:r}=this.getProps();e[e.length-1].focus({preventScroll:r}),n.preventDefault()}}function t7(e){return`${e}-${new Date().getTime()}-${Math.random()}`}function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{prefix:n="",length:r=7}=e,i="0123456789abcdefghijklmnopqrstuvwxyz",o=i.length,s="";for(let e=0;e<r;e++){let e=Math.floor(Math.random()*o);s+=i.charAt(e)}return n?`${n}-${s}`:s}let nt=()=>document.body;class nn extends W.PureComponent{constructor(e,n){var r;super(e),r=this,this.initContainer=function(e){var n,i;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(!r.el||!(null==(n=r.state)?void 0:n.container)||!Array.from(r.state.container.childNodes).includes(r.el)){r.el=document.createElement("div");let n=(r.props.getPopupContainer||e.getPopupContainer||nt)();return n.appendChild(r.el),r.addStyle(r.props.style),r.addClass(r.props.prefixCls,e,r.props.className),n}}catch(e){if(!o)throw e}return null==(i=r.state)?void 0:i.container},this.addStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.el)for(let n of Object.keys(e))r.el.style[n]=e[n]},this.addClass=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.context,{direction:i}=n;for(var o=arguments.length,s=Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];let l=Y()(e,...s,{[`${e}-rtl`]:"rtl"===i});r.el&&(r.el.className=l)},this.state={container:this.initContainer(n,!0)}}componentDidMount(){let e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){let{didUpdate:n}=this.props;n&&n(e)}componentWillUnmount(){let{container:e}=this.state;e&&e.removeChild(this.el)}render(){let{state:e,props:n}=this;return e.container?(0,eQ.createPortal)(n.children,this.el):null}}nn.contextType=Q,nn.defaultProps={prefixCls:`${q}-portal`},nn.propTypes={children:X().node,prefixCls:X().string,getPopupContainer:X().func,className:X().string,didUpdate:X().func};var nr=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let ni=e=>{let{className:n,style:r}=e,i=nr(e,["className","style"]);return W.createElement("svg",Object.assign({"aria-hidden":!0,className:n,style:r},i,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),W.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var no=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let ns=e=>{let{className:n,style:r}=e,i=no(e,["className","style"]);return W.createElement("svg",Object.assign({"aria-hidden":!0,className:n,style:r},i,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),W.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},na=X().shape({offsetX:X().number,offsetY:X().number,width:X().number,height:X().number});class nl extends W.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var e,n;null==(n=(e=this.props).onAnimationStart)||n.call(e)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},()=>{var e,n;null==(n=(e=this.props).onAnimationEnd)||n.call(e,!1)})},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,n,r,i;null==(n=(e=this.props).onAnimationStart)||n.call(e),this.props.motion||(null==(i=(r=this.props).onAnimationEnd)||i.call(r,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,n,r){let i=Object.keys(this.props).filter(n=>!eY()(this.props[n],e[n]));i.includes("animationState"),(i.includes("startClassName")||i.includes("replayKey")||i.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},()=>{var e,n,r,i;null==(n=(e=this.props).onAnimationStart)||n.call(e),this.props.motion||(null==(i=(r=this.props).onAnimationEnd)||i.call(r,this.state.isAnimating),this.setState({isAnimating:!1}))})}render(){var e;return this.props.motion?this.props.children({animationClassName:null!=(e=this.state.currentClassName)?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}nl.defaultProps={motion:!0,replayKey:""};var nh=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let nc=tj.PREFIX,nu=tR.POSITION_SET,nd=tR.TRIGGER_SET,np=["flex","block","table","flow-root","grid"],nf=()=>document.body;class ng extends ej{constructor(e){super(e),this.isAnimating=!1,this.setContainerEl=e=>this.containerEl={current:e},this.isSpecial=e=>{if(eC(e))return!!e.disabled;if((0,W.isValidElement)(e)){if(eb()(e,"props.disabled"))return tR.STATUS_DISABLED;let n=eb()(e,"props.loading"),r=!eW()(e)&&!eW()(e.type)&&("Button"===eb()(e,"type.elementType")||"IconButton"===eb()(e,"type.elementType"));if(n&&r)return tR.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{let{placement:e}=this.state,{showArrow:n,prefixCls:r,style:i}=this.props,o=null,s=Y()([`${r}-icon-arrow`]),a=eb()(i,"backgroundColor"),l=(null==e?void 0:e.includes("left"))||(null==e?void 0:e.includes("right"))?W.createElement(ns,null):W.createElement(ni,null);return n&&(o=(0,W.isValidElement)(n)?n:W.cloneElement(l,{className:s,style:{color:a,fill:"currentColor"}})),o},this.handlePortalInnerClick=e=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&eN(e)},this.handlePortalMouseDown=e=>{this.props.stopPropagation&&eN(e)},this.handlePortalFocus=e=>{this.props.stopPropagation&&eN(e)},this.handlePortalBlur=e=>{this.props.stopPropagation&&eN(e)},this.handlePortalInnerKeyDown=e=>{this.foundation.handleContainerKeydown(e)},this.renderContentNode=e=>{let n={initialFocusRef:this.initialFocusRef};return eK()(e)?e(n):e},this.renderPortal=()=>{let{containerStyle:e={},visible:n,portalEventSet:r,placement:i,displayNone:o,transitionState:s,id:a,isPositionUpdated:l}=this.state,{prefixCls:h,content:c,showArrow:u,style:d,motion:p,role:f,zIndex:g}=this.props,y=this.renderContentNode(c),{className:m}=this.props,b=this.context.direction,_=Y()(m,{[`${h}-wrapper`]:!0,[`${h}-wrapper-show`]:n,[`${h}-with-arrow`]:!!u,[`${h}-rtl`]:"rtl"===b}),E=this.renderIcon(),w=er()(e,p?["transformOrigin"]:void 0),x=eb()(e,"transformOrigin"),C=eb()(d,"opacity",null),S=C||1,D=W.createElement(nl,{fillMode:"forwards",animationState:s,motion:p&&l,startClassName:"enter"===s?`${nc}-animation-show`:`${nc}-animation-hide`,onAnimationStart:()=>this.isAnimating=!0,onAnimationEnd:()=>{var e,n;"leave"===s&&(this.didLeave(),null==(n=(e=this.props).afterClose)||n.call(e)),this.isAnimating=!1}},e=>{let{animationStyle:n,animationClassName:s,animationEventsNeedBind:h}=e;return W.createElement("div",Object.assign({className:Y()(_,s),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),o?{display:"none"}:{}),{transformOrigin:x}),d),C?{opacity:l?S:"0"}:{})},r,h,{role:f,"x-placement":i,id:a}),W.createElement("div",{className:`${nc}-content`},y),E)});return W.createElement(nn,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:g}},W.createElement("div",{tabIndex:-1,className:`${q}-portal-inner`,style:w,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},D))},this.wrapSpan=e=>{let{wrapperClassName:n}=this.props,r=eb()(e,"props.style.display"),i=eb()(e,"props.block"),o={};return"string"!=typeof e&&(o.display="inline-block"),(i||np.includes(r))&&(o.width="100%"),W.createElement("span",{className:n,style:o},e)},this.mergeEvents=(e,n)=>{let r={};return tJ()(n,(n,i)=>{"function"==typeof n&&(r[i]=function(){n(...arguments),e&&"function"==typeof e[i]&&e[i](...arguments)})}),r},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new t9(this.adapter),this.eventManager=new t3,this.triggerEl=W.createRef(),this.containerEl=W.createRef(),this.initialFocusRef=W.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},getAnimatingState:()=>this.isAnimating,insertPortal:(e,n)=>{var{position:r}=n,i=nh(n,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),i)},()=>{setTimeout(()=>{this.setState(e=>("enter"===e.transitionState&&this.eventManager.emit("portalInserted"),{}))},0)})},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:e=>{this.setState({triggerEventSet:e})},registerPortalEvent:e=>{this.setState({portalEventSet:e})},getTriggerBounding:()=>{let e=this.adapter.getTriggerNode();return this.triggerEl.current=e,e&&e.getBoundingClientRect()},getPopupContainerRect:()=>{let e=this.getPopupContainer(),n=null;return e&&eC(e)&&(n=Object.assign(Object.assign({},function(e){if(e&&"object"==typeof e)if("function"==typeof e.toJSON)return e.toJSON();else return["left","top","right","bottom","width","height"].reduce((n,r)=>(n[r]=e[r],n),{})}(e.getBoundingClientRect())),{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})),n},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{let e=this.getPopupContainer();return"relative"===window.getComputedStyle(e).getPropertyValue("position")},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{let e=this.containerEl&&this.containerEl.current;return e&&e.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:e=>{var{position:n}=e,r=nh(e,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),r),placement:n,isPositionUpdated:!0},()=>{this.eventManager.emit("positionUpdated")})},setDisplayNone:(e,n)=>{this.setState({displayNone:e},n)},updatePlacementAttr:e=>{this.setState({placement:e})},togglePortalVisible:(e,n)=>{let r={};r.transitionState=e?"enter":"leave",r.visible=e,this.mounted&&this.setState(r,()=>{n()})},registerClickOutsideHandler:e=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=n=>{if(!this.mounted)return!1;let r=this.triggerEl&&this.triggerEl.current,i=this.containerEl&&this.containerEl.current;r=eQ.findDOMNode(r),i=eQ.findDOMNode(i);let o=n.target,s=n.composedPath&&n.composedPath()||[o],a=!!this.props.clickTriggerToHide&&(r&&r.contains(o)||s.includes(r));(r&&!r.contains(o)&&i&&!i.contains(o)&&!(s.includes(i)||s.includes(r))||a)&&(this.props.onClickOutSide(n),e())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:e=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=t1()(n=>{if(!this.mounted)return!1;e(n)},10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:e=>{this.props.onVisibleChange(e)},registerScrollHandler:e=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=t1()(n=>{if(!this.mounted)return!1;let r=this.adapter.getTriggerNode();n.target.contains(r)&&e({x:n.target.scrollLeft,y:n.target.scrollTop})},10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>!!this.props.motion,updateContainerPosition:()=>{let e=this.getPopupContainer();if(e&&eC(e)){let n=window.getComputedStyle(e).getPropertyValue("position");this.containerPosition=n}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let e=this.triggerEl.current;return eC(this.triggerEl.current)||(e=eQ.findDOMNode(this.triggerEl.current)),e},getFocusableElements:e=>{var n;return eC(n=e)?Array.from(n.querySelectorAll("input:not([disabled]):not([tabindex='-1']),textarea:not([disabled]):not([tabindex='-1']),button:not([disabled]):not([tabindex='-1']),a[href]:not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),area[href]:not([tabindex='-1']),iframe:not([tabindex='-1']),object:not([tabindex='-1']),*[tabindex]:not([tabindex='-1']),*[contenteditable]:not([tabindex='-1'])")):[]},getActiveElement:()=>document?document.activeElement:null,setInitialFocus:()=>{let{preventScroll:e}=this.props,n=eb()(this,"initialFocusRef.current");n&&"focus"in n&&n.focus({preventScroll:e})},notifyEscKeydown:e=>{this.props.onEscKeyDown(e)},setId:()=>{this.setState({id:ne()})},getTriggerDOM:()=>this.triggerEl.current?eQ.findDOMNode(this.triggerEl.current):null})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||nf,this.foundation.init(),eM(()=>{let e=this.triggerEl.current;!e||e instanceof HTMLElement||(e=(0,eQ.findDOMNode)(e)),this.foundation.updateStateIfCursorOnTrigger(e)},1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,n){t2(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),eY()(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){let{isInsert:e,triggerEventSet:n,visible:r,id:i}=this.state,{wrapWhenSpecial:o,role:s,trigger:a}=this.props,{children:l}=this.props,h=Object.assign({},eb()(l,"props.style")),c={};if(o){let e=this.isSpecial(l);e?(h.pointerEvents="none",e===tR.STATUS_DISABLED&&(c.cursor="not-allowed"),l=(0,W.cloneElement)(l,{style:h}),"custom"!==a&&(l=this.wrapSpan(l)),this.isWrapped=!0):(0,W.isValidElement)(l)||(l=this.wrapSpan(l),this.isWrapped=!0)}let u={};"dialog"===s?(u["aria-expanded"]=r?"true":"false",u["aria-haspopup"]="dialog",u["aria-controls"]=i):u["aria-describedby"]=i;let d=W.cloneElement(l,Object.assign(Object.assign(Object.assign(Object.assign({},u),l.props),this.mergeEvents(l.props,n)),{style:Object.assign(Object.assign({},eb()(l,"props.style")),c),className:Y()(eb()(l,"props.className")),ref:e=>{this.triggerEl.current=e;let{ref:n}=l;"function"==typeof n?n(e):n&&"object"==typeof n&&(n.current=e)},tabIndex:l.props.tabIndex||0,"data-popupid":i}));return W.createElement(W.Fragment,null,e?this.renderPortal():null,d)}}ng.contextType=Q,ng.propTypes={children:X().node,motion:X().bool,autoAdjustOverflow:X().bool,position:X().oneOf(nu),getPopupContainer:X().func,mouseEnterDelay:X().number,mouseLeaveDelay:X().number,trigger:X().oneOf(nd).isRequired,className:X().string,wrapperClassName:X().string,clickToHide:X().bool,clickTriggerToHide:X().bool,visible:X().bool,style:X().object,content:X().oneOfType([X().node,X().func]),prefixCls:X().string,onVisibleChange:X().func,onClickOutSide:X().func,spacing:X().oneOfType([X().number,X().object]),margin:X().oneOfType([X().number,X().object]),showArrow:X().oneOfType([X().bool,X().node]),zIndex:X().number,rePosKey:X().oneOfType([X().string,X().number]),arrowBounding:na,transformFromCenter:X().bool,arrowPointAtCenter:X().bool,stopPropagation:X().bool,role:X().string,wrapWhenSpecial:X().bool,guardFocus:X().bool,returnFocusOnClose:X().bool,preventScroll:X().bool,keepDOM:X().bool},ng.__SemiComponentName__="Tooltip",ng.defaultProps=eI(ng.__SemiComponentName__,{arrowBounding:tz,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:nc,role:"tooltip",mouseEnterDelay:50,mouseLeaveDelay:50,motion:!0,onVisibleChange:$(),onClickOutSide:$(),spacing:8,margin:0,showArrow:!0,wrapWhenSpecial:!0,zIndex:1060,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:$(),disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1});var ny=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let nm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{position:n="",className:r,arrowStyle:i,popStyle:o}=e,s=ny(e,["position","className","arrowStyle","popStyle"]),a=0===n.indexOf("top")||0===n.indexOf("bottom"),l=Y()(r,tV.ARROW),h=eb()(i,"borderOpacity"),c=eb()(i,"backgroundColor",eb()(o,"backgroundColor")),u=eb()(i,"borderColor",eb()(o,"borderColor")),d=Object.assign(Object.assign({},s),{width:tF.ARROW_BOUNDING.width,height:tF.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:l});return a?W.createElement("svg",Object.assign({},d),W.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",style:{fill:u,opacity:h}}),W.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",style:{fill:c}})):W.createElement("svg",Object.assign({},d),W.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",style:{fill:u,opacity:h}}),W.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",style:{fill:c}}))};nm.propTypes={position:X().string,className:X().string,arrowStyle:X().object,popStyle:X().object};var nv=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};class nb extends W.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var e;null==(e=this.tooltipRef.current)||e.focusTrigger()},this.renderPopCard=e=>{let{initialFocusRef:n}=e,{content:r,contentClassName:i,prefixCls:o}=this.props,{direction:s}=this.context,a=Y()(o,i,{[`${o}-rtl`]:"rtl"===s}),l=this.renderContentNode({initialFocusRef:n,content:r});return W.createElement("div",{className:a},W.createElement("div",{className:`${o}-content`},l))},this.renderContentNode=e=>{let{initialFocusRef:n,content:r}=e;return eK()(r)?r({initialFocusRef:n}):r},this.tooltipRef=W.createRef()}render(){var e;let n=this.props,{children:r,prefixCls:i,showArrow:o,arrowStyle:s={},arrowBounding:a,position:l,style:h,trigger:c}=n,u=nv(n,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]),{spacing:d}=this.props,p=!!o&&W.createElement(nm,Object.assign({},{position:l,className:"",popStyle:h,arrowStyle:s}));return null==d&&(d=o?tF.SPACING_WITH_ARROW:tF.SPACING),W.createElement(ng,Object.assign({guardFocus:!0,ref:this.tooltipRef},u,{trigger:c,position:l,style:h,content:this.renderPopCard,prefixCls:i,spacing:d,showArrow:p,arrowBounding:a,role:"click"===c||"custom"===c?"dialog":"tooltip"}),r)}}nb.contextType=Q,nb.propTypes={children:X().node,content:X().oneOfType([X().node,X().func]),visible:X().bool,autoAdjustOverflow:X().bool,motion:X().bool,position:X().oneOf(["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"]),margin:X().oneOfType([X().number,X().object]),mouseEnterDelay:X().number,mouseLeaveDelay:X().number,trigger:X().oneOf(["hover","focus","click","custom","contextMenu"]).isRequired,contentClassName:X().oneOfType([X().string,X().array]),onVisibleChange:X().func,onClickOutSide:X().func,style:X().object,spacing:X().oneOfType([X().number,X().object]),zIndex:X().number,showArrow:X().bool,arrowStyle:X().shape({borderColor:X().string,backgroundColor:X().string,borderOpacity:X().oneOfType([X().string,X().number])}),arrowPointAtCenter:X().bool,arrowBounding:X().object,prefixCls:X().string,guardFocus:X().bool,disableArrowKeyDown:X().bool},nb.__SemiComponentName__="Popover",nb.defaultProps=eI(nb.__SemiComponentName__,{arrowBounding:tF.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:tF.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:tV.PREFIX,onClickOutSide:$(),onEscKeyDown:$(),closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0});let n_=nb,nE=W.createContext(null);var nw={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}};function nx(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var nC={date:nx({formats:{full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},defaultWidth:"full"}),time:nx({formats:{full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},defaultWidth:"full"}),dateTime:nx({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};function nS(e,n){if(n.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function nD(e){return(nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nN={};function nO(e,n){nS(1,arguments);var r,i,o,s,a,l,h,c,u=function(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}(null!=(r=null!=(i=null!=(o=null!=(s=null==n?void 0:n.weekStartsOn)?s:null==n||null==(a=n.locale)||null==(l=a.options)?void 0:l.weekStartsOn)?o:nN.weekStartsOn)?i:null==(h=nN.locale)||null==(c=h.options)?void 0:c.weekStartsOn)?r:0);if(!(u>=0&&u<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=function(e){nS(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"===nD(e)&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):(("string"==typeof e||"[object String]"===n)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}(e),p=d.getUTCDay();return d.setUTCDate(d.getUTCDate()-(7*(p<u)+p-u)),d.setUTCHours(0,0,0,0),d}function nM(e,n,r){var i="eeee p";return!function(e,n,r){nS(2,arguments);var i=nO(e,r),o=nO(n,r);return i.getTime()===o.getTime()}(e,n,r)?e.getTime()>n.getTime()?"'下个'"+i:"'上个'"+i:i}var nI={lastWeek:nM,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:nM,other:"PP p"};function nT(e){return function(n,r){var i;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,s=null!=r&&r.width?String(r.width):o;i=e.formattingValues[s]||e.formattingValues[o]}else{var a=e.defaultWidth,l=null!=r&&r.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[a]}return i[e.argumentCallback?e.argumentCallback(n):n]}}function nk(e){return function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],a=n.match(s);if(!a)return null;var l=a[0],h=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(h)?function(e,n){for(var r=0;r<e.length;r++)if(n(e[r]))return r}(h,function(e){return e.test(l)}):function(e,n){for(var r in e)if(e.hasOwnProperty(r)&&n(e[r]))return r}(h,function(e){return e.test(l)});return r=e.valueCallback?e.valueCallback(c):c,{value:r=i.valueCallback?i.valueCallback(r):r,rest:n.slice(l.length)}}}let nP={code:"zh-CN",currency:"CNY",dateFnsLocale:{code:"zh-CN",formatDistance:function(e,n,r){var i,o=nw[e];if(i="string"==typeof o?o:1===n?o.one:o.other.replace("{{count}}",String(n)),null!=r&&r.addSuffix)if(r.comparison&&r.comparison>0)return i+"内";else return i+"前";return i},formatLong:nC,formatRelative:function(e,n,r,i){var o=nI[e];return"function"==typeof o?o(n,r,i):o},localize:{ordinalNumber:function(e,n){var r=Number(e);switch(null==n?void 0:n.unit){case"date":return r.toString()+"日";case"hour":return r.toString()+"时";case"minute":return r.toString()+"分";case"second":return r.toString()+"秒";default:return"第 "+r.toString()}},era:nT({values:{narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},defaultWidth:"wide"}),quarter:nT({values:{narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:nT({values:{narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},defaultWidth:"wide"}),day:nT({values:{narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},defaultWidth:"wide"}),dayPeriod:nT({values:{narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},defaultWidth:"wide",formattingValues:{narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(s={matchPattern:/^(第\s*)?\d+(日|时|分|秒)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(s.matchPattern);if(!r)return null;var i=r[0],o=e.match(s.parsePattern);if(!o)return null;var a=s.valueCallback?s.valueCallback(o[0]):o[0];return{value:a=n.valueCallback?n.valueCallback(a):a,rest:e.slice(i.length)}}),era:nk({matchPatterns:{narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(前)/i,/^(公元)/i]},defaultParseWidth:"any"}),quarter:nk({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:nk({matchPatterns:{narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},defaultParseWidth:"any"}),day:nk({matchPatterns:{narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},defaultParseWidth:"any"}),dayPeriod:nk({matchPatterns:{any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}},Pagination:{pageSize:"每页条数：${pageSize}",total:"总页数：${total}",jumpTo:"跳至",page:"页"},Modal:{confirm:"确定",cancel:"取消"},Tabs:{more:"更多"},TimePicker:{placeholder:{time:"请选择时间",timeRange:"请选择时间范围"},begin:"开始时间",end:"结束时间",hour:"时",minute:"分",second:"秒",AM:"上午",PM:"下午"},DatePicker:{placeholder:{date:"请选择日期",dateTime:"请选择日期及时间",dateRange:["开始日期","结束日期"],dateTimeRange:["开始日期","结束日期"],monthRange:["开始月份","结束月份"]},presets:"快捷选择",footer:{confirm:"确定",cancel:"取消"},selectDate:"返回选择日期",selectTime:"选择时间",year:"年",month:"月",day:"日",monthText:"${year}年 ${month}",months:{1:"1月",2:"2月",3:"3月",4:"4月",5:"5月",6:"6月",7:"7月",8:"8月",9:"9月",10:"10月",11:"11月",12:"12月"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"一",Tue:"二",Wed:"三",Thu:"四",Fri:"五",Sat:"六",Sun:"日"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"收起侧边栏",expandText:"展开侧边栏"},Popconfirm:{confirm:"确定",cancel:"取消"},Table:{emptyText:"暂无数据",pageText:"显示第 ${currentStart} 条-第 ${currentEnd} 条，共 ${total} 条",descend:"点击降序",ascend:"点击升序",cancelSort:"取消排序"},Select:{emptyText:"暂无数据",createText:"创建"},Cascader:{emptyText:"暂无数据"},Tree:{emptyText:"暂无数据",searchPlaceholder:"搜索"},List:{emptyText:"暂无数据"},Calendar:{allDay:"全天",AM:"上午${time}时",PM:"下午${time}时",datestring:"日",remaining:"还有${remained}项"},Upload:{mainText:"点击上传文件或拖拽文件到这里",illegalTips:"不支持此类型文件",legalTips:"松手开始上传",retry:"重试",replace:"替换文件",clear:"清空",selectedFiles:"已选择文件",illegalSize:"文件尺寸不合法",fail:"上传失败"},TreeSelect:{searchPlaceholder:"搜索"},Typography:{copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Transfer:{emptyLeft:"暂无数据",emptySearch:"无搜索结果",emptyRight:"暂无内容，可从左侧勾选",placeholder:"搜索",clear:"清空",selectAll:"全选",clearSelectAll:"取消全选",total:"总个数：${total}",selected:"已选个数：${total}"},Form:{optional:"（可选）"},Image:{preview:"预览",loading:"加载中",loadError:"加载失败",prevTip:"上一张",nextTip:"下一张",zoomInTip:"放大",zoomOutTip:"缩小",rotateTip:"旋转",downloadTip:"下载",adaptiveTip:"适应页面",originTip:"原始尺寸"},Chat:{deleteConfirm:"确认删除该会话吗？",clearContext:"上下文已清除",copySuccess:"复制成功",stop:"停止",copy:"复制",copied:"复制成功",dropAreaText:"将文件放到这里"},UserGuide:{skip:"跳过",next:"下一步",prev:"上一步",finish:"完成"},InputNumber:{},JsonViewer:{search:"查找",replace:"替换",replaceAll:"全部替换"}};class nA extends W.Component{renderChildren(e,n){let{componentName:r}=this.props,i=e;(null==e?void 0:e.code)||(i=nP);let o=eb()(nP,"dateFnsLocale"),s=eb()(i,"dateFnsLocale",o),a=eb()(i,"currency");return n(i[r],i.code,s,a)}render(){let{children:e}=this.props;return W.createElement(Q.Consumer,null,n=>{let{locale:r}=n;return W.createElement(nE.Consumer,null,n=>this.renderChildren(r||n,e))})}}nA.propTypes={componentName:X().string.isRequired,children:X().any},nA.defaultProps={componentName:""};var nL=r(5384);let nj=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.35 4.27c.68.47.86 1.4.38 2.08l-10 14.5a1.5 1.5 0 0 1-2.33.17l-6.5-7a1.5 1.5 0 0 1 2.2-2.04l5.23 5.63 8.94-12.96a1.5 1.5 0 0 1 2.08-.38Z",fill:"currentColor"}))},"tick"),nR=`${q}-spin`;class nz extends e8{static get spinDefaultAdapter(){return{getProp:()=>void 0,setLoading:e=>void 0}}constructor(e){super(Object.assign(Object.assign({},nz.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){let{spinning:e,delay:n}=this._adapter.getProps(),{delay:r}=this._adapter.getStates();if(r){let r=this;this._timer=setTimeout(()=>{r._adapter.setState({loading:e,delay:0})},n)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var nV=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let nF={PREFIX:nR}.PREFIX;class n$ extends ej{constructor(e){super(e),this.foundation=new nz(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){let{indicator:e,tip:n}=this.props,{loading:r}=this.state;return r?W.createElement("div",{className:`${nF}-wrapper`},e?W.createElement("div",{className:`${nF}-animate`,"x-semi-prop":"indicator"},e):W.createElement(ef,null),n?W.createElement("div",{"x-semi-prop":"tip"},n):null):null}render(){this.foundation.updateLoadingIfNeedDelay();let e=this.props,{children:n,style:r,wrapperClassName:i,childStyle:o,size:s}=e,a=nV(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,h=Y()(nF,i,{[`${nF}-${s}`]:s,[`${nF}-block`]:n,[`${nF}-hidden`]:!l});return W.createElement("div",Object.assign({className:h,style:r},this.getDataAttr(a)),this.renderSpin(),W.createElement("div",{className:`${nF}-children`,style:o,"x-semi-prop":"children"},n))}}n$.propTypes={size:X().oneOf(["small","middle","large"]),spinning:X().bool,children:X().node,indicator:X().node,delay:X().number,tip:X().node,wrapperClassName:X().string,childStyle:X().object,style:X().object},n$.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};var nB=r(9256),nH=r.n(nB);let nK={PREFIX:`${q}-checkbox`,INNER:`${q}-checkbox-inner`,TEXT:`${q}-checkbox-text`,INPUT:`${q}-checkbox-input`,CHECKED:`${q}-checkbox-checked`,DISABLED:`${q}-checkbox-disabled`,BUTTON:`${q}-checkbox-button`,WRAPPER:""},nU={PREFIX:`${q}-checkboxGroup`,INNER:`${q}-checkboxGroup-inner`,TEXT:`${q}-checkboxGroup-text`,INPUT:`${q}-checkboxGroup-input`,CHECKED:`${q}-checkboxGroup-checked`,DISABLED:`${q}-checkboxGroup-disabled`},nW={DIRECTION_SET:["horizontal","vertical"],TYPE_DEFAULT:"default",TYPE_CARD:"card",TYPE_PURECARD:"pureCard",DEFAULT_DIRECTION:"vertical"},nG=class extends e8{constructor(e){super(Object.assign({},e)),this.clickState=!1,this.handleFocusVisible=e=>{let{target:n}=e;try{if(this.clickState){this.clickState=!1;return}n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(e){t2(!0,"Warning: [Semi Checkbox] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this.clickState=!1,this._adapter.setFocusVisible(!1)}}init(){let{children:e,extra:n,extraId:r,addonId:i}=this.getProps();e&&!i&&this._adapter.setAddonId(),n&&!r&&this._adapter.setExtraId()}notifyChange(e,n){let r=this._adapter.generateEvent(e,n);this._adapter.notifyChange(r)}handleChange(e){if(this.getProp("disabled"))return;if((null==e?void 0:e.type)==="click"&&(this.clickState=!0),this._adapter.focusCheckboxEntity(),this._adapter.getIsInGroup()){this._adapter.getGroupDisabled()||this.handleChangeInGroup(e);return}let n=!this.getState("checked");this._isControlledComponent("checked")||this.setChecked(n),this.notifyChange(n,e)}handleChangeInGroup(e){let{value:n}=this.getProps(),r=this._adapter.getGroupValue().includes(n),i=this._adapter.generateEvent(!r,e);this._adapter.notifyChange(i),this._adapter.notifyGroupChange(i)}handleEnterPress(e){tA(e)&&this.handleChange(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}destroy(){}},nY=W.createContext({}),nZ=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.41 7.3c.66.51.78 1.45.28 2.11l-6.5 8.5a1.5 1.5 0 0 1-2.37.01l-3.5-4.5a1.5 1.5 0 1 1 2.36-1.84L10 14.54l5.32-6.95a1.5 1.5 0 0 1 2.1-.28Z",fill:"currentColor"}))},"checkbox_tick"),nX=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{d:"M5 12.5c0-.83.67-1.5 1.5-1.5h11a1.5 1.5 0 0 1 0 3h-11A1.5 1.5 0 0 1 5 12.5Z",fill:"currentColor"}))},"checkbox_indeterminate");class nQ extends W.PureComponent{blur(){this.inputEntity.blur()}focus(){let{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}render(){let{indeterminate:e,checked:n,disabled:r,prefixCls:i,name:o,isPureCardType:s,addonId:a,extraId:l,focusInner:h,onInputFocus:c,onInputBlur:u}=this.props,d=i||nK.PREFIX,p=Y()({[`${d}-inner`]:!0,[`${d}-inner-checked`]:!!n,[`${d}-inner-pureCardType`]:s},nK.WRAPPER),f=Y()({[`${d}-inner-display`]:!0,[`${d}-focus`]:h,[`${d}-focus-border`]:h&&!n}),g=n?W.createElement(nZ,null):e?W.createElement(nX,null):null,y={type:"checkbox","aria-label":this.props["aria-label"],"aria-disabled":r,"aria-checked":n,"aria-labelledby":a,"aria-describedby":l||this.props["aria-describedby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-required":this.props["aria-required"],className:nK.INPUT,onChange:$(),checked:n,disabled:r,onFocus:c,onBlur:u};return o&&(y.name=o),W.createElement("span",{className:p},W.createElement("input",Object.assign({},y,{ref:e=>{this.inputEntity=e}})),W.createElement("span",{className:f},g))}}nQ.contextType=nY,nQ.propTypes={"aria-describedby":X().string,"aria-errormessage":X().string,"aria-invalid":X().bool,"aria-labelledby":X().string,"aria-required":X().bool,checked:X().bool,disabled:X().bool,onChange:X().func,children:X().node,grouped:X().bool,value:X().any,isPureCardType:X().bool,addonId:X().string,extraId:X().string,focusInner:X().bool,onInputFocus:X().func,onInputBlur:X().func,preventScroll:X().bool},nQ.defaultProps={onChange:$()};class nq extends ej{get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{let{onChange:n}=this.props;n&&n(e)},generateEvent:(e,n)=>{let{props:r}=this;return{target:Object.assign(Object.assign({},r),{checked:e}),stopPropagation:()=>{n.stopPropagation()},preventDefault:()=>{n.preventDefault()},nativeEvent:{stopImmediatePropagation:()=>{n.nativeEvent&&"function"==typeof n.nativeEvent.stopImmediatePropagation&&n.nativeEvent.stopImmediatePropagation()}}}},getIsInGroup:()=>this.isInGroup(),getGroupValue:()=>this.context&&this.context.checkboxGroup.value||[],notifyGroupChange:e=>{this.context.checkboxGroup.onChange(e)},getGroupDisabled:()=>this.context&&this.context.checkboxGroup.disabled,setAddonId:()=>{this.setState({addonId:ne({prefix:"addon"})})},setExtraId:()=>{this.setState({extraId:ne({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})},focusCheckboxEntity:()=>{this.focus()}})}constructor(e){super(e),this.handleChange=e=>this.foundation.handleChange(e),this.handleEnterPress=e=>this.foundation.handleEnterPress(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={checked:e.checked||e.defaultChecked||!1,addonId:e.addonId,extraId:e.extraId,focusVisible:!1},this.checkboxEntity=null,this.foundation=new nG(this.adapter)}componentDidUpdate(e){this.props.checked!==e.checked&&(e3()(this.props.checked)?this.foundation.setChecked(!1):nH()(this.props.checked)&&this.foundation.setChecked(this.props.checked))}isInGroup(){return!!(this.context&&this.context.checkboxGroup&&"value"in this.props)}focus(){this.checkboxEntity&&this.checkboxEntity.focus()}blur(){this.checkboxEntity&&this.checkboxEntity.blur()}render(){let{disabled:e,style:n,prefixCls:r,className:i,indeterminate:o,children:s,onMouseEnter:a,onMouseLeave:l,extra:h,value:c,role:u,tabIndex:d,id:p,type:f}=this.props,{checked:g,addonId:y,extraId:m,focusVisible:b}=this.state,_={checked:g,disabled:e},E=this.isInGroup();if(E){this.context.checkboxGroup.value&&(_.checked=(this.context.checkboxGroup.value||[]).includes(c)),this.context.checkboxGroup.disabled&&(_.disabled=this.context.checkboxGroup.disabled||this.props.disabled);let{isCardType:e,isPureCardType:n}=this.context.checkboxGroup;_.isCardType=e,_.isPureCardType=n,_.name=this.context.checkboxGroup.name}else _.isPureCardType=f===nW.TYPE_PURECARD,_.isCardType=f===nW.TYPE_CARD||_.isPureCardType;let w=r||nK.PREFIX,x=_.isCardType||_.isPureCardType,C=Y()(w,{[`${w}-disabled`]:_.disabled,[`${w}-indeterminate`]:o,[`${w}-checked`]:_.checked,[`${w}-unChecked`]:!_.checked,[`${w}-cardType`]:_.isCardType,[`${w}-cardType_disabled`]:_.disabled&&_.isCardType,[`${w}-cardType_enable`]:!(_.disabled&&_.isCardType),[`${w}-cardType_checked`]:_.isCardType&&_.checked&&!_.disabled,[`${w}-cardType_checked_disabled`]:_.isCardType&&_.checked&&_.disabled,[i]:!!i,[`${w}-focus`]:b&&x}),S=Y()(`${w}-extra`,{[`${w}-cardType_extra_noChildren`]:_.isCardType&&!s});E&&this.context.checkboxGroup.name;let D=this.props["x-semi-children-alias"]||"children";return W.createElement("span",Object.assign({role:u,tabIndex:d,style:n,className:C,id:p,onMouseEnter:a,onMouseLeave:l,onClick:this.handleChange,onKeyPress:this.handleEnterPress,"aria-labelledby":this.props["aria-labelledby"]},this.getDataAttr(this.props)),W.createElement(nQ,Object.assign({},this.props,_,{addonId:s&&y,extraId:h&&m,isPureCardType:_.isPureCardType,ref:e=>{this.checkboxEntity=e},focusInner:b&&!x,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),s||h?W.createElement("div",{className:`${w}-content`},s?W.createElement("span",{id:y,className:`${w}-addon`,"x-semi-prop":D},s):null,h?W.createElement("div",{id:m,className:S,"x-semi-prop":"extra"},h):null):null)}}nq.contextType=nY,nq.propTypes={"aria-describedby":X().string,"aria-errormessage":X().string,"aria-invalid":X().bool,"aria-labelledby":X().string,"aria-required":X().bool,checked:X().bool,defaultChecked:X().bool,disabled:X().bool,indeterminate:X().bool,onChange:X().func,value:X().any,style:X().object,className:X().string,prefixCls:X().string,onMouseEnter:X().func,onMouseLeave:X().func,extra:X().node,index:X().number,"aria-label":X().string,tabIndex:X().number,preventScroll:X().bool,type:X().string},nq.defaultProps={defaultChecked:!1,indeterminate:!1,onChange:$(),onMouseEnter:$(),onMouseLeave:$(),type:"default"},nq.elementType="Checkbox";let nJ=nq;class n0 extends e8{static get checkboxGroupDefaultAdapter(){return{}}constructor(e){super(Object.assign(Object.assign({},n0.checkboxGroupDefaultAdapter),e))}init(){let{defaultValue:e,value:n}=this.getProps();void 0===e||Array.isArray(e)||t2(!0,"Warning: [Semi CheckboxGroup] defaultValue should be an Array"),void 0===n||Array.isArray(n)||t2(!0,"Warning: [Semi CheckboxGroup] value should be an Array")}notifyChange(e){this._adapter.notifyChange(e)}handleChange(e){let n=this.getState("value"),r=[];Array.isArray(n)||(r=[n]),r=e.target.checked?[...n,e.target.value]:n.filter((n,r)=>n!==e.target.value),"value"in this.getProps()||this._adapter.updateGroupValue(r),this.notifyChange(r)}getFormatName(){return this.getProp("name")||"default"}handlePropValueChange(e){Array.isArray(e)?this._adapter.updateGroupValue(e):(void 0===e&&this._adapter.updateGroupValue([]),t2(!0,"Warning: [Semi CheckboxGroup] value should be an Array"))}destroy(){}}class n1 extends ej{get adapter(){return Object.assign(Object.assign({},super.adapter),{updateGroupValue:e=>{this.setState({value:e})},notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}constructor(e){super(e),this.state={value:e.value||e.defaultValue},this.foundation=new n0(this.adapter),this.onChange=this.onChange.bind(this)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){eY()(e.value,this.props.value)||this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}onChange(e){this.foundation.handleChange(e)}render(){let e,{children:n,options:r,prefixCls:i,direction:o,className:s,id:a,style:l,type:h,disabled:c}=this.props,u=h===nW.TYPE_PURECARD,d=h===nW.TYPE_CARD||u,p=i||nU.PREFIX,f=Y()({[p]:!0,[`${p}-wrapper`]:!0,[`${p}-${o}`]:o,[`${p}-${o}-cardType`]:o&&d,[`${p}-${o}-pureCardType`]:o&&u},s),g=this.state.value.slice();return r?e=(r||[]).map((e,n)=>"string"==typeof e?W.createElement(nJ,{role:"listitem",key:n,disabled:this.props.disabled,value:e,prefixCls:i},e):W.createElement(nJ,{role:"listitem",key:n,disabled:e.disabled||this.props.disabled,value:e.value,prefixCls:i,extra:e.extra,className:e.className,style:e.style,onChange:e.onChange},e.label)):n&&(e=W.Children.toArray(n).map((e,n)=>W.cloneElement(e,{key:n,role:"listitem"}))),W.createElement("div",Object.assign({id:a,role:"list","aria-label":this.props["aria-label"],className:f,style:l,"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"]},this.getDataAttr(this.props)),W.createElement(nY.Provider,{value:{checkboxGroup:{onChange:this.onChange,value:g,disabled:this.props.disabled,name:this.foundation.getFormatName(),isCardType:d,isPureCardType:u}}},e))}}n1.propTypes={"aria-describedby":X().string,"aria-errormessage":X().string,"aria-invalid":X().bool,"aria-labelledby":X().string,"aria-required":X().bool,defaultValue:X().array,disabled:X().bool,name:X().string,options:X().array,value:X().array,onChange:X().func,children:X().node,prefixCls:X().string,direction:X().oneOf(nW.DIRECTION_SET),className:X().string,type:X().oneOf([nW.TYPE_DEFAULT,nW.TYPE_CARD,nW.TYPE_PURECARD]),style:X().object},n1.defaultProps={disabled:!1,onChange:()=>{},type:nW.TYPE_DEFAULT,defaultValue:[],direction:nW.DEFAULT_DIRECTION};class n2 extends nJ{}n2.Group=n1;let n3=n2;function n4(){return(n4=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(null,arguments)}function n5(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n6(e,n){return(n6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}var n8=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n9(e,n){if(e.length!==n.length)return!1;for(var r,i,o=0;o<e.length;o++)if(!((r=e[o])===(i=n[o])||n8(r)&&n8(i))&&1)return!1;return!0}let n7=function(e,n){void 0===n&&(n=n9);var r,i,o=[],s=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return s&&r===this&&n(a,o)||(i=e.apply(this,a),s=!0,r=this,o=a),i}};var re="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function rt(e){cancelAnimationFrame(e.id)}var rn=-1;function rr(e){if(void 0===e&&(e=!1),-1===rn||e){var n=document.createElement("div"),r=n.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(n),rn=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return rn}var ri=null;function ro(e){if(void 0===e&&(e=!1),null===ri||e){var n=document.createElement("div"),r=n.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var i=document.createElement("div"),o=i.style;o.width="100px",o.height="100px",n.appendChild(i),document.body.appendChild(n),n.scrollLeft>0?ri="positive-descending":(n.scrollLeft=1,ri=0===n.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(n)}return ri}var rs=function(e,n){return e},ra=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},rl=(h=(a={getItemOffset:function(e,n){return n*e.itemSize},getItemSize:function(e,n){return e.itemSize},getEstimatedTotalSize:function(e){var n=e.itemCount;return e.itemSize*n},getOffsetForIndexAndAlignment:function(e,n,r,i,o,s){var a=e.direction,l=e.height,h=e.itemCount,c=e.itemSize,u=e.layout,d=e.width,p="horizontal"===a||"horizontal"===u?d:l,f=Math.max(0,h*c-p),g=Math.min(f,n*c),y=Math.max(0,n*c-p+c+s);switch("smart"===r&&(r=i>=y-p&&i<=g+p?"auto":"center"),r){case"start":return g;case"end":return y;case"center":var m=Math.round(y+(g-y)/2);if(m<Math.ceil(p/2))return 0;if(m>f+Math.floor(p/2))return f;return m;default:if(i>=y&&i<=g)return i;if(i<y)return y;return g}},getStartIndexForOffset:function(e,n){return Math.max(0,Math.min(e.itemCount-1,Math.floor(n/e.itemSize)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,o=e.height,s=e.itemCount,a=e.itemSize,l=e.layout,h=e.width,c=Math.ceil((("horizontal"===i||"horizontal"===l?h:o)+r-n*a)/a);return Math.max(0,Math.min(s-1,n+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}}).getItemOffset,c=a.getEstimatedTotalSize,u=a.getItemSize,d=a.getOffsetForIndexAndAlignment,p=a.getStartIndexForOffset,f=a.getStopIndexForStartIndex,g=a.initInstanceProps,y=a.shouldResetStyleCacheOnItemSizeChange,m=a.validateProps,(l=function(e){function n(n){var r;return(r=e.call(this,n)||this)._instanceProps=g(r.props,n5(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:n5(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=n7(function(e,n,i,o){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:n,visibleStartIndex:i,visibleStopIndex:o})}),r._callOnScroll=void 0,r._callOnScroll=n7(function(e,n,i){return r.props.onScroll({scrollDirection:e,scrollOffset:n,scrollUpdateWasRequested:i})}),r._getItemStyle=void 0,r._getItemStyle=function(e){var n,i=r.props,o=i.direction,s=i.itemSize,a=i.layout,l=r._getItemStyleCache(y&&s,y&&a,y&&o);if(l.hasOwnProperty(e))n=l[e];else{var c=h(r.props,e,r._instanceProps),d=u(r.props,e,r._instanceProps),p="horizontal"===o||"horizontal"===a,f="rtl"===o,g=p?c:0;l[e]=n={position:"absolute",left:f?void 0:g,right:f?g:void 0,top:p?0:c,height:p?"100%":d,width:p?d:"100%"}}return n},r._getItemStyleCache=void 0,r._getItemStyleCache=n7(function(e,n,r){return{}}),r._onScrollHorizontal=function(e){var n=e.currentTarget,i=n.clientWidth,o=n.scrollLeft,s=n.scrollWidth;r.setState(function(e){if(e.scrollOffset===o)return null;var n=r.props.direction,a=o;if("rtl"===n)switch(ro()){case"negative":a=-o;break;case"positive-descending":a=s-i-o}return a=Math.max(0,Math.min(a,s-i)),{isScrolling:!0,scrollDirection:e.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var n=e.currentTarget,i=n.clientHeight,o=n.scrollHeight,s=n.scrollTop;r.setState(function(e){if(e.scrollOffset===s)return null;var n=Math.max(0,Math.min(s,o-i));return{isScrolling:!0,scrollDirection:e.scrollOffset<n?"forward":"backward",scrollOffset:n,scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var n=r.props.outerRef;r._outerRef=e,"function"==typeof n?n(e):null!=n&&"object"==typeof n&&n.hasOwnProperty("current")&&(n.current=e)},r._resetIsScrollingDebounced=function(){var e,n,i;null!==r._resetIsScrollingTimeoutId&&rt(r._resetIsScrollingTimeoutId),e=r._resetIsScrolling,n=re(),r._resetIsScrollingTimeoutId=i={id:requestAnimationFrame(function r(){re()-n>=150?e.call(null):i.id=requestAnimationFrame(r)})}},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1,null)})},r}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n6(n,e),n.getDerivedStateFromProps=function(e,n){return ra(e,n),m(e),null};var r=n.prototype;return r.scrollTo=function(e){e=Math.max(0,e),this.setState(function(n){return n.scrollOffset===e?null:{scrollDirection:n.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},r.scrollToItem=function(e,n){void 0===n&&(n="auto");var r=this.props,i=r.itemCount,o=r.layout,s=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var a=0;if(this._outerRef){var l=this._outerRef;a="vertical"===o?l.scrollWidth>l.clientWidth?rr():0:l.scrollHeight>l.clientHeight?rr():0}this.scrollTo(d(this.props,e,n,s,this._instanceProps,a))},r.componentDidMount=function(){var e=this.props,n=e.direction,r=e.initialScrollOffset,i=e.layout;if("number"==typeof r&&null!=this._outerRef){var o=this._outerRef;"horizontal"===n||"horizontal"===i?o.scrollLeft=r:o.scrollTop=r}this._callPropsCallbacks()},r.componentDidUpdate=function(){var e=this.props,n=e.direction,r=e.layout,i=this.state,o=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var s=this._outerRef;if("horizontal"===n||"horizontal"===r)if("rtl"===n)switch(ro()){case"negative":s.scrollLeft=-o;break;case"positive-ascending":s.scrollLeft=o;break;default:var a=s.clientWidth,l=s.scrollWidth;s.scrollLeft=l-a-o}else s.scrollLeft=o;else s.scrollTop=o}this._callPropsCallbacks()},r.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&rt(this._resetIsScrollingTimeoutId)},r.render=function(){var e=this.props,n=e.children,r=e.className,i=e.direction,o=e.height,s=e.innerRef,a=e.innerElementType,l=e.innerTagName,h=e.itemCount,u=e.itemData,d=e.itemKey,p=void 0===d?rs:d,f=e.layout,g=e.outerElementType,y=e.outerTagName,m=e.style,b=e.useIsScrolling,_=e.width,E=this.state.isScrolling,w="horizontal"===i||"horizontal"===f,x=w?this._onScrollHorizontal:this._onScrollVertical,C=this._getRangeToRender(),S=C[0],D=C[1],N=[];if(h>0)for(var O=S;O<=D;O++)N.push((0,W.createElement)(n,{data:u,key:p(O,u),index:O,isScrolling:b?E:void 0,style:this._getItemStyle(O)}));var M=c(this.props,this._instanceProps);return(0,W.createElement)(g||y||"div",{className:r,onScroll:x,ref:this._outerRefSetter,style:n4({position:"relative",height:o,width:_,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},m)},(0,W.createElement)(a||l||"div",{children:N,ref:s,style:{height:w?"100%":M,pointerEvents:E?"none":void 0,width:w?M:"100%"}}))},r._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),n=e[0],r=e[1],i=e[2],o=e[3];this._callOnItemsRendered(n,r,i,o)}if("function"==typeof this.props.onScroll){var s=this.state,a=s.scrollDirection,l=s.scrollOffset,h=s.scrollUpdateWasRequested;this._callOnScroll(a,l,h)}},r._getRangeToRender=function(){var e=this.props,n=e.itemCount,r=e.overscanCount,i=this.state,o=i.isScrolling,s=i.scrollDirection,a=i.scrollOffset;if(0===n)return[0,0,0,0];var l=p(this.props,a,this._instanceProps),h=f(this.props,l,a,this._instanceProps);return[Math.max(0,l-(o&&"backward"!==s?1:Math.max(1,r))),Math.max(0,Math.min(n-1,h+(o&&"forward"!==s?1:Math.max(1,r)))),l,h]},n}(W.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},l);let rh=e=>{let{index:n,data:r,style:i}=e,{visibleOptions:o,renderOption:s}=r;return s(o[n],n,i)},rc=tS.PREFIX_OPTION;class ru extends W.PureComponent{constructor(){var e;super(...arguments),e=this,this.onClick=(e,n)=>{let{onItemClick:r}=this.props;n.data.disabled||"disabled"in n&&n.disabled||r(e,n)},this.handleItemEnterPress=(e,n)=>{tA(e)&&this.onClick(e,n)},this.onHover=(e,n)=>{let{showNext:r,onItemHover:i}=this.props;n.data.disabled||r===tD.SHOW_NEXT_BY_HOVER&&i(e,n)},this.onCheckboxChange=(e,n)=>{let{onItemCheckboxClick:r}=this.props;e.stopPropagation(),e.nativeEvent&&"function"==typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),r(n)},this.getItemStatus=e=>{let{activeKeys:n,selectedKeys:r,loadedKeys:i,loadingKeys:o}=this.props,s={active:!1,selected:!1,loading:!1};return n.has(e)&&(s.active=!0),r.has(e)&&(s.selected=!0),o.has(e)&&!i.has(e)&&(s.loading=!0),s},this.renderIcon=function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e=>e+(r?` ${rc}-icon-left`:"");switch(n){case"child":let{expandIcon:o}=e.props;if(o)return o;return W.createElement(nL.Z,{className:i(`${rc}-icon ${rc}-icon-expand`)});case"tick":return W.createElement(nj,{className:i(`${rc}-icon ${rc}-icon-active`)});case"loading":return W.createElement(n$,{wrapperClassName:i(`${rc}-spin-icon`)});case"empty":return W.createElement("span",{"aria-hidden":!0,className:i(`${rc}-icon ${rc}-icon-empty`)});default:return null}},this.highlight=e=>{let n=[],{keyword:r,separator:i}=this.props;return e.forEach((o,s)=>{"string"==typeof o&&eJ()(o,r)?o.split(r).forEach((e,i)=>{i>0&&n.push(W.createElement("span",{className:`${rc}-label-highlight`,key:`${i}-${s}`},r)),n.push(e)}):n.push(o),s!==e.length-1&&n.push(i)}),n},this.renderFlattenOptionItem=(e,n,r)=>{var i;let{multiple:o,selectedKeys:s,checkedKeys:a,halfCheckedKeys:l,keyword:h,filterRender:c,virtualize:u}=this.props,{searchText:d,key:p,disabled:f,pathData:g}=e,y=s.has(p),m=Y()(rc,{[`${rc}-flatten`]:!c,[`${rc}-disabled`]:f,[`${rc}-select`]:y&&!o}),b=n=>{this.onClick(n,e)},_=n=>this.onCheckboxChange(n,e);if(c){let n={className:m,inputValue:h,disabled:f,data:g,checkStatus:{checked:a.has(e.key),halfChecked:l.has(e.key)},selected:y,onClick:b,onCheck:_},o=c(n),s=u?{key:p,style:Object.assign(Object.assign({},null!=(i=o.props.style)?i:{}),r)}:{key:p};return W.cloneElement(o,s)}return W.createElement("li",{role:"menuitem",className:m,style:r,key:p,onClick:b,onKeyPress:n=>this.handleItemEnterPress(n,e)},W.createElement("span",{className:`${rc}-label`},!o&&this.renderIcon("empty"),o&&W.createElement(n3,{onChange:_,disabled:f,indeterminate:l.has(e.key),checked:a.has(e.key),className:`${rc}-label-checkbox`}),this.highlight(d)))},this.renderFlattenOption=e=>{let{virtualize:n}=this.props;return W.createElement("ul",{className:`${rc}-list`,key:"flatten-list"},n?this.renderVirtualizeList(e):e.map(e=>this.renderFlattenOptionItem(e)))},this.renderVirtualizeList=e=>{var n;let{direction:r}=this.context,{virtualize:i}=this.props;return W.createElement(rl,{height:i.height,itemCount:e.length,itemSize:i.itemSize,itemData:{visibleOptions:e,renderOption:this.renderFlattenOptionItem},width:null!=(n=i.width)?n:"100%",style:{direction:r}},rh)}}renderItem(e){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{multiple:i,checkedKeys:o,halfCheckedKeys:s}=this.props,a=r.length;return r.push(W.createElement("ul",{role:"menu",className:`${rc}-list`,key:e[0].key,onScroll:e=>this.props.onListScroll(e,a)},e.map(e=>{let{data:r,key:a,parentKey:l}=e,{children:h,label:c,disabled:u,isLeaf:d}=r,{active:p,selected:f,loading:g}=this.getItemStatus(a),y=!!h&&h.length,m=y||this.props.loadData&&!d;p&&y&&(n=e);let b=Y()(rc,{[`${rc}-active`]:p&&!f,[`${rc}-select`]:f&&!i,[`${rc}-disabled`]:u}),_=l?{"aria-owns":`cascaderItem-${l}`}:{};return W.createElement("li",Object.assign({role:"menuitem",id:`cascaderItem-${a}`,"aria-expanded":p,"aria-haspopup":!!m,"aria-disabled":u},_,{className:b,key:a,onClick:n=>{this.onClick(n,e)},onKeyPress:n=>this.handleItemEnterPress(n,e),onMouseEnter:n=>{this.onHover(n,e)}}),W.createElement("span",{className:`${rc}-label`},f&&!i&&this.renderIcon("tick"),!f&&!i&&this.renderIcon("empty"),i&&W.createElement(n3,{onChange:n=>this.onCheckboxChange(n,e),disabled:u,indeterminate:s.has(e.key),checked:o.has(e.key),className:`${rc}-label-checkbox`}),W.createElement("span",null,c)),m?this.renderIcon(g?"loading":"child",!0):null)}))),n&&r.concat(this.renderItem(n.children,r)),r}renderEmpty(){let{emptyContent:e}=this.props;return null===e?null:W.createElement(nA,{componentName:"Cascader"},n=>W.createElement("ul",{className:`${rc} ${rc}-empty`,key:"empty-list"},W.createElement("span",{className:`${rc}-label`,"x-semi-prop":"emptyContent"},e||n.emptyText)))}render(){let e,{data:n,searchable:r}=this.props,{direction:i}=this.context,o=!n||!n.length,s=Y()({[`${rc}-lists`]:!0,[`${rc}-lists-rtl`]:"rtl"===i,[`${rc}-lists-empty`]:o});return e=o?this.renderEmpty():r?this.renderFlattenOption(n):this.renderItem(n),W.createElement("div",{className:s},e)}}ru.contextType=Q,ru.propTypes={data:X().array,emptyContent:X().node,searchable:X().bool,onItemClick:X().func,onItemHover:X().func,multiple:X().bool,showNext:X().oneOf([tD.SHOW_NEXT_BY_CLICK,tD.SHOW_NEXT_BY_HOVER]),checkedKeys:X().object,halfCheckedKeys:X().object,onItemCheckboxClick:X().func,separator:X().string,keyword:X().string,virtualize:X().object,expandIcon:X().node},ru.defaultProps={empty:!1};var rd=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};class rp extends W.PureComponent{render(){let e=this.props,{triggerRender:n,componentName:r}=e;return n(Object.assign({},rd(e,["triggerRender","componentName"])))}}rp.propTypes={triggerRender:X().func.isRequired,componentName:X().string,componentProps:X().object,value:X().any,inputValue:X().string,placeholder:X().oneOfType([X().string,X().array]),className:X().string,style:X().object};let rf={PREFIX:`${q}-tag`},rg=["default","small","large"],ry=["square","circle"],rm={PREFIX:`${q}-avatar`},rv=["circle","square"],rb=["extra-extra-small","extra-small","small","default","medium","large","extra-large"];class r_ extends e8{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{let{target:n}=e;try{n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(e){t2(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{let{gap:e}=this.getProps(),n=this._adapter.getAvatarNode(),r=null==n?void 0:n.firstChild,[i,o]=[(null==n?void 0:n.offsetWidth)||0,(null==r?void 0:r.offsetWidth)||0];0!==i&&0!==o&&2*e<i&&this._adapter.setScale(i-2*e>o?1:(i-2*e)/o)}}init(){let{children:e}=this.getProps();"string"==typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){let{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}let rE=e=>{let{gradientStart:n,gradientEnd:r}=e,i=ne();return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},W.createElement("g",{filter:"url(#filter0_d_6_2)"},W.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${i})`})),W.createElement("defs",null,W.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},W.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),W.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),W.createElement("feOffset",{dy:"1.65809"}),W.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),W.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),W.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),W.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),W.createElement("linearGradient",{id:i,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},W.createElement("stop",{stopColor:n}),W.createElement("stop",{offset:"1",stopColor:r}))))};var rw=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let rx=rm.PREFIX;class rC extends ej{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{let{children:e,onClick:n,imgAttr:r,src:i,srcSet:o,alt:s}=this.props,{isImgExist:a}=this.state,l=e,h=n!==es,c=i&&a,u={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(c){let e=h?`clickable Avatar: ${s}`:s,n=Object.assign(Object.assign({src:i,srcSet:o,onError:this.handleError},r),{className:Y()({[`${rx}-no-focus-visible`]:h})}),a=h?Object.assign(Object.assign({},n),u):n;l=W.createElement("img",Object.assign({alt:e},a))}else if("string"==typeof e){let n=null!=s?s:e,r={role:"img","aria-label":h?`clickable Avatar: ${n}`:n,className:Y()(`${rx}-label`,{[`${rx}-no-focus-visible`]:h})},i=h?Object.assign(Object.assign({},r),u):r,o={transform:`scale(${this.state.scale})`};l=W.createElement("span",{className:`${rx}-content`,style:o},W.createElement("span",Object.assign({},i,{"x-semi-prop":"children"}),e))}return l},this.renderBottomSlot=()=>{var e,n;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();let r=null!=(e=this.props.bottomSlot.render)?e:()=>{var e;let n={};return this.props.bottomSlot.bgColor&&(n.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(n.color=this.props.bottomSlot.textColor),W.createElement("span",{style:n,className:Y()(`${rx}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${rx}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,null!=(e=this.props.bottomSlot.className)?e:"")},this.props.bottomSlot.text)};return W.createElement("div",{className:Y()([`${rx}-bottom_slot`]),style:null!=(n=this.props.bottomSlot.style)?n:{}},r())},this.renderTopSlot=()=>{var e,n,r,i;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();let o={};return this.props.topSlot.textColor&&(o.color=this.props.topSlot.textColor),W.createElement("div",{style:null!=(e=this.props.topSlot.style)?e:{},className:Y()([`${rx}-top_slot-wrapper`,null!=(n=this.props.topSlot.className)?n:"",{[`${rx}-animated`]:this.props.contentMotion}])},W.createElement("div",{className:Y()([`${rx}-top_slot-bg`,`${rx}-top_slot-bg-${this.props.size}`])},W.createElement("div",{className:Y()([`${rx}-top_slot-bg-svg`,`${rx}-top_slot-bg-svg-${this.props.size}`])},W.createElement(rE,{gradientStart:null!=(r=this.props.topSlot.gradientStart)?r:"var(--semi-color-primary)",gradientEnd:null!=(i=this.props.topSlot.gradientEnd)?i:"var(--semi-color-primary)"}))),W.createElement("div",{className:Y()([`${rx}-top_slot`])},W.createElement("div",{style:o,className:Y()([`${rx}-top_slot-content`,`${rx}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=W.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{let{hoverMask:n}=this.props;this.setState({hoverContent:n},()=>{let{onMouseEnter:n}=this.props;n&&n(e)})},notifyLeave:e=>{this.setState({hoverContent:""},()=>{let{onMouseLeave:n}=this.props;n&&n(e)})},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null==(e=this.avatarRef)?void 0:e.current}})}componentDidMount(){this.foundation=new r_(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){let e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"==typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){let{onClick:n}=this.props;switch(e.key){case"Enter":n(e),t4(e);break;case"Escape":e.target.blur()}}render(){var e;let n=this.props,{shape:r,children:i,size:o,color:s,className:a,hoverMask:l,onClick:h,imgAttr:c,src:u,srcSet:d,style:p,alt:f,gap:g,bottomSlot:y,topSlot:m,border:b,contentMotion:_}=n,E=rw(n,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:w,hoverContent:x,focusVisible:C}=this.state,S={};rb.includes(o)||(S={width:o,height:o}),S=Object.assign(Object.assign({},S),p);let D=y||m||b,N={onClick:h,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},O=u&&w,M=Y()(rx,{[`${rx}-${r}`]:r,[`${rx}-${o}`]:o,[`${rx}-${s}`]:s&&!O,[`${rx}-img`]:O,[`${rx}-focus`]:C,[`${rx}-animated`]:_},a),I=x?W.createElement("div",{className:`${rx}-hover`,"x-semi-prop":"hoverContent"},x):null,T=W.createElement("span",Object.assign({},E,{style:D?{}:S,className:M},D?{}:N,{role:"listitem",ref:this.avatarRef}),this.getContent(),I);if(b){let n={};"object"==typeof b&&(null==b?void 0:b.color)&&(n.borderColor=null==b?void 0:b.color),T=W.createElement("div",{style:Object.assign({position:"relative"},S)},T,W.createElement("span",{style:n,className:Y()([`${rx}-additionalBorder`,`${rx}-additionalBorder-${o}`,{[`${rx}-${r}`]:r}])}),"object"==typeof this.props.border&&this.props.border.motion&&W.createElement("span",{style:n,className:Y()([`${rx}-additionalBorder`,`${rx}-additionalBorder-${o}`,{[`${rx}-${r}`]:r,[`${rx}-additionalBorder-animated`]:"object"==typeof this.props.border&&(null==(e=this.props.border)?void 0:e.motion)}])}))}return D?W.createElement("span",Object.assign({className:Y()([`${rx}-wrapper`]),style:S},N),T,m&&["extra-small","small","default","medium","large","extra-large"].includes(o)&&"circle"===r&&this.renderTopSlot(),y&&["extra-small","small","default","medium","large","extra-large"].includes(o)&&this.renderBottomSlot()):T}}rC.__SemiComponentName__="Avatar",rC.defaultProps=eI(rC.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:es,onMouseEnter:es,onMouseLeave:es}),rC.propTypes={children:X().node,color:X().oneOf(["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"]),shape:X().oneOf(rv),size:X().oneOf(rb),hoverMask:X().node,className:X().string,style:X().object,gap:X().number,imgAttr:X().object,src:X().string,srcSet:X().string,alt:X().string,onError:X().func,onClick:X().func,onMouseEnter:X().func,onMouseLeave:X().func,bottomSlot:X().shape({render:X().func,shape:X().oneOf(["circle","square"]),text:X().node,bgColor:X().string,textColor:X().string,className:X().string,style:X().object}),topSlot:X().shape({render:X().func,gradientStart:X().string,gradientEnd:X().string,text:X().node,textColor:X().string,className:X().string,style:X().object}),border:X().oneOfType([X().shape({color:X().string,motion:X().bool}),X().bool]),contentMotion:X().bool},rC.elementType="Avatar";let rS=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{d:"M17.66 19.78a1.5 1.5 0 0 0 2.12-2.12L14.12 12l5.66-5.66a1.5 1.5 0 0 0-2.12-2.12L12 9.88 6.34 4.22a1.5 1.5 0 1 0-2.12 2.12L9.88 12l-5.66 5.66a1.5 1.5 0 0 0 2.12 2.12L12 14.12l5.66 5.66Z",fill:"currentColor"}))},"close");var rD=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let rN=rf.PREFIX,rO=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],rM=["light","solid","ghost"];class rI extends W.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,n,r){let{onClose:i}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),i&&i(n,e,r),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){let{closable:n,onClick:r,onKeyDown:i}=this.props;switch(e.key){case"Backspace":case"Delete":n&&this.close(e,this.props.children,this.props.tagKey),t4(e);break;case"Enter":r(e),t4(e);break;case"Escape":e.target.blur()}i&&i(e)}renderAvatar(){let{avatarShape:e,avatarSrc:n}=this.props;return W.createElement(rC,{src:n,shape:e})}render(){let e=this.props,{tagKey:n,children:r,size:i,color:o,closable:s,visible:a,onClose:l,onClick:h,className:c,type:u,shape:d,avatarSrc:p,avatarShape:f,tabIndex:g,prefixIcon:y,suffixIcon:m}=e,b=rD(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:_}=this.state,E=h!==rI.defaultProps.onClick||s,w={role:"button",tabIndex:g||0,onKeyDown:this.handleKeyDown},x=Object.assign(Object.assign({},b),{onClick:h,tabIndex:g,className:Y()(rN,{[`${rN}-default`]:"default"===i,[`${rN}-small`]:"small"===i,[`${rN}-large`]:"large"===i,[`${rN}-square`]:"square"===d,[`${rN}-circle`]:"circle"===d,[`${rN}-${u}`]:u,[`${rN}-${o}-${u}`]:o&&u,[`${rN}-closable`]:s,[`${rN}-invisible`]:!_,[`${rN}-avatar-${f}`]:p},c)}),C=E?Object.assign(Object.assign({},x),w):x,S=s?W.createElement("div",{className:`${rN}-close`,onClick:e=>this.close(e,r,n)},W.createElement(rS,{size:"small"})):null,D=H()(r),N=Y()(`${rN}-content`,`${rN}-content-${D?"ellipsis":"center"}`);return W.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||D?`${s?"Closable ":""}Tag: ${r}`:""},C),y?W.createElement("div",{className:`${rN}-prefix-icon`},y):null,p?this.renderAvatar():null,W.createElement("div",{className:N},r),m?W.createElement("div",{className:`${rN}-suffix-icon`},m):null,S)}}rI.defaultProps={size:rg[0],color:rO[0],closable:!1,type:rM[0],onClose:()=>void 0,onClick:()=>void 0,onMouseEnter:()=>void 0,style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},rI.propTypes={children:X().node,tagKey:X().oneOfType([X().string,X().number]),size:X().oneOf(rg),color:X().oneOf(rO),type:X().oneOf(rM),closable:X().bool,visible:X().bool,onClose:X().func,onClick:X().func,prefixIcon:X().node,suffixIcon:X().node,style:X().object,className:X().string,avatarSrc:X().string,avatarShape:X().oneOf(ry),"aria-label":X().string};var rT=r(5589),rk=r.n(rT);let rP={PREFIX:`${q}-tagInput`},rA=(e,n)=>{let r=[];if(H()(n)||U()(n))r=e.split(n);else if(rk()(n)){let i=n[0];r=e;for(let e=1;e<n.length;e++)r=r.split(n[e]).join(i);r=r.split(i)}else r.push(e);return r},rL=class extends e8{constructor(e){super(Object.assign({},e)),this.handleInputChange=e=>{let{value:n}=e.target,{entering:r}=this.getStates();r?this._onInputChange(n,e):this._checkInputChangeValid(n)&&this._onInputChange(n,e)},this.handleInputCompositionStart=e=>{let{maxLength:n}=this.getProps();U()(n)&&this._adapter.setEntering(!0)},this.handleInputCompositionEnd=e=>{let{value:n}=e.target,{maxLength:r,onInputExceed:i,separator:o}=this.getProps();if(!U()(r))return;this._adapter.setEntering(!1);let s=!0,a=rA(n,o),l=0;for(;l<a.length;l++)if(a[l].length>r){s=!1,eK()(i)&&i(n);break}if(s)this._adapter.setInputValue(n);else{let e=a.slice(0,l);l<a.length&&e.push(a[l].slice(0,r)),this._adapter.setInputValue(e.join(o))}},this._checkInputChangeValid=e=>{let{maxLength:n,onInputExceed:r,separator:i}=this._adapter.getProps(),{inputValue:o}=this._adapter.getStates(),s=!0;if(U()(n)){let a=rA(e,i),l=rA(o,i),h=Math.max(a.length,l.length);for(let i=0;i<h;i++)if(!e3()(a[i])&&(e3()(l[i])||a[i].length>l[i].length)&&a[i].length>n){s=!1,eK()(r)&&r(e);break}}return s},this.handleKeyDown=e=>{let{inputValue:n,tagsArray:r}=this._adapter.getStates(),i=e.keyCode;i===tP.ENTER&&(e.preventDefault(),""!==n&&this._handleAddTags(e));let{length:o}=r;if(i===tP.BACKSPACE&&""===n&&o>0){let e=r.slice(0,o-1),n=r[o-1];this._onRemove(e,n,o-1)}this._adapter.notifyKeyDown(e)}}_handleAddTags(e){let{separator:n,max:r,onExceed:i,allowDuplicates:o}=this._adapter.getProps(),{inputValue:s,tagsArray:a}=this._adapter.getStates(),l=rA(s,n);l=l.filter((e,n)=>!(!o&&(a.includes(e)||l.indexOf(e)!==n))&&H()(e)&&""!==e.trim());let h=a.concat(l);U()(r)&&h.length>r&&(eK()(i)&&i(h),h=h.slice(0,r),l=l.slice(0,r-a.length)),l.length>0&&this._onAdd(h,l),this._onInputChange("",e)}handleInputBlur(e){let{addOnBlur:n}=this._adapter.getProps();!0===n&&this._handleAddTags(e),this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputFocus(e){this._adapter.setFocusing(!0),this._adapter.notifyFocus(e)}handleClearEnterPress(e){tA(e)&&this.handleClearBtn(e)}handleClearBtn(e){let{inputValue:n,tagsArray:r}=this._adapter.getStates();r.length>0&&(this._adapter.setTagsArray([]),this._adapter.notifyTagChange([])),n.length>0&&this._onInputChange("",e),e.stopPropagation()}handleTagClose(e){let{tagsArray:n}=this._adapter.getStates(),r=[...n];r.splice(e,1);let i=n[e];this._onRemove(r,i,e)}handleInputMouseEnter(){this._adapter.setHovering(!0)}handleInputMouseLeave(){this._adapter.setHovering(!1)}handleClick(e){let{disabled:n}=this.getProps();!n&&(this._adapter.getClickOutsideHandler()||(this._adapter.setActive(!0),this._adapter.registerClickOutsideHandler(e=>this.clickOutsideCallBack())))}clickOutsideCallBack(){this._adapter.unregisterClickOutsideHandler(),this._adapter.setActive(!1)}handleClickPrefixOrSuffix(e){let{disabled:n}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();n||r||this._adapter.toggleFocusing(!0)}handlePreventMouseDown(e){e&&eK()(e.preventDefault)&&e.preventDefault()}_onRemove(e,n,r){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagRemove(n,r)}_onAdd(e,n){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagAdd(n)}_onInputChange(e,n){this._adapter.setInputValue(e),this._adapter.notifyInputChange(e,n)}handleSortEnd(e){let{oldIndex:n,newIndex:r}=e,{tagsArray:i}=this.getStates(),o=function(e,n,r){let i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}(i,n,r);this._isControlledComponent()||this._adapter.setTagsArray(o),this._adapter.notifyTagChange(o)}},rj={PREFIX:`${q}-typography`},rR=["primary","secondary","danger","warning","success","tertiary","quaternary"],rz=["normal","small","inherit"],rV=["normal","extended"],rF=[1,2,3,4,5,6];var r$=r(8469),rB=r.n(r$),rH=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let rK=rj.PREFIX;class rU extends W.PureComponent{render(){let e=this.props,{component:n,className:r,children:i,forwardRef:o}=e,s=rH(e,["component","className","children","forwardRef"]),a=Y()(rK,r);return W.createElement(n,Object.assign({className:a,ref:o},s),i)}}rU.defaultProps={component:"article",style:{},className:""},rU.propTypes={component:X().string,style:X().object,className:X().string};var rW=r(868),rG=r.n(rW),rY=r(2439);let rZ=rj.PREFIX;class rX extends W.PureComponent{constructor(e){super(e),this.copy=e=>{let{content:n,duration:r,onCopy:i}=this.props,o=rG()(n);i&&i(e,n,o),this.setCopied(n,r)},this.setCopied=(e,n)=>{this.setState({copied:!0,item:e}),this._timeId=setTimeout(()=>{this.resetCopied()},1e3*n)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{let{successTip:e}=this.props;return void 0!==e?e:W.createElement(nA,{componentName:"Typography"},e=>W.createElement("span",null,W.createElement(nj,null),e.copied))},this.renderCopyIcon=()=>{let{icon:e}=this.props,n={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:e=>tA(e)&&this.copy(e)},r=W.createElement("a",{className:`${rZ}-action-copy-icon`},W.createElement(rY.Z,Object.assign({onClick:this.copy},n)));return W.isValidElement(e)?W.cloneElement(e,n):r},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){let{style:e,className:n,forwardRef:r,copyTip:i,render:o}=this.props,{copied:s}=this.state,a=Y()(n,{[`${rZ}-action-copy`]:!s,[`${rZ}-action-copied`]:s});return o?o(s,this.copy,this.props):W.createElement(nA,{componentName:"Typography"},n=>W.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:a,ref:r},s?this.renderSuccessTip():W.createElement(ng,{content:void 0!==i?i:n.copy},this.renderCopyIcon())))}}function rQ(e){if(!e)return 0;let n=e.match(/^\d*(\.\d*)?/);return n?Number(n[0]):0}rX.propTypes={content:X().string,onCopy:X().func,successTip:X().node,copyTip:X().node,duration:X().number,style:X().object,className:X().string,icon:X().node},rX.defaultProps={content:"",onCopy:es,duration:3,style:{},className:""};let rq=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0;if(0===r.length)return"";i||((i=document.createElement("div")).setAttribute("aria-hidden","true"),document.body.appendChild(i));let c=window.getComputedStyle(e),u=Array.prototype.slice.apply(c).map(e=>`${e}: ${c.getPropertyValue(e)};`).join(""),d=Math.round(rQ(c.lineHeight)*(n+1)+rQ(c.paddingTop)+rQ(c.paddingBottom));function p(){let e=i.scrollWidth<=i.offsetWidth,r=i.scrollHeight<d;return 1===n?e&&r:r}i.setAttribute("style",u),i.style.position="fixed",i.style.left="0","auto"===c.getPropertyValue("width")&&e.offsetWidth&&(i.style.width=`${e.offsetWidth}px`),i.style.height="auto",i.style.top="-999999px",i.style.zIndex="-1000",h&&(i.style.fontWeight="600"),i.style.textOverflow="clip",i.style.webkitLineClamp="none",i.innerHTML="";let f=document.createElement("span"),g=document.createTextNode(r);if(f.appendChild(g),a.length>0){let e=document.createTextNode(a);f.appendChild(e)}function y(e,n){let r=e.length;return n?"end"===l?e.slice(0,n)+s:e.slice(0,n)+s+e.slice(r-n,r):s}i.appendChild(f),Object.values(er()(o,"expand")).map(e=>e&&i.appendChild(e.cloneNode(!0)));let m=r;return p()||(i.innerHTML="",i.appendChild(f),Object.values(o).map(e=>e&&i.appendChild(e.cloneNode(!0))),m=function e(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.length,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=Math.floor((i+o)/2);if(n.textContent=y(r,l),i>=o-1&&o>0)for(let e=o;e>=i;e-=1){let i=y(r,e);if(n.textContent=i,p())return i}else if(0===o)return s;return p()?e(n,r,l,o,l):e(n,r,i,l,a)}(g,r,0,"middle"===l?Math.floor(r.length/2):r.length)),i.innerHTML="",m},rJ=W.createContext("normal");(b=M||(M={})).Width="width",b.Height="height",b.All="all";class r0 extends ej{constructor(e){var n;super(e),n=this,this.formerPropertyValue=new Map,this.getElement=()=>{try{return(0,eQ.findDOMNode)(this.childNode||this)}catch(e){return null}},this.handleResizeEventTriggered=e=>{var n,r,i,o;if(this.props.observerProperty===M.All)null==(r=(n=this.props).onResize)||r.call(n,e);else{let n=[];for(let r of e)this.formerPropertyValue.has(r.target)?r.contentRect[this.props.observerProperty]!==this.formerPropertyValue.get(r.target)&&(this.formerPropertyValue.set(r.target,r.contentRect[this.props.observerProperty]),n.push(r)):(this.formerPropertyValue.set(r.target,r.contentRect[this.props.observerProperty]),n.push(r));n.length>0&&(null==(o=(i=this.props).onResize)||o.call(i,n))}},this.observeElement=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=n.getElement();if(n.observer||(n.observer=new ResizeObserver(n.handleResizeEventTriggered)),!(r&&r instanceof Element))return void n.observer.disconnect();(r!==n.element||e)&&(n.observer.disconnect(),n.element=r,n.observer.observe(r),n.props.observeParent&&r.parentNode&&r.parentNode.ownerDocument&&r.parentNode.ownerDocument.defaultView&&r.parentNode instanceof r.parentNode.ownerDocument.defaultView.HTMLElement&&(n._parentNode=r.parentNode,n.observer.observe(n._parentNode)))},this.mergeRef=(e,n)=>{this.childNode=n,"function"==typeof e?e(n):"object"==typeof e&&e&&"current"in e&&(e.current=n)},globalThis.ResizeObserver&&(this.observer=new ResizeObserver(this.handleResizeEventTriggered))}componentDidMount(){var e;null==(e=this.observeElement)||e.call(this)}componentDidUpdate(e){var n;null==(n=this.observeElement)||n.call(this,this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}render(){let e=W.Children.only(this.props.children),{ref:n}=e;return W.cloneElement(e,{ref:e=>this.mergeRef(n,e)})}}r0.propTypes={onResize:X().func,observeParent:X().bool,observerProperty:X().string,delayTick:X().number},r0.defaultProps={onResize:()=>{},observeParent:!1,observerProperty:"all",delayTick:0};var r1=function(e,n,r,i){return new(r||(r=Promise))(function(o,s){function a(e){try{h(i.next(e))}catch(e){s(e)}}function l(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var n;e.done?o(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,l)}h((i=i.apply(e,n||[])).next())})},r2=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let r3=rj.PREFIX,r4=(e,n)=>{let{mark:r,code:i,underline:o,strong:s,link:a,disabled:l}=e,h=n,c=(e,n)=>{let r={};e&&("object"==typeof e&&(r=Object.assign({},e)),h=W.createElement(n,r,h))};return c(r,"mark"),c(i,"code"),c(o&&!a,"u"),c(s,"strong"),c(e.delete,"del"),c(a,l?"span":"a"),h};class r5 extends W.Component{constructor(e){super(e),this.observerTakingEffect=!1,this.onResize=e=>r1(this,void 0,void 0,function*(){return this.rafId&&window.cancelAnimationFrame(this.rafId),new Promise(e=>{this.rafId=window.requestAnimationFrame(()=>r1(this,void 0,void 0,function*(){yield this.getEllipsisState(),e()}))})}),this.canUseCSSEllipsis=()=>{let{copyable:e}=this.props,{expandable:n,expandText:r,pos:i,suffix:o}=this.getEllipsisOpt();return!n&&e3()(r)&&!e&&"end"===i&&!o.length},this.shouldTruncated=e=>!!e&&!(e<1)&&(e<=1?this.compareSingleRow():this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight),this.compareSingleRow=()=>{if(!(document&&document.createRange))return!1;let e=this.wrapperRef.current,n=e.getBoundingClientRect().width,r=Array.from(e.childNodes),i=document.createRange(),o=r.reduce((e,n)=>{var r;return i.selectNodeContents(n),e+(null!=(r=i.getBoundingClientRect().width)?r:0)},0);return i.detach(),o>n},this.showTooltip=()=>{var e,n;let{isOverflowed:r,isTruncated:i,expanded:o}=this.state,{showTooltip:s,expandable:a,expandText:l}=this.getEllipsisOpt(),h=this.canUseCSSEllipsis(),c=!a&&e3()(l)&&!o&&(h?r:i)&&s;if(!c)return c;let u={type:"tooltip"};return"object"==typeof s?s.type&&"popover"===s.type.toLowerCase()?rB()({opts:{showArrow:!0}},s,{opts:{className:Y()({[`${r3}-ellipsis-popover`]:!0,[null==(e=null==s?void 0:s.opts)?void 0:e.className]:!!(null==(n=null==s?void 0:s.opts)?void 0:n.className)})}}):Object.assign(Object.assign({},u),s):u},this.onHover=()=>{if(this.canUseCSSEllipsis()){let{rows:e,suffix:n,pos:r}=this.getEllipsisOpt(),i=this.shouldTruncated(e);this.setState({isOverflowed:i,isTruncated:!1});return}},this.getEllipsisState=()=>r1(this,void 0,void 0,function*(){let{rows:e,suffix:n,pos:r}=this.getEllipsisOpt(),{children:i,strong:o}=this.props;if(!this.wrapperRef||!this.wrapperRef.current)return void(yield this.onResize());let{expanded:s}=this.state;if(this.canUseCSSEllipsis())return;if(tt()(i))return new Promise(e=>{this.setState({isTruncated:!1,isOverflowed:!1},e)});if(t2("children"in this.props&&"string"!=typeof i,"[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!e||e<0||s)return;let a={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},l=Array.isArray(i)?i.join(""):String(i),h=rq(this.wrapperRef.current,e,l,a,"...",n,r,o);return new Promise(e=>{this.setState({isOverflowed:!1,ellipsisContent:h,isTruncated:l!==h},e)})}),this.toggleOverflow=e=>{let{onExpand:n,expandable:r,collapsible:i}=this.getEllipsisOpt(),{expanded:o}=this.state;n&&n(!o,e),(r&&!o||i&&o)&&this.setState({expanded:!o})},this.getEllipsisOpt=()=>{let{ellipsis:e}=this.props;return e?Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:e.expandable?this.expandStr:void 0,collapseText:e.collapsible?this.collapseStr:void 0},"object"==typeof e?e:null):{}},this.renderExpandable=()=>{let e,{expanded:n,isTruncated:r}=this.state;if(!r)return null;let{expandText:i,expandable:o,collapseText:s,collapsible:a}=this.getEllipsisOpt(),l=!o&&e3()(i),h=!a&&e3()(s);return(n||l?n&&!h&&(e=s):e=i,l&&h)?null:W.createElement("a",{role:"button",tabIndex:0,className:`${r3}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":e,onClick:this.toggleOverflow,onKeyPress:e=>tA(e)&&this.toggleOverflow(e)},e)},this.getEllipsisStyle=()=>{let{ellipsis:e,component:n}=this.props;if(!e)return{ellipsisCls:"",ellipsisStyle:{}};let{rows:r}=this.getEllipsisOpt(),{expanded:i}=this.state,o=!i&&this.canUseCSSEllipsis();return{ellipsisCls:Y()({[`${r3}-ellipsis`]:!0,[`${r3}-ellipsis-single-line`]:1===r,[`${r3}-ellipsis-multiple-line`]:r>1,[`${r3}-ellipsis-multiple-line-text`]:r>1&&"span"===n,[`${r3}-ellipsis-overflow-ellipsis`]:1===r&&o,[`${r3}-ellipsis-overflow-ellipsis-text`]:1===r&&o&&"span"===n}),ellipsisStyle:o&&r>1?{WebkitLineClamp:r}:{}}},this.renderEllipsisText=e=>{let{suffix:n}=e,{children:r}=this.props,{isTruncated:i,expanded:o,ellipsisContent:s}=this.state;return o||!i?W.createElement("span",{onMouseEnter:this.onHover},r,n&&n.length?n:null):W.createElement("span",{onMouseEnter:this.onHover},s,n)},this.state={editable:!1,copied:!1,isOverflowed:!1,ellipsisContent:e.children,expanded:!1,isTruncated:!1,prevChildren:null},this.wrapperRef=W.createRef(),this.expandRef=W.createRef(),this.copyRef=W.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize().then(()=>eM(()=>this.observerTakingEffect=!0,1))}static getDerivedStateFromProps(e,n){let{prevChildren:r}=n,i={};return i.prevChildren=e.children,e.ellipsis&&r!==e.children&&(i.isOverflowed=!1,i.ellipsisContent=e.children,i.expanded=!1,i.isTruncated=!0),i}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}renderOperations(){return W.createElement(W.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;let n,{copyable:r,children:i}=this.props;if(!r)return null;let o=null!=(e=null==r?void 0:r.content)?e:i,s=!1;Array.isArray(o)?(n="",o.forEach(e=>{"object"==typeof e&&(s=!0),n+=String(e)})):("object"!=typeof o||(s=!0),n=String(o)),t2(s,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");let a=Object.assign({content:n,duration:3},"object"==typeof r?r:null);return W.createElement(rX,Object.assign({},a,{forwardRef:this.copyRef}))}renderIcon(){let{icon:e,size:n}=this.props,r="inherit"===n?this.context:n;return e?W.createElement("span",{className:`${r3}-icon`,"x-semi-prop":"icon"},eO(e)?W.cloneElement(e,{size:"small"===r?"small":"default"}):e):null}renderContent(){let e=this.props,{component:n,children:r,className:i,type:o,spacing:s,disabled:a,style:l,ellipsis:h,icon:c,size:u,link:d,heading:p,weight:f}=e,g=r2(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),y=er()(g,["strong","editable","mark","copyable","underline","code","delete"]),m="inherit"===u?this.context:u,b=this.renderIcon(),_=this.getEllipsisOpt(),{ellipsisCls:E,ellipsisStyle:w}=this.getEllipsisStyle(),x=h?this.renderEllipsisText(_):r,C=Y()({[`${r3}-link-text`]:d,[`${r3}-link-underline`]:this.props.underline&&d});x=r4(this.props,W.createElement(W.Fragment,null,b,this.props.link?W.createElement("span",{className:C},x):x));let S=H()(p)&&/^h[1-6]$/.test(p),D=Y()(i,E,{[`${r3}-${o}`]:o&&!d,[`${r3}-${m}`]:m,[`${r3}-link`]:d,[`${r3}-disabled`]:a,[`${r3}-${s}`]:s,[`${r3}-${p}`]:S,[`${r3}-${p}-weight-${f}`]:S&&f&&isNaN(Number(f))}),N=Object.assign(Object.assign({},isNaN(Number(f))?{}:{fontWeight:f}),l);return W.createElement(rU,Object.assign({className:D,style:Object.assign(Object.assign({},N),w),component:n,forwardRef:this.wrapperRef},y),x,this.renderOperations())}renderTipWrapper(){let{children:e}=this.props,n=this.showTooltip(),r=this.renderContent();if(!n)return r;{let{type:i,opts:o,renderTooltip:s}=n;return eK()(s)?s(e,r):"popover"===i.toLowerCase()?W.createElement(n_,Object.assign({content:e,position:"top"},o),r):W.createElement(ng,Object.assign({content:e,position:"top"},o),r)}}render(){var e=this;let{size:n}=this.props,r="inherit"===n?this.context:n,i=W.createElement(rJ.Provider,{value:r},W.createElement(nA,{componentName:"Typography"},e=>(this.expandStr=e.expand,this.collapseStr=e.collapse,this.renderTipWrapper())));return this.props.ellipsis?W.createElement(r0,{onResize:function(){e.observerTakingEffect&&e.onResize(...arguments)},observeParent:!0,observerProperty:M.Width},i):i}}r5.propTypes={children:X().node,copyable:X().oneOfType([X().shape({text:X().string,onCopy:X().func,successTip:X().node,copyTip:X().node}),X().bool]),delete:X().bool,disabled:X().bool,ellipsis:X().oneOfType([X().shape({rows:X().number,expandable:X().bool,expandText:X().string,onExpand:X().func,suffix:X().string,showTooltip:X().oneOfType([X().shape({type:X().string,opts:X().object}),X().bool]),collapsible:X().bool,collapseText:X().string,pos:X().oneOf(["end","middle"])}),X().bool]),mark:X().bool,underline:X().bool,link:X().oneOfType([X().object,X().bool]),spacing:X().oneOf(rV),strong:X().bool,size:X().oneOf(rz),type:X().oneOf(rR),style:X().object,className:X().string,icon:X().oneOfType([X().node,X().string]),heading:X().string,component:X().string},r5.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""},r5.contextType=rJ;let r6=rj.PREFIX;class r8 extends W.PureComponent{render(){let{className:e}=this.props,n=Y()(e,`${r6}-paragraph`);return W.createElement(r5,Object.assign({component:"p"},this.props,{className:n}))}}r8.propTypes={copyable:X().oneOfType([X().object,X().bool]),delete:X().bool,disabled:X().bool,ellipsis:X().oneOfType([X().object,X().bool]),mark:X().bool,link:X().oneOfType([X().object,X().bool]),underline:X().bool,strong:X().bool,type:X().oneOf(rR),size:X().oneOf(rz),spacing:X().oneOf(rV),style:X().object,className:X().string,component:X().string},r8.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};var r9=r(7059);let r7="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ie(e){let n=Object.prototype.toString.call(e);return"[object Window]"===n||"[object global]"===n}function it(e){return"nodeType"in e}function ir(e){var n,r;return e?ie(e)?e:it(e)&&null!=(n=null==(r=e.ownerDocument)?void 0:r.defaultView)?n:window:window}function ii(e){let{Document:n}=ir(e);return e instanceof n}function io(e){return!ie(e)&&e instanceof ir(e).HTMLElement}function is(e){return e instanceof ir(e).SVGElement}function ia(e){return e?ie(e)?e.document:it(e)?ii(e)?e:io(e)||is(e)?e.ownerDocument:document:document:document}let il=r7?W.useLayoutEffect:W.useEffect;function ih(e){let n=(0,W.useRef)(e);return il(()=>{n.current=e}),(0,W.useCallback)(function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return null==n.current?void 0:n.current(...r)},[])}function ic(e,n){void 0===n&&(n=[e]);let r=(0,W.useRef)(e);return il(()=>{r.current!==e&&(r.current=e)},n),r}function iu(e,n){let r=(0,W.useRef)();return(0,W.useMemo)(()=>{let n=e(r.current);return r.current=n,n},[...n])}function id(e){let n=ih(e),r=(0,W.useRef)(null),i=(0,W.useCallback)(e=>{e!==r.current&&(null==n||n(e,r.current)),r.current=e},[]);return[r,i]}function ip(e){let n=(0,W.useRef)();return(0,W.useEffect)(()=>{n.current=e},[e]),n.current}let ig={};function iy(e,n){return(0,W.useMemo)(()=>{if(n)return n;let r=null==ig[e]?0:ig[e]+1;return ig[e]=r,e+"-"+r},[e,n])}function im(e){return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((n,r)=>{for(let[i,o]of Object.entries(r)){let r=n[i];null!=r&&(n[i]=r+e*o)}return n},{...n})}}let iv=im(1),ib=im(-1);function i_(e){if(!e)return!1;let{KeyboardEvent:n}=ir(e.target);return n&&e instanceof n}function iE(e){if(function(e){if(!e)return!1;let{TouchEvent:n}=ir(e.target);return n&&e instanceof n}(e)){if(e.touches&&e.touches.length){let{clientX:n,clientY:r}=e.touches[0];return{x:n,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:n,clientY:r}=e.changedTouches[0];return{x:n,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let iw=Object.freeze({Translate:{toString(e){if(!e)return;let{x:n,y:r}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:n,scaleY:r}=e;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[iw.Translate.toString(e),iw.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:r,easing:i}=e;return n+" "+r+"ms "+i}}}),ix="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",iC={display:"none"};function iS(e){let{id:n,value:r}=e;return W.createElement("div",{id:n,style:iC},r)}function iD(e){let{id:n,announcement:r,ariaLiveType:i="assertive"}=e;return W.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},r)}let iN=(0,W.createContext)(null),iO={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},iM={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:r}=e;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function iI(e){let{announcements:n=iM,container:r,hiddenTextDescribedById:i,screenReaderInstructions:o=iO}=e,{announce:s,announcement:a}=function(){let[e,n]=(0,W.useState)("");return{announce:(0,W.useCallback)(e=>{null!=e&&n(e)},[]),announcement:e}}(),l=iy("DndLiveRegion"),[h,c]=(0,W.useState)(!1);(0,W.useEffect)(()=>{c(!0)},[]);var u=(0,W.useMemo)(()=>({onDragStart(e){let{active:r}=e;s(n.onDragStart({active:r}))},onDragMove(e){let{active:r,over:i}=e;n.onDragMove&&s(n.onDragMove({active:r,over:i}))},onDragOver(e){let{active:r,over:i}=e;s(n.onDragOver({active:r,over:i}))},onDragEnd(e){let{active:r,over:i}=e;s(n.onDragEnd({active:r,over:i}))},onDragCancel(e){let{active:r,over:i}=e;s(n.onDragCancel({active:r,over:i}))}}),[s,n]);let d=(0,W.useContext)(iN);if((0,W.useEffect)(()=>{if(!d)throw Error("useDndMonitor must be used within a children of <DndContext>");return d(u)},[u,d]),!h)return null;let p=W.createElement(W.Fragment,null,W.createElement(iS,{id:i,value:o.draggable}),W.createElement(iD,{id:l,announcement:a}));return r?(0,eQ.createPortal)(p,r):p}function iT(){}function ik(e,n){return(0,W.useMemo)(()=>({sensor:e,options:null!=n?n:{}}),[e,n])}(_=I||(I={})).DragStart="dragStart",_.DragMove="dragMove",_.DragEnd="dragEnd",_.DragCancel="dragCancel",_.DragOver="dragOver",_.RegisterDroppable="registerDroppable",_.SetDroppableDisabled="setDroppableDisabled",_.UnregisterDroppable="unregisterDroppable";let iP=Object.freeze({x:0,y:0});function iA(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function iL(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return r-i}function ij(e,n){let{data:{value:r}}=e,{data:{value:i}}=n;return i-r}function iR(e){let{left:n,top:r,height:i,width:o}=e;return[{x:n,y:r},{x:n+o,y:r},{x:n,y:r+i},{x:n+o,y:r+i}]}function iz(e,n){if(!e||0===e.length)return null;let[r]=e;return n?r[n]:r}function iV(e,n,r){return void 0===n&&(n=e.left),void 0===r&&(r=e.top),{x:n+.5*e.width,y:r+.5*e.height}}let iF=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e,o=iV(n,n.left,n.top),s=[];for(let e of i){let{id:n}=e,i=r.get(n);if(i){let r=iA(iV(i),o);s.push({id:n,data:{droppableContainer:e,value:r}})}}return s.sort(iL)},i$=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e,o=iR(n),s=[];for(let e of i){let{id:n}=e,i=r.get(n);if(i){let r=iR(i),a=Number((o.reduce((e,n,i)=>e+iA(r[i],n),0)/4).toFixed(4));s.push({id:n,data:{droppableContainer:e,value:a}})}}return s.sort(iL)},iB=e=>{let{collisionRect:n,droppableRects:r,droppableContainers:i}=e,o=[];for(let e of i){let{id:i}=e,s=r.get(i);if(s){let r=function(e,n){let r=Math.max(n.top,e.top),i=Math.max(n.left,e.left),o=Math.min(n.left+n.width,e.left+e.width),s=Math.min(n.top+n.height,e.top+e.height);if(i<o&&r<s){let a=n.width*n.height,l=e.width*e.height,h=(o-i)*(s-r);return Number((h/(a+l-h)).toFixed(4))}return 0}(s,n);r>0&&o.push({id:i,data:{droppableContainer:e,value:r}})}}return o.sort(ij)};function iH(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:iP}let iK=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((e,n)=>({...e,top:e.top+ +n.y,bottom:e.bottom+ +n.y,left:e.left+ +n.x,right:e.right+ +n.x}),{...e})};function iU(e){if(e.startsWith("matrix3d(")){let n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}if(e.startsWith("matrix(")){let n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}let iW={ignoreTransform:!1};function iG(e,n){void 0===n&&(n=iW);let r=e.getBoundingClientRect();if(n.ignoreTransform){let{transform:n,transformOrigin:i}=ir(e).getComputedStyle(e);n&&(r=function(e,n,r){let i=iU(n);if(!i)return e;let{scaleX:o,scaleY:s,x:a,y:l}=i,h=e.left-a-(1-o)*parseFloat(r),c=e.top-l-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),u=o?e.width/o:e.width,d=s?e.height/s:e.height;return{width:u,height:d,top:c,right:h+u,bottom:c+d,left:h}}(r,n,i))}let{top:i,left:o,width:s,height:a,bottom:l,right:h}=r;return{top:i,left:o,width:s,height:a,bottom:l,right:h}}function iY(e){return iG(e,{ignoreTransform:!0})}function iZ(e,n){let r=[];return e?function i(o){var s;if(null!=n&&r.length>=n||!o)return r;if(ii(o)&&null!=o.scrollingElement&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!io(o)||is(o)||r.includes(o))return r;let a=ir(e).getComputedStyle(o);return(o!==e&&function(e,n){void 0===n&&(n=ir(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let i=n[e];return"string"==typeof i&&r.test(i)})}(o,a)&&r.push(o),void 0===(s=a)&&(s=ir(o).getComputedStyle(o)),"fixed"===s.position)?r:i(o.parentNode)}(e):r}function iX(e){let[n]=iZ(e,1);return null!=n?n:null}function iQ(e){return r7&&e?ie(e)?e:it(e)?ii(e)||e===ia(e).scrollingElement?window:io(e)?e:null:null:null}function iq(e){return ie(e)?e.scrollX:e.scrollLeft}function iJ(e){return ie(e)?e.scrollY:e.scrollTop}function i0(e){return{x:iq(e),y:iJ(e)}}function i1(e){return!!r7&&!!e&&e===document.scrollingElement}function i2(e){let n={x:0,y:0},r=i1(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},o=e.scrollTop<=n.y,s=e.scrollLeft<=n.x;return{isTop:o,isLeft:s,isBottom:e.scrollTop>=i.y,isRight:e.scrollLeft>=i.x,maxScroll:i,minScroll:n}}(E=T||(T={}))[E.Forward=1]="Forward",E[E.Backward=-1]="Backward";let i3={x:.2,y:.2};function i4(e){return e.reduce((e,n)=>iv(e,i0(n)),iP)}function i5(e,n){if(void 0===n&&(n=iG),!e)return;let{top:r,left:i,bottom:o,right:s}=n(e);iX(e)&&(o<=0||s<=0||r>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let i6=[["x",["left","right"],function(e){return e.reduce((e,n)=>e+iq(n),0)}],["y",["top","bottom"],function(e){return e.reduce((e,n)=>e+iJ(n),0)}]];class i8{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=iZ(n),i=i4(r);for(let[n,o,s]of(this.rect={...e},this.width=e.width,this.height=e.height,i6))for(let e of o)Object.defineProperty(this,e,{get:()=>{let o=s(r),a=i[n]-o;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class i9{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var n;return null==(n=this.target)?void 0:n.removeEventListener(...e)})},this.target=e}add(e,n,r){var i;null==(i=this.target)||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function i7(e,n){let r=Math.abs(e.x),i=Math.abs(e.y);return"number"==typeof n?Math.sqrt(r**2+i**2)>n:"x"in n&&"y"in n?r>n.x&&i>n.y:"x"in n?r>n.x:"y"in n&&i>n.y}function oe(e){e.preventDefault()}function ot(e){e.stopPropagation()}(w=k||(k={})).Click="click",w.DragStart="dragstart",w.Keydown="keydown",w.ContextMenu="contextmenu",w.Resize="resize",w.SelectionChange="selectionchange",w.VisibilityChange="visibilitychange",(x=P||(P={})).Space="Space",x.Down="ArrowDown",x.Right="ArrowRight",x.Left="ArrowLeft",x.Up="ArrowUp",x.Esc="Escape",x.Enter="Enter";let on={start:[P.Space,P.Enter],cancel:[P.Esc],end:[P.Space,P.Enter]},or=(e,n)=>{let{currentCoordinates:r}=n;switch(e.code){case P.Right:return{...r,x:r.x+25};case P.Left:return{...r,x:r.x-25};case P.Down:return{...r,y:r.y+25};case P.Up:return{...r,y:r.y-25}}};class oi{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:n}}=e;this.props=e,this.listeners=new i9(ia(n)),this.windowListeners=new i9(ir(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(k.Resize,this.handleCancel),this.windowListeners.add(k.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(k.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&i5(r),n(iP)}handleKeyDown(e){if(i_(e)){let{active:n,context:r,options:i}=this.props,{keyboardCodes:o=on,coordinateGetter:s=or,scrollBehavior:a="smooth"}=i,{code:l}=e;if(o.end.includes(l))return void this.handleEnd(e);if(o.cancel.includes(l))return void this.handleCancel(e);let{collisionRect:h}=r.current,c=h?{x:h.left,y:h.top}:iP;this.referenceCoordinates||(this.referenceCoordinates=c);let u=s(e,{active:n,context:r.current,currentCoordinates:c});if(u){let n=ib(u,c),i={x:0,y:0},{scrollableAncestors:o}=r.current;for(let r of o){let o=e.code,{isTop:s,isRight:l,isLeft:h,isBottom:c,maxScroll:d,minScroll:p}=i2(r),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:n}=window;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}let{top:n,left:r,right:i,bottom:o}=e.getBoundingClientRect();return{top:n,left:r,right:i,bottom:o,width:e.clientWidth,height:e.clientHeight}}(r),g={x:Math.min(o===P.Right?f.right-f.width/2:f.right,Math.max(o===P.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(o===P.Down?f.bottom-f.height/2:f.bottom,Math.max(o===P.Down?f.top:f.top+f.height/2,u.y))},y=o===P.Right&&!l||o===P.Left&&!h,m=o===P.Down&&!c||o===P.Up&&!s;if(y&&g.x!==u.x){let e=r.scrollLeft+n.x,s=o===P.Right&&e<=d.x||o===P.Left&&e>=p.x;if(s&&!n.y)return void r.scrollTo({left:e,behavior:a});s?i.x=r.scrollLeft-e:i.x=o===P.Right?r.scrollLeft-d.x:r.scrollLeft-p.x,i.x&&r.scrollBy({left:-i.x,behavior:a});break}if(m&&g.y!==u.y){let e=r.scrollTop+n.y,s=o===P.Down&&e<=d.y||o===P.Up&&e>=p.y;if(s&&!n.x)return void r.scrollTo({top:e,behavior:a});s?i.y=r.scrollTop-e:i.y=o===P.Down?r.scrollTop-d.y:r.scrollTop-p.y,i.y&&r.scrollBy({top:-i.y,behavior:a});break}}this.handleMove(e,iv(ib(u,this.referenceCoordinates),i))}}}handleMove(e,n){let{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){let{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){let{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function oo(e){return!!(e&&"distance"in e)}function os(e){return!!(e&&"delay"in e)}oi.activators=[{eventName:"onKeyDown",handler:(e,n,r)=>{let{keyboardCodes:i=on,onActivation:o}=n,{active:s}=r,{code:a}=e.nativeEvent;if(i.start.includes(a)){let n=s.activatorNode.current;return(!n||e.target===n)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}return!1}}];class oa{constructor(e,n,r){var i;void 0===r&&(r=function(e){let{EventTarget:n}=ir(e);return e instanceof n?e:ia(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;let{event:o}=e,{target:s}=o;this.props=e,this.events=n,this.document=ia(s),this.documentListeners=new i9(this.document),this.listeners=new i9(r),this.windowListeners=new i9(ir(s)),this.initialCoordinates=null!=(i=iE(o))?i:iP,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(k.Resize,this.handleCancel),this.windowListeners.add(k.DragStart,oe),this.windowListeners.add(k.VisibilityChange,this.handleCancel),this.windowListeners.add(k.ContextMenu,oe),this.documentListeners.add(k.Keydown,this.handleKeydown),n){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(os(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(oo(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){let{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(k.Click,ot,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(k.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;let{activated:r,initialCoordinates:i,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!i)return;let l=null!=(n=iE(e))?n:iP,h=ib(i,l);if(!r&&a){if(oo(a)){if(null!=a.tolerance&&i7(h,a.tolerance))return this.handleCancel();if(i7(h,a.distance))return this.handleStart()}return os(a)&&i7(h,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),s(l)}handleEnd(){let{onEnd:e}=this.props;this.detach(),e()}handleCancel(){let{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===P.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let ol={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class oh extends oa{constructor(e){let{event:n}=e;super(e,ol,ia(n.target))}}oh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return!!r.isPrimary&&0===r.button&&(null==i||i({event:r}),!0)}}];let oc={move:{name:"mousemove"},end:{name:"mouseup"}};(C=A||(A={}))[C.RightClick=2]="RightClick";class ou extends oa{constructor(e){super(e,oc,ia(e.event.target))}}ou.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n;return r.button!==A.RightClick&&(null==i||i({event:r}),!0)}}];let od={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class op extends oa{constructor(e){super(e,od)}static setup(){return window.addEventListener(od.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(od.move.name,e)};function e(){}}}op.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:r}=e,{onActivation:i}=n,{touches:o}=r;return!(o.length>1)&&(null==i||i({event:r}),!0)}}],(S=L||(L={}))[S.Pointer=0]="Pointer",S[S.DraggableRect=1]="DraggableRect",(D=j||(j={}))[D.TreeOrder=0]="TreeOrder",D[D.ReversedTreeOrder=1]="ReversedTreeOrder";let of={x:{[T.Backward]:!1,[T.Forward]:!1},y:{[T.Backward]:!1,[T.Forward]:!1}};(N=R||(R={}))[N.Always=0]="Always",N[N.BeforeDragging=1]="BeforeDragging",N[N.WhileDragging=2]="WhileDragging",(z||(z={})).Optimized="optimized";let og=new Map;function oy(e,n){return iu(r=>e?r||("function"==typeof n?n(e):e):null,[n,e])}function om(e){let{callback:n,disabled:r}=e,i=ih(n),o=(0,W.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(i)},[r]);return(0,W.useEffect)(()=>()=>null==o?void 0:o.disconnect(),[o]),o}function ov(e){return new i8(iG(e),e)}function ob(e,n,r){void 0===n&&(n=ov);let[i,o]=(0,W.useState)(null);function s(){o(i=>{if(!e)return null;if(!1===e.isConnected){var o;return null!=(o=null!=i?i:r)?o:null}let s=n(e);return JSON.stringify(i)===JSON.stringify(s)?i:s})}let a=function(e){let{callback:n,disabled:r}=e,i=ih(n),o=(0,W.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(i)},[i,r]);return(0,W.useEffect)(()=>()=>null==o?void 0:o.disconnect(),[o]),o}({callback(n){if(e)for(let r of n){let{type:n,target:i}=r;if("childList"===n&&i instanceof HTMLElement&&i.contains(e)){s();break}}}}),l=om({callback:s});return il(()=>{s(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())},[e]),i}let o_=[];function oE(e,n){void 0===n&&(n=[]);let r=(0,W.useRef)(null);return(0,W.useEffect)(()=>{r.current=null},n),(0,W.useEffect)(()=>{let n=e!==iP;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?ib(e,r.current):iP}function ow(e){return(0,W.useMemo)(()=>e?function(e){let n=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}(e):null,[e])}let ox=[];function oC(e){if(!e)return null;if(e.children.length>1)return e;let n=e.children[0];return io(n)?n:e}let oS=[{sensor:oh,options:{}},{sensor:oi,options:{}}],oD={current:{}},oN={draggable:{measure:iY},droppable:{measure:iY,strategy:R.WhileDragging,frequency:z.Optimized},dragOverlay:{measure:iG}};class oO extends Map{get(e){var n;return null!=e&&null!=(n=super.get(e))?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return null!=(n=null==(r=this.get(e))?void 0:r.node.current)?n:void 0}}let oM={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new oO,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:iT},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:oN,measureDroppableContainers:iT,windowRect:null,measuringScheduled:!1},oI={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:iT,draggableNodes:new Map,over:null,measureDroppableContainers:iT},oT=(0,W.createContext)(oI),ok=(0,W.createContext)(oM);function oP(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new oO}}}function oA(e,n){switch(n.type){case I.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case I.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case I.DragEnd:case I.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case I.RegisterDroppable:{let{element:r}=n,{id:i}=r,o=new oO(e.droppable.containers);return o.set(i,r),{...e,droppable:{...e.droppable,containers:o}}}case I.SetDroppableDisabled:{let{id:r,key:i,disabled:o}=n,s=e.droppable.containers.get(r);if(!s||i!==s.key)return e;let a=new oO(e.droppable.containers);return a.set(r,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case I.UnregisterDroppable:{let{id:r,key:i}=n,o=e.droppable.containers.get(r);if(!o||i!==o.key)return e;let s=new oO(e.droppable.containers);return s.delete(r),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function oL(e){let{disabled:n}=e,{active:r,activatorEvent:i,draggableNodes:o}=(0,W.useContext)(oT),s=ip(i),a=ip(null==r?void 0:r.id);return(0,W.useEffect)(()=>{if(!n&&!i&&s&&null!=a){if(!i_(s)||document.activeElement===s.target)return;let e=o.get(a);if(!e)return;let{activatorNode:n,node:r}=e;(n.current||r.current)&&requestAnimationFrame(()=>{for(let e of[n.current,r.current]){if(!e)continue;let n=e.matches(ix)?e:e.querySelector(ix);if(n){n.focus();break}}})}},[i,n,o,a,s]),null}function oj(e,n){let{transform:r,...i}=n;return null!=e&&e.length?e.reduce((e,n)=>n({transform:e,...i}),r):r}let oR=(0,W.createContext)({...iP,scaleX:1,scaleY:1});(O=V||(V={}))[O.Uninitialized=0]="Uninitialized",O[O.Initializing=1]="Initializing",O[O.Initialized=2]="Initialized";let oz=(0,W.memo)(function(e){var n,r,i,o,s,a;let{id:l,accessibility:h,autoScroll:c=!0,children:u,sensors:d=oS,collisionDetection:p=iB,measuring:f,modifiers:g,...y}=e,[m,b]=(0,W.useReducer)(oA,void 0,oP),[_,E]=function(){let[e]=(0,W.useState)(()=>new Set),n=(0,W.useCallback)(n=>(e.add(n),()=>e.delete(n)),[e]);return[(0,W.useCallback)(n=>{let{type:r,event:i}=n;e.forEach(e=>{var n;return null==(n=e[r])?void 0:n.call(e,i)})},[e]),n]}(),[w,x]=(0,W.useState)(V.Uninitialized),C=w===V.Initialized,{draggable:{active:S,nodes:D,translate:N},droppable:{containers:O}}=m,M=null!=S?D.get(S):null,k=(0,W.useRef)({initial:null,translated:null}),P=(0,W.useMemo)(()=>{var e;return null!=S?{id:S,data:null!=(e=null==M?void 0:M.data)?e:oD,rect:k}:null},[S,M]),A=(0,W.useRef)(null),[z,F]=(0,W.useState)(null),[$,B]=(0,W.useState)(null),H=ic(y,Object.values(y)),K=iy("DndDescribedBy",l),U=(0,W.useMemo)(()=>O.getEnabled(),[O]),G=(0,W.useMemo)(()=>({draggable:{...oN.draggable,...null==f?void 0:f.draggable},droppable:{...oN.droppable,...null==f?void 0:f.droppable},dragOverlay:{...oN.dragOverlay,...null==f?void 0:f.dragOverlay}}),[null==f?void 0:f.draggable,null==f?void 0:f.droppable,null==f?void 0:f.dragOverlay]),{droppableRects:Y,measureDroppableContainers:Z,measuringScheduled:X}=function(e,n){let{dragging:r,dependencies:i,config:o}=n,[s,a]=(0,W.useState)(null),{frequency:l,measure:h,strategy:c}=o,u=(0,W.useRef)(e),d=function(){switch(c){case R.Always:return!1;case R.BeforeDragging:return r;default:return!r}}(),p=ic(d),f=(0,W.useCallback)(function(e){void 0===e&&(e=[]),p.current||a(n=>null===n?e:n.concat(e.filter(e=>!n.includes(e))))},[p]),g=(0,W.useRef)(null),y=iu(n=>{if(d&&!r)return og;if(!n||n===og||u.current!==e||null!=s){let n=new Map;for(let r of e){if(!r)continue;if(s&&s.length>0&&!s.includes(r.id)&&r.rect.current){n.set(r.id,r.rect.current);continue}let e=r.node.current,i=e?new i8(h(e),e):null;r.rect.current=i,i&&n.set(r.id,i)}return n}return n},[e,s,r,d,h]);return(0,W.useEffect)(()=>{u.current=e},[e]),(0,W.useEffect)(()=>{d||f()},[r,d]),(0,W.useEffect)(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),(0,W.useEffect)(()=>{d||"number"!=typeof l||null!==g.current||(g.current=setTimeout(()=>{f(),g.current=null},l))},[l,d,f,...i]),{droppableRects:y,measureDroppableContainers:f,measuringScheduled:null!=s}}(U,{dragging:C,dependencies:[N.x,N.y],config:G.droppable}),Q=function(e,n){let r=null!=n?e.get(n):void 0,i=r?r.node.current:null;return iu(e=>{var r;return null==n?null:null!=(r=null!=i?i:e)?r:null},[i,n])}(D,S),q=(0,W.useMemo)(()=>$?iE($):null,[$]),J=function(){let e=(null==z?void 0:z.autoScrollEnabled)===!1,n="object"==typeof c?!1===c.enabled:!1===c,r=C&&!e&&!n;return"object"==typeof c?{...c,enabled:r}:{enabled:r}}(),ee=oy(Q,G.draggable.measure);!function(e){let{activeNode:n,measure:r,initialRect:i,config:o=!0}=e,s=(0,W.useRef)(!1),{x:a,y:l}="boolean"==typeof o?{x:o,y:o}:o;il(()=>{if(!a&&!l||!n){s.current=!1;return}if(s.current||!i)return;let e=null==n?void 0:n.node.current;if(!e||!1===e.isConnected)return;let o=iH(r(e),i);if(a||(o.x=0),l||(o.y=0),s.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){let n=iX(e);n&&n.scrollBy({top:o.y,left:o.x})}},[n,a,l,i,r])}({activeNode:null!=S?D.get(S):null,config:J.layoutShiftCompensation,initialRect:ee,measure:G.draggable.measure});let et=ob(Q,G.draggable.measure,ee),en=ob(Q?Q.parentElement:null),er=(0,W.useRef)({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ei=O.getNodeFor(null==(n=er.current.over)?void 0:n.id),eo=function(e){let{measure:n}=e,[r,i]=(0,W.useState)(null),o=om({callback:(0,W.useCallback)(e=>{for(let{target:r}of e)if(io(r)){i(e=>{let i=n(r);return e?{...e,width:i.width,height:i.height}:i});break}},[n])}),[s,a]=id((0,W.useCallback)(e=>{let r=oC(e);null==o||o.disconnect(),r&&(null==o||o.observe(r)),i(r?n(r):null)},[n,o]));return(0,W.useMemo)(()=>({nodeRef:s,rect:r,setRef:a}),[r,s,a])}({measure:G.dragOverlay.measure}),es=null!=(r=eo.nodeRef.current)?r:Q,ea=C?null!=(i=eo.rect)?i:et:null,el=!!(eo.nodeRef.current&&eo.rect),eh=function(e){let n=oy(e);return iH(e,n)}(el?null:et),ec=ow(es?ir(es):null),eu=function(e){let n=(0,W.useRef)(e),r=iu(r=>e?r&&r!==o_&&e&&n.current&&e.parentNode===n.current.parentNode?r:iZ(e):o_,[e]);return(0,W.useEffect)(()=>{n.current=e},[e]),r}(C?null!=ei?ei:Q:null),ed=function(e,n){void 0===n&&(n=iG);let[r]=e,i=ow(r?ir(r):null),[o,s]=(0,W.useState)(ox);function a(){s(()=>e.length?e.map(e=>i1(e)?i:new i8(n(e),e)):ox)}let l=om({callback:a});return il(()=>{null==l||l.disconnect(),a(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),o}(eu),ep=oj(g,{transform:{x:N.x-eh.x,y:N.y-eh.y,scaleX:1,scaleY:1},activatorEvent:$,active:P,activeNodeRect:et,containerNodeRect:en,draggingNodeRect:ea,over:er.current.over,overlayNodeRect:eo.rect,scrollableAncestors:eu,scrollableAncestorRects:ed,windowRect:ec}),ef=q?iv(q,N):null,eg=function(e){let[n,r]=(0,W.useState)(null),i=(0,W.useRef)(e),o=(0,W.useCallback)(e=>{let n=iQ(e.target);n&&r(e=>e?(e.set(n,i0(n)),new Map(e)):null)},[]);return(0,W.useEffect)(()=>{let n=i.current;if(e!==n){s(n);let a=e.map(e=>{let n=iQ(e);return n?(n.addEventListener("scroll",o,{passive:!0}),[n,i0(n)]):null}).filter(e=>null!=e);r(a.length?new Map(a):null),i.current=e}return()=>{s(e),s(n)};function s(e){e.forEach(e=>{let n=iQ(e);null==n||n.removeEventListener("scroll",o)})}},[o,e]),(0,W.useMemo)(()=>e.length?n?Array.from(n.values()).reduce((e,n)=>iv(e,n),iP):i4(e):iP,[e,n])}(eu),ey=oE(eg),em=oE(eg,[et]),ev=iv(ep,ey),eb=ea?iK(ea,ep):null,e_=P&&eb?p({active:P,collisionRect:eb,droppableRects:Y,droppableContainers:U,pointerCoordinates:ef}):null,eE=iz(e_,"id"),[ew,ex]=(0,W.useState)(null),eC=(s=el?ep:iv(ep,em),a=null!=(o=null==ew?void 0:ew.rect)?o:null,{...s,scaleX:a&&et?a.width/et.width:1,scaleY:a&&et?a.height/et.height:1}),eS=(0,W.useRef)(null),eD=(0,W.useCallback)((e,n)=>{let{sensor:r,options:i}=n;if(null==A.current)return;let o=D.get(A.current);if(!o)return;let s=e.nativeEvent,a=new r({active:A.current,activeNode:o,event:s,options:i,context:er,onStart(e){let n=A.current;if(null==n)return;let r=D.get(n);if(!r)return;let{onDragStart:i}=H.current,o={activatorEvent:s,active:{id:n,data:r.data,rect:k}};(0,eQ.unstable_batchedUpdates)(()=>{null==i||i(o),x(V.Initializing),b({type:I.DragStart,initialCoordinates:e,active:n}),_({type:"onDragStart",event:o}),F(eS.current),B(s)})},onMove(e){b({type:I.DragMove,coordinates:e})},onEnd:l(I.DragEnd),onCancel:l(I.DragCancel)});function l(e){return async function(){let{active:n,collisions:r,over:i,scrollAdjustedTranslate:o}=er.current,a=null;if(n&&o){let{cancelDrop:l}=H.current;a={activatorEvent:s,active:n,collisions:r,delta:o,over:i},e===I.DragEnd&&"function"==typeof l&&await Promise.resolve(l(a))&&(e=I.DragCancel)}A.current=null,(0,eQ.unstable_batchedUpdates)(()=>{b({type:e}),x(V.Uninitialized),ex(null),F(null),B(null),eS.current=null;let n=e===I.DragEnd?"onDragEnd":"onDragCancel";if(a){let e=H.current[n];null==e||e(a),_({type:n,event:a})}})}}eS.current=a},[D]),eN=(0,W.useCallback)((e,n)=>(r,i)=>{let o=r.nativeEvent,s=D.get(i);null!==A.current||!s||o.dndKit||o.defaultPrevented||!0===e(r,n.options,{active:s})&&(o.dndKit={capturedBy:n.sensor},A.current=i,eD(r,n))},[D,eD]),eO=(0,W.useMemo)(()=>d.reduce((e,n)=>{let{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eN(e.handler,n)}))]},[]),[d,eN]);(0,W.useEffect)(()=>{if(!r7)return;let e=d.map(e=>{let{sensor:n}=e;return null==n.setup?void 0:n.setup()});return()=>{for(let n of e)null==n||n()}},d.map(e=>{let{sensor:n}=e;return n})),il(()=>{et&&w===V.Initializing&&x(V.Initialized)},[et,w]),(0,W.useEffect)(()=>{let{onDragMove:e}=H.current,{active:n,activatorEvent:r,collisions:i,over:o}=er.current;if(!n||!r)return;let s={active:n,activatorEvent:r,collisions:i,delta:{x:ev.x,y:ev.y},over:o};(0,eQ.unstable_batchedUpdates)(()=>{null==e||e(s),_({type:"onDragMove",event:s})})},[ev.x,ev.y]),(0,W.useEffect)(()=>{let{active:e,activatorEvent:n,collisions:r,droppableContainers:i,scrollAdjustedTranslate:o}=er.current;if(!e||null==A.current||!n||!o)return;let{onDragOver:s}=H.current,a=i.get(eE),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,h={active:e,activatorEvent:n,collisions:r,delta:{x:o.x,y:o.y},over:l};(0,eQ.unstable_batchedUpdates)(()=>{ex(l),null==s||s(h),_({type:"onDragOver",event:h})})},[eE]),il(()=>{er.current={activatorEvent:$,active:P,activeNode:Q,collisionRect:eb,collisions:e_,droppableRects:Y,draggableNodes:D,draggingNode:es,draggingNodeRect:ea,droppableContainers:O,over:ew,scrollableAncestors:eu,scrollAdjustedTranslate:ev},k.current={initial:ea,translated:eb}},[P,Q,e_,eb,D,es,ea,Y,O,ew,eu,ev]),function(e){let{acceleration:n,activator:r=L.Pointer,canScroll:i,draggingRect:o,enabled:s,interval:a=5,order:l=j.TreeOrder,pointerCoordinates:h,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:p}=e,f=function(e){let{delta:n,disabled:r}=e,i=ip(n);return iu(e=>{if(r||!i||!e)return of;let o={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[T.Backward]:e.x[T.Backward]||-1===o.x,[T.Forward]:e.x[T.Forward]||1===o.x},y:{[T.Backward]:e.y[T.Backward]||-1===o.y,[T.Forward]:e.y[T.Forward]||1===o.y}}},[r,n,i])}({delta:d,disabled:!s}),[g,y]=function(){let e=(0,W.useRef)(null);return[(0,W.useCallback)((n,r)=>{e.current=setInterval(n,r)},[]),(0,W.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),m=(0,W.useRef)({x:0,y:0}),b=(0,W.useRef)({x:0,y:0}),_=(0,W.useMemo)(()=>{switch(r){case L.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case L.DraggableRect:return o}},[r,o,h]),E=(0,W.useRef)(null),w=(0,W.useCallback)(()=>{let e=E.current;if(!e)return;let n=m.current.x*b.current.x,r=m.current.y*b.current.y;e.scrollBy(n,r)},[]),x=(0,W.useMemo)(()=>l===j.TreeOrder?[...c].reverse():c,[l,c]);(0,W.useEffect)(()=>{if(!s||!c.length||!_)return void y();for(let e of x){if((null==i?void 0:i(e))===!1)continue;let r=u[c.indexOf(e)];if(!r)continue;let{direction:o,speed:s}=function(e,n,r,i,o){let{top:s,left:a,right:l,bottom:h}=r;void 0===i&&(i=10),void 0===o&&(o=i3);let{isTop:c,isBottom:u,isLeft:d,isRight:p}=i2(e),f={x:0,y:0},g={x:0,y:0},y={height:n.height*o.y,width:n.width*o.x};return!c&&s<=n.top+y.height?(f.y=T.Backward,g.y=i*Math.abs((n.top+y.height-s)/y.height)):!u&&h>=n.bottom-y.height&&(f.y=T.Forward,g.y=i*Math.abs((n.bottom-y.height-h)/y.height)),!p&&l>=n.right-y.width?(f.x=T.Forward,g.x=i*Math.abs((n.right-y.width-l)/y.width)):!d&&a<=n.left+y.width&&(f.x=T.Backward,g.x=i*Math.abs((n.left+y.width-a)/y.width)),{direction:f,speed:g}}(e,r,_,n,p);for(let e of["x","y"])f[e][o[e]]||(s[e]=0,o[e]=0);if(s.x>0||s.y>0){y(),E.current=e,g(w,a),m.current=s,b.current=o;return}}m.current={x:0,y:0},b.current={x:0,y:0},y()},[n,w,i,y,s,a,JSON.stringify(_),JSON.stringify(f),g,c,x,u,JSON.stringify(p)])}({...J,delta:N,draggingRect:eb,pointerCoordinates:ef,scrollableAncestors:eu,scrollableAncestorRects:ed});let eM=(0,W.useMemo)(()=>({active:P,activeNode:Q,activeNodeRect:et,activatorEvent:$,collisions:e_,containerNodeRect:en,dragOverlay:eo,draggableNodes:D,droppableContainers:O,droppableRects:Y,over:ew,measureDroppableContainers:Z,scrollableAncestors:eu,scrollableAncestorRects:ed,measuringConfiguration:G,measuringScheduled:X,windowRect:ec}),[P,Q,et,$,e_,en,eo,D,O,Y,ew,Z,eu,ed,G,X,ec]),eI=(0,W.useMemo)(()=>({activatorEvent:$,activators:eO,active:P,activeNodeRect:et,ariaDescribedById:{draggable:K},dispatch:b,draggableNodes:D,over:ew,measureDroppableContainers:Z}),[$,eO,P,et,b,K,D,ew,Z]);return W.createElement(iN.Provider,{value:E},W.createElement(oT.Provider,{value:eI},W.createElement(ok.Provider,{value:eM},W.createElement(oR.Provider,{value:eC},u)),W.createElement(oL,{disabled:(null==h?void 0:h.restoreFocus)===!1})),W.createElement(iI,{...h,hiddenTextDescribedById:K}))}),oV=(0,W.createContext)(null),oF="button";function o$(){return(0,W.useContext)(ok)}let oB={timeout:25};function oH(e){let{animation:n,children:r}=e,[i,o]=(0,W.useState)(null),[s,a]=(0,W.useState)(null),l=ip(r);return r||i||!l||o(l),il(()=>{if(!s)return;let e=null==i?void 0:i.key,r=null==i?void 0:i.props.id;if(null==e||null==r)return void o(null);Promise.resolve(n(r,s)).then(()=>{o(null)})},[n,i,s]),W.createElement(W.Fragment,null,r,i?(0,W.cloneElement)(i,{ref:a}):null)}let oK={x:0,y:0,scaleX:1,scaleY:1};function oU(e){let{children:n}=e;return W.createElement(oT.Provider,{value:oI},W.createElement(oR.Provider,{value:oK},n))}let oW={position:"fixed",touchAction:"none"},oG=e=>i_(e)?"transform 250ms ease":void 0,oY=(0,W.forwardRef)((e,n)=>{let{as:r,activatorEvent:i,adjustScale:o,children:s,className:a,rect:l,style:h,transform:c,transition:u=oG}=e;if(!l)return null;let d=o?c:{...c,scaleX:1,scaleY:1},p={...oW,width:l.width,height:l.height,top:l.top,left:l.left,transform:iw.Transform.toString(d),transformOrigin:o&&i?function(e,n){let r=iE(e);if(!r)return"0 0";let i={x:(r.x-n.left)/n.width*100,y:(r.y-n.top)/n.height*100};return i.x+"% "+i.y+"%"}(i,l):void 0,transition:"function"==typeof u?u(i):u,...h};return W.createElement(r,{className:a,style:p,ref:n},s)}),oZ={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:n,final:r}}=e;return[{transform:iw.Transform.toString(n)},{transform:iw.Transform.toString(r)}]},sideEffects:(o={styles:{active:{opacity:"0"}}},e=>{let{active:n,dragOverlay:r}=e,i={},{styles:s,className:a}=o;if(null!=s&&s.active)for(let[e,r]of Object.entries(s.active))void 0!==r&&(i[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,r));if(null!=s&&s.dragOverlay)for(let[e,n]of Object.entries(s.dragOverlay))void 0!==n&&r.node.style.setProperty(e,n);return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(let[e,r]of Object.entries(i))n.node.style.setProperty(e,r);null!=a&&a.active&&n.node.classList.remove(a.active)}})},oX=0,oQ=W.memo(e=>{var n;let{adjustScale:r=!1,children:i,dropAnimation:o,style:s,transition:a,modifiers:l,wrapperElement:h="div",className:c,zIndex:u=999}=e,{activatorEvent:d,active:p,activeNodeRect:f,containerNodeRect:g,draggableNodes:y,droppableContainers:m,dragOverlay:b,over:_,measuringConfiguration:E,scrollableAncestors:w,scrollableAncestorRects:x,windowRect:C}=o$(),S=(0,W.useContext)(oR),D=(n=null==p?void 0:p.id,(0,W.useMemo)(()=>{if(null!=n)return++oX},[n])),N=oj(l,{activatorEvent:d,active:p,activeNodeRect:f,containerNodeRect:g,draggingNodeRect:b.rect,over:_,overlayNodeRect:b.rect,scrollableAncestors:w,scrollableAncestorRects:x,transform:S,windowRect:C}),O=oy(f),M=function(e){let{config:n,draggableNodes:r,droppableContainers:i,measuringConfiguration:o}=e;return ih((e,s)=>{if(null===n)return;let a=r.get(e);if(!a)return;let l=a.node.current;if(!l)return;let h=oC(s);if(!h)return;let{transform:c}=ir(s).getComputedStyle(s),u=iU(c);if(!u)return;let d="function"==typeof n?n:function(e){let{duration:n,easing:r,sideEffects:i,keyframes:o}={...oZ,...e};return e=>{let{active:s,dragOverlay:a,transform:l,...h}=e;if(!n)return;let c={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},u={scaleX:1!==l.scaleX?s.rect.width*l.scaleX/a.rect.width:1,scaleY:1!==l.scaleY?s.rect.height*l.scaleY/a.rect.height:1},d={x:l.x-c.x,y:l.y-c.y,...u},p=o({...h,active:s,dragOverlay:a,transform:{initial:l,final:d}}),[f]=p,g=p[p.length-1];if(JSON.stringify(f)===JSON.stringify(g))return;let y=null==i?void 0:i({active:s,dragOverlay:a,...h}),m=a.node.animate(p,{duration:n,easing:r,fill:"forwards"});return new Promise(e=>{m.onfinish=()=>{null==y||y(),e()}})}}(n);return i5(l,o.draggable.measure),d({active:{id:e,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:r,dragOverlay:{node:s,rect:o.dragOverlay.measure(h)},droppableContainers:i,measuringConfiguration:o,transform:u})})}({config:o,draggableNodes:y,droppableContainers:m,measuringConfiguration:E}),I=O?b.setRef:void 0;return W.createElement(oU,null,W.createElement(oH,{animation:M},p&&D?W.createElement(oY,{key:D,id:p.id,ref:I,as:h,activatorEvent:d,adjustScale:r,className:c,transition:a,rect:O,style:{zIndex:u,...s},transform:N},i):null))});function oq(e,n,r){let i=e.slice();return i.splice(r<0?i.length+r:r,0,i.splice(n,1)[0]),i}function oJ(e){return null!==e&&e>=0}let o0=e=>{let{rects:n,activeIndex:r,overIndex:i,index:o}=e,s=oq(n,i,r),a=n[o],l=s[o];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},o1="Sortable",o2=W.createContext({activeIndex:-1,containerId:o1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:o0,disabled:{draggable:!1,droppable:!1}});function o3(e){let{children:n,id:r,items:i,strategy:o=o0,disabled:s=!1}=e,{active:a,dragOverlay:l,droppableRects:h,over:c,measureDroppableContainers:u}=o$(),d=iy(o1,r),p=null!==l.rect,f=(0,W.useMemo)(()=>i.map(e=>"object"==typeof e&&"id"in e?e.id:e),[i]),g=null!=a,y=a?f.indexOf(a.id):-1,m=c?f.indexOf(c.id):-1,b=(0,W.useRef)(f),_=!function(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}(f,b.current),E=-1!==m&&-1===y||_,w="boolean"==typeof s?{draggable:s,droppable:s}:s;il(()=>{_&&g&&u(f)},[_,f,g,u]),(0,W.useEffect)(()=>{b.current=f},[f]);let x=(0,W.useMemo)(()=>({activeIndex:y,containerId:d,disabled:w,disableTransforms:E,items:f,overIndex:m,useDragOverlay:p,sortedRects:f.reduce((e,n,r)=>{let i=h.get(n);return i&&(e[r]=i),e},Array(f.length)),strategy:o}),[y,d,w.draggable,w.droppable,E,f,m,h,p,o]);return W.createElement(o2.Provider,{value:x},n)}let o4=e=>{let{id:n,items:r,activeIndex:i,overIndex:o}=e;return oq(r,i,o).indexOf(n)},o5=e=>{let{containerId:n,isSorting:r,wasDragging:i,index:o,items:s,newIndex:a,previousItems:l,previousContainerId:h,transition:c}=e;return!!c&&!!i&&(l===s||o!==a)&&(!!r||a!==o&&n===h)},o6={duration:200,easing:"ease"},o8="transform",o9=iw.Transition.toString({property:o8,duration:0,easing:"linear"}),o7={roleDescription:"sortable"};function se(e){if(!e)return!1;let n=e.data.current;return!!n&&"sortable"in n&&"object"==typeof n.sortable&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable}let st=[P.Down,P.Right,P.Up,P.Left];function sn(e,n){return!!se(e)&&!!se(n)&&e.data.current.sortable.containerId===n.data.current.sortable.containerId}function sr(e){return W.createElement("div",Object.assign({style:{overflow:"auto"}},e))}let si={coordinateGetter:(e,n)=>{let{context:{active:r,collisionRect:i,droppableRects:o,droppableContainers:s,over:a,scrollableAncestors:l}}=n;if(st.includes(e.code)){if(e.preventDefault(),!r||!i)return;let n=[];s.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let s=o.get(r.id);if(s)switch(e.code){case P.Down:i.top<s.top&&n.push(r);break;case P.Up:i.top>s.top&&n.push(r);break;case P.Left:i.left>s.left&&n.push(r);break;case P.Right:i.left<s.left&&n.push(r)}});let u=i$({active:r,collisionRect:i,droppableRects:o,droppableContainers:n,pointerCoordinates:null}),d=iz(u,"id");if(d===(null==a?void 0:a.id)&&u.length>1&&(d=u[1].id),null!=d){let e=s.get(r.id),n=s.get(d),a=n?o.get(n.id):null,u=null==n?void 0:n.node.current;if(u&&a&&e&&n){var h,c;let r=iZ(u).some((e,n)=>l[n]!==e),o=sn(e,n),s=(h=e,c=n,!!se(h)&&!!se(c)&&!!sn(h,c)&&h.data.current.sortable.index<c.data.current.sortable.index),d=r||!o?{x:0,y:0}:{x:s?i.width-a.width:0,y:s?i.height-a.height:0},p={x:a.left,y:a.top};return d.x&&d.y?p:ib(p,d)}}}}};function so(e){let{items:n,onSortEnd:r,adjustScale:i,renderItem:o,transition:s,collisionDetection:a=iF,strategy:l=o0,useDragOverlay:h=!0,dragOverlayCls:c,container:u=sr,prefix:d="semi-sortable"}=e,[p,f]=(0,W.useState)(null),g=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,W.useMemo)(()=>[...n].filter(e=>null!=e),[...n])}(ik(ou),ik(op),ik(oi,si)),y=(0,W.useCallback)(e=>n.indexOf(e),[n]),m=(0,W.useMemo)(()=>p?y(p):-1,[y,p]),b=(0,W.useCallback)(e=>{let{active:n}=e;n&&f(n.id)},[]),_=(0,W.useCallback)(e=>{let{over:n}=e;if(f(null),n){let e=y(n.id);m!==e&&r({oldIndex:m,newIndex:e})}},[m,y,r]),E=(0,W.useCallback)(()=>{f(null)},[]);return W.createElement(oz,{sensors:g,collisionDetection:a,onDragStart:b,onDragEnd:_,onDragCancel:E,autoScroll:{order:j.ReversedTreeOrder}},W.createElement(o3,{items:n,strategy:l},W.createElement(u,null,n.map((e,n)=>W.createElement(ss,{key:e,id:e,index:n,renderItem:o,useDragOverlay:h,prefix:d,transition:s})))),h?(0,eQ.createPortal)(W.createElement(oQ,{adjustScale:i,style:{zIndex:void 0},className:c},p?o({id:p,sortableHandle:e=>e}):null),document.body):null)}function ss(e){let{animateLayoutChanges:n,id:r,renderItem:i,prefix:o,transition:s}=e,{listeners:a,setNodeRef:l,transform:h,transition:c,active:u,isOver:d,attributes:p}=function(e){var n,r,i,o;let{animateLayoutChanges:s=o5,attributes:a,disabled:l,data:h,getNewIndex:c=o4,id:u,strategy:d,resizeObserverConfig:p,transition:f=o6}=e,{items:g,containerId:y,activeIndex:m,disabled:b,disableTransforms:_,sortedRects:E,overIndex:w,useDragOverlay:x,strategy:C}=(0,W.useContext)(o2),S=(n=l,r=b,"boolean"==typeof n?{draggable:n,droppable:!1}:{draggable:null!=(i=null==n?void 0:n.draggable)?i:r.draggable,droppable:null!=(o=null==n?void 0:n.droppable)?o:r.droppable}),D=g.indexOf(u),N=(0,W.useMemo)(()=>({sortable:{containerId:y,index:D,items:g},...h}),[y,h,D,g]),O=(0,W.useMemo)(()=>g.slice(g.indexOf(u)),[g,u]),{rect:M,node:T,isOver:k,setNodeRef:P}=function(e){let{data:n,disabled:r=!1,id:i,resizeObserverConfig:o}=e,s=iy("Droppable"),{active:a,dispatch:l,over:h,measureDroppableContainers:c}=(0,W.useContext)(oT),u=(0,W.useRef)({disabled:r}),d=(0,W.useRef)(!1),p=(0,W.useRef)(null),f=(0,W.useRef)(null),{disabled:g,updateMeasurementsFor:y,timeout:m}={...oB,...o},b=ic(null!=y?y:i),_=om({callback:(0,W.useCallback)(()=>{if(!d.current){d.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),f.current=null},m)},[m]),disabled:g||!a}),[E,w]=id((0,W.useCallback)((e,n)=>{_&&(n&&(_.unobserve(n),d.current=!1),e&&_.observe(e))},[_])),x=ic(n);return(0,W.useEffect)(()=>{_&&E.current&&(_.disconnect(),d.current=!1,_.observe(E.current))},[E,_]),(0,W.useEffect)(()=>(l({type:I.RegisterDroppable,element:{id:i,key:s,disabled:r,node:E,rect:p,data:x}}),()=>l({type:I.UnregisterDroppable,key:s,id:i})),[i]),(0,W.useEffect)(()=>{r!==u.current.disabled&&(l({type:I.SetDroppableDisabled,id:i,key:s,disabled:r}),u.current.disabled=r)},[i,s,r,l]),{active:a,rect:p,isOver:(null==h?void 0:h.id)===i,node:E,over:h,setNodeRef:w}}({id:u,data:N,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...p}}),{active:A,activatorEvent:L,activeNodeRect:j,attributes:R,setNodeRef:z,listeners:V,isDragging:F,over:$,setActivatorNodeRef:B,transform:H}=function(e){let{id:n,data:r,disabled:i=!1,attributes:o}=e,s=iy("Draggable"),{activators:a,activatorEvent:l,active:h,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:p}=(0,W.useContext)(oT),{role:f=oF,roleDescription:g="draggable",tabIndex:y=0}=null!=o?o:{},m=(null==h?void 0:h.id)===n,b=(0,W.useContext)(m?oR:oV),[_,E]=id(),[w,x]=id(),C=(0,W.useMemo)(()=>a.reduce((e,r)=>{let{eventName:i,handler:o}=r;return e[i]=e=>{o(e,n)},e},{}),[a,n]),S=ic(r);return il(()=>(d.set(n,{id:n,key:s,node:_,activatorNode:w,data:S}),()=>{let e=d.get(n);e&&e.key===s&&d.delete(n)}),[d,n]),{active:h,activatorEvent:l,activeNodeRect:c,attributes:(0,W.useMemo)(()=>({role:f,tabIndex:y,"aria-disabled":i,"aria-pressed":!!m&&f===oF||void 0,"aria-roledescription":g,"aria-describedby":u.draggable}),[i,f,y,m,g,u.draggable]),isDragging:m,listeners:i?void 0:C,node:_,over:p,setNodeRef:E,setActivatorNodeRef:x,transform:b}}({id:u,data:N,attributes:{...o7,...a},disabled:S.draggable}),K=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,W.useMemo)(()=>e=>{n.forEach(n=>n(e))},n)}(P,z),U=!!A,G=U&&!_&&oJ(m)&&oJ(w),Y=!x&&F,Z=Y&&G?H:null,X=G?null!=Z?Z:(null!=d?d:C)({rects:E,activeNodeRect:j,activeIndex:m,overIndex:w,index:D}):null,Q=oJ(m)&&oJ(w)?c({id:u,items:g,activeIndex:m,overIndex:w}):D,q=null==A?void 0:A.id,J=(0,W.useRef)({activeId:q,items:g,newIndex:Q,containerId:y}),ee=g!==J.current.items,et=s({active:A,containerId:y,isDragging:F,isSorting:U,id:u,index:D,items:g,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:f,wasDragging:null!=J.current.activeId}),en=function(e){let{disabled:n,index:r,node:i,rect:o}=e,[s,a]=(0,W.useState)(null),l=(0,W.useRef)(r);return il(()=>{if(!n&&r!==l.current&&i.current){let e=o.current;if(e){let n=iG(i.current,{ignoreTransform:!0}),r={x:e.left-n.left,y:e.top-n.top,scaleX:e.width/n.width,scaleY:e.height/n.height};(r.x||r.y)&&a(r)}}r!==l.current&&(l.current=r)},[n,r,i,o]),(0,W.useEffect)(()=>{s&&a(null)},[s]),s}({disabled:!et,index:D,node:T,rect:M});return(0,W.useEffect)(()=>{U&&J.current.newIndex!==Q&&(J.current.newIndex=Q),y!==J.current.containerId&&(J.current.containerId=y),g!==J.current.items&&(J.current.items=g)},[U,Q,y,g]),(0,W.useEffect)(()=>{if(q===J.current.activeId)return;if(q&&!J.current.activeId){J.current.activeId=q;return}let e=setTimeout(()=>{J.current.activeId=q},50);return()=>clearTimeout(e)},[q]),{active:A,activeIndex:m,attributes:R,data:N,rect:M,index:D,newIndex:Q,items:g,isOver:k,isSorting:U,isDragging:F,listeners:V,node:T,overIndex:w,over:$,setNodeRef:K,setActivatorNodeRef:B,setDroppableNodeRef:P,setDraggableNodeRef:z,transform:null!=en?en:X,transition:en||ee&&J.current.newIndex===D?o9:(!Y||i_(L))&&f&&(U||et)?iw.Transition.toString({...f,property:o8}):void 0}}({id:r,animateLayoutChanges:n,transition:s}),f=(0,W.useCallback)(e=>()=>W.createElement("span",Object.assign({},a,{style:{lineHeight:0},onMouseDown:e=>{a.onMouseDown(e),e.preventDefault(),e.stopPropagation()}}),W.createElement(e,null)),[a]),g=Y()(`${o}-sortable-item`,{[`${o}-sortable-item-over`]:d,[`${o}-sortable-item-active`]:(null==u?void 0:u.id)===r}),y=(0,W.useMemo)(()=>tt()(s)?void 0:{transform:iw.Transform.toString(Object.assign(Object.assign({},h),{scaleX:1,scaleY:1})),transition:c},[s,h,c]);return W.createElement("div",Object.assign({ref:l,style:y,className:g},p),i({id:r,sortableHandle:f}))}var sa=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sl=rP.PREFIX;function sh(e){return W.createElement("div",Object.assign({className:`${sl}-sortable-list`},e))}class sc extends ej{constructor(e){super(e),this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.handleInputFocus=e=>{this.foundation.handleInputFocus(e)},this.handleInputBlur=e=>{this.foundation.handleInputBlur(e)},this.handleClearBtn=e=>{this.foundation.handleClearBtn(e)},this.handleClearEnterPress=e=>{this.foundation.handleClearEnterPress(e)},this.handleTagClose=e=>{this.foundation.handleTagClose(e)},this.handleInputMouseLeave=e=>{this.foundation.handleInputMouseLeave()},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleInputMouseEnter=e=>{this.foundation.handleInputMouseEnter()},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)},this.getAllTags=()=>{let{tagsArray:e}=this.state;return e.map((e,n)=>this.renderTag(e,n))},this.renderTag=(e,n,r)=>{let{size:i,disabled:o,renderTagItem:s,showContentTooltip:a,draggable:l}=this.props,{active:h}=this.state,c=h&&l,u=Y()(`${sl}-wrapper-tag`,{[`${sl}-wrapper-tag-size-${i}`]:i,[`${sl}-wrapper-tag-icon`]:c}),d=Y()(`${sl}-wrapper-typo`,{[`${sl}-wrapper-typo-disabled`]:o}),p=Y()({[`${sl}-drag-item`]:c,[`${sl}-wrapper-tag-icon`]:c}),f=r&&r(()=>W.createElement(r9.Z,{className:`${sl}-drag-handler`})),g=c?e:`${n}${e}`,y=()=>{o||this.handleTagClose(n)};return eK()(s)?W.createElement("div",{className:p,key:g},c&&r?W.createElement(f,null):null,s(e,n,y)):W.createElement(rI,{className:u,color:"white",size:"small"===i?"small":"large",type:"light",onClose:y,closable:!o,key:g,visible:!0,"aria-label":`${!o?"Closable ":""}Tag: ${e}`},c&&r?W.createElement(f,null):null,W.createElement(r8,{className:d,ellipsis:{showTooltip:a,rows:1}},e))},this.renderSortTag=e=>{let{id:n,sortableHandle:r}=e,{tagsArray:i}=this.state,o=i.indexOf(n);return this.renderTag(n,o,r)},this.onSortEnd=e=>{this.foundation.handleSortEnd(e)},this.handleInputCompositionStart=e=>{this.foundation.handleInputCompositionStart(e)},this.handleInputCompositionEnd=e=>{this.foundation.handleInputCompositionEnd(e)},this.foundation=new rL(this.adapter),this.state={tagsArray:e.defaultValue||[],inputValue:"",focusing:!1,hovering:!1,active:!1,entering:!1},this.inputRef=W.createRef(),this.tagInputRef=W.createRef(),this.clickOutsideHandler=null}static getDerivedStateFromProps(e,n){let r,{value:i,inputValue:o}=e,{tagsArray:s}=n;return{tagsArray:rk()(i)?i:"value"in e&&!i?[]:s,inputValue:H()(o)?o:n.inputValue}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setInputValue:e=>{this.setState({inputValue:e})},setTagsArray:e=>{this.setState({tagsArray:e})},setFocusing:e=>{this.setState({focusing:e})},toggleFocusing:e=>{let{preventScroll:n}=this.props,r=this.inputRef&&this.inputRef.current;e?r&&r.focus({preventScroll:n}):r&&r.blur(),this.setState({focusing:e})},setHovering:e=>{this.setState({hovering:e})},setActive:e=>{this.setState({active:e})},setEntering:e=>{this.setState({entering:e})},getClickOutsideHandler:()=>this.clickOutsideHandler,notifyBlur:e=>{this.props.onBlur(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyInputChange:(e,n)=>{this.props.onInputChange(e,n)},notifyTagChange:e=>{this.props.onChange(e)},notifyTagAdd:e=>{this.props.onAdd(e)},notifyTagRemove:(e,n)=>{this.props.onRemove(e,n)},notifyKeyDown:e=>{this.props.onKeyDown(e)},registerClickOutsideHandler:e=>{let n=n=>{let r=this.tagInputRef&&this.tagInputRef.current,i=n.target,o=n.composedPath&&n.composedPath()||[i];!r||r.contains(i)||o.includes(r)||e(n)};this.clickOutsideHandler=n,document.addEventListener("click",n,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("click",this.clickOutsideHandler,!1),this.clickOutsideHandler=null}})}componentDidMount(){let{disabled:e,autoFocus:n,preventScroll:r}=this.props;!e&&n&&(this.inputRef.current.focus({preventScroll:r}),this.foundation.handleClick()),this.foundation.init()}renderClearBtn(){let{hovering:e,tagsArray:n,inputValue:r}=this.state,{showClear:i,disabled:o,clearIcon:s}=this.props,a=Y()(`${sl}-clearBtn`,{[`${sl}-clearBtn-invisible`]:!e||""===r&&0===n.length||o});return i?W.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TagInput value",className:a,onClick:e=>this.handleClearBtn(e),onKeyPress:e=>this.handleClearEnterPress(e)},s||W.createElement(tB,null)):null}renderPrefix(){let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n;if(tt()(i)||e3()(i))return null;let o=Y()(`${sl}-prefix`,{[`${sl}-inset-label`]:n,[`${sl}-prefix-text`]:i&&H()(i),[`${sl}-prefix-icon`]:eO(i)});return W.createElement("div",{className:o,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:r,"x-semi-prop":"prefix"},i)}renderSuffix(){let{suffix:e}=this.props;if(tt()(e)||e3()(e))return null;let n=Y()(`${sl}-suffix`,{[`${sl}-suffix-text`]:e&&H()(e),[`${sl}-suffix-icon`]:eO(e)});return W.createElement("div",{className:n,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},e)}renderTags(){let{disabled:e,maxTagCount:n,showRestTagsPopover:r,restTagsPopoverProps:i={},draggable:o,expandRestTagsOnClick:s}=this.props,{tagsArray:a,active:l}=this.state,h=Y()(`${sl}-wrapper-n`,{[`${sl}-wrapper-n-disabled`]:e}),c=this.getAllTags(),u=[],d=[...c];(!l||!s)&&n&&n<c.length&&(d=c.slice(0,n),u=c.slice(n));let p=W.createElement("span",{className:h},"+",a.length-n),f=c.map((e,n)=>({item:e,key:a[n]}));return l&&o&&f.length>0?W.createElement(so,{items:a,onSortEnd:this.onSortEnd,renderItem:this.renderSortTag,container:sh,prefix:sl,transition:null,dragOverlayCls:`${sl}-right-item-drag-item-move`}):W.createElement(W.Fragment,null,d,u.length>0&&(r?W.createElement(n_,Object.assign({content:u,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},i),p):p))}blur(){this.inputRef.current.blur(),this.foundation.clickOutsideCallBack()}focus(){let{preventScroll:e,disabled:n}=this.props;this.inputRef.current.focus({preventScroll:e}),n||this.foundation.handleClick()}render(){let e=this.props,{size:n,style:r,className:i,disabled:o,placeholder:s,validateStatus:a,prefix:l,insetLabel:h,suffix:c}=e,u=sa(e,["size","style","className","disabled","placeholder","validateStatus","prefix","insetLabel","suffix"]),{focusing:d,hovering:p,tagsArray:f,inputValue:g,active:y}=this.state,m=Y()(sl,i,{[`${sl}-focus`]:d||y,[`${sl}-disabled`]:o,[`${sl}-hover`]:p&&!o,[`${sl}-error`]:"error"===a,[`${sl}-warning`]:"warning"===a,[`${sl}-small`]:"small"===n,[`${sl}-large`]:"large"===n,[`${sl}-with-prefix`]:!!l||!!h,[`${sl}-with-suffix`]:!!c}),b=Y()(`${sl}-wrapper-input`,`${sl}-wrapper-input-${n}`),_=Y()(`${sl}-wrapper`);return W.createElement("div",Object.assign({ref:this.tagInputRef,style:r,className:m,"aria-disabled":o,"aria-label":this.props["aria-label"],"aria-invalid":"error"===a,onMouseEnter:e=>{this.handleInputMouseEnter(e)},onMouseLeave:e=>{this.handleInputMouseLeave(e)},onClick:e=>{this.handleClick(e)}},this.getDataAttr(u)),this.renderPrefix(),W.createElement("div",{className:_},this.renderTags(),W.createElement(tQ,{"aria-label":"input value",ref:this.inputRef,className:b,disabled:o,value:g,size:n,placeholder:0===f.length?s:"",onKeyDown:e=>{this.handleKeyDown(e)},onChange:(e,n)=>{this.handleInputChange(n)},onBlur:e=>{this.handleInputBlur(e)},onFocus:e=>{this.handleInputFocus(e)},onCompositionStart:this.handleInputCompositionStart,onCompositionEnd:this.handleInputCompositionEnd})),this.renderClearBtn(),this.renderSuffix())}}sc.propTypes={children:X().node,clearIcon:X().node,style:X().object,className:X().string,disabled:X().bool,allowDuplicates:X().bool,max:X().number,maxTagCount:X().number,maxLength:X().number,showRestTagsPopover:X().bool,restTagsPopoverProps:X().object,showContentTooltip:X().oneOfType([X().shape({type:X().string,opts:X().object}),X().bool]),defaultValue:X().array,value:X().array,inputValue:X().string,placeholder:X().string,separator:X().oneOfType([X().string,X().array]),showClear:X().bool,addOnBlur:X().bool,draggable:X().bool,expandRestTagsOnClick:X().bool,autoFocus:X().bool,renderTagItem:X().func,onBlur:X().func,onFocus:X().func,onChange:X().func,onInputChange:X().func,onExceed:X().func,onInputExceed:X().func,onAdd:X().func,onRemove:X().func,onKeyDown:X().func,size:X().oneOf(["large","default","small"]),validateStatus:X().oneOf(["success","default","error","warning"]),prefix:X().oneOfType([X().string,X().node]),suffix:X().oneOfType([X().string,X().node]),"aria-label":X().string,preventScroll:X().bool},sc.defaultProps={showClear:!1,addOnBlur:!1,allowDuplicates:!0,showRestTagsPopover:!0,autoFocus:!1,draggable:!1,expandRestTagsOnClick:!0,showContentTooltip:!0,separator:",",size:"default",validateStatus:"default",onBlur:$(),onFocus:$(),onChange:$(),onInputChange:$(),onExceed:$(),onInputExceed:$(),onAdd:$(),onRemove:$(),onKeyDown:$()};let su=tS.PREFIX;class sd extends ej{constructor(e){super(e),this.search=e=>{this.handleInputChange(e)},this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleTagRemoveInTrigger=e=>{this.foundation.handleTagRemoveInTrigger(e)},this.handleTagClose=(e,n,r)=>{n.preventDefault(),this.foundation.handleTagRemoveByKey(r)},this.renderTagItem=(e,n)=>{let{keyEntities:r,disabledKeys:i}=this.state,{size:o,disabled:s,displayProp:a,displayRender:l,disableStrictly:h}=this.props;if(r[e]){let c=s||r[e].data.disabled||h&&i.has(e),u=Y()(`${su}-selection-tag`,{[`${su}-selection-tag-disabled`]:c});return eK()(l)?l(r[e],n):W.createElement(rI,{size:"default"===o?"large":o,key:`tag-${e}-${n}`,color:"white",tagKey:e,className:u,closable:!0,onClose:this.handleTagClose},r[e].data[a])}return null},this.onRemoveInTagInput=e=>{this.foundation.handleTagRemoveByKey(e)},this.handleItemClick=(e,n)=>{this.foundation.handleItemClick(e,n)},this.handleItemHover=(e,n)=>{this.foundation.handleItemHover(e,n)},this.onItemCheckboxClick=e=>{this.foundation.onItemCheckboxClick(e)},this.handleListScroll=(e,n)=>{this.foundation.handleListScroll(e,n)},this.renderContent=()=>{let{inputValue:e,isSearching:n,activeKeys:r,selectedKeys:i,checkedKeys:o,halfCheckedKeys:s,loadedKeys:a,loadingKeys:l}=this.state,{filterTreeNode:h,dropdownClassName:c,dropdownStyle:u,loadData:d,emptyContent:p,separator:f,topSlot:g,bottomSlot:y,showNext:m,multiple:b,filterRender:_,virtualizeInSearch:E,expandIcon:w}=this.props,x=Y()(c,`${su}-popover`),C=this.foundation.getRenderData(),S=C&&C.length?u:Object.assign(Object.assign({},u),{minWidth:this.state.emptyContentMinWidth});return W.createElement("div",{className:x,role:"listbox",style:S,onKeyDown:this.foundation.handleKeyDown},g,W.createElement(ru,{activeKeys:r,selectedKeys:i,separator:f,loadedKeys:a,loadingKeys:l,onItemClick:this.handleItemClick,onItemHover:this.handleItemHover,showNext:m,onItemCheckboxClick:this.onItemCheckboxClick,onListScroll:this.handleListScroll,searchable:!!h&&n,keyword:e,emptyContent:p,loadData:d,data:C,multiple:b,checkedKeys:o,halfCheckedKeys:s,filterRender:_,virtualize:E,expandIcon:w}),y)},this.renderPlusN=e=>{let{disabled:n,showRestTagsPopover:r,restTagsPopoverProps:i}=this.props,o=Y()(`${su}-selection-n`,{[`${su}-selection-n-disabled`]:n}),s=W.createElement("span",{className:o},"+",e.length);return r?W.createElement(n_,Object.assign({content:e,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},i),s):s},this.renderMultipleTags=()=>{let{autoMergeValue:e,maxTagCount:n,checkRelation:r}=this.props,{checkedKeys:i,resolvedCheckedKeys:o}=this.state,s=this.mergeType===tD.NONE_MERGE_TYPE||r===tD.UN_RELATED?i:o,a=[],l=[];return[...s].forEach((e,r)=>{let i=!U()(n)||n>=r+1,o=this.renderTagItem(e,r);i?a.push(o):l.push(o)}),W.createElement(W.Fragment,null,a,!eW()(l)&&this.renderPlusN(l))},this.renderDisplayText=()=>{let{displayProp:e,separator:n,displayRender:r}=this.props,{selectedKeys:i}=this.state,o="";if(i.size){let s=this.foundation.getItemPropPath([...i][0],e);o=r&&"function"==typeof r?r(s):s.map((e,r)=>W.createElement(W.Fragment,{key:`${e}-${r}`},r<s.length-1?W.createElement(W.Fragment,null,e,n):e))}return o},this.renderSelectContent=()=>{let{placeholder:e,filterTreeNode:n,multiple:r,searchPosition:i}=this.props,{checkedKeys:o}=this.state;if(!(n&&i===tD.SEARCH_POSITION_TRIGGER))if(r)return 0===o.size?W.createElement("span",{className:`${su}-selection-placeholder`},e):this.renderMultipleTags();else{let n=this.renderDisplayText(),r=Y()({[`${su}-selection-placeholder`]:!n});return W.createElement("span",{className:r},n||e)}return r?this.renderTagInput():this.renderInput()},this.renderSuffix=()=>{let{suffix:e}=this.props,n=Y()({[`${su}-suffix`]:!0,[`${su}-suffix-text`]:e&&H()(e),[`${su}-suffix-icon`]:eO(e)});return W.createElement("div",{className:n,"x-semi-prop":"suffix"},e)},this.renderPrefix=()=>{let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n,o=Y()({[`${su}-prefix`]:!0,[`${su}-inset-label`]:n,[`${su}-prefix-text`]:i&&H()(i),[`${su}-prefix-icon`]:eO(i)});return W.createElement("div",{className:o,id:r,"x-semi-prop":"prefix,insetLabel"},i)},this.renderCustomTrigger=()=>{var e;let n,{disabled:r,triggerRender:i,multiple:o}=this.props,{selectedKeys:s,inputValue:a,inputPlaceHolder:l,resolvedCheckedKeys:h,checkedKeys:c,keyEntities:u}=this.state;return o?this.mergeType===tD.NONE_MERGE_TYPE?(n=new Set,c.forEach(e=>{var r;n.add(null==(r=u[e])?void 0:r.pos)})):(n=new Set,h.forEach(e=>{var r;n.add(null==(r=u[e])?void 0:r.pos)})):n=null==(e=u[[...s][0]])?void 0:e.pos,W.createElement(rp,{value:n,inputValue:a,onChange:this.handleInputChange,onClear:this.handleClear,placeholder:l,disabled:r,triggerRender:i,componentName:"Cascader",componentProps:Object.assign({},this.props),onSearch:this.handleInputChange,onRemove:this.handleTagRemoveInTrigger})},this.handleMouseOver=()=>{this.foundation.toggleHoverState(!0)},this.handleMouseLeave=()=>{this.foundation.toggleHoverState(!1)},this.handleClear=e=>{e&&e.stopPropagation(),this.foundation.handleClear()},this.handleClearEnterPress=e=>{e&&e.stopPropagation(),this.foundation.handleClearEnterPress(e)},this.showClearBtn=()=>{let{showClear:e,disabled:n,multiple:r}=this.props,{selectedKeys:i,isOpen:o,isHovering:s,checkedKeys:a,inputValue:l}=this.state,h=i.size,c=r&&a.size;return e&&(l||h||c)&&!n&&(o||s)},this.renderClearBtn=()=>{let e=Y()(`${su}-clearbtn`),{clearIcon:n}=this.props;return this.showClearBtn()?W.createElement("div",{className:e,onClick:this.handleClear,onKeyPress:this.handleClearEnterPress,role:"button",tabIndex:0},n||W.createElement(tB,null)):null},this.renderArrow=()=>{let{arrowIcon:e}=this.props;return this.showClearBtn()?null:e?W.createElement("div",{className:Y()(`${su}-arrow`),"x-semi-prop":"arrowIcon"},e):null},this.renderSelection=()=>{let{disabled:e,multiple:n,filterTreeNode:r,style:i,size:o,className:s,validateStatus:a,prefix:l,suffix:h,insetLabel:c,triggerRender:u,showClear:d,id:p,borderless:f}=this.props,{isOpen:g,isFocus:y,isInput:m,checkedKeys:b}=this.state,_="function"==typeof u,E=_?Y()(s):Y()(su,s,{[`${su}-borderless`]:f,[`${su}-focus`]:y||g&&!m,[`${su}-disabled`]:e,[`${su}-single`]:!0,[`${su}-filterable`]:!!r,[`${su}-error`]:"error"===a,[`${su}-warning`]:"warning"===a,[`${su}-small`]:"small"===o,[`${su}-large`]:"large"===o,[`${su}-with-prefix`]:l||c,[`${su}-with-suffix`]:h}),w=Y()(`${su}-selection`,{[`${su}-selection-multiple`]:n&&!eW()(b)}),x=_?this.renderCustomTrigger():[W.createElement(W.Fragment,{key:"prefix"},l||c?this.renderPrefix():null),W.createElement(W.Fragment,{key:"selection"},W.createElement("div",{className:w},this.renderSelectContent())),W.createElement(W.Fragment,{key:"suffix"},h?this.renderSuffix():null),W.createElement(W.Fragment,{key:"clearbtn"},this.renderClearBtn()),W.createElement(W.Fragment,{key:"arrow"},this.renderArrow())];return W.createElement("div",Object.assign({className:E,style:i,ref:this.triggerRef,onClick:e=>this.foundation.handleClick(e),onKeyPress:e=>this.foundation.handleSelectionEnterPress(e),"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],id:p,onKeyDown:this.foundation.handleKeyDown},d?{onMouseEnter:()=>this.handleMouseOver(),onMouseLeave:()=>this.handleMouseLeave()}:{},{role:"combobox",tabIndex:0},this.getDataAttr(this.props)),x)},this.state={emptyContentMinWidth:null,disabledKeys:new Set,isOpen:e.defaultOpen,rePosKey:0,keyEntities:{},selectedKeys:new Set([]),activeKeys:new Set([]),filteredKeys:new Set([]),inputValue:"",isSearching:!1,inputPlaceHolder:e.searchPlaceholder||e.placeholder,prevProps:{},isHovering:!1,checkedKeys:new Set([]),halfCheckedKeys:new Set([]),resolvedCheckedKeys:new Set([]),loadedKeys:new Set,loadingKeys:new Set,loading:!1,showInput:!1},this.options={},this.isEmpty=!1,this.mergeType=tI(e.autoMergeValue,e.leafOnly),this.inputRef=W.createRef(),this.triggerRef=W.createRef(),this.optionsRef=W.createRef(),this.clickOutsideHandler=null,this.foundation=new tL(this.adapter),this.loadingKeysRef=W.createRef(),this.loadedKeysRef=W.createRef()}get adapter(){var e=this;return Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),{updateInputValue:e=>{this.setState({inputValue:e})},updateInputPlaceHolder:e=>{this.setState({inputPlaceHolder:e})},focusInput:()=>{let{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})},blurInput:()=>{this.inputRef&&this.inputRef.current&&this.inputRef.current.blur()}}),{registerClickOutsideHandler:e=>{let n=n=>{let r=this.optionsRef&&this.optionsRef.current,i=this.triggerRef&&this.triggerRef.current,o=eQ.findDOMNode(r),s=n.target,a=n.composedPath&&n.composedPath()||[s];!o||o.contains(s)&&o.contains(s.parentNode)||!i||i.contains(s)||a.includes(i)||a.includes(o)||e(n)};this.clickOutsideHandler=n,document.addEventListener("mousedown",n,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("mousedown",this.clickOutsideHandler,!1)},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})}}),{setEmptyContentMinWidth:e=>{this.setState({emptyContentMinWidth:e})},getTriggerWidth:()=>{let e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},updateStates:e=>{this.setState(Object.assign({},e))},openMenu:()=>{this.setState({isOpen:!0})},closeMenu:e=>{this.setState({isOpen:!1},()=>{e&&e()})},updateSelection:e=>this.setState({selectedKeys:e}),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)},notifySelect:e=>{this.props.onSelect&&this.props.onSelect(e)},notifyOnSearch:e=>{this.props.onSearch&&this.props.onSearch(e)},notifyFocus:function(){e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){e.props.onBlur&&e.props.onBlur(...arguments)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},toggleHovering:e=>{this.setState({isHovering:e})},notifyLoadData:(e,n)=>{let{loadData:r}=this.props;r&&new Promise(i=>{r(e).then(()=>{setTimeout(()=>{n(),this.setState({loading:!1}),i()})})})},notifyOnLoad:(e,n)=>{let{onLoad:r}=this.props;r&&r(e,n)},notifyListScroll:(e,n)=>{let{panelIndex:r,activeNode:i}=n;this.props.onListScroll(e,{panelIndex:r,activeNode:i})},notifyOnExceed:e=>this.props.onExceed(e),notifyClear:()=>this.props.onClear(),toggleInputShow:(e,n)=>{this.setState({showInput:e},()=>{n()})},updateFocusState:e=>{this.setState({isFocus:e})},updateLoadingKeyRefValue:e=>{this.loadingKeysRef.current=e},getLoadingKeyRefValue:()=>this.loadingKeysRef.current,updateLoadedKeyRefValue:e=>{this.loadedKeysRef.current=e},getLoadedKeyRefValue:()=>this.loadedKeysRef.current})}static getDerivedStateFromProps(e,n){let{multiple:r,value:i,defaultValue:o,onChangeWithObject:s,leafOnly:a,autoMergeValue:l,checkRelation:h,searchPlaceholder:c,placeholder:u}=e,{prevProps:d}=n,p=n.keyEntities||{},f={},g=c||u;g!==n.inputPlaceHolder&&(f.inputPlaceHolder=g);let y=n=>{let r=eW()(d)&&n in e,i=d&&!eY()(d[n],e[n]);return r||i},m=(e,n)=>{let r=[];Array.isArray(e)?r=Array.isArray(e[0])?e:[e]:void 0!==e&&(r=[[e]]);let i=[];return r.forEach(e=>{let n=s&&eB()(e[0])?e.map(e=>null==e?void 0:e.value):e;n.length>0&&i.push(n)}),i.reduce((e,r)=>{let i=tO(r);return n[i]&&e.push(i),e},[])};if(r){let r=y("treeData")||(()=>{let n=!d&&"treeData"in e,r=d&&d.treeData!==e.treeData;return n||r})(),s=y("value")||eW()(d)&&o;if(r||s){r&&(f.treeData=e.treeData,f.keyEntities=p=tM(e.treeData));let c=n.checkedKeys;if(s?c=m(y("value")?i:o,p):r&&"value"in e&&(c=m(i,p)),eX()(c)&&(c=[...c]),h===tD.RELATED){let n=td(c,p),r=new Set(n.checkedKeys),i=new Set(n.halfCheckedKeys);e.disableStrictly&&(f.disabledKeys=tC(p));let o=tI(l,a)===tD.LEAF_ONLY_MERGE_TYPE;f.checkedKeys=r,f.halfCheckedKeys=i,f.resolvedCheckedKeys=new Set(tm(r,p,o))}else f.checkedKeys=new Set(c);f.prevProps=e}}return f}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e){if(this.props.multiple)return;let n=!1;eY()(e.treeData,this.props.treeData)||(n=!0,this.foundation.collectOptions()),e.value===this.props.value||n||this.foundation.handleValueChange(this.props.value)}renderTagInput(){let{size:e,disabled:n,placeholder:r,maxTagCount:i,showRestTagsPopover:o,restTagsPopoverProps:s,checkRelation:a}=this.props,{inputValue:l,checkedKeys:h,keyEntities:c,resolvedCheckedKeys:u,inputPlaceHolder:d}=this.state,p=Y()(`${su}-tagInput-wrapper`),f=this.mergeType===tD.NONE_MERGE_TYPE||a===tD.UN_RELATED?h:u;return W.createElement(sc,{className:p,ref:this.inputRef,disabled:n,size:e,value:[...f],showRestTagsPopover:o,restTagsPopoverProps:s,maxTagCount:i,renderTagItem:this.renderTagItem,inputValue:l,onInputChange:this.handleInputChange,onRemove:this.onRemoveInTagInput,placeholder:d,expandRestTagsOnClick:!1})}renderInput(){let{size:e,disabled:n}=this.props,r=Y()(`${su}-input`),{inputValue:i,inputPlaceHolder:o,showInput:s}=this.state,a={disabled:n,value:i,className:r,onChange:this.handleInputChange},l=Y()({[`${su}-search-wrapper`]:!0,[`${su}-search-wrapper-${e}`]:"default"!==e}),h=this.renderDisplayText(),c=Y()({[`${su}-selection-placeholder`]:!h,[`${su}-selection-text-hide`]:s&&i,[`${su}-selection-text-inactive`]:s&&!i});return W.createElement("div",{className:l},W.createElement("span",{className:c},h||o),s&&W.createElement(tQ,Object.assign({ref:this.inputRef,size:e},a)))}close(){this.foundation.close()}open(){this.foundation.open()}focus(){this.foundation.focus()}blur(){this.foundation.blur()}render(){let{zIndex:e,getPopupContainer:n,autoAdjustOverflow:r,stopPropagation:i,mouseLeaveDelay:o,mouseEnterDelay:s,position:a,motion:l,dropdownMargin:h}=this.props,{isOpen:c,rePosKey:u}=this.state,{direction:d}=this.context,p=this.renderContent(),f=this.renderSelection();return W.createElement(n_,{getPopupContainer:n,zIndex:e,motion:l,margin:h,ref:this.optionsRef,content:p,visible:c,trigger:"custom",rePosKey:u,position:null!=a?a:"rtl"===d?"bottomRight":"bottomLeft",autoAdjustOverflow:r,stopPropagation:i,mouseLeaveDelay:o,mouseEnterDelay:s,afterClose:()=>this.foundation.updateSearching(!1)},f)}}sd.__SemiComponentName__="Cascader",sd.contextType=Q,sd.propTypes={"aria-labelledby":X().string,"aria-invalid":X().bool,"aria-errormessage":X().string,"aria-describedby":X().string,"aria-required":X().bool,"aria-label":X().string,arrowIcon:X().node,borderless:X().bool,clearIcon:X().node,changeOnSelect:X().bool,defaultValue:X().oneOfType([X().string,X().array]),disabled:X().bool,dropdownClassName:X().string,dropdownStyle:X().object,dropdownMargin:X().oneOfType([X().number,X().object]),emptyContent:X().node,motion:X().bool,filterTreeNode:X().oneOfType([X().func,X().bool]),filterLeafOnly:X().bool,placeholder:X().string,searchPlaceholder:X().string,size:X().oneOf(tD.SIZE_SET),style:X().object,className:X().string,treeData:X().arrayOf(X().shape({value:X().oneOfType([X().string,X().number]),label:X().any})),treeNodeFilterProp:X().string,suffix:X().node,prefix:X().node,insetLabel:X().node,insetLabelId:X().string,id:X().string,displayProp:X().string,displayRender:X().func,onChange:X().func,onSearch:X().func,onSelect:X().func,onBlur:X().func,onFocus:X().func,children:X().node,getPopupContainer:X().func,zIndex:X().number,value:X().oneOfType([X().string,X().number,X().array]),validateStatus:X().oneOf(tD.VALIDATE_STATUS),showNext:X().oneOf([tD.SHOW_NEXT_BY_CLICK,tD.SHOW_NEXT_BY_HOVER]),stopPropagation:X().oneOfType([X().bool,X().string]),showClear:X().bool,defaultOpen:X().bool,autoAdjustOverflow:X().bool,onDropdownVisibleChange:X().func,triggerRender:X().func,onListScroll:X().func,onChangeWithObject:X().bool,bottomSlot:X().node,topSlot:X().node,multiple:X().bool,autoMergeValue:X().bool,maxTagCount:X().number,showRestTagsPopover:X().bool,restTagsPopoverProps:X().object,max:X().number,separator:X().string,onExceed:X().func,onClear:X().func,loadData:X().func,onLoad:X().func,loadedKeys:X().array,disableStrictly:X().bool,leafOnly:X().bool,enableLeafClick:X().bool,preventScroll:X().bool,position:X().string,searchPosition:X().string},sd.defaultProps=eI(sd.__SemiComponentName__,{borderless:!1,leafOnly:!1,arrowIcon:W.createElement(tH.Z,null),stopPropagation:!0,motion:!0,defaultOpen:!1,zIndex:tF.DEFAULT_Z_INDEX,showClear:!1,autoClearSearchValue:!0,changeOnSelect:!1,disableStrictly:!1,autoMergeValue:!0,multiple:!1,filterTreeNode:!1,filterLeafOnly:!0,showRestTagsPopover:!1,restTagsPopoverProps:{},separator:" / ",size:"default",treeNodeFilterProp:"label",displayProp:"label",treeData:[],showNext:tD.SHOW_NEXT_BY_CLICK,onExceed:$(),onClear:$(),onDropdownVisibleChange:$(),onListScroll:$(),enableLeafClick:!1,"aria-label":"Cascader",searchPosition:tD.SEARCH_POSITION_TRIGGER,checkRelation:tD.RELATED});let sp=sd;var sf=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};Q.Consumer;class sg extends W.Component{constructor(e){super(e)}renderChildren(){let{direction:e,children:n}=this.props;return"rtl"===e?W.createElement("div",{className:`${q}-rtl`},n):n}render(){let e=this.props,{children:n,direction:r}=e,i=sf(e,["children","direction"]);return W.createElement(Q.Provider,{value:Object.assign({direction:r},i)},this.renderChildren())}}sg.propTypes={locale:X().object,timeZone:X().oneOfType([X().string,X().number]),getPopupContainer:X().func,direction:X().oneOf(["ltr","rtl"])},sg.defaultProps={locale:nP,direction:"ltr"};var sy=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sm={PREFIX:`${q}`}.PREFIX,sv=e=>{let{layout:n="horizontal",dashed:r,align:i="center",className:o,margin:s,style:a,children:l}=e,h=sy(e,["layout","dashed","align","className","margin","style","children"]),c=Y()(`${sm}-divider`,o,{[`${sm}-divider-horizontal`]:"horizontal"===n,[`${sm}-divider-vertical`]:"vertical"===n,[`${sm}-divider-dashed`]:!!r,[`${sm}-divider-with-text`]:l&&"horizontal"===n,[`${sm}-divider-with-text-${i}`]:l&&"horizontal"===n}),u={};return void 0!==s&&("vertical"===n?u={marginLeft:s,marginRight:s}:"horizontal"===n&&(u={marginTop:s,marginBottom:s})),W.createElement("div",Object.assign({},h,{className:c,style:Object.assign(Object.assign({},u),a)}),l&&"horizontal"===n?"string"==typeof l?W.createElement("span",{className:`${sm}-divider_inner-text`,"x-semi-prop":"children"},l):l:null)},sb={PREFIX:`${q}-dropdown`,SELECTED:`${q}-dropdown-item-selected`,DISABLED:`${q}-dropdown-item-disabled`},s_={POSITION_SET:tR.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},sE={SPACING:4,NESTED_SPACING:2};class sw extends e8{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);let{trigger:n}=this.getProps();if(e&&"click"===n){let e=this._adapter.getPopupId();this.setFocusToFirstMenuItem(e)}}getMenuItemNodes(e){let n=document.getElementById(e);return n?Array.from(n.getElementsByTagName("li")).filter(e=>"false"===e.ariaDisabled):null}setFocusToFirstMenuItem(e){let n=this.getMenuItemNodes(e);n&&n.length>0&&t5(n,n[0])}setFocusToLastMenuItem(e){let n=this.getMenuItemNodes(e);n&&n.length>0&&t5(n,n[n.length-1])}handleKeyDown(e){var n,r;let i=null==(r=null==(n=e.target)?void 0:n.attributes["data-popupid"])?void 0:r.value,{visible:o}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(i),o&&t4(e);break;case"ArrowUp":this.setFocusToLastMenuItem(i),o&&t4(e)}}}class sx extends e8{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){"custom"===this._adapter.getContext("trigger")&&(e&&function(e,n){for(let r=0;r<e.length;r++){let i=e[r].attributes["data-popupid"];if(i&&i.value===n)return e[r]}return null}(document.querySelectorAll("[data-popupid]"),e.id)).focus()}setFocusByFirstCharacter(e,n){var r,i,o;let s,a,l=(r=this.menuItemNodes,i=this.firstChars,o=n,r&&i&&o&&!(o.length>1)?(o=o.toLowerCase(),(s=r.indexOf(e)+1)>=r.length&&(s=0),-1===(a=i.indexOf(o,s))&&(a=i.indexOf(o,0)),a>=0?a:-1):-1);l>=0&&t5(this.menuItemNodes,this.menuItemNodes[l])}onMenuKeydown(e){var n,r,i;let o=function(e,n){if(!e)return null;for(;e.parentElement&&eb()(e.parentElement,"attributes.role.value","")!==n;)e=e.parentElement;return e.parentElement}(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter(e=>"true"!==e.ariaDisabled)),0===this.firstChars.length&&this.menuItemNodes.forEach(e=>{var n;this.firstChars.push(null==(n=e.textContent.trim()[0])?void 0:n.toLowerCase())});let s=this.menuItemNodes.find(e=>0===e.tabIndex);switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(o);break;case"ArrowUp":let a,l;n=this.menuItemNodes,n.length>0&&(s===n[0]?a=n[n.length-1]:(l=n.indexOf(s),a=n[l-1]),t5(n,a)),t4(e);break;case"ArrowDown":let h,c;r=this.menuItemNodes,r.length>0&&(s===r[r.length-1]?h=r[0]:(c=r.indexOf(s),h=r[c+1]),t5(r,h)),t4(e);break;default:1===(i=e.key).length&&i.match(/\S/)&&this.setFocusByFirstCharacter(s,e.key)}}}let sC=W.createContext({level:0});var sS=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sD=sb.PREFIX;class sN extends ej{constructor(e){super(e),this.foundation=new sx(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){let e=this.props,{children:n,className:r,style:i}=e,o=sS(e,["children","className","style"]);return W.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},o,{className:Y()(`${sD}-menu`,r),style:i,onKeyDown:e=>this.foundation.onMenuKeydown(e)}),n)}}sN.propTypes={children:X().node,className:X().string,style:X().object},sN.contextType=sC;let sO=sb.PREFIX;class sM extends ej{render(){let{children:e,disabled:n,className:r,forwardRef:i,style:o,type:s,active:a,icon:l,onKeyDown:h,showTick:c,hover:u}=this.props,{showTick:d}=this.context,p=null!=d?d:c,f=Y()(r,{[`${sO}-item`]:!0,[`${sO}-item-disabled`]:n,[`${sO}-item-hover`]:u,[`${sO}-item-withTick`]:p,[`${sO}-item-${s}`]:s,[`${sO}-item-active`]:a}),g={};n||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach(e=>{1!==this.context.level&&"onClick"===e?g.onMouseDown=n=>{var r,i;0===n.button&&(null==(i=(r=this.props)[e])||i.call(r,n))}:g[e]=this.props[e]});let y=null;switch(!0){case p&&a:y=W.createElement(nj,null);break;case p&&!a:y=W.createElement(nj,{style:{color:"transparent"}});break;default:y=null}let m=null;return l&&(m=W.createElement("div",{className:`${sO}-item-icon`},l)),W.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":n},g,{onKeyDown:h,ref:e=>i(e),className:f,style:o},this.getDataAttr(this.props)),y,m,e)}}sM.propTypes={children:X().oneOfType([X().string,X().node]),name:X().string,disabled:X().bool,selected:X().bool,onClick:X().func,onMouseEnter:X().func,onMouseLeave:X().func,onContextMenu:X().func,className:X().string,style:X().object,forwardRef:X().func,type:X().oneOf(s_.ITEM_TYPE),active:X().bool,icon:X().node},sM.contextType=sC,sM.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:$(),onMouseLeave:$(),forwardRef:$()},sM.elementType="Dropdown.Item";let sI=sb.PREFIX,sT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{style:n,className:r}=e;return W.createElement("div",{className:Y()(`${sI}-divider`,r),style:n})};sT.propTypes={style:X().object,className:X().string};let sk=sb.PREFIX;class sP extends W.PureComponent{render(){let{className:e,style:n,children:r}=this.props,{showTick:i}=this.context,o=Y()({[`${sk}-title`]:!0,[`${sk}-title-withTick`]:i},e);return W.createElement("div",{className:o,style:n},r)}}sP.propTypes={children:X().node,className:X().string,style:X().object},sP.contextType=sC;var sA=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sL=s_.POSITION_SET,sj=s_.TRIGGER_SET;class sR extends ej{constructor(e){super(e),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.state={popVisible:e.visible},this.foundation=new sw(this.adapter),this.tooltipRef=W.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>{var n,r;return null==(r=(n=this.props).onVisibleChange)?void 0:r.call(n,e)},getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){let{render:e,menu:n,contentClassName:r,style:i,showTick:o,prefixCls:s,trigger:a}=this.props,l=Y()(s,r),{level:h=0}=this.context,c=null;return W.isValidElement(e)?c=e:Array.isArray(n)&&(c=this.renderMenu()),W.createElement(sC.Provider,{value:{showTick:o,level:h+1,trigger:a}},W.createElement("div",{className:l,style:i},W.createElement("div",{className:`${s}-content`,"x-semi-prop":"render"},c)))}renderMenu(){let{menu:e}=this.props,n=e.map((e,n)=>{switch(e.node){case"title":{let{name:r,node:i}=e,o=sA(e,["name","node"]);return W.createElement(sR.Title,Object.assign({},o,{key:i+r+n}),r)}case"item":{let{node:r,name:i}=e,o=sA(e,["node","name"]);return W.createElement(sR.Item,Object.assign({},o,{key:r+i+n}),i)}case"divider":return W.createElement(sR.Divider,{key:e.node+n});default:return null}});return W.createElement(sR.Menu,null,n)}renderPopCard(){let{render:e,contentClassName:n,style:r,showTick:i,prefixCls:o}=this.props,s=Y()(o,n),{level:a=0}=this.context;return W.createElement(sC.Provider,{value:{showTick:i,level:a+1}},W.createElement("div",{className:s,style:r},W.createElement("div",{className:`${o}-content`},e)))}render(){let e=this.props,{children:n,position:r,trigger:i,onVisibleChange:o,zIndex:s,className:a,motion:l,margin:h,style:c,prefixCls:u}=e,d=sA(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]),{spacing:p}=this.props,{level:f}=this.context,{popVisible:g}=this.state,y=this.renderContent();return f>0?p="number"==typeof p?p:sE.NESTED_SPACING:null==p&&(p=sE.SPACING),W.createElement(ng,Object.assign({zIndex:s,motion:l,margin:h,content:y,className:a,prefixCls:u,spacing:p,position:r,trigger:i,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},d),W.isValidElement(n)?W.cloneElement(n,{className:Y()(eb()(n,"props.className"),{[`${u}-showing`]:g}),"aria-haspopup":!0,"aria-expanded":g,onKeyDown:e=>{this.foundation.handleKeyDown(e);let r=eb()(n,"props.onKeyDown");r&&r(e)}}):n)}}sR.Menu=sN,sR.Item=sM,sR.Divider=sT,sR.Title=sP,sR.contextType=sC,sR.propTypes={children:X().node,contentClassName:X().oneOfType([X().string,X().array]),className:X().string,getPopupContainer:X().func,margin:X().oneOfType([X().number,X().object]),mouseEnterDelay:X().number,mouseLeaveDelay:X().number,menu:X().array,motion:X().oneOfType([X().bool,X().func,X().object]),onVisibleChange:X().func,prefixCls:X().string,position:X().oneOf(sL),rePosKey:X().oneOfType([X().string,X().number]),render:X().node,spacing:X().oneOfType([X().number,X().object]),showTick:X().bool,style:X().object,trigger:X().oneOf(sj),visible:X().bool,zIndex:X().number},sR.__SemiComponentName__="Dropdown",sR.defaultProps=eI(sR.__SemiComponentName__,{onVisibleChange:$(),prefixCls:sb.PREFIX,zIndex:1060,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:s_.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:$()});let sz=sR,sV=r(3427).ZPm,sF={PREFIX:`${q}-sidesheet`,DIALOG:`${q}-modal`};var s$=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sB=0,sH=sF.PREFIX;class sK extends W.PureComponent{constructor(){super(...arguments),this.onMaskClick=e=>{e.target===e.currentTarget&&this.close(e)},this.close=e=>{let{onClose:n}=this.props;n&&n(e)}}componentDidMount(){this.sideSheetId=`sidesheet-${sB++}`}componentWillUnmount(){clearTimeout(this.timeoutId)}getMaskElement(){var e;let{mask:n,maskStyle:r,maskClosable:i}=this.props;return n?W.createElement("div",Object.assign({"aria-hidden":!0,key:"mask",className:Y()(`${sH}-mask`,null!=(e=this.props.maskClassName)?e:""),style:r,onClick:i?this.onMaskClick:null},this.props.maskExtraProps)):null}renderHeader(){let e,n,{title:r,closable:i,headerStyle:o,closeIcon:s}=this.props;if(r&&(e=W.createElement("div",{className:`${sH}-title`,"x-semi-prop":"title"},this.props.title)),i){let e=s||W.createElement(rS,null);n=W.createElement(em,{className:`${sH}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return W.createElement("div",{className:`${sH}-header`,role:"heading","aria-level":1,style:Object.assign({},o)},e,n)}getDialogElement(){var e;let n=s$(this.props,[]),r={};n.width&&(r.width=n.width,n.mask||(r.width="100%")),n.height&&(r.height=n.height);let i=this.renderHeader();return W.createElement("div",Object.assign({key:"dialog-element",role:"dialog",tabIndex:-1,className:Y()(`${sH}-inner`,`${sH}-inner-wrap`,null!=(e=this.props.dialogClassName)?e:"",`${sH}-size-${n.size}`),style:Object.assign(Object.assign({},n.style),r)},this.props.wrapperExtraProps),W.createElement("div",{className:`${sH}-content`},i,W.createElement("div",{className:`${sH}-body`,style:n.bodyStyle,"x-semi-prop":"children"},n.children),n.footer?W.createElement("div",{className:`${sH}-footer`,"x-semi-prop":"footer"},n.footer):null))}render(){let e=this.props,{mask:n,className:r,width:i,onClose:o,maskStyle:s,maskClosable:a,maskClassName:l,title:h,closable:c,headerStyle:u,height:d,style:p,size:f,bodyStyle:g,dialogClassName:y,children:m,footer:b,maskExtraProps:_,wrapperExtraProps:E}=e,w=s$(e,["mask","className","width","onClose","maskStyle","maskClosable","maskClassName","title","closable","headerStyle","height","style","size","bodyStyle","dialogClassName","children","footer","maskExtraProps","wrapperExtraProps"]),x=Y()(r,{[`${sH}-fixed`]:!n,[`${sH}-size-${this.props.size}`]:!n}),C={};!n&&i&&(C.width=i);let S=eA(w);return W.createElement("div",Object.assign({className:x,style:C},S),this.getMaskElement(),this.getDialogElement())}}sK.propTypes={onClose:X().func,closeIcon:X().node},sK.defaultProps={onClose:$()};class sU extends e8{constructor(e){super(Object.assign(Object.assign({},sU.defaultAdapter),e)),this.toggleDisplayNone=e=>{this._adapter.toggleDisplayNone(e)}}get defaultAdapter(){return{handleCancel:$(),beforeShow:$(),afterHide:$()}}destroy(){this.afterHide()}handleCancel(e){this._adapter.notifyCancel(e)}beforeShow(){this.getProp("disableScroll")&&this._adapter.disabledBodyScroll(),this._adapter.setOnKeyDownListener()}afterHide(){this.getProp("disableScroll")&&this._adapter.enabledBodyScroll(),this._adapter.removeKeyDownListener()}handleKeyDown(e){let{closeOnEsc:n}=this.getProps();if(n&&e.keyCode===tP.ESC){e.stopPropagation(),this.handleCancel(e);return}}onVisibleChange(e){this._adapter.notifyVisibleChange(e)}}var sW=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sG=sF.PREFIX;class sY extends ej{constructor(e){super(e),this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.updateState=()=>{this.foundation.toggleDisplayNone(!this.props.visible)},this.state={displayNone:!this.props.visible},this.foundation=new sU(this.adapter),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{disabledBodyScroll:()=>{let{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{let{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>{this.props.onCancel&&this.props.onCancel(e)},notifyVisibleChange:e=>{this.props.afterVisibleChange(e)},setOnKeyDownListener:()=>{window&&window.addEventListener("keydown",this.handleKeyDown)},removeKeyDownListener:()=>{window&&window.removeEventListener("keydown",this.handleKeyDown)},toggleDisplayNone:e=>{e!==this.state.displayNone&&this.setState({displayNone:e})}})}static getDerivedStateFromProps(e,n){let r={};return e.visible&&n.displayNone&&(r.displayNone=!1),e.visible||e.motion||n.displayNone||(r.displayNone=!0),r}componentDidMount(){this.scrollBarWidth=globalThis&&"[object Window]"===Object.prototype.toString.call(globalThis)?window.innerWidth-document.documentElement.clientWidth:0,this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,n,r){!e.visible&&this.props.visible&&this.foundation.beforeShow(),e.visible&&!this.props.visible&&this.foundation.afterHide(),n.displayNone!==this.state.displayNone&&this.foundation.onVisibleChange(!this.state.displayNone)}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}renderContent(){let e=this.props,{placement:n,className:r,children:i,width:o,height:s,motion:a,visible:l,style:h,maskStyle:c,size:u,zIndex:d,getPopupContainer:p,keepDOM:f}=e,g=sW(e,["placement","className","children","width","height","motion","visible","style","maskStyle","size","zIndex","getPopupContainer","keepDOM"]),y={zIndex:d};p&&(y={zIndex:d,position:"static"});let{direction:m}=this.context,b="left"===n||"right"===n,_="top"===n||"bottom"===n,E=Y()(sG,r,{[`${sG}-${n}`]:n,[`${sG}-popup`]:p,[`${sG}-horizontal`]:_,[`${sG}-rtl`]:"rtl"===m,[`${sG}-hidden`]:f&&this.state.displayNone}),w=Object.assign(Object.assign(Object.assign({},b?o?{width:o}:{}:{width:"100%"}),g),{visible:l,motion:!1,size:u,className:E,height:_?s||448:"100%",onClose:this.handleCancel}),x=this.props.visible||this.props.keepDOM||this.props.motion&&!this.state.displayNone;return W.createElement(nl,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?`${sG}-animation-mask_show`:`${sG}-animation-mask_hide`,onAnimationEnd:this.updateState},e=>{let{animationClassName:n,animationEventsNeedBind:r}=e;return W.createElement(nl,{motion:this.props.motion,animationState:l?"enter":"leave",startClassName:l?`${sG}-animation-content_show_${this.props.placement}`:`${sG}-animation-content_hide_${this.props.placement}`,onAnimationEnd:this.updateState},e=>{let{animationClassName:o,animationStyle:s,animationEventsNeedBind:a}=e;return x?W.createElement(nn,{getPopupContainer:p,style:y},W.createElement(sK,Object.assign({},w,{maskExtraProps:r,wrapperExtraProps:a,dialogClassName:o,maskClassName:n,maskStyle:Object.assign({},c),style:Object.assign(Object.assign({},s),h)}),i)):W.createElement(W.Fragment,null)})})}render(){let{zIndex:e,getPopupContainer:n,visible:r}=this.props;return this.renderContent()}}sY.contextType=Q,sY.propTypes={bodyStyle:X().object,headerStyle:X().object,children:X().node,className:X().string,closable:X().bool,disableScroll:X().bool,getPopupContainer:X().func,height:X().oneOfType([X().number,X().string]),mask:X().bool,maskClosable:X().bool,maskStyle:X().object,motion:X().oneOfType([X().bool,X().object,X().func]),onCancel:X().func,placement:X().oneOf(["top","right","bottom","left"]),size:X().oneOf(["small","medium","large"]),style:X().object,title:X().node,visible:X().bool,width:X().oneOfType([X().number,X().string]),zIndex:X().number,afterVisibleChange:X().func,closeOnEsc:X().bool,footer:X().node,keepDOM:X().bool,"aria-label":X().string},sY.__SemiComponentName__="SideSheet",sY.defaultProps=eI(sY.__SemiComponentName__,{visible:!1,motion:!0,mask:!0,placement:"right",closable:!0,footer:null,zIndex:1e3,maskClosable:!0,size:"small",disableScroll:!0,closeOnEsc:!1,afterVisibleChange:$(),keepDOM:!1});let sZ={PREFIX:`${q}-skeleton`};var sX=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let sQ=e=>n=>r=>W.createElement(n,Object.assign({type:e},r));class sq extends W.PureComponent{render(){let e=this.props,{prefixCls:n,className:r,type:i,size:o,shape:s}=e,a=sX(e,["prefixCls","className","type","size","shape"]),l=Y()(r,`${n}-${i}`,{[`${n}-${i}-${o}`]:"AVATAR"===i.toUpperCase()},{[`${n}-${i}-${s}`]:"AVATAR"===i.toUpperCase()});return W.createElement("div",Object.assign({className:l},a))}}sq.propTypes={type:X().string,prefixCls:X().string,style:X().object,className:X().string,size:X().oneOf(rb),shape:X().oneOf(rv)},sq.defaultProps={prefixCls:sZ.PREFIX,size:"medium",shape:"circle"};let sJ=sQ("avatar")(sq),s0=sQ("image")(sq),s1=sQ("title")(sq),s2=sQ("button")(sq);class s3 extends W.PureComponent{render(){let{prefixCls:e,className:n,style:r,rows:i}=this.props,o=Y()(n,`${e}-paragraph`);return W.createElement("ul",{className:o,style:r},[...Array(i)].map((e,n)=>W.createElement("li",{key:n})))}}s3.propTypes={rows:X().number,prefixCls:X().string,style:X().object,className:X().string},s3.defaultProps={prefixCls:sZ.PREFIX,rows:4};var s4=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let s5=sZ.PREFIX;class s6 extends W.PureComponent{render(){let e,n=this.props,{placeholder:r,active:i,children:o,className:s,loading:a,style:l}=n,h=s4(n,["placeholder","active","children","className","loading","style"]),c=Y()(s5,{[`${s5}-active`]:!!i},s);return a?W.createElement("div",Object.assign({className:c,style:l},h,{"x-semi-prop":"placeholder"}),r):o}}s6.Avatar=sJ,s6.Title=s1,s6.Button=s2,s6.Paragraph=s3,s6.Image=s0,s6.defaultProps={loading:!0},s6.propTypes={active:X().bool,placeholder:X().node,style:X().object,className:X().string,loading:X().bool,children:X().node};let s8=s6;class s9 extends e8{constructor(e){super(Object.assign(Object.assign({},s9.defaultAdapter),e)),this.handleMouseInSideChange=e=>{this._adapter.handleMouseInSideChange(e)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map(e=>{let{id:n}=e;return n}).includes(e)}addToast(e){let n=this._adapter.getState("list");n.push(e),this._adapter.updateToast(n,[],[])}updateToast(e,n){let r=this._adapter.getState("list"),i=(r=r.map(r=>r.id===e?Object.assign(Object.assign({},r),n):r)).filter(n=>n.id===e);this._adapter.updateToast(r,[],i)}removeToast(e){let n=this._adapter.getState("list"),r=[];n=n.filter(n=>n.id!==e||(r.push(n),!1)),this._adapter.updateToast(n,r,[])}destroyAll(){let e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}let s7=`${q}-toast`,ae={PREFIX:s7,WRAPPER:`${s7}-wrapper`,LIST:`${s7}-list`},at={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]};class an extends e8{constructor(e){super(Object.assign(Object.assign({},an.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){let e=this._adapter.getProp("duration");e&&U()(e)&&(this._timer=setTimeout(()=>{this.close()},1e3*e))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}let ar=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m10.23 2.4-8.7 16.67A2 2 0 0 0 3.3 22h17.4a2 2 0 0 0 1.77-2.93L13.77 2.4a2 2 0 0 0-3.54 0ZM13.14 14a1.15 1.15 0 0 1-2.28 0l-.58-4.03a1.73 1.73 0 1 1 3.44 0l-.58 4.03Zm.36 4.49a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",fill:"currentColor"}))},"alert_triangle"),ai=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm5.88-13.18-6.2 7.6a1.5 1.5 0 0 1-2.37 0l-3.5-4a1.5 1.5 0 1 1 2.37-1.84l2.3 2.46L15.5 8a1.5 1.5 0 1 1 2.38 1.82Z",fill:"currentColor"}))},"tick_circle");var ao=r(2753);let as=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-9.5 5.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM12 5a1.9 1.9 0 0 0-1.89 2l.3 5.5a1.59 1.59 0 0 0 3.17 0l.3-5.5c.07-1.09-.8-2-1.88-2Z",fill:"currentColor"}))},"alert_circle"),aa=ae.PREFIX;class al extends ej{constructor(e){super(e),this.toastEle=W.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new an(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){let{type:e,icon:n}=this.props,r={warning:W.createElement(ar,null),success:W.createElement(ai,null),info:W.createElement(ao.Z,null),error:W.createElement(as,null)}[e],i="large",o=Y()(`${aa}-icon`,`${aa}-icon-${e}`);return n?eO(n)?W.cloneElement(n,{size:i,className:`${aa}-icon`}):n:e&&r?W.cloneElement(r,{size:i,className:o}):null}render(){let{content:e,type:n,theme:r,showClose:i,textMaxWidth:o,className:s,style:a}=this.props,l=this.props.direction||this.context.direction,h=Y()(aa,s,{[`${aa}-${n}`]:!0,[`${aa}-${r}`]:"light"===r,[`${aa}-rtl`]:"rtl"===l}),c={};c.maxWidth=o;let u=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,d=W.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${n||"default"} type`,className:h,style:Object.assign(Object.assign({},a),{transform:`translate3d(0,0,${-10*u}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},W.createElement("div",{className:`${aa}-content`},this.renderIcon(),W.createElement("span",{className:`${aa}-content-text`,style:c,"x-semi-prop":"content"},e),i&&W.createElement("div",{className:`${aa}-close-button`},W.createElement(em,{onClick:e=>this.close(e),type:"tertiary",icon:W.createElement(rS,{"x-semi-prop":"icon"}),theme:"borderless",size:"small"}))));if(!this.props.stack)return d;{let e=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return W.createElement("div",{className:`${aa}-zero-height-wrapper`,style:{height:e}},d)}}}al.contextType=Q,al.propTypes={onClose:X().func,content:X().node,close:X().func,duration:X().number,theme:X().oneOf(at.themes),type:X().oneOf(at.types),textMaxWidth:X().oneOfType([X().string,X().number]),style:X().object,className:X().string,showClose:X().bool,stack:X().bool,stackExpanded:X().bool,icon:X().node,direction:X().oneOf(at.directions)},al.__SemiComponentName__="Toast",al.defaultProps=eI(al.__SemiComponentName__,{onClose:$(),content:"",close:$(),duration:3,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"});var ah=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let ac=W.forwardRef((e,n)=>{var{afterClose:r}=e,i=ah(e,["afterClose"]);let[o,s]=(0,W.useState)(!0);return W.useImperativeHandle(n,()=>({close:()=>{s(!1)}})),(0,W.useEffect)(()=>{o||r(i.id)},[o]),o?W.createElement(al,Object.assign({},i,{close:()=>{s(!1)}})):null}),au={motion:!0,zIndex:1010,duration:3};function ad(){let[e,n]=function(){let[e,n]=W.useState([]);return[e,function(e,r){return n(n=>[{element:e,config:r},...n]),e=>{n(n=>n.filter(n=>{let{config:r}=n;return r.id!==e}))}}]}(),r=(0,W.useRef)(new Map),i=e=>{let i,o=t7("semi_toast_"),s=Object.assign(Object.assign({},e),{id:o});return i=n(W.createElement(ac,Object.assign({},s,{key:o,afterClose:e=>i(e),ref:e=>{var n;r.current.set(o,{close:null!=(n=null==e?void 0:e.close)?n:$()})}})),Object.assign({},s)),o},o=e=>{var n;let{close:i}=null!=(n=r.current.get(e))?n:{};null==i||i()};return[{success:e=>i(Object.assign(Object.assign(Object.assign({},au),e),{type:"success"})),info:e=>i(Object.assign(Object.assign(Object.assign({},au),e),{type:"info"})),error:e=>i(Object.assign(Object.assign(Object.assign({},au),e),{type:"error"})),warning:e=>i(Object.assign(Object.assign(Object.assign({},au),e),{type:"warning"})),open:e=>i(Object.assign(Object.assign(Object.assign({},au),e),{type:"default"})),close:e=>o(e)},W.createElement(W.Fragment,null,Array.isArray(e)&&e.length?W.createElement(W.Fragment,null,e.map(e=>e.element)):null)]}let ap=()=>{var e;return(e=class e extends ej{constructor(e){super(e),this.stack=!1,this.innerWrapperRef=W.createRef(),this.handleMouseEnter=e=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=e=>{var n;this.stack&&(null==(n=this.foundation.getInputWrapperRect())?void 0:n.height)&&this.foundation.handleMouseInSideChange(!1)},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new s9(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(e,n,r)=>{this.setState({list:e,removedItems:n,updatedItems:r})},handleMouseInSideChange:e=>{this.setState({mouseInSide:e})},getInputWrapperRect:()=>{var e;return null==(e=this.innerWrapperRef.current)?void 0:e.getBoundingClientRect()}})}static create(n){var r;let i=null!=(r=n.id)?r:t7("toast");if(e.ref){let r=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map(e=>{e in n&&(r.style[e]="number"==typeof n[e]?`${n[e]}px`:n[e])}),!!n.stack!==e.ref.stack&&(e.ref.stack=!!n.stack),e.ref.has(i)?e.ref.update(i,Object.assign(Object.assign({},n),{id:i})):e.ref.add(Object.assign(Object.assign({},n),{id:i}))}else{let r=document.createElement("div");this.wrapperId||(this.wrapperId=t7("toast-wrapper").slice(0,26)),r.className=ae.WRAPPER,r.id=this.wrapperId,r.style.zIndex=String("number"==typeof n.zIndex?n.zIndex:e.defaultOpts.zIndex),["top","left","bottom","right"].map(i=>{if(i in e.defaultOpts||i in n){let o=n[i]?n[i]:e.defaultOpts[i];r.style[i]="number"==typeof o?`${o}px`:o}}),e.defaultOpts.getPopupContainer?e.defaultOpts.getPopupContainer().appendChild(r):document.body.appendChild(r),eQ.render(W.createElement(e,{ref:n=>e.ref=n}),r,()=>{e.ref.add(Object.assign(Object.assign({},n),{id:i})),e.ref.stack=!!n.stack})}return i}static close(n){e.ref&&e.ref.remove(n)}static destroyAll(){if(e.ref){e.ref.destroyAll();let n=document.querySelector(`#${this.wrapperId}`);eQ.unmountComponentAtNode(n),n&&n.parentNode.removeChild(n),e.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"info"}))}static warning(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"warning"}))}static error(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"error"}))}static success(n){return"string"==typeof n&&(n={content:n}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),n),{type:"success"}))}static config(n){["top","left","bottom","right"].forEach(r=>{r in n&&(e.defaultOpts[r]=n[r])}),"string"==typeof n.theme&&at.themes.includes(n.theme)&&(e.defaultOpts.theme=n.theme),"number"==typeof n.zIndex&&(e.defaultOpts.zIndex=n.zIndex),"number"==typeof n.duration&&(e.defaultOpts.duration=n.duration),"function"==typeof n.getPopupContainer&&(e.defaultOpts.getPopupContainer=n.getPopupContainer)}has(e){return this.foundation.hasToast(e)}add(e){return this.foundation.addToast(e)}update(e,n){return this.foundation.updateToast(e,n)}remove(e){return this.foundation.removeToast(e)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:e}=this.state,{removedItems:n,updatedItems:r}=this.state;e=Array.from(new Set([...e,...n]));let i=r.map(e=>{let{id:n}=e;return n}),o=e=>{var n;(null==(n=null==e?void 0:e.foundation)?void 0:n._id)&&i.includes(e.foundation._id)&&e.foundation.restartCloseTimer()};return W.createElement(W.Fragment,null,W.createElement("div",{className:Y()({[`${ae.PREFIX}-innerWrapper`]:!0,[`${ae.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e.map((r,i)=>{let s=void 0!==n.find(e=>e.id===r.id);return W.createElement(nl,{key:r.id,motion:r.motion,animationState:s?"leave":"enter",startClassName:s?`${ae.PREFIX}-animation-hide`:`${ae.PREFIX}-animation-show`},n=>{let{animationClassName:a,animationEventsNeedBind:l,isAnimating:h}=n;return s&&!h?null:W.createElement(al,Object.assign({},r,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:e.length,index:i},className:Y()({[r.className]:!!r.className,[a]:!0})},l,{style:Object.assign({},r.style),close:e=>this.remove(e),ref:o}))})})))}}).defaultOpts={motion:!0,zIndex:1010,content:""},e.propTypes={content:X().node,duration:X().number,onClose:X().func,icon:X().node,direction:X().oneOf(at.directions),stack:X().bool},e.defaultProps={},e},af=(class{static create(e){let n=ap();return n.useToast=ad,e&&n.config(e),n}}).create(),ag={PREFIX:`${q}-tree-select`,PREFIX_TREE:`${q}-tree`,PREFIX_OPTION:`${q}-tree-select-option`},ay={SIZE_SET:["small","large","default"],SEARCH_POSITION_DROPDOWN:"dropdown",SEARCH_POSITION_TRIGGER:"trigger",STATUS:["default","error","warning","success"]};class am extends e8{constructor(e){super(Object.assign({},e)),this.handleKeyDown=e=>{e.key===tk&&this.getState("isOpen")&&this.close(e)},this._registerClickOutsideHandler=()=>{this._adapter.registerClickOutsideHandler(e=>{this.handlerTriggerBlur(e),this.close(e)})},this.clearInputValue=()=>{let{inputValue:e}=this.getStates();e&&this._adapter.updateInputValue("")},this.onClickSingleTriggerSearchItem=e=>{this.focusInput(!0)}}init(){let{searchAutoFocus:e,searchPosition:n,filterTreeNode:r}=this.getProps(),i=n===ay.SEARCH_POSITION_TRIGGER&&r,o=e&&i;this._setDropdownWidth();let s=!this._isDisabled();(this.getProp("defaultOpen")||o)&&s&&(this.open(),this._registerClickOutsideHandler()),o&&s&&this.handleTriggerFocus(null)}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){let e,{style:n,dropdownMatchSelectWidth:r}=this.getProps();r&&(e=n&&U()(n.width)||n&&H()(n.width)&&!n.width.includes("%")?n.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(e))}_isMultiple(){return this.getProp("multiple")}_isAnimated(){return this.getProp("motionExpand")}_isDisabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getProp("disabled")||e.disabled}_isExpandControlled(){return this.getProp("expandedKeys")}_isSelectToClose(){return!this.getProp("expandAction")}_isLoadControlled(){return this.getProp("loadedKeys")}_showFilteredOnly(){let{inputValue:e}=this.getStates(),{showFilteredOnly:n}=this.getProps();return!!e&&n}findDataForValue(e){let{value:n,defaultValue:r,keyMaps:i}=this.getProps(),o=eb()(i,"value","value"),s=eb()(i,"key","key"),a=[];return n?a=Array.isArray(n)?n:[n]:r&&(a=Array.isArray(r)?r:[r]),a.find(n=>n[o]===e||n[s]===e)}constructDataForValue(e){let{treeNodeLabelProp:n,keyMaps:r}=this.getProps();return{[eb()(r,"key","key")]:e,[eb()(r,"label",n)]:e}}getDataForKeyNotInKeyEntities(e){let{onChangeWithObject:n}=this.getProps();return n?this.findDataForValue(e):this.constructDataForValue(e)}getTreeNodeProps(e){let{expandedKeys:n=new Set([]),selectedKeys:r=[],checkedKeys:i=new Set([]),halfCheckedKeys:o=new Set([]),realCheckedKeys:s=new Set([]),keyEntities:a={},filteredKeys:l=new Set([]),inputValue:h="",loadedKeys:c,loadingKeys:u,filteredExpandedKeys:d=new Set([]),disabledKeys:p=new Set([])}=this.getStates(),{treeNodeFilterProp:f,checkRelation:g}=this.getProps(),y=a[e];if(!y)return null;let m=!1,b=!1;"related"===g?(m=i.has(e),b=o.has(e)):"unRelated"===g&&(m=s.has(e),b=!1);let _={eventKey:e,expanded:h?d.has(e):n.has(e),selected:r.includes(e),checked:m,halfChecked:b,pos:String(y?y.pos:""),level:y.level,filtered:l.has(e),keyword:h,treeNodeFilterProp:f,loading:u.has(e)&&!c.has(e),loaded:c.has(e)};return this.getProp("disableStrictly")&&p.has(e)&&(_.disabled=!0),_}handleNodeLoad(e,n,r,i){let{loadData:o}=this.getProps(),{key:s}=r;return!o||e.has(s)||n.has(s)?{}:(o(r).then(()=>{let e=new Set(this.getState("loadedKeys")),n=new Set(this.getState("loadingKeys")),o=e.add(s),a=new Set([...n]);a.delete(s),this._adapter.notifyLoad(o,r),this._isLoadControlled()||this._adapter.updateState({loadedKeys:o}),this._adapter.setState({loadingKeys:a}),i()}),{loadingKeys:n.add(s)})}focusInput(e){this._adapter.updateInputFocus(e)}_notifyMultipleChange(e,n){let{keyEntities:r}=this.getStates(),{leafOnly:i,checkRelation:o,keyMaps:s,autoMergeValue:a}=this.getProps(),l=[];"related"===o?l=a?tm(e,r,i,!0):e:"unRelated"===o&&(l=e);let h=l.map(e=>r[e]&&r[e].key===e?r[e].data:this.getDataForKeyNotInKeyEntities(e));if(this.getProp("onChangeWithObject"))this._adapter.notifyChangeWithObject(h,n);else{let e=tE(h,s);this._adapter.notifyChange(e,h,n)}}_notifyChange(e,n){let{keyEntities:r}=this.getStates(),{keyMaps:i}=this.getProps();if(this._isMultiple()&&Array.isArray(e))this._notifyMultipleChange(e,n);else{let o=e3()(e)?e:r[e].data,s=e3()(e)?e:tE(o,i);this.getProp("onChangeWithObject")?this._adapter.notifyChangeWithObject(o,n):this._adapter.notifyChange(s,o,n)}}_notifyFocus(e){this._adapter.notifyFocus(e)}handleTriggerFocus(e){this._adapter.updateIsFocus(!0),this._notifyFocus(e),this._registerClickOutsideHandler()}_notifyBlur(e){this._adapter.notifyBlur(e)}handlerTriggerBlur(e){this.getState("isFocus")&&(this._adapter.updateIsFocus(!1),this._notifyBlur(e),this._adapter.unregisterClickOutsideHandler())}toggleHoverState(e){this._adapter.toggleHovering(e)}open(){this._adapter.openMenu(),this._setDropdownWidth()}close(e){this._adapter.closeMenu(),this.getProp("motionExpand")&&this._adapter.updateState({motionKeys:new Set([])})}handleClick(e){let n=this._isDisabled(),{isOpen:r,inputValue:i,isFocus:o}=this.getStates(),{searchPosition:s,clickTriggerToHide:a}=this.getProps();if(!n)if(o||this.handleTriggerFocus(e),r){if("trigger"===s&&i)return;a&&this.close(e)}else this.open()}handleSelectionEnterPress(e){tA(e)&&this.handleClick(e)}handleClear(e){let{searchPosition:n,filterTreeNode:r}=this.getProps(),{inputValue:i,selectedKeys:o}=this.getStates(),s=this._isMultiple(),a=this._isControlledComponent();this._notifyChange(s?[]:void 0,e),a||(this._adapter.rePositionDropdown(),this._adapter.updateState({selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([])})),r&&n===ay.SEARCH_POSITION_TRIGGER&&""!==i&&(eW()(o)?this.handleInputChange(""):this.clearInput()),this._adapter.notifyClear(e)}handleClearEnterPress(e){tA(e)&&this.handleClear(e)}removeTag(e){let{disableStrictly:n,checkRelation:r,keyMaps:i}=this.getProps(),{keyEntities:o,disabledKeys:s,realCheckedKeys:a}=this.getStates(),l=o[e]&&o[e].key===e?o[e].data:this.getDataForKeyNotInKeyEntities(e);if(!(l[eb()(i,"disabled","disabled")]||n&&s.has(e))){if("unRelated"===r){let n=new Set(a);n.delete(e),this._notifyChange([...n],null),this._isControlledComponent()||(this._adapter.updateState({realCheckedKeys:n}),this._adapter.rePositionDropdown())}else if("related"===r){let{checkedKeys:n,halfCheckedKeys:r}=this.calcCheckedKeys(e,!1);this._notifyChange([...n],null),this._isControlledComponent()||(this._adapter.updateState({checkedKeys:n,halfCheckedKeys:r}),this._adapter.rePositionDropdown())}this._adapter.notifySelect(e,!1,l),this._adapter.rePositionDropdown()}}clearInput(){let{flattenNodes:e,expandedKeys:n,selectedKeys:r,keyEntities:i,treeData:o}=this.getStates(),{keyMaps:s}=this.getProps(),a=new Set(n);this._isExpandControlled();let l=tu(r,i,!1);l.forEach(e=>a.add(e));let h=ta(o,a,s);this._adapter.updateState({expandedKeys:a,flattenNodes:h,inputValue:"",motionKeys:new Set([]),filteredKeys:new Set([]),filteredExpandedKeys:new Set(l),filteredShownKeys:new Set([])}),this._adapter.rePositionDropdown()}handleInputChange(e){this._adapter.updateInputValue(e);let{flattenNodes:n,expandedKeys:r,selectedKeys:i,keyEntities:o,treeData:s}=this.getStates(),{showFilteredOnly:a,filterTreeNode:l,treeNodeFilterProp:h,keyMaps:c}=this.getProps(),u="label"!==h?h:eb()(c,"label","label"),d=new Set(r),p=[],f=[],g=[],y=[],m=new Set([]);if(e){let n=Object.values(o).filter(n=>{let{data:r}=n;return ty(e,r,l,u)});p=n.map(e=>e.data),g=tu(f=n.map(e=>e.key),o,!1),m=new Set([...th(f,o,!0),...g]),y=ta(s,new Set(g),c,a&&m)}else(g=tu(i,o,!1)).forEach(e=>d.add(e)),y=ta(s,d,c);let b=new Set(g);this._adapter.notifySearch(e,Array.from(b),p),this._adapter.updateState({expandedKeys:d,flattenNodes:y,motionKeys:new Set([]),filteredKeys:new Set(f),filteredExpandedKeys:b,filteredShownKeys:m}),this._adapter.rePositionDropdown()}handleNodeSelect(e,n){this._isDisabled(n)||(this._isMultiple()?this.handleMultipleSelect(e,n):this.handleSingleSelect(e,n))}handleSingleSelect(e,n){let r=[...this.getState("selectedKeys")],{clickToHide:i}=this.getProps(),{selected:o,eventKey:s,data:a}=n;this._adapter.notifySelect(s,!0,a),r.includes(s)||o||(r=[s],this._notifyChange(s,e),this._isControlledComponent()||this._adapter.updateState({selectedKeys:r})),i&&(this._isSelectToClose()||!a.children)&&(this.close(e),this.handlerTriggerBlur(e))}calcCheckedKeys(e,n){let{keyEntities:r}=this.getStates(),i=new Set(this.getState("checkedKeys")),o=new Set(this.getState("halfCheckedKeys"));return n?tb(e,r,i,o):t_(e,r,i,o)}handleMultipleSelect(e,n){let{searchPosition:r,disableStrictly:i,checkRelation:o}=this.getProps(),{inputValue:s,realCheckedKeys:a}=this.getStates(),{checked:l,eventKey:h,data:c}=n;if("related"===o){let n=i?this.calcCheckedStatus(!l,h):!l,{checkedKeys:r,halfCheckedKeys:o}=i?this.calcNonDisabledCheckedKeys(h,n):this.calcCheckedKeys(h,n);this._adapter.notifySelect(h,n,c),this._notifyChange([...r],e),this._isControlledComponent()||(this._adapter.updateState({checkedKeys:r,halfCheckedKeys:o}),this._adapter.rePositionDropdown())}else if("unRelated"===o){let n,r=new Set(a);a.has(h)?(r.delete(h),n=!1):(r.add(h),n=!0),this._adapter.notifySelect(h,n,c),this._notifyChange([...r],e),this._isControlledComponent()||(this._adapter.updateState({realCheckedKeys:r}),this._adapter.rePositionDropdown())}r===ay.SEARCH_POSITION_TRIGGER&&""!==s&&this._adapter.updateState({inputValue:""})}calcNonDisabledCheckedKeys(e,n){let{keyEntities:r,disabledKeys:i}=this.getStates(),o=new Set(this.getState("checkedKeys")),s=tm(th([e],r,!1),r,!0);if(!s.some(e=>i.has(e)))return this.calcCheckedKeys(e,n);let a=s.filter(e=>!i.has(e));return td(n?[...a,...o]:e5()(tm([...o],r,!0,!0),a),r)}calcCheckedStatus(e,n){if(!e)return e;let{checkedKeys:r,keyEntities:i,disabledKeys:o}=this.getStates(),s=tm(th([n],i,!1),i,!0);return s.some(e=>o.has(e))?!s.filter(e=>!o.has(e)).every(e=>r.has(e)):e}handleNodeExpandInSearch(e,n){let{treeData:r,filteredShownKeys:i,keyEntities:o}=this.getStates(),{keyMaps:s}=this.getProps(),a=this._showFilteredOnly(),l=new Set(this.getState("filteredExpandedKeys")),h="show",{eventKey:c,expanded:u,data:d}=n;if(u?l.has(c)&&(l.delete(c),h="hide"):l.add(c),this._adapter.cacheFlattenNodes("hide"===h&&this._isAnimated()),!this._isExpandControlled()){let e=ta(r,l,s,a&&i),n=this._isAnimated()?tv(c,l,o):[],u={filteredExpandedKeys:l,flattenNodes:e,motionKeys:new Set(n),motionType:h};this._adapter.updateState(u)}this._adapter.notifyExpand(l,{expanded:!u,node:d})}handleNodeExpand(e,n){let{loadData:r,keyMaps:i}=this.getProps(),{inputValue:o,keyEntities:s}=this.getStates();if(!r&&(!n.children||!n.children.length))return;let a=this._isExpandControlled();if(o)return void this.handleNodeExpandInSearch(e,n);let{treeData:l}=this.getStates(),h=new Set(this.getState("expandedKeys")),c="show",{eventKey:u,expanded:d,data:p}=n;if(d?h.has(u)&&(h.delete(u),c="hide"):h.add(u),this._adapter.cacheFlattenNodes("hide"===c&&this._isAnimated()),!a){let e=ta(l,h,i),n=this._isAnimated()?tv(u,h,s):[],r={expandedKeys:h,flattenNodes:e,motionKeys:new Set(n),motionType:c};this._adapter.updateState(r)}this._adapter.notifyExpand(h,{expanded:!d,node:p})}getRenderTextInSingle(){let e,{renderSelectedItem:n,treeNodeLabelProp:r,keyMaps:i}=this.getProps(),{selectedKeys:o,keyEntities:s}=this.getStates(),a=eb()(i,"label",r),l=eK()(n)?n:e=>eb()(e,a,null);if(o.length){let n=o[0];e=s[n]&&s[n].key===n?s[n].data:this.getDataForKeyNotInKeyEntities(n)}return e?l(e):null}handleInputTriggerBlur(){this._adapter.updateState({inputTriggerFocus:!1})}handleInputTriggerFocus(){this.clearInput(),this._adapter.updateState({inputTriggerFocus:!0})}setLoadKeys(e,n){this._adapter.updateLoadKeys(e,n)}handlePopoverVisibleChange(e){let{filterTreeNode:n,searchAutoFocus:r,searchPosition:i}=this.getProps();!1===e&&n&&this.clearInputValue(),n&&i===ay.SEARCH_POSITION_DROPDOWN&&e&&r&&this.focusInput(!0)}handleAfterClose(){let{filterTreeNode:e}=this.getProps();e&&this.clearInput()}}let av=rf.PREFIX;class ab extends W.PureComponent{renderNTag(e,n){let{size:r,showPopover:i,popoverProps:o,onPlusNMouseEnter:s}=this.props,a=W.createElement(rI,{closable:!1,size:r,color:"grey",style:{backgroundColor:"transparent"},key:"_+n",onMouseEnter:s},"+",e);return i&&(a=W.createElement(n_,Object.assign({showArrow:!0,content:n,trigger:"hover",position:"top",autoAdjustOverflow:!0,className:`${av}-rest-group-popover`},o,{key:"_+n_Popover"}),a)),a}renderMergeTags(e){let{maxTagCount:n,tagList:r,restCount:i}=this.props,o=i||r.length-n,s=e,a=e.slice(0,n),l=e.slice(n),h=null;return o>0&&(h=this.renderNTag(o,l),a.push(h),s=a),s}renderAllTags(){let{tagList:e,size:n,mode:r,avatarShape:i,onTagClose:o}=this.props;return e.map(e=>{if("custom"===r)return e;let s=Object.assign({},e);return s.size||(s.size=n),s.avatarShape||(s.avatarShape=i),s.tagKey||("string"==typeof s.children||"number"==typeof s.children?s.tagKey=s.children:s.tagKey=Math.random()),W.createElement(rI,Object.assign({},s,{key:s.tagKey,onClose:(e,n,r)=>{s.onClose&&s.onClose(e,n,r),o&&o(e,n,r)}}))})}render(){let{style:e,className:n,maxTagCount:r,size:i}=this.props,o=Y()({[`${av}-group`]:!0,[`${av}-group-max`]:r,[`${av}-group-small`]:"small"===i,[`${av}-group-large`]:"large"===i},n),s=this.renderAllTags(),a=void 0===r?s:this.renderMergeTags(s);return W.createElement("div",{style:e,className:o},a)}}ab.defaultProps={style:{},className:"",size:rg[0],avatarShape:"square",onTagClose:()=>void 0,onPlusNMouseEnter:()=>void 0},ab.propTypes={children:X().node,style:X().object,className:X().string,maxTagCount:X().number,restCount:X().number,tagList:X().array,size:X().oneOf(rg),mode:X().string,onTagClose:X().func,showPopover:X().bool,popoverProps:X().object,avatarShape:X().oneOf(ry)};let a_={PREFIX:`${q}-tree`,PREFIX_OPTION:`${q}-tree-option`},aE=a_.PREFIX;class aw extends W.PureComponent{constructor(e){super(e),this._onResize=e=>{let n=e&&e[1]&&e[1].target;if(n){let e=eb()(n,"offsetHeight")||0,r=window.getComputedStyle(n)||{},i=parseInt(eb()(r,"paddingTop"),10)||0,o=parseInt(eb()(r,"paddingBottom"),10)||0;this.state.height!==e-i-o&&this.setState({height:e-i-o})}},this.state={height:this.props.defaultHeight||0}}componentDidMount(){let{height:e}=this.state;if("number"==typeof e)return}render(){let{children:e,defaultWidth:n,defaultHeight:r}=this.props,{height:i}=this.state,o=!1;return(0===i||"number"!=typeof i)&&(o=!0),W.createElement(r0,{observeParent:!0,onResize:this._onResize},W.createElement("div",{style:{height:r,overflow:"visible"},className:`${aE}-auto-wrapper`},!o&&e({height:i,width:n})))}}aw.propTypes={defaultHeight:X().oneOfType([X().number,X().string]),defaultWidth:X().oneOfType([X().number,X().string])},aw.defaultProps={defaultHeight:"100%",defaultWidth:"100%"};let ax=W.createContext(null);var aC=r(7837),aS=r.n(aC);let aD=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{d:"m20.56 9.66-7.8 8.97a1 1 0 0 1-1.51 0L3.44 9.66A1 1 0 0 1 4.19 8h15.62a1 1 0 0 1 .75 1.66Z",fill:"currentColor"}))},"tree_triangle_down"),aN=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2a1 1 0 0 0-1-1H6a2 2 0 0 0-2 2v18c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V10a1 1 0 0 0-1-1h-5a2 2 0 0 1-2-2V2ZM7 8a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2H8a1 1 0 0 1-1-1Zm0 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H8a1 1 0 0 1-1-1Zm1 4a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2H8Zm11.07-9.5H14.5a1 1 0 0 1-1-1V1.93a.8.8 0 0 1 1.37-.56l4.76 4.76a.8.8 0 0 1-.56 1.37Z",fill:"currentColor"}))},"file"),aO=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5a3 3 0 0 1 3-3h3.3a2 2 0 0 1 1.25.44l1.13.9a3 3 0 0 0 1.87.66H18c2 0 3 2 3 4H7.53A2 2 0 0 0 5.6 9.48L2.57 20.76C2.21 20.26 2 19.66 2 19V5Zm20.17 5H9.5a2 2 0 0 0-1.92 1.44l-2.7 9.28A1 1 0 0 0 5.82 22H18.5a2 2 0 0 0 1.92-1.44l2.7-9.28a1 1 0 0 0-.95-1.28Z",fill:"currentColor"}))},"folder_open"),aM=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{d:"M5 2a3 3 0 0 0-3 3v3h20c0-2-1-4-3-4h-6.45a3 3 0 0 1-1.87-.66l-1.13-.9A2 2 0 0 0 8.3 2H5Z",fill:"currentColor"}),W.createElement("path",{d:"M22 10H2v9a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-9Z",fill:"currentColor"}))},"folder"),aI={PREFIX:`${q}-highlight`},aT=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");class ak extends e8{constructor(e){super(Object.assign({},e)),this.findAll=e=>{let{autoEscape:n=!0,caseSensitive:r=!1,searchWords:i,sourceString:o}=e;H()(i)&&(i=[i]);let s=this.findChunks({autoEscape:n,caseSensitive:r,searchWords:i,sourceString:o}),a=this.combineChunks({chunks:s});return this.fillInChunks({chunksToHighlight:a,totalLength:o?o.length:0})},this.findChunks=e=>{let{autoEscape:n,caseSensitive:r,searchWords:i,sourceString:o}=e;return i.map(e=>"string"==typeof e?{text:e}:e).filter(e=>e.text).reduce((e,i)=>{let s,a=i.text;n&&(a=aT(a));let l=new RegExp(a,r?"g":"gi");for(;s=l.exec(o);){let n=s.index,r=l.lastIndex;r>n&&e.push({highlight:!0,start:n,end:r,className:i.className,style:i.style}),s.index===l.lastIndex&&l.lastIndex++}return e},[])},this.combineChunks=e=>{let{chunks:n}=e;return n.sort((e,n)=>e.start-n.start).reduce((e,n)=>{if(0===e.length)return[n];{let r=e.pop();if(n.start<=r.end){let i=Math.max(r.end,n.end);e.push({highlight:!0,start:r.start,end:i,className:r.className||n.className,style:Object.assign(Object.assign({},r.style),n.style)})}else e.push(r,n);return e}},[])},this.fillInChunks=e=>{let{chunksToHighlight:n,totalLength:r}=e,i=[],o=(e,n,r,o,s)=>{n-e>0&&i.push({start:e,end:n,highlight:r,className:o,style:s})};if(0===n.length)o(0,r,!1);else{let e=0;n.forEach(n=>{o(e,n.start,!1),o(n.start,n.end,!0,n.className,n.style),e=n.end}),o(e,r,!1)}return i}}}let aP=aI.PREFIX;class aA extends W.PureComponent{constructor(){super(...arguments),this.getHighLightTextHTML=e=>{let{sourceString:n="",searchWords:r=[],option:i={autoEscape:!0,caseSensitive:!1}}=e,o=new ak().findAll(Object.assign({sourceString:n,searchWords:r},i)),s=i.highlightTag||"mark",a=i.highlightClassName||"",l=i.highlightStyle||{};return o.map((e,r)=>{let{end:i,start:o,highlight:h,style:c,className:u}=e,d=n.substr(o,i-o);return h?W.createElement(s,{style:Object.assign(Object.assign({},l),c),className:`${a} ${u||""}`.trim(),key:d+r},d):d})}}render(){let{searchWords:e,sourceString:n,component:r,highlightClassName:i,highlightStyle:o,caseSensitive:s,autoEscape:a}=this.props,l=Y()({[`${aP}-tag`]:!0},i);return this.getHighLightTextHTML({sourceString:n,searchWords:e,option:{highlightTag:r,highlightClassName:l,highlightStyle:o,caseSensitive:s,autoEscape:a}})}}aA.propTypes={style:X().object,className:X().string,autoEscape:X().bool,caseSensitive:X().bool,sourceString:X().string,searchWords:X().arrayOf(X().string),highlightStyle:X().object,highlightClassName:X().string,component:X().string},aA.defaultProps={component:"mark",autoEscape:!0,caseSensitive:!1,sourceString:""};let aL=W.memo(e=>{let{prefixcls:n,level:r,isEnd:i,showLine:o}=e,s=`${n}-indent-unit`,a=[];for(let e=0;e<r;e+=1)a.push(W.createElement("span",{key:e,className:Y()(s,{[`${s}-end`]:i[e]})}));return W.createElement("span",{"aria-hidden":"true",className:Y()(`${n}-indent`,{[`${n}-indent-show-line`]:o})},a)});var aj=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let aR=a_.PREFIX_OPTION;class az extends W.PureComponent{constructor(e){super(e),this.onSelect=e=>{let{onNodeSelect:n}=this.context;n(e,this.props)},this.onExpand=e=>{let{onNodeExpand:n}=this.context;e&&e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n(e,this.props)},this.onCheck=e=>{var n,r;if(this.isDisabled())return;let{onNodeCheck:i}=this.context;e.stopPropagation(),null==(r=null==(n=e.nativeEvent)?void 0:n.stopImmediatePropagation)||r.call(n),i(e,this.props)},this.handleCheckEnterPress=e=>{tA(e)&&this.onCheck(e)},this.onContextMenu=e=>{let{onNodeRightClick:n}=this.context;n(e,this.props)},this.onClick=e=>{let{expandAction:n}=this.context;if("doubleClick"===n)return void this.debounceSelect(e);this.onSelect(e),"click"===n&&this.onExpand(e)},this.handleliEnterPress=e=>{tA(e)&&this.onClick(e)},this.onDoubleClick=e=>{let{expandAction:n,onNodeDoubleClick:r}=this.context;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),eK()(r)&&r(e,this.props),"doubleClick"===n&&this.onExpand(e)},this.onDragStart=e=>{let{onNodeDragStart:n}=this.context;e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}));try{e.dataTransfer.setData("text/plain","")}catch(e){}},this.onDragEnter=e=>{let{onNodeDragEnter:n}=this.context;e.preventDefault(),e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragOver=e=>{let{onNodeDragOver:n}=this.context;e.preventDefault(),e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragLeave=e=>{let{onNodeDragLeave:n}=this.context;e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDragEnd=e=>{let{onNodeDragEnd:n}=this.context;e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.onDrop=e=>{let{onNodeDrop:n}=this.context;e.preventDefault(),e.stopPropagation(),n(e,Object.assign(Object.assign({},this.props),{nodeInstance:this.refNode}))},this.getNodeChildren=()=>{let{children:e}=this.props;return e||[]},this.isLeaf=()=>{let{isLeaf:e,loaded:n}=this.props,{loadData:r}=this.context,i=0!==this.getNodeChildren().length;return!1!==e&&(e||!r&&!i||r&&n&&!i)},this.isDisabled=()=>{let{disabled:e}=this.props,{treeDisabled:n}=this.context;return!1!==e&&!!(n||e)},this.renderSwitcher=()=>this.isLeaf()?W.createElement("span",{className:Y()(`${aR}-switcher`)},W.createElement("span",{className:`${aR}-switcher-leaf-line`})):null,this.renderRealLabel=()=>{let{renderLabel:e}=this.context,{label:n,keyword:r,data:i,filtered:o,treeNodeFilterProp:s}=this.props;return eK()(e)?e(n,i,r):H()(n)&&o&&r?W.createElement(aA,{highlightClassName:`${aR}-highlight`,component:"span",sourceString:n,searchWords:[r]}):n},this.setRef=e=>{this.refNode=e},this.state={},this.debounceSelect=aS()(this.onSelect,500,{leading:!0,trailing:!1})}renderArrow(){var e,n;let r=!this.isLeaf(),{loading:i,expanded:o,showLine:s,expandIcon:a}=this.props;if(i)return W.createElement(n$,{wrapperClassName:`${aR}-spin-icon`});if(r){if(a)if("function"==typeof a)return a({onClick:this.onExpand,className:`${aR}-expand-icon`,expanded:o});else{if(!W.isValidElement(a))return a;let r=Y()(`${aR}-expand-icon`,{[null==(e=null==a?void 0:a.props)?void 0:e.className]:null==(n=null==a?void 0:a.props)?void 0:n.className});return W.cloneElement(a,{onClick:this.onExpand,className:r})}return W.createElement(aD,{role:"button","aria-label":`${o?"Expand":"Collapse"} the tree item`,className:`${aR}-expand-icon`,size:"small",onClick:this.onExpand})}return s?this.renderSwitcher():W.createElement("span",{className:`${aR}-empty-icon`})}renderCheckbox(){let{checked:e,halfChecked:n,eventKey:r}=this.props,i=this.isDisabled();return W.createElement("div",{role:"none",onClick:this.onCheck,onKeyPress:this.handleCheckEnterPress},W.createElement(nJ,{"aria-label":"Toggle the checked state of checkbox",value:r,indeterminate:n,checked:e,disabled:!!i}))}renderIcon(){let{directory:e,treeIcon:n}=this.context,{expanded:r,icon:i,data:o}=this.props;return i?i:n?"function"==typeof n?n(this.props):n:e?this.isLeaf()?W.createElement(aN,{className:`${aR}-item-icon`}):r?W.createElement(aO,{className:`${aR}-item-icon`}):W.createElement(aM,{className:`${aR}-item-icon`}):null}renderEmptyNode(){let{emptyContent:e}=this.props,n=Y()(aR,{[`${aR}-empty`]:!0});return W.createElement("ul",{className:n},W.createElement("li",{className:`${aR}-label ${aR}-label-empty`,"x-semi-prop":"emptyContent"},e))}render(){let e=this.props,{eventKey:n,expanded:r,selected:i,checked:o,halfChecked:s,loading:a,active:l,level:h,empty:c,filtered:u,treeNodeFilterProp:d,display:p,style:f,isEnd:g,showLine:y}=e,m=aj(e,["eventKey","expanded","selected","checked","halfChecked","loading","active","level","empty","filtered","treeNodeFilterProp","display","style","isEnd","showLine"]);if(c)return this.renderEmptyNode();let{multiple:b,draggable:_,renderFullLabel:E,dragOverNodeKey:w,dropPosition:x,labelEllipsis:C}=this.context,S=g[g.length-1],D=this.isDisabled(),N=w===n&&-1===x,O=w===n&&1===x,M=Y()(aR,{[`${aR}-level-${h+1}`]:!0,[`${aR}-fullLabel-level-${h+1}`]:E,[`${aR}-collapsed`]:!r,[`${aR}-disabled`]:!!D,[`${aR}-selected`]:i,[`${aR}-active`]:!b&&l,[`${aR}-ellipsis`]:C,[`${aR}-drag-over`]:!D&&w===n&&0===x,[`${aR}-draggable`]:!D&&_&&!E,[`${aR}-fullLabel-draggable`]:!D&&_&&E,[`${aR}-fullLabel-drag-over-gap-top`]:!D&&N&&E,[`${aR}-fullLabel-drag-over-gap-bottom`]:!D&&O&&E,[`${aR}-tree-node-last-leaf`]:S}),I={onClick:this.onClick,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,className:M,onExpand:this.onExpand,data:m.data,level:h,onCheck:this.onCheck,style:f,expandIcon:this.renderArrow(),checkStatus:{checked:o,halfChecked:s},expandStatus:{expanded:r,loading:a},filtered:u,searchWord:m.keyword},T={onDoubleClick:this.onDoubleClick,onDragStart:_?this.onDragStart:void 0,onDragEnter:_?this.onDragEnter:void 0,onDragOver:_?this.onDragOver:void 0,onDragLeave:_?this.onDragLeave:void 0,onDrop:_?this.onDrop:void 0,onDragEnd:_?this.onDragEnd:void 0,draggable:!D&&_||void 0};if(E){let e=E(Object.assign({},I));return _?W.cloneElement(e,Object.assign({ref:this.setRef},T)):eW()(f)?e:W.cloneElement(e,{style:Object.assign(Object.assign({},eb()(e,["props","style"])),f)})}let k=Y()(`${aR}-label`,{[`${aR}-drag-over-gap-top`]:!D&&N,[`${aR}-drag-over-gap-bottom`]:!D&&O}),P=eb()(m,["data","children","length"]),A=H()(m.pos)?Number(m.pos.split("-")[h+1])+1:1;return W.createElement("li",Object.assign({className:M,role:"treeitem","aria-disabled":D,"aria-checked":o,"aria-selected":i,"aria-setsize":P,"aria-posinset":A,"aria-expanded":r,"aria-level":h+1,"data-key":n,onClick:this.onClick,onKeyPress:this.handleliEnterPress,onContextMenu:this.onContextMenu,onDoubleClick:this.onDoubleClick,ref:this.setRef,style:f},T),W.createElement(aL,{showLine:y,prefixcls:aR,level:h,isEnd:g}),this.renderArrow(),W.createElement("span",{className:k},b?this.renderCheckbox():null,this.renderIcon(),W.createElement("span",{className:`${aR}-label-text`},this.renderRealLabel())))}}az.contextType=ax,az.propTypes={expanded:X().bool,selected:X().bool,checked:X().bool,halfChecked:X().bool,active:X().bool,disabled:X().bool,loaded:X().bool,loading:X().bool,isLeaf:X().bool,pos:X().string,children:X().oneOfType([X().array,X().object]),icon:X().node,directory:X().bool,keyword:X().string,treeNodeFilterProp:X().string,selectedKey:X().string,motionKey:X().oneOfType([X().string,X().arrayOf(X().string)]),isEnd:X().arrayOf(X().bool),showLine:X().bool,expandIcon:X().oneOfType([X().node,X().func])},az.defaultProps={selectedKey:"",motionKey:""};let aV=class extends e8{constructor(e){super(Object.assign({},e)),this.updateDOMInRenderTree=e=>{this._adapter.setDOMInRenderTree(e)},this.updateDOMHeight=e=>{this._adapter.setDOMHeight(e)},this.updateVisible=e=>{this._adapter.setVisible(e)},this.updateIsTransitioning=e=>{this._adapter.setIsTransitioning(e)}}},aF={PREFIX:`${q}-collapsible`};class a$ extends ej{constructor(e){super(e),this.domRef=W.createRef(),this.hasBeenRendered=!1,this.handleResize=e=>{let n=e[0];if(n){let e=a$.getEntryInfo(n);this.foundation.updateDOMHeight(e.height),this.foundation.updateDOMInRenderTree(e.isShown)}},this.isChildrenInRenderTree=()=>!!this.domRef.current&&this.domRef.current.offsetHeight>0,this.state={domInRenderTree:!1,domHeight:0,visible:this.props.isOpen,isTransitioning:!1},this.foundation=new aV(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setDOMInRenderTree:e=>{this.state.domInRenderTree!==e&&this.setState({domInRenderTree:e})},setDOMHeight:e=>{this.state.domHeight!==e&&this.setState({domHeight:e})},setVisible:e=>{this.state.visible!==e&&this.setState({visible:e})},setIsTransitioning:e=>{this.state.isTransitioning!==e&&this.setState({isTransitioning:e})}})}componentDidMount(){super.componentDidMount(),this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.domRef.current);let e=this.isChildrenInRenderTree();this.foundation.updateDOMInRenderTree(e),e&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight)}componentDidUpdate(e,n,r){let i=Object.keys(e7()(this.props,["reCalcKey","isOpen"])).filter(n=>!eY()(this.props[n],e[n])),o=Object.keys(e7()(this.state,["domInRenderTree"])).filter(e=>!eY()(this.state[e],n[e]));i.includes("reCalcKey")&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),o.includes("domInRenderTree")&&this.state.domInRenderTree&&this.foundation.updateDOMHeight(this.domRef.current.scrollHeight),i.includes("isOpen")&&(this.props.isOpen||!this.props.motion)&&this.foundation.updateVisible(this.props.isOpen),this.props.motion&&e.isOpen!==this.props.isOpen&&this.foundation.updateIsTransitioning(!0)}componentWillUnmount(){super.componentWillUnmount(),this.resizeObserver.disconnect()}render(){let e=Object.assign({overflow:"hidden",height:this.props.isOpen?this.state.domHeight:this.props.collapseHeight,opacity:this.props.isOpen||!this.props.fade||0!==this.props.collapseHeight?1:0,transitionDuration:`${this.props.motion&&this.state.isTransitioning?this.props.duration:0}ms`},this.props.style),n=Y()(`${aF.PREFIX}-wrapper`,{[`${aF.PREFIX}-transition`]:this.props.motion&&this.state.isTransitioning},this.props.className),r=this.props.keepDOM&&(!this.props.lazyRender||this.hasBeenRendered)||0!==this.props.collapseHeight||this.state.visible||this.props.isOpen;return r&&!this.hasBeenRendered&&(this.hasBeenRendered=!0),W.createElement("div",Object.assign({className:n,style:e,onTransitionEnd:()=>{var e,n;this.props.isOpen||this.foundation.updateVisible(!1),this.foundation.updateIsTransitioning(!1),null==(n=(e=this.props).onMotionEnd)||n.call(e)}},this.getDataAttr(this.props)),W.createElement("div",{"x-semi-prop":"children",ref:this.domRef,style:{overflow:"hidden"},id:this.props.id},r&&this.props.children))}}a$.__SemiComponentName__="Collapsible",a$.defaultProps=eI(a$.__SemiComponentName__,{isOpen:!1,duration:250,motion:!0,keepDOM:!1,lazyRender:!1,collapseHeight:0,fade:!1}),a$.getEntryInfo=e=>{let n;n=e.borderBoxSize?0!==e.borderBoxSize[0].blockSize||0!==e.borderBoxSize[0].inlineSize:0!==e.contentRect.height||0!==e.contentRect.width;let r=0;return{isShown:n,height:e.borderBoxSize?Math.ceil(e.borderBoxSize[0].blockSize):e.target.clientHeight}},a$.propTypes={motion:X().bool,children:X().node,isOpen:X().bool,duration:X().number,keepDOM:X().bool,collapseHeight:X().number,style:X().object,className:X().string,reCalcKey:X().oneOfType([X().string,X().number])};var aB=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let aH=function(e){let{open:n,children:r}=e,i=aB(e,["open","children"]),[o,s]=(0,W.useState)(e.open);return(0,W.useEffect)(()=>{setTimeout(()=>{s(!e.open)},0)},[]),W.createElement(a$,Object.assign({},i,{isOpen:o}),r)},aK=e=>e.key;class aU extends W.PureComponent{constructor(e){super(e),this.onMotionEnd=()=>{"function"==typeof this.props.onMotionEnd&&this.props.onMotionEnd(),this.setState({transitionNodes:[]})},this.state={transitionNodes:[]}}static getDerivedStateFromProps(e,n){let{flattenNodes:r=[],motionKeys:i,motionType:o,flattenList:s=[]}=e,a=!eY()(n.cachedMotionKeys,i)||!eY()(n.cachedData.map(e=>e.key),r.map(e=>e.key)),l=[...i];if(!a||!l.length)return null;let h=[],c=[],u=0,d={};return("hide"===o&&s?s:r).forEach((e,n)=>{let r=aK(e);i.has(r)?(c.push(e),r===l[0]&&(u=n)):h.push(e)}),h.splice(u,0,c),{transitionNodes:h,cachedData:r,cachedMotionKeys:i,cachedMotionType:o}}render(){let{flattenNodes:e,motionType:n,searchTargetIsDeep:r,renderTreeNode:i}=this.props,{transitionNodes:o}=this.state;return(o.length&&!r?o:e).map(e=>{let r=Array.isArray(e);if(r&&!e.length)return null;if(r&&e.length){let r=aK(e[0]);return W.createElement(aH,{open:"hide"===n,duration:200,motion:!!n,key:`motion-${r}`,onMotionEnd:this.onMotionEnd},e.map(e=>i(e)))}return i(e)})}}aU.contextType=ax;var aW=r(4256),aG=r.n(aW);function aY(e){return ex()(e,e=>{if(aG()(e)&&!e._innerDataTag||W.isValidElement(e))return e})}let aZ=(0,t$.A)(function(e){return W.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2a8.5 8.5 0 1 0 4.86 15.48l4.08 4.08a1.5 1.5 0 1 0 2.12-2.12l-4.08-4.08A8.5 8.5 0 0 0 10.5 2ZM5 10.5a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0Z",fill:"currentColor"}))},"search"),aX=e=>{let{index:n,data:r,style:i}=e,{visibleOptions:o,renderOption:s}=r;return s(o[n],n,i)};var aQ=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};let aq=ag.PREFIX,aJ=ag.PREFIX_TREE;class a0 extends ej{constructor(e){super(e),this.renderSuffix=()=>{let{suffix:e}=this.props,n=Y()({[`${aq}-suffix`]:!0,[`${aq}-suffix-text`]:e&&H()(e),[`${aq}-suffix-icon`]:eO(e)});return W.createElement("div",{className:n,"x-semi-prop":"suffix"},e)},this.renderPrefix=()=>{let{prefix:e,insetLabel:n,insetLabelId:r}=this.props,i=e||n,o=Y()({[`${aq}-prefix`]:!0,[`${aq}-inset-label`]:n,[`${aq}-prefix-text`]:i&&H()(i),[`${aq}-prefix-icon`]:eO(i)});return W.createElement("div",{className:o,id:r,"x-semi-prop":"prefix,insetLabel"},i)},this.renderContent=()=>{let{dropdownMinWidth:e}=this.state,{dropdownStyle:n,dropdownClassName:r}=this.props,i=Object.assign({minWidth:e},n),o=Y()(r,`${aq}-popover`);return W.createElement("div",{className:o,style:i,onKeyDown:this.foundation.handleKeyDown},this.renderTree())},this.removeTag=e=>{this.foundation.removeTag(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.getDataForKeyNotInKeyEntities=e=>this.foundation.getDataForKeyNotInKeyEntities(e),this.handleSelectionEnterPress=e=>{this.foundation.handleSelectionEnterPress(e)},this.hasValue=()=>{let{multiple:e,checkRelation:n}=this.props,{realCheckedKeys:r,checkedKeys:i,selectedKeys:o}=this.state,s=!1;return e?"related"===n?s=!!i.size:"unRelated"===n&&(s=!!r.size):s=!!o.length,s},this.showClearBtn=()=>{let{showClear:e,disabled:n,searchPosition:r}=this.props,{inputValue:i,isOpen:o,isHovering:s}=this.state,a=r===ay.SEARCH_POSITION_TRIGGER&&i;return e&&(this.hasValue()||a)&&!n&&(o||s)},this.renderTagList=e=>{let{keyEntities:n,disabledKeys:r}=this.state,{treeNodeLabelProp:i,leafOnly:o,disabled:s,disableStrictly:a,size:l,renderSelectedItem:h,keyMaps:c}=this.props,u=eb()(c,"label",i),d=eK()(h)?h:e=>({isRenderInTag:!0,content:eb()(e,u,null)}),p=[];return e.forEach((e,i)=>{let o=n[e]&&n[e].key===e?n[e].data:this.getDataForKeyNotInKeyEntities(e),h=(n,r)=>{r&&"function"==typeof r.preventDefault&&r.preventDefault(),this.removeTag(e)},{content:c,isRenderInTag:u}=o?d(o,{index:i,onClose:h}):{};if(tt()(c)||e3()(c))return;let f={closable:!(s||o.disabled||a&&r.has(o.key)),color:"white",visible:!0,onClose:h,key:`tag-${e}-${i}`,size:"small"===l?"small":"large"};u?p.push(W.createElement(rI,Object.assign({},f),c)):p.push(c)}),p},this.renderSingleTriggerSearchItem=()=>{let{placeholder:e,disabled:n}=this.props,{inputTriggerFocus:r}=this.state,i=this.foundation.getRenderTextInSingle(),o=Y()(`${aq}-selection-TriggerSearchItem`,{[`${aq}-selection-TriggerSearchItem-placeholder`]:(r||!i)&&!n,[`${aq}-selection-TriggerSearchItem-disabled`]:n});return W.createElement("span",{className:o,onClick:this.foundation.onClickSingleTriggerSearchItem},i||e)},this.renderSingleTriggerSearch=()=>{let{inputValue:e}=this.state;return W.createElement(W.Fragment,null,this.renderInput(),!e&&this.renderSingleTriggerSearchItem())},this.renderSelectContent=e=>{let{multiple:n,placeholder:r,maxTagCount:i,searchPosition:o,filterTreeNode:s,showRestTagsPopover:a,restTagsPopoverProps:l}=this.props;if(s&&o===ay.SEARCH_POSITION_TRIGGER)return n?this.renderTagInput(e):this.renderSingleTriggerSearch();if(!n||!this.hasValue()){let e=this.foundation.getRenderTextInSingle(),n=Y()(`${aq}-selection-content`,{[`${aq}-selection-placeholder`]:!e});return W.createElement("span",{className:n},e||r)}let h=this.renderTagList(e);return W.createElement(ab,{maxTagCount:i,tagList:h,size:"large",mode:"custom",showPopover:a,popoverProps:l})},this.handleClear=e=>{e&&e.stopPropagation(),this.foundation.handleClear(e)},this.handleClearEnterPress=e=>{e&&e.stopPropagation(),this.foundation.handleClearEnterPress(e)},this.handleMouseOver=e=>{this.foundation.toggleHoverState(!0)},this.handleMouseLeave=e=>{this.foundation.toggleHoverState(!1)},this.search=e=>{let{isOpen:n}=this.state;n||this.foundation.open(),this.foundation.handleInputChange(e)},this.close=()=>{this.foundation.close(null)},this.renderArrow=()=>{let e=this.showClearBtn(),{arrowIcon:n}=this.props;return e?null:n?W.createElement("div",{className:Y()(`${aq}-arrow`),"x-semi-prop":"arrowIcon"},n):null},this.renderClearBtn=()=>{let e=this.showClearBtn(),{clearIcon:n}=this.props,r=Y()(`${aq}-clearbtn`);return e?W.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TreeSelect value",className:r,onClick:this.handleClear,onKeyPress:this.handleClearEnterPress},n||W.createElement(tB,null)):null},this.renderSelection=()=>{let e,n=this.props,{disabled:r,multiple:i,filterTreeNode:o,validateStatus:s,prefix:a,suffix:l,style:h,size:c,insetLabel:u,className:d,placeholder:p,showClear:f,leafOnly:g,searchPosition:y,triggerRender:m,borderless:b,autoMergeValue:_,checkRelation:E}=n,w=aQ(n,["disabled","multiple","filterTreeNode","validateStatus","prefix","suffix","style","size","insetLabel","className","placeholder","showClear","leafOnly","searchPosition","triggerRender","borderless","autoMergeValue","checkRelation"]),{inputValue:x,selectedKeys:C,checkedKeys:S,keyEntities:D,isFocus:N,realCheckedKeys:O}=this.state,M=!!o,I="function"==typeof m,T=y===ay.SEARCH_POSITION_TRIGGER&&M,k=T&&eW()(S),P=T&&!eW()(S),A=I?Y()(d):Y()(aq,{[`${aq}-borderless`]:b,[`${aq}-focus`]:N,[`${aq}-disabled`]:r,[`${aq}-single`]:!i,[`${aq}-multiple`]:i,[`${aq}-multiple-tagInput-empty`]:i&&k,[`${aq}-multiple-tagInput-notEmpty`]:i&&P,[`${aq}-filterable`]:M,[`${aq}-error`]:"error"===s,[`${aq}-warning`]:"warning"===s,[`${aq}-small`]:"small"===c,[`${aq}-large`]:"large"===c,[`${aq}-with-prefix`]:a||u,[`${aq}-with-suffix`]:l,[`${aq}-with-suffix`]:l},d),L=[];i?_?"related"===E?L=tm([...S],D,g,!0):"unRelated"===E&&(L=[...O]):L=[...S]:L=C,e=I?W.createElement(rp,{inputValue:x,value:L.map(e=>eb()(D,[e,"data"])),disabled:r,placeholder:p,onClear:this.handleClear,componentName:"TreeSelect",triggerRender:m,componentProps:Object.assign({},this.props),onSearch:this.search,onRemove:this.removeTag}):[W.createElement(W.Fragment,{key:"prefix"},a||u?this.renderPrefix():null),W.createElement(W.Fragment,{key:"selection"},W.createElement("div",{className:`${aq}-selection`},this.renderSelectContent(L))),W.createElement(W.Fragment,{key:"suffix"},l?this.renderSuffix():null),W.createElement(W.Fragment,{key:"clearBtn"},f||T&&x?this.renderClearBtn():null),W.createElement(W.Fragment,{key:"arrow"},this.renderArrow())];let j=r?null:0;return W.createElement("div",Object.assign({role:"combobox","aria-disabled":r,"aria-haspopup":"tree",tabIndex:j,className:A,style:h,ref:this.triggerRef,onClick:this.handleClick,onKeyPress:this.handleSelectionEnterPress,onKeyDown:this.foundation.handleKeyDown,"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},f?{onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e)}:{},this.getDataAttr(w)),e)},this.renderTagItem=(e,n)=>{let{keyEntities:r,disabledKeys:i}=this.state,{size:o,leafOnly:s,disabled:a,disableStrictly:l,renderSelectedItem:h,treeNodeLabelProp:c,keyMaps:u}=this.props,d=eb()(u,"label",c),p=tm([e],r,s,!0).map(n=>r[e]&&r[e].key===e?r[e].data:this.getDataForKeyNotInKeyEntities(e)),f=tE(p,u),g=Y()(`${aq}-selection-tag`,{[`${aq}-selection-tag-disabled`]:a}),y=!eW()(p)&&!eW()(p[0]),m=l&&y&&i.has(p[0].key),b=y&&!p[0].disabled&&!a&&!m,_=(n,r)=>{r.preventDefault(),this.removeTag(e)},E={size:"small"===o?"small":"large",key:`tag-${f}-${n}`,color:"white",className:g,closable:b,onClose:_},w=p[0],x=eK()(h)?h:e=>({isRenderInTag:!0,content:eb()(e,d,null)});if(eK()(x)){let{content:e,isRenderInTag:r}=w?x(w,{index:n,onClose:_}):{};return r?W.createElement(rI,Object.assign({},E),e):e}return W.createElement(rI,Object.assign({},E),f)},this.renderTagInput=e=>{let{disabled:n,size:r,searchAutoFocus:i,placeholder:o,maxTagCount:s,showRestTagsPopover:a,restTagsPopoverProps:l,searchPosition:h,filterTreeNode:c,preventScroll:u}=this.props,{inputValue:d}=this.state,p=c&&h===ay.SEARCH_POSITION_TRIGGER?i:void 0;return W.createElement(sc,{maxTagCount:s,disabled:n,onInputChange:e=>this.search(e),ref:this.tagInputRef,placeholder:o,value:e,inputValue:d,size:r,showRestTagsPopover:a,restTagsPopoverProps:l,autoFocus:p,renderTagItem:(e,n)=>this.renderTagItem(e,n),onRemove:e=>this.removeTag(e),expandRestTagsOnClick:!1,preventScroll:u})},this.renderInput=()=>{let{searchPlaceholder:e,searchRender:n,showSearchClear:r,searchPosition:i,searchAutoFocus:o,multiple:s,disabled:a,preventScroll:l}=this.props,{inputValue:h,inputTriggerFocus:c}=this.state,u=i===ay.SEARCH_POSITION_DROPDOWN,d={value:h,className:Y()({[`${aJ}-input`]:u,[`${aq}-inputTrigger`]:!u}),preventScroll:l,onChange:e=>this.search(e)},p={showClear:r,prefix:W.createElement(aZ,null)},f=u?p:{autofocus:o,onFocus:e=>this.foundation.handleInputTriggerFocus(),onBlur:e=>this.foundation.handleInputTriggerBlur(),disabled:a},g=Y()({[`${aJ}-search-wrapper`]:u,[`${aq}-triggerSingleSearch-wrapper`]:!u&&!s,[`${aq}-triggerSingleSearch-upper`]:!u&&c}),y="function"==typeof n||"boolean"==typeof n;return y&&!n?null:W.createElement("div",{className:g},W.createElement(nA,{componentName:"TreeSelect"},r=>{let i=u?e||r.searchPlaceholder:"";return y?n(Object.assign(Object.assign(Object.assign({},f),d),{placeholder:i})):W.createElement(tQ,Object.assign({"aria-label":"Filter TreeSelect item",ref:this.inputRef,placeholder:i},d,f))}))},this.renderEmpty=()=>{let{emptyContent:e}=this.props;return null===e?null:e?W.createElement(az,{empty:!0,emptyContent:this.props.emptyContent}):W.createElement(nA,{componentName:"Tree"},e=>W.createElement(az,{empty:!0,emptyContent:e.emptyText}))},this.onNodeLoad=e=>new Promise(n=>this.foundation.setLoadKeys(e,n)),this.onNodeSelect=(e,n)=>{this.foundation.handleNodeSelect(e,n)},this.onNodeCheck=(e,n)=>{this.foundation.handleNodeSelect(e,n)},this.onNodeExpand=(e,n)=>{this.foundation.handleNodeExpand(e,n)},this.getTreeNodeRequiredProps=()=>{let{expandedKeys:e,selectedKeys:n,checkedKeys:r,halfCheckedKeys:i,keyEntities:o,filteredKeys:s}=this.state;return{expandedKeys:e||new Set,selectedKeys:n||[],checkedKeys:r||new Set,halfCheckedKeys:i||new Set,filteredKeys:s||new Set,keyEntities:o}},this.getTreeNodeKey=e=>{let{data:n}=e,{key:r}=n;return r},this.handlePopoverVisibleChange=e=>{this.foundation.handlePopoverVisibleChange(e)},this.afterClose=()=>{this.foundation.handleAfterClose()},this.renderTreeNode=(e,n,r)=>{let{data:i,key:o}=e,s=this.foundation.getTreeNodeProps(o),{showLine:a}=this.props;if(!s)return null;let l=e7()(e,["key","label","disabled","isLeaf","icon","isEnd"]),{keyMaps:h,expandIcon:c}=this.props,u=i[eb()(h,"children","children")];return e3()(u)||(l.children=u),W.createElement(az,Object.assign({},s,i,l,{data:i,style:r,showLine:a,expandIcon:c}))},this.itemKey=(e,n)=>{let{visibleOptions:r}=n;return r[e].key},this.renderNodeList=()=>{let{flattenNodes:e,cachedFlattenNodes:n,motionKeys:r,motionType:i,filteredKeys:o}=this.state,{direction:s}=this.context,{virtualize:a,motionExpand:l}=this.props,h="expandedKeys"in this.props;if(!a||eW()(a))return W.createElement(aU,{flattenNodes:e,flattenList:n,motionKeys:l?r:new Set([]),motionType:i,searchTargetIsDeep:h&&l&&eW()(r)&&!eW()(o),onMotionEnd:this.onMotionEnd,renderTreeNode:this.renderTreeNode});let c={visibleOptions:e,renderOption:this.renderTreeNode};return W.createElement(aw,{defaultHeight:a.height,defaultWidth:a.width},n=>{let{height:r,width:i}=n;return W.createElement(rl,{itemCount:e.length,itemSize:a.itemSize,height:r,width:i,itemKey:this.itemKey,itemData:c,className:`${aJ}-virtual-list`,style:{direction:s}},aX)})},this.renderTree=()=>{let{keyEntities:e,motionKeys:n,motionType:r,inputValue:i,filteredKeys:o,flattenNodes:s,checkedKeys:a,realCheckedKeys:l}=this.state,{loadData:h,filterTreeNode:c,disabled:u,multiple:d,showFilteredOnly:p,motionExpand:f,outerBottomSlot:g,outerTopSlot:y,expandAction:m,labelEllipsis:b,virtualize:_,optionListStyle:E,searchPosition:w,renderLabel:x,renderFullLabel:C,checkRelation:S,emptyContent:D}=this.props,N=Y()(`${aJ}-wrapper`),O=!!i&&!o.size,M=eW()(s)||p&&O,I=w===ay.SEARCH_POSITION_DROPDOWN,T=Y()(`${aJ}-option-list ${aJ}-option-list-block`,{[`${aJ}-option-list-hidden`]:null===D&&M});return W.createElement(ax.Provider,{value:{loadData:h,treeDisabled:u,motion:f,motionKeys:n,motionType:r,expandAction:m,filterTreeNode:c,keyEntities:e,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeRightClick:$(),onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,renderTreeNode:this.renderTreeNode,multiple:d,showFilteredOnly:p,isSearching:!!i,renderLabel:x,renderFullLabel:C,labelEllipsis:void 0===b?_:b}},W.createElement("div",{className:N},y,!y&&c&&I&&this.renderInput(),W.createElement("div",{className:T,role:"tree","aria-multiselectable":!!d,style:E},M?this.renderEmpty():d?W.createElement(n1,{value:Array.from("related"===S?a:l)},this.renderNodeList()):this.renderNodeList()),g))},this.state={inputTriggerFocus:!1,isOpen:!1,isFocus:!1,rePosKey:0,dropdownMinWidth:null,inputValue:"",keyEntities:{},treeData:[],flattenNodes:[],cachedFlattenNodes:void 0,selectedKeys:[],checkedKeys:new Set,halfCheckedKeys:new Set,realCheckedKeys:new Set([]),disabledKeys:new Set,motionKeys:new Set([]),motionType:"hide",expandedKeys:new Set(e.expandedKeys),filteredKeys:new Set,filteredExpandedKeys:new Set,filteredShownKeys:new Set,prevProps:null,isHovering:!1,cachedKeyValuePairs:{},loadedKeys:new Set,loadingKeys:new Set},this.inputRef=W.createRef(),this.tagInputRef=W.createRef(),this.triggerRef=W.createRef(),this.optionsRef=W.createRef(),this.clickOutsideHandler=null,this.foundation=new am(this.adapter),this.treeSelectID=Math.random().toString(36).slice(2),this.onMotionEnd=()=>{this.adapter.rePositionDropdown()}}static getDerivedStateFromProps(e,n){let r,{prevProps:i,rePosKey:o}=n,{keyMaps:s}=e,a=n=>!i&&n in e||i&&!eY()(i[n],e[n]),l=e.onChangeWithObject,h=n.keyEntities||{},c=n.cachedKeyValuePairs||{},u={prevProps:e},d=a("treeData"),p=a("expandedKeys"),f=!!(e.filterTreeNode&&n.inputValue&&n.inputValue.length);if(d){u.treeData=r=e.treeData;let n=function(e,n){let r={},i={},o={},s=eb()(n,"value","value");return!function(e,n,r){let i=eb()(r,"key","key"),o=eb()(r,"children","children"),s=(r,a,l)=>{var h;let c=r?r[o]:e,u=r?(h=l.pos,`${h}-${a}`):"0";if(r){let e=eb()(r,i,null);n({data:Object.assign({},r),ind:a,pos:u,key:null!==e?e:u,parentPos:l.node?l.pos:null,level:Number(l.level)+1})}c&&c.forEach((e,n)=>{s(e,n,{node:r,pos:u,level:l?Number(l.level)+1:-1})})};s(null)}(e,e=>{let{pos:n,key:a,parentPos:l}=e,h=Object.assign({},e),c=eb()(h,`data.${s}`,null);null!==c&&(o[c]=a),r[n]=h,i[a]=h,h.parent=r[l],h.parent&&(h.parent.children=h.parent.children||[],h.parent.children.push(h))},n),{posEntities:r,keyEntities:i,valueEntities:o}}(r,s);u.keyEntities=Object.assign({},n.keyEntities),h=u.keyEntities,u.cachedKeyValuePairs=Object.assign({},n.valueEntities),c=u.cachedKeyValuePairs}r&&e.motion&&!eY()(Object.keys(u.keyEntities),Object.keys(n.keyEntities))&&i&&e.motion&&(u.motionKeys=new Set([]),u.motionType=null);let g=d&&e.expandAll;if(f){let o;if(r&&(o=function(e){let{showFilteredOnly:n,keyEntities:r,inputValue:i,treeData:o,filterTreeNode:s,filterProps:a,prevExpandedKeys:l,keyMaps:h}=e,c=[],u=tu(c=Object.values(r).filter(e=>ty(i,e.data,s,a)).map(e=>e.key),r,!1);if(l.length){let e=l.filter(e=>!!r[e]);u=u.concat(e)}let d=new Set([...th(c,r,!0),...u]);return{flattenNodes:ta(o,new Set(u),h,n&&d),filteredKeys:new Set(c),filteredExpandedKeys:new Set(u),filteredShownKeys:d}}({treeData:r,inputValue:n.inputValue,filterTreeNode:e.filterTreeNode,filterProps:e.treeNodeFilterProp,showFilteredOnly:e.showFilteredOnly,keyEntities:u.keyEntities,prevExpandedKeys:[...n.filteredExpandedKeys],keyMaps:s}),u.flattenNodes=o.flattenNodes,u.motionKeys=new Set([]),u.filteredKeys=o.filteredKeys,u.filteredShownKeys=o.filteredShownKeys,u.filteredExpandedKeys=o.filteredExpandedKeys),e.expandedKeys){if(u.filteredExpandedKeys=tp(e.expandedKeys,h,e.autoExpandParent||!i),i&&e.motion){let i=n?n.filteredExpandedKeys:new Set([]);if(!r){let r=tg(i,u.filteredExpandedKeys,h),{motionKeys:o}=r,{motionType:s}=r;e.showFilteredOnly&&(o=o.filter(e=>n.filteredShownKeys.has(e))),"hide"===s&&(u.cachedFlattenNodes=aY(n.flattenNodes)),u.motionKeys=new Set(o),u.motionType=s}}u.flattenNodes=ta(r||n.treeData,u.filteredExpandedKeys||n.filteredExpandedKeys,s,e.showFilteredOnly&&n.filteredShownKeys)}}else{if(p||i&&a("autoExpandParent")){if(u.expandedKeys=tp(e.expandedKeys,h,e.autoExpandParent||!i),i&&e.motion&&!r){let{motionKeys:e,motionType:r}=tg(n.expandedKeys,u.expandedKeys,h);u.motionKeys=new Set(e),u.motionType=r,"hide"===r&&(u.cachedFlattenNodes=aY(n.flattenNodes))}}else!i&&(e.defaultExpandAll||e.expandAll)||g?u.expandedKeys=new Set(Object.keys(h)):!i&&e.defaultExpandedKeys?u.expandedKeys=tp(e.defaultExpandedKeys,h):!i&&e.defaultValue?u.expandedKeys=tf(tw(e.defaultValue,l,s),h,e.multiple,c):!i&&e.value&&(u.expandedKeys=tf(tw(e.value,l,s),h,e.multiple,c));if(u.expandedKeys||delete u.expandedKeys,r||u.expandedKeys){let e=ta(r||n.treeData,u.expandedKeys||n.expandedKeys,s);u.flattenNodes=e}}let y=e.multiple;if(y){let o;if(a("value")?o=tl(tw(e.value,l,s),c,y):!i&&e.defaultValue?o=tl(tw(e.defaultValue,l,s),c,y):r&&(o=e.value?tl(tw(e.value,l,s)||[],c,y):tx("related"===e.checkRelation?n.checkedKeys:n.realCheckedKeys,h)),o){if("unRelated"===e.checkRelation)u.realCheckedKeys=new Set(o);else if("related"===e.checkRelation){let{checkedKeys:e,halfCheckedKeys:n}=td(o,h);u.checkedKeys=e,u.halfCheckedKeys=n}}}else a("value")?u.selectedKeys=tl(tw(e.value,l,s),c,y):!i&&e.defaultValue?u.selectedKeys=tl(tw(e.defaultValue,l,s),c,y):r&&(e.value?u.selectedKeys=tl(tw(e.value,l,s)||"",c,y):u.selectedKeys=tx(n.selectedKeys,h));return a("loadedKeys")&&(u.loadedKeys=new Set(e.loadedKeys)),(d||a("value"))&&(u.rePosKey=o+1),r&&e.disableStrictly&&"related"===e.checkRelation&&(u.disabledKeys=tC(h,s)),u}get adapter(){var e=this;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),{updateInputValue:e=>{this.setState({inputValue:e})}}),{registerClickOutsideHandler:e=>{this.adapter.unregisterClickOutsideHandler();let n=n=>{let r=this.optionsRef&&this.optionsRef.current,i=this.triggerRef&&this.triggerRef.current,o=eQ.findDOMNode(r),s=n.target,a=n.composedPath&&n.composedPath()||[s];!o||o.contains(s)&&o.contains(s.parentNode)||!i||i.contains(s)||a.includes(i)||a.includes(o)||e(n)};this.clickOutsideHandler=n,document.addEventListener("mousedown",n,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{rePosKey:e}=this.state;e+=1,this.setState({rePosKey:e})}}),{updateState:e=>{this.setState(Object.assign({},e))},notifySelect:(e,n,r)=>{this.props.onSelect&&this.props.onSelect(e,n,r)},notifySearch:(e,n,r)=>{this.props.onSearch&&this.props.onSearch(e,n,r)},cacheFlattenNodes:e=>{this.setState({cachedFlattenNodes:e?aY(this.state.flattenNodes):void 0})},notifyLoad:(e,n)=>{let{onLoad:r}=this.props;eK()(r)&&r(e,n)},notifyClear:e=>{this.props.onClear&&this.props.onClear(e)}}),{updateLoadKeys:(e,n)=>{this.setState(r=>{let{loadedKeys:i,loadingKeys:o}=r;return this.foundation.handleNodeLoad(i,o,e,n)})},updateState:e=>{this.setState(Object.assign({},e))},openMenu:()=>{this.setState({isOpen:!0},()=>{this.props.onVisibleChange(!0)})},closeMenu:e=>{this.setState({isOpen:!1},()=>{e&&e(),this.props.onVisibleChange(!1)})},getTriggerWidth:()=>{let e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},notifyChange:(e,n,r)=>{this.props.onChange&&this.props.onChange(e,n,r)},notifyChangeWithObject:(e,n)=>{this.props.onChange&&this.props.onChange(e,n)},notifyExpand:(e,n)=>{let{expanded:r,node:i}=n;this.props.onExpand&&this.props.onExpand([...e],{expanded:r,node:i}),r&&this.props.loadData&&this.onNodeLoad(i)},notifyFocus:function(){e.props.onFocus&&e.props.onFocus(...arguments)},notifyBlur:function(){e.props.onBlur&&e.props.onBlur(...arguments)},toggleHovering:e=>{this.setState({isHovering:e})},updateInputFocus:e=>{if(e){if(this.inputRef&&this.inputRef.current){let{preventScroll:e}=this.props;this.inputRef.current.focus({preventScroll:e})}this.tagInputRef&&this.tagInputRef.current&&this.tagInputRef.current.focus()}else this.inputRef&&this.inputRef.current&&this.inputRef.current.blur(),this.tagInputRef&&this.tagInputRef.current&&this.tagInputRef.current.blur()},updateIsFocus:e=>{this.setState({isFocus:e})}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}render(){let e=this.renderContent(),{motion:n,zIndex:r,mouseLeaveDelay:i,mouseEnterDelay:o,autoAdjustOverflow:s,stopPropagation:a,getPopupContainer:l,dropdownMargin:h,position:c}=this.props,{isOpen:u,rePosKey:d}=this.state,p=this.renderSelection();return W.createElement(n_,{stopPropagation:a,getPopupContainer:l,zIndex:r,motion:n,margin:h,ref:this.optionsRef,content:e,visible:u,trigger:"custom",rePosKey:d,position:c||"bottomLeft",autoAdjustOverflow:s,mouseLeaveDelay:i,mouseEnterDelay:o,onVisibleChange:this.handlePopoverVisibleChange,afterClose:this.afterClose},p)}}a0.contextType=Q,a0.propTypes={"aria-describedby":X().string,"aria-errormessage":X().string,"aria-invalid":X().bool,"aria-labelledby":X().string,"aria-required":X().bool,borderless:X().bool,loadedKeys:X().arrayOf(X().string),loadData:X().func,onLoad:X().func,arrowIcon:X().node,clearIcon:X().node,defaultOpen:X().bool,defaultValue:X().oneOfType([X().string,X().array,X().object]),defaultExpandAll:X().bool,defaultExpandedKeys:X().array,expandAll:X().bool,disabled:X().bool,disableStrictly:X().bool,filterTreeNode:X().oneOfType([X().func,X().bool]),multiple:X().bool,searchPlaceholder:X().string,searchAutoFocus:X().bool,virtualize:X().object,treeNodeFilterProp:X().string,onChange:X().func,onClear:X().func,onSearch:X().func,onSelect:X().func,onExpand:X().func,onChangeWithObject:X().bool,onBlur:X().func,onFocus:X().func,value:X().oneOfType([X().string,X().number,X().array,X().object]),expandedKeys:X().array,autoExpandParent:X().bool,showClear:X().bool,showSearchClear:X().bool,autoAdjustOverflow:X().bool,showFilteredOnly:X().bool,showLine:X().bool,motionExpand:X().bool,emptyContent:X().node,keyMaps:X().object,leafOnly:X().bool,treeData:X().arrayOf(X().shape({key:X().string,value:X().oneOfType([X().string,X().number]),label:X().any})),dropdownClassName:X().string,dropdownStyle:X().object,dropdownMargin:X().oneOfType([X().number,X().object]),motion:X().bool,placeholder:X().string,maxTagCount:X().number,size:X().oneOf(ay.SIZE_SET),className:X().string,style:X().object,treeNodeLabelProp:X().string,suffix:X().node,prefix:X().node,insetLabel:X().node,insetLabelId:X().string,zIndex:X().number,getPopupContainer:X().func,dropdownMatchSelectWidth:X().bool,validateStatus:X().oneOf(ay.STATUS),mouseEnterDelay:X().number,mouseLeaveDelay:X().number,triggerRender:X().func,stopPropagation:X().oneOfType([X().bool,X().string]),outerBottomSlot:X().node,outerTopSlot:X().node,onVisibleChange:X().func,expandAction:X().oneOf(["click","doubleClick",!1]),searchPosition:X().oneOf([ay.SEARCH_POSITION_DROPDOWN,ay.SEARCH_POSITION_TRIGGER]),clickToHide:X().bool,renderLabel:X().func,renderFullLabel:X().func,labelEllipsis:X().bool,optionListStyle:X().object,searchRender:X().oneOfType([X().func,X().bool]),renderSelectedItem:X().func,checkRelation:X().string,"aria-label":X().string,showRestTagsPopover:X().bool,restTagsPopoverProps:X().object,preventScroll:X().bool,clickTriggerToHide:X().bool,autoMergeValue:X().bool},a0.defaultProps={borderless:!1,searchPosition:ay.SEARCH_POSITION_DROPDOWN,arrowIcon:W.createElement(tH.Z,null),autoExpandParent:!1,autoAdjustOverflow:!0,stopPropagation:!0,motion:!0,motionExpand:!0,expandAll:!1,zIndex:tF.DEFAULT_Z_INDEX,disableStrictly:!1,multiple:!1,filterTreeNode:!1,size:"default",treeNodeFilterProp:"label",onChangeWithObject:!1,treeNodeLabelProp:"label",dropdownMatchSelectWidth:!0,defaultOpen:!1,showSearchClear:!0,showClear:!1,onVisibleChange:$(),expandAction:!1,clickToHide:!0,searchAutoFocus:!1,checkRelation:"related","aria-label":"TreeSelect",showRestTagsPopover:!1,restTagsPopoverProps:{},clickTriggerToHide:!0,autoMergeValue:!0};let a1=a0;class a2 extends W.PureComponent{render(){return W.createElement(r5,Object.assign({component:"span"},this.props))}}a2.propTypes={copyable:X().oneOfType([X().object,X().bool]),delete:X().bool,disabled:X().bool,icon:X().oneOfType([X().node,X().string]),ellipsis:X().oneOfType([X().object,X().bool]),mark:X().bool,underline:X().bool,link:X().oneOfType([X().object,X().bool]),strong:X().bool,type:X().oneOf(rR),size:X().oneOf(rz),style:X().object,className:X().string,code:X().bool,component:X().string,weight:X().number},a2.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var a3=function(e,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>n.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};class a4 extends W.PureComponent{render(){let e=this.props,{heading:n}=e,r=a3(e,["heading"]),i=-1!==rF.indexOf(n)?`h${n}`:"h1";return W.createElement(r5,Object.assign({component:i,heading:i},r))}}a4.propTypes={copyable:X().oneOfType([X().object,X().bool]),delete:X().bool,disabled:X().bool,ellipsis:X().oneOfType([X().object,X().bool]),mark:X().bool,link:X().oneOfType([X().object,X().bool]),underline:X().bool,strong:X().bool,type:X().oneOf(rR),heading:X().oneOf(rF),style:X().object,className:X().string,component:X().string,weight:X().oneOfType([X().oneOf(["light","regular","medium","semibold","bold","default"]),X().number])},a4.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};class a5{constructor(e,n,r,i,o){this.ruleMethods={"bytes-decimal":e=>{let n=0;for(;e>=1e3;)e/=1e3,n++;return`${this.truncatePrecision(e)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}`},"bytes-binary":e=>{let n=0;for(;e>=1024;)e/=1024,n++;return`${this.truncatePrecision(e)} ${["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][n]}`},percentages:e=>`${this.truncatePrecision(100*e)}%`,exponential:e=>{let n=e.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(n[0]))}e${n[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=void 0!==o,this.content=e,this.rule=n,this.precision=r,this.truncate=i,this.parser=o}format(){return this.isDiyParser?this.parser(this.content):"text"===this.rule?a6(this.content).map(e=>a8(e)?this.truncatePrecision(e):e).join(""):"numbers"===this.rule?a6(this.content).filter(e=>a8(e)).map(e=>this.truncatePrecision(e)).join(","):a6(this.content).map(e=>a8(e)?this.ruleMethods[this.rule](Number(e)):e).join("")}truncatePrecision(e){let n=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),r=n.toString().split(".");if(1===r.length)return n.toFixed(this.precision);let i=r[1].length;return i<this.precision?`${r[0]}.${r[1]}${"0".repeat(this.precision-i)}`:n.toString()}}function a6(e){return e.match(/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g)||[]}function a8(e){return!(isNaN(Number(e))||""===e.replace(/\s+/g,""))}class a9 extends W.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),1===(e=e.map(e=>"string"==typeof e||"number"==typeof e?new a5(String(e),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():"function"==typeof e?this.formatNodeDFS(e()):"object"==typeof e&&"children"in e.props?Object.assign(Object.assign({},e),{props:Object.assign(Object.assign({},e.props),{children:this.formatNodeDFS(e.props.children)})}):e)).length?e[0]:e}render(){let e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),W.createElement(r5,Object.assign({component:"span"},e))}}a9.propTypes={rule:X().oneOf(["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"]),precision:X().number,truncate:X().oneOf(["ceil","floor","round"]),parser:X().func,copyable:X().oneOfType([X().object,X().bool]),delete:X().bool,disabled:X().bool,icon:X().oneOfType([X().node,X().string]),mark:X().bool,underline:X().bool,link:X().oneOfType([X().object,X().bool]),strong:X().bool,type:X().oneOf(rR),size:X().oneOf(rz),style:X().object,className:X().string,code:X().bool,component:X().string},a9.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""},rU.Text=a2,rU.Title=a4,rU.Paragraph=r8,rU.Numeral=a9;let a7=rU},8319:function(e,n,r){"use strict";r.d(n,{VO:()=>er,RX:()=>tC,RD:()=>Z,W6:()=>nl,M1:()=>t9,xm:()=>th,O0:()=>tx,Fw:()=>ni,YZ:()=>g,mY:()=>p,p4:()=>el,Ho:()=>V,Qc:()=>_.Qc,Tj:()=>t$,ER:()=>tU,KU:()=>nc,G2:()=>np,H$:()=>nd,mh:()=>tG,yy:()=>m,nn:()=>tN,JH:()=>Y,Yv:()=>tk,Rm:()=>tq,rQ:()=>t2,wY:()=>tY,v2:()=>ty,z2:()=>tM,Zs:()=>tH,XQ:()=>nr,WV:()=>Q,JW:()=>tK,JA:()=>_.JA,km:()=>nu,cv:()=>tg,iX:()=>nf,el:()=>tu,aI:()=>tS,KV:()=>_.KV,Zn:()=>t6,Dc:()=>nh,yb:()=>_.yb,d3:()=>t7,s5:()=>es,Lk:()=>tA,VD:()=>F,W4:()=>t3,_z:()=>ee});var i,o,s,a,l,h,c,u,d,p,f,g,y,m,b,_=r(8336),E=r(6261),w=r(4210),x=r(9378),C={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-C.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*C.Bounce.In(2*e):.5*C.Bounce.Out(2*e-1)+.5}}},S="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return new Date().getTime()},D=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,n){void 0===e&&(e=S()),void 0===n&&(n=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],s=!n;o&&!1===o.update(e,s)&&!n&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),N={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),s=N.Utils.Linear;return n<0?s(e[0],e[1],i):n>1?s(e[r],e[r-1],r-i):s(e[o],e[o+1>r?r:o+1],i-o)},Bezier:function(e,n){for(var r=0,i=e.length-1,o=Math.pow,s=N.Utils.Bernstein,a=0;a<=i;a++)r+=o(1-n,i-a)*o(n,a)*e[a]*s(i,a);return r},CatmullRom:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),s=N.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(o=Math.floor(i=r*(1+n))),s(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o)):n<0?e[0]-(s(e[0],e[0],e[1],e[1],-i)-e[0]):n>1?e[r]-(s(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):s(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=N.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:(i=[1],function(e){var n=1;if(i[e])return i[e];for(var r=e;r>1;r--)n*=r;return i[e]=n,n}),CatmullRom:function(e,n,r,i,o){var s=(r-e)*.5,a=(i-n)*.5,l=o*o;return o*l*(2*n-2*r+s+a)+(-3*n+3*r-2*s-a)*l+s*o+n}}},O=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),M=new D,I=function(){function e(e,n){void 0===n&&(n=M),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=C.Linear.None,this._interpolationFunction=N.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=O.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,n){return this._valuesEnd=Object.create(e),void 0!==n&&(this._duration=n),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?S()+parseFloat(e):e:S(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,n,r,i){for(var o in r){var s=e[o],a=Array.isArray(s),l=a?"array":typeof s,h=!a&&Array.isArray(r[o]);if("undefined"!==l&&"function"!==l){if(h){var c=r[o];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,s)),r[o]=[s].concat(c)}if(("object"===l||a)&&s&&!h){for(var u in n[o]=a?[]:{},s)n[o][u]=s[u];i[o]=a?[]:{},this._setupProperties(s,n[o],r[o],i[o])}else void 0===n[o]&&(n[o]=s),a||(n[o]*=1),h?i[o]=r[o].slice().reverse():i[o]=n[o]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object)),this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=S()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=S()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this)),this},e.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,n){if(void 0===e&&(e=S()),void 0===n&&(n=!0),this._isPaused)return!0;var r,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;n&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var s=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i)if(this._repeat>0){for(r in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object)}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(void 0!==n[o]){var s=n[o]||0,a=r[o],l=Array.isArray(e[o]),h=Array.isArray(a);!l&&h?e[o]=this._interpolationFunction(a,i):"object"==typeof a&&a?this._updateProperties(e[o],s,a,i):"number"==typeof(a=this._handleRelativeValue(s,a))&&(e[o]=s+(a-s)*i)}},e.prototype._handleRelativeValue=function(e,n){return"string"!=typeof n?n:"+"===n.charAt(0)||"-"===n.charAt(0)?e+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];"string"==typeof r?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},e}();let T={Easing:C,Tween:I,update:(O.nextId,M.getAll.bind(M),M.removeAll.bind(M),M.add.bind(M),M.remove.bind(M),M.update.bind(M))};r(9453);var k=r(4194),P=r(8842),A=r(6321),L=Object.defineProperty,j=Object.getOwnPropertyDescriptor,R=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?j(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&L(n,r,s),s};(s=(o=p||(p={})).Default||(o.Default={})).ZOOM_IN="ZOOM_IN",s.ZOOM_OUT="ZOOM_OUT",s.DELETE="DELETE",s.COPY="COPY",s.PASTE="PASTE",s.UNDO="UNDO",s.REDO="REDO",s.VIEW_CLOSE_ALL_WIDGET="view.closeAllWidget",s.VIEW_CLOSE_CURRENT_WIDGET="view.closeCurrentWidget",s.VIEW_REOPEN_LAST_WIDGET="view.reopenLastWidget",s.VIEW_CLOSE_OTHER_WIDGET="view.closeOtherWidget",s.VIEW_CLOSE_BOTTOM_PANEL="view.closeBottomPannel",s.VIEW_OPEN_NEXT_TAB="view.openNextTab",s.VIEW_OEPN_LAST_TAB="view.openLastTab",s.VIEW_FULL_SCREEN="view.fullScreen",s.VIEW_SAVING_WIDGET_CLOSE_CONFIRM="view.savingWidgetCloseConfirm",s.VIEW_SHORTCUTS="view.shortcuts",s.VIEW_PREFERENCES="view.preferences",s.VIEW_LOG="view.log",s.VIEW_PROBLEMS="view.problems",o.is=function(e){return!!e&&e===Object(e)&&"id"in e};var z=Symbol("CommandContribution");(f||(f={})).findSimple=function(e,n){for(let r of e.values())if(r.id===n.id&&r.args.length===n.args.length&&r.args.every((e,r)=>n[r]===e))return r};var V=class{constructor(){this._handlers={},this._commands={},this._commandExecutings=new Set,this.toUnregisterCommands=new Map,this.onDidExecuteCommandEmitter=new _.Q5,this.onDidExecuteCommand=this.onDidExecuteCommandEmitter.event,this.onWillExecuteCommandEmitter=new _.Q5,this.onWillExecuteCommand=this.onWillExecuteCommandEmitter.event}init(){for(let e of this.contributions)e.registerCommands(this)}get commands(){let e=[];for(let n of this.commandIds){let r=this.getCommand(n);r&&e.push(r)}return e}get commandIds(){return Object.keys(this._commands)}registerCommand(e,n){let r="string"==typeof e?{id:e}:e;if(this._commands[r.id])return console.warn(`A command ${r.id} is already registered.`),_.JT.NULL;let i=new _.K4(this.doRegisterCommand(r));return n&&i.push(this.registerHandler(r.id,n)),this.toUnregisterCommands.set(r.id,i),i.push(_.JT.create(()=>this.toUnregisterCommands.delete(r.id))),i}unregisterCommand(e){let n=p.is(e)?e.id:e,r=this.toUnregisterCommands.get(n);r&&r.dispose()}registerHandler(e,n){let r=this._handlers[e];return r||(this._handlers[e]=r=[]),r.unshift(n),{dispose:()=>{let e=r.indexOf(n);e>=0&&r.splice(e,1)}}}isVisible(e,...n){return void 0!==this.getVisibleHandler(e,...n)}isEnabled(e,...n){return void 0!==this.getActiveHandler(e,...n)}isToggled(e,...n){return void 0!==this.getToggledHandler(e,...n)}async executeCommand(e,...n){let r=this.getActiveHandler(e,...n),i={id:e,args:n};if(f.findSimple(this._commandExecutings,i))return i.promise;if(r)try{this._commandExecutings.add(i),this.onWillExecuteCommandEmitter.fire({commandId:e,args:n});let o=r.execute(...n);i.promise=o;let s=await o;return this.onDidExecuteCommandEmitter.fire({commandId:e,args:n}),s}finally{this._commandExecutings.delete(i)}}getVisibleHandler(e,...n){let r=this._handlers[e];if(r)for(let e of r)try{if(!e.isVisible||e.isVisible(...n))return e}catch(e){console.error(e)}}getActiveHandler(e,...n){let r=this._handlers[e];if(r)for(let e of r)try{if(!e.isEnabled||e.isEnabled(...n))return e}catch(e){console.error(e)}}getAllHandlers(e){let n=this._handlers[e];return n?n.slice():[]}getToggledHandler(e,...n){let r=this._handlers[e];if(r)for(let e of r)try{if(e.isToggled&&e.isToggled(...n))return e}catch(e){console.error(e)}}getCommand(e){return this._commands[e]}doRegisterCommand(e){return this._commands[e.id]=e,{dispose:()=>{delete this._commands[e.id]}}}updateCommand(e,n){this._commands[e]&&(this._commands[e]={...this._commands[e],...n})}dispose(){this.onWillExecuteCommandEmitter.dispose(),this.onDidExecuteCommandEmitter.dispose()}};R([(0,w.nx)(z),(0,w.jt)()],V.prototype,"contributions",2),V=R([(0,w.b2)()],V);var F=Symbol("CommandService"),$=new w.nZ(e=>{(0,_.yb)(e,z),e(V).toSelf().inSingletonScope(),e(F).toService(V),e("CommandRegistryFactory").toFactory(e=>()=>e.container.get(V))}),B=Object.defineProperty,H=Object.getOwnPropertyDescriptor,K=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?H(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&B(n,r,s),s},U=(e,n)=>(r,i)=>n(r,i,e),W=Object.__proto__,G=0,Y=class{constructor(e){this.onEntityChangeEmitter=new _.Q5,this.onDataChangeEmitter=new _.Q5,this.initializeDataKeys=[],this.dataManager=new Map,this.toDispose=new _.K4,this.preDispose=new _.K4,this.onEntityChange=this.onEntityChangeEmitter.event,this.onDataChange=this.onDataChangeEmitter.event,this._changeLockedTimes=0,this.isInitialized=!0,this._version=G++,this._savedInManager=!0,this.entityManager=e.entityManager,this._id=e.id||(0,E.x0)(),this._savedInManager=void 0===e.savedInManager||e.savedInManager,this.isInitialized=!0,this.toDispose.push(this.onEntityChangeEmitter),this.toDispose.push(this.onDataChangeEmitter),this.register(),e.datas&&e.datas.forEach(e=>this.addData(e.registry,e.data)),this.isInitialized=!1}getDefaultDataRegistries(){return[]}get changeLocked(){return this._changeLockedTimes>0}set changeLocked(e){this._changeLockedTimes=e?this._changeLockedTimes+1:this._changeLockedTimes-1,this._changeLockedTimes<0&&(this._changeLockedTimes=0)}get type(){if(!this.constructor.type)throw Error(`Entity Registry need a type: ${this.constructor.name}`);return this.constructor.type}get context(){return this.entityManager.context}addInitializeData(e,n){this.isInitialized=!0,e.forEach(e=>this.addData(e,n)),this.isInitialized=!1}get version(){return this._version}toJSON(){let e=[];for(let n of this.dataManager.values())e.push({type:n.type,data:n.toJSON()});return{type:this.type,id:this.id,dataList:e}}fromJSON(e){e&&e.id&&e.type&&(this.changeLocked=!0,this.reset(),e.dataList&&e.dataList.forEach(e=>{let n=this.entityManager.getDataRegistryByType(e.type);n&&this.addData(n).update(e.data)}),this.changeLocked=!1,this.fireChange())}get id(){return this._id}dispose(){this.preDispose.dispose(),this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}reset(){for(let e of(this.changeLocked=!0,this.dataManager.values()))this.initializeDataKeys.includes(e.type)||e.dispose();this.register(),this.changeLocked=!1,this.fireChange()}get onDispose(){return this.toDispose.onDispose}fireChange(){this.changeLocked||this.isInitialized||this.disposed||(this._version++,this._version>=Number.MAX_SAFE_INTEGER&&(this._version=0),this.onEntityChangeEmitter.fire(this))}addData(e,n){this.entityManager.registerEntityData(e);let r=this.dataManager.get(e.type);if(r)return n&&this.updateData(e,n),r;let i=this.entityManager.getDataInjector(e);r=new e(this,i?.()),this.isInitialized&&this.initializeDataKeys.push(r.type),this.dataManager.set(e.type,r),this.toDispose.push(r),r.onDataChange(()=>{let e={type:"update",data:r,entity:this};this.onDataChangeEmitter.fire(e),this.fireChange()}),r.toDispose.push(_.JT.create(()=>{this.initializeDataKeys.includes(e.type)||this.dataManager.delete(e.type);let n={type:"delete",data:r,entity:this};this.onDataChangeEmitter.fire(n),this.fireChange()})),r.changeLocked=!0,this.updateData(e,n||r.getDefaultData()),r.changeLocked=!1;let o={type:"add",data:r,entity:this};return this.onDataChangeEmitter.fire(o),r}get savedInManager(){return this._savedInManager}updateData(e,n){let r=this.dataManager.get(e.type);r&&r.update(n)}getData(e){return this.dataManager.get(e.type)}hasData(e){return this.dataManager.has(e.type)}removeData(e){if(this.initializeDataKeys.includes(e.type))return;let n=this.dataManager.get(e.type);n&&n.dispose()}getService(e){return this.entityManager.getService(e)}register(){this.getDefaultDataRegistries().forEach(e=>this.addData(e))}};Y.type="Entity",(a=Y||(Y={})).getType=function(e){return e.type},a.checkDataChanged=function(e,n){return _.XJ.isChanged(e,n)},a.isRegistryOf=function(e,n){if(e===n)return!0;let r=e.__proto__;for(;r&&r!==W;){if(r.prototype===n.prototype)return!0;r=r.__proto__}return!1};var Z=class extends _.Pq{constructor(e,n){super(),this.opts=n,this.onDataChangeEmitter=new _.Q5,this.onWillChangeEmitter=new _.Q5,this._changeLocked=!1,this._version=0,this.onDataChange=this.onDataChangeEmitter.event,this.onWillChange=this.onWillChangeEmitter.event,this.entity=e,this._data=this.getDefaultData(),this.toDispose.push(this.onDataChangeEmitter),this.toDispose.push(this.onWillChangeEmitter)}get type(){if(!this.constructor.type)throw Error(`Entity Data Registry need a type: ${this.constructor.name}`);return this.constructor.type}get data(){return this._data}update(e,n){2==arguments.length?this._data[e]!==n&&(this.fireWillChange(),this._data[e]=n,this.fireChange()):this.checkChanged(e)&&(this.fireWillChange(),"object"!=typeof e?this._data=e:this._data={...this._data,...e},this.fireChange())}fullyUpdate(e){_.XJ.isChanged(this._data,e,1,!1)&&(this.fireWillChange(),this._data=e,this.fireChange())}checkChanged(e){return Y.checkDataChanged(this._data,e)}toJSON(){return this.data}fromJSON(e){this.update(e)}get changeLocked(){return this._changeLocked}set changeLocked(e){this._changeLocked=e}fireWillChange(){this.onWillChangeEmitter.fire(this)}fireChange(){this._changeLocked||(this._version++,this._version>=Number.MAX_SAFE_INTEGER&&(this._version=0),this.onDataChangeEmitter.fire(this))}bindChange(e,n){this.toDispose.push(e.onDataChange(()=>{n&&n(),this.fireChange()}))}get version(){return this._version}};Z.type="EntityData";var X=class extends Z{getDefaultData(){return _.V_.createDefault(_.i1)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};X.type="OriginData";var Q=class extends Z{getDefaultData(){return _.V_.createDefault(_.Zp)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};Q.type="PositionData";var q=class extends Z{getDefaultData(){return _.V_.createDefault(_.z)}};q.type="RotationData";var J=class extends Z{getDefaultData(){return _.V_.createDefault(_.Of)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};J.type="ScaleData";var ee=class extends Z{getDefaultData(){return _.V_.createDefault(_.gE)}get width(){return this.data.width}get height(){return this.data.height}set width(e){this.update("width",e)}set height(e){this.update("height",e)}get locked(){return!!this.data.locked}set locked(e){this.update("locked",e)}};ee.type="SizeData";var et=class extends Z{getDefaultData(){return _.V_.createDefault(_.S9)}get x(){return this.data.x}get y(){return this.data.y}set x(e){this.update("x",e)}set y(e){this.update("y",e)}};et.type="SkewData";var{fixZero:en}=_.E9;(e=>{function n(e,n){return n&&n.apply(e,e),en(e),e}function r(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x),y:-(i.height*o.y)},r)}function i(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x)+i.width,y:-(i.height*o.y)},r)}function o(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x),y:-(i.height*o.y)+i.height},r)}function s(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x)+i.width,y:-(i.height*o.y)+i.height},r)}e.getPointWithMatrix=n,e.getBounds=function(e,n){let a=new _.Ae;if(!n||n.isSimple()){let{size:r,origin:i}=e;a.x=-(r.width*i.x)+(n?.tx||0),a.y=-(r.height*i.y)+(n?.ty||0),a.width=r.width,a.height=r.height,en(a)}else{let l=r(e,n),h=i(e,n),c=o(e,n),u=s(e,n);a.x=Math.min(l.x,h.x,c.x,u.x),a.y=Math.min(l.y,h.y,c.y,u.y),a.width=Math.max(l.x,h.x,c.x,u.x)-a.x,a.height=Math.max(l.y,h.y,c.y,u.y)-a.y}return a},e.applyMatrix=function(e,r){let i=new _.Ae;if(r.isSimple())i.x=e.x+r.tx,i.y=e.y+r.ty,i.width=e.width,i.height=e.height,en(i);else{let o=n(e.leftTop,r),s=n(e.rightTop,r),a=n(e.leftBottom,r),l=n(e.rightBottom,r);i.x=Math.min(o.x,s.x,a.x,l.x),i.y=Math.min(o.y,s.y,a.y,l.y),i.width=Math.max(o.x,s.x,a.x,l.x)-i.x,i.height=Math.max(o.y,s.y,a.y,l.y)-i.y}return i},e.getLeftPointFromBounds=function(e,n){let a=r(e,n),l=i(e,n);return[a,l,o(e,n),s(e,n)].sort((e,n)=>e.x-n.x)[0]},e.getTopPointFromBounds=function(e,n){let a=r(e,n),l=i(e,n);return[a,l,o(e,n),s(e,n)].sort((e,n)=>e.y-n.y)[0]},e.getCenter=function(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x)+i.width/2,y:-(i.height*o.y)+i.height/2},r)},e.getTopLeft=r,e.getTopCenter=function(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x)+i.width/2,y:-(i.height*o.y)},r)},e.getTopRight=i,e.getLeftCenter=function(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x),y:-(i.height*o.y)+i.height/2},r)},e.getRightCenter=function(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x)+i.width,y:-(i.height*o.y)+i.height/2},r)},e.getBottomLeft=o,e.getBottomCenter=function(e,r){let{size:i,origin:o}=e;return n({x:-(i.width*o.x)+i.width/2,y:-(i.height*o.y)+i.height},r)},e.getBottomRight=s})(g||(g={}));var er=class extends Z{constructor(e){super(e),this._worldTransform=new _.y3,this._localTransform=new _.y3,this.mutationCache=new Map,this.sizeToScale=!1,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0,this.bindChange(this.entity.addData(Q)),this.bindChange(this.entity.addData(ee)),this.bindChange(this.entity.addData(X)),this.bindChange(this.entity.addData(J)),this.bindChange(this.entity.addData(et),()=>this.updateSkew()),this.bindChange(this.entity.addData(q),()=>this.updateSkew())}get children(){return this._children||[]}clearChildren(){this._children&&this._children.slice().forEach(e=>{e.setParent(void 0)})}get isContainer(){return!!this._children&&this._children.length>0}fireChange(){this.changeLocked||(this._localID++,this.mutationCache.clear(),super.fireChange())}get localTransform(){return this.updateLocalTransformMatrix(),this._localTransform}get worldTransform(){return this.updateTransformMatrix(),this._worldTransform}getDefaultData(){return _.V_.createDefault(_.hY)}update(e){e.position&&this.entity.updateData(Q,e.position),e.size&&this.entity.updateData(ee,e.size),e.origin&&this.entity.updateData(X,e.origin),e.scale&&this.entity.updateData(J,e.scale),e.skew&&this.entity.updateData(et,e.skew),void 0!==e.rotation&&this.entity.updateData(q,e.rotation)}get position(){return this.entity.getData(Q)}set position(e){this.entity.updateData(Q,e)}get size(){return this.entity.getData(ee)}set size(e){this.entity.updateData(ee,e)}get origin(){return this.entity.getData(X)}set origin(e){this.entity.updateData(X,e)}get scale(){return this.entity.getData(J)}set scale(e){this.entity.updateData(J,e)}get skew(){return this.entity.getData(et)}set skew(e){this.entity.updateData(et,e)}get rotation(){return this.entity.getData(q).data}set rotation(e){this.entity.updateData(q,e)}get data(){return _.pL.toJSON(this)}updateSkew(){let{rotation:e}=this;this._cx=Math.cos(e+this.skew.y),this._sx=Math.sin(e+this.skew.y),this._cy=-Math.sin(e-this.skew.x),this._sy=Math.cos(e-this.skew.x),this._localID++}updateLocalTransformMatrix(){let e=this._localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x,e.ty=this.position.y,this._currentLocalID=this._localID,this._parentID=-1)}get localID(){return this._localID}get worldID(){return this._worldID}updateTransformMatrix(){let e=this._localTransform;this.updateLocalTransformMatrix();let n=_.y3.TEMP_MATRIX,r=0;if(this.parent&&(n=this.parent.worldTransform,r=this.parent._worldID),this._parentID!==r){let i=n,o=this._worldTransform;o.a=e.a*i.a+e.b*i.c,o.b=e.a*i.b+e.b*i.d,o.c=e.c*i.a+e.d*i.c,o.d=e.c*i.b+e.d*i.d,o.tx=e.tx*i.a+e.ty*i.c+i.tx,o.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=r,this._worldID++}}setFromMatrix(e){let{a:n,b:r,c:i,d:o}=e,s=-Math.atan2(-i,o),a=Math.atan2(r,n),l=Math.abs(s+a);l<1e-5||1e-5>Math.abs(_._b-l)?(this.rotation=a,this.skew.x=this.skew.y=0):(this.rotation=0,this.skew.x=s,this.skew.y=a),this.scale.x=Math.sqrt(n*n+r*r),this.scale.y=Math.sqrt(i*i+o*o),this.position.x=e.tx,this.position.y=e.ty,this.fireChange()}getMutationCache(e,n){if(this.mutationCache.has(e))return this.mutationCache.get(e);let r=n();return this.mutationCache.set(e,r),r}get bounds(){if(this.isContainer){let e=this._children;return _.Ae.enlarge(e.map(e=>e.bounds))}return g.getBounds(this,this.worldTransform)}get boundsWithoutRotation(){let{center:e}=this.bounds,{worldScale:n}=this,r=this.localSize,i=n.x*r.width,o=n.y*r.height,s={x:e.x-i/2,y:e.y-o/2};return new _.Ae(s.x,s.y,i,o)}get localSize(){let{size:e}=this;if(this.isContainer){let n=_.Ae.enlarge(this.children.map(e=>e.localBounds));e={width:n.width,height:n.height}}return{width:e.width,height:e.height}}get worldSize(){let{localSize:e}=this,{worldScale:n}=this;return{width:e.width*n.x,height:e.height*n.y}}get localBounds(){if(this.isContainer){let e=this._children,n=_.Ae.enlarge(e.map(e=>e.localBounds));return g.applyMatrix(n,this.localTransform)}return this.getMutationCache("localBounds",()=>g.getBounds(this,this.localTransform))}contains(e,n,r){if(this.isContainer)return this.bounds.contains(e,n);let i=this.worldTransform.applyInverse({x:e,y:n}),{width:o,height:s}=this.size;if(0===o||0===s)return!1;let a=-o*this.origin.x,l=-s*this.origin.y;return r?new _.Cd(a+o/2,l+s/2,Math.min(o/2,s/2)).contains(i.x,i.y):!!(i.x>=a)&&!!(i.x<a+o)&&!!(i.y>=l)&&!!(i.y<l+s)}get parent(){return this._parent}isParent(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}isParentTransform(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}setParent(e,n=!0){this._parent!==e&&(this._parentChangedDispose&&(this._parentChangedDispose.dispose(),this._parentChangedDispose=void 0),this._parentID=-1,e&&n&&(e._children||(e._children=[]),e._children.push(this),this._parentChangedDispose=new _.K4,this.toDispose.push(this._parentChangedDispose),this._parentChangedDispose.pushAll([e.onDispose(()=>{this.setParent(void 0)}),_.JT.create(()=>{let n=e._children.indexOf(this);-1!==n&&e._children.splice(n,1)})])),this._parent=e,this.fireChange())}intersects(e){return(!!this.isContainer||0!==this.size.width&&0!==this.size.height)&&_.Ae.intersectsWithRotation(this.boundsWithoutRotation,this.worldRotation,e,0)}get worldScale(){let{parent:e}=this,n=e?e.worldScale:{x:1,y:1};return{x:this.scale.x*n.x,y:this.scale.y*n.y}}get worldRotation(){let{parent:e}=this;return e?_.RZ.wrap(this.rotation+e.worldRotation):_.RZ.wrap(this.rotation)}get worldDegree(){return Math.round(this.worldRotation*_.jl)}get localOrigin(){let e=this.localTransform,n=this.localBounds;return e.apply({x:this.origin.x*n.width,y:this.origin.y*n.height})}get worldOrigin(){let e=this.worldTransform,{bounds:n}=this;return e.apply({x:this.origin.x*n.width,y:this.origin.y*n.height})}widthToScaleX(e,n){return e/(n&&this.parent?this.parent.worldScale.x:1)/this.localSize.width}heightToScaleY(e,n){return e/(n&&this.parent?this.parent.worldScale.y:1)/this.localSize.height}sizeToScaleValue(e,n){return{x:this.widthToScaleX(e.width,n),y:this.heightToScaleY(e.height,n)}}};er.type="TransformData",(l=er||(er={})).isParentOrChildrenTransform=function(e,n){let r=n.getData(l);if(!r)return!1;for(let n of e.values()){let e=n.getData(l);if(e&&(e.isParent(r)||r.isParent(e)))return!0}return!1};var ei=class{constructor(){this.execMap=new Map}push(e,n){let{execMap:r}=this,i=r.get(e);i||(i=(0,x.throttle)(n,0),r.set(e,i)),i()}dispose(){this.execMap.clear()}};function eo(e,n,r){let i=document.createEvent("MouseEvent");return i.initMouseEvent(e,!0,!0,void 0,0,0,0,n,r,!1,!1,!1,!1,0,null),i}var es=class{constructor(e={}){this.onDragStartEmitter=new _.Q5,this.onDragEndEmitter=new _.Q5,this.onDragEmitter=new _.Q5,this._stopGlobalEventNames=["mouseenter","mouseleave","mouseover","mouseout","contextmenu"],this.onDrag=this.onDragEmitter.event,this.onDragStart=this.onDragStartEmitter.event,this.onDragEnd=this.onDragEndEmitter.event,this._lastPos={x:0,y:0},this._updateDragScroll=e=>{if(!this._playgroundConfigEntity)return;let n=this._playgroundConfigEntity.config,r=e.endPos,{scrollX:i,width:o,height:s,scrollY:a}=n;r.x>o+i-20?this._startScrollX(i,!0):r.x<i+20?this._startScrollX(i,!1):this._stopScrollX(),r.y>s+a-20?this._startScrollY(a,!0):r.y<a+20?this._startScrollY(a,!1):this._stopScrollY()},this._disposed=!1,e.onDragStart&&this.onDragStart(n=>e.onDragStart(n,this.context)),e.onDrag&&this.onDrag(n=>e.onDrag(n,this.context)),e.onDragEnd&&this.onDragEnd(n=>e.onDragEnd(n,this.context)),e.stopGlobalEventNames&&(this._stopGlobalEventNames=e.stopGlobalEventNames)}get isStarted(){return!!this._promise}start(e,n,r,i){if(this._disposed)return Promise.resolve();if(this._promise)return this._promise;this.context=i,this.localId=(0,_.oN)(),this._addListeners(),this._promise=new Promise(e=>{this._resolve=e}),this._playgroundConfigEntity=r;let o=eo("mousedown",e,n);return this._startPos=this.getRelativePos(o),this.onDragStartEmitter.fire(this.getDragEvent(o)),this._promise}stop(e,n){if(this._disposed||!this._promise)return;let r=eo("mouseup",e,n);this.handleEvent(r)}dispose(){this._disposed||(this._stopScrollX(),this._stopScrollY(),this._disposed=!0,this.onDragEmitter.dispose(),this.onDragStartEmitter.dispose(),this.onDragEndEmitter.dispose(),this._finalize())}handleEvent(e){switch(e.type){case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._stopScrollX(),this._stopScrollY(),this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":let n=eo("mouseup",e.clientX,e.clientY);this._evtMouseUp(n);break;default:e.preventDefault(),e.stopPropagation()}}get scale(){return this._playgroundConfigEntity?this._playgroundConfigEntity.finalScale:1}getRelativePos(e){return this._playgroundConfigEntity?this._playgroundConfigEntity.getPosFromMouseEvent(e,!1):{x:e.clientX,y:e.clientY}}getDragEvent(e){let n=this._startPos,{scale:r}=this;switch(e.type){case"mousedown":return this._lastPos=n,Object.assign(e,{id:this.localId,startPos:n,endPos:n,scale:r,movingDelta:{x:0,y:0},isStart:!0,isMoving:!1});case"mousemove":let i=this.getRelativePos(e),o={x:i.x-this._lastPos.x,y:i.y-this._lastPos.y};return this._lastPos=i,Object.assign(e,{id:this.localId,startPos:n,endPos:i,scale:r,isStart:!0,movingDelta:o,isMoving:!0});case"mouseup":return this._lastPos={x:0,y:0},Object.assign(e,{id:this.localId,startPos:n,endPos:this.getRelativePos(e),movingDelta:{x:0,y:0},scale:r,isStart:!1,isMoving:!1});default:throw Error("unknown event")}}_finalize(){let e=this._resolve;this._removeListeners(),this._startPos=void 0,this._promise=void 0,this._resolve=void 0,e&&e()}_evtMouseMove(e){e.preventDefault(),e.stopPropagation(),this._lastMouseMoveEvent=e;let n=this.getDragEvent(e);this._updateDragScroll(n),this.onDragEmitter.fire(n)}_evtMouseUp(e){this._lastMouseMoveEvent=void 0,e.preventDefault(),e.stopPropagation(),(0===e.button||1===e.button)&&(this.onDragEndEmitter.fire(this.getDragEvent(e)),this._finalize())}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.stop(NaN,NaN)}_addListeners(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),this._stopGlobalEventNames.forEach(e=>{document.addEventListener(e,this,!0)})}_removeListeners(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),this._stopGlobalEventNames.forEach(e=>{document.removeEventListener(e,this,!0)})}_startScrollX(e,n){if(this._scrollXInterval)return;let r=window.setInterval(()=>{this._scrollXInterval&&this.fireScroll("scrollX",n)},20);this._scrollXInterval={interval:r,origin:e}}_stopScrollX(){this._scrollXInterval&&(clearInterval(this._scrollXInterval.interval),this._scrollXInterval=void 0)}_startScrollY(e,n){if(this._scrollYInterval)return;let r=window.setInterval(()=>{this.fireScroll("scrollY",n)},20);this._scrollYInterval={interval:r,origin:e}}_stopScrollY(){this._scrollYInterval&&(clearInterval(this._scrollYInterval.interval),this._scrollYInterval=void 0)}fireScroll(e,n){let r="scrollY"===e?this._scrollYInterval:this._scrollXInterval;if(!r)return;let i=r.origin=n?r.origin+4:r.origin-4,o=this._playgroundConfigEntity.config[e];this._playgroundConfigEntity.updateConfig({[e]:i});let s=this._playgroundConfigEntity.config[e];if(s!==o){let n=this._lastMouseMoveEvent,i={x:"scrollX"===e?s-r.origin:0,y:"scrollY"===e?s-r.origin:0},o=eo("mousemove",n.clientX+i.x,n.clientY+i.y),a=this.getDragEvent(o);this.onDragEmitter.fire(a)}}};(h=es||(es={})).startDrag=function(e,n,r={}){y&&y.stop(NaN,NaN);let i=y=new h({onDragStart(e,n){r.onDragStart&&r.onDragStart(e,n)},onDrag(e,n){r.onDrag&&r.onDrag(e,n)},onDragEnd(e,n){r.onDragEnd&&r.onDragEnd(e,n),i.dispose(),y===i&&(y=void 0)}});return i.start(e,n,r.config,r.context),_.JT.create(()=>{i.stop(0,0),i.dispose(),y===i&&(y=void 0)})};var ea=0;function el(e){ea++,requestAnimationFrame(function e(n){ea<=0||(requestAnimationFrame(e),T.update(n))});let n=!1,r=new T.Tween(e.from).to(e.to,e.duration).easing(e.easing||T.Easing.Quadratic.Out).onUpdate(()=>{!n&&e.onUpdate&&e.onUpdate(e.from)}).onComplete(()=>{!n&&(n=!0,ea--,e.onComplete&&e.onComplete(e.from))}).start();return _.JT.create(()=>{!n&&(n=!0,ea--,r.stop(),e.onDispose&&e.onDispose(e.from))})}function eh(e){let[n,r]=e.overflow,[i,o]=e._delta,[s,a]=e._direction;(n<0&&i>0&&s<0||n>0&&i<0&&s>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&o>0&&a<0||r>0&&o<0&&a>0)&&(e._movement[1]=e._movementBound[1])}var ec={toVector:(e,n)=>(void 0===e&&(e=n),Array.isArray(e)?e:[e,e]),add:(e,n)=>[e[0]+n[0],e[1]+n[1]],sub:(e,n)=>[e[0]-n[0],e[1]-n[1]],addTo(e,n){e[0]+=n[0],e[1]+=n[1]},subTo(e,n){e[0]-=n[0],e[1]-=n[1]}};function eu(e,n,r){return 0===n||Math.abs(n)===1/0?Math.pow(e,5*r):e*n*r/(n+r*e)}function ed(e,n,r,i=.15){return 0===i?Math.max(n,Math.min(e,r)):e<n?-eu(n-e,r-n,i)+n:e>r?+eu(e-r,r-n,i)+r:e}var ep={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ef(e){return e?e[0].toUpperCase()+e.slice(1):""}var eg=["enter","leave"],ey=["gotpointercapture","lostpointercapture"];function em(e){return"touches"in e}function ev(e){return em(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function eb(e){return em(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function e_(e,n){try{let r=n.clientX-e.clientX,i=n.clientY-e.clientY,o=(n.clientX+e.clientX)/2,s=(n.clientY+e.clientY)/2,a=Math.hypot(r,i);return{angle:-(180*Math.atan2(r,i))/Math.PI,distance:a,origin:[o,s]}}catch{}return null}function eE(e,n){let[r,i]=Array.from(e.touches).filter(e=>n.includes(e.identifier));return e_(r,i)}function ew(e){let n=eb(e);return em(e)?n.identifier:n.pointerId}function ex(e){let n=eb(e);return[n.clientX,n.clientY]}function eC(e){let{deltaX:n,deltaY:r,deltaMode:i}=e;return 1===i?(n*=40,r*=40):2===i&&(n*=800,r*=800),[n,r]}function eS(e,...n){return"function"==typeof e?e(...n):e}function eD(){}function eN(e,n){return Object.assign({},n,e||{})}var eO=class{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?eS(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){let n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:n,config:r,shared:i}=this;n.args=this.args;let o=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){let n={};if("buttons"in e&&(n.buttons=e.buttons),"shiftKey"in e){let{shiftKey:r,altKey:i,metaKey:o,ctrlKey:s}=e;Object.assign(n,{shiftKey:r,altKey:i,metaKey:o,ctrlKey:s})}return n}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,o=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){let e=n._delta.map(Math.abs);ec.addTo(n._distance,e)}this.axisIntent&&this.axisIntent(e);let[s,a]=n._movement,[l,h]=r.threshold,{_step:c,values:u}=n;if(r.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(s)>=l&&u[0]),!1===c[1]&&(c[1]=Math.abs(a)>=h&&u[1])):(!1===c[0]&&(c[0]=Math.abs(s)>=l&&Math.sign(s)*l),!1===c[1]&&(c[1]=Math.abs(a)>=h&&Math.sign(a)*h)),n.intentional=!1!==c[0]||!1!==c[1],!n.intentional)return;let d=[0,0];if(r.hasCustomTransform){let[e,n]=u;d[0]=!1!==c[0]?e-c[0]:0,d[1]=!1!==c[1]?n-c[1]:0}else d[0]=!1!==c[0]?s-c[0]:0,d[1]=!1!==c[1]?a-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(d);let p=n.offset,f=n._active&&!n._blocked||n.active;f&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=eS(r.bounds,n)),this.setup&&this.setup()),n.movement=d,this.computeOffset()));let[g,y]=n.offset,[[m,b],[_,E]]=n._bounds;n.overflow=[g<m?-1:+(g>b),y<_?-1:+(y>E)],n._movementBound[0]=!!n.overflow[0]&&(!1===n._movementBound[0]?n._movement[0]:n._movementBound[0]),n._movementBound[1]=!!n.overflow[1]&&(!1===n._movementBound[1]?n._movement[1]:n._movementBound[1]);let w=n._active&&r.rubberband||[0,0];if(n.offset=function(e,[n,r],[i,o]){let[[s,a],[l,h]]=e;return[ed(n,s,a,i),ed(r,l,h,o)]}(n._bounds,n.offset,w),n.delta=ec.sub(n.offset,p),this.computeMovement(),f&&(!n.last||o>32)){n.delta=ec.sub(n.offset,p);let e=n.delta.map(Math.abs);ec.addTo(n.distance,e),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&o>0&&(n.velocity=[e[0]/o,e[1]/o],n.timeDelta=o)}}emit(){let e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;let i=this.handler({...n,...e,[this.aliasKey]:e.values});void 0!==i&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}},eM=class extends eO{constructor(){super(...arguments),this.aliasKey="xy"}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ec.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ec.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let n=this.state,r=this.config;if(!n.axis&&e){let i="object"==typeof r.axisThreshold?r.axisThreshold[ev(e)]:r.axisThreshold;n.axis=function([e,n],r){let i=Math.abs(e),o=Math.abs(n);return i>o&&i>r?"x":o>i&&o>r?"y":void 0}(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}},eI=class extends eM{constructor(){super(...arguments),this.ingKey="wheeling"}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){let n=this.state;n._delta=eC(e),ec.addTo(n._movement,n._delta),eh(n),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},eT=class extends eM{constructor(){super(...arguments),this.ingKey="scrolling"}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();let n=this.state,r=function(e){let{scrollX:n,scrollY:r,scrollLeft:i,scrollTop:o}=e.currentTarget;return[n??i??0,r??o??0]}(e);n._delta=ec.sub(r,n._values),ec.addTo(n._movement,n._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},ek=class extends eO{constructor(){super(...arguments),this.ingKey="pinching",this.aliasKey="da"}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){let{type:e,movement:n,lastOffset:r}=this.state;"wheel"===e?this.state.offset=ec.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){let{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){let e=this.state,[n,r]=e._movement;if(!e.axis){let i=30*Math.abs(n)-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){let e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);let n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(e=>r.has(e))||r.size<2)return;this.start(e),n._touchIds=Array.from(r).slice(0,2);let i=eE(e,n._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);let n=this.state,r=n._pointerEvents,i=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(e=>i.has(e))||(r.size<2&&r.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);let o=e_(...Array.from(r.values()));o&&this.pinchStart(e,o)}pinchStart(e,n){this.state.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;let n=eE(e,this.state._touchIds);n&&this.pinchMove(e,n)}pointerMove(e){let n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;let r=e_(...Array.from(n.values()));r&&this.pinchMove(e,r)}pinchMove(e,n){let r=this.state,i=r._values[1],o=n.angle-i,s=0;Math.abs(o)>270&&(s+=Math.sign(o)),this.computeValues([n.distance,n.angle-360*s]),r.origin=n.origin,r.turns=s,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){let n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();let n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;let n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];let r=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=ec.sub(n._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){let n=this.config.modifierKey;(!n||(Array.isArray(n)?n.find(n=>e[n]):e[n]))&&(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();let n=this.state,r=-eC(e)[1]/100*n.offset[0];Math.abs(r)>.1&&(r=.1*Math.sign(r)),n._delta=[r,0],ec.addTo(n._movement,n._delta),eh(n),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){let n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this)),e("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},eP=class extends eM{constructor(){super(...arguments),this.ingKey="moving"}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(ex(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;let n=ex(e),r=this.state;r._delta=ec.sub(n,r._values),ec.addTo(r._movement,r._delta),this.computeValues(n),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},eA=class extends eM{constructor(){super(...arguments),this.ingKey="hovering"}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(ex(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;let n=this.state;if(!n._active)return;n._active=!1;let r=ex(e);n._movement=n._delta=ec.sub(r,n._values),this.computeValues(r),this.compute(e),n.delta=n.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},eL=e=>e,ej={enabled:(e=!0)=>e,eventOptions:(e,n,r)=>({...r.shared.eventOptions,...e}),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return ec.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?ec.toVector(e):void 0,transform(e,n,r){let i=e||r.shared.transform;return this.hasCustomTransform=!!i,i||eL},threshold:e=>ec.toVector(e,0)},eR=0,ez={...ej,axis(e,n,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:(e=eR)=>e,bounds(e={}){if("function"==typeof e)return n=>ez.bounds(e(n));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:n=-1/0,right:r=1/0,top:i=-1/0,bottom:o=1/0}=e;return[[n,r],[i,o]]}},eV={ArrowRight:(e,n=1)=>[e*n,0],ArrowLeft:(e,n=1)=>[-1*e*n,0],ArrowUp:(e,n=1)=>[0,-1*e*n],ArrowDown:(e,n=1)=>[0,e*n]},eF=class extends eM{constructor(){super(...arguments),this.ingKey="dragging"}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=ez.bounds(i)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let n=this.config,r=this.state;if(null!=e.buttons&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):-1!==n.pointerButtons&&n.pointerButtons!==e.buttons))return;let i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&r._pointerActive||(this.start(e),this.setupPointer(e),r._pointerId=ew(e),r._pointerActive=!0,this.computeValues(ex(e)),this.computeInitial(),n.preventScrollAxis&&"mouse"!==ev(e)?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let n=this.state,r=this.config;if(!n._pointerActive)return;let i=ew(e);if(void 0!==n._pointerId&&i!==n._pointerId)return;let o=ex(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=ec.sub(o,n._values),this.computeValues(o)),ec.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(!n.axis)return;else if(n.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}let n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;let i=ew(e);if(void 0!==n._pointerId&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[o,s]=n._distance;if(n.tap=o<=r.tapsThreshold&&s<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{let[e,i]=n._delta,[o,s]=n._movement,[a,l]=r.swipe.velocity,[h,c]=r.swipe.distance,u=r.swipe.duration;if(n.elapsedTime<u){let r=Math.abs(e/n.timeDelta),u=Math.abs(i/n.timeDelta);r>a&&Math.abs(o)>h&&(n.swipe[0]=Math.sign(e)),u>l&&Math.abs(s)>c&&(n.swipe[1]=Math.sign(i))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){var n;this.state._preventScroll=!1,"persist"in(n=e)&&"function"==typeof n.persist&&n.persist();let r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let n=eV[e.key];if(n){let r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,ec.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in eV&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},e$="undefined"!=typeof window&&window.document&&window.document.createElement;function eB(){return e$&&"ontouchstart"in window}var eH={isBrowser:e$,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:eB(),touchscreen:eB()||e$&&window.navigator.maxTouchPoints>1,pointer:e$&&"onpointerdown"in window,pointerLock:e$&&"exitPointerLock"in window.document},eK={...ej,device(e,n,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!eH.touch&&eH.gesture)return"gesture";if(eH.touch&&i)return"touch";if(eH.touchscreen){if(eH.pointer)return"pointer";if(eH.touch)return"touch"}},bounds(e,n,{scaleBounds:r={},angleBounds:i={}}){let o=e=>{let n=eN(eS(r,e),{min:-1/0,max:1/0});return[n.min,n.max]},s=e=>{let n=eN(eS(i,e),{min:-1/0,max:1/0});return[n.min,n.max]};return"function"!=typeof r&&"function"!=typeof i?[o(),s()]:e=>[o(e),s(e)]},threshold(e,n,r){return this.lockDirection="lock"===r.axis,ec.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e},eU={...ez,mouseOnly:(e=!0)=>e},eW={...ez,mouseOnly:(e=!0)=>e},eG=10,eY={mouse:0,touch:0,pen:8},eZ={...ez,device(e,n,{pointer:{touch:r=!1,lock:i=!1,mouse:o=!1}={}}){return(this.pointerLock=i&&eH.pointerLock,eH.touch&&r)?"touch":this.pointerLock?"mouse":eH.pointer&&!o?"pointer":eH.touch?"touch":"mouse"},preventScrollAxis(e,n,{preventScroll:r}){if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,eH.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,n,{pointer:{capture:r=!0,buttons:i=1,keys:o=!0}={}}){return this.pointerButtons=i,this.keys=o,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,n,{filterTaps:r=!1,tapsThreshold:i=3,axis:o}){let s=ec.toVector(e,r?i:+!!o);return this.filterTaps=r,this.tapsThreshold=i,s},swipe({velocity:e=.5,distance:n=50,duration:r=250}={}){return{velocity:this.transform(ec.toVector(e)),distance:this.transform(ec.toVector(n)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?{...eY,...e}:eY,keyboardDisplacement:(e=eG)=>e},eX=new Map,eQ=new Map;function eq(e){eX.set(e.key,e.engine),eQ.set(e.key,e.resolver)}var eJ={key:"drag",engine:eF,resolver:eZ},e0={key:"hover",engine:eA,resolver:eW},e1={key:"move",engine:eP,resolver:eU},e2={key:"pinch",engine:ek,resolver:eK},e3={key:"scroll",engine:eT,resolver:ez},e4={key:"wheel",engine:eI,resolver:ez},e5=class{constructor(){this._timeouts=new Map}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){let n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},e6=class{constructor(e,n){this._listeners=new Set,this._ctrl=e,this._gestureKey=n}add(e,n,r,i,o){let s=this._listeners,a=function(e,n=""){let r=ep[e];return e+(r&&r[n]||n)}(n,r),l={...this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},...o};e.addEventListener(a,i,l);let h=()=>{e.removeEventListener(a,i,l),s.delete(h)};return s.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},e8={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=eH.isBrowser?window:void 0)=>e,eventOptions:({passive:e=!0,capture:n=!1}={})=>({passive:e,capture:n}),transform:e=>e};function e9(e={},n){let r={};for(let[i,o]of Object.entries(n))switch(typeof o){case"function":r[i]=o.call(r,e[i],i,e);break;case"object":r[i]=e9(e[i],o);break;case"boolean":o&&(r[i]=e[i])}return r}var e7=class{constructor(e){var n,r;this.gestures=new Set,this._targetEventStore=new e6(this),this.gestureEventStores={},this.gestureTimeoutStores={},this.handlers={},this.config={},this.pointerIds=new Set,this.touchIds=new Set,this.state={shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}},n=this,(r=e).drag&&te(n,"drag"),r.wheel&&te(n,"wheel"),r.scroll&&te(n,"scroll"),r.move&&te(n,"move"),r.pinch&&te(n,"pinch"),r.hover&&te(n,"hover")}setEventIds(e){if(em(e))return this.touchIds=new Set(Array.from(e.touches).filter(n=>n.target===e.currentTarget||e.currentTarget?.contains?.(n.target)).map(e=>e.identifier)),this.touchIds;if("pointerId"in e)return"pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=function(e,n,r={}){let{target:i,eventOptions:o,window:s,enabled:a,transform:l,...h}=e;if(r.shared=e9({target:i,eventOptions:o,window:s,enabled:a,transform:l},e8),n){let e=eQ.get(n);r[n]=e9({shared:r.shared,...h},e)}else for(let e in h){let n=eQ.get(e);n&&(r[e]=e9({shared:r.shared,...h[e]},n))}return r}(e,n,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let n,r=this.config.shared,i={};if(!r.target||(n=r.target())){if(r.enabled){for(let r of this.gestures){let o=this.config[r],s=tt(i,o.eventOptions,!!n);o.enabled&&new(eX.get(r))(this,e,r).bind(s)}let o=tt(i,r.eventOptions,!!n);for(let n in this.nativeHandlers)o(n,"",r=>this.nativeHandlers[n]({...this.state.shared,event:r,args:e}),void 0,!0)}for(let e in i)i[e]=function(...e){return 0===e.length?eD:1===e.length?e[0]:function(){let n;for(let r of e)n=r.apply(this,arguments)||n;return n}}(...i[e]);if(!n)return i;for(let e in i){let{device:r,capture:o,passive:s}=function(e){let n=e.substring(2).toLowerCase(),r=!!~n.indexOf("passive");r&&(n=n.replace("passive",""));let i=ey.includes(n)?"capturecapture":"capture",o=!!~n.indexOf(i);return o&&(n=n.replace("capture","")),{device:n,capture:o,passive:r}}(e);this._targetEventStore.add(n,r,"",i[e],{capture:o,passive:s})}}}};function te(e,n){e.gestures.add(n),e.gestureEventStores[n]=new e6(e,n),e.gestureTimeoutStores[n]=new e5}var tt=(e,n,r)=>(i,o,s,a={},l=!1)=>{let h=a.capture??n.capture,c=a.passive??n.passive,u=l?i:function(e,n="",r=!1){let i=ep[e],o=i&&i[n]||n;return"on"+ef(e)+ef(o)+(!function(e=!1,n){return e&&!eg.includes(n)}(r,o)?"":"Capture")}(i,o,h);r&&c&&(u+="Passive"),e[u]=e[u]||[],e[u].push(s)},tn=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function tr(e,n,r,i,o,s){if(!e.has(r)||!eX.has(i))return;let a=r+"Start",l=r+"End";o[i]=e=>{let i;return e.first&&a in n&&n[a](e),r in n&&(i=n[r](e)),e.last&&l in n&&n[l](e),i},s[i]=s[i]||{}}var ti=class{constructor(e,n,r,i,o){this._target=e,this._gestureKey=i,this._ctrl=new e7(n),this._ctrl.applyHandlers(n,o),this._ctrl.applyConfig({...r,target:e},i),this._ctrl.effect()}destroy(){this._ctrl.clean()}setConfig(e){this._ctrl.clean(),this._ctrl.applyConfig({...e,target:this._target},this._gestureKey),this._ctrl.effect()}},to=function(e,n,r){return([eJ,e2,e3,e4,e1,e0].forEach(eq),function(e,n,r){let{handlers:i,nativeHandlers:o,config:s}=function(e,n){let[r,i,o]=function(e){let n={},r={},i=new Set;for(let o in e)tn.test(o)?(i.add(RegExp.lastMatch),r[o]=e[o]):n[o]=e[o];return[r,n,i]}(e),s={};return tr(o,r,"onDrag","drag",s,n),tr(o,r,"onWheel","wheel",s,n),tr(o,r,"onScroll","scroll",s,n),tr(o,r,"onPinch","pinch",s,n),tr(o,r,"onMove","move",s,n),tr(o,r,"onHover","hover",s,n),{handlers:s,config:n,nativeHandlers:i}}(n,r||{});return new ti(e,i,s,void 0,o)})(e,n,r||{})},ts=class extends _.Pq{constructor(e,n){super(),this.target=e,this.config=n,this._pinching=!1,this.preventDefault();let r=new to(e,{onPinch:({origin:[e,n],first:r,last:i,movement:[o],offset:[s,a]})=>{this.handlePinch({first:r,last:i,originX:e,originY:n,newScale:s})}},{pinch:{scaleBounds:()=>this.getScaleBounds(),from:()=>[this.config.finalScale,0],modifierKey:["metaKey","ctrlKey"]}});this.toDispose.push(_.JT.create(()=>{r.destroy()}))}handlePinch(e){let{first:n,last:r,originX:i,originY:o,newScale:s}=e;if(Number.isNaN(e.newScale))return;n&&(this._pinching=!0),r&&(this._pinching=!1);let a=this.config.finalScale,l=this.config.getPosFromMouseEvent({clientX:i,clientY:o},!1),h={x:l.x/a*s,y:l.y/a*s};this.config.updateConfig({scrollX:this.config.config.scrollX+h.x-l.x,scrollY:this.config.config.scrollY+h.y-l.y,zoom:s})}getScaleBounds(){return{min:this.config.config.minZoom,max:this.config.config.maxZoom}}preventDefault(){let e=e=>e.preventDefault();document.addEventListener("gesturestart",e),document.addEventListener("gesturechange",e),this.toDispose.push(_.JT.create(()=>{document.removeEventListener("gesturestart",e),document.removeEventListener("gesturechange",e)}))}get pinching(){return this._pinching}},ta=e=>function(n,r){let i=`${r}Provider`;return(0,w.f3)(e)(n,i),(0,w.jt)()(n,i),{get(){return this[i]?.()},configurable:!0,enumerable:!0}},tl=Symbol("LazyInjectContext");Symbol("IS_LAZY_INJECT_CONTEXT_INJECTED");var th=Symbol("PlaygroundContext"),tc=Symbol("PlaygroundContextProvider"),tu=()=>ta(tc),td=e=>{e(tc).toDynamicValue(e=>()=>{if(e.container.isBound(th))return e.container.get(th)})},tp=Symbol("PlaygroundContainerFactory"),tf=Symbol("EntityManagerContribution"),tg=class extends Y{constructor(e){super(e),this.isInitialized=!0,this.ConfigDataRegistry=function(e){class n extends Z{getDefaultData(){return e.getDefaultConfig()}checkChanged(n){return e.checkChanged(this.data,n)}toJSON(){return super.toJSON()}}return Object.defineProperty(n,"type",{value:`_${e.type}DataMixin`}),n}(this),this.addData(this.ConfigDataRegistry),this.isInitialized=!1}getDefaultConfig(){return{}}checkChanged(e,n){return Y.checkDataChanged(e,n)}get config(){return this.getData(this.ConfigDataRegistry).data}updateConfig(e){this.updateData(this.ConfigDataRegistry,e)}onConfigChanged(e){return this.getData(this.ConfigDataRegistry).onDataChange(n=>e(n.data))}};tg.type="ConfigEntity";var ty=class{constructor(){this.toDispose=new _.K4,this.onEntityChangeEmitter=new _.Q5,this.onEntityLifeCycleEmitter=new _.Q5,this.onEntityDataChangeEmitter=new _.Q5,this.registryMap=new Map,this.dataRegistryMap=new Map,this.dataInjectorMap=new Map,this.entityInstanceMap=new Map,this.entityVersionMap=new Map,this.entityDataVersionMap=new Map,this.entityInstanceMapByType=new Map,this.configEntities=new Map,this.onEntityChange=this.onEntityChangeEmitter.event,this.onEntityDataChange=this.onEntityDataChangeEmitter.event,this.onEntityLifeCycleChange=this.onEntityLifeCycleEmitter.event,this.changeEntityLocked=!1,this.schedule=new ei,this.fireEntityChanged=e=>{let n="string"==typeof e?e:e.type,r=this.entityVersionMap.get(n)||0;r===Number.MAX_SAFE_INTEGER&&(r=0),this.entityVersionMap.set(n,r+1),this.changeEntityLocked||this.schedule.push(n,()=>{this.onEntityChangeEmitter.fire(n)})},this.fireEntityDataChanged=(e,n)=>{let r=this.entityDataVersionMap.get(n)||0;r===Number.MAX_SAFE_INTEGER&&(r=0),this.entityDataVersionMap.set(n,r+1),this.schedule.push(`${e}/${n}`,()=>{this.onEntityDataChangeEmitter.fire({entityType:e,entityDataType:n})})},this.fireEntityLifeCycleChanged=({type:e,entity:n})=>{this.schedule.push(`${e}/${n.id}`,()=>{this.onEntityLifeCycleEmitter.fire({type:e,entity:n})})},this.toDispose.pushAll([this.onEntityChangeEmitter,this.schedule])}init(){this.contributions.forEach(e=>e.registerEntityManager?.(this))}createEntity(e,n){if(!e.type)throw Error(`[EntityManager] createEntity need a type: ${e}`);if(this.configEntities.has(e.type))return this.configEntities.get(e.type);let r={entityManager:this,savedInManager:!0,...n},i=new e(r);return r.savedInManager&&this.saveEntity(i),i}isConfigEntity(e){return this.configEntities.has(e)}removeEntities(e){for(let n of this.getEntities(e).values())n.dispose()}removeEntityById(e){let n=this.getEntityById(e);return!!n&&(n.dispose(),!0)}resetEntities(e){this.getEntities(e).forEach(e=>{e.reset()})}resetEntity(e,n){let r=this.getEntity(e,n);r?.reset()}updateConfigEntity(e,n){let r=this.configEntities.get(e.type);r&&r.updateConfig(n)}getRegistryByType(e){return this.registryMap.get(e)}registerEntity(e){if(!e.type)throw Error(`Registry entity need a type: ${e.name}`);let n=this.registryMap.get(e.type);if(n){if(n!==e)throw Error(`Entity registry ${e.type} need a new type`);return}this.registryMap.set(e.type,e)}registerEntityData(e,n){if(!e.type)throw Error(`Registry entity data need a type: ${e.name}`);this.dataRegistryMap.get(e.type)||this.dataRegistryMap.set(e.type,e),!this.dataInjectorMap.get(e.type)&&n&&this.dataInjectorMap.set(e.type,n)}getDataRegistryByType(e){return this.dataRegistryMap.get(e)}getEntityById(e){return this.entityInstanceMap.get(e)}getEntity(e,n){let r=this.getEntities(e)[0];return!r&&n?this.createEntity(e):r}getEntities(e){return this.entityInstanceMapByType.get(e.type)||[]}getEntityDatas(e,n){return this.getEntities(e).map(e=>e.getData(n)).filter(e=>!!e)}hasEntity(e){return!!this.getEntity(e)}storeState({configOnly:e=!0}={}){let n=[];for(let r of this.entityInstanceMap.values())if((!e||r instanceof tg)&&r.toJSON&&r.toJSON){let e=r.toJSON();e&&n.push(e)}return n}restoreState(e){e&&Array.isArray(e)&&e.forEach(e=>{if(!e||!e.type||!e.id)return;let n=this.getRegistryByType(e.type);if(!n)return void console.warn(`Playground entity registry lost: ${e.type}`);let r=this.createEntity(n,{id:e.id});r.fromJSON&&r.fromJSON(e)})}saveEntity(e){let{id:n}=e;if(n&&this.entityInstanceMap.has(n))return void console.error(`Entity ${e.type} ${n} is created before`);this.entityInstanceMap.set(e.id,e);let r=this.entityInstanceMapByType.get(e.type);r||(r=[],this.entityInstanceMapByType.set(e.type,r)),e instanceof tg&&this.configEntities.set(e.type,e),r.push(e),e.onEntityChange(e=>{this.fireEntityChanged(e),this.fireEntityLifeCycleChanged({type:"update",entity:e})}),e.onDataChange(n=>{this.fireEntityDataChanged(e.type,n.data.type)}),e.toDispose.push(_.JT.create(()=>{this.removeEntity(e),this.fireEntityLifeCycleChanged({type:"delete",entity:e})})),e.getDefaultDataRegistries().forEach(n=>this.fireEntityDataChanged(e.type,n.type)),this.fireEntityChanged(e),this.fireEntityLifeCycleChanged({type:"add",entity:e})}removeEntity(e){if(this.entityInstanceMap.has(e.id)&&this.entityInstanceMapByType.has(e.type)){let n=this.entityInstanceMapByType.get(e.type);-1!==n.indexOf(e)&&(this.entityInstanceMapByType.set(e.type,n.filter(n=>n!==e)),this.entityInstanceMap.delete(e.id),this.configEntities.has(e.type)&&this.configEntities.delete(e.type),this.fireEntityChanged(e))}}reset(){for(let e of this.entityInstanceMap.values())e.reset()}getEntityVersion(e){return this.entityVersionMap.get("string"==typeof e?e:e.type)||0}getEntityDataVersion(e){return this.entityDataVersionMap.get("string"==typeof e?e:e.type)||0}dispose(){this.toDispose.dispose()}getDataInjector(e){return this.dataInjectorMap.get("string"==typeof e?e:e.type)}getService(e){return this.containerFactory?.get(e)}};K([(0,w.nx)(tf),(0,w.jt)()],ty.prototype,"contributions",2),K([tu()],ty.prototype,"context",2),K([(0,w.f3)(tp),(0,w.jt)()],ty.prototype,"containerFactory",2),K([(0,w.zY)()],ty.prototype,"init",1),ty=K([(0,w.b2)()],ty);var tm=Symbol("EntitiesDecorator"),tv=Symbol("EntitiesByDataDecorator"),tb=Symbol("PropertiesInjected");function t_(e,n){return Reflect.getMetadata(n,e.prototype)||[]}function tE(e){return Reflect.getMetadata(tb,e)||[]}function tw(e,n,r,i){return(o,s)=>{let a=Reflect.getMetadata(e,o);if(a||Reflect.defineMetadata(e,a=[],o),Array.isArray(n)||(n=[n]),n.forEach(e=>{a.includes(e)||a.push(e)}),i&&i(o,s),s&&r){let e=tE(o);return e.push(s),Reflect.defineMetadata(tb,e,o),{enumerable:!1,configurable:!1,get(){return r(this,s)}}}}}function tx(e){return tw(tm,e,n=>n.observeManager.get(e))}function tC(e){return tw(tm,e,n=>n.observeManager.getEntities(e))}function tS(e,n){return tw(tv,{entity:e,data:n},r=>r.observeManager.getEntityDatas(e,n))}var tD=Symbol("ProtectWheelArea"),tN=((c=tN||{})[c.BASE_LAYER=-2]="BASE_LAYER",c[c.TOOL_LAYER=-1]="TOOL_LAYER",c[c.NORMAL_LAYER=0]="NORMAL_LAYER",c),tO=Symbol("PipelineLayerFactory"),tM=class{constructor(){this.onSelectionChangedEmitter=new _.Q5,this.onSelectionChanged=this.onSelectionChangedEmitter.event,this.currentSelection=[],this.disposers=[]}get selection(){return this.currentSelection}isEmpty(){return 0===this.currentSelection.length}set selection(e){_.XJ.isArrayShallowChanged(this.currentSelection,e)&&(this.disposers.forEach(e=>e.dispose()),this.changeSelection(e),this.disposers=this.currentSelection.map(e=>e.onDispose(()=>{let n=this.currentSelection.filter(n=>n!==e);this.changeSelection(n)})))}changeSelection(e){this.currentSelection=e,this.onSelectionChangedEmitter.fire(this.currentSelection)}dispose(){this.onSelectionChangedEmitter.dispose()}};tM=K([(0,w.b2)()],tM);var tI=Symbol("StorageService"),tT=class{constructor(){this._prefix="__gedit:"}setData(e,n){this.storage[this.prefix(e)]=JSON.stringify(n)}getData(e,n){let r=this.storage[this.prefix(e)];return void 0===r?n:JSON.parse(r)}prefix(e){return`${this._prefix}${e}`}setPrefix(e){this._prefix=e}init(){"undefined"!=typeof window&&window.localStorage?this.storage=window.localStorage:this.storage={}}};K([(0,w.zY)()],tT.prototype,"init",1),tT=K([(0,w.b2)()],tT);var tk=Symbol("ClipboardService"),tP=class{constructor(){this.onClipboardChangedEmitter=new _.Q5,this.onClipboardChanged=this.onClipboardChangedEmitter.event}readText(){return this._currentData}writeText(e){this._currentData!==e&&(this._currentData=e,this.onClipboardChangedEmitter.fire(e))}};tP=K([(0,w.b2)()],tP);var tA=class{get rightPanelVisible(){return this.isRightPanelVisible}set rightPanelVisible(e){this.isRightPanelVisible=e}};tA=K([(0,w.b2)()],tA);var tL=class{constructor(){this.onLoggerEmitter=new _.Q5,this.onLogger=this.onLoggerEmitter.event}onAllLayersRendered(){this.onLoggerEmitter.fire({event:0})}onFlushRequest(e){e<=0||this.onLoggerEmitter.fire({event:1,props:{rfi:e,fps:1e3/e}})}dispose(){this.onLoggerEmitter.dispose()}};function tj({originRenderer:e,renderedCb:n}){return(0,k.useEffect)(()=>{n()},[]),e()||null}tL=K([(0,w.b2)()],tL);var tR=class{constructor(){this.layerEntitiesSelectorMap=new WeakMap,this.entityLayerMap=new Map,this.ableLayerMap=new Map}subscribeEntities(e,n){let r=this.getSelector(e);n.forEach(n=>{r.entities.includes(n)||r.entities.push(n);let i=this.entityLayerMap.get(n.type);i||(i=new Set,this.entityLayerMap.set(n.type,i)),i.add(e)})}subscribleEntityByData(e,n,r){let i=this.getSelector(e),o=this.entityLayerMap.get(n.type);o||(o=new Set,this.entityLayerMap.set(n.type,o)),o.add(e);let s=[n,r];i.datas.find(e=>e[0]===n&&e[1]===r)||i.datas.push(s)}getSelector(e){let n=this.layerEntitiesSelectorMap.get(e);return n||(n={entities:[],datas:[]},this.layerEntitiesSelectorMap.set(e,n)),n}getLayerEntities(e){let n=this.layerEntitiesSelectorMap.get(e);if(!n)return{entities:[],changed:!1};let r=new Set,i=new Map,o=!1;n.entities.forEach(e=>{let n=this.entityManager.getEntities(e),o=this.entityManager.getEntityVersion(e);for(let s of(i.set(e.type,o),n))r.add(s)});let s=[];for(let e of r.values())s.push(e);return tz(i,n.lastEntityVersion)&&(n.lastEntityVersion=i,o=!0),{entities:s,changed:o}}getLayerEntityDatas(e){let n=this.layerEntitiesSelectorMap.get(e);if(!n)return{datas:[],changed:!1};let r=[],i=new Map,o=!1;return n.datas.forEach(e=>{let[n,o]=e,s=this.entityManager.getEntityDatas(n,o),a=this.entityManager.getEntityDataVersion(o);for(let e of(i.set(o.type,a),s))r.push(e)}),tz(i,n.lastDataVersion)&&(n.lastDataVersion=i,o=!0),{datas:r,changed:o}}getLayerData(e){let n=this.getLayerEntities(e),r=this.getLayerEntityDatas(e);return{observeEntities:n.entities,observeDatas:r.datas,changed:r.changed||n.changed}}};function tz(e=new Map,n=new Map){if(e.size!==n.size)return!0;for(let r of e.keys())if(e.get(r)!==n.get(r))return!0;return!1}K([(0,w.f3)(ty)],tR.prototype,"entityManager",2),tR=K([(0,w.b2)()],tR);var tV=0,tF=class extends P.ConflatableMessage{constructor(e){super(`flush-layer-request_layer${tV++}`),this.layer=e}},t$=class{constructor(e,n){this.selector=e,this.isReady=!1,this.onAllLayersRenderedEmitter=new _.Q5,this.toDispose=new _.K4,this.layers=[],this.forceUpdates=new Set,this.layerAutorunMap=new Map,this.layerRenderedMap=new Map,this.layerFlushMessages=new Map,this.reactPortals=[],this.node=_.xF.createDivWithClass("gedit-playground-pipeline"),this.onAllLayersRendered=this.onAllLayersRenderedEmitter.event,this.toDispose.push(n.onEntityChange(e=>{let n=this.selector.entityLayerMap.get(e);n&&n.forEach(e=>this.updateLayer(e))})),this.toDispose.push(this.onAllLayersRenderedEmitter)}reportLayerRendered(e){this.layerRenderedMap.set(e,!0),Array.from(this.layerRenderedMap.values()).every(e=>e)&&(this.loggerService.onAllLayersRendered(),this.onAllLayersRenderedEmitter.fire(),window.REPORT_TTI_FOR_E2E&&window.REPORT_TTI_FOR_E2E(performance.now(),performance.getEntriesByType("resource")))}addLayer(e){if(this.layers.push(e),this.toDispose.push(e),this.layerFlushMessages.set(e,new tF(e)),e.pipelineNode=this.node,e.playgroundNode=this.node.parentElement,(e.autorun||e.render)&&!e.node&&(e.node=document.createElement("div")),e.node&&(this.node.appendChild(e.node),e.node.classList.add("gedit-playground-layer")),e.autorun){let n=e.autorun.bind(e);this.layerAutorunMap.set(e,n),e.autorun=()=>{this.updateLayer(e,!0)}}else if(e.render){this.layerRenderedMap.set(e,!1);let n=e.render.bind(e),r=function(e,n,r,i){let o=_.dG;function s(){let s,[,a]=(0,k.useState)({}),l=(0,k.useCallback)(()=>{r(e)},[e]);(0,k.useEffect)(()=>(o=()=>a({}),()=>{o=_.dG}));try{s=i.isReady?k.createElement(tj,{originRenderer:n,renderedCb:l}):k.createElement(k.Fragment,null)}catch(n){console.error(`Render Layer "${e.constructor.name}" error `,n),s=k.createElement(k.Fragment,null)}return A.createPortal(s,e.node)}return{autorun:()=>o(),portal:e.renderWithReactMemo?k.memo(s):s}}(e,n,this.reportLayerRendered.bind(this),this);this.reactPortals.push(r.portal),this.layerAutorunMap.set(e,r.autorun),e.render=()=>{this.updateLayer(e,!0)}}}flush(e){this.layers.forEach(n=>{this.updateLayer(n,e)})}ready(){this.layers.forEach(e=>{this.loadLayerEntities(e),e.onReady&&e.onReady()}),this.isReady=!0,this.flush(!0)}dispose(){this.toDispose.dispose(),this.node.remove()}processMessage(e){e instanceof tF&&this.onFlushRequest(e.layer)}loadLayerEntities(e){let n=this.selector.getLayerData(e);return n.changed&&e.observeManager.load(n.observeEntities,n.observeDatas),n.changed}onFlushRequest(e){if(!this.isReady||this.toDispose.disposed)return!1;let n=performance.now(),r=()=>{let e=performance.now()-n;e<4||this.loggerService.onFlushRequest(e)},i=this.layerAutorunMap.get(e),o=this.loadLayerEntities(e);if(i&&(o||this.forceUpdates.has(e))){this.forceUpdates.delete(e);try{i()}catch(e){console.error(e)}return r(),!0}return r(),!1}updateLayer(e,n){n&&this.forceUpdates.add(e),P.MessageLoop.postMessage(this,this.layerFlushMessages.get(e))}toReactComponent(){if(this.reactComp)return this.reactComp;let e=this.reactPortals,n=()=>k.createElement(k.Fragment,null,e.map((e,n)=>k.createElement(e,{key:n})));return this.reactComp=n,n}};K([(0,w.f3)(tL)],t$.prototype,"loggerService",2),t$=K([(0,w.b2)(),U(0,(0,w.f3)(tR)),U(1,(0,w.f3)(ty))],t$),(u=m||(m={})).STATE_SELECT={id:"STATE_SELECT",cursor:"",shortcut:"",cancelMode:"hold"},u.STATE_MOUSE_FRIENDLY_SELECT={id:"STATE_MOUSE_FRIENDLY_SELECT",cursor:"grab",shortcut:"",cancelMode:"hold"},u.STATE_GRAB={id:"STATE_GRAB",cursor:"grab",shortcut:"SPACE",shortcutAutoEsc:!0,shortcutWorksOnlyOnStateChanged:!0,cancelMode:"hold"};var tB=[m.STATE_SELECT,m.STATE_MOUSE_FRIENDLY_SELECT,m.STATE_GRAB],tH=class extends tg{constructor(e){super(e),this._isPressingSpaceBar=!1,this._isPressingShift=!1,this.states=tB.slice(),this.selected=m.STATE_SELECT.id,this.onStateChangeEmitter=new _.Q5,this.onStateChange=this.onStateChangeEmitter.event,this.toDispose.push(this.onStateChangeEmitter)}get isPressingSpaceBar(){return this._isPressingSpaceBar}set isPressingSpaceBar(e){this._isPressingSpaceBar=e}get isPressingShift(){return this._isPressingShift}set isPressingShift(e){this._isPressingShift=e}onCancel(e,n){return this.onStateChange(r=>{r.lastState&&r.lastState.id===e&&n()})}getCurrentState(){return this.states.find(e=>e.id===this.selected)}is(e){return this.selected===e}changeState(e,n){let r=this.states.find(n=>n.id===e);if(!r)throw Error(`Unknown editor state ${e}`);if(this.selected!==e){let i=this.getCurrentState();this.selected=e,this.onStateChangeEmitter.fire({state:r,event:n,lastState:i}),this.fireChange()}}toDefaultState(){this.changeState(m.STATE_SELECT.id)}registerState(e){this.states.push(e),this.fireChange()}getStates(){return this.states}isMouseFriendlyMode(){return this.getCurrentState()===m.STATE_MOUSE_FRIENDLY_SELECT}getStateFromShortcut(e){return this.states.find(n=>{if(("SPACE"===n.shortcut?" ":(n.shortcut||"").toLowerCase())===e.key.toLowerCase())return n})}};tH.type="EditorStateConfigEntity";var tK=0,tU=class extends tg{constructor(e){super(e),this._loading=!1,this._zoomEnable=!0,this._onReadonlyOrDisabledChangeEmitter=new _.Q5,this._onGrabDisableChangeEmitter=new _.Q5,this.onGrabDisableChange=this._onGrabDisableChangeEmitter.event,this.onReadonlyOrDisabledChange=this._onReadonlyOrDisabledChangeEmitter.event,this.cursor="default",this.toDispose.push(this._onReadonlyOrDisabledChangeEmitter)}get grabDisable(){return this.config.grabDisable}set grabDisable(e){this.updateConfig({grabDisable:e})}getDefaultConfig(){return{scrollX:0,scrollY:0,originX:0,originY:0,width:0,height:0,minZoom:.1,maxZoom:2,zoom:1,clientX:0,clientY:0,reverseScroll:!0,overflowX:"scroll",overflowY:"scroll",disabled:!1,readonly:!1,grabDisable:!1,mouseScrollDelta:.05}}addScrollLimit(e){this._scrollLimitFn=e}updateConfig(e){void 0!==e.zoom&&(e={...e,zoom:this.normalizeZoom(e.zoom)}),!(e={...this.config,...e}).reverseScroll&&(e.scrollX<this.config.originX&&(e.scrollX=this.config.originX),e.scrollY<this.config.originY&&(e.scrollY=this.config.originY)),void 0!==e.scrollLimitX&&e.scrollX<e.scrollLimitX&&(e.scrollX=e.scrollLimitX),void 0!==e.scrollLimitY&&e.scrollY<e.scrollLimitY&&(e.scrollY=e.scrollLimitY),"hidden"===e.overflowX&&(e.scrollX=this.config.originX),"hidden"===e.overflowY&&(e.scrollY=this.config.originY);let{readonly:n,disabled:r,grabDisable:i}=this;super.updateConfig(this._scrollLimitFn?{...e,...this._scrollLimitFn({scrollX:e.scrollX,scrollY:e.scrollY})}:e),(n!==this.readonly||r!==this.disabled)&&this._onReadonlyOrDisabledChangeEmitter.fire({readonly:this.readonly,disabled:this.disabled}),i!==this.grabDisable&&this._onGrabDisableChangeEmitter.fire(this.grabDisable)}get finalScale(){return this.zoomEnable?this.config.zoom:1}get zoom(){return this.zoomEnable?this.config.zoom:1}get scrollData(){return{scrollX:this.config.scrollX,scrollY:this.config.scrollY}}normalizeZoom(e){return this.zoomEnable?(e<this.config.minZoom?e=this.config.minZoom:e>this.config.maxZoom&&(e=this.config.maxZoom),e):1}updateCursor(e){this.cursor!==e&&(this.cursor=e,this.fireChange())}getPosFromMouseEvent(e,n=!0){let{config:r}=this,i=n?this.finalScale:1;return{x:(e.clientX+r.scrollX-r.clientX)/i,y:(e.clientY+r.scrollY-r.clientY)/i}}toFixedPos(e){let{config:n}=this;return{x:e.x-n.scrollX+n.clientX,y:e.y-n.scrollY+n.clientY}}getViewport(e=!0){let{config:n}=this,r=e?this.finalScale:1;return new _.Ae(n.scrollX/r,n.scrollY/r,n.width/r,n.height/r)}isViewportVisible(e,n=0,r=!1){return _.Ae.isViewportVisible(e,this.getViewport(),n,r)}scrollToView(e={}){let n,{scrollDelta:r,position:i,easing:o=!0,easingDuration:s=300,entities:a}=e,{config:l}=this,h=e.zoom?e.zoom:this.finalScale;if(a&&a.length>0){let e=a.map(e=>{let n=e.getData(er);if(n)return n.bounds;let r=e.getData(Q),i=e.getData(ee)||{width:0,height:0};if(r)return new _.Ae(r.x,r.y,i.width,i.height||0)}).filter(e=>!!e);e.length>0&&(n=_.Ae.enlarge(e))}else i?n=new _.Ae(i.x,i.y,0,0):e.bounds&&(n=e.bounds);if(!n){let e=this.getDefaultConfig();n=new _.Ae((e.scrollX+l.width/2)/h,(e.scrollY+l.height/2)/h,0,0)}if(!e.scrollToCenter&&this.getViewport().containsRectangle(n))return Promise.resolve();let c={scrollX:(n.x+n.width/2+(r?r.x:0))*h-l.width/2,scrollY:(n.y+n.height/2+(r?r.y:0))*h-l.height/2,zoom:e.zoom};return this.scroll(c,o,s)}setPageBounds(e){this.updateConfig({pageBounds:{x:e.x,y:e.y,width:e.width,height:e.height}})}getPageBounds(){let{pageBounds:e}=this.config;if(e)return new _.Ae(e.x,e.y,e.width,e.height)}scrollPageBoundsToCenter(e=!0,n=16,r=!0){let i=this.getPageBounds();if(i){let o,s=2*n;return e&&(o=_.rM.fixSize({width:i.width,height:i.height},{width:s>this.config.width?s:this.config.width-s,height:s>this.config.height?s:this.config.height-s})),this.scrollToView({bounds:i,zoom:o,scrollToCenter:!0,easing:r})}return this.scrollToView({easing:r})}scroll(e,n=!0,r=300){let i=new _.cO;if(this.cancelScrollTeeen&&this.cancelScrollTeeen.dispose(),n){let n={scrollX:this.config.scrollX,scrollY:this.config.scrollY,zoom:this.config.zoom};this.cancelScrollTeeen=el({from:n,to:{...n,...e},onUpdate:e=>{this.updateConfig(e)},onComplete:()=>{this.cancelScrollTeeen=void 0,i.resolve()},onDispose:()=>{i.resolve()},duration:r})}else this.updateConfig(e),i.resolve();return i.promise}fixLayerPosition(e){_.xF.setStyle(e,{left:this.config.scrollX,top:this.config.scrollY})}get loading(){return this._loading}set loading(e){this.loading!==e&&(this._loading=e,this.fireChange())}get zoomEnable(){return this._zoomEnable}set zoomEnable(e){this._zoomEnable!==e&&(this._zoomEnable=e,this.fireChange())}zoomin(e,n){let r=this.config.zoom/10,i=Math.ceil((this.config.zoom+r)*10)/10;this.updateZoom(i,e,n)}zoomout(e,n){let r=this.config.zoom/10,i=Math.floor((this.config.zoom-r)*10)/10;this.updateZoom(i,e,n)}updateZoom(e,n=!0,r=200){e=this.normalizeZoom(e);let{center:i}=this.getViewport(),o=this.finalScale,s=this.zoomEnable?e:o;if(s!==o){let a={x:i.x*s-i.x*o,y:i.y*s-i.y*o};this.scroll({scrollX:this.config.scrollX+a.x,scrollY:this.config.scrollY+a.y,zoom:e},n,r)}}get disabled(){return this.config.disabled}get readonly(){return this.config.readonly}get readonlyOrDisabled(){return this.config.readonly||this.config.disabled}set readonly(e){this.updateConfig({readonly:e})}set disabled(e){this.updateConfig({disabled:e})}fitView(e,n=!0,r=0){let i=this.getViewport(!1),o=_.rM.fixSize(e.pad(r,r),i);return this.scrollToView({bounds:e,zoom:o,easing:n,scrollToCenter:!0})}};tU.type="PlaygroundConfigEntity";var tW=Symbol("LayerOptions"),tG=class{constructor(){this.toDispose=new _.K4,this.renderWithReactMemo=!0}dispose(){this.toDispose.dispose()}createDOMCache(e,n){if(!this.node)throw Error("DomCache need a parent dom node.");return _.xF.createDOMCache(this.node,e,n)}getPosFromMouseEvent(e,n=!0){let r=this.config.getPosFromMouseEvent(e,n);return{x:r.x,y:r.y}}};K([(0,w.f3)(tW)],tG.prototype,"options",2),K([(0,w.f3)(ty)],tG.prototype,"entityManager",2),K([tu()],tG.prototype,"context",2),tG=K([(0,w.b2)()],tG);var tY=class extends tG{constructor(){super(...arguments),this.startGrabScroll={scrollX:0,scrollY:0},this.cursorStyle=document.createElement("style"),this.maskNode=document.createElement("div"),this.grabDragger=new es({onDragStart:e=>{this.config.grabDisable||(this.config.updateCursor("grabbing"),this.startGrabScroll={scrollX:this.config.config.scrollX,scrollY:this.config.config.scrollY})},onDrag:e=>{this.config.grabDisable||this.config.updateConfig({scrollX:this.startGrabScroll.scrollX-e.endPos.x+e.startPos.x,scrollY:this.startGrabScroll.scrollY-e.endPos.y+e.startPos.y})},onDragEnd:e=>{this.isGrab()&&this.config.updateCursor("grab"),1===e.button&&(this.isMouseMode()?(this.editorStateConfig.changeState(m.STATE_MOUSE_FRIENDLY_SELECT.id),this.config.updateCursor("grab")):(this.editorStateConfig.toDefaultState(),this.config.updateCursor("")))}})}onReady(){if(this.options={preventGlobalGesture:!1,...this.options},this.options.preventGlobalGesture){let e=new to(document.body,{onPinch:()=>{}});document.documentElement&&(document.documentElement.style.overscrollBehaviorX="none"),document.body.style.overscrollBehaviorX="none",this.toDispose.push(_.JT.create(()=>e.destroy()))}this.toDispose.pushAll([this.config.onGrabDisableChange(e=>{e&&this.grabDragger.stop(0,0)}),_.xF.addStandardDisposableListener(this.playgroundNode,"wheel",e=>{this.getScrollParent(e.target)||(e.preventDefault(),e.stopPropagation())}),this.listenPlaygroundEvent("wheel",this.handleWheelEvent.bind(this),-2,{passive:!0}),this.listenPlaygroundEvent("mousedown",e=>{let n=1===e.button;n&&!this.isMouseMode()&&this.editorStateConfig.changeState(m.STATE_GRAB.id),this.isGrab()&&(this.editorStateConfig.isPressingSpaceBar||n)&&this.grabDragger.start(e.clientX,e.clientY)},-2),this.listenPlaygroundEvent("mousedown",e=>{let n=this.options?.hoverService?.isSomeHovered();!this.isMouseMode()||n||this.editorStateConfig.isPressingShift||this.grabDragger.start(e.clientX,e.clientY)},0),this.editorStateConfig.onStateChange(this.onStateChanged.bind(this)),this.listenGlobalEvent("keydown",e=>{e.shiftKey&&(this.editorStateConfig.isPressingShift=!0,this.isMouseMode()&&this.config.updateCursor(""))},-2),this.listenGlobalEvent("keypress",e=>{if(!this.isFocused||e.target!==this.playgroundNode||this.isMouseMode())return;let n=this.editorStateConfig.getStateFromShortcut(e);" "===e.key&&(this.editorStateConfig.isPressingSpaceBar=!0),(n?.shortcutWorksOnlyOnStateChanged!==!0||n!==this.editorStateConfig.getCurrentState())&&(this.lastShortcutState=n,n&&this.editorStateConfig.changeState(n.id))},-2),this.listenGlobalEvent("keyup",e=>{" "===e.key&&(this.editorStateConfig.isPressingSpaceBar=!1),this.editorStateConfig.isPressingShift=!1,this.lastShortcutState&&this.lastShortcutState.shortcutAutoEsc&&this.editorStateConfig.toDefaultState(),this.lastShortcutState=void 0}),{dispose:()=>{this.maskNode.parentNode&&this.maskNode.parentNode.removeChild(this.maskNode),this.cursorStyle.parentNode&&this.cursorStyle.parentNode.removeChild(this.cursorStyle)}}]),"MOUSE"===this.options.ineractiveType&&this.editorStateConfig.changeState(m.STATE_MOUSE_FRIENDLY_SELECT.id)}getCursor(e){return e?this.playgroundConfigEntity.getCursors?.()?.[e]??e:""}isMouseMode(){return this.editorStateConfig.isMouseFriendlyMode()}onStateChanged(e){let{state:n}=e;if(this.cancelStateListen&&(this.cancelStateListen.dispose(),this.cancelStateListen=void 0),n.handle&&n.handle(this.config,e),n.cursor?(this.playgroundConfigEntity.updateCursor(n.cursor),this.currentGesture&&this.currentGesture.target.parentNode&&(this.currentGesture.target.parentNode.style.cursor=this.getCursor(n.cursor))):(this.playgroundConfigEntity.updateCursor(""),this.currentGesture&&this.currentGesture.target.parentNode&&(this.currentGesture.target.parentNode.style.cursor="")),"grab"===n.cursor||"grabbing"===n.cursor){if(n===m.STATE_MOUSE_FRIENDLY_SELECT)return;this.maskNode.style.cssText=`
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 100;
      `,this.playgroundNode.appendChild(this.maskNode)}else this.maskNode.parentNode&&this.maskNode.parentNode.removeChild(this.maskNode);"esc"===n.cancelMode?this.cancelStateListen=_.xF.addStandardDisposableListener(document.body,"keydown",e=>{("Escape"===e.key||"Enter"===e.key)&&this.editorStateConfig.toDefaultState()},!0):"once"===n.cancelMode&&this.editorStateConfig.toDefaultState()}isGrab(){let e=this.editorStateConfig.getCurrentState();return e===m.STATE_GRAB||e===m.STATE_MOUSE_FRIENDLY_SELECT}createGesture(){this.currentGesture||(this.currentGesture=new ts(this.pipelineNode.parentElement,this.config),this.currentGesture.onDispose(()=>{this.currentGesture=void 0}),this.toDispose.push(this.currentGesture))}onResize(e){this.size={...e},this.updateSizeWithRulerConfig()}updateSizeWithRulerConfig(){let{size:e}=this;e&&this.config.updateConfig({width:e.width,height:e.height,clientX:e.clientX,clientY:e.clientY})}handleScrollEvent(e){let{playgroundConfigEntity:n}=this,r=n.config.scrollX+e.deltaX,i=n.config.scrollY+e.deltaY;n.updateConfig({scrollX:r,scrollY:i})}getMouseScaleDelta(){let{mouseScrollDelta:e,zoom:n}=this.config.config;return"function"==typeof e?e(n):e??.05}handleWheelEvent(e){if((!this.currentGesture||!this.currentGesture.pinching)&&!e.ctrlKey&&!e.metaKey&&!this.getScrollParent(e.target)){if(this.isMouseMode()){let{zoom:n,minZoom:r,maxZoom:i,scrollX:o,scrollY:s}=this.playgroundConfigEntity.config,a=this.getMouseScaleDelta(),l=(Math.abs(e.deltaY)>0?e.deltaY:e.deltaX)>0?-a:a,h=this.config.finalScale,c=e.clientX,u=e.clientY,d=Math.max(r,Math.min(i,n+l)),p=this.config.getPosFromMouseEvent({clientX:c,clientY:u},!1),f={x:p.x/h*d,y:p.y/h*d};this.config.updateConfig({scrollX:o+f.x-p.x,scrollY:s+f.y-p.y,zoom:d});return}this.handleScrollEvent(e)}}getScrollParent(e){if(!e||e===this.pipelineNode.parentElement)return null;let n=e.scrollWidth>e.clientWidth,r=e.scrollHeight>e.clientHeight,i=window.getComputedStyle(e).overflowX,o=window.getComputedStyle(e).overflowY,s=["auto","scroll","overlay"].includes(i),a=["auto","scroll","overlay"].includes(o);return n&&s||r&&a||this.protectWheelArea?.(e)?e:this.getScrollParent(e.parentElement)}autorun(){let e=this.playgroundConfigEntity.config,{cursor:n}=this.playgroundConfigEntity,r=this.getCursor(n);if(this.config.zoomEnable?this.createGesture():this.currentGesture&&this.currentGesture.dispose(),_.xF.setStyle(this.pipelineNode,{left:-e.scrollX,top:-e.scrollY,width:e.width,height:e.height}),this.pipelineNode.parentElement.style.cursor=r,"grab"===n||"grabbing"===n){let e="";this.playgroundNode.classList.forEach(n=>{e+=`.${n}`}),this.cursorStyle.innerText=`.${e} * { cursor: ${r} }`,this.cursorStyle.parentNode||document.head.appendChild(this.cursorStyle)}else this.cursorStyle.parentNode&&this.cursorStyle.parentNode.removeChild(this.cursorStyle)}};K([tx(tU)],tY.prototype,"playgroundConfigEntity",2),K([tx(tH)],tY.prototype,"editorStateConfig",2),K([(0,w.jt)(),(0,w.f3)(tD)],tY.prototype,"protectWheelArea",2),tY=K([(0,w.b2)()],tY);var tZ=class{constructor(e){this.entityManager=e,this.observeEntities=[],this.observeDatas=[],this.entitiesTypeCache=new Map,this.entitiesAbleCache=new Map,this.entitiyDataCache=new Map}get size(){return this.observeEntities.length}load(e,n){this.observeEntities=e,this.observeDatas=n,this.entitiesTypeCache.clear(),this.entitiesAbleCache.clear(),this.entitiyDataCache.clear()}get(e,n){let r=this.getEntities(e);return void 0!==n?r.find(e=>e.id===n):r[0]}has(e){return!!this.get(e)}getEntities(e){let n=this.entitiesTypeCache.get(e);return n||(n=[],this.observeEntities.forEach(r=>{r.type===e.type&&n.push(r)}),this.entitiesTypeCache.set(e,n)),n.filter(e=>!e.disposed)}getEntityDatas(e,n){let r=`${e.type}:${n.type}`,i=this.entitiyDataCache.get(r);return i||(i=this.observeDatas.filter(r=>r.type===n.type&&r.entity.type===e.type),this.entitiyDataCache.set(r,i)),i}updateConfig(e,n){let r=this.get(e);r&&r.updateConfig&&r.updateConfig(n)}getConfig(e){let n=this.get(e);if(n)return n.config}createEntity(e,n){return this.entityManager.createEntity(e,n)}removeEntities(e){this.entityManager.removeEntities(e)}[Symbol.iterator](){let e=0,n=this.observeEntities.length;return{next:()=>{let r=e++;return{value:this.observeEntities[r],done:r===n}}}}},tX=new P.ConflatableMessage("PIPELINE_ZOOM"),tQ=new P.ConflatableMessage("PIPELINE_SCROLL"),tq=class{constructor(){this._isFocused=!1,this.toDispose=new _.K4,this.allLayersMap=new Map,this.onResizeEmitter=new _.Q5,this.onFocusEmitter=new _.Q5,this.onBlurEmitter=new _.Q5,this.onZoomEmitter=new _.Q5,this.onScrollEmitter=new _.Q5,this.onFocus=this.onFocusEmitter.event,this.onBlur=this.onBlurEmitter.event,this.onZoom=this.onZoomEmitter.event,this.onScroll=this.onScrollEmitter.event,this.playgroundEvents={},this.globalEvents={},this.onResize=this.onResizeEmitter.event,this.toDispose.pushAll([this.onResizeEmitter,this.onFocusEmitter,this.onZoomEmitter,this.onBlurEmitter,this.onScrollEmitter]),this.onFocusEmitter.event(()=>{this._isFocused=!0}),this.onBlurEmitter.event(()=>{this._isFocused=!1})}_listenEvent(e,n,r,i=0,o){let s=r?this.globalEvents:this.playgroundEvents,a=r?document:this.renderer.node.parentNode,l=s[e];if(!l){let n={handleEvent:e=>{let n=l.handlers;for(let r=0,i=n.length;r<i;r++)if(n[r].handle(e))return}};a.addEventListener(e,n,o),l=s[e]={handlers:[],dispose:()=>{a.removeEventListener(e,n),delete s[e]}}}let{handlers:h}=l,c={handle:n,priority:i};h.unshift(c),h.sort((e,n)=>n.priority-e.priority);let u=_.JT.create(()=>{let e=l.handlers.indexOf(c);-1!==e&&l.handlers.splice(e,1),0===l.handlers.length&&l.dispose()});return this.toDispose.push(u),u}listenPlaygroundEvent(e,n,r,i){return this._listenEvent(e,n,!1,r,i)}listenGlobalEvent(e,n,r,i){return this._listenEvent(e,n,!0,r,i)}registerLayer(e,n){if(this.allLayersMap.has(e))return;let r=this.layerFactory(e,n);this.allLayersMap.set(e,r);let i=t_(e,tm),o=t_(e,tv);if(i.forEach(e=>{this.entityManager.registerEntity(e),Y.isRegistryOf(e,tg)&&this.entityManager.createEntity(e)}),o.forEach(e=>{this.entityManager.registerEntity(e.entity),this.entityManager.registerEntityData(e.data)}),this.selector.subscribeEntities(r,i),o.forEach(e=>this.selector.subscribleEntityByData(r,e.entity,e.data)),r.observeManager=new tZ(this.entityManager),r.reloadEntities=()=>{let e=this.selector.getLayerData(r);return e.changed&&r.observeManager.load(e.observeEntities,e.observeDatas),e.changed},r.listenPlaygroundEvent=this.listenPlaygroundEvent.bind(this),r.listenGlobalEvent=this.listenGlobalEvent.bind(this),r.config=this.configEntity,r.getOtherLayer=this.getLayer.bind(this),Object.defineProperty(r,"isFocused",{get:()=>this._isFocused}),r.onResize&&this.onResize(r.onResize.bind(r)),r.onBlur&&this.onBlurEmitter.event(r.onBlur.bind(r)),r.onFocus&&this.onFocusEmitter.event(r.onFocus.bind(r)),r.onZoom&&this.onZoomEmitter.event(r.onZoom.bind(r)),r.onScroll&&this.onScrollEmitter.event(r.onScroll.bind(r)),r.onViewportChange){let e=r.onViewportChange.bind(r);this.onResize(e),this.onZoomEmitter.event(e),this.onScrollEmitter.event(e)}r.onReadonlyOrDisabledChange&&this.configEntity.onReadonlyOrDisabledChange(r.onReadonlyOrDisabledChange.bind(r)),this.renderer.addLayer(r)}getLayer(e){return this.allLayersMap.get(e)}get configEntity(){return this.entityManager.getEntity(tU,!0)}ready(){let e=this.configEntity,n=e.finalScale,r=e.scrollData;e.onConfigChanged(()=>{let i=e.finalScale,o=e.scrollData;i!==n&&(n=i,P.MessageLoop.postMessage(this,tX)),(r.scrollX!==o.scrollX||r.scrollY!==o.scrollY)&&(r=o,P.MessageLoop.postMessage(this,tQ))})}processMessage(e){let n=this.configEntity;switch(e.type){case"PIPELINE_SCROLL":this.onScrollEmitter.fire(n.scrollData);break;case"PIPELINE_ZOOM":this.onZoomEmitter.fire(n.finalScale)}}dispose(){this.toDispose.dispose()}};K([(0,w.f3)(t$)],tq.prototype,"renderer",2),K([(0,w.f3)(tR)],tq.prototype,"selector",2),K([(0,w.f3)(ty)],tq.prototype,"entityManager",2),K([tu()],tq.prototype,"context",2),K([(0,w.f3)(tO)],tq.prototype,"layerFactory",2),tq=K([(0,w.b2)()],tq);var tJ=k.createContext({}),t0=k.createContext({}),t1=k.createContext({}),t2=k.createContext(void 0),t3=Symbol("PlaygroundConfig"),t4=Symbol("PlaygroundContribution"),t5=class{config(e){Object.assign(this.playgroundConfig,e)}registerLayer(e){this.pipeline.registerLayer(e)}registerEntity(e){this.entityManager.registerEntity(e)}registerEditorState(e){let n=this.entityManager.getEntity(tH);n?.registerState(e)}};K([(0,w.f3)(tq)],t5.prototype,"pipeline",2),K([(0,w.f3)(ty)],t5.prototype,"entityManager",2),K([(0,w.f3)(t3)],t5.prototype,"playgroundConfig",2),t5=K([(0,w.b2)()],t5);var t6=Symbol("PluginContext");Symbol("Plugin");var t8=0;function t9(e){let{contributionKeys:n,singleton:r=!1}=e;t8+=1;let i=`Playground_${t8}`;return o=>{let s=[],a=!1;return{pluginId:i,singleton:r,initPlugin:()=>{!a&&(a=!0,e.containerModules&&s.push(...e.containerModules),e.onBind&&s.push(new w.nZ((n,r,i,s)=>{e.onBind({bind:n,unbind:r,isBound:i,rebind:s},o)})),(e.onInit||e.onDispose||e.onReady||e.onAllLayersRendered)&&s.push(new w.nZ(n=>{n(t4).toDynamicValue(n=>{let r=n.container.get(t6);return{onInit:()=>{e.onInit?.(r,o)},onReady:()=>{e.onReady?.(r,o)},onDispose:()=>{e.onDispose?.(r,o)},onAllLayersRendered:()=>{e.onAllLayersRendered?.(r,o)}}})})))},options:o,contributionKeys:n,containerModules:s}}}var t7=e=>t9(e)(void 0),ne=new Set,nt=new _.Q5,nn=new _.Q5,nr=class{constructor(e,n,r,i,o,s,a,l,h){this.entityManager=e,this.registry=n,this.contextProvider=r,this.pipelineRenderer=i,this.pipelineRegistry=o,this.playgroundConfig=s,this.contributionProvider=a,this.commandService=l,this.selectionService=h,this.toDispose=new _.K4,this._focused=!1,this.playgroundClassName=(0,E.x0)(),this.isReady=!1,this.toDispose.pushAll([this.pipelineRenderer,this.pipelineRegistry,this.entityManager,this.commandService,this.selectionService,_.JT.create(()=>{ne.delete(this),this.node.remove(),nn.fire(this)}),i.onAllLayersRendered(()=>{this.contributions.forEach(e=>e.onAllLayersRendered?.(this))})]);let c=this.entityManager.createEntity(tH);if(this.entityManager.createEntity(tU),this.node=s.node||document.createElement("div"),this.toDispose.pushAll([_.xF.addStandardDisposableListener(this.node,"scroll",e=>{this.node.scrollTop=0,this.node.scrollLeft=0,e.preventDefault(),e.stopPropagation()})]),this.node.classList.add("gedit-playground"),this.node.classList.add(this.playgroundClassName),this.node.dataset.testid="sdk.workflow.canvas",s.layers&&s.layers.forEach(e=>this.registry.registerLayer(e)),s.editorStates&&s.editorStates.forEach(e=>c.registerState(e)),void 0!==s.zoomEnable&&(this.zoomEnable=s.zoomEnable),s.entityConfigs)for(let[e,n]of s.entityConfigs){let r=this.entityManager.getEntity(e,!0);r?.updateConfig(n)}this.node.addEventListener("blur",()=>{this.blur()}),this.node.addEventListener("focus",()=>{this.focus()}),this.node.tabIndex=0,this.node.appendChild(this.pipelineRenderer.node),this.onBlur=this.pipelineRegistry.onBlurEmitter.event,this.onFocus=this.pipelineRegistry.onFocusEmitter.event,this.onZoom=this.pipelineRegistry.onZoomEmitter.event,this.onScroll=this.pipelineRegistry.onScrollEmitter.event,ne.add(this)}static getLatest(){let e=nr.getAllInstances();return e[e.length-1]}static getAllInstances(){let e=[];for(let n of ne.values())e.push(n);return e}get context(){return this.contextProvider?.()}get contributions(){return this.contributionProvider.getContributions()}init(){let{contributions:e}=this;for(let n of e)n.registerPlayground&&n.registerPlayground(this.registry);for(let n of e)n.onInit&&n.onInit(this);nt.fire(this)}get pipelineNode(){return this.pipelineRenderer.node}setParent(e){e.appendChild(this.node),this.resize()}get zoomEnable(){return this.config.zoomEnable}set zoomEnable(e){this.config.zoomEnable=e}flush(){this.pipelineRenderer.flush()}ready(){if(this.isReady)return;if(this.isReady=!0,this.playgroundConfig.autoResize){let e=(0,x.debounce)(()=>{this.disposed||this.resize()},0);if("undefined"!=typeof ResizeObserver){let n=new ResizeObserver(e);n.observe(this.node),this.toDispose.push(_.JT.create(()=>{n.disconnect()}))}else this.toDispose.push(_.xF.addStandardDisposableListener(window.document.body,"resize",e,{passive:!0}));this.toDispose.push(_.xF.addStandardDisposableListener(window.document,"scroll",e,{passive:!0})),this.resize()}this.pipelineRegistry.ready(),this.pipelineRenderer.ready();let{contributions:e}=this;for(let n of e)n.onReady&&n.onReady(this)}scrollToView(e){return this.entityManager.getEntity(tU).scrollToView(e)}resize(e,n=!0){if(!e){let n=this.node.getBoundingClientRect();e={clientX:n.left,clientY:n.top,width:n.width,height:n.height}}let{width:r,height:i}=this.config.config;if(0===e.width||0===e.height)return;let{scrollX:o,scrollY:s}=this.config.config;n&&r&&Math.round(e.width)!==r&&(o+=(r-e.width)/2),n&&i&&Math.round(e.height)!==i&&(s+=(i-e.height)/2),this.config.updateConfig({...e,scrollX:o,scrollY:s}),this.pipelineRegistry.onResizeEmitter.fire(e)}focus(){this._focused||(this._focused=!0,this.pipelineRegistry.onFocusEmitter.fire())}blur(){this._focused&&(this._focused=!1,this.pipelineRegistry.onBlurEmitter.fire())}get focused(){return this._focused}get config(){return this.entityManager.getEntity(tU)}get editorState(){return this.entityManager.getEntity(tH)}getConfigEntity(e){return this.entityManager.getEntity(e,!0)}dispose(){if(this.disposed)return;let{contributions:e}=this;for(let n of e)n.onDispose&&n.onDispose(this);this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}toReactComponent(){return this.pipelineRenderer.toReactComponent()}registerLayer(e,n){this.pipelineRegistry.registerLayer(e,n)}registerLayers(...e){e.forEach(e=>this.pipelineRegistry.registerLayer(e))}getLayer(e){return this.pipelineRegistry.getLayer(e)}get onAllLayersRendered(){return this.pipelineRenderer.onAllLayersRendered}};function ni(e){return{container:e,playground:e.get(nr),get:n=>e.get(n),getAll:n=>e.getAll(n)}}function no(e,n,r={}){let i=e.createChild();i.bind(n).toSelf().inSingletonScope(),i.bind(tW).toConstantValue(r);let o=i.get(n);return"object"==typeof o&&tE(o.constructor.prototype).forEach(e=>{o.hasOwnProperty(e)&&void 0===o[e]&&delete o[e]}),o}nr.onInstanceCreate=nt.event,nr.onInstanceDispose=nn.event,nr=K([(0,w.b2)(),U(0,(0,w.f3)(ty)),U(1,(0,w.f3)(t5)),U(2,(0,w.f3)(tc)),U(2,(0,w.jt)()),U(3,(0,w.f3)(t$)),U(4,(0,w.f3)(tq)),U(5,(0,w.f3)(t3)),U(6,(0,w.f3)(_.Qc)),U(6,(0,w.t6)(t4)),U(6,(0,w.jt)()),U(7,(0,w.f3)(F)),U(8,(0,w.f3)(tM))],nr);var ns=new w.nZ(e=>{e(ty).toSelf().inSingletonScope(),e(t$).toSelf().inSingletonScope(),e(t5).toSelf().inSingletonScope(),e(nr).toSelf().inSingletonScope(),e(tR).toSelf().inSingletonScope(),e(tO).toDynamicValue(e=>(n,r)=>no(e.container,n,r)).inSingletonScope(),e(tq).toSelf().inSingletonScope(),e(tp).toDynamicValue(e=>e.container).inSingletonScope(),e(t3).toConstantValue({autoFocus:!0,autoResize:!0,zoomEnable:!0,layers:[]}),e(th).toConstantValue({}),td(e),e(tL).toSelf().inSingletonScope(),e(tA).toSelf().inSingletonScope(),e(tM).toSelf().inSingletonScope(),e(tI).to(tT).inSingletonScope(),e(tk).to(tP).inSingletonScope(),e(tU).toDynamicValue(e=>e.container.get(ty).createEntity(tU)).inSingletonScope(),(0,_.yb)(e,t4),e(t6).toDynamicValue(e=>ni(e.container)).inSingletonScope(),e(tl).toService(t6)});function na(e,n,r){let i=r||new w.W2({defaultScope:"Singleton"});return n&&(i.parent=n),i.load(ns),i.isBound(F)||i.load($),e&&(i.rebind(t3).toConstantValue(e),e.context&&i.rebind(th).toConstantValue(e.context)),i}var nl=(0,k.forwardRef)(function(e,n){let{containerModules:r,playgroundContext:i,parentContainer:o,playgroundContainer:s,plugins:a,customPluginContext:l,...h}=e,c=(0,k.useMemo)(()=>{let e;return s?e=s:(e=na({autoFocus:!0,autoResize:!0,zoomEnable:!0,...h},o),i&&e.rebind(th).toConstantValue(i),r&&r.forEach(n=>e.load(n))),e},[]),u=(0,k.useMemo)(()=>{let e,n=c.get(nr);return l?(e=l(c),c.rebind(t6).toConstantValue(e)):e=c.get(t6),a&&function(e,n){let r=new Set,i=new Set;e.reduceRight((e,n)=>{let r=n.singleton&&i.has(n.pluginId);return n.singleton&&i.add(n.pluginId),r?e:[n,...e]},[]).reduce((e,n)=>{if(r.has(n.pluginId)||(n.initPlugin(),r.add(n.pluginId)),n.containerModules&&n.containerModules.length>0)for(let r of n.containerModules)e.includes(r)||e.push(r);return e},[]).forEach(e=>n.load(e)),e.forEach(e=>{if(e.contributionKeys)for(let r of e.contributionKeys)n.bind(r).toConstantValue(e.options)})}(a(e),c),n.init(),n},[]);return(0,k.useImperativeHandle)(n,()=>c.get(t6),[]),k.createElement(t0.Provider,{value:c},k.createElement(t1.Provider,{value:u},k.createElement(tJ.Provider,{value:i},e.children)))});function nh(){return k.useContext(t1)}function nc(){return k.useContext(t0)}function nu(e=!1){let n=nc().get(ty),r=(0,k.useContext)(t2);if(!r)throw Error('[useEntityFromContext] Unknown entity from "PlaygroundEntityContext"');let i=(0,_.JA)(r.version);return(0,k.useLayoutEffect)(()=>{let n;return e&&(n=r.onEntityChange(()=>i(r.version))),()=>n?.dispose()},[n,i,r,e]),r}function nd(...e){let n=(0,_.JA)();(0,k.useLayoutEffect)(()=>{let r=new _.K4;return r.pushAll(e.map(e=>e(()=>n()))),()=>r.dispose()},[e,n])}function np(e){return nc().get(e)}var nf=e=>{let n=nh(),r=np(t3),i=(0,k.useRef)();(0,k.useEffect)(()=>{if(i.current)return n.setParent(i.current),n.ready(),r.autoFocus&&n.node.focus(),()=>{n.dispose()}},[]);let o=n.toReactComponent();return k.createElement(k.Fragment,null,k.createElement("div",{ref:i,className:`gedit-playground-container${e.className?` ${e.className}`:""}`,style:e.style}),k.createElement(o,null),e.children?A.createPortal(k.createElement(k.Fragment,null,e.children),n.node):null)};(e=>{let n=Symbol("LayerStateProvider");class r{constructor(e,n,r){this.instance=e,this.playground=n,this.container=r,this.hijackMethod(e,"autorun"),this.hijackMethod(e,"render"),this.hijackMethod(e,"onReady"),this.hijackMethod(e,"onResize"),this.hijackMethod(e,"onFocus"),this.hijackMethod(e,"onBlur"),this.hijackMethod(e,"onZoom"),this.hijackMethod(e,"onScroll"),this.hijackMethod(e,"onViewportChange"),this.hijackMethod(e,"onReadonlyOrDisabledChange")}hijackMethod(e,n){"function"==typeof e[n]&&(this[n]=vi.spyOn(e,n))}}function i(e){let i=na();return i.bind(n).toConstantValue(new WeakMap),i.rebind(tO).toDynamicValue(e=>(o,s)=>{let a=no(e.container,o,s);return e.container.get(n).set(o,new r(a,i.get(nr),i)),a}),e&&e.forEach(e=>i.load(e)),i}function o(e,r){return e.get(n).get(r)}e.LayerTestState=r,e.createContainer=i,e.createPlayground=function(e){return i(e).get(nr)},e.getLayerTestState=o,e.createLayerTestState=function(e,n,r){let s=i(r),a=s.get(nr);return a.registerLayer(e,n),a.init(),a.ready(),o(s,e)}})(b||(b={}))},2100:function(e,n,r){"use strict";r.d(n,{C8:()=>j,D9:()=>eh,GA:()=>U,IG:()=>N,JU:()=>en,Lu:()=>I,Lw:()=>J,Lz:()=>V,QU:()=>ec,Sy:()=>x,T4:()=>M,VH:()=>T,VO:()=>R,Vl:()=>W,Xr:()=>K,cc:()=>q,d1:()=>ep,eE:()=>el,eG:()=>$,h3:()=>X,nx:()=>O,pQ:()=>er,y3:()=>G,yI:()=>ef});var i,o,s,a,l,h,c,u,d,p=r(8319),f=r(8336),g=r(9378),y=r(4210),m=r(6261),b=Object.defineProperty,_=Object.getOwnPropertyDescriptor,E=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?_(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&b(n,r,s),s},w=(e,n)=>(r,i)=>n(r,i,e),x=((i=x||{}).START="start",i.DEFAULT="default",i.ROOT="root",i.EMPTY="empty",i.INLINE_BLOCKS="inlineBlocks",i.BLOCK_ICON="blockIcon",i.BLOCK="block",i.BLOCK_ORDER_ICON="blockOrderIcon",i.GROUP="group",i.END="end",i.CONDITION="condition",i.SUB_CANVAS="subCanvas",i),C=["root","inlineBlocks","block"];Symbol("FlowLayout");var S=Symbol("FlowLayoutContribution"),D=((o=D||{}).VERTICAL_FIXED_LAYOUT="vertical-fixed-layout",o.HORIZONTAL_FIXED_LAYOUT="horizontal-fixed-layout",o);(D||(D={})).isVertical=function(e){return"vertical-fixed-layout"===e.name};var N=((s=N||{})[s.STRAIGHT_LINE=0]="STRAIGHT_LINE",s[s.DIVERGE_LINE=1]="DIVERGE_LINE",s[s.MERGE_LINE=2]="MERGE_LINE",s[s.ROUNDED_LINE=3]="ROUNDED_LINE",s[s.CUSTOM_LINE=4]="CUSTOM_LINE",s[s.DRAGGING_LINE=5]="DRAGGING_LINE",s),O=((a=O||{})[a.ADDER_LABEL=0]="ADDER_LABEL",a[a.TEXT_LABEL=1]="TEXT_LABEL",a[a.COLLAPSE_LABEL=2]="COLLAPSE_LABEL",a[a.COLLAPSE_ADDER_LABEL=3]="COLLAPSE_ADDER_LABEL",a[a.CUSTOM_LABEL=4]="CUSTOM_LABEL",a[a.BRANCH_DRAGGING_LABEL=5]="BRANCH_DRAGGING_LABEL",a),M={NODE_SPACING:"SPACING",ROUNDED_LINE_X_RADIUS:"ROUNDED_LINE_X_RADIUS",ROUNDED_LINE_Y_RADIUS:"ROUNDED_LINE_Y_RADIUS",INLINE_BLOCKS_PADDING_BOTTOM:"INLINE_BLOCKS_PADDING_BOTTOM",COLLAPSED_SPACING:"COLLAPSED_SPACING",HOVER_AREA_WIDTH:"HOVER_AREA_WIDTH"},I={NULL:0,[M.NODE_SPACING]:32,MARGIN_RIGHT:20,INLINE_BLOCK_PADDING_BOTTOM:16,INLINE_BLOCKS_PADDING_TOP:30,[M.INLINE_BLOCKS_PADDING_BOTTOM]:40,MIN_INLINE_BLOCK_SPACING:200,MIN_INLINE_BLOCK_SPACING_HORIZONTAL:80,[M.COLLAPSED_SPACING]:12,[M.ROUNDED_LINE_X_RADIUS]:16,[M.ROUNDED_LINE_Y_RADIUS]:20,[M.HOVER_AREA_WIDTH]:20},T=((l=T||{}).PRE_BRANCH="pre_branch",l.NORMAL_BRANCH="normal_branch",l),k={width:280,height:60},P=(e,n)=>{let r=C.includes(e);return{isStart:"start"===e,hidden:r,defaultExpanded:n.options.allNodesDefaultExpanded,expandedSize:{width:520,height:300},size:k,origin:n.layout.getDefaultNodeOrigin(),isInlineBlocks:"inlineBlocks"===e,spacing:I.SPACING,inlineSpacingPre:0,inlineSpacingAfter:0,expandable:!0,draggable:!0,selectable:!0,renderKey:"",minInlineBlockSpacing:()=>D.isVertical(n.layout)?I.MIN_INLINE_BLOCK_SPACING:I.MIN_INLINE_BLOCK_SPACING_HORIZONTAL}},A=u||(u={});function L(e,n,r){return{...e,...n,meta:{...e.meta,...n.meta},extend:void 0,type:r}}A.merge=L,A.extend=function(e,n){return n.length?n.reduce((n,r)=>L(n,r,e.type),e):e};var j=((h=j||{}).addFromNode="addFromNode",h.deleteFromNode="deleteFromNode",h.addBlock="addBlock",h.deleteBlock="deleteBlock",h.createGroup="createGroup",h.ungroup="ungroup",h.moveNodes="moveNodes",h.moveBlock="moveBlock",h.moveChildNodes="moveChildNodes",h.addNodes="addNodes",h.deleteNodes="deleteNodes",h.changeNode="changeNode",h.addChildNode="addChildNode",h.deleteChildNode="deleteChildNode",h.addNode="addNode",h.deleteNode="deleteNode",h),R=Symbol("FlowOperationBaseService"),z=class e extends p.RD{constructor(e){super(e),this.onExtInfoChangeEmitter=new f.Q5,this.onExtInfoChange=this.onExtInfoChangeEmitter.event,this.toDispose.push(f.JT.create(()=>{this._node&&this._node.remove()}))}get key(){return this.entity.id}getDefaultData(){let{addable:e,expandable:n,defaultExpanded:r}=this.entity.getNodeMeta();return{addable:e,expandable:n,expanded:r||!1,activated:!1,hovered:!1,dragging:!1,stackIndex:0}}updateExtInfo(e){if(f.XJ.isChanged(this.data.extInfo,e)){let n=this.data.extInfo;this.update({extInfo:e}),this.onExtInfoChangeEmitter.fire({oldInfo:n,newInfo:e})}}getExtInfo(){return this.data.extInfo}get addable(){return this.data.addable}get expandable(){return this.data.expandable}get draggable(){let{draggable:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this.entity):e}get expanded(){return this.data.expanded}set expanded(e){this.expandable&&this.data.expanded!==e&&(this.data.expanded=e,this.fireChange())}toggleExpand(){this.expanded=!this.expanded}toggleMouseEnter(e=!1){if(this.entity.document.renderState.setNodeHovered(this.entity),e)return;let n=this.entity.getData($);n.renderState.hidden||(this.mouseLeaveTimeout&&(clearTimeout(this.mouseLeaveTimeout),this.mouseLeaveTimeout=void 0),n.renderState.hovered=!0,this.entity.isFirst&&this.entity.parent?.id!=="root"?n.parent.renderState.activated=!0:n.renderState.activated=!0)}toggleMouseLeave(e=!1){if(this.entity.document.renderState.setNodeHovered(void 0),e)return;let n=this.entity.getData($);this.mouseLeaveTimeout=setTimeout(()=>{n.renderState.hovered=!1,this.entity.isFirst&&this.entity.parent?.id!=="root"&&(n.parent.renderState.activated=!1),n.renderState.activated=!1},200)}get hidden(){return this.entity.hidden}set hovered(e){this.data.hovered=e,this.fireChange()}get hovered(){return this.data.hovered}get dragging(){return this.data.dragging}set dragging(e){this.data.dragging!==e&&(this.data.dragging=e,this.fireChange())}set activated(n){if("blockIcon"===this.entity.flowNodeType&&this.entity.parent){this.entity.parent.getData(e).activated=n;return}this.data.activated!==n&&(this.data.activated=n,this.fireChange())}get activated(){let{entity:n}=this;return!!n.parent&&!!n.parent.getData(e).activated||this.data.activated}get stackIndex(){return this.data.stackIndex}set stackIndex(e){this.data.stackIndex=e}get lineActivated(){let{activated:n}=this;return!!n&&!!(this.entity.parent?.getData(e)?.activated||this.entity.isInlineBlock||this.entity.next?.getData(e).activated)}get node(){return this._node||(this._node=f.xF.createDivWithClass("gedit-flow-activity-node"),this._node.dataset.testid="sdk.workflow.canvas.node",this._node.dataset.nodeId=this.entity.id),this._node}dispose(){super.dispose(),this.onExtInfoChangeEmitter.dispose()}};z.type="FlowNodeRenderData";var V=z,F=class e extends p.RD{constructor(e){super(e),this.localDirty=!0;let{origin:n}=this.entity.getNodeMeta();this.transform=this.entity.addData(p.VO),this.transform.changeLocked=!0,this.transform.update({origin:{...n}}),this.transform.changeLocked=!1,this.renderState=this.entity.addData(V),this.bindChange(this.transform),this.toDispose.push(f.JT.create(()=>{let{next:e,parent:n}=this;e&&(e.localDirty=!0),n&&(n.localDirty=!0)}))}get origin(){return this.transform.origin}get key(){return this.entity.id}getDefaultData(){let{size:e,defaultExpanded:n,expandedSize:r,hidden:i}=this.entity.getNodeMeta();return{size:i?{width:0,height:0}:{...n?r:e}}}get collapsed(){return this.entity.collapsed}set collapsed(e){this.entity.collapsed=e,this.localDirty=!0,this.firstChild&&(this.firstChild.localDirty=!0),this.fireChange()}get size(){return this.entity.memoGlobal("size",()=>this.isContainer?this.transform.localSize:this.data.size)}get position(){let{position:e}=this.transform;return{x:e.x,y:e.y}}set size(e){let{width:n,height:r}=this.data.size;this.isContainer||(e.width!==n||e.height!==r)&&(this._data.size={...e},this.localDirty=!0,this.fireChange())}get inputPoint(){return this.entity.memoGlobal("inputPoint",()=>{let{getInputPoint:e}=this.entity.getNodeRegistry();return e?e(this,this.entity.document.layout):this.defaultInputPoint})}get defaultInputPoint(){return this.entity.memoGlobal("defaultInputPoint",()=>this.entity.document.layout.getDefaultInputPoint(this.entity))}get defaultOutputPoint(){return this.entity.memoGlobal("defaultOutputPoint",()=>this.entity.document.layout.getDefaultOutputPoint(this.entity))}get outputPoint(){return this.entity.memoGlobal("outputPoint",()=>{let{getOutputPoint:e}=this.entity.getNodeRegistry();return e?e(this,this.entity.document.layout):this.defaultOutputPoint})}get originDeltaX(){return this.entity.memoLocal("originDeltaX",()=>{let{children:e}=this,{getOriginDeltaX:n}=this.entity.getNodeRegistry();return n?n(this,this.entity.document.layout):0===e.length?-this.size.width*this.origin.x:1===e.length?e[0].originDeltaX:this.entity.isInlineBlocks&&e.length>1?e[0].originDeltaX+this.transform.position.x:e.reduce((e,n)=>{let r=n.originDeltaX;return void 0===e||r<e?r:e},void 0)})}get originDeltaY(){return this.entity.memoLocal("originDeltaY",()=>{let{children:e}=this,{getOriginDeltaY:n}=this.entity.getNodeRegistry();return n?n(this,this.entity.document.layout):0===e.length?-this.size.height*this.origin.y:1===e.length?e[0].originDeltaY:this.entity.isInlineBlocks&&e.length>1?e[0].originDeltaY+this.transform.position.y:e.reduce((e,n)=>{let r=n.originDeltaY;return void 0===e||r<e?r:e},void 0)})}get bounds(){return this.entity.memoGlobal("bounds",()=>{let{transform:n}=this;if(this.isContainer){let r=n.children.map(n=>n.entity.getData(e).boundsWithPadding);return f.Ae.enlarge(r).withPadding(this.padding)}return n.bounds})}get boundsWithPadding(){return this.entity.memoGlobal("boundsWithPadding",()=>{let{transform:n}=this;if(this.isContainer){let r=n.children.map(n=>n.entity.getData(e).boundsWithPadding);return f.Ae.enlarge(r).withPadding(this.padding)}return n.bounds.clone().withPadding(this.padding)})}get isContainer(){return this.transform.isContainer}get localBounds(){return this.entity.memoLocal("localBounds",()=>{let{transform:n}=this;if(this.isContainer){let r=n.children.map(n=>n.entity.getData(e).localBounds),i=f.Ae.enlarge(r).withPadding(this.padding);return p.YZ.applyMatrix(i,n.localTransform)}return n.localBounds.clone().withPadding(this.padding)})}get padding(){return this.entity.document.layout.getPadding(this.entity)}setParentTransform(e){this.transform.parent!==e?.transform&&(this.localDirty=!0),this.transform.setParent(e?.transform)}get spacing(){let{spacing:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get inlineSpacingPre(){let{inlineSpacingPre:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get inlineSpacingAfter(){let{inlineSpacingAfter:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get minInlineBlockSpacing(){let{minInlineBlockSpacing:e}=this.entity.getNodeMeta();return"function"==typeof e?e(this):e}get children(){return this.entity.children.map(n=>n.getData(e))}get pre(){return this.entity.pre?.getData(e)}get originParent(){return this.entity.originParent?.getData(e)}get isFirst(){return this.entity.isFirst}get isLast(){return this.entity.isLast}get lastChild(){return this.entity.lastChild?.getData(e)}get firstChild(){return this.entity.firstChild?.getData(e)}get next(){return this.entity.next?.getData(e)}get parent(){return this.entity.parent?.getData(e)}};F.type="FlowNodeTransformData";var $=F,B=e=>{let{transform:n}=e,r=n.outputPoint;return n.next?[{type:0,from:r,to:n.next.inputPoint}]:[]},H=e=>{let{transform:n}=e,r=n.outputPoint,i=n.parent?.outputPoint;return n.next||!i||new f.E9().copyFrom(r).equals(i)||e.isNodeEnd?[]:[{type:0,from:r,to:i}]},K=class extends p.RD{getDefaultData(){return{}}formatLines(e){return this.entity.document.options?.formatNodeLines?this.entity.document.options?.formatNodeLines?.(this.entity,e):e}formatLabels(e){return this.entity.document.options.formatNodeLabels?this.entity.document.options?.formatNodeLabels?.(this.entity,e):e}get lines(){return this.entity.memoGlobal("lines",()=>{let{getChildLines:e}=this.entity.parent?.getNodeRegistry()||{};if(e)return this.formatLines(e(this,this.entity.document.layout));let{getLines:n}=this.entity.getNodeRegistry();return n?this.formatLines(n(this,this.entity.document.layout)):this.transform.entity.isInlineBlock?[]:this.formatLines([...B(this),...H(this)])})}get labels(){return this.entity.memoGlobal("labels",()=>{let{getChildLabels:e}=this.entity.parent?.getNodeRegistry()||{};if(e)return this.formatLabels(e(this,this.entity.document.layout));let{getLabels:n}=this.entity.getNodeRegistry();if(n)return this.formatLabels(n(this,this.entity.document.layout));if(this.transform.entity.isInlineBlock)return[];let r=this.transform.outputPoint;if(this.transform.next)return this.formatLabels([{offset:f.E9.getMiddlePoint(r,this.transform.next.inputPoint),type:0}]);let i=this.transform.parent?.outputPoint;return!i||new f.E9().copyFrom(r).equals(i)||this.isNodeEnd?[]:this.formatLabels([{offset:i,type:0}])})}constructor(e){super(e),this.transform=this.entity.addData($),this.renderData=this.entity.addData(V),this.bindChange(this.transform),this.bindChange(this.renderData)}get collapsed(){return this.entity.collapsed}get isNodeEnd(){return this.entity.isNodeEnd}};K.type="FlowNodeTransitionData";var U=class extends p.JH{constructor(e){super(e),this._memoLocalCache=new Map,this._memoGlobalCache=new Map,this.flowNodeType="unknown",this._hidden=!1,this.index=-1,this.document=e.document,this.flowNodeType=e.flowNodeType,this.originParent=e.originParent,this.metaFromJSON=e.meta,this.onDispose(()=>{this.document.originTree.getChildren(this).slice().forEach(e=>{e.dispose()}),this.document.originTree.remove(this,!1),this.originParent=void 0})}initData(e){e.originParent!==this.originParent&&(this.originParent=e.originParent,this._registerCache=void 0),e.parent&&e.parent.addChild(this,e.index),e.meta!==this.metaFromJSON&&(this._metaCache=void 0,this.metaFromJSON=e.meta),this._hidden=!!(this.getNodeMeta().hidden||e.hidden)}get isStart(){return this.getNodeMeta().isStart}get isFirst(){return!this.pre}get isLast(){return!this.next}get isInlineBlocks(){let e=this.getNodeMeta().isInlineBlocks;return"function"==typeof e?e(this):e}get isInlineBlock(){let e=this.document.renderTree.getParent(this);return!!(e&&e.isInlineBlocks)}get isNodeEnd(){return this.memoLocal("isNodeEnd",()=>!!this.getNodeMeta().isNodeEnd||(this.isInlineBlocks&&this.collapsedChildren.length?this.collapsedChildren.every(e=>e.isNodeEnd):!!this.lastCollapsedChild&&this.lastCollapsedChild.isNodeEnd))}addChild(e,n){e.parent!==this&&this.document.originTree.addChild(this,e,n)}get hasChild(){return this.children.length>0}get pre(){return this.document.renderTree.getPre(this)}get next(){return this.document.renderTree.getNext(this)}get parent(){return this.document.renderTree.getParent(this)}getNodeRegistry(){return this._registerCache||(this._registerCache=this.document.getNodeRegistry(this.flowNodeType,this.originParent)),this._registerCache}getNodeRegister(){return this.getNodeRegistry()}getNodeMeta(){return this._metaCache||(this.metaFromJSON?this._metaCache={...this.getNodeRegistry().meta,...this.metaFromJSON}:this._metaCache=this.getNodeRegistry().meta),this._metaCache}get allChildren(){let e=[];for(let n of this.children)e.push(n),e.push(...n.allChildren);return e}get allCollapsedChildren(){let e=[];for(let n of this.collapsedChildren)e.push(n),e.push(...n.allCollapsedChildren);return e}get collapsedChildren(){return this.document.renderTree.getCollapsedChildren(this)}get blocks(){return this.collapsedChildren}get lastBlock(){return this.lastCollapsedChild}get lastCollapsedChild(){let{collapsedChildren:e}=this;return e[e.length-1]}get children(){return this.document.renderTree.getChildren(this)}get lastChild(){let{children:e}=this;return e[e.length-1]}get firstChild(){return this.children[0]}memoLocal(e,n){if(this._memoLocalCache.has(e))return this._memoLocalCache.get(e);let r=n();return this._memoLocalCache.set(e,r),r}memoGlobal(e,n){if(this._memoGlobalCache.has(e))return this._memoGlobalCache.get(e);let r=n();return this._memoGlobalCache.set(e,r),r}clearMemoGlobal(){this._memoGlobalCache.clear()}clearMemoLocal(){this._memoLocalCache.clear()}get childrenLength(){return this.children.length}get collapsed(){return!!this.document.renderTree.isCollapsed(this)||!!this.parent?.collapsed}set collapsed(e){this.document.renderTree.setCollapsed(this,e),this.clearMemoGlobal(),this.clearMemoLocal()}get hidden(){return this._hidden}openInsideCollapsed(){this.document.renderTree.openNodeInsideCollapsed(this)}getJSONData(){return this.getExtInfo()}toJSON(){let e;if(this.document.options.toNodeJSON)return this.document.options.toNodeJSON(this);let n={};return this.document.traverse(r=>{if(r.id.startsWith("$"))return;let i=this.getJSONData(),o={id:r.id,type:r.flowNodeType};void 0!==i&&(o.data=i),e||(e=o);let{parent:s}=r;s&&s.id.startsWith("$")&&(s=s.originParent);let a=s?n[s.id]:void 0;a&&(a.blocks||(a.blocks=[]),a.blocks.push(o)),n[r.id]=o},this),e}get isVertical(){return"vertical-fixed-layout"===this.document.layout.name}updateExtInfo(e){this.getData(V).updateExtInfo(e)}getExtInfo(){return this.getData(V).getExtInfo()}get onExtInfoChange(){return this.renderData.onExtInfoChange}get renderData(){return this.getData(V)}get transform(){return this.getData($)}get bounds(){return this.transform.bounds}};U.type="FlowNodeEntity",(c=U||(U={})).is=function(e){return e instanceof c};var W=class extends p.cv{constructor(e){super(e),this.onRefreshEmitter=new f.Q5,this.lastTransformVersion=-1,this.lastTreeVersion=-1,this.onRefresh=this.onRefreshEmitter.event,this.document=e.document,this.toDispose.push(this.document.originTree.onTreeChange(()=>{this.config.treeVersion+=1,this.fireChange()})),this.toDispose.push(this.onRefreshEmitter)}getDefaultConfig(){return{loading:!0,treeVersion:0}}get loading(){return this.config.loading}set loading(e){this.config.loading!==e&&(this.config.loading=e,this.fireChange())}updateTransformsTree(){this.document.renderTree.traverse((e,n,r)=>{let i=e.getData($);i.collapsed&&i.transform.clearChildren(),e.parent&&i.setParentTransform(e.parent.getData($)),e.index=r})}clear(){this.lastTreeVersion=-1,this.lastTransformVersion=-1}isTreeDirty(){let e=this.entityManager.getEntityDataVersion($),n=this.lastTreeVersion!==this.config.treeVersion,r=this.lastTransformVersion!==e;return n||r}refresh(){let e=this.entityManager.getEntityDataVersion($),n=this.lastTreeVersion!==this.config.treeVersion,r=this.lastTransformVersion!==e;this.entityManager.changeEntityLocked=!0,n&&(this.document.renderTree.updateRenderStruct(),this.updateTransformsTree(),this.lastTreeVersion=this.config.treeVersion),(n||r)&&(this.document.layout.update(),this.lastTransformVersion=this.entityManager.getEntityDataVersion($),this.lastTreeVersion=this.config.treeVersion,this.onRefreshEmitter.fire()),this.entityManager.changeEntityLocked=!1}};W.type="FlowDocumentTransformerEntity";var G=class extends p.cv{getDefaultConfig(){return{}}constructor(e){super(e)}getNodeHovered(){return this.config.nodeHoveredId?this.entityManager.getEntityById(this.config.nodeHoveredId):void 0}setNodeHovered(e){this.updateConfig({nodeHoveredId:e?.id})}getDragLabelSide(){return this.config.dragLabelSide}setDragLabelSide(e){this.updateConfig({dragLabelSide:e})}getNodeDroppingId(){return this.config.nodeDroppingId}setNodeDroppingId(e){this.updateConfig({nodeDroppingId:e})}getDragStartEntity(){let{nodeDragStartId:e}=this.config;return this.entityManager.getEntityById(e)}setDragStartEntity(e){this.updateConfig({nodeDragStartId:e?.id})}getDragEntities(){let{nodeDragIds:e}=this.config;return(e||[]).map(e=>this.entityManager.getEntityById(e))}setDragEntities(e){this.updateConfig({nodeDragIds:e.map(e=>e.id),nodeDragIdsWithChildren:e.map(e=>[e.id,...e.allCollapsedChildren.map(e=>e.id)]).flat()})}onNodeHoveredChange(e,n=100){return this.onConfigChanged((0,g.debounce)(()=>e(this.getNodeHovered()),n))}};G.type="FlowRendererStateEntity";var Y=class e{constructor(e){this.root=e,this.onTreeChangeEmitter=new f.Q5,this.onTreeChange=this.onTreeChangeEmitter.event,this.map=new Map}dispose(){this.map.clear(),this.onTreeChangeEmitter.dispose()}getInfo(e){let n=this.map.get(e);return n||(n={children:[]},this.map.set(e,n)),n}clear(){this.map.clear()}cloneMap(){let e=new Map;for(let[n,r]of this.map)e.set(n,{...r,children:r.children.slice()});return e}clone(){let n=new e(this.root);return n.map=this.cloneMap(),n}remove(e,n=!0){this.removeParent(e),n&&this._removeChildren(e),this.map.delete(e),this.fireTreeChange()}addChild(e,n,r){let i=this.getInfo(e),o=this.getInfo(n);if(o.parent){if(o.parent===e)return n;o.parent!==e&&this.removeParent(n)}let s=i.children.length,a=void 0===r?s-1:r-1,l=i.children[a],h=i.children[a+1];return l&&(this.getInfo(l).next=n),h&&(this.getInfo(h).pre=n),o.pre=l,o.next=h,i.children.splice(a+1,0,n),o.parent=e,this.fireTreeChange(),n}moveChilds(e,n,r){let i=this.getInfo(e),o=i.children.length,s=r??o;return n.forEach(e=>{this.getInfo(e).parent&&this.removeParent(e)}),n.forEach(n=>{let r=this.getInfo(n),o=i.children[s-1],a=i.children[s];o&&(this.getInfo(o).next=n),a&&(this.getInfo(a).pre=n),r.pre=o,r.next=a,i.children.splice(s,0,n),r.parent=e,s++}),this.fireTreeChange(),n}getById(e){for(let n of this.map.keys())if(n.id===e)return n}insertAfter(e,n){let r=this.getInfo(e),i=this.getInfo(n);if(this.removeParent(n),r.parent){let o=this.getInfo(r.parent);o.children.splice(o.children.indexOf(e)+1,0,n);let{next:s}=r;s&&(this.getInfo(s).pre=n),i.next=s,r.next=n,i.pre=e,i.parent=r.parent}this.fireTreeChange()}removeParent(e){let n=this.getInfo(e);if(!n.parent)return;let r=this.getInfo(n.parent),i=r.children.indexOf(e);r.children.splice(i,1);let{pre:o,next:s}=n;o&&(this.getInfo(o).next=s),s&&(this.getInfo(s).pre=o),this.fireTreeChange()}_removeChildren(e){let n=this.getChildren(e);n.length>0&&n.forEach(e=>{this._removeChildren(e),this.map.delete(e)})}getParent(e){return this.getInfo(e).parent}getPre(e){return this.getInfo(e).pre}getNext(e){return this.getInfo(e).next}getChildren(e){return this.getInfo(e).children}traverse(e,n=this.root,r=0,i=0){if(e(n,r,i)||this.getInfo(n).children.find((n,i)=>this.traverse(e,n,r+1,i)))return!0}fireTreeChange(){this.onTreeChangeEmitter.fire()}get size(){return this.map.size}toString(){let e=[];return this.traverse((n,r)=>{0===r?e.push(n.id):e.push(`|${Array(r).fill("--").join("")} ${n.id}`)}),`${e.join("\n")}`}},Z=class extends Y{constructor(e,n,r){super(e),this.root=e,this.nodesCollapsed=new Set,this.originTree=n,this.onTreeChange=this.originTree.onTreeChange,this.document=r}isCollapsed(e){return this.nodesCollapsed.has(e)}get collapsedNodeList(){return Array.from(this.nodesCollapsed)}setCollapsed(e,n){n?this.nodesCollapsed.add(e):this.nodesCollapsed.delete(e),this.originTree.fireTreeChange()}openNodeInsideCollapsed(e){let n=this.originTree.getInfo(e)?.parent;for(;n;){this.nodesCollapsed.has(n)&&this.nodesCollapsed.delete(n);let{parent:e}=this.originTree.getInfo(n)||{};n=e}this.originTree.fireTreeChange()}updateRenderStruct(){this.map=this.originTree.cloneMap(),this.document.config.get("END_NODES_REFINE_BRANCH")&&this.refineBranch(this.root),this.hideCollapsed()}hideCollapsed(){this.nodesCollapsed.forEach(e=>{let n=this.getInfo(e);if(!n)return void this.nodesCollapsed.delete(e);let r=n.children.find(e=>"blockIcon"===e.flowNodeType||"blockOrderIcon"===e.flowNodeType);if(r){let e=this.getInfo(r);e.next=void 0,e.pre=void 0,n.children=[r];return}n.children=[]})}isNodeEnd(e){if(e.getNodeMeta().isNodeEnd)return!0;let{children:n}=this.getInfo(e);return n.length>0&&e.isInlineBlocks?n.every(e=>this.isNodeEnd(e)):!!e.isInlineBlock&&this.isNodeEnd(n[n.length-1])}refineBranch(e){let n=this.getInfo(e).children[0];for(;n;){if("dynamicSplit"===n.flowNodeType||"staticSplit"===n.flowNodeType){let{next:e,children:r}=this.getInfo(n),{children:i}=this.getInfo(r[1]),o=(i||[]).filter(e=>!this.isNodeEnd(e)),s=1===o.length;if(s&&e&&this.dragNextNodesToBlock(o[0],e),i?.forEach(e=>{this.refineBranch(e)}),s)break}n=n.next}}dragNextNodesToBlock(e,n){let r=this.getInfo(e),i=this.getInfo(n),o=r.children[e.children.length-1];if(i.parent){let s=this.getInfo(i.parent);i.pre&&(this.getInfo(i.pre).next=void 0),o&&(this.getInfo(o).next=n,i.pre=o);let a=s.children.indexOf(n),l=s.children.slice(a);for(let n of(s.children=s.children.slice(0,a),l)){let i=this.getInfo(n);r.children.push(n),i.parent=e}}}getInfo(e){return this.map.get(e)||this.originTree.getInfo(e)}getOriginInfo(e){return this.originTree.getInfo(e)}getCollapsedChildren(e){return this.getOriginInfo(e).children||[]}remove(){throw Error("Render Tree cannot use remove node")}addChild(){throw Error("Render tree cannot use add child")}insertAfter(){throw Error("Render tree cannot use insert after")}removeParent(){throw Error("Render tree cannot use remove parent")}},X=Symbol("FlowDocumentOptions"),Q={allNodesDefaultExpanded:!1},q={...M,INLINE_SPACING_BOTTOM:"INLINE_SPACING_BOTTOM",INLINE_BLOCKS_INLINE_SPACING_TOP:"INLINE_BLOCKS_INLINE_SPACING_TOP",INLINE_BLOCKS_INLINE_SPACING_BOTTOM:"INLINE_BLOCKS_INLINE_SPACING_BOTTOM",BASE_COLOR:"BASE_COLOR",BASE_ACTIVATED_COLOR:"BASE_ACTIVATED_COLOR",INLINE_BLOCKS_PADDING_TOP:"INLINE_BLOCKS_PADDING_TOP"},J=Symbol("FlowDocumentContribution"),ee=Symbol("FlowDocumentConfigDefaultData"),et=class{constructor(e={}){this._data=e,this.onDataChangeEmitter=new f.Q5,this.onChange=this.onDataChangeEmitter.event}get(e){return this._data[e]}set(e,n){this.get(e)!==n&&(this._data[e]=n,this.onDataChangeEmitter.fire(e))}registerConfigs(e){Object.keys(e).forEach(n=>{this.set(n,e[n])})}};et=E([(0,y.b2)(),w(0,(0,y.f3)(ee)),w(0,(0,y.jt)())],et);var en=Symbol("FlowDocumentProvider"),er=class{constructor(){this.contributions=[],this.registers=new Map,this.nodeRegistryCache=new Map,this.nodeDataRegistries=[],this.layouts=[],this.currentLayoutKey="",this.onNodeUpdateEmitter=new f.Q5,this.onNodeCreateEmitter=new f.Q5,this.onNodeDisposeEmitter=new f.Q5,this.onLayoutChangeEmitter=new f.Q5,this.onNodeUpdate=this.onNodeUpdateEmitter.event,this.onNodeCreate=this.onNodeCreateEmitter.event,this.onNodeDispose=this.onNodeDisposeEmitter.event,this.onLayoutChange=this.onLayoutChangeEmitter.event}init(){this.options||(this.options=Q),this.currentLayoutKey=this.options.defaultLayout||"vertical-fixed-layout",this.contributions.forEach(e=>e.registerDocument?.(this)),this.root=this.addNode({id:"root",type:"root"}),this.originTree=new Y(this.root),this.transformer=this.entityManager.createEntity(W,{document:this}),this.renderState=this.entityManager.createEntity(G),this.renderTree=new Z(this.root,this.originTree,this),this.layout.reload?.()}fromJSON(e,n=!0){this.originTree.clear(),this.renderTree.clear(),this.entityManager.changeEntityLocked=!0;let r=this.entityManager.getEntities(U),i=[this.root];this.addBlocksAsChildren(this.root,e.nodes||[],i),r.forEach(e=>{i.includes(e)||e.dispose()}),this.entityManager.changeEntityLocked=!1,this.transformer.loading=!1,n&&this.fireRender()}get layout(){let e=this.layouts.find(e=>e.name==this.currentLayoutKey);if(!e)throw Error(`Unknown flow layout: ${this.currentLayoutKey}`);return e}async load(){await Promise.all(this.contributions.map(e=>e.loadDocument?.(this)))}get loading(){return this.transformer.loading}fireRender(){this.transformer.isTreeDirty()&&(this.entityManager.fireEntityChanged(U.type),this.entityManager.fireEntityChanged(W.type))}addFromNode(e,n){let r="string"==typeof e?this.getNode(e):e;this.entityManager.changeEntityLocked=!0;let{parent:i}=r,o=this.addNode({...n,parent:i});return this.originTree.insertAfter(r,o),this.entityManager.changeEntityLocked=!1,this.entityManager.fireEntityChanged(U.type),o}removeNode(e){"string"==typeof e?this.getNode(e)?.dispose():e.dispose()}addNode(e,n,r){let{id:i,type:o="block",originParent:s,parent:a,meta:l,hidden:h,index:c}=e,u=this.getNode(i),d=!1,p=this.getNodeRegistry(o,e.originParent);if(u&&u.flowNodeType!==e.type&&(u.dispose(),u=void 0),!u){let{dataRegistries:n}=p;u=this.entityManager.createEntity(U,{id:i,document:this,flowNodeType:o,originParent:s,meta:l});let r=n?this.nodeDataRegistries.concat(...n):this.nodeDataRegistries;u.addInitializeData(r),u.onDispose(()=>this.onNodeDisposeEmitter.fire({node:u})),this.options.fromNodeJSON&&this.options.fromNodeJSON(u,e),d=!0}if(u.initData({originParent:s,parent:a,meta:l,hidden:h,index:c}),u.isStart&&this.root.addChild(u),this.onNodeUpdateEmitter.fire({node:u,data:e}),n?.push(u),p.onCreate){let r=p.onCreate(u,e);r&&n&&n.push(...r)}else e.blocks&&e.blocks.length>0&&(e.blocks[0].type?this.addBlocksAsChildren(u,e.blocks,n):this.addInlineBlocks(u,e.blocks,n));return d&&!r&&this.onNodeCreateEmitter.fire({node:u,data:e}),u}addBlocksAsChildren(e,n,r){for(let i of n)this.addNode({...i,parent:e},r)}addInlineBlocks(e,n,r=[]){let i=this.addNode({id:`$blockIcon$${e.id}`,type:"blockIcon",originParent:e,parent:e});if(r.push(i),n.length>0){let i=this.addNode({id:`$inlineBlocks$${e.id}`,type:"inlineBlocks",originParent:e,parent:e});r.push(i),n.forEach(n=>{this.addBlock(e,n,r)})}return r}addBlock(e,n,r,i,o){let s="string"==typeof e?this.getNode(e):e,{onBlockChildCreate:a}=s.getNodeRegistry();if(a)return a(s,n,r);i=i||this.getNode(`$inlineBlocks$${s.id}`);let l=this.addNode({...(0,g.omit)(n,"blocks"),type:n.type||"block",originParent:s,parent:i,index:o});n.meta?.defaultCollapsed&&(l.collapsed=!0);let h=this.addNode({id:`$blockOrderIcon$${n.id}`,type:"blockOrderIcon",originParent:s,meta:n.meta,data:n.data,parent:l});return r?.push(l,h),n.blocks&&this.addBlocksAsChildren(l,n.blocks,r),l}getNode(e){if(e)return this.entityManager.getEntityById(e)}registerFlowNodes(...e){e.forEach(e=>{if(!e)throw Error("[FlowDocument] registerFlowNodes parameters get undefined registry.");let n=this.registers.get(e.type);this.registers.set(e.type,{...n,...e,meta:{...n?.meta,...e?.meta}})})}toJSON(){return{nodes:this.root.toJSON().blocks}}getNodeRegister(e,n){return this.getNodeRegistry(e,n)}getNodeRegistry(e,n){let r=`${e}_${n?.flowNodeType||""}`;if(this.nodeRegistryCache.has(r))return this.nodeRegistryCache.get(r);let i=this.options.getNodeDefaultRegistry?.(e),o=this.registers.get(e)||{type:e},s=[];if(o.extend&&this.registers.has(o.extend)&&(o=u.merge(this.getNodeRegistry(o.extend),o,o.type)),n){let r=this.getNodeRegistry(n.flowNodeType).extendChildRegistries?.find(n=>n.type===e);r&&(r.extend&&this.registers.has(r.extend)&&s.push(this.registers.get(r.extend)),s.push(r))}o=u.extend(o,s);let a=P(e,this);a.spacing=this.options?.constants?.[q.NODE_SPACING]||a.spacing;let l={...i,...o,meta:{...a,...i?.meta,...o.meta}};return this.nodeRegistryCache.set(r,l),l}registerNodeDatas(...e){this.nodeDataRegistries.push(...e)}traverse(e,n=this.root,r=0){return this.originTree.traverse(e,n,r)}get size(){return this.getAllNodes().length}hasNode(e){return!!this.entityManager.getEntityById(e)}getAllNodes(){return this.entityManager.getEntities(U)}toString(){return this.originTree.toString()}getRenderDatas(e,n=!0){let r=[];return this.renderTree.traverse(i=>{(n||!i.hidden)&&r.push(i.getData(e))}),r}moveNodes({dropNodeId:e,sortNodeIds:n,inside:r=!1}){let i=this.getNode(e);if(!i)return;let o=n.map(e=>this.getNode(e));for(let e of(this.entityManager.changeEntityLocked=!0,o.reverse()))r?this.originTree.addChild(i,e,0):this.originTree.insertAfter(i,e);this.entityManager.changeEntityLocked=!1,this.fireRender()}moveChildNodes({toParentId:e,toIndex:n,nodeIds:r}){if(0===r.length)return;let i=this.getNode(e);i&&(this.entityManager.changeEntityLocked=!0,this.originTree.moveChilds(i,r.map(e=>this.getNode(e)),n),this.entityManager.changeEntityLocked=!1,this.fireRender())}registerLayout(e){this.layouts.push(e)}setLayout(e){if(this.currentLayoutKey===e)return;let n=this.layouts.find(n=>n.name===e);n&&(this.currentLayoutKey=e,this.transformer.clear(),n.reload?.(),this.fireRender(),this.onLayoutChangeEmitter.fire(this.layout))}toggleFixedLayout(){this.setLayout("horizontal-fixed-layout"===this.layout.name?"vertical-fixed-layout":"horizontal-fixed-layout")}dispose(){this.registers.clear(),this.nodeRegistryCache.clear(),this.originTree.dispose(),this.renderTree.dispose(),this.onNodeUpdateEmitter.dispose(),this.onNodeCreateEmitter.dispose(),this.onNodeDisposeEmitter.dispose(),this.onLayoutChangeEmitter.dispose()}};E([(0,y.f3)(p.v2)],er.prototype,"entityManager",2),E([(0,y.f3)(et)],er.prototype,"config",2),E([(0,y.f3)(X),(0,y.jt)()],er.prototype,"options",2),E([(0,y.nx)(J),(0,y.jt)()],er.prototype,"contributions",2),E([(0,y.zY)()],er.prototype,"init",1),er=E([(0,y.b2)()],er);var ei=class e{constructor(e){this.groupNode=e}get nodes(){return this.groupNode.collapsedChildren||[]}get collapsed(){return this.groupNode.getData($).collapsed}collapse(){this.collapsed=!0}expand(){this.collapsed=!1}get bounds(){return this.groupNode.getData($).bounds}isStartNode(e){if(!e)return!1;let n=this.nodes;return!!n[0]&&e.id===n[0].id}isEndNode(e){if(!e)return!1;let n=this.nodes;return!!n[n.length-1]&&e.id===n[n.length-1].id}set note(e){this.groupNode.getNodeMeta().note=e}get note(){return this.groupNode.getNodeMeta().note||""}set noteHeight(e){this.groupNode.getNodeMeta().noteHeight=e}get noteHeight(){return this.groupNode.getNodeMeta().noteHeight||0}get positionConfig(){return this.groupNode.getNodeMeta().positionConfig}set collapsed(e){let n=this.groupNode.getData($);n.collapsed=e,n.localDirty=!0,n.parent&&(n.parent.localDirty=!0),n.parent?.firstChild&&(n.parent.firstChild.localDirty=!0)}set hovered(e){let n=this.groupNode.getData(V);e?n.toggleMouseEnter():n.toggleMouseLeave(),n.hovered!==e&&(n.hovered=e)}get hovered(){return this.groupNode.getData(V).hovered}static create(n){if(n&&d.isGroupNode(n))return new e(n)}},eo=d||(d={});let es=e=>{let n=[],r=e.parent;for(;r;)n.push(r),r=r.parent;return n},ea=e=>e?.parent?.flowNodeType==="group";eo.validate=e=>{if(!e||!Array.isArray(e)||0===e.length||e.some(e=>(0,eo.isGroupNode)(e))||e.some(e=>e&&ea(e)))return!1;let n=e[0].parent;return!(!e.every(e=>e.parent===n)||!e.map(e=>e.index).sort((e,n)=>e-n).every((e,n,r)=>0===n||e===r[n-1]+1)||es(e[0]).some(e=>ea(e)))},eo.getNodeGroupController=e=>{if(!e||!ea(e))return;let n=e?.parent;return ei.create(n)},eo.getNodeRecursionGroupController=e=>{if(!e)return;let n=(0,eo.getNodeGroupController)(e);return n||(e.parent?(0,eo.getNodeRecursionGroupController)(e.parent):void 0)},eo.isGroupNode=e=>"group"===e.flowNodeType;var el=class{constructor(){this.onDropEmitter=new f.Q5,this.onDrop=this.onDropEmitter.event}get renderState(){return this.document.renderState}get dragStartNode(){return this.renderState.getDragStartEntity()}get dragNodes(){return this.renderState.getDragEntities()}get dropNodeId(){return this.renderState.getNodeDroppingId()}get isDragBranch(){return this.dragStartNode?.isInlineBlock}get nodeDragIdsWithChildren(){return this.renderState.config.nodeDragIdsWithChildren||[]}get dragging(){let e=this.dragStartNode?.getData(V);return!!e?.dragging}get labelSide(){return this.renderState.config.dragLabelSide}dropBranch(){this.dropNode()}dropNode(){let e=this.document.getNode(this.dropNodeId);if(!e)return;let n=[],r=this.dragStartNode;for(;r&&this.dragNodes.includes(r);)n.push(r),r=r.next;this.operationService.dragNodes({dropNode:e,nodes:n}),n.length>0&&this.onDropEmitter.fire({dropNode:e,dragNodes:n})}isDroppableNode(e){return!(!this.dragging||this.isDragBranch||this.nodeDragIdsWithChildren.includes(e.id)||e.next&&this.nodeDragIdsWithChildren.includes(e.next.id)||e.isInlineBlocks||e.isInlineBlock||this.dragNodes.some(e=>"group"===e.flowNodeType)&&d.getNodeRecursionGroupController(e))&&!0}isDroppableBranch(e,n="normal_branch"){if(this.isDragBranch){if(!e.isInlineBlock||e.parent!==this.dragStartNode.parent||e===this.dragStartNode)return!1;if("normal_branch"===n&&e.next!==this.dragStartNode||"pre_branch"===n&&e.pre!==this.dragStartNode)return!0}return!1}};E([(0,y.f3)(er)],el.prototype,"document",2),E([(0,y.f3)(R)],el.prototype,"operationService",2),E([(0,y.f3)(p.v2)],el.prototype,"entityManager",2),el=E([(0,y.b2)()],el);var eh=class{constructor(){this.onNodeAddEmitter=new f.Q5,this.onNodeAdd=this.onNodeAddEmitter.event,this.toDispose=new f.K4,this.onNodeMoveEmitter=new f.Q5,this.onNodeMove=this.onNodeMoveEmitter.event}init(){this.toDispose.pushAll([this.onNodeAddEmitter,this.onNodeMoveEmitter])}addNode(e,n={}){let r,i,o,{parent:s,index:a,hidden:l}=n;s&&(r=this.toNodeEntity(s)),r&&(i=r.getNodeRegistry());let h={...e,type:e.type||"block"},c={...h,parent:r,index:a,hidden:l};return o=r&&i?.addChild?i.addChild(r,h,{index:a,hidden:l}):this.document.addNode(c),this.onNodeAddEmitter.fire({node:o,data:c}),o}addFromNode(e,n){return this.document.addFromNode(e,n)}deleteNode(e){this.document.removeNode(e)}deleteNodes(e){(e||[]).forEach(e=>{this.deleteNode(e)})}addBlock(e,n,r={}){let{parent:i,index:o}=r;return this.document.addBlock(e,n,void 0,i,o)}moveNode(e,n={}){let{parent:r,index:i}=n,o=this.toNodeEntity(e),s=o?.parent;if(!s)return;let a=r?this.toNodeEntity(r):s;if(!a)return void console.warn("no new parent found",r);let l=void 0===i?a.collapsedChildren.length:i;return this.doMoveNode(o,a,l)}dragNodes({dropNode:e,nodes:n}){if(0===n.length)return;let r=n[0],i=r.parent,o=e.parent;if(!i||!o)return;let s=i.children.findIndex(e=>e===r),a=o.children.findIndex(n=>n===e),l=a+1;i===o&&s<a&&(l-=n.length);let h={nodeIds:n.map(e=>e.id),fromParentId:i.id,toParentId:o.id,fromIndex:s,toIndex:l};return this.apply({type:"moveChildNodes",value:h})}apply(e){let n=this.document;switch(e.type){case"addFromNode":return n.addFromNode(e.value.fromId,e.value.data);case"deleteFromNode":return n.getNode(e.value?.data?.id)?.dispose();case"addBlock":{let r;return e.value.parentId&&(r=n.getNode(e.value.parentId)),n.addBlock(e.value.targetId,e.value.blockData,void 0,r,e.value.index)}case"deleteBlock":{let r=n.getNode(e.value?.blockData.id);return r?.dispose()}case"createGroup":{let r=n.addFromNode(e.value.targetId,{id:e.value.groupId,type:"group"});return n.moveNodes({dropNodeId:e.value.groupId,sortNodeIds:e.value.nodeIds,inside:!0}),r}case"ungroup":return n.moveNodes({dropNodeId:e.value.groupId,sortNodeIds:e.value.nodeIds}),n.getNode(e.value.groupId)?.dispose();case"moveNodes":return n.moveNodes({dropNodeId:e.value.toId,sortNodeIds:e.value.nodeIds});case"moveBlock":return n.moveChildNodes({...e.value,nodeIds:[e.value.nodeId]});case"addNodes":{let r=e.value.fromId;(e.value.nodes||[]).forEach(e=>{r=n.addFromNode(r,e).id});break}case"deleteNodes":(e.value.nodes||[]).forEach(e=>{let r=n.getNode(e.id);r?.dispose()});break;case"addChildNode":return n.addNode({...e.value.data,parent:e.value.parentId?n.getNode(e.value.parentId):void 0,originParent:e.value.originParentId?n.getNode(e.value.originParentId):void 0,index:e.value.index,hidden:e.value.hidden});case"deleteChildNode":return n.getNode(e.value.data.id)?.dispose();case"moveChildNodes":return n.moveChildNodes(e.value);default:throw Error("unknown operation type")}}transact(e){e()}dispose(){this.toDispose.dispose()}toId(e){return"string"==typeof e?e:e.id}toNodeEntity(e){return"string"==typeof e?this.document.getNode(e):e}getNodeIndex(e){let n=this.toNodeEntity(e),r=n?.parent;return r?r.children.findIndex(e=>e===n):-1}doMoveNode(e,n,r){if(!e.parent)throw Error("root node cannot move");let i={node:e,fromParent:e.parent,toParent:n,fromIndex:this.getNodeIndex(e),toIndex:r};this.document.moveChildNodes({nodeIds:[this.toId(e)],toParentId:this.toId(n),toIndex:r}),this.onNodeMoveEmitter.fire(i)}};E([(0,y.f3)(p.v2)],eh.prototype,"entityManager",2),E([(0,y.f3)(er)],eh.prototype,"document",2),E([(0,y.zY)()],eh.prototype,"init",1),eh=E([(0,y.b2)()],eh);var ec=class{createGroup(e){if(!e||!Array.isArray(e)||0===e.length||!d.validate(e))return;let n=e.sort((e,n)=>e.index-n.index)[0],r=`group_${(0,m.x0)(5)}`;this.operationService.apply({type:"createGroup",value:{targetId:n.id,groupId:r,nodeIds:e.map(e=>e.id)}});let i=this.entityManager.getEntityById(r);if(!i)return;let o=this.groupController(i);if(o)return o.expand(),i}deleteGroup(e){let n=e.toJSON();e.pre&&n&&this.operationService.apply({type:"deleteNodes",value:{fromId:e.pre.id,nodes:[n]}})}ungroup(e){let n=this.groupController(e);if(!n)return;let r=n.nodes;e.pre&&(n.collapse(),this.operationService.apply({type:"ungroup",value:{groupId:e.id,targetId:e.pre.id,nodeIds:r.map(e=>e.id)}}))}getAllGroups(){return this.entityManager.getEntities(U).filter(e=>"group"===e.flowNodeType).map(e=>this.groupController(e)).filter(Boolean)}groupController(e){return ei.create(e)}static validate(e){return d.validate(e)}};E([(0,y.f3)(p.v2)],ec.prototype,"entityManager",2),E([(0,y.f3)(R)],ec.prototype,"operationService",2),ec=E([(0,y.b2)()],ec);var eu=class{constructor(){this.name="vertical-fixed-layout",this.structDataMap=new WeakMap}get document(){return this.documentProvider()}reload(){this.structDataMap=new WeakMap}update(){this.updateLocalTransform(this.document.root)}updateLocalTransform(e,n=!1){let{children:r,parent:i,isInlineBlock:o}=e,s=e.getData($),{getDelta:a,getOrigin:l}=e.getNodeRegistry(),h=this.structDataMap.get(e)||{childrenLength:0,index:-1};e.clearMemoGlobal();let c=s.localDirty||n,u={index:e.index,childrenLength:e.children.length};(h.childrenLength!==u.childrenLength||h.index!==u.index)&&(c=!0,this.structDataMap.set(e,u));let d=!1;if(r.length>0)for(let e of r)this.updateLocalTransform(e,d)&&(d=!0,c=!0);if(!c)return!1;e.clearMemoLocal(),s.transform.update({origin:l?l(s,this):this.getDefaultNodeOrigin()});let p=s.pre,f=a?.(s,this)||{x:0,y:0},g=o&&s.parent?.inlineSpacingPre?s.parent?.inlineSpacingPre:0,y=i?.getNodeRegistry().getChildDelta?.(s,this)||{x:0,y:0};f.x+=y.x,f.y+=y.y;let m={x:f.x,y:f.y};return o?m.y+=g:(m.y+=p?.localBounds.bottom||0,m.y+=p?.spacing||0),s.transform.update({size:s.data.size,position:m}),this.onAfterUpdateLocalTransform(s),s.localDirty=!1,!0}onAfterUpdateLocalTransform(e){let{onAfterUpdateLocalTransform:n}=e.entity.getNodeRegistry();n?.(e,this),this.contribs?.forEach(n=>{n?.onAfterUpdateLocalTransform?.(e,this)})}getNodeTransform(e){return e.getData($)}getPadding(e){let{inlineSpacingPre:n,inlineSpacingAfter:r,padding:i}=e.getNodeMeta(),o=this.getNodeTransform(e);return i?"function"==typeof i?i(o):i:{left:0,top:"function"==typeof n?n(o):n,right:0,bottom:"function"==typeof r?r(o):r}}getInitScroll(e){return{scrollX:-e.width/2,scrollY:-36}}getDefaultInputPoint(e){return this.getNodeTransform(e).bounds.topCenter}getDefaultOutputPoint(e){return this.getNodeTransform(e).bounds.bottomCenter}getDefaultNodeOrigin(){return{x:.5,y:0}}};E([(0,y.f3)(en)],eu.prototype,"documentProvider",2),E([(0,y.nx)(S),(0,y.jt)()],eu.prototype,"contribs",2),eu=E([(0,y.b2)()],eu);var ed=class{constructor(){this.name="horizontal-fixed-layout",this.structDataMap=new WeakMap}get document(){return this.documentProvider()}reload(){this.structDataMap=new WeakMap}update(){this.updateLocalTransform(this.document.root)}updateLocalTransform(e,n=!1){let{children:r,parent:i,isInlineBlock:o}=e,s=e.getData($),{getDelta:a,getOrigin:l}=e.getNodeRegistry(),h=this.structDataMap.get(e)||{childrenLength:0,index:-1};e.clearMemoGlobal();let c=s.localDirty||n,u={index:e.index,childrenLength:e.children.length};(h.childrenLength!==u.childrenLength||h.index!==u.index)&&(c=!0,this.structDataMap.set(e,u));let d=!1;if(r.length>0)for(let e of r)this.updateLocalTransform(e,d)&&(d=!0,c=!0);if(!c)return!1;e.clearMemoLocal(),s.transform.update({origin:l?l(s,this):this.getDefaultNodeOrigin()});let p=s.pre,f=a?.(s,this)||{x:0,y:0},g=o&&s.parent?.inlineSpacingPre?s.parent?.inlineSpacingPre:0,y=i?.getNodeRegistry().getChildDelta?.(s,this)||{x:0,y:0};f.x+=y.x,f.y+=y.y;let m={x:f.x,y:f.y};return o?m.x+=g:(m.x+=p?.localBounds.right||0,m.x+=p?.spacing||0),s.transform.update({size:s.data.size,position:m}),this.onAfterUpdateLocalTransform(s),s.localDirty=!1,!0}onAfterUpdateLocalTransform(e){let{onAfterUpdateLocalTransform:n}=e.entity.getNodeRegistry();n?.(e,this),this.contribs?.forEach(n=>{n?.onAfterUpdateLocalTransform?.(e,this)})}getNodeTransform(e){return e.getData($)}getPadding(e){let{inlineSpacingPre:n,inlineSpacingAfter:r,padding:i}=e.getNodeMeta(),o=this.getNodeTransform(e);return i?"function"==typeof i?i(o):i:{left:"function"==typeof n?n(o):n,top:0,right:"function"==typeof r?r(o):r,bottom:0}}getInitScroll(e){return{scrollX:-36,scrollY:-e.height/2}}getDefaultInputPoint(e){return this.getNodeTransform(e).bounds.leftCenter}getDefaultOutputPoint(e){return this.getNodeTransform(e).bounds.rightCenter}getDefaultNodeOrigin(){return{x:0,y:.5}}};E([(0,y.f3)(en)],ed.prototype,"documentProvider",2),E([(0,y.nx)(S),(0,y.jt)()],ed.prototype,"contribs",2),ed=E([(0,y.b2)()],ed);var ep=new y.nZ(e=>{e(er).toSelf().inSingletonScope(),e(en).toDynamicValue(e=>()=>e.container.get(er)).inSingletonScope(),e(et).toSelf().inSingletonScope(),e(eu).toSelf().inSingletonScope(),e(ed).toSelf().inSingletonScope(),e(el).toSelf().inSingletonScope(),e(R).to(eh).inSingletonScope(),e(ec).toSelf().inSingletonScope(),e(J).toDynamicValue(e=>({registerDocument:n=>{n.registerLayout(e.container.get(eu)),n.registerLayout(e.container.get(ed))}}))}),ef=(e,n,r)=>{let i=e.getService(X);return i?.constants?.[n]||r||I[n]}},8820:function(e,n,r){"use strict";r.d(n,{V7e:()=>f.V7,v2K:()=>d.v2,Zn3:()=>d.Zn,d3V:()=>d.d3,lVg:()=>f.lV,yyW:()=>d.yy,Fu1:()=>nD,z2R:()=>d.z2,FwO:()=>d.Fw,esp:()=>nh,M1y:()=>d.M1,f3M:()=>g.f3,YvH:()=>d.Yv,qRT:()=>a,rQR:()=>d.rQ,JAk:()=>u.JA,qoQ:()=>tG.qo,eGM:()=>p.eG,R6T:()=>d.iX,ERL:()=>d.ER,HoL:()=>d.Ho,VOn:()=>d.VO,GwP:()=>s,mYg:()=>d.mY,Q5$:()=>u.Q5,Psq:()=>tH.Ps,Dcz:()=>d.Dc,rVg:()=>tM,F26:()=>tG.F2,XQj:()=>d.XQ,C$T:()=>tG.C$,AeJ:()=>u.Ae,qq0:()=>f.qq,_J4:()=>tL,W6u:()=>d.W6,Ys9:()=>t$,gw0:()=>u.gw,cL:()=>tB.cL,CMu:()=>c.CM,Emw:()=>f.Em,b2C:()=>g.b2,kmj:()=>d.km,G2Z:()=>d.G2,gNt:()=>tG.gN,nYJ:()=>l,l09:()=>tG.l0}),r(9453);var i,o,s,a,l,h,c=r(3569),u=r(8336),d=r(8319),p=r(2100),f=r(4706),g=r(4210),y=r(377);function m(e){return"function"==typeof e}function b(e){var n=e(function(e){Error.call(e),e.stack=Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var _=b(function(e){return function(n){e(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(e,n){return n+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}});function E(e,n){if(e){var r=e.indexOf(n);0<=r&&e.splice(r,1)}}var w=function(){var e;function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,n,r,i,o,s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=(0,y.XA)(s),l=a.next();!l.done;l=a.next())l.value.remove(this)}catch(n){e={error:n}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var h=this.initialTeardown;if(m(h))try{h()}catch(e){o=e instanceof _?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=(0,y.XA)(c),d=u.next();!d.done;d=u.next()){var p=d.value;try{S(p)}catch(e){o=null!=o?o:[],e instanceof _?o=(0,y.ev)((0,y.ev)([],(0,y.CR)(o)),(0,y.CR)(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}if(o)throw new _(o)}},n.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)S(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(r=this._finalizers)?r:[]).push(e)}},n.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},n.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},n.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&E(n,e)},n.prototype.remove=function(e){var r=this._finalizers;r&&E(r,e),e instanceof n&&e._removeParent(this)},(e=new n).closed=!0,n.EMPTY=e,n}(),x=w.EMPTY;function C(e){return e instanceof w||e&&"closed"in e&&m(e.remove)&&m(e.add)&&m(e.unsubscribe)}function S(e){m(e)?e():e.unsubscribe()}var D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout:function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=N.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,y.ev)([e,n],(0,y.CR)(r))):setTimeout.apply(void 0,(0,y.ev)([e,n],(0,y.CR)(r)))},clearTimeout:function(e){var n=N.delegate;return((null==n?void 0:n.clearTimeout)||clearTimeout)(e)},delegate:void 0};function O(e){N.setTimeout(function(){var n=D.onUnhandledError;if(n)n(e);else throw e})}function M(){}var I=T("C",void 0,void 0);function T(e,n,r){return{kind:e,value:n,error:r}}var k=null;function P(e){if(D.useDeprecatedSynchronousErrorHandling){var n=!k;if(n&&(k={errorThrown:!1,error:null}),e(),n){var r=k,i=r.errorThrown,o=r.error;if(k=null,i)throw o}}else e()}var A=function(e){function n(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,C(n)&&n.add(r)):r.destination=$,r}return(0,y.ZT)(n,e),n.create=function(e,n,r){return new z(e,n,r)},n.prototype.next=function(e){this.isStopped?F(T("N",e,void 0),this):this._next(e)},n.prototype.error=function(e){this.isStopped?F(T("E",void 0,e),this):(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped?F(I,this):(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(w),L=Function.prototype.bind;function j(e,n){return L.call(e,n)}var R=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(e){V(e)}},e.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(e){V(e)}else V(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){V(e)}},e}(),z=function(e){function n(n,r,i){var o,s,a=e.call(this)||this;return m(n)||!n?o={next:null!=n?n:void 0,error:null!=r?r:void 0,complete:null!=i?i:void 0}:a&&D.useDeprecatedNextContext?((s=Object.create(n)).unsubscribe=function(){return a.unsubscribe()},o={next:n.next&&j(n.next,s),error:n.error&&j(n.error,s),complete:n.complete&&j(n.complete,s)}):o=n,a.destination=new R(o),a}return(0,y.ZT)(n,e),n}(A);function V(e){if(D.useDeprecatedSynchronousErrorHandling)D.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=e);else O(e)}function F(e,n){var r=D.onStoppedNotification;r&&N.setTimeout(function(){return r(e,n)})}var $={closed:!0,next:M,error:function(e){throw e},complete:M},B="function"==typeof Symbol&&Symbol.observable||"@@observable";function H(e){return e}var K=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(n){var r=new e;return r.source=this,r.operator=n,r},e.prototype.subscribe=function(e,n,r){var i=this,o=!function(e){return e&&e instanceof A||e&&m(e.next)&&m(e.error)&&m(e.complete)&&C(e)}(e)?new z(e,n,r):e;return P(function(){var e=i.operator,n=i.source;o.add(e?e.call(o,n):n?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},e.prototype.forEach=function(e,n){var r=this;return new(n=U(n))(function(n,i){var o=new z({next:function(n){try{e(n)}catch(e){i(e),o.unsubscribe()}},error:i,complete:n});r.subscribe(o)})},e.prototype._subscribe=function(e){var n;return null==(n=this.source)?void 0:n.subscribe(e)},e.prototype[B]=function(){return this},e.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0===e.length?H:1===e.length?e[0]:function(n){return e.reduce(function(e,n){return n(e)},n)})(this)},e.prototype.toPromise=function(e){var n=this;return new(e=U(e))(function(e,r){var i;n.subscribe(function(e){return i=e},function(e){return r(e)},function(){return e(i)})})},e.create=function(n){return new e(n)},e}();function U(e){var n;return null!=(n=null!=e?e:D.Promise)?n:Promise}var W=b(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),G=function(e){function n(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return(0,y.ZT)(n,e),n.prototype.lift=function(e){var n=new Y(this,this);return n.operator=e,n},n.prototype._throwIfClosed=function(){if(this.closed)throw new W},n.prototype.next=function(e){var n=this;P(function(){var r,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=(0,y.XA)(n.currentObservers),s=o.next();!s.done;s=o.next())s.value.next(e)}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}})},n.prototype.error=function(e){var n=this;P(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=e;for(var r=n.observers;r.length;)r.shift().error(e)}})},n.prototype.complete=function(){var e=this;P(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var n=e.observers;n.length;)n.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},n.prototype._innerSubscribe=function(e){var n=this,r=this.hasError,i=this.isStopped,o=this.observers;return r||i?x:(this.currentObservers=null,o.push(e),new w(function(){n.currentObservers=null,E(o,e)}))},n.prototype._checkFinalizedStatuses=function(e){var n=this.hasError,r=this.thrownError,i=this.isStopped;n?e.error(r):i&&e.complete()},n.prototype.asObservable=function(){var e=new K;return e.source=this,e},n.create=function(e,n){return new Y(e,n)},n}(K),Y=function(e){function n(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return(0,y.ZT)(n,e),n.prototype.next=function(e){var n,r;null==(r=null==(n=this.destination)?void 0:n.next)||r.call(n,e)},n.prototype.error=function(e){var n,r;null==(r=null==(n=this.destination)?void 0:n.error)||r.call(n,e)},n.prototype.complete=function(){var e,n;null==(n=null==(e=this.destination)?void 0:e.complete)||n.call(e)},n.prototype._subscribe=function(e){var n,r;return null!=(r=null==(n=this.source)?void 0:n.subscribe(e))?r:x},n}(G),Z=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function X(e){return m(null==e?void 0:e.then)}function Q(e){return Symbol.asyncIterator&&m(null==e?void 0:e[Symbol.asyncIterator])}function q(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var J="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ee(e){return m(null==e?void 0:e[J])}function et(e){return(0,y.FC)(this,arguments,function(){var n,r,i;return(0,y.Jh)(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,y.qq)(n.read())];case 3:if(i=(r=o.sent()).value,!r.done)return[3,5];return[4,(0,y.qq)(void 0)];case 4:return[2,o.sent()];case 5:return[4,(0,y.qq)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function en(e){return m(null==e?void 0:e.getReader)}function er(e){if(e instanceof K)return e;if(null!=e){var n,r,i,o;if(m(e[B])){return n=e,new K(function(e){var r=n[B]();if(m(r.subscribe))return r.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(Z(e)){return r=e,new K(function(e){for(var n=0;n<r.length&&!e.closed;n++)e.next(r[n]);e.complete()})}if(X(e)){return i=e,new K(function(e){i.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,O)})}if(Q(e))return ei(e);if(ee(e)){return o=e,new K(function(e){var n,r;try{for(var i=(0,y.XA)(o),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}if(en(e))return ei(et(e))}throw q(e)}function ei(e){return new K(function(n){(function(e,n){var r,i,o,s;return(0,y.mG)(this,void 0,void 0,function(){var a;return(0,y.Jh)(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=(0,y.KL)(e),l.label=1;case 1:return[4,r.next()];case 2:if((i=l.sent()).done)return[3,4];if(a=i.value,n.next(a),n.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:l.sent()},[3,11];case 6:if(l.trys.push([6,,9,10]),!(i&&!i.done&&(s=r.return)))return[3,8];return[4,s.call(r)];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})})(e,n).catch(function(e){return n.error(e)})})}function eo(e){return function(n){if(m(null==n?void 0:n.lift))return n.lift(function(n){try{return e(n,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function es(e,n,r,i,o){return new ea(e,n,r,i,o)}var ea=function(e){function n(n,r,i,o,s,a){var l=e.call(this,n)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=r?function(e){try{r(e)}catch(e){n.error(e)}}:e.prototype._next,l._error=o?function(e){try{o(e)}catch(e){n.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(e){n.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return(0,y.ZT)(n,e),n.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null==(n=this.onFinalize)||n.call(this)}},n}(A);function el(e,n){return eo(function(r,i){var o=null,s=0,a=!1,l=function(){return a&&!o&&i.complete()};r.subscribe(es(i,function(r){null==o||o.unsubscribe();var a=0,h=s++;er(e(r,h)).subscribe(o=es(i,function(e){return i.next(n?n(r,e,h,a++):e)},function(){o=null,l()}))},function(){a=!0,l()}))})}function eh(e,n){return eo(function(r,i){var o=0;r.subscribe(es(i,function(r){i.next(e.call(n,r,o++))}))})}function ec(e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var s=n.schedule(function(){r(),o?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(s),!o)return s}var eu=new K(function(e){return e.complete()});function ed(e){return e[e.length-1]}function ep(e){var n;return(n=ed(e))&&m(n.schedule)?e.pop():void 0}function ef(e,n){return void 0===n&&(n=0),eo(function(r,i){r.subscribe(es(i,function(r){return ec(i,e,function(){return i.next(r)},n)},function(){return ec(i,e,function(){return i.complete()},n)},function(r){return ec(i,e,function(){return i.error(r)},n)}))})}function eg(e,n){return void 0===n&&(n=0),eo(function(r,i){i.add(e.schedule(function(){return r.subscribe(i)},n))})}function ey(e,n){if(!e)throw Error("Iterable cannot be null");return new K(function(r){ec(r,n,function(){var i=e[Symbol.asyncIterator]();ec(r,n,function(){i.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function em(e,n){return n?function(e,n){if(null!=e){if(m(e[B]))return er(e).pipe(eg(n),ef(n));if(Z(e))return new K(function(r){var i=0;return n.schedule(function(){i===e.length?r.complete():(r.next(e[i++]),r.closed||this.schedule())})});if(X(e))return er(e).pipe(eg(n),ef(n));if(Q(e))return ey(e,n);if(ee(e))return new K(function(r){var i;return ec(r,n,function(){i=e[J](),ec(r,n,function(){var e,n,o;try{n=(e=i.next()).value,o=e.done}catch(e){r.error(e);return}o?r.complete():r.next(n)},0,!0)}),function(){return m(null==i?void 0:i.return)&&i.return()}});if(en(e))return ey(et(e),n)}throw q(e)}(e,n):er(e)}function ev(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=ep(r),s=(e=1/0,"number"==typeof ed(r)?r.pop():e);return r.length?1===r.length?er(r[0]):(void 0===(n=s)&&(n=1/0),function e(n,r,i){return(void 0===i&&(i=1/0),m(r))?e(function(e,i){return eh(function(n,o){return r(e,n,i,o)})(er(n(e,i)))},i):("number"==typeof r&&(i=r),eo(function(e,r){var o,s,a,l,h,c,u,d,p;return o=i,a=[],l=0,h=0,c=!1,u=function(){!c||a.length||l||r.complete()},d=function(e){return l<o?p(e):a.push(e)},p=function(e){l++;var i=!1;er(n(e,h++)).subscribe(es(r,function(e){s?d(e):r.next(e)},function(){i=!0},void 0,function(){if(i)try{for(l--;a.length&&l<o;)!function(){var e=a.shift();p(e)}();u()}catch(e){r.error(e)}}))},e.subscribe(es(r,d,function(){c=!0,u()})),function(){}}))}(H,n))(em(r,o)):eu}function eb(e,n){return eo(function(r,i){var o=0;r.subscribe(es(i,function(r){return e.call(n,r,o++)&&i.next(r)}))})}function e_(e){return eb(function(n,r){return e<=r})}function eE(e){void 0===e&&(e={});var n=e.connector,r=void 0===n?function(){return new G}:n,i=e.resetOnError,o=void 0===i||i,s=e.resetOnComplete,a=void 0===s||s,l=e.resetOnRefCountZero,h=void 0===l||l;return function(e){var n,i,s,l=0,c=!1,u=!1,d=function(){null==i||i.unsubscribe(),i=void 0},p=function(){d(),n=s=void 0,c=u=!1},f=function(){var e=n;p(),null==e||e.unsubscribe()};return eo(function(e,g){l++,u||c||d();var y=s=null!=s?s:r();g.add(function(){0!=--l||u||c||(i=ew(f,h))}),y.subscribe(g),!n&&l>0&&(n=new z({next:function(e){return y.next(e)},error:function(e){u=!0,d(),i=ew(p,o,e),y.error(e)},complete:function(){c=!0,d(),i=ew(p,a),y.complete()}}),er(e).subscribe(n))})(e)}}function ew(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!0===n)return void e();if(!1!==n){var o=new z({next:function(){o.unsubscribe(),e()}});return er(n.apply(void 0,(0,y.ev)([],(0,y.CR)(r)))).subscribe(o)}}var ex=r(9378),eC=function(e){function n(n){var r=e.call(this)||this;return r._value=n,r}return(0,y.ZT)(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return r.closed||n.next(this._value),r},n.prototype.getValue=function(){var e=this.hasError,n=this.thrownError,r=this._value;if(e)throw n;return this._throwIfClosed(),r},n.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},n}(G);function eS(e,n){return void 0===n&&(n=H),e=null!=e?e:eD,eo(function(r,i){var o,s=!0;r.subscribe(es(i,function(r){var a=n(r);(s||!e(o,a))&&(s=!1,o=a,i.next(r))}))})}function eD(e,n){return e===n}function eN(e,n,r){var i=m(e)||n||r?{next:e,error:n,complete:r}:e;return i?eo(function(e,n){null==(r=i.subscribe)||r.call(i);var r,o=!0;e.subscribe(es(n,function(e){var r;null==(r=i.next)||r.call(i,e),n.next(e)},function(){var e;o=!1,null==(e=i.complete)||e.call(i),n.complete()},function(e){var r;o=!1,null==(r=i.error)||r.call(i,e),n.error(e)},function(){var e,n;o&&(null==(e=i.unsubscribe)||e.call(i)),null==(n=i.finalize)||n.call(i)}))}):H}var eO=function(e){function n(n,r){return e.call(this)||this}return(0,y.ZT)(n,e),n.prototype.schedule=function(e,n){return void 0===n&&(n=0),this},n}(w),eM={setInterval:function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=eM.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,(0,y.ev)([e,n],(0,y.CR)(r))):setInterval.apply(void 0,(0,y.ev)([e,n],(0,y.CR)(r)))},clearInterval:function(e){var n=eM.delegate;return((null==n?void 0:n.clearInterval)||clearInterval)(e)},delegate:void 0},eI=function(e){function n(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return(0,y.ZT)(n,e),n.prototype.schedule=function(e,n){if(void 0===n&&(n=0),this.closed)return this;this.state=e;var r,i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!=(r=this.id)?r:this.requestAsyncId(o,this.id,n),this},n.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),eM.setInterval(e.flush.bind(e,this),r)},n.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&eM.clearInterval(n)},n.prototype.execute=function(e,n){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,n){var r,i=!1;try{this.work(e)}catch(e){i=!0,r=e||Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r},n.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,r=this.scheduler,i=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,E(i,this),null!=n&&(this.id=this.recycleAsyncId(r,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},n}(eO),eT={now:function(){return(eT.delegate||Date).now()},delegate:void 0},ek=function(){function e(n,r){void 0===r&&(r=e.now),this.schedulerActionCtor=n,this.now=r}return e.prototype.schedule=function(e,n,r){return void 0===n&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},e.now=eT.now,e}(),eP=function(e){function n(n,r){void 0===r&&(r=ek.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return(0,y.ZT)(n,e),n.prototype.flush=function(e){var n,r=this.actions;if(this._active)return void r.push(e);this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,n){for(;e=r.shift();)e.unsubscribe();throw n}},n}(ek),eA=new eP(eI),eL={schedule:function(e){var n=requestAnimationFrame,r=cancelAnimationFrame,i=eL.delegate;i&&(n=i.requestAnimationFrame,r=i.cancelAnimationFrame);var o=n(function(n){r=void 0,e(n)});return new w(function(){return null==r?void 0:r(o)})},requestAnimationFrame:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eL.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,y.ev)([],(0,y.CR)(e)))},cancelAnimationFrame:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=eL.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,y.ev)([],(0,y.CR)(e)))},delegate:void 0},ej=function(e){function n(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return(0,y.ZT)(n,e),n.prototype.requestAsyncId=function(n,r,i){return(void 0===i&&(i=0),null!==i&&i>0)?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=eL.requestAnimationFrame(function(){return n.flush(void 0)})))},n.prototype.recycleAsyncId=function(n,r,i){if(void 0===i&&(i=0),null!=i?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var o,s=n.actions;null!=r&&(null==(o=s[s.length-1])?void 0:o.id)!==r&&(eL.cancelAnimationFrame(r),n._scheduled=void 0)},n}(eI),eR=new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,y.ZT)(n,e),n.prototype.flush=function(e){this._active=!0;var n,r=this._scheduled;this._scheduled=void 0;var i=this.actions;e=e||i.shift();do if(n=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===r&&i.shift());if(this._active=!1,n){for(;(e=i[0])&&e.id===r&&i.shift();)e.unsubscribe();throw n}},n}(eP))(ej),ez=r(6261),eV=r(1874);function eF(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ep(e);return em(e,r)}var e$=Array.isArray,eB=Object.getPrototypeOf,eH=Object.prototype,eK=Object.keys,eU=Array.isArray;function eW(e,n,r){e?ec(r,e,n):n()}var eG=r(4194),eY=Object.defineProperty,eZ=Object.getOwnPropertyDescriptor,eX=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?eZ(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&eY(n,r,s),s},eQ=(e,n)=>(r,i)=>n(r,i,e);function eq(e){return u.JT.create(()=>e.unsubscribe())}var eJ=()=>{let e=new Map,n=(n,r)=>{if(e.has(n))return e.get(n);let i=r();return e.set(n,i),i};return n.clear=n=>{n?e.delete(n):e.clear()},n},e0=class{constructor(e){this.parentTable=e,this.table=new Map,this.onDataChangeEmitter=new u.Q5,this.variables$=new G,this.anyVariableChange$=this.variables$.pipe(el(e=>ev(...e.map(e=>e.value$.pipe(e_(1))))),eE()),this.onDataChange=this.onDataChangeEmitter.event,this._version=0}onAnyVariableChange(e){return eq(this.anyVariableChange$.subscribe(e))}onAnyChange(e){let n=new u.K4;return n.pushAll([this.onDataChange(e),this.onAnyVariableChange(e)]),n}fireChange(){this._version++,this.onDataChangeEmitter.fire(),this.parentTable?.fireChange()}get version(){return this._version}get variables(){return Array.from(this.table.values())}get variableKeys(){return Array.from(this.table.keys())}getByKeyPath(e){let[n,...r]=e||[];if(!n)return;let i=this.getVariableByKey(n);return r.length?i?.getByKeyPath(r):i}getVariableByKey(e){return this.table.get(e)}addVariableToTable(e){this.table.set(e.key,e),this.parentTable&&this.parentTable.addVariableToTable(e),this.variables$.next(this.variables)}removeVariableFromTable(e){this.table.delete(e),this.parentTable&&this.parentTable.removeVariableFromTable(e),this.variables$.next(this.variables)}dispose(){this.variableKeys.forEach(e=>this.parentTable?.removeVariableFromTable(e)),this.onDataChangeEmitter.dispose()}},e1=Symbol("DynamicVariableEngine"),e2=Symbol("ContainerProvider"),e3=class{constructor(){this.toDispose=new u.K4}get variableEngine(){return this.variableEngineProvider()}refreshAllChange(){this.variableEngine.getAllScopes().forEach(e=>{e.refreshCovers(),e.refreshDeps()})}dispose(){this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}get onDispose(){return this.toDispose.onDispose}};eX([(0,g.f3)(e1)],e3.prototype,"variableEngineProvider",2),e3=eX([(0,g.b2)()],e3);var e4=Symbol("post_construct_ast");function e5({getChildNode:e,updateChildNode:n,removeChildNode:r,nextJSON:i}){let o=e(),s=o?.kind!==i?.kind,a=i?.key&&i?.key!==o?.key;if(s||a){if(o&&(o.dispose(),r()),i){let e=this.createChildNode(i);return n(e),this.fireChange(),e}this.fireChange()}else i&&o?.fromJSON(i);return o}function e6(e){return"string"==typeof e?{kind:e}:e}(i=s||(s={})).isString=e=>e?.kind==="String",i.isNumber=e=>e?.kind==="Number",i.isBoolean=e=>e?.kind==="Boolean",i.isInteger=e=>e?.kind==="Integer",i.isObject=e=>e?.kind==="Object",i.isArray=e=>e?.kind==="Array",i.isMap=e=>e?.kind==="Map",i.isCustomType=e=>e?.kind==="CustomType",i.isVariableDeclaration=e=>e?.kind==="VariableDeclaration",i.isProperty=e=>e?.kind==="Property",i.isVariableDeclarationList=e=>e?.kind==="VariableDeclarationList",i.isEnumerateExpression=e=>e?.kind==="EnumerateExpression",i.isKeyPathExpression=e=>e?.kind==="KeyPathExpression",i.is=function(e,n){return e?.kind===n?.kind};var e8=class e{constructor({key:e,parent:n,scope:r},i){this.flags=0,this._version=0,this.changeLocked=!1,this._batch={batching:!1,hasChangesInBatch:!1},this.value$=new eC(this),this._children=new Set,this.toDispose=new u.K4(u.JT.create(()=>{this.parent?.fireChange(),this.children.forEach(e=>e.dispose())})),this.onDispose=this.toDispose.onDispose,this.scope=r,this.parent=n,this.opts=i,this.key=e||(0,ez.x0)(),this.fromJSON=this.withBatchUpdate(this.fromJSON.bind(this)),this.dispatchGlobalEvent({type:"NewAST"})}get kind(){if(!this.constructor.kind)throw Error(`ASTNode Registry need a kind: ${this.constructor.name}`);return this.constructor.kind}get children(){return Array.from(this._children)}toJSON(){return console.warn("[VariableEngine] Please Implement toJSON method for "+this.kind),{kind:this.kind}}createChildNode(e){let n=this.scope.variableEngine.astRegisters.createAST(e,{parent:this,scope:this.scope});return this._children.add(n),n.toDispose.push(u.JT.create(()=>{this._children.delete(n)})),n}updateChildNodeByKey(e,n){this.withBatchUpdate(e5).call(this,{getChildNode:()=>this[e],updateChildNode:n=>this[e]=n,removeChildNode:()=>this[e]=void 0,nextJSON:n})}withBatchUpdate(e){return(...n)=>{if(this._batch.batching)return e.call(this,...n);this._batch.hasChangesInBatch=!1,this._batch.batching=!0;let r=e.call(this,...n);return this._batch.batching=!1,this._batch.hasChangesInBatch&&this.fireChange(),this._batch.hasChangesInBatch=!1,r}}fireChange(){if(!this.changeLocked&&!this.disposed){if(this._batch.batching){this._batch.hasChangesInBatch=!0;return}this._version++,this.value$.next(this),this.dispatchGlobalEvent({type:"UpdateAST"}),this.parent?.fireChange()}}get version(){return this._version}get hash(){return`${this._version}${this.kind}${this.key}`}subscribe(n,{selector:r,debounceAnimation:i,triggerOnInit:o}={}){var s;return eq(this.value$.pipe(eh(()=>r?r(this):this),eS((e,n)=>(0,eV.shallowEqual)(e,n),n=>n instanceof e?n.hash:n),o?eN(()=>null):e_(1),i?(void 0===(s=eR)&&(s=eA),eo(function(e,n){var r=null,i=null,o=null,a=function(){if(r){r.unsubscribe(),r=null;var e=i;i=null,n.next(e)}};function l(){var e=o+0,i=s.now();if(i<e){r=this.schedule(void 0,e-i),n.add(r);return}a()}e.subscribe(es(n,function(e){i=e,o=s.now(),r||(r=s.schedule(l,0),n.add(r))},function(){a(),n.complete()},void 0,function(){i=r=null}))})):eN(()=>null)).subscribe(n))}dispatchGlobalEvent(e){this.scope.event.dispatch({...e,ast:this})}dispose(){this.toDispose.disposed||(this.toDispose.dispose(),this.dispatchGlobalEvent({type:"DisposeAST"}),this.value$.complete(),this.value$.unsubscribe())}get disposed(){return this.toDispose.disposed}},e9=class extends e8{constructor(){super(...arguments),this.flags=8}isTypeEqual(e){let n=e6(e);return n?.kind==="Union"?(n?.types||[])?.some(e=>this.isTypeEqual(e)):this.kind===n?.kind}getByKeyPath(e=[]){throw Error(`Get By Key Path is not implemented for Type: ${this.kind}`)}toJSON(){return{kind:this.kind}}},e7=class extends e9{constructor(){super(...arguments),this.flags=48}fromJSON({items:e}){this.updateChildNodeByKey("items",e6(e))}get canDrilldownItems(){return!!(this.items?.flags&16)}getByKeyPath(e){let[n,...r]=e||[];if("0"===n&&this.canDrilldownItems)return this.items.getByKeyPath(r)}isTypeEqual(e){let n=e6(e),r=super.isTypeEqual(e);return n?.weak||n?.kind==="Union"?r:n&&r&&(n?.weak||this.customStrongEqual(n))}customStrongEqual(e){return this.items?this.items?.isTypeEqual(e.items):!e?.items}toJSON(){return{kind:"Array",items:this.items?.toJSON()}}};e7.kind="Array";var te=class extends e9{constructor(){super(...arguments),this.flags=8}fromJSON(){}};te.kind="String";var tt=class extends e9{constructor(){super(...arguments),this.flags=8}fromJSON(){}};tt.kind="Integer";var tn=class extends e9{fromJSON(){}};tn.kind="Boolean";var tr=class extends e9{fromJSON(){}};tr.kind="Number";var ti=class extends e9{fromJSON({keyType:e="String",valueType:n}){this.updateChildNodeByKey("keyType",e6(e)),this.updateChildNodeByKey("valueType",e6(n))}isTypeEqual(e){let n=e6(e),r=super.isTypeEqual(e);return n?.weak||n?.kind==="Union"?r:n&&r&&(n?.weak||this.customStrongEqual(n))}customStrongEqual(e){let{keyType:n="String",valueType:r}=e;return(!r&&!this.valueType||this.valueType?.isTypeEqual(r))&&this.keyType?.isTypeEqual(n)}toJSON(){return{kind:"Map",keyType:this.keyType?.toJSON(),valueType:this.valueType?.toJSON()}}};ti.kind="Map";var to=class extends e9{constructor(){super(...arguments),this.flags=16,this.propertyTable=new Map}fromJSON({properties:e}){let n=new Set(this.propertyTable.keys()),r=[...this.properties||[]];this.properties=(e||[]).map(e=>{let r=this.propertyTable.get(e.key);if(n.delete(e.key),r)return r.fromJSON(e),r;{let n=this.createChildNode({...e,kind:"Property"});return this.fireChange(),this.propertyTable.set(e.key,n),n}}),n.forEach(e=>{let n=this.propertyTable.get(e);n?.dispose(),this.propertyTable.delete(e),this.fireChange()}),this.dispatchGlobalEvent({type:"ObjectPropertiesChange",payload:{prev:r,next:[...this.properties]}})}toJSON(){return{kind:"Object",properties:this.properties.map(e=>e.toJSON())}}getByKeyPath(e){let[n,...r]=e,i=this.propertyTable.get(n);return r.length?i?.type&&i?.type?.flags&16?i.type.getByKeyPath(r):void 0:i}isTypeEqual(e){let n=e6(e),r=super.isTypeEqual(e);return n?.weak||n?.kind==="Union"?r:n&&r&&(n?.weak||this.customStrongEqual(n))}customStrongEqual(e){let n=e.properties||[],r=Array.from(this.propertyTable.keys()),i=n.map(e=>e.key);return!(0,ex.xor)(r,i).length&&n.every(e=>{let n=this.propertyTable.get(e.key);return n&&n.key===e.key&&n.type?.isTypeEqual(e?.type)})}};to.kind="Object";var ts=class extends e9{get typeName(){return this._typeName}fromJSON(e){this._typeName!==e.typeName&&(this._typeName=e.typeName,this.fireChange())}isTypeEqual(e){let n=e6(e);return n?.kind==="Union"?(n?.types||[])?.some(e=>this.isTypeEqual(e)):n?.kind===this.kind&&n?.typeName===this.typeName}};function ta(e){let n=e.parent,r=[];for(;n;)1&n.flags&&r.push(n),n=n.parent;return r}ts.kind="CustomType";var tl=class extends e8{constructor(e,n){super(e,n),this.flags=4,this._refs=[],this.refreshRefs$=new G,this.refs$=this.refreshRefs$.pipe(eh(()=>this.getRefFields()),eS(eV.shallowEqual),el(e=>e?.length?function(){for(var e,n,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=ep(i),a=m(ed(i))?i.pop():void 0,l=function(e){if(1===e.length){var n,r=e[0];if(e$(r))return{args:r,keys:null};if((n=r)&&"object"==typeof n&&eB(n)===eH){var i=eK(r);return{args:i.map(function(e){return r[e]}),keys:i}}}return{args:e,keys:null}}(i),h=l.args,c=l.keys;if(0===h.length)return em([],s);var u=new K((e=h,n=s,void 0===(r=c?function(e){return c.reduce(function(n,r,i){return n[r]=e[i],n},{})}:H)&&(r=H),function(i){var o,s,a;o=n,s=function(){for(var o=e.length,s=Array(o),a=o,l=o,h=function(o){var h,c,u;h=n,c=function(){var h=em(e[o],n),c=!1;h.subscribe(es(i,function(e){s[o]=e,!c&&(c=!0,l--),l||i.next(r(s.slice()))},function(){--a||i.complete()}))},u=i,h?ec(u,h,c):c()},c=0;c<o;c++)h(c)},a=i,o?ec(a,o,s):s()}));return a?u.pipe(eh(function(e){return eU(e)?a.apply(void 0,(0,y.ev)([],(0,y.CR)(e))):a(e)})):u}(e.map(e=>e?e.value$:eF(void 0))):eF([])),eE()),this.toDispose.push(eq(this.refs$.subscribe(e=>{this._refs=e,this.fireChange()})))}get globalVariableTable(){return this.scope.variableEngine.globalVariableTable}get parentFields(){return ta(this)}get refs(){return this._refs}refreshRefs(){this.refreshRefs$.next()}},th=class extends e8{fromJSON({expressions:e}){this.expressions=e.map((e,n)=>{let r=this.expressions[n];return r.kind!==e.kind?(r.dispose(),this.fireChange(),this.createChildNode(e)):(r.fromJSON(e),r)})}toJSON(){return{kind:"ExpressionList",properties:this.expressions.map(e=>e.toJSON())}}};th.kind="ExpressionList";var tc=class extends tl{constructor(e,n){super(e,n),this._keyPath=[],this.toDispose.pushAll([this.scope.available.onVariableListChange(()=>{this.refreshRefs()}),this.scope.available.onAnyVariableChange(e=>{e.key===this._keyPath[0]&&this.refreshRefs()})])}get keyPath(){return this._keyPath}getRefFields(){let e=this.scope.available.getByKeyPath(this._keyPath);return e?[e]:[]}get returnType(){let[e]=this._refs||[];if(e&&1&e.flags)return e.type}parseToKeyPath(e){return e.keyPath}fromJSON(e){let n=this.parseToKeyPath(e);(0,eV.shallowEqual)(n,this._keyPath)||(this._keyPath=n,this.refreshRefs())}toJSON(){return{kind:"KeyPathExpression",keyPath:this._keyPath}}};tc.kind="KeyPathExpression";var tu=class extends tl{get enumerateFor(){return this._enumerateFor}get returnType(){let e=this.enumerateFor?.returnType;if(e?.kind==="Array")return e.items}getRefFields(){return[]}fromJSON({enumerateFor:e}){this.updateChildNodeByKey("_enumerateFor",e)}toJSON(){return{kind:"EnumerateExpression",enumerateFor:this.enumerateFor?.toJSON()}}};tu.kind="EnumerateExpression";var td=class extends e8{constructor(){super(...arguments),this.flags=1,this._meta={}}get parentFields(){return ta(this)}get meta(){return this._meta}get type(){return this._initializer?.returnType||this._type}get initializer(){return this._initializer}fromJSON({type:e,initializer:n,meta:r}){this.updateType(e),this.updateInitializer(n),this.updateMeta(r)}updateType(e){this.updateChildNodeByKey("_type","string"==typeof e?{kind:e}:e)}updateInitializer(e){this.updateChildNodeByKey("_initializer",e)}updateMeta(e){(0,eV.shallowEqual)(e,this._meta)||(this._meta=e,this.fireChange())}getByKeyPath(e){if(this.type?.flags&16)return this.type.getByKeyPath(e)}onTypeChange(e){return this.subscribe(e,{selector:e=>e.type})}toJSON(){return{kind:this.kind,key:this.key,type:this.type?.toJSON(),initializer:this.initializer?.toJSON(),meta:this._meta}}},tp=class extends td{constructor(e){super(e),this._order=0}get order(){return this._order}fromJSON({order:e,...n}){this.updateOrder(e),super.fromJSON(n)}updateOrder(e=0){e!==this._order&&(this._order=e,this.dispatchGlobalEvent({type:"ReSortVariableDeclarations"}),this.fireChange())}onTypeChange(e){return this.subscribe(e,{selector:e=>e.type})}};tp.kind="VariableDeclaration";var tf=class extends e8{constructor(){super(...arguments),this.declarationTable=new Map}fromJSON({declarations:e,startOrder:n}){let r=new Set(this.declarationTable.keys()),i=[...this.declarations||[]];this.declarations=(e||[]).map((e,i)=>{let o=(n||0)+i,s=e.key||this.declarations?.[i]?.key,a=this.declarationTable.get(s);if(s&&r.delete(s),a)return a.fromJSON({order:o,...e}),a;{let n=this.createChildNode({order:o,...e,kind:"VariableDeclaration"});return this.fireChange(),this.declarationTable.set(n.key,n),n}}),r.forEach(e=>{let n=this.declarationTable.get(e);n?.dispose(),this.declarationTable.delete(e)}),this.dispatchGlobalEvent({type:"VariableListChange",payload:{prev:i,next:[...this.declarations]}})}toJSON(){return{kind:"VariableDeclarationList",properties:this.declarations.map(e=>e.toJSON())}}};tf.kind="VariableDeclarationList";var tg=class extends td{};tg.kind="Property";var ty=class extends e8{get data(){return this._data}fromJSON(e){let{kind:n,...r}=e;(0,eV.shallowEqual)(r,this._data)||(this._data=r,this.fireChange())}toJSON(){return{kind:"DataNode",...this._data}}partialUpdate(e){(0,eV.shallowEqual)(e,this._data)||(this._data={...this._data,...e},this.fireChange())}};ty.kind="DataNode";var tm=class extends e8{constructor(){super(...arguments),this.map=new Map}fromJSON({map:e}){let n=new Set(this.map.keys());for(let[r,i]of e||[])n.delete(r),this.set(r,i);for(let e of Array.from(n))this.remove(e)}toJSON(){return{kind:"MapNode",map:Array.from(this.map.entries())}}set(e,n){return this.withBatchUpdate(e5).call(this,{getChildNode:()=>this.get(e),removeChildNode:()=>this.map.delete(e),updateChildNode:n=>this.map.set(e,n),nextJSON:n})}remove(e){this.get(e)?.dispose(),this.map.delete(e),this.fireChange()}get(e){return this.map.get(e)}};tm.kind="MapNode";var tv=class{constructor(){this.injectors=new Map,this.astMap=new Map,this.registerAST(te),this.registerAST(tr),this.registerAST(tn),this.registerAST(tt),this.registerAST(to),this.registerAST(e7),this.registerAST(ti),this.registerAST(ts),this.registerAST(tg),this.registerAST(tp),this.registerAST(tf),this.registerAST(tc),this.registerAST(tu),this.registerAST(th),this.registerAST(tm),this.registerAST(ty)}createAST(e,{parent:n,scope:r}){let i=this.astMap.get(e.kind);if(!i)throw Error(`ASTKind: ${String(e.kind)} can not find its ASTNode Registry`);let o=this.injectors.get(e.kind),s=new i({key:e.key,scope:r,parent:n},o?.()||{});if(s.changeLocked=!0,s.fromJSON((0,ex.omit)(e,["key","kind"])),s.changeLocked=!1,Reflect.hasMetadata(e4,s)){let e=Reflect.getMetadata(e4,s);s[e]?.()}return s}getASTRegistryByKind(e){return this.astMap.get(e)}registerAST(e,n){this.astMap.set(e.kind,e),n&&this.injectors.set(e.kind,n)}};tv=eX([(0,g.b2)()],tv),(o=a||(a={})).createString=()=>({kind:"String"}),o.createNumber=()=>({kind:"Number"}),o.createBoolean=()=>({kind:"Boolean"}),o.createInteger=()=>({kind:"Integer"}),o.createObject=e=>({kind:"Object",...e}),o.createArray=e=>({kind:"Array",...e}),o.createMap=e=>({kind:"Map",...e}),o.createUnion=e=>({kind:"Union",...e}),o.createCustomType=e=>({kind:"CustomType",...e}),o.createVariableDeclaration=e=>({kind:"VariableDeclaration",...e}),o.createProperty=e=>({kind:"Property",...e}),o.createVariableDeclarationList=e=>({kind:"VariableDeclarationList",...e}),o.createEnumerateExpression=e=>({kind:"EnumerateExpression",...e}),o.createKeyPathExpression=e=>({kind:"KeyPathExpression",...e}),o.create=(e,n)=>({kind:e.kind,...n});var tb=class{constructor(e){this.scope=e,this.memo=eJ(),this._hasChanges=!1,this.variableTable=new e0(e.variableEngine.globalVariableTable),this.scope.toDispose.pushAll([this.scope.ast.subscribe(()=>{this._hasChanges&&(this.memo.clear(),this.notifyCoversChange(),this.variableTable.fireChange(),this._hasChanges=!1)}),this.scope.event.on("DisposeAST",e=>{e.ast?.kind==="VariableDeclaration"&&this.removeVariableFromTable(e.ast.key)}),this.scope.event.on("NewAST",e=>{e.ast?.kind==="VariableDeclaration"&&this.addVariableToTable(e.ast)}),this.scope.event.on("ReSortVariableDeclarations",()=>{this._hasChanges=!0}),this.variableTable])}get variableEngine(){return this.scope.variableEngine}get globalVariableTable(){return this.scope.variableEngine.globalVariableTable}get onDataChange(){return this.variableTable.onDataChange.bind(this.variableTable)}get onAnyVariableChange(){return this.variableTable.onAnyVariableChange.bind(this.variableTable)}get variables(){return this.memo("variables",()=>this.variableTable.variables.sort((e,n)=>e.order-n.order))}get variableKeys(){return this.memo("variableKeys",()=>this.variableTable.variableKeys)}addVariableToTable(e){if(e.scope!==this.scope)throw Error("VariableDeclaration must be a ast node in scope");this.variableTable.addVariableToTable(e),this._hasChanges=!0}removeVariableFromTable(e){this.variableTable.removeVariableFromTable(e),this._hasChanges=!0}getVariableByKey(e){return this.variableTable.getVariableByKey(e)}notifyCoversChange(){this.scope.coverScopes.forEach(e=>e.available.refresh())}},t_=class{constructor(e){this.scope=e,this.memo=eJ(),this.refresh$=new G,this._variables=[],this.variables$=this.refresh$.pipe(eh(()=>(0,ex.flatten)(this.depScopes.map(e=>e.output.variables||[]))),eS(eV.shallowEqual),eE()),this.anyVariableChange$=this.variables$.pipe(el(e=>ev(...e.map(e=>e.value$.pipe(e_(1))))),eE()),this.onDataChangeEmitter=new u.Q5,this.onDataChange=this.onDataChangeEmitter.event,this.scope.toDispose.pushAll([this.onVariableListChange(e=>{this._variables=e,this.memo.clear(),this.onDataChangeEmitter.fire(this._variables)}),this.onAnyVariableChange(()=>{this.onDataChangeEmitter.fire(this._variables)}),u.JT.create(()=>{this.refresh$.complete(),this.refresh$.unsubscribe()})])}get globalVariableTable(){return this.scope.variableEngine.globalVariableTable}refresh(){this.scope.disposed||this.refresh$.next()}onAnyVariableChange(e){return eq(this.anyVariableChange$.subscribe(e))}onVariableListChange(e){return eq(this.variables$.subscribe(e))}get variables(){return this._variables}get variableKeys(){return this.memo("availableKeys",()=>this._variables.map(e=>e.key))}get depScopes(){return this.scope.depScopes}getByKeyPath(e=[]){if(this.variableKeys.includes(e[0]))return this.globalVariableTable.getByKeyPath(e)}},tE=class{constructor(e){this.scope=e,this.event$=new G,e.toDispose.pushAll([this.subscribe(n=>{e.variableEngine.fireGlobalEvent(n)})])}dispatch(e){this.scope.disposed||this.event$.next(e)}subscribe(e){return eq(this.event$.subscribe(e))}on(e,n){return eq(this.event$.pipe(eb(n=>n.type===e)).subscribe(n))}},tw=class{constructor(e){this.memo=eJ(),this.toDispose=new u.K4,this.onDispose=this.toDispose.onDispose,this.id=e.id,this.meta=e.meta||{},this.variableEngine=e.variableEngine,this.event=new tE(this),this.ast=this.variableEngine.astRegisters.createAST({kind:"MapNode",key:String(this.id)},{scope:this}),this.output=new tb(this),this.available=new t_(this)}refreshCovers(){this.memo.clear("covers")}refreshDeps(){this.memo.clear("deps"),this.available.refresh()}get depScopes(){return this.memo("deps",()=>this.variableEngine.chain.getDeps(this).filter(e=>!!e&&!e?.disposed))}get coverScopes(){return this.memo("covers",()=>this.variableEngine.chain.getCovers(this).filter(e=>!!e&&!e?.disposed))}dispose(){this.ast.dispose(),this.toDispose.dispose(),this.coverScopes.forEach(e=>e.refreshDeps()),this.depScopes.forEach(e=>e.refreshCovers())}get disposed(){return this.toDispose.disposed}},tx=class{constructor(e,n){this.chain=e,this.astRegisters=n,this.toDispose=new u.K4,this.memo=eJ(),this.scopeMap=new Map,this.globalEvent$=new G,this.onScopeChangeEmitter=new u.Q5,this.globalVariableTable=new e0,this.onScopeChange=this.onScopeChangeEmitter.event,this.toDispose.pushAll([e,u.JT.create(()=>{this.getAllScopes().forEach(e=>e.dispose()),this.globalVariableTable.dispose()})])}get container(){return this.containerProvider()}dispose(){this.toDispose.dispose()}getScopeById(e){return this.scopeMap.get(e)}removeScopeById(e){this.getScopeById(e)?.dispose()}createScope(e,n,r={}){let{ScopeConstructor:i=tw}=r,o=this.getScopeById(e);return o||(o=new i({variableEngine:this,meta:n,id:e}),this.scopeMap.set(e,o),this.onScopeChangeEmitter.fire({type:"add",scope:o}),o.toDispose.pushAll([o.ast.subscribe(()=>{this.onScopeChangeEmitter.fire({type:"update",scope:o})}),o.available.onDataChange(()=>{this.onScopeChangeEmitter.fire({type:"available",scope:o})})]),o.onDispose(()=>{this.scopeMap.delete(e),this.onScopeChangeEmitter.fire({type:"delete",scope:o})})),o}getAllScopes({sort:e}={}){let n=Array.from(this.scopeMap.values());if(e){let e=this.chain.sortAll(),r=new Set(n);return e.forEach(e=>r.delete(e)),[...e,...Array.from(r)]}return[...n]}fireGlobalEvent(e){this.globalEvent$.next(e)}onGlobalEvent(e,n){return eq(this.globalEvent$.subscribe(r=>{r.type===e&&n(r)}))}};eX([(0,g.f3)(e2)],tx.prototype,"containerProvider",2),eX([(0,g.Pj)()],tx.prototype,"dispose",1),tx=eX([(0,g.b2)(),eQ(0,(0,g.f3)(e3)),eQ(1,(0,g.f3)(tv))],tx);var tC=class{constructor(){this.toDispose=new u.K4,this.renameEmitter=new u.Q5,this.disposeInListEmitter=new u.Q5,this.onRename=this.renameEmitter.event,this.onDisposeInList=this.disposeInListEmitter.event}handleFieldListChange(e,n,r){if(!e||!n?.length||!r?.length||n.length!==r.length)return void this.notifyFieldsDispose(n,r);let i=null,o=!1;for(let[e,s]of n.entries()){let a=r[e];if(s.key!==a.key){if(o)return void this.notifyFieldsDispose(n,r);o=!0,s.type?.kind===a.type?.kind&&(i={before:s,after:a})}}if(!i)return void this.notifyFieldsDispose(n,r);this.renameEmitter.fire(i)}notifyFieldsDispose(e,n){(0,ex.difference)(e||[],n||[]).forEach(e=>this.disposeInListEmitter.fire(e))}init(){this.toDispose.pushAll([this.variableEngine.onGlobalEvent("VariableListChange",e=>{this.handleFieldListChange(e.ast,e.payload?.prev,e.payload?.next)}),this.variableEngine.onGlobalEvent("ObjectPropertiesChange",e=>{this.handleFieldListChange(e.ast,e.payload?.prev,e.payload?.next)})])}dispose(){this.toDispose.dispose()}};eX([(0,g.f3)(tx)],tC.prototype,"variableEngine",2),eX([(0,g.zY)()],tC.prototype,"init",1),eX([(0,g.Pj)()],tC.prototype,"dispose",1),tC=eX([(0,g.b2)()],tC);var tS=new g.nZ(e=>{e(tx).toSelf().inSingletonScope(),e(tv).toSelf().inSingletonScope(),e(tC).toSelf().inSingletonScope(),e(e1).toDynamicValue(e=>()=>e.container.get(tx)),e(e2).toDynamicValue(e=>()=>e.container)}),tD=(0,eG.createContext)(null),tN=tD.Provider,tO=()=>(0,eG.useContext)(tD)?.scope;function tM(){let e=tO(),n=(0,d.JA)();return(0,eG.useEffect)(()=>{let r=e.available.onDataChange(()=>{n()});return()=>r.dispose()},[]),e.available}var tI=r(1097),tT=Object.defineProperty,tk=Object.getOwnPropertyDescriptor,tP=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?tk(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&tT(n,r,s),s},tA=(e,n)=>(r,i)=>n(r,i,e),tL=class extends d.RD{constructor(e,n){super(e),this.opts=n;let{variableEngine:r}=n||{};this.variableEngine=r,this._public=this.variableEngine.createScope(this.entity.id,{node:this.entity,type:"public"}),this.toDispose.push(this._public)}get private(){return this._private}get public(){return this._public}setVar(e,n){if("string"==typeof e&&void 0!==n)return this.public.ast.set(e,n);if("object"==typeof e&&void 0===n)return this.public.ast.set("outputs",e);throw Error("Invalid arguments")}getVar(e="outputs"){return this.public.ast.get(e)}clearVar(e="outputs"){return this.public.ast.remove(e)}setPrivateVar(e,n){if("string"==typeof e&&void 0!==n)return this.initPrivate().ast.set(e,n);if("object"==typeof e&&void 0===n)return this.initPrivate().ast.set("outputs",e);throw Error("Invalid arguments")}getPrivateVar(e="outputs"){return this.private?.ast.get(e)}clearPrivateVar(e="outputs"){return this.private?.ast.remove(e)}get allScopes(){let e=[];return this._public&&e.push(this._public),this._private&&e.push(this._private),e}getDefaultData(){return{}}initPrivate(){return this._private||(this._private=this.variableEngine.createScope(`${this.entity.id}_private`,{node:this.entity,type:"private"}),this._private.coverScopes.forEach(e=>{e.refreshDeps()}),this._private.depScopes.forEach(e=>{e.refreshCovers()}),this._private.available.refresh(),this.toDispose.push(this._private)),this._private}};tL.type="FlowNodeVariableData";var tj=Symbol("VariableLayoutConfig"),tR=class extends tw{static is(e){return e.id===tR.ID}setVar(e,n){if("string"==typeof e&&void 0!==n)return this.ast.set(e,n);if("object"==typeof e&&void 0===n)return this.ast.set("outputs",e);throw Error("Invalid arguments")}getVar(e="outputs"){return this.ast.get(e)}clearVar(e="outputs"){return this.ast.remove(e)}};tR.ID=Symbol("GlobalScope"),tR=tP([(0,g.b2)()],tR);var tz=e=>{e(tR).toDynamicValue(e=>{let n=e.container.get(tx),r=n.getScopeById(tR.ID);return r||(r=n.createScope(tR.ID,{},{ScopeConstructor:tR}),n.chain.refreshAllChange()),r})},tV=class extends e3{get tree(){return this.flowDocument.originTree}onInit(){this.toDispose.pushAll([this.entityManager.onEntityDataChange(({entityDataType:e})=>{e===tI.Z1.type&&this.refreshAllChange()}),this.tree.onTreeChange(()=>{this.refreshAllChange()})])}getAllInputLayerNodes(e){return(e.getData(tI.Z1)?.allInputNodes||[]).filter(n=>n.parent===e.parent)}getAllOutputLayerNodes(e){return(e.getData(tI.Z1)?.allOutputNodes||[]).filter(n=>n.parent===e.parent)}getDeps(e){let{node:n}=e.meta||{};if(!n)return this.transformDeps([],{scope:e});let r=[],i=n;for(;i;){let n=this.getAllInputLayerNodes(i);r.push(...n.map(e=>e.getData(tL).public).filter(Boolean));let o=i.getData(tL);o?.private&&e!==o.private&&r.push(o.private),i=this.getParent(i)}let o=this.variableEngine.getScopeById(tR.ID);o&&r.unshift(o);let s=Array.from(new Set(r));return this.transformDeps(s,{scope:e})}getCovers(e){if(tR.is(e))return this.variableEngine.getAllScopes({sort:!0}).filter(e=>!tR.is(e));let{node:n}=e.meta||{};if(!n)return this.transformCovers([],{scope:e});let r="private"===e.meta.type,i=[];r?i.push(...this.getChildren(n)):i.push(...this.getAllOutputLayerNodes(n)||[]);let o=[];for(;i.length;){let e=i.shift(),n=e.getData(tL);o.push(...n.allScopes);let r=e&&this.getChildren(e);r?.length&&i.push(...r)}let s=n.getData(tL);r&&s.public&&o.push(s.public);let a=Array.from(new Set(o));return this.transformCovers(a,{scope:e})}transformCovers(e,{scope:n}){return this.configs?.transformCovers?this.configs.transformCovers(e,{scope:n,document:this.flowDocument,variableEngine:this.variableEngine}):e}transformDeps(e,{scope:n}){return this.configs?.transformDeps?this.configs.transformDeps(e,{scope:n,document:this.flowDocument,variableEngine:this.variableEngine}):e}getChildren(e){if(this.configs?.getFreeChildren)return this.configs.getFreeChildren?.(e);let n=e.getNodeMeta(),r=n.subCanvas?.(e);if(r)if(r.isCanvas)return[];else return r.canvasNode.collapsedChildren;return this.tree.getChildren(e)}getParent(e){if(this.configs?.getFreeParent)return this.configs.getFreeParent(e);let n=e.document.originTree.getParent(e);if(!n)return n;let r=n.getNodeMeta(),i=r.subCanvas?.(n);return i?.isCanvas?i.parentNode:n}sortAll(){return console.warn("FreeLayoutScopeChain.sortAll is not implemented"),[]}};tP([(0,g.f3)(d.v2)],tV.prototype,"entityManager",2),tP([(0,g.f3)(p.pQ)],tV.prototype,"flowDocument",2),tP([(0,g.jt)(),(0,g.f3)(tj)],tV.prototype,"configs",2),tP([(0,g.zY)()],tV.prototype,"onInit",1);var tF=class extends e3{constructor(e,n){super(),this.flowDocument=e,this.configs=n,this.bindTree(e.originTree),this.toDispose.push(e.originTree.onTreeChange(()=>{this.refreshAllChange()}))}bindTree(e){this.tree=e}getDeps(e){if(!this.tree)return this.transformDeps([],{scope:e});let n=e.meta.node;if(!n)return this.transformDeps([],{scope:e});let r=[],i=n;for(;i;){let{parent:o,pre:s}=this.tree.getInfo(i),a=this.getVariableData(i);if(i===n?"public"===e.meta.type&&a?.private&&r.unshift(a.private):this.hasChildren(i)&&!this.isNodeChildrenPrivate(i)&&r.unshift(...this.getAllSortedChildScope(i,{ignoreNodeChildrenPrivate:!0})),a&&i!==n&&r.unshift(a.public),s){i=s;continue}if(o){let e=o,n=this.tree.getPre(e);for(;e;){let i=this.getVariableData(e);if(i&&r.unshift(...i.allScopes),n)break;n=(e=this.tree.getParent(e))?this.tree.getPre(e):void 0}i=n;continue}i=void 0}let o=this.variableEngine.getScopeById(tR.ID);return o&&r.unshift(o),this.transformDeps(r,{scope:e})}getCovers(e){if(!this.tree)return this.transformCovers([],{scope:e});if(tR.is(e))return this.variableEngine.getAllScopes({sort:!0}).filter(e=>!tR.is(e));let n=e.meta.node;if(!n)return this.transformCovers([],{scope:e});let r=[];if("private"===e.meta.type)return r.push(...this.getAllSortedChildScope(n,{addNodePrivateScope:!0})),this.transformCovers(r,{scope:e});let i=n;for(;i;){let{next:o,parent:s}=this.tree.getInfo(i),a=this.getVariableData(i);if(i!==n&&(this.hasChildren(i)?r.push(...this.getAllSortedChildScope(i,{addNodePrivateScope:!0})):a&&r.push(...a.allScopes)),o){i=o;continue}if(s){let n=s,o=this.tree.getNext(n);for(;n;){if(this.isNodeChildrenPrivate(n))return this.transformCovers(r,{scope:e});if(o)break;o=(n=this.tree.getParent(n))?this.tree.getNext(n):void 0}if(!o&&n)break;i=o;continue}i=void 0}return this.transformCovers(r,{scope:e})}transformCovers(e,{scope:n}){return this.configs?.transformCovers?this.configs.transformCovers(e,{scope:n,document:this.flowDocument,variableEngine:this.variableEngine}):e}transformDeps(e,{scope:n}){return this.configs?.transformDeps?this.configs.transformDeps(e,{scope:n,document:this.flowDocument,variableEngine:this.variableEngine}):e}sortAll(){let e=this.flowDocument.getAllNodes().find(e=>e.isStart);if(!e)return[];let n=e.getData(tL).public,r=this.getDeps(n),i=this.getCovers(n).filter(e=>!r.includes(e)&&e!==n);return[...r,n,...i]}getVariableData(e){if("virtualNode"!==e.flowNodeType&&!e.id.startsWith("$"))return e.getData(tL)}isNodeChildrenPrivate(e){return this.configs?.isNodeChildrenPrivate?!!e&&this.configs?.isNodeChildrenPrivate(e):!e?.id.startsWith("$")&&this.hasChildren(e)}hasChildren(e){return!!(this.tree&&e&&this.tree.getChildren(e).length>0)}getAllSortedChildScope(e,{ignoreNodeChildrenPrivate:n,addNodePrivateScope:r}={}){let i=[],o=this.getVariableData(e);return o&&i.push(o.public),n&&this.isNodeChildrenPrivate(e)||(r&&o?.private&&i.push(o.private),i.push(...(this.tree?.getChildren(e)||[]).map(e=>this.getAllSortedChildScope(e,{ignoreNodeChildrenPrivate:n,addNodePrivateScope:r})).flat())),i}};tF=tP([tA(0,(0,g.f3)(p.pQ)),tA(1,(0,g.jt)()),tA(1,(0,g.f3)(tj))],tF);var t$=(0,d.M1)({onBind({bind:e},n){let{layout:r,layoutConfig:i}=n;"free"===r&&e(e3).to(tV).inSingletonScope(),"fixed"===r&&e(e3).to(tF).inSingletonScope(),i&&e(tj).toConstantValue(i||{}),tz(e)},onInit(e,n){let{extendASTNodes:r}=n||{},i=e.get(tx),o=e.get(tv),s=e.get(d.v2),a=e.get(p.pQ);(r||[]).forEach(n=>{if(Array.isArray(n)){let[r,i]=n;o.registerAST(r,i?()=>i(e):void 0);return}o.registerAST(n)}),s.registerEntityData(tL,()=>({variableEngine:i})),a.registerNodeDatas(tL)},containerModules:[tS]}),tB=r(4969),tH=r(431),tK=(0,d.M1)({onInit(e,n){e.get(p.pQ).registerNodeDatas(...(0,tH.Co)());let r=e=>new c.wL(e);if(e.get(d.v2).registerEntityData(tH.Ps,()=>({formModelFactory:r})),!n.materials)return;let i=e.get(tH.Bl),o=e.get(tH.yf);if(!i||!o)throw Error("NodeCorePlugin Error: nodeManager or formManager not found");!function({nodeManager:e,formManager:n,material:r}){let{setters:i=[],decorators:o=[],effects:s=[],validators:a=[],nodeErrorRender:l,nodePlaceholderRender:h}=r;l&&(0,tH.kq)(e,l),h&&(0,tH.FC)(e,h),i.forEach(e=>{n.registerAbilityExtension(tH.Bw.type,e)}),o.forEach(e=>{n.registerAbilityExtension(tH.GH.type,e)}),s.forEach(e=>{n.registerAbilityExtension(tH.ps.type,e)}),a.forEach(e=>{n.registerAbilityExtension(tH.Us.type,e)})}({nodeManager:i,formManager:o,material:n.materials})},onDispose(e){e.get(tH.yf)?.dispose()},containerModules:(0,tH.pm)()}),tU=r(4218),tW=(0,d.M1)({onInit:(e,n)=>{n.onLanguageChange&&e.playground.toDispose.push(tU.o.onLanguageChange(n.onLanguageChange)),n.languages&&n.languages.forEach(e=>tU.o.addLanguage(e)),n.localLanguage&&tU.o.setLocalLanguage(n.localLanguage)}}),tG=r(5624),tY=Object.defineProperty,tZ=Object.getOwnPropertyDescriptor,tX=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?tZ(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&tY(n,r,s),s},tQ=class{constructor(){this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__?.connect({name:this.getName()})}init(){this.devTools&&(this.devTools.init(this.getState()),this.devTools.subscribe(e=>{e?.payload?.type==="COMMIT"&&this.devTools.init(this.getState())}),this.onInit())}send(e,n){this.devTools&&this.devTools.send(e,n||this.getState())}};tX([(0,g.zY)()],tQ.prototype,"init",1),tQ=tX([(0,g.b2)()],tQ);var tq=class extends tQ{getName(){return"@flowgram.ai/EntityManager"}getState(){return this.entityManager.storeState({configOnly:!1})}onInit(){this.entityManager.onEntityLifeCycleChange(e=>{this.send(`${e.type}/${e.entity.type}/${e.entity.id}`)})}};tX([(0,g.f3)(d.v2)],tq.prototype,"entityManager",2),tq=tX([(0,g.b2)()],tq);var tJ=class extends tQ{constructor(){super(...arguments),this.scopes={}}getName(){return"@flowgram.ai/VariableEngine"}getState(){return{scopes:this.scopes,variables:this.variableEngine.globalVariableTable.variables}}getScopeState(e){return{ast:e?.ast.toJSON(),output:e.output.variables,available:e.available.variables}}onInit(){this.variableEngine.onScopeChange(e=>{let{scope:n,type:r}=e;"delete"===r?delete this.scopes[String(n.id)]:this.scopes={...this.scopes,[n.id]:this.getScopeState(n)},this.send(`${r}/${String(n.id)}`)})}};tX([(0,g.f3)(tx)],tJ.prototype,"variableEngine",2),tJ=tX([(0,g.b2)()],tJ);var t0=(0,d.M1)({onBind({bind:e},n){let{enable:r}=n;r&&(e(tq).toSelf().inSingletonScope(),e(tJ).toSelf().inSingletonScope())},onInit(e,n){let{enable:r,ecs:i=!0,variable:o=!1}=n;r&&(i&&e.get(tq),o&&e.get(tJ))}}),t1=({children:e})=>{let n=(0,d.km)(),r=(0,eG.useMemo)(()=>n.getData(tL).public,[n]);return eG.createElement(tN,{value:{scope:r}},e)},t2=e=>n=>eG.createElement(t1,null,eG.createElement(e,{...n})),t3=(0,d.M1)({onInit(e){e.get(tH.Bl).registerNodeRenderHoc(t2)}});(0,c.CR)("VariableProviderPlugin",{onInit:(e,n)=>{},effect:{arr:[{event:c.zE.onValueInitOrChange,effect:()=>{}}]},onDispose:(e,n)=>{}});var t4=(0,d.M1)({onInit(e,n){let r=e.get(f.Rf);r.registerReactComponent(f.kD.NODE_RENDER,n.renderDefaultNode||(()=>null)),n.renderTexts&&r.registerText(n.renderTexts),n.renderNodes&&Object.keys(n.renderNodes).forEach(e=>r.registerReactComponent(e,n.renderNodes[e]))}}),t5=r(533),t6=Object.defineProperty,t8=Object.getOwnPropertyDescriptor;function t9(e){if(!e)return;let n=e?.getData(tH.Ps)?.getFormModel();if(n&&(0,c.TH)(n))return n}var t7=[{type:"changeFormValues",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:({value:{value:e,path:n,id:r}},i)=>{let o=t9(i.get(p.pQ).getNode(r));o&&o.setValueIn(n,e)},shouldMerge:function(e,n,r){return!!n&&!!(Date.now()-r.getTimestamp()<500)&&(e.type!==n.type||e.value?.id!==n.value?.id||e.value?.path!==n.value?.path||{type:e.type,value:{...e.value,value:e.value?.value,oldValue:n.value?.oldValue}})}}],ne=class{registerOperationMeta(e){t7.forEach(n=>{e.registerOperationMeta(n)})}};ne=((e,n,r,i)=>{for(var o,s=i>1?void 0:i?t8(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&t6(n,r,s),s})([(0,g.b2)()],ne);var nt=(0,d.M1)({onBind:({bind:e})=>{(0,d.KV)(e,ne,[t5.FU])},onInit:(e,n)=>{let r=e.get(p.pQ),i=e.get(t5.qp);r.onNodeCreate(({node:e})=>{let n=t9(e);n&&n.onFormValuesChange(n=>{i.pushOperation({type:"changeFormValues",value:{id:e.id,path:n.name,value:(0,ex.get)(n.values,n.name),oldValue:(0,ex.get)(n.prevValues,n.name)}},{noApply:!0})})})},containerModules:[t5.Xn]}),nn=Object.defineProperty,nr=Object.getOwnPropertyDescriptor,ni=0,no=class extends d.mh{constructor(){super(...arguments),this._patternId=`gedit-background-pattern-${ni++}`,this.node=u.xF.createDivWithClass("gedit-flow-background-layer"),this.grid=document.createElement("div")}get zoom(){return this.config.finalScale}onReady(){let{firstChild:e}=this.pipelineNode;this.pipelineNode.insertBefore(this.node,e),this.playgroundConfigEntity.updateConfig({minZoom:.1,maxZoom:2}),this.grid.style.zIndex="-1",this.grid.style.position="relative",this.node.appendChild(this.grid),this.grid.className="gedit-grid-svg"}getScaleUnit(){let{zoom:e}=this;return{realSize:20,renderSize:Math.round(20*e*100)/100,zoom:e}}autorun(){let e=this.playgroundConfigEntity.config,n=this.getScaleUnit(),r=10*n.renderSize,i=e.width+2*r,o=e.height+2*r,{scrollX:s}=e,{scrollY:a}=e,l=this.getScrollDelta(s,r),h=this.getScrollDelta(a,r);u.xF.setStyle(this.node,{left:s-d.JW,top:a-d.JW}),this.drawGrid(n),this.setSVGStyle(this.grid,{width:i,height:o,left:d.JW-l-r,top:d.JW-h-r})}drawGrid(e){let n=e.renderSize;if(!this.grid)return;let r=+this.zoom,i=`
    <svg width="100%" height="100%">
      <pattern id="${this._patternId}" width="${n}" height="${n}" patternUnits="userSpaceOnUse">
        <circle
          cx="${r}"
          cy="${r}"
          r="${r}"
          stroke="#eceeef"
          fill-opacity="0.5"
        />
      </pattern>
      <rect width="100%" height="100%" fill="url(#${this._patternId})"/>
    </svg>`;this.grid.innerHTML=i}setSVGStyle(e,n){e&&(e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,e.style.left=`${n.left}px`,e.style.top=`${n.top}px`)}getScrollDelta(e,n){return e>=0?e%n:n-Math.abs(e)%n}};no.type="WorkflowBackgroundLayer",((e,n,r,i)=>{for(var o,s=i>1?void 0:i?nr(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&nn(n,r,s)})([(0,d.O0)(d.ER)],no.prototype,"playgroundConfigEntity",2);var ns=(0,d.M1)({onInit:(e,n)=>{e.playground.registerLayer(no,n)}}),na=Object.defineProperty,nl=Object.getOwnPropertyDescriptor;function nh(e,n=[]){return r=>(n=n.slice(),(e.background||void 0===e.background)&&n.push(ns(e.background||{})),e.shortcuts&&n.push((0,tB.cL)({registerShortcuts:n=>e.shortcuts(n,r)})),e.plugins&&n.push(...e.plugins(r)),n.push((0,d.d3)({onBind:n=>{e.onBind?.(n)},onInit:n=>{let r=n.get(d.W4);e.playground&&(void 0!==e.playground.autoFocus&&(r.autoFocus=e.playground.autoFocus),void 0!==e.playground.autoResize&&(r.autoResize=e.playground.autoResize)),r.autoFocus=!1,n.playground.registerLayer(d.wY,e.playground),e.layers&&n.playground.registerLayers(...e.layers),e.onInit&&e.onInit(n)},onReady(n){e.onReady&&e.onReady(n)},onAllLayersRendered(){e.onAllLayersRendered&&e.onAllLayersRendered(r)},onDispose(){e.onDispose&&e.onDispose(r)},containerModules:e.containerModules||[]})),n)}var nc=class extends d.mh{constructor(){super(...arguments),this.node=u.xF.createDivWithClass("gedit-playground-layer gedit-playground-content-layer")}onZoom(e){this.node.style.transform=`scale(${e})`}onReady(){this.node.style.left="0px",this.node.style.top="0px"}updateOptions(e){this.options=e,this.render()}render(){return eG.createElement("div",{className:this.options.className,style:{position:"absolute",...this.options.style}},this.options.children)}};nc.type="PlaygroundContentLayer",nc=((e,n,r,i)=>{for(var o,s=i>1?void 0:i?nl(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&na(n,r,s),s})([(0,g.b2)()],nc),(0,eG.forwardRef)(function(e,n){let{parentContainer:r,children:i,...o}=e,s=(0,eG.useMemo)(()=>(0,d.d3)({onInit(e){e.playground.registerLayer(nc)}}),[]),a=(0,eG.useMemo)(()=>nh(o,[s]),[]);return eG.createElement(d.W6,{ref:n,plugins:a,parentContainer:r},eG.createElement(d.iX,null,i))});var nu=Object.defineProperty,nd=Object.getOwnPropertyDescriptor,np=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?nd(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&nu(n,r,s),s},nf=Symbol("EditorOptions");(l||(l={})).DEFAULT={background:{},fromNodeJSON(e,n){let r=e.getData(tH.Ps);if(r){let i=e.getService(nf).nodeEngine?.createDefaultFormMeta?.(e),o=e.getNodeRegistry()?.formMeta||i;o&&r.createForm(o,n.data)}else n.data&&e.updateExtInfo(n.data)},toNodeJSON(e){let n,r={};return e.document.traverse(e=>{if(e.id.startsWith("$"))return;let i=e.getData(tH.Ps),o=i&&i.formModel&&i.formModel.initialized?i.toJSON():void 0,s={id:e.id,type:e.flowNodeType,data:i?o:e.getExtInfo(),blocks:[]};n||(n=s);let{parent:a}=e;a&&a.id.startsWith("$")&&(a=a.originParent);let l=a?r[a.id]:void 0;l&&l.blocks?.push(s),r[e.id]=s},e),n}};var ng=e=>(n,r)=>{let i=e.filter(Boolean);return i.length?i.reduce((e,r)=>r(n,e),r):r},ny="flowide-highlight",nm=`
@keyframes flowide-fade {
  from {
   opacity: 1.0;
  }
  to {
    opacity: 0;
  }
}
@-webkit-keyframes flowide-fade {
  from {
   opacity: 1.0;
  }
  to {
    opacity: 0;
  }
}
.${ny} {
  background-color: rgba(238, 245, 40, 0.5);
  animation: flowide-fade 2s 1 forwards;
  -webkit-animation: flowide-fade 2s 1 forwards;
}
`,nv=class{highlightNodeFormItem(e,n){this.previousOverlay=function(e,n){let r=e.formModel.flowNodeEntity.getData(p.Lz).node,i=e.domRef.current;if(!i)return;let o=document.createElement("div"),{padding:s=0,overlayClassName:a}=n||{};o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.zIndex="9999",r.appendChild(o);let l=r.getBoundingClientRect(),h=i.getBoundingClientRect();return o.style.top=h.top-l.top-s+"px",o.style.left=h.left-l.left-s+"px",o.style.width=h.width+2*s+"px",o.style.height=h.height+2*s+"px",o.className=a||ny,setTimeout(()=>{o.remove()},2e3),o}(e,n)}focusNodeFormItem(e,n){let r=e.formModel.flowNodeEntity,{canvas:i={},highlight:o}=n||{};this.previousOverlay&&(this.previousOverlay.remove(),this.previousOverlay=void 0);let s=this.playground.scrollToView({entities:[r],scrollToCenter:!0,...i}).then(()=>{e&&o&&this.currentPromise===s&&this.highlightNodeFormItem(e,"boolean"==typeof o?{}:o)});return this.currentPromise=s,this.currentPromise}};np([(0,g.f3)(d.XQ)],nv.prototype,"playground",2),nv=np([(0,g.b2)()],nv);var nb=class{};np([(0,g.f3)(nv)],nb.prototype,"nodeFocusService",2),nb=np([(0,g.b2)()],nb);var n_=(0,d.M1)({onInit(){h||((h=document.createElement("style")).innerHTML=nm,document.head.appendChild(h))},onDispose(){h?.remove(),h=void 0}}),nE=(0,d.M1)({onBind({bind:e}){e(nv).toSelf().inSingletonScope(),e(nb).toSelf().inSingletonScope()}}),nw=()=>[n_({}),nE({})],nx=class{focusNodeFormItem(e,n){this.nodeClient.nodeFocusService.focusNodeFormItem(e,n)}focusNode(e,n){this.playground.scrollToView({entities:[e],...n})}};np([(0,g.f3)(nb)],nx.prototype,"nodeClient",2),np([(0,g.f3)(d.XQ)],nx.prototype,"playground",2),nx=np([(0,g.b2)()],nx);var nC=(0,d.M1)({onBind({bind:e}){e(nx).toSelf().inSingletonScope()}}),nS=()=>[...nw(),nC({})];function nD(e,n=[]){return r=>{e={...l.DEFAULT,...e},r.container.bind(nf).toConstantValue(e),e.i18n&&n.push(tW(e.i18n)),n.push(...nS()),e.reduxDevTool?.enable&&n.push(t0(e.reduxDevTool));let i=[p.d1,f.qf];return n.push(t4(e.materials||{})),e.nodeEngine&&!1!==e.nodeEngine.enable&&(n.push(tK({materials:e.nodeEngine.materials})),e.variableEngine?.enable&&n.push(t3({})),e.history?.enable&&n.push(nt({}))),n.push((0,d.d3)({onInit:n=>{e.nodeRegistries&&n.document.registerFlowNodes(...e.nodeRegistries),e.constants&&(n.document.options.constants=e.constants),e.formatNodeLines&&(n.document.options.formatNodeLines=ng([n.document.options.formatNodeLines,e.formatNodeLines])),e.formatNodeLabels&&(n.document.options.formatNodeLabels=ng([n.document.options.formatNodeLabels,e.formatNodeLabels])),e.getNodeDefaultRegistry&&(n.document.options.getNodeDefaultRegistry=e.getNodeDefaultRegistry),n.get(f.Rf).init()},onReady(n){e.initialData&&n.document.fromJSON(e.initialData),e.readonly&&(n.playground.config.readonly=e.readonly),n.document.load().then(()=>{e.onLoad&&e.onLoad(n)})},onDispose(e){e.document.dispose()},containerModules:i})),n}}},431:function(e,n,r){"use strict";r.d(n,{Bl:()=>p,Bw:()=>L,Co:()=>J,FC:()=>q,GH:()=>R,Ps:()=>H,Us:()=>$,au:()=>T,b5:()=>I,fu:()=>w,j0:()=>f,kq:()=>Q,o:()=>X,pm:()=>Y,ps:()=>V,yf:()=>B});var i=r(4210),o=r(9378),s=r(8336),a=r(8319),l=r(4194),h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?c(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&h(n,r,s),s},d=Symbol("NodeContribution"),p=class{constructor(){this.materialRenderRegistry=new Map,this.pluginRenderRegistry=new Map,this.nodeRenderHocs=[],this.nodeContributions=[]}registerMaterialRender(e,n){this.materialRenderRegistry.set(e,n)}getMaterialRender(e){return this.materialRenderRegistry.get(e)}registerPluginRender(e,n){this.pluginRenderRegistry.set(e,n)}getPluginRender(e){return this.pluginRenderRegistry.get(e)}registerNodeErrorRender(e){this.registerMaterialRender("Material_CustomNodeError",e)}get nodeRenderHoc(){return(0,o.flow)(this.nodeRenderHocs)}registerNodeRenderHoc(e){this.nodeRenderHocs.push(e)}get nodeErrorRender(){return this.materialRenderRegistry.get("Material_CustomNodeError")}init(){this.nodeContributions.forEach(e=>e.onRegister?.(this))}};u([(0,i.nx)(d),(0,i.jt)()],p.prototype,"nodeContributions",2),u([(0,i.zY)()],p.prototype,"init",1),p=u([(0,i.b2)()],p);var f=class{constructor(){this.onChangeEmitter=new s.Q5,this.onChange=this.onChangeEmitter.event,this._readonly=f.DEFAULT_READONLY,this._json=f.DEFAULT_JSON}get json(){return this._json}get readonly(){return this._readonly}set readonly(e){this._readonly=e,this.fireChange()}fireChange(){this.updateJSON(),this.onChangeEmitter.fire(this)}updateJSON(){this._json={readonly:this._readonly}}};f.DEFAULT_READONLY=!1,f.DEFAULT_JSON={readonly:f.DEFAULT_READONLY},f=u([(0,i.b2)()],f);var g=class{};u([(0,i.f3)(p)],g.prototype,"nodeManager",2),u([(0,i.f3)(f)],g.prototype,"context",2),g=u([(0,i.b2)()],g);var y=new i.nZ((e,n,r,i)=>{e(g).toSelf().inSingletonScope(),e(p).toSelf().inSingletonScope(),e(f).toSelf().inSingletonScope()}),m="Plugin_Form",b="Plugin_Error",_="node_error_render",E="node_placeholder_render",w=class extends a.RD{getDefaultData(){return{error:null}}setError(e){this.update({error:e})}getError(){return this.data.error}};w.type="FlowNodeErrorData";var x={color:"#f54a45"},C=({error:e})=>l.createElement("div",{style:x},e.message),S=({node:e,playgroundContext:n})=>{let r=(0,a.JA)(),i=e.getData(w),o=i.getError(),s=(0,a.G2)(p).getMaterialRender(_),h=(0,l.useCallback)(()=>s?s({error:o,context:{node:e,playgroundContext:n}}):C({error:o,context:{node:e,playgroundContext:n}}),[o,e,n]);return(0,l.useEffect)(()=>{let e=i.onDataChange(()=>{r()});return()=>{e.dispose()}},[]),o?h():null},D=e=>l.createElement(S,{...e}),N=class{onRegister(e){e.registerPluginRender(b,D)}};N=u([(0,i.b2)()],N);var O=new i.nZ(e=>{(0,s.KV)(e,N,[d])}),M=class{makeFormItemMaterialContext(e,n){return{meta:e.meta,path:e.path,readonly:this.nodeEngineContext.readonly,getFormItemValueByPath:e.formModel.getFormItemValueByPath.bind(e.formModel),onFormValidate:e.formModel.onValidate.bind(e.formModel),form:e.formModel,node:e.formModel.flowNodeEntity,playgroundContext:this.playgroundContext,index:n?.getIndex()}}};u([(0,i.f3)(f)],M.prototype,"nodeEngineContext",2),u([(0,a.el)()],M.prototype,"playgroundContext",2),M=u([(0,i.b2)()],M);var I=class{static normalize(e){return e===I.ROOT||e.endsWith(I.DIVIDER)&&(e=e.slice(0,-1)),e}static join(e){if(e[1].startsWith(I.ROOT))throw Error(`FormPathService Error: join failed, invalid paths[1], paths[1]= ${e[1]}`);return e[0].endsWith(I.DIVIDER)?`${e[0]}${e[1]}`:e.join(I.DIVIDER)}static toArrayPath(e){return I.join([e,I.ARRAY])}static parseArrayItemPath(e){let n=e.split("/"),r=0;for(;r<n.length;){let e=parseInt(n[r]);if(!isNaN(e)){let i=I.toArrayPath(n.slice(0,r).join(I.DIVIDER)),o=n.slice(r+1).join(I.DIVIDER),s=I.join([i,o]);return{itemIndex:e,arrayPath:i,itemMetaPath:s}}r+=1}return null}simplify(e){let n=e.split(I.DIVIDER),r=[];for(let e=0;e<n.length;e++){if(!n[e])throw Error("FormPathService: join failed");n[e]!==I.RELATIVE_CURRENT&&(n[e]===I.RELATIVE_PARENT&&r.pop(),r.push(n[e]))}return r.join(I.DIVIDER)}};I.ROOT="/",I.DIVIDER="/",I.RELATIVE_PARENT="..",I.RELATIVE_CURRENT=".",I.ARRAY="[]",I=u([(0,i.b2)()],I),Symbol("FormModelFactory"),Symbol("FormModelEntity");var T=class{constructor(){this.toDispose=new s.K4}};T=u([(0,i.b2)()],T);var k=class{constructor(){this.registry=new Map}register(e){this.registry.set(e.key,e)}get(e){return this.registry.get(e)}get objectMap(){return Object.fromEntries(this.registry)}get collection(){return Array.from(this.registry.values())}};k=u([(0,i.b2)()],k);var P=Symbol("FormContribution"),A=class e{get type(){return e.type}};A.type="setter";var L=A,j=class e{get type(){return e.type}};j.type="decorator";var R=j;var z=class e{get type(){return e.type}};z.type="effect";var V=z;var F=class e{get type(){return e.type}};F.type="validation";var $=F,B=class{constructor(){this.abilityRegistry=new Map,this.setterHocs=[],this.extensionRegistryMap=new Map,this.formContributions=[],this.onFormModelWillInitEmitter=new s.Q5,this.onFormModelWillInit=this.onFormModelWillInitEmitter.event}get components(){return(0,o.mapValues)(this.extensionRegistryMap.get(L.type)?.objectMap||{},e=>e.component)}get decorators(){return(0,o.mapValues)(this.extensionRegistryMap.get(R.type)?.objectMap||{},e=>e.component)}registerAbilityExtension(e,n){this.extensionRegistryMap.get(e)||this.extensionRegistryMap.set(e,new k);let r=this.extensionRegistryMap.get(e);r&&r.register(n)}getAbilityExtension(e,n){return this.extensionRegistryMap.get(e)?.get(n)}registerAbility(e){let n=new e;this.abilityRegistry.set(n.type,n)}registerAbilities(e){e.forEach(this.registerAbility.bind(this))}getAbility(e){return this.abilityRegistry.get(e)}registerSetterHoc(e){this.setterHocs.push(e)}fireFormModelWillInit(e,n){this.onFormModelWillInitEmitter.fire({model:e,data:n})}dispose(){this.onFormModelWillInitEmitter.dispose()}init(){this.formContributions.forEach(e=>e.onRegister?.(this))}};u([(0,i.f3)(I)],B.prototype,"pathManager",2),u([(0,i.f3)(M)],B.prototype,"formContextMaker",2),u([(0,a.el)()],B.prototype,"playgroundContext",2),u([(0,i.nx)(P),(0,i.jt)()],B.prototype,"formContributions",2),u([(0,i.zY)()],B.prototype,"init",1),B=u([(0,i.b2)()],B);var H=class extends a.RD{constructor(e,n){super(e),this.onDetailChangeEmitter=new s.Q5,this.onDetailChange=this.onDetailChangeEmitter.event,this.flowNodeEntity=e,this.formModel=n.formModelFactory(e),this.toDispose.push(this.onDetailChangeEmitter),this.toDispose.push(s.JT.create(()=>{this.formModel.dispose()}))}getFormModel(){return this.formModel}getDefaultData(){return{}}createForm(e,n){let r=this.flowNodeEntity.getData(w);r.setError(null);try{this.formModel.init(e,n)}catch(e){r.setError(e)}}recreateForm(e,n){this.createForm(e,n)}toJSON(){return this.formModel.toJSON()}dispose(){super.dispose()}fireDetaiChange(e){this.onDetailChangeEmitter.fire(e)}};function K({node:e}){let n=(0,s.JA)(),r=e.getData(H)?.getFormModel();return(0,l.useEffect)(()=>{let e=r?.onInitialized(()=>{n()});return()=>{e.dispose()}},[r]),r?.initialized?r.render():null}H.type="FlowNodeEntityFormData";var U=e=>l.createElement(K,{...e}),W=class{onRegister(e){e.registerPluginRender(m,U)}};W=u([(0,i.b2)()],W);var G=new i.nZ(e=>{e(B).toSelf().inSingletonScope(),e(I).toSelf().inSingletonScope(),e(M).toSelf().inSingletonScope(),(0,s.KV)(e,W,[d])});function Y(){return[y,G,O]}var Z=l.createContext(f.DEFAULT_JSON),X=(0,l.memo)(({node:e})=>{let n=(0,a.JA)(),r=e.getData(w),i=e.getData(H).formModel,o=!!e.getData(w).getError(),s=e.getData(H).getFormModel().initialized,h=(0,a.G2)(a.xm),c=(0,a.G2)(p),u=c.getPluginRender(m),d=c.getPluginRender(b),g=c.getMaterialRender(E),y=function(){let e=(0,a.JA)(),n=(0,a.G2)(f);return(0,l.useEffect)(()=>{let r=n.onChange(()=>{e()});return()=>{r.dispose()}},[]),n}();(0,l.useEffect)(()=>{let e=r.onDataChange(()=>{n()}),o=i.onInitialized(()=>{n()});return()=>{e.dispose(),o.dispose()}},[]);let _=(0,l.useCallback)(()=>o?d({node:e,playgroundContext:h}):i.formMeta?s?u({node:e,playgroundContext:h}):g?.({node:e,playgroundContext:h})||null:null,[o,s,d,u,g,e,h]);return l.createElement(Z.Provider,{value:y.json},c.nodeRenderHoc(_)())});function Q(e,n){e.registerMaterialRender(_,n)}function q(e,n){e.registerMaterialRender(E,n)}function J(){return[H,w]}},4683:function(e,n,r){"use strict";r.d(n,{Cn:()=>y,_R:()=>U,W3:()=>x,Fy:()=>g});var i=r(4194),o=r(413),s=r(8820),a=r(3427),l=r(3845),h=r(8341),c=r(5384),u=r(4376),d=r(8786);let p=(0,r(3024).A)(function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{d:"M2 12c0-.83.67-1.5 1.5-1.5h17a1.5 1.5 0 0 1 0 3h-17A1.5 1.5 0 0 1 2 12Z",fill:"currentColor"}))},"minus");var f=r(3254),g={custom:i.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:"false","aria-hidden":"true"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.1 18L4.5032 20.1702C4.24999 21.0909 4.94281 22 5.89773 22C6.54881 22 7.11964 21.565 7.29227 20.9372L8.1 18H12.1L11.5032 20.1702C11.25 21.0909 11.9428 22 12.8977 22C13.5488 22 14.1196 21.565 14.2923 20.9372L15.1 18H19.5C20.3284 18 21 17.3284 21 16.5C21 15.6716 20.3284 15 19.5 15H15.925L17.575 9H20.5C21.3284 9 22 8.32843 22 7.5C22 6.67157 21.3284 6 20.5 6H18.4L18.9968 3.8298C19.25 2.90906 18.5572 2 17.6023 2C16.9512 2 16.3804 2.43504 16.2077 3.06281L15.4 6H11.4L11.9968 3.8298C12.25 2.90906 11.5572 2 10.6023 2C9.95119 2 9.38036 2.43504 9.20773 3.06281L8.4 6H4.5C3.67157 6 3 6.67157 3 7.5C3 8.32843 3.67157 9 4.5 9H7.575L5.925 15H3.5C2.67157 15 2 15.6716 2 16.5C2 17.3284 2.67157 18 3.5 18H5.1ZM8.925 15L10.575 9H14.575L12.925 15H8.925Z",fill:"currentColor"})),object:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M5.33893 1.5835C5.66613 1.5835 5.93137 1.88142 5.93137 2.20862C5.93137 2.53582 5.66613 2.76838 5.33893 2.76838H4.9099C4.34717 2.76838 4.08062 3.07557 4.08062 3.71921V6.58633C4.08062 7.30996 3.80723 7.84734 3.26798 8.19105C3.11426 8.28902 3.10884 8.55273 3.26068 8.65359C3.80476 9.01503 4.08062 9.53994 4.08062 10.2434V13.1251C4.08062 13.7395 4.34717 14.0613 4.9099 14.0613H5.33893C5.66613 14.0613 5.93137 14.3435 5.93137 14.6707C5.93137 14.9979 5.66613 15.2462 5.33893 15.2462H4.64335C3.99177 15.2462 3.48828 15.0268 3.13287 14.6172C2.80708 14.2369 2.64419 13.7103 2.64419 13.0666V10.3165C2.64419 9.8923 2.55534 9.58511 2.37764 9.39494C2.26816 9.27135 1.80618 9.17938 1.38154 9.11602C1.02726 9.06315 0.759057 8.76744 0.765747 8.4093C0.772379 8.0543 1.03439 7.7566 1.38545 7.70346C1.80778 7.63952 2.26906 7.54968 2.37764 7.43477C2.55534 7.22997 2.64419 6.92278 2.64419 6.51319V3.77772C2.64419 3.11945 2.80708 2.59284 3.13287 2.21251C3.48828 1.78829 3.99177 1.5835 4.64335 1.5835H5.33893Z",fill:"currentColor"}),i.createElement("path",{d:"M10.962 15.2463C10.6348 15.2463 10.3696 14.9483 10.3696 14.6211C10.3696 14.2939 10.6348 14.0614 10.962 14.0614H11.391C11.9538 14.0614 12.2203 13.7542 12.2203 13.1105V10.2434C12.2203 9.51979 12.4937 8.98241 13.033 8.6387C13.1867 8.54073 13.1921 8.27703 13.0403 8.17616C12.4962 7.81472 12.2203 7.28982 12.2203 6.58638V3.70463C12.2203 3.09024 11.9538 2.76842 11.391 2.76842L10.962 2.76842C10.6348 2.76842 10.3696 2.48627 10.3696 2.15907C10.3696 1.83188 10.6348 1.58354 10.962 1.58354L11.6576 1.58354C12.3092 1.58354 12.8127 1.80296 13.1681 2.21255C13.4939 2.59289 13.6568 3.1195 13.6568 3.76314V6.51324C13.6568 6.93745 13.7456 7.24464 13.9233 7.43481C14.03 7.5553 14.4328 7.64858 14.8186 7.71393C15.1718 7.77376 15.4401 8.06977 15.4334 8.42791C15.4268 8.78291 15.1646 9.08018 14.814 9.13633C14.4306 9.19774 14.0291 9.28303 13.9233 9.39499C13.7456 9.59978 13.6568 9.90697 13.6568 10.3166V13.052C13.6568 13.7103 13.4939 14.2369 13.1681 14.6172C12.8127 15.0415 12.3092 15.2463 11.6576 15.2463H10.962Z",fill:"currentColor"})),boolean:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.668 4.66683H5.33463C3.49369 4.66683 2.0013 6.15921 2.0013 8.00016C2.0013 9.84111 3.49369 11.3335 5.33463 11.3335H10.668C12.5089 11.3335 14.0013 9.84111 14.0013 8.00016C14.0013 6.15921 12.5089 4.66683 10.668 4.66683ZM5.33463 3.3335C2.75731 3.3335 0.667969 5.42283 0.667969 8.00016C0.667969 10.5775 2.75731 12.6668 5.33463 12.6668H10.668C13.2453 12.6668 15.3346 10.5775 15.3346 8.00016C15.3346 5.42283 13.2453 3.3335 10.668 3.3335H5.33463Z",fill:"currentColor"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66797 8.00016C8.66797 6.89559 9.5634 6.00016 10.668 6.00016C11.7725 6.00016 12.668 6.89559 12.668 8.00016C12.668 9.10473 11.7725 10.0002 10.668 10.0002C9.5634 10.0002 8.66797 9.10473 8.66797 8.00016ZM10.668 7.3335C10.2998 7.3335 10.0013 7.63197 10.0013 8.00016C10.0013 8.36835 10.2998 8.66683 10.668 8.66683C11.0362 8.66683 11.3346 8.36835 11.3346 8.00016C11.3346 7.63197 11.0362 7.3335 10.668 7.3335Z",fill:"currentColor"})),string:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M9.3342 3.33321C8.96601 3.33321 8.66753 3.63169 8.66753 3.99988C8.66753 4.36807 8.96601 4.66655 9.3342 4.66655H14.6675C15.0357 4.66655 15.3342 4.36807 15.3342 3.99988C15.3342 3.63169 15.0357 3.33321 14.6675 3.33321H9.3342Z",fill:"currentColor"}),i.createElement("path",{d:"M10.0009 7.99988C10.0009 7.63169 10.2993 7.33321 10.6675 7.33321H14.6675C15.0357 7.33321 15.3342 7.63169 15.3342 7.99988C15.3342 8.36807 15.0357 8.66655 14.6675 8.66655H10.6675C10.2993 8.66655 10.0009 8.36807 10.0009 7.99988Z",fill:"currentColor"}),i.createElement("path",{d:"M12.0009 11.3332C11.6327 11.3332 11.3342 11.6317 11.3342 11.9999C11.3342 12.3681 11.6327 12.6665 12.0009 12.6665H14.6675C15.0357 12.6665 15.3342 12.3681 15.3342 11.9999C15.3342 11.6317 15.0357 11.3332 14.6675 11.3332H12.0009Z",fill:"currentColor"}),i.createElement("path",{d:"M9.86659 14.1482L8.23444 10.1844H3.18136C3.13868 10.1844 3.09685 10.1808 3.05616 10.1738L1.66589 14.1129C1.53049 14.4965 1.10971 14.6978 0.726058 14.5624C0.342408 14.427 0.141166 14.0062 0.276572 13.6225L4.37566 2.00848C4.71323 1.05202 6.05321 1.01763 6.4394 1.95552L11.2289 13.5872C11.3838 13.9634 11.2044 14.394 10.8282 14.5489C10.452 14.7038 10.0215 14.5244 9.86659 14.1482ZM5.44412 3.40791L3.57241 8.71109H7.62778L5.44412 3.40791Z",fill:"currentColor"})),integer:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M15.132 11.4601C15.644 11.0121 15.9 10.3921 15.9 9.60007C15.9 8.60807 15.5 7.93607 14.7 7.58407C15.412 7.23207 15.768 6.62407 15.768 5.76007C15.768 5.05607 15.536 4.48007 15.072 4.03207C14.608 3.59207 14.012 3.37207 13.284 3.37207C12.588 3.37207 12.008 3.58007 11.544 3.99607C11.064 4.42007 10.808 4.98807 10.776 5.70007H12C12.064 4.88407 12.492 4.47607 13.284 4.47607C14.124 4.47607 14.544 4.91607 14.544 5.79607C14.544 6.66007 14.112 7.09207 13.248 7.09207H13.044V8.16007H13.248C14.2 8.16007 14.676 8.62807 14.676 9.56407C14.676 10.5081 14.212 10.9801 13.284 10.9801C12.9 10.9801 12.584 10.8761 12.336 10.6681C12.064 10.4441 11.916 10.1161 11.892 9.68407H10.668C10.692 10.4761 10.964 11.0841 11.484 11.5081C11.948 11.8921 12.548 12.0841 13.284 12.0841C14.036 12.0841 14.652 11.8761 15.132 11.4601Z",fill:"currentColor"}),i.createElement("path",{d:"M4.46875 12.0003V10.9083L7.75675 6.91228C8.06075 6.54428 8.21275 6.16428 8.21275 5.77228C8.21275 4.90828 7.79675 4.47628 6.96475 4.47628C6.60475 4.47628 6.31275 4.57628 6.08875 4.77628C5.83275 5.00828 5.70475 5.34828 5.70475 5.79628H4.48075C4.48075 5.07628 4.71275 4.49228 5.17675 4.04428C5.64075 3.60428 6.23675 3.38428 6.96475 3.38428C7.70075 3.38428 8.29675 3.60028 8.75275 4.03228C9.20875 4.47228 9.43675 5.05628 9.43675 5.78428C9.43675 6.13628 9.36875 6.45628 9.23275 6.74428C9.12075 6.97628 8.92075 7.27228 8.63275 7.63228L5.95675 10.9083H9.43675V12.0003H4.46875Z",fill:"currentColor"}),i.createElement("path",{d:"M1.668 12.0001V4.78805L0 6.25205V4.89605L1.668 3.45605H2.892V12.0001H1.668Z",fill:"currentColor"})),number:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M3.44151 5.3068C3.44151 3.83404 4.71542 2.64014 6.18818 2.64014C7.66094 2.64014 8.93484 3.83404 8.93484 5.3068V10.6135C8.93484 12.0862 7.66094 13.2801 6.18818 13.2801C4.71542 13.2801 3.44151 12.0862 3.44151 10.6135V5.3068ZM7.60151 5.3068C7.60151 4.57042 6.92456 3.97347 6.18818 3.97347C5.4518 3.97347 4.77484 4.57042 4.77484 5.3068V10.6135C4.77484 11.3498 5.4518 11.9468 6.18818 11.9468C6.92456 11.9468 7.60151 11.3498 7.60151 10.6135V5.3068Z",fill:"currentColor"}),i.createElement("path",{d:"M12.9882 2.64014C11.5154 2.64014 10.2415 3.83404 10.2415 5.3068V10.6135C10.2415 12.0862 11.5154 13.2801 12.9882 13.2801C14.4609 13.2801 15.7348 12.0862 15.7348 10.6135V5.3068C15.7348 3.83404 14.4609 2.64014 12.9882 2.64014ZM14.4015 10.6135C14.4015 11.3498 13.7246 11.9468 12.9882 11.9468C12.2518 11.9468 11.5748 11.3498 11.5748 10.6135V5.3068C11.5748 4.57042 12.2518 3.97347 12.9882 3.97347C13.7246 3.97347 14.4015 4.57042 14.4015 5.3068V10.6135Z",fill:"currentColor"}),i.createElement("path",{d:"M1.21484 13.2001C1.76713 13.2001 2.21484 12.7524 2.21484 12.2001C2.21484 11.6479 1.76713 11.2001 1.21484 11.2001C0.662559 11.2001 0.214844 11.6479 0.214844 12.2001C0.214844 12.7524 0.662559 13.2001 1.21484 13.2001Z",fill:"currentColor"})),array:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M5.23759 1.00342H2.00391V14.997H5.23759V13.6251H3.35127V2.37534H5.23759V1.00342Z",fill:"currentColor"}),i.createElement("path",{d:"M10.7624 1.00342H13.9961V14.997H10.7624V13.6251H12.6487V2.37534H10.7624V1.00342Z",fill:"currentColor"})),stream:i.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},i.createElement("path",{d:"M879.674 544.51l-158.254-0.221c-8.534 2.287-17.305-2.776-19.588-11.307l-23.862-75.877-74.742 350.891c0 0-1.523 18.507-11.518 18.507s-26.9 0.281-26.9 0.281c-8.259 2.213-16.748-2.687-18.961-10.949l-92.741-457.648-70.305 330.634c-2.261 8.291-11.94 15.206-20.385 12.986l-24.876 0.339c-8.723 2.293-17.685-2.789-20.023-11.349L270.629 544.51 143.993 544.51c-8.831 0-15.993-7.159-15.993-15.993l0-31.986c0-8.831 7.162-15.993 15.993-15.993l157.429-0.516c9.565-0.304 17.685 0.788 20.023 9.351l24.386 76.092 68.642-358.907c0 0 3.4-10.894 14.397-10.894 10.994 0 34.107-0.448 34.107-0.448 8.262-2.213 16.751 2.687 18.965 10.949l91.912 454.126 67.948-326.182c2.213-8.262 8.707-15.161 16.965-12.948l27.316-0.333c8.531-2.287 17.301 2.776 19.588 11.31l46.665 148.4 127.337 0c8.835 0 15.993 7.162 15.993 15.993l0 31.986C895.667 537.352 888.508 544.51 879.674 544.51z",fill:"currentColor"})),map:i.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},i.createElement("path",{d:"M877.860571 938.642286h-645.851428c-27.574857 0-54.052571-11.337143-73.508572-31.744a110.957714 110.957714 0 0 1-30.500571-76.8V193.828571c0-28.745143 10.971429-56.32 30.500571-76.726857a101.888 101.888 0 0 1 73.508572-31.817143h574.171428c27.501714 0 53.979429 11.337143 73.508572 31.744 19.529143 20.333714 30.500571 48.054857 30.500571 76.8v522.020572a34.157714 34.157714 0 0 1-6.948571 22.820571c-37.156571 19.382857-57.636571 39.350857-57.636572 72.630857 0 39.716571 19.894857 50.029714 57.636572 72.777143a34.816 34.816 0 0 1-8.045714 49.298286 32.256 32.256 0 0 1-17.334858 5.193143z m-32.256-254.537143V193.828571a40.228571 40.228571 0 0 0-39.497142-41.179428H232.009143a40.301714 40.301714 0 0 0-39.497143 41.252571V699.245714c17.773714-9.874286 37.449143-14.994286 57.417143-14.921143h595.675428v-0.073142z m-595.675428 187.245714h566.198857c-22.893714-11.190857-27.940571-39.497143-28.013714-59.977143 0-20.260571 3.218286-43.885714 28.013714-59.904h-566.125714c-31.670857 0-57.417143 26.843429-57.417143 59.977143 0 33.060571 25.746286 59.904 57.344 59.904z",fill:"currentColor"}),i.createElement("path",{d:"M320 128m32.036571 0l-0.073142 0q32.036571 0 32.036571 32.036571l0 511.926858q0 32.036571-32.036571 32.036571l0.073142 0q-32.036571 0-32.036571-32.036571l0-511.926858q0-32.036571 32.036571-32.036571Z",fill:"currentColor"}))},y={object:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM3.82031 5.9091C3.82031 5.18535 4.40703 4.59863 5.13078 4.59863C5.85453 4.59863 6.44124 5.18535 6.44124 5.9091C6.44124 6.56485 5.9596 7.1081 5.33078 7.2044V8.70018H5.32877C5.32982 8.75093 5.33078 8.80912 5.33078 8.87034V9.72111C5.33078 10.0195 5.57268 10.2614 5.87109 10.2614H6.24124C6.55613 10.2614 6.8114 10.5167 6.8114 10.8316C6.8114 11.1465 6.55613 11.4017 6.24124 11.4017H5.87109C4.94291 11.4017 4.19047 10.6493 4.19047 9.72111V6.82186C3.96158 6.58607 3.82031 6.26397 3.82031 5.9091ZM7.33679 5.9091C7.33679 5.59421 7.59205 5.33894 7.90694 5.33894H11.6085C11.9234 5.33894 12.1786 5.59421 12.1786 5.9091C12.1786 6.22399 11.9234 6.47925 11.6085 6.47925H7.90694C7.59205 6.47925 7.33679 6.22399 7.33679 5.9091ZM7.33679 9.86846C7.33679 9.55357 7.59205 9.2983 7.90694 9.2983H11.6085C11.9234 9.2983 12.1786 9.55357 12.1786 9.86846C12.1786 10.1833 11.9234 10.4386 11.6085 10.4386H7.90694C7.59205 10.4386 7.33679 10.1833 7.33679 9.86846Z",fill:"currentColor"})),boolean:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM2.75 7.99993C2.75 6.14518 4.25358 4.6416 6.10833 4.6416H9.775C11.6298 4.6416 13.1333 6.14518 13.1333 7.99993C13.1333 9.85469 11.6298 11.3583 9.775 11.3583H6.10833C4.25358 11.3583 2.75 9.85469 2.75 7.99993ZM6.10833 5.85827C4.92552 5.85827 3.96667 6.81713 3.96667 7.99993C3.96667 9.18274 4.92552 10.1416 6.10833 10.1416H9.775C10.9578 10.1416 11.9167 9.18274 11.9167 7.99993C11.9167 6.81713 10.9578 5.85827 9.775 5.85827H6.10833ZM8.25 7.99993C8.25 7.1577 8.93277 6.47493 9.775 6.47493C10.6172 6.47493 11.3 7.1577 11.3 7.99993C11.3 8.84217 10.6172 9.52493 9.775 9.52493C8.93277 9.52493 8.25 8.84217 8.25 7.99993ZM9.775 7.6916C9.60471 7.6916 9.46667 7.82965 9.46667 7.99993C9.46667 8.17022 9.60471 8.30827 9.775 8.30827C9.94529 8.30827 10.0833 8.17022 10.0833 7.99993C10.0833 7.82965 9.94529 7.6916 9.775 7.6916Z",fill:"currentColor"})),string:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM5.23701 4.07158C5.50364 3.3161 6.56205 3.28894 6.86709 4.02974L10 11.6383C10.1329 11.9609 9.979 12.3302 9.65631 12.4631C9.33363 12.596 8.96434 12.4421 8.83147 12.1194L7.8021 9.61951H4.61903L3.7474 12.0891C3.63126 12.4182 3.27034 12.5908 2.94127 12.4747C2.6122 12.3585 2.43958 11.9976 2.55573 11.6685L5.23701 4.07158ZM6.08814 5.45704L5.06505 8.35579H7.28174L6.08814 5.45704ZM8.81938 6.07534C8.81938 5.75166 9.08177 5.48926 9.40545 5.48926H12.8941C13.2178 5.48926 13.4802 5.75166 13.4802 6.07534C13.4802 6.39902 13.2178 6.66142 12.8941 6.66142H9.40545C9.08177 6.66142 8.81938 6.39902 8.81938 6.07534ZM10.2668 9.69181C10.2668 9.36812 10.5292 9.10573 10.8529 9.10573H12.8941C13.2178 9.10573 13.4802 9.36812 13.4802 9.69181C13.4802 10.0155 13.2178 10.2779 12.8941 10.2779H10.8529C10.5292 10.2779 10.2668 10.0155 10.2668 9.69181Z",fill:"currentColor"})),integer:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.58105H3.6139V2.87326H1.36702V13.1264H3.6139V14.4186H0V1.58105ZM3.41656 13.3264V13.3266H1.17155V13.3264H3.41656ZM0.197344 14.2186H0.199219V1.78125H3.41656V1.78105H0.197344V14.2186ZM12.3861 1.58105H16V14.4186H12.3861V13.1264H14.633V2.87326H12.3861V1.58105ZM12.5834 2.67326V1.78105H15.8027V1.78125H12.5853V2.67326H12.5834ZM12.5853 13.3266V14.2186H12.5834V13.3264H14.8303V2.67345H14.8322V13.3266H12.5853ZM10.3614 5.22374C10.7161 4.90585 11.1581 4.75 11.6762 4.75C12.2173 4.75 12.6723 4.91467 13.0281 5.25207L13.0291 5.253C13.3852 5.59688 13.561 6.03946 13.561 6.56767C13.561 6.89 13.4945 7.17448 13.3539 7.41445C13.2572 7.57972 13.1279 7.71948 12.9685 7.83428C13.1575 7.95643 13.3099 8.11182 13.4225 8.30109C13.5793 8.5644 13.6531 8.88311 13.6531 9.24936C13.6531 9.83787 13.4612 10.3151 13.0656 10.6612C12.6982 10.9795 12.2305 11.1341 11.6762 11.1341C11.1356 11.1341 10.6805 10.9925 10.324 10.6977C9.92124 10.3691 9.71723 9.90026 9.69942 9.31256L9.69473 9.15802H10.846L10.8539 9.2997C10.8689 9.5698 10.9591 9.75553 11.1096 9.87941L11.1106 9.88027C11.2519 9.99882 11.4365 10.0631 11.6762 10.0631C11.9765 10.0631 12.1743 9.98692 12.2984 9.86071C12.4229 9.73404 12.4984 9.53136 12.4984 9.22422C12.4984 8.92116 12.4215 8.72127 12.2939 8.59581C12.1658 8.46989 11.961 8.39373 11.6511 8.39373H11.3586V7.34788H11.6511C11.9297 7.34788 12.111 7.27834 12.2238 7.16555C12.3366 7.05276 12.4062 6.87138 12.4062 6.59281C12.4062 6.30696 12.3378 6.12041 12.2277 6.00501C12.1188 5.89092 11.9446 5.82098 11.6762 5.82098C11.4248 5.82098 11.2539 5.88537 11.1407 5.99325C11.0268 6.10185 10.9497 6.27522 10.9291 6.5375L10.9183 6.67577H9.76788L9.77492 6.51904C9.79886 5.98644 9.99237 5.54989 10.3614 5.22374ZM5.91032 5.26037C6.26612 4.92297 6.72112 4.7583 7.26219 4.7583C7.80751 4.7583 8.26297 4.91938 8.61401 5.25194L8.61501 5.25289C8.96719 5.59272 9.13852 6.04185 9.13852 6.58435C9.13852 6.84997 9.08709 7.09565 8.9817 7.31883L8.98114 7.31999C8.89563 7.49712 8.74775 7.71415 8.54418 7.96862L8.54322 7.96981L6.87446 10.0127H9.13852V11.0753H5.36909V10.1089L7.69946 7.27679C7.89456 7.04062 7.98374 6.80773 7.98374 6.57597C7.98374 6.29602 7.91626 6.11385 7.8078 6.00122C7.70036 5.88964 7.52811 5.8209 7.26219 5.8209C7.04017 5.8209 6.87439 5.88173 6.75075 5.99193C6.61227 6.11766 6.53226 6.30918 6.53226 6.59273V6.74273H5.37747V6.59273C5.37747 6.05443 5.55248 5.60586 5.90934 5.2613L5.91032 5.26037ZM3.50907 4.80865H4.56964V11.0754H3.41486V6.2201L2.25 7.24249V5.89561L3.50907 4.80865Z",fill:"currentColor"})),number:i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6139 1.58154H0V14.4191H3.6139V13.1269H1.36702V2.87375H3.6139V1.58154ZM3.41656 13.3271V13.3269H1.17155V13.3271H3.41656ZM0.199219 14.2191H0.197344V1.78154H3.41656V1.78174H0.199219V14.2191ZM16 1.58154H12.3861V2.87375H14.633V13.1269H12.3861V14.4191H16V1.58154ZM12.5834 1.78154V2.67375H12.5853V1.78174H15.8027V1.78154H12.5834ZM12.5853 14.2191V13.3271H14.8322V2.67394H14.8303V13.3269H12.5834V14.2191H12.5853ZM6.86771 4.5C5.87019 4.5 5.00104 5.30767 5.00104 6.31667V9.63333C5.00104 10.6423 5.87019 11.45 6.86771 11.45C7.86523 11.45 8.73438 10.6423 8.73438 9.63333V6.31667C8.73438 5.30767 7.86523 4.5 6.86771 4.5ZM11.1177 4.5C10.1202 4.5 9.25104 5.30767 9.25104 6.31667V9.63333C9.25104 10.6423 10.1202 11.45 11.1177 11.45C12.1152 11.45 12.9844 10.6423 12.9844 9.63333V6.31667C12.9844 5.30767 12.1152 4.5 11.1177 4.5ZM6.13438 6.31667C6.13438 5.9503 6.47884 5.63333 6.86771 5.63333C7.25657 5.63333 7.60104 5.9503 7.60104 6.31667V9.63333C7.60104 9.9997 7.25657 10.3167 6.86771 10.3167C6.47884 10.3167 6.13438 9.9997 6.13438 9.63333V6.31667ZM10.3844 6.31667C10.3844 5.9503 10.7288 5.63333 11.1177 5.63333C11.5066 5.63333 11.851 5.9503 11.851 6.31667V9.63333C11.851 9.9997 11.5066 10.3167 11.1177 10.3167C10.7288 10.3167 10.3844 9.9997 10.3844 9.63333V6.31667ZM3.75938 9.85C3.33135 9.85 2.98438 10.197 2.98438 10.625C2.98438 11.053 3.33135 11.4 3.75938 11.4C4.1874 11.4 4.53438 11.053 4.53438 10.625C4.53438 10.197 4.1874 9.85 3.75938 9.85Z",fill:"currentColor"}))},m=e=>e?.type==="array"?y[e.items?.type||"object"]:g[e?.type||"object"],b={display:"flex",alignItems:"center",gap:5},_=e=>e.charAt(0).toUpperCase()+e.slice(1),E=[{label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"string"})}),_("string")),value:"string"},{label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"integer"})}),_("integer")),value:"integer"},{label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"number"})}),_("number")),value:"number"},{label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"boolean"})}),_("boolean")),value:"boolean"},{label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"object"})}),_("object")),value:"object"}],w=[...E,{label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"array"})}),_("array")),value:"array",children:E.map(e=>({...e,value:`${e.value}`,label:i.createElement("div",{style:b},i.createElement(a.ZPm,{size:"small",svg:m({type:"array",items:{type:e.value}})}),_(e.value))}))}],x=({value:e,onChange:n,style:r,readonly:a=!1,hasError:l})=>{let h=function(){let e=(0,s.rVg)(),n=(0,i.useCallback)(e=>{if(e.meta.icon)return"string"==typeof e.meta.icon?i.createElement("img",{style:{marginRight:8},width:12,height:12,src:e.meta.icon}):e.meta.icon;let n=e.type;return s.GwP.isArray(n)?i.createElement(o.JO,{size:"small",svg:y[n.items?.kind.toLowerCase()]||g.array}):s.GwP.isCustomType(n)?i.createElement(o.JO,{size:"small",svg:g[n.typeName.toLowerCase()]}):i.createElement(o.JO,{size:"small",svg:g[e.type?.kind.toLowerCase()]})},[]),r=(e,i=[])=>{let o,a=e?.type;if(s.GwP.isObject(a)&&(o=(a.properties||[]).map(n=>r(n,[...i,e])).filter(Boolean),!o?.length))return null;let l=[...i.map(e=>e.key),e.key].join(".");return{key:l,label:e.meta.title||e.key,value:l,icon:n(e),children:o}};return[...e.variables.slice(0).reverse()].map(e=>r(e)).filter(Boolean)}();return i.createElement(i.Fragment,null,i.createElement(o.mP,{dropdownMatchSelectWidth:!1,disabled:a,treeData:h,size:"small",value:e,style:{...r,outline:l?"1px solid red":void 0},validateStatus:l?"error":void 0,onChange:e=>{n(e)},showClear:!0,placeholder:"Select Variable..."}))},C=e=>e?.type==="array"&&e?.items?[e.type,...C(e.items)||[]]:e?.type?[e.type]:void 0,S=e=>{let[n,...r]=e||[];return"array"===n?{type:"array",items:S(r)}:{type:n}};function D(e){let{value:n,onChange:r}=e,s=(0,i.useMemo)(()=>C(n),[n]);return i.createElement(o.vT,{size:"small",triggerRender:()=>i.createElement(o.zx,{size:"small",style:{width:50}},m(n)),treeData:w,value:s,leafOnly:!0,onChange:e=>{r(S(e))}})}var N=f.ZP.div`
  /* & .semi-input {
    background-color: #fff;
    border-radius: 6px;
    height: 24px;
  } */
`,O=f.ZP.div`
  display: flex;
  align-items: center;
  gap: 6px;
`,M=f.ZP.div`
  cursor: pointer;
  margin-right: 5px;
`,I=f.ZP.div`
  display: flex;
  flex-direction: column;
`,T=f.ZP.div`
  font-size: 12px;
  color: #999;
  font-weight: 400;
  margin-bottom: 2px;
`,k=f.ZP.div`
  display: grid;
  grid-template-columns: auto 1fr;

  ${({$shrink:e})=>e&&(0,f.iv)`
      padding-left: 10px;
      margin-top: 10px;
    `}
`,P=f.ZP.div`
  grid-column: 1;
  position: relative;

  ${({$showLine:e,$isLast:n})=>e&&(0,f.iv)`
      &::before {
        /* 竖线 */
        content: '';
        position: absolute;
        left: -22px;
        top: -18px;
        bottom: ${n?"12px":"0px"};
        width: 1px;
        background: #d9d9d9;
        display: block;
      }

      &::after {
        /* 横线 */
        content: '';
        position: absolute;
        left: -22px; // 横线起点和竖线对齐
        top: 12px; // 跟随你的行高调整
        width: 22px; // 横线长度
        height: 1px;
        background: #d9d9d9;
        display: block;
      }
    `}
`,A=f.ZP.div`
  grid-column: 2;
  margin-bottom: 10px;

  &:last-child {
    margin-bottom: 0px;
  }
`,L=f.ZP.div`
  display: flex;
  flex-direction: column;
  gap: 10px;

  ${({$expand:e})=>e&&(0,f.iv)`
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
    `}
`,j=f.ZP.div`
  display: none;

  ${({$collapse:e})=>e&&(0,f.iv)`
      display: block;
    `}
`,R=f.ZP.div`
  flex-grow: 1;
`,z=f.ZP.div``,V=f.ZP.div``,F=f.ZP.div`
  white-space: nowrap;
`,$=i.createElement("svg",{className:"icon-icon icon-icon-coz_add_node ",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 6.49988C11 8.64148 9.50397 10.4337 7.49995 10.8884V15.4998C7.49995 16.0521 7.94767 16.4998 8.49995 16.4998H11.208C11.0742 16.8061 11 17.1443 11 17.4998C11 17.8554 11.0742 18.1936 11.208 18.4998H8.49995C6.8431 18.4998 5.49995 17.1567 5.49995 15.4998V10.8884C3.49599 10.4336 2 8.64145 2 6.49988C2 4.0146 4.01472 1.99988 6.5 1.99988C8.98528 1.99988 11 4.0146 11 6.49988ZM6.5 8.99988C7.88071 8.99988 9 7.88059 9 6.49988C9 5.11917 7.88071 3.99988 6.5 3.99988C5.11929 3.99988 4 5.11917 4 6.49988C4 7.88059 5.11929 8.99988 6.5 8.99988Z"}),i.createElement("path",{d:"M17.5 12.4999C18.0523 12.4999 18.5 12.9476 18.5 13.4999V16.4999H21.5C22.0523 16.4999 22.5 16.9476 22.5 17.4999C22.5 18.0522 22.0523 18.4999 21.5 18.4999H18.5V21.4999C18.5 22.0522 18.0523 22.4999 17.5 22.4999C16.9477 22.4999 16.5 22.0522 16.5 21.4999V18.4999H13.5C12.9477 18.4999 12.5 18.0522 12.5 17.4999C12.5 16.9476 12.9477 16.4999 13.5 16.4999H16.5V13.4999C16.5 12.9476 16.9477 12.4999 17.5 12.4999Z"})),B=()=>i.createElement(a.ZPm,{size:"small",svg:$}),H=0;function K(e,n){let r=(0,i.useMemo)(()=>(function e(n,r){return n?"array"===n.type&&n.items?e(n.items,[...r||[],"items"]):{schema:n,path:r}:{}})(e),[e?.type,e?.items]),o=r.schema?.type==="object",s=(0,i.useMemo)(()=>o?Object.entries(r.schema?.properties||{}).map(([n,r])=>({key:H++,name:n,isPropertyRequired:e?.required?.includes(n)||!1,...r})):[],[o]),[a,l]=(0,i.useState)(s),h=i=>{l(o=>{let s=i(o),a={},l=[];for(let e of s)e.name&&(a[e.name]=e,e.isPropertyRequired&&l.push(e.name));let h=e||{};return r.path&&(h=r.path.reduce((e,n)=>e[n],e||{})),h.properties=a,h.required=l,n?.(e||{}),s})};return(0,i.useEffect)(()=>{o||l([])},[o]),{propertyList:a,isDrilldownObject:o,onAddProperty:()=>{h(e=>[...e,{key:H++,name:"",type:"string"}])},onRemoveProperty:e=>{h(n=>n.filter(n=>n.key!==e))},onEditProperty:(e,n)=>{h(r=>r.map(r=>r.key===e?n:r))}}}function U(e){let{value:n={type:"object"},onChange:r}=e,{propertyList:s,onAddProperty:a,onRemoveProperty:h,onEditProperty:c}=K(n,r);return i.createElement(N,null,i.createElement(k,null,s.map(e=>i.createElement(W,{key:e.key,value:e,onChange:n=>{c(e.key,n)},onRemove:()=>{h(e.key)}}))),i.createElement(o.zx,{size:"small",style:{marginTop:10},icon:i.createElement(l.Z,null),onClick:a},"Add"))}function W(e){let{value:n,onChange:r,onRemove:s,$isLast:a,$showLine:l}=e;console.log("isLast",a);let[f,g]=(0,i.useState)(!1),[y,m]=(0,i.useState)(!1),{name:b,type:_,items:E,description:w,isPropertyRequired:x}=n||{},C=(0,i.useMemo)(()=>({type:_,items:E}),[_,E]),{propertyList:S,isDrilldownObject:N,onAddProperty:$,onRemoveProperty:H,onEditProperty:U}=K(n,r),G=(e,i)=>{r?.({...n||{},[e]:i})},Y=N&&S.length>0;return i.createElement(i.Fragment,null,i.createElement(P,{$isLast:a,$showLine:l},Y&&i.createElement(M,{onClick:()=>m(e=>!e)},y?i.createElement(h.Z,{size:"small"}):i.createElement(c.Z,{size:"small"}))),i.createElement(A,null,i.createElement(L,{$expand:f},i.createElement(O,null,i.createElement(R,null,i.createElement(o.II,{placeholder:"Input Variable Name",size:"small",value:b,onChange:e=>G("name",e)})),i.createElement(z,null,i.createElement(D,{value:C,onChange:e=>{r?.({...n||{},...e})}})),i.createElement(V,null,i.createElement(o.XZ,{checked:x,onChange:e=>G("isPropertyRequired",e.target.checked)})),i.createElement(F,null,i.createElement(o.hU,{size:"small",theme:"borderless",icon:f?i.createElement(u.Z,{size:"small"}):i.createElement(d.Z,{size:"small"}),onClick:()=>g(e=>!e)}),N&&i.createElement(o.hU,{size:"small",theme:"borderless",icon:i.createElement(B,null),onClick:()=>{$(),m(!0)}}),i.createElement(o.hU,{size:"small",theme:"borderless",icon:i.createElement(p,{size:"small"}),onClick:s}))),f&&i.createElement(I,null,i.createElement(T,null,"Description"),i.createElement(o.II,{size:"small",value:w,onChange:e=>G("description",e),placeholder:"Help LLM to understand the property"}))),Y&&i.createElement(j,{$collapse:y},i.createElement(k,{$shrink:!0},S.map((e,n)=>i.createElement(W,{key:e.key,value:e,onChange:n=>{U(e.key,n)},onRemove:()=>{H(e.key)},$isLast:n===S.length-1,$showLine:!0}))))))}},5624:function(e,n,r){"use strict";r.d(n,{C$:()=>_,F2:()=>W,Np:()=>H,eP:()=>N,gN:()=>k,l0:()=>K,lE:()=>$,qo:()=>U,rR:()=>s});var i,o,s,a,l=r(4194),h=r(9378),c=r(8336),u=r(2082),d=r(6261),p=e=>null!==e&&"object"==typeof e,f=e=>String(Math.floor(Number(e)))===e;function g(e,n){let r=new Set(n),i={};return Object.keys(e).forEach(n=>{r.has(n)&&(i[n]=e[n])}),i}var y=s||(s={});function m(e,...n){let r=n.shift();if(void 0===r)return e.toString();let i="";return(i=""===e&&""===r?"":""!==e&&""===r?e.toString():""===e&&""!==r?r.toString():`${e}${y.DIVIDER}${r}`,n.length>0)?m(i,...n):i}function b(e,n,r){if(!e||!n)return[];let i=n.split(y.DIVIDER),o=i.shift(),s=[],a=e;for(;o;){if("object"!=typeof a)return[];if(o===y.ALL){let e=s.join(y.DIVIDER);return(0,h.flatten)(Object.keys(a).map(n=>0===i.length?m(e,n):b(a[n],`${i.join(y.DIVIDER)}`,r).map(r=>m(e,n,r))))}if(!(o in a)&&!r)return[];a=a[o],s.push(o),o=i.shift()}return[n]}y.DIVIDER=".",y.ALL="*",y.isMatch=function(e,n){let r=e.split(y.DIVIDER),i=n.split(y.DIVIDER);return r.length===i.length&&r.every((e,n)=>e===y.ALL||e===i[n])},y.isMatchOrParent=function(e,n){if(""===e)return!0;let r=e.split(y.DIVIDER),i=n.split(y.DIVIDER);if(r.length>i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==y.ALL&&r[e]!==i[e])return!1;return!0},y.getParentPathByPattern=function(e,n){let r=e.split(y.DIVIDER);return n.split(y.DIVIDER).slice(0,r.length).join(y.DIVIDER)},y.getSubPaths=function(e,n){return n&&"object"==typeof n?(0,h.flatten)(e.map(e=>{let r=""===e?n:(0,h.get)(n,e);return(0,h.isArray)(r)?r.map((n,r)=>m(e,r)):(0,h.isObject)(r)?Object.keys(r).map(n=>m(e,n)):[]})):[]},y.splitPattern=function(e){let n=e.split(y.DIVIDER),r=[],i=0,o=[];for(;i<n.length;)n[i]===y.ALL?(o.length&&r.push(o.join(y.DIVIDER)),r.push(y.ALL),o=[]):o.push(n[i]),i+=1;return o.length&&r.push(o.join(y.DIVIDER)),r},y.findMatchPaths=b,y.findMatchPathsWithEmptyValue=function(e,n){return n.includes("*")?b(e,n,!0):[n]};var _=((i=_||{}).onChange="onChange",i.onBlur="onBlur",i),E=class e{constructor(e){this._path=[],this._path=(0,h.toPath)(e)}get parent(){if(!(this._path.length<2))return new e(this._path.slice(0,-1))}toString(){return this._path.join(".")}get value(){return this._path}isChild(n){let r=new e(n).value,i=this.value;if(r.length-i.length!=1)return!1;for(let e=0;e<i.length;e++)if(r[e]!==i[e])return!1;return!0}static compareArrayPath(e,n){let r=0;for(;e.value[r]&&n.value[r];){let i=parseInt(e.value[r]),o=parseInt(n.value[r]);if(!isNaN(i)&&!isNaN(o))return i-o;if(e.value[r]!==n.value[r])throw Error(`[Form] Path.compareArrayPath invalid input Error: two path should refers to the same array, but got path1: ${e.toString()}, path2: ${n.toString()}`);r++}throw Error(`[Form] Path.compareArrayPath invalid input Error: got path1: ${e.toString()}, path2: ${n.toString()}`)}isChildOrGrandChild(n){let r=new e(n).value,i=this.value;if(r.length-i.length<1)return!1;for(let e=0;e<i.length;e++)if(r[e]!==i[e])return!1;return!0}getArrayIndex(e){return parseInt(this._path[e.value.length])}concat(n){if("string"==typeof n||"number"==typeof n)return new e(this._path.concat(new e(n.toString())._path));throw Error(`[Form] Error in Path.concat: invalid param type, require number or string, but got ${typeof n}`)}replaceParent(n,r){if(n.value.length>this.value.length)throw Error(`[Form] Error in Path.replaceParent: invalid parent param: ${n}, parent length should not greater than current length.`);let i=[];for(let e=0;e<this.value.length;e++){if(e<n.value.length&&n.value[e]!==this.value[e])throw Error(`[Form] Error in Path.replaceParent: invalid parent param: '${n}' is not a parent of '${this.toString()}'`);e>=n.value.length&&i.push(this.value[e])}return new e(r.value.concat(i))}};function w(e,n){return(e||[]).map(e=>({...e,name:n}))}function x(e,n){return n?e?Object.keys(n).some(r=>!(0,h.isEqual)(e[r],n[r]))?{...e,...n}:e:{...n}:e}function C(e,n){return n&&e in n&&delete n[e],n}function S(e){let n={get name(){return e.name},get value(){return e.value},onChange:n=>{"object"==typeof n&&null!==n&&"target"in n&&"object"==typeof n.target?e.value="object"==typeof n&&null!==n&&"target"in n&&"object"==typeof n.target&&"checkbox"===n.target.type?n.target.checked:n.target.value:e.value=n},onBlur(){"onBlur"===e.form.validationTrigger&&e.validate()},onFocus(){e.state.isTouched=!0}};return Object.defineProperty(n,"key",{enumerable:!1,get:()=>e.id}),Object.defineProperty(n,"_fieldModel",{enumerable:!1,get:()=>e}),n}function D(e){return{get isTouched(){return e.isTouched},get invalid(){return e.invalid},get isDirty(){return e.isDirty},get isValidating(){return e.isValidating},get errors(){if(e.errors)return Object.values(e.errors).reduce((e,n)=>e.concat(n),[]);return},get warnings(){if(e.warnings)return Object.values(e.warnings).reduce((e,n)=>e.concat(n),[]);return}}}function N(e){let n={initialValues:e.initialValues,get values(){return e.values},set values(v){e.values=v},state:O(e.state),getValueIn:n=>e.getValueIn(n),setValueIn:(n,r)=>e.setValueIn(n,r),validate:e.validate.bind(e)};return Object.defineProperty(n,"_formModel",{enumerable:!1,get:()=>e}),n}function O(e){return{get isTouched(){return e.isTouched},get invalid(){return e.invalid},get isDirty(){return e.isDirty},get isValidating(){return e.isValidating},get errors(){return e.errors},get warnings(){return e.warnings}}}(o=a||(a={})).shouldTriggerFieldChangeEvent=function(e,n){let{name:r,options:i}=e;return!!s.isMatchOrParent(n,r)||!!new E(r).isChildOrGrandChild(n)&&(i?.action==="array-append"?!new E(r).isChildOrGrandChild(n):!(i?.action==="array-splice"&&i?.indexes?.length)||E.compareArrayPath(new E(n),new E(r).concat(i.indexes[0]))>=0)},o.shouldTriggerFieldValidateWhenChange=function(e,n){let{name:r,options:i}=e;return i?.action==="array-splice"||i?.action==="array-swap"?n===r:o.shouldTriggerFieldChangeEvent(e,n)};var M=l.createContext({}),I=l.createContext({});function T(){return(0,l.useContext)(M)}function k({name:e,defaultValue:n,render:r,children:i,deps:o}){let s=T(),a=s.getField(e)||s.createField(e),d=l.useMemo(()=>S(a),[a]),p=(0,u.nt)(a.reactiveState),f=(0,u.nt)(s.reactiveState),g=l.useMemo(()=>D(p),[p]),y=O(f),m=(0,c.JA)();return l.useEffect(()=>{a.renderCount=a.renderCount+1,s.getValueIn(e),void 0!==n&&(s.setInitValueIn(e,n),m());let r=new c.K4;return r.push(a.onValueChange(()=>{m()})),o&&o.forEach(e=>{let n=s.getField(e)?.onValueChange(()=>{m()});n&&r.push(n)}),()=>{r.dispose(),a.renderCount>1?a.renderCount=a.renderCount-1:s.getField(a.name)===a&&a.dispose()}},[a]),l.createElement(I.Provider,{value:a},r?r({field:d,fieldState:g,formState:y}):(0,h.isFunction)(i)?i({field:d,fieldState:g,formState:y}):l.cloneElement(i,{...d}))}function P(e){let n={get key(){return e.id},get name(){return e.path.toString()},get value(){return e.value},onChange:n=>{e.value=n},map:n=>e.map((e,r)=>n(S(e),r)),append:n=>S(e.append(n)),delete:n=>e.delete(n),remove:n=>e.delete(n),swap:(n,r)=>e.swap(n,r),move:(n,r)=>e.move(n,r)};return Object.defineProperty(n,"_fieldModel",{enumerable:!1,get:()=>e}),n}function A(e,n){return"string"==typeof e?{name:n,message:e,level:"error"}:e?.message?{...e,name:n}:void 0}function L(e,n){return{[e]:n?[n]:[]}}var j=e=>Object.keys(e).some(n=>e[n]?.length>0),R={invalid:!1,isDirty:!1,isTouched:!1,isValidating:!1},z={invalid:!1,isDirty:!1,isTouched:!1,isValidating:!1},V=class{get values(){return this._values}set values(e){this._values=e}setInitialValues(e){this._values=e}setIn(e,n){this._values=function(e,n,r){let i=(0,h.clone)(e),o=i,s=0,a=(0,h.toPath)(n);for(;s<a.length-1;s++){let n=a[s],r=function(e,n,r,i=0){let o=(0,h.toPath)(n);for(;e&&i<o.length;)e=e[o[i++]];return i===o.length||e?void 0===e?void 0:e:void 0}(e,a.slice(0,s+1));if(r&&(p(r)||Array.isArray(r)))o=o[n]=(0,h.clone)(r);else{let e=a[s+1];o=o[n]=f(e)&&Number(e)>=0?[]:{}}}return(0===s?e:o)[a[s]]===r?e:(o[a[s]]=r,i)}(this._values||{},e.toString(),n)}getIn(e){return(0,h.get)(this._values,e.value)}dispose(){}},F=class{constructor(e,n){this.onValueChangeEmitter=new c.Q5,this.onValueChange=this.onValueChangeEmitter.event,this.toDispose=new c.K4,this._state=new u.BP({...R}),this._renderCount=0,this._mount=!1,this._path=e,this.form=n,this.id=(0,d.x0)();let r=this.form.onFormValuesChange(e=>{let{values:n,prevValues:r}=e;a.shouldTriggerFieldChangeEvent(e,this.name)&&(this.onValueChangeEmitter.fire({value:(0,h.get)(n,this.name),prevValue:(0,h.get)(r,this.name),formValues:n,prevFormValues:r}),"onChange"===this.form.validationTrigger&&a.shouldTriggerFieldValidateWhenChange(e,this.name)&&this.validate())});this.toDispose.push(r),this.toDispose.push(this.onValueChangeEmitter),this.initState()}get renderCount(){return this._renderCount}set renderCount(e){this._renderCount=e}initState(){let e=(0,h.get)(this.form.state.errors,this.name),n=(0,h.get)(this.form.state.warnings,this.name);e&&(this.state.errors={[this.name]:e}),n&&(this.state.warnings={[this.name]:n})}get path(){return this._path}get name(){return this._path.toString()}set name(e){this._path=new E(e)}get ref(){return this._ref}set ref(e){this._ref=e}get state(){return this._state.value}get reactiveState(){return this._state}get value(){return this.form.getValueIn(this.name)}set value(e){this.form.setValueIn(this.name,e),this.state.isTouched||(this.state.isTouched=!0,this.bubbleState())}updateNameForLeafState(e){let{errors:n,warnings:r}=this.state,i=n?Object.keys(n)?.[0]:void 0;i&&n?.[i]&&i!==e&&(this.state.errors={[e]:n?.[i]?w(n?.[i],e):n?.[i]});let o=r?Object.keys(r)?.[0]:void 0;o&&r?.[o]&&o!==e&&(this.state.warnings={[e]:r?.[o]?w(r?.[o],e):r?.[o]})}updateValidate(e,n){"ui"===n&&this.originalValidate||(this.originalValidate=e)}bubbleState(){let{errors:e,warnings:n}=this.state;if(this.parent){this.parent.state.isTouched=(0,h.some)(this.parent.children.map(e=>e.state.isTouched),Boolean),this.parent.state.invalid=(0,h.some)(this.parent.children.map(e=>e.state.invalid),Boolean),this.parent.state.isDirty=(0,h.some)(this.parent.children.map(e=>e.state.isDirty),Boolean),this.parent.state.isValidating=(0,h.some)(this.parent.children.map(e=>e.state.isValidating),Boolean),this.parent.state.errors=e?x(this.parent.state.errors,e):C(this.name,this.parent.state.errors),this.parent.state.warnings=n?x(this.parent.state.warnings,n):C(this.name,this.parent.state.warnings),this.parent.bubbleState();return}this.form.state.isTouched=(0,h.some)(this.form.fields.map(e=>e.state.isTouched),Boolean),this.form.state.invalid=(0,h.some)(this.form.fields.map(e=>e.state.invalid),Boolean),this.form.state.isDirty=(0,h.some)(this.form.fields.map(e=>e.state.isDirty),Boolean),this.form.state.isValidating=(0,h.some)(this.form.fields.map(e=>e.state.isValidating),Boolean),this.form.state.errors=e?x(this.form.state.errors,e):C(this.name,this.form.state.errors),this.form.state.warnings=n?x(this.form.state.warnings,n):C(this.name,this.form.state.warnings)}clearState(){this.state.errors=R.errors,this.state.warnings=R.warnings,this.state.isTouched=R.isTouched,this.state.isDirty=R.isDirty,this.bubbleState()}get children(){let e=[];return this.form.fieldMap.forEach((n,r)=>{this.path.isChild(r)&&e.push(n)}),e}get parent(){let e=this.path.parent;if(e)return this.form.fieldMap.get(e.toString())}clear(){this.value&&(this.value=void 0)}async validate(){await this.validateSelf()}async validateSelf(){this.state.isValidating=!0,this.bubbleState();let{errors:e,warnings:n}=await this._runAsyncValidate();e?.length?(this.state.errors=(0,h.groupBy)(e,"name"),this.state.invalid=!0):(this.state.errors={[this.name]:[]},this.state.invalid=!1),n?.length?this.state.warnings=(0,h.groupBy)(n,"name"):this.state.warnings={[this.name]:[]},this.state.isValidating=!1,this.bubbleState(),this.form.onValidateEmitter.fire(this.form.state)}async _runAsyncValidate(){let e=[],n=[],r=await this.form.validateIn(this.name);if(!r?.length)return{};{let i=r.map(e=>A(e,this.name)).filter(Boolean);if(!i?.length)return{};let o=(0,h.groupBy)(i,"level");n=n.concat(o.warning),e=e.concat(o.error)}return{errors:e,warnings:n}}updateState(e){}dispose(){this.children.map(e=>e.dispose()),this.toDispose.dispose(),this.form.fieldMap.delete(this.path.toString())}onDispose(e){this.toDispose.onDispose(e)}},$=class extends F{constructor(){super(...arguments),this.onAppendEmitter=new c.Q5,this.onAppend=this.onAppendEmitter.event,this.onDeleteEmitter=new c.Q5,this.onDelete=this.onDeleteEmitter.event}get children(){let e=[];return this.form.fieldMap.forEach((n,r)=>{this.path.isChild(r)&&e.push(n)}),e.sort((e,n)=>{let r=e.path.value,i=n.path.value;return parseInt(r[r.length-1])-parseInt(r[i.length-1])})}map(e){return(this.value||[]).map((e,n)=>{let r=this.path.concat(n).toString(),i=this.form.getField(r);return i||(i=this.form.createField(r)),i}).map(e)}append(e){let n=this.value?.length||0,r=this.path.concat(n).toString(),i=this.form.createField(r),o=this.value?[...this.value,e]:[e],s=this.form.values;return this.form.store.setIn(new E(this.name),o),this.form.fireOnFormValuesChange({values:this.form.values,prevValues:s,name:this.name,options:{action:"array-append",indexes:[n]}}),this.form.fireOnFormValuesInit({values:this.form.values,prevValues:s,name:r}),this.onAppendEmitter.fire({value:e,arrayValue:this.value,index:this.value.length-1}),i}delete(e){this._splice(e,1),this.onDeleteEmitter.fire({arrayValue:this.value,index:e})}_splice(e,n=1){if(e<0||n<0)throw Error("[Form] Error in FieldArrayModel.splice: Invalid Params, start and deleteCount should > 0");if(!this.value||0===this.value.length||n>this.value.length)throw Error(`[Form] Error in FieldArrayModel.splice: delete count exceeds array length, tried to delete ${n} elements, but array length is ${this.value?.length||0}`);let r=this.form.values,i=[...this.value];i.splice(e,n),this.form.store.setIn(new E(this.name),i),this.form.fireOnFormValuesChange({values:this.form.values,prevValues:r,name:this.name,options:{action:"array-splice",indexes:Array.from({length:n},(n,r)=>r+e)}});let o=this.children;if(e+n>=o.length)for(let n=e;n<o.length;n++)this.form.disposeField(o[n].name);let s=[],a=new Map(this.form.fieldMap),l=(r,i)=>{if(r.children?.length&&r.children.forEach(e=>{l(e,i)}),i<e)a.set(r.name,r);else if(i<e+n)s.push(r);else{let e=r.name,s=r.path.replaceParent(this.path.concat(i),this.path.concat(i-n)).toString();a.set(s,r),r.children.length||(r.updateNameForLeafState(s),r.bubbleState()),r.name=s,i>o.length-n-1&&a.delete(e)}};o.map((e,n)=>{l(e,n)}),s.forEach(e=>{e.dispose()}),this.form.fieldMap=a,this.form.alignStateWithFieldMap()}swap(e,n){if(!this.value)return;if(e<0||n<0||e>this.value.length-1||n>this.value.length-1)throw Error(`[Form]: FieldArrayModel.swap Error: invalid params 'form' and 'to', form=${e} to=${n}. expect the value between 0 to ${length-1}`);let r=this.form.values,i=[...this.value],o=i[e],s=i[n];i[n]=o,i[e]=s,this.form.store.setIn(this.path,i),this.form.fireOnFormValuesChange({values:this.form.values,prevValues:r,name:this.name,options:{action:"array-swap",indexes:[e,n]}});let a=new Map(this.form.fieldMap),l=this.findAllFieldsAt(e),h=this.findAllFieldsAt(n),c=this.getPathAt(e),u=this.getPathAt(n),d=[];l.forEach(e=>{let n=e.path.replaceParent(c,u).toString();e.name=n,e.children.length||(e.updateNameForLeafState(n),d.push(e)),a.set(n,e)}),h.forEach(e=>{let n=e.path.replaceParent(u,c).toString();e.name=n,e.children.length||e.updateNameForLeafState(n),a.set(n,e),d.push(e)}),this.form.fieldMap=a,d.forEach(e=>e.bubbleState()),this.form.alignStateWithFieldMap()}move(e,n){if(!this.value)return;if(e<0||n<0||e>this.value.length-1||n>this.value.length-1)throw Error(`[Form]: FieldArrayModel.move Error: invalid params 'form' and 'to', form=${e} to=${n}. expect the value between 0 to ${length-1}`);let r=[...this.value],i=r[e];r.splice(e,1),r.splice(n,0,i),this.form.setValueIn(this.name,r)}insertAt(e,n){if(!this.value)return;if(e<0||e>this.value.length)throw Error("[Form]: FieldArrayModel.insertAt Error: index exceeds array boundary");let r=[...this.value];r.splice(e,0,n),this.form.setValueIn(this.name,r)}getPathAt(e){return this.path.concat(e)}findAllFieldsAt(e){let n=this.getPathAt(e),r=n.toString(),i=this.form.fieldMap.get(r)?[this.form.fieldMap.get(r)]:[];return this.form.fieldMap.forEach((e,r)=>{n.isChildOrGrandChild(r)&&i.push(e)}),i}},B=class{constructor(){this._fieldMap=new Map,this.store=new V,this._options={},this.onFieldModelCreateEmitter=new c.Q5,this.onFieldModelCreate=this.onFieldModelCreateEmitter.event,this.onFormValuesChangeEmitter=new c.Q5,this.onFormValuesChange=this.onFormValuesChangeEmitter.event,this.onFormValuesInitEmitter=new c.Q5,this.onFormValuesInit=this.onFormValuesInitEmitter.event,this.onFormValuesUpdatedEmitter=new c.Q5,this.onFormValuesUpdated=this.onFormValuesUpdatedEmitter.event,this.onValidateEmitter=new c.Q5,this.onValidate=this.onValidateEmitter.event,this._state=new u.BP({...z}),this._initialized=!1}set fieldMap(e){this._fieldMap=e}get fieldMap(){return this._fieldMap}get context(){return this._options.context}get initialValues(){return this._options.initialValues}get values(){return(0,h.cloneDeep)(this.store.values)||(0,h.cloneDeep)(this.initialValues)}set values(e){let n=this.values;this.store.values=e,this.fireOnFormValuesChange({values:this.values,prevValues:n,name:""})}get validationTrigger(){return this._options.validateTrigger}get state(){return this._state.value}get reactiveState(){return this._state}get fields(){return Array.from(this.fieldMap.values())}updateState(e){}get initialized(){return this._initialized}fireOnFormValuesChange(e){this.onFormValuesChangeEmitter.fire(e),this.onFormValuesUpdatedEmitter.fire(e)}fireOnFormValuesInit(e){this.onFormValuesInitEmitter.fire(e),this.onFormValuesUpdatedEmitter.fire(e)}init(e){if(this._options=e,e.initialValues){let n=this.store.values;this.store.setInitialValues(e.initialValues),this.fireOnFormValuesInit({values:e.initialValues,prevValues:n,name:""})}this._initialized=!0}createField(e,n){let r=new E(e),i=r.toString();if(this.fieldMap.get(i))return this.fieldMap.get(i);let o=n?new $(r,this):new F(r,this);return this.fieldMap.set(i,o),o.onDispose(()=>{this.fieldMap.delete(i)}),this.onFieldModelCreateEmitter.fire(o),o}createFieldArray(e,n){return this.createField(e,!0)}disposeField(e){let n=this.fieldMap.get(e);n&&n.dispose()}deleteField(e){let n=this.fieldMap.get(e);n&&(n.clear(),n.dispose())}getField(e){return this.fieldMap.get(new E(e).toString())}getValueIn(e){return this.store.getIn(new E(e))}setValueIn(e,n){let r=this.values;this.store.setIn(new E(e),n),this.fireOnFormValuesChange({values:this.values,prevValues:r,name:e})}setInitValueIn(e,n){let r=new E(e);if(void 0===this.store.getIn(r)){let r=this.values;this.store.setIn(new E(e),n),this.fireOnFormValuesInit({values:this.values,prevValues:r,name:e})}}clearValueIn(e){this.setValueIn(e,void 0)}async validateIn(e){if(this._options.validate)return Promise.all(Object.keys(this._options.validate).filter(n=>s.isMatch(n,e)).map(async n=>(0,this._options.validate[n])({value:this.getValueIn(e),formValues:this.values,context:this.context,name:e})))}async validate(){if(!this._options.validate)return[];let e=Object.keys(this._options.validate).map(async e=>{let n=this._options.validate[e];return Promise.all(s.findMatchPathsWithEmptyValue(this.values,e).map(async e=>{var r;let i=A(await n({value:(0,h.get)(this.values,e),formValues:this.values,context:this.context,name:e}),e),o=this.getField(e),s=L(e,i),a=L(e,i);return o&&(o.state.errors=s,o.state.warnings=a,o.state.invalid=j(s),o.bubbleState()),this.state.errors=x(this.state.errors,s),this.state.warnings=x(this.state.warnings,a),this.state.invalid=!(!(r=this.state.errors)||Object.keys(r).every(e=>(0,h.isEmpty)(r[e]))),i}))});this.state.isValidating=!0;let n=await Promise.all(e);return this.state.isValidating=!1,this.onValidateEmitter.fire(this.state),(0,h.flatten)(n).filter(Boolean)}alignStateWithFieldMap(){let e=Array.from(this.fieldMap.keys());this.state.errors&&(this.state.errors=g(this.state.errors,e)),this.state.warnings&&(this.state.warnings=g(this.state.warnings,e)),this.fieldMap.forEach(n=>{n.state.errors&&(n.state.errors=g(n.state.errors,e)),n.state.warnings&&(n.state.warnings=g(n.state.warnings,e))})}dispose(){this.fieldMap.forEach(e=>e.dispose()),this.store.dispose(),this._initialized=!1}};function H(e){let{disableAutoInit:n=!1,...r}=e||{},i=new B;return n||i.init(r||{}),{form:N(i),control:{_formModel:i,getField:e=>{let n=i.getField(e);if(n)return n instanceof $?P(n):S(n)},init:()=>i.init(r||{})}}}function K(e){let{children:n,keepModelOnUnMount:r=!1,control:i,...o}=e,{_formModel:s}=(0,l.useMemo)(()=>i||H(o).control,[i]);(0,l.useEffect)(()=>()=>{r||s.dispose()},[]);let a=(0,l.useMemo)(()=>N(s),[s]);return l.createElement(M.Provider,{value:s},n?(0,h.isFunction)(n)?n({form:a}):l.Children.only(n):null)}function U(e){let n=(0,c.JA)(),r=T();if(!r)throw Error("[Form] error in useWatch, formModel not found");let i=r.getValueIn(e);return(0,l.useEffect)(()=>{let i=r.onFormValuesUpdated(({name:r})=>{r===e&&n()});return()=>i.dispose()},[e,r]),i}function W({name:e,defaultValue:n,deps:r,render:i,children:o}){let s=T(),a=l.useMemo(()=>s.getField(e)||s.createFieldArray(e),[e]),d=l.useMemo(()=>P(a),[a]),p=(0,c.JA)(),f=(0,u.nt)(a.reactiveState),g=(0,u.nt)(s.reactiveState),y=D(f),m=l.useMemo(()=>O(g),[g]);return l.useEffect(()=>{a.renderCount=a.renderCount+1,s.getValueIn(e),void 0!==n&&(s.setInitValueIn(e,n),p());let i=new c.K4;return i.push(a.onValueChange(()=>{p()})),r&&r.forEach(e=>{let n=s.getField(e)?.onValueChange(()=>{p()});n&&i.push(n)}),()=>{i.dispose(),a.renderCount>1?a.renderCount=a.renderCount-1:s.getField(a.name)===a&&a.dispose()}},[a]),l.createElement(I.Provider,{value:a},i&&(0,h.isFunction)(i)?i({field:d,fieldState:y,formState:m}):(0,h.isFunction)(o)?o({field:d,fieldState:y,formState:m}):l.createElement(l.Fragment,null,"Invalid Array render"))}},4608:function(e,n,r){"use strict";r.d(n,{AU:()=>_,DL:()=>m,NT:()=>j,se:()=>E,uf:()=>b});var i,o=r(9378),s=r(4210),a=r(8336),l=r(1097),h=r(8176),c=r(2100),u=r(8319),d=r(4194),p=r(3254),f=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?g(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&f(n,r,s),s},m=((i=m||{}).In="in",i.Out="out",i),b=class{constructor(){this.emitter=new a.Q5,this.toDispose=new a.K4,this.on=this.emitter.event}init(){this.initState(),this.toDispose.push(this.emitter)}ready(){this.toDispose.push(this.listenDragToContainer())}dispose(){this.initState(),this.toDispose.dispose()}async moveOutContainer(e){let{node:n}=e,r=n.parent,i=r?.parent,o=this.document.toNodeJSON(n);if(!r||!i||!this.isContainer(r)||!o.meta?.position)return;this.operationService.moveNode(n,{parent:i});let s=r.getData(u.VO);this.operationService.updateNodePosition(n,{x:s.position.x+o.meta.position.x,y:s.position.y+o.meta.position.y}),s.fireChange(),await this.nextFrame(),s.fireChange(),this.emitter.fire({type:"out",node:n,sourceContainer:r,targetContainer:i})}canMoveOutContainer(e){let n=e.parent,r=n?.parent;return!!n&&!!r&&!!this.isContainer(n)&&!!this.dragService.canDropToNode({dragNodeType:e.flowNodeType,dropNode:r}).allowDrop}async clearInvalidLines(e){let{dragNode:n,sourceParent:r}=e;n&&n.parent!==r&&n.parent?.flowNodeType!==c.Sy.GROUP&&r?.flowNodeType!==c.Sy.GROUP&&await this.removeNodeLines(n)}initState(){this.state={isDraggingNode:!1,isSkipEvent:!1,transforms:void 0,dragNode:void 0,dropNode:void 0,sourceParent:void 0}}listenDragToContainer(){let e=e=>this.draggingNode(e),n=(0,o.throttle)(e,200);return this.dragService.onNodesDrag(async r=>{if(1===this.selectService.selectedNodes.length){if("onDragStart"===r.type){if(this.state.isSkipEvent){this.state.isSkipEvent=!1;return}this.historyService.startTransaction(),this.state.isDraggingNode=!0,this.state.transforms=this.getContainerTransforms(),this.state.dragNode=this.selectService.selectedNodes[0],this.state.dropNode=void 0,this.state.sourceParent=this.state.dragNode?.parent,await this.dragOutContainer(r)}if("onDragging"===r.type&&n(r),"onDragEnd"===r.type){if(this.state.isSkipEvent)return;n.cancel(),e(r),await this.dropNodeToContainer(),await this.clearInvalidLines({dragNode:this.state.dragNode,sourceParent:this.state.sourceParent}),this.setDropNode(void 0),this.initState(),this.historyService.endTransaction()}}})}async dragOutContainer(e){let{dragNode:n}=this.state;(e.triggerEvent.metaKey||e.triggerEvent.ctrlKey)&&n&&this.canMoveOutContainer(n)&&(this.moveOutContainer({node:n}),this.state.isSkipEvent=!0,e.dragger.stop(e.dragEvent.clientX,e.dragEvent.clientY),await this.nextFrame(),this.dragService.startDragSelectedNodes(e.triggerEvent))}async removeNodeLines(e){this.linesManager.getAllLines().forEach(n=>{(n.from.id===e.id||n.to?.id===e.id)&&n.dispose()}),await this.nextFrame()}getCollisionTransform(e){let{targetRect:n,targetPoint:r,transforms:i,withPadding:o=!1}=e;return i.find(e=>{let{bounds:i,entity:s}=e,l=o?this.document.layout.getPadding(s):{left:0,right:0},h=new a.Ae(i.x+l.left+l.right,i.y,i.width,i.height);return n?this.isRectIntersects(n,h):!!r&&this.isPointInRect(r,h)})}setDropNode(e){if(this.state.dropNode===e)return;if(this.state.dropNode){let e=this.state.dropNode.getData(c.Lz),n=e.node?.children?.[0];n&&n.classList.remove("selected")}if(this.state.dropNode=e,!e)return;let n=e.getData(c.Lz),r=n.node?.children?.[0];r&&r.classList.add("selected")}getContainerTransforms(){return this.document.getAllNodes().filter(e=>e.originParent?e.getNodeMeta().selectable&&e.originParent.getNodeMeta().selectable:e.getNodeMeta().selectable).filter(e=>this.isContainer(e)).sort((e,n)=>{let r=e.renderData.stackIndex;return n.renderData.stackIndex-r}).map(e=>e.transform)}async dropNodeToContainer(){let{dropNode:e,dragNode:n,isDraggingNode:r}=this.state;if(r&&n&&e)return await this.moveIntoContainer({node:n,containerNode:e})}draggingNode(e){let{dragNode:n,isDraggingNode:r,transforms:i=[]}=this.state;if(!r||!n||!i?.length)return this.setDropNode(void 0);let o=this.playgroundConfig.getPosFromMouseEvent(e.dragEvent),s=i.filter(e=>e.entity.id!==n.id),a=this.getCollisionTransform({targetPoint:o,transforms:s}),l=a?.entity;return this.canDropToContainer({dragNode:n,dropNode:l})?this.setDropNode(l):this.setDropNode(void 0)}canDropToContainer(e){let{dragNode:n,dropNode:r}=e,i=r?.getNodeMeta().isContainer;return!(!r||!i||this.isParent(n,r))&&(n.flowNodeType!==c.Sy.GROUP||r.flowNodeType===c.Sy.GROUP)&&!!this.dragService.canDropToNode({dragNodeType:n.flowNodeType,dropNode:r}).allowDrop}isParent(e,n){let r=e.parent;for(;r;){if(r.id===n.id)return!0;r=r.parent}return!1}async moveIntoContainer(e){let{node:n,containerNode:r}=e,i=n.parent;this.operationService.moveNode(n,{parent:r}),this.operationService.updateNodePosition(n,this.adjustSubNodePosition(n,r)),await this.nextFrame(),this.emitter.fire({type:"in",node:n,sourceContainer:i,targetContainer:r})}adjustSubNodePosition(e,n){if(n.flowNodeType===c.Sy.ROOT)return e.transform.position;let r=e.transform.transform.worldTransform,i=n.transform.transform.worldTransform,o={x:r.tx,y:r.ty},s=!n.children||0===n.children.length,a=this.document.layout.getPadding(n);return s?{x:0,y:a.top}:{x:o.x-i.tx,y:o.y-i.ty}}isContainer(e){return e?.getNodeMeta().isContainer??!1}isPointInRect(e,n){return e.x>=n.left&&e.x<=n.right&&e.y>=n.top&&e.y<=n.bottom}isRectIntersects(e,n){let r=e.right>n.left&&e.left<n.right,i=e.bottom>n.top&&e.top<n.bottom;return r&&i}async nextFrame(){await new Promise(e=>requestAnimationFrame(e))}};y([(0,s.f3)(l.iw)],b.prototype,"dragService",2),y([(0,s.f3)(l.L4)],b.prototype,"document",2),y([(0,s.f3)(u.ER)],b.prototype,"playgroundConfig",2),y([(0,s.f3)(l.xV)],b.prototype,"operationService",2),y([(0,s.f3)(l.dm)],b.prototype,"linesManager",2),y([(0,s.f3)(h.qp)],b.prototype,"historyService",2),y([(0,s.f3)(l.oJ)],b.prototype,"selectService",2),b=y([(0,s.b2)()],b);var _=(0,u.M1)({onBind:({bind:e})=>{e(b).toSelf().inSingletonScope()},onInit(e,n){e.get(b).init()},onReady(e,n){!0!==n.disableNodeIntoContainer&&e.get(b).ready()},onDispose(e){e.get(b).dispose()}}),E=()=>{let e=(0,l.PF)(),{size:n={width:300,height:200},isContainer:r}=e.getNodeMeta(),i=e.getData(c.eG),[o,s]=(0,d.useState)(n.width),[a,h]=(0,d.useState)(n.height),u=()=>{e.getData(l.QW).updateDynamicPorts()},p=()=>{if(0===e.blocks.length){s(n.width),h(n.height);return}s(i.bounds.width),h(i.bounds.height)};if((0,d.useEffect)(()=>{let e=i.onDataChange(()=>{p(),u()});return()=>e.dispose()},[i,o,a]),(0,d.useEffect)(()=>{p()},[]),r)return{width:o,height:a}},w=e=>{let n=(0,l.PF)();(0,d.useLayoutEffect)(()=>{e&&(n.renderData.node.style.width=e.width+"px",n.renderData.node.style.height=e.height+"px")},[e?.width,e?.height])},x=p.ZP.div`
  width: 100%;
  height: 100%;
  inset: 56px 18px 18px;
  background-color: #f2f3f5;
`,C=()=>{let e=(0,l.PF)();return d.createElement(x,{className:"sub-canvas-background","data-flow-editor-selectable":"true"},d.createElement("svg",{width:"100%",height:"100%"},d.createElement("pattern",{id:"sub-canvas-dot-pattern",width:"20",height:"20",patternUnits:"userSpaceOnUse"},d.createElement("circle",{cx:"1",cy:"1",r:"1",stroke:"#eceeef",fillOpacity:"0.5"})),d.createElement("rect",{width:"100%",height:"100%",fill:"url(#sub-canvas-dot-pattern)","data-node-panel-container":e.id})))},S=p.ZP.div`
  pointer-events: none;

  position: relative;

  display: flex;
  align-items: center;

  width: 100%;
  height: 100%;

  background-color: transparent;
  border: 1px solid var(--coz-stroke-plus, rgba(6, 7, 9, 15%));
  border-color: var(--coz-bg-plus, rgb(249, 249, 249));
  border-style: solid;
  border-width: 8px;
  border-radius: 8px;

  &::before {
    content: '';

    position: absolute;
    z-index: 0;
    inset: -4px;

    background-color: transparent;
    border-color: var(--coz-bg-plus, rgb(249, 249, 249));
    border-style: solid;
    border-width: 4px;
    border-radius: 8px;
  }
`,D=({style:e,children:n})=>d.createElement(S,{className:"sub-canvas-border",style:{...e}},n),N=p.ZP.div`
  width: 100%;
  height: 100%;
`,O="workflow-move-into-sub-canvas-tip-visible",M="false",I=class e{constructor(){this.closed=!1}static get instance(){return this._instance||(this._instance=new e),this._instance}isClosed(){return this.isCloseForever()||this.closed}close(){this.closed=!0}isCloseForever(){return localStorage.getItem(O)===M}closeForever(){localStorage.setItem(O,M)}},T=()=>{let e=(0,l.PF)(),[n,r]=(0,d.useState)(!1),i=I.instance,o=(0,u.G2)(b),s=(0,d.useCallback)(()=>{i.isClosed()||r(!0)},[i]),a=(0,d.useCallback)(()=>{i.close(),r(!1)},[i]),h=(0,d.useCallback)(()=>{i.closeForever(),a()},[a,i]);return(0,d.useEffect)(()=>{let n=o.on(n=>{"in"===n.type&&n.targetContainer===e&&s()}),i=o.on(n=>{"out"===n.type&&(n.sourceContainer!==e||e.blocks.length||r(!1))});return()=>{n.dispose(),i.dispose()}},[o,e,s,a,n]),{visible:n,close:a,closeForever:h}},k=p.ZP.div`
  position: absolute;
  top: 0;

  width: 100%;
  height: 28px;

  .container {
    height: 100%;
    background-color: #e4e6f5;
    border-radius: 4px 4px 0 0;

    .content {
      overflow: hidden;
      display: inline-flex;
      align-items: center;
      justify-content: center;

      width: 100%;
      height: 100%;

      .text {
        font-size: 14px;
        font-weight: 400;
        font-style: normal;
        line-height: 20px;
        color: rgba(15, 21, 40, 82%);
        text-overflow: ellipsis;
      }

      .space {
        width: 128px;
      }
    }

    .actions {
      position: absolute;
      top: 0;
      right: 0;

      display: flex;
      gap: 8px;
      align-items: center;

      height: 28px;
      padding: 0 16px;

      .close-forever {
        cursor: pointer;

        padding: 0 3px;

        font-size: 12px;
        font-weight: 400;
        font-style: normal;
        line-height: 12px;
        color: rgba(32, 41, 69, 62%);
      }

      .close {
        display: flex;
        cursor: pointer;
        height: 100%;
        align-items: center;
      }
    }
  }
`,P=/(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(navigator.userAgent),A=()=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},d.createElement("path",{fill:"#060709",fillOpacity:"0.5",d:"M12.13 12.128a.5.5 0 0 0 .001-.706L8.71 8l3.422-3.423a.5.5 0 0 0-.001-.705.5.5 0 0 0-.706-.002L8.002 7.293 4.579 3.87a.5.5 0 0 0-.705.002.5.5 0 0 0-.002.705L7.295 8l-3.423 3.422a.5.5 0 0 0 .002.706c.195.195.51.197.705.001l3.423-3.422 3.422 3.422c.196.196.51.194.706-.001"})),L=()=>{let{visible:e,close:n,closeForever:r}=T();return e?d.createElement(k,{className:"sub-canvas-tips"},d.createElement("div",{className:"container"},d.createElement("div",{className:"content"},d.createElement("p",{className:"text"},`Hold ${P?"Cmd ⌘":"Ctrl"} to drag node out`),d.createElement("div",{className:"space",style:{width:0}})),d.createElement("div",{className:"actions"},d.createElement("p",{className:"close-forever",onClick:r},"Never Remind"),d.createElement("div",{className:"close",onClick:n},d.createElement(A,null))))):null},j=({className:e,style:n})=>{let r=(0,l.PF)(),i=E(),o=i?.height??0,{padding:s}=r.transform;return w(i),d.createElement(N,{className:`sub-canvas-render ${e??""}`,style:{height:o-s.top,...n},"data-flow-editor-selectable":"true",onDragStart:e=>{e.stopPropagation()}},d.createElement(D,null,d.createElement(C,null),d.createElement(L,null)))}},5450:function(e,n,r){"use strict";r.d(n,{I5:()=>w,IP:()=>D});var i,o,s=r(4969),a=r(4706),l=r(1097),h=r(2100),c=r(8319),u=r(4210),d=r(8336),p=r(8176),f=r(4608),g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,m=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?y(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&g(n,r,s),s};let b=e=>e?.parent?.flowNodeType===h.Sy.GROUP,_=e=>e.flowNodeType===h.Sy.GROUP;(o||(o={})).validate=e=>{if(!e||!Array.isArray(e)||0===e.length||e.some(e=>_(e))||e.some(e=>e&&b(e)))return!1;let n=e[0].parent;return!!e.every(e=>e.parent===n)};var E=class extends h.QU{constructor(){super(...arguments),this.toDispose=new d.K4}ready(){this.toDispose.push(this.listenContainer())}dispose(){this.toDispose.dispose()}createGroup(e){if(!o.validate(e))return;let n=e[0].parent??this.document.root,r=`group_${(0,l.x0)(5)}`,i={type:h.Sy.GROUP,id:r,meta:{position:{x:0,y:0}},data:{}};this.historyService.startTransaction(),this.document.createWorkflowNodeByType(h.Sy.GROUP,{x:0,y:0},i,n.id),e.forEach(e=>{this.freeOperationService.moveNode(e,{parent:r})}),this.historyService.endTransaction()}ungroup(e){let n=e.blocks.slice();if(!e.parent)return;let r=e.transform.position;this.historyService.startTransaction(),n.forEach(n=>{this.freeOperationService.moveNode(n,{parent:e.parent?.id})}),e.dispose(),n.forEach(e=>{let n=e.getData(c.VO),i={x:n.position.x+r.x,y:n.position.y+r.y};this.freeOperationService.updateNodePosition(e,i)}),this.historyService.endTransaction()}listenContainer(){return this.nodeIntoContainerService.on(e=>{e.type===f.DL.Out&&e.sourceContainer?.flowNodeType===h.Sy.GROUP&&e.sourceContainer?.blocks.length===0&&e.sourceContainer.dispose()})}};m([(0,u.f3)(l.L4)],E.prototype,"document",2),m([(0,u.f3)(l.xV)],E.prototype,"freeOperationService",2),m([(0,u.f3)(p.qp)],E.prototype,"historyService",2),m([(0,u.f3)(f.uf)],E.prototype,"nodeIntoContainerService",2),E=m([(0,u.b2)()],E);var w=((i=w||{}).Group="group",i.Ungroup="ungroup",i),x=class{constructor(e){this.commandId="group",this.commandDetail={label:"Group"},this.shortcuts=["meta g","ctrl g"],this.selectService=e.get(l.oJ),this.groupService=e.get(E),this.execute=this.execute.bind(this)}async execute(){this.groupService.createGroup(this.selectService.selectedNodes),this.selectService.clear()}},C=class{constructor(e){this.commandId="ungroup",this.commandDetail={label:"Ungroup"},this.shortcuts=["meta shift g","ctrl shift g"],this.selectService=e.get(l.oJ),this.groupService=e.get(E),this.execute=this.execute.bind(this)}async execute(e){let n=e||this.selectService.activatedNode;n&&n.flowNodeType===h.Sy.GROUP&&(this.groupService.ungroup(n),this.selectService.clear())}},S={type:h.Sy.GROUP,meta:{renderKey:h.Sy.GROUP,defaultPorts:[],isContainer:!0,disableSideBar:!0,size:{width:560,height:400},padding:()=>({top:80,bottom:40,left:65,right:65}),selectable:(e,n)=>!n||!e.getData(h.eG).bounds.contains(n.x,n.y),expandable:!1},formMeta:{render:()=>React.createElement(React.Fragment,null)},onCreate(){}},D=(0,c.M1)({onBind({bind:e,rebind:n}){e(E).toSelf().inSingletonScope(),n(h.QU).toService(E)},onInit(e,{groupNodeRender:n,disableGroupShortcuts:r=!1,disableGroupNodeRegister:i=!1}){n&&e.get(a.Rf).registerReactComponent(h.Sy.GROUP,n),r||e.get(s.Kg).addHandlers(new x(e),new C(e)),i||e.get(l.L4).registerFlowNodes(S)},onReady(e){e.get(E).ready()},onDispose(e){e.get(E).dispose()}})},8176:function(e,n,r){"use strict";r.d(n,{Nj:()=>m,ou:()=>z,qp:()=>s.qp});var i,o=r(8319),s=r(533),a=r(9378),l=r(4210),h=r(8336),c=r(431),u=r(1097),d=r(2100);r(4194);var p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?f(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&p(n,r,s),s},y=class{constructor(){this._entityDataValues=new Map,this._toDispose=new h.K4}addEntityData(e){this._entityDataValues.set(e,(0,a.cloneDeep)(e.toJSON())),this._toDispose.push(e.onWillChange(n=>{let r=n.toJSON(),i=this._entityDataValues.get(e);(0,a.isEqual)(r,i)||this._entityDataValues.set(e,(0,a.cloneDeep)(r))}))}getValue(e){return this._entityDataValues.get(e)}setValue(e,n){return this._entityDataValues.set(e,n)}dispose(){this._entityDataValues.clear(),this._toDispose.dispose()}};y=g([(0,l.b2)()],y);var m=((i=m||{}).addLine="addLine",i.deleteLine="deleteLine",i.moveNode="moveNode",i.addNode="addNode",i.deleteNode="deleteNode",i.changeNodeData="changeNodeData",i.resetLayout="resetLayout",i.dragNodes="dragNodes",i.moveChildNodes="moveChildNodes",i),b=class{handle(e){"onDragEnd"===e.type&&this._dragNode(e)}_dragNode(e){this._historyService.pushOperation({type:"dragNodes",value:{ids:e.nodes.map(e=>e.id),value:e.nodes.map(e=>{let{x:n,y:r}=e.getData(o.VO).position;return{x:n,y:r}}),oldValue:e.startPositions}},{noApply:!0})}};g([(0,l.f3)(s.qp)],b.prototype,"_historyService",2),b=g([(0,l.b2)()],b);var _=class{constructor(){this.enable=!1,this.nodeToJSON=e=>e.toJSON(),this.getNodeLabelById=e=>e,this.getNodeLabel=e=>e.id,this.getBlockLabel=e=>e.id,this.getNodeURI=e=>`node:${e}`,this.getLineURI=e=>`line:${e}`}init(e,n){this.enable=!!n?.enable,n.nodeToJSON&&(this.nodeToJSON=n.nodeToJSON(e)),n.getNodeLabelById&&(this.getNodeLabelById=n.getNodeLabelById(e)),n.getNodeLabel&&(this.getNodeLabel=n.getNodeLabel(e)),n.getBlockLabel&&(this.getBlockLabel=n.getBlockLabel(e)),n.getNodeURI&&(this.getNodeURI=n.getNodeURI(e)),n.getLineURI&&(this.getLineURI=n.getLineURI(e))}};_=g([(0,l.b2)()],_);var E=class{handle(e){let{path:n,value:r,initialized:i,node:o}=e,s=o.getData(c.Ps),l=this._entityManager.getValue(s),h=n.split("/").filter(Boolean).join("."),u=h?(0,a.get)(l,h):l;if(!(0,a.isEqual)(r,u)){if(i){let e=n,i=(0,a.cloneDeep)(r),s=u;if("/"!==n){let o=(0,a.cloneDeep)(l);(0,a.set)(o,h,r),e=n.split("/").filter(Boolean)[0],i=(0,a.get)(o,e),s=(0,a.get)(l,e)}this._historyService.pushOperation({type:"changeNodeData",value:{id:o.id,path:e,value:i,oldValue:s},uri:this._config.getNodeURI(o.id)},{noApply:!0})}h?(0,a.set)(l,h,(0,a.cloneDeep)(r)):this._entityManager.setValue(s,(0,a.cloneDeep)(r))}}};g([(0,l.f3)(s.qp)],E.prototype,"_historyService",2),g([(0,l.f3)(u.L4)],E.prototype,"document",2),g([(0,l.f3)(y)],E.prototype,"_entityManager",2),g([(0,l.f3)(_)],E.prototype,"_config",2),E=g([(0,l.b2)()],E);var w={type:u.fT.DELETE_NODE,toOperation:(e,n)=>{let r=n.get(_),i=n.get(u.L4),o=e.entity;return{type:"deleteNode",value:{node:i.toNodeJSON(o),parentID:o.parent?.id},uri:r.getNodeURI(o.id)}}},x={type:u.fT.DELETE_LINE,toOperation:(e,n)=>{let r=n.get(_),i=e.entity;return{type:"deleteLine",value:{from:i.info.from,to:i.info.to||"",fromPort:i.info.fromPort||"",toPort:i.info.toPort||"",id:i.id},uri:r.getNodeURI(i.id)}}},C={type:u.fT.ADD_NODE,toOperation:(e,n)=>{let r=n.get(_),i=n.get(u.L4),o=e.entity,s=o.parent?.id;return{type:"addNode",value:{node:i.toNodeJSON(o),parentID:s},uri:r.getNodeURI(o.id)}}},S=[{type:u.fT.ADD_LINE,toOperation:(e,n)=>{let r=n.get(_),i=e.entity;return{type:"addLine",value:{from:i.info.from,to:i.info.to||"",fromPort:i.info.fromPort||"",toPort:i.info.toPort||"",id:i.id},uri:r.getLineURI(i.id)}}},x,C,w],D=class{handle(e,n){if(!this._historyService.undoRedoService.canPush())return;let r=S.find(n=>n.type===e.type);if(!r)return;let i=r.toOperation(e,n);i&&this._historyService.pushOperation(i,{noApply:!0})}};g([(0,l.f3)(s.qp)],D.prototype,"_historyService",2),D=g([(0,l.b2)()],D);var N={shouldMerge:(e,n,r)=>!!n&&Date.now()-r.getTimestamp()<500},O={...N,type:"resetLayout",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:async(e,n)=>{let r=n.get(u.ZO);await r.layoutToPositions(e.value.ids,e.value.value)},shouldMerge:()=>!1},M={...N,type:d.C8.moveChildNodes,inverse:e=>({...e,value:{...e.value,fromIndex:e.value.toIndex,toIndex:e.value.fromIndex,fromParentId:e.value.toParentId,toParentId:e.value.fromParentId}}),apply:(e,n)=>{let r=n.get(u.L4);r.moveChildNodes(e.value);let i=r.getNode(e.value.fromParentId);requestAnimationFrame(()=>{i&&i.flowNodeType!==d.Sy.ROOT&&i.getData(o.VO).fireChange()})}},I={...N,type:"dragNodes",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:(e,n)=>{e.value.ids.forEach((r,i)=>{let s=n.get(u.L4),a=s.getNode(r);if(!a)return;let l=a.getData(o.VO),h=e.value.value[i];l.update({position:{x:h.x,y:h.y}}),s.layout.updateAffectedTransform(a)})}},T={...N,type:"deleteNode",inverse:e=>({...e,type:"addNode"}),apply:(e,n)=>{let r=n.get(u.L4).getNode(e.value.node.id);r&&r.dispose()},getLabel:(e,n)=>{let r=n.get(_);return`Delete Node ${r.getNodeLabel(e.value.node)}`},getDescription:(e,n)=>{let r=n.get(_),i=`Delete Node ${r.getNodeLabel(e.value.node)}`;return e.value.node.meta?.position&&(i+=` at ${e.value.node.meta.position.x},${e.value.node.meta.position.y}`),i}},k={...N,type:"deleteLine",inverse:e=>({...e,type:"addLine"}),apply:(e,n)=>{n.get(u.L4).removeNode(e.value.id)},getLabel:(e,n)=>"Delete Line",getDescription:(e,n)=>{let r=n.get(_),{value:i}=e;if(!i.from||!i.to)return"Delete Line";let o=r.getNodeLabelById(i.from),s=r.getNodeLabelById(i.to);return`Delete Line from ${o} to ${s}`}},P={...N,type:"changeNodeData",inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:(e,n)=>{let r=n.get(u.L4).getNode(e.value.id);if(!r)return;let i=r.getData(c.Ps);if(!i)return;let{path:o}=e.value;o.endsWith("/")&&"/"!==o&&(o=o.slice(0,-1)),o.startsWith("/")||(o=`/${o}`);let s=i.formModel.getFormItemByPath(o);s&&(s.value=e.value.value)},shouldMerge:(e,n,r)=>!!n&&!!(Date.now()-r.getTimestamp()<500)&&(e.type!==n.type||e.value.id!==n.value.id||e.value?.path!==n.value?.path||{type:e.type,value:{...e.value,value:e.value.value,oldValue:n.value.oldValue}})},A={...N,type:"addNode",inverse:e=>({...e,type:"deleteNode"}),apply:async(e,n)=>{let r=n.get(u.L4);await r.createWorkflowNode((0,a.cloneDeep)(e.value.node),!1,e.value.parentID)},getLabel:(e,n)=>{let r=n.get(_);return`Create Node ${r.getNodeLabel(e.value.node)}`},getDescription:(e,n)=>{let r=n.get(_),i=`Create Node ${r.getNodeLabel(e.value.node)}`;return e.value.node.meta?.position&&(i+=` at ${e.value.node.meta.position.x},${e.value.node.meta.position.y}`),i}},L=[{...N,type:"addLine",inverse:e=>({...e,type:"deleteLine"}),apply:(e,n)=>{n.get(u.dm).createLine({...e.value,key:e.value.id})},getLabel:(e,n)=>"Create Line",getDescription:(e,n)=>{let r=n.get(_),{value:i}=e;if(!i.from||!i.to)return"Create Line";let o=r.getNodeLabelById(i.from),s=r.getNodeLabelById(i.to);return`Create Line from ${o} to ${s}`}},k,A,T,P,O,I,M],j=class{registerOperationMeta(e){L.forEach(n=>{e.registerOperationMeta(n)})}};j=g([(0,l.b2)()],j);var R=class{constructor(){this._toDispose=new h.K4}onInit(e,n){let r=e.get(u.L4),i=e.get(s.qp),l=e.get(u.iw),p=e.get(u.ZO);n?.limit&&i.limit(n.limit),i.context.source=e,this._toDispose.pushAll([l.onNodesDrag(async e=>{"onDragEnd"===e.type&&this._dragNodesHandler.handle(e)}),r.onNodeCreate(({node:e,data:n})=>{let r=e.getData(o.WV);r&&this._entityManager.addEntityData(r)}),this._formManager?this._formManager.onFormModelWillInit(({model:e,data:n})=>{let r=e.flowNodeEntity,i=r.getData(c.Ps);i&&(this._entityManager.setValue(i,(0,a.cloneDeep)(n)),this._toDispose.push(i.onDetailChange(e=>{this._changeNodeDataHandler.handle({...e,node:r})})))}):h.JT.NULL,r.onContentChange(n=>{this._changeContentHandler.handle(n,e)}),r.onReload(e=>{i.clear()}),p.onResetLayout(e=>{i.pushOperation({type:"resetLayout",value:{ids:e.nodeIds,value:e.positionMap,oldValue:e.oldPositionMap}},{noApply:!0})}),this._operationService.onNodeMove(({node:e,fromParent:n,fromIndex:r,toParent:o,toIndex:s})=>{i.pushOperation({type:d.C8.moveChildNodes,value:{fromParentId:n.id,fromIndex:r,nodeIds:[e.id],toParentId:o.id,toIndex:s}},{noApply:!0})}),this._operationService.onNodePostionUpdate(e=>{let n={ids:[e.node.id],value:[e.newPosition],oldValue:[e.oldPosition]};i.pushOperation({type:"dragNodes",value:n},{noApply:!0})})])}dispose(){this._entityManager.dispose(),this._toDispose.dispose()}};g([(0,l.f3)(b)],R.prototype,"_dragNodesHandler",2),g([(0,l.f3)(E)],R.prototype,"_changeNodeDataHandler",2),g([(0,l.f3)(D)],R.prototype,"_changeContentHandler",2),g([(0,l.f3)(y)],R.prototype,"_entityManager",2),g([(0,l.f3)(c.yf),(0,l.jt)()],R.prototype,"_formManager",2),g([(0,l.f3)(u.xV)],R.prototype,"_operationService",2),R=g([(0,l.b2)()],R);var z=(0,o.M1)({onBind:({bind:e})=>{(0,o.KV)(e,j,[s.FU]),e(_).toSelf().inSingletonScope(),e(R).toSelf().inSingletonScope(),e(y).toSelf().inSingletonScope(),e(b).toSelf().inSingletonScope(),e(E).toSelf().inSingletonScope(),e(D).toSelf().inSingletonScope()},onInit(e,n){e.get(_).init(e,n),n.enable&&e.get(R).onInit(e,n)},onDispose(e){e.get(y).dispose()},containerModules:[s.Xn]})},1097:function(e,n,r){"use strict";r.d(n,{Qu:()=>e5,e2:()=>ts,fY:()=>th,_s:()=>tM,gw:()=>S.gw,KU:()=>b.KU,G2:()=>b.G2,em:()=>ti,FD:()=>e7,SP:()=>p,fT:()=>d,gO:()=>tw,PV:()=>tC,oJ:()=>ta,uB:()=>e3,Z1:()=>tn,dm:()=>tu,ps:()=>tr,xV:()=>f,YC:()=>tD,jg:()=>tc,iw:()=>tv,v6:()=>tN,XH:()=>tl,QW:()=>te,PF:()=>tS,Dc:()=>b.Dc,CT:()=>e9,x0:()=>e4,ZO:()=>t_,L4:()=>ty});var i,o,s,a,l,h,c,u=Symbol(""),d=((i=d||{}).ADD_NODE="ADD_NODE",i.DELETE_NODE="DELETE_NODE",i.MOVE_NODE="MOVE_NODE",i.NODE_DATA_CHANGE="NODE_DATA_CHANGE",i.ADD_LINE="ADD_LINE",i.DELETE_LINE="DELETE_LINE",i.META_CHANGE="META_CHANGE",i),p=((o=p||{})[o.BEZIER=0]="BEZIER",o[o.LINE_CHART=1]="LINE_CHART",o),f=Symbol("WorkflowOperationBaseService"),g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,m=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?y(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&g(n,r,s),s},b=r(8319),_=r(4194),E=r(2082),w=r(3569),x=r(2100),C=r(4210),S=r(8336),D=r(6261),N=r(6793),O=r(8133),M=r(260);function I(e){var n=this.__data__=new N.Z(e);this.size=n.size}function T(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new M.Z;++n<r;)this.add(e[n])}I.prototype.clear=function(){this.__data__=new N.Z,this.size=0},I.prototype.delete=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r},I.prototype.get=function(e){return this.__data__.get(e)},I.prototype.has=function(e){return this.__data__.has(e)},I.prototype.set=function(e,n){var r=this.__data__;if(r instanceof N.Z){var i=r.__data__;if(!O.Z||i.length<199)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new M.Z(i)}return r.set(e,n),this.size=r.size,this},T.prototype.add=T.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},T.prototype.has=function(e){return this.__data__.has(e)};let k=function(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1},P=function(e,n,r,i,o,s){var a=1&r,l=e.length,h=n.length;if(l!=h&&!(a&&h>l))return!1;var c=s.get(e),u=s.get(n);if(c&&u)return c==n&&u==e;var d=-1,p=!0,f=2&r?new T:void 0;for(s.set(e,n),s.set(n,e);++d<l;){var g=e[d],y=n[d];if(i)var m=a?i(y,g,d,n,e,s):i(g,y,d,e,n,s);if(void 0!==m){if(m)continue;p=!1;break}if(f){if(!k(n,function(e,n){if(!f.has(n)&&(g===e||o(g,e,r,i,s)))return f.push(n)})){p=!1;break}}else if(!(g===y||o(g,y,r,i,s))){p=!1;break}}return s.delete(e),s.delete(n),p};var A=r(6894),L=r(5676),j=L.Z.Uint8Array,R=r(915);let z=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,i){r[++n]=[i,e]}),r},V=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e){r[++n]=e}),r};var F=A.Z?A.Z.prototype:void 0,$=F?F.valueOf:void 0;let B=function(e,n,r,i,o,s,a){switch(r){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)break;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":if(e.byteLength!=n.byteLength||!s(new j(e),new j(n)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,R.Z)(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var l=z;case"[object Set]":var h=1&i;if(l||(l=V),e.size!=n.size&&!h)break;var c=a.get(e);if(c)return c==n;i|=2,a.set(e,n);var u=P(l(e),l(n),i,o,s,a);return a.delete(e),u;case"[object Symbol]":if($)return $.call(e)==$.call(n)}return!1},H=function(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e};var K=r(521);let U=function(e,n,r){var i=n(e);return(0,K.Z)(e)?i:H(i,r(e))},W=function(e,n){for(var r=-1,i=null==e?0:e.length,o=0,s=[];++r<i;){var a=e[r];n(a,r,e)&&(s[o++]=a)}return s};var G=Object.prototype.propertyIsEnumerable,Y=Object.getOwnPropertySymbols,Z=Y?function(e){return null==e?[]:W(Y(e=Object(e)),function(n){return G.call(e,n)})}:function(){return[]};let X=function(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i};var Q=r(9520),q=r(4388);let J=function(e){return(0,q.Z)(e)&&"[object Arguments]"==(0,Q.Z)(e)};var ee=Object.prototype,et=ee.hasOwnProperty,en=ee.propertyIsEnumerable,er=J(function(){return arguments}())?J:function(e){return(0,q.Z)(e)&&et.call(e,"callee")&&!en.call(e,"callee")},ei="object"==typeof exports&&exports&&!exports.nodeType&&exports,eo=ei&&"object"==typeof module&&module&&!module.nodeType&&module,es=eo&&eo.exports===ei?L.Z.Buffer:void 0;let ea=(es?es.isBuffer:void 0)||function(){return!1};var el=/^(?:0|[1-9]\d*)$/;let eh=function(e,n){var r=typeof e;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&el.test(e))&&e>-1&&e%1==0&&e<n},ec=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff};var eu={};eu["[object Float32Array]"]=eu["[object Float64Array]"]=eu["[object Int8Array]"]=eu["[object Int16Array]"]=eu["[object Int32Array]"]=eu["[object Uint8Array]"]=eu["[object Uint8ClampedArray]"]=eu["[object Uint16Array]"]=eu["[object Uint32Array]"]=!0,eu["[object Arguments]"]=eu["[object Array]"]=eu["[object ArrayBuffer]"]=eu["[object Boolean]"]=eu["[object DataView]"]=eu["[object Date]"]=eu["[object Error]"]=eu["[object Function]"]=eu["[object Map]"]=eu["[object Number]"]=eu["[object Object]"]=eu["[object RegExp]"]=eu["[object Set]"]=eu["[object String]"]=eu["[object WeakMap]"]=!1;var ed=r(2268),ep="object"==typeof exports&&exports&&!exports.nodeType&&exports,ef=ep&&"object"==typeof module&&module&&!module.nodeType&&module,eg=ef&&ef.exports===ep&&ed.Z.process,ey=function(){try{var e=ef&&ef.require&&ef.require("util").types;if(e)return e;return eg&&eg.binding&&eg.binding("util")}catch(e){}}(),em=ey&&ey.isTypedArray,ev=em?function(e){return em(e)}:function(e){return(0,q.Z)(e)&&ec(e.length)&&!!eu[(0,Q.Z)(e)]},eb=Object.prototype.hasOwnProperty;let e_=function(e,n){var r=(0,K.Z)(e),i=!r&&er(e),o=!r&&!i&&ea(e),s=!r&&!i&&!o&&ev(e),a=r||i||o||s,l=a?X(e.length,String):[],h=l.length;for(var c in e)(n||eb.call(e,c))&&!(a&&("length"==c||o&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||eh(c,h)))&&l.push(c);return l};var eE=Object.prototype;let ew=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||eE)};var ex=(s=Object.keys,a=Object,function(e){return s(a(e))}),eC=Object.prototype.hasOwnProperty;let eS=function(e){if(!ew(e))return ex(e);var n=[];for(var r in Object(e))eC.call(e,r)&&"constructor"!=r&&n.push(r);return n};var eD=r(3820);let eN=function(e){return null!=e&&ec(e.length)&&!(0,eD.Z)(e)?e_(e):eS(e)},eO=function(e){return U(e,eN,Z)};var eM=Object.prototype.hasOwnProperty;let eI=function(e,n,r,i,o,s){var a=1&r,l=eO(e),h=l.length;if(h!=eO(n).length&&!a)return!1;for(var c=h;c--;){var u=l[c];if(!(a?u in n:eM.call(n,u)))return!1}var d=s.get(e),p=s.get(n);if(d&&p)return d==n&&p==e;var f=!0;s.set(e,n),s.set(n,e);for(var g=a;++c<h;){var y=e[u=l[c]],m=n[u];if(i)var b=a?i(m,y,u,n,e,s):i(y,m,u,e,n,s);if(!(void 0===b?y===m||o(y,m,r,i,s):b)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var _=e.constructor,E=n.constructor;_!=E&&"constructor"in e&&"constructor"in n&&!("function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E)&&(f=!1)}return s.delete(e),s.delete(n),f};var eT=r(7076),ek=(0,eT.Z)(L.Z,"DataView"),eP=(0,eT.Z)(L.Z,"Promise"),eA=(0,eT.Z)(L.Z,"Set"),eL=(0,eT.Z)(L.Z,"WeakMap"),ej=r(3117),eR="[object Map]",ez="[object Promise]",eV="[object Set]",eF="[object WeakMap]",e$="[object DataView]",eB=(0,ej.Z)(ek),eH=(0,ej.Z)(O.Z),eK=(0,ej.Z)(eP),eU=(0,ej.Z)(eA),eW=(0,ej.Z)(eL),eG=Q.Z;(ek&&eG(new ek(new ArrayBuffer(1)))!=e$||O.Z&&eG(new O.Z)!=eR||eP&&eG(eP.resolve())!=ez||eA&&eG(new eA)!=eV||eL&&eG(new eL)!=eF)&&(eG=function(e){var n=(0,Q.Z)(e),r="[object Object]"==n?e.constructor:void 0,i=r?(0,ej.Z)(r):"";if(i)switch(i){case eB:return e$;case eH:return eR;case eK:return ez;case eU:return eV;case eW:return eF}return n});let eY=eG;var eZ="[object Arguments]",eX="[object Array]",eQ="[object Object]",eq=Object.prototype.hasOwnProperty;let eJ=function(e,n,r,i,o,s){var a=(0,K.Z)(e),l=(0,K.Z)(n),h=a?eX:eY(e),c=l?eX:eY(n);h=h==eZ?eQ:h,c=c==eZ?eQ:c;var u=h==eQ,d=c==eQ,p=h==c;if(p&&ea(e)){if(!ea(n))return!1;a=!0,u=!1}if(p&&!u)return s||(s=new I),a||ev(e)?P(e,n,r,i,o,s):B(e,n,h,r,i,o,s);if(!(1&r)){var f=u&&eq.call(e,"__wrapped__"),g=d&&eq.call(n,"__wrapped__");if(f||g){var y=f?e.value():e,m=g?n.value():n;return s||(s=new I),o(y,m,r,i,s)}}return!!p&&(s||(s=new I),eI(e,n,r,i,o,s))},e0=function(e,n){return function e(n,r,i,o,s){return n===r||(null!=n&&null!=r&&((0,q.Z)(n)||(0,q.Z)(r))?eJ(n,r,i,o,e,s):n!=n&&r!=r)}(e,n)},e1=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0};var e2=r(431),e3=((l=e3||{}).DELETE_NODES="DELETE_NODES",l.COPY_NODES="COPY_NODES",l.PASTE_NODES="PASTE_NODES",l.ZOOM_IN="ZOOM_IN",l.ZOOM_OUT="ZOOM_OUT",l.UNDO="UNDO",l.REDO="REDO",l);function e4(e){return(0,D.x0)(e)}var e5=(e,n,r=!0)=>{let i=S.Ae.enlarge(e.getAllNodes().map(e=>e.getData(b.VO).bounds));return n.fitView(i,r,30)},e6=(e,n,r="")=>`port_${n}_${e.id}_${r}`,e8="WorkflowLineEntity",e9=x.GA,e7=class extends b.JH{constructor(e){super(e),this.portID="",this._disabled=!1,this._hasError=!1,this._onErrorChangedEmitter=new S.Q5,this.onErrorChanged=this._onErrorChangedEmitter.event,this.portID=e.portID||"",this.portType=e.type,this._disabled=e.disabled??!1,this.node=e.node,this.updateTargetElement(e.targetElement),this.toDispose.push(this.node.getData(b.VO).onDataChange(()=>this.fireChange())),this.toDispose.push(this.node.onDispose(this.dispose.bind(this)))}static getPortEntityId(e,n,r=""){return e6(e,n,r)}get hasError(){return this._hasError}set hasError(e){this._hasError=e,this._onErrorChangedEmitter.fire()}validate(){let e=this.allLines.some(e=>!e.disposed&&!e.isHidden&&(e.validateSelf(),e.hasError)),n=this.node.document.isErrorPort(this);this.hasError=e||n}isErrorPort(){return this.node.document.isErrorPort(this)}get point(){let{targetElement:e}=this,{bounds:n}=this.node.getData(x.eG);if(e){var r;let n=(r=e.getBoundingClientRect(),new S.Ae(r.x,r.y,r.width,r.height)).center;return this.entityManager.getEntity(b.ER).getPosFromMouseEvent({clientX:n.x,clientY:n.y})}return"input"===this.portType?n.leftCenter:n.rightCenter}get bounds(){let{point:e}=this;return new S.Ae(e.x-12,e.y-12,24,24)}isHovered(e,n){return this.bounds.contains(e,n)}get relativePosition(){let{point:e}=this,{bounds:n}=this.node.getData(x.eG);return{x:e.x-n.x,y:e.y-n.y}}updateTargetElement(e){e!==this.targetElement&&(this.targetElement=e,this.fireChange())}get disabled(){let e=this.node.document;if("function"==typeof e.options.isDisabledPort)return e.options.isDisabledPort(this);if(this._disabled)return!0;let n=this.node.getNodeMeta();return"input"===this.portType?!!n.inputDisable:!!n.outputDisable}get lines(){return this.allLines.filter(e=>!e.isDrawing)}get availableLines(){return this.allLines.filter(e=>!e.isDrawing&&!e.isHidden)}get allLines(){let e=[];return this.entityManager.getEntities({type:e8}).forEach(n=>{(n.toPort===this||n.fromPort===this)&&e.push(n)}),e}dispose(){this.lines.forEach(e=>e.dispose()),super.dispose()}};e7.type="WorkflowPortEntity";var te=class extends b.RD{constructor(e){super(e),this._staticPorts=[],this._portIDSet=new Set,this.entity=e;let n=e.getNodeMeta(),r=n.useDynamicPort?[]:[{type:"input"},{type:"output"}];this._staticPorts=n.defaultPorts?.slice()||r,this.updatePorts(this._staticPorts),n.useDynamicPort&&this.toDispose.push(e.getData(b._z).onDataChange(()=>{e.getData(b._z).width&&e.getData(b._z).height&&this.updateDynamicPorts()})),this.onDispose(()=>{this.allPorts.forEach(e=>e.dispose())})}getDefaultData(){return{}}updateStaticPorts(e){let n=this.entity.getNodeMeta();this._staticPorts=e,n.useDynamicPort?this.updateDynamicPorts():this.updatePorts(this._staticPorts)}updateDynamicPorts(){let e=this.entity.getData(x.Lz).node.querySelectorAll("[data-port-id]"),n=this._staticPorts,r=[];e.length>0&&r.push(...Array.from(e).map(e=>({portID:e.getAttribute("data-port-id"),type:e.getAttribute("data-port-type"),targetElement:e}))),this.updatePorts(n.concat(r))}getPortEntityByKey(e,n){return this.getOrCreatePortEntity({type:e,portID:n})}updatePorts(e){if(!e0(this._prePorts,e)){let n=e.map(e=>this.getPortId(e.type,e.portID));this._portIDSet.forEach(e=>{n.includes(e)||this.getPortEntity(e)?.dispose()}),e.forEach(e=>this.updatePortEntity(e)),this._prePorts=e,this.fireChange()}this.allPorts.forEach(e=>{e.allLines.forEach(e=>{e.validate()}),e.validate()})}get allPorts(){return Array.from(this._portIDSet).map(e=>this.getPortEntity(e)).filter(Boolean)}get inputPorts(){return this.allPorts.filter(e=>"input"===e.portType)}get outputPorts(){return this.allPorts.filter(e=>"output"===e.portType)}get inputPoints(){return this.inputPorts.map(e=>e.point)}get outputPoints(){return this.inputPorts.map(e=>e.point)}getInputPoint(e){return this.getPortEntityByKey("input",e).point}getOutputPoint(e){return this.getPortEntityByKey("output",e).point}getPortEntity(e){if(this._portIDSet.has(e))return this.entity.entityManager.getEntityById(e)}getPortId(e,n=""){return e6(this.entity,e,n)}createPortEntity(e){let n=this.getPortId(e.type,e.portID),r=this.entity.entityManager.getEntityById(n);return r||(r=this.entity.entityManager.createEntity(e7,{id:n,node:this.entity,...e})),r.onDispose(()=>{this._portIDSet.delete(n)}),this._portIDSet.add(n),r}getOrCreatePortEntity(e){let n=this.getPortId(e.type,e.portID);return this.getPortEntity(n)??this.createPortEntity(e)}updatePortEntity(e){let n=this.getOrCreatePortEntity(e);return e.targetElement&&n.updateTargetElement(e.targetElement),n}};te.type="WorkflowNodePortsData";var tt=class e extends b.RD{getDefaultData(){return{inputLines:[],outputLines:[]}}constructor(e){super(e),this.entity=e,this.entity.preDispose.push(S.JT.create(()=>{this.inputLines.slice().forEach(e=>e.dispose()),this.outputLines.slice().forEach(e=>e.dispose())}))}get inputLines(){return this.data.inputLines}get outputLines(){return this.data.outputLines}get inputNodes(){return this.inputLines.map(e=>e.from).filter(Boolean)}get allInputNodes(){let n=new Set,r=i=>{if(n.has(i))return;n.add(i);let{inputNodes:o}=i.getData(e);o&&o.length&&o.forEach(e=>{e?.parent!==i&&i?.parent!==e&&r(e)})};return r(this.entity),n.delete(this.entity),Array.from(n)}get outputNodes(){return this.outputLines.map(e=>e.to).filter(Boolean)}get allOutputNodes(){let n=new Set,r=i=>{if(n.has(i))return;n.add(i);let{outputNodes:o}=i.getData(e);o&&o.length&&o.forEach(e=>{e?.parent!==i&&i?.parent!==e&&r(e)})};return r(this.entity),n.delete(this.entity),Array.from(n)}addLine(e){e.from===this.entity?this.outputLines.push(e):this.inputLines.push(e),this.fireChange()}removeLine(e){let{inputLines:n,outputLines:r}=this,i=n.indexOf(e),o=r.indexOf(e);-1!==i&&(n.splice(i,1),this.fireChange()),-1!==o&&(r.splice(o,1),this.fireChange())}};tt.type="WorkflowNodeLinesData";var tn=tt,tr=class extends b.RD{constructor(e){super(e),this.syncContributions()}getDefaultData(){return{version:"",contributions:new Map,position:{from:{x:0,y:0},to:{x:0,y:0}}}}get renderVersion(){return this.data.version}get position(){return this.data.position}get path(){return this.currentLine?.path??""}calcDistance(e){return this.currentLine?.calcDistance(e)??Number.MAX_SAFE_INTEGER}get bounds(){return this.currentLine?.bounds??new S.Ae}update(){this.syncContributions();let e=this.data.version;this.updatePosition();let n=this.data.version;e!==n&&(this.data.version=n,this.currentLine?.update({fromPos:this.data.position.from,toPos:this.data.position.to}))}get lineType(){return this.entity.renderType??this.entity.linesManager.lineType}updatePosition(){this.data.position.from=this.entity.from.getData(te).getOutputPoint(this.entity.info.fromPort),this.data.position.to=this.entity.info.drawingTo??this.entity.to?.getData(te)?.getInputPoint(this.entity.info.toPort)??{x:this.data.position.from.x,y:this.data.position.from.y},this.data.version=[this.lineType,this.data.position.from.x,this.data.position.from.y,this.data.position.to.x,this.data.position.to.y].join("-")}get currentLine(){return this.data.contributions.get(this.lineType)}syncContributions(){this.entity.linesManager.contributionFactories.length!==this.data.contributions.size&&this.entity.linesManager.contributionFactories.forEach(e=>{this.registerContribution(e)})}registerContribution(e){if(this.data.contributions.has(e.type))return;let n=new e(this.entity);this.data.contributions.set(e.type,n)}};tr.type="WorkflowLineRenderData";var ti=10,to=class e extends b.JH{constructor(e){super(e),this._processing=!1,this._hasError=!1,this.info={from:""},this.document=e.document,this.linesManager=e.linesManager,this.initInfo({from:e.from,to:e.to,drawingTo:e.drawingTo,fromPort:e.fromPort,toPort:e.toPort}),e.drawingTo&&(this.isDrawing=!0)}static portInfoToLineId(e){let{from:n,to:r,fromPort:i,toPort:o}=e;return`${n}_${i||""}-${r||""}_${o||""}`}get from(){return this._from}get to(){return this._to}get isHidden(){return this.highlightColor===this.linesManager.lineColor.hidden}get inContainer(){let e=e=>!!e?.parent&&"root"!==e.parent.flowNodeType;return e(this.from)||e(this.to)}get processing(){return this._processing}set processing(e){this._processing!==e&&(this._processing=e,this.fireChange())}get hasError(){return this._hasError}set hasError(e){this._hasError!==e&&(this._hasError=e,this.fireChange()),this._node&&(this._node.dataset.hasError=this.hasError?"true":"false")}setToPort(e){if(!this.isDrawing)throw Error("[setToPort] only support drawing line.");if(this.toPort!==e){if(e&&"input"===e.portType&&this.linesManager.canAddLine(this.fromPort,e,!0)){let{node:n,portID:r}=e;this._to=n,this.info.drawingTo=void 0,this.info.isDefaultLine=!1,this.info.to=n.id,this.info.toPort=r}else this._to=void 0,this.info.to=void 0,this.info.toPort="";this.fireChange()}}set drawingTo(e){let n=this.info.drawingTo;if(!e){this.info.drawingTo=void 0,this.fireChange();return}n&&e.x===n.x&&e.y===n.y||(this.info.to=void 0,this.info.isDefaultLine=!1,this.info.drawingTo=e,this.fireChange())}get drawingTo(){return this.info.drawingTo}get highlightColor(){return this.info.highlightColor||""}set highlightColor(e){this.info.highlightColor!==e&&(this.info.highlightColor=e,this.fireChange())}get bounds(){return this.getData(tr).bounds}getHoverDist(e){return this.getData(tr).calcDistance(e)}get fromPort(){return this.from.getData(te).getPortEntityByKey("output",this.info.fromPort)}get toPort(){if(this.to)return this.to.getData(te).getPortEntityByKey("input",this.info.toPort)}get position(){return this.getData(tr).position}get reverse(){return this.linesManager.isReverseLine(this)}get hideArrow(){return this.linesManager.isHideArrowLine(this)}get flowing(){return this.linesManager.isFlowingLine(this)}get disabled(){return this.linesManager.isDisabledLine(this)}get vertical(){return this.linesManager.isVerticalLine(this)}get renderType(){return this.linesManager.setLineRenderType(this)}get className(){return this.linesManager.setLineClassName(this)??""}get color(){return this.linesManager.getLineColor(this)}initInfo(e){e0(e,this.info)||(this.info=e,this._from=this.document.getNode(e.from),this._to=e.to?this.document.getNode(e.to):void 0,this.fireChange())}validate(){let{fromPort:e,toPort:n}=this;this.validateSelf(),e?.validate(),n?.validate()}validateSelf(){let{fromPort:e,toPort:n}=this;e&&(this.hasError=this.linesManager.isErrorLine(e,n))}is(n){return n instanceof e?this===n:e.portInfoToLineId(n)===this.id}canRemove(e){return this.linesManager.canRemove(this,e)}get node(){return this._node||(this._node=S.xF.createDivWithClass("gedit-flow-activity-line"),this._node.dataset.testid="sdk.workflow.canvas.line",this._node.dataset.lineId=this.id,this._node.dataset.fromNodeId=this.from.id,this._node.dataset.fromPortId=this.fromPort?.id??"",this._node.dataset.toNodeId=this.to?.id??"",this._node.dataset.toPortId=this.toPort?.id??"",this._node.dataset.hasError=this.hasError?"true":"false"),this._node}toJSON(){let e={sourceNodeID:this.info.from,targetNodeID:this.info.to,sourcePortID:this.info.fromPort,targetPortID:this.info.toPort};return e.sourcePortID||delete e.sourcePortID,e.targetPortID||delete e.targetPortID,e}fireRender(){this.fireChange()}};to.type=e8;var ts=to,ta=class{get onSelectionChanged(){return this.selectionService.onSelectionChanged}get selection(){return this.selectionService.selection}set selection(e){this.selectionService.selection=e}get activatedNode(){let{selectedNodes:e}=this;if(1===e.length)return e[0]}isSelected(e){return this.selectionService.selection.some(n=>n.id===e)}isActivated(e){return this.activatedNode?.id===e}get selectedNodes(){return this.selectionService.selection.filter(e=>e instanceof e9)}selectNode(e){this.selectionService.selection=[e]}toggleSelect(e){this.selectionService.selection.includes(e)?this.selectionService.selection=this.selectionService.selection.filter(n=>n!==e):this.selectionService.selection=this.selectionService.selection.concat(e)}select(e){this.selectionService.selection=[e]}clear(){this.selectionService.selection=[]}async selectNodeAndScrollToView(e,n){this.selectNodeAndFocus(e),await (0,S.gw)(30);let r={entities:[e]};if(n){let n=S.Ae.enlarge([e.getData(b.VO).bounds]).pad(30,30),i=this.playground.config.getViewport(!1);r.zoom=S.rM.fixSize(n,i),r.scrollToCenter=!0,r.easing=!0}return this.playground.config.scrollToView(r)}selectNodeAndFocus(e){this.select(e),this.playground.node.focus()}};m([(0,C.f3)(b.z2)],ta.prototype,"selectionService",2),m([(0,C.f3)(b.XQ)],ta.prototype,"playground",2),ta=m([(0,C.b2)()],ta);var tl=class{constructor(){this.onHoveredChangeEmitter=new S.Q5,this.onHoveredChange=this.onHoveredChangeEmitter.event,this.hoveredPos={x:0,y:0},this.hoveredKey=""}updateHoveredKey(e){this.hoveredKey!==e&&(this.hoveredKey=e,this.onHoveredChangeEmitter.fire(e))}clearHovered(){this.updateHoveredKey("")}isHovered(e){return e===this.hoveredKey}isSomeHovered(){return!!this.hoveredKey}get hoveredNode(){return this.entityManager.getEntityById(this.hoveredKey)}};m([(0,C.f3)(b.v2)],tl.prototype,"entityManager",2),tl=m([(0,C.b2)()],tl);var th=Symbol("WorkflowDocumentOptions"),tc={cursors:{grab:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC40ODczIDIuNjIzNzhDOS45MDczMSAyLjYyMzc4IDkuNDM3MTMgMy4wOTM5NiA5LjQzNzEzIDMuNjczOTZWNS4xNDM3NkM5LjM5NDI4IDQuNDAyNzQgOC43Nzk3OCAzLjgxNTA0IDguMDI4MDIgMy44MTUwNEM3LjI0ODQ4IDMuODE1MDQgNi42MTY1MyA0LjQ0Njk5IDYuNjE2NTMgNS4yMjY1M1YxMS44Mjg5TDUuNjc0MTggMTEuMDA0OUM1LjE1NDg3IDEwLjU1MDkgNC40MDk1IDEwLjQ2MzYgMy43OTkzOCAxMC43ODU1TDMuNjk2OTQgMTAuODM5NkMzLjA2MjE3IDExLjE3NDUgMi45MjI2IDEyLjAyMjggMy40MTY2MiAxMi41NDM0TDcuMzM5NTkgMTYuNjc3NVYxNy4zMjU5QzcuMzM5NTkgMTcuNzg2MiA3LjcxMjY5IDE4LjE1OTMgOC4xNzI5MiAxOC4xNTkzSDEzLjgwODRDMTQuMjY4NyAxOC4xNTkzIDE0LjY0MTcgMTcuNzg2MiAxNC42NDE3IDE3LjMyNTlWMTYuNzkzNUMxNS44MDk0IDE1LjY0ODUgMTYuNDY3MyAxNC4wODE5IDE2LjQ2NzMgMTIuNDQ2NVYxMS40OTY3TDE2LjQ2NzEgNi42MzY4NUMxNi40NjcxIDUuOTU2MyAxNS45MTU0IDUuNDA0NjEgMTUuMjM0OCA1LjQwNDYxQzE0LjU1NDMgNS40MDQ2MSAxNC4wMDI2IDUuOTU2MyAxNC4wMDI2IDYuNjM2ODVMMTQuMDAyMSA1LjA0NzI4QzE0LjAwMjEgNC4zNjY3MyAxMy40NTA0IDMuODE1MDQgMTIuNzY5OCAzLjgxNTA0QzEyLjA4OTMgMy44MTUwNCAxMS41Mzc2IDQuMzY2NzMgMTEuNTM3NiA1LjA0NzI4TDExLjUzNzUgMy42NzM5NUMxMS41Mzc1IDMuMDkzOTYgMTEuMDY3MyAyLjYyMzc4IDEwLjQ4NzMgMi42MjM3OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNDg3NCAxLjM3NDAyQzExLjM2MTIgMS4zNzQwMiAxMi4xMjExIDEuODYxMTggMTIuNTEwNSAyLjU3ODY4QzEyLjU5NTggMi41Njk4MyAxMi42ODIzIDIuNTY1MjggMTIuNzcgMi41NjUyOEMxMy44Mjc4IDIuNTY1MjggMTQuNzMxMSAzLjIyNzAxIDE1LjA4ODUgNC4xNTkxMUMxNS4xMzcgNC4xNTYyOSAxNS4xODU4IDQuMTU0ODYgMTUuMjM1IDQuMTU0ODZDMTYuNjA1OSA0LjE1NDg2IDE3LjcxNzIgNS4yNjYxOSAxNy43MTcyIDYuNjM3MDlMMTcuNzE3NCAxMi40NDY3QzE3LjcxNzQgMTQuMjM1NSAxNy4wNjQ0IDE1Ljk1NTkgMTUuODkxOSAxNy4yOTA0VjE3LjMyNjJDMTUuODkxOSAxOC40NzY4IDE0Ljk1OTEgMTkuNDA5NSAxMy44MDg1IDE5LjQwOTVIOC4xNzMwNkM3LjAyMjQ3IDE5LjQwOTUgNi4wODk3MyAxOC40NzY4IDYuMDg5NzMgMTcuMzI2MlYxNy4xNzY0TDIuNTEwMDMgMTMuNDA0MUMxLjQ0NTk5IDEyLjI4MjggMS43NDY2IDEwLjQ1NTUgMy4xMTM3OSA5LjczNDI0TDMuMjE2MjQgOS42ODAxOUMzLjg5MTY4IDkuMzIzODMgNC42NjE4NSA5LjI1NDAxIDUuMzY2NjYgOS40NTE5OFY1LjIyNjc4QzUuMzY2NjYgMy43NTY4NyA2LjU1ODI2IDIuNTY1MjggOC4wMjgxNiAyLjU2NTI4QzguMTcyOTMgMi41NjUyOCA4LjMxNDk5IDIuNTc2ODQgOC40NTM0NyAyLjU5OTA3QzguODM5NDMgMS44NzA0MiA5LjYwNTQ2IDEuMzc0MDIgMTAuNDg3NCAxLjM3NDAyWk0xMi40NDc2IDMuODU3ODdWOS40NzY0NkMxMi40NDc2IDkuNzI4NTIgMTIuMjQzMyA5LjkzMjg1IDExLjk5MTMgOS45MzI4NUMxMS43MzkyIDkuOTMyODUgMTEuNTM0OSA5LjcyODUyIDExLjUzNDkgOS40NzY0NlYzLjc5NjU1QzExLjUzNDkgMy43Nzk1NiAxMS41MzU4IDMuNzYyNzcgMTEuNTM3NiAzLjc0NjI2VjMuNjc0MkMxMS41Mzc2IDMuNDMyODIgMTEuNDU2MiAzLjIxMDQ2IDExLjMxOTMgMy4wMzMwOUMxMS4xMjcyIDIuNzg0MjggMTAuODI2MSAyLjYyNDAyIDEwLjQ4NzQgMi42MjQwMkMxMC4xMjM4IDIuNjI0MDIgOS44MDMzMiAyLjgwODg2IDkuNjE0ODMgMy4wODk3QzkuNTAyNjkgMy4yNTY3OSA5LjQzNzI2IDMuNDU3ODUgOS40MzcyNiAzLjY3NDJWMy43ODU3M0M5LjQzNzM1IDMuNzg5MzMgOS40MzczOSAzLjc5Mjk0IDkuNDM3MzkgMy43OTY1NVY5LjkwMTdDOS40MzczOSAxMC4xNTM3IDkuMjMzMDYgMTAuMzU4MSA4Ljk4MTAxIDEwLjM1ODFDOC43Mjg5NSAxMC4zNTgxIDguNTI0NjIgMTAuMTUzNyA4LjUyNDYyIDkuOTAxN1YzLjkwNTA3QzguNDE3NzMgMy44NjQ5IDguMzA0NjggMy44MzczMiA4LjE4NzI2IDMuODI0MTVDOC4xMzUwNCAzLjgxODI5IDguMDgxOTUgMy44MTUyOCA4LjAyODE2IDMuODE1MjhDNy4yNDg2MSAzLjgxNTI4IDYuNjE2NjYgNC40NDcyMyA2LjYxNjY2IDUuMjI2NzhWMTEuODI5Mkw1LjY3NDMxIDExLjAwNTJDNS41Nzg2OCAxMC45MjE2IDUuNDc1MzcgMTAuODUwNCA1LjM2NjY2IDEwLjc5MTlDNC44ODUwNiAxMC41MzI5IDQuMjk3MjggMTAuNTIzMSAzLjc5OTUyIDEwLjc4NThMMy42OTcwNyAxMC44Mzk4QzMuMDYyMzEgMTEuMTc0NyAyLjkyMjczIDEyLjAyMzEgMy40MTY3NSAxMi41NDM3TDcuMzM5NzMgMTYuNjc3N1YxNy4zMjYyQzcuMzM5NzMgMTcuNzg2NCA3LjcxMjgyIDE4LjE1OTUgOC4xNzMwNiAxOC4xNTk1SDEzLjgwODVDMTQuMjY4OCAxOC4xNTk1IDE0LjY0MTkgMTcuNzg2NCAxNC42NDE5IDE3LjMyNjJWMTYuNzkzOEMxNS43Mzc5IDE1LjcxOSAxNi4zODQ3IDE0LjI3MjggMTYuNDYgMTIuNzQ3QzE2LjQ2NDEgMTIuNjY0MSAxNi40NjY1IDEyLjU4MDkgMTYuNDY3MiAxMi40OTc1TDE2LjQ2NzQgMTIuNDQ2N0wxNi40NjcyIDYuNjM3MDlDMTYuNDY3MiA1Ljk2MjMgMTUuOTI0OCA1LjQxNDE5IDE1LjI1MjIgNS40MDQ5N0wxNS4yMzUgNS40MDQ4NkMxNS4xMjQ2IDUuNDA0ODYgMTUuMDE3NyA1LjQxOTM2IDE0LjkxNTkgNS40NDY1NlY5LjYwMjI2QzE0LjkxNTkgOS44NTQzMSAxNC43MTE2IDEwLjA1ODYgMTQuNDU5NSAxMC4wNTg2QzE0LjIwNzUgMTAuMDU4NiAxNC4wMDMxIDkuODU0MzEgMTQuMDAzMSA5LjYwMjI2VjYuNjA1MTRDMTQuMDAyOSA2LjYxNTc2IDE0LjAwMjcgNi42MjY0MSAxNC4wMDI3IDYuNjM3MDlWOS4yNzcwNUwxNC4wMDIyIDUuMDQ3NTJDMTQuMDAyMiA0Ljg2OTEzIDEzLjk2NDMgNC42OTk2IDEzLjg5NjEgNC41NDY1M0MxMy43MDY0IDQuMTIwNzIgMTMuMjgyMiAzLjgyMjM1IDEyLjc4NzYgMy44MTU0MUwxMi43NyAzLjgxNTI4QzEyLjY1ODQgMy44MTUyOCAxMi41NTA0IDMuODMwMSAxMi40NDc2IDMuODU3ODdaIiBmaWxsPSIjMUQxQzIzIi8+Cjwvc3ZnPg=="), auto',grabbing:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjYxODE3IDUuNTk4NzVDNi42MTgxNyA0LjgxOTIgNy4yNTAxMiA0LjE4NzI2IDguMDI5NjcgNC4xODcyNkM4Ljc3ODczIDQuMTg3MjYgOS4zOTE1MiA0Ljc3MDc1IDkuNDM4MjkgNS41MDgwMUM5LjQ1OTkyIDQuOTQ3MSA5LjkyMTQ3IDQuNDk5MDIgMTAuNDg3NyA0LjQ5OTAyQzExLjA2NzcgNC40OTkwMiAxMS41Mzc4IDQuOTY5MiAxMS41Mzc4IDUuNTQ5MTlWOC43NjI0NkwxMS41Mzc5IDYuNzExNUMxMS41Mzc5IDYuMDMwOTUgMTIuMDg5NiA1LjQ3OTI2IDEyLjc3MDIgNS40NzkyNkMxMy40NTA3IDUuNDc5MjYgMTQuMDAyNCA2LjAzMDk1IDE0LjAwMjQgNi43MTE1TDE0LjAwMjQgOC43NjI0NkwxNC4wMDI5IDguMDE5ODNDMTQuMDAyOSA3LjMzOTI5IDE0LjU1NDYgNi43ODc1OSAxNS4yMzUyIDYuNzg3NTlDMTUuOTE1NyA2Ljc4NzU5IDE2LjQ2NzQgNy4zMzkyOCAxNi40Njc0IDguMDE5ODNWMTEuNDk3TDE2LjQ2NzUgMTIuNDQ2N0MxNi40Njc1IDE0LjA4MjEgMTUuODA5NiAxNS42NDg3IDE0LjY0MiAxNi43OTM4VjE3LjMyNjJDMTQuNjQyIDE3Ljc4NjQgMTQuMjY4OSAxOC4xNTk1IDEzLjgwODcgMTguMTU5NUg4LjE3MzE3QzcuNzEyOTMgMTguMTU5NSA3LjMzOTg0IDE3Ljc4NjQgNy4zMzk4NCAxNy4zMjYyVjE1Ljk0MjRMNS4zNDU2MiAxNC43NTM0QzQuNTg5MjQgMTQuMzAyNCA0LjEyNTkxIDEzLjQ4NjcgNC4xMjU4OSAxMi42MDYxTDQuMTI1ODMgOS4yODM4M0M0LjEyNTgyIDguOTU0MjcgNC4zMjAwMyA4LjY1NTY2IDQuNjIxMjkgOC41MjIwNUw2LjYxODE3IDcuNjM2MzRWNS41OTg3NVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNDg3OCAzLjI0OTAyQzExLjI3OTYgMy4yNDkwMiAxMS45Nzc4IDMuNjQ5MDIgMTIuMzkxNyA0LjI1Nzk2QzEyLjUxNTEgNC4yMzkwNiAxMi42NDE2IDQuMjI5MjYgMTIuNzcwMyA0LjIyOTI2QzEzLjcyMjQgNC4yMjkyNiAxNC41NDkzIDQuNzY1MzEgMTQuOTY1NyA1LjU1MjA3QzE1LjA1NDMgNS41NDI1IDE1LjE0NDIgNS41Mzc1OSAxNS4yMzUzIDUuNTM3NTlDMTYuNjA2MiA1LjUzNzU5IDE3LjcxNzYgNi42NDg5MyAxNy43MTc2IDguMDE5ODNMMTcuNzE3NyAxMi40NDY3QzE3LjcxNzcgMTQuMjM1NSAxNy4wNjQ3IDE1Ljk1NTkgMTUuODkyMSAxNy4yOTA0VjE3LjMyNjJDMTUuODkyMSAxOC40NzY4IDE0Ljk1OTQgMTkuNDA5NSAxMy44MDg4IDE5LjQwOTVIOC4xNzMzMkM3LjAyMjczIDE5LjQwOTUgNi4wODk5OCAxOC40NzY4IDYuMDg5OTggMTcuMzI2MlYxNi42NTI0TDQuNzA1NjMgMTUuODI3QzMuNTcxMDYgMTUuMTUwNSAyLjg3NjA3IDEzLjkyNzEgMi44NzYwNCAxMi42MDYxTDIuODc1OTggOS4yODM4NUMyLjg3NTk2IDguNDU5OTYgMy4zNjE0OSA3LjcxMzQ1IDQuMTE0NjIgNy4zNzk0TDUuMzY4MzIgNi44MjMzM1Y1LjU5ODc1QzUuMzY4MzIgNC4xMjg4NSA2LjU1OTkxIDIuOTM3MjYgOC4wMjk4MiAyLjkzNzI2QzguNjA4MzEgMi45MzcyNiA5LjE0MzU1IDMuMTIxNyA5LjU4MDA1IDMuNDM1MDVDOS44NTg1MyAzLjMxNTMyIDEwLjE2NTQgMy4yNDkwMiAxMC40ODc4IDMuMjQ5MDJaTTEyLjQ0NzkgNS41MjE4NlY5LjQ3NTU3QzEyLjQ0NzkgOS43Mjc2MiAxMi4yNDM2IDkuOTMxOTUgMTEuOTkxNiA5LjkzMTk1QzExLjc1NjggOS45MzE5NSAxMS41NjM0IDkuNzU0NjUgMTEuNTM4IDkuNTI2NjNDMTEuNTM2MSA5LjUwOTg3IDExLjUzNTIgOS40OTI4MyAxMS41MzUyIDkuNDc1NTdWNS40NzE1OEMxMS41MTU0IDUuMjAwODMgMTEuMzkzIDQuOTU4NTggMTEuMjA2NiA0Ljc4MzU4QzExLjAxODggNC42MDcxMSAxMC43NjU5IDQuNDk5MDIgMTAuNDg3OCA0LjQ5OTAyQzEwLjQ3NjYgNC40OTkwMiAxMC40NjU0IDQuNDk5MTkgMTAuNDU0MiA0LjQ5OTU0QzkuOTAzNDcgNC41MTY4NCA5LjQ1OTY0IDQuOTU4MjQgOS40Mzg0NCA1LjUwODAxQzkuNDM4MiA1LjUwNDMgOS40Mzc5NSA1LjUwMDU4IDkuNDM3NjkgNS40OTY4OFY5LjkwMjQzQzkuNDM3NjkgMTAuMTU0NSA5LjIzMzM2IDEwLjM1ODggOC45ODEzMSAxMC4zNTg4QzguNzI5MjUgMTAuMzU4OCA4LjUyNDkyIDEwLjE1NDUgOC41MjQ5MiA5LjkwMjQzVjQuMjc2NTNDOC4zNzA4NiA0LjIxODgyIDguMjA0MDIgNC4xODcyNiA4LjAyOTgyIDQuMTg3MjZDNy4yNTAyNyA0LjE4NzI2IDYuNjE4MzIgNC44MTkyIDYuNjE4MzIgNS41OTg3NUw2LjYxODI3IDkuOTc1OTlDNi42MTgyNyAxMC4yMjggNi40MTM5NCAxMC40MzI0IDYuMTYxODkgMTAuNDMyNEM1LjkwOTgzIDEwLjQzMjQgNS43MDU1IDEwLjIyOCA1LjcwNTUgOS45NzU5OVY4LjA0MTIyTDQuNjIxNDQgOC41MjIwNUM0LjMyMDE4IDguNjU1NjYgNC4xMjU5NyA4Ljk1NDI3IDQuMTI1OTggOS4yODM4M0w0LjEyNjA0IDEyLjYwNjFDNC4xMjYwNiAxMy40ODY3IDQuNTg5MzkgMTQuMzAyNCA1LjM0NTc2IDE0Ljc1MzRMNy4zMzk5OCAxNS45NDI0VjE3LjMyNjJDNy4zMzk5OCAxNy43ODY0IDcuNzEzMDggMTguMTU5NSA4LjE3MzMyIDE4LjE1OTVIMTMuODA4OEMxNC4yNjkgMTguMTU5NSAxNC42NDIxIDE3Ljc4NjQgMTQuNjQyMSAxNy4zMjYyVjE2Ljc5MzhDMTUuNzM4MSAxNS43MTkgMTYuMzg1IDE0LjI3MjggMTYuNDYwMyAxMi43NDdDMTYuNDY0NiAxMi42NiAxNi40NjcgMTIuNTcyOCAxNi40Njc2IDEyLjQ4NTRMMTYuNDY3NyAxMi40NDY3TDE2LjQ2NzYgOC4wMTk4M0MxNi40Njc2IDcuMzQ1MDQgMTUuOTI1MiA2Ljc5NjkzIDE1LjI1MjUgNi43ODc3MUwxNS4yMzUzIDYuNzg3NTlDMTUuMTI1IDYuNzg3NTkgMTUuMDE4IDYuODAyMSAxNC45MTYyIDYuODI5MzFWOS42MDEzNkMxNC45MTYyIDkuODUzNDIgMTQuNzExOSAxMC4wNTc3IDE0LjQ1OTggMTAuMDU3N0MxNC4yMDc4IDEwLjA1NzcgMTQuMDAzNCA5Ljg1MzQxIDE0LjAwMzQgOS42MDEzNlY3Ljk4OTg1QzE0LjAwMzIgNy45OTk4MiAxNC4wMDMxIDguMDA5ODEgMTQuMDAzMSA4LjAxOTgzTDE0LjAwMzQgOS42MDEzNkwxNC4wMDI1IDYuNzExNUMxNC4wMDI1IDYuNDQ5NzQgMTMuOTIwOSA2LjIwNzA1IDEzLjc4MTggNi4wMDc0OEMxMy41NjIgNS42OTI0MiAxMy4xOTg5IDUuNDg0ODMgMTIuNzg3IDUuNDc5MzdMMTIuNzcwMyA1LjQ3OTI2QzEyLjY1ODggNS40NzkyNiAxMi41NTA3IDUuNDk0MDggMTIuNDQ3OSA1LjUyMTg2WiIgZmlsbD0iIzFEMUMyMyIvPgo8L3N2Zz4="), auto'},fromNodeJSON(e,n){let r=e.getData(e2.Ps),{formMeta:i}=e.getNodeRegistry();r&&i&&(r.createForm(i,n.data),r.onDataChange(()=>{e.document.fireContentChange({type:"NODE_DATA_CHANGE",toJSON:()=>r.toJSON(),entity:e})}))},toNodeJSON(e){let n=e.getData(e2.fu)?.getError();if(n)throw n;let r=e.getData(b.VO),i=function(e){let n=e.getData(e2.Ps);if(n&&e.getNodeRegistry().formMeta)return n.toJSON()}(e),o={},s=e.getNodeMeta(),a=s.subCanvas?.(e);if(a?.isCanvas===!1){let{x:e,y:n}=a.canvasNode.getData(x.eG).transform.position;o.canvasPosition={x:e,y:n}}return{id:e.id,type:e.flowNodeType,meta:{position:{x:r.position.x,y:r.position.y},...o},data:i}}},tu=class{constructor(){this.toDispose=new S.K4,this._lineType=0,this.onAvailableLinesChangeEmitter=new S.Q5,this.onForceUpdateEmitter=new S.Q5,this.onAvailableLinesChange=this.onAvailableLinesChangeEmitter.event,this.onForceUpdate=this.onForceUpdateEmitter.event,this.contributionFactories=[],this.isDrawing=!1}init(e){this.document=e}forceUpdate(){this.onForceUpdateEmitter.fire()}get lineType(){return this._lineType}get lineColor(){let e={default:"#4d53e8",error:"red",hidden:"transparent",drawing:"#5DD6E3",hovered:"#37d0ff",selected:"#37d0ff"};return this.options.lineColor&&Object.assign(e,this.options.lineColor),e}switchLineType(e){return void 0===e&&(e=+(0===this._lineType)),e!==this._lineType&&(this._lineType=e,this.getAllLines().forEach(e=>{e.getData(tr).update()}),window.requestAnimationFrame(()=>{this.entityManager.fireEntityChanged(ts.type)})),this._lineType}getAllLines(){return this.entityManager.getEntities(ts)}hasLine(e){return!!this.entityManager.getEntityById(ts.portInfoToLineId(e))}getLine(e){return this.entityManager.getEntityById(ts.portInfoToLineId(e))}replaceLine(e,n){let r=this.getLine(e);return r&&r.dispose(),this.createLine(n)}createLine(e){let{from:n,to:r,drawingTo:i,fromPort:o,toPort:s}=e,a=!!(n&&r),l=e.key||ts.portInfoToLineId(e),h=this.entityManager.getEntityById(l);if(h)return h.highlightColor="",h.validate(),h;let c=this.entityManager.getEntityById(n)?.getData(tn),u=r?this.entityManager.getEntityById(r).getData(tn):void 0;if(c)return this.isDrawing=!!i,h=this.entityManager.createEntity(ts,{id:l,document:this.document,linesManager:this,from:n,fromPort:o,toPort:s,to:r,drawingTo:i}),this.registerData(h),c.addLine(h),u?.addLine(h),h.onDispose(()=>{i&&(this.isDrawing=!1),c.removeLine(h),u?.removeLine(h),h.validate()}),h.toDispose.push(S.JT.create(()=>{a&&this.onAvailableLinesChangeEmitter.fire({type:"DELETE_LINE",toJSON:()=>h.toJSON(),entity:h})})),a&&this.onAvailableLinesChangeEmitter.fire({type:"ADD_LINE",toJSON:()=>h.toJSON(),entity:h}),h.validate(),h}getCloseInLineFromMousePos(e,n=8){let r,i;return this.getAllLines().forEach(o=>{let s=o.getHoverDist(e);s<=n&&(!i||i>=s)&&(i=s,r=o)}),r}dispose(){this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}isErrorLine(e,n){return!!this.options.isErrorLine&&this.options.isErrorLine(e,n,this)}isReverseLine(e){return!!this.options.isReverseLine&&this.options.isReverseLine(e)}isHideArrowLine(e){return!!this.options.isHideArrowLine&&this.options.isHideArrowLine(e)}isFlowingLine(e){return!!this.options.isFlowingLine&&this.options.isFlowingLine(e)}isDisabledLine(e){return!!this.options.isDisabledLine&&this.options.isDisabledLine(e)}isVerticalLine(e){return!!this.options.isVerticalLine&&this.options.isVerticalLine(e)}setLineRenderType(e){if(this.options.setLineRenderType)return this.options.setLineRenderType(e)}setLineClassName(e){if(this.options.setLineClassName)return this.options.setLineClassName(e)}getLineColor(e){return e.isHidden?this.lineColor.hidden:e.hasError?this.lineColor.error:e.highlightColor?e.highlightColor:e.drawingTo?this.lineColor.drawing:this.hoverService.isHovered(e.id)?this.lineColor.hovered:this.selectService.isSelected(e.id)?this.lineColor.selected:this.lineColor.default}canAddLine(e,n,r){return e!==n&&e.node!==n.node&&"output"===e.portType&&"input"===n.portType&&!n.disabled&&(this.options.canAddLine?this.options.canAddLine(e,n,this,r):e.node!==n.node)}toJSON(){return this.getAllLines().filter(e=>!e.isDrawing).map(e=>e.toJSON())}getPortById(e){return this.entityManager.getEntityById(e)}canRemove(e,n,r){return!this.options||!this.options.canDeleteLine||!!this.options.canDeleteLine(e,n,r)}canReset(e,n,r){return!this.options||!this.options.canResetLine||!!this.options.canResetLine(e,n,r,this)}getPortFromMousePos(e){let n=this.entityManager.getEntities(e7).filter(e=>"root"!==e.node.flowNodeType).find(n=>n.isHovered(e.x,e.y));if(n){let r=this.document.getAllNodes().slice().reverse().filter(e=>n.node?.parent?.id!==e.id).find(n=>n.getData(b.VO).contains(e.x,e.y));if(r&&r!==n.node)return}return n}getNodeFromMousePos(e){let n=this.document.getAllNodes().sort((e,n)=>this.getNodeIndex(e)-this.getNodeIndex(n)),r=[],{selection:i}=this.selectService,o=this.entityManager.getEntity(b.ER)?.config?.zoom||1;if(n.forEach(n=>{let{bounds:i}=n.getData(x.eG);i.clone().pad(4/o).contains(e.x,e.y)&&r.push(n)}),i?.length){let e=r.filter(e=>i.some(n=>e.id===n.id));if(e?.length)return e1(e)}return e1(r)}registerContribution(e){return this.contributionFactories.push(e),this}registerData(e){e.addData(tr)}getNodeIndex(e){return e.getData(x.Lz).stackIndex}};m([(0,C.f3)(tl)],tu.prototype,"hoverService",2),m([(0,C.f3)(ta)],tu.prototype,"selectService",2),m([(0,C.f3)(b.v2)],tu.prototype,"entityManager",2),m([(0,C.f3)(th)],tu.prototype,"options",2),tu=m([(0,C.b2)()],tu);var td="free-layout",tp=class{constructor(){this.name=td}get document(){return this.documentProvider()}update(){this.document.root.getData(x.eG)?.localDirty&&this.document.root.clearMemoGlobal()}syncTransform(e){let n=e.getData(x.eG);if(n.localDirty)e.clearMemoGlobal(),e.clearMemoLocal(),n.transform.update({size:n.data.size}),e.parent&&(e.parent.clearMemoGlobal(),e.parent.clearMemoLocal(),e.parent.getData(x.eG).transform.fireChange())}updateAffectedTransform(e){if(!e.transform.localDirty)return;let n=this.getAllParents(e);[...this.getAllBlocks(e).reverse(),...n].forEach(e=>{this.fireChange(e)})}getPadding(e){let{padding:n}=e.getNodeMeta(),r=e.getData(x.eG);return n?"function"==typeof n?n(r):n:S.sI.empty()}getInitScroll(e){let n=S.Ae.enlarge(this.document.getAllNodes().map(e=>e.getData(b.VO).bounds)).pad(30,30),r=this.playgroundConfig.getViewport(!1),i=S.rM.fixSize(n,r);return{scrollX:(n.x+n.width/2)*i-this.playgroundConfig.config.width/2,scrollY:(n.y+n.height/2)*i-this.playgroundConfig.config.height/2}}getDefaultInputPoint(e){return e.getData(b.VO).bounds.leftCenter}getDefaultOutputPoint(e){return e.getData(b.VO).bounds.rightCenter}getDefaultNodeOrigin(){return{x:.5,y:0}}getAllParents(e){let n=[],r=e.parent;for(;r;)n.push(r),r=r.parent;return n}getAllBlocks(e){return e.blocks.reduce((e,n)=>[...e,...this.getAllBlocks(n)],[e])}fireChange(e){let n=e?.transform;e&&n?.localDirty&&(e.clearMemoGlobal(),e.clearMemoLocal(),n.transform.fireChange())}};m([(0,C.f3)(b.ER)],tp.prototype,"playgroundConfig",2),m([(0,C.f3)(x.JU)],tp.prototype,"documentProvider",2),tp=m([(0,C.b2)()],tp);var tf=(0,D.kP)("1234567890",5),tg=Symbol("WorkflowDocumentProvider"),ty=class extends x.pQ{constructor(){super(...arguments),this._onContentChangeEmitter=new S.Q5,this.onLoadedEmitter=new S.Q5,this.onContentChange=this._onContentChangeEmitter.event,this._onReloadEmitter=new S.Q5,this.onReload=this._onReloadEmitter.event,this.disposed=!1,this.onLoaded=this.onLoadedEmitter.event,this._loading=!1,this.options={}}get loading(){return this._loading}async fitView(e){return e5(this,this.playgroundConfig,e).then(()=>{this.linesManager.forceUpdate()})}init(){super.init(),this.currentLayoutKey=this.options.defaultLayout||td,this.linesManager.init(this),this.playgroundConfig.getCursors=()=>this.options.cursors,this.linesManager.onAvailableLinesChange(e=>this.fireContentChange(e)),this.playgroundConfig.onReadonlyOrDisabledChange(({readonly:e})=>{this.nodeEngineContext&&(this.nodeEngineContext.readonly=e)})}async load(){this._loading=!0,await super.load(),this._loading=!1,this.onLoadedEmitter.fire()}async reload(e,n=0){this._loading=!0,this.clear(),this.fromJSON(e),await (0,S.gw)(n),this._loading=!1,this._onReloadEmitter.fire(this)}fromJSON(e,n=!0){let r={nodes:e.nodes??[],edges:e.edges??[]};this.entityManager.changeEntityLocked=!0,this.renderJSON(r),this.entityManager.changeEntityLocked=!1,this.transformer.loading=!1,n&&this.fireRender()}clear(){this.getAllNodes().map(e=>e.dispose()),this.linesManager.getAllLines().map(e=>e.dispose()),this.getAllPorts().map(e=>e.dispose()),this.selectServices.clear()}createWorkflowNode(e,n=!1,r){let i=this.getNode(e.id),o=this.getNode(r??this.root.id)??this.root,s=this.addNode({...e,parent:o},void 0,!0),{formMeta:a}=s.getNodeRegistry(),l=s.getNodeMeta(),h=s.getData(e2.Ps),c=s.getData(x.eG),u=this.layout;c.onDataChange(()=>{u.syncTransform(s)});let{position:d}=l;d||(d=this.getNodeDefaultPosition(e.type)),s.getData(b.VO).update({position:d}),a&&h&&!h.formModel.initialized&&(h.createForm(a,e.data),h.onDataChange(()=>{this.fireContentChange({type:"NODE_DATA_CHANGE",toJSON:()=>h.toJSON(),entity:s})}));let p=s.getData(b.WV);p.onDataChange(()=>{this.fireContentChange({type:"MOVE_NODE",toJSON:()=>p.toJSON(),entity:s})});let f=this.getNodeSubCanvas(s);return i||f?.isCanvas||(this.fireContentChange({type:"ADD_NODE",entity:s,toJSON:()=>this.toNodeJSON(s)}),s.toDispose.push(S.JT.create(()=>{this.fireContentChange({type:"DELETE_NODE",entity:s,toJSON:()=>this.toNodeJSON(s)})})),s.toDispose.push(S.JT.create(()=>{if(!s.parent||s.parent.flowNodeType===x.Sy.ROOT)return;let e=s.parent.getData(x.eG);setTimeout(()=>{e.fireChange()},0)}))),e.blocks&&this.renderJSON({nodes:e.blocks,edges:e.edges??[]},{parent:s,isClone:n}),f&&(f.canvasNode.getData(b.VO).update({position:f.parentNode.getNodeMeta()?.canvasPosition}),f.parentNode.onDispose(()=>{f.canvasNode.dispose()}),f.canvasNode.onDispose(()=>{f.parentNode.dispose()})),this.onNodeCreateEmitter.fire({node:s,data:e}),s}get layout(){let e=this.layouts.find(e=>e.name==this.currentLayoutKey);if(!e)throw Error(`Unknown flow layout: ${this.currentLayoutKey}`);return e}getNodeDefaultPosition(e){let{size:n}=this.getNodeRegistry(e).meta||{},r=this.playgroundConfig.getViewport(!0).center;return n&&(r={x:r.x,y:r.y-n.height/2}),function(e,n,r){let{x:i,y:o}=n;for(let n of e.getAllNodes().map(e=>{let n=e.getData(b.VO);return{x:n.position.x,y:n.position.y}}).sort((e,n)=>e.y-n.y)){let{x:e,y:r}=n;if(o-r<-3)break;let s=Math.abs(o-r);3>=Math.abs(i-e)&&s<=3&&(i+=30,o+=30)}return{x:i,y:o}}(this,r)}createWorkflowNodeByType(e,n,r={},i){let o=r.id;if(void 0===o)do o=`1${tf()}`;while(this.entityManager.getEntityById(o));else if(this.entityManager.getEntityById(o))throw Error(`[WorkflowDocument.createWorkflowNodeByType] Node Id "${o}" duplicated.`);return this.createWorkflowNode({...r,id:o,type:e,meta:{position:n,...r?.meta},data:r?.data,blocks:r?.blocks,edges:r?.edges},!1,i)}getAllNodes(){return this.entityManager.getEntities(e9).filter(e=>e.id!==x.Sy.ROOT)}getAllPorts(){return this.entityManager.getEntities(e7).filter(e=>e.node.id!==x.Sy.ROOT)}getAssociatedNodes(){let e=this.getAllNodes(),n=this.linesManager.getAllLines().filter(e=>e.from&&e.to).map(e=>({from:e.from.id,to:e.to.id})),r=e.find(e=>e.isStart).id,i=new Set([e.find(e=>e.isNodeEnd).id,...e.filter(e=>e.parent?.getNodeMeta().isContainer).map(e=>e.id)]),o=e=>{i.has(e)||(i.add(e),n.reduce((n,{from:r,to:o})=>(r!==e||i.has(o)||n.push(o),n),[]).forEach(o))};return o(r),e.filter(e=>i.has(e.id))}fireRender(){this.entityManager.fireEntityChanged(e9.type),this.entityManager.fireEntityChanged(ts.type),this.entityManager.fireEntityChanged(e7.type)}fireContentChange(e){this._loading||this.disposed||this.entityManager.changeEntityLocked||this._onContentChangeEmitter.fire(e)}toNodeJSON(e){let n=this.getNodeSubCanvas(e);if(n?.isCanvas===!0)return this.toNodeJSON(n.parentNode);let r=this.toNodeJSONFromOptions(e),i=this.getNodeChildren(e),o=i.map(e=>this.toNodeJSON(e)),s=new Map;i.forEach(e=>{let n=e.getData(tn);[...n.inputLines,...n.outputLines].filter(Boolean).forEach(e=>{let n=this.toLineJSON(e);!n||s.has(e.id)||s.set(e.id,n)})});let a=Array.from(s.values());return o.length>0&&(r.blocks=o),a.length>0&&(r.edges=a),r}toNodeJSONFromOptions(e){return this.options.toNodeJSON?this.options.toNodeJSON(e):tc.toNodeJSON(e)}copyNode(e,n,r,i){let o=this.toNodeJSON(e);return r&&(o=r(o)),i=i||{x:o.meta.position.x+30,y:o.meta.position.y+30},this.createWorkflowNode({id:n||`1${tf()}`,type:e.flowNodeType,meta:{...o.meta,position:i},data:o.data,blocks:o.blocks,edges:o.edges},!0,e.parent?.id)}copyNodeFromJSON(e,n,r,i,o){return i=i||{x:n.meta.position.x+30,y:n.meta.position.y+30},this.createWorkflowNode({id:r||`1${tf()}`,type:e,meta:{...n.meta,position:i},data:n.data,blocks:n.blocks,edges:n.edges},!0,o)}canRemove(e,n){return!e.getNodeMeta().deleteDisable&&(!this.options.canDeleteNode||!!this.options.canDeleteNode(e,n))}isErrorPort(e){return"function"==typeof this.options.isErrorPort&&this.options.isErrorPort(e)}toJSON(){let e=this.toNodeJSON(this.root);return{nodes:e.blocks??[],edges:e.edges??[]}}dispose(){this.disposed||(super.dispose(),this.disposed=!0,this._onReloadEmitter.dispose())}renderJSON(e,n){let{parent:r=this.root,isClone:i=!1}=n??{},o=this.getNodeSubCanvas(r)?.canvasNode.id??r.id;return{nodes:e.nodes.map(e=>this.createWorkflowNode(e,i,o)),edges:e.edges.map(e=>this.createWorkflowLine(e,o)).filter(Boolean)}}getNodeSubCanvas(e){if(!e)return;let n=e.getNodeMeta();return n.subCanvas?.(e)}getNodeChildren(e){if(!e)return[];let n=this.getNodeSubCanvas(e);return(n?n.canvasNode.collapsedChildren:e.collapsedChildren).filter(n=>{let r=n.getNodeMeta();return!r.subCanvas?.(e)?.isCanvas}).filter(Boolean)}toLineJSON(e){let n=e.toJSON();if(!e.from||!e.info.from||!e.fromPort||!e.to||!e.info.to||!e.toPort)return;let r=this.getNodeSubCanvas(e.from),i=this.getNodeSubCanvas(e.to);if(!r||r.isCanvas||!i||!i.isCanvas)return e.from===e.to.parent&&r?{...n,sourceNodeID:r.parentNode.id}:e.to===e.from.parent&&i?{...n,targetNodeID:i.parentNode.id}:n}createWorkflowLine(e,n){let r=this.getNode(e.sourceNodeID),i=this.getNode(e.targetNodeID);if(!r||!i)return;let o={from:e.sourceNodeID,fromPort:e.sourcePortID,to:e.targetNodeID,toPort:e.targetPortID};if(!n)return this.linesManager.createLine(o);let s=this.getNode(n);if(!s)return this.linesManager.createLine(o);let a=this.getNodeSubCanvas(s);return a?o.from===a.parentNode.id?this.linesManager.createLine({...o,from:a.canvasNode.id}):o.to===a.parentNode.id?this.linesManager.createLine({...o,to:a.canvasNode.id}):this.linesManager.createLine(o):this.linesManager.createLine(o)}};function tm(e,n,r){return!!(!r||e>100||Math.abs(n.endPos.x-n.startPos.x)>=5||Math.abs(n.endPos.y-n.startPos.y)>=5)}m([(0,C.f3)(tu)],ty.prototype,"linesManager",2),m([(0,C.f3)(b.ER)],ty.prototype,"playgroundConfig",2),m([(0,b.el)()],ty.prototype,"playgroundContext",2),m([(0,C.f3)(th)],ty.prototype,"options",2),m([(0,C.f3)(e2.j0),(0,C.jt)()],ty.prototype,"nodeEngineContext",2),m([(0,C.f3)(ta)],ty.prototype,"selectServices",2),m([(0,C.zY)()],ty.prototype,"init",1),ty=m([(0,C.b2)()],ty);var tv=class{constructor(){this._onDragLineEventEmitter=new S.Q5,this.onDragLineEventChange=this._onDragLineEventEmitter.event,this.isDragging=!1,this._nodesDragEmitter=new S.Q5,this.onNodesDrag=this._nodesDragEmitter.event,this._toDispose=new S.K4,this._droppableTransforms=[],this.posAdjusters=new Set,this._onDragLineEndCallbacks=new Map}init(){this._toDispose.pushAll([this._onDragLineEventEmitter,this._nodesDragEmitter]),this.options.onDragLineEnd&&this._toDispose.push(this.onDragLineEnd(this.options.onDragLineEnd))}dispose(){this._toDispose.dispose()}async startDragSelectedNodes(e){let{selectedNodes:n}=this.selectService;if(0===n.length||this.playgroundConfig.readonly||this.playgroundConfig.disabled||this.isDragging)return Promise.resolve(!1);this.isDragging=!0;let r=this.childrenOfContainer(n);r&&r.flowNodeType!==x.Sy.ROOT&&(n=[r]);let i=this.getNodesPosition(n),o=n.map(e=>{let n=e.getData(b.VO);return{x:n.position.x,y:n.position.y}}),s=!1,a=Date.now(),l=new b.s5({onDragStart:r=>{this._nodesDragEmitter.fire({type:"onDragStart",nodes:n,startPositions:o,dragEvent:r,triggerEvent:e,dragger:l})},onDrag:r=>{!s&&tm(Date.now()-a,r)&&(s=!0);let h=this.getDragPosOffset({event:r,selectedNodes:n,startPosition:i}),c=[];n.forEach((e,n)=>{let r=e.getData(b.VO),i=o[n],s={x:i.x+h.x,y:i.y+h.y};r.update({position:s}),this.document.layout.updateAffectedTransform(e),c.push(s)}),this._nodesDragEmitter.fire({type:"onDragging",nodes:n,startPositions:o,positions:c,dragEvent:r,triggerEvent:e,dragger:l})},onDragEnd:r=>{this.isDragging=!1,this._nodesDragEmitter.fire({type:"onDragEnd",nodes:n,startPositions:o,dragEvent:r,triggerEvent:e,dragger:l})}});return l.start(e.clientX,e.clientY,this.playgroundConfig)?.then(()=>s)}async dropCard(e,n,r,i){let o=this.playgroundConfig.getPosFromMouseEvent(n);if(!this.playgroundConfig.getViewport().contains(o.x,o.y))return;let s=this.adjustSubNodePosition(e,i,o);return await this.document.createWorkflowNodeByType(e,s,r,i?.id)}async startDragCard(e,n,r,i){let o,s={x:0,y:0},a=new S.cO,l=new b.s5({onDragStart:e=>{let r=n.currentTarget;o=i?i(e):r.cloneNode(!0);let a=r.getBoundingClientRect();s={x:a.left,y:a.top},S.xF.setStyle(o,{zIndex:1e3,position:"absolute",left:s.x,top:s.y,boxShadow:"0 6px 8px 0 rgba(28, 31, 35, .2)"}),document.body.appendChild(o),this.updateDroppableTransforms()},onDrag:e=>{let n=e.endPos.x-e.startPos.x,r=e.endPos.y-e.startPos.y,i=s.x+n,a=s.y+r;o.style.left=`${i}px`,o.style.top=`${a}px`;let{x:l,y:h}=this.playgroundConfig.getPosFromMouseEvent(e),c=new S.Ae(l,h,170,90),u=this._droppableTransforms.find(e=>{let{bounds:n,entity:r}=e,i=this.document.layout.getPadding(r),o=new S.Ae(n.x+i.left+i.right,n.y,n.width,n.height);return S.Ae.intersects(c,o)});this.updateDropNode(u?.entity)},onDragEnd:async n=>{let i=this._dropNode,{allowDrop:l}=this.canDropToNode({dragNodeType:e,dropNode:i}),h=l?await this.dropCard(e,n,r,i):void 0;(this.clearDrop(),h)?(o.remove(),a.resolve(h)):(o.style.transition="all ease .2s",o.style.left=`${s.x}px`,o.style.top=`${s.y}px`,await (0,S.gw)(200),o.remove(),a.resolve())}});return await l.start(n.clientX,n.clientY),a.promise}adjustSubNodePosition(e,n,r,i=!0){if(!r)return{x:0,y:0};if(!e||!n||n.flowNodeType===x.Sy.ROOT)return r;let o=!n.children||0===n.children.length,s=this.document.layout.getPadding(n),a=n.getData(b.VO);return o&&i?{x:0,y:s.top}:{x:r.x-a.position.x,y:r.y-a.position.y}}registerPosAdjuster(e){return this.posAdjusters.add(e),{dispose:()=>this.posAdjusters.delete(e)}}canDropToNode(e){let{dragNodeType:n,dropNode:r}=e;return n?{allowDrop:!0,dropNode:r}:{allowDrop:!1,message:"Please select a node to drop"}}getDragPosOffset(e){let{event:n,selectedNodes:r,startPosition:i}=e,{finalScale:o}=this.playgroundConfig,s={x:(n.endPos.x-n.startPos.x)/o,y:(n.endPos.y-n.startPos.y)/o},a={x:i.x+s.x,y:i.y+s.y};return Array.from(this.posAdjusters.values()).map(e=>e({selectedNodes:r,position:a})).reduce((e,n)=>({x:e.x+n.x,y:e.y+n.y}),s)}updateDroppableTransforms(){this._droppableTransforms=this.document.getRenderDatas(x.eG,!1).filter(e=>{let{entity:n}=e;return n.originParent?this.nodeSelectable(n)&&this.nodeSelectable(n.originParent):this.nodeSelectable(n)}).filter(e=>this.isContainer(e.entity))}isContainer(e){return e?.getNodeMeta().isContainer??!1}getNodesPosition(e){let n=S.Ae.enlarge(e.map(e=>e.getData(x.eG).bounds));return{x:n.x,y:n.y}}nodeSelectable(e){let n=e.getNodeMeta().selectable;return"function"==typeof n?n(e):n}updateDropNode(e){if(this._dropNode){if(this._dropNode.id===e?.id)return;this.selectService.clear()}e&&this.selectService.selectNode(e),this._dropNode=e}clearDrop(){this._dropNode&&this.selectService.clear(),this._dropNode=void 0,this._droppableTransforms=[]}setLineColor(e,n){e.highlightColor=n,this.hoverService.clearHovered()}handleDragOnNode(e,n,r,i,o){return i&&(o?.toPort===i||"input"===i.portType&&this.linesManager.canAddLine(n,i,!0))?(this.hoverService.updateHoveredKey(i.id),r.setToPort(i),this._onDragLineEventEmitter.fire({type:"onDrag",onDragNodeId:e.id}),{hasError:!1}):this.isContainer(e)?{hasError:!1}:(this.setLineColor(r,this.linesManager.lineColor.error),{hasError:!0})}childrenOfContainer(e){if(0===e.length)return;let n=e[0]?.parent;if(n&&n.collapsedChildren.length===e.length&&e.every(e=>e?.parent===n))return n}async startDrawingLine(e,n,r){let i=!r&&e.isErrorPort()&&e.disabled;if(r?.disabled||i||this.playgroundConfig.readonly||this.playgroundConfig.disabled)return{dragSuccess:!1,newLine:void 0};this.selectService.clear();let o=this.playgroundConfig,s=new S.cO,a=o.cursor,l,h,c,u=!1,d=Date.now(),p=!1,f=new b.s5({onDrag:i=>{if(!l&&tm(Date.now()-d,i,r)){if(r&&(r.highlightColor=this.linesManager.lineColor.hidden),p=!0,!(l=this.linesManager.createLine({from:e.node.id,fromPort:e.portID,drawingTo:o.getPosFromMouseEvent(n)})))return;o.updateCursor("grab"),l.highlightColor=this.linesManager.lineColor.drawing,this.hoverService.updateHoveredKey("")}if(!l)return;u=!1;let s=o.getPosFromMouseEvent(i);if(c=this.linesManager.getNodeFromMousePos(s),(h=this.linesManager.getPortFromMousePos(s))?this.linesManager.canAddLine(e,h,!0)?l.setToPort(h):(l.highlightColor=this.linesManager.lineColor.error,u=!0,l.setToPort(void 0)):l.setToPort(void 0),this._onDragLineEventEmitter.fire({type:"onDrag"}),this.setLineColor(l,this.linesManager.lineColor.drawing),c&&!this.isContainer(c)){let{inputPorts:n}=c.getData(te);1===n.length&&(h=n[0]);let{hasError:i}=this.handleDragOnNode(c,e,l,h,r);u=i}l.toPort?l.drawingTo={x:l.toPort.point.x,y:l.toPort.point.y}:l.drawingTo={x:s.x,y:s.y},r?.validate(),l.validate()},onDragEnd:async n=>{let i=o.getPosFromMouseEvent(n),c=Array.from(this._onDragLineEndCallbacks.values());o.updateCursor(a),await Promise.all(c.map(o=>o({fromPort:e,toPort:h,mousePos:i,line:l,originLine:r,event:n}))),l?.dispose(),this._onDragLineEventEmitter.fire({type:"onDragEnd"}),r&&(r.highlightColor="");let d=()=>{r?.validate(),s.resolve({dragSuccess:p})};if(p){if(r&&r.toPort===h||h&&"input"!==h.portType)return d();let n=h?{from:e.node.id,fromPort:e.portID,to:h.node.id,toPort:h.portID}:void 0;if(r&&h&&!this.linesManager.canReset(r.fromPort,r.toPort,h)||r&&(!this.linesManager.canRemove(r,n,!1)||u))return d();if(r?.dispose(),!h||!this.linesManager.canAddLine(e,h,!1))return d();let i=this.linesManager.createLine(n);i||d(),s.resolve({dragSuccess:p,newLine:i})}else d()}});return await f.start(n.clientX,n.clientY,o),s.promise}async resetLine(e,n){let{fromPort:r}=e,{dragSuccess:i}=await this.startDrawingLine(r,n,e);i||this.selectService.select(e)}onDragLineEnd(e){let n=(0,D.x0)();return this._onDragLineEndCallbacks.set(n,e),{dispose:()=>{this._onDragLineEndCallbacks.delete(n)}}}};m([(0,C.f3)(b.ER)],tv.prototype,"playgroundConfig",2),m([(0,C.f3)(tl)],tv.prototype,"hoverService",2),m([(0,C.f3)(ty)],tv.prototype,"document",2),m([(0,C.f3)(tu)],tv.prototype,"linesManager",2),m([(0,C.f3)(b.VD)],tv.prototype,"commandService",2),m([(0,C.f3)(ta)],tv.prototype,"selectService",2),m([(0,C.f3)(x.VO)],tv.prototype,"operationService",2),m([(0,C.f3)(th)],tv.prototype,"options",2),m([(0,C.zY)()],tv.prototype,"init",1),tv=m([(0,C.b2)()],tv);var tb=async(e,n)=>{let r={};return e.forEach(e=>{let n=e.getData(b.VO),i=e.getData(x.eG);r[e.id]={x:n.position.x,y:n.position.y+i.bounds.height/2}}),new Promise(i=>{(0,b.p4)({from:{d:0},to:{d:100},duration:300,onUpdate:r=>{e.forEach(e=>{let i=e.getData(b.VO),o=(n[e.id].x-i.position.x)*r.d/100,s=(n[e.id].y-i.bounds.height/2-i.position.y)*r.d/100;i.update({position:{x:i.position.x+o,y:i.position.y+s}}),e.document.layout.updateAffectedTransform(e)})},onComplete:()=>{i(r)}})})},t_=class{constructor(){this._resetLayoutEmitter=new S.Q5,this.onResetLayout=this._resetLayoutEmitter.event,this._toDispose=new S.K4}init(){this._toDispose.push(this._resetLayoutEmitter)}fireResetLayout(e,n,r){this._resetLayoutEmitter.fire({nodeIds:e,positionMap:n,oldPositionMap:r})}async layoutToPositions(e,n){let r=e.map(e=>this._entityManager.getEntityById(e)).filter(Boolean),i=await tb(r,n);return e5(this._document,this._config,!0),i}dispose(){this._toDispose.dispose()}};m([(0,C.f3)(b.ER)],t_.prototype,"_config",2),m([(0,C.f3)(ty)],t_.prototype,"_document",2),m([(0,C.f3)(b.v2)],t_.prototype,"_entityManager",2),m([(0,C.zY)()],t_.prototype,"init",1),t_=m([(0,C.b2)()],t_);var tE=class extends x.D9{constructor(){super(...arguments),this.onNodePostionUpdateEmitter=new S.Q5,this.onNodePostionUpdate=this.onNodePostionUpdateEmitter.event}updateNodePosition(e,n){let r=this.toNodeEntity(e);if(!r)return;let i=r.getData(b.VO),o={x:i.position.x,y:i.position.y};i.update({position:n}),this.onNodePostionUpdateEmitter.fire({node:r,oldPosition:o,newPosition:n})}};function tw(e){let n=(0,b.Dc)(),r=(0,b.JA)();return(0,_.useEffect)(()=>{let i;return e&&(i=n.config.onReadonlyOrDisabledChange(()=>r())),()=>i?.dispose()},[e]),n.config.readonly}function tx(e){return e&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.closest(".flow-canvas-not-draggable")}function tC(e){let n=e||(0,_.useContext)(b.rQ),r=n.getData(x.Lz),i=n.getData(te),o=tw(),s=(0,b.G2)(tv),a=(0,b.G2)(ta),l=(0,_.useRef)(!1),h=(0,_.useRef)(null),[c,u]=(0,_.useState)("");(0,_.useEffect)(()=>{let e=s.onDragLineEventChange(({type:e,onDragNodeId:n})=>{"onDrag"===e?u(n||""):u("")});return()=>{e.dispose()}},[]);let d=(0,_.useCallback)(e=>{e.preventDefault(),a.isSelected(n.id)||p(e),tx(e.target)&&tx(document.activeElement)&&(l.current=!0,s.startDragSelectedNodes(e)?.finally(()=>setTimeout(()=>{l.current=!1})))},[s,n]),p=(0,_.useCallback)(e=>{!l.current&&(e.shiftKey?a.toggleSelect(n):a.selectNode(n),e.target&&e.target.focus())},[n]),f=(0,_.useCallback)(()=>n.dispose(),[n]);(0,b.H$)(i.onDataChange);let g=navigator?.userAgent?.includes?.("Firefox"),y=(0,_.useCallback)(()=>{g&&h.current?.setAttribute("draggable","false")},[]),m=(0,_.useCallback)(()=>{g&&h.current?.setAttribute("draggable","true")},[]),C=(0,_.useCallback)(()=>n.getExtInfo(),[n]),S=(0,_.useCallback)(e=>{n.updateExtInfo(e)},[n]),D=(0,_.useMemo)(()=>(0,w.CM)(n),[n]),N=(0,E.Re)(D?.state),O=(0,_.useCallback)(()=>{r.toggleExpand()},[r]);return{node:n,selected:a.isSelected(n.id),activated:a.isActivated(n.id),expanded:r.expanded,startDrag:d,ports:i.allPorts,deleteNode:f,selectNode:p,readonly:o,linkingNodeId:c,nodeRef:h,onFocus:y,onBlur:m,getExtInfo:C,updateExtInfo:S,toggleExpand:O,get form(){if(!D)return;return{...D,get values(){return D.values},get state(){return N}}}}}function tS(){return(0,b.km)()}m([(0,C.f3)(ty)],tE.prototype,"document",2);var tD=((h=tD||{}).GRAB="GRAB",h.SELECT="SELECT",h),tN=((c=tN||{}).MOUSE="MOUSE",c.PAD="PAD",c),tO=class{registerDocument(e){e.registerNodeDatas(x.eG,x.Lz,te,tn),e.registerLayout(this.freeLayout)}};m([(0,C.f3)(tp)],tO.prototype,"freeLayout",2),tO=m([(0,C.b2)()],tO);var tM=new C.nZ((e,n,r,i)=>{e(ty).toSelf().inSingletonScope(),e(tu).toSelf().inSingletonScope(),e(tp).toSelf().inSingletonScope(),e(tv).toSelf().inSingletonScope(),e(ta).toSelf().inSingletonScope(),e(tl).toSelf().inSingletonScope(),e(t_).toSelf().inSingletonScope(),e(f).to(tE).inSingletonScope(),e(u).toDynamicValue(()=>location.search.replace(/^\?/,"").split("&").reduce((e,n)=>{let[r,i]=n.split("=");return e[r]=i,e},{})).inSingletonScope(),(0,S.KV)(e,tO,[x.Lw]),e(th).toConstantValue({...tc}),i(x.pQ).toService(ty),e(tg).toDynamicValue(e=>()=>e.container.get(ty)).inSingletonScope()})},1199:function(e,n,r){"use strict";r.d(n,{oJU:()=>a.oJ,v2K:()=>s.v2K,M1y:()=>s.M1y,Nj8:()=>h.Nj,z2R:()=>s.z2R,f3M:()=>s.f3M,rQR:()=>s.rQR,qRT:()=>s.qRT,dmf:()=>a.dm,XHk:()=>a.XH,JAk:()=>s.JAk,qoQ:()=>s.qoQ,eGM:()=>s.eGM,sX$:()=>tm,R6T:()=>s.R6T,HoL:()=>s.HoL,iwM:()=>a.iw,VOn:()=>s.VOn,ERL:()=>s.ERL,Z14:()=>a.Z1,Q5$:()=>s.Q5$,Psq:()=>s.Psq,Jbc:()=>f.Jb,Dcz:()=>s.Dcz,F26:()=>s.F26,EhS:()=>tl,XQj:()=>s.XQj,C$T:()=>s.C$T,AeJ:()=>s.AeJ,gw0:()=>s.gw0,_J4:()=>s._J4,CMu:()=>s.CMu,b2C:()=>s.b2C,kmj:()=>s.kmj,PVB:()=>a.PV,G2Z:()=>s.G2Z,L4w:()=>a.L4,erw:()=>tv,CTO:()=>a.CT,gNt:()=>s.gNt,e2M:()=>a.e2,bQo:()=>to,qpv:()=>h.qp,PFB:()=>a.PF,l09:()=>s.l09}),r(9453);var i,o,s=r(8820),a=r(1097),l=r(4194),h=r(8176),c=r(4706),u=r(8319),d=(0,u.M1)({onInit(e,n){!1!==n.enable&&(e.playground.registerLayer(c.aK,n),e.playground.registerLayer(c.Kz,{canSelect:n.canSelect}))}}),p=r(6141),f=r(7341),g=r(4210),y=r(2100),m=r(8336),b=Object.defineProperty,_=Object.getOwnPropertyDescriptor,E=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?_(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&b(n,r,s),s};(i||(i={})).DEFAULT={canHovered:()=>!0};var w=class extends u.mh{constructor(){super(...arguments),this.nodeTransformsWithSort=[]}autorun(){let{activatedNode:e}=this.selectionService;this.nodeTransformsWithSort=this.nodeTransforms.filter(e=>"root"!==e.entity.id).reverse().sort(n=>n.entity===e?-1:0)}get isDrawing(){return this.linesManager.isDrawing}onReady(){this.options={...i.DEFAULT,...this.options},this.toDispose.pushAll([this.listenPlaygroundEvent("mousemove",e=>{if(this.hoverService.hoveredPos=this.config.getPosFromMouseEvent(e),!this.isEnabled()||!this.options.canHovered(e,this.hoverService))return;let n=this.config.getPosFromMouseEvent(e);this.updateHoveredState(n,e?.target)}),this.selectionService.onSelectionChanged(()=>this.autorun()),this.listenPlaygroundEvent("mousedown",e=>{if(!this.isEnabled()||this.isDrawing)return;let{hoveredNode:n}=this.hoverService;if(n&&n instanceof a.e2)return this.dragService.resetLine(n,e),!0;if(n&&n instanceof a.FD&&"input"!==n.portType&&!n.disabled&&1!==e.button)return e.stopPropagation(),e.preventDefault(),this.dragService.startDrawingLine(n,e),!0;let r=this.config.getPosFromMouseEvent(e),i=function(e,n=!0){let r=e.filter(e=>e instanceof a.CT);return r.length>+!!n?m.Ae.enlarge(r.map(e=>e.getData(y.eG).bounds)).pad(2):m.Ae.EMPTY}(this.selectionService.selection,!0);if(i.width>0&&i.contains(r.x,r.y))return this.dragService.startDragSelectedNodes(e)?.then(r=>{r||(n&&n instanceof a.CT?e.shiftKey?this.selectionService.toggleSelect(n):this.selectionService.selectNode(n):this.selectionService.clear())}),!0;n||this.selectionService.clear()})])}updateHoveredState(e,n){let{hoverService:r}=this,i=this.nodeTransformsWithSort,o=this.linesManager.getPortFromMousePos(e),s=[...this.playgroundNode.querySelectorAll(".gedit-flow-activity-line")].some(e=>e.contains(n));if(o){if("output"===o.portType)r.updateHoveredKey(o.id);else if(s||n?.className?.includes?.("workflow-port-bg")){let n=this.linesManager.getCloseInLineFromMousePos(e);n&&this.updateHoveredKey(n.id)}return}if(this.isDrawing)return;let a=i.find(n=>n.bounds.contains(e.x,e.y))?.entity,l=[...this.playgroundNode.querySelectorAll(".gedit-flow-activity-node")].some(e=>e.contains(n));(a||l)&&a?.id&&this.updateHoveredKey(a.id);let h=!!(a?.parent&&"root"!==a.parent.flowNodeType),c=s?this.linesManager.getCloseInLineFromMousePos(e):void 0,d=!!c?.inContainer;return a&&h?void this.updateHoveredKey(a.id):c&&d?void this.updateHoveredKey(c.id):a?void this.updateHoveredKey(a.id):c?void this.hoverService.updateHoveredKey(c.id):void(r.clearHovered(),this.editorStateConfig.getCurrentState()===u.yy.STATE_MOUSE_FRIENDLY_SELECT&&!this.editorStateConfig.isPressingShift&&this.configEntity.updateCursor("grab"))}updateHoveredKey(e){this.configEntity.updateCursor("default"),this.hoverService.updateHoveredKey(e)}isEnabled(){let e=this.editorStateConfig.getCurrentState();return(e===u.yy.STATE_SELECT||e===u.yy.STATE_MOUSE_FRIENDLY_SELECT)&&!this.selectorBoxConfigEntity.isStart&&!this.dragService.isDragging}};w.type="HoverLayer",E([(0,g.f3)(a.L4)],w.prototype,"document",2),E([(0,g.f3)(a.oJ)],w.prototype,"selectionService",2),E([(0,g.f3)(a.iw)],w.prototype,"dragService",2),E([(0,g.f3)(a.XH)],w.prototype,"hoverService",2),E([(0,g.f3)(a.dm)],w.prototype,"linesManager",2),E([(0,u.O0)(u.Zs)],w.prototype,"editorStateConfig",2),E([(0,u.O0)(c.NQ)],w.prototype,"selectorBoxConfigEntity",2),E([(0,g.f3)(u.ER)],w.prototype,"configEntity",2),E([(0,u.aI)(a.CT,y.eG)],w.prototype,"nodeTransforms",2),E([(0,u.RX)(a.e2)],w.prototype,"lines",2),w=E([(0,g.b2)()],w);var x=(0,u.M1)({onInit(e){e.playground.registerLayer(w)}}),C=r(2276),S=Object.defineProperty,D=Object.getOwnPropertyDescriptor,N=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?D(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&S(n,r,s),s},O=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,n=e._prev;if(n!==e)return M(n),n}enqueue(e){let n=this._sentinel;e._prev&&e._next&&M(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n}toString(){let e=[],n=this._sentinel,r=n._prev;for(;r!==n;)e.push(JSON.stringify(r,I)),r=r._prev;return"["+e.join(", ")+"]"}};function M(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function I(e,n){if("_next"!==e&&"_prev"!==e)return n}var T=()=>1;function k(e,n,r,i,o){let s=o?[]:void 0;return e.inEdges(i.v).forEach(i=>{let a=e.edge(i),l=e.node(i.v);o&&s.push({v:i.v,w:i.w}),l.out-=a,P(n,r,l)}),e.outEdges(i.v).forEach(i=>{let o=e.edge(i),s=i.w,a=e.node(s);a.in-=o,P(n,r,a)}),e.removeNode(i.v),s}function P(e,n,r){r.out?r.in?e[r.out-r.in+n].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var A={addBorderNode:function(e,n,r,i){let o={width:0,height:0};return arguments.length>=4&&(o.rank=r,o.order=i),L(e,"border",o,n)},addDummyNode:L,applyWithChunking:V,asNonCompoundGraph:function(e){let n=new C.Graph({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(r=>{e.children(r).length||n.setNode(r,e.node(r))}),e.edges().forEach(r=>{n.setEdge(r,e.edge(r))}),n},buildLayerMatrix:function(e){let n=H(F(e)+1).map(()=>[]);return e.nodes().forEach(r=>{let i=e.node(r),o=i.rank;void 0!==o&&(n[o][i.order]=r)}),n},intersectRect:function(e,n){let r,i,o=e.x,s=e.y,a=n.x-o,l=n.y-s,h=e.width/2,c=e.height/2;if(!a&&!l)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(l)*h>Math.abs(a)*c?(l<0&&(c=-c),r=c*a/l,i=c):(a<0&&(h=-h),r=h,i=h*l/a),{x:o+r,y:s+i}},mapValues:function(e,n){let r=n;return"string"==typeof n&&(r=e=>e[n]),Object.entries(e).reduce((e,[n,i])=>(e[n]=r(i,n),e),{})},maxRank:F,normalizeRanks:R,notime:function(e,n){return n()},partition:function(e,n){let r={lhs:[],rhs:[]};return e.forEach(e=>{n(e)?r.lhs.push(e):r.rhs.push(e)}),r},pick:function(e,n){let r={};for(let i of n)void 0!==e[i]&&(r[i]=e[i]);return r},predecessorWeights:function(e){let n=e.nodes().map(n=>{let r={};return e.inEdges(n).forEach(n=>{r[n.v]=(r[n.v]||0)+e.edge(n).weight}),r});return K(e.nodes(),n)},range:H,removeEmptyRanks:z,simplify:j,successorWeights:function(e){let n=e.nodes().map(n=>{let r={};return e.outEdges(n).forEach(n=>{r[n.w]=(r[n.w]||0)+e.edge(n).weight}),r});return K(e.nodes(),n)},time:function(e,n){let r=Date.now();try{return n()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}},uniqueId:B,zipObject:K};function L(e,n,r,i){let o;do o=B(i);while(e.hasNode(o));return r.dummy=n,e.setNode(o,r),o}function j(e){let n=new C.Graph().setGraph(e.graph());return e.nodes().forEach(r=>n.setNode(r,e.node(r))),e.edges().forEach(r=>{let i=n.edge(r.v,r.w)||{weight:0,minlen:1},o=e.edge(r);n.setEdge(r.v,r.w,{weight:i.weight+o.weight,minlen:Math.max(i.minlen,o.minlen)})}),n}function R(e){let n=V(Math.min,e.nodes().map(n=>{let r=e.node(n).rank;return void 0===r?Number.MAX_VALUE:r}));e.nodes().forEach(r=>{let i=e.node(r);Object.hasOwn(i,"rank")&&(i.rank-=n)})}function z(e){let n=V(Math.min,e.nodes().map(n=>e.node(n).rank)),r=[];e.nodes().forEach(i=>{let o=e.node(i).rank-n;r[o]||(r[o]=[]),r[o].push(i)});let i=0,o=e.graph().nodeRankFactor;Array.from(r).forEach((n,r)=>{void 0===n&&r%o!=0?--i:void 0!==n&&i&&n.forEach(n=>e.node(n).rank+=i)})}function V(e,n){if(!(n.length>65535))return e.apply(null,n);{let r=function(e,n=65535){let r=[];for(let i=0;i<e.length;i+=n){let o=e.slice(i,i+n);r.push(o)}return r}(n);return e.apply(null,r.map(n=>e.apply(null,n)))}}function F(e){return V(Math.max,e.nodes().map(n=>{let r=e.node(n).rank;return void 0===r?Number.MIN_VALUE:r}))}var $=0;function B(e){var n=++$;return toString(e)+n}function H(e,n,r=1){null==n&&(n=e,e=0);let i=e=>e<n;r<0&&(i=e=>n<e);let o=[];for(let n=e;i(n);n+=r)o.push(n);return o}function K(e,n){return e.reduce((e,r,i)=>(e[r]=n[i],e),{})}function U(e){var n={};e.sources().forEach(function r(i){var o=e.node(i);if(Object.hasOwn(n,i))return o.rank;n[i]=!0;var s=V(Math.min,e.outEdges(i).map(n=>null==n?Number.POSITIVE_INFINITY:r(n.w)-e.edge(n).minlen));return s===Number.POSITIVE_INFINITY&&(s=0),o.rank=s})}function W(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen}function G(e){var n,r,i,o,s=new C.Graph({directed:!1}),a=e.nodes()[0],l=e.nodeCount();for(s.setNode(a,{});n=s,r=e,n.nodes().forEach(function e(i){r.nodeEdges(i).forEach(o=>{var s=o.v,a=i===s?o.w:s;n.hasNode(a)||W(r,o)||(n.setNode(a,{}),n.setEdge(i,a,{}),e(a))})}),n.nodeCount()<l;)i=function(e,n){return n.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return(e.hasNode(i.v)!==e.hasNode(i.w)&&(o=W(n,i)),o<r[0])?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}(s,e),o=s.hasNode(i.v)?W(e,i):-W(e,i),function(e,n,r){e.nodes().forEach(e=>n.node(e).rank+=r)}(s,e,o);return s}var{preorder:Y,postorder:Z}=C.alg;function X(e){U(e=j(e));var n,r,i=G(e);for(J(i),Q(i,e);n=ee(i);)r=et(i,e,n),en(i,e,n,r)}function Q(e,n){var r=Z(e,e.nodes());(r=r.slice(0,r.length-1)).forEach(r=>{var i,o,s,a;return i=e,o=n,s=r,a=i.node(s).parent,void(i.edge(s,a).cutvalue=q(i,o,s))})}function q(e,n,r){var i=e.node(r).parent,o=!0,s=n.edge(r,i),a=0;return s||(o=!1,s=n.edge(i,r)),a=s.weight,n.nodeEdges(r).forEach(s=>{var l=s.v===r,h=l?s.w:s.v;if(h!==i){var c,u,d,p=l===o,f=n.edge(s).weight;if(a+=p?f:-f,c=e,u=r,d=h,c.hasEdge(u,d)){var g=e.edge(r,h).cutvalue;a+=p?-g:g}}}),a}function J(e,n){arguments.length<2&&(n=e.nodes()[0]),function e(n,r,i,o,s){var a=i,l=n.node(o);return r[o]=!0,n.neighbors(o).forEach(s=>{Object.hasOwn(r,s)||(i=e(n,r,i,s,o))}),l.low=a,l.lim=i++,s?l.parent=s:delete l.parent,i}(e,{},1,n)}function ee(e){return e.edges().find(n=>e.edge(n).cutvalue<0)}function et(e,n,r){var i=r.v,o=r.w;n.hasEdge(i,o)||(i=r.w,o=r.v);var s=e.node(i),a=e.node(o),l=s,h=!1;return s.lim>a.lim&&(l=a,h=!0),n.edges().filter(n=>h===er(e,e.node(n.v),l)&&h!==er(e,e.node(n.w),l)).reduce((e,r)=>W(n,r)<W(n,e)?r:e)}function en(e,n,r,i){var o,s,a,l,h=r.v,c=r.w;e.removeEdge(h,c),e.setEdge(i.v,i.w,{}),J(e),Q(e,n),o=e,s=n,a=o.nodes().find(e=>!s.node(e).parent),(l=(l=Y(o,a)).slice(1)).forEach(e=>{var n=o.node(e).parent,r=s.edge(e,n),i=!1;r||(r=s.edge(n,e),i=!0),s.node(e).rank=s.node(n).rank+(i?r.minlen:-r.minlen)})}function er(e,n,r){return r.low<=n.lim&&n.lim<=r.lim}X.initLowLimValues=J,X.initCutValues=Q,X.calcCutValue=q,X.leaveEdge=ee,X.enterEdge=et,X.exchangeEdges=en;var ei=U;function eo(e,n,r,i,o,s){let a=o[n][s-1],l=A.addDummyNode(e,"border",{width:0,height:0,rank:s,borderType:n},r);o[n][s]=l,e.setParent(l,i),a&&e.setEdge(a,l,{weight:1})}function es(e){e.nodes().forEach(n=>ea(e.node(n))),e.edges().forEach(n=>ea(e.edge(n)))}function ea(e){let n=e.width;e.width=e.height,e.height=n}function el(e){e.y=-e.y}function eh(e){let n=e.x;e.x=e.y,e.y=n}var ec=function(e,n){let r=0;for(let i=1;i<n.length;++i)r+=function(e,n,r){let i=K(r,r.map((e,n)=>n)),o=n.flatMap(n=>e.outEdges(n).map(n=>({pos:i[n.w],weight:e.edge(n).weight})).sort((e,n)=>e.pos-n.pos)),s=1;for(;s<r.length;)s<<=1;let a=2*s-1;s-=1;let l=Array(a).fill(0),h=0;return o.forEach(e=>{let n=e.pos+s;l[n]+=e.weight;let r=0;for(;n>0;)n%2&&(r+=l[n+1]),n=n-1>>1,l[n]+=e.weight;h+=e.weight*r}),h}(e,n[i-1],n[i]);return r};function eu(e,n,r){let i;for(;n.length&&(i=n[n.length-1]).i<=r;)n.pop(),e.push(i.vs),r++;return r}function ed(e,n,r){return n.map(function(n){var i,o,s;let a,l;return i=e,o=n,s=r,a=function(e){for(var n;e.hasNode(n=A.uniqueId("_root")););return n}(i),l=new C.Graph({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(e=>i.node(e)),i.nodes().forEach(e=>{let n=i.node(e),r=i.parent(e);(n.rank===o||n.minRank<=o&&o<=n.maxRank)&&(l.setNode(e),l.setParent(e,r||a),i[s](e).forEach(n=>{let r=n.v===e?n.w:n.v,o=l.edge(r,e),s=void 0!==o?o.weight:0;l.setEdge(r,e,{weight:i.edge(n).weight+s})}),Object.hasOwn(n,"minRank")&&l.setNode(e,{borderLeft:n.borderLeft[o],borderRight:n.borderRight[o]}))}),l})}function ep(e,n){Object.values(n).forEach(n=>n.forEach((n,r)=>e.node(n).order=r))}function ef(e,n,r){if(n>r){let e=n;n=r,r=e}let i=e[n];i||(e[n]=i={}),i[r]=!0}var eg=["nodesep","edgesep","ranksep","marginx","marginy"],ey={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},em=["acyclicer","ranker","rankdir","align"],ev=["width","height"],eb={width:0,height:0},e_=["minlen","weight","width","height","labeloffset"],eE={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ew=["labelpos"];function ex(e,n){return A.mapValues(A.pick(e,n),Number)}function eC(e){var n={};return e&&Object.entries(e).forEach(([e,r])=>{"string"==typeof e&&(e=e.toLowerCase()),n[e]=r}),n}var eS=function(e){let n=new C.Graph({multigraph:!0,compound:!0}),r=eC(e.graph());return n.setGraph(Object.assign({},ey,ex(r,eg),A.pick(r,em))),e.nodes().forEach(r=>{let i=ex(eC(e.node(r)),ev);Object.keys(eb).forEach(e=>{void 0===i[e]&&(i[e]=eb[e])}),n.setNode(r,i),n.setParent(r,e.parent(r))}),e.edges().forEach(r=>{let i=eC(e.edge(r));n.setEdge(r,Object.assign({},eE,ex(i,e_),A.pick(i,ew)))}),n},eD=function(e,n){e.nodes().forEach(r=>{let i=e.node(r),o=n.node(r);i&&(i.x=o.x,i.y=o.y,i.rank=o.rank,n.children(r).length&&(i.width=o.width,i.height=o.height))}),e.edges().forEach(r=>{let i=e.edge(r),o=n.edge(r);i.points=o.points,Object.hasOwn(o,"x")&&(i.x=o.x,i.y=o.y)}),e.graph().width=n.graph().width,e.graph().height=n.graph().height},eN=function(e){let n=e.graph();n.ranksep/=2,e.edges().forEach(r=>{let i=e.edge(r);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)})},eO=function(e){e.edges().forEach(n=>{if(n.v===n.w){var r=e.node(n.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:n,label:e.edge(n)}),e.removeEdge(n)}})},eM=function(e){var n,r;let i,o,s;("greedy"===e.graph().acyclicer?function(e,n){var r,i;let o,s,a,l,h;if(1>=e.nodeCount())return[];let c=(r=e,i=n||T,o=new C.Graph,s=0,a=0,r.nodes().forEach(e=>{o.setNode(e,{v:e,in:0,out:0})}),r.edges().forEach(e=>{let n=o.edge(e.v,e.w)||0,r=i(e);o.setEdge(e.v,e.w,n+r),a=Math.max(a,o.node(e.v).out+=r),s=Math.max(s,o.node(e.w).in+=r)}),l=(function(e){let n=[];for(let r=0;r<e;r++)n.push(r);return n})(a+s+3).map(()=>new O),h=s+1,o.nodes().forEach(e=>{P(l,h,o.node(e))}),{graph:o,buckets:l,zeroIdx:h});return(function(e,n,r){let i,o=[],s=n[n.length-1],a=n[0];for(;e.nodeCount();){for(;i=a.dequeue();)k(e,n,r,i);for(;i=s.dequeue();)k(e,n,r,i);if(e.nodeCount()){for(let s=n.length-2;s>0;--s)if(i=n[s].dequeue()){o=o.concat(k(e,n,r,i,!0));break}}}return o})(c.graph,c.buckets,c.zeroIdx).flatMap(n=>e.outEdges(n.v,n.w))}(e,(n=e,e=>n.edge(e).weight)):(i=[],o={},s={},(r=e).nodes().forEach(function e(n){Object.hasOwn(s,n)||(s[n]=!0,o[n]=!0,r.outEdges(n).forEach(n=>{Object.hasOwn(o,n.w)?i.push(n):e(n.w)}),delete o[n])}),i)).forEach(n=>{let r=e.edge(n);e.removeEdge(n),r.forwardName=n.name,r.reversed=!0,e.setEdge(n.w,n.v,r,B("rev"))})},eI=function(e){e.edges().forEach(n=>{let r=e.edge(n);if(r.reversed){e.removeEdge(n);let i=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(n.w,n.v,r,i)}})},eT=function(e){var n,r,i;let o=A.addDummyNode(e,"root",{},"_root"),s=(r={},(n=e).children().forEach(e=>(function e(i,o){var s=n.children(i);s&&s.length&&s.forEach(n=>e(n,o+1)),r[i]=o})(e,1)),r),a=Object.values(s),l=A.applyWithChunking(Math.max,a)-1,h=2*l+1;e.graph().nestingRoot=o,e.edges().forEach(n=>e.edge(n).minlen*=h);let c=(i=e).edges().reduce((e,n)=>e+i.edge(n).weight,0)+1;e.children().forEach(n=>(function e(n,r,i,o,s,a,l){let h=n.children(l);if(!h.length){l!==r&&n.setEdge(r,l,{weight:0,minlen:i});return}let c=A.addBorderNode(n,"_bt"),u=A.addBorderNode(n,"_bb"),d=n.node(l);n.setParent(c,l),d.borderTop=c,n.setParent(u,l),d.borderBottom=u,h.forEach(h=>{e(n,r,i,o,s,a,h);let d=n.node(h),p=d.borderTop?d.borderTop:h,f=d.borderBottom?d.borderBottom:h,g=d.borderTop?o:2*o,y=p!==f?1:s-a[l]+1;n.setEdge(c,p,{weight:g,minlen:y,nestingEdge:!0}),n.setEdge(f,u,{weight:g,minlen:y,nestingEdge:!0})}),n.parent(l)||n.setEdge(r,c,{weight:0,minlen:s+a[l]})})(e,o,h,c,l,s,n)),e.graph().nodeRankFactor=h},ek=function(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdge(n)})},eP=function(e){switch(e.graph().ranker){case"network-simplex":default:X(e);break;case"tight-tree":var n;U(n=e),G(n);break;case"longest-path":ei(e)}},eA=function(e){e.edges().forEach(n=>{let r=e.edge(n);if(r.width&&r.height){let r=e.node(n.v),i={rank:(e.node(n.w).rank-r.rank)/2+r.rank,e:n};A.addDummyNode(e,"edge-proxy",i,"_ep")}})},eL=function(e){let n=0;e.nodes().forEach(r=>{let i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,n=Math.max(n,i.maxRank))}),e.graph().maxRank=n},ej=function(e){e.nodes().forEach(n=>{let r=e.node(n);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(n))})},eR=function(e){e.graph().dummyChains=[],e.edges().forEach(n=>(function(e,n){let r,i,o,s=n.v,a=e.node(s).rank,l=n.w,h=e.node(l).rank,c=n.name,u=e.edge(n),d=u.labelRank;if(h!==a+1){for(e.removeEdge(n),o=0,++a;a<h;++o,++a)u.points=[],i={width:0,height:0,edgeLabel:u,edgeObj:n,rank:a},r=A.addDummyNode(e,"edge",i,"_d"),a===d&&(i.width=u.width,i.height=u.height,i.dummy="edge-label",i.labelpos=u.labelpos),e.setEdge(s,r,{weight:u.weight},c),0===o&&e.graph().dummyChains.push(r),s=r;e.setEdge(s,l,{weight:u.weight},c)}})(e,n))},ez=function(e){e.graph().dummyChains.forEach(n=>{let r,i=e.node(n),o=i.edgeLabel;for(e.setEdge(i.edgeObj,o);i.dummy;)r=e.successors(n)[0],e.removeNode(n),o.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(o.x=i.x,o.y=i.y,o.width=i.width,o.height=i.height),n=r,i=e.node(n)})},eV=function(e){var n;let r,i,o=(r={},i=0,(n=e).children().forEach(function e(o){let s=i;n.children(o).forEach(e),r[o]={low:s,lim:i++}}),r);e.graph().dummyChains.forEach(n=>{let r=e.node(n),i=r.edgeObj,s=function(e,n,r,i){let o,s,a=[],l=[],h=Math.min(n[r].low,n[i].low),c=Math.max(n[r].lim,n[i].lim);o=r;do a.push(o=e.parent(o));while(o&&(n[o].low>h||c>n[o].lim));for(s=o,o=i;(o=e.parent(o))!==s;)l.push(o);return{path:a.concat(l.reverse()),lca:s}}(e,o,i.v,i.w),a=s.path,l=s.lca,h=0,c=a[0],u=!0;for(;n!==i.w;){if(r=e.node(n),u){for(;(c=a[h])!==l&&e.node(c).maxRank<r.rank;)h++;c===l&&(u=!1)}if(!u){for(;h<a.length-1&&e.node(c=a[h+1]).minRank<=r.rank;)h++;c=a[h]}e.setParent(n,c),n=e.successors(n)[0]}})},eF=function(e){e.children().forEach(function n(r){let i=e.children(r),o=e.node(r);if(i.length&&i.forEach(n),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let n=o.minRank,i=o.maxRank+1;n<i;++n)eo(e,"borderLeft","_bl",r,o,n),eo(e,"borderRight","_br",r,o,n)}})},e$=function e(n,r){var i;let o,s,a,l,h;if(r&&"function"==typeof r.customOrder)return void r.customOrder(n,e);let c=A.maxRank(n),u=ed(n,A.range(1,c+1),"inEdges"),d=ed(n,A.range(c-1,-1,-1),"outEdges"),p=(o={},a=(s=(i=n).nodes().filter(e=>!i.children(e).length)).map(e=>i.node(e).rank),l=A.applyWithChunking(Math.max,a),h=A.range(l+1).map(()=>[]),s.sort((e,n)=>i.node(e).rank-i.node(n).rank).forEach(function e(n){o[n]||(o[n]=!0,h[i.node(n).rank].push(n),i.successors(n).forEach(e))}),h);if(ep(n,p),r&&r.disableOptimalOrderHeuristic)return;let f=Number.POSITIVE_INFINITY,g;for(let e=0,r=0;r<4;++e,++r){(function(e,n){let r=new C.Graph;e.forEach(function(e){let i=e.graph().root,o=function e(n,r,i,o){let s=n.children(r),a=n.node(r),l=a?a.borderLeft:void 0,h=a?a.borderRight:void 0,c={};l&&(s=s.filter(e=>e!==l&&e!==h));let u=function(e,n=[]){return n.map(n=>{let r=e.inEdges(n);if(!r.length)return{v:n};{let i=r.reduce((n,r)=>{let i=e.edge(r),o=e.node(r.v);return{sum:n.sum+i.weight*o.order,weight:n.weight+i.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}})}(n,s);u.forEach(r=>{if(n.children(r.v).length){var s,a;let l=e(n,r.v,i,o);c[r.v]=l,Object.hasOwn(l,"barycenter")&&(s=r,a=l,void 0!==s.barycenter?(s.barycenter=(s.barycenter*s.weight+a.barycenter*a.weight)/(s.weight+a.weight),s.weight+=a.weight):(s.barycenter=a.barycenter,s.weight=a.weight))}});let d=function(e,n){let r={};return e.forEach((e,n)=>{let i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:n};void 0!==e.barycenter&&(i.barycenter=e.barycenter,i.weight=e.weight)}),n.edges().forEach(e=>{let n=r[e.v],i=r[e.w];void 0!==n&&void 0!==i&&(i.indegree++,n.out.push(r[e.w]))}),function(e){let n=[];for(;e.length;){let r=e.pop();n.push(r),r.in.reverse().forEach(function(e){return n=>{!n.merged&&(void 0===n.barycenter||void 0===e.barycenter||n.barycenter>=e.barycenter)&&function(e,n){let r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.vs=n.vs.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(n.i,e.i),n.merged=!0}(e,n)}}(r)),r.out.forEach(function(n){return r=>{r.in.push(n),0==--r.indegree&&e.push(r)}}(r))}return n.filter(e=>!e.merged).map(e=>A.pick(e,["vs","i","barycenter","weight"]))}(Object.values(r).filter(e=>!e.indegree))}(u,i);!function(e,n){e.forEach(e=>{e.vs=e.vs.flatMap(e=>n[e]?n[e].vs:e)})}(d,c);let p=function(e,n){let r=A.partition(e,e=>Object.hasOwn(e,"barycenter")),i=r.lhs,o=r.rhs.sort((e,n)=>n.i-e.i),s=[],a=0,l=0,h=0;i.sort(function(e){return(n,r)=>n.barycenter<r.barycenter?-1:n.barycenter>r.barycenter?1:e?r.i-n.i:n.i-r.i}(!!n)),h=eu(s,o,h),i.forEach(e=>{h+=e.vs.length,s.push(e.vs),a+=e.barycenter*e.weight,l+=e.weight,h=eu(s,o,h)});let c={vs:s.flat(!0)};return l&&(c.barycenter=a/l,c.weight=l),c}(d,o);if(l&&(p.vs=[l,p.vs,h].flat(!0),n.predecessors(l).length)){let e=n.node(n.predecessors(l)[0]),r=n.node(n.predecessors(h)[0]);Object.hasOwn(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+e.order+r.order)/(p.weight+2),p.weight+=2}return p}(e,i,r,n);o.vs.forEach((n,r)=>e.node(n).order=r),function(e,n,r){let i={},o;r.forEach(r=>{let s=e.parent(r),a,l;for(;s;){if((a=e.parent(s))?(l=i[a],i[a]=s):(l=o,o=s),l&&l!==s)return void n.setEdge(l,s);s=a}})}(e,r,o.vs)})})(e%2?u:d,e%4>=2),p=A.buildLayerMatrix(n);let i=ec(n,p);i<f&&(r=0,g=Object.assign({},p),f=i)}ep(n,g)},eB=function(e){A.buildLayerMatrix(e).forEach(n=>{var r=0;n.forEach((n,i)=>{var o=e.node(n);o.order=i+r,(o.selfEdges||[]).forEach(n=>{A.addDummyNode(e,"selfedge",{width:n.label.width,height:n.label.height,rank:o.rank,order:i+ ++r,e:n.e,label:n.label},"_se")}),delete o.selfEdges})})},eH=function(e){let n=e.graph().rankdir.toLowerCase();("lr"===n||"rl"===n)&&es(e)},eK=function(e){var n,r;let i=e.graph().rankdir.toLowerCase();("bt"===i||"rl"===i)&&((n=e).nodes().forEach(e=>el(n.node(e))),n.edges().forEach(e=>{let r=n.edge(e);r.points.forEach(el),Object.hasOwn(r,"y")&&el(r)})),("lr"===i||"rl"===i)&&((r=e).nodes().forEach(e=>eh(r.node(e))),r.edges().forEach(e=>{let n=r.edge(e);n.points.forEach(eh),Object.hasOwn(n,"x")&&eh(n)}),es(e))},eU=function(e){var n,r,i;let o,s,a,l,h,c,u,d,p,f,g,y;i=e=A.asNonCompoundGraph(e),f=A.buildLayerMatrix(i),g=i.graph().ranksep,y=0,f.forEach(e=>{let n=e.reduce((e,n)=>{let r=i.node(n).height;return e>r?e:r},0);e.forEach(e=>i.node(e).y=y+n/2),y+=n+g}),Object.entries((n=e,s=A.buildLayerMatrix(n),l=Object.assign((a={},s.length&&s.reduce(function(e,r){let i=0,o=0,s=e.length,l=r[r.length-1];return r.forEach((e,h)=>{let c=function(e,n){if(e.node(n).dummy)return e.predecessors(n).find(n=>e.node(n).dummy)}(n,e),u=c?n.node(c).order:s;(c||e===l)&&(r.slice(o,h+1).forEach(e=>{n.predecessors(e).forEach(r=>{let o=n.node(r),s=o.order;(s<i||u<s)&&!(o.dummy&&n.node(e).dummy)&&ef(a,r,e)})}),o=h+1,i=u)}),r}),a),function(e,n){let r={};function i(n,i,o,s,a){let l;A.range(i,o).forEach(i=>{l=n[i],e.node(l).dummy&&e.predecessors(l).forEach(n=>{let i=e.node(n);i.dummy&&(i.order<s||i.order>a)&&ef(r,n,l)})})}return n.length&&n.reduce(function(n,r){let o=-1,s,a=0;return r.forEach((l,h)=>{if("border"===e.node(l).dummy){let n=e.predecessors(l);n.length&&(s=e.node(n[0]).order,i(r,a,h,o,s),a=h,o=s)}i(r,a,r.length,s,n.length)}),r}),r}(n,s)),h={},["u","d"].forEach(e=>{o="u"===e?s:Object.values(s).reverse(),["l","r"].forEach(r=>{var i;let s,a,c;"r"===r&&(o=o.map(e=>Object.values(e).reverse()));let u=("u"===e?n.predecessors:n.successors).bind(n),d=(s={},a={},c={},(i=o).forEach(e=>{e.forEach((e,n)=>{s[e]=e,a[e]=e,c[e]=n})}),i.forEach(e=>{let n=-1;e.forEach(e=>{let r=u(e);if(r.length){let i=((r=r.sort((e,n)=>c[e]-c[n])).length-1)/2;for(let o=Math.floor(i),h=Math.ceil(i);o<=h;++o){let i=r[o];a[e]===e&&n<c[i]&&!function(e,n,r){if(n>r){let e=n;n=r,r=e}return!!e[n]&&Object.hasOwn(e[n],r)}(l,e,i)&&(a[i]=e,a[e]=s[e]=s[i],n=c[i])}}})}),{root:s,align:a}),p=function(e,n,r,i,o){var s,a,l,h,c,u,d;let p,f,g,y={},m=(s=e,a=n,l=r,h=o,p=new C.Graph,g=(c=(f=s.graph()).nodesep,u=f.edgesep,d=h,(e,n,r)=>{let i,o,s=e.node(n),a=e.node(r);if(i=0+s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(i+=d?o:-o),o=0,i+=(s.dummy?u:c)/2,i+=(a.dummy?u:c)/2,i+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":o=a.width/2;break;case"r":o=-a.width/2}return o&&(i+=d?o:-o),o=0,i}),a.forEach(e=>{let n;e.forEach(e=>{let r=l[e];if(p.setNode(r),n){var i=l[n],o=p.edge(i,r);p.setEdge(i,r,Math.max(g(s,e,n),o||0))}n=e})}),p),b=o?"borderLeft":"borderRight";function _(e,n){let r=m.nodes(),i=r.pop(),o={};for(;i;)o[i]?e(i):(o[i]=!0,r.push(i),r=r.concat(n(i))),i=r.pop()}return _(function(e){y[e]=m.inEdges(e).reduce((e,n)=>Math.max(e,y[n.v]+m.edge(n)),0)},m.predecessors.bind(m)),_(function(n){let r=m.outEdges(n).reduce((e,n)=>Math.min(e,y[n.w]-m.edge(n)),Number.POSITIVE_INFINITY),i=e.node(n);r!==Number.POSITIVE_INFINITY&&i.borderType!==b&&(y[n]=Math.max(y[n],r))},m.successors.bind(m)),Object.keys(i).forEach(e=>y[e]=y[r[e]]),y}(n,o,d.root,d.align,"r"===r);"r"===r&&(p=A.mapValues(p,e=>-e)),h[e+r]=p})}),c=Object.values(h).reduce((e,r)=>{let i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([e,r])=>{var s,a;let l=(s=n,a=e,s.node(a).width/2);i=Math.max(r+l,i),o=Math.min(r-l,o)});let s=i-o;return s<e[0]&&(e=[s,r]),e},[Number.POSITIVE_INFINITY,null])[1],u=Object.values(c),d=A.applyWithChunking(Math.min,u),p=A.applyWithChunking(Math.max,u),["u","d"].forEach(e=>{["l","r"].forEach(n=>{let r=e+n,i=h[r];if(i===c)return;let o=Object.values(i),s=d-A.applyWithChunking(Math.min,o);"l"!==n&&(s=p-A.applyWithChunking(Math.max,o)),s&&(h[r]=A.mapValues(i,e=>e+s))})}),r=n.graph().align,A.mapValues(h.ul,(e,n)=>{if(r)return h[r.toLowerCase()][n];{let e=Object.values(h).map(e=>e[n]).sort((e,n)=>e-n);return(e[1]+e[2])/2}}))).forEach(([n,r])=>e.node(n).x=r)},eW=function(e){e.nodes().forEach(n=>{var r=e.node(n);if("selfedge"===r.dummy){var i=e.node(r.e.v),o=i.x+i.width/2,s=i.y,a=r.x-o,l=i.height/2;e.setEdge(r.e,r.label),e.removeNode(n),r.label.points=[{x:o+2*a/3,y:s-l},{x:o+5*a/6,y:s-l},{x:o+a,y:s},{x:o+5*a/6,y:s+l},{x:o+2*a/3,y:s+l}],r.label.x=r.x,r.label.y=r.y}})},eG=function(e){e.nodes().forEach(n=>{if(e.children(n).length){let r=e.node(n),i=e.node(r.borderTop),o=e.node(r.borderBottom),s=e.node(r.borderLeft[r.borderLeft.length-1]),a=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(a.x-s.x),r.height=Math.abs(o.y-i.y),r.x=s.x+r.width/2,r.y=i.y+r.height/2}}),e.nodes().forEach(n=>{"border"===e.node(n).dummy&&e.removeNode(n)})},eY=function(e){e.edges().forEach(n=>{let r=e.edge(n);if(Object.hasOwn(r,"x"))switch(("l"===r.labelpos||"r"===r.labelpos)&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})},eZ=function(e){let n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,s=e.graph(),a=s.marginx||0,l=s.marginy||0;function h(e){let s=e.x,a=e.y,l=e.width,h=e.height;n=Math.min(n,s-l/2),r=Math.max(r,s+l/2),i=Math.min(i,a-h/2),o=Math.max(o,a+h/2)}e.nodes().forEach(n=>h(e.node(n))),e.edges().forEach(n=>{let r=e.edge(n);Object.hasOwn(r,"x")&&h(r)}),n-=a,i-=l,e.nodes().forEach(r=>{let o=e.node(r);o.x-=n,o.y-=i}),e.edges().forEach(r=>{let o=e.edge(r);o.points.forEach(e=>{e.x-=n,e.y-=i}),Object.hasOwn(o,"x")&&(o.x-=n),Object.hasOwn(o,"y")&&(o.y-=i)}),s.width=r-n+a,s.height=o-i+l},eX=function(e){e.edges().forEach(n=>{let r,i,o=e.edge(n),s=e.node(n.v),a=e.node(n.w);o.points?(r=o.points[0],i=o.points[o.points.length-1]):(o.points=[],r=a,i=s),o.points.unshift(A.intersectRect(s,r)),o.points.push(A.intersectRect(a,i))})},eQ=function(e){e.edges().forEach(n=>{let r=e.edge(n);r.reversed&&r.points.reverse()})},eq=class{constructor(){this.init=!1}get initialized(){return this.init}getNode(e){return this.store.nodes.get(e)}getNodeByIndex(e){let n=this.indexMap.get(e);return n?this.getNode(n):void 0}getEdge(e){return this.store.edges.get(e)}get nodes(){return Array.from(this.store.nodes.values())}get edges(){return Array.from(this.store.edges.values())}create(e){this.store=this.createStore(e),this.indexMap=this.createIndexMap(),this.init=!0}createStore(e){let{nodes:n,edges:r}=e,i={nodes:new Map,edges:new Map};return n.forEach((e,n)=>{let{bounds:r}=e.getData(y.eG),o={id:e.id,entity:e,index:"",rank:-1,order:-1,position:{x:r.center.x,y:r.center.y},offset:{x:0,y:0},size:{width:r.width,height:r.height},hasChildren:e.collapsedChildren?.length>0};i.nodes.set(o.id,o)}),r.forEach(e=>{let{from:n,to:r}=e.info;if(!n||!r||e.vertical)return;let o={id:e.id,entity:e,from:n,to:r,fromIndex:"",toIndex:"",name:e.id};i.edges.set(o.id,o)}),i}createIndexMap(){let e=this.sortNodes(),n=new Map;e.forEach((e,r)=>{let i=this.getNode(e);if(!i)return;let o=String(1e5+r);n.set(i.id,o),i.index=o}),this.edges.forEach(e=>{let r=n.get(e.from),i=n.get(e.to);if(!r||!i)return void this.store.edges.delete(e.id);e.fromIndex=r,e.toIndex=i});let r=new Map;return n.forEach((e,n)=>{r.set(e,n)}),r}sortNodes(){let e=[];this.nodes.forEach(n=>{e.push(n.id)});let n=new Map;return this.edges.forEach(r=>{if(e.push(r.to),r.entity.info.fromPort){let e=n.get(r.from)||[];n.set(r.from,[...e,r])}}),n.forEach((n,r)=>{n.sort((e,n)=>{let r=e.entity.fromPort,i=n.entity.fromPort;return r&&i?r.point.y-i.point.y:0}).forEach(n=>{e.push(n.to)})}),e.reduceRight((e,n)=>(e.includes(n)||e.unshift(n),e),[])}},eJ=class{constructor(e){this.store=e}async position(){return new Promise(e=>{(0,u.p4)({from:{d:0},to:{d:100},duration:300,onUpdate:e=>{this.store.nodes.forEach(n=>{this.updateNodePosition({layoutNode:n,step:e.d})})},onComplete:()=>{e()}})})}updateNodePosition(e){let{layoutNode:n,step:r}=e,i=n.entity.getData(u.VO),o={x:n.position.x+n.offset.x,y:n.position.y+n.offset.y},s=(o.x-i.position.x)*r/100,a=(o.y-i.bounds.height/2-i.position.y)*r/100;i.update({position:{x:i.position.x+s,y:i.position.y+a}}),n.entity.document.layout.updateAffectedTransform(n.entity)}},e0={rankdir:"LR",nodesep:100,ranksep:100,ranker:"network-simplex"},e1=class{constructor(e){this.store=e,this.graph=this.createGraph()}layout(){this.graphSetData(),this.dagreLayout(),this.layoutSetPosition()}dagreLayout(){let e=eS(this.graph);this.runLayout(e),eD(this.graph,e)}runLayout(e){eN(e),eO(e),eM(e),eT(e),eP(A.asNonCompoundGraph(e)),eA(e),z(e),ek(e),R(e),eL(e),ej(e),eR(e),eV(e),eF(e),e$(e),this.setOrderAndRank(e),eB(e),eH(e),eU(e),eW(e),eG(e),ez(e),eY(e),eK(e),eZ(e),eX(e),eQ(e),eI(e)}createGraph(){let e=new C.Graph({multigraph:!0});return e.setDefaultEdgeLabel(()=>({})),e.setGraph(e0),e}graphSetData(){let e=Array.from(this.store.nodes.values()),n=Array.from(this.store.edges.values()).sort((e,n)=>e.fromIndex===n.fromIndex?e.toIndex<n.toIndex?-1:1:e.fromIndex<n.fromIndex?-1:1);e.forEach(e=>{this.graph.setNode(e.index,{originID:e.id,width:e.size.width,height:e.size.height})}),n.forEach(e=>{this.graph.setEdge({v:e.fromIndex,w:e.toIndex,name:e.name})})}layoutSetPosition(){this.store.nodes.forEach(e=>{let n=this.getOffsetX(e),r=this.graph.node(e.index);if(!r){e.rank=-1,e.position={x:e.position.x+n,y:e.position.y};return}e.rank=r.rank??-1,e.position={x:this.normalizeNumber(r.x)+n,y:this.normalizeNumber(r.y)}})}normalizeNumber(e){return Number.isNaN(e)?0:e}getOffsetX(e){if(!e.hasChildren)return 0;let{bounds:n,padding:r}=e.entity.getData(y.eG);return-n.width/2+r.left}setOrderAndRank(e){return this.followAdjust(e),this.normalizeOrder(e),e}followAdjust(e){let n=this.rankGroup(e);e.nodes().forEach(r=>{let i=e.node(r),o=this.store.getNodeByIndex(r);if(!i||!o?.followedBy)return;let{followedBy:s}=o,{rank:a,order:l}=i,h=s.map(e=>this.store.getNode(e)?.index).filter(Boolean),c=new Set(h),u=n.get(a);u&&(Array.from(u).filter(n=>!c.has(n)&&e.node(n).order>l).forEach(n=>{let r=e.node(n);r.order=r.order+s.length}),h.forEach((r,i)=>{let o=e.node(r);o.order=l+i+1;let s=o.rank;o.rank=a,n.get(s)?.delete(r),n.get(a)?.add(r)}))})}normalizeOrder(e){this.rankGroup(e).forEach((n,r)=>{let i=Array.from(n).map(n=>e.node(n));i.sort((e,n)=>e.order-n.order),i.forEach((e,n)=>{e.order=n})})}rankGroup(e){let n=new Map;return e.nodes().forEach(r=>{let i=e.node(r).rank;n.has(i)||n.set(i,new Set),n.get(i)?.add(r)}),n}},e2=class{constructor(){this._store=new eq,this._layout=new e1(this._store),this._position=new eJ(this._store)}init(e,n={}){this._store.create(e),this.setFollowNode(n.getFollowNode)}layout(){this._store.initialized&&this._layout.layout()}async position(){if(this._store.initialized)return await this._position.position()}setFollowNode(e){if(!e)return;let n={store:this._store};this._store.nodes.forEach(r=>{let i=e(r,n)?.followTo;if(!i)return;let o=this._store.getNode(i);o&&(o.followedBy||(o.followedBy=[]),o.followedBy.push(r.id),r.followTo=i)})}},e3=class{async layout(e={}){await this.layoutNode(this.document.root,e)}async layoutNode(e,n){let r=this.getAvailableBlocks(e);if(!r||!Array.isArray(r)||!r.length)return;let i=e.blocks.map(e=>e.getData(a.Z1).outputLines.filter(Boolean)).flat();await Promise.all(r.map(async e=>this.layoutNode(e,n)));let o=new e2;o.init({nodes:r,edges:i},n),o.layout(),await o.position()}getAvailableBlocks(e){return[...e.blocks.filter(e=>!this.shouldFlatNode(e)),...e.blocks.filter(e=>this.shouldFlatNode(e)).map(e=>e.blocks).flat()]}shouldFlatNode(e){return e.flowNodeType===y.Sy.GROUP}};N([(0,g.f3)(a.L4)],e3.prototype,"document",2),e3=N([(0,g.b2)()],e3);var e4=(0,u.M1)({onBind:({bind:e})=>{e(e3).toSelf().inSingletonScope()}}),e5=r(4517),e6=Object.defineProperty,e8=Object.getOwnPropertyDescriptor,e9=Object.getOwnPropertyNames,e7=Object.prototype.hasOwnProperty,te=(e,n)=>{for(var r in n)e6(e,r,{get:n[r],enumerable:!0})},tt=(e,n,r,i)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of e9(n))e7.call(e,o)||o===r||e6(e,o,{get:()=>n[o],enumerable:!(i=e8(n,o))||i.enumerable});return e},tn=(e,n,r)=>(tt(e,n,"default"),r&&tt(r,n,"default")),tr={};te(tr,{FreeLayoutEditor:()=>tc,FreeLayoutEditorProvider:()=>tl,FreeLayoutPluginContext:()=>to,FreeLayoutProps:()=>o,WorkflowNodeRenderer:()=>th,WorkflowPortRender:()=>f.Jb,createFreeLayoutPreset:()=>ta,useAutoLayout:()=>ty,useClientContext:()=>tm,usePlaygroundTools:()=>tv});var ti={};te(ti,{FreeLayoutEditor:()=>tc,FreeLayoutEditorProvider:()=>tl,WorkflowNodeRenderer:()=>th,WorkflowPortRender:()=>f.Jb});var to=s.Zn3;(o||(o={})).DEFAULT={...s.nYJ.DEFAULT,fromNodeJSON(e,n){if(!e.getData(s.Psq)){n.data&&e.updateExtInfo(n.data),e.onExtInfoChange(()=>{e.document.fireContentChange({type:a.fT.NODE_DATA_CHANGE,toJSON:()=>e.getExtInfo(),entity:e})});return}return a.jg.fromNodeJSON?.(e,n)},toNodeJSON(e){let n=e.getData(s.Psq),r=e.transform.position;return n?a.jg.toNodeJSON(e):{id:e.id,type:e.flowNodeType,meta:{position:{x:r.x,y:r.y}},data:e.getExtInfo()}}};var ts=e=>{let n=e.get(p.StackingContextManager);if(n.node)return n.node};function ta(e){return n=>{e={...o.DEFAULT,...e,playground:{...e.playground,get hoverService(){return n.get(a.XH)}}};let r=[];return r.push((0,s.cL)({registerShortcuts(r){let i=n.get(s.z2R);if(r.addHandlers({commandId:a.uB.DELETE_NODES,shortcuts:["backspace","delete"],isEnabled:()=>i.selection.length>0&&!n.playground.config.readonlyOrDisabled,execute:()=>{i.selection.forEach(e=>{if(e instanceof a.CT){if(!n.document.canRemove(e))return;let r=e.getNodeMeta(),i=r.subCanvas?.(e);if(i?.isCanvas)return void i.parentNode.dispose();e.dispose()}else if(e instanceof a.e2){if(!n.document.linesManager.canRemove(e))return;e.dispose()}}),i.selection=i.selection.filter(e=>!e.disposed)}}),e?.history?.enable){let i=n.get(h.qp);e.history.disableShortcuts||(r.addHandlers({commandId:s.mYg.Default.UNDO,shortcuts:["meta z","ctrl z"],isEnabled:()=>!0,execute:()=>{i.undo()}}),r.addHandlers({commandId:s.mYg.Default.REDO,shortcuts:["meta shift z","ctrl shift z"],isEnabled:()=>!0,execute:()=>{i.redo()}}))}}})),r=(0,s.Fu1)(e,r)(n),e.variableEngine?.enable&&r.push((0,s.Ys9)({...e.variableEngine,layout:"free"})),e.history?.enable&&r.push((0,h.ou)(e.history)),r.push((0,s.d3V)({onBind:r=>{r.rebind(a.fY).toConstantValue({canAddLine:e.canAddLine?.bind(null,n),canDeleteLine:e.canDeleteLine?.bind(null,n),isErrorLine:e.isErrorLine?.bind(null,n),isErrorPort:e.isErrorPort?.bind(null,n),isDisabledPort:e.isDisabledPort?.bind(null,n),isReverseLine:e.isReverseLine?.bind(null,n),isHideArrowLine:e.isHideArrowLine?.bind(null,n),isFlowingLine:e.isFlowingLine?.bind(null,n),isDisabledLine:e.isDisabledLine?.bind(null,n),isVerticalLine:e.isVerticalLine?.bind(null,n),onDragLineEnd:e.onDragLineEnd?.bind(null,n),setLineRenderType:e.setLineRenderType?.bind(null,n),setLineClassName:e.setLineClassName?.bind(null,n),canDeleteNode:e.canDeleteNode?.bind(null,n),canResetLine:e.canResetLine?.bind(null,n),cursors:e.cursors??a.jg.cursors,lineColor:e.lineColor??a.jg.lineColor,allNodesDefaultExpanded:e.allNodesDefaultExpanded,toNodeJSON:e.toNodeJSON,fromNodeJSON:e.fromNodeJSON})},onInit:n=>{n.playground.registerLayer(s.Emw),n.playground.registerLayer(s.V7e,{renderElement:()=>"function"==typeof ts?ts(n):ts}),e.scroll?.disableScrollLimit||n.playground.registerLayer(s.qq0),e.scroll?.disableScrollBar||n.playground.registerLayer(s.lVg),e.onContentChange&&n.document.onContentChange(r=>e.onContentChange(n,r))},containerModules:[a._s]}),(0,p.createFreeStackPlugin)({}),(0,f.J2)({}),x({}),e4({}),d({canSelect:e=>{if(0!==e.button)return!1;let r=e.target;if(r){if(r.classList.contains("gedit-flow-background-layer")||r.closest('[data-flow-editor-selectable="true"]'))return!0;if(r.closest('[data-flow-editor-selectable="false"]'))return!1}return!n.get(a.XH).isSomeHovered()},ignoreOneSelect:!0,ignoreChildrenLength:!0,...e.selectBox||{}})),(0,s.esp)(e,r)(n)}}var tl=(0,l.forwardRef)(function(e,n){let{children:r,...i}=e,o=(0,l.useMemo)(()=>ta(i),[]),c=(0,l.useCallback)(e=>({...(0,s.FwO)(e),get document(){return e.get(a.L4)},get clipboard(){return e.get(s.YvH)},get selection(){return e.get(s.z2R)},get history(){return e.get(h.qp)}}),[]);return l.createElement(s.W6u,{ref:n,plugins:o,customPluginContext:c},r)}),th=e=>{let{selected:n,activated:r,startDrag:i,ports:o,selectNode:s,nodeRef:h,onFocus:c,onBlur:u}=(0,a.PV)(),d=(0,e5.Z)(e.className||"",{activated:r,selected:n});return l.createElement(l.Fragment,null,l.createElement("div",{className:d,style:e.style,ref:h,draggable:!0,onDragStart:i,onClick:s,onFocus:c,onBlur:u,"data-node-selected":String(n)},e.children),o.map(n=>l.createElement(f.Jb,{key:n.id,entity:n,onClick:e.onPortClick?r=>e.onPortClick(n,r):void 0,className:e.portClassName,style:e.portStyle})))},tc=(0,l.forwardRef)(function(e,n){let{children:r,...i}=e;return l.createElement(tl,{ref:n,...i},l.createElement(s.R6T,null,r))});tn(ti,p),tn(tr,ti);var tu=e=>{let n=e.getData(s.VOn);return{x:n.position.x,y:n.position.y}},td=()=>{let e=(0,a.KU)();try{return e.get(h.qp)}catch(e){return{pushOperation:()=>{}}}},tp=()=>{let e=td();return(0,l.useCallback)(n=>{let{nodes:r,startPositions:i,endPositions:o}=n,s=r.map(e=>e.id);e.pushOperation({type:h.Nj.dragNodes,value:{ids:s,value:o,oldValue:i}},{noApply:!0})},[e])},tf=e=>{let{nodes:n,startPositions:r}=e;return()=>{n.forEach((e,n)=>{let i=e.getData(s.VOn),o=r[n];i.update({position:o})})}},tg=()=>{let e=(0,a.G2)(a.L4),n=(0,a.G2)(e3),r=tp();return(0,l.useCallback)(async i=>{let o=e.getAllNodes(),s=o.map(tu);await n.layout(i);let a=o.map(tu);return r({nodes:o,startPositions:s,endPositions:a}),tf({nodes:o,startPositions:s})},[n,e,r])},ty=()=>{let e=(0,a.G2)(a.L4),n=(0,a.Dc)(),r=tg(),i=(0,l.useCallback)(r=>{(0,a.Qu)(e,n.config,r)},[e,n]);return(0,l.useCallback)(async e=>{i();let n=await r(e);return i(),n},[r])};function tm(){return(0,s.G2Z)(s.Zn3)}function tv(){let e=(0,a.Dc)(),n=(0,a.G2)(a.L4),[r,i]=(0,l.useState)(1),[o,h]=(0,l.useState)(n.linesManager.lineType),[c,u]=(0,l.useState)(a.YC.SELECT),[d,p]=(0,l.useState)(a.v6.PAD),f=(0,l.useCallback)(n=>{r<.1||e?.config.zoomout(n)},[r,e]),g=(0,l.useCallback)(n=>{r>1.9||e?.config.zoomin(n)},[r,e]),y=(0,l.useCallback)(e=>{let r=n.linesManager.switchLineType(e);return h(r),r},[n]),m=(0,l.useCallback)(r=>{(0,a.Qu)(n,e.config,r)},[n,e]),b=ty();return(0,l.useEffect)(()=>{let n=null;return e&&(n=e.onZoom(e=>i(e))),()=>{n&&n.dispose()}},[e]),(0,l.useEffect)(()=>{let n=e.editorState.onStateChange(e=>{u(e.state===s.yyW.STATE_GRAB||e.state===s.yyW.STATE_MOUSE_FRIENDLY_SELECT?a.YC.GRAB:a.YC.SELECT),p(e.state===s.yyW.STATE_MOUSE_FRIENDLY_SELECT?a.v6.MOUSE:a.v6.PAD)});return()=>{n.dispose()}},[e]),{zoomin:g,zoomout:f,fitView:m,autoLayout:b,switchLineType:y,zoom:r,lineType:o,cursorState:c,setCursorState:function(n){let r;void 0!==(r="function"==typeof n?n({isPressingSpaceBar:e.editorState.isPressingSpaceBar,cursorState:c}):n)&&(r===a.YC.GRAB?(e.editorState.changeState(s.yyW.STATE_GRAB.id),u(r)):(r=a.YC.SELECT)&&(e.editorState.changeState(s.yyW.STATE_SELECT.id),u(r)))},interactiveType:d,setInteractiveType:function(n){n===a.v6.MOUSE?(e.editorState.changeState(s.yyW.STATE_MOUSE_FRIENDLY_SELECT.id),u(a.YC.GRAB)):n===a.v6.PAD&&(e.editorState.changeState(s.yyW.STATE_SELECT.id),u(a.YC.SELECT)),p(n)},setMouseScrollDelta:function(n){e.config.updateConfig({mouseScrollDelta:n})}}}},7341:function(e,n,r){"use strict";r.d(n,{Jb:()=>U,J2:()=>et});var i,o=r(6321),s=r(4194),a=r(4517),l=r(1097),h=r(8319),c=r(3254),u=r(4210),d=r(8336),p=r(6141);let{abs:f,cos:g,sin:y,acos:m,atan2:b,sqrt:_,pow:E}=Math;function w(e){return e<0?-E(-e,1/3):E(e,1/3)}let x=Math.PI,C=2*x,S=x/2,D=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,N=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,O={x:0,y:0,z:0},M={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){let r=n(e),i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),_(i)},compute:function(e,n,r){if(0===e)return n[0].t=0,n[0];let i=n.length-1;if(1===e)return n[i].t=1,n[i];let o=1-e,s=n;if(0===i)return n[0].t=e,n[0];if(1===i){let n={x:o*s[0].x+e*s[1].x,y:o*s[0].y+e*s[1].y,t:e};return r&&(n.z=o*s[0].z+e*s[1].z),n}if(i<4){let n=o*o,a=e*e,l,h,c,u=0;2===i?(s=[s[0],s[1],s[2],O],l=n,h=o*e*2,c=a):3===i&&(l=n*o,h=n*e*3,c=o*a*3,u=e*a);let d={x:l*s[0].x+h*s[1].x+c*s[2].x+u*s[3].x,y:l*s[0].y+h*s[1].y+c*s[2].y+u*s[3].y,t:e};return r&&(d.z=l*s[0].z+h*s[1].z+c*s[2].z+u*s[3].z),d}let a=JSON.parse(JSON.stringify(n));for(;a.length>1;){for(let n=0;n<a.length-1;n++)a[n]={x:a[n].x+(a[n+1].x-a[n].x)*e,y:a[n].y+(a[n+1].y-a[n].y)*e},void 0!==a[n].z&&(a[n].z=a[n].z+(a[n+1].z-a[n].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,n,r,i){let o=1-e,s=r[0],a=r[1],l=r[2],h=r[3],c;return(s*=o,a*=e,2===n.length)?(c=s+a,{x:(s*n[0].x+a*n[1].x)/c,y:(s*n[0].y+a*n[1].y)/c,z:!!i&&(s*n[0].z+a*n[1].z)/c,t:e}):(s*=o,a*=2*o,l*=e*e,3===n.length)?(c=s+a+l,{x:(s*n[0].x+a*n[1].x+l*n[2].x)/c,y:(s*n[0].y+a*n[1].y+l*n[2].y)/c,z:!!i&&(s*n[0].z+a*n[1].z+l*n[2].z)/c,t:e}):(s*=o,a*=1.5*o,l*=3*o,h*=e*e*e,4===n.length)?(c=s+a+l+h,{x:(s*n[0].x+a*n[1].x+l*n[2].x+h*n[3].x)/c,y:(s*n[0].y+a*n[1].y+l*n[2].y+h*n[3].y)/c,z:!!i&&(s*n[0].z+a*n[1].z+l*n[2].z+h*n[3].z)/c,t:e}):void 0},derive:function(e,n){let r=[];for(let i=e,o=i.length,s=o-1;o>1;o--,s--){let e=[];for(let r=0,o;r<s;r++)o={x:s*(i[r+1].x-i[r].x),y:s*(i[r+1].y-i[r].y)},n&&(o.z=s*(i[r+1].z-i[r].z)),e.push(o);r.push(e),i=e}return r},between:function(e,n,r){return n<=e&&e<=r||M.approximately(e,n)||M.approximately(e,r)},approximately:function(e,n,r){return f(e-n)<=(r||1e-6)},length:function(e){let n=M.Tvalues.length,r=0;for(let i=0,o;i<n;i++)o=.5*M.Tvalues[i]+.5,r+=M.Cvalues[i]*M.arcfn(o,e);return .5*r},map:function(e,n,r,i,o){return i+(e-n)/(r-n)*(o-i)},lerp:function(e,n,r){let i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return void 0!==n.z&&void 0!==r.z&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return void 0!==e.z&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(M.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,s=r.x-e.x,a=r.y-e.y;return b(i*a-o*s,i*s+o*a)},round:function(e,n){let r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){let r=e.x-n.x,i=e.y-n.y;return _(r*r+i*i)},closest:function(e,n){let r=E(2,63),i,o;return e.forEach(function(e,s){(o=M.dist(n,e))<r&&(r=o,i=s)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=E(e,n)+E(1-e,n);return f((r-1)/r)},projectionratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=E(1-e,n),i=E(e,n)+r;return r/i},lli8:function(e,n,r,i,o,s,a,l){let h=(e-r)*(s-l)-(n-i)*(o-a);return 0!=h&&{x:((e*i-n*r)*(o-a)-(e-r)*(o*l-s*a))/h,y:((e*i-n*r)*(s-l)-(n-i)*(o*l-s*a))/h}},lli4:function(e,n,r,i){let o=e.x,s=e.y,a=n.x,l=n.y,h=r.x,c=r.y,u=i.x,d=i.y;return M.lli8(o,s,a,l,h,c,u,d)},lli:function(e,n){return M.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new V(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=D,r=D,i=N,o=N;return e.forEach(function(e){let s=e.bbox();n>s.x.min&&(n=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!M.bboxoverlap(n,i))return[];let s=[],a=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(n){n.virtual||l.forEach(function(i){if(i.virtual)return;let a=n.intersects(i,o);a.length>0&&(a.c1=n,a.c2=i,a.s1=e,a.s2=r,s.push(a))})}),s},makeshape:function(e,n,r){let i=n.points.length,o=e.points.length,s=M.makeline(n.points[i-1],e.points[0]),a=M.makeline(e.points[o-1],n.points[0]),l={startcap:s,forward:e,back:n,endcap:a,bbox:M.findbbox([s,e,n,a])};return l.intersections=function(e){return M.shapeintersections(l,l.bbox,e,e.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=D,o=N,s,a;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,h=r.length;l<h;l++)s=r[l],(a=e.get(s))[n]<i&&(i=a[n]),a[n]>o&&(o=a[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){let r=n.p1.x,i=n.p1.y,o=-b(n.p2.y-i,n.p2.x-r);return e.map(function(e){return{x:(e.x-r)*g(o)-(e.y-i)*y(o),y:(e.x-r)*y(o)+(e.y-i)*g(o)}})},roots:function(e,n){let r,i,o;n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let s=e.length-1,a=M.align(e,n),l=function(e){return 0<=e&&e<=1};if(2===s){let e=a[0].y,n=a[1].y,r=a[2].y,i=e-2*n+r;if(0!==i){let o=-_(n*n-e*r),s=-e+n;return[-(o+s)/i,-(-o+s)/i].filter(l)}return n!==r&&0===i?[(2*n-r)/(2*n-2*r)].filter(l):[]}let h=a[0].y,c=a[1].y,u=a[2].y,d=-h+3*c-3*u+a[3].y,p=3*h-6*c+3*u,f=-3*h+3*c,y=h;if(M.approximately(d,0)){if(M.approximately(p,0))return M.approximately(f,0)?[]:[-y/f].filter(l);let e=_(f*f-4*p*y),n=2*p;return[(e-f)/n,(-f-e)/n].filter(l)}p/=d;let b=(3*(f/=d)-p*p)/3,E=b/3,x=(2*p*p*p-9*p*f+27*(y/=d))/27,S=x/2,D=S*S+E*E*E;if(D<0){let e=-b/3,n=_(e*e*e),r=-x/(2*n),s=m(r<-1?-1:r>1?1:r),a=2*w(n);return i=a*g(s/3)-p/3,[i,o=a*g((s+C)/3)-p/3,a*g((s+2*C)/3)-p/3].filter(l)}if(0===D)return[i=2*(r=S<0?w(-S):-w(S))-p/3,o=-r-p/3].filter(l);{let e=_(D);return[(r=w(-S+e))-w(S+e)-p/3].filter(l)}},droots:function(e){if(3===e.length){let n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(0!==o){let e=-_(r*r-n*i),s=-n+r;return[-(e+s)/o,-(-e+s)/o]}return r!==i&&0===o?[(2*r-i)/(2*(r-i))]:[]}if(2===e.length){let n=e[0],r=e[1];if(n!==r)return[n/(n-r)]}return[]},curvature:function(e,n,r,i,o){let s,a,l,h,c=0,u=0,d=M.compute(e,n),p=M.compute(e,r),g=d.x*d.x+d.y*d.y;if(i?(s=_(E(d.y*p.z-p.y*d.z,2)+E(d.z*p.x-p.z*d.x,2)+E(d.x*p.y-p.x*d.y,2)),a=E(g+d.z*d.z,1.5)):(s=d.x*p.y-d.y*p.x,a=E(g,1.5)),0===s||0===a)return{k:0,r:0};if(c=s/a,u=a/s,!o){let o=M.curvature(e-.001,n,r,i,!0).k,s=M.curvature(e+.001,n,r,i,!0).k;h=(s-c+(c-o))/2,l=(f(s-c)+f(c-o))/2}return{k:c,r:u,dk:h,adk:l}},inflections:function(e){if(e.length<4)return[];let n=M.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,s=18*(-3*r+2*i+3*o-n[3].x*n[2].y),a=18*(3*r-i-3*o),l=18*(o-r);if(M.approximately(s,0)){if(!M.approximately(a,0)){let e=-l/a;if(0<=e&&e<=1)return[e]}return[]}let h=2*s;if(M.approximately(h,0))return[];let c=a*a-4*s*l;if(c<0)return[];let u=Math.sqrt(c);return[(u-a)/h,-(a+u)/h].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,n){let r=["x","y"],i=r.length;for(let o=0,s,a,l,h;o<i;o++)if(a=e[s=r[o]].mid,l=n[s].mid,h=(e[s].size+n[s].size)/2,f(a-l)>=h)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){let i=e.bbox(),o=n.bbox(),s=r||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(n._t1+n._t2)/2|0)/1e5];let a=e.split(.5),l=n.split(.5),h=[{left:a.left,right:l.left},{left:a.left,right:l.right},{left:a.right,right:l.right},{left:a.right,right:l.left}];h=h.filter(function(e){return M.bboxoverlap(e.left.bbox(),e.right.bbox())});let c=[];return 0===h.length?c:(h.forEach(function(e){c=c.concat(M.pairiteration(e.left,e.right,s))}),c=c.filter(function(e,n){return c.indexOf(e)===n}))},getccenter:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,s=r.x-n.x,a=r.y-n.y,l=i*g(S)-o*y(S),h=i*y(S)+o*g(S),c=s*g(S)-a*y(S),u=s*y(S)+a*g(S),d=(e.x+n.x)/2,p=(e.y+n.y)/2,f=(n.x+r.x)/2,m=(n.y+r.y)/2,_=M.lli8(d,p,d+l,p+h,f,m,f+c,m+u),E=M.dist(_,e),w=b(e.y-_.y,e.x-_.x),x=b(n.y-_.y,n.x-_.x),D=b(r.y-_.y,r.x-_.x),N;return w<D?((w>x||x>D)&&(w+=C),w>D&&(N=D,D=w,w=N)):D<x&&x<w?(N=D,D=w,w=N):D+=C,_.s=w,_.e=D,_.r=E,_},numberSort:function(e,n){return e-n}};class I{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return M.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)M.expandbox(n,e[r].bbox());return n}offset(e){let n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new I(n)}}let{abs:T,min:k,max:P,cos:A,sin:L,acos:j,sqrt:R}=Math,z=Math.PI;class V{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if("object"==typeof n[0]){r=n.length;let e=[];n.forEach(function(n){["x","y","z"].forEach(function(r){void 0!==n[r]&&e.push(n[r])})}),n=e}let i=!1,o=n.length;if(r){if(r>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let s=this._3d=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,a=this.points=[];for(let e=0,r=s?3:2;e<o;e+=r){var l={x:n[e],y:n[e+1]};s&&(l.z=n[e+2]),a.push(l)}let h=this.order=a.length-1,c=this.dims=["x","y"];s&&c.push("z"),this.dimlen=c.length;let u=M.align(a,{p1:a[0],p2:a[h]}),d=M.dist(a[0],a[h]);this._linear=u.reduce((e,n)=>e+T(n.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,i){if(void 0===i&&(i=.5),0===i)return new V(n,n,r);if(1===i)return new V(e,n,n);let o=V.getABC(2,e,n,r,i);return new V(e,o.A,r)}static cubicFromPoints(e,n,r,i,o){void 0===i&&(i=.5);let s=V.getABC(3,e,n,r,i);void 0===o&&(o=M.dist(n,s.C));let a=o*(1-i)/i,l=M.dist(e,r),h=(r.x-e.x)/l,c=(r.y-e.y)/l,u=o*h,d=o*c,p={x:n.x-u,y:n.y-d},f={x:n.x+a*h,y:n.y+a*c},g=s.A,y={x:g.x+(p.x-g.x)/(1-i),y:g.y+(p.y-g.y)/(1-i)},m={x:g.x+(f.x-g.x)/i,y:g.y+(f.y-g.y)/i},b={x:e.x+(y.x-e.x)/i,y:e.y+(y.y-e.y)/i};return new V(e,b,{x:r.x+(m.x-r.x)/(1-i),y:r.y+(m.y-r.y)/(1-i)},r)}static getUtils(){return M}getUtils(){return V.getUtils()}static get PolyBezier(){return I}valueOf(){return this.toString()}toString(){return M.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=M.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,n=M.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return M.length(this.derivative.bind(this))}static getABC(e=2,n,r,i,o=.5){let s=M.projectionratio(o,e),a=1-s,l={x:s*n.x+a*i.x,y:s*n.y+a*i.y},h=M.abcratio(o,e);return{A:{x:r.x+(r.x-l.x)/h,y:r.y+(r.y-l.y)/h},B:r,C:l,S:n,E:i}}getABC(e,n){n=n||this.get(e);let r=this.points[0],i=this.points[this.order];return V.getABC(this.order,r,n,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,i;n<e;n++)i=n/(e-1),(r=this.compute(i)).t=i,this._lut.push(r);return this._lut}on(e,n){n=n||5;let r=this.getLUT(),i=[];for(let o=0,s;o<r.length;o++)s=r[o],M.dist(s,e)<n&&(i.push(s),r.length);return!!i.length&&(t/=i.length)}project(e){let n=this.getLUT(),r=n.length-1,i=M.closest(n,e),o=i.mpos,s=(o-1)/r,a=(o+1)/r,l=.1/r,h=i.mdist,c=s,u=c,d;h+=1;for(let n;c<a+l;c+=l)d=this.compute(c),(n=M.dist(e,d))<h&&(h=n,u=c);return u=u<0?0:u>1?1:u,(d=this.compute(u)).t=u,d.d=h,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?M.computeWithRatios(e,this.points,this.ratios,this._3d):M.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,n=[e[0]],r=e.length;for(let i=1,o,s;i<r;i++)o=e[i],s=e[i-1],n[i]={x:(r-i)/r*o.x+i/r*s.x,y:(r-i)/r*o.y+i/r*s.y};return n[r]=e[r-1],new V(n)}derivative(e){return M.compute(e,this.dpoints[0],this._3d)}dderivative(e){return M.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new V(M.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return M.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return M.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let n=this.derivative(e),r=R(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){let n=this.derivative(e),r=this.derivative(e+.01),i=R(n.x*n.x+n.y*n.y+n.z*n.z),o=R(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=i,n.y/=i,n.z/=i,r.x/=o,r.y/=o,r.z/=o;let s={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},a=R(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=a,s.y/=a,s.z/=a;let l=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:e,x:l[0]*n.x+l[1]*n.y+l[2]*n.z,y:l[3]*n.x+l[4]*n.y+l[5]*n.z,z:l[6]*n.x+l[7]*n.y+l[8]*n.z}}hull(e){let n=this.points,r=[],i=[],o=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);n.length>1;){r=[];for(let s=0,a,l=n.length-1;s<l;s++)a=M.lerp(e,n[s],n[s+1]),i[o++]=a,r.push(a);n=r}return i}split(e,n){if(0===e&&n)return this.split(n).left;if(1===n)return this.split(e).right;let r=this.hull(e),i={left:new V(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new V(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return(i.left._t1=M.map(0,0,1,this._t1,this._t2),i.left._t2=M.map(e,0,1,this._t1,this._t2),i.right._t1=M.map(e,0,1,this._t1,this._t2),i.right._t2=M.map(1,0,1,this._t1,this._t2),n)?(n=M.map(n,e,1,0,1),i.right.split(n).left):i}extrema(){let e={},n=[];return this.dims.forEach((function(r){let i=function(e){return e[r]},o=this.dpoints[0].map(i);e[r]=M.droots(o),3===this.order&&(o=this.dpoints[1].map(i),e[r]=e[r].concat(M.droots(o))),e[r]=e[r].filter(function(e){return e>=0&&e<=1}),n=n.concat(e[r].sort(M.numberSort))}).bind(this)),e.values=n.sort(M.numberSort).filter(function(e,r){return n.indexOf(e)===r}),e}bbox(){let e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=M.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){let n=this.bbox(),r=e.bbox();return M.bboxoverlap(n,r)}offset(e,n){if(void 0!==n){let r=this.get(e),i=this.normal(e),o={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(o.z=r.z+i.z*n),o}if(this._linear){let n=this.normal(0);return[new V(this.points.map(function(r){let i={x:r.x+e*n.x,y:r.y+e*n.y};return r.z&&n.z&&(i.z=r.z+e*n.z),i}))]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(3===this.order){let e=M.angle(this.points[0],this.points[3],this.points[1]),n=M.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&n<0||e<0&&n>0)return!1}let e=this.normal(0),n=this.normal(1),r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),T(j(r))<z/3}reduce(){let e,n=0,r=0,i,o=[],s=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],e=1;e<a.length;e++)r=a[e],(i=this.split(n,r))._t1=n,i._t2=r,o.push(i),n=r;return o.forEach(function(e){for(n=0,r=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(i=e.split(n,r)).simple()){if(r-=.01,.01>T(n-r))return[];(i=e.split(n,r))._t1=M.map(n,0,1,e._t1,e._t2),i._t2=M.map(r,0,1,e._t1,e._t2),s.push(i),n=r;break}n<1&&((i=e.split(n,1))._t1=M.map(n,0,1,e._t1,e._t2),i._t2=e._t2,s.push(i))}),s}translate(e,n,r){r="number"==typeof r?r:n;let i=this.order,o=this.points.map((e,o)=>(1-o/i)*n+o/i*r);return new V(this.points.map((n,r)=>({x:n.x+e.x*o[r],y:n.y+e.y*o[r]})))}scale(e){let n=this.order,r=!1;if("function"==typeof e&&(r=e),r&&2===n)return this.raise().scale(r);let i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);let s=r?r(0):e,a=r?r(1):e,l=[this.offset(0,10),this.offset(1,10)],h=[],c=M.lli4(l[0],l[0].c,l[1],l[1].c);if(!c)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let r=h[e*n]=M.copy(o[e*n]);r.x+=(e?a:s)*l[e].n.x,r.y+=(e?a:s)*l[e].n.y}),r)?[0,1].forEach(function(s){if(2!==n||!s){var a=o[s+1],l={x:a.x-c.x,y:a.y-c.y},u=r?r((s+1)/n):e;r&&!i&&(u=-u);var d=R(l.x*l.x+l.y*l.y);l.x/=d,l.y/=d,h[s+1]={x:a.x+u*l.x,y:a.y+u*l.y}}}):[0,1].forEach(e=>{if(2===n&&e)return;let r=h[e*n],i=this.derivative(e),s={x:r.x+i.x,y:r.y+i.y};h[e+1]=M.lli4(r,s,c,o[e+1])}),new V(h)}outline(e,n,r,i){if(n=void 0===n?e:n,this._linear){let o,s,a,l=this.normal(0),h=this.points[0],c=this.points[this.points.length-1];void 0===r&&(r=e,i=n),o={x:h.x+l.x*e,y:h.y+l.y*e},a={x:c.x+l.x*r,y:c.y+l.y*r},s={x:(o.x+a.x)/2,y:(o.y+a.y)/2};let u=[o,s,a];o={x:h.x-l.x*n,y:h.y-l.y*n},a={x:c.x-l.x*i,y:c.y-l.y*i},s={x:(o.x+a.x)/2,y:(o.y+a.y)/2};let d=[a,s,o],p=M.makeline(d[2],u[0]),f=M.makeline(u[2],d[0]);return new I([p,new V(u),f,new V(d)])}let o=this.reduce(),s=o.length,a=[],l=[],h,c=0,u=this.length(),d=void 0!==r&&void 0!==i;function p(e,n,r,i,o){return function(s){let a=n-e;return M.map(s,0,1,e+i/r*a,e+(i+o)/r*a)}}o.forEach(function(o){let s=o.length();d?(a.push(o.scale(p(e,r,u,c,s))),l.push(o.scale(p(-n,-i,u,c,s)))):(a.push(o.scale(e)),l.push(o.scale(-n))),c+=s}),l=l.map(function(e){return(h=e.points)[3]?e.points=[h[3],h[2],h[1],h[0]]:e.points=[h[2],h[1],h[0]],e}).reverse();let f=a[0].points[0],g=a[s-1].points[a[s-1].points.length-1],y=l[s-1].points[l[s-1].points.length-1],m=l[0].points[0],b=M.makeline(y,f),_=M.makeline(g,m);return new I([b].concat(a).concat([_]).concat(l))}outlineshapes(e,n,r){n=n||e;let i=this.outline(e,n).curves,o=[];for(let e=1,n=i.length;e<n/2;e++){let s=M.makeshape(i[e],i[n-e],r);s.startcap.virtual=e>1,s.endcap.virtual=e<n/2-1,o.push(s)}return o}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof V&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){let n=k(e.p1.x,e.p2.x),r=k(e.p1.y,e.p2.y),i=P(e.p1.x,e.p2.x),o=P(e.p1.y,e.p2.y);return M.roots(this.points,e).filter(e=>{var s=this.get(e);return M.between(s.x,n,i)&&M.between(s.y,r,o)})}selfintersects(e){let n=this.reduce(),r=n.length-2,i=[];for(let o=0,s,a;o<r;o++)s=n.slice(o,o+1),a=n.slice(o+2),i.push(...this.curveintersects(s,a,e));return i}curveintersects(e,n,r){let i=[];e.forEach(function(e){n.forEach(function(n){e.overlaps(n)&&i.push({left:e,right:n})})});let o=[];return i.forEach(function(e){let n=M.pairiteration(e.left,e.right,r);n.length>0&&(o=o.concat(n))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,i){let o=(i-r)/4,s=this.get(r+o),a=this.get(i-o),l=M.dist(e,n),h=M.dist(e,s),c=M.dist(e,a);return T(h-l)+T(c-l)}_iterate(e,n){let r=0,i=1,o;do{o=0,i=1;let s=this.get(r),a,l,h,c,u=!1,d=!1,p,f=i,g=1;do if(d=u,c=h,f=(r+i)/2,a=this.get(f),l=this.get(i),(h=M.getccenter(s,a,l)).interval={start:r,end:i},u=this._error(h,s,r,i)<=e,(p=d&&!u)||(g=i),u){if(i>=1){if(h.interval.end=g=1,c=h,i>1){let e={x:h.x+h.r*A(h.e),y:h.y+h.r*L(h.e)};h.e+=M.angle({x:h.x,y:h.y},e,this.get(1))}break}i+=(i-r)/2}else i=f;while(!p&&o++<100);if(o>=100)break;c=c||h,n.push(c),r=g}while(i<1);return n}}var F=Object.defineProperty,$=Object.getOwnPropertyDescriptor,B=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?$(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&F(n,r,s),s},H=c.ZP.div`
  width: 20px;
  height: 20px;
  border-radius: 50%;
  margin-top: -10px;
  margin-left: -10px;
  left: 50%;
  top: 50%;
  position: absolute;
  // 非 hover 状态下的样式
  border: none;

  & > .symbol {
    opacity: 0;
  }

  .bg-circle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    background-color: #fff;
    transform: scale(0.5);
    transition: all 0.2s linear 0s;
  }

  .bg {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: #9197F1;
    transform: scale(0.4, 0.4);
    transition: all 0.2s linear 0s;

    &.hasError {
      background: red;
    }

    .symbol {
      position: absolute;
      width: 14px;
      height: 14px;
      opacity: 0;
      pointer-events: none;
      color: #fff;
      transition: opacity 0.2s linear 0s;

      & > svg {
        width: 14px;
        height: 14px;
      }
    }

    .focus-circle {
      position: absolute;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 8px;
      height: 8px;
      opacity: 0;
      background: #9197f1;
      border-radius: 50%;
      transition: opacity 0.2s linear 0s;
    }
  }

  &.linked .bg:not(.hasError) {
    background: #4d53e8;
  }

  &.hovered .bg:not(.hasError) {
    border: none;
    cursor: crosshair;
    transform: scale(1, 1);
    background: #4d53e8;

    & > .symbol {
      opacity: 1;
    }
  }

  .cross-hair {
    position: relative;
    left: 2px;
    top: 2px;

    &::after,
    &::before {
      content: '';
      background: #fff;
      border-radius: 2px;
      position: absolute;
    }

    &::after {
      left: 4px;
      width: 2px;
      height: 6px;
      box-shadow: 0 4px #fff;
    }

    &::before {
      top: 4px;
      width: 6px;
      height: 2px;
      box-shadow: 4px 0 #fff;
    }
`;function K(){return s.createElement("div",{className:"symbol"},s.createElement("div",{className:"cross-hair"}))}var U=s.memo(e=>{let n=(0,h.G2)(l.XH),r=(0,h.G2)(l.dm),{entity:i,onClick:c}=e,{portType:u,relativePosition:d,disabled:p}=i,[f,g]=(0,s.useState)(i.targetElement),[y,m]=(0,s.useState)(d.x),[b,_]=(0,s.useState)(d.y),[E,w]=(0,s.useState)(!1),[x,C]=(0,s.useState)(!!i?.lines?.length),[S,D]=(0,s.useState)(e.entity.hasError),N=(0,l.gO)();(0,s.useEffect)(()=>{i.validate(),D(i.hasError);let e=i.onEntityChange(()=>{if(i.targetElement){i.targetElement!==f&&g(i.targetElement);return}let e=i.relativePosition;m(Math.round(e.x)),_(Math.round(e.y))}),o=n.onHoveredChange(e=>{w(n.isHovered(i.id))}),s=i.onErrorChanged(()=>{D(i.hasError)}),a=r.onAvailableLinesChange(()=>{setTimeout(()=>{r.disposed||i.disposed||C(!!i.lines.length)},0)});return()=>{e.dispose(),o.dispose(),s.dispose(),a.dispose()}},[n,i,f]);let O=(0,a.Z)(e.className||"",{hovered:!N&&E&&!p&&"input"!==u,linked:x}),M=s.createElement(H,{className:O,style:f?e.style:{...e.style,left:y,top:b},onClick:c,"data-port-entity-id":i.id,"data-port-entity-type":i.portType,"data-testid":"sdk.workflow.canvas.node.port"},s.createElement("div",{className:(0,a.Z)("bg-circle","workflow-bg-circle")}),s.createElement("div",{className:(0,a.Z)({bg:!0,"workflow-port-bg":!0,"workflow-point-bg":!0,hasError:S})},s.createElement(K,null)),s.createElement("div",{className:"focus-circle"}));return f?o.createPortal(M,f):M}),W=c.ZP.div.attrs({className:"gedit-flow-activity-edge"})`
  position: absolute;

  @keyframes flowingDash {
    to {
      stroke-dashoffset: -13;
    }
  }

  .dashed-line {
    stroke-dasharray: 8, 5;
  }

  .flowing-line {
    animation: flowingDash 0.5s linear infinite;
  }
`;function G({id:e,pos:n,reverseArrow:r,strokeWidth:i,vertical:o,hide:a}){if(a)return null;let l=o?r?`M ${n.x-6},${n.y} L ${n.x},${n.y-6} L ${n.x+6},${n.y}`:`M ${n.x-6},${n.y-6} L ${n.x},${n.y} L ${n.x+6},${n.y-6}`:r?`M ${n.x},${n.y+6} L ${n.x-6},${n.y} L ${n.x},${n.y-6}`:`M ${n.x-6},${n.y-6} L ${n.x},${n.y} L ${n.x-6},${n.y+6}`;return s.createElement("path",{d:l,strokeLinecap:"round",stroke:`url(#${e})`,fill:"none",strokeWidth:i})}var Y=(0,s.memo)(e=>{let{line:n,color:r,selected:i,children:o,strokePrefix:h}=e,{position:c,reverse:u,vertical:d,hideArrow:p}=n,{bounds:f,path:g}=n.getData(l.ps),y=e=>({x:e.x-f.x+12,y:e.y-f.y+12}),m=y(c.from),b=y(c.to),_=d?{x:b.x,y:b.y-l.em}:{x:b.x-l.em,y:b.y},E=d?{x:m.x,y:m.y+l.em+6}:{x:m.x+l.em+6,y:m.y},w=i?3:2,x=h?`${h}-${n.id}`:n.id,C=s.createElement("path",{d:g,fill:"none",stroke:`url(#${x})`,strokeWidth:w,className:(0,a.Z)(n.className,!n.className&&(n.processing||n.flowing?"dashed-line flowing-line":""))});return s.createElement(W,{style:{left:f.x-12,top:f.y-12,position:"absolute"}},o,s.createElement("svg",{width:f.width+24,height:f.height+24},s.createElement("defs",null,s.createElement("linearGradient",{x1:d?"100%":"0%",y1:d?"0%":"100%",x2:"100%",y2:"100%",id:x,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:r,offset:"0%"}),s.createElement("stop",{stopColor:r,offset:"100%"}))),s.createElement("g",null,C,s.createElement(G,{id:x,reverseArrow:u,pos:u?E:_,strokeWidth:w,vertical:d,hide:p}))))},(e,n)=>e.version===n.version),Z=class extends h.mh{constructor(){super(...arguments),this.layerID=(0,l.x0)(),this.mountedLines=new Map,this._version=0,this.node=d.xF.createDivWithClass("gedit-playground-layer gedit-flow-lines-layer")}onZoom(e){this.node.style.transform=`scale(${e})`}onReady(){this.pipelineNode.appendChild(this.node),this.toDispose.pushAll([this.selectService.onSelectionChanged(()=>this.render()),this.hoverService.onHoveredChange(()=>this.render()),this.workflowDocument.linesManager.onForceUpdate(()=>{this.mountedLines.clear(),this.bumpVersion(),this.render()})])}dispose(){this.mountedLines.clear()}render(){let[,e]=(0,s.useState)({});(0,s.useLayoutEffect)(()=>{let n=requestAnimationFrame(()=>{let n=!1;this.lines.forEach(e=>{let r=e.getData(l.ps),i=r.renderVersion;r.update(),r.renderVersion!==i&&(n=!0)}),n&&e({})});return()=>cancelAnimationFrame(n)},[this.lines]);let n=this.lines.map(e=>this.renderLine(e));return s.createElement(s.Fragment,null,n)}bumpVersion(){this._version=this._version+1,this._version===Number.MAX_SAFE_INTEGER&&(this._version=0)}lineProps(e){let{lineType:n}=this.workflowDocument.linesManager,r=this.selectService.isSelected(e.id),i=this.hoverService.isHovered(e.id),o=this.lineVersion(e);return{key:e.id,color:e.color,selected:r,hovered:i,line:e,lineType:n,version:o,strokePrefix:this.layerID}}lineVersion(e){let{renderVersion:n}=e.getData(l.ps),r=this.selectService.isSelected(e.id),i=this.hoverService.isHovered(e.id),{version:o,color:s}=e;return`v:${this._version},lv:${o},rv:${n},c:${s},s:${r?"T":"F"},h:${i?"T":"F"}`}lineComponent(e){let n=this.options.renderInsideLine??(()=>s.createElement(s.Fragment,null));return s.createElement(Y,{...e},s.createElement(n,{...e}))}renderLine(e){let n=this.lineProps(e),r=this.mountedLines.get(e.id),i=void 0!==r,{portal:s,version:a}=r??{};if(i&&a===n.version)return s;i||(this.renderElement.appendChild(e.node),e.onDispose(()=>{this.mountedLines.delete(e.id),e.node.remove()}));let l=o.createPortal(this.lineComponent(n),e.node);return this.mountedLines.set(e.id,{line:e,portal:l,version:n.version}),l}get renderElement(){return this.stackContext.node}};Z.type="WorkflowLinesLayer",B([(0,u.f3)(l.XH)],Z.prototype,"hoverService",2),B([(0,u.f3)(l.oJ)],Z.prototype,"selectService",2),B([(0,u.f3)(p.StackingContextManager)],Z.prototype,"stackContext",2),B([(0,h.RX)(l.e2)],Z.prototype,"lines",2),B([(0,h.RX)(l.FD)],Z.prototype,"ports",2),B([(0,h.aI)(l.CT,h.VO)],Z.prototype,"trans",2),B([(0,u.f3)(l.L4)],Z.prototype,"workflowDocument",2),Z=B([(0,u.b2)()],Z);var X=class{constructor(e){this.entity=e}get path(){return this.data?.path??""}calcDistance(e){return this.data?d.E9.getDistance(e,this.data.bezier.project(e)):Number.MAX_SAFE_INTEGER}get bounds(){return this.data?this.data.bbox:new d.Ae}update(e){this.data=this.calcBezier(e.fromPos,e.toPos)}calcBezier(e,n){let r=this.entity.vertical?function(e,n){let r,i,o=d.Ae.createRectangleWithTwoPoints(e,n);switch(e.y<=n.y?e.x<=n.x?1:3:e.x<=n.x?0:2){case 1:i=[{x:o.leftTop.x,y:o.leftTop.y+o.height/2},{x:o.rightBottom.x,y:o.rightBottom.y-o.height/2}];break;case 3:i=[{x:o.rightTop.x,y:o.rightTop.y+o.height/2},{x:o.leftBottom.x,y:o.leftBottom.y-o.height/2}];break;case 0:i=[{x:o.leftBottom.x,y:o.leftBottom.y+Math.min(o.height,300)},{x:o.rightTop.x,y:o.rightTop.y-Math.min(o.height,300)}];break;case 2:i=[{x:o.rightBottom.x,y:o.rightBottom.y+Math.min(o.height,300)},{x:o.leftTop.x,y:o.leftTop.y-Math.min(o.height,300)}]}return i}(e,n):function(e,n){let r,i,o=d.Ae.createRectangleWithTwoPoints(e,n);switch(e.x<=n.x?+(e.y<=n.y):e.y<=n.y?3:2){case 0:i=[{x:o.rightBottom.x-o.width/2,y:o.rightBottom.y},{x:o.leftTop.x+o.width/2,y:o.leftTop.y}];break;case 1:i=[{x:o.rightTop.x-o.width/2,y:o.rightTop.y},{x:o.leftBottom.x+o.width/2,y:o.leftBottom.y}];break;case 2:i=[{x:o.rightBottom.x+Math.min(o.width,300),y:o.rightBottom.y},{x:o.leftTop.x-Math.min(o.width,300),y:o.leftTop.y}];break;case 3:i=[{x:o.rightTop.x+Math.min(o.width,300),y:o.rightTop.y},{x:o.leftBottom.x-Math.min(o.width,300),y:o.leftBottom.y}]}return i}(e,n),i=new V([e,...r,n]),o=i.bbox(),s=new d.Ae(o.x.min,o.y.min,o.x.max-o.x.min,o.y.max-o.y.min),a=this.getPath({bbox:s,fromPos:e,toPos:n,controls:r});return this.data={fromPos:e,toPos:n,bezier:i,bbox:s,controls:r,path:a},this.data}getPath(e){let{bbox:n}=e,r=e=>({x:e.x-n.x+12,y:e.y-n.y+12}),i=r(e.fromPos),o=r(e.toPos),s=e.controls.map(e=>r(e)),a=this.entity.vertical?{x:o.x,y:o.y-l.em}:{x:o.x-l.em,y:o.y},h=s.map(e=>`${e.x} ${e.y}`).join(","),c=1===s.length?"S":"C";return this.entity.vertical?`M${i.x} ${i.y+l.em} ${c} ${h}, ${a.x} ${a.y}`:`M${i.x+l.em} ${i.y} ${c} ${h}, ${a.x} ${a.y}`}};X.type=l.SP.BEZIER;var Q=(e,n,r)=>{let i,o,{x:s,y:a}=e,{x:l,y:h}=n,{x:c,y:u}=r,d=c-l,p=u-h,f=d*d+p*p,g=0===f?-1:((s-l)*d+(a-h)*p)/f;g<0?(i=l,o=h):g>1?(i=c,o=u):(i=l+g*d,o=h+g*p);let y=s-i,m=a-o;return Math.sqrt(y*y+m*m)},q=i||(i={});let J=({source:e,target:n})=>e.x<n.x?{x:1,y:0}:{x:-1,y:0};q.getPoints=function({source:e,target:n,vertical:r=!1}){let i,o,s=r?{x:0,y:1}:{x:1,y:0},a=r?{x:0,y:-1}:{x:-1,y:0},l={x:e.x+20*s.x,y:e.y+20*s.y},h={x:n.x+20*a.x,y:n.y+20*a.y},c=r?{x:0,y:l.y<h.y?1:-1}:J({source:l,target:h}),u=0!==c.x?"x":"y",d=c[u],p=[],[f,g]=function({source:e,target:n}){let r=Math.abs(n.x-e.x)/2,i=n.x<e.x?n.x+r:n.x-r,o=Math.abs(n.y-e.y)/2;return[i,n.y<e.y?n.y+o:n.y-o]}({source:e,target:n});if(s[u]*a[u]==-1){i=f,o=g;let e=[{x:i,y:l.y},{x:i,y:h.y}],n=[{x:l.x,y:o},{x:h.x,y:o}];p=s[u]===d?"x"===u?e:n:"x"===u?n:e}else{let e=[{x:l.x,y:h.y}],n=[{x:h.x,y:l.y}];p="x"===u?s.x===d?n:e:s.y===d?e:n;let r="x"===u?"y":"x",c=s[u]===a[r],f=l[r]>h[r],g=l[r]<h[r];(1===s[u]&&(!c&&f||c&&g)||1!==s[u]&&(!c&&g||c&&f))&&(p="x"===u?e:n);let y={x:l.x,y:l.y},m={x:h.x,y:h.y};Math.max(Math.abs(y.x-p[0].x),Math.abs(m.x-p[0].x))>=Math.max(Math.abs(y.y-p[0].y),Math.abs(m.y-p[0].y))?(i=(y.x+m.x)/2,o=p[0].y):(i=p[0].x,o=(y.y+m.y)/2)}return[e,{x:l.x,y:l.y},...p,{x:h.x,y:h.y},n]},q.getSmoothStepPath=function(e){return e.reduce((n,r,i)=>{let o="";return n+(i>0&&i<e.length-1?function(e,n,r){let i=Math.min(d.E9.getDistance(e,n)/2,d.E9.getDistance(n,r)/2,5),{x:o,y:s}=n;if(e.x===o&&o===r.x||e.y===s&&s===r.y)return`L${o} ${s}`;if(e.y===s){let n=e.x<r.x?-1:1,a=e.y<r.y?1:-1;return`L ${o+i*n},${s}Q ${o},${s} ${o},${s+i*a}`}let a=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}(e[i-1],r,e[i+1]):`${0===i?"M":"L"}${r.x} ${r.y}`)},"")},q.getBounds=function(e){let n=e.map(e=>e.x),r=e.map(e=>e.y),i=Math.min(...n),o=Math.max(...n),s=Math.min(...r),a=Math.max(...r);return d.Ae.createRectangleWithTwoPoints({x:i,y:s},{x:o,y:a})},q.getFoldLineToPointDistance=(e,n)=>{if(0===e.length)return 1/0;if(1===e.length)return d.E9.getDistance(e[0],n);let r=[];for(let n=0;n<e.length-1;n++)r.push([e[n],e[n+1]]);return Math.min(...r.map(e=>{let[r,i]=e;return Q(n,r,i)}))};var ee=class{constructor(e){this.entity=e}get path(){return this.data?.path??""}calcDistance(e){return this.data?i.getFoldLineToPointDistance(this.data.points,e):Number.MAX_SAFE_INTEGER}get bounds(){return this.data?this.data.bbox:new d.Ae}update(e){let{fromPos:n,toPos:r}=e,{vertical:o}=this.entity,s={x:o?0:l.em,y:o?l.em:0},a={x:o?0:-l.em,y:o?-l.em:0},h=i.getPoints({source:{x:n.x+s.x,y:n.y+s.y},target:{x:r.x+a.x,y:r.y+a.y},vertical:o}),c=i.getBounds(h),u=h.map(e=>({x:e.x-c.x+12,y:e.y-c.y+12})),d=i.getSmoothStepPath(u);this.data={points:h,path:d,bbox:c}}};ee.type=l.SP.LINE_CHART;var et=(0,h.M1)({singleton:!0,onInit:(e,n)=>{e.playground.registerLayer(Z,{...n})},onReady:(e,n)=>{let r=e.container.get(l.dm);r.registerContribution(X).registerContribution(ee),n.contributions&&n.contributions.forEach(e=>{r.registerContribution(e)}),n.defaultLineType&&r.switchLineType(n.defaultLineType)}})},7941:function(e,n,r){"use strict";r.d(n,{QV:()=>x,dn:()=>D,sS:()=>C});var i=r(8319),o=r(4210),s=r(8336),a=r(1097),l=r(8176),h=r(2100),c=r(4194),u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?d(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&u(n,r,s),s},f=e=>e?.getNodeMeta().isContainer??!1,g=(e,n={x:0,y:0})=>{let r=e.node;if(f(r)){let{point:r}=e;return"input"===e.portType?new s.Ae(r.x+n.x,r.y-50+n.y,300,100):new s.Ae(r.x-300,r.y-50,300,100)}return r.getData(h.eG).bounds},y=e=>{let{node:n,subsequentNodes:r,fromPort:o,toPort:s,containerNode:a,offset:h,historyService:c,dragService:u}=e;if(!h||!s)return;let d=r.map(e=>{let n=e.getData(i.VO);return{x:n.position.x,y:n.position.y}});c.pushOperation({type:l.Nj.dragNodes,value:{ids:r.map(e=>e.id),value:d.map(e=>({x:e.x+h.x,y:e.y+h.y})),oldValue:d}});let p=g(o),f=g(s,h),y=n.getData(i.VO),m={x:(p.center.x+f.center.x)/2,y:(p.y+f.y)/2};a&&(m=u.adjustSubNodePosition(n.flowNodeType,a,m)),c.pushOperation({type:l.Nj.dragNodes,value:{ids:[n.id],value:[m],oldValue:[{x:y.position.x,y:y.position.y}]}})},m=(e,n)=>{let r=Math.abs(Math.min(e.right,n.right)-Math.max(e.left,n.left)),i=Math.abs(Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top));return s.Ae.intersects(e,n)?{x:-r,y:-i}:{x:r,y:i}},b=(e,n)=>void 0!==e&&void 0!==n&&e-n>1e-5,_=(e,n)=>void 0!==e&&void 0!==n&&n-e>1e-5,E=e=>{let{node:n,fromPort:r,toPort:i,padding:o}=e,a=g(r),l=g(i),c=n.getData(h.eG),u=n.getNodeMeta()?.size??{width:c.bounds.width,height:c.bounds.height},d={x:u.width+o.x,y:u.height+o.y},p=m(a,l),f={x:b(p.x,d.x)?0:d.x-p.x,y:b(p.y,d.y)?0:d.y-p.y};if(0===f.x||0===f.y)return;let y={vertical:s.Ae.intersects(a,l,"horizontal"),horizontal:s.Ae.intersects(a,l,"vertical")},E=0,w=0;return!y.horizontal&&(b(l.center.y,a.center.y)?w=f.y:_(l.center.y,a.center.y)&&(w=-f.y)),!y.vertical&&(b(l.center.x,a.center.x)?E=f.x:_(l.center.x,a.center.x)&&(E=-f.x)),{x:E,y:w}},w=e=>{let{node:n,linesManager:r}=e;if(f(n))return[];let i=n.parent?.blocks??[],o=new Set,s=new Map;r.getAllLines().forEach(e=>{s.has(e.from.id)||s.set(e.from.id,[]),!e.to?.id||f(e.to)||s.get(e.from.id)?.push(e.to.id)});let a=e=>{o.has(e)||(o.add(e),(s.get(e)??[]).forEach(a))};return a(n.id),i.filter(e=>o.has(e.id))},x={adjustNodePosition:e=>{let{nodeType:n,position:r,fromPort:i,toPort:o,containerNode:s,document:a,dragService:l}=e,h=a.getNodeRegistry(n),c=h?.meta?.size,u=r;return u=c?i&&o?{x:r.x,y:r.y-c.height/2}:i&&!o?{x:r.x+c.width/2,y:r.y-c.height/2}:!i&&o?{x:r.x-c.width/2,y:r.y-c.height/2}:r:r,l.adjustSubNodePosition(n,s,u)},buildLine:e=>{let{fromPort:n,node:r,toPort:i,linesManager:o}=e,s=r.getData(a.QW);if(!s)return;let l=s.inputPorts?.length>0;if(n&&l){let e=s.inputPorts[0],i=1===s.inputPorts.length;o.createLine({from:n.node.id,fromPort:n.portID,to:r.id,toPort:i?void 0:e.id})}let h=s.outputPorts?.length>0;if(i&&h){let e=s.outputPorts[0];o.createLine({from:r.id,fromPort:e.portID,to:i.node.id,toPort:i.portID})}},getPortBox:g,getSubsequentNodes:w,getContainerNode:e=>{let{fromPort:n,containerNode:r}=e;if(r)return r;let i=n?.node,o=i?.parent;return f(i)?i:o},rectDistance:m,subNodesAutoOffset:e=>{let{node:n,fromPort:r,toPort:i,linesManager:o,historyService:s,dragService:a,containerNode:l,padding:h={x:100,y:100}}=e,c=E({node:n,fromPort:r,toPort:i,padding:h});y({node:n,subsequentNodes:w({node:i.node,linesManager:o}),fromPort:r,toPort:i,containerNode:l,offset:c,historyService:s,dragService:a})},subPositionOffset:E,updateSubSequentNodesPosition:y,waitNodeRender:async()=>{await (0,a.gw)(20)}},C=class{constructor(){this.toDispose=new s.K4,this.callNodePanel=async()=>void 0}dispose(){this.toDispose.dispose()}setCallNodePanel(e){this.callNodePanel=e}async call(e){let{panelPosition:n,fromPort:r,enableMultiAdd:i=!1,panelProps:o={},containerNode:s,afterAddNode:a}=e;if(!n||this.playgroundConfig.readonly)return;let l=[];return new Promise(h=>{this.callNodePanel({position:n,enableMultiAdd:i,panelProps:o,containerNode:x.getContainerNode({fromPort:r,containerNode:s}),onSelect:async n=>{let r=await this.addNode(e,n);a?.(r),i?r&&l.push(r):h(r)},onClose:()=>{h(i?l:void 0)}})})}async singleSelectNodePanel(e){return new Promise(n=>{this.callNodePanel({...e,enableMultiAdd:!1,onSelect:async e=>{n(e)},onClose:()=>{n(void 0)}})})}async addNode(e,n){let{panelPosition:r,fromPort:i,toPort:o,canAddNode:s,autoOffsetPadding:a={x:100,y:100},enableBuildLine:l=!1,enableSelectPosition:h=!1,enableAutoOffset:c=!1,enableDragNode:u=!1}=e;if(!r||!n)return;let{nodeType:d,selectEvent:p,nodeJSON:f}=n,g=x.getContainerNode({fromPort:i,containerNode:e.containerNode});if(s&&!s({nodeType:d,containerNode:g}))return;let y=this.playgroundConfig.getPosFromMouseEvent(p),m=e.customPosition?e.customPosition({nodeType:d,selectPosition:y}):x.adjustNodePosition({nodeType:d,position:h?y:r,fromPort:i,toPort:o,containerNode:g,document:this.document,dragService:this.dragService}),b=this.document.createWorkflowNodeByType(d,m,f??{},g?.id);if(b)return c&&i&&o&&x.subNodesAutoOffset({node:b,fromPort:i,toPort:o,padding:a,containerNode:g,historyService:this.historyService,dragService:this.dragService,linesManager:this.linesManager}),(l||u)&&(await x.waitNodeRender(),l&&x.buildLine({fromPort:i,node:b,toPort:o,linesManager:this.linesManager}),u&&(this.selectService.selectNode(b),this.dragService.startDragSelectedNodes(p))),b}};p([(0,o.f3)(a.L4)],C.prototype,"document",2),p([(0,o.f3)(a.iw)],C.prototype,"dragService",2),p([(0,o.f3)(a.oJ)],C.prototype,"selectService",2),p([(0,o.f3)(a.dm)],C.prototype,"linesManager",2),p([(0,o.f3)(i.ER)],C.prototype,"playgroundConfig",2),p([(0,o.f3)(l.qp)],C.prototype,"historyService",2),C=p([(0,o.b2)()],C);var S=class extends i.mh{constructor(){super(),this.node=s.xF.createDivWithClass("gedit-playground-layer gedit-node-panel-layer"),this.node.style.zIndex="9999",this.renderList=new Map}onReady(){this.service.setCallNodePanel(this.call.bind(this))}onZoom(e){this.node.style.transform=`scale(${e})`}render(){let e=this.options.renderer;return c.createElement(c.Fragment,null,Array.from(this.renderList.keys()).map(n=>{let r=this.renderList.get(n);return c.createElement(e,{key:n,...r})}))}async call(e){let n=(0,a.x0)(),{onSelect:r,onClose:i,enableMultiAdd:o=!1,panelProps:s={}}=e;return new Promise(a=>{let l=()=>{this.renderList.delete(n),this.render(),a()},h={...e,panelProps:s,onSelect:e=>{r(e),o||l()},onClose:()=>{l(),i()}};this.renderList.set(n,h),this.render()})}};S.type="WorkflowNodePanelLayer",p([(0,o.f3)(C)],S.prototype,"service",2);var D=(0,i.M1)({onBind({bind:e}){e(C).toSelf().inSingletonScope()},onInit:(e,n)=>{e.playground.registerLayer(S,{renderer:n.renderer})},onDispose:e=>{e.get(C).dispose()}})},2758:function(e,n,r){"use strict";r.d(n,{Z:()=>w});var i=r(8319),o=r(4210),s=r(8336),a=r(1097),l=r(2100),h=r(4194),c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?u(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&c(n,r,s),s},p={enableEdgeSnapping:!0,edgeThreshold:7,enableGridSnapping:!1,gridSize:20,enableMultiSnapping:!1,enableOnlyViewportSnapping:!0,edgeColor:"#4E40E5",alignColor:"#4E40E5",edgeLineWidth:2,alignLineWidth:2,alignCrossWidth:16},f=(e,n)=>void 0!==e&&void 0!==n&&1e-5>Math.abs(e-n),g=(e,n)=>void 0!==e&&void 0!==n&&n-e>1e-5,y=(e,n)=>void 0!==e&&void 0!==n&&e-n>1e-5,m=(e,n)=>f(e,n)||g(e,n),b=e=>"number"==typeof e&&!isNaN(e),_=class{constructor(){this.disposers=[],this.snapEmitter=new s.Q5,this.onSnap=this.snapEmitter.event,this._disabled=!1}init(e={}){this.options={...p,...e},this.mountListener()}dispose(){this.disposers.forEach(e=>e.dispose())}get disabled(){return this._disabled}disable(){this._disabled||(this._disabled=!0,this.clear())}enable(){this._disabled&&(this._disabled=!1,this.clear())}mountListener(){let e=this.dragService.registerPosAdjuster(e=>{let{selectedNodes:n,position:r}=e,i=!this.options.enableMultiSnapping&&1!==n.length;return this._disabled||!this.options.enableEdgeSnapping||i?{x:0,y:0}:this.snapping({targetNodes:n,position:r})}),n=this.dragService.onNodesDrag(e=>{"onDragEnd"===e.type&&!this._disabled&&(this.options.enableGridSnapping&&this.gridSnapping({targetNodes:e.nodes,gridSize:this.options.gridSize}),this.options.enableEdgeSnapping&&this.clear())});this.disposers.push(e,n)}snapping(e){let{targetNodes:n,position:r}=e,i=this.getBounds(n),o=new s.Ae(r.x,r.y,i.width,i.height),a=this.getSnapNodeRects({targetNodes:n,targetRect:o}),{alignOffset:l,alignRects:h,alignSpacing:c}=this.calcAlignOffset({targetRect:o,alignThreshold:this.options.edgeThreshold,snapNodeRects:a}),{snapOffset:u,snapEdgeLines:d}=this.calcSnapOffset({targetRect:o,edgeThreshold:this.options.edgeThreshold,snapNodeRects:a}),p={x:u.x||l.x,y:u.y||l.y},f=new s.Ae(r.x+p.x,r.y+p.y,o.width,o.height);return this.snapEmitter.fire({snapRect:f,snapEdgeLines:d,alignRects:h,alignSpacing:c}),p}calcSnapOffset(e){let{snapNodeRects:n,edgeThreshold:r,targetRect:i}=e,o=this.getSnapLines({snapNodeRects:n}),s=o.horizontal.find(e=>m(Math.abs(e.y-i.top),r)),a=o.horizontal.find(e=>m(Math.abs(e.y-i.bottom),r)),l=o.vertical.find(e=>m(Math.abs(e.x-i.left),r)),h=o.vertical.find(e=>m(Math.abs(e.x-i.right),r)),c=o.midHorizontal.find(e=>m(Math.abs(e.y-i.center.y),r)),u=o.midVertical.find(e=>m(Math.abs(e.x-i.center.x),r)),d=s?.y,p=b(a?.y)?a.y-i.height:void 0,g=l?.x,y=b(h?.x)?h.x-i.width:void 0,_=b(c?.y)?c.y-i.height/2:void 0,E=b(u?.x)?u.x-i.width/2:void 0,w={x:E??g??y??i.x,y:_??d??p??i.y};return{snapOffset:{x:w.x-i.x,y:w.y-i.y},snapEdgeLines:{top:f(d,w.y)?s:void 0,bottom:f(p,w.y)?a:void 0,left:f(g,w.x)?l:void 0,right:f(y,w.x)?h:void 0,midVertical:f(E,w.x)?u:void 0,midHorizontal:f(_,w.y)?c:void 0}}}gridSnapping(e){let{gridSize:n,targetNodes:r}=e,i=this.getBounds(r),o=e=>Math.round(e/n)*n,s={x:o(i.x),y:o(i.y)},a={x:s.x-i.x,y:s.y-i.y};r.forEach(e=>this.updateNodePositionWithOffset({node:e,offset:a}))}clear(){this.snapEmitter.fire({snapEdgeLines:{},snapRect:s.Ae.EMPTY,alignRects:{top:[],bottom:[],left:[],right:[]},alignSpacing:{}})}getSnapLines(e){let{snapNodeRects:n}=e,r=[],i=[],o=[],s=[];return n.forEach(e=>{let n=e.rect,a=n.center,l={y:n.top,sourceNodeId:e.id},h={y:n.bottom,sourceNodeId:e.id},c={x:n.left,sourceNodeId:e.id},u={x:n.right,sourceNodeId:e.id},d={y:a.y,sourceNodeId:e.id},p={x:a.x,sourceNodeId:e.id};r.push(l,h),i.push(c,u),o.push(d),s.push(p)}),{horizontal:r,vertical:i,midHorizontal:o,midVertical:s}}getAvailableNodes(e){let{targetNodes:n,targetRect:r}=e,i=r.center,o=n[0].parent?.id??this.document.root.id,s=n.map(e=>e.id);return s.push(l.Sy.ROOT),this.nodes.filter(e=>e.parent?.id===o).filter(e=>!s.includes(e.id)).sort((e,n)=>{let r=e.getData(l.eG).bounds.center,o=n.getData(l.eG).bounds.center;return Math.abs(r.x-i.x)+Math.abs(r.y-i.y)-(Math.abs(o.x-i.x)+Math.abs(o.y-i.y))})}viewRect(){let{width:e,height:n,scrollX:r,scrollY:i,zoom:o}=this.playgroundConfig.config;return new s.Ae(r/o,i/o,e/o,n/o)}getSnapNodeRects(e){let n=this.getAvailableNodes(e),r=this.viewRect();return n.map(e=>{let n={id:e.id,rect:e.getData(l.eG).bounds,entity:e};if(!this.options.enableOnlyViewportSnapping||e.parent?.flowNodeType!==l.Sy.ROOT||s.Ae.intersects(r,n.rect))return n}).filter(Boolean)}get nodes(){return this.entityManager.getEntities(a.CT)}getBounds(e){return 0===e.length?s.Ae.EMPTY:s.Ae.enlarge(e.map(e=>e.getData(l.eG).bounds))}updateNodePositionWithOffset(e){let{node:n,offset:r}=e,o=n.getData(i.VO),s={x:o.position.x+r.x,y:o.position.y+r.y};o.update({position:s}),this.document.layout.updateAffectedTransform(n)}calcAlignOffset(e){let n,r,i,o,s,a,{snapNodeRects:l,targetRect:h,alignThreshold:c}=e,u=this.getAlignRects({targetRect:h,snapNodeRects:l}),d=this.calcAlignSpacing({targetRect:h,alignRects:u});if(d.top){let e=u.top[0].rect.bottom+d.top;m(Math.abs(h.top-e),c)?n=e:d.top=void 0}if(d.bottom){let e=u.bottom[0].rect.top-d.bottom;g(Math.abs(h.bottom-e),c)?r=e-h.height:d.bottom=void 0}if(d.left){let e=u.left[0].rect.right+d.left;m(Math.abs(h.left-e),c)?i=e:d.left=void 0}if(d.right){let e=u.right[0].rect.left-d.right;m(Math.abs(h.right-e),c)?o=e-h.width:d.right=void 0}if(d.midHorizontal){let e=u.left[0].rect.right+d.midHorizontal;m(Math.abs(h.left-e),c)?a=e:d.midHorizontal=void 0}if(d.midVertical){let e=u.top[0].rect.bottom+d.midVertical;m(Math.abs(h.top-e),c)?s=e:d.midVertical=void 0}let p={x:a??i??o??h.x,y:s??n??r??h.y};return{alignOffset:{x:p.x-h.x,y:p.y-h.y},alignRects:u,alignSpacing:d}}calcAlignSpacing(e){let{targetRect:n,alignRects:r}=e,i=this.getDirectionAlignSpacing({rects:r.top,isHorizontal:!1}),o=this.getDirectionAlignSpacing({rects:r.bottom,isHorizontal:!1}),s=this.getDirectionAlignSpacing({rects:r.left,isHorizontal:!0}),a=this.getDirectionAlignSpacing({rects:r.right,isHorizontal:!0});return{top:i,bottom:o,left:s,right:a,midHorizontal:this.getMidAlignSpacing({rectA:r.left[0]?.rect,rectB:r.right[0]?.rect,targetRect:n,isHorizontal:!0}),midVertical:this.getMidAlignSpacing({rectA:r.top[0]?.rect,rectB:r.bottom[0]?.rect,targetRect:n,isHorizontal:!1})}}getAlignRects(e){let{targetRect:n,snapNodeRects:r}=e,i=[],o=[],s=[],a=[];return r.forEach(e=>{let r=e.rect,{isVerticalIntersection:l,isHorizontalIntersection:h,isIntersection:c}=this.intersection(r,n);!c&&(l?y(r.center.y,n.center.y)?o.push({rect:r,sourceNodeId:e.id}):i.push({rect:r,sourceNodeId:e.id}):h&&(y(r.center.x,n.center.x)?a.push({rect:r,sourceNodeId:e.id}):s.push({rect:r,sourceNodeId:e.id})))}),{top:i,bottom:o,left:s,right:a}}getMidAlignSpacing(e){let{rectA:n,rectB:r,targetRect:i,isHorizontal:o}=e;if(!n||!r)return;let{isVerticalIntersection:s,isHorizontalIntersection:a,isIntersection:l}=this.intersection(n,r);if(!l){if(o&&a&&!s)return(Math.min(Math.abs(n.left-r.right),Math.abs(n.right-r.left))-i.width)/2;else if(!o&&s&&!a)return(Math.min(Math.abs(n.top-r.bottom),Math.abs(n.bottom-r.top))-i.height)/2}}getDirectionAlignSpacing(e){let{rects:n,isHorizontal:r}=e;if(n.length<2)return;let i=n[0].rect,o=n[1].rect,{isVerticalIntersection:s,isHorizontalIntersection:a,isIntersection:l}=this.intersection(i,o);if(!l){if(r&&a&&!s)return Math.min(Math.abs(i.left-o.right),Math.abs(i.right-o.left));else if(!r&&s&&!a)return Math.min(Math.abs(i.top-o.bottom),Math.abs(i.bottom-o.top))}}intersection(e,n){let r=g(e.left,n.right)&&y(e.right,n.left),i=g(e.top,n.bottom)&&y(e.bottom,n.top);return{isHorizontalIntersection:i,isVerticalIntersection:r,isIntersection:i&&r}}};d([(0,o.f3)(a.L4)],_.prototype,"document",2),d([(0,o.f3)(i.v2)],_.prototype,"entityManager",2),d([(0,o.f3)(a.iw)],_.prototype,"dragService",2),d([(0,o.f3)(i.ER)],_.prototype,"playgroundConfig",2),_=d([(0,o.b2)()],_);var E=class extends i.mh{constructor(){super(...arguments),this.node=s.xF.createDivWithClass("gedit-playground-layer gedit-flow-snap-layer"),this.edgeLines=[],this.alignLines=[]}onReady(){this.node.style.zIndex="9999",this.toDispose.pushAll([this.service.onSnap(e=>{this.edgeLines=this.calcEdgeLines(e),this.alignLines=this.calcAlignLines(e),this.render()})])}render(){return h.createElement(h.Fragment,null,this.alignLines.length>0&&h.createElement("div",{className:"workflow-snap-align-lines"},this.renderAlignLines()),this.edgeLines.length>0&&h.createElement("div",{className:"workflow-snap-edge-lines"},this.renderEdgeLines()))}onZoom(e){this.node.style.transform=`scale(${e})`}renderEdgeLines(){return this.edgeLines.map(e=>{let{className:n,sourceNode:r,top:i,left:o,width:s,height:a,dashed:l}=e,c=`${n}-${r}-${i}-${o}-${s}-${a}`,u=s<a,d=`${this.options.edgeLineWidth}px ${l?"dashed":"solid"} ${this.options.edgeColor}`;return h.createElement("div",{className:`workflow-snap-edge-line ${n}`,"data-testid":"sdk.workflow.canvas.snap.edgeLine","data-snap-line-id":c,"data-snap-line-source-node":r,key:c,style:{top:i,left:o,width:s,height:a,position:"absolute",borderLeft:u?d:"none",borderTop:u?"none":d}})})}renderAlignLines(){return this.alignLines.map(e=>{let n=`${e.className}-${e.sourceNode}-${e.top}-${e.left}-${e.width}-${e.height}`,r=y(e.width,e.height),i=this.options.alignLineWidth,o=this.options.alignCrossWidth,s=r?e.top-i/2:e.top,a=r?e.left:e.left-i/2;return h.createElement("div",{className:`workflow-snap-align-line ${e.className}`,"data-testid":"sdk.workflow.canvas.snap.alignLine","data-snap-line-id":n,"data-snap-line-source-node":e.sourceNode,key:n,style:{position:"absolute"}},h.createElement("div",{style:{position:"absolute",top:s,left:a,width:r?e.width:i,height:r?i:e.height,backgroundColor:this.options.alignColor}}),h.createElement("div",{style:{position:"absolute",top:r?s-(o-i)/2:s,left:r?a:a-(o-i)/2,width:r?i:o,height:r?o:i,backgroundColor:this.options.alignColor}}),h.createElement("div",{style:{position:"absolute",top:r?s-(o-i)/2:s+e.height-i,left:r?a+e.width-i:a-(o-i)/2,width:r?i:o,height:r?o:i,backgroundColor:this.options.alignColor}}))})}calcEdgeLines(e){let{alignRects:n,snapRect:r,snapEdgeLines:i}=e,o=[],s=this.directionFullAlign({alignRects:n.top,targetRect:r,isVertical:!0}),a=this.directionFullAlign({alignRects:n.bottom,targetRect:r,isVertical:!0}),h=this.directionFullAlign({alignRects:n.left,targetRect:r,isVertical:!1}),c=this.directionFullAlign({alignRects:n.right,targetRect:r,isVertical:!1});if(s){let e=s.rect.top,n=a?r.bottom-r.height/2-e:r.bottom-e,i={top:e,width:this.options.edgeLineWidth,height:n};o.push({className:"edge-full-top-left",sourceNode:s.sourceNodeId,left:r.left,...i}),o.push({className:"edge-full-top-right",sourceNode:s.sourceNodeId,left:r.right,...i}),o.push({className:"edge-full-top-mid",sourceNode:s.sourceNodeId,left:r.left+r.width/2,dashed:!0,...i})}if(a){let e=s?r.top+r.height/2:r.top,n=a.rect.bottom-e,i={top:e,width:this.options.edgeLineWidth,height:n};o.push({className:"edge-full-bottom-left",sourceNode:a.sourceNodeId,left:r.left,...i}),o.push({className:"edge-full-bottom-right",sourceNode:a.sourceNodeId,left:r.right,...i}),o.push({className:"edge-full-bottom-mid",sourceNode:a.sourceNodeId,left:r.left+r.width/2,dashed:!0,...i})}if(h){let e=h.rect.left,n=c?r.right-r.width/2-e:r.right-e,i={left:e,width:n,height:this.options.edgeLineWidth};o.push({className:"edge-full-left-top",sourceNode:h.sourceNodeId,top:r.top,...i}),o.push({className:"edge-full-left-bottom",sourceNode:h.sourceNodeId,top:r.bottom,...i}),o.push({className:"edge-full-left-mid",sourceNode:h.sourceNodeId,top:r.top+r.height/2,dashed:!0,...i})}if(c){let e=h?r.left+r.width/2:r.left,n=c.rect.right-e,i={left:e,width:n,height:this.options.edgeLineWidth};o.push({className:"edge-full-right-top",sourceNode:c.sourceNodeId,top:r.top,...i}),o.push({className:"edge-full-right-bottom",sourceNode:c.sourceNodeId,top:r.bottom,...i}),o.push({className:"edge-full-right-mid",sourceNode:c.sourceNodeId,top:r.top+r.height/2,dashed:!0,...i})}let u=Object.entries(i).map(([e,n])=>{if(!n)return;let i=this.document.getNode(n.sourceNodeId);if(!i)return;let o=i.getData(l.eG).bounds;if(b(n.x)){let i=Math.min(o.top,r.top),l=Math.max(o.bottom,r.bottom),h=n.x,c=this.options.edgeLineWidth,u={className:`edge-snapped-${e}`,sourceNode:n.sourceNodeId,top:i,left:h,width:c,height:l-i,dashed:"midVertical"===e},d=i===o.top;if(d&&s||!d&&a)return;return u}if(b(n.y)){let i=Math.min(o.left,r.left),s=Math.max(o.right,r.right),a=n.y,l=this.options.edgeLineWidth,u={className:`edge-snapped-${e}`,sourceNode:n.sourceNodeId,top:a,left:i,width:s-i,height:l,dashed:"midHorizontal"===e},d=i===o.left;if(d&&h||!d&&c)return;return u}}).filter(Boolean);return o.push(...u),o}directionFullAlign(e){let{alignRects:n,targetRect:r,isVertical:i}=e,o=-1;for(let e=0;e<n.length;e++){let s=n[e],a=n[e-1]?.rect??r;if(!this.rectFullAlign(s.rect,a,i))break;o=e}return n[o]}rectFullAlign(e,n,r){return r?f(e.left,n.left)&&f(e.right,n.right):f(e.top,n.top)&&f(e.bottom,n.bottom)}calcAlignLines(e){let{alignRects:n,alignSpacing:r,snapRect:i}=e,o=this.calcDirectionAlignLines({alignRects:n.top,targetRect:i,isVertical:!0,spacing:r.midVertical??r.top}),s=this.calcDirectionAlignLines({alignRects:n.bottom,targetRect:i,isVertical:!0,spacing:r.midVertical??r.bottom});return[...o,...s,...this.calcDirectionAlignLines({alignRects:n.left,targetRect:i,isVertical:!1,spacing:r.midHorizontal??r.left}),...this.calcDirectionAlignLines({alignRects:n.right,targetRect:i,isVertical:!1,spacing:r.midHorizontal??r.right})]}calcDirectionAlignLines(e){let{alignRects:n,targetRect:r,isVertical:i,spacing:o}=e,s=[];if(!o)return s;for(let e=0;e<n.length;e++){let a=n[e],l=a.rect,h=n[e-1]?.rect??r;if(!f(i?Math.min(Math.abs(h.top-l.bottom),Math.abs(h.bottom-l.top)):Math.min(Math.abs(h.left-l.right),Math.abs(h.right-l.left)),o))break;if(i){let e=this.calcHorizontalIntersectionCenter(l,r);s.push({className:"align-vertical",sourceNode:a.sourceNodeId,top:Math.min(l.bottom,h.bottom),left:e,width:1,height:o})}else{let e=this.calcVerticalIntersectionCenter(l,r);s.push({className:"align-horizontal",sourceNode:a.sourceNodeId,top:e,left:Math.min(l.right,h.right),width:o,height:1})}}return s}calcVerticalIntersectionCenter(e,n){return(Math.max(e.top,n.top)+Math.min(e.bottom,n.bottom))/2}calcHorizontalIntersectionCenter(e,n){return(Math.max(e.left,n.left)+Math.min(e.right,n.right))/2}};E.type="WorkflowSnapLayer",d([(0,o.f3)(a.L4)],E.prototype,"document",2),d([(0,o.f3)(_)],E.prototype,"service",2),E=d([(0,o.b2)()],E);var w=(0,i.M1)({onBind({bind:e}){e(_).toSelf().inSingletonScope()},onInit(e,n){let r={...p,...n};e.playground.registerLayer(E,r),e.get(_).init(r)},onDispose(e){e.get(_).dispose()}})},6141:function(e,n,r){"use strict";r.r(n),r.d(n,{StackingBaseIndex:()=>E,StackingComputing:()=>m,StackingConfig:()=>x,StackingContextManager:()=>C,StackingItem:()=>b,StackingType:()=>_,createFreeStackPlugin:()=>S,layersComputing:()=>T});var i,o,s,a,l=r(8319),h=r(9378),c=r(4210),u=r(8336),d=r(1097),p=r(2100),f=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?g(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&f(n,r,s),s},m=class{compute(e){this.clearCache();let{root:n,nodes:r,context:i}=e;return this.context=i,this.nodeIndexes=this.computeNodeIndexesMap(r),this.topLevel=this.computeTopLevel(r),this.maxLevel=2*this.topLevel,this.layerHandler(n.blocks),{nodeLevel:this.nodeLevel,lineLevel:this.lineLevel,topLevel:this.topLevel,maxLevel:this.maxLevel}}clearCache(){this.currentLevel=0,this.topLevel=0,this.maxLevel=0,this.nodeIndexes=new Map,this.nodeLevel=new Map,this.lineLevel=new Map}computeNodeIndexesMap(e){let n=new Map;return e.forEach((e,r)=>{n.set(e.id,r)}),n}computeTopLevel(e){let n=e.filter(e=>e.id!==p.Sy.ROOT),r=n.reduce((e,n)=>n.blocks.length>0?e+1:e,0);return n.length+r+1}layerHandler(e,n=!1){let r=this.sortNodes(e);this.getNodesAllLines(r).forEach(e=>{e.isDrawing||this.context.hoveredEntityID===e.id||this.context.selectedIDs.includes(e.id)?this.lineLevel.set(e.id,this.maxLevel):this.lineLevel.set(e.id,this.getLevel(n))}),this.levelIncrease(),r.forEach(e=>{let r=this.context.selectedIDs.includes(e.id);r?this.nodeLevel.set(e.id,this.topLevel):this.nodeLevel.set(e.id,this.getLevel(n)),this.levelIncrease(),e.blocks.length>0&&this.layerHandler(e.blocks,n||r)})}sortNodes(e){return e.sort((e,n)=>{let r=this.nodeIndexes.get(e.id),i=this.nodeIndexes.get(n.id);return void 0===r||void 0===i?0:r-i})}getNodesAllLines(e){return e.map(e=>{let n=e.getData(d.Z1);return[...n.outputLines.filter(Boolean),...n.inputLines.filter(Boolean)]}).flat().filter(e=>void 0===this.lineLevel.get(e.id)||this.isHigherFirstLine(e))}isHigherFirstLine(e){return e.to?.parent===e.from||e.from?.parent===e.to}getLevel(e){return e?this.topLevel+this.currentLevel:this.currentLevel}levelIncrease(){this.currentLevel+=1}},b=((i=b||{}).Line="line",i.Node="node",i),_=((o=_||{}).Line="line",o.Node="node",o),E={line:0,node:1},w=Object.keys(_).length,x={startIndex:8,allowLevel:2,levelIndexStep:w,maxLevel:4,maxIndex:8+4*w},C=class{constructor(){this.node=u.xF.createDivWithClass("gedit-playground-layer gedit-flow-render-layer"),this.disposers=[],this.compute=(0,h.debounce)(this._compute,10)}init(){this.pipelineRenderer.node.appendChild(this.node),this.mountListener()}ready(){this.compute()}dispose(){this.disposers.forEach(e=>e.dispose())}_compute(){let e=this.context,{nodeLevel:n,lineLevel:r}=new m().compute({root:this.document.root,nodes:this.nodes,context:e});this.nodes.forEach(e=>{let r=n.get(e.id),i=e.getData(p.Lz),o=i.node;if(o.style.position="absolute",void 0===r){o.style.zIndex="auto",i.stackIndex=0;return}let s=x.startIndex+r;o.style.zIndex=String(s),i.stackIndex=s}),this.lines.forEach(e=>{let n=r.get(e.id),i=e.node;if(i.style.position="absolute",void 0===n){i.style.zIndex="auto";return}i.style.zIndex=String(x.startIndex+n)})}get nodes(){return this.entityManager.getEntities(d.CT)}get lines(){return this.entityManager.getEntities(d.e2)}get context(){return{hoveredEntity:this.hoverService.hoveredNode,hoveredEntityID:this.hoverService.hoveredNode?.id,selectedEntities:this.selectService.selection,selectedIDs:this.selectService.selection.map(e=>e.id)}}mountListener(){let e=this.onEntityChange(),n=this.onZoom(),r=this.onHover(),i=this.onSelect();this.disposers=[e,n,r,i]}onZoom(){return this.pipelineRegistry.onZoom(e=>{this.node.style.transform=`scale(${e})`})}onHover(){return this.hoverService.onHoveredChange(()=>{this.compute()})}onEntityChange(){return this.entityManager.onEntityChange(()=>{this.compute()})}onSelect(){return this.selectService.onSelectionChanged(()=>{this.compute()})}};y([(0,c.f3)(d.L4)],C.prototype,"document",2),y([(0,c.f3)(l.v2)],C.prototype,"entityManager",2),y([(0,c.f3)(l.Tj)],C.prototype,"pipelineRenderer",2),y([(0,c.f3)(l.Rm)],C.prototype,"pipelineRegistry",2),y([(0,c.f3)(d.XH)],C.prototype,"hoverService",2),y([(0,c.f3)(d.oJ)],C.prototype,"selectService",2),C=y([(0,c.b2)()],C);var S=(0,l.M1)({onBind({bind:e}){e(C).toSelf().inSingletonScope()},onInit(e){e.get(C).init()},onReady(e){e.get(C).ready()},onDispose(e){e.get(C).dispose()}}),D=s||(s={});D.compute=(e,n)=>{let r=N(e,n),i=O(e);i.style.position="absolute",i.style.zIndex=(0,D.zIndexStringify)(r)},D.stackingIndex=(e,n)=>{if(n<1)return;let r=E[e];return x.startIndex+x.levelIndexStep*(n-1)+r},D.nodeStackingLevel=(e,n,r=!1)=>{let i=[],o=e;for(;o;)i.push(o),o=o.parent;let s=i.reverse(),a=s.length-1,l=s.findIndex(e=>!!n.selectedIDs.includes(e.id)),h=x.allowLevel+(s.length-l);return r||-1===l?a:h},D.zIndexStringify=e=>void 0===e?"auto":e.toString();let N=(e,n)=>{let r=(0,D.nodeStackingLevel)(e,n);return(0,D.stackingIndex)("node",r)},O=e=>e.getData(p.Lz).node;(a||(a={})).compute=(e,n)=>{let r=I(e,n),i=e.node;i.style.position="absolute",i.style.zIndex=s.zIndexStringify(r)};let M=(e,n)=>{if(e.isDrawing||n.hoveredEntityID===e.id||n.selectedIDs.includes(e.id))return x.maxLevel+1;let r=s.nodeStackingLevel(e.from,n,!0);return e.to?Math.min(r,s.nodeStackingLevel(e.to,n,!0)):r},I=(e,n)=>{let r=M(e,n);return s.stackingIndex("line",r)};var T=e=>{let{nodes:n,lines:r,context:i}=e;n.forEach(e=>{s.compute(e,i)}),r.forEach(e=>{a.compute(e,i)})}},533:function(e,n,r){"use strict";r.d(n,{FU:()=>d,Xn:()=>x,qp:()=>w});var i=r(4210),o=r(8336),s=r(6261),a=r(9378),l=r(8319),h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?c(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&h(n,r,s),s},d=Symbol("OperationContribution"),p=class{constructor(){this._operationMetas=new Map,this.contributions=[]}init(){for(let e of this.contributions)e.registerOperationMeta?.(this)}registerOperationMeta(e){return this._operationMetas.has(e.type)?(console.warn(`A operation meta ${e.type} is already registered.`),o.JT.NULL):new o.K4(this._doRegisterOperationMetaMeta(e))}getOperationMeta(e){return this._operationMetas.get(e)}_doRegisterOperationMetaMeta(e){return this._operationMetas.set(e.type,e),{dispose:()=>{this._operationMetas.delete(e.type)}}}};u([(0,i.nx)(d),(0,i.jt)()],p.prototype,"contributions",2),u([(0,i.zY)()],p.prototype,"init",1),p=u([(0,i.b2)()],p);var f=class{};f=u([(0,i.b2)()],f);var g=class{constructor(){this.generateId=()=>(0,s.x0)(),this.getSnapshot=()=>""}};g=u([(0,i.b2)()],g);var y=class{constructor(){this.applyEmitter=new o.Q5,this.onApply=this.applyEmitter.event,this._toDispose=new o.K4}init(){this._toDispose.push(this.applyEmitter)}applyOperation(e,n){let r,i=this.operationRegistry.getOperationMeta(e.type);if(!i)throw Error(`Operation meta ${e.type} has not registered.`);return n?.noApply||(r=i.apply(e,this.context.source)),this.applyEmitter.fire(e),r}getOperationLabel(e){let n=this.operationRegistry.getOperationMeta(e.type);if(n&&n.getLabel)return n.getLabel(e,this.context.source)}getOperationDescription(e){let n=this.operationRegistry.getOperationMeta(e.type);if(n&&n.getDescription)return n.getDescription(e,this.context.source)}inverseOperations(e){return e.map(e=>this.inverseOperation(e)).reverse()}inverseOperation(e){let n=this.operationRegistry.getOperationMeta(e.type);if(!n)throw Error(`Operation meta ${e.type} has not registered.`);return n.inverse(e)}dispose(){this._toDispose.dispose()}};u([(0,i.f3)(p)],y.prototype,"operationRegistry",2),u([(0,i.f3)(f)],y.prototype,"context",2),u([(0,i.f3)(g)],y.prototype,"config",2),u([(0,i.zY)()],y.prototype,"init",1),y=u([(0,i.b2)()],y);var m=class{constructor(){this._undoing=!1,this._redoing=!1,this._limit=100,this.onChangeEmitter=new o.Q5,this.onChange=this.onChangeEmitter.event,this._toDispose=new o.K4,this._undoStack=[],this._redoStack=[],this._toDispose.push(this.onChangeEmitter)}setLimit(e){this._limit=e}pushElement(e){this._redoStack=[],this._stackPush(this._undoStack,e),this._toDispose.push(e),this._emitChange("push",e)}getUndoStack(){return this._undoStack}getRedoStack(){return this._redoStack}getLastElement(){return this._undoStack[this._undoStack.length-1]}async undo(){if(!this.canUndo()||this._undoing)return;this._undoing=!0;let e=this._undoStack.pop();try{await e.undo()}finally{this._stackPush(this._redoStack,e),this._emitChange("undo",e),this._undoing=!1}}async redo(){if(!this.canRedo()||this._redoing)return;this._redoing=!0;let e=this._redoStack.pop();try{await e.redo()}finally{this._stackPush(this._undoStack,e),this._emitChange("redo",e),this._redoing=!1}}canUndo(){return this._undoStack.length>0}canRedo(){return this._redoStack.length>0}canPush(){return!this._redoing&&!this._undoing}clear(){this.clearRedoStack(),this.clearUndoStack(),this._emitChange("clear")}clearRedoStack(){this._redoStack.forEach(e=>{e.dispose()}),this._redoStack=[]}clearUndoStack(){this._undoStack.forEach(e=>{e.dispose()}),this._undoStack=[]}dispose(){this.clear(),this._toDispose.dispose()}_stackPush(e,n){e.push(n),e.length>this._limit&&e.shift()}_emitChange(e,n){n?this.onChangeEmitter.fire({type:e,element:n}):this.onChangeEmitter.fire({type:e})}};m=u([(0,i.b2)()],m);var b=class{constructor(e,n=[]){this._toDispose=new o.K4,this._timestamp=Date.now(),this._operationService=e,this._operations=n.map(e=>this._operation(e)),this._id=e.config.generateId()}get id(){return this._id}getTimestamp(){return this._timestamp}pushOperation(e){let n=this._operation(e);return this._operations.push(n),n}getOperations(){return this._operations}getChangeOperations(e){return"undo"===e?this._operationService.inverseOperations(this._operations):this._operations}getFirstOperation(){return this._operations[0]}getLastOperation(){return this._operations[this._operations.length-1]}async undo(){for(let e of this._operationService.inverseOperations(this._operations))await this._apply(e)}async redo(){for(let e of this._operations)await this._apply(e)}revert(e){let n=this._operations;for(let r of("undo"!==e&&(n=this._operations.map(e=>this._inverse(e)).reverse()),n))this._apply(r)}_inverse(e){return this._operationService.inverseOperation(e)}async _apply(e){await this._operationService.applyOperation(e)}_operation(e){return{...e,value:(0,a.cloneDeep)(e.value),id:this._operationService.config.generateId()}}dispose(){this._toDispose.dispose()}},_=class{constructor(){this._items=[],this.onChangeEmitter=new o.Q5,this.onChange=this.onChangeEmitter.event,this._toDispose=new o.K4,this.limit=100,this._toDispose.push(this.onChangeEmitter)}get items(){return this._items}add(e,n){let r=this._getHistoryItem(e,n);return this._items.unshift(r),this._items.length>this.limit&&this._items.pop(),this.onChangeEmitter.fire({type:"add",value:r,service:e}),r}findById(e){return this._items.find(n=>n.id===e)}changeByIndex(e,n,r){let i=this._getHistoryItem(n,r);this._items[e]=i,this.onChangeEmitter.fire({type:"update",value:i,service:n})}addOperation(e,n,r){let i=this._items.find(e=>e.id===n);if(!i)return void console.warn("no history item found");let o=this._getHistoryOperation(e,r);i.operations.push(o),this.onChangeEmitter.fire({type:"add_operation",value:{historyItem:i,operation:o},service:e})}updateOperation(e,n,r){let i=this._items.find(e=>e.id===n);if(!i)return void console.warn("no history item found");let o=i.operations.findIndex(e=>e.id==e.id);if(o<0)return void console.warn("no operation found");let s=this._getHistoryOperation(e,r);i.operations.splice(o,1,s),this.onChangeEmitter.fire({type:"update_operation",value:{historyItem:i,operation:s},service:e})}clear(){this._items=[]}dispose(){this._items=[],this._toDispose.dispose()}_getHistoryItem(e,n){return{...n,uri:e.context.uri,time:_.dateFormat(n.timestamp),operations:n.operations.map(r=>this._getHistoryOperation(e,r,"push"!==n.type))}}_getHistoryOperation(e,n,r=!1){let i;if(r)i=this.historyConfig.generateId();else{let e=n.id;if(!e)throw Error("no operation id found");i=e}return{...(0,a.cloneDeep)(n),id:i,label:e.operationService.getOperationLabel(n),description:e.operationService.getOperationDescription(n),timestamp:Date.now()}}static dateFormat(e){return new Date(e).toLocaleString()}};u([(0,i.f3)(g)],_.prototype,"historyConfig",2),_=u([(0,i.b2)()],_);var E=class{constructor(){this._historyServices=new Map,this._toDispose=new o.K4}registerHistoryService(e){let n=new o.K4;n.pushAll([e.undoRedoService.onChange(n=>{if("clear"===n.type)return;let{type:r,element:i}=n,o=i.getChangeOperations(r),s={id:"push"===r?i.id:this.historyConfig.generateId(),type:r,uri:e.context.uri,operations:o,timestamp:Date.now()};this.historyStack.add(e,s)}),e.onMerge(n=>{this._handleMerge(e,n)})]),this._historyServices.set(e,n),this._toDispose.push(e.onWillDispose(()=>{this.unregisterHistoryService(e)}))}unregisterHistoryService(e){let n=this._historyServices.get(e);n&&(n.dispose(),this._historyServices.delete(e))}getHistoryServiceByURI(e){for(let n of this._historyServices.keys())if(n.context.uri===e)return n}getFirstHistoryService(){for(let e of this._historyServices.keys())return e}dispose(){this._toDispose.dispose(),this.historyStack.dispose(),this._historyServices.forEach(e=>e.dispose()),this._historyServices.clear()}_handleMerge(e,n){let{element:r,operation:i}=n.value;if(this.historyStack.findById(r.id)){if(!i.id)return void console.warn("no operation id found");"UPDATE"===n.type&&this.historyStack.updateOperation(e,r.id,i),"ADD"===n.type&&this.historyStack.addOperation(e,r.id,i)}}};u([(0,i.f3)(_)],E.prototype,"historyStack",2),u([(0,i.f3)(g)],E.prototype,"historyConfig",2),E=u([(0,i.b2)()],E);var w=class{constructor(){this._toDispose=new o.K4,this._transacting=!1,this._transactOperation=null,this._locked=!1,this._willDisposeEmitter=new o.Q5,this._mergeEmitter=new o.Q5,this.onWillDispose=this._willDisposeEmitter.event,this.onMerge=this._mergeEmitter.event}get onApply(){return this.operationService.onApply}init(){this._toDispose.push(this._willDisposeEmitter),this._toDispose.push(this._mergeEmitter)}start(){this._locked=!1}stop(){this._locked=!0}limit(e){this.undoRedoService.setLimit(e)}startTransaction(){if(this._transacting)return;this._transacting=!0;let e=new b(this.operationService,[]);this._transactOperation=e}endTransaction(){let e=this._transactOperation;e&&(0!==e.getOperations().length&&this._pushStackOperation(e),this._transactOperation=null,this._transacting=!1)}transact(e){this._transacting||(this.startTransaction(),e(),this.endTransaction())}pushOperation(e,n){if(!this._canPush())return;let r=this._transactOperation||this.undoRedoService.getLastElement(),i=this.operationRegistry.getOperationMeta(e.type);if(!i)throw Error(`Operation meta ${e.type} has not registered.`);if(i.shouldSave&&!i.shouldSave(e))return i.apply(e,this.context.source);let o=this.operationService.applyOperation(e,{noApply:n?.noApply});i.getURI&&!e.uri&&(e.uri=i.getURI(e,this.context.source));let s=this._shouldMerge(e,r,i);if(s)if("object"==typeof s){let e=r.getLastOperation();e.value=s.value,this._mergeEmitter.fire({type:"UPDATE",value:{element:r,operation:e,value:s.value}})}else{let n=r.pushOperation(e);this._mergeEmitter.fire({type:"ADD",value:{element:r,operation:n}})}else{let n=new b(this.operationService,[e]);this._pushStackOperation(n)}return o}getHistoryOperations(){return this.historyManager.historyStack.items.reverse().map(e=>e.operations.map(e=>({...(0,a.pick)(e,["type","value"]),label:e.label||e.type}))).flat()}async undo(){await this.undoRedoService.undo()}async redo(){await this.undoRedoService.redo()}canUndo(){return this.undoRedoService.canUndo()}canRedo(){return this.undoRedoService.canRedo()}getSnapshot(){return this.config.getSnapshot()}getRecords(){throw Error("Method not implemented.")}restore(e){throw Error("Method not implemented.")}clear(){this.undoRedoService.clear()}dispose(){this._willDisposeEmitter.fire(this),this._toDispose.dispose()}_canPush(){return!this._locked&&this.undoRedoService.canPush()}_pushStackOperation(e){this.undoRedoService.pushElement(e),this.undoRedoService.clearRedoStack()}_shouldMerge(e,n,r){return!!n&&(!!this._transacting||r.shouldMerge&&r.shouldMerge(e,n.getLastOperation(),n))}};u([(0,i.f3)(m)],w.prototype,"undoRedoService",2),u([(0,i.f3)(p)],w.prototype,"operationRegistry",2),u([(0,i.f3)(y)],w.prototype,"operationService",2),u([(0,i.f3)(f)],w.prototype,"context",2),u([(0,i.f3)(g)],w.prototype,"config",2),u([(0,i.f3)(E)],w.prototype,"historyManager",2),u([(0,i.zY)()],w.prototype,"init",1),w=u([(0,i.b2)()],w);var x=new i.nZ((e,n,r,i,o,s,a)=>{e(p).toSelf().inSingletonScope(),e(y).toSelf().inSingletonScope(),e(m).toSelf().inSingletonScope(),e(w).toSelf().inSingletonScope(),e(f).toSelf().inSingletonScope(),e(E).toSelf().inSingletonScope(),e(_).toSelf().inSingletonScope(),e(g).toSelf().inSingletonScope(),s(w,(e,n)=>{let r;return(r=e.container?.parent?.isBound(E)?e.container?.parent?.get(E):e.container.get(E))&&(n.historyManager=r,r.registerHistoryService(n)),n})});(0,l.M1)({onInit:(e,n)=>{n.onApply&&e.get(y).onApply(n.onApply.bind(null,e))},containerModules:[x]})},4218:function(e,n,r){"use strict";r.d(n,{o:()=>o});var i=r(8336),o=new class{constructor(e){this._languages=new Map,this._localLanguage="en-US",this._onLanguageChangeEmitter=new i.Q5,this.onLanguageChange=this._onLanguageChangeEmitter.event,e.forEach(e=>this.addLanguage(e))}t(e,n){let r=this._languages.get(this._localLanguage)?.contents||{};return r[e]?r[e]:n?.disableReturnKey?"":e}getLocalLanguage(){return this._localLanguage}setLocalLanguage(e){e!==this._localLanguage&&(this._localLanguage=e,this._onLanguageChangeEmitter.fire(e))}getLangauges(){return this._languages}addLanguage(e){let n=this._languages.get(e.languageId);n?this._languages.set(e.languageId,{...n,...e,contents:{...n.contents,...e.contents}}):this._languages.set(e.languageId,e)}}([{languageId:"en-US",languageName:"English",localizedLanguageName:"English",contents:{Yes:"Yes",No:"No"}},{languageId:"zh-CN",languageName:"Chinese",localizedLanguageName:"中文(中国)",contents:{Yes:"是",No:"否"}}])},6865:function(e,n,r){"use strict";r.d(n,{I5:()=>E,Zd:()=>m,qP:()=>x});var i,o=r(4194),s=r(8319),a=r(9378),l=r(4210),h=r(8336),c=r(2100),u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?d(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&u(n,r,s),s},f={canvasWidth:250,canvasHeight:250,canvasPadding:50,canvasBackground:"rgba(242, 243, 245, 1)",canvasBorderRadius:10,viewportBackground:"rgba(255, 255, 255, 1)",viewportBorderRadius:4,viewportBorderColor:"rgba(6, 7, 9, 0.10)",viewportBorderWidth:1,viewportBorderDashLength:void 0,nodeColor:"rgba(0, 0, 0, 0.10)",nodeBorderRadius:2,nodeBorderWidth:.145,nodeBorderColor:"rgba(6, 7, 9, 0.10)",overlayColor:"rgba(255, 255, 255, 0.55)"},g={scale:.7,opacity:1,translateX:15,translateY:15},y={canvasStyle:f,canvasClassName:"gedit-minimap-canvas",enableActiveDebounce:!1,enableInactiveDebounce:!0,enableDisplayAllNodes:!1,activeDebounceTime:0,inactiveDebounceTime:5},m=e=>{let{service:n,panelStyles:r={},containerStyles:i={},inactiveStyle:s={}}=e,a={...g,...s},l=(0,o.useRef)(null),[h,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=l.current;e&&n.canvas&&e.appendChild(n.canvas);let r=n.onActive(e=>{c(e)});return()=>{r.dispose()}},[]);let u=h?1:a.scale,d=h?1:a.opacity,p=h?0:a.translateX,f=h?0:a.translateY;return o.createElement("div",{className:"minimap-container",style:{position:"fixed",right:30,bottom:70,transition:"all 0.3s ease",transform:`scale(${u}) translate(${p}px, ${f}px)`,opacity:d,transformOrigin:"bottom right",...i}},o.createElement("div",{className:"minimap-panel",style:{display:"flex",width:"100%",height:"100%",borderRadius:"10px",backgroundColor:"rgba(255, 255, 255, 1)",border:"0.572px solid rgba(6, 7, 9, 0.10)",overflow:"hidden",boxShadow:"0px 2.289px 6.867px 0px rgba(0, 0, 0, 0.08), 0px 4.578px 13.733px 0px rgba(0, 0, 0, 0.04)",boxSizing:"border-box",padding:8,...r},"data-flow-editor-selectable":"false",ref:l,onMouseEnter:()=>{n.setActivate(!0)},onMouseLeave:()=>{n.setActivate(!1)}}))},b=i||(i={});let _=e=>e.width>0&&e.height>0;b.clear=e=>{let{canvas:n,context:r}=e;r.clearRect(0,0,n.width,n.height)},b.backgroundColor=e=>{let{canvas:n,context:r,color:i}=e;r.fillStyle=i,r.fillRect(0,0,n.width,n.height)},b.rectangle=e=>{let{context:n,rect:r,color:i}=e;_(r)&&(n.fillStyle=i,n.fillRect(r.x,r.y,r.width,r.height))},b.roundRectangle=e=>{let{context:n,rect:r,color:i,radius:o,borderColor:s,borderDashLength:a,borderWidth:l=0}=e,{x:h,y:c,width:u,height:d}=r;_(r)&&(n.beginPath(),n.moveTo(h+o,c),n.lineTo(h+u-o,c),n.quadraticCurveTo(h+u,c,h+u,c+o),n.lineTo(h+u,c+d-o),n.quadraticCurveTo(h+u,c+d,h+u-o,c+d),n.lineTo(h+o,c+d),n.quadraticCurveTo(h,c+d,h,c+d-o),n.lineTo(h,c+o),n.quadraticCurveTo(h,c,h+o,c),n.closePath(),n.fillStyle=i,n.fill(),s&&l>0&&(n.strokeStyle=s,n.lineWidth=l,a?n.setLineDash([a,a]):n.setLineDash([]),n.stroke(),n.setLineDash([])))},b.overlay=e=>{let{canvas:n,context:r,offset:i,scale:o,rect:s,color:a}=e;_(s)&&(r.fillStyle=a,r.fillRect(0,0,n.width,(s.y+i.y)*o),r.fillRect(0,(s.y+s.height+i.y)*o,n.width,n.height-(s.y+s.height+i.y)*o),r.fillRect(0,(s.y+i.y)*o,(s.x+i.x)*o,s.height*o),r.fillRect((s.x+s.width+i.x)*o,(s.y+i.y)*o,n.width-(s.x+s.width+i.x)*o,s.height*o))};var E=class{constructor(){this.onActive=e=>(this.onActiveCallbacks.add(e),{dispose:()=>{this.onActiveCallbacks.delete(e)}}),this.render=this._render,this.handleWheel=e=>{},this.handleStartDrag=e=>{e.preventDefault(),e.stopPropagation();let{viewRect:n,scale:r,offset:i}=this.createRenderContext(),o=this.canvas.getBoundingClientRect(),s={x:e.clientX-o.left,y:e.clientY-o.top},a=this.rectOnCanvas({rect:n,scale:r,offset:i});this.isPointInRect({point:s,rect:a})&&(this.isDragging=!0,this.dragStart=s,document.addEventListener("mousemove",this.handleDragging),document.addEventListener("mouseup",this.handleEndDrag))},this.handleDragging=e=>{if(!this.isDragging||!this.dragStart)return;e.preventDefault(),e.stopPropagation();let{scale:n}=this.createRenderContext(),r=this.canvas.getBoundingClientRect(),i=e.clientX-r.left,o=e.clientY-r.top,s=(i-this.dragStart.x)/n,a=(o-this.dragStart.y)/n;this.updateScrollPosition(s,a),this.dragStart={x:i,y:o},this.render()},this.handleEndDrag=e=>{e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",this.handleDragging),document.removeEventListener("mouseup",this.handleEndDrag),this.isDragging=!1,this.dragStart=void 0,this.setActivate(this.isMouseInCanvas(e))},this.handleCursor=e=>{if(!this.activated)return;let{viewRect:n,scale:r,offset:i}=this.createRenderContext(),o=this.canvas.getBoundingClientRect(),s={x:e.clientX-o.left,y:e.clientY-o.top},a=this.rectOnCanvas({rect:n,scale:r,offset:i});this.isPointInRect({point:s,rect:a})?this.canvas.style.cursor="grab":this.canvas.style.cursor="default"},this.canvas=document.createElement("canvas"),this.context2D=this.canvas.getContext("2d"),this.initialized=!!this.context2D,this.onActiveCallbacks=new Set,this.toDispose=new h.K4,this.render=this._render,this.activated=!1,this.isDragging=!1}init(e){this.options=y,Object.assign(this.options,e),this.setDebounce({enableDebounce:this.options.enableInactiveDebounce,debounceTime:this.options.inactiveDebounceTime}),this.initStyle(),this.mountListener()}dispose(){this.toDispose.dispose(),this.initialized=!1,this.activated=!1,this.removeEventListeners()}setActivate(e){e!==this.activated&&(e||!this.isDragging)&&(this.activated=e,e?(this.setDebounce({enableDebounce:this.options.enableActiveDebounce,debounceTime:this.options.activeDebounceTime}),this.addEventListeners()):(this.setDebounce({enableDebounce:this.options.enableInactiveDebounce,debounceTime:this.options.inactiveDebounceTime}),this.removeEventListeners()),this.render(),this.onActiveCallbacks.forEach(n=>n(e)))}initStyle(){if(!this.initialized)return;let{canvasClassName:e,canvasStyle:n}=this.options;this.canvas.className=e,this.style={...f,...n},this.canvas.width=this.style.canvasWidth,this.canvas.height=this.style.canvasHeight,this.canvas.style.borderRadius=this.style.canvasBorderRadius?`${this.style.canvasBorderRadius}px`:"unset"}setDebounce(e){let{enableDebounce:n,debounceTime:r}=e;n?this.render=(0,a.debounce)(this._render,r):this.render=this._render}_render(){if(!this.initialized)return;let e=this.createRenderContext();this.renderCanvas(e)}createRenderContext(){let{canvas:e,context2D:n,nodes:r}=this,i=this.nodeTransforms(r).map(e=>e.bounds),o=this.viewRect(),s=this.renderRect(i).withPadding({top:this.style.canvasPadding,bottom:this.style.canvasPadding,left:this.style.canvasPadding,right:this.style.canvasPadding}),a=h.Ae.enlarge([o,s]),{scale:l,offset:c}=this.calculateScaleAndOffset({canvasRect:a});return{canvas:e,context2D:n,nodeRects:i,canvasRect:a,viewRect:o,renderRect:s,scale:l,offset:c}}renderCanvas(e){let{canvas:n,context2D:r,nodeRects:o,viewRect:s,scale:a,offset:l}=e;i.clear({canvas:n,context:r}),i.backgroundColor({canvas:n,context:r,color:this.style.canvasBackground}),i.roundRectangle({context:r,rect:this.rectOnCanvas({rect:s,scale:a,offset:l}),color:this.style.viewportBackground,radius:this.style.viewportBorderRadius}),o.forEach(e=>{i.roundRectangle({context:r,rect:this.rectOnCanvas({rect:e,scale:a,offset:l}),color:this.style.nodeColor,radius:this.style.nodeBorderRadius,borderWidth:this.style.nodeBorderWidth,borderColor:this.style.nodeBorderColor})}),i.roundRectangle({context:r,rect:this.rectOnCanvas({rect:s,scale:a,offset:l}),color:"rgba(255, 255, 255, 0)",radius:this.style.viewportBorderRadius,borderColor:this.style.viewportBorderColor,borderWidth:this.style.viewportBorderWidth,borderDashLength:this.style.viewportBorderDashLength}),i.overlay({canvas:n,context:r,offset:l,scale:a,rect:s,color:this.style.overlayColor})}calculateScaleAndOffset(e){let{canvasRect:n}=e,{width:r,height:i}=this.canvas,o=Math.min(r/n.width,i/n.height),s=n.width*o,a=n.height*o,l={x:(r-s)/2/o-n.x,y:(i-a)/2/o-n.y};return{scale:o,offset:l}}get nodes(){return this.document.getAllNodes().filter(e=>!e.hidden&&(e.flowNodeType===c.Sy.ROOT?void 0:!!this.options.enableDisplayAllNodes||!e.parent||e.parent.flowNodeType===c.Sy.ROOT||void 0))}nodeTransforms(e){return e.map(e=>e.getData(c.eG)).filter(Boolean)}renderRect(e){return h.Ae.enlarge(e)}viewRect(){let{width:e,height:n,scrollX:r,scrollY:i,zoom:o}=this.playgroundConfig.config;return new h.Ae(r/o,i/o,e/o,n/o)}mountListener(){let e=this.entityManager.onEntityChange(()=>this.render());this.toDispose.push(e)}rectOnCanvas(e){let{rect:n,scale:r,offset:i}=e;return new h.Ae((n.x+i.x)*r,(n.y+i.y)*r,n.width*r,n.height*r)}isPointInRect(e){let{point:n,rect:r}=e;return n.x>=r.x&&n.x<=r.x+r.width&&n.y>=r.y&&n.y<=r.y+r.height}addEventListeners(){this.canvas.addEventListener("wheel",this.handleWheel),this.canvas.addEventListener("mousedown",this.handleStartDrag),this.canvas.addEventListener("mousemove",this.handleCursor)}removeEventListeners(){this.canvas.removeEventListener("wheel",this.handleWheel),this.canvas.removeEventListener("mousedown",this.handleStartDrag),this.canvas.removeEventListener("mousemove",this.handleCursor)}isMouseInCanvas(e){let n=this.canvas.getBoundingClientRect();return e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom}updateScrollPosition(e,n){let{scrollX:r,scrollY:i,zoom:o}=this.playgroundConfig.config;this.playgroundConfig.updateConfig({scrollX:r+e*o,scrollY:i+n*o})}};p([(0,l.f3)(c.pQ)],E.prototype,"document",2),p([(0,l.f3)(s.v2)],E.prototype,"entityManager",2),p([(0,l.f3)(s.ER)],E.prototype,"playgroundConfig",2),E=p([(0,l.b2)()],E);var w=class extends s.mh{constructor(){super(),this.className="gedit-minimap-layer gedit-playground-layer",this.node=h.xF.createDivWithClass(this.className),this.node.style.zIndex="9999"}render(){return this.options.disableLayer?o.createElement(o.Fragment,null):o.createElement(m,{service:this.service,panelStyles:this.options.panelStyles,containerStyles:this.options.containerStyles,inactiveStyle:this.options.inactiveStyle})}};w.type="FlowMinimapLayer",p([(0,l.f3)(E)],w.prototype,"service",2),w=p([(0,l.b2)()],w);var x=(0,s.M1)({onBind:({bind:e})=>{e(E).toSelf().inSingletonScope()},onInit:(e,n)=>{e.playground.registerLayer(w,n),e.get(E).init(n)},onDispose:e=>{e.get(E).dispose()}})},3569:function(e,n,r){"use strict";r.d(n,{CM:()=>E,CR:()=>_,TH:()=>p,wL:()=>m,zE:()=>d});var i,o=r(9378),s=r(8336),a=r(431),l=r(5624),h=r(8319),c=r(4194),u=r(6261),d=((i=d||{}).onValueChange="onValueChange",i.onValueInit="onValueInit",i.onValueInitOrChange="onValueInitOrChange",i.onArrayAppend="onArrayAppend",i.onArrayDelete="onArrayDelete",i);function p(e){return"onFormValuesChange"in e}function f(e){return e.startsWith("/")?a.b5.normalize(e).slice(1).split("/").join("."):e}var g=({formModel:e})=>e?.formControl?c.createElement(c.Fragment,null,c.createElement(l.l0,{control:e?.formControl,keepModelOnUnMount:!0},e.formMeta.render)):null,y={EFFECT_MAP:{},EFFECT_RETURN_MAP:new Map([["onValueInitOrChange",{}],["onValueChange",{}],["onValueInit",{}],["onArrayAppend",{}],["onArrayDelete",{}]]),FORM_FEEDBACKS:[],VALID:null},m=class extends a.au{constructor(e){super(),this.effectMap=y.EFFECT_MAP,this.effectReturnMap=y.EFFECT_RETURN_MAP,this.plugins=[],this.formFeedbacks=y.FORM_FEEDBACKS,this.onInitializedEmitter=new s.Q5,this.onValidateEmitter=new s.Q5,this.onValidate=this.onValidateEmitter.event,this.onInitialized=this.onInitializedEmitter.event,this.onDisposeEmitter=new s.Q5,this.onDispose=this.onDisposeEmitter.event,this.toDispose=new s.K4,this.onFormValuesChangeEmitter=new s.Q5,this.onFormValuesChange=this.onFormValuesChangeEmitter.event,this.onValidChangeEmitter=new s.Q5,this.onValidChange=this.onValidChangeEmitter.event,this.onFeedbacksChangeEmitter=new s.Q5,this.onFeedbacksChange=this.onFeedbacksChangeEmitter.event,this._valid=y.VALID,this._feedbacks=[],this._initialized=!1,this.node=e,this.toDispose.pushAll([this.onInitializedEmitter,this.onValidateEmitter,this.onValidChangeEmitter,this.onFeedbacksChangeEmitter,this.onFormValuesChangeEmitter])}get valid(){return this._valid}set valid(e){this._valid=e,this.onValidChangeEmitter.fire(e)}get flowNodeEntity(){return this.node}get formManager(){return this.node.getService(a.yf)}get formControl(){return this._formControl}get formMeta(){return this.node.getNodeRegistry().formMeta}get values(){return this.nativeFormModel?.values}get feedbacks(){return this._feedbacks}set feedbacks(e){this._feedbacks=e,this.onFeedbacksChangeEmitter.fire(e)}get formItemPathMap(){return new Map}get initialized(){return this._initialized}get nodeContext(){return{node:this.node,playgroundContext:this.node.getService(h.xm)}}get nativeFormModel(){return this._formControl?._formModel}render(){return c.createElement(g,{formModel:this})}initPlugins(e){e.length&&(this.plugins=e,e.forEach(e=>{var n,r;e.init(this),e.config?.effect&&(n=this.effectMap,r=e.config.effect,(0,o.mergeWith)(n,r,function(e,n){return(e||[]).concat(n)}))}))}init(e,n){let r=this.node.getData(a.Ps);this.onFormValuesChange(()=>{this._valid=null,r.fireChange()});let{validateTrigger:i,validate:s,effect:h}=e;h&&(this.effectMap=h);let c="function"==typeof e.defaultValues?e.defaultValues(this.nodeContext):e.defaultValues,u=e.formatOnInit?e.formatOnInit(n,this.nodeContext):n,{control:d}=(0,l.Np)({initialValues:u||c,validateTrigger:i,context:this.nodeContext,validate:s,disableAutoInit:!0});this._formControl=d;let p=d._formModel;this.toDispose.push(p),p.onFormValuesChange(e=>{this.onFormValuesChangeEmitter.fire(e)}),e.plugins&&this.initPlugins(e.plugins),p.onFormValuesChange(({values:e,prevValues:n,name:r})=>{Object.keys(this.effectMap).filter(e=>l.rR.isMatchOrParent(e,r)).forEach(i=>{this.effectMap[i].forEach(({effect:s,event:a})=>{if("onValueChange"===a||"onValueInitOrChange"===a){let h=l.rR.getParentPathByPattern(i,r),c=this.effectReturnMap.get(a)?.[h];c&&c();let u=s({name:h,value:(0,o.get)(e,h),prevValue:(0,o.get)(n,h),formValues:e,form:(0,l.eP)(this.nativeFormModel),context:this.nodeContext});u&&"function"==typeof u&&this.effectReturnMap.has(a)&&(this.effectReturnMap.get(a)[h]=u)}})})}),p.onFormValuesInit(({values:e,name:n,prevValues:r})=>{Object.keys(this.effectMap).forEach(i=>{let s=l.rR.findMatchPaths(e,i);this.effectMap[i].forEach(({event:i,effect:a})=>{("onValueInit"===i||"onValueInitOrChange"===i)&&s.forEach(s=>{if(l.rR.isMatchOrParent(n,s)||n===s){let n=this.effectReturnMap.get(i)?.[s];n&&n();let h=a({name:s,value:(0,o.get)(e,s),formValues:e,prevValue:(0,o.get)(r,s),form:(0,l.eP)(this.nativeFormModel),context:this.nodeContext});h&&"function"==typeof h&&this.effectReturnMap.has(i)&&(this.effectReturnMap.get(i)[s]=h)}})})})}),p.onFieldModelCreate(e=>{let n=function(e,n){if(!n)return;if(n[e.name])return n[e.name];let r=(0,o.find)(Object.keys(n),n=>!!n.startsWith("regex:")&&RegExp(n.split(":")[1]).test(e.name));if(r)return n[r]}(e,this.effectMap);if(n?.length){let r=(0,o.groupBy)(n,"event");(0,o.mapKeys)(r,(n,r)=>{let i=e=>{n.forEach(({effect:n})=>n({...e,formValues:p.values,form:(0,l.eP)(this.nativeFormModel),context:this.nodeContext}))};switch(r){case"onArrayAppend":e instanceof l.lE&&e.onAppend(i);break;case"onArrayDelete":e instanceof l.lE&&e.onDelete(i)}})}}),this._formControl.init(),this._initialized=!0,this.onInitializedEmitter.fire(this),this.onDispose(()=>{this._initialized=!1,this.effectMap={},p.dispose()})}toJSON(){return this.formMeta.formatOnSubmit?this.formMeta.formatOnSubmit(this.nativeFormModel?.values,this.nodeContext):this.nativeFormModel?.values}clearValid(){null!==this.valid&&(this.valid=null)}async validate(){return this.formFeedbacks=await this.nativeFormModel?.validate(),this.valid=(0,o.isEmpty)(this.formFeedbacks?.filter(e=>"error"===e.level)),this.onValidateEmitter.fire(this),this.valid}getValues(){return this._formControl?._formModel.values}getField(e){let n=e.includes("/")?f(e):e;return this.formControl?.getField(n)}getValueIn(e){let n=e.includes("/")?f(e):e;return this.nativeFormModel?.getValueIn(n)}setValueIn(e,n){let r=e.includes("/")?f(e):e;this.nativeFormModel?.setValueIn(r,n)}onFormValueChangeIn(e,n){if(!this._initialized)throw Error("[NodeEngine] FormModel Error: onFormValueChangeIn can not be called before initialized");return this.formControl._formModel.onFormValuesChange(({name:r,values:i,prevValues:s})=>{r===e&&n({value:(0,o.get)(i,e),prevValue:(0,o.get)(s,e),formValues:i,prevFormValues:s})})}getFormItemValueByPath(e){if(!e)return;if("/"===e)return this._formControl?._formModel.values;let n=f(e);return this.getValueIn(n)}async validateWithFeedbacks(){return await this.validate(),this.formFeedbacks.map(e=>({feedbackStatus:e.level,feedbackText:e.message,path:e.name}))}getFormItemByPath(e){if(!this.nativeFormModel)return;let n=this;if("/"===e)return{get value(){return n.nativeFormModel.values},set value(v){n.nativeFormModel.values=v}};let r=f(e),i=n.getValueIn(r);return{get value(){return i},set value(v){n.setValueIn(r,v)}}}dispose(){this.onDisposeEmitter.fire(),this.effectReturnMap.forEach(e=>{Object.values(e).forEach(e=>{e()})}),this.effectMap=y.EFFECT_MAP,this.effectReturnMap=y.EFFECT_RETURN_MAP,this.plugins.forEach(e=>{e.dispose()}),this.plugins=[],this.formFeedbacks=y.FORM_FEEDBACKS,this._valid=y.VALID,this._formControl=void 0,this._initialized=!1,this.toDispose.dispose()}},b=class{constructor(e,n,r){this.name=e,this.pluginId=`${e}__${(0,u.x0)()}`,this.config=n,this.opts=r}get formModel(){return this._formModel}get ctx(){return{formModel:this.formModel,node:this.formModel.nodeContext.node,playgroundContext:this.formModel.nodeContext.playgroundContext}}init(e){this._formModel=e,this.config?.onInit?.(this.ctx,this.opts)}dispose(){this.config?.onDispose&&this.config?.onDispose(this.ctx,this.opts)}};function _(e,n){return function(r){return new b(e,n,r)}}function E(e){let n=e.getData(a.Ps)?.getFormModel(),r=n?.nativeFormModel;if(!n||!r)return;let i={initialValues:r.initialValues,get values(){return r.values},state:r.state,getValueIn:e=>r.getValueIn(e),setValueIn:(e,n)=>r.setValueIn(e,n),render:()=>c.createElement(a.o,{node:e}),onFormValuesChange:n.onFormValuesChange.bind(n),onFormValueChangeIn:n.onFormValueChangeIn.bind(n),onValidate:n.nativeFormModel.onValidate,validate:n.validate.bind(n)};return Object.defineProperty(i,"_formModel",{enumerable:!1,get:()=>n}),i}},2082:function(e,n,r){"use strict";r.d(n,{BP:()=>c,Re:()=>u,nt:()=>d});var i,o=r(4194),s=r(8336);(e=>{let n,r=[],i=[],o=!1,s=!1,a=!1,l=!1;function h(e,n){if(l)throw n;console.error(`[Tracker error] ${e}`,n)}function c(e){if(s)throw Error("Can't call Tracker.flush while flushing");if(a)throw Error("Can't flush inside Tracker.autorun");s=!0,o=!0,l=!!(e=e||{}).throwFirstError;var n=0,d=!1;try{for(;r.length||i.length;){for(;r.length;){var p=r.shift();if(p._recompute(),p._needsRecompute()&&r.unshift(p),!e.finishSynchronously&&++n>100){d=!0;return}}if(i.length){var f=i.shift();try{f()}catch(e){h("afterFlush",e)}}}d=!0}finally{if(d||(s=!1,c({finishSynchronously:e.finishSynchronously,throwFirstError:!1})),o=!1,s=!1,r.length||i.length){if(e.finishSynchronously)throw Error("still have more to do?");setTimeout(u,10)}}}function u(){o||(setTimeout(c,0),o=!0)}function d(e){let r=n;n=void 0;try{return e(void 0)}finally{n=r}}function p(){return!!n}e.withComputation=function(e,r){let i=n;n=e;try{return r.call(null,e)}finally{n=i}},e.withoutComputation=d,e.isActive=p,e.getCurrentComputation=function(){return n},e.autorun=function(r,i){var o=new f(r,n,i?.onError);return p()&&e.onInvalidate(function(){o.stop()}),o};e.onInvalidate=function(e){if(!n)throw Error("Tracker.onInvalidate requires a currentComputation");n.onInvalidate(e)},e.inFlush=function(){return s},e.flush=function(e){c({finishSynchronously:!0,throwFirstError:e&&e.throwFirstError})},e.afterFlush=function(e){i.push(e),u()};class f{constructor(e,n,r){this._fn=e,this.parent=n,this._onError=r,this._onInvalidateCallbacks=[],this._onStopCallbacks=[],this._recomputing=!1,this.stopped=!1,this.invalidated=!1,this.firstRun=!0;let i=!0;try{this._compute(),i=!1}finally{this.firstRun=!1,i&&this.stop()}}onInvalidate(e){this.invalidated?d(e.bind(null,this)):this._onInvalidateCallbacks.push(e)}invalidate(){if(!this.invalidated){this._recomputing||this.stopped||(u(),r.push(this)),this.invalidated=!0;for(var e,n=0;e=this._onInvalidateCallbacks[n];n++)d(e.bind(null,this));this._onInvalidateCallbacks=[]}}stop(){if(!this.stopped){this.stopped=!0,this.invalidate();for(let e=0,n;n=this._onStopCallbacks[e];e++)d(n.bind(null,this));this._onStopCallbacks=[]}}onStop(e){this.stopped?d(e.bind(null,this)):this._onStopCallbacks.push(e)}_compute(){this.invalidated=!1;var n=a;a=!0;try{this._result=e.withComputation(this,this._fn)}finally{a=n}}_needsRecompute(){return this.invalidated&&!this.stopped}_recompute(){this._recomputing=!0;try{if(this._needsRecompute())try{this._compute()}catch(e){this._onError?this._onError(e):h("recompute",e)}}finally{this._recomputing=!1}}flush(){this._recomputing||this._recompute()}run(){this.invalidate(),this.flush()}get result(){return this._result}}e.Computation=f,e.Dependency=class{constructor(){this._dependents=new Set}depend(e){if(!e){if(!p())return!1;e=n}return!this._dependents.has(e)&&(this._dependents.add(e),e.onInvalidate(()=>{this._dependents.delete(e)}),!0)}changed(){for(let e of this._dependents)e.invalidate()}hasDependents(){return 0!==this._dependents.size}}})(i||(i={}));var a=class{constructor(e,n){this._dep=new i.Dependency,this._isEqual=(e,n)=>e==n,this._value=e,n?.isEqual&&(this._isEqual=n.isEqual)}_addDepend(e){i.isActive()&&e.depend()}hasDependents(){return this._dep.hasDependents()}get value(){return this._addDepend(this._dep),this._value}set value(e){this._isEqual(this._value,e)||(this._value=e,this._dep.changed())}};function l(e,n){if("Proxy"in window)return new Proxy(e,n);let r={};for(let i in e)Object.defineProperty(r,i,{enumerable:!0,get:n.get?()=>n.get(e,i):void 0,set:n.set?r=>n.set(e,i,r):void 0});return r}var h=i.Dependency,c=class extends a{constructor(){super(...arguments),this._keyDeps=new Map}set(e,n){this._ensureKey(e);let r=this._value[e];return!this._isEqual(r,n)&&(this._value[e]=n,this._keyDeps.get(e).changed(),!0)}get(e){return this._ensureKey(e),this._addDepend(this._keyDeps.get(e)),this._value[e]}_ensureKey(e){this._keyDeps.has(e)||this._keyDeps.set(e,new h)}hasDependents(){if(this._dep.hasDependents())return!0;for(let e of this._keyDeps.values())if(e.hasDependents())return!0;return!1}keys(){return Object.keys(this._value)}set value(e){this._isEqual(this._value,e)||(this._value=e,this._keyDeps.clear(),this._dep.changed())}get value(){return this._addDepend(this._dep),this._proxyValue||(this._proxyValue=l(this._value,{get:(e,n)=>this.get(n),set:(e,n,r)=>(this.set(n,r),!0)})),this._proxyValue}get readonlyValue(){return this._addDepend(this._dep),this._proxyReadonlyValue||(this._proxyReadonlyValue=l(this._value,{get:(e,n)=>this.get(n),set:(e,n)=>{throw Error(`[ReactiveState] Cannnot set readonly field "${n}"`)}})),this._proxyReadonlyValue}};function u(e){let n=(0,s.JA)(),r=(0,o.useMemo)(()=>new Map,[]),a=(0,o.useCallback)(()=>{r.forEach(e=>e.stop()),r.clear()},[]);return(0,o.useEffect)(()=>a,[]),a(),(0,o.useMemo)(()=>void 0===e?{}:l(e,{get(o,s){let a=r.get(s);return a||(a=new i.Computation(r=>r.firstRun?e[s]:void n()),r.set(s,a)),e[s]}}),[e])}function d(e){return u(e.readonlyValue)}var{Dependency:p,Computation:f}=i},4706:function(e,n,r){"use strict";r.d(n,{Em:()=>k,Kz:()=>ei,NQ:()=>C,Rf:()=>T,V7:()=>O,aK:()=>eo,kD:()=>I,lV:()=>en,qf:()=>el,qq:()=>ea});var i,o=r(2100),s=r(8319),a=r(8336),l=r(9378),h=r(4210),c=r(6321),u=r(4194),d=r(4218),p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=(e,n,r,i)=>{for(var o,s=i>1?void 0:i?f(n,r):n,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(n,r,s):o(s))||s);return i&&s&&p(n,r,s),s},y="#BBBFC4";function m(){let e=(0,s.G2)(o.h3);return{baseColor:e.constants?.[o.cc.BASE_COLOR]||y,baseActivatedColor:e.constants?.[o.cc.BASE_ACTIVATED_COLOR]||"#82A7FC"}}var b={stroke:y,fill:"transparent",strokeLinecap:"round",strokeLinejoin:"round"};function _(e){let{isVertical:n}=e.entity;if(n){let n=e.entity.next?.firstChild&&!e.entity.next.isInlineBlocks?e.entity.next.firstChild.getData(o.eG).size.width:e.entity.next?.getData(o.eG).size.width;return Math.max(e.entity.getData(o.eG)?.size.width??o.Lu[o.T4.HOVER_AREA_WIDTH],n||0)}return e.transform.next?e.transform.next.inputPoint.x-e.transform.outputPoint.x:32}function E(e){let{isVertical:n}=e.entity;if(n)return e.transform.next?e.transform.next.inputPoint.y-e.transform.outputPoint.y:32;let r=e.entity.next?.firstChild&&!e.entity.next.isInlineBlocks?e.entity.next.firstChild.getData(o.eG).size.height:e.entity.next?.getData(o.eG).size.height;return Math.max(e.entity.getData(o.eG)?.size.height||280,r||0)}var w=class extends s.cv{constructor(e){super(e),this.containerX=0,this.containerY=0,this.playgroundConfigEntity=this.entityManager.getEntity(s.ER,!0)}get hasScroll(){return!!(this._scrollXInterval||this._scrollYInterval)}isCollision(e,n,r){let i=this.playgroundConfigEntity.finalScale||0;return r?this.isBranchCollision(e,n,i):this.isNodeCollision(e,n,i)}isNodeCollision(e,n,r){let{labels:i}=e,{isVertical:s}=e.entity;return{hasCollision:i.some(i=>{if(!i||![o.nx.ADDER_LABEL,o.nx.COLLAPSE_ADDER_LABEL].includes(i.type))return!1;let l=s?e.transform.bounds.width:32,h=s?32:e.transform.bounds.height,c=new a.Ae((i.offset.x-l/2)*r,(i.offset.y-h/2)*r,l*r,h*r);return a.Ae.intersects(c,n)}),labelOffsetType:void 0}}isBranchCollision(e,n,r){let{labels:i}=e,{isVertical:s}=e.entity,l=o.VH.NORMAL_BRANCH;return{hasCollision:i.some(e=>{if(!e||e.type!==o.nx.BRANCH_DRAGGING_LABEL)return!1;let i=s?64:e.width||0,h=s?e.width||0:64,c=new a.Ae((e.offset.x-h/2)*r,(e.offset.y-i/2)*r,h*r,i*r),u=a.Ae.intersects(c,n);return u&&(l=e.props.side),u}),labelOffsetType:l}}_startScrollX(e,n){if(this._scrollXInterval)return;let r=window.setInterval(()=>{let e=this._scrollXInterval;if(!e)return;let r=e.origin=n?e.origin+4:e.origin-4;this.playgroundConfigEntity.updateConfig({scrollX:r});let i=this.playgroundConfigEntity.config;i?.scrollX===r&&(n?this.containerX+=4:this.containerX-=4,this.setDomStyle())},20);this._scrollXInterval={interval:r,origin:e}}_stopScrollX(){this._scrollXInterval&&(clearInterval(this._scrollXInterval.interval),this._scrollXInterval=void 0)}_startScrollY(e,n){if(this._scrollYInterval)return;let r=window.setInterval(()=>{let e=this._scrollYInterval;if(!e)return;let r=e.origin=n?e.origin+4:e.origin-4;this.playgroundConfigEntity.updateConfig({scrollY:r});let i=this.playgroundConfigEntity.config;i?.scrollY===r&&(n?this.containerY+=4:this.containerY-=4,this.setDomStyle())},20);this._scrollYInterval={interval:r,origin:e}}_stopScrollY(){this._scrollYInterval&&(clearInterval(this._scrollYInterval.interval),this._scrollYInterval=void 0)}stopAllScroll(){this._stopScrollX(),this._stopScrollY()}setDomStyle(){this.containerDom.style.left=`${this.containerX}px`,this.containerDom.style.top=`${this.containerY}px`}scrollDirection(e,n,r,i){let o=this.playgroundConfigEntity.config,s=o.scrollX,a=o.scrollY;return(this.containerDom=n,this.containerX=r,this.containerY=i,o.height+o.clientY-e.clientY<20)?(this._startScrollY(a,!0),1):e.clientY-o.clientY<20?(this._startScrollY(a,!1),0):(this._stopScrollY(),o.width+o.clientX-e.clientX<20)?(this._startScrollX(s,!0),3):e.clientX-o.clientX<80?(this._startScrollX(s,!1),2):void this._stopScrollX()}dispose(){this.toDispose.dispose()}};w.type="FlowDragEntity";var x=class extends s.cv{constructor(){super(...arguments),this.boundsPadding=10}getDefaultConfig(){return{selectedNodes:[]}}get selectedNodes(){return this.config.selectedNodes}set selectedNodes(e){((e=function(e){if(0===e.length)return[];let n=e.map(e=>(function(e){let n=[e];for(e=e.parent;e;)n.push(e),e=e.parent;return n.reverse()})(e)),r=Math.min(...n.map(e=>e.length)),i=0,o=[];for(;i<r&&!((o=(0,l.uniq)(n.map(e=>e[i]))).length>1);)i+=1;return(0,l.uniq)(o.map(e=>(function(e){for(;e.originParent;)e=e.originParent;return e})(e)))}(e)).length!==this.config.selectedNodes.length||e.some(e=>!this.config.selectedNodes.includes(e)))&&(this.config.selectedNodes.forEach(n=>{e.includes(n)||(n.getData(o.Lz).activated=!1)}),e.forEach(e=>{e.getData(o.Lz).activated=!0}),a.XJ.isArrayShallowChanged(this.config.selectedNodes,e)&&this.updateConfig({selectedNodes:e}))}clearSelectedNodes(){0!==this.config.selectedNodes.length&&(this.config.selectedNodes.forEach(e=>{e.getData(o.Lz).activated=!1}),this.updateConfig({selectedNodes:[]}))}selectFromBounds(e,n){let r=[];n.forEach(n=>{a.Ae.intersects(e,n.bounds)&&(n.entity.originParent?r.push(n.entity.originParent):r.push(n.entity))}),this.selectedNodes=r}getSelectedBounds(){let e=this.selectedNodes;return 0===e.length?a.Ae.EMPTY:a.Ae.enlarge(e.map(e=>e.getData(o.eG).bounds)).pad(this.boundsPadding)}};x.type="FlowSelectConfigEntity";var C=class extends s.cv{get dragInfo(){return this.config}setDragInfo(e){this.updateConfig(e)}get disabled(){return this.config&&!!this.config.disabled}set disabled(e){this.updateConfig({disabled:e})}get isStart(){return this.dragInfo.isStart}get isMoving(){return this.dragInfo.isMoving}get position(){let{dragInfo:e}=this;return{x:e.startPos.x<e.endPos.x?e.startPos.x:e.endPos.x,y:e.startPos.y<e.endPos.y?e.startPos.y:e.endPos.y}}get size(){let{dragInfo:e}=this;return{width:Math.abs(e.startPos.x-e.endPos.x),height:Math.abs(e.startPos.y-e.endPos.y)}}get collapsed(){let{size:e}=this;return 0===e.width&&0===e.height}collapse(){this.setDragInfo({...this.dragInfo,isMoving:!1,isStart:!1})}toRectangle(e){let{position:n,size:r}=this;return new a.Ae(n.x/e,n.y/e,r.width/e,r.height/e)}};C.type="SelectorBoxConfigEntity";var S=e=>{if(!e||(0,l.isNil)(e?.offsetParent))return!0;let n=window.getComputedStyle(e);return n?.display==="none"},D=e=>!!e&&(0!==e.bottom||0!==e.height||0!==e.left||0!==e.right||0!==e.top||0!==e.width||0!==e.x||0!==e.y)&&!0,N=class{observe(e,n){let r=new ResizeObserver(e=>{window.requestAnimationFrame(()=>{if(!Array.isArray(e)||!e.length)return;let{contentRect:r,target:i}=e[0],o=D(r),s=!i.parentNode,a=S(i.parentNode);!o||s||a||(n.size={width:Math.round(10*r.width)/10,height:Math.round(10*r.height)/10})})});return r.observe(e),a.JT.create(()=>{r.unobserve(e)})}};N=g([(0,h.b2)()],N);var O=class extends s.mh{constructor(){super(...arguments),this.node=a.xF.createDivWithClass("gedit-flow-nodes-layer"),this.renderCache=a.Ct.create(e=>{let n,{renderState:r}=e,{node:i}=r,{entity:o}=e;return i.id=o.id,n||(this.renderElement.appendChild(i),n=this.resizeObserver.observe(i,e)),{dispose:()=>{n&&(i.parentElement&&this.renderElement.removeChild(i),n.dispose(),n=void 0)},updateBounds:()=>{let{bounds:n}=e,r=parseFloat(i.style.left),o=parseFloat(i.style.top);this.isCoordEqual(r,n.x)&&this.isCoordEqual(o,n.y)||(i.style.left=`${n.x}px`,i.style.top=`${n.y}px`)}}})}get transformVisibles(){return this.document.getRenderDatas(o.eG,!1)}onZoom(e){this.node.style.transform=`scale(${e})`}dispose(){this.renderCache.dispose(),super.dispose()}isCoordEqual(e,n){return .05>Math.abs(e-n)}onReady(){this.node.style.zIndex="10"}get visibeBounds(){return this.transformVisibles.map(e=>e.bounds)}updateNodesBounds(){this.renderCache.getMoreByItems(this.transformVisibles).forEach(e=>e.updateBounds())}autorun(){this.documentTransformer.loading||(this.documentTransformer.refresh(),this.updateNodesBounds())}get renderElement(){if("function"==typeof this.options.renderElement){let e=this.options.renderElement();if(e)return e}else if(void 0!==this.options.renderElement)return this.options.renderElement;return this.node}};g([(0,h.f3)(o.pQ)],O.prototype,"document",2),g([(0,h.f3)(N)],O.prototype,"resizeObserver",2),g([(0,s.O0)(o.Vl)],O.prototype,"documentTransformer",2),g([(0,s.aI)(o.GA,o.eG)],O.prototype,"_transforms",2),O=g([(0,h.b2)()],O);var M=Symbol("FlowRendererContribution"),I=((i=I||{}).NODE_RENDER="node-render",i.ADDER="adder",i.COLLAPSE="collapse",i.BRANCH_ADDER="branch-adder",i.TRY_CATCH_COLLAPSE="try-catch-collapse",i.DRAG_NODE="drag-node",i.DRAGGABLE_ADDER="draggable-adder",i.DRAG_HIGHLIGHT_ADDER="drag-highlight-adder",i.DRAG_BRANCH_HIGHLIGHT_ADDER="drag-branch-highlight-adder",i.SELECTOR_BOX_POPOVER="selector-box-popover",i.CONTEXT_MENU_POPOVER="context-menu-popover",i.SUB_CANVAS="sub-canvas",i.MARKER_ARROW="marker-arrow",i.MARKER_ACTIVATE_ARROW="marker-active-arrow",i),T=class{constructor(){this.componentsMap=new Map,this.textMap=new Map,this.contribs=[]}init(){this.contribs.forEach(e=>e.registerRenderer?.(this))}registerRendererComponents(e,n){this.componentsMap.set(e,n)}registerReactComponent(e,n){this.componentsMap.set(e,{type:0,renderer:n})}registerText(e){Object.entries(e).forEach(([e,n])=>{this.textMap.set(e,n)})}getText(e){return d.o.t(e,{disableReturnKey:!0})||this.textMap.get(e)}getRendererComponent(e){let n=this.componentsMap.get(e);if(!n)throw Error(`Unknown render key ${e}`);return n}tryToGetRendererComponent(e){return this.componentsMap.get(e)}registerLayers(...e){e.forEach(e=>this.pipeline.registerLayer(e))}registerLayer(e,n){this.pipeline.registerLayer(e,n)}};g([(0,h.nx)(M),(0,h.jt)()],T.prototype,"contribs",2),g([(0,h.f3)(s.Rm)],T.prototype,"pipeline",2),T=g([(0,h.b2)()],T);var k=class extends s.mh{constructor(){super(...arguments),this.renderMemoCache=new WeakMap,this.node=a.xF.createDivWithClass("gedit-flow-nodes-layer"),this.reactPortals=a.Ct.create(e=>{let{node:n,entity:r}=e,{config:i}=this,a=this.getPortalRenderer(e);return{id:n.id||r.id,dispose:()=>{},Portal:function(){return u.useEffect(()=>{if(n.clientWidth&&n.clientHeight){let e=r.getData(o.eG);e&&(e.size={width:n.clientWidth,height:n.clientHeight})}},[]),c.createPortal(u.createElement(s.rQ.Provider,{value:r},u.createElement(a,{node:r,version:e?.version,activated:e?.activated,readonly:i.readonly,disabled:i.disabled})),n)}}})}get renderStatesVisible(){return this.document.getRenderDatas(o.Lz,!1)}getPortalRenderer(e){let n=e.entity.getNodeMeta(),r=this.rendererRegistry.getRendererComponent(n.renderKey||"node-render").renderer,i=this.renderMemoCache.get(r);return i||(i=u.memo(r),this.renderMemoCache.set(r,i)),i}onZoom(e){this.node.style.transform=`scale(${e})`}dispose(){this.reactPortals.dispose(),super.dispose()}onReady(){this.node.style.zIndex="10"}onReadonlyOrDisabledChange(){this.render()}getPortals(){return this.reactPortals.getMoreByItems(this.renderStatesVisible)}render(){return this.documentTransformer.loading?u.createElement(u.Fragment,null):(this.documentTransformer.refresh(),u.createElement(u.Fragment,null,this.getPortals().map(e=>u.createElement(e.Portal,{key:e.id}))))}};g([(0,h.f3)(o.pQ)],k.prototype,"document",2),g([(0,h.f3)(T)],k.prototype,"rendererRegistry",2),g([(0,s.O0)(o.Vl)],k.prototype,"documentTransformer",2),g([(0,s.aI)(o.GA,o.Lz)],k.prototype,"_renderStates",2),k=g([(0,h.b2)()],k);var P="line-marker-arrow",A=`url(#${P})`,L=function(){let{baseColor:e}=m();return u.createElement("marker",{id:P,markerWidth:"11",markerHeight:"14",refX:"10",refY:"7",orient:"auto"},u.createElement("path",{d:"M9.6 5.2C10.8 6.1 10.8 7.9 9.6 8.8L3.6 13.3C2.11672 14.4125 0 13.3541 0 11.5L0 2.5C0 0.645898 2.11672 -0.412461 3.6 0.7L9.6 5.2Z",fill:e}))},j="line-marker-arrow-activated",R=`url(#${j})`,z=function(){let{baseActivatedColor:e}=m();return u.createElement("marker",{id:j,markerWidth:"11",markerHeight:"14",refX:"10",refY:"7",orient:"auto"},u.createElement("path",{d:"M9.6 5.2C10.8 6.1 10.8 7.9 9.6 8.8L3.6 13.3C2.11672 14.4125 0 13.3541 0 11.5L0 2.5C0 0.645898 2.11672 -0.412461 3.6 0.7L9.6 5.2Z",fill:e}))},V=function(e){let{from:n,to:r,activated:i,style:o}=e,{baseColor:s,baseActivatedColor:a}=m();return u.createElement("path",{d:`M ${n.x} ${n.y} L ${r.x} ${r.y}`,...b,stroke:i?a:s,style:o})},F=function(e){let{vertices:n,radius:r=16,hide:i,xRadius:s,yRadius:h,...c}=e,{from:d,to:p,arrow:f,activated:g,style:y}=c||{},{baseActivatedColor:_,baseColor:E}=m(),w=n||(e.isHorizontal?function(e,n=16,r=20){let{from:i,to:s,type:a}=e||{},l=Math.abs(s.y-i.y),h=Math.abs(s.x-i.x),c=h/n,u=l/r,d=[];if(c<1)return[];switch(a){case o.IG.DIVERGE_LINE:case o.IG.DRAGGING_LINE:if(c<=1)return[{x:s.x,y:i.y,radiusX:h}];if(d=[{x:i.x+r,y:i.y},{x:i.x+r,y:s.y}],c<2){let e=h-r;d=[{x:i.x+e,y:i.y,radiusX:e},{x:i.x+e,y:s.y}]}return u<2&&(d[0].moveY=l/2,d[1].moveY=l/2),d;case o.IG.MERGE_LINE:if(c<2)return[{x:s.x,y:i.y}];return d=[{x:s.x-r,y:i.y},{x:s.x-r,y:s.y}],u<2&&(d[0].moveY=l/2,d[1].moveY=l/2),d}return[]}(c,s,h):function(e,n=16,r=20){let{from:i,to:s,type:a}=e||{},l=Math.abs(s.y-i.y),h=Math.abs(s.x-i.x),c=l/r,u=h/n,d=[];if(c<1)return[];switch(a){case o.IG.DIVERGE_LINE:case o.IG.DRAGGING_LINE:if(c<=1)return[{x:s.x,y:i.y,radiusY:l}];if(d=[{x:i.x,y:i.y+r},{x:s.x,y:i.y+r}],c<2){let e=l-r;d=[{x:i.x,y:i.y+e,radiusY:e},{x:s.x,y:i.y+e}]}return u<2&&(d[0].moveX=h/2,d[1].moveX=h/2),d;case o.IG.MERGE_LINE:if(c<2)return[{x:i.x,y:s.y}];return d=[{x:i.x,y:s.y-r},{x:s.x,y:s.y-r}],u<2&&(d[0].moveX=h/2,d[1].moveX=h/2),d}return[]}(c,s,h)),x=(0,u.useMemo)(()=>w.map((e,n)=>{let i=w[n-1]||d,o=w[n+1]||p,s={x:Math.abs(i.x-e.x),y:Math.abs(i.y-e.y)},h={x:Math.abs(o.x-e.x),y:Math.abs(o.y-e.y)},c=0===s.x&&0===h.y,u=0===s.y&&0===h.x;c||u||console.error(`vertex ${e.x},${e.y} is not right angle`);let f=new a.E9().copyFrom(e),g=new a.E9().copyFrom(e),y=(0,l.isNil)(e.radiusX)?r:e.radiusX,m=(0,l.isNil)(e.radiusY)?r:e.radiusY,b=y,_=m;if(c){_=Math.min(s.y,m);let n=(0,l.isNil)(e.moveY)?_:e.moveY;f.y+=d.y<e.y?-n:+n,b=Math.min(h.x,y);let r=(0,l.isNil)(e.moveX)?b:e.moveX;g.x+=p.x<e.x?-r:+r}if(u){b=Math.min(s.x,y);let n=(0,l.isNil)(e.moveX)?b:e.moveX;f.x+=d.x<e.x?-n:+n,_=Math.min(h.y,m);let r=(0,l.isNil)(e.moveY)?_:e.moveY;g.y+=p.y<e.y?-r:+r}let E=(e.x-f.x)*(g.y-f.y)-(e.y-f.y)*(g.x-f.x);return`L ${f.x} ${f.y} A ${b} ${_} 0 0 ${+(E>0)} ${g.x} ${g.y}`}).join(" "),[w]);if(i)return null;let C=`M ${d.x} ${d.y} ${x} L ${p.x} ${p.y}`;return u.createElement("path",{d:C,...b,stroke:g?_:E,...f?{markerEnd:g?R:A}:{},style:y})},$=function(e){let{renderKey:n,rendererRegistry:r,...i}=e;if(!n)return u.createElement(u.Fragment,null);let o=r.getRendererComponent(n);if(!o)return u.createElement(u.Fragment,null);let s=o.renderer;return u.createElement(s,{...i})},B=class extends s.mh{constructor(){super(...arguments),this.node=a.xF.createDivWithClass("gedit-flow-lines-layer"),this.onViewportChange=(0,l.throttle)(()=>{this.render()},100)}get transitions(){return this.document.getRenderDatas(o.Xr)}onZoom(){let e=this.node.querySelector("svg.flow-lines-container");e?.setAttribute?.("viewBox",this.viewBox)}onReady(){this.node.style.zIndex="1"}get viewBox(){let e=1e3/this.config.finalScale;return`0 0 ${e} ${e}`}render(){let e=[],n=this.config.isViewportVisible.bind(this.config);if(this.documentTransformer.loading)return u.createElement(u.Fragment,null);this.documentTransformer.refresh(),this.transitions.forEach(r=>{!function(e){let{data:n,rendererRegistry:r,linesSave:i,dragService:s}=e,{lines:l,entity:h}=n||{},c=(0,o.yI)(h,o.T4.ROUNDED_LINE_X_RADIUS),d=(0,o.yI)(h,o.T4.ROUNDED_LINE_Y_RADIUS),p=(e,i)=>{let{renderData:a}=n,{isVertical:l}=n.entity,{lineActivated:h}=a||{},p=e.type===o.IG.DRAGGING_LINE&&!s.isDroppableBranch(n.entity,e.side),f=e.type===o.IG.DRAGGING_LINE&&n.entity?.id===s.dropNodeId&&e.side===s.labelSide;switch(e.type){case o.IG.STRAIGHT_LINE:return u.createElement(V,{key:`${n.entity.id}${i}`,activated:h,...e});case o.IG.DIVERGE_LINE:case o.IG.DRAGGING_LINE:case o.IG.MERGE_LINE:case o.IG.ROUNDED_LINE:return u.createElement(F,{key:`${n.entity.id}${i}`,isHorizontal:!l,activated:h||f,...e,xRadius:c,yRadius:d,hide:p});case o.IG.CUSTOM_LINE:return u.createElement($,{key:`${n.entity.id}${i}`,...e,rendererRegistry:r})}};l.forEach((n,r)=>{let o=a.Ae.createRectangleWithTwoPoints(n.from,n.to).pad(10);if(e.isViewportVisible(o)){let e=p(n,r);e&&i.push(e)}})}({data:r,rendererRegistry:this.rendererRegistry,isViewportVisible:n,linesSave:e,dragService:this.dragService})});let{activateLines:r=[],normalLines:i=[]}=(0,l.groupBy)(e,e=>e.props.activated?"activateLines":"normalLines"),s=[...i,...r],h=this.rendererRegistry.tryToGetRendererComponent("marker-arrow"),c=this.rendererRegistry.tryToGetRendererComponent("marker-active-arrow"),d=h?u.createElement(h.renderer):null,p=c?u.createElement(c.renderer):null;return u.createElement("svg",{className:"flow-lines-container",width:"1000",height:"1000",overflow:"visible",viewBox:this.viewBox,xmlns:"http://www.w3.org/2000/svg"},u.createElement("defs",null,h?d:u.createElement(L,null),p||u.createElement(z,null)),s)}};function H(e){let{data:n,rendererRegistry:r,forceVisible:i,hoverHeight:s=E(n),hoverWidth:a=_(n),wrapperStyle:l,...h}=e,{activateNode:c}=h,[d,p]=(0,u.useState)(!1),f=c?.getData(o.Lz),g=(0,u.useCallback)(()=>{p(!0),f?.toggleMouseEnter()},[]),y=(0,u.useCallback)(()=>{p(!1),f?.toggleMouseLeave()},[]),m=r.getRendererComponent("collapse"),b=n.entity,w=u.createElement(m.renderer,{node:b,collapseNode:b,...h,hoverActivated:d}),x=n.collapsed||f?.hovered||d||i;return u.createElement("div",{className:"flow-canvas-collapse",onMouseEnter:g,onMouseLeave:y,style:{width:a,height:s,display:"flex",justifyContent:"center",alignItems:"center",...l}},x?w:null)}g([(0,h.f3)(o.pQ)],B.prototype,"document",2),g([(0,h.f3)(o.eE)],B.prototype,"dragService",2),g([(0,h.f3)(T)],B.prototype,"rendererRegistry",2),g([(0,s.O0)(o.Vl)],B.prototype,"documentTransformer",2),g([(0,s.O0)(o.y3)],B.prototype,"flowRenderState",2),g([(0,s.aI)(o.GA,o.Xr)],B.prototype,"_transitions",2),B=g([(0,h.b2)()],B);var K=(e,{dragService:n})=>n&&n.dragging&&n.isDroppableNode(e)?n.dropNodeId===e.id?"drag-highlight-adder":"draggable-adder":"adder";function U(e){let{data:n,rendererRegistry:r,hoverHeight:i=E(n),hoverWidth:a=_(n),...l}=e,[h,c]=(0,u.useState)(!1),d=(0,u.useCallback)(()=>c(!0),[]),p=(0,u.useCallback)(()=>c(!1),[]),f=n.entity,g=K(f,{dragService:(0,s.G2)(o.eE)}),y=r.getRendererComponent(g),m=n.entity.document.renderTree.getOriginInfo(f).next,b=f.next,w=u.createElement(y.renderer,{node:f,from:f,to:m,renderTo:b,hoverActivated:h,setHoverActivated:c,hoverWidth:a,hoverHeight:i,...l});return u.createElement("div",{className:"flow-canvas-adder","data-testid":"sdk.flowcanvas.line.adder","data-from":f.id,"data-to":m?.id??"",onMouseEnter:d,onMouseLeave:p,style:{width:a,height:i,display:"flex",justifyContent:"center",alignItems:"center"}},w)}function W(e){let{data:n,rendererRegistry:r,...i}=e,{activateNode:s}=i,[a,l]=(0,u.useState)(!1),h=s?.getData(o.Lz),c=(0,u.useCallback)(()=>{l(!0)},[]),d=(0,u.useCallback)(()=>{l(!1)},[]),p=s?.isVertical,f=h?.hovered||a;return p?u.createElement("div",{className:"flow-canvas-collapse-adder",onMouseEnter:c,onMouseLeave:d},(f||n.collapsed)&&u.createElement(H,{forceVisible:!0,...e,wrapperStyle:{alignItems:"flex-end"},hoverHeight:20}),!n.collapsed&&u.createElement(U,{...e,hoverHeight:f?20:40,hoverActivated:f})):u.createElement("div",{className:"flow-canvas-collapse-adder",onMouseEnter:c,onMouseLeave:d,style:{display:n.collapsed?"block":"flex"}},(f||n.collapsed)&&u.createElement(H,{forceVisible:!0,...e,wrapperStyle:{justifyContent:"flex-end"},hoverWidth:20}),!n.collapsed&&u.createElement(U,{...e,hoverWidth:f?20:40,hoverActivated:f}))}var G=(e,{dragService:n,side:r})=>n.isDragBranch&&r&&n.labelSide===r&&n.isDroppableBranch(e,r)?n.dropNodeId===e.id?"drag-branch-highlight-adder":"draggable-adder":"";function Y(e){let{data:n,rendererRegistry:r,side:i,...a}=e,l=n.entity,h=G(l,{side:i,dragService:(0,s.G2)(o.eE)});if(!h)return null;let c=r.getRendererComponent(h),d=n.entity.document.renderTree.getOriginInfo(l).next,p=l.next,f=u.createElement(c.renderer,{node:l,from:l,to:d,renderTo:p,...a});return u.createElement("div",{className:"flow-canvas-branch-draggable-adder"},f)}var Z={fontSize:12,color:"#8F959E",textAlign:"center",whiteSpace:"nowrap",backgroundColor:"var(--g-editor-background)",lineHeight:"20px"},X=class extends s.mh{constructor(){super(...arguments),this.node=a.xF.createDivWithClass("gedit-flow-labels-layer"),this.onViewportChange=(0,l.throttle)(()=>{this.render()},100)}get transitions(){return this.document.getRenderDatas(o.Xr)}onZoom(e){this.node.style.transform=`scale(${e})`}onReady(){this.node.style.zIndex="9"}onReadonlyOrDisabledChange(){this.render()}render(){let e=[];if(this.documentTransformer?.loading)return u.createElement(u.Fragment,null);this.documentTransformer?.refresh?.();let{baseActivatedColor:n,baseColor:r}=m(),i=this.config.isViewportVisible.bind(this.config);return this.transitions.forEach(s=>{!function(e){let{data:n,rendererRegistry:r,labelsSave:i,getLabelColor:s}=e,{labels:l,renderData:h}=n||{},{activated:c}=h||{},d=(e,i)=>{let{offset:a,renderKey:l,props:h,rotate:d,type:p}=e||{},f=a.x,g=a.y,y=null;switch(p){case o.nx.BRANCH_DRAGGING_LABEL:y=u.createElement(Y,{rendererRegistry:r,data:n,...h});break;case o.nx.ADDER_LABEL:y=u.createElement(U,{rendererRegistry:r,data:n,...h});break;case o.nx.COLLAPSE_LABEL:y=u.createElement(H,{rendererRegistry:r,data:n,...h});break;case o.nx.COLLAPSE_ADDER_LABEL:y=u.createElement(W,{rendererRegistry:r,data:n,...h});break;case o.nx.TEXT_LABEL:if(!l)return null;let m=r.getText(l)||l;y=u.createElement("div",{style:{...Z,...h?.style,color:s(c),transform:d?`rotate(${d})`:void 0}},m);break;case o.nx.CUSTOM_LABEL:if(!l)return null;try{let e=r.getRendererComponent(l);y=u.createElement(e.renderer,{node:n.entity,...h})}catch(e){console.error(e),y=l}}return u.createElement("div",{key:`${n.entity.id}${i}`,style:{position:"absolute",left:f,top:g,transform:"translate(-50%, -50%)"}},y)};l.forEach((n,r)=>{var o;e.isViewportVisible((o=n.offset,new a.Ae(o.x-75,o.y-30,150,60)))&&i.push(d(n,r))})}({data:s,rendererRegistry:this.rendererRegistry,isViewportVisible:i,labelsSave:e,getLabelColor:e=>e?n:r})}),u.createElement(u.Fragment,null,e)}};function Q(e,n){let r=n.finalScale;return new a.Ae(e.scrollX/r,e.scrollY/r,n.config.width/r,n.config.height/r).pad(-120/r,-120/r)}g([(0,h.f3)(o.pQ)],X.prototype,"document",2),g([(0,h.f3)(T)],X.prototype,"rendererRegistry",2),g([(0,s.O0)(o.Vl)],X.prototype,"documentTransformer",2),g([(0,s.O0)(o.y3)],X.prototype,"flowRenderState",2),g([(0,s.aI)(o.GA,o.Xr)],X.prototype,"_transitions",2),X=g([(0,h.b2)()],X);var q=Symbol("ScrollBarEvents"),J=0;function ee(e){let n=Math.min(e/10*255,255),r=(J+=1)%3,i=()=>Math.floor(Math.random()*n);return`rgb(${0===r?i():0}, ${1===r?i():0}, ${2===r?i():0})`}var et=class extends s.mh{constructor(){super(...arguments),this.node=document.createElement("div"),this.viewport=a.xF.createDivWithClass("gedit-flow-debug-bounds"),this.boundsNodes=a.xF.createDivWithClass("gedit-flow-debug-bounds"),this.pointsNodes=a.xF.createDivWithClass("gedit-flow-debug-points"),this.versionNodes=a.xF.createDivWithClass("gedit-flow-debug-versions gedit-hidden"),this.filterKey=window.location.search.match(/debug=([^&]+)/)?.[1]||"",this.originLine=document.createElement("div"),this.domCache=new WeakMap}get transforms(){return this.document.getRenderDatas(o.eG)}onReady(){this.node.style.zIndex="20",a.xF.setStyle(this.originLine,{position:"absolute",width:1,height:"100%",left:this.pipelineNode.style.left,top:0,borderLeft:"1px dashed rgba(255, 0, 0, 0.5)"}),this.pipelineNode.parentElement.appendChild(this.originLine),this.node.appendChild(this.viewport),this.node.appendChild(this.versionNodes),this.node.appendChild(this.boundsNodes),this.node.appendChild(this.pointsNodes),this.renderScrollViewportBounds()}onScroll(){this.originLine.style.left=this.pipelineNode.style.left,this.renderScrollViewportBounds()}onResize(){this.renderScrollViewportBounds()}onZoom(e){this.node.style.transform=`scale(${e})`,this.renderScrollViewportBounds()}createBounds(e,n,r){if(this.filterKey&&-1===e.key.indexOf(this.filterKey))return;let i=this.domCache.get(e),{bounds:o,inputPoint:s,outputPoint:l}=e;if(!i){let r=a.xF.createDivWithClass(""),o=a.xF.createDivWithClass(""),s=a.xF.createDivWithClass(""),l=a.xF.createDivWithClass("");r.title=e.key,o.title=e.key+"(input)",s.title=e.key+"(output)",l.title=e.key,this.boundsNodes.appendChild(r),this.pointsNodes.appendChild(o),this.pointsNodes.appendChild(s),this.versionNodes.appendChild(l),e.onDispose(()=>{r.remove(),o.remove(),s.remove()}),i={bbox:r,input:o,output:s,version:l,color:n},this.domCache.set(e,i)}a.xF.setStyle(i.version,{position:"absolute",marginLeft:"-9px",marginTop:"-10px",borderRadius:12,background:"#f54a45",padding:4,color:"navajowhite",display:e.renderState.hidden?"none":"block",zIndex:r+1e3,left:o.center.x,top:o.center.y}),i.version.innerHTML=e.version.toString(),a.xF.setStyle(i.input,{position:"absolute",width:10,height:10,marginLeft:-5,marginTop:-5,borderRadius:5,left:s.x,top:s.y,opacity:.4,zIndex:r,backgroundColor:i.color,whiteSpace:"nowrap",overflow:"visible"}),i.input.innerHTML=`${s.x},${s.y}`,a.xF.setStyle(i.output,{position:"absolute",width:10,height:10,marginLeft:-5,marginTop:-5,borderRadius:5,left:l.x,top:l.y,opacity:.4,zIndex:r,backgroundColor:i.color,whiteSpace:"nowrap",overflow:"visible"}),i.output.innerHTML=`${l.x},${l.y}`,a.xF.setStyle(i.bbox,{position:"absolute",width:o.width,height:o.height,left:o.left,top:o.top,opacity:`${r/30}`,backgroundColor:i.color})}renderScrollViewportBounds(){let e=Q({scrollX:this.config.config.scrollX,scrollY:this.config.config.scrollY},this.config);a.xF.setStyle(this.viewport,{position:"absolute",width:e.width-2,height:e.height-2,left:e.left+1,top:e.top+1,border:"1px solid rgba(200, 200, 255, 0.5)"})}autorun(){if(this.documentTransformer.loading)return;this.documentTransformer.refresh();let e=ee(0);this.document.traverse((n,r)=>{let i=n.getData(o.eG);e=ee(r),this.createBounds(i,e,r)}),this.renderScrollViewportBounds()}};g([(0,h.f3)(o.pQ)],et.prototype,"document",2),g([(0,s.O0)(o.Vl)],et.prototype,"documentTransformer",2),g([(0,s.aI)(o.GA,o.eG)],et.prototype,"_transforms",2),et=g([(0,h.b2)()],et);var en=class extends s.mh{constructor(){super(...arguments),this.rightScrollBar=a.xF.createDivWithClass("gedit-playground-scroll-right"),this.rightScrollBarBlock=a.xF.createDivWithClass("gedit-playground-scroll-right-block"),this.bottomScrollBar=a.xF.createDivWithClass("gedit-playground-scroll-bottom"),this.bottomScrollBarBlock=a.xF.createDivWithClass("gedit-playground-scroll-bottom-block"),this.sum=0,this.initialScrollX=0,this.initialScrollY=0,this.bottomGrabDragger=new s.s5({onDragStart:e=>{this.config.updateCursor("grabbing"),this.sum=0,this.initialScrollX=this.config.getViewport().x,this.onBoardingToast()},onDrag:e=>{this.sum+=e.movingDelta.x,this.playgroundConfigEntity.scroll({scrollX:(this.initialScrollX+this.sum*this.viewportFullWidth/(this.clientViewportWidth-this.scrollBottomWidth))*this.scale},!1)},onDragEnd:e=>{this.config.updateCursor("default")}}),this.rightGrabDragger=new s.s5({onDragStart:e=>{this.config.updateCursor("grabbing"),this.sum=0,this.initialScrollY=this.config.getViewport().y,this.onBoardingToast()},onDrag:e=>{this.sum+=e.movingDelta.y,this.playgroundConfigEntity.scroll({scrollY:(this.initialScrollY+this.sum*this.viewportFullHeight/(this.clientViewportHeight-this.scrollRightHeight))*this.scale},!1)},onDragEnd:e=>{this.config.updateCursor("default")}})}get clientViewportWidth(){return this.viewportWidth*this.scale-11}get clientViewportHeight(){return this.viewportHeight*this.scale-11}get viewportFullWidth(){return this.mostLeft-this.mostRight}get viewportFullHeight(){return this.mostTop-this.mostBottom}get viewportMoveWidth(){return this.mostLeft-this.mostRight+this.width}get viewportMoveHeight(){return this.mostTop-this.mostBottom+this.height}getToLeft(e){return(e-this.mostRight)/this.viewportMoveWidth*this.clientViewportWidth}getToTop(e){return(e-this.mostBottom)/this.viewportMoveHeight*this.clientViewportHeight}clickRightScrollBar(e){e.preventDefault(),e.stopPropagation();let n=1-(e?.y||0)/this.clientViewportHeight,r=(this.mostTop-this.viewportFullHeight*n)*this.scale;this.playgroundConfigEntity.scroll({scrollY:r},!1)}clickBottomScrollBar(e){e.preventDefault(),e.stopPropagation();let n=1-(e?.x||0)/this.clientViewportWidth,r=(this.mostLeft-this.viewportFullWidth*n)*this.scale;this.playgroundConfigEntity.scroll({scrollX:r},!1)}onBoardingToast(){this.events?.dragStart()}changeScrollBarVisibility(e,n){a.xF.addClass(e,"show"===n?"gedit-playground-scroll-show":"gedit-playground-scroll-hidden"),a.xF.delClass(e,"show"===n?"gedit-playground-scroll-hidden":"gedit-playground-scroll-show")}onReady(){this.options.getBounds||(this.options={getBounds:()=>{let e=this.flowDocument;return e?(e.transformer.refresh(),e.root.getData(o.eG).bounds):a.Ae.EMPTY},showScrollBars:"whenScrolling"}),this.pipelineNode.parentNode.appendChild(this.rightScrollBar),this.pipelineNode.parentNode.appendChild(this.rightScrollBarBlock),this.pipelineNode.parentNode.appendChild(this.bottomScrollBar),this.pipelineNode.parentNode.appendChild(this.bottomScrollBarBlock),this.rightScrollBar.onclick=this.clickRightScrollBar.bind(this),this.bottomScrollBar.onclick=this.clickBottomScrollBar.bind(this),"whenScrolling"===this.options.showScrollBars&&(this.rightScrollBar.addEventListener("mouseenter",e=>{this.changeScrollBarVisibility(this.rightScrollBarBlock,"show")}),this.rightScrollBar.addEventListener("mouseleave",e=>{this.changeScrollBarVisibility(this.rightScrollBarBlock,"hidden")}),this.bottomScrollBar.addEventListener("mouseenter",e=>{this.changeScrollBarVisibility(this.bottomScrollBarBlock,"show")}),this.bottomScrollBar.addEventListener("mouseleave",e=>{this.changeScrollBarVisibility(this.bottomScrollBarBlock,"hidden")})),this.bottomScrollBarBlock.addEventListener("mousedown",e=>{this.bottomGrabDragger.start(e.clientX,e.clientY),e.stopPropagation()}),this.rightScrollBarBlock.addEventListener("mousedown",e=>{this.rightGrabDragger.start(e.clientX,e.clientY),e.stopPropagation()})}autorun(){this.hideTimeout&&clearTimeout(this.hideTimeout);let e=Q({scrollX:this.config.config.scrollX,scrollY:this.config.config.scrollY},this.config),n=this.config.getViewport();this.viewportWidth=n.width,this.viewportHeight=n.height;let r=this.options.getBounds();this.width=r?.width||0,this.height=r?.height||0;let i=(this.viewportWidth-e.width)/2-2,o=(this.viewportHeight-e.height)/2-2,s=this.width+e.width,l=this.height+e.height,h=r.x,c=r.y;this.mostLeft=this.width+h-i,this.mostRight=this.mostLeft-s,this.mostTop=this.height+c-o,this.mostBottom=this.mostTop-l,this.scale=this.config.finalScale;let u=this.clientViewportWidth,d=this.clientViewportHeight;this.scrollBottomWidth=u-u*(this.mostLeft-this.mostRight)/this.viewportMoveWidth,this.scrollRightHeight=d-d*(this.mostTop-this.mostBottom)/this.viewportMoveHeight;let p=this.getToLeft(n.x),f=this.getToTop(n.y);a.xF.setStyle(this.rightScrollBarBlock,{right:2,top:f,background:"#1F2329",zIndex:10,height:this.scrollRightHeight,width:"7px"}),a.xF.setStyle(this.bottomScrollBarBlock,{left:p,bottom:2,background:"#1F2329",zIndex:10,height:"7px",width:this.scrollBottomWidth}),this.changeScrollBarVisibility(this.rightScrollBarBlock,"show"),this.changeScrollBarVisibility(this.bottomScrollBarBlock,"show"),"whenScrolling"===this.options.showScrollBars&&(this.hideTimeout=window.setTimeout(()=>{this.changeScrollBarVisibility(this.rightScrollBarBlock,"hidden"),this.changeScrollBarVisibility(this.bottomScrollBarBlock,"hidden"),this.hideTimeout=void 0},1e3))}};g([(0,h.jt)(),(0,h.f3)(q)],en.prototype,"events",2),g([(0,h.f3)(o.pQ),(0,h.jt)()],en.prototype,"flowDocument",2),g([(0,s.O0)(s.ER)],en.prototype,"playgroundConfigEntity",2),en=g([(0,h.b2)()],en);var er=class extends s.mh{constructor(){super(...arguments),this.dragOffset={x:8,y:8},this.containerRef=u.createRef(),this.draggingNodeMask=document.createElement("div"),this._dragger=new s.s5({onDrag:e=>{this.handleMouseMove(e)},onDragEnd:()=>{this.handleMouseUp()},stopGlobalEventNames:["contextmenu"]})}get transitions(){let e=[];return this.document.traverse(n=>{e.push(n.getData(o.Xr))}),e}get dragStartEntity(){return this.flowRenderStateEntity.getDragStartEntity()}set dragStartEntity(e){this.flowRenderStateEntity.setDragStartEntity(e)}get dragEntities(){return this.flowRenderStateEntity.getDragEntities()}set dragEntities(e){this.flowRenderStateEntity.setDragEntities(e)}isGrab(){return this.editorStateConfig.getCurrentState()===s.yy.STATE_GRAB}setDraggingStatus(e){this.service.nodeDragIdsWithChildren.length&&this.service.nodeDragIdsWithChildren.forEach(n=>{let r=this.entityManager.getEntityById(n);(r?.getData(o.Lz)).dragging=e})}dragEnable(e){return Math.abs(e.clientX-this.initialPosition.x)>10||Math.abs(e.clientY-this.initialPosition.y)>10}handleMouseMove(e){if(this.dragStartEntity&&this.dragEnable(e)){this.setDraggingStatus(!0);let n=this.playgroundConfigEntity.finalScale;if(this.containerRef.current){let r,i=this.containerRef.current.children?.[0],o=e.clientX-(this.pipelineNode.offsetLeft||0)-this.playgroundConfigEntity.config.clientX-(i.clientWidth-this.dragOffset.x)*n,s=e.clientY-(this.pipelineNode.offsetTop||0)-this.playgroundConfigEntity.config.clientY-(i.clientHeight-this.dragOffset.y)*n,l=this.service.isDragBranch,h=new a.Ae(o,s,i.clientWidth*n,i.clientHeight*n),c=this.transitions.find(e=>{if(e?.entity?.parent?.collapsed)return!1;let{hasCollision:n,labelOffsetType:i}=this.flowDragConfigEntity.isCollision(e,h,l);return r=i,n});c&&(l?this.service.isDroppableBranch(c.entity,r):this.service.isDroppableNode(c.entity))&&(!this.options.canDrop||this.options.canDrop({dragNodes:this.dragEntities,dropNode:c.entity,isBranch:l}))?this.flowRenderStateEntity.setNodeDroppingId(c.entity.id):this.flowRenderStateEntity.setNodeDroppingId(""),this.flowRenderStateEntity.setDragLabelSide(r),this.containerRef.current.style.visibility="visible",this.pipelineNode.parentElement.appendChild(this.draggingNodeMask),this.containerRef.current.style.left=`${o}px`,this.containerRef.current.style.top=`${s}px`,this.containerRef.current.style.transformOrigin="top left",this.containerRef.current.style.transform=`scale(${n})`,this.flowDragConfigEntity.scrollDirection(e,this.containerRef.current,o,s)}}}handleMouseUp(){this.setDraggingStatus(!1),this.dragStartEntity&&(this.service.dropNodeId&&(this.service.isDragBranch?this.service.dropBranch():(this.service.dropNode(),this.selectConfigEntity.clearSelectedNodes())),this.flowRenderStateEntity.setNodeDroppingId(""),this.flowRenderStateEntity.setDragLabelSide(),this.dragStartEntity=void 0,this.dragEntities=[],this.flowDragConfigEntity.stopAllScroll()),this.containerRef.current&&(this.containerRef.current.style.visibility="hidden",this.pipelineNode.parentElement.contains(this.draggingNodeMask)&&this.pipelineNode.parentElement.removeChild(this.draggingNodeMask))}async startDrag(e,{dragStartEntity:n,dragEntities:r},i){if(this.isGrab()||this.config.disabled||this.config.readonly)return;this.dragOffset.x=i?.dragOffsetX||8,this.dragOffset.y=i?.dragOffsetY||8;let s=n.flowNodeType===o.Sy.BLOCK_ICON,a=n.flowNodeType===o.Sy.BLOCK_ORDER_ICON,l=s||a?n.parent:n;if(l.getData(o.Lz).draggable)return this.initialPosition={x:e.clientX,y:e.clientY},this.dragStartEntity=l,this.dragEntities=r||[this.dragStartEntity],this._dragger.start(e.clientX,e.clientY)}onReady(){this.draggingNodeMask.style.width="100%",this.draggingNodeMask.style.height="100%",this.draggingNodeMask.style.position="absolute",this.draggingNodeMask.classList.add("dragging-node"),this.draggingNodeMask.style.zIndex="99",this.draggingNodeMask.style.cursor="pointer",this.dragNodeComp=this.rendererRegistry.getRendererComponent("drag-node"),this.options.onDrop&&this.toDispose.push(this.service.onDrop(this.options.onDrop))}render(){let e=this.dragNodeComp.renderer;return u.createElement("div",{ref:this.containerRef,style:{position:"absolute",zIndex:99999,visibility:"hidden"},onMouseEnter:e=>e.stopPropagation()},u.createElement(e,{dragStart:this.dragStartEntity,dragNodes:this.dragEntities}))}};g([(0,h.f3)(o.pQ)],er.prototype,"document",2),g([(0,h.f3)(o.eE)],er.prototype,"service",2),g([(0,s.aI)(o.GA,o.eG)],er.prototype,"transforms",2),g([(0,s.O0)(s.Zs)],er.prototype,"editorStateConfig",2),g([(0,s.O0)(s.ER)],er.prototype,"playgroundConfigEntity",2),g([(0,s.O0)(w)],er.prototype,"flowDragConfigEntity",2),g([(0,s.O0)(o.y3)],er.prototype,"flowRenderStateEntity",2),g([(0,s.O0)(x)],er.prototype,"selectConfigEntity",2),g([(0,h.f3)(T)],er.prototype,"rendererRegistry",2),er=g([(0,h.b2)()],er);var ei=class extends s.mh{constructor(){super(...arguments),this.node=a.xF.createDivWithClass("gedit-selector-box-layer"),this.selectorBox=this.createDOMCache("gedit-selector-box"),this.selectorBoxBlock=this.createDOMCache("gedit-selector-box-block"),this.selectboxDragger=new s.s5({onDragStart:e=>{this.selectConfigEntity.clearSelectedNodes();let n=this.playgroundConfigEntity.getPosFromMouseEvent(e);this.transformVisibles=this.flowDocument.getRenderDatas(o.eG,!1).filter(e=>{let{entity:r}=e;return r.originParent?this.nodeSelectable(r,n)&&this.nodeSelectable(r.originParent,n):this.nodeSelectable(r,n)}),this.selectorBoxConfigEntity.setDragInfo(e),this.updateSelectorBox(this.selectorBoxConfigEntity)},onDrag:e=>{this.selectorBoxConfigEntity.setDragInfo(e),this.selectConfigEntity.selectFromBounds(this.selectorBoxConfigEntity.toRectangle(this.playgroundConfigEntity.finalScale),this.transformVisibles),this.updateSelectorBox(this.selectorBoxConfigEntity)},onDragEnd:e=>{this.selectorBoxConfigEntity.setDragInfo(e),this.transformVisibles.length=0,this.updateSelectorBox(this.selectorBoxConfigEntity)}})}onReady(){this.options.canSelect||(this.options.canSelect=e=>{let n=e.target;return n===this.pipelineNode||n===this.playgroundNode}),this.toDispose.pushAll([this.selectConfigEntity.onConfigChanged(()=>{this.selectionService.selection=this.selectConfigEntity.selectedNodes}),this.selectionService.onSelectionChanged(()=>{let e=this.selectionService.selection.filter(e=>e instanceof o.GA);this.selectConfigEntity.selectedNodes=e})]),this.listenPlaygroundEvent("mousedown",e=>{if(this.isEnabled()&&(!this.options.canSelect||this.options.canSelect(e,this.selectorBoxConfigEntity)))return this.editorStateConfig.getCurrentState()===s.yy.STATE_MOUSE_FRIENDLY_SELECT&&this.selectConfigEntity.clearSelectedNodes(),this.selectboxDragger.start(e.clientX,e.clientY,this.config),!0},s.nn.BASE_LAYER)}isEnabled(){let e=this.editorStateConfig.getCurrentState(),n=e===s.yy.STATE_MOUSE_FRIENDLY_SELECT;return!this.config.disabled&&!this.config.readonly&&(n&&this.editorStateConfig.isPressingShift||e===s.yy.STATE_SELECT)&&!this.selectorBoxConfigEntity.disabled}dispose(){this.selectorBox.dispose(),this.selectorBoxBlock.dispose(),super.dispose()}updateSelectorBox(e){let n=this.selectorBox.get(),r=this.selectorBoxBlock.get();!this.isEnabled()&&e.isMoving&&this.selectorBoxConfigEntity.collapse(),this.isEnabled()&&e.isMoving?(n.setStyle({display:"block",left:e.position.x,top:e.position.y,width:e.size.width,height:e.size.height}),r.setStyle({display:"block",left:e.position.x-10,top:e.position.y-10,width:e.size.width+20,height:e.size.height+20})):(n.setStyle({display:"none"}),r.setStyle({display:"none"}))}nodeSelectable(e,n){let r=e.getNodeMeta().selectable;return"function"==typeof r?r(e,n):r}};g([(0,h.f3)(o.pQ)],ei.prototype,"flowDocument",2),g([(0,h.f3)(s.Lk)],ei.prototype,"contextMenuService",2),g([(0,s.O0)(s.ER)],ei.prototype,"playgroundConfigEntity",2),g([(0,h.f3)(s.z2)],ei.prototype,"selectionService",2),g([(0,s.O0)(C)],ei.prototype,"selectorBoxConfigEntity",2),g([(0,s.O0)(x)],ei.prototype,"selectConfigEntity",2),g([(0,s.O0)(s.Zs)],ei.prototype,"editorStateConfig",2),ei=g([(0,h.b2)()],ei);var eo=class extends s.mh{constructor(){super(...arguments),this.node=a.xF.createDivWithClass("gedit-selector-bounds-layer"),this.selectBoundsBackground=a.xF.createDivWithClass("gedit-selector-bounds-background")}onReady(){this.node.style.zIndex="20";let{firstChild:e}=this.pipelineNode;void 0!==this.options.boundsPadding&&(this.flowSelectConfigEntity.boundsPadding=this.options.boundsPadding),this.options.backgroundClassName&&this.selectBoundsBackground.classList.add(this.options.backgroundClassName);let n=a.xF.createDivWithClass("gedit-playground-layer");n.appendChild(this.selectBoundsBackground),this.pipelineNode.insertBefore(n,e)}onZoom(e){this.node.style.transform=`scale(${e})`,this.selectBoundsBackground.parentElement.style.transform=`scale(${e})`}onViewportChange(){this.render()}isEnabled(){return this.editorStateConfig.getCurrentState()===s.yy.STATE_SELECT}render(){let{ignoreOneSelect:e,ignoreChildrenLength:n,SelectorBoxPopover:r,disableBackground:i,CustomBoundsRenderer:o}=this.options,s=this.flowSelectConfigEntity.getSelectedBounds(),l=this.flowSelectConfigEntity.selectedNodes,h=this.selectBoundsBackground,c=!this.selectorBoxConfigEntity.isStart;if(0===s.width||0===s.height||e&&1===l.length&&(n||l[0].childrenLength<=1))return a.xF.setStyle(h,{display:"none"}),u.createElement(u.Fragment,null);if(o)return u.createElement(o,{bounds:s,config:this.config,flowSelectConfig:this.flowSelectConfigEntity,commandRegistry:this.commandRegistry});let d={display:"block",left:s.left,top:s.top,width:s.width,height:s.height};i||a.xF.setStyle(h,d);let p="gedit-selector-bounds-foreground";this.options.foregroundClassName&&(p+=" "+this.options.foregroundClassName);let f=r||this.rendererRegistry.tryToGetRendererComponent("selector-box-popover")?.renderer;return c&&f?u.createElement(f,{bounds:s,config:this.config,flowSelectConfig:this.flowSelectConfigEntity,commandRegistry:this.commandRegistry},u.createElement("div",{className:p,style:d})):u.createElement("div",{className:p,style:d})}};g([(0,h.f3)(T)],eo.prototype,"rendererRegistry",2),g([(0,h.f3)(s.Ho)],eo.prototype,"commandRegistry",2),g([(0,s.O0)(x)],eo.prototype,"flowSelectConfigEntity",2),g([(0,s.O0)(s.Zs)],eo.prototype,"editorStateConfig",2),g([(0,s.O0)(C)],eo.prototype,"selectorBoxConfigEntity",2),g([(0,s.aI)(o.GA,o.Lz)],eo.prototype,"renderStates",2),g([(0,s.aI)(o.GA,o.eG)],eo.prototype,"_transforms",2),eo=g([(0,h.b2)()],eo);var es=class extends s.mh{constructor(){super(...arguments),this.node=a.xF.createDivWithClass("gedit-context-menu-layer"),this.nodeRef=u.createRef()}isEnabled(){let e=this.editorStateConfig.getCurrentState();return!this.config.disabled&&!this.config.readonly&&e===s.yy.STATE_SELECT&&!this.selectorBoxConfigEntity.disabled}onReady(){this.node.style.zIndex="30",this.node.style.display="block",this.toDispose.pushAll([this.listenPlaygroundEvent("contextmenu",e=>{if(!this.isEnabled())return;this.contextMenuService.rightPanelVisible=!0;let n=this.flowSelectConfigEntity.getSelectedBounds();if(0===n.width||0===n.height)return;e.stopPropagation(),e.preventDefault(),this.nodeRef.current?.setVisible(!0);let r=e.clientX-(this.pipelineNode.offsetLeft||0)-this.playgroundConfigEntity.config.clientX,i=e.clientY-(this.pipelineNode.offsetTop||0)-this.playgroundConfigEntity.config.clientY;this.node.style.left=`${r}px`,this.node.style.top=`${i}px`},s.nn.BASE_LAYER),this.listenPlaygroundEvent("mousedown",()=>{this.nodeRef.current?.setVisible(!1),this.contextMenuService.rightPanelVisible=!1})])}onScroll(){this.nodeRef.current?.setVisible(!1)}onZoom(){this.nodeRef.current?.setVisible(!1)}dispose(){super.dispose()}renderCommandMenus(){return this.commandRegistry.commands.filter(e=>"SELECTOR_BOX"===e.category).map(e=>{let n=this.rendererRegistry.getRendererComponent(e.icon||e.id)?.renderer;return u.createElement(n,{key:e.id,command:e,isContextMenu:!0,disabled:!this.commandRegistry.isEnabled(e.id),onClick:n=>this.commandRegistry.executeCommand(e.id,n)})}).filter(e=>e)}render(){let e=this.rendererRegistry.getRendererComponent("context-menu-popover").renderer;return u.createElement(e,{ref:this.nodeRef,content:this.renderCommandMenus()})}};g([(0,h.f3)(s.Ho)],es.prototype,"commandRegistry",2),g([(0,h.f3)(T)],es.prototype,"rendererRegistry",2),g([(0,h.f3)(s.Lk)],es.prototype,"contextMenuService",2),g([(0,s.O0)(x)],es.prototype,"flowSelectConfigEntity",2),g([(0,h.f3)(s.z2)],es.prototype,"selectionService",2),g([(0,s.O0)(s.ER)],es.prototype,"playgroundConfigEntity",2),g([(0,s.O0)(s.Zs)],es.prototype,"editorStateConfig",2),g([(0,s.O0)(C)],es.prototype,"selectorBoxConfigEntity",2),es=g([(0,h.b2)()],es);var ea=class extends s.mh{getInitScroll(){return this.document.layout.getInitScroll(this.pipelineNode.getBoundingClientRect())}onReady(){let e=()=>this.getInitScroll();this.config.updateConfig(e()),this.config.addScrollLimit(n=>(function(e,n,r,i){e={...e};let o=r.config,s={scrollX:o.scrollX,scrollY:o.scrollY};if(0===n.length||0===o.width||0===o.height)return e;let l=Q(e,r);if(!n.find(e=>a.Ae.isViewportVisible(e,l))){let e=Q(s,r);return n.find(n=>a.Ae.isViewportVisible(n,e))?s:i()}return e})(n,[this.document.root.getData(o.eG).bounds],this.config,e))}};g([(0,h.f3)(o.pQ)],ea.prototype,"document",2),ea=g([(0,h.b2)()],ea);var el=new h.nZ(e=>{e(T).toSelf().inSingletonScope(),e(N).toSelf().inSingletonScope()})},4969:function(e,n,r){"use strict";r.d(n,{Kg:()=>c,cL:()=>f});var i=r(8319),o=r(4210),s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=(e,n,r,i)=>{for(var o,l=i>1?void 0:i?a(n,r):n,h=e.length-1;h>=0;h--)(o=e[h])&&(l=(i?o(n,r,l):o(l))||l);return i&&l&&s(n,r,l),l},h=Symbol("ShortcutsContribution"),c=class{constructor(){this.shortcutsHandlers=[]}addHandlers(...e){e.forEach(e=>{this.commandRegistry.getCommand(e.commandId)?this.commandRegistry.registerHandler(e.commandId,{execute:e.execute,isEnabled:e.isEnabled}):this.commandRegistry.registerCommand({id:e.commandId,...e.commandDetail||{}},{execute:e.execute,isEnabled:e.isEnabled})}),this.shortcutsHandlers.unshift(...e)}addHandlersIfNotFound(...e){e.forEach(e=>{this.has(e.commandId)||this.addHandlers(e)})}has(e){return this.shortcutsHandlers.some(n=>n.commandId===e)}init(){this.contribs?.forEach(e=>e.registerShortcuts(this))}};l([(0,o.f3)(i.Qc),(0,o.t6)(h),(0,o.jt)()],c.prototype,"contribs",2),l([(0,o.f3)(i.Ho)],c.prototype,"commandRegistry",2),l([(0,o.zY)()],c.prototype,"init",1),c=l([(0,o.b2)()],c);var u={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:/(mac|iphone|ipod|ipad)/i.test("undefined"!=typeof navigator?navigator?.platform:"")?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,"=":187,comma:188,dash:189,"-":189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},d={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>"keyup"===e.type?u.meta.includes(e.keyCode):e.metaKey},p=class extends i.mh{onReady(){this.shortcuts.addHandlersIfNotFound({commandId:i.mY.Default.ZOOM_IN,shortcuts:["meta =","ctrl ="],execute:()=>{this.config.zoomin()}},{commandId:i.mY.Default.ZOOM_OUT,shortcuts:["meta -","ctrl -"],execute:()=>{this.config.zoomout()}}),this.toDispose.pushAll([this.listenPlaygroundEvent("keydown",e=>{this.isFocused&&e.target===this.playgroundNode&&this.shortcuts.shortcutsHandlers.some(n=>{if(n.shortcuts.some(n=>(function(e,n,r=!0){if(!e.key||!n)return!1;let i=n.split(/\s+/),o=0;for(let n of i){let r=d[n],i=u[n.toLowerCase()];(r&&r(e)||i&&i===e.keyCode)&&o++}return r?o===i.length&&function(e){let n=Object.keys(d).reduce((n,r)=>d[r](e)?n+1:n,0);return[16,17,18,91,92].includes(e.keyCode)?n:n+1}(e)===i.length:o===i.length})(e,n))&&(!n.isEnabled||n.isEnabled(e)))return n.execute(e),e.preventDefault(),!0})})])}};p.type="ShortcutsLayer",l([(0,o.f3)(c)],p.prototype,"shortcuts",2),l([(0,o.f3)(i.z2)],p.prototype,"selection",2),p=l([(0,o.b2)()],p);var f=(0,i.M1)({onBind:({bind:e})=>{e(c).toSelf().inSingletonScope(),(0,i.yb)(e,h)},onInit:e=>{e.playground.registerLayer(p)},contributionKeys:[h]})},8336:function(e,n,r){"use strict";r.d(n,{Ae:()=>P,Cd:()=>R,Ct:()=>g,E9:()=>I,JA:()=>eC,JT:()=>d,K4:()=>J,KV:()=>e_,Of:()=>ec,Pq:()=>q,Q5:()=>Z,Qc:()=>eE,RZ:()=>c,S9:()=>eu,V_:()=>m,XJ:()=>f,Zp:()=>el,_b:()=>N,cO:()=>en,dG:()=>W,gE:()=>es,gw:()=>er,hY:()=>ed,i1:()=>ea,jl:()=>O,oN:()=>eb,pL:()=>b,r9:()=>ep,rM:()=>_,sI:()=>E,xF:()=>x,y3:()=>z,yb:()=>ex,z:()=>eh});var i,o,s,a,l,h,c,u,d,p,f,g,y,m,b,_,E,w,x,C=r(4517),S=r(4194),{PI:D}=Math,N=2*D,O=180/D,M=class e{constructor(e=0,n=0){this.x=e,this.y=n}sub(n){return new e(this.x-n.x,this.y-n.y)}dot(e){return this.x*e.x+this.y*e.y}},I=class e{constructor(e=0,n=0){this.x=e,this.y=n}clone(){return new e(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.x=this.x,e.y=this.y,e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}},T=I||(I={});function k(e,n,r){return{x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)}}T.EMPTY={x:0,y:0},T.getDistance=function(e,n){return Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2)},T.getMiddlePoint=function(e,n){return k(e,n,.5)},T.getRatioPoint=k,T.fixZero=function(e){return 0===e.x&&(e.x=0),0===e.y&&(e.y=0),e},T.move=function(e,n){return{x:e.x+(n.x||0),y:e.y+(n.y||0)}},T.moveDistanceToDirection=function(e,n,r){let i=n.x-e.x,o=n.y-e.y,s=0===i?0:Math.sqrt(r**2/(1+o**2/i**2)),a=0===i?r:Math.abs(s*o/i);return{x:e.x+(i>0?s:-s),y:e.y+(o>0?a:-a)}};var P=class e{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=1}static get EMPTY(){return new e(0,0,0,0)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}clone(){return new e(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return!(this.width<=0)&&!(this.height<=0)&&!!(e>=this.x)&&!!(e<=this.right)&&!!(n>=this.y)&&!!(n<=this.bottom)}isEqual(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsRectangle(e){return e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this}fit(e){let n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(o-i,0),this}ceil(e=1,n=.001){let r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){let n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=o-i,this}get center(){return{x:this.x+this.width/2,y:this.y+this.height/2}}get rightBottom(){return{x:this.right,y:this.bottom}}get leftBottom(){return{x:this.left,y:this.bottom}}get rightTop(){return{x:this.right,y:this.top}}get leftTop(){return{x:this.left,y:this.top}}get bottomCenter(){return{x:this.x+this.width/2,y:this.bottom}}get topCenter(){return{x:this.x+this.width/2,y:this.top}}get rightCenter(){return{x:this.right,y:this.y+this.height/2}}get leftCenter(){return{x:this.left,y:this.y+this.height/2}}update(e){return e(this)}get crossDistance(){return I.getDistance(this.leftTop,this.rightBottom)}toStyleStr(){return`left: ${this.x}px; top: ${this.y}px; width: ${this.width}px; height: ${this.height}px;`}withPadding(e){return this.x-=e.left,this.y-=e.top,this.width+=e.left+e.right,this.height+=e.top+e.bottom,this}withoutPadding(e){return this.x+=e.left,this.y+=e.top,this.width=this.width-e.left-e.right,this.height=this.height-e.top-e.bottom,this}withHeight(e){return this.height=e,this}clearSpace(){return this.width=0,this.height=0,this}},A=P||(P={});function L(e){let n=A.EMPTY.clone();if(!e.length)return n;let r=[],i=[],o=[],s=[];e.forEach(e=>{r.push(e.left),o.push(e.right),s.push(e.bottom),i.push(e.top)});let a=Math.min.apply(Math,r),l=Math.max.apply(Math,o),h=Math.min.apply(Math,i),c=Math.max.apply(Math,s);return n.x=a,n.width=l-a,n.y=h,n.height=c-h,n}A.align=function(e,n){if(e.length<=1)return e;switch(n){case"align-bottom":let r=Math.max(...e.map(e=>e.bottom));e.forEach(e=>{e.y=r-e.height});break;case"align-center":let i=L(e).center.x;e.forEach(e=>{e.x=i-e.width/2});break;case"align-left":let o=Math.min(...e.map(e=>e.left));e.forEach(e=>{e.x=o});break;case"align-middle":let s=L(e).center.y;e.forEach(e=>{e.y=s-e.height/2});break;case"align-right":let a=Math.max(...e.map(e=>e.right));e.forEach(e=>{e.x=a-e.width});break;case"align-top":let l=Math.min(...e.map(e=>e.top));e.forEach(e=>{e.y=l});break;case"distribute-horizontal":if(e.length<=2)break;let h=e.slice().sort((e,n)=>e.left-n.left),c=L(e),u=e.reduce((e,n)=>e-n.width,c.width)/(e.length-1);h.reduce((e,n)=>(n.x=e,e+n.width+u),c.x);break;case"distribute-vertical":if(e.length<=2)break;let d=e.slice().sort((e,n)=>e.top-n.top),p=L(e),f=e.reduce((e,n)=>e-n.height,p.height)/(e.length-1);d.reduce((e,n)=>(n.y=e,e+n.height+f),p.y)}return e},A.enlarge=L,A.intersects=function(e,n,r){let i=e.left,o=e.top,s=e.right,a=e.bottom,l=n.left,h=n.top,c=n.right,u=n.bottom;return"horizontal"===r?s>l&&i<c:"vertical"===r?a>h&&o<u:!!(s>l)&&!!(i<c)&&!!(a>h)&&!!(o<u)},A.intersectsWithRotation=function(e,n,r,i){let o=new j(e.center,e.width,e.height,n),s=new j(r.center,r.width,r.height,i),a=o.centerPoint.sub(s.centerPoint),l=o.axesX;if(o.getProjectionRadius(l)+s.getProjectionRadius(l)<=Math.abs(a.dot(l)))return!1;let h=o.axesY;if(o.getProjectionRadius(h)+s.getProjectionRadius(h)<=Math.abs(a.dot(h)))return!1;let c=s.axesX;if(o.getProjectionRadius(c)+s.getProjectionRadius(c)<=Math.abs(a.dot(c)))return!1;let u=s.axesY;return!(o.getProjectionRadius(u)+s.getProjectionRadius(u)<=Math.abs(a.dot(u)))},A.isViewportVisible=function(e,n,r=0,i=!1){return i?n.containsRectangle(e):0===r?A.intersects(e,n):A.intersectsWithRotation(e,r,n,0)},A.setViewportVisible=function(e,n,r=0){let{left:i,right:o,top:s,bottom:a,width:l,height:h}=e,{left:c,right:u,top:d,bottom:p}=n;return i<=c?e.x=c+r:o>=u&&(e.x=u-r-l),s<=d?e.y=d+r:a>=p&&(e.y=p-r-h),e},A.createRectangleWithTwoPoints=function(e,n){let r=e.x<n.x?e.x:n.x,i=e.y<n.y?e.y:n.y;return new A(r,i,Math.abs(e.x-n.x),Math.abs(e.y-n.y))};var j=class{constructor(e,n,r,i){this.width=n,this.height=r,this.centerPoint=new M(e.x,e.y),this.axesX=new M(Math.cos(i),Math.sin(i)),this.axesY=new M(-1*this.axesX.y,this.axesX.x)}getProjectionRadius(e){return this.width/2*Math.abs(e.dot(this.axesX))+this.height/2*Math.abs(e.dot(this.axesY))}},R=class e{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=2}clone(){return new e(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;let r=this.radius*this.radius,i=this.x-e,o=this.y-n;return i*=i,o*=o,i+o<=r}getBounds(){return new P(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},z=class e{constructor(e=1,n=0,r=0,i=1,o=0,s=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s,this.array=null}static get IDENTITY(){return new e}static get TEMP_MATRIX(){return new e}fromArray(e){return e.length<6||(this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]),this}set(e,n,r,i,o,s){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s,this}toArray(e,n){this.array||(this.array=new Float32Array(9));let r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0),r[8]=1,r}apply(e,n){let{x:r,y:i}=e;return(n=n||{x:0,y:0}).x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||{x:0,y:0};let r=1/(this.a*this.d+-(this.c*this.b)),{x:i}=e,{y:o}=e;return n.x=this.d*r*i+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*o+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){let n=Math.cos(e),r=Math.sin(e),i=this.a,o=this.c,s=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=o*n-this.d*r,this.d=o*r+this.d*n,this.tx=s*n-this.ty*r,this.ty=s*r+this.ty*n,this}append(e){let n=this.a,r=this.b,i=this.c,o=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*o,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*o,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*o+this.ty,this}setTransform(e,n,r,i,o,s,a,l,h){return this.a=Math.cos(a+h)*o,this.b=Math.sin(a+h)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){let n=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){let n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){let{a:n}=this,{b:r}=this,{c:i}=this,{d:o}=this,s=-Math.atan2(-i,o),a=Math.atan2(r,n),l=Math.abs(s+a);return l<1e-5||1e-5>Math.abs(N-l)?(e.rotation=a,e.skew.x=0,e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=a),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+o*o),e.position.x=this.tx,e.position.y=this.ty,e}invert(){let e=this.a,n=this.b,r=this.c,i=this.d,o=this.tx,s=e*i-n*r;return this.a=i/s,this.b=-n/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-i*o)/s,this.ty=-(e*this.ty-n*o)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}isSimple(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d}clone(){let n=new e;return n.a=this.a,n.b=this.b,n.c=this.c,n.d=this.d,n.tx=this.tx,n.ty=this.ty,n}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},V=class e{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}clone(n=this.cb,r=this.scope){return new e(n,r,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.x=this._x,e.y=this._y,e}equals(e){return e.x===this._x&&e.y===this._y}},F=class{constructor(){this.worldTransform=new z,this.localTransform=new z,this.position=new V(this.onChange,this,0,0),this.scale=new V(this.onChange,this,1,1),this.pivot=new V(this.onChange,this,0,0),this.skew=new V(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){let e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){let n=this.localTransform;if(this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){let r=e.worldTransform,i=this.worldTransform;i.a=n.a*r.a+n.b*r.c,i.b=n.a*r.b+n.b*r.d,i.c=n.c*r.a+n.d*r.c,i.d=n.c*r.b+n.d*r.d,i.tx=n.tx*r.a+n.ty*r.c+r.tx,i.ty=n.tx*r.b+n.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};function $(e,n,r){let i=r-n;return n+((e-n)%i+i)%i}F.IDENTITY=new F,(i=c||(c={})).wrap=function(e){return $(e,-Math.PI,Math.PI)},i.wrapDegrees=function(e){return $(e,-180,180)},i.betweenPoints=function(e,n,r={x:0,y:0}){let i={x:e.x-r.x,y:e.y-r.y},o={x:n.x-r.x,y:n.y-r.y};return Math.atan2(i.x*o.y-i.y*o.x,i.x*o.x+i.y*o.y)};var{keys:B}=Object;Object.prototype.hasOwnProperty;var H=(e,n)=>B(e).forEach(r=>n(e[r],r)),K=(e,n,r={})=>B(e).reduce((r,i)=>n(r,e[i],i),r),U=(e,n)=>K(e,(e,r,i)=>Object.assign(e,{[i]:n(r,i)})),W=()=>{};Object.prototype.toString;var G=Object.freeze({dispose:W});(u||(u={})).None=()=>G;var Y=class e{constructor(){this._disposed=!1}get event(){return this._event||(this._event=(n,r)=>{if(this._disposed)return G;this._listeners||(this._listeners=[]);let i=r?n.bind(r):n;this._listeners.length>=e.LEAK_WARNING_THRESHHOLD&&console.warn(`[Emitter] Listeners length >= ${e.LEAK_WARNING_THRESHHOLD}`),this._listeners.push(i);let o={dispose:()=>{if(o.dispose=W,!this._disposed){let e=this._listeners.indexOf(i);-1!==e&&this._listeners.splice(e,1)}}};return o}),this._event}fire(e){this._listeners&&this._listeners.forEach(n=>n(e))}get disposed(){return this._disposed}dispose(){this._listeners&&(this._listeners=void 0),this._disposed=!0}};Y.LEAK_WARNING_THRESHHOLD=175;var Z=Y,X=d||(d={});function Q(e){return{dispose:e}}X.is=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.dispose},X.create=Q,X.NULL=Object.freeze(Q(()=>{}));var q=class{constructor(){this.toDispose=new J}dispose(){this.toDispose.dispose()}get disposed(){return this.toDispose.disposed}get onDispose(){return this.toDispose.onDispose}},J=class{constructor(...e){this.disposables=[],this.onDisposeEmitter=new Z,this._disposed=!1,e.forEach(e=>this.push(e))}get onDispose(){return this.onDisposeEmitter.event}get disposed(){return this._disposed}dispose(){this.disposed||(this._disposed=!0,this.disposables.slice().reverse().forEach(e=>{try{e.dispose()}catch(e){console.error(e)}}),this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}push(e){let n;if(this.disposed)return d.NULL;let{disposables:r}=this;if(r.find(n=>n._origin===e))return d.NULL;let i=d.create(()=>{let e=r.indexOf(n);-1!==e&&r.splice(e,1)});return n={dispose:()=>{i.dispose(),e.dispose()},_origin:e},r.push(n),i}pushAll(e){return e.map(e=>this.push(e))}},ee=Object.freeze(function(e,n){let r=setTimeout(e.bind(n),0);return{dispose(){clearTimeout(r)}}});(o=p||(p={})).isCancellationToken=function(e){return e===o.None||e===o.Cancelled||e instanceof et||!!e&&"object"==typeof e&&"boolean"==typeof e.isCancellationRequested&&"function"==typeof e.onCancellationRequested},o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:u.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ee});var et=class{constructor(){this._isCancelled=!1}cancel(){!this._isCancelled&&(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ee:(this._emitter||(this._emitter=new Z),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},en=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};function er(e,n=p.None){let r=new en,i=setTimeout(()=>r.resolve(),e);return n.onCancellationRequested(()=>{clearTimeout(i),r.reject(Error("Cancelled"))}),r.promise}var ei=f||(f={});function eo(e,n,r=1,i=!0){if(e===n)return!1;if(0===r||"object"!=typeof e||"object"!=typeof n)return e!==n;let o=Object.keys(n);if(!i){let n=Object.keys(e);if(o.length!==n.length)return!0}for(let s=0,a=o.length;s<a;s++){let a=o[s];if(eo(e[a],n[a],r-1,i))return!0}return!1}ei.isChanged=eo,ei.isDeepChanged=function(e,n,r){return eo(e,n,1/0,r)},ei.isArrayShallowChanged=function(e,n){if(e.length!==n.length)return!0;for(let r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!0;return!1},(s=g||(g={})).create=function(e,n={}){let r=[];return{getFromCache:()=>r,getMore(i,o=!0){if(i===r.length);else if(i>r.length){let n=i-r.length;for(;n>0;)r.push(e()),n--}else if(o){let e=n.deleteLimit??0;r.length-i>e&&r.splice(i).forEach(e=>e.dispose&&e.dispose())}return r.slice(0,i)},getMoreByItemKeys(n){let i=[],o=new Map;return r.forEach(e=>{n.find(n=>n.key===e.key)?o.set(e.key,e):e.dispose?.()}),n.forEach(n=>{if(!n.key)throw Error("getMoreByItemKeys need a key");let r=o.get(n.key);r?i.push(r):i.push(e(n))}),r=i},getMoreByItems(n){let i=[],o=new Map;return r.forEach(e=>{n.find(n=>n===e.key)?o.set(e.key,e):e.dispose?.()}),n.forEach(n=>{let r=o.get(n);r?i.push(r):i.push({...e(n),key:n})}),r=i},get:()=>(r.length>0||r.push(e()),r[0]),getFromCacheByKey:e=>r.find(n=>n.key===e),dispose(){r.forEach(e=>e.dispose&&e.dispose()),r.length=0},clear(){this.dispose()}}},s.assign=function(e,n){return Object.assign(e,n)},s.createShortCache=function(e=1e3){let n,r;function i(){r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,n=void 0},e)}return{get:e=>(n||(n=e()),i(),n)}},s.createWeakCache=function(){let e=new WeakMap;return{get:n=>e.get(n),save:(n,r)=>e.set(n,r),isChanged:(n,r)=>f.isChanged(e.get(n),r)}},(y||(y={})).create=function(e,n,r){return{type:"object",properties:{...n?.properties,...e},mixinDefaults:{...n?.mixinDefaults,...r}}},(a=m||(m={})).createDefault=function e(n,r,i){r={...n.mixinDefaults,...r};let o=i?`${i}.`:"";return n.properties?U(n.properties,(n,i)=>{let s=o+i;return r&&void 0!==r[s]?r[s]:e(n,r,s)}):"function"==typeof n.default?n.default():n.default},a.isBaseType=function(e){return"string"===e.type||"float"===e.type||"integer"===e.type||"boolean"===e.type||"enum"===e.type||"color"===e.type||"range"===e.type};var es={label:"大小",properties:{width:{label:"宽",default:0,type:"float"},height:{label:"高",default:0,type:"float"},locked:{label:"等比锁",default:!1,type:"boolean"}},type:"object"},ea={label:"原点",description:"用于设置旋转的中心位置",properties:{x:{label:"x",default:.5,type:"float"},y:{label:"y",default:.5,type:"float"}},type:"object"},el={label:"位置",properties:{x:{label:"x",default:0,type:"float"},y:{label:"y",default:0,type:"float"}},type:"object"},eh={label:"旋转",type:"float",default:0},ec={label:"缩放",properties:{x:{label:"x",default:1,type:"float"},y:{label:"y",default:1,type:"float"}},type:"object"},eu={label:"倾斜",properties:{x:{label:"x",default:0,type:"float"},y:{label:"y",default:0,type:"float"}},type:"object"},ed={properties:{position:el,size:es,origin:ea,scale:ec,skew:eu,rotation:eh},type:"object"};(l=b||(b={})).createDefault=function(){return m.createDefault(ed)},l.toJSON=function(e){return{position:{x:e.position.x,y:e.position.y},size:{width:e.size.width,height:e.size.height,locked:e.size.locked},origin:{x:e.origin.x,y:e.origin.y},scale:{x:e.scale.x,y:e.scale.y},skew:{x:e.skew.x,y:e.skew.y},rotation:e.rotation}},l.getDelta=function(e,n){return{position:{x:n.position.x-e.position.x,y:n.position.y-e.position.y},size:{width:n.size.width-e.size.width,height:n.size.height-e.size.height},origin:{x:n.origin.x-e.origin.x,y:n.origin.y-e.origin.y},scale:{x:n.scale.x-e.scale.x,y:n.scale.y-e.scale.y},skew:{x:n.skew.x-e.skew.x,y:n.skew.y-e.skew.y},rotation:n.rotation-e.rotation}},l.mergeDelta=function(e,n,r){let i=void 0!==r?e=>Math.round(100*e)/100:e=>e;return{position:{x:i(n.position.x+e.position.x),y:i(n.position.y+e.position.y)},size:{width:i(n.size.width+e.size.width),height:i(n.size.height+e.size.height),locked:e.size.locked},origin:{x:i(n.origin.x+e.origin.x),y:i(n.origin.y+e.origin.y)},scale:{x:i(n.scale.x+e.scale.x),y:i(n.scale.y+e.scale.y)},skew:{x:i(n.skew.x+e.skew.x),y:i(n.skew.y+e.skew.y)},rotation:n.rotation+e.rotation}},l.is=function(e){return e&&e.position&&e.size&&"number"==typeof e.position.x&&"number"==typeof e.size.width},(h=_||(_={})).fixSize=function(e,n){if(e.width<=n.width&&e.height<=n.height)return 1;let r=e.width/n.width,i=e.height/n.height;return 1/(r>i?r:i)},h.coverSize=function(e,n){let r=e.width/n.width,i=e.height/n.height;return 1/(r<i?r:i)},h.empty=function(){return{width:0,height:0}},(E||(E={})).empty=()=>({left:0,right:0,top:0,bottom:0}),(w||(w={})).isEmpty=function(e){return!e||void 0===e.topLeft&&void 0===e.topRight&&void 0===e.bottomLeft&&void 0===e.bottomRight};var ep={label:"透明度",type:"float",min:0,max:1,default:1},ef=e=>e.replace(/([A-Z])/,e=>`-${e.toLowerCase()}`),eg=x||(x={});function ey(e){return`${e}px`}function em(e,...n){let r=document.createElement(e);return n.length>0&&(r.className=(0,C.Z)(n)),r}eg.toPixel=ey,eg.fromPercent=function(e){return parseFloat(e.substring(0,e.length-1))},eg.toPercent=function(e){return`${e}%`},eg.enableEvent=function(e){e.style.pointerEvents="all"},eg.disableEvent=function(e){e.style.pointerEvents="none"},eg.createElement=em,eg.createDivWithClass=function(...e){return em("div",...e)},eg.addClass=function(e,...n){e.className=(0,C.Z)(n.concat(e.className.split(" ")))},eg.delClass=function(e,...n){n.forEach(n=>{e.classList.remove(n)}),e.className=e.classList.toString()},eg.coverClass=function(e,...n){e.className=(0,C.Z)(n)},eg.clearChildren=function(e){e.innerHTML=""},eg.translatePercent=function(e,n,r){e.style.transform=`translate(${n}%, ${r}%)`},eg.translateXPercent=function(e,n){e.style.transform=`translateX(${n}%)`},eg.translateYPercent=function(e,n){e.style.transform=`translateY(${n}%)`},eg.setStyle=function(e,n){let r=[];H(n,(e,n)=>{void 0!==e&&("number"==typeof e&&"opacity"!==n&&"zIndex"!==n&&"scale"!==n&&(e=ey(e)),r.push(`${ef(n)}:${e}`))});let i=e.getAttribute("style"),o=r.join(";");i!==o&&e.setAttribute("style",o)},eg.classNameWithPrefix=function(e){return(n,r)=>(0,C.Z)(n.split(/\s+/).map(n=>`${e}-${n}`).join(" "),r)},eg.addStandardDisposableListener=function(e,n,r,i){return e.addEventListener(n,r,i),d.create(()=>{e.removeEventListener(n,r)})},eg.createDOMCache=function(e,n,r){return g.create(()=>{let i="string"==typeof n?eg.createDivWithClass(n):n();return r&&(i.innerHTML=r),e.appendChild(i),Object.assign(i,{dispose:()=>{let{parentNode:e}=i;e&&e.removeChild(i)},setStyle:e=>{eg.setStyle(i,e)}})})};var ev=0;function eb(){return ev===Number.MAX_SAFE_INTEGER&&(ev=0),ev++}function e_(e,n,r){e(n).toSelf().inSingletonScope(),r.forEach(r=>e(r).toService(n))}var eE=Symbol("ContributionProvider"),ew=class{constructor(e,n){this.container=e,this.identifier=n}forEach(e){this.getContributions().forEach(e)}getContributions(){if(!this.services){let e=[],{container:n}=this;if(n.isBound(this.identifier))try{e.push(...n.getAll(this.identifier))}catch(e){console.error(e)}this.services=e}return this.services}};function ex(e,n){e(eE).toDynamicValue(e=>new ew(e.container,n)).inSingletonScope().whenTargetNamed(n)}function eC(e){let[,n]=(0,S.useState)(e);return(0,S.useCallback)(e=>n(void 0!==e?e:{}),[])}new class{isDevEnv(){return!1}info(...e){if(this.isDevEnv())return console.info(e)}log(...e){if(this.isDevEnv())return console.log(...e)}error(...e){return console.error(...e)}warn(...e){return console.warn(...e)}}},4428:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){function n(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o,s=e.length;if(0===s)return -1;r=r<0?Math.max(0,r+s):Math.min(r,s-1),o=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<r?i+1+(s-r):i-r+1;for(var a=0;a<o;++a){var l=(r+a)%s;if(e[l]===n)return l}return -1}function r(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var o,s=e.length;if(0===s)return -1;o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?r+1+(s-i):r-i+1;for(var a=0;a<o;++a){var l=(r-a+s)%s;if(e[l]===n)return l}return -1}function i(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o,s=e.length;if(0===s)return -1;r=r<0?Math.max(0,r+s):Math.min(r,s-1),o=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<r?i+1+(s-r):i-r+1;for(var a=0;a<o;++a){var l=(r+a)%s;if(n(e[l],l))return l}return -1}function o(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var o,s=e.length;if(0===s)return -1;o=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?r+1+(s-i):r-i+1;for(var a=0;a<o;++a){var l=(r-a+s)%s;if(n(e[l],l))return l}return -1}function s(e,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(!(i<=1))for(n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=r<0?Math.max(0,r+i):Math.min(r,i-1);n<r;){var o=e[n],s=e[r];e[n++]=s,e[r--]=o}}function a(e,n){var r=e.length;if(n<0&&(n+=r),!(n<0)&&!(n>=r)){for(var i=e[n],o=n+1;o<r;++o)e[o-1]=e[o];return e.length=r-1,i}}e.firstIndexOf=n,e.lastIndexOf=r,e.findFirstIndex=i,e.findLastIndex=o,e.findFirstValue=function(e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=-1);var s=i(e,n,r,o);return -1!==s?e[s]:void 0},e.findLastValue=function(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var s=o(e,n,r,i);return -1!==s?e[s]:void 0},e.lowerBound=function(e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var s=e.length;if(0===s)return 0;for(var a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),l=(o=o<0?Math.max(0,o+s):Math.min(o,s-1))-i+1;l>0;){var h=l>>1,c=a+h;0>r(e[c],n)?(a=c+1,l-=h+1):l=h}return a},e.upperBound=function(e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var s=e.length;if(0===s)return 0;for(var a=i=i<0?Math.max(0,i+s):Math.min(i,s-1),l=(o=o<0?Math.max(0,o+s):Math.min(o,s-1))-i+1;l>0;){var h=l>>1,c=a+h;r(e[c],n)>0?l=h:(a=c+1,l-=h+1)}return a},e.shallowEqual=function(e,n,r){if(e===n)return!0;if(e.length!==n.length)return!1;for(var i=0,o=e.length;i<o;++i)if(r?!r(e[i],n[i]):e[i]!==n[i])return!1;return!0},e.slice=function(e,n){void 0===n&&(n={});var r,i=n.start,o=n.stop,s=n.step;if(void 0===s&&(s=1),0===s)throw Error("Slice `step` cannot be zero.");var a=e.length;void 0===i?i=s<0?a-1:0:i<0?i=Math.max(i+a,s<0?-1:0):i>=a&&(i=s<0?a-1:a),void 0===o?o=s<0?-1:a:o<0?o=Math.max(o+a,s<0?-1:0):o>=a&&(o=s<0?a-1:a),r=s<0&&o>=i||s>0&&i>=o?0:s<0?Math.floor((o-i+1)/s+1):Math.floor((o-i-1)/s+1);for(var l=[],h=0;h<r;++h)l[h]=e[i+h*s];return l},e.move=function(e,n,r){var i=e.length;if(!(i<=1)&&(n=n<0?Math.max(0,n+i):Math.min(n,i-1))!==(r=r<0?Math.max(0,r+i):Math.min(r,i-1))){for(var o=e[n],s=n<r?1:-1,a=n;a!==r;a+=s)e[a]=e[a+s];e[r]=o}},e.reverse=s,e.rotate=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(!(o<=1||(r=r<0?Math.max(0,r+o):Math.min(r,o-1))>=(i=i<0?Math.max(0,i+o):Math.min(i,o-1)))){var a=i-r+1;if(n>0?n%=a:n<0&&(n=(n%a+a)%a),0!==n){var l=r+n;s(e,r,l-1),s(e,l,i),s(e,r,i)}}},e.fill=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o,s=e.length;if(0!==s){r=r<0?Math.max(0,r+s):Math.min(r,s-1),o=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<r?i+1+(s-r):i-r+1;for(var a=0;a<o;++a)e[(r+a)%s]=n}},e.insert=function(e,n,r){var i=e.length;n=n<0?Math.max(0,n+i):Math.min(n,i);for(var o=i;o>n;--o)e[o]=e[o-1];e[n]=r},e.removeAt=a,e.removeFirstOf=function(e,r,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var s=n(e,r,i,o);return -1!==s&&a(e,s),s},e.removeLastOf=function(e,n,i,o){void 0===i&&(i=-1),void 0===o&&(o=0);var s=r(e,n,i,o);return -1!==s&&a(e,s),s},e.removeAllOf=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(0===o)return 0;r=r<0?Math.max(0,r+o):Math.min(r,o-1),i=i<0?Math.max(0,i+o):Math.min(i,o-1);for(var s=0,a=0;a<o;++a)r<=i&&a>=r&&a<=i&&e[a]===n||i<r&&(a<=i||a>=r)&&e[a]===n?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=o-s),s},e.removeFirstWhere=function(e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=-1);var s,l=i(e,n,r,o);return -1!==l&&(s=a(e,l)),{index:l,value:s}},e.removeLastWhere=function(e,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var s,l=o(e,n,r,i);return -1!==l&&(s=a(e,l)),{index:l,value:s}},e.removeAllWhere=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(0===o)return 0;r=r<0?Math.max(0,r+o):Math.min(r,o-1),i=i<0?Math.max(0,i+o):Math.min(i,o-1);for(var s=0,a=0;a<o;++a)r<=i&&a>=r&&a<=i&&n(e[a],a)||i<r&&(a<=i||a>=r)&&n(e[a],a)?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=o-s),s}}(n.ArrayExt||(n.ArrayExt={}))},1028:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new o(i.iter(e.map(i.iter)))};var o=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source.clone());return n._active=this._active&&this._active.clone(),n._cloned=!0,this._cloned=!0,n},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var n=this._active.next();return void 0!==n?n:(this._active=void 0,this.next())},e}();n.ChainIterator=o},1753:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.empty=function(){return new r};var r=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();n.EmptyIterator=r},9544:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.enumerate=function(e,n){return void 0===n&&(n=0),new o(i.iter(e),n)};var o=function(){function e(e,n){this._source=e,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]},e}();n.EnumerateIterator=o},75:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.filter=function(e,n){return new o(i.iter(e),n)};var o=function(){function e(e,n){this._index=0,this._source=e,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source.clone(),this._fn);return n._index=this._index,n},e.prototype.next=function(){for(var e,n=this._fn,r=this._source;void 0!==(e=r.next());)if(n(e,this._index++))return e},e}();n.FilterIterator=o},9610:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.find=function(e,n){for(var r,o=0,s=i.iter(e);void 0!==(r=s.next());)if(n(r,o++))return r},n.findIndex=function(e,n){for(var r,o=0,s=i.iter(e);void 0!==(r=s.next());)if(n(r,o++))return o-1;return -1},n.min=function(e,n){var r=i.iter(e),o=r.next();if(void 0!==o){for(var s=o;void 0!==(o=r.next());)0>n(o,s)&&(s=o);return s}},n.max=function(e,n){var r=i.iter(e),o=r.next();if(void 0!==o){for(var s=o;void 0!==(o=r.next());)n(o,s)>0&&(s=o);return s}},n.minmax=function(e,n){var r=i.iter(e),o=r.next();if(void 0!==o){for(var s=o,a=o;void 0!==(o=r.next());)0>n(o,s)?s=o:n(o,a)>0&&(a=o);return[s,a]}}},668:function(e,n,r){"use strict";function i(e){for(var r in e)n.hasOwnProperty(r)||(n[r]=e[r])}Object.defineProperty(n,"__esModule",{value:!0}),i(r(4428)),i(r(1028)),i(r(1753)),i(r(9544)),i(r(75)),i(r(9610)),i(r(180)),i(r(8144)),i(r(7605)),i(r(9578)),i(r(2023)),i(r(3972)),i(r(9811)),i(r(1533)),i(r(5956)),i(r(7009)),i(r(211))},180:function(e,n){"use strict";function r(e){var n;return"function"==typeof e.iter?e.iter():new i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.iter=r,n.iterKeys=function(e){return new o(e)},n.iterValues=function(e){return new s(e)},n.iterItems=function(e){return new a(e)},n.iterFn=function(e){return new l(e)},n.each=function(e,n){for(var i,o=0,s=r(e);void 0!==(i=s.next());)if(!1===n(i,o++))return},n.every=function(e,n){for(var i,o=0,s=r(e);void 0!==(i=s.next());)if(!n(i,o++))return!1;return!0},n.some=function(e,n){for(var i,o=0,s=r(e);void 0!==(i=s.next());)if(n(i,o++))return!0;return!1},n.toArray=function(e){for(var n,i=0,o=[],s=r(e);void 0!==(n=s.next());)o[i++]=n;return o},n.toObject=function(e){for(var n,i=r(e),o={};void 0!==(n=i.next());)o[n[0]]=n[1];return o};var i=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}();n.ArrayIterator=i;var o=function(){function e(e,n){void 0===n&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source,this._keys);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},e}();n.KeyIterator=o;var s=function(){function e(e,n){void 0===n&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source,this._keys);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},e}();n.ValueIterator=s;var a=function(){function e(e,n){void 0===n&&(n=Object.keys(e)),this._index=0,this._source=e,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source,this._keys);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},e}();n.ItemIterator=a;var l=function(){function e(e){this._fn=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();n.FnIterator=l},8144:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.map=function(e,n){return new o(i.iter(e),n)};var o=function(){function e(e,n){this._index=0,this._source=e,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source.clone(),this._fn);return n._index=this._index,n},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();n.MapIterator=o},7605:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.range=function(e,n,r){return void 0===n?new i(0,e,1):void 0===r?new i(e,n,1):new i(e,n,r)};var r,i=function(){function e(e,n,i){this._index=0,this._start=e,this._stop=n,this._step=i,this._length=r.rangeLength(e,n,i)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._start,this._stop,this._step);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}();n.RangeIterator=i,(r||(r={})).rangeLength=function(e,n,r){return 0===r?1/0:e>n&&r>0||e<n&&r<0?0:Math.ceil((n-e)/r)}},9578:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.reduce=function(e,n,r){var o,s,a=0,l=i.iter(e),h=l.next();if(void 0===h&&void 0===r)throw TypeError("Reduce of empty iterable with no initial value.");if(void 0===h)return r;var c=l.next();if(void 0===c&&void 0===r)return h;if(void 0===c)return n(r,h,a++);for(o=n(void 0===r?h:n(r,h,a++),c,a++);void 0!==(s=l.next());)o=n(o,s,a++);return o}},2023:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.repeat=function(e,n){return new r(e,n)},n.once=function(e){return new r(e,1)};var r=function(){function e(e,n){this._value=e,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();n.RepeatIterator=r},3972:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.retro=function(e){var n;return"function"==typeof e.retro?e.retro():new r(e)};var r=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var n=new e(this._source);return n._index=this._index,n},e.prototype.next=function(){if(!(this._index<0)&&!(this._index>=this._source.length))return this._source[this._index--]},e}();n.RetroArrayIterator=r},9811:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.topologicSort=function(e){var n=[],r=new Set,o=new Map;return i.each(e,function(e){var n=e[0],r=e[1],i=o.get(r);i?i.push(n):o.set(r,[n])}),o.forEach(function(e,i){!function e(i){if(!r.has(i)){r.add(i);var s=o.get(i);s&&s.forEach(e),n.push(i)}}(i)}),n}},1533:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.stride=function(e,n){return new o(i.iter(e),n)};var o=function(){function e(e,n){this._source=e,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return e},e}();n.StrideIterator=o},5956:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=n.StringExt||(n.StringExt={});function i(e,n,r){void 0===r&&(r=0);for(var i=Array(n.length),o=0,s=r,a=n.length;o<a;++o,++s){if(-1===(s=e.indexOf(n[o],s)))return null;i[o]=s}return i}r.findIndices=i,r.matchSumOfSquares=function(e,n,r){void 0===r&&(r=0);var o=i(e,n,r);if(!o)return null;for(var s=0,a=0,l=o.length;a<l;++a){var h=o[a]-r;s+=h*h}return{score:s,indices:o}},r.matchSumOfDeltas=function(e,n,r){void 0===r&&(r=0);var o=i(e,n,r);if(!o)return null;for(var s=0,a=r-1,l=0,h=o.length;l<h;++l){var c=o[l];s+=c-a-1,a=c}return{score:s,indices:o}},r.highlight=function(e,n,r){for(var i=[],o=0,s=0,a=n.length;o<a;){for(var l=n[o],h=n[o];++o<a&&n[o]===h+1;)h++;s<l&&i.push(e.slice(s,l)),l<h+1&&i.push(r(e.slice(l,h+1))),s=h+1}return s<e.length&&i.push(e.slice(s)),i},r.cmp=function(e,n){return e<n?-1:+(e>n)}},7009:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.take=function(e,n){return new o(i.iter(e),n)};var o=function(){function e(e,n){this._source=e,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}},e}();n.TakeIterator=o},211:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(180);n.zip=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new o(e.map(i.iter))};var o=function(){function e(e){this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(e){return e.clone()}))},e.prototype.next=function(){for(var e=Array(this._source.length),n=0,r=this._source.length;n<r;++n){var i=this._source[n].next();if(void 0===i)return;e[n]=i}return e},e}();n.ZipIterator=o},2498:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,s=r(668),a=function(){function e(e){this._root=new o.LeafNode,this.cmp=e}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var e=o.firstLeaf(this._root);return e.size>0?e.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=o.lastLeaf(this._root);return e.size>0?e.items[e.size-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return o.iterItems(this._root)},e.prototype.retro=function(){return o.retroItems(this._root)},e.prototype.slice=function(e,n){return o.sliceItems(this._root,e,n)},e.prototype.retroSlice=function(e,n){return o.retroSliceItems(this._root,e,n)},e.prototype.at=function(e){return o.itemAt(this._root,e)},e.prototype.has=function(e,n){return o.hasItem(this._root,e,n)},e.prototype.indexOf=function(e,n){return o.indexOf(this._root,e,n)},e.prototype.get=function(e,n){return o.getItem(this._root,e,n)},e.prototype.assign=function(e){this.clear(),this.update(e)},e.prototype.insert=function(e){var n=o.insertItem(this._root,e,this.cmp);return this._root=o.maybeSplitRoot(this._root),n},e.prototype.update=function(e){var n=this;s.each(e,function(e){n.insert(e)})},e.prototype.delete=function(e,n){var r=o.deleteItem(this._root,e,n);return this._root=o.maybeExtractRoot(this._root),r},e.prototype.remove=function(e){var n=o.removeItem(this._root,e);return this._root=o.maybeExtractRoot(this._root),n},e.prototype.clear=function(){o.clear(this._root),this._root=new o.LeafNode},e}();n.BPlusTree=a,(i=a=n.BPlusTree||(n.BPlusTree={})).from=function(e,n){var r=new i(n);return r.assign(e),r},n.BPlusTree=a,function(e){var n=function(){function e(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(e.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),e}();e.BranchNode=n;var r=function(){function e(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(e.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e}();function i(e){for(;0===e.type;)e=e.children[0];return e}function o(e){for(;0===e.type;)e=e.children[e.children.length-1];return e}function a(e){0===e.type?(s.each(e.children,a),e.children.length=0,e.sizes.length=0,e.items.length=0):(e.items.length=0,e.next=null,e.prev=null)}e.LeafNode=r,e.firstLeaf=i,e.lastLeaf=o,e.iterItems=function(e){return new c(i(e),0,-1)},e.retroItems=function(e){var n=o(e);return new u(n,n.size-1,-1)},e.sliceItems=function(e,n,r){n=void 0===n?0:n<0?Math.max(0,n+e.size):Math.min(n,e.size);var i=Math.max(0,(r=void 0===r?e.size:r<0?Math.max(0,r+e.size):Math.min(r,e.size))-n);if(0===i)return s.empty();for(;0===e.type;){var o=d(e.sizes,n);o>0&&(n-=e.sizes[o-1]),e=e.children[o]}return new c(e,n,i)},e.retroSliceItems=function(e,n,r){var i=Math.max(0,(n=void 0===n?e.size-1:n<0?Math.max(-1,n+e.size):Math.min(n,e.size-1))-(r=void 0===r?-1:r<0?Math.max(-1,r+e.size):Math.min(r,e.size-1)));if(0===i)return s.empty();for(;0===e.type;){var o=d(e.sizes,n);o>0&&(n-=e.sizes[o-1]),e=e.children[o]}return new u(e,n,i)},e.itemAt=function(e,n){if(n<0&&(n+=e.size),!(n<0)&&!(n>=e.size)){for(;0===e.type;){var r=d(e.sizes,n);r>0&&(n-=e.sizes[r-1]),e=e.children[r]}return e.items[n]}},e.hasItem=function(e,n,r){for(;0===e.type;){var i=p(e.items,n,r);e=e.children[i]}return f(e.items,n,r)>=0},e.indexOf=function(e,n,r){for(var i=0;0===e.type;){var o=p(e.items,n,r);o>0&&(i+=e.sizes[o-1]),e=e.children[o]}var s=f(e.items,n,r);return s>=0?i+s:-i+s},e.getItem=function(e,n,r){for(;0===e.type;){var i=p(e.items,n,r);e=e.children[i]}var o=f(e.items,n,r);return o>=0?e.items[o]:void 0},e.insertItem=function e(n,r,i){if(1===n.type){var o,a=f(n.items,r,i);return a>=0?(o=n.items[a],n.items[a]=r):(o=void 0,s.ArrayExt.insert(n.items,-a-1,r)),o}var h=p(n.items,r,i),c=n.children[h],u=c.size,d=e(c,r,i),m=c.size;if(n.items[h]=c.items[0],u===m)return d;if(c.width>l){var b=y(c);s.ArrayExt.insert(n.children,h+1,b),s.ArrayExt.insert(n.items,h+1,b.items[0])}return g(n,h),d},e.deleteItem=function e(n,r,i){if(1===n.type){var o=f(n.items,r,i);if(o<0)return;return s.ArrayExt.removeAt(n.items,o)}var a=p(n.items,r,i),l=n.children[a],c=l.size,u=e(l,r,i);return c===l.size||(n.items[a]=l.items[0],l.width<h&&(a=m(n,a)),g(n,a)),u},e.removeItem=function e(n,r){if(r<0&&(r+=n.size),!(r<0)&&!(r>=n.size)){if(1===n.type)return s.ArrayExt.removeAt(n.items,r);var i=d(n.sizes,r);i>0&&(r-=n.sizes[i]);var o=n.children[i],a=e(o,r);return n.items[i]=o.items[0],o.width<h&&(i=m(n,i)),g(n,i),a}},e.clear=a,e.maybeSplitRoot=function(e){if(e.width<=l)return e;var r=new n,i=y(e);return r.sizes[0]=e.size,r.sizes[1]=e.size+i.size,r.children[0]=e,r.children[1]=i,r.items[0]=e.items[0],r.items[1]=i.items[0],r},e.maybeExtractRoot=function(e){if(1===e.type||e.children.length>1)return e;var n=e.children.pop();return a(e),n};var l=32,h=16,c=function(){function e(e,n,r){this._node=e,this._index=n,this._count=r}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node,this._index,this._count)},e.prototype.next=function(){if(null!==this._node&&0!==this._count)return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},e}(),u=function(){function e(e,n,r){this._node=e,this._index=n,this._count=r}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node,this._index,this._count)},e.prototype.next=function(){if(null!==this._node&&0!==this._count)return(this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0)?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},e}();function d(e,n){for(var r=e.length,i=0;i<r;++i)if(e[i]>n)return i;return r-1}function p(e,n,r){for(var i=e.length,o=1;o<i;++o)if(r(e[o],n)>0)return o-1;return i-1}function f(e,n,r){for(var i=e.length,o=0;o<i;++o){var s=r(e[o],n);if(0===s)return o;if(s>0)return-o-1}return-i-1}function g(e,n){for(var r=e.sizes,i=e.children,o=n>0?r[n-1]:0,s=i.length;n<s;++n)o=r[n]=o+i[n].size;r.length=i.length}function y(e){if(1===e.type){for(var i=new r,o=e.items,s=i.items,a=h,l=o.length;a<l;++a)s.push(o[a]);return o.length=h,e.next&&(e.next.prev=i),i.next=e.next,i.prev=e,e.next=i,i}for(var c=new n,u=e.children,d=c.children,a=h,l=u.length;a<l;++a)d.push(u[a]);u.length=h;for(var p=e.items,f=c.items,a=h,l=p.length;a<l;++a)f.push(p[a]);return p.length=h,g(e,h),g(c,0),c}function m(e,n){var r,i,o,l,c,u,d=e.children[n],p=0===n?e.children[n+1]:e.children[n-1],f=0===n,y=1===d.type,m=p.width>h;if(y&&m&&f){var b=d,_=p;return b.items.push(_.items.shift()),e.items[n+1]=_.items[0],n}if(y&&m&&!f){var b=d,_=p;return b.items.unshift(_.items.pop()),e.items[n]=b.items[0],n-1}if(y&&!m&&f){var b=d,_=p;return(r=_.items).unshift.apply(r,b.items),s.ArrayExt.removeAt(e.children,n),s.ArrayExt.removeAt(e.items,n+1),b.prev&&(b.prev.next=_),_.prev=b.prev,a(b),n}if(y&&!m&&!f){var b=d,_=p;return(i=_.items).push.apply(i,b.items),s.ArrayExt.removeAt(e.children,n),s.ArrayExt.removeAt(e.items,n),b.next&&(b.next.prev=_),_.next=b.next,a(b),n-1}if(!y&&m&&f){var b=d,_=p;return b.children.push(_.children.shift()),b.items.push(_.items.shift()),e.items[n+1]=_.items[0],g(b,b.width-1),g(_,0),n}if(!y&&m&&!f){var b=d,_=p;return b.children.unshift(_.children.pop()),b.items.unshift(_.items.pop()),e.items[n]=b.items[0],g(b,0),g(_,_.width-1),n-1}if(!y&&!m&&f){var b=d,_=p;return(o=_.children).unshift.apply(o,b.children),(l=_.items).unshift.apply(l,b.items),s.ArrayExt.removeAt(e.children,n),s.ArrayExt.removeAt(e.items,n+1),g(_,0),b.children.length=0,a(b),n}if(!y&&!m&&!f){var b=d,_=p;return(c=_.children).push.apply(c,b.children),(u=_.items).push.apply(u,b.items),s.ArrayExt.removeAt(e.children,n),s.ArrayExt.removeAt(e.items,n),g(_,0),b.children.length=0,a(b),n-1}throw"unreachable"}}(o||(o={}))},6949:function(e,n,r){"use strict";function i(e){for(var r in e)n.hasOwnProperty(r)||(n[r]=e[r])}Object.defineProperty(n,"__esModule",{value:!0}),i(r(2498)),i(r(8437))},8437:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o,s=r(668),a=function(){function e(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return new e.ForwardValueIterator(this._first)},e.prototype.retro=function(){return new e.RetroValueIterator(this._last)},e.prototype.nodes=function(){return new e.ForwardNodeIterator(this._first)},e.prototype.retroNodes=function(){return new e.RetroNodeIterator(this._last)},e.prototype.assign=function(e){var n=this;this.clear(),s.each(e,function(e){n.addLast(e)})},e.prototype.push=function(e){this.addLast(e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(e){this.addFirst(e)},e.prototype.unshift=function(){return this.removeFirst()},e.prototype.addFirst=function(e){var n=new o.LinkedListNode(this,e);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},e.prototype.addLast=function(e){var n=new o.LinkedListNode(this,e);return this._last?(n.prev=this._last,this._last.next=n):this._first=n,this._last=n,this._size++,n},e.prototype.insertBefore=function(e,n){if(!n||n===this._first)return this.addFirst(e);if(!(n instanceof o.LinkedListNode)||n.list!==this)throw Error("Reference node is not owned by the list.");var r=new o.LinkedListNode(this,e),i=n.prev;return r.next=n,r.prev=i,n.prev=r,i.next=r,this._size++,r},e.prototype.insertAfter=function(e,n){if(!n||n===this._last)return this.addLast(e);if(!(n instanceof o.LinkedListNode)||n.list!==this)throw Error("Reference node is not owned by the list.");var r=new o.LinkedListNode(this,e),i=n.next;return r.next=i,r.prev=n,n.next=r,i.prev=r,this._size++,r},e.prototype.removeFirst=function(){var e=this._first;if(e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},e.prototype.removeLast=function(){var e=this._last;if(e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value},e.prototype.removeNode=function(e){if(!(e instanceof o.LinkedListNode)||e.list!==this)throw Error("Node is not owned by the list.");e===this._first&&e===this._last?(this._first=null,this._last=null):e===this._first?(this._first=e.next,this._first.prev=null):e===this._last?(this._last=e.prev,this._last.next=null):(e.next.prev=e.prev,e.prev.next=e.next),e.list=null,e.next=null,e.prev=null,this._size--},e.prototype.clear=function(){for(var e=this._first;e;){var n=e.next;e.list=null,e.prev=null,e.next=null,e=n}this._first=null,this._last=null,this._size=0},e}();n.LinkedList=a,(i=a=n.LinkedList||(n.LinkedList={})).from=function(e){var n=new i;return n.assign(e),n},i.ForwardValueIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.next,e.value}},e}(),i.RetroValueIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.prev,e.value}},e}(),i.ForwardNodeIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.next,e}},e}(),i.RetroNodeIterator=function(){function e(e){this._node=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._node)},e.prototype.next=function(){if(this._node){var e=this._node;return this._node=e.prev,e}},e}(),n.LinkedList=a,(o||(o={})).LinkedListNode=function(e,n){this.list=null,this.next=null,this.prev=null,this.list=e,this.value=n}},8842:function(e,n,r){"use strict";var i,o=this&&this.__extends||(i=function(e,n){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])})(e,n)},function(e,n){function r(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0});var s=r(668),a=r(6949),l=function(){function e(e){this.type=e}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.conflate=function(e){return!1},e}();n.Message=l,n.ConflatableMessage=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),Object.defineProperty(n.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.conflate=function(e){return!0},n}(l),function(e){function n(e,n){var r=i.get(e);if(!r||0===r.length)return void p(e,n);s.every(s.retro(r),function(r){return!r||function(e,n,r){var i=!0;try{i="function"==typeof e?e(n,r):e.messageHook(n,r)}catch(e){l(e)}return i}(r,e,n)})&&p(e,n)}e.sendMessage=n,e.postMessage=function(e,n){if(!n.isConflatable)return void f(e,n);s.some(r,function(r){return r.handler===e&&!!r.msg&&r.msg.type===n.type&&!!r.msg.isConflatable&&r.msg.conflate(n)})||f(e,n)},e.installMessageHook=function(e,n){var r=i.get(e);r&&-1!==r.indexOf(n)||(r?r.push(n):i.set(e,[n]))},e.removeMessageHook=function(e,n){var r=i.get(e);if(r){var o=r.indexOf(n);-1!==o&&(r[o]=null,y(r))}},e.clearData=function(e){var n=i.get(e);n&&n.length>0&&(s.ArrayExt.fill(n,null),y(n)),s.each(r,function(n){n.handler===e&&(n.handler=null,n.msg=null)})},e.flush=function(){c||0===h||(d(h),c=!0,g(),c=!1)},e.getExceptionHandler=function(){return l},e.setExceptionHandler=function(e){var n=l;return l=e,n};var r=new a.LinkedList,i=new WeakMap,o=new Set,l=function(e){console.error(e)},h=0,c=!1,u="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,d="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate;function p(e,n){try{e.processMessage(n)}catch(e){l(e)}}function f(e,n){r.addLast({handler:e,msg:n}),0===h&&(h=u(g))}function g(){if(h=0,!r.isEmpty){var e={handler:null,msg:null};for(r.addLast(e);;){var i=r.removeFirst();if(i===e)return;i.handler&&i.msg&&n(i.handler,i.msg)}}}function y(e){0===o.size&&u(m),o.add(e)}function m(){o.forEach(b),o.clear()}function b(e){s.ArrayExt.removeAllWhere(e,_)}function _(e){return null===e}}(n.MessageLoop||(n.MessageLoop={}))},6617:function(){},4517:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i=function(){for(var e,n,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(n=function e(n){var r,i,o="";if("string"==typeof n||"number"==typeof n)o+=n;else if("object"==typeof n)if(Array.isArray(n))for(r=0;r<n.length;r++)n[r]&&(i=e(n[r]))&&(o&&(o+=" "),o+=i);else for(r in n)n[r]&&(o&&(o+=" "),o+=r);return o}(e))&&(i&&(i+=" "),i+=n);return i}},868:function(e){"use strict";let n=(e,{target:n=document.body}={})=>{let r=document.createElement("textarea"),i=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";let o=document.getSelection(),s=!1;o.rangeCount>0&&(s=o.getRangeAt(0)),n.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;let a=!1;try{a=document.execCommand("copy")}catch(e){}return r.remove(),s&&(o.removeAllRanges(),o.addRange(s)),i&&i.focus(),a};e.exports=n,e.exports.default=n},1874:function(e,n){(function(e){"use strict";var n=Object.keys;function r(e,n){return e===n||e!=e&&n!=n}function i(e){return e.constructor===Object||null==e.constructor}function o(e){return!!e&&"function"==typeof e.then}function s(e){return!!(e&&e.$$typeof)}var a="function"==typeof WeakSet?function(){return new WeakSet}:function(){var e=[];return{add:function(n){e.push(n)},has:function(n){return -1!==e.indexOf(n)}}};function l(e){return function(n){var r=e||n;return function(e,n,i){void 0===i&&(i=a());var o=!!e&&"object"==typeof e,s=!!n&&"object"==typeof n;if(o||s){var l=o&&i.has(e),h=s&&i.has(n);if(l||h)return l&&h;o&&i.add(e),s&&i.add(n)}return r(e,n,i)}}}var h=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function c(e,r,i,o){var a=n(e),l=a.length;if(n(r).length!==l)return!1;if(l)for(var c=void 0;l-- >0;){if("_owner"===(c=a[l])){var u=s(e),d=s(r);if((u||d)&&u!==d)return!1}if(!h(r,c)||!i(e[c],r[c],o))return!1}return!0}var u="function"==typeof Map,d="function"==typeof Set;function p(e){var n="function"==typeof e?e(s):s;function s(e,s,a){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(i(e)&&i(s))return c(e,s,n,a);var l=Array.isArray(e),h=Array.isArray(s);return l||h?l===h&&function(e,n,r,i){var o=e.length;if(n.length!==o)return!1;for(;o-- >0;)if(!r(e[o],n[o],i))return!1;return!0}(e,s,n,a):(l=e instanceof Date,h=s instanceof Date,l||h)?l===h&&r(e.getTime(),s.getTime()):(l=e instanceof RegExp,h=s instanceof RegExp,l||h)?l===h&&e.source===s.source&&e.global===s.global&&e.ignoreCase===s.ignoreCase&&e.multiline===s.multiline&&e.unicode===s.unicode&&e.sticky===s.sticky&&e.lastIndex===s.lastIndex:o(e)||o(s)?e===s:u&&(l=e instanceof Map,h=s instanceof Map,l||h)?l===h&&function(e,n,r,i){var o=e.size===n.size;if(o&&e.size){var s={};e.forEach(function(e,a){if(o){var l=!1,h=0;n.forEach(function(n,o){!l&&!s[h]&&(l=r(a,o,i)&&r(e,n,i))&&(s[h]=!0),h++}),o=l}})}return o}(e,s,n,a):d&&(l=e instanceof Set,h=s instanceof Set,l||h)?l===h&&function(e,n,r,i){var o=e.size===n.size;if(o&&e.size){var s={};e.forEach(function(e){if(o){var a=!1,l=0;n.forEach(function(n){!a&&!s[l]&&(a=r(e,n,i))&&(s[l]=!0),l++}),o=a}})}return o}(e,s,n,a):c(e,s,n,a)}return e!=e&&s!=s}return s}var f=p(),g=p(function(){return r}),y=p(l()),m=p(l(r));e.circularDeepEqual=y,e.circularShallowEqual=m,e.createCustomEqual=p,e.deepEqual=f,e.sameValueZeroEqual=r,e.shallowEqual=g,Object.defineProperty(e,"__esModule",{value:!0})})(n)},63:function(e,n,r){"use strict";var i=r(9415),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function h(e){return i.isMemo(e)?a:l[e.$$typeof]||o}l[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[i.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(n,r,i){if("string"!=typeof r){if(g){var o=f(r);o&&o!==g&&e(n,o,i)}var a=u(r);d&&(a=a.concat(d(r)));for(var l=h(n),y=h(r),m=0;m<a.length;++m){var b=a[m];if(!s[b]&&!(i&&i[b])&&!(y&&y[b])&&!(l&&l[b])){var _=p(r,b);try{c(n,b,_)}catch(e){}}}}return n}},4466:function(e,n,r){e.exports=r(5234)(r(3250),"DataView")},5208:function(e,n,r){var i=r(4440),o=r(4108),s=r(1085),a=r(7706),l=r(8636);function h(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=s,h.prototype.has=a,h.prototype.set=l,e.exports=h},1998:function(e,n,r){var i=r(266),o=r(2875),s=r(5828),a=r(4115),l=r(7690);function h(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=s,h.prototype.has=a,h.prototype.set=l,e.exports=h},2887:function(e,n,r){e.exports=r(5234)(r(3250),"Map")},5678:function(e,n,r){var i=r(9016),o=r(2363),s=r(4348),a=r(3062),l=r(262);function h(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=s,h.prototype.has=a,h.prototype.set=l,e.exports=h},5747:function(e,n,r){e.exports=r(5234)(r(3250),"Promise")},6616:function(e,n,r){e.exports=r(5234)(r(3250),"Set")},4546:function(e,n,r){var i=r(5678),o=r(3937),s=r(5009);function a(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new i;++n<r;)this.add(e[n])}a.prototype.add=a.prototype.push=o,a.prototype.has=s,e.exports=a},9549:function(e,n,r){var i=r(1998),o=r(3210),s=r(8603),a=r(8947),l=r(885),h=r(8938);function c(e){var n=this.__data__=new i(e);this.size=n.size}c.prototype.clear=o,c.prototype.delete=s,c.prototype.get=a,c.prototype.has=l,c.prototype.set=h,e.exports=c},861:function(e,n,r){e.exports=r(3250).Symbol},3526:function(e,n,r){e.exports=r(3250).Uint8Array},8001:function(e,n,r){e.exports=r(5234)(r(3250),"WeakMap")},2274:function(e){e.exports=function(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}},4004:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==n(e[r],r,e););return e}},2493:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length,o=0,s=[];++r<i;){var a=e[r];n(a,r,e)&&(s[o++]=a)}return s}},5436:function(e,n,r){var i=r(4365);e.exports=function(e,n){return!!(null==e?0:e.length)&&i(e,n,0)>-1}},9105:function(e){e.exports=function(e,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;)if(r(n,e[i]))return!0;return!1}},5825:function(e,n,r){var i=r(8509),o=r(9312),s=r(5589),a=r(5778),l=r(5023),h=r(922),c=Object.prototype.hasOwnProperty;e.exports=function(e,n){var r=s(e),u=!r&&o(e),d=!r&&!u&&a(e),p=!r&&!u&&!d&&h(e),f=r||u||d||p,g=f?i(e.length,String):[],y=g.length;for(var m in e)(n||c.call(e,m))&&!(f&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||l(m,y)))&&g.push(m);return g}},9233:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}},111:function(e){e.exports=function(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}},1831:function(e){e.exports=function(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}},3532:function(e,n,r){var i=r(7500),o=r(8260);e.exports=function(e,n,r){(void 0===r||o(e[n],r))&&(void 0!==r||n in e)||i(e,n,r)}},3192:function(e,n,r){var i=r(7500),o=r(8260),s=Object.prototype.hasOwnProperty;e.exports=function(e,n,r){var a=e[n];s.call(e,n)&&o(a,r)&&(void 0!==r||n in e)||i(e,n,r)}},8498:function(e,n,r){var i=r(8260);e.exports=function(e,n){for(var r=e.length;r--;)if(i(e[r][0],n))return r;return -1}},4265:function(e,n,r){var i=r(8618),o=r(414);e.exports=function(e,n){return e&&i(n,o(n),e)}},1629:function(e,n,r){var i=r(8618),o=r(9882);e.exports=function(e,n){return e&&i(n,o(n),e)}},7500:function(e,n,r){var i=r(5595);e.exports=function(e,n,r){"__proto__"==n&&i?i(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}},8361:function(e,n,r){var i=r(9549),o=r(4004),s=r(3192),a=r(4265),l=r(1629),h=r(6502),c=r(2166),u=r(7272),d=r(2066),p=r(4357),f=r(5713),g=r(7493),y=r(2865),m=r(1908),b=r(4046),_=r(5589),E=r(5778),w=r(7613),x=r(3702),C=r(693),S=r(414),D=r(9882),N="[object Arguments]",O="[object Function]",M="[object Object]",I={};I[N]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[M]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[O]=I["[object WeakMap]"]=!1,e.exports=function e(n,r,T,k,P,A){var L,j=1&r,R=2&r,z=4&r;if(T&&(L=P?T(n,k,P,A):T(n)),void 0!==L)return L;if(!x(n))return n;var V=_(n);if(V){if(L=y(n),!j)return c(n,L)}else{var F=g(n),$=F==O||"[object GeneratorFunction]"==F;if(E(n))return h(n,j);if(F==M||F==N||$&&!P){if(L=R||$?{}:b(n),!j)return R?d(n,l(L,n)):u(n,a(L,n))}else{if(!I[F])return P?n:{};L=m(n,F,j)}}A||(A=new i);var B=A.get(n);if(B)return B;A.set(n,L),C(n)?n.forEach(function(i){L.add(e(i,r,T,i,n,A))}):w(n)&&n.forEach(function(i,o){L.set(o,e(i,r,T,o,n,A))});var H=z?R?f:p:R?D:S,K=V?void 0:H(n);return o(K||n,function(i,o){K&&(i=n[o=i]),s(L,o,e(i,r,T,o,n,A))}),L}},7890:function(e,n,r){var i=r(3702),o=Object.create;e.exports=function(){function e(){}return function(n){if(!i(n))return{};if(o)return o(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}()},3700:function(e,n,r){var i=r(4546),o=r(5436),s=r(9105),a=r(9233),l=r(1525),h=r(7026);e.exports=function(e,n,r,c){var u=-1,d=o,p=!0,f=e.length,g=[],y=n.length;if(!f)return g;r&&(n=a(n,l(r))),c?(d=s,p=!1):n.length>=200&&(d=h,p=!1,n=new i(n));e:for(;++u<f;){var m=e[u],b=null==r?m:r(m);if(m=c||0!==m?m:0,p&&b==b){for(var _=y;_--;)if(n[_]===b)continue e;g.push(m)}else d(n,b,c)||g.push(m)}return g}},1701:function(e,n,r){var i=r(4003);e.exports=r(6313)(i)},5117:function(e,n,r){var i=r(2624);e.exports=function(e,n,r){for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n(a);if(null!=l&&(void 0===h?l==l&&!i(l):r(l,h)))var h=l,c=a}return c}},4770:function(e){e.exports=function(e,n,r,i){for(var o=e.length,s=r+(i?1:-1);i?s--:++s<o;)if(n(e[s],s,e))return s;return -1}},6640:function(e,n,r){var i=r(111),o=r(7123);e.exports=function e(n,r,s,a,l){var h=-1,c=n.length;for(s||(s=o),l||(l=[]);++h<c;){var u=n[h];r>0&&s(u)?r>1?e(u,r-1,s,a,l):i(l,u):a||(l[l.length]=u)}return l}},9943:function(e,n,r){e.exports=r(2545)()},4003:function(e,n,r){var i=r(9943),o=r(414);e.exports=function(e,n){return e&&i(e,n,o)}},548:function(e,n,r){var i=r(4007),o=r(6040);e.exports=function(e,n){n=i(n,e);for(var r=0,s=n.length;null!=e&&r<s;)e=e[o(n[r++])];return r&&r==s?e:void 0}},4468:function(e,n,r){var i=r(111),o=r(5589);e.exports=function(e,n,r){var s=n(e);return o(e)?s:i(s,r(e))}},9823:function(e,n,r){var i=r(861),o=r(1339),s=r(5151),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):s(e)}},3862:function(e){e.exports=function(e,n){return e>n}},2902:function(e){e.exports=function(e,n){return null!=e&&n in Object(e)}},4365:function(e,n,r){var i=r(4770),o=r(6963),s=r(5898);e.exports=function(e,n,r){return n==n?s(e,n,r):i(e,o,r)}},3016:function(e,n,r){var i=r(9823),o=r(440);e.exports=function(e){return o(e)&&"[object Arguments]"==i(e)}},4662:function(e,n,r){var i=r(8968),o=r(440);e.exports=function e(n,r,s,a,l){return n===r||(null!=n&&null!=r&&(o(n)||o(r))?i(n,r,s,a,e,l):n!=n&&r!=r)}},8968:function(e,n,r){var i=r(9549),o=r(4952),s=r(1080),a=r(6524),l=r(7493),h=r(5589),c=r(5778),u=r(922),d="[object Arguments]",p="[object Array]",f="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,n,r,y,m,b){var _=h(e),E=h(n),w=_?p:l(e),x=E?p:l(n);w=w==d?f:w,x=x==d?f:x;var C=w==f,S=x==f,D=w==x;if(D&&c(e)){if(!c(n))return!1;_=!0,C=!1}if(D&&!C)return b||(b=new i),_||u(e)?o(e,n,r,y,m,b):s(e,n,w,r,y,m,b);if(!(1&r)){var N=C&&g.call(e,"__wrapped__"),O=S&&g.call(n,"__wrapped__");if(N||O){var M=N?e.value():e,I=O?n.value():n;return b||(b=new i),m(M,I,r,y,b)}}return!!D&&(b||(b=new i),a(e,n,r,y,m,b))}},2275:function(e,n,r){var i=r(7493),o=r(440);e.exports=function(e){return o(e)&&"[object Map]"==i(e)}},6963:function(e){e.exports=function(e){return e!=e}},9817:function(e,n,r){var i=r(5563),o=r(8597),s=r(3702),a=r(5784),l=/^\[object .+?Constructor\]$/,h=Object.prototype,c=Function.prototype.toString,u=h.hasOwnProperty,d=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||o(e))&&(i(e)?d:l).test(a(e))}},7170:function(e,n,r){var i=r(7493),o=r(440);e.exports=function(e){return o(e)&&"[object Set]"==i(e)}},2448:function(e,n,r){var i=r(9823),o=r(6052),s=r(440),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&o(e.length)&&!!a[i(e)]}},1351:function(e,n,r){var i=r(2840),o=r(2825),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return o(e);var n=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&n.push(r);return n}},1309:function(e,n,r){var i=r(3702),o=r(2840),s=r(4866),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return s(e);var n=o(e),r=[];for(var l in e)"constructor"==l&&(n||!a.call(e,l))||r.push(l);return r}},2133:function(e,n,r){var i=r(9549),o=r(3532),s=r(9943),a=r(1241),l=r(3702),h=r(9882),c=r(1933);e.exports=function e(n,r,u,d,p){n!==r&&s(r,function(s,h){if(p||(p=new i),l(s))a(n,r,h,u,e,d,p);else{var f=d?d(c(n,h),s,h+"",n,r,p):void 0;void 0===f&&(f=s),o(n,h,f)}},h)}},1241:function(e,n,r){var i=r(3532),o=r(6502),s=r(1327),a=r(2166),l=r(4046),h=r(9312),c=r(5589),u=r(8268),d=r(5778),p=r(5563),f=r(3702),g=r(4256),y=r(922),m=r(1933),b=r(6222);e.exports=function(e,n,r,_,E,w,x){var C=m(e,r),S=m(n,r),D=x.get(S);if(D)return void i(e,r,D);var N=w?w(C,S,r+"",e,n,x):void 0,O=void 0===N;if(O){var M=c(S),I=!M&&d(S),T=!M&&!I&&y(S);N=S,M||I||T?c(C)?N=C:u(C)?N=a(C):I?(O=!1,N=o(S,!0)):T?(O=!1,N=s(S,!0)):N=[]:g(S)||h(S)?(N=C,h(C)?N=b(C):(!f(C)||p(C))&&(N=l(S))):O=!1}O&&(x.set(S,N),E(N,S,_,w,x),x.delete(S)),i(e,r,N)}},1785:function(e,n,r){var i=r(7121),o=r(6708);e.exports=function(e,n){return i(e,n,function(n,r){return o(e,r)})}},7121:function(e,n,r){var i=r(548),o=r(2619),s=r(4007);e.exports=function(e,n,r){for(var a=-1,l=n.length,h={};++a<l;){var c=n[a],u=i(e,c);r(u,c)&&o(h,s(c,e),u)}return h}},9735:function(e,n,r){var i=r(229),o=r(340),s=r(4173);e.exports=function(e,n){return s(o(e,n,i),e+"")}},2619:function(e,n,r){var i=r(3192),o=r(4007),s=r(5023),a=r(3702),l=r(6040);e.exports=function(e,n,r,h){if(!a(e))return e;n=o(n,e);for(var c=-1,u=n.length,d=u-1,p=e;null!=p&&++c<u;){var f=l(n[c]),g=r;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(c!=d){var y=p[f];void 0===(g=h?h(y,f,p):void 0)&&(g=a(y)?y:s(n[c+1])?[]:{})}i(p,f,g),p=p[f]}return e}},6739:function(e,n,r){var i=r(9203),o=r(5595),s=r(229);e.exports=o?function(e,n){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(n),writable:!0})}:s},7379:function(e){e.exports=function(e,n,r){var i=-1,o=e.length;n<0&&(n=-n>o?0:o+n),(r=r>o?o:r)<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(o);++i<o;)s[i]=e[i+n];return s}},8509:function(e){e.exports=function(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}},6245:function(e,n,r){var i=r(861),o=r(9233),s=r(5589),a=r(2624),l=1/0,h=i?i.prototype:void 0,c=h?h.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(s(n))return o(n,e)+"";if(a(n))return c?c.call(n):"";var r=n+"";return"0"==r&&1/n==-l?"-0":r}},1656:function(e,n,r){var i=r(2438),o=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},1525:function(e){e.exports=function(e){return function(n){return e(n)}}},135:function(e,n,r){var i=r(4546),o=r(5436),s=r(9105),a=r(7026),l=r(6262),h=r(7969);e.exports=function(e,n,r){var c=-1,u=o,d=e.length,p=!0,f=[],g=f;if(r)p=!1,u=s;else if(d>=200){var y=n?null:l(e);if(y)return h(y);p=!1,u=a,g=new i}else g=n?[]:f;e:for(;++c<d;){var m=e[c],b=n?n(m):m;if(m=r||0!==m?m:0,p&&b==b){for(var _=g.length;_--;)if(g[_]===b)continue e;n&&g.push(b),f.push(m)}else u(g,b,r)||(g!==f&&g.push(b),f.push(m))}return f}},1928:function(e,n,r){var i=r(4007),o=r(7875),s=r(3744),a=r(6040);e.exports=function(e,n){return n=i(n,e),null==(e=s(e,n))||delete e[a(o(n))]}},71:function(e,n,r){var i=r(9233);e.exports=function(e,n){return i(n,function(n){return e[n]})}},7026:function(e){e.exports=function(e,n){return e.has(n)}},4781:function(e,n,r){var i=r(229);e.exports=function(e){return"function"==typeof e?e:i}},4007:function(e,n,r){var i=r(5589),o=r(5130),s=r(4041),a=r(9835);e.exports=function(e,n){return i(e)?e:o(e,n)?[e]:s(a(e))}},2962:function(e,n,r){var i=r(3526);e.exports=function(e){var n=new e.constructor(e.byteLength);return new i(n).set(new i(e)),n}},6502:function(e,n,r){e=r.nmd(e);var i=r(3250),o=n&&!n.nodeType&&n,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?i.Buffer:void 0,l=a?a.allocUnsafe:void 0;e.exports=function(e,n){if(n)return e.slice();var r=e.length,i=l?l(r):new e.constructor(r);return e.copy(i),i}},7037:function(e,n,r){var i=r(2962);e.exports=function(e,n){var r=n?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},3429:function(e){var n=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,n.exec(e));return r.lastIndex=e.lastIndex,r}},9349:function(e,n,r){var i=r(861),o=i?i.prototype:void 0,s=o?o.valueOf:void 0;e.exports=function(e){return s?Object(s.call(e)):{}}},1327:function(e,n,r){var i=r(2962);e.exports=function(e,n){var r=n?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},2166:function(e){e.exports=function(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}},8618:function(e,n,r){var i=r(3192),o=r(7500);e.exports=function(e,n,r,s){var a=!r;r||(r={});for(var l=-1,h=n.length;++l<h;){var c=n[l],u=s?s(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),a?o(r,c,u):i(r,c,u)}return r}},7272:function(e,n,r){var i=r(8618),o=r(4450);e.exports=function(e,n){return i(e,o(e),n)}},2066:function(e,n,r){var i=r(8618),o=r(8784);e.exports=function(e,n){return i(e,o(e),n)}},1622:function(e,n,r){e.exports=r(3250)["__core-js_shared__"]},6948:function(e,n,r){var i=r(9735),o=r(8132);e.exports=function(e){return i(function(n,r){var i=-1,s=r.length,a=s>1?r[s-1]:void 0,l=s>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(s--,a):void 0,l&&o(r[0],r[1],l)&&(a=s<3?void 0:a,s=1),n=Object(n);++i<s;){var h=r[i];h&&e(n,h,i,a)}return n})}},6313:function(e,n,r){var i=r(568);e.exports=function(e,n){return function(r,o){if(null==r)return r;if(!i(r))return e(r,o);for(var s=r.length,a=n?s:-1,l=Object(r);(n?a--:++a<s)&&!1!==o(l[a],a,l););return r}}},2545:function(e){e.exports=function(e){return function(n,r,i){for(var o=-1,s=Object(n),a=i(n),l=a.length;l--;){var h=a[e?l:++o];if(!1===r(s[h],h,s))break}return n}}},6262:function(e,n,r){var i=r(6616),o=r(1607),s=r(7969);e.exports=i&&1/s(new i([,-0]))[1]==1/0?function(e){return new i(e)}:o},492:function(e,n,r){var i=r(4256);e.exports=function(e){return i(e)?void 0:e}},5595:function(e,n,r){var i=r(5234);e.exports=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},4952:function(e,n,r){var i=r(4546),o=r(1831),s=r(7026);e.exports=function(e,n,r,a,l,h){var c=1&r,u=e.length,d=n.length;if(u!=d&&!(c&&d>u))return!1;var p=h.get(e),f=h.get(n);if(p&&f)return p==n&&f==e;var g=-1,y=!0,m=2&r?new i:void 0;for(h.set(e,n),h.set(n,e);++g<u;){var b=e[g],_=n[g];if(a)var E=c?a(_,b,g,n,e,h):a(b,_,g,e,n,h);if(void 0!==E){if(E)continue;y=!1;break}if(m){if(!o(n,function(e,n){if(!s(m,n)&&(b===e||l(b,e,r,a,h)))return m.push(n)})){y=!1;break}}else if(!(b===_||l(b,_,r,a,h))){y=!1;break}}return h.delete(e),h.delete(n),y}},1080:function(e,n,r){var i=r(861),o=r(3526),s=r(8260),a=r(4952),l=r(1140),h=r(7969),c=i?i.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,n,r,i,c,d,p){switch(r){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)break;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":if(e.byteLength!=n.byteLength||!d(new o(e),new o(n)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var f=l;case"[object Set]":var g=1&i;if(f||(f=h),e.size!=n.size&&!g)break;var y=p.get(e);if(y)return y==n;i|=2,p.set(e,n);var m=a(f(e),f(n),i,c,d,p);return p.delete(e),m;case"[object Symbol]":if(u)return u.call(e)==u.call(n)}return!1}},6524:function(e,n,r){var i=r(4357),o=Object.prototype.hasOwnProperty;e.exports=function(e,n,r,s,a,l){var h=1&r,c=i(e),u=c.length;if(u!=i(n).length&&!h)return!1;for(var d=u;d--;){var p=c[d];if(!(h?p in n:o.call(n,p)))return!1}var f=l.get(e),g=l.get(n);if(f&&g)return f==n&&g==e;var y=!0;l.set(e,n),l.set(n,e);for(var m=h;++d<u;){var b=e[p=c[d]],_=n[p];if(s)var E=h?s(_,b,p,n,e,l):s(b,_,p,e,n,l);if(!(void 0===E?b===_||a(b,_,r,s,l):E)){y=!1;break}m||(m="constructor"==p)}if(y&&!m){var w=e.constructor,x=n.constructor;w!=x&&"constructor"in e&&"constructor"in n&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(y=!1)}return l.delete(e),l.delete(n),y}},3273:function(e,n,r){var i=r(2923),o=r(340),s=r(4173);e.exports=function(e){return s(o(e,void 0,i),e+"")}},302:function(e,n,r){e.exports="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g},4357:function(e,n,r){var i=r(4468),o=r(4450),s=r(414);e.exports=function(e){return i(e,s,o)}},5713:function(e,n,r){var i=r(4468),o=r(8784),s=r(9882);e.exports=function(e){return i(e,s,o)}},7570:function(e,n,r){var i=r(8949);e.exports=function(e,n){var r=e.__data__;return i(n)?r["string"==typeof n?"string":"hash"]:r.map}},5234:function(e,n,r){var i=r(9817),o=r(7736);e.exports=function(e,n){var r=o(e,n);return i(r)?r:void 0}},8490:function(e,n,r){e.exports=r(3540)(Object.getPrototypeOf,Object)},1339:function(e,n,r){var i=r(861),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,l=i?i.toStringTag:void 0;e.exports=function(e){var n=s.call(e,l),r=e[l];try{e[l]=void 0;var i=!0}catch(e){}var o=a.call(e);return i&&(n?e[l]=r:delete e[l]),o}},4450:function(e,n,r){var i=r(2493),o=r(4506),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;e.exports=a?function(e){return null==e?[]:i(a(e=Object(e)),function(n){return s.call(e,n)})}:o},8784:function(e,n,r){var i=r(111),o=r(8490),s=r(4450),a=r(4506);e.exports=Object.getOwnPropertySymbols?function(e){for(var n=[];e;)i(n,s(e)),e=o(e);return n}:a},7493:function(e,n,r){var i=r(4466),o=r(2887),s=r(5747),a=r(6616),l=r(8001),h=r(9823),c=r(5784),u="[object Map]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",g="[object DataView]",y=c(i),m=c(o),b=c(s),_=c(a),E=c(l),w=h;(i&&w(new i(new ArrayBuffer(1)))!=g||o&&w(new o)!=u||s&&w(s.resolve())!=d||a&&w(new a)!=p||l&&w(new l)!=f)&&(w=function(e){var n=h(e),r="[object Object]"==n?e.constructor:void 0,i=r?c(r):"";if(i)switch(i){case y:return g;case m:return u;case b:return d;case _:return p;case E:return f}return n}),e.exports=w},7736:function(e){e.exports=function(e,n){return null==e?void 0:e[n]}},3544:function(e,n,r){var i=r(4007),o=r(9312),s=r(5589),a=r(5023),l=r(6052),h=r(6040);e.exports=function(e,n,r){n=i(n,e);for(var c=-1,u=n.length,d=!1;++c<u;){var p=h(n[c]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&l(u)&&a(p,u)&&(s(e)||o(e))}},4440:function(e,n,r){var i=r(4545);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},4108:function(e){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=!!n,n}},1085:function(e,n,r){var i=r(4545),o=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(i){var r=n[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(n,e)?n[e]:void 0}},7706:function(e,n,r){var i=r(4545),o=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return i?void 0!==n[e]:o.call(n,e)}},8636:function(e,n,r){var i=r(4545);e.exports=function(e,n){var r=this.__data__;return this.size+=+!this.has(e),r[e]=i&&void 0===n?"__lodash_hash_undefined__":n,this}},2865:function(e){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,i=new e.constructor(r);return r&&"string"==typeof e[0]&&n.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},1908:function(e,n,r){var i=r(2962),o=r(7037),s=r(3429),a=r(9349),l=r(1327);e.exports=function(e,n,r){var h=e.constructor;switch(n){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new h(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,r);case"[object Map]":case"[object Set]":return new h;case"[object Number]":case"[object String]":return new h(e);case"[object RegExp]":return s(e);case"[object Symbol]":return a(e)}}},4046:function(e,n,r){var i=r(7890),o=r(8490),s=r(2840);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:i(o(e))}},7123:function(e,n,r){var i=r(861),o=r(9312),s=r(5589),a=i?i.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(a&&e&&e[a])}},5023:function(e){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var i=typeof e;return!!(r=null==r?0x1fffffffffffff:r)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<r}},8132:function(e,n,r){var i=r(8260),o=r(568),s=r(5023),a=r(3702);e.exports=function(e,n,r){if(!a(r))return!1;var l=typeof n;return("number"==l?!!(o(r)&&s(n,r.length)):"string"==l&&n in r)&&i(r[n],e)}},5130:function(e,n,r){var i=r(5589),o=r(2624),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,n){if(i(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||o(e))||a.test(e)||!s.test(e)||null!=n&&e in Object(n)}},8949:function(e){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},8597:function(e,n,r){var i,o=r(1622),s=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!s&&s in e}},2840:function(e){var n=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||n)}},266:function(e){e.exports=function(){this.__data__=[],this.size=0}},2875:function(e,n,r){var i=r(8498),o=Array.prototype.splice;e.exports=function(e){var n=this.__data__,r=i(n,e);return!(r<0)&&(r==n.length-1?n.pop():o.call(n,r,1),--this.size,!0)}},5828:function(e,n,r){var i=r(8498);e.exports=function(e){var n=this.__data__,r=i(n,e);return r<0?void 0:n[r][1]}},4115:function(e,n,r){var i=r(8498);e.exports=function(e){return i(this.__data__,e)>-1}},7690:function(e,n,r){var i=r(8498);e.exports=function(e,n){var r=this.__data__,o=i(r,e);return o<0?(++this.size,r.push([e,n])):r[o][1]=n,this}},9016:function(e,n,r){var i=r(5208),o=r(1998),s=r(2887);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(s||o),string:new i}}},2363:function(e,n,r){var i=r(7570);e.exports=function(e){var n=i(this,e).delete(e);return this.size-=!!n,n}},4348:function(e,n,r){var i=r(7570);e.exports=function(e){return i(this,e).get(e)}},3062:function(e,n,r){var i=r(7570);e.exports=function(e){return i(this,e).has(e)}},262:function(e,n,r){var i=r(7570);e.exports=function(e,n){var r=i(this,e),o=r.size;return r.set(e,n),this.size+=+(r.size!=o),this}},1140:function(e){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,i){r[++n]=[i,e]}),r}},2924:function(e,n,r){var i=r(7997);e.exports=function(e){var n=i(e,function(e){return 500===r.size&&r.clear(),e}),r=n.cache;return n}},4545:function(e,n,r){e.exports=r(5234)(Object,"create")},2825:function(e,n,r){e.exports=r(3540)(Object.keys,Object)},4866:function(e){e.exports=function(e){var n=[];if(null!=e)for(var r in Object(e))n.push(r);return n}},8690:function(e,n,r){e=r.nmd(e);var i=r(302),o=n&&!n.nodeType&&n,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o&&i.process,l=function(){try{var e=s&&s.require&&s.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=l},5151:function(e){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},3540:function(e){e.exports=function(e,n){return function(r){return e(n(r))}}},340:function(e,n,r){var i=r(2274),o=Math.max;e.exports=function(e,n,r){return n=o(void 0===n?e.length-1:n,0),function(){for(var s=arguments,a=-1,l=o(s.length-n,0),h=Array(l);++a<l;)h[a]=s[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=s[a];return c[n]=r(h),i(e,this,c)}}},3744:function(e,n,r){var i=r(548),o=r(7379);e.exports=function(e,n){return n.length<2?e:i(e,o(n,0,-1))}},3250:function(e,n,r){var i=r(302),o="object"==typeof self&&self&&self.Object===Object&&self;e.exports=i||o||Function("return this")()},1933:function(e){e.exports=function(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}},3937:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5009:function(e){e.exports=function(e){return this.__data__.has(e)}},7969:function(e){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e){r[++n]=e}),r}},4173:function(e,n,r){var i=r(6739);e.exports=r(7357)(i)},7357:function(e){var n=Date.now;e.exports=function(e){var r=0,i=0;return function(){var o=n(),s=16-(o-i);if(i=o,s>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},3210:function(e,n,r){var i=r(1998);e.exports=function(){this.__data__=new i,this.size=0}},8603:function(e){e.exports=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}},8947:function(e){e.exports=function(e){return this.__data__.get(e)}},885:function(e){e.exports=function(e){return this.__data__.has(e)}},8938:function(e,n,r){var i=r(1998),o=r(2887),s=r(5678);e.exports=function(e,n){var r=this.__data__;if(r instanceof i){var a=r.__data__;if(!o||a.length<199)return a.push([e,n]),this.size=++r.size,this;r=this.__data__=new s(a)}return r.set(e,n),this.size=r.size,this}},5898:function(e){e.exports=function(e,n,r){for(var i=r-1,o=e.length;++i<o;)if(e[i]===n)return i;return -1}},4041:function(e,n,r){var i=r(2924),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g;e.exports=i(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(o,function(e,r,i,o){n.push(i?o.replace(s,"$1"):r||e)}),n})},6040:function(e,n,r){var i=r(2624),o=1/0;e.exports=function(e){if("string"==typeof e||i(e))return e;var n=e+"";return"0"==n&&1/e==-o?"-0":n}},5784:function(e){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2438:function(e){var n=/\s/;e.exports=function(e){for(var r=e.length;r--&&n.test(e.charAt(r)););return r}},311:function(e,n,r){var i=r(3192),o=r(8618),s=r(6948),a=r(568),l=r(2840),h=r(414),c=Object.prototype.hasOwnProperty;e.exports=s(function(e,n){if(l(n)||a(n))return void o(n,h(n),e);for(var r in n)c.call(n,r)&&i(e,r,n[r])})},7692:function(e,n,r){var i=r(8361);e.exports=function(e,n){return i(e,5,n="function"==typeof n?n:void 0)}},9203:function(e){e.exports=function(e){return function(){return e}}},7837:function(e,n,r){var i=r(3702),o=r(231),s=r(9153),a=Math.max,l=Math.min;e.exports=function(e,n,r){var h,c,u,d,p,f,g=0,y=!1,m=!1,b=!0;if("function"!=typeof e)throw TypeError("Expected a function");function _(n){var r=h,i=c;return h=c=void 0,g=n,d=e.apply(i,r)}function E(e){var r=e-f,i=e-g;return void 0===f||r>=n||r<0||m&&i>=u}function w(){var e,r,i,s=o();if(E(s))return x(s);p=setTimeout(w,(e=s-f,r=s-g,i=n-e,m?l(i,u-r):i))}function x(e){return(p=void 0,b&&h)?_(e):(h=c=void 0,d)}function C(){var e,r=o(),i=E(r);if(h=arguments,c=this,f=r,i){if(void 0===p)return g=e=f,p=setTimeout(w,n),y?_(e):d;if(m)return clearTimeout(p),p=setTimeout(w,n),_(f)}return void 0===p&&(p=setTimeout(w,n)),d}return n=s(n)||0,i(r)&&(y=!!r.leading,u=(m="maxWait"in r)?a(s(r.maxWait)||0,n):u,b="trailing"in r?!!r.trailing:b),C.cancel=function(){void 0!==p&&clearTimeout(p),g=0,h=f=c=p=void 0},C.flush=function(){return void 0===p?d:x(o())},C}},5271:function(e,n,r){var i=r(3700),o=r(6640),s=r(9735),a=r(8268);e.exports=s(function(e,n){return a(e)?i(e,o(n,1,a,!0)):[]})},678:function(e,n,r){e.exports=r(7734)},8260:function(e){e.exports=function(e,n){return e===n||e!=e&&n!=n}},2923:function(e,n,r){var i=r(6640);e.exports=function(e){return(null==e?0:e.length)?i(e,1):[]}},7734:function(e,n,r){var i=r(4004),o=r(1701),s=r(4781),a=r(5589);e.exports=function(e,n){return(a(e)?i:o)(e,s(n))}},3546:function(e,n,r){var i=r(548);e.exports=function(e,n,r){var o=null==e?void 0:i(e,n);return void 0===o?r:o}},6708:function(e,n,r){var i=r(2902),o=r(3544);e.exports=function(e,n){return null!=e&&o(e,n,i)}},229:function(e){e.exports=function(e){return e}},2876:function(e,n,r){var i=r(4365),o=r(568),s=r(6705),a=r(6843),l=r(1682),h=Math.max;e.exports=function(e,n,r,c){e=o(e)?e:l(e),r=r&&!c?a(r):0;var u=e.length;return r<0&&(r=h(u+r,0)),s(e)?r<=u&&e.indexOf(n,r)>-1:!!u&&i(e,n,r)>-1}},9312:function(e,n,r){var i=r(3016),o=r(440),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable;e.exports=i(function(){return arguments}())?i:function(e){return o(e)&&a.call(e,"callee")&&!l.call(e,"callee")}},5589:function(e){e.exports=Array.isArray},568:function(e,n,r){var i=r(5563),o=r(6052);e.exports=function(e){return null!=e&&o(e.length)&&!i(e)}},8268:function(e,n,r){var i=r(568),o=r(440);e.exports=function(e){return o(e)&&i(e)}},9256:function(e,n,r){var i=r(9823),o=r(440);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==i(e)}},5778:function(e,n,r){e=r.nmd(e);var i=r(3250),o=r(7999),s=n&&!n.nodeType&&n,a=s&&e&&!e.nodeType&&e,l=a&&a.exports===s?i.Buffer:void 0,h=l?l.isBuffer:void 0;e.exports=h||o},9787:function(e,n,r){var i=r(1351),o=r(7493),s=r(9312),a=r(5589),l=r(568),h=r(5778),c=r(2840),u=r(922),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||h(e)||u(e)||s(e)))return!e.length;var n=o(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if(c(e))return!i(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},5466:function(e,n,r){var i=r(4662);e.exports=function(e,n){return i(e,n)}},5563:function(e,n,r){var i=r(9823),o=r(3702);e.exports=function(e){if(!o(e))return!1;var n=i(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},6052:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},7613:function(e,n,r){var i=r(2275),o=r(1525),s=r(8690),a=s&&s.isMap;e.exports=a?o(a):i},7534:function(e){e.exports=function(e){return null===e}},3224:function(e,n,r){var i=r(9823),o=r(440);e.exports=function(e){return"number"==typeof e||o(e)&&"[object Number]"==i(e)}},3702:function(e){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},440:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},4256:function(e,n,r){var i=r(9823),o=r(8490),s=r(440),a=Object.prototype,l=Function.prototype.toString,h=a.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=i(e))return!1;var n=o(e);if(null===n)return!0;var r=h.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==c}},693:function(e,n,r){var i=r(7170),o=r(1525),s=r(8690),a=s&&s.isSet;e.exports=a?o(a):i},6705:function(e,n,r){var i=r(9823),o=r(5589),s=r(440);e.exports=function(e){return"string"==typeof e||!o(e)&&s(e)&&"[object String]"==i(e)}},2624:function(e,n,r){var i=r(9823),o=r(440);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==i(e)}},922:function(e,n,r){var i=r(2448),o=r(1525),s=r(8690),a=s&&s.isTypedArray;e.exports=a?o(a):i},6474:function(e){e.exports=function(e){return void 0===e}},414:function(e,n,r){var i=r(5825),o=r(1351),s=r(568);e.exports=function(e){return s(e)?i(e):o(e)}},9882:function(e,n,r){var i=r(5825),o=r(1309),s=r(568);e.exports=function(e){return s(e)?i(e,!0):o(e)}},7875:function(e){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},9378:function(e,n,r){e=r.nmd(e),(function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=1/0,h=0/0,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",d="[object Array]",p="[object Boolean]",f="[object Date]",g="[object Error]",y="[object Function]",m="[object GeneratorFunction]",b="[object Map]",_="[object Number]",E="[object Object]",w="[object Promise]",x="[object RegExp]",C="[object Set]",S="[object String]",D="[object Symbol]",N="[object WeakMap]",O="[object ArrayBuffer]",M="[object DataView]",I="[object Float32Array]",T="[object Float64Array]",k="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",L="[object Uint8Array]",j="[object Uint8ClampedArray]",R="[object Uint16Array]",z="[object Uint32Array]",V=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,K=RegExp(B.source),U=RegExp(H.source),W=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,J=RegExp(q.source),ee=/^\s+/,et=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,ei=/,? & /,eo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,es=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,el=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eh=/\w*$/,ec=/^[-+]0x[0-9a-f]+$/i,eu=/^0b[01]+$/i,ed=/^\[object .+?Constructor\]$/,ep=/^0o[0-7]+$/i,ef=/^(?:0|[1-9]\d*)$/,eg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ey=/($^)/,em=/['\n\r\u2028\u2029\\]/g,ev="\ud800-\udfff",eb="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e_="\\u2700-\\u27bf",eE="a-z\\xdf-\\xf6\\xf8-\\xff",ew="A-Z\\xc0-\\xd6\\xd8-\\xde",ex="\\ufe0e\\ufe0f",eC="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eS="['’]",eD="["+eC+"]",eN="["+eb+"]",eO="["+eE+"]",eM="[^"+ev+eC+"\\d+"+e_+eE+ew+"]",eI="\ud83c[\udffb-\udfff]",eT="[^"+ev+"]",ek="(?:\ud83c[\udde6-\uddff]){2}",eP="[\ud800-\udbff][\udc00-\udfff]",eA="["+ew+"]",eL="\\u200d",ej="(?:"+eO+"|"+eM+")",eR="(?:"+eA+"|"+eM+")",ez="(?:"+eS+"(?:d|ll|m|re|s|t|ve))?",eV="(?:"+eS+"(?:D|LL|M|RE|S|T|VE))?",eF="(?:"+eN+"|"+eI+")?",e$="["+ex+"]?",eB="(?:"+eL+"(?:"+[eT,ek,eP].join("|")+")"+e$+eF+")*",eH=e$+eF+eB,eK="(?:"+["["+e_+"]",ek,eP].join("|")+")"+eH,eU="(?:"+[eT+eN+"?",eN,ek,eP,"["+ev+"]"].join("|")+")",eW=RegExp(eS,"g"),eG=RegExp(eN,"g"),eY=RegExp(eI+"(?="+eI+")|"+eU+eH,"g"),eZ=RegExp([eA+"?"+eO+"+"+ez+"(?="+[eD,eA,"$"].join("|")+")",eR+"+"+eV+"(?="+[eD,eA+ej,"$"].join("|")+")",eA+"?"+ej+"+"+ez,eA+"+"+eV,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eK].join("|"),"g"),eX=RegExp("["+eL+ev+eb+ex+"]"),eQ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eq=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eJ=-1,e0={};e0[I]=e0[T]=e0[k]=e0[P]=e0[A]=e0[L]=e0[j]=e0[R]=e0[z]=!0,e0[u]=e0[d]=e0[O]=e0[p]=e0[M]=e0[f]=e0[g]=e0[y]=e0[b]=e0[_]=e0[E]=e0[x]=e0[C]=e0[S]=e0[N]=!1;var e1={};e1[u]=e1[d]=e1[O]=e1[M]=e1[p]=e1[f]=e1[I]=e1[T]=e1[k]=e1[P]=e1[A]=e1[b]=e1[_]=e1[E]=e1[x]=e1[C]=e1[S]=e1[D]=e1[L]=e1[j]=e1[R]=e1[z]=!0,e1[g]=e1[y]=e1[N]=!1;var e2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e3=parseFloat,e4=parseInt,e5="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,e6="object"==typeof self&&self&&self.Object===Object&&self,e8=e5||e6||Function("return this")(),e9=n&&!n.nodeType&&n,e7=e9&&e&&!e.nodeType&&e,te=e7&&e7.exports===e9,tt=te&&e5.process,tn=function(){try{var e=e7&&e7.require&&e7.require("util").types;if(e)return e;return tt&&tt.binding&&tt.binding("util")}catch(e){}}(),tr=tn&&tn.isArrayBuffer,ti=tn&&tn.isDate,to=tn&&tn.isMap,ts=tn&&tn.isRegExp,ta=tn&&tn.isSet,tl=tn&&tn.isTypedArray;function th(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function tc(e,n,r,i){for(var o=-1,s=null==e?0:e.length;++o<s;){var a=e[o];n(i,a,r(a),e)}return i}function tu(e,n){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==n(e[r],r,e););return e}function td(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}function tp(e,n){for(var r=-1,i=null==e?0:e.length,o=0,s=[];++r<i;){var a=e[r];n(a,r,e)&&(s[o++]=a)}return s}function tf(e,n){return!!(null==e?0:e.length)&&tC(e,n,0)>-1}function tg(e,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;)if(r(n,e[i]))return!0;return!1}function ty(e,n){for(var r=-1,i=null==e?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}function tm(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}function tv(e,n,r,i){var o=-1,s=null==e?0:e.length;for(i&&s&&(r=e[++o]);++o<s;)r=n(r,e[o],o,e);return r}function tb(e,n,r,i){var o=null==e?0:e.length;for(i&&o&&(r=e[--o]);o--;)r=n(r,e[o],o,e);return r}function t_(e,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}var tE=tO("length");function tw(e,n,r){var i;return r(e,function(e,r,o){if(n(e,r,o))return i=r,!1}),i}function tx(e,n,r,i){for(var o=e.length,s=r+(i?1:-1);i?s--:++s<o;)if(n(e[s],s,e))return s;return -1}function tC(e,n,r){return n==n?function(e,n,r){for(var i=r-1,o=e.length;++i<o;)if(e[i]===n)return i;return -1}(e,n,r):tx(e,tD,r)}function tS(e,n,r,i){for(var o=r-1,s=e.length;++o<s;)if(i(e[o],n))return o;return -1}function tD(e){return e!=e}function tN(e,n){var r=null==e?0:e.length;return r?tT(e,n)/r:h}function tO(e){return function(n){return null==n?i:n[e]}}function tM(e){return function(n){return null==e?i:e[n]}}function tI(e,n,r,i,o){return o(e,function(e,o,s){r=i?(i=!1,e):n(r,e,o,s)}),r}function tT(e,n){for(var r,o=-1,s=e.length;++o<s;){var a=n(e[o]);i!==a&&(r=i===r?a:r+a)}return r}function tk(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}function tP(e){return e?e.slice(0,tZ(e)+1).replace(ee,""):e}function tA(e){return function(n){return e(n)}}function tL(e,n){return ty(n,function(n){return e[n]})}function tj(e,n){return e.has(n)}function tR(e,n){for(var r=-1,i=e.length;++r<i&&tC(n,e[r],0)>-1;);return r}function tz(e,n){for(var r=e.length;r--&&tC(n,e[r],0)>-1;);return r}var tV=tM({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tF=tM({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function t$(e){return"\\"+e2[e]}function tB(e){return eX.test(e)}function tH(e){var n=-1,r=Array(e.size);return e.forEach(function(e,i){r[++n]=[i,e]}),r}function tK(e,n){return function(r){return e(n(r))}}function tU(e,n){for(var r=-1,i=e.length,o=0,s=[];++r<i;){var l=e[r];(l===n||l===a)&&(e[r]=a,s[o++]=r)}return s}function tW(e){var n=-1,r=Array(e.size);return e.forEach(function(e){r[++n]=e}),r}function tG(e){return tB(e)?function(e){for(var n=eY.lastIndex=0;eY.test(e);)++n;return n}(e):tE(e)}function tY(e){return tB(e)?e.match(eY)||[]:e.split("")}function tZ(e){for(var n=e.length;n--&&et.test(e.charAt(n)););return n}var tX=tM({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tQ=function e(n){var r,et,ev,eb,e_=(n=null==n?e8:tQ.defaults(e8.Object(),n,tQ.pick(e8,eq))).Array,eE=n.Date,ew=n.Error,ex=n.Function,eC=n.Math,eS=n.Object,eD=n.RegExp,eN=n.String,eO=n.TypeError,eM=e_.prototype,eI=ex.prototype,eT=eS.prototype,ek=n["__core-js_shared__"],eP=eI.toString,eA=eT.hasOwnProperty,eL=0,ej=(r=/[^.]+$/.exec(ek&&ek.keys&&ek.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",eR=eT.toString,ez=eP.call(eS),eV=e8._,eF=eD("^"+eP.call(eA).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e$=te?n.Buffer:i,eB=n.Symbol,eH=n.Uint8Array,eK=e$?e$.allocUnsafe:i,eU=tK(eS.getPrototypeOf,eS),eY=eS.create,eX=eT.propertyIsEnumerable,e2=eM.splice,e5=eB?eB.isConcatSpreadable:i,e6=eB?eB.iterator:i,e9=eB?eB.toStringTag:i,e7=function(){try{var e=iy(eS,"defineProperty");return e({},"",{}),e}catch(e){}}(),tt=n.clearTimeout!==e8.clearTimeout&&n.clearTimeout,tn=eE&&eE.now!==e8.Date.now&&eE.now,tE=n.setTimeout!==e8.setTimeout&&n.setTimeout,tM=eC.ceil,tq=eC.floor,tJ=eS.getOwnPropertySymbols,t0=e$?e$.isBuffer:i,t1=n.isFinite,t2=eM.join,t3=tK(eS.keys,eS),t4=eC.max,t5=eC.min,t6=eE.now,t8=n.parseInt,t9=eC.random,t7=eM.reverse,ne=iy(n,"DataView"),nt=iy(n,"Map"),nn=iy(n,"Promise"),nr=iy(n,"Set"),ni=iy(n,"WeakMap"),no=iy(eS,"create"),ns=ni&&new ni,na={},nl=i$(ne),nh=i$(nt),nc=i$(nn),nu=i$(nr),nd=i$(ni),np=eB?eB.prototype:i,nf=np?np.valueOf:i,ng=np?np.toString:i;function ny(e){if(oX(e)&&!oV(e)&&!(e instanceof n_)){if(e instanceof nb)return e;if(eA.call(e,"__wrapped__"))return iB(e)}return new nb(e)}var nm=function(){function e(){}return function(n){if(!oZ(n))return{};if(eY)return eY(n);e.prototype=n;var r=new e;return e.prototype=i,r}}();function nv(){}function nb(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}function n_(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function nE(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function nw(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function nx(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}function nC(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new nx;++n<r;)this.add(e[n])}function nS(e){var n=this.__data__=new nw(e);this.size=n.size}function nD(e,n){var r=oV(e),i=!r&&oz(e),o=!r&&!i&&oH(e),s=!r&&!i&&!o&&o4(e),a=r||i||o||s,l=a?tk(e.length,eN):[],h=l.length;for(var c in e)(n||eA.call(e,c))&&!(a&&("length"==c||o&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ix(c,h)))&&l.push(c);return l}function nN(e){var n=e.length;return n?e[ru(0,n-1)]:i}ny.templateSettings={escape:W,evaluate:G,interpolate:Y,variable:"",imports:{_:ny}},ny.prototype=nv.prototype,ny.prototype.constructor=ny,nb.prototype=nm(nv.prototype),nb.prototype.constructor=nb,n_.prototype=nm(nv.prototype),n_.prototype.constructor=n_,nE.prototype.clear=function(){this.__data__=no?no(null):{},this.size=0},nE.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=!!n,n},nE.prototype.get=function(e){var n=this.__data__;if(no){var r=n[e];return r===s?i:r}return eA.call(n,e)?n[e]:i},nE.prototype.has=function(e){var n=this.__data__;return no?n[e]!==i:eA.call(n,e)},nE.prototype.set=function(e,n){var r=this.__data__;return this.size+=+!this.has(e),r[e]=no&&i===n?s:n,this},nw.prototype.clear=function(){this.__data__=[],this.size=0},nw.prototype.delete=function(e){var n=this.__data__,r=nI(n,e);return!(r<0)&&(r==n.length-1?n.pop():e2.call(n,r,1),--this.size,!0)},nw.prototype.get=function(e){var n=this.__data__,r=nI(n,e);return r<0?i:n[r][1]},nw.prototype.has=function(e){return nI(this.__data__,e)>-1},nw.prototype.set=function(e,n){var r=this.__data__,i=nI(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this},nx.prototype.clear=function(){this.size=0,this.__data__={hash:new nE,map:new(nt||nw),string:new nE}},nx.prototype.delete=function(e){var n=ip(this,e).delete(e);return this.size-=!!n,n},nx.prototype.get=function(e){return ip(this,e).get(e)},nx.prototype.has=function(e){return ip(this,e).has(e)},nx.prototype.set=function(e,n){var r=ip(this,e),i=r.size;return r.set(e,n),this.size+=+(r.size!=i),this},nC.prototype.add=nC.prototype.push=function(e){return this.__data__.set(e,s),this},nC.prototype.has=function(e){return this.__data__.has(e)};function nO(e,n,r){(i===r||oL(e[n],r))&&(i!==r||n in e)||nP(e,n,r)}function nM(e,n,r){var o=e[n];eA.call(e,n)&&oL(o,r)&&(i!==r||n in e)||nP(e,n,r)}function nI(e,n){for(var r=e.length;r--;)if(oL(e[r][0],n))return r;return -1}function nT(e,n,r,i){return nF(e,function(e,o,s){n(i,e,r(e),s)}),i}function nk(e,n){return e&&rH(n,sy(n),e)}function nP(e,n,r){"__proto__"==n&&e7?e7(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function nA(e,n){for(var r=-1,o=n.length,s=e_(o),a=null==e;++r<o;)s[r]=a?i:su(e,n[r]);return s}function nL(e,n,r){return e==e&&(i!==r&&(e=e<=r?e:r),i!==n&&(e=e>=n?e:n)),e}function nj(e,n,r,o,s,a){var l,h=1&n,c=2&n,d=4&n;if(r&&(l=s?r(e,o,s,a):r(e)),i!==l)return l;if(!oZ(e))return e;var g=oV(e);if(g){if(N=(w=e).length,V=new w.constructor(N),N&&"string"==typeof w[0]&&eA.call(w,"index")&&(V.index=w.index,V.input=w.input),l=V,!h)return rB(e,l)}else{var w,N,V,F,$,B,H,K,U=ib(e),W=U==y||U==m;if(oH(e))return rj(e,h);if(U==E||U==u||W&&!s){if(l=c||W?{}:iE(e),!h){return c?(F=e,$=(K=l)&&rH(e,sm(e),K),rH(F,iv(F),$)):(B=e,H=nk(l,e),rH(B,im(B),H))}}else{if(!e1[U])return s?e:{};l=function(e,n,r){var i,o,s=e.constructor;switch(n){case O:return rR(e);case p:case f:return new s(+e);case M:return i=r?rR(e.buffer):e.buffer,new e.constructor(i,e.byteOffset,e.byteLength);case I:case T:case k:case P:case A:case L:case j:case R:case z:return rz(e,r);case b:return new s;case _:case S:return new s(e);case x:return(o=new e.constructor(e.source,eh.exec(e))).lastIndex=e.lastIndex,o;case C:return new s;case D:return nf?eS(nf.call(e)):{}}}(e,U,h)}}a||(a=new nS);var G=a.get(e);if(G)return G;a.set(e,l),o1(e)?e.forEach(function(i){l.add(nj(i,n,r,i,e,a))}):oQ(e)&&e.forEach(function(i,o){l.set(o,nj(i,n,r,o,e,a))});var Y=d?c?il:ia:c?sm:sy,Z=g?i:Y(e);return tu(Z||e,function(i,o){Z&&(i=e[o=i]),nM(l,o,nj(i,n,r,o,e,a))}),l}function nR(e,n,r){var o=r.length;if(null==e)return!o;for(e=eS(e);o--;){var s=r[o],a=n[s],l=e[s];if(i===l&&!(s in e)||!a(l))return!1}return!0}function nz(e,n,r){if("function"!=typeof e)throw new eO(o);return iA(function(){e.apply(i,r)},n)}function nV(e,n,r,i){var o=-1,s=tf,a=!0,l=e.length,h=[],c=n.length;if(!l)return h;r&&(n=ty(n,tA(r))),i?(s=tg,a=!1):n.length>=200&&(s=tj,a=!1,n=new nC(n));e:for(;++o<l;){var u=e[o],d=null==r?u:r(u);if(u=i||0!==u?u:0,a&&d==d){for(var p=c;p--;)if(n[p]===d)continue e;h.push(u)}else s(n,d,i)||h.push(u)}return h}nS.prototype.clear=function(){this.__data__=new nw,this.size=0},nS.prototype.delete=function(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r},nS.prototype.get=function(e){return this.__data__.get(e)},nS.prototype.has=function(e){return this.__data__.has(e)},nS.prototype.set=function(e,n){var r=this.__data__;if(r instanceof nw){var i=r.__data__;if(!nt||i.length<199)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new nx(i)}return r.set(e,n),this.size=r.size,this};var nF=rW(nY),n$=rW(nZ,!0);function nB(e,n){var r=!0;return nF(e,function(e,i,o){return r=!!n(e,i,o)}),r}function nH(e,n,r){for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n(a);if(null!=l&&(i===h?l==l&&!o3(l):r(l,h)))var h=l,c=a}return c}function nK(e,n){var r=[];return nF(e,function(e,i,o){n(e,i,o)&&r.push(e)}),r}function nU(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=iw),o||(o=[]);++s<a;){var l=e[s];n>0&&r(l)?n>1?nU(l,n-1,r,i,o):tm(o,l):i||(o[o.length]=l)}return o}var nW=rG(),nG=rG(!0);function nY(e,n){return e&&nW(e,n,sy)}function nZ(e,n){return e&&nG(e,n,sy)}function nX(e,n){return tp(n,function(n){return oW(e[n])})}function nQ(e,n){n=rP(n,e);for(var r=0,o=n.length;null!=e&&r<o;)e=e[iF(n[r++])];return r&&r==o?e:i}function nq(e,n,r){var i=n(e);return oV(e)?i:tm(i,r(e))}function nJ(e){var n;return null==e?i===e?"[object Undefined]":"[object Null]":e9&&e9 in eS(e)?function(e){var n=eA.call(e,e9),r=e[e9];try{e[e9]=i;var o=!0}catch(e){}var s=eR.call(e);return o&&(n?e[e9]=r:delete e[e9]),s}(e):(n=e,eR.call(n))}function n0(e,n){return e>n}function n1(e,n){return null!=e&&eA.call(e,n)}function n2(e,n){return null!=e&&n in eS(e)}function n3(e,n,r){for(var o=r?tg:tf,s=e[0].length,a=e.length,l=a,h=e_(a),c=1/0,u=[];l--;){var d=e[l];l&&n&&(d=ty(d,tA(n))),c=t5(d.length,c),h[l]=!r&&(n||s>=120&&d.length>=120)?new nC(l&&d):i}d=e[0];var p=-1,f=h[0];e:for(;++p<s&&u.length<c;){var g=d[p],y=n?n(g):g;if(g=r||0!==g?g:0,!(f?tj(f,y):o(u,y,r))){for(l=a;--l;){var m=h[l];if(!(m?tj(m,y):o(e[l],y,r)))continue e}f&&f.push(y),u.push(g)}}return u}function n4(e,n,r){n=rP(n,e);var o=null==(e=iT(e,n))?e:e[iF(iJ(n))];return null==o?i:th(o,e,r)}function n5(e){return oX(e)&&nJ(e)==u}function n6(e,n,r,o,s){return e===n||(null!=e&&null!=n&&(oX(e)||oX(n))?function(e,n,r,o,s,a){var l=oV(e),h=oV(n),c=l?d:ib(e),y=h?d:ib(n);c=c==u?E:c,y=y==u?E:y;var m=c==E,w=y==E,N=c==y;if(N&&oH(e)){if(!oH(n))return!1;l=!0,m=!1}if(N&&!m)return a||(a=new nS),l||o4(e)?io(e,n,r,o,s,a):function(e,n,r,i,o,s,a){switch(r){case M:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)break;e=e.buffer,n=n.buffer;case O:if(e.byteLength!=n.byteLength||!s(new eH(e),new eH(n)))break;return!0;case p:case f:case _:return oL(+e,+n);case g:return e.name==n.name&&e.message==n.message;case x:case S:return e==n+"";case b:var l=tH;case C:var h=1&i;if(l||(l=tW),e.size!=n.size&&!h)break;var c=a.get(e);if(c)return c==n;i|=2,a.set(e,n);var u=io(l(e),l(n),i,o,s,a);return a.delete(e),u;case D:if(nf)return nf.call(e)==nf.call(n)}return!1}(e,n,c,r,o,s,a);if(!(1&r)){var I=m&&eA.call(e,"__wrapped__"),T=w&&eA.call(n,"__wrapped__");if(I||T){var k=I?e.value():e,P=T?n.value():n;return a||(a=new nS),s(k,P,r,o,a)}}return!!N&&(a||(a=new nS),function(e,n,r,o,s,a){var l=1&r,h=ia(e),c=h.length;if(c!=ia(n).length&&!l)return!1;for(var u=c;u--;){var d=h[u];if(!(l?d in n:eA.call(n,d)))return!1}var p=a.get(e),f=a.get(n);if(p&&f)return p==n&&f==e;var g=!0;a.set(e,n),a.set(n,e);for(var y=l;++u<c;){var m=e[d=h[u]],b=n[d];if(o)var _=l?o(b,m,d,n,e,a):o(m,b,d,e,n,a);if(!(i===_?m===b||s(m,b,r,o,a):_)){g=!1;break}y||(y="constructor"==d)}if(g&&!y){var E=e.constructor,w=n.constructor;E!=w&&"constructor"in e&&"constructor"in n&&!("function"==typeof E&&E instanceof E&&"function"==typeof w&&w instanceof w)&&(g=!1)}return a.delete(e),a.delete(n),g}(e,n,r,o,s,a))}(e,n,r,o,n6,s):e!=e&&n!=n)}function n8(e,n,r,o){var s=r.length,a=s,l=!o;if(null==e)return!a;for(e=eS(e);s--;){var h=r[s];if(l&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++s<a;){var c=(h=r[s])[0],u=e[c],d=h[1];if(l&&h[2]){if(i===u&&!(c in e))return!1}else{var p=new nS;if(o)var f=o(u,d,c,e,n,p);if(!(i===f?n6(d,u,3,o,p):f))return!1}}return!0}function n9(e){var n;return!(!oZ(e)||(n=e,ej&&ej in n))&&(oW(e)?eF:ed).test(i$(e))}function n7(e){return"function"==typeof e?e:null==e?sB:"object"==typeof e?oV(e)?ri(e[0],e[1]):rr(e):sQ(e)}function re(e){if(!iO(e))return t3(e);var n=[];for(var r in eS(e))eA.call(e,r)&&"constructor"!=r&&n.push(r);return n}function rt(e,n){return e<n}function rn(e,n){var r=-1,i=o$(e)?e_(e.length):[];return nF(e,function(e,o,s){i[++r]=n(e,o,s)}),i}function rr(e){var n=ig(e);return 1==n.length&&n[0][2]?iM(n[0][0],n[0][1]):function(r){return r===e||n8(r,e,n)}}function ri(e,n){var r;return iS(e)&&(r=n)==r&&!oZ(r)?iM(iF(e),n):function(r){var o=su(r,e);return i===o&&o===n?sd(r,e):n6(n,o,3)}}function ro(e,n,r,o,s){e!==n&&nW(n,function(a,l){if(s||(s=new nS),oZ(a))!function(e,n,r,o,s,a,l){var h=ik(e,r),c=ik(n,r),u=l.get(c);if(u)return nO(e,r,u);var d=a?a(h,c,r+"",e,n,l):i,p=i===d;if(p){var f=oV(c),g=!f&&oH(c),y=!f&&!g&&o4(c);d=c,f||g||y?oV(h)?d=h:oB(h)?d=rB(h):g?(p=!1,d=rj(c,!0)):y?(p=!1,d=rz(c,!0)):d=[]:oJ(c)||oz(c)?(d=h,oz(h)?d=sn(h):(!oZ(h)||oW(h))&&(d=iE(c))):p=!1}p&&(l.set(c,d),s(d,c,o,a,l),l.delete(c)),nO(e,r,d)}(e,n,l,r,ro,o,s);else{var h=o?o(ik(e,l),a,l+"",e,n,s):i;i===h&&(h=a),nO(e,l,h)}},sm)}function rs(e,n){var r=e.length;if(r)return ix(n+=n<0?r:0,r)?e[n]:i}function ra(e,n,r){n=n.length?ty(n,function(e){return oV(e)?function(n){return nQ(n,1===e.length?e[0]:e)}:e}):[sB];var i=-1;n=ty(n,tA(id()));var o=rn(e,function(e,r,o){return{criteria:ty(n,function(n){return n(e)}),index:++i,value:e}}),s=o.length;for(o.sort(function(e,n){return function(e,n,r){for(var i=-1,o=e.criteria,s=n.criteria,a=o.length,l=r.length;++i<a;){var h=rV(o[i],s[i]);if(h){if(i>=l)return h;return h*("desc"==r[i]?-1:1)}}return e.index-n.index}(e,n,r)});s--;)o[s]=o[s].value;return o}function rl(e,n,r){for(var i=-1,o=n.length,s={};++i<o;){var a=n[i],l=nQ(e,a);r(l,a)&&rf(s,rP(a,e),l)}return s}function rh(e,n,r,i){var o=i?tS:tC,s=-1,a=n.length,l=e;for(e===n&&(n=rB(n)),r&&(l=ty(e,tA(r)));++s<a;)for(var h=0,c=n[s],u=r?r(c):c;(h=o(l,u,h,i))>-1;)l!==e&&e2.call(l,h,1),e2.call(e,h,1);return e}function rc(e,n){for(var r=e?n.length:0,i=r-1;r--;){var o=n[r];if(r==i||o!==s){var s=o;ix(o)?e2.call(e,o,1):rS(e,o)}}return e}function ru(e,n){return e+tq(t9()*(n-e+1))}function rd(e,n){var r="";if(!e||n<1||n>0x1fffffffffffff)return r;do n%2&&(r+=e),(n=tq(n/2))&&(e+=e);while(n);return r}function rp(e,n){return iL(iI(e,n,sB),e+"")}function rf(e,n,r,o){if(!oZ(e))return e;n=rP(n,e);for(var s=-1,a=n.length,l=a-1,h=e;null!=h&&++s<a;){var c=iF(n[s]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)break;if(s!=l){var d=h[c];u=o?o(d,c,h):i,i===u&&(u=oZ(d)?d:ix(n[s+1])?[]:{})}nM(h,c,u),h=h[c]}return e}var rg=ns?function(e,n){return ns.set(e,n),e}:sB,ry=e7?function(e,n){return e7(e,"toString",{configurable:!0,enumerable:!1,value:sV(n),writable:!0})}:sB;function rm(e,n,r){var i=-1,o=e.length;n<0&&(n=-n>o?0:o+n),(r=r>o?o:r)<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var s=e_(o);++i<o;)s[i]=e[i+n];return s}function rv(e,n){var r;return nF(e,function(e,i,o){return!(r=n(e,i,o))}),!!r}function rb(e,n,r){var i=0,o=null==e?i:e.length;if("number"==typeof n&&n==n&&o<=0x7fffffff){for(;i<o;){var s=i+o>>>1,a=e[s];null!==a&&!o3(a)&&(r?a<=n:a<n)?i=s+1:o=s}return o}return r_(e,n,sB,r)}function r_(e,n,r,o){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var l=(n=r(n))!=n,h=null===n,c=o3(n),u=i===n;s<a;){var d=tq((s+a)/2),p=r(e[d]),f=i!==p,g=null===p,y=p==p,m=o3(p);if(l)var b=o||y;else b=u?y&&(o||f):h?y&&f&&(o||!g):c?y&&f&&!g&&(o||!m):!g&&!m&&(o?p<=n:p<n);b?s=d+1:a=d}return t5(a,0xfffffffe)}function rE(e,n){for(var r=-1,i=e.length,o=0,s=[];++r<i;){var a=e[r],l=n?n(a):a;if(!r||!oL(l,h)){var h=l;s[o++]=0===a?0:a}}return s}function rw(e){return"number"==typeof e?e:o3(e)?h:+e}function rx(e){if("string"==typeof e)return e;if(oV(e))return ty(e,rx)+"";if(o3(e))return ng?ng.call(e):"";var n=e+"";return"0"==n&&1/e==-l?"-0":n}function rC(e,n,r){var i=-1,o=tf,s=e.length,a=!0,l=[],h=l;if(r)a=!1,o=tg;else if(s>=200){var c=n?null:r9(e);if(c)return tW(c);a=!1,o=tj,h=new nC}else h=n?[]:l;e:for(;++i<s;){var u=e[i],d=n?n(u):u;if(u=r||0!==u?u:0,a&&d==d){for(var p=h.length;p--;)if(h[p]===d)continue e;n&&h.push(d),l.push(u)}else o(h,d,r)||(h!==l&&h.push(d),l.push(u))}return l}function rS(e,n){return n=rP(n,e),null==(e=iT(e,n))||delete e[iF(iJ(n))]}function rD(e,n,r,i){return rf(e,n,r(nQ(e,n)),i)}function rN(e,n,r,i){for(var o=e.length,s=i?o:-1;(i?s--:++s<o)&&n(e[s],s,e););return r?rm(e,i?0:s,i?s+1:o):rm(e,i?s+1:0,i?o:s)}function rO(e,n){var r=e;return r instanceof n_&&(r=r.value()),tv(n,function(e,n){return n.func.apply(n.thisArg,tm([e],n.args))},r)}function rM(e,n,r){var i=e.length;if(i<2)return i?rC(e[0]):[];for(var o=-1,s=e_(i);++o<i;)for(var a=e[o],l=-1;++l<i;)l!=o&&(s[o]=nV(s[o]||a,e[l],n,r));return rC(nU(s,1),n,r)}function rI(e,n,r){for(var o=-1,s=e.length,a=n.length,l={};++o<s;){var h=o<a?n[o]:i;r(l,e[o],h)}return l}function rT(e){return oB(e)?e:[]}function rk(e){return"function"==typeof e?e:sB}function rP(e,n){return oV(e)?e:iS(e,n)?[e]:iV(sr(e))}function rA(e,n,r){var o=e.length;return r=i===r?o:r,!n&&r>=o?e:rm(e,n,r)}var rL=tt||function(e){return e8.clearTimeout(e)};function rj(e,n){if(n)return e.slice();var r=e.length,i=eK?eK(r):new e.constructor(r);return e.copy(i),i}function rR(e){var n=new e.constructor(e.byteLength);return new eH(n).set(new eH(e)),n}function rz(e,n){var r=n?rR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function rV(e,n){if(e!==n){var r=i!==e,o=null===e,s=e==e,a=o3(e),l=i!==n,h=null===n,c=n==n,u=o3(n);if(!h&&!u&&!a&&e>n||a&&l&&c&&!h&&!u||o&&l&&c||!r&&c||!s)return 1;if(!o&&!a&&!u&&e<n||u&&r&&s&&!o&&!a||h&&r&&s||!l&&s||!c)return -1}return 0}function rF(e,n,r,i){for(var o=-1,s=e.length,a=r.length,l=-1,h=n.length,c=t4(s-a,0),u=e_(h+c),d=!i;++l<h;)u[l]=n[l];for(;++o<a;)(d||o<s)&&(u[r[o]]=e[o]);for(;c--;)u[l++]=e[o++];return u}function r$(e,n,r,i){for(var o=-1,s=e.length,a=-1,l=r.length,h=-1,c=n.length,u=t4(s-l,0),d=e_(u+c),p=!i;++o<u;)d[o]=e[o];for(var f=o;++h<c;)d[f+h]=n[h];for(;++a<l;)(p||o<s)&&(d[f+r[a]]=e[o++]);return d}function rB(e,n){var r=-1,i=e.length;for(n||(n=e_(i));++r<i;)n[r]=e[r];return n}function rH(e,n,r,o){var s=!r;r||(r={});for(var a=-1,l=n.length;++a<l;){var h=n[a],c=o?o(r[h],e[h],h,r,e):i;i===c&&(c=e[h]),s?nP(r,h,c):nM(r,h,c)}return r}function rK(e,n){return function(r,i){var o=oV(r)?tc:nT,s=n?n():{};return o(r,e,id(i,2),s)}}function rU(e){return rp(function(n,r){var o=-1,s=r.length,a=s>1?r[s-1]:i,l=s>2?r[2]:i;for(a=e.length>3&&"function"==typeof a?(s--,a):i,l&&iC(r[0],r[1],l)&&(a=s<3?i:a,s=1),n=eS(n);++o<s;){var h=r[o];h&&e(n,h,o,a)}return n})}function rW(e,n){return function(r,i){if(null==r)return r;if(!o$(r))return e(r,i);for(var o=r.length,s=n?o:-1,a=eS(r);(n?s--:++s<o)&&!1!==i(a[s],s,a););return r}}function rG(e){return function(n,r,i){for(var o=-1,s=eS(n),a=i(n),l=a.length;l--;){var h=a[e?l:++o];if(!1===r(s[h],h,s))break}return n}}function rY(e){return function(n){var r=tB(n=sr(n))?tY(n):i,o=r?r[0]:n.charAt(0),s=r?rA(r,1).join(""):n.slice(1);return o[e]()+s}}function rZ(e){return function(n){return tv(sj(sO(n).replace(eW,"")),e,"")}}function rX(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=nm(e.prototype),i=e.apply(r,n);return oZ(i)?i:r}}function rQ(e){return function(n,r,o){var s=eS(n);if(!o$(n)){var a=id(r,3);n=sy(n),r=function(e){return a(s[e],e,s)}}var l=e(n,r,o);return l>-1?s[a?n[l]:l]:i}}function rq(e){return is(function(n){var r=n.length,s=r,a=nb.prototype.thru;for(e&&n.reverse();s--;){var l=n[s];if("function"!=typeof l)throw new eO(o);if(a&&!h&&"wrapper"==ic(l))var h=new nb([],!0)}for(s=h?s:r;++s<r;){var c=ic(l=n[s]),u="wrapper"==c?ih(l):i;h=u&&iD(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?h[ic(u[0])].apply(h,u[3]):1==l.length&&iD(l)?h[c]():h.thru(l)}return function(){var e=arguments,i=e[0];if(h&&1==e.length&&oV(i))return h.plant(i).value();for(var o=0,s=r?n[o].apply(this,e):i;++o<r;)s=n[o].call(this,s);return s}})}function rJ(e,n,r,o,s,a,l,h,c,u){var d=128&n,p=1&n,f=2&n,g=24&n,y=512&n,m=f?i:rX(e);function b(){for(var _=arguments.length,E=e_(_),w=_;w--;)E[w]=arguments[w];if(g)var x=iu(b),C=function(e,n){for(var r=e.length,i=0;r--;)e[r]===n&&++i;return i}(E,x);if(o&&(E=rF(E,o,s,g)),a&&(E=r$(E,a,l,g)),_-=C,g&&_<u){var S=tU(E,x);return r6(e,n,rJ,b.placeholder,r,E,S,h,c,u-_)}var D=p?r:this,N=f?D[e]:e;return _=E.length,h?E=function(e,n){for(var r=e.length,o=t5(n.length,r),s=rB(e);o--;){var a=n[o];e[o]=ix(a,r)?s[a]:i}return e}(E,h):y&&_>1&&E.reverse(),d&&c<_&&(E.length=c),this&&this!==e8&&this instanceof b&&(N=m||rX(N)),N.apply(D,E)}return b}function r0(e,n){return function(r,i){var o,s;return o=n(i),s={},nY(r,function(n,r,i){e(s,o(n),r,i)}),s}}function r1(e,n){return function(r,o){var s;if(i===r&&i===o)return n;if(i!==r&&(s=r),i!==o){if(i===s)return o;"string"==typeof r||"string"==typeof o?(r=rx(r),o=rx(o)):(r=rw(r),o=rw(o)),s=e(r,o)}return s}}function r2(e){return is(function(n){return n=ty(n,tA(id())),rp(function(r){var i=this;return e(n,function(e){return th(e,i,r)})})})}function r3(e,n){var r=(n=i===n?" ":rx(n)).length;if(r<2)return r?rd(n,e):n;var o=rd(n,tM(e/tG(n)));return tB(n)?rA(tY(o),0,e).join(""):o.slice(0,e)}function r4(e){return function(n,r,o){o&&"number"!=typeof o&&iC(n,r,o)&&(r=o=i),n=o9(n),i===r?(r=n,n=0):r=o9(r),o=i===o?n<r?1:-1:o9(o);for(var s=n,a=r,l=o,h=-1,c=t4(tM((a-s)/(l||1)),0),u=e_(c);c--;)u[e?c:++h]=s,s+=l;return u}}function r5(e){return function(n,r){return("string"!=typeof n||"string"!=typeof r)&&(n=st(n),r=st(r)),e(n,r)}}function r6(e,n,r,o,s,a,l,h,c,u){var d=8&n,p=d?l:i,f=d?i:l,g=d?a:i,y=d?i:a;n|=d?32:64,4&(n&=~(d?64:32))||(n&=-4);var m=[e,n,s,g,p,y,f,h,c,u],b=r.apply(i,m);return iD(e)&&iP(b,m),b.placeholder=o,ij(b,e,n)}function r8(e){var n=eC[e];return function(e,r){if(e=st(e),(r=null==r?0:t5(o7(r),292))&&t1(e)){var i=(sr(e)+"e").split("e");return+((i=(sr(n(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(i[1]-r))}return n(e)}}var r9=nr&&1/tW(new nr([,-0]))[1]==l?function(e){return new nr(e)}:sG;function r7(e){return function(n){var r,i,o=ib(n);return o==b?tH(n):o==C?(r=-1,i=Array(n.size),n.forEach(function(e){i[++r]=[e,e]}),i):ty(e(n),function(e){return[e,n[e]]})}}function ie(e,n,r,s,l,h,c,u){var d=2&n;if(!d&&"function"!=typeof e)throw new eO(o);var p=s?s.length:0;if(p||(n&=-97,s=l=i),c=i===c?c:t4(o7(c),0),u=i===u?u:o7(u),p-=l?l.length:0,64&n){var f=s,g=l;s=l=i}var y=d?i:ih(e),m=[e,n,r,s,l,f,g,h,c,u];if(y&&function(e,n){var r=e[1],i=n[1],o=r|i,s=o<131,l=128==i&&8==r||128==i&&256==r&&e[7].length<=n[8]||384==i&&n[7].length<=n[8]&&8==r;if(s||l){1&i&&(e[2]=n[2],o|=1&r?0:4);var h=n[3];if(h){var c=e[3];e[3]=c?rF(c,h,n[4]):h,e[4]=c?tU(e[3],a):n[4]}(h=n[5])&&(c=e[5],e[5]=c?r$(c,h,n[6]):h,e[6]=c?tU(e[5],a):n[6]),(h=n[7])&&(e[7]=h),128&i&&(e[8]=null==e[8]?n[8]:t5(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=o}}(m,y),e=m[0],n=m[1],r=m[2],s=m[3],l=m[4],(u=m[9]=m[9]===i?d?0:e.length:t4(m[9]-p,0))||!(24&n)||(n&=-25),n&&1!=n)8==n||16==n?I=function(e,n,r){var o=rX(e);function s(){for(var a=arguments.length,l=e_(a),h=a,c=iu(s);h--;)l[h]=arguments[h];var u=a<3&&l[0]!==c&&l[a-1]!==c?[]:tU(l,c);return(a-=u.length)<r?r6(e,n,rJ,s.placeholder,i,l,u,i,i,r-a):th(this&&this!==e8&&this instanceof s?o:e,this,l)}return s}(e,n,u):32!=n&&33!=n||l.length?I=rJ.apply(i,m):(b=e,_=n,E=r,w=s,x=1&_,C=rX(b),I=function e(){for(var n=-1,r=arguments.length,i=-1,o=w.length,s=e_(o+r),a=this&&this!==e8&&this instanceof e?C:b;++i<o;)s[i]=w[i];for(;r--;)s[i++]=arguments[++n];return th(a,x?E:this,s)});else var b,_,E,w,x,C,S,D,N,O,M,I=(S=e,D=n,N=r,O=1&D,M=rX(S),function e(){return(this&&this!==e8&&this instanceof e?M:S).apply(O?N:this,arguments)});return ij((y?rg:iP)(I,m),e,n)}function it(e,n,r,o){return i===e||oL(e,eT[r])&&!eA.call(o,r)?n:e}function ir(e,n,r,o,s,a){return oZ(e)&&oZ(n)&&(a.set(n,e),ro(e,n,i,ir,a),a.delete(n)),e}function ii(e){return oJ(e)?i:e}function io(e,n,r,o,s,a){var l=1&r,h=e.length,c=n.length;if(h!=c&&!(l&&c>h))return!1;var u=a.get(e),d=a.get(n);if(u&&d)return u==n&&d==e;var p=-1,f=!0,g=2&r?new nC:i;for(a.set(e,n),a.set(n,e);++p<h;){var y=e[p],m=n[p];if(o)var b=l?o(m,y,p,n,e,a):o(y,m,p,e,n,a);if(i!==b){if(b)continue;f=!1;break}if(g){if(!t_(n,function(e,n){if(!tj(g,n)&&(y===e||s(y,e,r,o,a)))return g.push(n)})){f=!1;break}}else if(!(y===m||s(y,m,r,o,a))){f=!1;break}}return a.delete(e),a.delete(n),f}function is(e){return iL(iI(e,i,iY),e+"")}function ia(e){return nq(e,sy,im)}function il(e){return nq(e,sm,iv)}var ih=ns?function(e){return ns.get(e)}:sG;function ic(e){for(var n=e.name+"",r=na[n],i=eA.call(na,n)?r.length:0;i--;){var o=r[i],s=o.func;if(null==s||s==e)return o.name}return n}function iu(e){return(eA.call(ny,"placeholder")?ny:e).placeholder}function id(){var e=ny.iteratee||sH;return e=e===sH?n7:e,arguments.length?e(arguments[0],arguments[1]):e}function ip(e,n){var r,i,o=e.__data__;return("string"==(i=typeof(r=n))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?o["string"==typeof n?"string":"hash"]:o.map}function ig(e){for(var n=sy(e),r=n.length;r--;){var i,o=n[r],s=e[o];n[r]=[o,s,(i=s)==i&&!oZ(i)]}return n}function iy(e,n){var r=null==e?i:e[n];return n9(r)?r:i}var im=tJ?function(e){return null==e?[]:tp(tJ(e=eS(e)),function(n){return eX.call(e,n)})}:s0,iv=tJ?function(e){for(var n=[];e;)tm(n,im(e)),e=eU(e);return n}:s0,ib=nJ;function i_(e,n,r){n=rP(n,e);for(var i=-1,o=n.length,s=!1;++i<o;){var a=iF(n[i]);if(!(s=null!=e&&r(e,a)))break;e=e[a]}return s||++i!=o?s:!!(o=null==e?0:e.length)&&oY(o)&&ix(a,o)&&(oV(e)||oz(e))}function iE(e){return"function"!=typeof e.constructor||iO(e)?{}:nm(eU(e))}function iw(e){return oV(e)||oz(e)||!!(e5&&e&&e[e5])}function ix(e,n){var r=typeof e;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&ef.test(e))&&e>-1&&e%1==0&&e<n}function iC(e,n,r){if(!oZ(r))return!1;var i=typeof n;return("number"==i?!!(o$(r)&&ix(n,r.length)):"string"==i&&n in r)&&oL(r[n],e)}function iS(e,n){if(oV(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||o3(e))||X.test(e)||!Z.test(e)||null!=n&&e in eS(n)}function iD(e){var n=ic(e),r=ny[n];if("function"!=typeof r||!(n in n_.prototype))return!1;if(e===r)return!0;var i=ih(r);return!!i&&e===i[0]}(ne&&ib(new ne(new ArrayBuffer(1)))!=M||nt&&ib(new nt)!=b||nn&&ib(nn.resolve())!=w||nr&&ib(new nr)!=C||ni&&ib(new ni)!=N)&&(ib=function(e){var n=nJ(e),r=n==E?e.constructor:i,o=r?i$(r):"";if(o)switch(o){case nl:return M;case nh:return b;case nc:return w;case nu:return C;case nd:return N}return n});var iN=ek?oW:s1;function iO(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||eT)}function iM(e,n){return function(r){return null!=r&&r[e]===n&&(i!==n||e in eS(r))}}function iI(e,n,r){return n=t4(i===n?e.length-1:n,0),function(){for(var i=arguments,o=-1,s=t4(i.length-n,0),a=e_(s);++o<s;)a[o]=i[n+o];o=-1;for(var l=e_(n+1);++o<n;)l[o]=i[o];return l[n]=r(a),th(e,this,l)}}function iT(e,n){return n.length<2?e:nQ(e,rm(n,0,-1))}function ik(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var iP=iR(rg),iA=tE||function(e,n){return e8.setTimeout(e,n)},iL=iR(ry);function ij(e,n,r){var i,o,s,a=n+"";return iL(e,function(e,n){var r=n.length;if(!r)return e;var i=r-1;return n[i]=(r>1?"& ":"")+n[i],n=n.join(r>2?", ":" "),e.replace(en,"{\n/* [wrapped with "+n+"] */\n")}(a,(i=(s=a.match(er))?s[1].split(ei):[],o=r,tu(c,function(e){var n="_."+e[0];o&e[1]&&!tf(i,n)&&i.push(n)}),i.sort())))}function iR(e){var n=0,r=0;return function(){var o=t6(),s=16-(o-r);if(r=o,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(i,arguments)}}function iz(e,n){var r=-1,o=e.length,s=o-1;for(n=i===n?o:n;++r<n;){var a=ru(r,s),l=e[a];e[a]=e[r],e[r]=l}return e.length=n,e}var iV=(ev=(et=oM(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(Q,function(e,r,i,o){n.push(i?o.replace(ea,"$1"):r||e)}),n},function(e){return 500===ev.size&&ev.clear(),e})).cache,et);function iF(e){if("string"==typeof e||o3(e))return e;var n=e+"";return"0"==n&&1/e==-l?"-0":n}function i$(e){if(null!=e){try{return eP.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function iB(e){if(e instanceof n_)return e.clone();var n=new nb(e.__wrapped__,e.__chain__);return n.__actions__=rB(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var iH=rp(function(e,n){return oB(e)?nV(e,nU(n,1,oB,!0)):[]}),iK=rp(function(e,n){var r=iJ(n);return oB(r)&&(r=i),oB(e)?nV(e,nU(n,1,oB,!0),id(r,2)):[]}),iU=rp(function(e,n){var r=iJ(n);return oB(r)&&(r=i),oB(e)?nV(e,nU(n,1,oB,!0),i,r):[]});function iW(e,n,r){var i=null==e?0:e.length;if(!i)return -1;var o=null==r?0:o7(r);return o<0&&(o=t4(i+o,0)),tx(e,id(n,3),o)}function iG(e,n,r){var o=null==e?0:e.length;if(!o)return -1;var s=o-1;return i!==r&&(s=o7(r),s=r<0?t4(o+s,0):t5(s,o-1)),tx(e,id(n,3),s,!0)}function iY(e){return(null==e?0:e.length)?nU(e,1):[]}function iZ(e){return e&&e.length?e[0]:i}var iX=rp(function(e){var n=ty(e,rT);return n.length&&n[0]===e[0]?n3(n):[]}),iQ=rp(function(e){var n=iJ(e),r=ty(e,rT);return n===iJ(r)?n=i:r.pop(),r.length&&r[0]===e[0]?n3(r,id(n,2)):[]}),iq=rp(function(e){var n=iJ(e),r=ty(e,rT);return(n="function"==typeof n?n:i)&&r.pop(),r.length&&r[0]===e[0]?n3(r,i,n):[]});function iJ(e){var n=null==e?0:e.length;return n?e[n-1]:i}var i0=rp(i1);function i1(e,n){return e&&e.length&&n&&n.length?rh(e,n):e}var i2=is(function(e,n){var r=null==e?0:e.length,i=nA(e,n);return rc(e,ty(n,function(e){return ix(e,r)?+e:e}).sort(rV)),i});function i3(e){return null==e?e:t7.call(e)}var i4=rp(function(e){return rC(nU(e,1,oB,!0))}),i5=rp(function(e){var n=iJ(e);return oB(n)&&(n=i),rC(nU(e,1,oB,!0),id(n,2))}),i6=rp(function(e){var n=iJ(e);return n="function"==typeof n?n:i,rC(nU(e,1,oB,!0),i,n)});function i8(e){if(!(e&&e.length))return[];var n=0;return e=tp(e,function(e){if(oB(e))return n=t4(e.length,n),!0}),tk(n,function(n){return ty(e,tO(n))})}function i9(e,n){if(!(e&&e.length))return[];var r=i8(e);return null==n?r:ty(r,function(e){return th(n,i,e)})}var i7=rp(function(e,n){return oB(e)?nV(e,n):[]}),oe=rp(function(e){return rM(tp(e,oB))}),ot=rp(function(e){var n=iJ(e);return oB(n)&&(n=i),rM(tp(e,oB),id(n,2))}),on=rp(function(e){var n=iJ(e);return n="function"==typeof n?n:i,rM(tp(e,oB),i,n)}),or=rp(i8),oi=rp(function(e){var n=e.length,r=n>1?e[n-1]:i;return r="function"==typeof r?(e.pop(),r):i,i9(e,r)});function oo(e){var n=ny(e);return n.__chain__=!0,n}function os(e,n){return n(e)}var oa=is(function(e){var n=e.length,r=n?e[0]:0,o=this.__wrapped__,s=function(n){return nA(n,e)};return!(n>1)&&!this.__actions__.length&&o instanceof n_&&ix(r)?((o=o.slice(r,+r+ +!!n)).__actions__.push({func:os,args:[s],thisArg:i}),new nb(o,this.__chain__).thru(function(e){return n&&!e.length&&e.push(i),e})):this.thru(s)}),ol=rK(function(e,n,r){eA.call(e,r)?++e[r]:nP(e,r,1)}),oh=rQ(iW),oc=rQ(iG);function ou(e,n){return(oV(e)?tu:nF)(e,id(n,3))}function od(e,n){return(oV(e)?function(e,n){for(var r=null==e?0:e.length;r--&&!1!==n(e[r],r,e););return e}:n$)(e,id(n,3))}var op=rK(function(e,n,r){eA.call(e,r)?e[r].push(n):nP(e,r,[n])}),of=rp(function(e,n,r){var i=-1,o="function"==typeof n,s=o$(e)?e_(e.length):[];return nF(e,function(e){s[++i]=o?th(n,e,r):n4(e,n,r)}),s}),og=rK(function(e,n,r){nP(e,r,n)});function oy(e,n){return(oV(e)?ty:rn)(e,id(n,3))}var om=rK(function(e,n,r){e[+!r].push(n)},function(){return[[],[]]}),ov=rp(function(e,n){if(null==e)return[];var r=n.length;return r>1&&iC(e,n[0],n[1])?n=[]:r>2&&iC(n[0],n[1],n[2])&&(n=[n[0]]),ra(e,nU(n,1),[])}),ob=tn||function(){return e8.Date.now()};function o_(e,n,r){return n=r?i:n,n=e&&null==n?e.length:n,ie(e,128,i,i,i,i,n)}function oE(e,n){var r;if("function"!=typeof n)throw new eO(o);return e=o7(e),function(){return--e>0&&(r=n.apply(this,arguments)),e<=1&&(n=i),r}}var ow=rp(function(e,n,r){var i=1;if(r.length){var o=tU(r,iu(ow));i|=32}return ie(e,i,n,r,o)}),ox=rp(function(e,n,r){var i=3;if(r.length){var o=tU(r,iu(ox));i|=32}return ie(n,i,e,r,o)});function oC(e,n,r){n=r?i:n;var o=ie(e,8,i,i,i,i,i,n);return o.placeholder=oC.placeholder,o}function oS(e,n,r){n=r?i:n;var o=ie(e,16,i,i,i,i,i,n);return o.placeholder=oS.placeholder,o}function oD(e,n,r){var s,a,l,h,c,u,d=0,p=!1,f=!1,g=!0;if("function"!=typeof e)throw new eO(o);function y(n){var r=s,o=a;return s=a=i,d=n,h=e.apply(o,r)}function m(e){var r=e-u,o=e-d;return i===u||r>=n||r<0||f&&o>=l}function b(){var e,r,i,o=ob();if(m(o))return _(o);c=iA(b,(e=o-u,r=o-d,i=n-e,f?t5(i,l-r):i))}function _(e){return(c=i,g&&s)?y(e):(s=a=i,h)}function E(){var e,r=ob(),o=m(r);if(s=arguments,a=this,u=r,o){if(i===c)return d=e=u,c=iA(b,n),p?y(e):h;if(f)return rL(c),c=iA(b,n),y(u)}return i===c&&(c=iA(b,n)),h}return n=st(n)||0,oZ(r)&&(p=!!r.leading,l=(f="maxWait"in r)?t4(st(r.maxWait)||0,n):l,g="trailing"in r?!!r.trailing:g),E.cancel=function(){i!==c&&rL(c),d=0,s=u=a=c=i},E.flush=function(){return i===c?h:_(ob())},E}var oN=rp(function(e,n){return nz(e,1,n)}),oO=rp(function(e,n,r){return nz(e,st(n)||0,r)});function oM(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new eO(o);var r=function(){var i=arguments,o=n?n.apply(this,i):i[0],s=r.cache;if(s.has(o))return s.get(o);var a=e.apply(this,i);return r.cache=s.set(o,a)||s,a};return r.cache=new(oM.Cache||nx),r}function oI(e){if("function"!=typeof e)throw new eO(o);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}oM.Cache=nx;var oT=rp(function(e,n){var r=(n=1==n.length&&oV(n[0])?ty(n[0],tA(id())):ty(nU(n,1),tA(id()))).length;return rp(function(i){for(var o=-1,s=t5(i.length,r);++o<s;)i[o]=n[o].call(this,i[o]);return th(e,this,i)})}),ok=rp(function(e,n){var r=tU(n,iu(ok));return ie(e,32,i,n,r)}),oP=rp(function(e,n){var r=tU(n,iu(oP));return ie(e,64,i,n,r)}),oA=is(function(e,n){return ie(e,256,i,i,i,n)});function oL(e,n){return e===n||e!=e&&n!=n}var oj=r5(n0),oR=r5(function(e,n){return e>=n}),oz=n5(function(){return arguments}())?n5:function(e){return oX(e)&&eA.call(e,"callee")&&!eX.call(e,"callee")},oV=e_.isArray,oF=tr?tA(tr):function(e){return oX(e)&&nJ(e)==O};function o$(e){return null!=e&&oY(e.length)&&!oW(e)}function oB(e){return oX(e)&&o$(e)}var oH=t0||s1,oK=ti?tA(ti):function(e){return oX(e)&&nJ(e)==f};function oU(e){if(!oX(e))return!1;var n=nJ(e);return n==g||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!oJ(e)}function oW(e){if(!oZ(e))return!1;var n=nJ(e);return n==y||n==m||"[object AsyncFunction]"==n||"[object Proxy]"==n}function oG(e){return"number"==typeof e&&e==o7(e)}function oY(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function oZ(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function oX(e){return null!=e&&"object"==typeof e}var oQ=to?tA(to):function(e){return oX(e)&&ib(e)==b};function oq(e){return"number"==typeof e||oX(e)&&nJ(e)==_}function oJ(e){if(!oX(e)||nJ(e)!=E)return!1;var n=eU(e);if(null===n)return!0;var r=eA.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&eP.call(r)==ez}var o0=ts?tA(ts):function(e){return oX(e)&&nJ(e)==x},o1=ta?tA(ta):function(e){return oX(e)&&ib(e)==C};function o2(e){return"string"==typeof e||!oV(e)&&oX(e)&&nJ(e)==S}function o3(e){return"symbol"==typeof e||oX(e)&&nJ(e)==D}var o4=tl?tA(tl):function(e){return oX(e)&&oY(e.length)&&!!e0[nJ(e)]},o5=r5(rt),o6=r5(function(e,n){return e<=n});function o8(e){if(!e)return[];if(o$(e))return o2(e)?tY(e):rB(e);if(e6&&e[e6]){for(var n,r=e[e6](),i=[];!(n=r.next()).done;)i.push(n.value);return i}var o=ib(e);return(o==b?tH:o==C?tW:sS)(e)}function o9(e){return e?(e=st(e))===l||e===-l?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function o7(e){var n=o9(e),r=n%1;return n==n?r?n-r:n:0}function se(e){return e?nL(o7(e),0,0xffffffff):0}function st(e){if("number"==typeof e)return e;if(o3(e))return h;if(oZ(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=oZ(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=tP(e);var r=eu.test(e);return r||ep.test(e)?e4(e.slice(2),r?2:8):ec.test(e)?h:+e}function sn(e){return rH(e,sm(e))}function sr(e){return null==e?"":rx(e)}var si=rU(function(e,n){if(iO(n)||o$(n))return void rH(n,sy(n),e);for(var r in n)eA.call(n,r)&&nM(e,r,n[r])}),so=rU(function(e,n){rH(n,sm(n),e)}),ss=rU(function(e,n,r,i){rH(n,sm(n),e,i)}),sa=rU(function(e,n,r,i){rH(n,sy(n),e,i)}),sl=is(nA),sh=rp(function(e,n){e=eS(e);var r=-1,o=n.length,s=o>2?n[2]:i;for(s&&iC(n[0],n[1],s)&&(o=1);++r<o;)for(var a=n[r],l=sm(a),h=-1,c=l.length;++h<c;){var u=l[h],d=e[u];(i===d||oL(d,eT[u])&&!eA.call(e,u))&&(e[u]=a[u])}return e}),sc=rp(function(e){return e.push(i,ir),th(sb,i,e)});function su(e,n,r){var o=null==e?i:nQ(e,n);return i===o?r:o}function sd(e,n){return null!=e&&i_(e,n,n2)}var sp=r0(function(e,n,r){null!=n&&"function"!=typeof n.toString&&(n=eR.call(n)),e[n]=r},sV(sB)),sf=r0(function(e,n,r){null!=n&&"function"!=typeof n.toString&&(n=eR.call(n)),eA.call(e,n)?e[n].push(r):e[n]=[r]},id),sg=rp(n4);function sy(e){return o$(e)?nD(e):re(e)}function sm(e){return o$(e)?nD(e,!0):function(e){if(!oZ(e)){var n=e,r=[];if(null!=n)for(var i in eS(n))r.push(i);return r}var o=iO(e),s=[];for(var a in e)"constructor"==a&&(o||!eA.call(e,a))||s.push(a);return s}(e)}var sv=rU(function(e,n,r){ro(e,n,r)}),sb=rU(function(e,n,r,i){ro(e,n,r,i)}),s_=is(function(e,n){var r={};if(null==e)return r;var i=!1;n=ty(n,function(n){return n=rP(n,e),i||(i=n.length>1),n}),rH(e,il(e),r),i&&(r=nj(r,7,ii));for(var o=n.length;o--;)rS(r,n[o]);return r}),sE=is(function(e,n){return null==e?{}:rl(e,n,function(n,r){return sd(e,r)})});function sw(e,n){if(null==e)return{};var r=ty(il(e),function(e){return[e]});return n=id(n),rl(e,r,function(e,r){return n(e,r[0])})}var sx=r7(sy),sC=r7(sm);function sS(e){return null==e?[]:tL(e,sy(e))}var sD=rZ(function(e,n,r){return n=n.toLowerCase(),e+(r?sN(n):n)});function sN(e){return sL(sr(e).toLowerCase())}function sO(e){return(e=sr(e))&&e.replace(eg,tV).replace(eG,"")}var sM=rZ(function(e,n,r){return e+(r?"-":"")+n.toLowerCase()}),sI=rZ(function(e,n,r){return e+(r?" ":"")+n.toLowerCase()}),sT=rY("toLowerCase"),sk=rZ(function(e,n,r){return e+(r?"_":"")+n.toLowerCase()}),sP=rZ(function(e,n,r){return e+(r?" ":"")+sL(n)}),sA=rZ(function(e,n,r){return e+(r?" ":"")+n.toUpperCase()}),sL=rY("toUpperCase");function sj(e,n,r){if(e=sr(e),n=r?i:n,i===n){var o;return(o=e,eQ.test(o))?e.match(eZ)||[]:e.match(eo)||[]}return e.match(n)||[]}var sR=rp(function(e,n){try{return th(e,i,n)}catch(e){return oU(e)?e:new ew(e)}}),sz=is(function(e,n){return tu(n,function(n){nP(e,n=iF(n),ow(e[n],e))}),e});function sV(e){return function(){return e}}var sF=rq(),s$=rq(!0);function sB(e){return e}function sH(e){return n7("function"==typeof e?e:nj(e,1))}var sK=rp(function(e,n){return function(r){return n4(r,e,n)}}),sU=rp(function(e,n){return function(r){return n4(e,r,n)}});function sW(e,n,r){var i=sy(n),o=nX(n,i);null!=r||oZ(n)&&(o.length||!i.length)||(r=n,n=e,e=this,o=nX(n,sy(n)));var s=!(oZ(r)&&"chain"in r)||!!r.chain,a=oW(e);return tu(o,function(r){var i=n[r];e[r]=i,a&&(e.prototype[r]=function(){var n=this.__chain__;if(s||n){var r=e(this.__wrapped__);return(r.__actions__=rB(this.__actions__)).push({func:i,args:arguments,thisArg:e}),r.__chain__=n,r}return i.apply(e,tm([this.value()],arguments))})}),e}function sG(){}var sY=r2(ty),sZ=r2(td),sX=r2(t_);function sQ(e){return iS(e)?tO(iF(e)):function(n){return nQ(n,e)}}var sq=r4(),sJ=r4(!0);function s0(){return[]}function s1(){return!1}var s2=r1(function(e,n){return e+n},0),s3=r8("ceil"),s4=r1(function(e,n){return e/n},1),s5=r8("floor"),s6=r1(function(e,n){return e*n},1),s8=r8("round"),s9=r1(function(e,n){return e-n},0);return ny.after=function(e,n){if("function"!=typeof n)throw new eO(o);return e=o7(e),function(){if(--e<1)return n.apply(this,arguments)}},ny.ary=o_,ny.assign=si,ny.assignIn=so,ny.assignInWith=ss,ny.assignWith=sa,ny.at=sl,ny.before=oE,ny.bind=ow,ny.bindAll=sz,ny.bindKey=ox,ny.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return oV(e)?e:[e]},ny.chain=oo,ny.chunk=function(e,n,r){n=(r?iC(e,n,r):i===n)?1:t4(o7(n),0);var o=null==e?0:e.length;if(!o||n<1)return[];for(var s=0,a=0,l=e_(tM(o/n));s<o;)l[a++]=rm(e,s,s+=n);return l},ny.compact=function(e){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];s&&(o[i++]=s)}return o},ny.concat=function(){var e=arguments.length;if(!e)return[];for(var n=e_(e-1),r=arguments[0],i=e;i--;)n[i-1]=arguments[i];return tm(oV(r)?rB(r):[r],nU(n,1))},ny.cond=function(e){var n=null==e?0:e.length,r=id();return e=n?ty(e,function(e){if("function"!=typeof e[1])throw new eO(o);return[r(e[0]),e[1]]}):[],rp(function(r){for(var i=-1;++i<n;){var o=e[i];if(th(o[0],this,r))return th(o[1],this,r)}})},ny.conforms=function(e){var n,r;return r=sy(n=nj(e,1)),function(e){return nR(e,n,r)}},ny.constant=sV,ny.countBy=ol,ny.create=function(e,n){var r=nm(e);return null==n?r:nk(r,n)},ny.curry=oC,ny.curryRight=oS,ny.debounce=oD,ny.defaults=sh,ny.defaultsDeep=sc,ny.defer=oN,ny.delay=oO,ny.difference=iH,ny.differenceBy=iK,ny.differenceWith=iU,ny.drop=function(e,n,r){var o=null==e?0:e.length;return o?rm(e,(n=r||i===n?1:o7(n))<0?0:n,o):[]},ny.dropRight=function(e,n,r){var o=null==e?0:e.length;return o?rm(e,0,(n=o-(n=r||i===n?1:o7(n)))<0?0:n):[]},ny.dropRightWhile=function(e,n){return e&&e.length?rN(e,id(n,3),!0,!0):[]},ny.dropWhile=function(e,n){return e&&e.length?rN(e,id(n,3),!0):[]},ny.fill=function(e,n,r,o){var s=null==e?0:e.length;if(!s)return[];r&&"number"!=typeof r&&iC(e,n,r)&&(r=0,o=s);var a=r,l=o,h=e.length;for((a=o7(a))<0&&(a=-a>h?0:h+a),(l=i===l||l>h?h:o7(l))<0&&(l+=h),l=a>l?0:se(l);a<l;)e[a++]=n;return e},ny.filter=function(e,n){return(oV(e)?tp:nK)(e,id(n,3))},ny.flatMap=function(e,n){return nU(oy(e,n),1)},ny.flatMapDeep=function(e,n){return nU(oy(e,n),l)},ny.flatMapDepth=function(e,n,r){return r=i===r?1:o7(r),nU(oy(e,n),r)},ny.flatten=iY,ny.flattenDeep=function(e){return(null==e?0:e.length)?nU(e,l):[]},ny.flattenDepth=function(e,n){return(null==e?0:e.length)?nU(e,n=i===n?1:o7(n)):[]},ny.flip=function(e){return ie(e,512)},ny.flow=sF,ny.flowRight=s$,ny.fromPairs=function(e){for(var n=-1,r=null==e?0:e.length,i={};++n<r;){var o=e[n];i[o[0]]=o[1]}return i},ny.functions=function(e){return null==e?[]:nX(e,sy(e))},ny.functionsIn=function(e){return null==e?[]:nX(e,sm(e))},ny.groupBy=op,ny.initial=function(e){return(null==e?0:e.length)?rm(e,0,-1):[]},ny.intersection=iX,ny.intersectionBy=iQ,ny.intersectionWith=iq,ny.invert=sp,ny.invertBy=sf,ny.invokeMap=of,ny.iteratee=sH,ny.keyBy=og,ny.keys=sy,ny.keysIn=sm,ny.map=oy,ny.mapKeys=function(e,n){var r={};return n=id(n,3),nY(e,function(e,i,o){nP(r,n(e,i,o),e)}),r},ny.mapValues=function(e,n){var r={};return n=id(n,3),nY(e,function(e,i,o){nP(r,i,n(e,i,o))}),r},ny.matches=function(e){return rr(nj(e,1))},ny.matchesProperty=function(e,n){return ri(e,nj(n,1))},ny.memoize=oM,ny.merge=sv,ny.mergeWith=sb,ny.method=sK,ny.methodOf=sU,ny.mixin=sW,ny.negate=oI,ny.nthArg=function(e){return e=o7(e),rp(function(n){return rs(n,e)})},ny.omit=s_,ny.omitBy=function(e,n){return sw(e,oI(id(n)))},ny.once=function(e){return oE(2,e)},ny.orderBy=function(e,n,r,o){return null==e?[]:(oV(n)||(n=null==n?[]:[n]),oV(r=o?i:r)||(r=null==r?[]:[r]),ra(e,n,r))},ny.over=sY,ny.overArgs=oT,ny.overEvery=sZ,ny.overSome=sX,ny.partial=ok,ny.partialRight=oP,ny.partition=om,ny.pick=sE,ny.pickBy=sw,ny.property=sQ,ny.propertyOf=function(e){return function(n){return null==e?i:nQ(e,n)}},ny.pull=i0,ny.pullAll=i1,ny.pullAllBy=function(e,n,r){return e&&e.length&&n&&n.length?rh(e,n,id(r,2)):e},ny.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?rh(e,n,i,r):e},ny.pullAt=i2,ny.range=sq,ny.rangeRight=sJ,ny.rearg=oA,ny.reject=function(e,n){return(oV(e)?tp:nK)(e,oI(id(n,3)))},ny.remove=function(e,n){var r=[];if(!(e&&e.length))return r;var i=-1,o=[],s=e.length;for(n=id(n,3);++i<s;){var a=e[i];n(a,i,e)&&(r.push(a),o.push(i))}return rc(e,o),r},ny.rest=function(e,n){if("function"!=typeof e)throw new eO(o);return rp(e,n=i===n?n:o7(n))},ny.reverse=i3,ny.sampleSize=function(e,n,r){return n=(r?iC(e,n,r):i===n)?1:o7(n),(oV(e)?function(e,n){return iz(rB(e),nL(n,0,e.length))}:function(e,n){var r=sS(e);return iz(r,nL(n,0,r.length))})(e,n)},ny.set=function(e,n,r){return null==e?e:rf(e,n,r)},ny.setWith=function(e,n,r,o){return o="function"==typeof o?o:i,null==e?e:rf(e,n,r,o)},ny.shuffle=function(e){return(oV(e)?function(e){return iz(rB(e))}:function(e){return iz(sS(e))})(e)},ny.slice=function(e,n,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&iC(e,n,r)?(n=0,r=o):(n=null==n?0:o7(n),r=i===r?o:o7(r)),rm(e,n,r)):[]},ny.sortBy=ov,ny.sortedUniq=function(e){return e&&e.length?rE(e):[]},ny.sortedUniqBy=function(e,n){return e&&e.length?rE(e,id(n,2)):[]},ny.split=function(e,n,r){return(r&&"number"!=typeof r&&iC(e,n,r)&&(n=r=i),r=i===r?0xffffffff:r>>>0)?(e=sr(e))&&("string"==typeof n||null!=n&&!o0(n))&&!(n=rx(n))&&tB(e)?rA(tY(e),0,r):e.split(n,r):[]},ny.spread=function(e,n){if("function"!=typeof e)throw new eO(o);return n=null==n?0:t4(o7(n),0),rp(function(r){var i=r[n],o=rA(r,0,n);return i&&tm(o,i),th(e,this,o)})},ny.tail=function(e){var n=null==e?0:e.length;return n?rm(e,1,n):[]},ny.take=function(e,n,r){return e&&e.length?rm(e,0,(n=r||i===n?1:o7(n))<0?0:n):[]},ny.takeRight=function(e,n,r){var o=null==e?0:e.length;return o?rm(e,(n=o-(n=r||i===n?1:o7(n)))<0?0:n,o):[]},ny.takeRightWhile=function(e,n){return e&&e.length?rN(e,id(n,3),!1,!0):[]},ny.takeWhile=function(e,n){return e&&e.length?rN(e,id(n,3)):[]},ny.tap=function(e,n){return n(e),e},ny.throttle=function(e,n,r){var i=!0,s=!0;if("function"!=typeof e)throw new eO(o);return oZ(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),oD(e,n,{leading:i,maxWait:n,trailing:s})},ny.thru=os,ny.toArray=o8,ny.toPairs=sx,ny.toPairsIn=sC,ny.toPath=function(e){return oV(e)?ty(e,iF):o3(e)?[e]:rB(iV(sr(e)))},ny.toPlainObject=sn,ny.transform=function(e,n,r){var i=oV(e),o=i||oH(e)||o4(e);if(n=id(n,4),null==r){var s=e&&e.constructor;r=o?i?new s:[]:oZ(e)&&oW(s)?nm(eU(e)):{}}return(o?tu:nY)(e,function(e,i,o){return n(r,e,i,o)}),r},ny.unary=function(e){return o_(e,1)},ny.union=i4,ny.unionBy=i5,ny.unionWith=i6,ny.uniq=function(e){return e&&e.length?rC(e):[]},ny.uniqBy=function(e,n){return e&&e.length?rC(e,id(n,2)):[]},ny.uniqWith=function(e,n){return n="function"==typeof n?n:i,e&&e.length?rC(e,i,n):[]},ny.unset=function(e,n){return null==e||rS(e,n)},ny.unzip=i8,ny.unzipWith=i9,ny.update=function(e,n,r){return null==e?e:rD(e,n,rk(r))},ny.updateWith=function(e,n,r,o){return o="function"==typeof o?o:i,null==e?e:rD(e,n,rk(r),o)},ny.values=sS,ny.valuesIn=function(e){return null==e?[]:tL(e,sm(e))},ny.without=i7,ny.words=sj,ny.wrap=function(e,n){return ok(rk(n),e)},ny.xor=oe,ny.xorBy=ot,ny.xorWith=on,ny.zip=or,ny.zipObject=function(e,n){return rI(e||[],n||[],nM)},ny.zipObjectDeep=function(e,n){return rI(e||[],n||[],rf)},ny.zipWith=oi,ny.entries=sx,ny.entriesIn=sC,ny.extend=so,ny.extendWith=ss,sW(ny,ny),ny.add=s2,ny.attempt=sR,ny.camelCase=sD,ny.capitalize=sN,ny.ceil=s3,ny.clamp=function(e,n,r){return i===r&&(r=n,n=i),i!==r&&(r=(r=st(r))==r?r:0),i!==n&&(n=(n=st(n))==n?n:0),nL(st(e),n,r)},ny.clone=function(e){return nj(e,4)},ny.cloneDeep=function(e){return nj(e,5)},ny.cloneDeepWith=function(e,n){return nj(e,5,n="function"==typeof n?n:i)},ny.cloneWith=function(e,n){return nj(e,4,n="function"==typeof n?n:i)},ny.conformsTo=function(e,n){return null==n||nR(e,n,sy(n))},ny.deburr=sO,ny.defaultTo=function(e,n){return null==e||e!=e?n:e},ny.divide=s4,ny.endsWith=function(e,n,r){e=sr(e),n=rx(n);var o=e.length,s=r=i===r?o:nL(o7(r),0,o);return(r-=n.length)>=0&&e.slice(r,s)==n},ny.eq=oL,ny.escape=function(e){return(e=sr(e))&&U.test(e)?e.replace(H,tF):e},ny.escapeRegExp=function(e){return(e=sr(e))&&J.test(e)?e.replace(q,"\\$&"):e},ny.every=function(e,n,r){var o=oV(e)?td:nB;return r&&iC(e,n,r)&&(n=i),o(e,id(n,3))},ny.find=oh,ny.findIndex=iW,ny.findKey=function(e,n){return tw(e,id(n,3),nY)},ny.findLast=oc,ny.findLastIndex=iG,ny.findLastKey=function(e,n){return tw(e,id(n,3),nZ)},ny.floor=s5,ny.forEach=ou,ny.forEachRight=od,ny.forIn=function(e,n){return null==e?e:nW(e,id(n,3),sm)},ny.forInRight=function(e,n){return null==e?e:nG(e,id(n,3),sm)},ny.forOwn=function(e,n){return e&&nY(e,id(n,3))},ny.forOwnRight=function(e,n){return e&&nZ(e,id(n,3))},ny.get=su,ny.gt=oj,ny.gte=oR,ny.has=function(e,n){return null!=e&&i_(e,n,n1)},ny.hasIn=sd,ny.head=iZ,ny.identity=sB,ny.includes=function(e,n,r,i){e=o$(e)?e:sS(e),r=r&&!i?o7(r):0;var o=e.length;return r<0&&(r=t4(o+r,0)),o2(e)?r<=o&&e.indexOf(n,r)>-1:!!o&&tC(e,n,r)>-1},ny.indexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return -1;var o=null==r?0:o7(r);return o<0&&(o=t4(i+o,0)),tC(e,n,o)},ny.inRange=function(e,n,r){var o,s,a;return n=o9(n),i===r?(r=n,n=0):r=o9(r),(o=e=st(e))>=t5(s=n,a=r)&&o<t4(s,a)},ny.invoke=sg,ny.isArguments=oz,ny.isArray=oV,ny.isArrayBuffer=oF,ny.isArrayLike=o$,ny.isArrayLikeObject=oB,ny.isBoolean=function(e){return!0===e||!1===e||oX(e)&&nJ(e)==p},ny.isBuffer=oH,ny.isDate=oK,ny.isElement=function(e){return oX(e)&&1===e.nodeType&&!oJ(e)},ny.isEmpty=function(e){if(null==e)return!0;if(o$(e)&&(oV(e)||"string"==typeof e||"function"==typeof e.splice||oH(e)||o4(e)||oz(e)))return!e.length;var n=ib(e);if(n==b||n==C)return!e.size;if(iO(e))return!re(e).length;for(var r in e)if(eA.call(e,r))return!1;return!0},ny.isEqual=function(e,n){return n6(e,n)},ny.isEqualWith=function(e,n,r){var o=(r="function"==typeof r?r:i)?r(e,n):i;return i===o?n6(e,n,i,r):!!o},ny.isError=oU,ny.isFinite=function(e){return"number"==typeof e&&t1(e)},ny.isFunction=oW,ny.isInteger=oG,ny.isLength=oY,ny.isMap=oQ,ny.isMatch=function(e,n){return e===n||n8(e,n,ig(n))},ny.isMatchWith=function(e,n,r){return r="function"==typeof r?r:i,n8(e,n,ig(n),r)},ny.isNaN=function(e){return oq(e)&&e!=+e},ny.isNative=function(e){if(iN(e))throw new ew("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n9(e)},ny.isNil=function(e){return null==e},ny.isNull=function(e){return null===e},ny.isNumber=oq,ny.isObject=oZ,ny.isObjectLike=oX,ny.isPlainObject=oJ,ny.isRegExp=o0,ny.isSafeInteger=function(e){return oG(e)&&e>=-0x1fffffffffffff&&e<=0x1fffffffffffff},ny.isSet=o1,ny.isString=o2,ny.isSymbol=o3,ny.isTypedArray=o4,ny.isUndefined=function(e){return i===e},ny.isWeakMap=function(e){return oX(e)&&ib(e)==N},ny.isWeakSet=function(e){return oX(e)&&"[object WeakSet]"==nJ(e)},ny.join=function(e,n){return null==e?"":t2.call(e,n)},ny.kebabCase=sM,ny.last=iJ,ny.lastIndexOf=function(e,n,r){var o=null==e?0:e.length;if(!o)return -1;var s=o;return i!==r&&(s=(s=o7(r))<0?t4(o+s,0):t5(s,o-1)),n==n?function(e,n,r){for(var i=r+1;i--&&e[i]!==n;);return i}(e,n,s):tx(e,tD,s,!0)},ny.lowerCase=sI,ny.lowerFirst=sT,ny.lt=o5,ny.lte=o6,ny.max=function(e){return e&&e.length?nH(e,sB,n0):i},ny.maxBy=function(e,n){return e&&e.length?nH(e,id(n,2),n0):i},ny.mean=function(e){return tN(e,sB)},ny.meanBy=function(e,n){return tN(e,id(n,2))},ny.min=function(e){return e&&e.length?nH(e,sB,rt):i},ny.minBy=function(e,n){return e&&e.length?nH(e,id(n,2),rt):i},ny.stubArray=s0,ny.stubFalse=s1,ny.stubObject=function(){return{}},ny.stubString=function(){return""},ny.stubTrue=function(){return!0},ny.multiply=s6,ny.nth=function(e,n){return e&&e.length?rs(e,o7(n)):i},ny.noConflict=function(){return e8._===this&&(e8._=eV),this},ny.noop=sG,ny.now=ob,ny.pad=function(e,n,r){e=sr(e);var i=(n=o7(n))?tG(e):0;if(!n||i>=n)return e;var o=(n-i)/2;return r3(tq(o),r)+e+r3(tM(o),r)},ny.padEnd=function(e,n,r){e=sr(e);var i=(n=o7(n))?tG(e):0;return n&&i<n?e+r3(n-i,r):e},ny.padStart=function(e,n,r){e=sr(e);var i=(n=o7(n))?tG(e):0;return n&&i<n?r3(n-i,r)+e:e},ny.parseInt=function(e,n,r){return r||null==n?n=0:n&&(n*=1),t8(sr(e).replace(ee,""),n||0)},ny.random=function(e,n,r){if(r&&"boolean"!=typeof r&&iC(e,n,r)&&(n=r=i),i===r&&("boolean"==typeof n?(r=n,n=i):"boolean"==typeof e&&(r=e,e=i)),i===e&&i===n?(e=0,n=1):(e=o9(e),i===n?(n=e,e=0):n=o9(n)),e>n){var o=e;e=n,n=o}if(r||e%1||n%1){var s=t9();return t5(e+s*(n-e+e3("1e-"+((s+"").length-1))),n)}return ru(e,n)},ny.reduce=function(e,n,r){var i=oV(e)?tv:tI,o=arguments.length<3;return i(e,id(n,4),r,o,nF)},ny.reduceRight=function(e,n,r){var i=oV(e)?tb:tI,o=arguments.length<3;return i(e,id(n,4),r,o,n$)},ny.repeat=function(e,n,r){return n=(r?iC(e,n,r):i===n)?1:o7(n),rd(sr(e),n)},ny.replace=function(){var e=arguments,n=sr(e[0]);return e.length<3?n:n.replace(e[1],e[2])},ny.result=function(e,n,r){n=rP(n,e);var o=-1,s=n.length;for(s||(s=1,e=i);++o<s;){var a=null==e?i:e[iF(n[o])];i===a&&(o=s,a=r),e=oW(a)?a.call(e):a}return e},ny.round=s8,ny.runInContext=e,ny.sample=function(e){return(oV(e)?nN:function(e){return nN(sS(e))})(e)},ny.size=function(e){if(null==e)return 0;if(o$(e))return o2(e)?tG(e):e.length;var n=ib(e);return n==b||n==C?e.size:re(e).length},ny.snakeCase=sk,ny.some=function(e,n,r){var o=oV(e)?t_:rv;return r&&iC(e,n,r)&&(n=i),o(e,id(n,3))},ny.sortedIndex=function(e,n){return rb(e,n)},ny.sortedIndexBy=function(e,n,r){return r_(e,n,id(r,2))},ny.sortedIndexOf=function(e,n){var r=null==e?0:e.length;if(r){var i=rb(e,n);if(i<r&&oL(e[i],n))return i}return -1},ny.sortedLastIndex=function(e,n){return rb(e,n,!0)},ny.sortedLastIndexBy=function(e,n,r){return r_(e,n,id(r,2),!0)},ny.sortedLastIndexOf=function(e,n){if(null==e?0:e.length){var r=rb(e,n,!0)-1;if(oL(e[r],n))return r}return -1},ny.startCase=sP,ny.startsWith=function(e,n,r){return e=sr(e),r=null==r?0:nL(o7(r),0,e.length),n=rx(n),e.slice(r,r+n.length)==n},ny.subtract=s9,ny.sum=function(e){return e&&e.length?tT(e,sB):0},ny.sumBy=function(e,n){return e&&e.length?tT(e,id(n,2)):0},ny.template=function(e,n,r){var o=ny.templateSettings;r&&iC(e,n,r)&&(n=i),e=sr(e),n=ss({},n,o,it);var s,a,l=ss({},n.imports,o.imports,it),h=sy(l),c=tL(l,h),u=0,d=n.interpolate||ey,p="__p += '",f=eD((n.escape||ey).source+"|"+d.source+"|"+(d===Y?el:ey).source+"|"+(n.evaluate||ey).source+"|$","g"),g="//# sourceURL="+(eA.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eJ+"]")+"\n";e.replace(f,function(n,r,i,o,l,h){return i||(i=o),p+=e.slice(u,h).replace(em,t$),r&&(s=!0,p+="' +\n__e("+r+") +\n'"),l&&(a=!0,p+="';\n"+l+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=h+n.length,n}),p+="';\n";var y=eA.call(n,"variable")&&n.variable;if(y){if(es.test(y))throw new ew("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(V,""):p).replace(F,"$1").replace($,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=sR(function(){return ex(h,g+"return "+p).apply(i,c)});if(m.source=p,oU(m))throw m;return m},ny.times=function(e,n){if((e=o7(e))<1||e>0x1fffffffffffff)return[];var r=0xffffffff,i=t5(e,0xffffffff);n=id(n),e-=0xffffffff;for(var o=tk(i,n);++r<e;)n(r);return o},ny.toFinite=o9,ny.toInteger=o7,ny.toLength=se,ny.toLower=function(e){return sr(e).toLowerCase()},ny.toNumber=st,ny.toSafeInteger=function(e){return e?nL(o7(e),-0x1fffffffffffff,0x1fffffffffffff):0===e?e:0},ny.toString=sr,ny.toUpper=function(e){return sr(e).toUpperCase()},ny.trim=function(e,n,r){if((e=sr(e))&&(r||i===n))return tP(e);if(!e||!(n=rx(n)))return e;var o=tY(e),s=tY(n),a=tR(o,s),l=tz(o,s)+1;return rA(o,a,l).join("")},ny.trimEnd=function(e,n,r){if((e=sr(e))&&(r||i===n))return e.slice(0,tZ(e)+1);if(!e||!(n=rx(n)))return e;var o=tY(e),s=tz(o,tY(n))+1;return rA(o,0,s).join("")},ny.trimStart=function(e,n,r){if((e=sr(e))&&(r||i===n))return e.replace(ee,"");if(!e||!(n=rx(n)))return e;var o=tY(e),s=tR(o,tY(n));return rA(o,s).join("")},ny.truncate=function(e,n){var r=30,o="...";if(oZ(n)){var s="separator"in n?n.separator:s;r="length"in n?o7(n.length):r,o="omission"in n?rx(n.omission):o}var a=(e=sr(e)).length;if(tB(e)){var l=tY(e);a=l.length}if(r>=a)return e;var h=r-tG(o);if(h<1)return o;var c=l?rA(l,0,h).join(""):e.slice(0,h);if(i===s)return c+o;if(l&&(h+=c.length-h),o0(s)){if(e.slice(h).search(s)){var u,d=c;for(s.global||(s=eD(s.source,sr(eh.exec(s))+"g")),s.lastIndex=0;u=s.exec(d);)var p=u.index;c=c.slice(0,i===p?h:p)}}else if(e.indexOf(rx(s),h)!=h){var f=c.lastIndexOf(s);f>-1&&(c=c.slice(0,f))}return c+o},ny.unescape=function(e){return(e=sr(e))&&K.test(e)?e.replace(B,tX):e},ny.uniqueId=function(e){var n=++eL;return sr(e)+n},ny.upperCase=sA,ny.upperFirst=sL,ny.each=ou,ny.eachRight=od,ny.first=iZ,sW(ny,(eb={},nY(ny,function(e,n){eA.call(ny.prototype,n)||(eb[n]=e)}),eb),{chain:!1}),ny.VERSION="4.17.21",tu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ny[e].placeholder=ny}),tu(["drop","take"],function(e,n){n_.prototype[e]=function(r){r=i===r?1:t4(o7(r),0);var o=this.__filtered__&&!n?new n_(this):this.clone();return o.__filtered__?o.__takeCount__=t5(r,o.__takeCount__):o.__views__.push({size:t5(r,0xffffffff),type:e+(o.__dir__<0?"Right":"")}),o},n_.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),tu(["filter","map","takeWhile"],function(e,n){var r=n+1,i=1==r||3==r;n_.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:id(e,3),type:r}),n.__filtered__=n.__filtered__||i,n}}),tu(["head","last"],function(e,n){var r="take"+(n?"Right":"");n_.prototype[e]=function(){return this[r](1).value()[0]}}),tu(["initial","tail"],function(e,n){var r="drop"+(n?"":"Right");n_.prototype[e]=function(){return this.__filtered__?new n_(this):this[r](1)}}),n_.prototype.compact=function(){return this.filter(sB)},n_.prototype.find=function(e){return this.filter(e).head()},n_.prototype.findLast=function(e){return this.reverse().find(e)},n_.prototype.invokeMap=rp(function(e,n){return"function"==typeof e?new n_(this):this.map(function(r){return n4(r,e,n)})}),n_.prototype.reject=function(e){return this.filter(oI(id(e)))},n_.prototype.slice=function(e,n){e=o7(e);var r=this;return r.__filtered__&&(e>0||n<0)?new n_(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),i!==n&&(r=(n=o7(n))<0?r.dropRight(-n):r.take(n-e)),r)},n_.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},n_.prototype.toArray=function(){return this.take(0xffffffff)},nY(n_.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),s=ny[o?"take"+("last"==n?"Right":""):n],a=o||/^find/.test(n);s&&(ny.prototype[n]=function(){var n=this.__wrapped__,l=o?[1]:arguments,h=n instanceof n_,c=l[0],u=h||oV(n),d=function(e){var n=s.apply(ny,tm([e],l));return o&&p?n[0]:n};u&&r&&"function"==typeof c&&1!=c.length&&(h=u=!1);var p=this.__chain__,f=!!this.__actions__.length,g=a&&!p,y=h&&!f;if(!a&&u){n=y?n:new n_(this);var m=e.apply(n,l);return m.__actions__.push({func:os,args:[d],thisArg:i}),new nb(m,p)}return g&&y?e.apply(this,l):(m=this.thru(d),g?o?m.value()[0]:m.value():m)})}),tu(["pop","push","shift","sort","splice","unshift"],function(e){var n=eM[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);ny.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var o=this.value();return n.apply(oV(o)?o:[],e)}return this[r](function(r){return n.apply(oV(r)?r:[],e)})}}),nY(n_.prototype,function(e,n){var r=ny[n];if(r){var i=r.name+"";eA.call(na,i)||(na[i]=[]),na[i].push({name:n,func:r})}}),na[rJ(i,2).name]=[{name:"wrapper",func:i}],n_.prototype.clone=function(){var e=new n_(this.__wrapped__);return e.__actions__=rB(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rB(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rB(this.__views__),e},n_.prototype.reverse=function(){if(this.__filtered__){var e=new n_(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},n_.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,r=oV(e),i=n<0,o=r?e.length:0,s=function(e,n,r){for(var i=-1,o=r.length;++i<o;){var s=r[i],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":n-=a;break;case"take":n=t5(n,e+a);break;case"takeRight":e=t4(e,n-a)}}return{start:e,end:n}}(0,o,this.__views__),a=s.start,l=s.end,h=l-a,c=i?l:a-1,u=this.__iteratees__,d=u.length,p=0,f=t5(h,this.__takeCount__);if(!r||!i&&o==h&&f==h)return rO(e,this.__actions__);var g=[];e:for(;h--&&p<f;){for(var y=-1,m=e[c+=n];++y<d;){var b=u[y],_=b.iteratee,E=b.type,w=_(m);if(2==E)m=w;else if(!w)if(1==E)continue e;else break e}g[p++]=m}return g},ny.prototype.at=oa,ny.prototype.chain=function(){return oo(this)},ny.prototype.commit=function(){return new nb(this.value(),this.__chain__)},ny.prototype.next=function(){this.__values__===i&&(this.__values__=o8(this.value()));var e=this.__index__>=this.__values__.length,n=e?i:this.__values__[this.__index__++];return{done:e,value:n}},ny.prototype.plant=function(e){for(var n,r=this;r instanceof nv;){var o=iB(r);o.__index__=0,o.__values__=i,n?s.__wrapped__=o:n=o;var s=o;r=r.__wrapped__}return s.__wrapped__=e,n},ny.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof n_){var n=e;return this.__actions__.length&&(n=new n_(this)),(n=n.reverse()).__actions__.push({func:os,args:[i3],thisArg:i}),new nb(n,this.__chain__)}return this.thru(i3)},ny.prototype.toJSON=ny.prototype.valueOf=ny.prototype.value=function(){return rO(this.__wrapped__,this.__actions__)},ny.prototype.first=ny.prototype.head,e6&&(ny.prototype[e6]=function(){return this}),ny}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e8._=tQ,define(function(){return tQ})):e7?((e7.exports=tQ)._=tQ,e9._=tQ):e8._=tQ}).call(this)},6492:function(e,n,r){var i=r(5117),o=r(3862),s=r(229);e.exports=function(e){return e&&e.length?i(e,s,o):void 0}},7997:function(e,n,r){var i=r(5678);function o(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw TypeError("Expected a function");var r=function(){var i=arguments,o=n?n.apply(this,i):i[0],s=r.cache;if(s.has(o))return s.get(o);var a=e.apply(this,i);return r.cache=s.set(o,a)||s,a};return r.cache=new(o.Cache||i),r}o.Cache=i,e.exports=o},8469:function(e,n,r){var i=r(2133);e.exports=r(6948)(function(e,n,r){i(e,n,r)})},1607:function(e){e.exports=function(){}},231:function(e,n,r){var i=r(3250);e.exports=function(){return i.Date.now()}},3352:function(e,n,r){var i=r(9233),o=r(8361),s=r(1928),a=r(4007),l=r(8618),h=r(492),c=r(3273),u=r(5713);e.exports=c(function(e,n){var r={};if(null==e)return r;var c=!1;n=i(n,function(n){return n=a(n,e),c||(c=n.length>1),n}),l(e,u(e),r),c&&(r=o(r,7,h));for(var d=n.length;d--;)s(r,n[d]);return r})},9335:function(e,n,r){var i=r(1785);e.exports=r(3273)(function(e,n){return null==e?{}:i(e,n)})},6226:function(e,n,r){var i=r(2619);e.exports=function(e,n,r){return null==e?e:i(e,n,r)}},4506:function(e){e.exports=function(){return[]}},7999:function(e){e.exports=function(){return!1}},4633:function(e,n,r){var i=r(7837),o=r(3702);e.exports=function(e,n,r){var s=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return o(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),i(e,n,{leading:s,maxWait:n,trailing:a})}},9558:function(e,n,r){var i=r(9153),o=1/0;e.exports=function(e){return e?(e=i(e))===o||e===-o?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},6843:function(e,n,r){var i=r(9558);e.exports=function(e){var n=i(e),r=n%1;return n==n?r?n-r:n:0}},9153:function(e,n,r){var i=r(1656),o=r(3702),s=r(2624),a=0/0,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return a;if(o(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=o(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var r=h.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):l.test(e)?a:+e}},6222:function(e,n,r){var i=r(8618),o=r(9882);e.exports=function(e){return i(e,o(e))}},9835:function(e,n,r){var i=r(6245);e.exports=function(e){return null==e?"":i(e)}},292:function(e,n,r){var i=r(135);e.exports=function(e){return e&&e.length?i(e):[]}},1682:function(e,n,r){var i=r(71),o=r(414);e.exports=function(e){return null==e?[]:i(e,o(e))}},1772:function(e,n,r){"use strict";var i=r(5148);function o(){}function s(){}s.resetWarningCache=o,e.exports=function(){function e(e,n,r,o,s,a){if(a!==i){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function n(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:s,resetWarningCache:o};return r.PropTypes=r,r}},7862:function(e,n,r){e.exports=r(1772)()},5148:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4507:function(e,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,h=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,E=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case i:switch(e=e.type){case u:case d:case s:case l:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case m:case y:case h:return e;default:return n}}case o:return n}}}function C(e){return x(e)===d}n.AsyncMode=u,n.ConcurrentMode=d,n.ContextConsumer=c,n.ContextProvider=h,n.Element=i,n.ForwardRef=p,n.Fragment=s,n.Lazy=m,n.Memo=y,n.Portal=o,n.Profiler=l,n.StrictMode=a,n.Suspense=f,n.isAsyncMode=function(e){return C(e)||x(e)===u},n.isConcurrentMode=C,n.isContextConsumer=function(e){return x(e)===c},n.isContextProvider=function(e){return x(e)===h},n.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},n.isForwardRef=function(e){return x(e)===p},n.isFragment=function(e){return x(e)===s},n.isLazy=function(e){return x(e)===m},n.isMemo=function(e){return x(e)===y},n.isPortal=function(e){return x(e)===o},n.isProfiler=function(e){return x(e)===l},n.isStrictMode=function(e){return x(e)===a},n.isSuspense=function(e){return x(e)===f},n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===l||e===a||e===f||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===y||e.$$typeof===h||e.$$typeof===c||e.$$typeof===p||e.$$typeof===_||e.$$typeof===E||e.$$typeof===w||e.$$typeof===b)},n.typeOf=x},9415:function(e,n,r){"use strict";e.exports=r(4507)},2369:function(e,n){"use strict";var r,i=Symbol.for("react.element"),o=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");r=Symbol.for("react.module.reference"),n.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===l||e===a||e===p||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===h||e.$$typeof===c||e.$$typeof===d||e.$$typeof===r||void 0!==e.getModuleId)||!1},n.typeOf=function(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case i:switch(e=e.type){case s:case l:case a:case p:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case y:case g:case h:return e;default:return n}}case o:return n}}}},7101:function(e,n,r){"use strict";e.exports=r(2369)},1236:function(e){e.exports=function(e,n,r,i){var o=r?r.call(i,e,n):void 0;if(void 0!==o)return!!o;if(e===n)return!0;if("object"!=typeof e||!e||"object"!=typeof n||!n)return!1;var s=Object.keys(e),a=Object.keys(n);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),h=0;h<s.length;h++){var c=s[h];if(!l(c))return!1;var u=e[c],d=n[c];if(!1===(o=r?r.call(i,u,d,c):void 0)||void 0===o&&u!==d)return!1}return!0}},3254:function(e,n,r){"use strict";r.d(n,{iv:()=>eE,ZP:()=>eI});var i,o,s,a,l=r(7101),h=r(4194),c=r(1236),u=r.n(c);let d=function(e){function n(e,n,i){var o=n.trim().split(g);n=o;var s=o.length,a=e.length;switch(a){case 0:case 1:var l=0;for(e=0===a?"":e[0]+" ";l<s;++l)n[l]=r(e,n[l],i).trim();break;default:var h=l=0;for(n=[];l<s;++l)for(var c=0;c<a;++c)n[h++]=r(e[c]+" ",o[l],i).trim()}return n}function r(e,n,r){var i=n.charCodeAt(0);switch(33>i&&(i=(n=n.trim()).charCodeAt(0)),i){case 38:return n.replace(y,"$1"+e.trim());case 58:return e.trim()+n.replace(y,"$1"+e.trim());default:if(0<+r&&0<n.indexOf("\f"))return n.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+n}function i(e,n,r,s){var a=e+";",l=2*n+3*r+4*s;if(944===l){e=a.indexOf(":",9)+1;var h=a.substring(e,a.length-1).trim();return h=a.substring(0,e).trim()+h+";",1===T||2===T&&o(h,1)?"-webkit-"+h+h:h}if(0===T||2===T&&!o(a,1))return a;switch(l){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(N,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(h=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+h+a;case 1005:return p.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(n=(h=a.substring(13).trim()).indexOf("-")+1,h.charCodeAt(0)+h.charCodeAt(n)){case 226:h=a.replace(E,"tb");break;case 232:h=a.replace(E,"tb-rl");break;case 220:h=a.replace(E,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+h+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(n=(a=e).length-10,l=(h=(33===a.charCodeAt(n)?a.substring(0,n):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|h.charCodeAt(7))){case 203:if(111>h.charCodeAt(8))break;case 115:a=a.replace(h,"-webkit-"+h)+";"+a;break;case 207:case 102:a=a.replace(h,"-webkit-"+(102<l?"inline-":"")+"box")+";"+a.replace(h,"-webkit-"+h)+";"+a.replace(h,"-ms-"+h+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return h=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+h+"-ms-flex-"+h+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(C,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(C,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===D.test(e))return 115===(h=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),n,r,s).replace(":fill-available",":stretch"):a.replace(h,"-webkit-"+h)+a.replace(h,"-moz-"+h.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+s&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function o(e,n){var r=e.indexOf(1===n?":":"{"),i=e.substring(0,3!==n?r:10);return r=e.substring(r+1,e.length-1),L(2!==n?i:i.replace(S,"$1"),r,n)}function s(e,n){var r=i(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return r!==n+";"?r.replace(x," or ($1)").substring(4):"("+n+")"}function a(e,n,r,i,o,s,a,l,c,u){for(var d,p=0,f=n;p<A;++p)switch(d=P[p].call(h,e,f,r,i,o,s,a,l,c,u)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==n)return f}function l(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!=typeof e?T=1:(T=2,L=e):T=0),l}function h(e,r){var l=e;if(33>l.charCodeAt(0)&&(l=l.trim()),l=[l],0<A){var h=a(-1,r,l,l,M,O,0,0,0,0);void 0!==h&&"string"==typeof h&&(r=h)}var d=function e(r,l,h,d,p){for(var f,g,y,E,x,C=0,S=0,D=0,N=0,P=0,L=0,R=y=f=0,z=0,V=0,F=0,$=0,B=h.length,H=B-1,K="",U="",W="",G="";z<B;){if(g=h.charCodeAt(z),z===H&&0!==S+N+D+C&&(0!==S&&(g=47===S?10:47),N=D=C=0,B++,H++),0===S+N+D+C){if(z===H&&(0<V&&(K=K.replace(u,"")),0<K.trim().length)){switch(g){case 32:case 9:case 59:case 13:case 10:break;default:K+=h.charAt(z)}g=59}switch(g){case 123:for(f=(K=K.trim()).charCodeAt(0),y=1,$=++z;z<B;){switch(g=h.charCodeAt(z)){case 123:y++;break;case 125:y--;break;case 47:switch(g=h.charCodeAt(z+1)){case 42:case 47:t:{for(R=z+1;R<H;++R)switch(h.charCodeAt(R)){case 47:if(42===g&&42===h.charCodeAt(R-1)&&z+2!==R){z=R+1;break t}break;case 10:if(47===g){z=R+1;break t}}z=R}}break;case 91:g++;case 40:g++;case 34:case 39:for(;z++<H&&h.charCodeAt(z)!==g;);}if(0===y)break;z++}if(y=h.substring($,z),0===f&&(f=(K=K.replace(c,"").trim()).charCodeAt(0)),64===f){switch(0<V&&(K=K.replace(u,"")),g=K.charCodeAt(1)){case 100:case 109:case 115:case 45:V=l;break;default:V=k}if($=(y=e(l,V,y,g,p+1)).length,0<A&&(x=a(3,y,V=n(k,K,F),l,M,O,$,g,p,d),K=V.join(""),void 0!==x&&0===($=(y=x.trim()).length)&&(g=0,y="")),0<$)switch(g){case 115:K=K.replace(w,s);case 100:case 109:case 45:y=K+"{"+y+"}";break;case 107:y=(K=K.replace(m,"$1 $2"))+"{"+y+"}",y=1===T||2===T&&o("@"+y,3)?"@-webkit-"+y+"@"+y:"@"+y;break;default:y=K+y,112===d&&(U+=y,y="")}else y=""}else y=e(l,n(l,K,F),y,d,p+1);W+=y,y=F=V=R=f=0,K="",g=h.charCodeAt(++z);break;case 125:case 59:if(1<($=(K=(0<V?K.replace(u,""):K).trim()).length))switch(0===R&&(45===(f=K.charCodeAt(0))||96<f&&123>f)&&($=(K=K.replace(" ",":")).length),0<A&&void 0!==(x=a(1,K,l,r,M,O,U.length,d,p,d))&&0===($=(K=x.trim()).length)&&(K="\0\0"),f=K.charCodeAt(0),g=K.charCodeAt(1),f){case 0:break;case 64:if(105===g||99===g){G+=K+h.charAt(z);break}default:58!==K.charCodeAt($-1)&&(U+=i(K,f,g,K.charCodeAt(2)))}F=V=R=f=0,K="",g=h.charCodeAt(++z)}}switch(g){case 13:case 10:47===S?S=0:0===1+f&&107!==d&&0<K.length&&(V=1,K+="\0"),0<A*j&&a(0,K,l,r,M,O,U.length,d,p,d),O=1,M++;break;case 59:case 125:if(0===S+N+D+C){O++;break}default:switch(O++,E=h.charAt(z),g){case 9:case 32:if(0===N+C+S)switch(P){case 44:case 58:case 9:case 32:E="";break;default:32!==g&&(E=" ")}break;case 0:E="\\0";break;case 12:E="\\f";break;case 11:E="\\v";break;case 38:0===N+S+C&&(V=F=1,E="\f"+E);break;case 108:if(0===N+S+C+I&&0<R)switch(z-R){case 2:112===P&&58===h.charCodeAt(z-3)&&(I=P);case 8:111===L&&(I=L)}break;case 58:0===N+S+C&&(R=z);break;case 44:0===S+D+N+C&&(V=1,E+="\r");break;case 34:case 39:0===S&&(N=N===g?0:0===N?g:N);break;case 91:0===N+S+D&&C++;break;case 93:0===N+S+D&&C--;break;case 41:0===N+S+C&&D--;break;case 40:0===N+S+C&&(0===f&&(2*P+3*L==533||(f=1)),D++);break;case 64:0===S+D+N+C+R+y&&(y=1);break;case 42:case 47:if(!(0<N+C+D))switch(S){case 0:switch(2*g+3*h.charCodeAt(z+1)){case 235:S=47;break;case 220:$=z,S=42}break;case 42:47===g&&42===P&&$+2!==z&&(33===h.charCodeAt($+2)&&(U+=h.substring($,z+1)),E="",S=0)}}0===S&&(K+=E)}L=P,P=g,z++}if(0<($=U.length)){if(V=l,0<A&&void 0!==(x=a(2,U,V,r,M,O,$,d,p,d))&&0===(U=x).length)return G+U+W;if(U=V.join(",")+"{"+U+"}",0!=T*I){switch(2!==T||o(U,2)||(I=0),I){case 111:U=U.replace(_,":-moz-$1")+U;break;case 112:U=U.replace(b,"::-webkit-input-$1")+U.replace(b,"::-moz-$1")+U.replace(b,":-ms-input-$1")+U}I=0}}return G+U+W}(k,l,r,0,0);return 0<A&&void 0!==(h=a(-2,d,l,l,M,O,d.length,0,0,0))&&(d=h),I=0,O=M=1,d}var c=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,g=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,_=/:(read-only)/g,E=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,C=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,D=/stretch|:\s*\w+\-(?:conte|avail)/,N=/([^-])(image-set\()/,O=1,M=1,I=0,T=1,k=[],P=[],A=0,L=null,j=0,R="";return h.use=function e(n){switch(n){case void 0:case null:A=P.length=0;break;default:if("function"==typeof n)P[A++]=n;else if("object"==typeof n)for(var r=0,i=n.length;r<i;++r)e(n[r]);else j=0|!!n}return e},h.set=l,void 0!==e&&l(e),h},p={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var f=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,g=(i=function(e){return f.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)},o=Object.create(null),function(e){return void 0===o[e]&&(o[e]=i(e)),o[e]}),y=r(63),m=r.n(y);function b(){return(b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var _=function(e,n){for(var r=[e[0]],i=0,o=n.length;i<o;i+=1)r.push(n[i],e[i+1]);return r},E=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,l.typeOf)(e)},w=Object.freeze([]),x=Object.freeze({});function C(e){return"function"==typeof e}function S(e){return e.displayName||e.name||"Component"}function D(e){return e&&"string"==typeof e.styledComponentId}var N="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",O="undefined"!=typeof window&&"HTMLElement"in window,M=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&(void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY));function I(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var n=e.prototype;return n.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},n.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,o=i;e>=o;)(o<<=1)<0&&I(16,""+e);this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var s=i;s<o;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(e+1),l=0,h=n.length;l<h;l++)this.tag.insertRule(a,n[l])&&(this.groupSizes[e]++,a++)},n.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var o=r;o<i;o++)this.tag.deleteRule(r)}},n.getGroup=function(e){var n="";if(e>=this.length||0===this.groupSizes[e])return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),o=i+r,s=i;s<o;s++)n+=this.tag.getRule(s)+"/*!sc*/\n";return n},e}(),k=new Map,P=new Map,A=1,L=function(e){if(k.has(e))return k.get(e);for(;P.has(A);)A++;var n=A++;return k.set(e,n),P.set(n,e),n},j=function(e,n){n>=A&&(A=n+1),k.set(e,n),P.set(n,e)},R="style["+N+'][data-styled-version="5.3.11"]',z=RegExp("^"+N+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),V=function(e,n,r){for(var i,o=r.split(","),s=0,a=o.length;s<a;s++)(i=o[s])&&e.registerName(n,i)},F=function(e,n){for(var r=(n.textContent||"").split("/*!sc*/\n"),i=[],o=0,s=r.length;o<s;o++){var a=r[o].trim();if(a){var l=a.match(z);if(l){var h=0|parseInt(l[1],10),c=l[2];0!==h&&(j(c,h),V(e,c,l[3]),e.getTag().insertRules(h,i)),i.length=0}else i.push(a)}}},$=function(){return r.nc},B=function(e){var n=document.head,r=e||n,i=document.createElement("style"),o=function(e){for(var n=e.childNodes,r=n.length;r>=0;r--){var i=n[r];if(i&&1===i.nodeType&&i.hasAttribute(N))return i}}(r),s=void 0!==o?o.nextSibling:null;i.setAttribute(N,"active"),i.setAttribute("data-styled-version","5.3.11");var a=$();return a&&i.setAttribute("nonce",a),r.insertBefore(i,s),i},H=function(){function e(e){var n=this.element=B(e);n.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,r=0,i=n.length;r<i;r++){var o=n[r];if(o.ownerNode===e)return o}I(17)}(n),this.length=0}var n=e.prototype;return n.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(e){return!1}},n.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.getRule=function(e){var n=this.sheet.cssRules[e];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},e}(),K=function(){function e(e){var n=this.element=B(e);this.nodes=n.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n),i=this.nodes[e];return this.element.insertBefore(r,i||null),this.length++,!0}return!1},n.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),U=function(){function e(e){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},n.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),W=O,G={isServer:!O,useCSSOMInjection:!M},Y=function(){function e(e,n,r){void 0===e&&(e=x),void 0===n&&(n={}),this.options=b({},G,{},e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&O&&W&&(W=!1,function(e){for(var n=document.querySelectorAll(R),r=0,i=n.length;r<i;r++){var o=n[r];o&&"active"!==o.getAttribute(N)&&(F(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}e.registerId=function(e){return L(e)};var n=e.prototype;return n.reconstructWithOptions=function(n,r){return void 0===r&&(r=!0),new e(b({},this.options,{},n),this.gs,r&&this.names||void 0)},n.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.getTag=function(){var e,n,r,i;return this.tag||(this.tag=(n=(e=this.options).isServer,r=e.useCSSOMInjection,i=e.target,new T(n?new U(i):r?new H(i):new K(i))))},n.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},n.registerName=function(e,n){if(L(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},n.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(L(e),r)},n.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.clearRules=function(e){this.getTag().clearGroup(L(e)),this.clearNames(e)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(e){for(var n=e.getTag(),r=n.length,i="",o=0;o<r;o++){var s,a=(s=o,P.get(s));if(void 0!==a){var l=e.names.get(a),h=n.getGroup(o);if(l&&h&&l.size){var c=N+".g"+o+'[id="'+a+'"]',u="";void 0!==l&&l.forEach(function(e){e.length>0&&(u+=e+",")}),i+=""+h+c+'{content:"'+u+'"}/*!sc*/\n'}}}return i}(this)},e}(),Z=/(a)(d)/gi,X=function(e){return String.fromCharCode(e+(e>25?39:97))};function Q(e){var n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=X(n%52)+r;return(X(n%52)+r).replace(Z,"$1-$2")}var q=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},J=function(e){return q(5381,e)};function ee(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(C(r)&&!D(r))return!1}return!0}var et=J("5.3.11"),en=function(){function e(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&ee(e),this.componentId=n,this.baseHash=q(et,n),this.baseStyle=r,Y.registerId(n)}return e.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))o.push(this.staticRulesId);else{var s=eb(this.rules,e,n,r).join(""),a=Q(q(this.baseHash,s)>>>0);if(!n.hasNameForId(i,a)){var l=r(s,"."+a,void 0,i);n.insertRules(i,a,l)}o.push(a),this.staticRulesId=a}else{for(var h=this.rules.length,c=q(this.baseHash,r.hash),u="",d=0;d<h;d++){var p=this.rules[d];if("string"==typeof p)u+=p;else if(p){var f=eb(p,e,n,r),g=Array.isArray(f)?f.join(""):f;c=q(c,g+d),u+=g}}if(u){var y=Q(c>>>0);if(!n.hasNameForId(i,y)){var m=r(u,"."+y,void 0,i);n.insertRules(i,y,m)}o.push(y)}}return o.join(" ")},e}(),er=/^\s*\/\/.*$/gm,ei=[":","[",".","#"];function eo(e){var n,r,i,o,s=void 0===e?x:e,a=s.options,l=void 0===a?x:a,h=s.plugins,c=void 0===h?w:h,u=new d(l),p=[],f=function(e){function n(n){if(n)try{e(n+"}")}catch(e){}}return function(r,i,o,s,a,l,h,c,u,d){switch(r){case 1:if(0===u&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===c)return i+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(o[0]+i),"";default:return i+(0===d?"/*|*/":"")}case -2:i.split("/*|*/}").forEach(n)}}}(function(e){p.push(e)}),g=function(e,i,s){return 0===i&&-1!==ei.indexOf(s[r.length])||s.match(o)?e:"."+n};function y(e,s,a,l){void 0===l&&(l="&");var h=e.replace(er,""),c=s&&a?a+" "+s+" { "+h+" }":h;return n=l,i=RegExp("\\"+(r=s)+"\\b","g"),o=RegExp("(\\"+r+"\\b){2,}"),u(a||!s?"":s,c)}return u.use([].concat(c,[function(e,n,o){2===e&&o.length&&o[0].lastIndexOf(r)>0&&(o[0]=o[0].replace(i,g))},f,function(e){if(-2===e){var n=p;return p=[],n}}])),y.hash=c.length?c.reduce(function(e,n){return n.name||I(15),q(e,n.name)},5381).toString():"",y}var es=h.createContext(),ea=(es.Consumer,h.createContext()),el=(ea.Consumer,new Y),eh=eo();function ec(){return(0,h.useContext)(es)||el}function eu(e){var n=(0,h.useState)(e.stylisPlugins),r=n[0],i=n[1],o=ec(),s=(0,h.useMemo)(function(){var n=o;return e.sheet?n=e.sheet:e.target&&(n=n.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(n=n.reconstructWithOptions({useCSSOMInjection:!1})),n},[e.disableCSSOMInjection,e.sheet,e.target]),a=(0,h.useMemo)(function(){return eo({options:{prefix:!e.disableVendorPrefixes},plugins:r})},[e.disableVendorPrefixes,r]);return(0,h.useEffect)(function(){u()(r,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]),h.createElement(es.Provider,{value:s},h.createElement(ea.Provider,{value:a},e.children))}var ed=function(){function e(e,n){var r=this;this.inject=function(e,n){void 0===n&&(n=eh);var i=r.name+n.hash;e.hasNameForId(r.id,i)||e.insertRules(r.id,i,n(r.rules,i,"@keyframes"))},this.toString=function(){return I(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return e.prototype.getName=function(e){return void 0===e&&(e=eh),this.name+e.hash},e}(),ep=/([A-Z])/,ef=/([A-Z])/g,eg=/^ms-/,ey=function(e){return"-"+e.toLowerCase()};function em(e){return ep.test(e)?e.replace(ef,ey).replace(eg,"-ms-"):e}var ev=function(e){return null==e||!1===e||""===e};function eb(e,n,r,i){if(Array.isArray(e)){for(var o,s=[],a=0,l=e.length;a<l;a+=1)""!==(o=eb(e[a],n,r,i))&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));return s}return ev(e)?"":D(e)?"."+e.styledComponentId:C(e)?"function"!=typeof e||e.prototype&&e.prototype.isReactComponent||!n?e:eb(e(n),n,r,i):e instanceof ed?r?(e.inject(r,i),e.getName(i)):e:E(e)?function e(n,r){var i,o=[];for(var s in n)n.hasOwnProperty(s)&&!ev(n[s])&&(Array.isArray(n[s])&&n[s].isCss||C(n[s])?o.push(em(s)+":",n[s],";"):E(n[s])?o.push.apply(o,e(n[s],s)):o.push(em(s)+": "+(null==(i=n[s])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||s in p||s.startsWith("--")?String(i).trim():i+"px")+";"));return r?[r+" {"].concat(o,["}"]):o}(e):e.toString()}var e_=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function eE(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return C(e)||E(e)?e_(eb(_(w,[e].concat(r)))):0===r.length&&1===e.length&&"string"==typeof e[0]?e:e_(eb(_(e,r)))}var ew=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ex=/(^-|-$)/g;function eC(e){return e.replace(ew,"-").replace(ex,"")}function eS(e){return"string"==typeof e}var eD=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},eN=h.createContext();eN.Consumer;var eO={},eM=function(e){return function e(n,r,i){if(void 0===i&&(i=x),!(0,l.isValidElementType)(r))return I(1,String(r));var o=function(){return n(r,i,eE.apply(void 0,arguments))};return o.withConfig=function(o){return e(n,r,b({},i,{},o))},o.attrs=function(o){return e(n,r,b({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},o}(function e(n,r,i){var o=D(n),s=!eS(n),a=r.attrs,l=void 0===a?w:a,c=r.componentId,u=void 0===c?(E=r.displayName,N=r.parentComponentId,eO[O="string"!=typeof E?"sc":eC(E)]=(eO[O]||0)+1,M=O+"-"+Q(J("5.3.11"+O+eO[O])>>>0),N?N+"-"+M:M):c,d=r.displayName,p=void 0===d?eS(n)?"styled."+n:"Styled("+S(n)+")":d,f=r.displayName&&r.componentId?eC(r.displayName)+"-"+r.componentId:r.componentId||u,y=o&&n.attrs?Array.prototype.concat(n.attrs,l).filter(Boolean):l,_=r.shouldForwardProp;o&&n.shouldForwardProp&&(_=r.shouldForwardProp?function(e,i,o){return n.shouldForwardProp(e,i,o)&&r.shouldForwardProp(e,i,o)}:n.shouldForwardProp);var E,N,O,M,I,T=new en(i,f,o?n.componentStyle:void 0),k=T.isStatic&&0===l.length,P=function(e,n){return function(e,n,r,i){var o,s,a,l,c,u,d,p=e.attrs,f=e.componentStyle,y=e.defaultProps,m=e.foldedComponentIds,_=e.shouldForwardProp,E=e.styledComponentId,w=e.target,S=(o=(0,h.useContext)(eN),void 0===(s=y)&&(s=x),a=n.theme!==s.theme&&n.theme||o||s.theme||x,void 0===a&&(a=x),l=b({},n,{theme:a}),c={},p.forEach(function(e){var n,r,i,o=e;for(n in C(o)&&(o=o(l)),o)l[n]=c[n]="className"===n?(r=c[n],i=o[n],r&&i?r+" "+i:r||i):o[n]}),[l,c]),D=S[0],N=S[1],O=(u=ec(),d=(0,h.useContext)(ea)||eh,i?f.generateAndInjectStyles(x,u,d):f.generateAndInjectStyles(D,u,d)),M=N.$as||n.$as||N.as||n.as||w,I=eS(M),T=N!==n?b({},n,{},N):n,k={};for(var P in T)"$"!==P[0]&&"as"!==P&&("forwardedAs"===P?k.as=T[P]:(_?_(P,g,M):!I||g(P))&&(k[P]=T[P]));return n.style&&N.style!==n.style&&(k.style=b({},n.style,{},N.style)),k.className=Array.prototype.concat(m,E,O!==E?O:null,n.className,N.className).filter(Boolean).join(" "),k.ref=r,(0,h.createElement)(M,k)}(I,e,n,k)};return P.displayName=p,(I=h.forwardRef(P)).attrs=y,I.componentStyle=T,I.displayName=p,I.shouldForwardProp=_,I.foldedComponentIds=o?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):w,I.styledComponentId=f,I.target=o?n.target:n,I.withComponent=function(n){var o=r.componentId,s=function(e,n){if(null==e)return{};var r,i,o={},s=Object.keys(e);for(i=0;i<s.length;i++)n.indexOf(r=s[i])>=0||(o[r]=e[r]);return o}(r,["componentId"]),a=o&&o+"-"+(eS(n)?n:eC(S(n)));return e(n,b({},s,{attrs:y,componentId:a}),i)},Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=o?function e(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var s=0;s<i.length;s++){var a=i[s];if(eD(a))for(var l in a)"__proto__"!==l&&"constructor"!==l&&"prototype"!==l&&function(n,r,i){var o=n[i];eD(r)&&eD(o)?e(o,r):n[i]=r}(n,a[l],l)}return n}({},n.defaultProps,e):e}}),Object.defineProperty(I,"toString",{value:function(){return"."+I.styledComponentId}}),s&&m()(I,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),I},e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){eM[e]=eM(e)}),(s=(function(e,n){this.rules=e,this.componentId=n,this.isStatic=ee(e),Y.registerId(this.componentId+1)}).prototype).createStyles=function(e,n,r,i){var o=i(eb(this.rules,n,r,i).join(""),""),s=this.componentId+e;r.insertRules(s,s,o)},s.removeStyles=function(e,n){n.clearRules(this.componentId+e)},s.renderStyles=function(e,n,r,i){e>2&&Y.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,n,r,i)},(a=(function(){var e=this;this._emitSheetCSS=function(){var n=e.instance.toString();if(!n)return"";var r=$();return"<style "+[r&&'nonce="'+r+'"',N+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+n+"</style>"},this.getStyleTags=function(){return e.sealed?I(2):e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)return I(2);var n,r=((n={})[N]="",n["data-styled-version"]="5.3.11",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=$();return i&&(r.nonce=i),[h.createElement("style",b({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Y({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(e){return this.sealed?I(2):h.createElement(eu,{sheet:this.instance},e)},a.interleaveWithNodeStream=function(e){return I(3)};let eI=eM},1229:function(e){!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(e=i(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var o="";for(var s in e)n.call(e,s)&&e[s]&&(o=i(o,s));return o}(s)))}return e}function i(e,n){return n?e?e+" "+n:e+n:e}e.exports?(r.default=r,e.exports=r):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return r}):window.classNames=r}()},9453:function(e,n,r){var i,o;o=i||(i={}),function(e){var n="object"==typeof globalThis?globalThis:"object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:function(){try{return Function("return this;")()}catch(e){}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch(e){}}(),i=s(o);function s(e,n){return function(r,i){Object.defineProperty(e,r,{configurable:!0,writable:!0,value:i}),n&&n(r,i)}}void 0!==n.Reflect&&(i=s(n.Reflect,i)),e(i,n),void 0===n.Reflect&&(n.Reflect=o)}(function(e,n){var r,i=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,s=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",l="function"==typeof Object.create,h=({__proto__:[]})instanceof Array,c=!l&&!h,u={create:l?function(){return V(Object.create(null))}:h?function(){return V({__proto__:null})}:function(){return V({})},has:c?function(e,n){return i.call(e,n)}:function(e,n){return n in e},get:c?function(e,n){return i.call(e,n)?e[n]:void 0}:function(e,n){return e[n]}},d=Object.getPrototypeOf(Function),p="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:function(){var e={},n=[],r=function(){function e(e,n,r){this._index=0,this._keys=e,this._values=n,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=n,this._values=n):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=n,this._values=n),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=n,this._values=n),{value:e,done:!0}},e}();function i(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(e){return this._find(e,!1)>=0},i.prototype.get=function(e){var n=this._find(e,!1);return n>=0?this._values[n]:void 0},i.prototype.set=function(e,n){var r=this._find(e,!0);return this._values[r]=n,this},i.prototype.delete=function(n){var r=this._find(n,!1);if(r>=0){for(var i=this._keys.length,o=r+1;o<i;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,k(n,this._cacheKey)&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},i.prototype.keys=function(){return new r(this._keys,this._values,o)},i.prototype.values=function(){return new r(this._keys,this._values,s)},i.prototype.entries=function(){return new r(this._keys,this._values,l)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[a]=function(){return this.entries()},i.prototype._find=function(e,n){if(!k(this._cacheKey,e)){this._cacheIndex=-1;for(var r=0;r<this._keys.length;r++)if(k(this._keys[r],e)){this._cacheIndex=r;break}}return this._cacheIndex<0&&n&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},i;function o(e,n){return e}function s(e,n){return n}function l(e,n){return[e,n]}}(),f="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}(),g="function"==typeof WeakMap?WeakMap:function(){var e=u.create(),n=o();function r(){this._key=o()}return r.prototype.has=function(e){var n=s(e,!1);return void 0!==n&&u.has(n,this._key)},r.prototype.get=function(e){var n=s(e,!1);return void 0!==n?u.get(n,this._key):void 0},r.prototype.set=function(e,n){return s(e,!0)[this._key]=n,this},r.prototype.delete=function(e){var n=s(e,!1);return void 0!==n&&delete n[this._key]},r.prototype.clear=function(){this._key=o()},r;function o(){var n;do n="@@WeakMap@@"+function(){var e=function(e){if("function"==typeof Uint8Array){var n=new Uint8Array(16);return"undefined"!=typeof crypto?crypto.getRandomValues(n):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(n):a(n,16),n}return a(Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];(4===r||6===r||8===r)&&(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}();while(u.has(e,n));return e[n]=!0,n}function s(e,r){if(!i.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function a(e,n){for(var r=0;r<n;++r)e[r]=255*Math.random()|0;return e}}(),y=o?Symbol.for("@reflect-metadata:registry"):void 0,m=(!S(y)&&N(n.Reflect)&&Object.isExtensible(n.Reflect)&&(r=n.Reflect[y]),S(r)&&(r=function(){S(y)||void 0===n.Reflect||y in n.Reflect||"function"!=typeof n.Reflect.defineMetadata||(r=(e=n.Reflect).defineMetadata,i=e.hasOwnMetadata,o=e.getOwnMetadata,s=e.getOwnMetadataKeys,a=e.deleteMetadata,l=new g,h={isProviderFor:function(e,n){var r=l.get(e);return!!(!S(r)&&r.has(n))||!!s(e,n).length&&(S(r)&&(r=new f,l.set(e,r)),r.add(n),!0)},OrdinaryDefineOwnMetadata:r,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:o,OrdinaryOwnMetadataKeys:s,OrdinaryDeleteMetadata:a});var e,r,i,o,s,a,l,h,c,u,d,m=new g,b={registerProvider:function(e){if(!Object.isExtensible(b))throw Error("Cannot add provider to a frozen registry.");switch(!0){case h===e:break;case S(c):c=e;break;case c===e:break;case S(u):u=e;break;case u===e:break;default:void 0===d&&(d=new f),d.add(e)}},getProvider:_,setProvider:function(e,n,r){if(!function(e){if(S(e))throw TypeError();return c===e||u===e||!S(d)&&d.has(e)}(r))throw Error("Metadata provider not registered.");var i=_(e,n);if(i!==r){if(!S(i))return!1;var o=m.get(e);S(o)&&(o=new p,m.set(e,o)),o.set(n,r)}return!0}};return b;function _(e,n){var r,i=m.get(e);return S(i)||(r=i.get(n)),S(r)&&(r=function(e,n){if(!S(c)){if(c.isProviderFor(e,n))return c;if(!S(u)){if(u.isProviderFor(e,n))return c;if(!S(d))for(var r=A(d);;){var i=L(r);if(!i)return;var o=i.value;if(o.isProviderFor(e,n))return j(r),o}}}if(!S(h)&&h.isProviderFor(e,n))return h}(e,n),S(r)||(S(i)&&(i=new p,m.set(e,i)),i.set(n,r))),r}}()),!S(y)&&N(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,y,{enumerable:!1,configurable:!1,writable:!1,value:r}),r),b=function(e){var n=new g,r={isProviderFor:function(e,r){var i=n.get(e);return!S(i)&&i.has(r)},OrdinaryDefineOwnMetadata:function(e,n,r,o){i(r,o,!0).set(e,n)},OrdinaryHasOwnMetadata:function(e,n,r){var o=i(n,r,!1);return!S(o)&&!!o.has(e)},OrdinaryGetOwnMetadata:function(e,n,r){var o=i(n,r,!1);if(!S(o))return o.get(e)},OrdinaryOwnMetadataKeys:function(e,n){var r=[],o=i(e,n,!1);if(S(o))return r;for(var s=A(o.keys()),a=0;;){var l=L(s);if(!l)return r.length=a,r;var h=l.value;try{r[a]=h}catch(e){try{j(s)}finally{throw e}}a++}},OrdinaryDeleteMetadata:function(e,r,o){var s=i(r,o,!1);if(S(s)||!s.delete(e))return!1;if(0===s.size){var a=n.get(r);S(a)||(a.delete(o),0===a.size&&n.delete(a))}return!0}};return m.registerProvider(r),r;function i(i,o,s){var a=n.get(i),l=!1;if(S(a)){if(!s)return;a=new p,n.set(i,a),l=!0}var h=a.get(o);if(S(h)){if(!s)return;if(h=new p,a.set(o,h),!e.setProvider(i,o,r))throw a.delete(o),l&&n.delete(i),Error("Wrong provider for target.")}return h}}(m);function _(e,n,r){var i=z(n,r,!1);return!S(i)&&!!i.OrdinaryHasOwnMetadata(e,n,r)}function E(e,n,r){var i=z(n,r,!1);if(!S(i))return i.OrdinaryGetOwnMetadata(e,n,r)}function w(e,n,r,i){z(r,i,!0).OrdinaryDefineOwnMetadata(e,n,r,i)}function x(e,n){var r=z(e,n,!1);return r?r.OrdinaryOwnMetadataKeys(e,n):[]}function C(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function D(e){return null===e}function N(e){return"object"==typeof e?null!==e:"function"==typeof e}e("decorate",function(e,n,r,i){if(S(r)){if(!M(e)||!T(n))throw TypeError();for(var o=e,s=n,a=o.length-1;a>=0;--a){var l=(0,o[a])(s);if(!S(l)&&!D(l)){if(!T(l))throw TypeError();s=l}}return s}if(!M(e)||!N(n)||!N(i)&&!S(i)&&!D(i))throw TypeError();return D(i)&&(i=void 0),function(e,n,r,i){for(var o=e.length-1;o>=0;--o){var s=(0,e[o])(n,r,i);if(!S(s)&&!D(s)){if(!N(s))throw TypeError();i=s}}return i}(e,n,r=O(r),i)}),e("metadata",function(e,n){return function(r,i){if(!N(r)||!S(i)&&!function(e){switch(C(e)){case 3:case 4:return!0;default:return!1}}(i))throw TypeError();w(e,n,r,i)}}),e("defineMetadata",function(e,n,r,i){if(!N(r))throw TypeError();return S(i)||(i=O(i)),w(e,n,r,i)}),e("hasMetadata",function(e,n,r){if(!N(n))throw TypeError();return S(r)||(r=O(r)),function e(n,r,i){if(_(n,r,i))return!0;var o=R(r);return!D(o)&&e(n,o,i)}(e,n,r)}),e("hasOwnMetadata",function(e,n,r){if(!N(n))throw TypeError();return S(r)||(r=O(r)),_(e,n,r)}),e("getMetadata",function(e,n,r){if(!N(n))throw TypeError();return S(r)||(r=O(r)),function e(n,r,i){if(_(n,r,i))return E(n,r,i);var o=R(r);if(!D(o))return e(n,o,i)}(e,n,r)}),e("getOwnMetadata",function(e,n,r){if(!N(n))throw TypeError();return S(r)||(r=O(r)),E(e,n,r)}),e("getMetadataKeys",function(e,n){if(!N(e))throw TypeError();return S(n)||(n=O(n)),function e(n,r){var i=x(n,r),o=R(n);if(null===o)return i;var s=e(o,r);if(s.length<=0)return i;if(i.length<=0)return s;for(var a=new f,l=[],h=0;h<i.length;h++){var c=i[h],u=a.has(c);u||(a.add(c),l.push(c))}for(var d=0;d<s.length;d++){var c=s[d],u=a.has(c);u||(a.add(c),l.push(c))}return l}(e,n)}),e("getOwnMetadataKeys",function(e,n){if(!N(e))throw TypeError();return S(n)||(n=O(n)),x(e,n)}),e("deleteMetadata",function(e,n,r){if(!N(n)||(S(r)||(r=O(r)),!N(n)))throw TypeError();S(r)||(r=O(r));var i=z(n,r,!1);return!S(i)&&i.OrdinaryDeleteMetadata(e,n,r)});function O(e){var n=function(e,n){switch(C(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r="string",i=P(e,s);if(void 0!==i){var o=i.call(e,r);if(N(o))throw TypeError();return o}return function(e,n){if("string"===n){var r=e.toString;if(I(r)){var i=r.call(e);if(!N(i))return i}var o=e.valueOf;if(I(o)){var i=o.call(e);if(!N(i))return i}}else{var o=e.valueOf;if(I(o)){var i=o.call(e);if(!N(i))return i}var s=e.toString;if(I(s)){var i=s.call(e);if(!N(i))return i}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof n?n:""+n}function M(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function I(e){return"function"==typeof e}function T(e){return"function"==typeof e}function k(e,n){return e===n||e!=e&&n!=n}function P(e,n){var r=e[n];if(null!=r){if(!I(r))throw TypeError();return r}}function A(e){var n=P(e,a);if(!I(n))throw TypeError();var r=n.call(e);if(!N(r))throw TypeError();return r}function L(e){var n=e.next();return!n.done&&n}function j(e){var n=e.return;n&&n.call(e)}function R(e){var n=Object.getPrototypeOf(e);if("function"!=typeof e||e===d||n!==d)return n;var r=e.prototype,i=r&&Object.getPrototypeOf(r);if(null==i||i===Object.prototype)return n;var o=i.constructor;return"function"!=typeof o||o===e?n:o}function z(e,n,r){var i=m.getProvider(e,n);if(!S(i))return i;if(r){if(m.setProvider(e,n,b))return b;throw Error("Illegal state.")}}function V(e){return e.__=void 0,delete e.__,e}})},4210:function(e,n,r){"use strict";var i,o,s,a,l,h,c,u;r.d(n,{nx:()=>tt,Pj:()=>ti,f3:()=>e7,W2:()=>e2,b2:()=>e6,zY:()=>tr,t6:()=>e8,nZ:()=>e3,jt:()=>te}),r(9453);let d=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");class p{[d];#e;constructor(e){this.#e=e,this[d]=!0}static is(e){return"object"==typeof e&&null!==e&&!0===e[d]}unwrap(){return this.#e()}}function f(e,n){return Reflect.getMetadata(n,e)}function g(e,n,r,i){let o=i(f(e,n)??r);Reflect.defineMetadata(n,o,e)}let y="named",m="name",b="unmanaged",_="optional",E="inject",w="multi_inject",x="post_construct",C="pre_destroy",S=[E,w,m,b,y,_],D=Symbol.for("@inversifyjs/core/InversifyCoreError");class N extends Error{[D];kind;constructor(e,n,r){super(n,r),this[D]=!0,this.kind=e}static is(e){return"object"==typeof e&&null!==e&&!0===e[D]}static isErrorOfKind(e,n){return N.is(e)&&e.kind===n}}function O(e,n){let r=[];for(let e=0;e<n.length;++e)void 0===n[e]&&r.push(e);if(r.length>0)throw new N(i.missingInjectionDecorator,`Found unexpected missing metadata on type "${e.name}" at constructor indexes "${r.join('", "')}".

Are you using @inject, @multiInject or @unmanaged decorators at those indexes?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)}function M(e){return{kind:o.singleInjection,name:void 0,optional:!1,tags:new Map,targetName:void 0,value:e}}function I(e){let n=e.find(e=>e.key===E),r=e.find(e=>e.key===w);if(void 0!==e.find(e=>e.key===b)){if(void 0!==r||void 0!==n)throw new N(i.missingInjectionDecorator,"Expected a single @inject, @multiInject or @unmanaged metadata");return{kind:o.unmanaged}}if(void 0===r&&void 0===n)throw new N(i.missingInjectionDecorator,"Expected @inject, @multiInject or @unmanaged metadata");let s=e.find(e=>e.key===y),a=e.find(e=>e.key===_),l=e.find(e=>e.key===m);return{kind:void 0===n?o.multipleInjection:o.singleInjection,name:s?.value,optional:void 0!==a,tags:new Map(e.filter(e=>S.every(n=>e.key!==n)).map(e=>[e.key,e.value])),targetName:l?.value,value:void 0===n?r?.value:n.value}}function T(e,n,r){try{return I(r)}catch(r){throw N.isErrorOfKind(r,i.missingInjectionDecorator)?new N(i.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at constructor arguments at index "${n.toString()}"`,{cause:r}):r}}function k(e,n,r){try{return I(r)}catch(r){throw N.isErrorOfKind(r,i.missingInjectionDecorator)?new N(i.missingInjectionDecorator,`Expected a single @inject, @multiInject or @unmanaged decorator at type "${e.name}" at property "${n.toString()}"`,{cause:r}):r}}function P(e){let n=f(e,"inversify:tagged_props"),r=new Map;if(void 0!==n)for(let i of Reflect.ownKeys(n)){let o=n[i];r.set(i,k(e,i,o))}return r}function A(e){let n=f(e,x),r=f(e,C);return{constructorArguments:function(e){let n=f(e,"design:paramtypes"),r=f(e,"inversify:tagged"),i=[];if(void 0!==r)for(let[n,o]of Object.entries(r)){let r=parseInt(n);i[r]=T(e,r,o)}if(void 0!==n){for(let e=0;e<n.length;++e)if(void 0===i[e]){let r=n[e];i[e]=M(r)}}return O(e,i),i}(e),lifecycle:{postConstructMethodName:n?.value,preDestroyMethodName:r?.value},properties:P(e)}}function L(e,n){let r=n.getPropertiesMetadata(e),i=new Map;for(let n of Reflect.ownKeys(r)){let o=r[n];i.set(n,k(e,n,o))}return i}function j(e){let n=Object.getPrototypeOf(e.prototype);return n?.constructor}(l=i||(i={}))[l.injectionDecoratorConflict=0]="injectionDecoratorConflict",l[l.missingInjectionDecorator=1]="missingInjectionDecorator",l[l.planning=2]="planning",l[l.unknown=3]="unknown",(h=o||(o={}))[h.multipleInjection=0]="multipleInjection",h[h.singleInjection=1]="singleInjection",h[h.unmanaged=2]="unmanaged";class R{#t;constructor(e){this.#t=e}startsWith(e){return this.#t.startsWith(e)}endsWith(e){return this.#t.endsWith(e)}contains(e){return this.#t.includes(e)}equals(e){return this.#t===e}value(){return this.#t}}let z="@inversifyjs/core/targetId";class V{#e;#n;#r;#i;#o;#s;constructor(e,n,r){this.#n=function(){let e=f(Object,z)??0;return e===Number.MAX_SAFE_INTEGER?g(Object,z,e,()=>Number.MIN_SAFE_INTEGER):g(Object,z,e,e=>e+1),e}(),this.#r=e,this.#i=void 0,this.#e=n,this.#o=new R("string"==typeof e?e:e.toString().slice(7,-1)),this.#s=r}get id(){return this.#n}get identifier(){return this.#r}get metadata(){var e;return void 0===this.#i&&(this.#i=(e=this.#e).kind===o.unmanaged?[{key:b,value:!0}]:function(e){let n=[function(e){let n;switch(e.kind){case o.multipleInjection:n={key:w,value:e.value};break;case o.singleInjection:n={key:E,value:e.value}}return n}(e)];for(let[r,i]of(void 0!==e.name&&n.push({key:y,value:e.name}),e.optional&&n.push({key:_,value:!0}),e.tags))n.push({key:r,value:i});return void 0!==e.targetName&&n.push({key:m,value:e.targetName}),n}(e)),this.#i}get name(){return this.#o}get type(){return this.#s}get serviceIdentifier(){return p.is(this.#e.value)?this.#e.value.unwrap():this.#e.value}getCustomTags(){return[...this.#e.tags.entries()].map(([e,n])=>({key:e,value:n}))}getNamedTag(){return void 0===this.#e.name?null:{key:y,value:this.#e.name}}hasTag(e){return this.metadata.some(n=>n.key===e)}isArray(){return this.#e.kind===o.multipleInjection}isNamed(){return void 0!==this.#e.name}isOptional(){return this.#e.optional}isTagged(){return this.#e.tags.size>0}matchesArray(e){return this.isArray()&&this.#e.value===e}matchesNamedTag(e){return this.#e.name===e}matchesTag(e){return n=>this.metadata.some(r=>r.key===e&&r.value===n)}}let F=e=>{var n,r;return n=void 0===e?A:n=>(function(e,n){let r=f(e,x),i=f(e,C);return{constructorArguments:function(e,n){let r=n.getConstructorMetadata(e),i=[];for(let[n,o]of Object.entries(r.userGeneratedMetadata)){let r=parseInt(n);i[r]=T(e,r,o)}if(void 0!==r.compilerGeneratedMetadata){for(let e=0;e<r.compilerGeneratedMetadata.length;++e)if(void 0===i[e]){let n=r.compilerGeneratedMetadata[e];i[e]=M(n)}}return O(e,i),i}(e,n),lifecycle:{postConstructMethodName:r?.value,preDestroyMethodName:i?.value},properties:L(e,n)}})(n,e),r=void 0===e?P:n=>L(n,e),function(e){let i=n(e),s=j(e);for(;void 0!==s&&s!==Object;){for(let[e,n]of r(s))i.properties.has(e)||i.properties.set(e,n);s=j(s)}let a=[];for(let e of i.constructorArguments)if(e.kind!==o.unmanaged){let n=e.targetName??"";a.push(new V(n,e,"ConstructorArgument"))}for(let[e,n]of i.properties)if(n.kind!==o.unmanaged){let r=n.targetName??e;a.push(new V(r,n,"ClassProperty"))}return a}},$="named",B="name",H="unmanaged",K="optional",U="inject",W="multi_inject",G="inversify:tagged",Y="inversify:tagged_props",Z="inversify:paramtypes",X="design:paramtypes",Q="post_construct",q="pre_destroy",J=[U,W,B,H,$,K];Object.freeze({__proto__:null,DESIGN_PARAM_TYPES:X,INJECT_TAG:U,MULTI_INJECT_TAG:W,NAMED_TAG:$,NAME_TAG:B,NON_CUSTOM_TAG_KEYS:J,OPTIONAL_TAG:K,PARAM_TYPES:Z,POST_CONSTRUCT:Q,PRE_DESTROY:q,TAGGED:G,TAGGED_PROP:Y,UNMANAGED_TAG:H});let ee={Request:"Request",Singleton:"Singleton",Transient:"Transient"},et={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},en={ConstructorArgument:"ConstructorArgument",Variable:"Variable"},er=0;class ei{id;moduleId;activated;serviceIdentifier;implementationType;cache;dynamicValue;scope;type;factory;provider;constraint;onActivation;onDeactivation;constructor(e,n){this.id=er++,this.activated=!1,this.serviceIdentifier=e,this.scope=n,this.type=et.Invalid,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}clone(){let e=new ei(this.serviceIdentifier,this.scope);return e.activated=e.scope===ee.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e}}let eo="Metadata key was used more than once in a parameter:",es="NULL argument",ea="Key Not Found",el="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",eh=(e,n)=>`onDeactivation() error in class ${e}: ${n}`;class ec{getConstructorMetadata(e){return{compilerGeneratedMetadata:Reflect.getMetadata(X,e)??[],userGeneratedMetadata:Reflect.getMetadata(G,e)??{}}}getPropertiesMetadata(e){return Reflect.getMetadata(Y,e)??{}}}function eu(e){return e instanceof RangeError||"Maximum call stack size exceeded"===e.message}function ed(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function ep(e,n,r){let i="",o=r(e,n);return 0!==o.length&&(i="\nRegistered bindings:",o.forEach(e=>{let n="Object";null!==e.implementationType&&(n=ef(e.implementationType)),i=`${i}
 ${n}`,e.constraint.metaData&&(i=`${i} - ${e.constraint.metaData}`)})),i}function ef(e){if(null!=e.name&&""!==e.name)return e.name;{let n=e.toString(),r=n.match(/^function\s*([^\s(]+)/);return null===r?`Anonymous function: ${n}`:r[1]}}function eg(e){return`{"key":"${e.key.toString()}","value":"${e.value.toString()}"}`}(c=s||(s={}))[c.MultipleBindingsAvailable=2]="MultipleBindingsAvailable",c[c.NoBindingsAvailable=0]="NoBindingsAvailable",c[c.OnlyOneBindingAvailable=1]="OnlyOneBindingAvailable";class ey{id;container;plan;currentRequest;constructor(e){this.id=er++,this.container=e}addPlan(e){this.plan=e}setCurrentRequest(e){this.currentRequest=e}}class em{key;value;constructor(e,n){this.key=e,this.value=n}toString(){return this.key===$?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}class ev{parentContext;rootRequest;constructor(e,n){this.parentContext=e,this.rootRequest=n}}class eb{id;serviceIdentifier;parentContext;parentRequest;bindings;childRequests;target;requestScope;constructor(e,n,r,i,o){this.id=er++,this.serviceIdentifier=e,this.parentContext=n,this.parentRequest=r,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===r?new Map:null}addChildRequest(e,n,r){let i=new eb(e,this.parentContext,this,n,r);return this.childRequests.push(i),i}}function e_(e){return e._bindingDictionary}function eE(e,n,r,i,o){let a=ex(r.container,o.serviceIdentifier),l=[];return a.length===s.NoBindingsAvailable&&!0===r.container.options.autoBindInjectable&&"function"==typeof o.serviceIdentifier&&e.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(o.serviceIdentifier).toSelf(),a=ex(r.container,o.serviceIdentifier)),l=n?a:a.filter(e=>{let n=new eb(e.serviceIdentifier,r,i,e,o);return e.constraint(n)}),function(e,n,r,i,o){switch(n.length){case s.NoBindingsAvailable:if(i.isOptional())return;{let n=ed(e),s="No matching bindings found for serviceIdentifier:";throw s+=function(e,n){if(n.isTagged()||n.isNamed()){let r="",i=n.getNamedTag(),o=n.getCustomTags();return null!==i&&(r+=eg(i)+"\n"),null!==o&&o.forEach(e=>{r+=eg(e)+"\n"}),` ${e}
 ${e} - ${r}`}return` ${e}`}(n,i),s+=ep(o,n,ex),null!==r&&(s+=`
Trying to resolve bindings for "${ed(r.serviceIdentifier)}"`),Error(s)}case s.OnlyOneBindingAvailable:return;case s.MultipleBindingsAvailable:default:if(i.isArray())return;{let n=ed(e),r=`Ambiguous match found for serviceIdentifier: ${n}`;throw Error(r+=ep(o,n,ex))}}}(o.serviceIdentifier,l,i,o,r.container),l}function ew(e,n){let r=[new em(n.isMultiInject?W:U,e)];return void 0!==n.customTag&&r.push(new em(n.customTag.key,n.customTag.value)),!0===n.isOptional&&r.push(new em(K,!0)),r}function ex(e,n){let r=[],i=e_(e);return i.hasKey(n)?r=i.get(n):null!==e.parent&&(r=ex(e.parent,n)),r}function eC(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function eS(e){return!!eC(e)||Array.isArray(e)&&e.some(eC)}let eD=(e,n,r)=>{e.has(n.id)||e.set(n.id,r)},eN=(e,n)=>{e.cache=n,e.activated=!0,eC(n)&&eO(e,n)},eO=async(e,n)=>{try{e.cache=await n}catch(n){throw e.cache=null,e.activated=!1,n}};function eM(e){let n=new e.constr(...e.constructorInjections);return e.propertyRequests.forEach((r,i)=>{let o=r.target.identifier,s=e.propertyInjections[i];r.target.isOptional()&&void 0===s||(n[o]=s)}),n}async function eI(e){let n=[];for(let r of e)Array.isArray(r)?n.push(Promise.all(r)):n.push(r);return Promise.all(n)}function eT(e,n){let r=function(e,n){var r,i;if(Reflect.hasMetadata(Q,e)){let o=Reflect.getMetadata(Q,e);try{return n[o.value]?.()}catch(n){if(n instanceof Error)throw Error((r=e.name,i=n.message,`@postConstruct error in class ${r}: ${i}`))}}}(e,n);return eC(r)?r.then(()=>n):n}(u=a||(a={})).DynamicValue="toDynamicValue",u.Factory="toFactory",u.Provider="toProvider";let ek=e=>n=>{n.parentContext.setCurrentRequest(n);let r=n.bindings,i=n.childRequests,o=n.target&&n.target.isArray(),s=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));return o&&s?i.map(n=>ek(e)(n)):n.target.isOptional()&&0===r.length?void 0:ej(e,n,r[0])},eP=(e,n)=>{let r=(e=>{switch(e.type){case et.Factory:return{factory:e.factory,factoryType:a.Factory};case et.Provider:return{factory:e.provider,factoryType:a.Provider};case et.DynamicValue:return{factory:e.dynamicValue,factoryType:a.DynamicValue};default:throw Error(`Unexpected factory type ${e.type}`)}})(e);try{return r.factory.bind(e)(n)}catch(e){if(eu(e)){var i,o;throw Error((i=r.factoryType,o=n.currentRequest.serviceIdentifier.toString(),`It looks like there is a circular dependency in one of the '${i}' bindings. Please investigate bindings with service identifier '${o}'.`))}throw e}},eA=(e,n,r)=>{let i,o=n.childRequests;switch((e=>{let n=null;switch(e.type){case et.ConstantValue:case et.Function:n=e.cache;break;case et.Constructor:case et.Instance:n=e.implementationType;break;case et.DynamicValue:n=e.dynamicValue;break;case et.Provider:n=e.provider;break;case et.Factory:n=e.factory}if(null===n){let n=ed(e.serviceIdentifier);throw Error(`Invalid binding type: ${n}`)}})(r),r.type){case et.ConstantValue:case et.Function:i=r.cache;break;case et.Constructor:i=r.implementationType;break;case et.Instance:i=function(e,n,r,i){e.scope!==ee.Singleton&&function(e,n){let r=`Class cannot be instantiated in ${e.scope===ee.Request?"request":"transient"} scope.`;if("function"==typeof e.onDeactivation)throw Error(eh(n.name,r));if(Reflect.hasMetadata(q,n))throw Error(`@preDestroy error in class ${n.name}: ${r}`)}(e,n);let o=function(e,n,r){let i;if(n.length>0){let o=n.reduce((e,n)=>{let i=r(n);return n.target.type===en.ConstructorArgument?e.constructorInjections.push(i):(e.propertyRequests.push(n),e.propertyInjections.push(i)),e.isAsync||(e.isAsync=eS(i)),e},{constructorInjections:[],isAsync:!1,propertyInjections:[],propertyRequests:[]}),s={...o,constr:e};i=o.isAsync?async function(e){let n=await eI(e.constructorInjections),r=await eI(e.propertyInjections);return eM({...e,constructorInjections:n,propertyInjections:r})}(s):eM(s)}else i=new e;return i}(n,r,i);return eC(o)?o.then(e=>eT(n,e)):eT(n,o)}(r,r.implementationType,o,ek(e));break;default:i=eP(r,n.parentContext)}return i},eL=(e,n,r)=>{var i;let o=n.scope===ee.Singleton&&n.activated?n.cache:n.scope===ee.Request&&e.has(n.id)?e.get(n.id):null;return null!==o||(o=r(),i=o,n.scope===ee.Singleton&&eN(n,i),n.scope===ee.Request&&eD(e,n,i)),o},ej=(e,n,r)=>eL(e,r,()=>{let i=eA(e,n,r);return eC(i)?i.then(e=>eR(n,r,e)):eR(n,r,i)});function eR(e,n,r){let i=ez(e.parentContext,n,r),o=eB(e.parentContext.container),s,a=o.next();do{s=a.value;let n=e.parentContext,r=e$(s,e.serviceIdentifier);i=eC(i)?eF(r,n,i):eV(r,n,i),a=o.next()}while(!0!==a.done&&!e_(s).hasKey(e.serviceIdentifier));return i}let ez=(e,n,r)=>"function"==typeof n.onActivation?n.onActivation(e,r):r,eV=(e,n,r)=>{let i=e.next();for(;!0!==i.done;){if(eC(r=i.value(n,r)))return eF(e,n,r);i=e.next()}return r},eF=async(e,n,r)=>{let i=await r,o=e.next();for(;!0!==o.done;)i=await o.value(n,i),o=e.next();return i},e$=(e,n)=>{let r=e._activations;return r.hasKey(n)?r.get(n).values():[].values()},eB=e=>{let n=[e],r=e.parent;for(;null!==r;)n.push(r),r=r.parent;return{next:()=>{let e=n.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}},eH=(e,n)=>{let r=e.parentRequest;return null!==r&&(!!n(r)||eH(r,n))},eK=e=>n=>{let r=r=>null!==r&&null!==r.target&&r.target.matchesTag(e)(n);return r.metaData=new em(e,n),r},eU=eK($),eW=e=>n=>{let r=null;return null!==n&&((r=n.bindings[0],"string"==typeof e)?r.serviceIdentifier===e:e===n.bindings[0].implementationType)};class eG{_binding;constructor(e){this._binding=e}when(e){return this._binding.constraint=e,new eY(this._binding)}whenTargetNamed(e){return this._binding.constraint=eU(e),new eY(this._binding)}whenTargetIsDefault(){return this._binding.constraint=e=>null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged(),new eY(this._binding)}whenTargetTagged(e,n){return this._binding.constraint=eK(e)(n),new eY(this._binding)}whenInjectedInto(e){return this._binding.constraint=n=>null!==n&&eW(e)(n.parentRequest),new eY(this._binding)}whenParentNamed(e){return this._binding.constraint=n=>null!==n&&eU(e)(n.parentRequest),new eY(this._binding)}whenParentTagged(e,n){return this._binding.constraint=r=>null!==r&&eK(e)(n)(r.parentRequest),new eY(this._binding)}whenAnyAncestorIs(e){return this._binding.constraint=n=>null!==n&&eH(n,eW(e)),new eY(this._binding)}whenNoAncestorIs(e){return this._binding.constraint=n=>null!==n&&!eH(n,eW(e)),new eY(this._binding)}whenAnyAncestorNamed(e){return this._binding.constraint=n=>null!==n&&eH(n,eU(e)),new eY(this._binding)}whenNoAncestorNamed(e){return this._binding.constraint=n=>null!==n&&!eH(n,eU(e)),new eY(this._binding)}whenAnyAncestorTagged(e,n){return this._binding.constraint=r=>null!==r&&eH(r,eK(e)(n)),new eY(this._binding)}whenNoAncestorTagged(e,n){return this._binding.constraint=r=>null!==r&&!eH(r,eK(e)(n)),new eY(this._binding)}whenAnyAncestorMatches(e){return this._binding.constraint=n=>null!==n&&eH(n,e),new eY(this._binding)}whenNoAncestorMatches(e){return this._binding.constraint=n=>null!==n&&!eH(n,e),new eY(this._binding)}}class eY{_binding;constructor(e){this._binding=e}onActivation(e){return this._binding.onActivation=e,new eG(this._binding)}onDeactivation(e){return this._binding.onDeactivation=e,new eG(this._binding)}}class eZ{_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new eG(this._binding),this._bindingOnSyntax=new eY(this._binding)}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}class eX{_binding;constructor(e){this._binding=e}inRequestScope(){return this._binding.scope=ee.Request,new eZ(this._binding)}inSingletonScope(){return this._binding.scope=ee.Singleton,new eZ(this._binding)}inTransientScope(){return this._binding.scope=ee.Transient,new eZ(this._binding)}}class eQ{_bindingInSyntax;_bindingWhenSyntax;_bindingOnSyntax;_binding;constructor(e){this._binding=e,this._bindingWhenSyntax=new eG(this._binding),this._bindingOnSyntax=new eY(this._binding),this._bindingInSyntax=new eX(e)}inRequestScope(){return this._bindingInSyntax.inRequestScope()}inSingletonScope(){return this._bindingInSyntax.inSingletonScope()}inTransientScope(){return this._bindingInSyntax.inTransientScope()}when(e){return this._bindingWhenSyntax.when(e)}whenTargetNamed(e){return this._bindingWhenSyntax.whenTargetNamed(e)}whenTargetIsDefault(){return this._bindingWhenSyntax.whenTargetIsDefault()}whenTargetTagged(e,n){return this._bindingWhenSyntax.whenTargetTagged(e,n)}whenInjectedInto(e){return this._bindingWhenSyntax.whenInjectedInto(e)}whenParentNamed(e){return this._bindingWhenSyntax.whenParentNamed(e)}whenParentTagged(e,n){return this._bindingWhenSyntax.whenParentTagged(e,n)}whenAnyAncestorIs(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)}whenNoAncestorIs(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)}whenAnyAncestorNamed(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)}whenAnyAncestorTagged(e,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,n)}whenNoAncestorNamed(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)}whenNoAncestorTagged(e,n){return this._bindingWhenSyntax.whenNoAncestorTagged(e,n)}whenAnyAncestorMatches(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)}whenNoAncestorMatches(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)}onActivation(e){return this._bindingOnSyntax.onActivation(e)}onDeactivation(e){return this._bindingOnSyntax.onDeactivation(e)}}class eq{_binding;constructor(e){this._binding=e}to(e){return this._binding.type=et.Instance,this._binding.implementationType=e,new eQ(this._binding)}toSelf(){if("function"!=typeof this._binding.serviceIdentifier)throw Error("The toSelf function can only be applied when a constructor is used as service identifier");let e=this._binding.serviceIdentifier;return this.to(e)}toConstantValue(e){return this._binding.type=et.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=ee.Singleton,new eZ(this._binding)}toDynamicValue(e){return this._binding.type=et.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new eQ(this._binding)}toConstructor(e){return this._binding.type=et.Constructor,this._binding.implementationType=e,this._binding.scope=ee.Singleton,new eZ(this._binding)}toFactory(e){return this._binding.type=et.Factory,this._binding.factory=e,this._binding.scope=ee.Singleton,new eZ(this._binding)}toFunction(e){if("function"!=typeof e)throw Error("Value provided to function binding must be a function!");let n=this.toConstantValue(e);return this._binding.type=et.Function,this._binding.scope=ee.Singleton,n}toAutoFactory(e){return this._binding.type=et.Factory,this._binding.factory=n=>()=>n.container.get(e),this._binding.scope=ee.Singleton,new eZ(this._binding)}toAutoNamedFactory(e){return this._binding.type=et.Factory,this._binding.factory=n=>r=>n.container.getNamed(e,r),new eZ(this._binding)}toProvider(e){return this._binding.type=et.Provider,this._binding.provider=e,this._binding.scope=ee.Singleton,new eZ(this._binding)}toService(e){this._binding.type=et.DynamicValue,Object.defineProperty(this._binding,"cache",{configurable:!0,enumerable:!0,get:()=>null,set(e){}}),this._binding.dynamicValue=n=>{try{return n.container.get(e)}catch(r){return n.container.getAsync(e)}},this._binding.implementationType=null}}class eJ{bindings;activations;deactivations;middleware;moduleActivationStore;static of(e,n,r,i,o){let s=new eJ;return s.bindings=e,s.middleware=n,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s}}class e0{_map;constructor(){this._map=new Map}getMap(){return this._map}add(e,n){if(this._checkNonNulish(e),null==n)throw Error(es);let r=this._map.get(e);void 0!==r?r.push(n):this._map.set(e,[n])}get(e){this._checkNonNulish(e);let n=this._map.get(e);if(void 0!==n)return n;throw Error(ea)}remove(e){if(this._checkNonNulish(e),!this._map.delete(e))throw Error(ea)}removeIntersection(e){this.traverse((n,r)=>{let i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){let e=r.filter(e=>!i.some(n=>e===n));this._setValue(n,e)}})}removeByCondition(e){let n=[];return this._map.forEach((r,i)=>{let o=[];for(let i of r)e(i)?n.push(i):o.push(i);this._setValue(i,o)}),n}hasKey(e){return this._checkNonNulish(e),this._map.has(e)}clone(){let e=new e0;return this._map.forEach((n,r)=>{n.forEach(n=>{e.add(r,"object"==typeof n&&null!==n&&"clone"in n&&"function"==typeof n.clone?n.clone():n)})}),e}traverse(e){this._map.forEach((n,r)=>{e(r,n)})}_checkNonNulish(e){if(null==e)throw Error(es)}_setValue(e,n){n.length>0?this._map.set(e,n):this._map.delete(e)}}class e1{_map=new Map;remove(e){let n=this._map.get(e);return void 0===n?this._getEmptyHandlersStore():(this._map.delete(e),n)}addDeactivation(e,n,r){this._getModuleActivationHandlers(e).onDeactivations.add(n,r)}addActivation(e,n,r){this._getModuleActivationHandlers(e).onActivations.add(n,r)}clone(){let e=new e1;return this._map.forEach((n,r)=>{e._map.set(r,{onActivations:n.onActivations.clone(),onDeactivations:n.onDeactivations.clone()})}),e}_getModuleActivationHandlers(e){let n=this._map.get(e);return void 0===n&&(n=this._getEmptyHandlersStore(),this._map.set(e,n)),n}_getEmptyHandlersStore(){return{onActivations:new e0,onDeactivations:new e0}}}class e2{id;parent;options;_middleware;_bindingDictionary;_activations;_deactivations;_snapshots;_metadataReader;_moduleActivationStore;constructor(e){let n=e||{};if("object"!=typeof n)throw Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===n.defaultScope)n.defaultScope=ee.Transient;else if(n.defaultScope!==ee.Singleton&&n.defaultScope!==ee.Transient&&n.defaultScope!==ee.Request)throw Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===n.autoBindInjectable)n.autoBindInjectable=!1;else if("boolean"!=typeof n.autoBindInjectable)throw Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===n.skipBaseClassChecks)n.skipBaseClassChecks=!1;else if("boolean"!=typeof n.skipBaseClassChecks)throw Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=er++,this._bindingDictionary=new e0,this._snapshots=[],this._middleware=null,this._activations=new e0,this._deactivations=new e0,this.parent=null,this._metadataReader=new ec,this._moduleActivationStore=new e1}static merge(e,n,...r){let i=new e2,o=[e,n,...r].map(e=>e_(e)),s=e_(i);return o.forEach(e=>{e.traverse((e,n)=>{n.forEach(e=>{s.add(e.serviceIdentifier,e.clone())})})}),i}load(...e){let n=this._getContainerModuleHelpersFactory();for(let r of e){let e=n(r.id);r.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}async loadAsync(...e){let n=this._getContainerModuleHelpersFactory();for(let r of e){let e=n(r.id);await r.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction,e.unbindAsyncFunction,e.onActivationFunction,e.onDeactivationFunction)}}unload(...e){e.forEach(e=>{let n=this._removeModuleBindings(e.id);this._deactivateSingletons(n),this._removeModuleHandlers(e.id)})}async unloadAsync(...e){for(let n of e){let e=this._removeModuleBindings(n.id);await this._deactivateSingletonsAsync(e),this._removeModuleHandlers(n.id)}}bind(e){return this._bind(this._buildBinding(e))}rebind(e){return this.unbind(e),this.bind(e)}async rebindAsync(e){return await this.unbindAsync(e),this.bind(e)}unbind(e){if(this._bindingDictionary.hasKey(e)){let n=this._bindingDictionary.get(e);this._deactivateSingletons(n)}this._removeServiceFromDictionary(e)}async unbindAsync(e){if(this._bindingDictionary.hasKey(e)){let n=this._bindingDictionary.get(e);await this._deactivateSingletonsAsync(n)}this._removeServiceFromDictionary(e)}unbindAll(){this._bindingDictionary.traverse((e,n)=>{this._deactivateSingletons(n)}),this._bindingDictionary=new e0}async unbindAllAsync(){let e=[];this._bindingDictionary.traverse((n,r)=>{e.push(this._deactivateSingletonsAsync(r))}),await Promise.all(e),this._bindingDictionary=new e0}onActivation(e,n){this._activations.add(e,n)}onDeactivation(e,n){this._deactivations.add(e,n)}isBound(e){let n=this._bindingDictionary.hasKey(e);return!n&&this.parent&&(n=this.parent.isBound(e)),n}isCurrentBound(e){return this._bindingDictionary.hasKey(e)}isBoundNamed(e,n){return this.isBoundTagged(e,$,n)}isBoundTagged(e,n,r){let i=!1;if(this._bindingDictionary.hasKey(e)){let s=this._bindingDictionary.get(e),a=function(e,n,r){let i=I(ew(n,r));if(i.kind===o.unmanaged)throw Error("Unexpected metadata when creating target");let s=new V("",i,"Variable");return new eb(n,new ey(e),null,[],s)}(this,e,{customTag:{key:n,value:r},isMultiInject:!1});i=s.some(e=>e.constraint(a))}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,n,r)),i}snapshot(){this._snapshots.push(eJ.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))}restore(){let e=this._snapshots.pop();if(void 0===e)throw Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore}createChild(e){let n=new e2(e||this.options);return n.parent=this,n}applyMiddleware(...e){let n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((e,n)=>n(e),n)}applyCustomMetadataReader(e){this._metadataReader=e}get(e){let n=this._getNotAllArgs(e,!1,!1);return this._getButThrowIfAsync(n)}async getAsync(e){let n=this._getNotAllArgs(e,!1,!1);return this._get(n)}getTagged(e,n,r){let i=this._getNotAllArgs(e,!1,!1,n,r);return this._getButThrowIfAsync(i)}async getTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!1,!1,n,r);return this._get(i)}getNamed(e,n){return this.getTagged(e,$,n)}async getNamedAsync(e,n){return this.getTaggedAsync(e,$,n)}getAll(e,n){let r=this._getAllArgs(e,n,!1);return this._getButThrowIfAsync(r)}async getAllAsync(e,n){let r=this._getAllArgs(e,n,!1);return this._getAll(r)}getAllTagged(e,n,r){let i=this._getNotAllArgs(e,!0,!1,n,r);return this._getButThrowIfAsync(i)}async getAllTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!0,!1,n,r);return this._getAll(i)}getAllNamed(e,n){return this.getAllTagged(e,$,n)}async getAllNamedAsync(e,n){return this.getAllTaggedAsync(e,$,n)}resolve(e){let n=this.isBound(e);n||this.bind(e).toSelf();let r=this.get(e);return n||this.unbind(e),r}tryGet(e){let n=this._getNotAllArgs(e,!1,!0);return this._getButThrowIfAsync(n)}async tryGetAsync(e){let n=this._getNotAllArgs(e,!1,!0);return this._get(n)}tryGetTagged(e,n,r){let i=this._getNotAllArgs(e,!1,!0,n,r);return this._getButThrowIfAsync(i)}async tryGetTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!1,!0,n,r);return this._get(i)}tryGetNamed(e,n){return this.tryGetTagged(e,$,n)}async tryGetNamedAsync(e,n){return this.tryGetTaggedAsync(e,$,n)}tryGetAll(e,n){let r=this._getAllArgs(e,n,!0);return this._getButThrowIfAsync(r)}async tryGetAllAsync(e,n){let r=this._getAllArgs(e,n,!0);return this._getAll(r)}tryGetAllTagged(e,n,r){let i=this._getNotAllArgs(e,!0,!0,n,r);return this._getButThrowIfAsync(i)}async tryGetAllTaggedAsync(e,n,r){let i=this._getNotAllArgs(e,!0,!0,n,r);return this._getAll(i)}tryGetAllNamed(e,n){return this.tryGetAllTagged(e,$,n)}async tryGetAllNamedAsync(e,n){return this.tryGetAllTaggedAsync(e,$,n)}_preDestroy(e,n){if(void 0!==e&&Reflect.hasMetadata(q,e)){let r=Reflect.getMetadata(q,e);return n[r.value]?.()}}_removeModuleHandlers(e){let n=this._moduleActivationStore.remove(e);this._activations.removeIntersection(n.onActivations),this._deactivations.removeIntersection(n.onDeactivations)}_removeModuleBindings(e){return this._bindingDictionary.removeByCondition(n=>n.moduleId===e)}_deactivate(e,n){let r=null==n?void 0:Object.getPrototypeOf(n).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){let i=this._deactivateContainer(n,this._deactivations.get(e.serviceIdentifier).values());if(eC(i))return this._handleDeactivationError(i.then(async()=>this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,n,r)),e.serviceIdentifier)}let i=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,n,r);if(eC(i))return this._handleDeactivationError(i,e.serviceIdentifier)}catch(n){if(n instanceof Error)throw Error(eh(ed(e.serviceIdentifier),n.message))}}async _handleDeactivationError(e,n){try{await e}catch(e){if(e instanceof Error)throw Error(eh(ed(n),e.message))}}_deactivateContainer(e,n){let r=n.next();for(;"function"==typeof r.value;){let i=r.value(e);if(eC(i))return i.then(async()=>this._deactivateContainerAsync(e,n));r=n.next()}}async _deactivateContainerAsync(e,n){let r=n.next();for(;"function"==typeof r.value;)await r.value(e),r=n.next()}_getContainerModuleHelpersFactory(){let e=e=>n=>{let r=this._buildBinding(n);return r.moduleId=e,this._bind(r)},n=()=>e=>{this.unbind(e)},r=()=>async e=>this.unbindAsync(e),i=()=>e=>this.isBound(e),o=n=>{let r=e(n);return e=>(this.unbind(e),r(e))},s=e=>(n,r)=>{this._moduleActivationStore.addActivation(e,n,r),this.onActivation(n,r)},a=e=>(n,r)=>{this._moduleActivationStore.addDeactivation(e,n,r),this.onDeactivation(n,r)};return l=>({bindFunction:e(l),isboundFunction:i(),onActivationFunction:s(l),onDeactivationFunction:a(l),rebindFunction:o(l),unbindAsyncFunction:r(),unbindFunction:n()})}_bind(e){return this._bindingDictionary.add(e.serviceIdentifier,e),new eq(e)}_buildBinding(e){return new ei(e,this.options.defaultScope||ee.Transient)}async _getAll(e){return Promise.all(this._get(e))}_get(e){let n={...e,contextInterceptor:e=>e,targetType:en.Variable};if(this._middleware){let e=this._middleware(n);if(null==e)throw Error("Invalid return type in middleware. Middleware must return!");return e}return this._planAndResolve()(n)}_getButThrowIfAsync(e){let n=this._get(e);if(eS(n)){var r;throw Error(`You are attempting to construct ${"function"==typeof(r=e.serviceIdentifier)?`[function/class ${r.name||"<anonymous>"}]`:"symbol"==typeof r?r.toString():`'${r}'`} in a synchronous way but it has asynchronous dependencies.`)}return n}_getAllArgs(e,n,r){return{avoidConstraints:!n?.enforceBindingConstraints,isMultiInject:!0,isOptional:r,serviceIdentifier:e}}_getNotAllArgs(e,n,r,i,o){return{avoidConstraints:!1,isMultiInject:n,isOptional:r,key:i,serviceIdentifier:e,value:o}}_getPlanMetadataFromNextArgs(e){let n={isMultiInject:e.isMultiInject};return void 0!==e.key&&(n.customTag={key:e.key,value:e.value}),!0===e.isOptional&&(n.isOptional=!0),n}_planAndResolve(){return e=>{var n;let r=function(e,n,r,i,s,a=!1){let l=new ey(n),h=function(e,n,r){let i=I(ew(n,r));if(i.kind===o.unmanaged)throw Error("Unexpected metadata when creating target");return new V("",i,e)}(r,i,s);try{return function e(n,r,i,o,s,a){let l,h;if(null===s){l=eE(n,r,o,null,a),h=new eb(i,o,null,l,a);let e=new ev(o,h);o.addPlan(e)}else l=eE(n,r,o,s,a),h=s.addChildRequest(a.serviceIdentifier,l,a);l.forEach(r=>{let i=null;if(a.isArray())i=h.addChildRequest(r.serviceIdentifier,r,a);else{if(null!==r.cache)return;i=h}if(r.type===et.Instance&&null!==r.implementationType){var s;let a=(s=r.implementationType,F(n)(s));if(!0!==o.container.options.skipBaseClassChecks){let e=function e(n,r){let i=function(e){let n=Object.getPrototypeOf(e.prototype);return n?.constructor}(r);if(void 0===i||i===Object)return 0;let o=F(n)(i),s=o.map(e=>e.metadata.filter(e=>e.key===H)),a=[].concat.apply([],s).length,l=o.length-a;return l>0?l:e(n,i)}(n,r.implementationType);if(a.length<e)throw Error(`The number of constructor arguments in the derived class ${ef(r.implementationType)} must be >= than the number of constructor arguments of its base class.`)}a.forEach(r=>{e(n,!1,r.serviceIdentifier,o,i,r)})}})}(e,a,i,l,null,h),l}catch(e){throw eu(e)&&function e(n){n.childRequests.forEach(r=>{if(function e(n,r){return null!==n.parentRequest&&(n.parentRequest.serviceIdentifier===r||e(n.parentRequest,r))}(n,r.serviceIdentifier)){let e=(function e(n,r=[]){let i=ed(n.serviceIdentifier);return r.push(i),null!==n.parentRequest?e(n.parentRequest,r):r})(r).reverse().join(" --\x3e ");throw Error(`Circular dependency found: ${e}`)}e(r)})}(l.plan.rootRequest),e}}(this._metadataReader,this,e.targetType,e.serviceIdentifier,this._getPlanMetadataFromNextArgs(e),e.avoidConstraints);return ek((n=r=e.contextInterceptor(r)).plan.rootRequest.requestScope)(n.plan.rootRequest)}}_deactivateIfSingleton(e){if(e.activated)return eC(e.cache)?e.cache.then(n=>this._deactivate(e,n)):this._deactivate(e,e.cache)}_deactivateSingletons(e){for(let n of e)if(eC(this._deactivateIfSingleton(n)))throw Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}async _deactivateSingletonsAsync(e){await Promise.all(e.map(async e=>this._deactivateIfSingleton(e)))}_propagateContainerDeactivationThenBindingAndPreDestroy(e,n,r){return this.parent?this._deactivate.bind(this.parent)(e,n):this._bindingDeactivationAndPreDestroy(e,n,r)}async _propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,n,r){this.parent?await this._deactivate.bind(this.parent)(e,n):await this._bindingDeactivationAndPreDestroyAsync(e,n,r)}_removeServiceFromDictionary(e){try{this._bindingDictionary.remove(e)}catch(n){throw Error(`Could not unbind serviceIdentifier: ${ed(e)}`)}}_bindingDeactivationAndPreDestroy(e,n,r){if("function"==typeof e.onDeactivation){let i=e.onDeactivation(n);if(eC(i))return i.then(()=>this._preDestroy(r,n))}return this._preDestroy(r,n)}async _bindingDeactivationAndPreDestroyAsync(e,n,r){"function"==typeof e.onDeactivation&&await e.onDeactivation(n),await this._preDestroy(r,n)}}class e3{id;registry;constructor(e){this.id=er++,this.registry=e}}function e4(e,n,r,i){let o=function(e){let n=[];if(Array.isArray(e)){let r=function(e){let n=new Set;for(let r of e){if(n.has(r))return r;n.add(r)}}((n=e).map(e=>e.key));if(void 0!==r)throw Error(`${eo} ${r.toString()}`)}else n=[e];return n}(i),s={};Reflect.hasOwnMetadata(e,n)&&(s=Reflect.getMetadata(e,n));let a=s[r];if(void 0===a)a=[];else for(let e of a)if(o.some(n=>n.key===e.key))throw Error(`${eo} ${e.key.toString()}`);a.push(...o),s[r]=a,Reflect.defineMetadata(e,s,n)}function e5(e){return(n,r,i)=>{"number"==typeof i?(function(e){if(void 0!==e)throw Error(el)}(r),e4(G,n,i.toString(),e)):function(e,n,r){if(void 0!==e.prototype)throw Error(el);e4(Y,e.constructor,n,r)}(n,r,e)}}function e6(){return function(e){if(Reflect.hasOwnMetadata(Z,e))throw Error("Cannot apply @injectable decorator multiple times.");return Reflect.defineMetadata(Z,Reflect.getMetadata(X,e)||[],e),e}}function e8(e){return e5(new em($,e))}function e9(e){return n=>(r,i,o)=>{if(void 0===n){let e="function"==typeof r?r.name:r.constructor.name;throw Error(`@inject called with undefined this could mean that the class ${e} has a circular dependency problem. You can use a LazyServiceIdentifer to overcome this limitation.`)}e5(new em(e,n))(r,i,o)}}let e7=e9(U);function te(){return e5(new em(K,!0))}let tt=e9(W);function tn(e,n){return()=>(r,i)=>{let o=new em(e,i);if(Reflect.hasOwnMetadata(e,r.constructor))throw Error(n);Reflect.defineMetadata(e,o,r.constructor)}}let tr=tn(Q,"Cannot apply @postConstruct decorator multiple times in the same class"),ti=tn(q,"Cannot apply @preDestroy decorator multiple times in the same class")},6793:function(e,n,r){"use strict";r.d(n,{Z:()=>l});var i=r(915);let o=function(e,n){for(var r=e.length;r--;)if((0,i.Z)(e[r][0],n))return r;return -1};var s=Array.prototype.splice;function a(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(e){var n=this.__data__,r=o(n,e);return!(r<0)&&(r==n.length-1?n.pop():s.call(n,r,1),--this.size,!0)},a.prototype.get=function(e){var n=this.__data__,r=o(n,e);return r<0?void 0:n[r][1]},a.prototype.has=function(e){return o(this.__data__,e)>-1},a.prototype.set=function(e,n){var r=this.__data__,i=o(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this};let l=a},8133:function(e,n,r){"use strict";r.d(n,{Z:()=>s});var i=r(7076),o=r(5676);let s=(0,i.Z)(o.Z,"Map")},260:function(e,n,r){"use strict";r.d(n,{Z:()=>p});var i=(0,r(7076).Z)(Object,"create"),o=Object.prototype.hasOwnProperty,s=Object.prototype.hasOwnProperty;function a(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}a.prototype.clear=function(){this.__data__=i?i(null):{},this.size=0},a.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=!!n,n},a.prototype.get=function(e){var n=this.__data__;if(i){var r=n[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(n,e)?n[e]:void 0},a.prototype.has=function(e){var n=this.__data__;return i?void 0!==n[e]:s.call(n,e)},a.prototype.set=function(e,n){var r=this.__data__;return this.size+=+!this.has(e),r[e]=i&&void 0===n?"__lodash_hash_undefined__":n,this};var l=r(6793),h=r(8133);let c=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e},u=function(e,n){var r=e.__data__;return c(n)?r["string"==typeof n?"string":"hash"]:r.map};function d(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var i=e[n];this.set(i[0],i[1])}}d.prototype.clear=function(){this.size=0,this.__data__={hash:new a,map:new(h.Z||l.Z),string:new a}},d.prototype.delete=function(e){var n=u(this,e).delete(e);return this.size-=!!n,n},d.prototype.get=function(e){return u(this,e).get(e)},d.prototype.has=function(e){return u(this,e).has(e)},d.prototype.set=function(e,n){var r=u(this,e),i=r.size;return r.set(e,n),this.size+=+(r.size!=i),this};let p=d},6894:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i=r(5676).Z.Symbol},9520:function(e,n,r){"use strict";r.d(n,{Z:()=>d});var i=r(6894),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,l=i.Z?i.Z.toStringTag:void 0;let h=function(e){var n=s.call(e,l),r=e[l];try{e[l]=void 0;var i=!0}catch(e){}var o=a.call(e);return i&&(n?e[l]=r:delete e[l]),o};var c=Object.prototype.toString,u=i.Z?i.Z.toStringTag:void 0;let d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?h(e):c.call(e)}},2268:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i="object"==typeof global&&global&&global.Object===Object&&global},7076:function(e,n,r){"use strict";r.d(n,{Z:()=>y});var i,o=r(3820),s=r(5676).Z["__core-js_shared__"],a=(i=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",l=r(4054),h=r(3117),c=/^\[object .+?Constructor\]$/,u=Object.prototype,d=Function.prototype.toString,p=u.hasOwnProperty,f=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let g=function(e){return!!(0,l.Z)(e)&&(!a||!(a in e))&&((0,o.Z)(e)?f:c).test((0,h.Z)(e))},y=function(e,n){var r=null==e?void 0:e[n];return g(r)?r:void 0}},5676:function(e,n,r){"use strict";r.d(n,{Z:()=>s});var i=r(2268),o="object"==typeof self&&self&&self.Object===Object&&self;let s=i.Z||o||Function("return this")()},3117:function(e,n,r){"use strict";r.d(n,{Z:()=>o});var i=Function.prototype.toString;let o=function(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},1777:function(e,n,r){"use strict";r.d(n,{Z:()=>_});var i=r(4054),o=r(5676);let s=function(){return o.Z.Date.now()};var a=/\s/;let l=function(e){for(var n=e.length;n--&&a.test(e.charAt(n)););return n};var h=/^\s+/,c=r(9221),u=0/0,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,g=parseInt;let y=function(e){if("number"==typeof e)return e;if((0,c.Z)(e))return u;if((0,i.Z)(e)){var n,r="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.Z)(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(n=e)?n.slice(0,l(n)+1).replace(h,""):n;var o=p.test(e);return o||f.test(e)?g(e.slice(2),o?2:8):d.test(e)?u:+e};var m=Math.max,b=Math.min;let _=function(e,n,r){var o,a,l,h,c,u,d=0,p=!1,f=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function _(n){var r=o,i=a;return o=a=void 0,d=n,h=e.apply(i,r)}function E(e){var r=e-u,i=e-d;return void 0===u||r>=n||r<0||f&&i>=l}function w(){var e,r,i,o=s();if(E(o))return x(o);c=setTimeout(w,(e=o-u,r=o-d,i=n-e,f?b(i,l-r):i))}function x(e){return(c=void 0,g&&o)?_(e):(o=a=void 0,h)}function C(){var e,r=s(),i=E(r);if(o=arguments,a=this,u=r,i){if(void 0===c)return d=e=u,c=setTimeout(w,n),p?_(e):h;if(f)return clearTimeout(c),c=setTimeout(w,n),_(u)}return void 0===c&&(c=setTimeout(w,n)),h}return n=y(n)||0,(0,i.Z)(r)&&(p=!!r.leading,l=(f="maxWait"in r)?m(y(r.maxWait)||0,n):l,g="trailing"in r?!!r.trailing:g),C.cancel=function(){void 0!==c&&clearTimeout(c),d=0,o=u=a=c=void 0},C.flush=function(){return void 0===c?h:x(s())},C}},915:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i=function(e,n){return e===n||e!=e&&n!=n}},1376:function(e,n,r){"use strict";r.d(n,{Z:()=>N});var i,o,s=r(521),a=r(9221),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/;let c=function(e,n){if((0,s.Z)(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||(0,a.Z)(e))||h.test(e)||!l.test(e)||null!=n&&e in Object(n)};var u=r(260);function d(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw TypeError("Expected a function");var r=function(){var i=arguments,o=n?n.apply(this,i):i[0],s=r.cache;if(s.has(o))return s.get(o);var a=e.apply(this,i);return r.cache=s.set(o,a)||s,a};return r.cache=new(d.Cache||u.Z),r}d.Cache=u.Z;var p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,g=(o=(i=d(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(p,function(e,r,i,o){n.push(i?o.replace(f,"$1"):r||e)}),n},function(e){return 500===o.size&&o.clear(),e})).cache,i),y=r(6894);let m=function(e,n){for(var r=-1,i=null==e?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o};var b=1/0,_=y.Z?y.Z.prototype:void 0,E=_?_.toString:void 0;let w=function e(n){if("string"==typeof n)return n;if((0,s.Z)(n))return m(n,e)+"";if((0,a.Z)(n))return E?E.call(n):"";var r=n+"";return"0"==r&&1/n==-b?"-0":r},x=function(e,n){return(0,s.Z)(e)?e:c(e,n)?[e]:g(null==e?"":w(e))};var C=1/0;let S=function(e){if("string"==typeof e||(0,a.Z)(e))return e;var n=e+"";return"0"==n&&1/e==-C?"-0":n},D=function(e,n){n=x(n,e);for(var r=0,i=n.length;null!=e&&r<i;)e=e[S(n[r++])];return r&&r==i?e:void 0},N=function(e,n,r){var i=null==e?void 0:D(e,n);return void 0===i?r:i}},521:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i=Array.isArray},3820:function(e,n,r){"use strict";r.d(n,{Z:()=>s});var i=r(9520),o=r(4054);let s=function(e){if(!(0,o.Z)(e))return!1;var n=(0,i.Z)(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},4054:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},4388:function(e,n,r){"use strict";r.d(n,{Z:()=>i});let i=function(e){return null!=e&&"object"==typeof e}},9221:function(e,n,r){"use strict";r.d(n,{Z:()=>s});var i=r(9520),o=r(4388);let s=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,i.Z)(e)}},6261:function(e,n,r){"use strict";r.d(n,{kP:()=>s,x0:()=>a});let i=e=>crypto.getRandomValues(new Uint8Array(e)),o=(e,n,r)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*n/e.length);return (s=n)=>{let a="";for(;;){let n=r(o),l=o;for(;l--;)if((a+=e[n[l]&i]||"").length===s)return a}}},s=(e,n=21)=>o(e,n,i),a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,n)=>((n&=63)<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"")},377:function(e,n,r){"use strict";r.d(n,{CR:()=>u,FC:()=>f,Jh:()=>h,KL:()=>g,XA:()=>c,ZT:()=>o,ev:()=>d,gn:()=>s,mG:()=>l,qq:()=>p,w6:()=>a});var i=function(e,n){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])})(e,n)};function o(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function s(e,n,r,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,r,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(s<3?o(a):s>3?o(n,r,a):o(n,r))||a);return s>3&&a&&Object.defineProperty(n,r,a),a}function a(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function l(e,n,r,i){return new(r||(r=Promise))(function(o,s){function a(e){try{h(i.next(e))}catch(e){s(e)}}function l(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var n;e.done?o(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,l)}h((i=i.apply(e,n||[])).next())})}function h(e,n){var r,i,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(h){var c=[l,h];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(r=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=n.call(e,s)}catch(e){c=[6,e],i=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function c(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,o,s=r.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return a}function d(e,n,r){if(r||2==arguments.length)for(var i,o=0,s=n.length;o<s;o++)!i&&o in n||(i||(i=Array.prototype.slice.call(n,0,o)),i[o]=n[o]);return e.concat(i||Array.prototype.slice.call(n))}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function f(e,n,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,n||[]),s=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(n){return Promise.resolve(n).then(e,c)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,n){o[e]&&(i[e]=function(n){return new Promise(function(r,i){s.push([e,n,r,i])>1||l(e,n)})},n&&(i[e]=n(i[e])))}function l(e,n){try{var r;(r=o[e](n)).value instanceof p?Promise.resolve(r.value.v).then(h,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function h(e){l("next",e)}function c(e){l("throw",e)}function u(e,n){e(n),s.shift(),s.length&&l(s[0][0],s[0][1])}}function g(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=c(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(n){return new Promise(function(i,o){var s,a,l;s=i,a=o,l=(n=e[r](n)).done,Promise.resolve(n.value).then(function(e){s({value:e,done:l})},a)})}}}}}]);