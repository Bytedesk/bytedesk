"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7960],{81063:function(e,t,n){var r=n(17082),a=n(44194),o=n(99719),i=n(64423),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o.Z}))},l=a.forwardRef(s);t.Z=l},52590:function(e,t,n){var r=n(17082),a=n(44194),o=n(43549),i=n(64423),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o.Z}))},l=a.forwardRef(s);t.Z=l},47719:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),a=n(44194),o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},i=n(64423),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};var l=a.forwardRef(s)},50648:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),a=n(44194),o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},i=n(64423),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};var l=a.forwardRef(s)},60051:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),a=n(44194),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},i=n(64423),s=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};var l=a.forwardRef(s)},84881:function(e,t,n){var r=n(17082),a=n(51190),o=n(82308),i=n(44194),s=n(63653),l=n(86001),c=n(31549),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],m=function(e,t){var n=e.fieldProps,d=e.children,m=e.params,f=e.proFieldProps,p=e.mode,g=e.valueEnum,h=e.request,v=e.showSearch,b=e.options,x=(0,a.Z)(e,u),y=(0,i.useContext)(s.Z);return(0,c.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,o.h)(g),request:h,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:b,mode:p,showSearch:v,getPopupContainer:y.getPopupContainer},n),ref:t,proFieldProps:f},x),{},{children:d}))},f=i.forwardRef((function(e,t){var n=e.fieldProps,u=e.children,m=e.params,f=e.proFieldProps,p=e.mode,g=e.valueEnum,h=e.request,v=e.options,b=(0,a.Z)(e,d),x=(0,r.Z)({options:v,mode:p||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),y=(0,i.useContext)(s.Z);return(0,c.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,o.h)(g),request:h,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:y.getPopupContainer},x),ref:t,proFieldProps:f},b),{},{children:u}))})),p=i.forwardRef(m);p.SearchSelect=f,p.displayName="ProFormComponent",t.Z=p},2516:function(e,t,n){var r=n(17082),a=n(51190),o=n(44194),i=n(86001),s=n(31549),l=["fieldProps","request","params","proFieldProps"],c=function(e,t){var n=e.fieldProps,o=e.request,c=e.params,u=e.proFieldProps,d=(0,a.Z)(e,l);return(0,s.jsx)(i.Z,(0,r.Z)({valueType:"treeSelect",fieldProps:n,ref:t,request:o,params:c,filedConfig:{customLightMode:!0},proFieldProps:u},d))},u=o.forwardRef(c);t.Z=u},73669:function(e,t,n){n.d(t,{D$:function(){return f},EP:function(){return v},hS:function(){return g},z_:function(){return d}});var r=n(90819),a=n.n(r),o=n(73193),i=n.n(o),s=n(89933),l=n.n(s),c=n(90069),u=n(30921);function d(e){return m.apply(this,arguments)}function m(){return(m=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/member/query/org",{method:"GET",params:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/member/create",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/member/update",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/member/delete",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},17220:function(e,t,n){n(44194);var r=n(75365),a=n(81063),o=n(30921),i=n(31549);t.Z=function(e){var t,n,s=e.file,l=e.onDelete,c=e.showDelete,u=void 0===c||c,d=(0,o.useIntl)();return(0,i.jsxs)("div",{style:{position:"relative",width:"50px",height:"50px",border:"1px solid #f0f0f0",borderRadius:"4px",overflow:"hidden"},title:d.formatMessage({id:null!=s&&null!==(t=s.fileType)&&void 0!==t&&t.startsWith("image/")?"upload.preview.image":"upload.preview.file"}),children:[u&&(0,i.jsx)(r.ZP,{type:"text",size:"small",icon:(0,i.jsx)(a.Z,{}),onClick:function(){return l(s.uid)},style:{position:"absolute",top:0,right:0,padding:"2px",background:"rgba(255, 255, 255, 0.8)",border:"none",borderRadius:"0 4px 0 4px",zIndex:1}}),(0,i.jsx)("div",{onClick:function(){return window.open(s.fileUrl,"_blank")},style:{width:"100%",height:"100%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:null!=s&&null!==(n=s.fileType)&&void 0!==n&&n.startsWith("image/")?(0,i.jsx)("img",{src:null==s?void 0:s.fileUrl,alt:null==s?void 0:s.fileName,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,i.jsx)("div",{style:{fontSize:"12px",padding:"4px",textAlign:"center",wordBreak:"break-all",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.fileName})}),(0,i.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.5)",color:"#fff",fontSize:"10px",padding:"2px",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.fileName})]},s.uid)}},27650:function(e,t,n){var r=n(76711),a=n.n(r),o=n(73193),i=n.n(o),s=n(45332),l=n.n(s),c=n(44194),u=n(60051),d=n(1962),m=n(53530),f=n(28977),p=n.n(f),g=n(90069),h=n(86803),v=n(44521),b=n(17220),x=n(30921),y=n(31549),w=d.Z.Dragger;t.Z=function(e){var t=e.type,n=(e.acceptType,e.isModalOpen),r=e.attachments,o=e.handleSubmit,s=e.handleCancel,d=(0,x.useIntl)(),f=(0,c.useState)([]),j=l()(f,2),M=j[0],C=j[1],k=(0,c.useState)({file:null,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:t,category_uid:"",kb_uid:"",client:g.bVn}),Z=l()(k,2),S=Z[0],D=Z[1],P=(0,c.useMemo)((function(){return{name:"file",multiple:!0,action:(0,v.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(g.LA8)},data:S,showUploadList:!1,beforeUpload:function(e){var t=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return D((function(n){return i()(i()({},n),{},{file:e,file_name:t,file_type:e.type,category_uid:""})})),!0},onChange:function(e){"uploading"===e.file.status&&h.yw.loading(d.formatMessage({id:"upload.uploading"},{filename:e.file.name})),"done"===e.file.status?200===e.file.response.code?(h.yw.destroy(),h.yw.success(d.formatMessage({id:"upload.success"},{filename:e.file.name})),C((function(t){return[].concat(a()(t),[e.file.response.data])}))):(h.yw.destroy(),h.yw.error(d.formatMessage({id:"upload.failed"},{filename:e.file.name}))):"error"===e.file.status&&h.yw.error(d.formatMessage({id:"upload.failed"},{filename:e.file.name}))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}}}),[S,d]);(0,c.useEffect)((function(){D((function(e){return i()(i()({},e),{},{kb_type:t,category_uid:""})})),r&&C(r.map((function(e){return e.upload})))}),[t]);var F=function(e){console.log("handleDelete",e),C((function(t){return t.filter((function(t){return t.uid!==e}))}))};return(0,y.jsxs)(m.Z,{title:d.formatMessage({id:"upload.modal.title"}),open:n,onOk:function(){o(M)},onCancel:s,children:[(0,y.jsxs)(w,i()(i()({},P),{},{children:[(0,y.jsx)("p",{className:"ant-upload-drag-icon",children:(0,y.jsx)(u.Z,{})}),(0,y.jsx)("p",{className:"ant-upload-text",children:d.formatMessage({id:"upload.drag.text"})}),(0,y.jsx)("p",{className:"ant-upload-hint",children:d.formatMessage({id:"upload.drag.hint"})})]})),(0,y.jsx)("div",{style:{marginTop:"16px",maxHeight:"200px",overflowY:"auto"},children:(0,y.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:M.map((function(e){return(0,y.jsx)(b.Z,{file:e,onDelete:F},e.uid)}))})})]})}},17173:function(e,t,n){n.r(t),n.d(t,{default:function(){return he}});var r=n(75574),a=n(44194),o=n(96865),i=n(73193),s=n.n(i),l=n(84176),c=n.n(l),u=n(90819),d=n.n(u),m=n(89933),f=n.n(m),p=n(45332),g=n.n(p),h=n(73669),v=n(86222),b=n.n(v),x=n(76711),y=n.n(x),w=n(90069),j=n(39701),M=n(83642),C=n(41617),k=(0,j.Ue)()((0,M.mW)((0,M.tJ)((0,C.n)((function(e,t){return{departmentResult:{data:{content:[]}},currentDepartment:{uid:"",nickname:""},insertDepartment:function(t){e((function(e){var n=e.departmentResult.data.content;if(t.parentUid){var r=n.find((function(e){return e.uid===t.parentUid}));r&&(r.children||(r.children=[]),r.children.push(t))}else n.push(t)}))},upgradeDepartment:function(t){e((function(e){var n=e.departmentResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:n.forEach((function(e){if(e.children){var n=e.children.findIndex((function(e){return e.uid===t.uid}));-1!==n&&(e.children[n]=t)}}))}))},setDepartmentResult:function(n){var r,a={uid:w.zBg,name:w.zBg};(e({departmentResult:s()(s()({},n),{},{data:{content:[a].concat(y()(n.data.content))}})}),""===t().currentDepartment.uid)&&((null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentDepartment:n.data.content[0]}))},setCurrentDepartment:function(n){var r=t().departmentResult.data.content,a=r.findIndex((function(e){return e.uid===n.uid}));if(-1!==a){var o=[].concat(y()(r.slice(0,a)),[n],y()(r.slice(a+1))),i=s()(s()({},t().departmentResult),{},{data:{content:o}});e({departmentResult:i,currentDepartment:n})}else console.warn("Department with the specified uid not found."),e({currentDepartment:n})},removeDepartment:function(n){e((function(e){var t=e.departmentResult.data.content;e.departmentResult.data.content=function e(t,n){return t.filter((function(t){return t.uid!==n&&(t.children&&(t.children=e(t.children,n)),!0)}))}(t,n)})),t().currentDepartment.uid===n&&e({currentDepartment:{uid:""}})},setCurrentDepUid:function(n){var r,a,o=null===(r=t().departmentResult)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.find((function(e){return e.uid===n}));if(o)e({currentDepartment:o});else{!function t(r){var a,o=b()(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(i.uid===n)return void e({currentDepartment:i});i.children&&i.children.length>0&&t(i.children)}}catch(e){o.e(e)}finally{o.f()}}((null===(a=t().departmentResult)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.content)||[])}},deleteDepartmentCache:function(){return e({},!0)}}})),{name:w.xY_}))),Z=n(40612),S=n(67444),D=n(31816),P=n(50648),F=n(47719),T=n(52590),E=n(19513),R=n(53530),O=n(29266),N=n(75365),$=n(99811),q=n(2516),I=n(4499),z=n(84881),U=n(30921),B=n(73442),V=n(3849),H=n(86803),_=n(81924),W=n(78488),L=n(31549),A=function(e){var t=e.isEdit,n=e.member,r=e.open,o=e.onClose,i=e.onSubmit,s=$.A.useForm(),l=g()(s,1)[0],c=(0,U.useIntl)(),u=k((function(e){return e.departmentResult})),m=(0,Z.u)((function(e){return e.currentOrg})),p=(0,a.useState)([]),h=g()(p,2),v=h[0],b=h[1],x=(0,W.Z)((function(e){return{roleResult:e.roleResult,setRoleResult:e.setRoleResult}})),y=x.setRoleResult,j=x.roleResult;(0,a.useEffect)((function(){t&&n&&l?l.setFieldsValue({uid:null==n?void 0:n.uid,nickname:null==n?void 0:n.nickname,email:null==n?void 0:n.email,mobile:null==n?void 0:n.mobile,jobNo:null==n?void 0:n.jobNo,jobTitle:null==n?void 0:n.jobTitle,seatNo:null==n?void 0:n.seatNo,telephone:null==n?void 0:n.telephone,deptUid:null==n?void 0:n.deptUid}):(console.log("form resetFields"),l.resetFields())}),[n]);var M=function e(t,n){if(t.name.startsWith(w.VoP)?n.title=c.formatMessage({id:t.name,defaultMessage:t.name}):n.title=t.name,n.value=t.uid,t.children)for(var r=0;r<t.children.length;r++){var a={title:"",value:"",children:[]};e(t.children[r],a),n.children.push(a)}},C=(0,a.useMemo)((function(){for(var e=[],t=0;t<u.data.content.length;t++)if(u.data.content[t].name!==w.zBg){var n={title:"",value:"",children:[]};M(u.data.content[t],n),e.push(n)}return e}),[u]),S=function(){var e=f()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.yw.loading("正在获取角色列表..."),t={pageNumber:0,pageSize:100,orgUid:null==m?void 0:m.uid},e.next=4,(0,_.E9)(t);case 4:n=e.sent,console.log("queryRolesByOrg response ",n),200===n.code?(H.yw.destroy(),y(n)):(H.yw.destroy(),H.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){b(null==n?void 0:n.roleUids)}),[n]),(0,a.useEffect)((function(){S()}),[]),(0,L.jsx)("div",{children:(0,L.jsx)(B.Z,{title:t?(0,L.jsx)(U.FormattedMessage,{id:"team.member.drawer.edit.title"}):(0,L.jsx)(U.FormattedMessage,{id:"team.member.drawer.create.title"}),onClose:o,open:r,width:600,extra:(0,L.jsxs)(V.Z,{children:[(0,L.jsx)(N.ZP,{onClick:o,children:(0,L.jsx)(U.FormattedMessage,{id:"team.member.drawer.button.cancel"})}),(0,L.jsx)(N.ZP,{onClick:function(){console.log("handleSubmit"),l.validateFields().then((function(e){console.log("Form values:",e);var t={uid:null==n?void 0:n.uid,nickname:e.nickname,email:e.email,mobile:e.mobile,jobNo:e.jobNo,jobTitle:e.jobTitle,seatNo:e.seatNo,telephone:e.telephone,deptUid:e.deptUid,orgUid:null==m?void 0:m.uid,roleUids:v};console.log("memberObject:",t),i(t)})).catch((function(e){console.log("Form errors:",e)}))},type:"primary",children:(0,L.jsx)(U.FormattedMessage,{id:"team.member.drawer.button.save"})})]}),children:(0,L.jsxs)($.A,{form:l,name:"memForm",submitter:!1,children:[(0,L.jsx)(q.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.department"}),name:"deptUid",width:"md",placeholder:c.formatMessage({id:"team.member.form.department.placeholder"}),allowClear:!0,rules:[{required:!0,message:c.formatMessage({id:"team.member.form.department.required"})}],fieldProps:{treeDefaultExpandAll:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:C,variant:"outlined"}}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.name"}),name:"nickname",rules:[{required:!0,message:c.formatMessage({id:"team.member.form.name.required"})}]}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.mobile"}),name:"mobile",disabled:t,rules:[{required:!0,message:c.formatMessage({id:"team.member.form.mobile.required"})},{pattern:/^1[3456789]\d{9}$/,message:c.formatMessage({id:"team.member.form.mobile.invalid"})}]}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.email"}),name:"email",disabled:t,rules:[{required:!0,message:c.formatMessage({id:"team.member.form.email.required"})},{type:"email",message:c.formatMessage({id:"team.member.form.email.invalid"})}]}),(0,L.jsx)(z.Z,{name:"roleUids",label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.role"}),width:"md",options:j.data.content.map((function(e){return{value:e.uid,label:e.name}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:c.formatMessage({id:"team.member.form.role.placeholder"}),value:v,onChange:function(e){console.log("selected ".concat(e)),b(e)}}}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.jobNo"}),name:"jobNo"}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.jobTitle"}),name:"jobTitle"}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.seatNo"}),name:"seatNo"}),(0,L.jsx)(I.Z,{label:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.telephone"}),name:"telephone"}),(0,L.jsx)("p",{children:(0,L.jsx)(U.FormattedMessage,{id:"team.member.form.login.tip"})})]})})})},Y=n(44521),X=n(76750),G=n(27650),J=["current"],Q=function(){var e=(0,a.useRef)(),t=(0,U.useIntl)(),n=(0,a.useRef)(!1),r=(0,X.Z)().translateString,o=(0,a.useState)(!0),i=g()(o,2),l=i[0],u=i[1],m=(0,a.useState)(),p=g()(m,2),v=p[0],b=p[1],x=(0,a.useState)(!1),y=g()(x,2),j=y[0],M=y[1],C=(0,Z.u)((function(e){return e.currentOrg})),$=k((function(e){return e.currentDepartment})),q=R.Z.useModal(),I=g()(q,2),z=I[0],B=I[1],V=(0,a.useState)(!1),_=g()(V,2),W=_[0],Q=_[1],K=k((function(e){return e.departmentResult})),ee=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,L.jsx)(U.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"nickname"},{title:(0,L.jsx)(U.FormattedMessage,{id:"email",defaultMessage:"Email"}),dataIndex:"email",render:function(e,t){return(0,L.jsx)("a",{href:"mailto:".concat(t.email),children:e})}},{title:(0,L.jsx)(U.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",render:function(e,n){return n.status===w.C7Y?(0,L.jsx)(O.Z,{color:"orange",children:t.formatMessage({id:"member.status.pending"})}):n.status===w.TQ0?(0,L.jsx)(O.Z,{color:"green",children:t.formatMessage({id:"member.status.active"})}):n.status===w.TeT?(0,L.jsx)(O.Z,{color:"red",children:t.formatMessage({id:"member.status.lock"})}):n.status===w.E7q?(0,L.jsx)(O.Z,{color:"gray",children:t.formatMessage({id:"member.status.leave"})}):n.status}},{title:(0,L.jsx)(U.FormattedMessage,{id:"department",defaultMessage:"Department"}),dataIndex:"deptUid",render:function(e,t){var n=K.data.content.find((function(e){return e.uid===t.deptUid}));return n?(0,L.jsx)(O.Z,{children:r(n.name)}):""}},{title:(0,L.jsx)(U.FormattedMessage,{id:"mobile",defaultMessage:"Mobile"}),dataIndex:"mobile",render:function(e,t){return(0,L.jsx)("a",{href:"tel:".concat(t.mobile),children:t.mobile})}},{title:(0,L.jsx)(U.FormattedMessage,{id:"jobNo",defaultMessage:"JobNum"}),dataIndex:"jobNo"},{title:(0,L.jsx)(U.FormattedMessage,{id:"jobTitle",defaultMessage:"jobTitle"}),dataIndex:"jobTitle",render:function(e,t){return(0,L.jsx)(L.Fragment,{children:r(null==t?void 0:t.jobTitle)})}}],te=function(){var n=f()(d()().mark((function n(r){var a;return d()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete mem:",r),n.next=3,(0,h.EP)(r);case 3:a=n.sent,console.log("deleteMember:",a),200===a.code?(H.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),e.current.reload()):H.yw.error(a.message);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),ne=function(){M(!1)},re=[].concat(ee,[{title:t.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,n,r,a){return[(0,L.jsx)("a",{onClick:function(){console.log("editable:",n),function(e){b(e),u(!0),M(!0)}(n)},children:t.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,L.jsx)(N.ZP,{type:"link",onClick:function(){return e=n,void z.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,L.jsx)(S.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.nickname,"】？"),onOk:function(){te(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})});var e},danger:!0,children:t.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}]);(0,a.useEffect)((function(){console.log("currentDepDid:",$),e.current.reload()}),[$]);var ae,oe=function(){var n=f()(d()().mark((function n(r){var a,o;return d()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("handleSubmitDrawer:",r),!l){n.next=9;break}return n.next=4,(0,h.hS)(r);case 4:a=n.sent,console.log("updateMember:",a),200===a.code?(H.yw.success(t.formatMessage({id:"update.success",defaultMessage:"update success"})),e.current.reload(),ne()):H.yw.error(a.message),n.next=14;break;case 9:return n.next=11,(0,h.D$)(r);case 11:o=n.sent,console.log("createMember:",o),200===o.code?(H.yw.success(t.formatMessage({id:"create.success",defaultMessage:"create success"})),e.current.reload(),ne()):H.yw.error(o.message);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),ie=function(){var e=f()(d()().mark((function e(){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=f()(d()().mark((function e(){var t;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem(w.LA8),window.open((0,Y.kG)()+"/api/v1/member/export?orgUid="+(null==C?void 0:C.uid)+"&pageNumber=0&pageSize=100&accessToken="+t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(E.Z,{columns:re,actionRef:e,cardBordered:!0,request:function(){var e=f()(d()().mark((function e(t,r,a){var o,i,l;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("request:",t,r,a),!n.current){e.next=4;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 4:return n.current=!0,H.yw.loading("正在加载"),t.current,o=c()(t,J),i=s()({pageNumber:t.current-1,orgUid:null==C?void 0:C.uid,deptUid:$.uid===w.zBg?"":$.uid},o),e.next=10,(0,h.z_)(i);case 10:return l=e.sent,console.log("queryMembersByOrg:",i,l),200===l.code||H.yw.error(l.message),n.current=!1,H.yw.destroy(),e.abrupt("return",{data:l.data.content,success:!0,total:l.data.totalElements});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},headerTitle:null!=$&&null!==(ae=$.name)&&void 0!==ae&&ae.startsWith("i18n.")?t.formatMessage({id:null==$?void 0:$.name,defaultMessage:null==$?void 0:$.name}):null==$?void 0:$.name,toolBarRender:function(){return[(0,L.jsx)(N.ZP,{icon:(0,L.jsx)(D.Z,{}),onClick:function(){console.log("new"),b(void 0),u(!1),M(!0)},type:"primary",children:t.formatMessage({id:"create.member",defaultMessage:"Create Member"})},"button"),(0,L.jsx)(N.ZP,{icon:(0,L.jsx)(P.Z,{}),type:"primary",onClick:ie,children:t.formatMessage({id:"import",defaultMessage:"Import"})},"button"),(0,L.jsx)(N.ZP,{icon:(0,L.jsx)(F.Z,{}),type:"primary",onClick:se,children:t.formatMessage({id:"export",defaultMessage:"Export"})},"button"),(0,L.jsx)(N.ZP,{icon:(0,L.jsx)(T.Z,{}),type:"link",onClick:function(){window.open("https://www.weiyuai.cn/download/excel/team_member.xlsx")},children:t.formatMessage({id:"download.template",defaultMessage:"Download Template"})},"download")]}}),j&&(0,L.jsx)(A,{isEdit:l,member:v,open:j,onClose:ne,onSubmit:oe}),W&&(0,L.jsx)(G.Z,{type:w.zey,acceptType:".xls,.xlsx,.csv,.*",isModalOpen:W,handleSubmit:function(t){console.log("handleUploadDragSubmit",t),Q(!1),null==e||e.current.reload()},handleCancel:function(){console.log("handleUploadDragCancel"),Q(!1),null==e||e.current.reload()}}),B]})},K=n(27487),ee=n(82962);function te(e){return ne.apply(this,arguments)}function ne(){return(ne=f()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.request)("/api/v1/department/query/org",{method:"GET",params:s()(s()({},t),{},{client:w.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return(ae=f()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.request)("/api/v1/department/create",{method:"POST",data:s()(s()({},t),{},{client:w.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=f()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.request)("/api/v1/department/update",{method:"POST",data:s()(s()({},t),{},{client:w.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return le.apply(this,arguments)}function le(){return(le=f()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,U.request)("/api/v1/department/delete",{method:"POST",data:s()(s()({},t),{},{client:w.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=n(70458),ue=n(32350),de=n(3909),me=function(e){var t=e.open,n=e.isEdit,r=e.department,o=e.onCancel,i=e.onSubmit,s=de.Z.useForm(),l=g()(s,1)[0],c=(0,U.useIntl)(),u=(0,a.useState)(""),m=g()(u,2),p=m[0],h=m[1],v=k((function(e){return e.departmentResult})),b=(0,Z.u)((function(e){return e.currentOrg})),x=(0,X.Z)().translateString;(0,a.useEffect)((function(){t&&n?(l.setFieldsValue({uid:null==r?void 0:r.uid,parentUid:null==r?void 0:r.parentUid,name:x(null==r?void 0:r.name),description:null==r?void 0:r.description}),console.log("useEffect:",p)):l.resetFields()}),[t]);var y=function e(t,n){if(t.name.startsWith(w.VoP)?n.title=c.formatMessage({id:t.name,defaultMessage:t.name}):n.title=t.name,n.value=t.uid,t.children)for(var r=0;r<t.children.length;r++){e(t.children[r],{title:"",value:"",children:[]})}},j=(0,a.useMemo)((function(){for(var e=[],t=0;t<v.data.content.length;t++)if(v.data.content[t].name!==w.zBg){var n={title:"",value:"",children:[]};y(v.data.content[t],n),e.push(n)}return e}),[v]);return(0,L.jsx)("div",{children:(0,L.jsx)(R.Z,{title:"创建部门",open:t,forceRender:!0,onOk:function(){l.validateFields().then(function(){var e=f()(d()().mark((function e(t){var a;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={uid:n?null==r?void 0:r.uid:"",name:t.name,description:t.description,parentUid:p||void 0,orgUid:null==b?void 0:b.uid},console.log("handleSaveDep:",t,a),i(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Failed:",e),H.yw.error("创建部门失败")}))},onCancel:o,children:(0,L.jsxs)($.A,{form:l,name:"depForm",style:{maxWidth:400},submitter:{render:function(){return null}},children:[(0,L.jsx)(q.Z,{label:"上级部门",name:"parentUid",allowClear:!0,fieldProps:{treeData:j,placeholder:"请选择上级部门(可选)",allowClear:!0,treeDefaultExpandAll:!0,onChange:function(e){console.log("onParentSelectChange:",e),h(e||"")},dropdownStyle:{maxHeight:400,overflow:"auto"}}}),(0,L.jsx)(I.Z,{label:"部门名称",name:"name",rules:[{required:!0,message:"请输入名称!"}]}),(0,L.jsx)(ue.Z,{label:"部门简介",name:"description"})]})})})},fe=function(){var e=(0,U.useIntl)(),t=(0,a.useState)(!1),n=g()(t,2),r=n[0],o=n[1],i=(0,a.useState)(!1),s=g()(i,2),l=s[0],c=s[1],u=(0,Z.u)((function(e){return e.currentOrg})),m=R.Z.useModal(),p=g()(m,2),h=p[0],v=p[1],b=k((function(e){return{currentDepartment:e.currentDepartment,departmentResult:e.departmentResult,insertDepartment:e.insertDepartment,upgradeDepartment:e.upgradeDepartment,removeDepartment:e.removeDepartment,setCurrentDepartment:e.setCurrentDepartment,setDepartmentResult:e.setDepartmentResult,setCurrentDepUid:e.setCurrentDepUid}})),x=b.currentDepartment,y=b.departmentResult,j=b.insertDepartment,M=b.upgradeDepartment,C=b.removeDepartment,D=b.setCurrentDepartment,P=b.setDepartmentResult,F=b.setCurrentDepUid,T=function t(n,r){if(n.name.startsWith(w.VoP)?r.title=e.formatMessage({id:n.name,defaultMessage:n.name}):r.title=n.name,r.key=n.uid,n.children)for(var a=0;a<n.children.length;a++){var o={title:"",key:"",children:[]};t(n.children[a],o),r.children.push(o)}},E=(0,a.useMemo)((function(){for(var e=[],t=0;t<y.data.content.length;t++){var n={title:"",key:"",children:[]};T(y.data.content[t],n),e.push(n)}return e}),[y]),O=function(){var e=f()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,orgUid:null==u?void 0:u.uid},e.next=3,te(t);case 3:n=e.sent,console.log("queryDepartmentsByOrg:",n),200===n.code?P(n):H.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){O()}),[]);var $=function(){var t=f()(d()().mark((function t(n){var r;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handleCreateDept",n),H.yw.loading(e.formatMessage({id:"creating"})),t.next=4,re(n);case 4:r=t.sent,console.log("createDepartment:",r),200===r.code?(H.yw.destroy(),H.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),j(r.data),D(r.data),o(!1)):(H.yw.destroy(),H.yw.error(r.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=f()(d()().mark((function t(n){var r;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H.yw.loading(e.formatMessage({id:"updating"})),t.next=3,oe(n);case 3:r=t.sent,console.log("handleUpdateDept:",n,r),200===r.code?(H.yw.destroy(),H.yw.success(e.formatMessage({id:"update.success",defaultMessage:"update success"})),D(r.data),M(r.data),o(!1)):(H.yw.destroy(),H.yw.error(r.message));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=f()(d()().mark((function t(n){var r;return d()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handleDeleteDept",n),H.yw.loading(e.formatMessage({id:"deleting"})),t.next=4,se(n);case 4:r=t.sent,console.log("handleDeleteDept:",r),200===r.code?(H.yw.destroy(),H.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"delete success"})),C(null==n?void 0:n.uid),o(!1)):(H.yw.destroy(),H.yw.error(r.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(K.Z,{gap:"small",wrap:"wrap",children:[(0,L.jsx)(N.ZP,{type:"primary",size:"small",icon:(0,L.jsx)(ce.Z,{}),onClick:function(){console.log("new dep"),c(!1),o(!0)},children:e.formatMessage({id:"createDept",defaultMessage:"createDepartment"})}),(0,L.jsx)(N.ZP,{size:"small",onClick:function(){console.log("edit role"),c(!0),o(!0)},disabled:""===(null==x?void 0:x.uid),children:e.formatMessage({id:"edit",defaultMessage:"Edit"})}),(0,L.jsx)(N.ZP,{onClick:function(){return t=x,void h.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,L.jsx)(S.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(t.name,"】？"),onOk:function(){I(t)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})});var t},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==x?void 0:x.uid),children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,L.jsx)(ee.Z,{onSelect:function(e,t){console.log("selected",e,t),0!==e.length&&F(e[0].toString())},treeData:E,blockNode:!0}),r&&(0,L.jsx)(me,{open:r,isEdit:l,department:x,onCancel:function(){o(!1)},onSubmit:function(e){l?q(e):$(e)}}),v]})},pe=r.Z.Sider,ge=r.Z.Content,he=function(){var e=(0,o.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,a=e.contentStyle;return(0,L.jsxs)(r.Z,{children:[(0,L.jsx)(pe,{width:n,style:t,children:(0,L.jsx)(fe,{})}),(0,L.jsx)(r.Z,{children:(0,L.jsx)(ge,{style:a,children:(0,L.jsx)(Q,{})})})]})}},29266:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(44194),a=n(51865),o=n.n(a),i=n(97859),s=n(63125),l=n(80314),c=n(79145),u=n(18011),d=n(37167),m=n(3378),f=n(87471),p=n(88874),g=n(77167),h=n(65759);const v=e=>{const{lineWidth:t,fontSizeIcon:n,calc:r}=e,a=e.fontSizeSM;return(0,g.IX)(e,{tagFontSize:a,tagLineHeight:(0,m.bf)(r(e.lineHeightSM).mul(a).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},b=e=>({defaultBg:new f.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var x=(0,h.I$)("Tag",(e=>(e=>{const{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:a,calc:o}=e,i=o(r).sub(n).equal(),s=o(t).sub(n).equal();return{[a]:Object.assign(Object.assign({},(0,p.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,m.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:s,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(v(e))),b),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const w=r.forwardRef(((e,t)=>{const{prefixCls:n,style:a,className:i,checked:s,onChange:l,onClick:c}=e,u=y(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:m,tag:f}=r.useContext(d.E_),p=m("tag",n),[g,h,v]=x(p),b=o()(p,`${p}-checkable`,{[`${p}-checkable-checked`]:s},null==f?void 0:f.className,i,h,v);return g(r.createElement("span",Object.assign({},u,{ref:t,style:Object.assign(Object.assign({},a),null==f?void 0:f.style),className:b,onClick:e=>{null==l||l(!s),null==c||c(e)}})))}));var j=w,M=n(85772);var C=(0,h.bk)(["Tag","preset"],(e=>(e=>(0,M.Z)(e,((t,n)=>{let{textColor:r,lightBorderColor:a,lightColor:o,darkColor:i}=n;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:r,background:o,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(v(e))),b);const k=(e,t,n)=>{const r="string"!=typeof(a=n)?a:a.charAt(0).toUpperCase()+a.slice(1);var a;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Z=(0,h.bk)(["Tag","status"],(e=>{const t=v(e);return[k(t,"success","Success"),k(t,"processing","Info"),k(t,"error","Error"),k(t,"warning","Warning")]}),b),S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const D=r.forwardRef(((e,t)=>{const{prefixCls:n,className:a,rootClassName:m,style:f,children:p,icon:g,color:h,onClose:v,bordered:b=!0,visible:y}=e,w=S(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:j,direction:M,tag:k}=r.useContext(d.E_),[D,P]=r.useState(!0),F=(0,i.Z)(w,["closeIcon","closable"]);r.useEffect((()=>{void 0!==y&&P(y)}),[y]);const T=(0,s.o2)(h),E=(0,s.yT)(h),R=T||E,O=Object.assign(Object.assign({backgroundColor:h&&!R?h:void 0},null==k?void 0:k.style),f),N=j("tag",n),[$,q,I]=x(N),z=o()(N,null==k?void 0:k.className,{[`${N}-${h}`]:R,[`${N}-has-color`]:h&&!R,[`${N}-hidden`]:!D,[`${N}-rtl`]:"rtl"===M,[`${N}-borderless`]:!b},a,m,q,I),U=e=>{e.stopPropagation(),null==v||v(e),e.defaultPrevented||P(!1)},[,B]=(0,l.Z)((0,l.w)(e),(0,l.w)(k),{closable:!1,closeIconRender:e=>{const t=r.createElement("span",{className:`${N}-close-icon`,onClick:U},e);return(0,c.wm)(e,t,(e=>({onClick:t=>{var n;null===(n=null==e?void 0:e.onClick)||void 0===n||n.call(e,t),U(t)},className:o()(null==e?void 0:e.className,`${N}-close-icon`)})))}}),V="function"==typeof w.onClick||p&&"a"===p.type,H=g||null,_=H?r.createElement(r.Fragment,null,H,p&&r.createElement("span",null,p)):p,W=r.createElement("span",Object.assign({},F,{ref:t,className:z,style:O}),_,B,T&&r.createElement(C,{key:"preset",prefixCls:N}),E&&r.createElement(Z,{key:"status",prefixCls:N}));return $(V?r.createElement(u.Z,{component:"Tag"},W):W)})),P=D;P.CheckableTag=j;var F=P}}]);