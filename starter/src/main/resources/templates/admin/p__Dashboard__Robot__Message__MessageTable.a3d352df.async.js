"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9199],{58638:function(I,c,e){e.d(c,{Z:function(){return f}});var d=e(1413),l=e(67294),g={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},E=g,m=e(89099),v=function(P,y){return l.createElement(m.Z,(0,d.Z)((0,d.Z)({},P),{},{ref:y,icon:E}))},h=l.forwardRef(v),f=h},70150:function(I,c,e){e.d(c,{W5:function(){return y}});var d=e(15009),l=e.n(d),g=e(97857),E=e.n(g),m=e(99289),v=e.n(m),h=e(85615),f=e(88541),s=e.n(f),P=e(86745);function y(a){return j.apply(this,arguments)}function j(){return j=v()(l()().mark(function a(_){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,P.request)("/api/v1/message/org",{method:"GET",params:E()({},_)}));case 1:case"end":return n.stop()}},a)})),j.apply(this,arguments)}function A(a){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function a(_){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/user/robot",{method:"GET",params:{page:_.pageNumber,size:_.pageSize,client:HTTP_CLIENT}}));case 1:case"end":return n.stop()}},a)})),T.apply(this,arguments)}function B(a){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function a(_){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/message/rest/send",{method:"POST",data:{json:_,client:HTTP_CLIENT}}));case 1:case"end":return n.stop()}},a)})),b.apply(this,arguments)}function M(a,_){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function a(_,p){var n,o;return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:console.log("sendMessageSSE: ",_),n="".concat("","/visitor/api/v1/zhipuai/sse?uid=&sid=").concat(_.sid,"&content=").concat(_.content),o=new EventSource(n,{withCredentials:!1}),o.onopen=function(r){console.log("onopen:",r.target)},o.onmessage=function(r){p(r.data);var t=JSON.parse(r.data);if(t.type=="finish"){o&&o.close();return}},o.onerror=function(r){console.log("onerror:",r),alert("server error"),o.readyState===EventSource.CLOSED?console.log("connection is closed"):console.log("Error occured",r),o.close()},o.addEventListener("customEventName",function(r){console.log("Message id is "+r.lastEventId)});case 7:case"end":return i.stop()}},a)})),R.apply(this,arguments)}function W(a,_){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function a(_,p){var n,o,u;return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:console.log("sendMessageSSEPolyfill: ",_),n=localStorage.ACCESS_TOKEN,o="".concat("","/visitor/api/v1/zhipuai/sse?uid=&sid=").concat(_.sid,"&content=").concat(_.content),u=new EventSourcePolyfill(o,{headers:{Authorization:"Bearer ".concat(n)}}),u.onopen=function(t){console.log("onopen:",t.target)},u.onmessage=function(t){console.log("onmessage:",t.data),p(t.data);var C=JSON.parse(t.data);if(C.type=="finish"){u&&u.close();return}},u.onerror=function(t){console.log("onerror:",t),alert("server error"),u.readyState===EventSource.CLOSED?console.log("connection is closed"):console.log("Error occured",t),u.close()},u.addEventListener("customEventName",function(t){console.log("Message id is "+t.lastEventId)});case 8:case"end":return r.stop()}},a)})),S.apply(this,arguments)}},73803:function(I,c,e){var d=e(85615),l=e(66419),g=e(86745);function E(){var m=(0,g.useIntl)(),v=function(s){return s&&s.startsWith(d.Vo)?m.formatMessage({id:s,defaultMessage:s}):s},h=function(s){return s!=null&&s.startsWith(d.Vo)?(0,l.aS)(m.formatMessage({id:s}),10):(0,l.aS)(s,10)};return{translateString:v,translateStringTranct:h}}c.Z=E},61480:function(I,c,e){e.r(c);var d=e(15009),l=e.n(d),g=e(97857),E=e.n(g),m=e(13769),v=e.n(m),h=e(99289),f=e.n(h),s=e(80049),P=e(70150),y=e(73803),j=e(87676),A=e(58638),T=e(1269),B=e(14726),b=e(67294),M=e(85893),R=["current"],W=function(){var a=(0,b.useRef)(),_=(0,y.Z)(),p=_.translateString,n=(0,j.u)(function(i){return i.orgCurrent}),o=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u5185\u5BB9",dataIndex:"content",copyable:!0,render:function(r,t){return(0,M.jsx)("div",{children:p(t.content)})}},{title:"\u72B6\u6001",dataIndex:"status",hideInSearch:!0,width:80},{title:"\u7C7B\u578B",dataIndex:"type",copyable:!0,width:90},{title:"\u5BA2\u6237\u7AEF",dataIndex:"client",copyable:!0,width:90},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:170},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:50,render:function(r,t,C,L){return[(0,M.jsx)("a",{onClick:function(){},children:"\u4FEE\u6539"},"editable")]}}],u=function(){console.log("handleExportExcel"),s.yw.warning("\u5BFC\u51FA\u529F\u80FD\u6682\u672A\u5B9E\u73B0")};return(0,M.jsx)(T.Z,{columns:o,actionRef:a,cardBordered:!0,request:function(){var i=f()(l()().mark(function r(t,C,L){var K,x,U,D;return l()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log("request:",t,C,L),K=t.current,x=v()(t,R),U=E()({pageNumber:t.current-1,orgUid:n.uid},x),O.next=5,(0,P.W5)(U);case 5:return D=O.sent,console.log("getAllMessages response:",U,D),D.code===200||s.yw.error(D.message),O.abrupt("return",{data:D.data.content,success:!0,total:D.data.totalElements});case 9:case"end":return O.stop()}},r)}));return function(r,t,C){return i.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(r){console.log("page:",r)}},dateFormatter:"string",headerTitle:"\u673A\u5668\u4EBA\u6D88\u606F",toolBarRender:function(){return[(0,M.jsx)(B.ZP,{icon:(0,M.jsx)(A.Z,{}),type:"primary",onClick:u,children:"\u5BFC\u51FA"},"button")]}})};c.default=W}}]);
