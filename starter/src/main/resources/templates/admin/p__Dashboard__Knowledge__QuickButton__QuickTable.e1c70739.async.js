"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2157],{51042:function(k,b,e){var l=e(1413),o=e(67294),E=e(42110),i=e(91146),y=function(g,_){return o.createElement(i.Z,(0,l.Z)((0,l.Z)({},g),{},{ref:_,icon:E.Z}))},p=o.forwardRef(y);b.Z=p},64317:function(k,b,e){var l=e(1413),o=e(91),E=e(22270),i=e(67294),y=e(66758),p=e(43889),f=e(85893),g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],s=function(u,a){var c=u.fieldProps,n=u.children,t=u.params,O=u.proFieldProps,h=u.mode,F=u.valueEnum,B=u.request,Z=u.showSearch,r=u.options,A=(0,o.Z)(u,g),I=(0,i.useContext)(y.Z);return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,E.h)(F),request:B,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:r,mode:h,showSearch:Z,getPopupContainer:I.getPopupContainer},c),ref:a,proFieldProps:O},A),{},{children:n}))},d=i.forwardRef(function(m,u){var a=m.fieldProps,c=m.children,n=m.params,t=m.proFieldProps,O=m.mode,h=m.valueEnum,F=m.request,B=m.options,Z=(0,o.Z)(m,_),r=(0,l.Z)({options:B,mode:O||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},a),A=(0,i.useContext)(y.Z);return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,E.h)(h),request:F,params:n,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({getPopupContainer:A.getPopupContainer},r),ref:u,proFieldProps:t},Z),{},{children:c}))}),D=i.forwardRef(s),C=d,x=D;x.SearchSelect=C,x.displayName="ProFormComponent",b.Z=x},5966:function(k,b,e){var l=e(97685),o=e(1413),E=e(91),i=e(21770),y=e(8232),p=e(55241),f=e(97435),g=e(67294),_=e(43889),s=e(85893),d=["fieldProps","proFieldProps"],D=["fieldProps","proFieldProps"],C="text",x=function(n){var t=n.fieldProps,O=n.proFieldProps,h=(0,E.Z)(n,d);return(0,s.jsx)(_.Z,(0,o.Z)({valueType:C,fieldProps:t,filedConfig:{valueType:C},proFieldProps:O},h))},m=function(n){var t=(0,i.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),O=(0,l.Z)(t,2),h=O[0],F=O[1];return(0,s.jsx)(y.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Z){var r,A=Z.getFieldValue(n.name||[]);return(0,s.jsx)(p.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(v){return v&&v.parentNode?v.parentNode:v},onOpenChange:function(v){return F(v)},content:(0,s.jsxs)("div",{style:{padding:"4px 0"},children:[(r=n.statusRender)===null||r===void 0?void 0:r.call(n,A),n.strengthText?(0,s.jsx)("div",{style:{marginTop:10},children:(0,s.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:h,children:n.children}))}})},u=function(n){var t=n.fieldProps,O=n.proFieldProps,h=(0,E.Z)(n,D),F=(0,g.useState)(!1),B=(0,l.Z)(F,2),Z=B[0],r=B[1];return t!=null&&t.statusRender&&h.name?(0,s.jsx)(m,{name:h.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:Z,onOpenChange:r,children:(0,s.jsx)("div",{children:(0,s.jsx)(_.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,f.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(I){var v;t==null||(v=t.onBlur)===null||v===void 0||v.call(t,I),r(!1)},onClick:function(I){var v;t==null||(v=t.onClick)===null||v===void 0||v.call(t,I),r(!0)}}),proFieldProps:O,filedConfig:{valueType:C}},h))})}):(0,s.jsx)(_.Z,(0,o.Z)({valueType:"password",fieldProps:t,proFieldProps:O,filedConfig:{valueType:C}},h))},a=x;a.Password=u,a.displayName="ProFormComponent",b.Z=a},90672:function(k,b,e){var l=e(1413),o=e(91),E=e(67294),i=e(43889),y=e(85893),p=["fieldProps","proFieldProps"],f=function(_,s){var d=_.fieldProps,D=_.proFieldProps,C=(0,o.Z)(_,p);return(0,y.jsx)(i.Z,(0,l.Z)({ref:s,valueType:"textarea",fieldProps:d,proFieldProps:D},C))};b.Z=E.forwardRef(f)},9465:function(k,b,e){e.d(b,{Ck:function(){return C},qL:function(){return _},z4:function(){return d}});var l=e(15009),o=e.n(l),E=e(97857),i=e.n(E),y=e(99289),p=e.n(y),f=e(85615),g=e(86745);function _(a){return s.apply(this,arguments)}function s(){return s=p()(o()().mark(function a(c){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.request)("/api/v1/quickbutton/query/org",{method:"GET",params:i()(i()({},c),{},{client:f.bV})}));case 1:case"end":return t.stop()}},a)})),s.apply(this,arguments)}function d(a){return D.apply(this,arguments)}function D(){return D=p()(o()().mark(function a(c){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.request)("/api/v1/quickbutton/create",{method:"POST",data:i()(i()({},c),{},{client:f.bV})}));case 1:case"end":return t.stop()}},a)})),D.apply(this,arguments)}function C(a){return x.apply(this,arguments)}function x(){return x=p()(o()().mark(function a(c){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.request)("/api/v1/quickbutton/update",{method:"POST",data:i()(i()({},c),{},{client:f.bV})}));case 1:case"end":return t.stop()}},a)})),x.apply(this,arguments)}function m(a){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function a(c){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/quickbutton/delete",{method:"POST",data:_objectSpread(_objectSpread({},c),{},{client:HTTP_CLIENT})}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}},78163:function(k,b,e){e.r(b),e.d(b,{default:function(){return oe}});var l=e(97857),o=e.n(l),E=e(13769),i=e.n(E),y=e(15009),p=e.n(y),f=e(99289),g=e.n(f),_=e(5574),s=e.n(_),d=e(80049),D=e(9465),C=e(87676),x=e(51042),m=e(96853),u=e(14726),a=e(67294),c=e(85615),n=e(34994),t=e(64317),O=e(5966),h=e(90672),F=e(8232),B=e(85265),Z=e(42075),r=e(85893),A=function(j){var z=j.isEdit,T=j.quickbutton,K=j.open,V=j.onClose,X=j.onSubmit,H=F.Z.useForm(),Y=s()(H,1),L=Y[0],G=(0,C.u)(function(N){return N.orgCurrent});(0,a.useEffect)(function(){z?L.setFieldsValue({type:T==null?void 0:T.type,title:T==null?void 0:T.title,content:T==null?void 0:T.content}):L.resetFields()},[K]);var J=function(){console.log("handleSubmit"),L.validateFields().then(function(W){console.log(W),X(o()(o()(o()({},T),W),{},{orgUid:G==null?void 0:G.uid}))}).catch(function(W){console.log("Form errors:",W),d.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,r.jsx)("div",{children:(0,r.jsx)(B.Z,{title:z?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:V,open:K,extra:(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(u.ZP,{onClick:V,children:"\u53D6\u6D88"}),(0,r.jsx)(u.ZP,{onClick:J,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,r.jsxs)(n.A,{form:L,initialValues:{},submitter:{render:function(){return null}},children:[(0,r.jsx)(t.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u95EE\u7B54",value:c.kn},{label:"\u7F51\u5740",value:c.us}]}),(0,r.jsx)(O.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,r.jsx)(h.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},I=A,v=["current"],re=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u5185\u5BB9",dataIndex:"content"},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0,render:function(j){return j==="url"?(0,r.jsx)("span",{children:"\u94FE\u63A5"}):j==="qa"?(0,r.jsx)("span",{children:"\u6309\u94AE"}):j}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],ne=function(){var j=(0,a.useRef)(),z=(0,a.useState)(!0),T=s()(z,2),K=T[0],V=T[1],X=(0,a.useState)(),H=s()(X,2),Y=H[0],L=H[1],G=(0,a.useState)(!1),J=s()(G,2),N=J[0],W=J[1],ae=(0,C.u)(function(S){return S.orgCurrent}),se=[].concat(re,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(R,M,U,Q){return[(0,r.jsx)("a",{onClick:function(){le(M)},children:"\u4FEE\u6539"},"editable")]}}]),ue=function(){L(void 0),V(!1),W(!0)},le=function(R){L(R),V(!0),W(!0)},ie=function(){var S=g()(p()().mark(function R(M){var U,Q;return p()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(console.log("handleSubmitDrawer",M),K?d.yw.loading("\u6B63\u5728\u4FEE\u6539\u5FEB\u6377\u6309\u94AE"):d.yw.loading("\u6B63\u5728\u521B\u5EFA\u5FEB\u6377\u6309\u94AE"),!K){P.next=8;break}return P.next=5,(0,D.Ck)(M);case 5:P.t0=P.sent,P.next=11;break;case 8:return P.next=10,(0,D.z4)(M);case 10:P.t0=P.sent;case 11:U=P.t0,console.log("createQuickbutton response:",M,U),U.code===200?(d.yw.destroy(),d.yw.success("\u5FEB\u6377\u6309\u94AE\u521B\u5EFA\u6210\u529F"),W(!1),(Q=j.current)===null||Q===void 0||Q.reloadAndRest()):(d.yw.destroy(),d.yw.error(U.message));case 14:case"end":return P.stop()}},R)}));return function(M){return S.apply(this,arguments)}}(),de=function(){W(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{columns:se,actionRef:j,cardBordered:!0,request:function(){var S=g()(p()().mark(function R(M,U,Q){var q,P,ee,w;return p()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return console.log("request:",M,U,Q),d.yw.loading("\u52A0\u8F7D\u4E2D"),q=M.current,P=i()(M,v),ee=o()({pageNumber:M.current-1,orgUid:ae.uid},P),$.next=6,(0,D.qL)(ee);case 6:return w=$.sent,console.log("getAllQuickbuttons response:",ee,w),d.yw.destroy(),w.code===200||d.yw.error(w.message),$.abrupt("return",{data:w.data.content,success:!0,total:w.data.totalElements});case 11:case"end":return $.stop()}},R)}));return function(R,M,U){return S.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(R){console.log("page:",R)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u6309\u94AE",toolBarRender:function(){return[(0,r.jsx)(u.ZP,{icon:(0,r.jsx)(x.Z,{}),type:"primary",onClick:ue,children:"\u65B0\u5EFA"},"button")]}}),(0,r.jsx)(I,{isEdit:K,open:N,quickbutton:Y,onClose:de,onSubmit:ie})]})},oe=ne}}]);
