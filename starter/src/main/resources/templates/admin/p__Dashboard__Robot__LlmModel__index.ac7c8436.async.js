"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2520],{7571:function(e,r,n){var t=n(94414);r.Z=function(){var e=(0,t.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},55750:function(e,r,n){n.r(r),n.d(r,{default:function(){return N}});var t=n(7571),l=n(16242),i=n(90228),o=n.n(i),d=n(87999),u=n.n(d),c=n(48305),a=n.n(c),s=n(37240),m=n(26068),f=n.n(m),v=n(64453),p=n(45234);function h(e){return x.apply(this,arguments)}function x(){return(x=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/ai/model/query/org",{method:"GET",params:f()(f()({},r),{},{client:v.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(15558),L=n.n(g),j=n(79475),y=n(11811),k=n(15226),Z=(0,j.Ue)()((0,y.mW)((0,y.tJ)((0,k.n)((function(e,r){return{llmmodelResult:{data:{content:[]}},currentLlmModel:{uid:"",nickname:""},insertLlmModel:function(r){e((function(e){e.llmmodelResult.data.content.unshift(r)}))},setLlmModelResult:function(n){e({llmmodelResult:n});var t,l=r().currentLlmModel;""!==l.uid&&void 0!==l||(null===(t=n.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmModel:n.data.content[0]})},setCurrentLlmModel:function(n){var t=r().llmmodelResult.data.content,l=t.findIndex((function(e){return e.uid===n.uid}));if(-1!==l){var i=[].concat(L()(t.slice(0,l)),[n],L()(t.slice(l+1))),o=f()(f()({},r().llmmodelResult),{},{data:{content:i}});e({llmmodelResult:o,currentLlmModel:n})}else e({currentLlmModel:n})},deleteCurrentLlmModel:function(n){var t=r().llmmodelResult.data.content,l=t.findIndex((function(e){return e.uid===n}));-1!==l?e({llmmodelResult:f()(f()({},r().llmmodelResult),{},{data:{content:[].concat(L()(t.slice(0,l)),L()(t.slice(l+1)))}})}):console.warn("LlmModel not found in cache:",n),r().currentLlmModel.uid===n&&e({currentLlmModel:{uid:""}})},deleteLlmModelCache:function(){return e({},!0)}}})),{name:v.O4M}))),M=(0,j.Ue)()((0,y.mW)((0,y.tJ)((0,k.n)((function(e,r){return{llmproviderResult:{data:{content:[]}},currentLlmProvider:{uid:"",nickname:""},insertLlmProvider:function(r){e((function(e){e.llmproviderResult.data.content.unshift(r)}))},setLlmProviderResult:function(n){e({llmproviderResult:n});var t,l=r().currentLlmProvider;""!==l.uid&&void 0!==l||(null===(t=n.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmProvider:n.data.content[0]})},setCurrentLlmProvider:function(n){var t=r().llmproviderResult.data.content,l=t.findIndex((function(e){return e.uid===n.uid}));if(-1!==l){var i=[].concat(L()(t.slice(0,l)),[n],L()(t.slice(l+1))),o=f()(f()({},r().llmproviderResult),{},{data:{content:i}});e({llmproviderResult:o,currentLlmProvider:n})}else e({currentLlmProvider:n})},deleteCurrentLlmProvider:function(n){var t=r().llmproviderResult.data.content,l=t.findIndex((function(e){return e.uid===n}));-1!==l?e({llmproviderResult:f()(f()({},r().llmproviderResult),{},{data:{content:[].concat(L()(t.slice(0,l)),L()(t.slice(l+1)))}})}):console.warn("LlmProvider not found in cache:",n),r().currentLlmProvider.uid===n&&e({currentLlmProvider:{uid:""}})},deleteLlmProviderCache:function(){return e({},!0)}}})),{name:v.O4M}))),P=n(25203),S=n(3473),b=n(85867),R=n(35062),C=n(23942),w=n(25139),I=n(42502),T=n(7283),U=n(94455),q=n(75271),z=n(25248),E=n(94414),F=n(93550),O=n(52676),W=z.Z.Title,_=z.Z.Link,D=function(){var e=(0,E.Z)().isDarkMode,r=(0,F.Z)(),n=r.translateString,t=(r.translateStringTranct,M((function(e){return e.currentLlmProvider}))),l=(0,q.useState)(),i=a()(l,2),d=i[0],c=i[1],m=(0,q.useState)([]),f=a()(m,2),v=f[0],p=f[1],x=Z((function(e){return{currentLlmModel:e.currentLlmModel,setCurrentLlmModel:e.setCurrentLlmModel}})),g=x.currentLlmModel,L=x.setCurrentLlmModel,j=function(){var e=u()(o()().mark((function e(){var r,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmModels"),r={pageNumber:0,pageSize:20,provider:null==t?void 0:t.name},e.next=4,h(r);case 4:n=e.sent,console.log("queryLlmModelsByOrg",n),200===n.code?c(n):(console.log("error",n),s.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,q.useEffect)((function(){if(null!=d&&d.data.content){var e=d.data.content.reduce((function(e,r){var n=r.category;return e[n]||(e[n]=[]),e[n].push(r),e}),{});p(e)}else p([])}),[d]),(0,q.useEffect)((function(){console.log("currentLlmProvider",t),j()}),[t]);return(0,O.jsxs)("div",{style:{width:"50%",margin:"auto",marginTop:50},children:[(0,O.jsxs)(b.Z,{align:"center",children:[(0,O.jsx)(R.Z,{offsetTop:50,children:(0,O.jsx)(W,{children:null==t?void 0:t.nickname})}),(0,O.jsx)(_,{target:"_blank",href:null==t?void 0:t.webUrl,children:(0,O.jsx)(P.Z,{style:{marginLeft:"8px",color:"var(--color-text)",fontSize:"12px"}})})]}),(0,O.jsx)(W,{level:3,style:{marginTop:20},children:"API秘钥"}),(0,O.jsxs)(C.Z.Compact,{style:{width:"100%",marginTop:5},children:[(0,O.jsx)(w.Z.Password,{defaultValue:null==t?void 0:t.apiKey}),(0,O.jsx)(I.ZP,{children:"保存"})]}),(0,O.jsx)(_,{href:null==t?void 0:t.apiKeyUrl,target:"_blank",children:"点这里获取秘钥"}),(0,O.jsx)(I.ZP,{style:{marginLeft:20},size:"small",children:"检测秘钥是否有效"}),(0,O.jsx)(W,{level:3,style:{marginTop:20},children:"API地址"}),(0,O.jsx)(w.Z,{value:null==t?void 0:t.apiUrl,disabled:!0}),(0,O.jsx)(W,{level:3,style:{marginTop:20},children:"模型列表"}),Object.keys(v).map((function(r,t){return(0,O.jsxs)("div",{children:[(0,O.jsx)(T.Z,{}),(0,O.jsx)(W,{level:4,style:{marginTop:20},children:r}),(0,O.jsx)(U.Z,{itemLayout:"horizontal",dataSource:v[r],renderItem:function(r,t){return(0,O.jsx)(U.Z.Item,{style:(null==g?void 0:g.uid)===r.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){L(r)},children:(0,O.jsx)(U.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,O.jsx)(O.Fragment,{children:(null==g?void 0:g.uid)===r.uid?(0,O.jsxs)("span",{style:{color:"green"},children:[(0,O.jsx)(S.Z,{})," 默认模型"]}):null}),title:(0,O.jsx)(O.Fragment,{children:n(null==r?void 0:r.nickname)})})},t)}},t)]},t)})),(0,O.jsx)(T.Z,{}),(0,O.jsxs)(b.Z,{align:"center",children:["查看",(0,O.jsxs)(_,{href:null==t?void 0:t.docsUrl,target:"_blank",children:[null==t?void 0:t.nickname," 文档"]}),"和",(0,O.jsx)(_,{href:null==t?void 0:t.modelsUrl,target:"_blank",children:"模型"}),"获取更多详情"]})]})};function V(e){return A.apply(this,arguments)}function A(){return(A=u()(o()().mark((function e(r){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/ai/provider/query/org",{method:"GET",params:f()(f()({},r),{},{client:v.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(29132),G=function(){var e=(0,E.Z)().isDarkMode,r=(0,q.useState)([]),n=a()(r,2),t=n[0],l=n[1],i=((0,p.useIntl)(),(0,q.useRef)(!1),(0,F.Z)()),d=(i.translateString,i.translateStringTranct),c=M((function(e){return{currentLlmProvider:e.currentLlmProvider,setCurrentLlmProvider:e.setCurrentLlmProvider}})),m=c.currentLlmProvider,f=c.setCurrentLlmProvider,v=function(){var e=u()(o()().mark((function e(){var r,n,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmProviders"),r={pageNumber:0,pageSize:50},e.next=4,V(r);case 4:n=e.sent,console.log("queryLlmProvidersByOrg: ",n),200===n.code?l(null==n||null===(t=n.data)||void 0===t?void 0:t.content):s.yw.error(n.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,q.useEffect)((function(){v()}),[]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(U.Z,{itemLayout:"horizontal",dataSource:t,renderItem:function(r,n){return(0,O.jsx)(U.Z.Item,{style:(null==m?void 0:m.uid)===r.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){f(r)},children:(0,O.jsx)(U.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,O.jsx)(B.C,{src:r.avatar}),title:(0,O.jsx)(O.Fragment,{children:d(null==r?void 0:r.nickname)}),description:null==r?void 0:r.status})})}})})},J=l.Z.Sider,K=l.Z.Content,N=function(){var e=(0,t.Z)(),r=(e.headerStyle,e.leftSiderStyle),n=e.leftSiderWidth,i=e.contentStyle;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(l.Z,{children:[(0,O.jsx)(J,{style:r,width:n,children:(0,O.jsx)(G,{})}),(0,O.jsx)(l.Z,{children:(0,O.jsx)(K,{style:i,children:(0,O.jsx)(D,{})})})]})})}}}]);