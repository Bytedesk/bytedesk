"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1642],{19054:function(Ae,ee,t){var G=t(1413),i=t(91),oe=t(67294),m=t(24809),se=t(85893),k=["fieldProps","request","params","proFieldProps"],h=function(O,$){var o=O.fieldProps,z=O.request,w=O.params,ae=O.proFieldProps,l=(0,i.Z)(O,k);return(0,se.jsx)(m.Z,(0,G.Z)({valueType:"treeSelect",fieldProps:o,ref:$,request:z,params:w,filedConfig:{customLightMode:!0},proFieldProps:ae},l))},Z=oe.forwardRef(h);ee.Z=Z},952:function(Ae,ee,t){var G=t(34994);ee.ZP=G.A},36497:function(Ae,ee,t){t.d(ee,{O9:function(){return $},ZG:function(){return z},bN:function(){return ae},p1:function(){return M}});var G=t(15009),i=t.n(G),oe=t(97857),m=t.n(oe),se=t(99289),k=t.n(se),h=t(85615),Z=t(86745);function M(A){return O.apply(this,arguments)}function O(){return O=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/autoreply/query/org",{method:"GET",params:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),O.apply(this,arguments)}function $(A){return o.apply(this,arguments)}function o(){return o=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/autoreply/create",{method:"POST",data:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),o.apply(this,arguments)}function z(A){return w.apply(this,arguments)}function w(){return w=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/autoreply/update",{method:"POST",data:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),w.apply(this,arguments)}function ae(A){return l.apply(this,arguments)}function l(){return l=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/autoreply/delete",{method:"POST",data:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),l.apply(this,arguments)}},10411:function(Ae,ee,t){t.d(ee,{AP:function(){return M},_J:function(){return ae},t5:function(){return z},v_:function(){return $}});var G=t(15009),i=t.n(G),oe=t(97857),m=t.n(oe),se=t(99289),k=t.n(se),h=t(85615),Z=t(86745);function M(A){return O.apply(this,arguments)}function O(){return O=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/kbase/query/org",{method:"GET",params:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),O.apply(this,arguments)}function $(A){return o.apply(this,arguments)}function o(){return o=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/kbase/create",{method:"POST",data:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),o.apply(this,arguments)}function z(A){return w.apply(this,arguments)}function w(){return w=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/kbase/update",{method:"POST",data:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),w.apply(this,arguments)}function ae(A){return l.apply(this,arguments)}function l(){return l=k()(i()().mark(function A(R){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,Z.request)("/api/v1/kbase/delete",{method:"POST",data:m()(m()({},R),{},{client:h.bV})}));case 1:case"end":return d.stop()}},A)})),l.apply(this,arguments)}},84125:function(Ae,ee,t){t.d(ee,{D$:function(){return z},EP:function(){return A},hS:function(){return ae},z_:function(){return M}});var G=t(15009),i=t.n(G),oe=t(97857),m=t.n(oe),se=t(99289),k=t.n(se),h=t(85615),Z=t(86745);function M(B){return O.apply(this,arguments)}function O(){return O=k()(i()().mark(function B(te){return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,Z.request)("/api/v1/mem/query/org",{method:"GET",params:m()(m()({},te),{},{client:h.bV})}));case 1:case"end":return b.stop()}},B)})),O.apply(this,arguments)}function $(){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function B(){return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",request("/api/v1/mem/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return I.stop()}},B)})),o.apply(this,arguments)}function z(B){return w.apply(this,arguments)}function w(){return w=k()(i()().mark(function B(te){return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,Z.request)("/api/v1/mem/create",{method:"POST",data:m()(m()({},te),{},{client:h.bV})}));case 1:case"end":return b.stop()}},B)})),w.apply(this,arguments)}function ae(B){return l.apply(this,arguments)}function l(){return l=k()(i()().mark(function B(te){return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,Z.request)("/api/v1/mem/update",{method:"POST",data:m()(m()({},te),{},{client:h.bV})}));case 1:case"end":return b.stop()}},B)})),l.apply(this,arguments)}function A(B){return R.apply(this,arguments)}function R(){return R=k()(i()().mark(function B(te){return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,Z.request)("/api/v1/member/delete",{method:"POST",data:m()(m()({},te),{},{client:h.bV})}));case 1:case"end":return b.stop()}},B)})),R.apply(this,arguments)}function le(B){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function B(te){return _regeneratorRuntime().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",request("/api/v1/member/filter",{method:"GET",params:_objectSpread(_objectSpread({},te),{},{client:HTTP_CLIENT})}));case 1:case"end":return b.stop()}},B)})),d.apply(this,arguments)}},45480:function(Ae,ee,t){t.r(ee),t.d(ee,{default:function(){return Mt}});var G=t(21612),i=t(67294),oe=t(5574),m=t.n(oe),se=t(11941),k=t(15009),h=t.n(k),Z=t(97857),M=t.n(Z),O=t(99289),$=t.n(O),o=t(80049),z=t(3418),w=t(73803),ae=t(30694),l=t(85615),A=t(73445),R=t(782),le=t(18753),d=(0,A.Ue)()((0,R.mW)((0,R.tJ)((0,le.n)(function(ne,p){return{memberResult:{data:{content:[],totalElements:0}},insertMember:function(_){ne(function(S){var E=S.memberResult.data.content;E.unshift(_)})},updateMember:function(_){ne(function(S){var E=S.memberResult.data.content,L=E.findIndex(function(C){return C.uid===_.uid});L!==-1?E[L]=_:console.warn("Member with uid ".concat(_.uid," not found."))})},deleteMember:function(_){ne(function(S){var E=S.memberResult.data.content,L=E.findIndex(function(C){return C.uid===_.uid});L!==-1?E.splice(L,1):console.warn("Member with uid ".concat(_.uid," not found."))})},setMemberResult:function(_){ne({memberResult:_})},deleteMemberCache:function(){return ne({},!0)}}}),{name:l.PQ}))),B=t(53004),te=t(88484),I=t(34994),b=t(5966),Te=t(90672),Fe=t(19054),x=t(86745),Ue=t(8232),Re=t(7134),ce=t(14726),e=t(85893),Oe=function(){var p,f=I.A.useForm(),_=m()(f,1),S=_[0],E=(0,x.useIntl)(),L=(0,w.Z)(),C=L.translateString,N=d(function(P){return P.memberResult}),H=(0,ae.E)(function(P){return{currentAgent:P.currentAgent,setCurrentAgent:P.setCurrentAgent}}),a=H.currentAgent,ie=H.setCurrentAgent,de=(0,i.useState)(""),Q=m()(de,2),J=Q[0],K=Q[1],T=function(j,U){U.title=j.nickname,U.value=j.uid},D=(0,i.useMemo)(function(){for(var P=[],j=0;j<N.data.content.length;j++){var U={title:"",value:"",children:[]};T(N.data.content[j],U),P.push(U)}return P},[N]);(0,i.useEffect)(function(){a&&S.setFieldsValue({nickname:C(a==null?void 0:a.nickname),email:a==null?void 0:a.email,mobile:a==null?void 0:a.mobile,description:C(a==null?void 0:a.description)})},[a]);var Y=function(j){console.log("handleUploadSuccess:",j),K(j)},me=function(j){console.log("handleUploadError:",j)},ge=function(j){console.log("onTreeSelectChange:",j);for(var U=0;U<N.data.content.length;U++){var W=N.data.content[U];W.uid===j&&(S.setFieldsValue({nickname:W.nickname}),S.setFieldsValue({email:W.email}),S.setFieldsValue({mobile:W.mobile}))}},n=function(){var P=$()(h()().mark(function j(U){var W,ve,fe,he,ye,be,ue,g,y;return h()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("onFinish:",U),o.yw.loading(E.formatMessage({id:"updating"})),g=M()(M()(M()({},a),U),{},{avatar:J,serviceSettings:M()(M()({},a.serviceSettings),{},{robotUid:a==null||(W=a.serviceSettings)===null||W===void 0||(W=W.robot)===null||W===void 0?void 0:W.uid,quickFaqUids:a==null||(ve=a.serviceSettings)===null||ve===void 0?void 0:ve.quickFaqs.map(function(u){return u.uid}),faqUids:a==null||(fe=a.serviceSettings)===null||fe===void 0?void 0:fe.faqs.map(function(u){return u.uid}),guessFaqUids:a==null||(he=a.serviceSettings)===null||he===void 0?void 0:he.guessFaqs.map(function(u){return u.uid}),hotFaqUids:a==null||(ye=a.serviceSettings)===null||ye===void 0?void 0:ye.hotFaqs.map(function(u){return u.uid}),shortcutFaqUids:a==null||(be=a.serviceSettings)===null||be===void 0?void 0:be.shortcutFaqs.map(function(u){return u.uid}),worktimeUids:a==null||(ue=a.serviceSettings)===null||ue===void 0||(ue=ue.worktimes)===null||ue===void 0?void 0:ue.map(function(u){return u.uid})}),autoReplySettings:M()({},a.autoReplySettings)}),console.log("agentObject:",g),r.next=6,(0,z.sE)(g);case 6:y=r.sent,console.log("updateAgent response:",y),y.code===200?(o.yw.destroy(),o.yw.success(E.formatMessage({id:"update.success"})),ie(y.data)):(o.yw.destroy(),o.yw.error(y.message));case 9:case"end":return r.stop()}},j)}));return function(U){return P.apply(this,arguments)}}(),pe=function(j){return Array.isArray(j)?j:j==null?void 0:j.fileList};return(0,i.useEffect)(function(){if(a){var P;K(a.avatar),S.setFieldValue("memberUid",a==null||(P=a.member)===null||P===void 0?void 0:P.uid)}},[a]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(I.A,{form:S,style:{marginLeft:"100px"},onFinish:n,initialValues:{nickname:C(a==null?void 0:a.nickname),email:a==null?void 0:a.email,mobile:a==null?void 0:a.mobile,description:C(a==null?void 0:a.description),memberUid:a==null||(p=a.member)===null||p===void 0?void 0:p.uid},children:[(0,e.jsx)(Ue.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:pe,label:E.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,e.jsxs)(B.G,{onSuccess:Y,onError:me,children:[(0,e.jsx)(Re.C,{src:J}),(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(te.Z,{}),children:E.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,e.jsx)(b.Z,{width:"md",name:"nickname",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u5BA2\u670D\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u670D\u6635\u79F0"}]}),(0,e.jsx)(b.Z,{width:"md",name:"email",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u90AE\u7BB1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,e.jsx)(b.Z,{width:"md",name:"mobile",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]}),(0,e.jsx)(Te.Z,{width:"md",name:"description",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}]}),(0,e.jsx)(Fe.Z,{width:"md",name:"memberUid",label:"\u7ED1\u5B9A\u6210\u5458-\u7528\u4E8E\u8D26\u53F7\u767B\u5F55",fieldProps:{treeDefaultExpandAll:!0,treeData:D,onChange:ge},placeholder:"Please select",disabled:!0})]})})},xe=Oe,ke=t(40056),Ze=t(79964),Be=t(50748),we=t(99072),Ie=t(9025),Le=t(63772),Ke=t(23035),$e=t(51364),We=t(64423),Ne=t(54050),Ve=t(36497),Ge=t(10411),Se=t(87676),Ee=t(87603),ze=t(52688),Me=t(64317),He=function(p){var f,_=p.type,S=(0,x.useIntl)(),E=(0,x.useNavigate)(),L=I.A.useForm(),C=m()(L,1),N=C[0],H=(0,w.Z)(),a=H.translateString,ie=(0,i.useState)(),de=m()(ie,2),Q=de[0],J=de[1],K=(0,i.useState)(),T=m()(K,2),D=T[0],Y=T[1],me=(0,Se.u)(function(g){return g.currentOrg}),ge=(0,ae.E)(function(g){return{currentAgent:g.currentAgent,setCurrentAgent:g.setCurrentAgent}}),n=ge.currentAgent,pe=ge.setCurrentAgent,P=(0,i.useState)(l.DS),j=m()(P,2),U=j[0],W=j[1],ve=function(){var g=$()(h()().mark(function y(){var s,r;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o.yw.loading(S.formatMessage({id:"loading",defaultMessage:"Loading"})),s={pageNumber:0,pageSize:50,orgUid:me.uid},c.next=4,(0,Ve.p1)(s);case 4:r=c.sent,console.log("getAutoReplys response:",s,r),o.yw.destroy(),r.code===200?J(r):o.yw.error(r.message);case 8:case"end":return c.stop()}},y)}));return function(){return g.apply(this,arguments)}}();(0,i.useEffect)(function(){ve()},[]);var fe=function(){var g=$()(h()().mark(function y(){var s,r;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o.yw.loading(S.formatMessage({id:"loading",defaultMessage:"Loading"})),s={pageNumber:0,pageSize:50,type:U===l.PZ?l.jN:l.QP,orgUid:me.uid},c.next=4,(0,Ge.AP)(s);case 4:r=c.sent,console.log("getKeywordBase response:",s,r),o.yw.destroy(),r.code===200?Y(r):o.yw.error(r.message);case 8:case"end":return c.stop()}},y)}));return function(){return g.apply(this,arguments)}}();(0,i.useEffect)(function(){fe()},[U]),(0,i.useEffect)(function(){if(_===l.Nj){var g,y,s,r,u,c,V,v;W(n==null||(g=n.autoReplySettings)===null||g===void 0?void 0:g.autoReplyType),N.setFieldsValue({enabled:n==null||(y=n.autoReplySettings)===null||y===void 0?void 0:y.enabled,autoReplyType:n==null||(s=n.autoReplySettings)===null||s===void 0?void 0:s.autoReplyType,autoReplyUid:n==null||(r=n.autoReplySettings)===null||r===void 0?void 0:r.autoReplyUid,autoReplyContentType:n==null||(u=n.autoReplySettings)===null||u===void 0?void 0:u.autoReplyContentType,autoReplyContent:n==null||(c=n.autoReplySettings)===null||c===void 0?void 0:c.autoReplyContent,kbUid:n==null||(V=n.autoReplySettings)===null||V===void 0?void 0:V.kbUid}),N.setFieldValue("autoReplyUid",n==null||(v=n.autoReplySettings)===null||v===void 0?void 0:v.autoReplyContent)}},[n]);var he=function(y,s){console.log("handleAutoReplyTypeChange:",y),W(y)},ye=function(y,s){var r;console.log("handleAutoReplySelectChange:",y),Q==null||(r=Q.data.content)===null||r===void 0||r.forEach(function(u){u.uid===y&&N.setFieldsValue({autoReplyContentType:u.type,autoReplyContent:u.content})})},be=function(){var g=$()(h()().mark(function y(s){var r,u,c,V,v,_e,q,je,re;return h()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(console.log("handleAutoReplySubmit:",s),_!==l.Nj){X.next=9;break}return je=M()(M()({},n),{},{serviceSettings:M()(M()({},n==null?void 0:n.serviceSettings),{},{robotUid:n==null||(r=n.serviceSettings)===null||r===void 0||(r=r.robot)===null||r===void 0?void 0:r.uid,quickFaqUids:n==null||(u=n.serviceSettings)===null||u===void 0?void 0:u.quickFaqs.map(function(F){return F.uid}),faqUids:n==null||(c=n.serviceSettings)===null||c===void 0?void 0:c.faqs.map(function(F){return F.uid}),guessFaqUids:n==null||(V=n.serviceSettings)===null||V===void 0?void 0:V.guessFaqs.map(function(F){return F.uid}),hotFaqUids:n==null||(v=n.serviceSettings)===null||v===void 0?void 0:v.hotFaqs.map(function(F){return F.uid}),shortcutFaqUids:n==null||(_e=n.serviceSettings)===null||_e===void 0?void 0:_e.shortcutFaqs.map(function(F){return F.uid}),worktimeUids:n==null||(q=n.serviceSettings)===null||q===void 0||(q=q.worktimes)===null||q===void 0?void 0:q.map(function(F){return F.uid})}),autoReplySettings:M()(M()({},n.autoReplySettings),{},{enabled:s.enabled,autoReplyType:s.autoReplyType,autoReplyUid:s.autoReplyUid,autoReplyContentType:s.autoReplyContentType,autoReplyContent:s.autoReplyContent,kbUid:s.kbUid})}),console.log("agentObject:",je),X.next=6,(0,z.sE)(je);case 6:re=X.sent,console.log("updateAgent response:",re),re.code===200?(o.yw.destroy(),o.yw.success(S.formatMessage({id:"update.success"})),pe(re.data)):(o.yw.destroy(),o.yw.error(re.message));case 9:case"end":return X.stop()}},y)}));return function(s){return g.apply(this,arguments)}}(),ue=function(){var g=$()(h()().mark(function y(s){var r,u,c,V,v,_e,q,je,re;return h()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(console.log("handleAutoReplyEnabledChange:",s),_!==l.Nj){X.next=9;break}return je=M()(M()({},n),{},{serviceSettings:M()(M()({},n==null?void 0:n.serviceSettings),{},{robotUid:n==null||(r=n.serviceSettings)===null||r===void 0||(r=r.robot)===null||r===void 0?void 0:r.uid,quickFaqUids:n==null||(u=n.serviceSettings)===null||u===void 0?void 0:u.quickFaqs.map(function(F){return F.uid}),faqUids:n==null||(c=n.serviceSettings)===null||c===void 0?void 0:c.faqs.map(function(F){return F.uid}),guessFaqUids:n==null||(V=n.serviceSettings)===null||V===void 0?void 0:V.guessFaqs.map(function(F){return F.uid}),hotFaqUids:n==null||(v=n.serviceSettings)===null||v===void 0?void 0:v.hotFaqs.map(function(F){return F.uid}),shortcutFaqUids:n==null||(_e=n.serviceSettings)===null||_e===void 0?void 0:_e.shortcutFaqs.map(function(F){return F.uid}),worktimeUids:n==null||(q=n.serviceSettings)===null||q===void 0||(q=q.worktimes)===null||q===void 0?void 0:q.map(function(F){return F.uid})}),autoReplySettings:M()(M()({},n.autoReplySettings),{},{enabled:s})}),console.log("agentObject:",je),X.next=6,(0,z.sE)(je);case 6:re=X.sent,console.log("updateAgent response:",re),re.code===200?(o.yw.destroy(),o.yw.success(S.formatMessage({id:"update.success"})),pe(re.data)):(o.yw.destroy(),o.yw.error(re.message));case 9:case"end":return X.stop()}},y)}));return function(s){return g.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(I.A,{form:N,onFinish:be,children:[(0,e.jsx)(ze.Z,{width:"md",name:"enabled",label:"\u662F\u5426\u542F\u7528\u81EA\u52A8\u56DE\u590D",fieldProps:{onChange:ue}}),(0,e.jsx)(Me.Z,{width:"md",name:"autoReplyType",label:"\u81EA\u52A8\u56DE\u590D\u7C7B\u578B",options:[{label:"\u56FA\u5B9A\u56DE\u590D",value:l.DS},{label:"\u5173\u952E\u5B57\u5339\u914D",value:l.PZ},{label:"\u5927\u6A21\u578B\u56DE\u590D",value:l.Pc}],fieldProps:{onChange:function(y,s){he(y,s)}}}),U===l.DS&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.A.Item,{children:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(Ee.Z,{}),onClick:function(){E("/kb/autoreply/data")},children:"\u6DFB\u52A0\u56FA\u5B9A\u56DE\u590D\u5185\u5BB9"},"github")}),(0,e.jsx)(Me.Z,{width:"md",name:"autoReplyUid",label:"\u9009\u62E9\u56FA\u5B9A\u56DE\u590D\u5185\u5BB9",options:Q==null||(f=Q.data)===null||f===void 0?void 0:f.content.map(function(g){return{label:a(g.content),value:g.uid}}),fieldProps:{onChange:function(y,s){ye(y,s)}}}),(0,e.jsx)(Me.Z,{width:"md",name:"autoReplyContentType",label:"\u56FA\u5B9A\u56DE\u590D\u7C7B\u578B",options:[{label:"\u6587\u672C",value:l.PY},{label:"\u56FE\u7247",value:l.Qm},{label:"\u89C6\u9891",value:l.tV},{label:"\u97F3\u9891",value:l.Yu},{label:"\u6587\u4EF6",value:l.Qn}],disabled:!0}),(0,e.jsx)(Te.Z,{width:"md",name:"autoReplyContent",label:"\u56FA\u5B9A\u56DE\u590D\u5185\u5BB9",disabled:!0})]}),U===l.PZ&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.A.Item,{children:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(Ee.Z,{}),onClick:function(){E("/kb/keyword/data")},children:"\u6DFB\u52A0\u5173\u952E\u8BCD\u77E5\u8BC6\u5E93"},"github")}),(0,e.jsx)(Me.Z,{width:"md",name:"kbUid",label:"\u9009\u62E9\u5173\u952E\u8BCD\u77E5\u8BC6\u5E93",options:D==null?void 0:D.data.content.map(function(g){return{label:a(g.name),value:g.uid}})})]}),U===l.Pc&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.A.Item,{children:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(Ee.Z,{}),onClick:function(){E("/kb/llm/data")},children:"\u6DFB\u52A0\u5927\u6A21\u578B\u77E5\u8BC6\u5E93"},"github")}),(0,e.jsx)(Me.Z,{width:"md",name:"kbUid",label:"\u9009\u62E9\u5927\u6A21\u578B\u77E5\u8BC6\u5E93\u5E93",options:D==null?void 0:D.data.content.map(function(g){return{label:a(g.name),value:g.uid}})})]})]})})},Qe=He,Je=t(73453),Ye=t(48489),qe=t(91116),Xe=t(35791),et=function(){var p=(0,x.useIntl)(),f=(0,i.useMemo)(function(){return!0},[]),_=[{key:"faq",label:(0,e.jsx)(x.FormattedMessage,{id:"menu.knowledge.faq",defaultMessage:"FAQ"}),children:(0,e.jsx)(Ze.Z,{type:l.Nj}),disabled:f},{key:"quickfaqs",label:(0,e.jsx)(x.FormattedMessage,{id:"menu.knowledge.quickbutton",defaultMessage:"QuickButton"}),children:(0,e.jsx)($e.Z,{type:l.Nj}),disabled:f},{key:"faqGuess",label:(0,e.jsx)(x.FormattedMessage,{id:"menu.knowledge.faqGuess",defaultMessage:"FaqGuess"}),children:(0,e.jsx)(We.Z,{type:l.Nj}),disabled:f},{key:"faqHot",label:(0,e.jsx)(x.FormattedMessage,{id:"menu.knowledge.faqHot",defaultMessage:"FaqHot"}),children:(0,e.jsx)(Be.Z,{type:l.Nj}),disabled:f},{key:"faqShortcut",label:(0,e.jsx)(x.FormattedMessage,{id:"menu.knowledge.faqShortcut",defaultMessage:"FaqShortcut"}),children:(0,e.jsx)(we.Z,{type:l.Nj}),disabled:f},{key:"rate",label:(0,e.jsx)(x.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,e.jsx)(Le.Z,{type:l.Nj}),disabled:f},{key:"autoreply",label:(0,e.jsx)(x.FormattedMessage,{id:"autoreply",defaultMessage:"Auto Reply"}),children:(0,e.jsx)(Qe,{type:l.Nj}),disabled:f},{key:"leaveMsg",label:(0,e.jsx)(x.FormattedMessage,{id:"leavemsg",defaultMessage:"Leave Msg"}),children:(0,e.jsx)(Ie.Z,{type:l.Nj}),disabled:f},{key:"survey",label:(0,e.jsx)(x.FormattedMessage,{id:"survey",defaultMessage:"Survey"}),children:(0,e.jsx)(Xe.Z,{type:l.Nj}),disabled:f},{key:"history",label:(0,e.jsx)(x.FormattedMessage,{id:"history",defaultMessage:"History"}),children:(0,e.jsx)(Je.Z,{type:l.Nj}),disabled:f},{key:"inputassociation",label:(0,e.jsx)(x.FormattedMessage,{id:"inputassociation",defaultMessage:"Input Association"}),children:(0,e.jsx)(qe.Z,{type:l.Nj}),disabled:f},{key:"black",label:(0,e.jsx)(x.FormattedMessage,{id:"black",defaultMessage:"Black"}),children:(0,e.jsx)(Ne.Z,{type:l.Nj}),disabled:f},{key:"antiharassment",label:(0,e.jsx)(x.FormattedMessage,{id:"antiharassment",defaultMessage:"Anti Harassment"}),children:(0,e.jsx)(Ke.Z,{type:l.Nj}),disabled:f}],S=(0,i.useState)([]),E=m()(S,2),L=E[0],C=E[1];return(0,i.useEffect)(function(){C(_)},[]),(0,e.jsxs)(e.Fragment,{children:[f&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ke.Z,{message:"\u4F01\u4E1A\u7248-\u9AD8\u7EA7\u529F\u80FD",style:{marginBottom:20},type:"warning",action:(0,e.jsx)(ce.ZP,{type:"link",icon:(0,e.jsx)(Ye.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/")},children:p.formatMessage({id:"setting.helpdoc"})})})}),(0,e.jsx)(se.Z,{tabPosition:"left",items:L})]})},tt=et,nt=t(36649),at=t(58079),rt=t(31207),st=t(22268),lt=t(99606),it=t(59518),ut=function(){var p=(0,x.useIntl)(),f=(0,i.useState)([]),_=m()(f,2),S=_[0],E=_[1],L=[{key:"basic",label:p.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(xe,{})},{key:"serviceSettings",label:p.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,e.jsx)(it.Z,{type:l.Nj})},{key:"robot",label:p.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,e.jsx)(lt.Z,{type:l.Nj})},{key:"advanced",label:p.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,e.jsx)(tt,{})},{key:"channel",label:p.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(nt.Z,{type:l.Nj})},{key:"channelsocial",label:p.formatMessage({id:"channelsocial",defaultMessage:"Social Channel"}),children:(0,e.jsx)(at.Z,{type:l.Nj})},{key:"channelshop",label:p.formatMessage({id:"channelshop",defaultMessage:"Shop Channel"}),children:(0,e.jsx)(st.Z,{type:l.Nj})},{key:"channelforeign",label:p.formatMessage({id:"channelforeign",defaultMessage:"Foreign Channel"}),children:(0,e.jsx)(rt.Z,{type:l.Nj})}];return(0,i.useEffect)(function(){E(L)},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{defaultActiveKey:"basic",items:S})})},ot=ut,dt=t(39825),ct=t(11475),mt=t(64789),De=t(85576),gt=t(86250),Ce=t(2487),Pe=t(952),vt=function(p){var f=p.open,_=p.onClose,S=p.onSubmit,E=Pe.ZP.useForm(),L=m()(E,1),C=L[0],N=(0,Se.u)(function(K){return K.currentOrg}),H=d(function(K){return K.memberResult}),a=function(T,D){D.title=T.nickname,D.value=T.uid},ie=(0,i.useMemo)(function(){for(var K=[],T=0;T<H.data.content.length;T++){var D={title:"",value:"",children:[]};a(H.data.content[T],D),K.push(D)}return K},[H]),de=function(){console.log("handleOk"),C.validateFields().then(function(T){console.log("form values:",T);var D=C.getFieldValue("nickname"),Y=C.getFieldValue("email"),me=C.getFieldValue("mobile"),ge=C.getFieldValue("memberUid"),n={nickname:D,email:Y,mobile:me,memberUid:ge,orgUid:N.uid};console.log("agent:",n),S(n)}).catch(function(T){console.log("Form errors:",T)})},Q=function(){console.log("handleCancel"),_()},J=function(T){console.log("onTreeSelectChange:",T);for(var D=0;D<H.data.content.length;D++){var Y=H.data.content[D];Y.uid===T&&(console.log("element:",Y),C.setFieldsValue({nickname:Y.nickname}),C.setFieldsValue({email:Y.email}),C.setFieldsValue({mobile:Y.mobile}))}};return(0,e.jsx)("div",{children:(0,e.jsx)(De.Z,{title:"\u521B\u5EFA\u5BA2\u670D",open:f,onOk:de,onCancel:Q,children:(0,e.jsxs)(Pe.ZP,{form:C,name:"agentForm",style:{maxWidth:400},submitter:!1,children:[(0,e.jsx)(Fe.Z,{label:"\u7ED1\u5B9A\u6210\u5458",name:"memberUid",tooltip:"\u8BF7\u5148\u5230\u7EC4\u7EC7-\u300B\u6210\u5458-\u300B\u521B\u5EFA\u6210\u5458",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458!"}],fieldProps:{multiple:!1,treeDefaultExpandAll:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",onChange:J,treeData:ie}}),(0,e.jsx)(b.Z,{label:"\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}]}),(0,e.jsx)(b.Z,{label:"\u90AE\u7BB1",name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"}]}),(0,e.jsx)(b.Z,{label:"\u624B\u673A\u53F7",name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]})]})})})},pt=vt,ft=t(84125),ht=function(){var p=(0,x.useIntl)(),f=(0,i.useRef)(!1),_=(0,w.Z)(),S=_.translateString,E=_.translateStringTranct,L=(0,dt.Z)(),C=L.isDarkMode,N=(0,i.useState)(!1),H=m()(N,2),a=H[0],ie=H[1],de=(0,Se.u)(function(s){return s.currentOrg}),Q=d(function(s){return s.setMemberResult}),J=(0,ae.E)(function(s){return{agentResult:s.agentResult,currentAgent:s.currentAgent,insertAgent:s.insertAgent,setAgentResult:s.setAgentResult,setCurrentAgent:s.setCurrentAgent,deleteCurrentAgent:s.deleteCurrentAgent}}),K=J.agentResult,T=J.currentAgent,D=J.insertAgent,Y=J.setAgentResult,me=J.setCurrentAgent,ge=J.deleteCurrentAgent,n=De.Z.useModal(),pe=m()(n,2),P=pe[0],j=pe[1],U=function(r){P.confirm({title:p.formatMessage({id:"deleteTip"}),icon:(0,e.jsx)(ct.Z,{}),content:"".concat(p.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(S(r.nickname),"\u3011\uFF1F"),onOk:function(){W(r)},onCancel:function(){},okText:p.formatMessage({id:"ok"}),cancelText:p.formatMessage({id:"cancel"})})},W=function(){var s=$()(h()().mark(function r(u){var c;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("delete agent",u),o.yw.loading(p.formatMessage({id:"deleting",defaultMessage:"Deleting"})),v.next=4,(0,z.Lr)(u);case 4:c=v.sent,console.log("delete agent response",c),c.code===200?(o.yw.destroy(),o.yw.success(p.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),ge(u.uid)):(o.yw.destroy(),o.yw.error(c.message));case 7:case"end":return v.stop()}},r)}));return function(u){return s.apply(this,arguments)}}(),ve=function(){var s=$()(h()().mark(function r(){var u,c;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!f.current){v.next=3;break}return console.log("isLoading: 1",f.current),v.abrupt("return");case 3:return f.current=!0,o.yw.loading("loading"),u={pageNumber:0,pageSize:50,orgUid:de.uid},v.next=8,(0,z._t)(u);case 8:c=v.sent,console.log("queryAgentsByOrg: ",c),c.code===200?(o.yw.destroy(),Y(c)):(o.yw.destroy(),o.yw.error(c.message)),f.current=!1;case 12:case"end":return v.stop()}},r)}));return function(){return s.apply(this,arguments)}}(),fe=function(){var s=$()(h()().mark(function r(){var u,c;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u={pageNumber:0,pageSize:50,orgUid:de.uid},v.next=3,(0,ft.z_)(u);case 3:c=v.sent,console.log("queryAllMembers:",u,c),c.code===200?Q(c):o.yw.error(c.message);case 6:case"end":return v.stop()}},r)}));return function(){return s.apply(this,arguments)}}();(0,i.useEffect)(function(){ve(),fe()},[]);var he=function(){ie(!0)},ye=function(){var s=$()(h()().mark(function r(u){var c;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("save agent"),o.yw.loading(p.formatMessage({id:"creating",defaultMessage:"Creating"})),v.next=4,(0,z.x_)(u);case 4:c=v.sent,console.log("create agent:",c),c.code===200?(o.yw.destroy(),o.yw.success(p.formatMessage({id:"create.success"})),D(c.data),ie(!1)):(o.yw.destroy(),ie(!1),o.yw.error(c.message));case 7:case"end":return v.stop()}},r)}));return function(u){return s.apply(this,arguments)}}(),be=function(){ie(!1)},ue=function(){he()},g=function(r,u){me(r)},y=function(r){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("span",{style:{color:"#999999",fontSize:12},children:[r.status===l.R&&"[\u2705\u63A5\u5F85]",r.status===l.tU&&"[\u5FD9\u788C]",r.status===l.LZ&&"[\u4E0B\u7EBF]",r.connected?"\u2705\u8FDE\u63A5":"\u274C\u65AD\u5F00"]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(gt.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,e.jsx)(ce.ZP,{size:"small",type:"primary",icon:(0,e.jsx)(mt.Z,{}),onClick:ue,children:p.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,e.jsx)(ce.ZP,{size:"small",onClick:ve,children:p.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,e.jsx)(ce.ZP,{onClick:function(){return U(T)},size:"small",danger:!0,disabled:(T==null?void 0:T.uid)==="",children:p.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,e.jsx)(Ce.Z,{itemLayout:"horizontal",dataSource:K.data.content,renderItem:function(r,u){return(0,e.jsx)(Ce.Z.Item,{style:T.uid===r.uid?{backgroundColor:C?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return g(r,u)},children:(0,e.jsx)(Ce.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,e.jsx)(Re.C,{src:r.avatar}),title:(0,e.jsx)(e.Fragment,{children:E(r.nickname)}),description:y(r)})})}}),(0,e.jsx)(pt,{open:a,onClose:be,onSubmit:ye}),j]})},yt=ht,bt=t(77154),_t=G.Z.Sider,jt=G.Z.Content,At=function(){var p=(0,bt.Z)(),f=p.leftSiderStyle,_=p.leftSiderWidth;return(0,i.useEffect)(function(){},[]),(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(_t,{width:_,style:f,children:(0,e.jsx)(yt,{})}),(0,e.jsx)(G.Z,{children:(0,e.jsx)(jt,{children:(0,e.jsx)(ot,{})})})]})},Mt=At}}]);
