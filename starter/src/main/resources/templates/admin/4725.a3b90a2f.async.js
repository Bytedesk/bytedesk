"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4725],{69842:function(e,t,n){n.d(t,{H:function(){return c}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(55735),d=n(30921);function c(e){return g.apply(this,arguments)}function g(){return(g=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/vip/invoice/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},43705:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(99885),v=n(66916),f=n(76750),h=n(66310),p=n(40612),m=n(56691),w=n(5651),q=n(69169),y=n(48708),S=n(84881),x=n(30921),F=n(32943),k=n(75365),b=n(38775),j=n(3849),M=n(44194),C=n(1902),U=n(95490),Z=n(55735),A=n(24170),I=n(72614),R=n(11184),P=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,R.M)(),N=W.config,O=W.updateConfig,E=(0,p.u)((function(e){return e.currentOrg})),V=(0,M.useState)(),D=d()(V,2),B=D[0],G=D[1],X=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=X.currentRobot,H=X.setCurrentRobot,z=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,$=z.setCurrentAgent,L=(0,U.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,J=L.setCurrentWorkgroup,K=(0,M.useMemo)((function(){return n===Z._X4?{chatType:Z.xtN,chatSid:_.uid}:n===Z.Njn?{chatType:Z.scI,chatSid:Q.uid}:n===Z.aZD?{chatType:Z.vPY,chatSid:Y.uid}:{chatType:Z.xtN,chatSid:""}}),[n,_,Q,Y]),ee=K.chatType,te=K.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==E?void 0:E.uid},e.next=4,(0,g.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?G(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[]),(0,M.useEffect)((function(){var e,t,i;if(n===Z._X4)o.setFieldsValue({showFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),null!=_&&null!==(i=_.serviceSettings)&&void 0!==i&&i.showFaqs?O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:680}),chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})})):O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:380}),chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===Z.Njn){var r,u,a;o.setFieldsValue({showFaqs:null==Q||null===(r=Q.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==Q||null===(u=Q.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),null!=Q&&null!==(a=Q.serviceSettings)&&void 0!==a&&a.showFaqs?O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:680}),chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})})):O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:380}),chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===Z.aZD){var l,d,c;o.setFieldsValue({showFaqs:null==Y||null===(l=Y.serviceSettings)||void 0===l?void 0:l.showFaqs,faqUids:null==Y||null===(d=Y.serviceSettings)||void 0===d||null===(d=d.faqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),null!=Y&&null!==(c=Y.serviceSettings)&&void 0!==c&&c.showFaqs?O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:680}),chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})})):O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:380}),chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[_,Q,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,g,f,h,p,m,w,q,y,S,x,F,k,b,j,M,C,U;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==Z._X4){e.next=11;break}return d=s()(s()({},_),{},{serviceSettings:s()(s()({},_.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==_||null===(o=_.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,v.$l)(d);case 6:g=e.sent,console.log("updateRobot response:",g),200===g.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(g.data)):(c.yw.destroy(),c.yw.error(g.message)),e.next=29;break;case 11:if(n!==Z.Njn){e.next=21;break}return y=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.hotFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(w=Q.leaveMsgSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(q=Q.robotSettings)||void 0===q||null===(q=q.robot)||void 0===q?void 0:q.uid}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",y),e.next=16,(0,A.sE)(y);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==Z.aZD){e.next=29;break}return C=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.guessFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,I.W5)(C);case 26:U=e.sent,console.log("updateWorkGroup response:",U),200===U.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),J(U.data)):(c.yw.destroy(),c.yw.error(U.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{children:[(0,P.jsx)(F.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,P.jsx)(k.ZP,{type:"link",icon:(0,P.jsx)(m.Z,{}),onClick:function(){return window.open(Z.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,P.jsx)(b.Z,{}),(0,P.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,P.jsx)(y.Z,{label:u.formatMessage({id:"faq.show.faqs"}),name:"showFaqs",fieldProps:{onChange:se}}),(0,P.jsx)(q.A.Item,{children:(0,P.jsx)(k.ZP,{type:"primary",icon:(0,P.jsx)(w.Z,{}),onClick:function(){l("/kb/llm/data")},children:u.formatMessage({id:"faq.add.faqs"})},"github")}),(0,P.jsx)(S.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faq"}),options:null==B||null===(t=B.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,P.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,P.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},61765:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(99885),v=n(66916),f=n(76750),h=n(66310),p=n(40612),m=n(56691),w=n(5651),q=n(69169),y=n(48708),S=n(84881),x=n(30921),F=n(32943),k=n(75365),b=n(38775),j=n(3849),M=n(44194),C=n(1902),U=n(95490),Z=n(55735),A=n(24170),I=n(72614),R=n(11184),P=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,R.M)(),N=W.config,O=W.updateConfig,E=(0,p.u)((function(e){return e.currentOrg})),V=(0,M.useState)(),D=d()(V,2),B=D[0],G=D[1],X=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=X.currentRobot,H=X.setCurrentRobot,z=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,$=z.setCurrentAgent,L=(0,U.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,J=L.setCurrentWorkgroup,K=(0,M.useMemo)((function(){return n===Z._X4?{chatType:Z.xtN,chatSid:_.uid}:n===Z.Njn?{chatType:Z.scI,chatSid:Q.uid}:n===Z.aZD?{chatType:Z.vPY,chatSid:Y.uid}:{chatType:Z.xtN,chatSid:""}}),[n,_,Q,Y]),ee=K.chatType,te=K.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==E?void 0:E.uid},e.next=4,(0,g.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?G(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[E]),(0,M.useEffect)((function(){var e,t;if(n===Z._X4)o.setFieldsValue({showGuessFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showGuessFaqs,guessFaqUids:null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.guessFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===Z.Njn){var i,r;o.setFieldsValue({showGuessFaqs:null==Q||null===(i=Q.serviceSettings)||void 0===i?void 0:i.showGuessFaqs,guessFaqUids:null==Q||null===(r=Q.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===Z.aZD){var u,a;o.setFieldsValue({showGuessFaqs:null==Y||null===(u=Y.serviceSettings)||void 0===u?void 0:u.showGuessFaqs,guessFaqUids:null==Y||null===(a=Y.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[_,Q,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,g,f,h,p,m,w,q,y,S,x,F,k,b,j,M,C,U,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==Z._X4){e.next=11;break}return d=s()(s()({},_),{},{serviceSettings:s()(s()({},_.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==_||null===(o=_.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,v.$l)(d);case 6:g=e.sent,console.log("updateRobot response:",g),200===g.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(g.data)):(c.yw.destroy(),c.yw.error(g.message)),e.next=29;break;case 11:if(n!==Z.Njn){e.next=21;break}return y=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.hotFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",y),e.next=16,(0,A.sE)(y);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==Z.aZD){e.next=29;break}return U=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:null===(C=Y.agents)||void 0===C?void 0:C.map((function(e){return e.uid}))}),console.log("workgroupObject:",U),e.next=26,(0,I.W5)(U);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),J(R.data)):(c.yw.destroy(),c.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqGuess handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{children:[(0,P.jsx)(F.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,P.jsx)(k.ZP,{type:"link",icon:(0,P.jsx)(m.Z,{}),onClick:function(){return window.open(Z.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,P.jsx)(b.Z,{}),(0,P.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,P.jsx)(y.Z,{label:u.formatMessage({id:"faq.show.guess"}),name:"showGuessFaqs",fieldProps:{onChange:se}}),(0,P.jsx)(q.A.Item,{children:(0,P.jsx)(k.ZP,{type:"primary",icon:(0,P.jsx)(w.Z,{}),onClick:function(){l("/kb/llm/data")},children:u.formatMessage({id:"faq.add.guess"})},"github")}),(0,P.jsx)(S.Z,{name:"guessFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqGuess"}),options:null==B||null===(t=B.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,P.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,P.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},1461:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(99885),v=n(66916),f=n(76750),h=n(66310),p=n(40612),m=n(56691),w=n(5651),q=n(69169),y=n(48708),S=n(84881),x=n(30921),F=n(32943),k=n(75365),b=n(38775),j=n(3849),M=n(44194),C=n(1902),U=n(95490),Z=n(55735),A=n(24170),I=n(72614),R=n(11184),P=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,R.M)(),N=W.config,O=W.updateConfig,E=(0,p.u)((function(e){return e.currentOrg})),V=(0,M.useState)(),D=d()(V,2),B=D[0],G=D[1],X=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=X.currentRobot,H=X.setCurrentRobot,z=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,$=z.setCurrentAgent,L=(0,U.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,J=L.setCurrentWorkgroup,K=(0,M.useMemo)((function(){return n===Z._X4?{chatType:Z.xtN,chatSid:_.uid}:n===Z.Njn?{chatType:Z.scI,chatSid:Q.uid}:n===Z.aZD?{chatType:Z.vPY,chatSid:Y.uid}:{chatType:Z.xtN,chatSid:""}}),[n,_,Q,Y]),ee=K.chatType,te=K.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==E?void 0:E.uid},e.next=4,(0,g.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?G(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[E]),(0,M.useEffect)((function(){var e;if(n===Z._X4)o.setFieldsValue({showHotFaqs:null==_?void 0:_.serviceSettings.showHotFaqs,hotFaqUids:(null==_||null===(e=_.serviceSettings)||void 0===e||null===(e=e.hotFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===Z.Njn){var t;o.setFieldsValue({showHotFaqs:null==Q?void 0:Q.serviceSettings.showHotFaqs,hotFaqUids:(null==Q||null===(t=Q.serviceSettings)||void 0===t||null===(t=t.hotFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===Z.aZD){var i;o.setFieldsValue({showHotFaqs:null==Y?void 0:Y.serviceSettings.showHotFaqs,hotFaqUids:(null==Y||null===(i=Y.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[_,Q,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,g,f,h,p,m,w,q,y,S,x,F,k,b,j,M,C,U;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==Z._X4){e.next=11;break}return d=s()(s()({},_),{},{serviceSettings:s()(s()({},_.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==_||null===(o=_.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,v.$l)(d);case 6:g=e.sent,console.log("updateRobot response:",g),200===g.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(g.data)):(c.yw.destroy(),c.yw.error(g.message)),e.next=29;break;case 11:if(n!==Z.Njn){e.next=21;break}return y=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.faqs)||void 0===p?void 0:p.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",y),e.next=16,(0,A.sE)(y);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==Z.aZD){e.next=29;break}return C=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,I.W5)(C);case 26:U=e.sent,console.log("updateWorkGroup response:",U),200===U.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),J(U.data)):(c.yw.destroy(),c.yw.error(U.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqHots handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{children:[(0,P.jsx)(F.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,P.jsx)(k.ZP,{type:"link",icon:(0,P.jsx)(m.Z,{}),onClick:function(){return window.open(Z.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,P.jsx)(b.Z,{}),(0,P.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,P.jsx)(y.Z,{label:u.formatMessage({id:"faq.show.hot"}),name:"showHotFaqs",fieldProps:{onChange:se}}),(0,P.jsx)(q.A.Item,{children:(0,P.jsx)(k.ZP,{type:"primary",icon:(0,P.jsx)(w.Z,{}),onClick:function(){l("/kb/llm/data")},children:u.formatMessage({id:"faq.add.hot"})},"github")}),(0,P.jsx)(S.Z,{name:"hotFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqHot"}),options:null==B||null===(t=B.data)||void 0===t?void 0:t.content.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,P.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,P.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},71469:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(99885),v=n(66916),f=n(76750),h=n(66310),p=n(40612),m=n(56691),w=n(5651),q=n(69169),y=n(48708),S=n(84881),x=n(30921),F=n(32943),k=n(75365),b=n(38775),j=n(3849),M=n(44194),C=n(1902),U=n(95490),Z=n(55735),A=n(24170),I=n(72614),R=n(11184),P=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,R.M)(),N=W.config,O=W.updateConfig,E=(0,p.u)((function(e){return e.currentOrg})),V=(0,M.useState)(),D=d()(V,2),B=D[0],G=D[1],X=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=X.currentRobot,H=X.setCurrentRobot,z=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,$=z.setCurrentAgent,L=(0,U.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,J=L.setCurrentWorkgroup,K=(0,M.useMemo)((function(){return n===Z._X4?{chatType:Z.xtN,chatSid:_.uid}:n===Z.Njn?{chatType:Z.scI,chatSid:Q.uid}:n===Z.aZD?{chatType:Z.vPY,chatSid:Y.uid}:{chatType:Z.xtN,chatSid:""}}),[n,_,Q,Y]),ee=K.chatType,te=K.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==E?void 0:E.uid},e.next=4,(0,g.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?G(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[E]),(0,M.useEffect)((function(){var e,t;if(n===Z._X4)o.setFieldsValue({showQuickFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===Z.Njn){var i,r;o.setFieldsValue({showQuickFaqs:null==Q||null===(i=Q.serviceSettings)||void 0===i?void 0:i.showQuickFaqs,quickFaqUids:null==Q||null===(r=Q.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===Z.aZD){var u,a;o.setFieldsValue({showQuickFaqs:null==Y||null===(u=Y.serviceSettings)||void 0===u?void 0:u.showQuickFaqs,quickFaqUids:null==Y||null===(a=Y.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatConfig:s()(s()({},N.chatConfig),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[_,Q,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,g,f,h,p,m,w,q,y,S,x,F,k,b,j,M,C,U;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==Z._X4){e.next=11;break}return d=s()(s()({},_),{},{serviceSettings:s()(s()({},_.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==_||null===(o=_.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,v.$l)(d);case 6:g=e.sent,console.log("updateRobot response:",g),200===g.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(g.data)):(c.yw.destroy(),c.yw.error(g.message)),e.next=29;break;case 11:if(n!==Z.Njn){e.next=21;break}return y=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.faqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.hotFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",y),e.next=16,(0,A.sE)(y);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==Z.aZD){e.next=29;break}return C=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.faqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.guessFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,I.W5)(C);case 26:U=e.sent,console.log("updateWorkGroup response:",U),200===U.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),J(U.data)):(c.yw.destroy(),c.yw.error(U.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{children:[(0,P.jsx)(F.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,P.jsx)(k.ZP,{type:"link",icon:(0,P.jsx)(m.Z,{}),onClick:function(){return window.open(Z.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,P.jsx)(b.Z,{}),(0,P.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,P.jsx)(y.Z,{label:u.formatMessage({id:"faq.show.quick.buttons"}),name:"showQuickFaqs",fieldProps:{onChange:se}}),(0,P.jsx)(q.A.Item,{children:(0,P.jsx)(k.ZP,{type:"primary",icon:(0,P.jsx)(w.Z,{}),onClick:function(){l("/kb/llm/data")},children:u.formatMessage({id:"faq.add.quick.buttons"})},"github")}),(0,P.jsx)(S.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.quickbutton"}),options:null==B||null===(t=B.data)||void 0===t?void 0:t.content.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,P.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,P.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"show.chat.window"})}),(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"hide.chat.window"})})]})]})}},50796:function(e,t,n){var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(24170),v=n(66916),f=n(72614),h=n(1902),p=n(66310),m=n(95490),w=n(55735),q=n(69169),y=n(48708),S=n(30921),x=n(44194),F=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),i=q.A.useForm(),o=d()(i,1)[0],u=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),l=u.currentRobot,k=u.setCurrentRobot,b=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=b.currentAgent,M=b.setCurrentAgent,C=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),U=C.currentWorkgroup,Z=C.setCurrentWorkgroup;(0,x.useEffect)((function(){var e;if(t===w._X4)o.setFieldsValue({showInputAssociation:null==l||null===(e=l.serviceSettings)||void 0===e?void 0:e.showInputAssociation});else if(t===w.Njn){var n;o.setFieldsValue({showInputAssociation:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showInputAssociation})}else if(t===w.aZD){var i;o.setFieldsValue({showInputAssociation:null==U||null===(i=U.serviceSettings)||void 0===i?void 0:i.showInputAssociation})}}),[l,j,U]);var A=function(){var e=a()(s()().mark((function e(i){var o,u,a,d,h,p,m,q,y,S,x,F,b,C,A,I,R,P,T,W,N,O,E,V,D;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleInputAssociationSubmit:",i),t!==w._X4){e.next=11;break}return p=r()(r()({},l),{},{serviceSettings:r()(r()({},l.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(o=j.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==l||null===(u=l.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==l||null===(a=l.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==l||null===(d=l.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==l||null===(h=l.serviceSettings)||void 0===h||null===(h=h.shortcutFaqs)||void 0===h?void 0:h.map((function(e){return e.uid}))})}),console.log("robotObject:",p),e.next=6,(0,v.$l)(p);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),k(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return A=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),quickFaqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(F=j.serviceSettings)||void 0===F||null===(F=F.shortcutFaqs)||void 0===F?void 0:F.map((function(e){return e.uid}))}),robotSettings:r()(r()({},j.robotSettings),{},{robotUid:null==j||null===(b=j.robotSettings)||void 0===b||null===(b=b.robot)||void 0===b?void 0:b.uid}),leaveMsgSettings:r()(r()({},j.leaveMsgSettings),{},{worktimeUids:null==j||null===(C=j.leaveMsgSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",A),e.next=16,(0,g.sE)(A);case 16:I=e.sent,console.log("updateAgent response:",I),200===I.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),M(I.data)):(c.yw.destroy(),c.yw.error(I.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return V=r()(r()({},U),{},{serviceSettings:r()(r()({},U.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(R=j.serviceSettings)||void 0===R||null===(R=R.faqs)||void 0===R?void 0:R.map((function(e){return e.uid})),quickFaqUids:null===(P=U.serviceSettings)||void 0===P||null===(P=P.quickFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),guessFaqUids:null==U||null===(T=U.serviceSettings)||void 0===T||null===(T=T.guessFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),hotFaqUids:null==U||null===(W=U.serviceSettings)||void 0===W||null===(W=W.hotFaqs)||void 0===W?void 0:W.map((function(e){return e.uid})),shortcutFaqUids:null==U||null===(N=U.serviceSettings)||void 0===N||null===(N=N.shortcutFaqs)||void 0===N?void 0:N.map((function(e){return e.uid}))}),robotSettings:r()(r()({},U.robotSettings),{},{robotUid:null==U||null===(O=U.robotSettings)||void 0===O||null===(O=O.robot)||void 0===O?void 0:O.uid}),leaveMsgSettings:r()(r()({},U.leaveMsgSettings),{},{worktimeUids:null==U||null===(E=U.leaveMsgSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:U.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",V),e.next=26,(0,f.W5)(V);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),Z(D.data)):(c.yw.destroy(),c.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsx)("div",{children:(0,F.jsx)(q.A,{form:o,onFinish:A,children:(0,F.jsx)(y.Z,{width:"md",name:"showInputAssociation",label:n.formatMessage({id:"showInputAssociation",defaultMessage:"Show Input Association"})})})})}},75808:function(e,t,n){var i=n(90819),s=n.n(i),o=n(89933),r=n.n(o),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(24170),v=n(66916),f=n(72614),h=n(1902),p=n(66310),m=n(95490),w=n(55735),q=n(69169),y=n(48708),S=n(32350),x=n(30921),F=n(44194),k=n(11184),b=n(3849),j=n(75365),M=n(31549);t.Z=function(e){var t=e.type,n=(0,x.useIntl)(),i=q.A.useForm(),o=d()(i,1)[0],u=(0,k.M)(),l=u.config,C=u.updateConfig,U=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Z=U.currentRobot,A=U.setCurrentRobot,I=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),R=I.currentAgent,P=I.setCurrentAgent,T=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),W=T.currentWorkgroup,N=T.setCurrentWorkgroup,O=(0,F.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:Z.uid}:t===w.Njn?{chatType:w.scI,chatSid:R.uid}:t===w.aZD?{chatType:w.vPY,chatSid:W.uid}:{chatType:w.xtN,chatSid:""}}),[t,Z,R,W]),E=O.chatType,V=O.chatSid;(0,F.useEffect)((function(){var e,n,i,s,r,u;if(t===w._X4)o.setFieldsValue({autoPopup:null==Z||null===(e=Z.serviceSettings)||void 0===e?void 0:e.autoPopup,showInvite:null==Z||null===(n=Z.inviteSettings)||void 0===n?void 0:n.show,inviteText:null==Z||null===(i=Z.inviteSettings)||void 0===i?void 0:i.text}),C(a()(a()({},l),{},{autoPopup:null==Z||null===(s=Z.serviceSettings)||void 0===s?void 0:s.autoPopup,inviteConfig:{show:null==Z||null===(r=Z.inviteSettings)||void 0===r?void 0:r.show,text:null==Z||null===(u=Z.inviteSettings)||void 0===u?void 0:u.text},chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V})}));else if(t===w.Njn){var d,c,g,v,f,h;o.setFieldsValue({autoPopup:null==R||null===(d=R.serviceSettings)||void 0===d?void 0:d.autoPopup,showInvite:null==R||null===(c=R.inviteSettings)||void 0===c?void 0:c.show,inviteText:null==R||null===(g=R.inviteSettings)||void 0===g?void 0:g.text}),C(a()(a()({},l),{},{autoPopup:null==R||null===(v=R.serviceSettings)||void 0===v?void 0:v.autoPopup,inviteConfig:{show:null==R||null===(f=R.inviteSettings)||void 0===f?void 0:f.show,text:null==R||null===(h=R.inviteSettings)||void 0===h?void 0:h.text},chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V})}))}else if(t===w.aZD){var p,m,q,y,S,x;o.setFieldsValue({autoPopup:null==W||null===(p=W.serviceSettings)||void 0===p?void 0:p.autoPopup,showInvite:null==W||null===(m=W.inviteSettings)||void 0===m?void 0:m.show,inviteText:null==W||null===(q=W.inviteSettings)||void 0===q?void 0:q.text}),C(a()(a()({},l),{},{autoPopup:null==W||null===(y=W.serviceSettings)||void 0===y?void 0:y.autoPopup,inviteConfig:{show:null==W||null===(S=W.inviteSettings)||void 0===S?void 0:S.show,text:null==W||null===(x=W.inviteSettings)||void 0===x?void 0:x.text},chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V})}))}}),[Z,R,W,E,V]);var D=function(){var e=r()(s()().mark((function e(i){var o,r,u,l,d,h,p,m,q,y,S,x,F,k,b,j,M,C,U,I,T,O,E,V,D;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),t!==w._X4){e.next=11;break}return h=a()(a()({},Z),{},{serviceSettings:a()(a()({},Z.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==Z||null===(o=Z.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==Z||null===(r=Z.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(u=Z.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(l=Z.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(d=Z.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},Z.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",h),e.next=6,(0,v.$l)(h);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),A(p.data)):(c.yw.destroy(),c.yw.error(p.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return b=a()(a()({},R),{},{serviceSettings:a()(a()({},null==R?void 0:R.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==R||null===(m=R.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==R||null===(q=R.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==R||null===(y=R.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==R||null===(S=R.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(x=R.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:a()(a()({},R.robotSettings),{},{robotUid:null==R||null===(F=R.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),leaveMsgSettings:a()(a()({},R.leaveMsgSettings),{},{worktimeUids:null==R||null===(k=R.leaveMsgSettings)||void 0===k||null===(k=k.worktimes)||void 0===k?void 0:k.map((function(e){return e.uid}))}),autoReplySettings:a()({},R.autoReplySettings),inviteSettings:a()(a()({},R.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",b),e.next=16,(0,g.sE)(b);case 16:j=e.sent,console.log("updateAgent response:",j),200===j.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),P(j.data)):(c.yw.destroy(),c.yw.error(j.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return V=a()(a()({},W),{},{serviceSettings:a()(a()({},W.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==W||null===(M=W.serviceSettings)||void 0===M||null===(M=M.faqs)||void 0===M?void 0:M.map((function(e){return e.uid})),quickFaqUids:null===(C=W.serviceSettings)||void 0===C||null===(C=C.quickFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),guessFaqUids:null==W||null===(U=W.serviceSettings)||void 0===U||null===(U=U.guessFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),hotFaqUids:null==W||null===(I=W.serviceSettings)||void 0===I||null===(I=I.hotFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(T=W.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),robotSettings:a()(a()({},W.robotSettings),{},{robotUid:null==W||null===(O=W.robotSettings)||void 0===O||null===(O=O.robot)||void 0===O?void 0:O.uid}),leaveMsgSettings:a()(a()({},W.leaveMsgSettings),{},{worktimeUids:null==W||null===(E=W.leaveMsgSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},W.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:W.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",V),e.next=26,(0,f.W5)(V);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),N(D.data)):(c.yw.destroy(),c.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsxs)(q.A,{form:o,onFinish:D,children:[(0,M.jsx)(y.Z,{width:"md",name:"autoPopup",label:n.formatMessage({id:"autoPopup",defaultMessage:"Auto Popup"})}),(0,M.jsx)(y.Z,{width:"md",name:"showInvite",label:n.formatMessage({id:"showInvite",defaultMessage:"Show Invite"})}),(0,M.jsx)(S.Z,{width:"md",name:"inviteText",label:n.formatMessage({id:"inviteText",defaultMessage:"Invite Text"})})]}),(0,M.jsxs)(b.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,M.jsx)(j.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,M.jsx)(j.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},54166:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(24170),n(66916),n(72614),n(1902),n(66310),n(95490),n(55735),n(30921),n(44194),n(31549)},40836:function(e,t,n){var i=n(90819),s=n.n(i),o=n(89933),r=n.n(o),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(86803),g=n(24170),v=n(66916),f=n(72614),h=n(1902),p=n(66310),m=n(95490),w=n(55735),q=n(69169),y=n(48708),S=n(32350),x=n(30921),F=n(44194),k=n(3849),b=n(75365),j=n(11184),M=n(31549);t.Z=function(e){var t=e.type,n=(0,x.useIntl)(),i=q.A.useForm(),o=d()(i,1)[0],u=(0,j.M)(),l=u.config,C=u.updateConfig,U=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Z=U.currentRobot,A=U.setCurrentRobot,I=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),R=I.currentAgent,P=I.setCurrentAgent,T=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),W=T.currentWorkgroup,N=T.setCurrentWorkgroup,O=(0,F.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:Z.uid}:t===w.Njn?{chatType:w.scI,chatSid:R.uid}:t===w.aZD?{chatType:w.vPY,chatSid:W.uid}:{chatType:w.xtN,chatSid:""}}),[t,Z,R,W]),E=O.chatType,V=O.chatSid;(0,F.useEffect)((function(){if(t===w._X4){var e,n,i=null==Z||null===(e=Z.serviceSettings)||void 0===e?void 0:e.showRightIframe;o.setFieldsValue({showRightIframe:i,rightIframeUrl:null==Z||null===(n=Z.serviceSettings)||void 0===n?void 0:n.rightIframeUrl}),C(i?a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.Njn){var s,r,u=null==R||null===(s=R.serviceSettings)||void 0===s?void 0:s.showRightIframe;o.setFieldsValue({showRightIframe:u,rightIframeUrl:null==R||null===(r=R.serviceSettings)||void 0===r?void 0:r.rightIframeUrl}),C(u?a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.aZD){var d,c,g=null==W||null===(d=W.serviceSettings)||void 0===d?void 0:d.showRightIframe;o.setFieldsValue({showRightIframe:g,rightIframeUrl:null==W||null===(c=W.serviceSettings)||void 0===c?void 0:c.rightIframeUrl}),C(g?a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatConfig:a()(a()({},l.chatConfig),{},{t:E,sid:V}),window:a()(a()({},l.window),{},{width:380})}))}}),[Z,R,W,E,V]);var D=function(){var e=r()(s()().mark((function e(i){var o,r,u,l,d,h,p,m,q,y,S,x,F,k,b,j,M,C,U,I,T,O,E,V,D,B;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleRightSubmit:",i),t!==w._X4){e.next=11;break}return h=a()(a()({},Z),{},{serviceSettings:a()(a()({},Z.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==Z||null===(o=Z.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==Z||null===(r=Z.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(u=Z.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(l=Z.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(d=Z.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,v.$l)(h);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),A(p.data)):(c.yw.destroy(),c.yw.error(p.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return b=a()(a()({},R),{},{serviceSettings:a()(a()({},null==R?void 0:R.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==R||null===(m=R.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==R||null===(q=R.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==R||null===(y=R.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==R||null===(S=R.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(x=R.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:a()(a()({},R.robotSettings),{},{robotUid:null==R||null===(F=R.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),leaveMsgSettings:a()(a()({},R.leaveMsgSettings),{},{worktimeUids:null==R||null===(k=R.leaveMsgSettings)||void 0===k||null===(k=k.worktimes)||void 0===k?void 0:k.map((function(e){return e.uid}))}),autoReplySettings:a()({},R.autoReplySettings)}),console.log("agentObject:",b),e.next=16,(0,g.sE)(b);case 16:j=e.sent,console.log("updateAgent response:",j),200===j.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),P(j.data)):(c.yw.destroy(),c.yw.error(j.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return D=a()(a()({},W),{},{serviceSettings:a()(a()({},W.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==W||null===(M=W.serviceSettings)||void 0===M||null===(M=M.faqs)||void 0===M?void 0:M.map((function(e){return e.uid})),quickFaqUids:null==W||null===(C=W.serviceSettings)||void 0===C||null===(C=C.quickFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),guessFaqUids:null==W||null===(U=W.serviceSettings)||void 0===U||null===(U=U.guessFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),hotFaqUids:null==W||null===(I=W.serviceSettings)||void 0===I||null===(I=I.hotFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(T=W.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),robotSettings:a()(a()({},W.robotSettings),{},{robotUid:null==W||null===(O=W.robotSettings)||void 0===O||null===(O=O.robot)||void 0===O?void 0:O.uid}),leaveMsgSettings:a()(a()({},W.leaveMsgSettings),{},{worktimeUids:null==W||null===(E=W.leaveMsgSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:null==W||null===(V=W.agents)||void 0===V?void 0:V.map((function(e){return e.uid}))}),console.log("workgroupObject:",D),e.next=26,(0,f.W5)(D);case 26:B=e.sent,console.log("updateWorkGroup response:",B),200===B.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),N(B.data)):(c.yw.destroy(),c.yw.error(B.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsxs)(q.A,{form:o,onFinish:D,children:[(0,M.jsx)(y.Z,{width:"md",name:"showRightIframe",label:n.formatMessage({id:"showRightIframe"})}),(0,M.jsx)(S.Z,{width:"md",name:"rightIframeUrl",label:n.formatMessage({id:"rightIframeUrl"})})]}),(0,M.jsxs)(k.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,M.jsx)(b.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,M.jsx)(b.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},55930:function(e,t,n){n.d(t,{Z:function(){return f}});n(44194);var i=n(8247),s=n(30921),o=n(53038),r=n(76432),u=n(29897),a=n(6897),l=n(75574),d=n(79686),c=n(31549),g=(l.Z.Sider,l.Z.Content,function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{})})}),v=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{})})},f=function(e){var t=e.type,n=((0,s.useIntl)(),[{key:"whatsapp",label:"Whatsapp",children:(0,c.jsx)(u.Z,{})},{key:"telegram",label:"Telegram",children:(0,c.jsx)(r.Z,{})},{key:"facebook",label:"Facebook",children:(0,c.jsx)(g,{})},{key:"Line",label:"Line",children:(0,c.jsx)(a.Z,{})},{key:"wordpress",label:"Wordpress",children:(0,c.jsx)(v,{})}]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.Z,{type:t}),(0,c.jsx)(i.Z,{tabPosition:"left",items:n})]})}},73170:function(e,t,n){n.d(t,{Z:function(){return w}});n(44194);var i=n(8247),s=n(30921),o=n(53038),r=n(44574),u=n(10354),a=n(51103),l=n(75262),d=n(62476),c=n(15025),g=n(79686),v=n(31549),f=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(g.Z,{})})},h=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(g.Z,{})})},p=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(g.Z,{})})},m=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(g.Z,{})})},w=function(e){var t=e.type,n=(0,s.useIntl)(),g=[{key:"pdd",label:n.formatMessage({id:"channel.shop.pdd"}),children:(0,v.jsx)(r.Z,{})},{key:"jd",label:n.formatMessage({id:"channel.shop.jd"}),children:(0,v.jsx)(l.Z,{})},{key:"qianniu",label:n.formatMessage({id:"channel.shop.qianniu"}),children:(0,v.jsx)(u.Z,{})},{key:"doudian",label:n.formatMessage({id:"channel.shop.doudian"}),children:(0,v.jsx)(a.Z,{})},{key:"shopify",label:"Shopify",children:(0,v.jsx)(d.Z,{})},{key:"lazada",label:"Lazada",children:(0,v.jsx)(c.Z,{})},{key:"woocommerce",label:"Woocommerce",children:(0,v.jsx)(f,{})},{key:"opencart",label:"Opencart",children:(0,v.jsx)(h,{})},{key:"magento",label:"Magento",children:(0,v.jsx)(p,{})},{key:"prestashop",label:"Prestashop",children:(0,v.jsx)(m,{})}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Z,{type:t}),(0,v.jsx)(i.Z,{tabPosition:"left",items:g})]})}},9389:function(e,t,n){n.d(t,{Z:function(){return L}});var i=n(44194),s=n(8247),o=n(30921),r=n(11452),u=n(53038),a=n(36378),l=n(53300),d=n(21325),c=n(79176),g=n(13161),v=n(90819),f=n.n(v),h=n(73193),p=n.n(h),m=n(84176),w=n.n(m),q=n(89933),y=n.n(q),S=n(45332),x=n.n(S),F=n(5651),k=n(38775),b=n(53530),j=n(3849),M=n(75365),C=n(86803),U=n(40612),Z=n(72381),A=n(69842),I=n(55735),R=n(31549),P=["current"],T=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,R.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],W=function(e){e.type;var t=(0,o.useAccess)(),n=(0,i.useState)(!1),s=x()(n,2),r=s[0],u=s[1],a=((0,o.useIntl)(),(0,i.useRef)()),l=(0,U.u)((function(e){return e.currentOrg})),d=[].concat(T),c=function(){u(!0)};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("p",{children:"通过h5方式集成"}),(0,R.jsx)(k.Z,{}),(0,R.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(o.FormattedMessage,{id:I.h5w})}),children:[(0,R.jsxs)(b.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,R.jsx)("p",{children:"Some contents..."}),(0,R.jsx)("p",{children:"Some contents..."}),(0,R.jsx)("p",{children:"Some contents..."})]}),(0,R.jsx)(Z.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=y()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,P),o=p()({pageNumber:t.current-1,orgUid:null==l?void 0:l.uid},s),e.next=5,(0,A.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信小程序",toolBarRender:function(){return[(0,R.jsxs)(j.Z,{children:[(0,R.jsx)(M.ZP,{type:"primary",onClick:c,children:"添加微信小程序"}),(0,R.jsx)(M.ZP,{icon:(0,R.jsx)(F.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信小程序对接文档"})]})]}})]})]})},N=["current"],O=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,R.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],E=function(e){e.type;var t=(0,o.useAccess)(),n=(0,i.useState)(!1),s=x()(n,2),r=s[0],u=s[1],a=((0,o.useIntl)(),(0,i.useRef)()),l=(0,U.u)((function(e){return e.currentOrg})),d=[].concat(O),c=function(){u(!0)};return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(o.FormattedMessage,{id:I.h5w})}),children:[(0,R.jsxs)(b.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,R.jsx)("p",{children:"Some contents..."}),(0,R.jsx)("p",{children:"Some contents..."}),(0,R.jsx)("p",{children:"Some contents..."})]}),(0,R.jsx)(Z.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=y()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,N),o=p()({pageNumber:t.current-1,orgUid:null==l?void 0:l.uid},s),e.next=5,(0,A.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定企业微信",toolBarRender:function(){return[(0,R.jsxs)(j.Z,{children:[(0,R.jsx)(M.ZP,{type:"primary",onClick:c,children:"添加企业微信"}),(0,R.jsx)(M.ZP,{icon:(0,R.jsx)(F.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"企业微信对接文档"})]})]}})]})})},V=n(15722),D=n(25482),B=n(63289),G=n(40803),X=["current"],_=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,R.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"appId",defaultMessage:"AppId"}),dataIndex:"appId",copyable:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"url",defaultMessage:"Url"}),dataIndex:"url",copyable:!0,hideInSearch:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"token",defaultMessage:"Token"}),dataIndex:"token",copyable:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"encryptMode",defaultMessage:"EncryptMode"}),dataIndex:"encryptMode",copyable:!0,hideInSearch:!0,render:function(e,t){switch(t.encryptMode){case"PLAINTEXT":return(0,R.jsx)("span",{children:"明文模式"});case"COMPATIBLE":return(0,R.jsx)("span",{children:"兼容模式"});case"SAFE":return(0,R.jsx)("span",{children:"安全模式"});default:return(0,R.jsx)("span",{children:"未知"})}}},{title:(0,R.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],H=function(e){e.type;var t=(0,i.useState)(!1),n=x()(t,2),s=n[0],r=n[1],u=(0,i.useState)({}),a=x()(u,2),l=a[0],d=a[1],c=(0,i.useState)(!1),g=x()(c,2),v=g[0],h=g[1],m=(0,o.useIntl)(),q=(0,i.useRef)(),S=(0,U.u)((function(e){return e.currentOrg})),A=b.Z.useModal(),I=x()(A,2),P=I[0],T=I[1],W=[].concat(_,[{title:m.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,i){return[(0,R.jsx)("a",{onClick:function(){h(!0),d(t),r(!0)},children:m.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,R.jsx)(M.ZP,{type:"link",onClick:function(){return e=t,void P.confirm({title:m.formatMessage({id:"deleteTip"}),icon:(0,R.jsx)(V.Z,{}),content:"".concat(m.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.name,"】？"),onOk:function(){N(e)},onCancel:function(){},okText:m.formatMessage({id:"ok"}),cancelText:m.formatMessage({id:"cancel"})});var e},danger:!0,children:m.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}]),N=function(){var e=y()(f()().mark((function e(t){var n;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWechatMp:",t),e.next=3,(0,G.ul)(t);case 3:n=e.sent,console.log("deleteMember:",n),200===n.code?(C.yw.success(m.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),q.current.reload()):C.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=y()(f()().mark((function e(t){var n,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G._Z)(t);case 2:n=e.sent,console.log("handleCreateWechatMp response:",n),200===n.code?(null===(i=q.current)||void 0===i||i.reload(),r(!1)):C.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=y()(f()().mark((function e(t){var n,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=null==l?void 0:l.uid,e.next=3,(0,G.sS)(t);case 3:n=e.sent,console.log("handleUpdateWechatMp response:",n),200===n.code?(null===(i=q.current)||void 0===i||i.reload(),r(!1)):C.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){r(!0),h(!1),d({})};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("p",{children:"通过自定义菜单方式集成"}),(0,R.jsx)(k.Z,{}),(0,R.jsx)(Z.Z,{columns:W,actionRef:q,cardBordered:!0,request:function(){var e=y()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,X),o=p()({pageNumber:t.current-1,orgUid:null==S?void 0:S.uid},s),e.next=5,(0,G.aq)(o);case 5:return r=e.sent,console.log("queryWechatMpByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定公众号",toolBarRender:function(){return[(0,R.jsxs)(j.Z,{children:[(0,R.jsx)(M.ZP,{type:"primary",onClick:H,icon:(0,R.jsx)(D.Z,{}),children:"添加微信公众号"}),!1,(0,R.jsx)(M.ZP,{icon:(0,R.jsx)(F.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechatmp")},children:"微信公众号对接文档"})]})]}}),T,s&&(0,R.jsx)(B.Z,{isEdit:v,open:s,wechatmp:l,onClose:function(){r(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),v?E(e):O(e)}})]})},z=["current"],Q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,R.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,R.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],$=function(e){e.type;var t=(0,o.useAccess)(),n=(0,i.useState)(!1),s=x()(n,2),r=s[0],u=s[1],a=((0,o.useIntl)(),(0,i.useRef)()),l=(0,U.u)((function(e){return e.currentOrg})),d=[].concat(Q),c=function(){u(!0)};return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(o.FormattedMessage,{id:I.h5w})}),children:[(0,R.jsxs)(b.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,R.jsx)("p",{children:"Some contents..."}),(0,R.jsx)("p",{children:"Some contents..."}),(0,R.jsx)("p",{children:"Some contents..."})]}),(0,R.jsx)(Z.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=y()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,z),o=p()({pageNumber:t.current-1,orgUid:null==l?void 0:l.uid},s),e.next=5,(0,A.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信客服",toolBarRender:function(){return[(0,R.jsxs)(j.Z,{children:[(0,R.jsx)(M.ZP,{type:"primary",onClick:c,children:"添加微信客服"}),(0,R.jsx)(M.ZP,{icon:(0,R.jsx)(F.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信客服对接文档"})]})]}})]})})},L=function(e){var t=e.type,n=(0,o.useIntl)(),i=[{key:"wechat-mp",label:n.formatMessage({id:"channel.social.wechat.mp"}),children:(0,R.jsx)(H,{type:t})},{key:"wechat-mini",label:n.formatMessage({id:"channel.social.wechat.mini"}),children:(0,R.jsx)(W,{type:t})},{key:"wechat-com",label:n.formatMessage({id:"channel.social.wechat.work"}),children:(0,R.jsx)(E,{type:t})},{key:"wechat-kefu",label:n.formatMessage({id:"channel.social.wechat.kefu"}),children:(0,R.jsx)($,{type:t})},{key:"douyin",label:n.formatMessage({id:"channel.social.douyin"}),children:(0,R.jsx)(g.Z,{})},{key:"xiaohongshu",label:n.formatMessage({id:"channel.social.xiaohongshu"}),children:(0,R.jsx)(c.Z,{})},{key:"baidu",label:n.formatMessage({id:"channel.social.baidu"}),children:(0,R.jsx)(d.Z,{})},{key:"weibo",label:n.formatMessage({id:"channel.social.weibo"}),children:(0,R.jsx)(l.Z,{})},{key:"bili",label:n.formatMessage({id:"channel.social.bilibili"}),children:(0,R.jsx)(a.Z,{})},{key:"zhihu",label:n.formatMessage({id:"channel.social.zhihu"}),children:(0,R.jsx)(r.Z,{})}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(u.Z,{type:t}),(0,R.jsx)(s.Z,{tabPosition:"left",items:i})]})}}}]);