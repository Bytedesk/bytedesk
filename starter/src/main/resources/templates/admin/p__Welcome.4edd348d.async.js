"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185],{17208:function(e,t,s){s.d(t,{Kq:function(){return u},RL:function(){return p}});var i=s(90819),a=s.n(i),n=s(73193),r=s.n(n),o=s(89933),c=s.n(o),l=s(55735),d=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=c()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/org/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=c()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/org/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60150:function(e,t,s){s.d(t,{RU:function(){return u},xL:function(){return p}});var i=s(90819),a=s.n(i),n=s(73193),r=s.n(n),o=s(89933),c=s.n(o),l=s(55735),d=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=c()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/service/statistic/query/date",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=c()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/service/statistic/calculate",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},42987:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var i=s(90819),a=s.n(i),n=s(89933),r=s.n(n),o=s(45332),c=s.n(o),l=s(86803),d=s(17208),u=s(40612),x=s(55735),p=s(65461),f=s(30921),m=s(75574),g=s(52288),j=s(44194),h=s(53530),v=s(75365),Z=s(73193),y=s.n(Z),k=s(44781),M=s(72608),w=s(62673),b=s(3849),F=s(67402),S=s(88996),T=s(88201),O=s(5602),P=s(59485),R=s(95454),C=s(74853),U=s(38775),q=s(9452),Y=s(40269),A=s(5939),z=s(24562),E=s(61107),D=s(80556),I=s(58791),V=s(58087),B=s(54800),H=s(48004),Q=s(10022),W=s(17811),K=s(85642),N=s(34545),G=s(93689),L=s(74840),$=s(24170),_=s(72614),J=s(76750),X=s(1902),ee=s(95490),te=s(28977),se=s.n(te),ie=s(98123),ae=s(60150),ne=s(31549),re=ie.default.RangePicker,oe=k.default.Option,ce=function(){var e,t,s=(0,f.useIntl)(),i=(0,J.Z)().translateStringTranct,n=(0,j.useState)(se()().startOf("day")),o=c()(n,2),l=o[0],d=o[1],p=(0,j.useState)(se()().endOf("day")),m=c()(p,2),g=m[0],h=m[1],Z=(0,j.useState)("today"),te=c()(Z,2),ie=te[0],ce=te[1],le=(0,j.useState)(x.AOk),de=c()(le,2),ue=de[0],xe=de[1],pe=(0,j.useState)(),fe=c()(pe,2),me=fe[0],ge=fe[1],je=(0,j.useState)(),he=c()(je,2),ve=he[0],Ze=he[1],ye=(0,u.u)((function(e){return e.currentOrg})),ke=(0,X.E)((function(e){return e})),Me=ke.agentResult,we=ke.setAgentResult,be=(0,ee.$)((function(e){return e})),Fe=be.workgroupResult,Se=be.setWorkgroupResult,Te=(0,j.useState)(),Oe=c()(Te,2),Pe=(Oe[0],Oe[1]),Re=(0,j.useState)(x.OwA),Ce=c()(Re,2),Ue=Ce[0],qe=Ce[1],Ye=(0,j.useState)(!1),Ae=c()(Ye,2),ze=(Ae[0],Ae[1]),Ee=[{label:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}],De=(0,j.useState)([{time:"00:00",value:45,type:s.formatMessage({id:"statistic.data.type.human"})},{time:"00:00",value:78,type:s.formatMessage({id:"statistic.data.type.bot"})}]),Ie=c()(De,2),Ve=Ie[0],Be=(Ie[1],{data:Ve,xField:"time",yField:"value",seriesField:"type",legend:{position:"top"},smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},xAxis:{title:{text:s.formatMessage({id:"statistic.chart.axis.time"})}},yAxis:{title:{text:s.formatMessage({id:"statistic.chart.axis.count"})}}}),He={data:[{type:s.formatMessage({id:"statistic.bot.distribution.qa"}),value:458},{type:s.formatMessage({id:"statistic.bot.distribution.business"}),value:284},{type:s.formatMessage({id:"statistic.bot.distribution.query"}),value:326}],angleField:"value",colorField:"type",radius:.8,label:{type:"value",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},Qe={data:[{time:"00:00",value:12,type:s.formatMessage({id:"statistic.ticket.status.pending"})},{time:"01:00",value:15,type:s.formatMessage({id:"statistic.ticket.status.processing"})}],xField:"time",yField:"value",seriesField:"type",color:["#1890ff","#2fc25b","#facc14"],legend:{position:"top"}};(0,j.useEffect)((function(){var e=setInterval((function(){We()}),3e4);return function(){return clearInterval(e)}}),[]);var We=function(){var e=r()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=23,Ne=15,Ge=45,Le=128,$e=45,_e=4.5,Je={concurrentUsers:56,totalServed:1280,totalSessions:1560,apiCalls:25600,tokenUsage:128e3,apiResponseTime:.8,tokenCost:1580.5,kbHitRate:78.9,unknownQuestions:[{question:s.formatMessage({id:"statistic.bot.unknown.config"}),count:5},{question:s.formatMessage({id:"statistic.bot.unknown.integration"}),count:3}]},Xe=85.6,et=4.2,tt=15.4,st={totalArticles:1580,todayViews:256,hitRate:85.6,unmatchedQuestions:15,updatedToday:8,categoryDist:[{category:"产品文档",count:580},{category:"常见问题",count:420},{category:"操作指南",count:380}],recentUpdates:[{title:"新功能使用说明",time:"2024-01-23 10:30"},{title:"常见问题更新",time:"2024-01-23 09:15"}],searchKeywords:[{keyword:"配置教程",count:89},{keyword:"价格方案",count:76}]},it={data:st.categoryDist,angleField:"count",colorField:"category",radius:.8,label:{content:"{name} {percentage}"}},at=23,nt=45,rt=156,ot=3,ct={high:12,medium:28,low:35},lt=4.2,dt=15,ut=120;(0,j.useEffect)((function(){if("custom"===ie)d(l),h(g),qe(x.dd4);else{var e=se()();"today"===ie?(d(e),h(e),qe(x.OwA)):"yesterday"===ie?(d(e.subtract(1,"day")),h(e.subtract(1,"day")),qe(x.OwA)):"week"===ie?(d(e.startOf("week")),h(e.endOf("week")),qe(x.dd4)):"lastWeek"===ie?(d(e.subtract(1,"week").startOf("week")),h(e.subtract(1,"week").endOf("week")),qe(x.dd4)):"month"===ie&&(d(e.startOf("month")),h(e.endOf("month")),qe(x.dd4))}}),[ie]);var xt=function(){var e=r()(a()().mark((function e(){var t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.ZP.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==ye?void 0:ye.uid},e.next=4,(0,_.u7)(t);case 4:s=e.sent,console.log("fetchAllWorkgroups: ",s),200===s.code?(M.ZP.destroy(),Se(s),s.data.content.length>0&&Ze(s.data.content[0].uid)):(M.ZP.destroy(),M.ZP.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=r()(a()().mark((function e(){var t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.ZP.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==ye?void 0:ye.uid},e.next=4,(0,$._t)(t);case 4:s=e.sent,console.log("fetchAllAgents: ",s),200===s.code?(M.ZP.destroy(),we(s),s.data.content.length>0&&ge(s.data.content[0].uid)):(M.ZP.destroy(),M.ZP.error(i(s.message))),console.log("queryAllAgents response",s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ft=function(){var e=r()(a()().mark((function e(){var t,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ze(!0),e.prev=1,M.ZP.loading("loading"),t={type:ue,statisticStartTime:null==l?void 0:l.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==g?void 0:g.format("YYYY-MM-DD 23:59:59"),workgroupUid:ve,assigneeUid:me,orgUid:null==ye?void 0:ye.uid},e.next=6,(0,ae.RU)(t);case 6:i=e.sent,console.log("queryStatisticServicesByOrg response",i,t),200===i.code?(M.ZP.destroy(),Pe(i.data)):(M.ZP.destroy(),M.ZP.error(i.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),M.ZP.error(s.formatMessage({id:"ticket.message.operation.failed"}));case 14:return e.prev=14,ze(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=r()(a()().mark((function e(){var t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.ZP.loading("loading"),t={type:ue,statisticStartTime:null==l?void 0:l.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==g?void 0:g.format("YYYY-MM-DD 23:59:59"),workgroupUid:ve,assigneeUid:me,orgUid:null==ye?void 0:ye.uid},e.next=4,(0,ae.RU)(t);case 4:s=e.sent,console.log("queryStatisticServicesByOrg response",s,t),200===s.code?M.ZP.destroy():(M.ZP.destroy(),M.ZP.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.useEffect)((function(){xt(),pt()}),[]),(0,j.useEffect)((function(){ft()}),[ue,me,ve]),(0,j.useEffect)((function(){mt()}),[Ue,ue,me,ve]),(0,j.useEffect)((function(){ft()}),[l,g]),(0,ne.jsxs)("div",{style:{padding:16},children:[(0,ne.jsx)(w.Z,{style:{marginBottom:16},children:(0,ne.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},children:[(0,ne.jsxs)(b.Z,{wrap:!0,children:[(0,ne.jsx)(F.ZP.Group,{value:ie,onChange:function(e){return ce(e.target.value)},children:Ee.map((function(e){return(0,ne.jsx)(F.ZP.Button,{value:e.value,children:e.label},e.value)}))}),"custom"===ie&&(0,ne.jsx)(re,{value:[l,g],onChange:function(e){d(e[0]),h(e[1])}})]}),(0,ne.jsxs)(b.Z,{wrap:!0,children:[(0,ne.jsxs)(k.default,{placeholder:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.type"}),style:{width:200},value:ue,onChange:function(e){return xe(e)},children:[(0,ne.jsx)(oe,{value:x.AOk,children:(0,ne.jsx)(f.FormattedMessage,{id:"i18n.all"})}),(0,ne.jsx)(oe,{value:x.pHh,children:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.agent"})}),(0,ne.jsx)(oe,{value:x.ti4,children:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.workgroup"})})]}),ue===x.pHh&&(0,ne.jsx)(k.default,{placeholder:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.agent"}),style:{width:200},value:me,onChange:function(e){return ge(e)},children:null===(e=Me.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(e){return(0,ne.jsx)(oe,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),ue===x.ti4&&(0,ne.jsx)(k.default,{placeholder:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.department"}),style:{width:200},value:ve,onChange:function(e){return Ze(e)},children:null===(t=Fe.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return(0,ne.jsx)(oe,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),(0,ne.jsx)(S.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.export"}),children:(0,ne.jsx)(v.ZP,{icon:(0,ne.jsx)(E.Z,{}),onClick:function(){M.ZP.warning("TODO: 待实现")},children:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.export"})})}),(0,ne.jsx)(S.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.refresh"}),children:(0,ne.jsx)(v.ZP,{icon:(0,ne.jsx)(D.Z,{}),onClick:function(){return ft()},children:(0,ne.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.refresh"})})}),!1]})]})}),(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsxs)(w.Z,{children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(I.Z,{}),(0,ne.jsx)(f.FormattedMessage,{id:"statistic.today.total.sessions"})]}),value:Le+Je.totalSessions,suffix:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.unit.sessions"}),valueStyle:{color:"#1890ff"}}),(0,ne.jsx)("div",{style:{marginTop:8},children:(0,ne.jsx)(R.Z,{percent:Math.round(Je.totalSessions/(Le+Je.totalSessions)*100),size:"small",format:function(e){return s.formatMessage({id:"statistic.bot.ratio.format"},{percent:e})}})})]})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsxs)(w.Z,{children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(V.Z,{}),(0,ne.jsx)(f.FormattedMessage,{id:"statistic.today.bot.resolveRate"})]}),value:Xe,suffix:"%",valueStyle:{color:Xe>=80?"#3f8600":"#cf1322"}}),(0,ne.jsx)("div",{style:{marginTop:8},children:(0,ne.jsx)(R.Z,{percent:Xe,size:"small",status:Xe>=80?"success":"exception"})})]})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsxs)(w.Z,{children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(B.Z,{}),(0,ne.jsx)(f.FormattedMessage,{id:"statistic.today.satisfaction"})]}),value:_e,suffix:"/5",valueStyle:{color:_e>=4?"#3f8600":"#cf1322"}}),(0,ne.jsx)(C.Z,{disabled:!0,defaultValue:Math.round(_e),style:{marginTop:8}})]})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsxs)(w.Z,{children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(H.Z,{}),(0,ne.jsx)(f.FormattedMessage,{id:"statistic.today.avgResponseTime"})]}),value:$e,suffix:"s",valueStyle:{color:$e<=30?"#3f8600":"#cf1322"}}),(0,ne.jsx)(R.Z,{percent:100-$e/60*100,size:"small",status:$e<=30?"success":"exception",style:{marginTop:8}})]})})]}),(0,ne.jsx)(w.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.realtime.monitor"}),style:{marginTop:16},children:(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:12,children:(0,ne.jsxs)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.human.status"}),children:[(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.human.online"}),value:Ne,prefix:(0,ne.jsx)(Q.Z,{style:{color:"#52c41a"}})})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.human.queue"}),value:Ke,prefix:(0,ne.jsx)(I.Z,{style:{color:Ke>10?"#f5222d":"#1890ff"}})})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.service.serving"}),value:Ge,prefix:(0,ne.jsx)(B.Z,{})})})]}),(0,ne.jsx)(U.Z,{style:{margin:"12px 0"}}),(0,ne.jsx)("div",{style:{height:200},children:(0,ne.jsx)(A.Z,y()({},Be))})]})}),(0,ne.jsx)(O.Z,{span:12,children:(0,ne.jsxs)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.bot.status"}),children:[(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.concurrent"},{count:Je.concurrentUsers}),value:Je.concurrentUsers})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.served"},{count:Je.totalServed}),value:Je.totalServed})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.sessions"},{count:Je.totalSessions}),value:Je.totalSessions})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.api.calls"},{count:Je.apiCalls}),value:Je.apiCalls})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.token.usage"},{count:Je.tokenUsage}),value:Je.tokenUsage})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.api.response"},{time:Je.apiResponseTime}),value:Je.apiResponseTime})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.token.cost"},{cost:Je.tokenCost}),value:Je.tokenCost})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:s.formatMessage({id:"statistic.bot.status.kb.hitrate"},{rate:Je.kbHitRate}),value:Je.kbHitRate})})]}),(0,ne.jsx)(U.Z,{style:{margin:"12px 0"}}),(0,ne.jsx)("div",{style:{height:200},children:(0,ne.jsx)(z.Z,y()({},He))})]})})]})}),(0,ne.jsxs)(w.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.title"}),style:{marginTop:16},children:[(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.total"}),value:st.totalArticles,prefix:(0,ne.jsx)(W.Z,{})})}),(0,ne.jsxs)(O.Z,{span:6,children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.hitRate"}),value:st.hitRate,suffix:"%",valueStyle:{color:st.hitRate>=80?"#3f8600":"#cf1322"}}),(0,ne.jsx)(R.Z,{percent:st.hitRate,size:"small"})]}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.unmatched"}),value:st.unmatchedQuestions,valueStyle:{color:st.unmatchedQuestions>20?"#cf1322":"#3f8600"}})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.updated"}),value:st.updatedToday,suffix:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.unit.articles"})})})]}),(0,ne.jsx)(T.Z,{style:{marginTop:16},children:(0,ne.jsx)(O.Z,{span:24,children:(0,ne.jsx)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.category"}),children:(0,ne.jsx)(z.Z,y()({},it))})})}),(0,ne.jsx)(T.Z,{style:{marginTop:16},children:(0,ne.jsx)(O.Z,{span:24,children:(0,ne.jsx)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.knowledge.recent"}),children:(0,ne.jsx)(q.Z,{size:"small",dataSource:st.recentUpdates,renderItem:function(e){return(0,ne.jsx)(q.Z.Item,{extra:e.time,children:e.title})}})})})})]}),(0,ne.jsxs)(w.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.overview"}),style:{marginTop:16},children:[(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsxs)(w.Z,{type:"inner",children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.pending"}),value:at,valueStyle:{color:at>20?"#f5222d":"#1890ff"},prefix:(0,ne.jsx)(K.Z,{})}),(0,ne.jsx)(R.Z,{percent:at/(at+nt+rt)*100,size:"small",status:at>20?"exception":"active"})]})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(w.Z,{type:"inner",children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.processing"}),value:nt,prefix:(0,ne.jsx)(N.Z,{spin:!0}),valueStyle:{color:"#1890ff"}})})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(w.Z,{type:"inner",children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.completed"}),value:rt,prefix:(0,ne.jsx)(G.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(w.Z,{type:"inner",children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.timeout"}),value:ot,prefix:(0,ne.jsx)(H.Z,{}),valueStyle:{color:ot>0?"#f5222d":"#52c41a"}})})})]}),(0,ne.jsxs)(T.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.priority"}),children:(0,ne.jsxs)(T.Z,{gutter:[8,8],children:[(0,ne.jsxs)(O.Z,{span:8,children:[(0,ne.jsx)(Y.Z,{color:"red",text:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.priority.high"})}),(0,ne.jsx)("div",{children:ct.high})]}),(0,ne.jsxs)(O.Z,{span:8,children:[(0,ne.jsx)(Y.Z,{color:"orange",text:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.priority.medium"})}),(0,ne.jsx)("div",{children:ct.medium})]}),(0,ne.jsxs)(O.Z,{span:8,children:[(0,ne.jsx)(Y.Z,{color:"blue",text:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.priority.low"})}),(0,ne.jsx)("div",{children:ct.low})]})]})})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsxs)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.response"}),children:[(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.firstResponseTime"}),value:dt,suffix:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.unit.minutes"}),valueStyle:{color:dt<=30?"#52c41a":"#f5222d"}}),(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.resolveTime"}),value:ut,suffix:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.unit.minutes"}),style:{marginTop:8}})]})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsxs)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.satisfaction"}),children:[(0,ne.jsx)(P.Z,{value:lt,suffix:"/5",precision:1}),(0,ne.jsx)(C.Z,{disabled:!0,value:Math.round(lt),style:{marginTop:8}})]})})]}),(0,ne.jsx)(T.Z,{style:{marginTop:16},children:(0,ne.jsx)(O.Z,{span:24,children:(0,ne.jsx)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.ticket.trend"}),children:(0,ne.jsx)(A.Z,y()({},Qe))})})})]}),(0,ne.jsx)(w.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.bot.unknown.title"}),style:{marginTop:16},children:(0,ne.jsx)(q.Z,{header:(0,ne.jsx)("div",{children:s.formatMessage({id:"statistic.bot.unknown.title"})}),dataSource:Je.unknownQuestions,renderItem:function(e){return(0,ne.jsxs)(q.Z.Item,{children:[(0,ne.jsx)("span",{children:e.question}),(0,ne.jsx)("span",{children:e.count})]})}})}),(0,ne.jsx)(O.Z,{span:6,children:(0,ne.jsx)(w.Z,{children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.service.ratio"}),value:92,suffix:s.formatMessage({id:"statistic.service.percentage"},{value:92}),valueStyle:{color:"#3f8600"}})})}),(0,ne.jsx)(w.Z,{type:"inner",title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.bot.performance.title"}),children:(0,ne.jsxs)(T.Z,{gutter:[16,16],children:[(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.bot.performance.resolve"}),value:Xe,suffix:s.formatMessage({id:"statistic.service.percentage"},{value:Xe}),prefix:(0,ne.jsx)(G.Z,{style:{color:"#52c41a"}})})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.bot.performance.transfer"}),value:tt,suffix:s.formatMessage({id:"statistic.service.percentage"},{value:tt}),prefix:(0,ne.jsx)(N.Z,{style:{color:"#faad14"}})})}),(0,ne.jsx)(O.Z,{span:8,children:(0,ne.jsx)(P.Z,{title:(0,ne.jsx)(f.FormattedMessage,{id:"statistic.bot.performance.satisfaction"}),value:et,suffix:"/5",prefix:(0,ne.jsx)(L.Z,{style:{color:"#1890ff"}})})})]})})]})},le=(m.Z.Content,function(){var e=(0,f.useIntl)(),t=(0,f.useNavigate)(),s=((0,f.useModel)("@@initialState").initialState||{}).userInfo,i=(0,u.u)((function(e){return e.setCurrentOrg})),n=(0,j.useState)(!1),o=c()(n,2),m=o[0],Z=o[1],y=(0,j.useState)(""),k=c()(y,2),M=k[0],w=k[1],b=(0,j.useState)(!1),F=c()(b,2),S=F[0],T=F[1],O=(0,j.useState)(!1),P=c()(O,2),R=P[0],C=P[1],U=function(){var e=r()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=s){e.next=2;break}return e.abrupt("return");case 2:if(null!==(null==s?void 0:s.currentOrganization)&&void 0!==(null==s?void 0:s.currentOrganization)){e.next=6;break}return console.log("before initOrganization",s),(null==s?void 0:s.platform)===x.Ogg&&C(!0),e.abrupt("return");case 6:console.log("after initOrganization"),i(null==s?void 0:s.currentOrganization);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var t=r()(a()().mark((function t(){var n,r,o;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==M){t.next=3;break}return l.yw.error(e.formatMessage({id:"welcome.message.org.name.required"})),t.abrupt("return");case 3:return Z(!0),l.yw.loading(e.formatMessage({id:"welcome.message.org.creating"})),n=null!=s&&s.mobile?null==s?void 0:s.mobile:null==s?void 0:s.email,r={name:M,code:n,logo:"https://www.weiyuai.cn/logo.png",description:M+"description"},t.prev=7,t.next=10,(0,d.Kq)(r);case 10:200===(o=t.sent).code?(Z(!1),i(o.data),l.yw.destroy(),l.yw.success(e.formatMessage({id:"welcome.message.create.success"})),C(!1),window.location.reload()):(Z(!1),l.yw.destroy(),l.yw.error(e.formatMessage({id:"welcome.message.create.failed"}))),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(7),Z(!1),l.yw.destroy(),l.yw.error(e.formatMessage({id:"welcome.message.create.failed"}));case 19:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(){return t.apply(this,arguments)}}();return(0,j.useEffect)((function(){U(),null!=s&&s.emailVerified||null!=s&&s.mobileVerified||(l.yw.warning(e.formatMessage({id:"welcome.message.verify.email"})),l.yw.warning(e.formatMessage({id:"welcome.message.verify.mobile"})),t("/account/certification")),(0,p.Bc)()&&console.log("weiyuaiSaas")}),[s]),(0,ne.jsxs)("div",{children:[(0,ne.jsx)(ce,{}),(0,ne.jsxs)(h.Z,{title:e.formatMessage({id:"welcome.modal.title"}),closable:!1,open:R,onOk:q,onCancel:function(){l.yw.error(e.formatMessage({id:"welcome.message.org.required"}))},maskClosable:!1,footer:[(0,ne.jsx)(v.ZP,{type:"primary",onClick:function(){C(!1)},disabled:!0,children:e.formatMessage({id:"welcome.modal.join"})},"join"),(0,ne.jsx)(v.ZP,{type:"primary",loading:m,onClick:function(){S?q():(T(!0),Z(!1))},children:e.formatMessage({id:"welcome.modal.create"})},"create")],children:[(0,ne.jsx)("p",{children:e.formatMessage({id:"welcome.modal.description"})}),S&&(0,ne.jsx)(g.Z,{placeholder:e.formatMessage({id:"welcome.modal.input.placeholder"}),value:M,onChange:function(e){return w(e.target.value)},onPressEnter:q})]})]})})}}]);