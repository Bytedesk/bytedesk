"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5522],{7420:function(U,C,e){e.d(C,{$T:function(){return p},A:function(){return x},Hf:function(){return l},P6:function(){return T},gx:function(){return u}});var E=e(15009),n=e.n(E),i=e(97857),r=e.n(i),f=e(99289),s=e.n(f),m=e(85615),o=e(86745);function u(a){return v.apply(this,arguments)}function v(){return v=s()(n()().mark(function a(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/v1/course/query/org",{method:"GET",params:r()(r()({},c),{},{client:m.bV})}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function p(a){return h.apply(this,arguments)}function h(){return h=s()(n()().mark(function a(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/v1/course/query/user",{method:"GET",params:r()(r()({},c),{},{client:m.bV})}));case 1:case"end":return t.stop()}},a)})),h.apply(this,arguments)}function T(a){return S.apply(this,arguments)}function S(){return S=s()(n()().mark(function a(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/v1/course/create",{method:"POST",data:r()(r()({},c),{},{client:m.bV})}));case 1:case"end":return t.stop()}},a)})),S.apply(this,arguments)}function l(a){return P.apply(this,arguments)}function P(){return P=s()(n()().mark(function a(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/v1/course/update",{method:"POST",data:r()(r()({},c),{},{client:m.bV})}));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function x(a){return O.apply(this,arguments)}function O(){return O=s()(n()().mark(function a(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/v1/course/delete",{method:"POST",data:r()(r()({},c),{},{client:m.bV})}));case 1:case"end":return t.stop()}},a)})),O.apply(this,arguments)}function $(a){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function a(c){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/course/filter",{method:"GET",params:_objectSpread(_objectSpread({},c),{},{client:HTTP_CLIENT})}));case 1:case"end":return t.stop()}},a)})),j.apply(this,arguments)}},77154:function(U,C,e){var E=e(39825);function n(){var i=(0,E.Z)(),r=i.isDarkMode,f=250,s={borderRight:r?"1px solid #333":"1px solid #ccc",background:r?"#141414":"#f5f5f5"},m={background:r?"#141414":"#fff"},o={borderLeft:r?"1px solid #333":"1px solid #ccc",background:r?"#141414":"#f5f5f5"},u={minHeight:120,background:r?"#141414":"#f5f5f5"};return{leftSiderStyle:s,leftSiderWidth:f,headerStyle:m,rightSiderStyle:o,contentStyle:u}}C.Z=n},53363:function(U,C,e){e.r(C),e.d(C,{default:function(){return c}});var E=e(77154),n=e(21612),i=e(67294),r=e(15009),f=e.n(r),s=e(99289),m=e.n(s),o=e(5574),u=e.n(o),v=e(80049),p=e(7420),h=e(89333),T=e(60247),S=e(53719),l=e(85893),P=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u5C01\u9762",dataIndex:"cover",render:function(t,d){return(0,l.jsx)("a",{href:d.cover,target:"_blank",children:(0,l.jsx)("img",{src:d.cover,width:"40",height:"40"})})}},{title:(0,l.jsx)(FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"name",copyable:!0},{title:(0,l.jsx)(FormattedMessage,{id:"category",defaultMessage:"Category"}),key:"category",render:function(t,d){return"\u5206\u7C7B"}},{title:"\u53D1\u5E03\u4EBA",copyable:!0,editable:!1,renderText:function(t,d,L,I){var M;return(M=d.user)===null||M===void 0?void 0:M.nickname}},{title:(0,l.jsx)(FormattedMessage,{id:"status",defaultMessage:"Status"}),key:"published",render:function(t,d){return d.published?"\u5DF2\u53D1\u5E03":"\u672A\u53D1\u5E03"}},{title:(0,l.jsx)(FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",editable:!1,sorter:!0,hideInSearch:!0},{title:intl.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(t,d,L,I){return[(0,l.jsx)("a",{onClick:function(){console.log("edit record:",d)},children:"\u4FEE\u6539"},"editable")]}}],x=function(){var t=(0,T.L)(function(y){return y.userInfo}),d=(0,i.useRef)(),L=(0,i.useState)(1),I=u()(L,2),M=I[0],G=I[1],Z=(0,i.useState)(10),K=u()(Z,2),W=K[0],F=K[1],k=(0,h.K)(function(y){return{courseResult:y.courseResult,setCourseResult:y.setCourseResult}}),A=k.courseResult,V=k.setCourseResult,w=function(){var y=m()(f()().mark(function D(){var b,R;return f()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(b={pageNumber:M-1,pageSize:W},!t.superUser){_.next=7;break}return _.next=4,(0,p.gx)(b);case 4:_.t0=_.sent,_.next=10;break;case 7:return _.next=9,(0,p.$T)(b);case 9:_.t0=_.sent;case 10:R=_.t0,console.log("getAllCourses response:",b,R),R.code===200?V(R):v.yw.error(R.message);case 13:case"end":return _.stop()}},D)}));return function(){return y.apply(this,arguments)}}();return(0,i.useEffect)(function(){w()},[]),(0,i.useEffect)(function(){w()},[M,W]),(0,i.useEffect)(function(){console.log("courseResult:",A),d.current.reload()},[A]),(0,l.jsx)(S.Z,{columns:P,actionRef:d,cardBordered:!0,request:function(){var y=m()(f()().mark(function D(b,R,z){return f()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return console.log("request:",b,R,z),G(b.current),F(b.pageSize),B.abrupt("return",Promise.resolve({data:A.data.content,success:!0,total:A.data.totalElements}));case 4:case"end":return B.stop()}},D)}));return function(D,b,R){return y.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:W,showQuickJumper:!0,onChange:function(D){console.log("page:",D)}},dateFormatter:"string",headerTitle:"\u7BA1\u7406\u7C7B\u522B",toolBarRender:function(){return[]}})},O=x,$=n.Z.Sider,j=n.Z.Content,a=function(){var t=(0,E.Z)(),d=t.contentStyle;return(0,l.jsx)(n.Z,{children:(0,l.jsx)(n.Z,{children:(0,l.jsx)(j,{style:d,children:(0,l.jsx)(O,{})})})})},c=a},89333:function(U,C,e){e.d(C,{K:function(){return f}});var E=e(85615),n=e(73445),i=e(782),r=e(71381),f=(0,n.Ue)()((0,i.mW)((0,i.tJ)((0,r.n)(function(s,m){return{courseResult:{data:{content:[]}},insertCourseResult:function(u){s(function(v){var p=v.courseResult.data.content;p.unshift(u)})},updateCourseResult:function(u){s(function(v){var p=v.courseResult.data.content,h=p.findIndex(function(T){return T.uid===u.uid});h!==-1?p[h]=u:console.warn("Course with uid ".concat(u.uid," not found."))})},deleteCourseResult:function(u){s(function(v){var p=v.courseResult.data.content,h=p.findIndex(function(T){return T.uid===u.uid});h!==-1?p.splice(h,1):console.warn("Course with uid ".concat(u.uid," not found."))})},setCourseResult:function(u){s({courseResult:u})},deleteCourseCache:function(){return s({},!0)}}}),{name:E.vC})))},60247:function(U,C,e){e.d(C,{L:function(){return f}});var E=e(85615),n=e(73445),i=e(782),r=e(71381),f=(0,n.Ue)()((0,i.mW)((0,i.tJ)((0,r.n)(function(s,m){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(u){s({userInfo:u})},setDeviceUid:function(u){s({deviceUid:u})},deleteUserInfo:function(){return s({},!0)}}}),{name:E.Em})))}}]);
