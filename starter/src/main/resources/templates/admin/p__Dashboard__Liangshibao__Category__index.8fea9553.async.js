"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5522],{91831:function(e,t,n){n.d(t,{$T:function(){return p},A:function(){return y},Hf:function(){return v},P6:function(){return g},gx:function(){return f}});var r=n(90228),u=n.n(r),o=n(26068),a=n.n(o),s=n(87999),c=n.n(s),i=n(64453),d=n(45234);function f(e){return l.apply(this,arguments)}function l(){return(l=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/query/org",{method:"GET",params:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/query/user",{method:"GET",params:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return(x=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/create",{method:"POST",data:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/update",{method:"POST",data:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/delete",{method:"POST",data:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7571:function(e,t,n){var r=n(94414);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},44184:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(7571),u=n(16242),o=n(75271),a=n(90228),s=n.n(a),c=n(87999),i=n.n(c),d=n(48305),f=n.n(d),l=n(37240),p=n(91831),h=n(27234),g=n(65453),x=n(15161),v=n(52676),m=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"封面",dataIndex:"cover",render:function(e,t){return(0,v.jsx)("a",{href:t.cover,target:"_blank",children:(0,v.jsx)("img",{src:t.cover,width:"40",height:"40"})})}},{title:(0,v.jsx)(FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"name",copyable:!0},{title:(0,v.jsx)(FormattedMessage,{id:"category",defaultMessage:"Category"}),key:"category",render:function(e,t){return"分类"}},{title:"发布人",copyable:!0,editable:!1,renderText:function(e,t,n,r){var u;return null===(u=t.user)||void 0===u?void 0:u.nickname}},{title:(0,v.jsx)(FormattedMessage,{id:"status",defaultMessage:"Status"}),key:"published",render:function(e,t){return t.published?"已发布":"未发布"}},{title:(0,v.jsx)(FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",editable:!1,sorter:!0,hideInSearch:!0},{title:intl.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,r){return[(0,v.jsx)("a",{onClick:function(){console.log("edit record:",t)},children:"修改"},"editable")]}}],y=function(){var e=(0,g.L)((function(e){return e.userInfo})),t=(0,o.useRef)(),n=(0,o.useState)(1),r=f()(n,2),u=r[0],a=r[1],c=(0,o.useState)(10),d=f()(c,2),y=d[0],b=d[1],k=(0,h.K)((function(e){return{courseResult:e.courseResult,setCourseResult:e.setCourseResult}})),w=k.courseResult,R=k.setCourseResult,C=function(){var t=i()(s()().mark((function t(){var n,r;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={pageNumber:u-1,pageSize:y},!e.superUser){t.next=7;break}return t.next=4,(0,p.gx)(n);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,(0,p.$T)(n);case 9:t.t0=t.sent;case 10:r=t.t0,console.log("getAllCourses response:",n,r),200===r.code?R(r):l.yw.error(r.message);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){C()}),[]),(0,o.useEffect)((function(){C()}),[u,y]),(0,o.useEffect)((function(){console.log("courseResult:",w),t.current.reload()}),[w]),(0,v.jsx)(x.Z,{columns:m,actionRef:t,cardBordered:!0,request:function(){var e=i()(s()().mark((function e(t,n,r){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,r),a(t.current),b(t.pageSize),e.abrupt("return",Promise.resolve({data:w.data.content,success:!0,total:w.data.totalElements}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:y,showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"管理类别",toolBarRender:function(){return[]}})},b=(u.Z.Sider,u.Z.Content),k=function(){var e=(0,r.Z)().contentStyle;return(0,v.jsx)(u.Z,{children:(0,v.jsx)(u.Z,{children:(0,v.jsx)(b,{style:e,children:(0,v.jsx)(y,{})})})})}},27234:function(e,t,n){n.d(t,{K:function(){return s}});var r=n(64453),u=n(79475),o=n(11811),a=n(15226),s=(0,u.Ue)()((0,o.mW)((0,o.tJ)((0,a.n)((function(e,t){return{courseResult:{data:{content:[]}},insertCourseResult:function(t){e((function(e){e.courseResult.data.content.unshift(t)}))},updateCourseResult:function(t){e((function(e){var n=e.courseResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:console.warn("Course with uid ".concat(t.uid," not found."))}))},deleteCourseResult:function(t){e((function(e){var n=e.courseResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n.splice(r,1):console.warn("Course with uid ".concat(t.uid," not found."))}))},setCourseResult:function(t){e({courseResult:t})},deleteCourseCache:function(){return e({},!0)}}})),{name:r.vCH})))}}]);