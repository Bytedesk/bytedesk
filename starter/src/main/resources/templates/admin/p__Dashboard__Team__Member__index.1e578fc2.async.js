"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[960],{64789:function(X,x,e){e.d(x,{Z:function(){return I}});var h=e(1413),i=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},_=P,s=e(89099),w=function($,B){return i.createElement(s.Z,(0,h.Z)((0,h.Z)({},$),{},{ref:B,icon:_}))},c=i.forwardRef(w),I=c},51042:function(X,x,e){var h=e(1413),i=e(67294),P=e(42110),_=e(89099),s=function(I,D){return i.createElement(_.Z,(0,h.Z)((0,h.Z)({},I),{},{ref:D,icon:P.Z}))},w=i.forwardRef(s);x.Z=w},24172:function(X,x,e){e.d(x,{Kq:function(){return I},tn:function(){return j}});var h=e(97857),i=e.n(h),P=e(15009),_=e.n(P),s=e(99289),w=e.n(s),c=e(86745);function I(C){return D.apply(this,arguments)}function D(){return D=w()(_()().mark(function C(A){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,c.request)("/api/org",{method:"POST",data:{nickname:A,client:"web"}}));case 1:case"end":return f.stop()}},C)})),D.apply(this,arguments)}function $(C){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function C(A){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request("/api/v1/org/query",{method:"GET",params:_objectSpread(_objectSpread({},A),{},{client:"web"})}));case 1:case"end":return f.stop()}},C)})),B.apply(this,arguments)}function j(C){return T.apply(this,arguments)}function T(){return T=w()(_()().mark(function C(A){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,c.request)("/api/v1/org/uid",{method:"GET",params:{uid:A,client:"web"}}));case 1:case"end":return f.stop()}},C)})),T.apply(this,arguments)}},77154:function(X,x,e){var h=e(39825);function i(){var P=(0,h.Z)(),_=P.isDarkMode,s={borderRight:_?"1px solid #333":"1px solid #ccc",background:_?"#141414":"#eee",width:260},w={background:_?"#141414":"#fff"},c={borderLeft:_?"1px solid #333":"1px solid #ccc",background:_?"#141414":"#eee"},I={minHeight:120};return{leftSiderStyle:s,headerStyle:w,rightSiderStyle:c,contentStyle:I}}x.Z=i},95708:function(X,x,e){e.r(x),e.d(x,{default:function(){return ze}});var h=e(21612),i=e(67294),P=e(77154),_=e(15009),s=e.n(_),w=e(99289),c=e.n(w),I=e(5574),D=e.n(I),$=e(80049),B=e(97857),j=e.n(B),T=e(86745);function C(m){return A.apply(this,arguments)}function A(){return A=c()(s()().mark(function m(g){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,T.request)("/api/v1/mem/all",{method:"GET",params:j()(j()({},g),{},{client:"web"})}));case 1:case"end":return r.stop()}},m)})),A.apply(this,arguments)}function G(m){return f.apply(this,arguments)}function f(){return f=c()(s()().mark(function m(g){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,T.request)("/api/v1/mem/query",{method:"GET",params:j()(j()({},g),{},{client:"web"})}));case 1:case"end":return r.stop()}},m)})),f.apply(this,arguments)}function k(m){return se.apply(this,arguments)}function se(){return se=_asyncToGenerator(_regeneratorRuntime().mark(function m(g){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/mem/create",{method:"POST",data:_objectSpread(_objectSpread({},g),{},{client:"web"})}));case 1:case"end":return r.stop()}},m)})),se.apply(this,arguments)}var ge=e(64529),Y=e(782),ve=e(71381),he=(0,ge.Ue)()((0,Y.mW)((0,Y.tJ)((0,ve.n)(function(m,g){return{currentDep:{uid:"",name:""},departments:[],createDep:function(){var v=c()(s()().mark(function E(H){return s()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:case"end":return U.stop()}},E)}));function r(E){return v.apply(this,arguments)}return r}(),setCurrentDepUid:function(r){var E=g().departments.find(function(H){return H.uid===r});E&&m({currentDep:E})},setDepartments:function(r){m({departments:r})},deleteDepartmentCache:function(){return m({},!0)}}}),{name:"DEPARTMENT_STORE"}))),Ce=(0,ge.Ue)()((0,Y.mW)((0,Y.tJ)((0,ve.n)(function(m,g){return{memberResult:{data:[]},createMem:function(){var v=c()(s()().mark(function E(H){return s()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:case"end":return U.stop()}},E)}));function r(E){return v.apply(this,arguments)}return r}(),setMemberResult:function(r){m({memberResult:r})},deleteMemberCache:function(){return m({},!0)}}}),{name:"MEMBER_STORE"}))),Oe=e(87676),le=e(66419),a=e(51042),u=e(22185),n=e(8232),l=e(85576),S=e(64631),L=e(96365),ue=e(14726),t=e(85893),xe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u59D3\u540D",dataIndex:"nickname"},{title:"\u5DE5\u53F7",dataIndex:"jobNo"},{title:"\u90AE\u7BB1",dataIndex:"email"},{title:"\u5EA7\u673A",dataIndex:"telephone"},{title:"\u5EA7\u4F4D\u53F7",dataIndex:"seatNo"},{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(g,v,r,E){return[(0,t.jsx)("a",{onClick:function(){console.log("editable:",v),$.yw.info("TODO: \u7F16\u8F91")},children:"\u7F16\u8F91"},"editable")]}}],ie=function(){var g=(0,i.useRef)(),v=n.Z.useForm(),r=D()(v,1),E=r[0],H=(0,i.useState)(!1),q=D()(H,2),U=q[0],me=q[1],_e=(0,i.useState)(!1),de=D()(_e,2),De=de[0],ye=de[1],ee=(0,i.useState)(1),te=D()(ee,2),z=te[0],Fe=te[1],be=(0,i.useState)(10),Ee=D()(be,2),re=Ee[0],$e=Ee[1],Be=(0,Oe.u)(function(p){return p.orgCurrent}),Se=he(function(p){return{currentDep:p.currentDep,departments:p.departments}}),W=Se.currentDep,pe=Se.departments,je=Ce(function(p){return{memberResult:p.memberResult,setMemberResult:p.setMemberResult}}),ne=je.memberResult,Me=je.setMemberResult,d=(0,i.useMemo)(function(){for(var p=[],b=0;b<pe.length;b++){var M={title:"",value:"",children:[]};(0,le.bM)(pe[b],M),p.push(M)}return p},[pe]),o=function(){var p=c()(s()().mark(function b(){var M,O;return s()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return M={pageNumber:z-1,pageSize:re,orgUid:Be.uid},V.next=3,C(M);case 3:O=V.sent,console.log("queryAllMembers:",M,O),Me(O);case 6:case"end":return V.stop()}},b)}));return function(){return p.apply(this,arguments)}}(),y=function(){var p=c()(s()().mark(function b(M){var O,J;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return O={pageNumber:z-1,pageSize:re,depUid:W.uid},F.next=3,G(O);case 3:J=F.sent,console.log("getDepartMembers:",O,J),Me(J);case 6:case"end":return F.stop()}},b)}));return function(M){return p.apply(this,arguments)}}();(0,i.useEffect)(function(){o()},[]),(0,i.useEffect)(function(){o()},[z,re]),(0,i.useEffect)(function(){console.log("memberResult:",ne),g.current.reload()},[ne]),(0,i.useEffect)(function(){console.log("currentDepDid:",W),ye(!0),y(W.uid)},[W]);var R=function(){me(!0)},ae=function(){var p=c()(s()().mark(function b(){var M,O,J,V,F,We,Ge,Ve;return s()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(M=E.getFieldValue("jobNo"),O=E.getFieldValue("nickname"),J=E.getFieldValue("seatNo"),V=E.getFieldValue("telephone"),F=E.getFieldValue("mobile"),We=E.getFieldValue("email"),Ge=W.uid,console.log("nickname",O),W.uid!==""){fe.next=11;break}return $.yw.error("please choose a department"),fe.abrupt("return");case 11:O?(Ve={jobNo:M,nickname:O,seatNo:J,telephone:V,mobile:F,email:We,depDid:Ge},me(!1)):$.yw.error("name should not be null");case 12:case"end":return fe.stop()}},b)}));return function(){return p.apply(this,arguments)}}(),Z=function(){me(!1)},Ne=function(){console.log("new mem"),R()},Q=function(b){console.log("onTreeSelectChange:",b)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{title:"\u6DFB\u52A0\u6210\u5458",open:U,onOk:ae,onCancel:Z,children:(0,t.jsxs)(n.Z,{form:E,name:"memForm",initialValues:{dep_did:W.uid},children:[(0,t.jsx)(n.Z.Item,{label:"\u90E8\u95E8",name:"dep_did",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u90E8\u95E8!"}],children:(0,t.jsx)(S.Z,{showSearch:!0,style:{width:"100%"},value:W.uid,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",allowClear:!0,treeDefaultExpandAll:!0,onChange:Q,treeData:d})}),(0,t.jsx)(n.Z.Item,{label:"\u59D3\u540D",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D!"}],children:(0,t.jsx)(L.Z,{})}),(0,t.jsx)(n.Z.Item,{label:"\u624B\u673A\u53F7",name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7!"}],children:(0,t.jsx)(L.Z,{})}),(0,t.jsx)(n.Z.Item,{label:"\u5DE5\u53F7",name:"jobNo",rules:[{required:!1,message:"\u8BF7\u8F93\u5165\u5DE5\u53F7!"}],children:(0,t.jsx)(L.Z,{})}),(0,t.jsx)(n.Z.Item,{label:"\u5EA7\u4F4D\u53F7",name:"seatNo",rules:[{required:!1,message:"\u8BF7\u8F93\u5165\u5EA7\u4F4D\u53F7!"}],children:(0,t.jsx)(L.Z,{})}),(0,t.jsx)(n.Z.Item,{label:"\u5206\u673A\u53F7",name:"telephone",rules:[{required:!1,message:"\u8BF7\u8F93\u5165\u5206\u673A\u53F7!"}],children:(0,t.jsx)(L.Z,{})}),(0,t.jsx)(n.Z.Item,{label:"\u90AE\u7BB1",name:"email",rules:[{required:!1,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"}],children:(0,t.jsx)(L.Z,{})})]})}),(0,t.jsx)(u.Z,{columns:xe,actionRef:g,cardBordered:!0,request:function(){var p=c()(s()().mark(function b(M,O,J){return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return console.log("request:",M,O,J),Fe(M.current),$e(M.pageSize),F.abrupt("return",Promise.resolve({data:ne.data.content,success:!0,total:ne.data.totalElements}));case 4:case"end":return F.stop()}},b)}));return function(b,M,O){return p.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:re,showQuickJumper:!0,onChange:function(b){console.log("page:",b)}},headerTitle:De?W.name:"\u5168\u4F53\u6210\u5458",toolBarRender:function(){return[(0,t.jsx)(ue.ZP,{icon:(0,t.jsx)(a.Z,{}),onClick:function(){console.log("new"),Ne()},type:"primary",children:"\u65B0\u5EFA"},"button")]}})]})},Pe=ie,we=e(45360),N=e(86250),Te=e(66593);function Re(m){return K.apply(this,arguments)}function K(){return K=c()(s()().mark(function m(g){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,T.request)("/api/v1/dep/query",{method:"GET",params:j()(j()({},g),{},{client:"web"})}));case 1:case"end":return r.stop()}},m)})),K.apply(this,arguments)}function Ze(m){return oe.apply(this,arguments)}function oe(){return oe=c()(s()().mark(function m(g){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,T.request)("/api/v1/dep/create",{method:"POST",data:j()(j()({},g),{},{client:"web"})}));case 1:case"end":return r.stop()}},m)})),oe.apply(this,arguments)}var Ie=e(64789),Ae=function(){var g=n.Z.useForm(),v=D()(g,1),r=v[0],E=(0,i.useState)(!1),H=D()(E,2),q=H[0],U=H[1],me=(0,i.useState)(""),_e=D()(me,2),de=_e[0],De=_e[1],ye=(0,Oe.u)(function(d){return d.orgCurrent}),ee=he(function(d){return{currentDep:d.currentDep,departments:d.departments,setDepartments:d.setDepartments,setCurrentDepUid:d.setCurrentDepUid}}),te=ee.currentDep,z=ee.departments,Fe=ee.setDepartments,be=ee.setCurrentDepUid,Ee=(0,i.useMemo)(function(){for(var d=[],o=0;o<z.length;o++){var y={title:"",key:"",children:[]};(0,le.Ux)(z[o],y),d.push(y)}return d},[z]),re=(0,i.useMemo)(function(){for(var d=[],o=0;o<z.length;o++){var y={title:"",value:"",children:[]};(0,le.bM)(z[o],y),d.push(y)}return d},[z]),$e=function(){var d=c()(s()().mark(function o(){var y,R;return s()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return y={pageNumber:0,pageSize:10,orgUid:ye.uid},Z.next=3,Re(y);case 3:R=Z.sent,console.log("queryDepartments:",R),Fe(R.data.content),R.data.content.length>0&&be(R.data.content[0].uid);case 7:case"end":return Z.stop()}},o)}));return function(){return d.apply(this,arguments)}}(),Be=function(){var d=c()(s()().mark(function o(y,R){var ae,Z;return s()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return ae={name:y,orgUid:ye.uid,type:"user",description:R,parentUid:de},Q.next=3,Ze(ae);case 3:Z=Q.sent,console.log("createDepartment:",Z);case 5:case"end":return Q.stop()}},o)}));return function(y,R){return d.apply(this,arguments)}}();(0,i.useEffect)(function(){$e()},[]);var Se=function(){U(!0)},W=function(){var d=c()(s()().mark(function o(){var y,R;return s()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:y=r.getFieldValue("nickname"),R=r.getFieldValue("description"),console.log("nickname",y,R,de),y?(Be(y,R),U(!1)):we.ZP.error("\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A");case 4:case"end":return Z.stop()}},o)}));return function(){return d.apply(this,arguments)}}(),pe=function(){U(!1)},je=function(){console.log("new dep"),Se()},ne=function(o,y){console.log("selected",o,y),o.length!==0&&be(o[0].toString())},Me=function(o){console.log("onParentSelectChange:",o),De(o||"")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{gap:"small",wrap:"wrap",children:(0,t.jsx)(ue.ZP,{type:"primary",size:"small",icon:(0,t.jsx)(Ie.Z,{}),onClick:je,children:"create dep"})}),(0,t.jsx)(Te.Z,{defaultExpandedKeys:[te.uid],defaultSelectedKeys:[te.uid],onSelect:ne,treeData:Ee}),(0,t.jsx)(l.Z,{title:"\u521B\u5EFA\u90E8\u95E8",open:q,onOk:W,onCancel:pe,children:(0,t.jsxs)(n.Z,{form:r,name:"depForm",style:{maxWidth:400},children:[(0,t.jsx)(n.Z.Item,{label:"\u7236\u90E8\u95E8",name:"parentDid",children:(0,t.jsx)(S.Z,{showSearch:!0,style:{width:"100%"},value:te.uid,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8(\u53EF\u4E0D\u9009)",allowClear:!0,treeDefaultExpandAll:!0,onChange:Me,treeData:re})}),(0,t.jsx)(n.Z.Item,{label:"\u90E8\u95E8\u540D\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0!"}],children:(0,t.jsx)(L.Z,{})}),(0,t.jsx)(n.Z.Item,{label:"\u90E8\u95E8\u7B80\u4ECB",name:"description",rules:[{message:"\u8BF7\u8F93\u5165\u7B80\u4ECB!"}],children:(0,t.jsx)(L.Z.TextArea,{})})]})})]})},Ue=Ae,ce=h.Z.Sider,Le=h.Z.Content,Ke=function(){var g=(0,P.Z)(),v=g.leftSiderStyle,r=g.contentStyle;return(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(ce,{style:v,children:(0,t.jsx)(Ue,{})}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(Le,{style:r,children:(0,t.jsx)(Pe,{})})})]})},ze=Ke},87676:function(X,x,e){e.d(x,{u:function(){return D}});var h=e(15009),i=e.n(h),P=e(99289),_=e.n(P),s=e(24172),w=e(64529),c=e(782),I=e(71381),D=(0,w.Ue)()((0,c.mW)((0,c.tJ)((0,I.n)(function($,B){return{orgCurrent:{uid:"",name:"",description:""},setOrgCurrent:function(T){$({orgCurrent:T})},createOrg:function(){var j=_()(i()().mark(function C(A){var G;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,s.Kq)(A);case 2:G=k.sent,console.log("createOrg:",G),G.code==200;case 5:case"end":return k.stop()}},C)}));function T(C){return j.apply(this,arguments)}return T}(),deleteOrgCache:function(){return $({},!0)}}}),{name:"ORGANIZTION_STORE"})))},86250:function(X,x,e){e.d(x,{Z:function(){return le}});var h=e(67294),i=e(93967),P=e.n(i),_=e(98423),s=e(98065),w=e(53124),c=e(91945),I=e(45503);const D=["wrap","nowrap","wrap-reverse"],$=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],B=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],j=(a,u)=>{const n={};return D.forEach(l=>{n[`${a}-wrap-${l}`]=u.wrap===l}),n},T=(a,u)=>{const n={};return B.forEach(l=>{n[`${a}-align-${l}`]=u.align===l}),n[`${a}-align-stretch`]=!u.align&&!!u.vertical,n},C=(a,u)=>{const n={};return $.forEach(l=>{n[`${a}-justify-${l}`]=u.justify===l}),n};function A(a,u){return P()(Object.assign(Object.assign(Object.assign({},j(a,u)),T(a,u)),C(a,u)))}var G=A;const f=a=>{const{componentCls:u}=a;return{[u]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},k=a=>{const{componentCls:u}=a;return{[u]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},se=a=>{const{componentCls:u}=a,n={};return D.forEach(l=>{n[`${u}-wrap-${l}`]={flexWrap:l}}),n},ge=a=>{const{componentCls:u}=a,n={};return B.forEach(l=>{n[`${u}-align-${l}`]={alignItems:l}}),n},Y=a=>{const{componentCls:u}=a,n={};return $.forEach(l=>{n[`${u}-justify-${l}`]={justifyContent:l}}),n},ve=()=>({});var he=(0,c.I$)("Flex",a=>{const{paddingXS:u,padding:n,paddingLG:l}=a,S=(0,I.TS)(a,{flexGapSM:u,flexGap:n,flexGapLG:l});return[f(S),k(S),se(S),ge(S),Y(S)]},ve,{resetStyle:!1}),Ce=function(a,u){var n={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&u.indexOf(l)<0&&(n[l]=a[l]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,l=Object.getOwnPropertySymbols(a);S<l.length;S++)u.indexOf(l[S])<0&&Object.prototype.propertyIsEnumerable.call(a,l[S])&&(n[l[S]]=a[l[S]]);return n},le=h.forwardRef((a,u)=>{const{prefixCls:n,rootClassName:l,className:S,style:L,flex:ue,gap:t,children:xe,vertical:ie=!1,component:Pe="div"}=a,we=Ce(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:N,direction:Te,getPrefixCls:Re}=h.useContext(w.E_),K=Re("flex",n),[Ze,oe,Ie]=he(K),Ae=ie!=null?ie:N==null?void 0:N.vertical,Ue=P()(S,l,N==null?void 0:N.className,K,oe,Ie,G(K,a),{[`${K}-rtl`]:Te==="rtl",[`${K}-gap-${t}`]:(0,s.n)(t),[`${K}-vertical`]:Ae}),ce=Object.assign(Object.assign({},N==null?void 0:N.style),L);return ue&&(ce.flex=ue),t&&!(0,s.n)(t)&&(ce.gap=t),Ze(h.createElement(Pe,Object.assign({ref:u,className:Ue,style:ce},(0,_.Z)(we,["justify","wrap","align"])),xe))})}}]);
