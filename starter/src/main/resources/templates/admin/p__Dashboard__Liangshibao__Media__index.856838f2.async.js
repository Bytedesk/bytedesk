"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3165],{77154:function(w,y,t){var S=t(39825);function f(){var d=(0,S.Z)(),l=d.isDarkMode,s=250,g={borderRight:l?"1px solid #333":"1px solid #ccc",background:l?"#141414":"#f5f5f5"},h={background:l?"#141414":"#fff"},M={borderLeft:l?"1px solid #333":"1px solid #ccc",background:l?"#141414":"#f5f5f5"},m={minHeight:120,background:l?"#141414":"#f5f5f5"};return{leftSiderStyle:g,leftSiderWidth:s,headerStyle:h,rightSiderStyle:M,contentStyle:m}}y.Z=f},70628:function(w,y,t){t.r(y),t.d(y,{default:function(){return ne}});var S=t(77154),f=t(21612),d=t(67294),l=t(15009),s=t.n(l),g=t(99289),h=t.n(g),M=t(5574),m=t.n(M),$=t(80049),k=t(97857),T=t.n(k),I=t(85615),B=t(86745);function N(r){return P.apply(this,arguments)}function P(){return P=h()(s()().mark(function r(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/v1/media/query/org",{method:"GET",params:T()(T()({},n),{},{client:I.bV})}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function K(r){return b.apply(this,arguments)}function b(){return b=h()(s()().mark(function r(n){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/v1/media/query/user",{method:"GET",params:T()(T()({},n),{},{client:I.bV})}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function se(r){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/create",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function de(r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/update",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function le(r){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/delete",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function oe(r){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/filter",{method:"GET",params:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}var H=t(73445),G=t(782),J=t(71381),V=(0,H.Ue)()((0,G.mW)((0,G.tJ)((0,J.n)(function(r,n){return{mediaResult:{data:{content:[]}},setMediaResult:function(e){r({mediaResult:e})},deleteMediaCache:function(){return r({},!0)}}}),{name:I.hS}))),Q=t(60247),X=t(53719),u=t(85893);function Y(r){return r.type==="image"?(0,u.jsx)(u.Fragment,{children:r.content.split(",").map(function(n,a){return(0,u.jsxs)("a",{href:n,target:"_blank",children:["\u67E5\u770B\u56FE\u7247 ",a+1]},a)})}):(0,u.jsx)("a",{href:r.content,target:"_blank",children:"\u64AD\u653E\u89C6\u9891"})}var q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0},{title:(0,u.jsx)(FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",render:function(n,a){return a.type==="image"?"\u56FE\u7247":"\u89C6\u9891"}},{title:(0,u.jsx)(FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",ellipsis:!0,render:function(n,a){return Y(a)}},{title:(0,u.jsx)(FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0},{title:intl.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(n,a,e,R){return[(0,u.jsx)("a",{onClick:function(){console.log("edit record:",a)},children:"\u4FEE\u6539"},"editable")]}}],_=function(){var n=(0,Q.L)(function(o){return o.userInfo}),a=(0,d.useRef)(),e=(0,d.useState)(1),R=m()(e,2),E=R[0],x=R[1],ae=(0,d.useState)(10),W=m()(ae,2),L=W[0],ue=W[1],z=V(function(o){return{mediaResult:o.mediaResult,setMediaResult:o.setMediaResult}}),C=z.mediaResult,ie=z.setMediaResult,F=function(){var o=h()(s()().mark(function v(){var c,p;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(c={pageNumber:E-1,pageSize:L},!n.superUser){i.next=7;break}return i.next=4,N(c);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,K(c);case 9:i.t0=i.sent;case 10:p=i.t0,console.log("getAllMedias response:",c,p),p.code===200?ie(p):$.yw.error(p.message);case 13:case"end":return i.stop()}},v)}));return function(){return o.apply(this,arguments)}}();return(0,d.useEffect)(function(){F()},[]),(0,d.useEffect)(function(){F()},[E,L]),(0,d.useEffect)(function(){console.log("mediaResult:",C),a.current.reload()},[C]),(0,u.jsx)(X.Z,{columns:q,actionRef:a,cardBordered:!0,request:function(){var o=h()(s()().mark(function v(c,p,Z){return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("request:",c,p,Z),x(c.current),ue(c.pageSize),j.abrupt("return",Promise.resolve({data:C.data.content,success:!0,total:C.data.totalElements}));case 4:case"end":return j.stop()}},v)}));return function(v,c,p){return o.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:L,showQuickJumper:!0,onChange:function(v){console.log("page:",v)}},dateFormatter:"string",headerTitle:"\u89C6\u9891/\u56FE\u7247",toolBarRender:function(){return[]}})},ee=_,ce=f.Z.Sider,te=f.Z.Content,re=function(){var n=(0,S.Z)(),a=n.leftSiderStyle,e=n.contentStyle,R=function(x){console.log("menu click ",x)};return(0,u.jsx)(f.Z,{children:(0,u.jsx)(f.Z,{children:(0,u.jsx)(te,{style:e,children:(0,u.jsx)(ee,{})})})})},ne=re},60247:function(w,y,t){t.d(y,{L:function(){return s}});var S=t(85615),f=t(73445),d=t(782),l=t(71381),s=(0,f.Ue)()((0,d.mW)((0,d.tJ)((0,l.n)(function(g,h){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(m){g({userInfo:m})},setDeviceUid:function(m){g({deviceUid:m})},deleteUserInfo:function(){return g({},!0)}}}),{name:S.Em})))}}]);
