"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[79],{51042:function(z,O,e){var c=e(1413),l=e(67294),S=e(42110),n=e(91146),T=function(_,j){return l.createElement(n.Z,(0,c.Z)((0,c.Z)({},_),{},{ref:j,icon:S.Z}))},E=l.forwardRef(T);O.Z=E},64317:function(z,O,e){var c=e(1413),l=e(91),S=e(22270),n=e(67294),T=e(66758),E=e(32486),D=e(85893),_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],j=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],x=function(u,d){var m=u.fieldProps,f=u.children,a=u.params,b=u.proFieldProps,$=u.mode,Z=u.valueEnum,G=u.request,V=u.showSearch,Q=u.options,N=(0,l.Z)(u,_),te=(0,n.useContext)(T.Z);return(0,D.jsx)(E.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,S.h)(Z),request:G,params:a,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:Q,mode:$,showSearch:V,getPopupContainer:te.getPopupContainer},m),ref:d,proFieldProps:b},N),{},{children:f}))},R=n.forwardRef(function(g,u){var d=g.fieldProps,m=g.children,f=g.params,a=g.proFieldProps,b=g.mode,$=g.valueEnum,Z=g.request,G=g.options,V=(0,l.Z)(g,j),Q=(0,c.Z)({options:G,mode:b||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},d),N=(0,n.useContext)(T.Z);return(0,D.jsx)(E.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,S.h)($),request:Z,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:N.getPopupContainer},Q),ref:u,proFieldProps:a},V),{},{children:m}))}),C=n.forwardRef(x),p=R,F=C;F.SearchSelect=p,F.displayName="ProFormComponent",O.Z=F},90672:function(z,O,e){var c=e(1413),l=e(91),S=e(67294),n=e(32486),T=e(85893),E=["fieldProps","proFieldProps"],D=function(j,x){var R=j.fieldProps,C=j.proFieldProps,p=(0,l.Z)(j,E);return(0,T.jsx)(n.Z,(0,c.Z)({ref:x,valueType:"textarea",fieldProps:R,proFieldProps:C},p))};O.Z=S.forwardRef(D)},40401:function(z,O,e){e.d(O,{kh:function(){return R},pf:function(){return j},y:function(){return p}});var c=e(15009),l=e.n(c),S=e(97857),n=e.n(S),T=e(99289),E=e.n(T),D=e(85615),_=e(86745);function j(d){return x.apply(this,arguments)}function x(){return x=E()(l()().mark(function d(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.request)("/api/v1/faq/query/org",{method:"GET",params:n()(n()({},m),{},{client:D.bV})}));case 1:case"end":return a.stop()}},d)})),x.apply(this,arguments)}function R(d){return C.apply(this,arguments)}function C(){return C=E()(l()().mark(function d(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.request)("/api/v1/faq/create",{method:"POST",data:n()(n()({},m),{},{client:D.bV})}));case 1:case"end":return a.stop()}},d)})),C.apply(this,arguments)}function p(d){return F.apply(this,arguments)}function F(){return F=E()(l()().mark(function d(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.request)("/api/v1/faq/update",{method:"POST",data:n()(n()({},m),{},{client:D.bV})}));case 1:case"end":return a.stop()}},d)})),F.apply(this,arguments)}function g(d){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function d(m){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/v1/faq/delete",{method:"POST",data:_objectSpread(_objectSpread({},m),{},{client:HTTP_CLIENT})}));case 1:case"end":return a.stop()}},d)})),u.apply(this,arguments)}},19177:function(z,O,e){e.r(O),e.d(O,{default:function(){return he}});var c=e(77154),l=e(21612),S=e(97857),n=e.n(S),T=e(13769),E=e.n(T),D=e(15009),_=e.n(D),j=e(99289),x=e.n(j),R=e(5574),C=e.n(R),p=e(80049),F=e(40401),g=e(87676),u=e(51042),d=e(53719),m=e(14726),f=e(67294),a=e(89102),b=e(85615),$=e(34994),Z=e(64317),G=e(5966),V=e(90672),Q=e(8232),N=e(85265),te=e(42075),t=e(85893),le=function(i){var I=i.isEdit,o=i.faq,B=i.open,H=i.onClose,J=i.onSubmit,Y=Q.Z.useForm(),X=C()(Y,1),U=X[0],W=(0,g.u)(function(P){return P.currentOrg}),re=(0,a.v)(function(P){return P.categorySelectOptions});(0,f.useEffect)(function(){if(I){var P;U.setFieldsValue({type:o==null?void 0:o.type,title:o==null?void 0:o.title,content:o==null?void 0:o.content,categoryUid:o==null||(P=o.category)===null||P===void 0?void 0:P.uid})}else U.resetFields()},[B]);var q=function(y){console.log("category selected ".concat(y))},ae=function(y){console.log("type selected ".concat(y))},k=function(){console.log("handleSubmit"),U.validateFields().then(function(y){console.log(y),J(n()(n()(n()({},o),y),{},{orgUid:W==null?void 0:W.uid}))}).catch(function(y){console.log("Form errors:",y),p.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(N.Z,{title:I?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:H,open:B,extra:(0,t.jsxs)(te.Z,{children:[(0,t.jsx)(m.ZP,{onClick:H,children:"\u53D6\u6D88"}),(0,t.jsx)(m.ZP,{onClick:k,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,t.jsxs)($.A,{form:U,initialValues:n()({},o),submitter:{render:function(){return null}},children:[(0,t.jsx)(Z.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:re,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:q}}),(0,t.jsx)(Z.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:b.PY},{label:"\u56FE\u7247",value:b.Qm},{label:"\u89C6\u9891",value:b.tV},{label:"\u97F3\u9891",value:b.Yu},{label:"\u6587\u4EF6",value:b.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:ae}}),(0,t.jsx)(G.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,t.jsx)(V.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},ue=le,A=e(86745),ie=e(73803),de=["current"],ce=function(){var i=(0,A.useIntl)(),I=(0,ie.Z)(),o=I.translateStringTranct,B=(0,f.useRef)(),H=(0,f.useState)(!0),J=C()(H,2),Y=J[0],X=J[1],U=(0,f.useState)(),W=C()(U,2),re=W[0],q=W[1],ae=(0,f.useState)(!1),k=C()(ae,2),P=k[0],y=k[1],_e=(0,g.u)(function(s){return s.currentOrg}),Pe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,t.jsx)(A.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"title",copyable:!0,render:function(h,r){return o(r==null?void 0:r.title)}},{title:(0,t.jsx)(A.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",render:function(h,r){return o(r==null?void 0:r.content)}},{title:(0,t.jsx)(A.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0,render:function(h,r){return(0,t.jsx)(t.Fragment,{children:i.formatMessage({id:r==null?void 0:r.type,defaultMessage:r==null?void 0:r.type})})}},{title:(0,t.jsx)(A.FormattedMessage,{id:"category",defaultMessage:"Category"}),dataIndex:"category",hideInSearch:!0,render:function(h,r){var M;return o((M=r.category)===null||M===void 0?void 0:M.name)}},{title:(0,t.jsx)(A.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:i.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(h,r,M,L){return[(0,t.jsx)("a",{onClick:function(){Ee(r)},children:i.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable")]}}],ee=(0,a.v)(function(s){return s.currentCategory}),ye=function(){q(void 0),X(!1),y(!0)},Ee=function(h){q(h),X(!0),y(!0)},Ce=function(){var s=x()(_()().mark(function h(r){var M,L;return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(console.log("handleSubmitDrawer",r),Y?p.yw.loading(i.formatMessage({id:"updating"})):p.yw.loading(i.formatMessage({id:"creating"})),!Y){v.next=8;break}return v.next=5,(0,F.y)(r);case 5:v.t0=v.sent,v.next=11;break;case 8:return v.next=10,(0,F.kh)(r);case 10:v.t0=v.sent;case 11:M=v.t0,console.log("createFaq response:",r,M),M.code===200?(p.yw.destroy(),p.yw.success(i.formatMessage({id:"create.success",defaultMessage:"create success"})),y(!1),(L=B.current)===null||L===void 0||L.reloadAndRest()):(p.yw.destroy(),p.yw.error(M.message));case 14:case"end":return v.stop()}},h)}));return function(r){return s.apply(this,arguments)}}(),Me=function(){y(!1)};return(0,f.useEffect)(function(){var s;console.log("currentCategory:",ee),(s=B.current)===null||s===void 0||s.reloadAndRest()},[ee]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{columns:Pe,actionRef:B,cardBordered:!0,request:function(){var s=x()(_()().mark(function h(r,M,L){var ne,v,se,K;return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("request:",r,M,L),p.yw.loading(i.formatMessage({id:"loading",defaultMessage:"Loading"})),ne=r.current,v=E()(r,de),se=n()({pageNumber:r.current-1,orgUid:_e.uid,categoryUid:ee.uid==="all"?"":ee.uid},v),w.next=6,(0,F.pf)(se);case 6:return K=w.sent,console.log("getAllFaqs response:",se,K),p.yw.destroy(),K.code===200||p.yw.error(K.message),w.abrupt("return",{data:K.data.content,success:!0,total:K.data.totalElements});case 11:case"end":return w.stop()}},h)}));return function(h,r,M){return s.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(h){console.log("page:",h)}},dateFormatter:"string",headerTitle:i.formatMessage({id:"menu.knowledge.faq",defaultMessage:"FAQ"}),toolBarRender:function(){return[(0,t.jsx)(m.ZP,{icon:(0,t.jsx)(u.Z,{}),type:"primary",onClick:ye,children:i.formatMessage({id:"create",defaultMessage:"Create"})},"button")]}}),(0,t.jsx)(ue,{isEdit:Y,open:P,faq:re,onClose:Me,onSubmit:Ce})]})},pe=ce,me=e(52670),ve=l.Z.Sider,ge=l.Z.Content,fe=function(){var i=(0,c.Z)(),I=i.leftSiderStyle,o=i.contentStyle;return(0,t.jsx)("div",{children:(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(ve,{style:I,children:(0,t.jsx)(me.Z,{type:b.OG})}),(0,t.jsx)(l.Z,{children:(0,t.jsx)(ge,{style:o,children:(0,t.jsx)(pe,{})})})]})})},he=fe}}]);
