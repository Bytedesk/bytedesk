"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8505],{40803:function(n,e,r){r.d(e,{_Z:function(){return d},aq:function(){return v},sS:function(){return f},ul:function(){return h}});var t=r(90819),u=r.n(t),a=r(73193),o=r.n(a),i=r(89933),c=r.n(i),s=r(55735),l=r(30921);function d(n){return p.apply(this,arguments)}function p(){return(p=c()(u()().mark((function n(e){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/v1/wechat/mp/create",{method:"POST",data:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(n){return m.apply(this,arguments)}function m(){return(m=c()(u()().mark((function n(e){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/v1/wechat/mp/update",{method:"POST",data:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n){return g.apply(this,arguments)}function g(){return(g=c()(u()().mark((function n(e){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/v1/wechat/mp/delete",{method:"POST",data:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(n){return x.apply(this,arguments)}function x(){return(x=c()(u()().mark((function n(e){return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/v1/wechat/mp/query/org",{method:"GET",params:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},15025:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},6897:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},76432:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},29897:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},51103:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},75262:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},44574:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},10354:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},62476:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},21325:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},36378:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},13161:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},63289:function(n,e,r){var t=r(90819),u=r.n(t),a=r(89933),o=r.n(a),i=r(73193),c=r.n(i),s=r(45332),l=r.n(s),d=r(86803),p=r(72614),f=r(76750),m=r(40612),h=r(95490),g=r(69169),v=r(4499),x=r(84881),j=r(73442),Z=r(3849),w=r(75365),b=r(44194),y=r(31549);e.Z=function(n){var e,r=n.isEdit,t=n.wechatmp,a=n.open,i=n.onClose,s=n.onSubmit,F=g.A.useForm(),k=l()(F,1)[0],A=(0,f.Z)().translateStringTranct,S=(0,m.u)((function(n){return n.currentOrg})),q=(0,h.$)((function(n){return{workgroupResult:n.workgroupResult,setWorkgroupResult:n.setWorkgroupResult}})),C=q.workgroupResult,E=q.setWorkgroupResult;(0,b.useEffect)((function(){r?k.setFieldsValue({name:null==t?void 0:t.name,appId:null==t?void 0:t.appId,appSecret:null==t?void 0:t.appSecret,encodingAesKey:null==t?void 0:t.encodingAesKey,encryptMode:null==t?void 0:t.encryptMode,workgroupUid:null==t?void 0:t.workgroupUid}):k.setFieldsValue({name:"",appId:"",appSecret:"",encodingAesKey:"",encryptMode:"PLAINTEXT",workgroupUid:""})}),[r,t,k]);var T=function(){var n=o()(u()().mark((function n(){var e,r;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d.yw.loading("loading"),e={pageNumber:0,pageSize:50,orgUid:null==S?void 0:S.uid},n.next=4,(0,p.u7)(e);case 4:r=n.sent,console.log("getWorkgroups",r),200===r.code?(d.yw.destroy(),E(r)):(d.yw.destroy(),d.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,b.useEffect)((function(){T()}),[]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(j.Z,{title:"微信公众号",onClose:i,open:a,children:(0,y.jsxs)(g.A,{form:k,name:"wechatMpForm",onFinish:function(){console.log("handleSubmit"),k.validateFields().then((function(n){var e=c()(c()({},n),{},{orgUid:null==S?void 0:S.uid});console.log("submit",e),s(e)}))},children:[(0,y.jsx)(v.Z,{label:"名称",name:"name",rules:[{required:!0}]}),(0,y.jsx)(v.Z,{label:"appId",name:"appId",rules:[{required:!0}]}),(0,y.jsx)(v.Z,{label:"appSecret",name:"appSecret",rules:[{required:!0}]}),(0,y.jsx)(v.Z,{label:"EncodingAESKey",name:"encodingAesKey",rules:[{required:!0}]}),(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)(w.ZP,{onClick:function(){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",r=0;r<43;r++){var t=Math.floor(Math.random()*n.length);e+=n.charAt(t)}k.setFieldsValue({encodingAesKey:e})},children:"随机生成"}),(0,y.jsx)(w.ZP,{onClick:function(){var n=k.getFieldValue("encodingAesKey");if(n){var e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),d.yw.success("已复制到剪切板")}},children:"复制"})]}),(0,y.jsx)(x.Z,{label:"消息加解密方式",name:"encryptMode",options:[{label:"明文模式",value:"PLAINTEXT"},{label:"兼容模式",value:"COMPATIBLE"},{label:"安全模式",value:"SAFE"}],fieldProps:{defaultValue:"PLAINTEXT",allowClear:!0},rules:[{required:!0}]}),(0,y.jsx)(x.Z,{label:"客服技能组",name:"workgroupUid",options:null==C||null===(e=C.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(n){return{label:A(n.nickname),value:n.uid}})),fieldProps:{allowClear:!0},rules:[{required:!0}]}),(0,y.jsx)("p",{children:"注：微信公众号-》设置与开发-》开发接口管理-》基本设置 获取相关信息"})]})})})}},53300:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},79176:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},11452:function(n,e,r){var t=r(79686),u=r(31549);e.Z=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(t.Z,{})})}},79686:function(n,e,r){var t=r(55735),u=r(30921),a=r(31549);e.Z=function(){var n=(0,u.useAccess)();return n.canDebug&&console.log("Developing canDebug"),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.Access,{accessible:n.canDebug(),fallback:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.FormattedMessage,{id:t.h5w})}),children:"can debug"})})}}}]);