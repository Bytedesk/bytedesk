"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[119],{11475:function(J,x,t){t.d(x,{Z:function(){return T}});var o=t(1413),v=t(67294),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},P=y,M=t(91146),c=function(A,b){return v.createElement(M.Z,(0,o.Z)((0,o.Z)({},A),{},{ref:b,icon:P}))},D=v.forwardRef(c),T=D},58638:function(J,x,t){t.d(x,{Z:function(){return T}});var o=t(1413),v=t(67294),y={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},P=y,M=t(91146),c=function(A,b){return v.createElement(M.Z,(0,o.Z)((0,o.Z)({},A),{},{ref:b,icon:P}))},D=v.forwardRef(c),T=D},14101:function(J,x,t){t.d(x,{Nm:function(){return F},fk:function(){return T}});var o=t(15009),v=t.n(o),y=t(97857),P=t.n(y),M=t(99289),c=t.n(M),D=t(86745);function T(_){return d.apply(this,arguments)}function d(){return d=c()(v()().mark(function _(g){return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/v1/thread/query/org",{method:"GET",params:P()({},g)}));case 1:case"end":return l.stop()}},_)})),d.apply(this,arguments)}function A(_){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function _(g){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/v1/thread/update",{method:"POST",data:_objectSpread({},g)}));case 1:case"end":return l.stop()}},_)})),b.apply(this,arguments)}function F(_){return K.apply(this,arguments)}function K(){return K=c()(v()().mark(function _(g){return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/v1/thread/close",{method:"POST",data:P()({},g)}));case 1:case"end":return l.stop()}},_)})),K.apply(this,arguments)}function H(_){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function _(g){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/v1/thread/delete",{method:"POST",data:_objectSpread({},g)}));case 1:case"end":return l.stop()}},_)})),k.apply(this,arguments)}function V(_){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function _(g){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/v1/thread/export",{method:"GET",params:_objectSpread({},g)}));case 1:case"end":return l.stop()}},_)})),$.apply(this,arguments)}},60119:function(J,x,t){var o=t(97857),v=t.n(o),y=t(13769),P=t.n(y),M=t(15009),c=t.n(M),D=t(99289),T=t.n(D),d=t(5574),A=t.n(d),b=t(80049),F=t(14101),K=t(73803),H=t(87676),k=t(85615),V=t(11475),$=t(58638),_=t(53719),g=t(86745),N=t(66309),l=t(85576),te=t(14726),ne=t(67294),f=t(85893),re=["current"],G=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,f.jsx)(g.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"userNickname",hideInSearch:!0,render:function(ee,I){var m;return I==null||(m=I.user)===null||m===void 0?void 0:m.nickname}},{title:(0,f.jsx)(g.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",copyable:!0},{title:(0,f.jsx)(g.FormattedMessage,{id:"unreadCount",defaultMessage:"Unread Count"}),dataIndex:"unreadCount",hideInSearch:!0},{title:(0,f.jsx)(g.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",copyable:!0,hideInSearch:!0},{title:"\u6240\u6709\u8005",dataIndex:"ownerNickname",render:function(ee,I){var m;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(N.Z,{children:I==null||(m=I.owner)===null||m===void 0?void 0:m.nickname})})}},{title:"\u6765\u6E90",dataIndex:"client",hideInSearch:!0},{title:(0,f.jsx)(g.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0}],ae=function(ee){var I=ee.type,m=(0,g.useIntl)(),e=(0,ne.useRef)(),a=(0,H.u)(function(C){return C.currentOrg}),i=(0,K.Z)(),n=i.translateString,r=l.Z.useModal(),j=A()(r,2),h=j[0],W=j[1],R=function(u){var s;h.confirm({title:m.formatMessage({id:"closeTip",defaultMessage:"Close Tip"}),icon:(0,f.jsx)(V.Z,{}),content:"".concat(m.formatMessage({id:"closeASure",defaultMessage:"closeASure"}),"\u3010").concat(n(u==null||(s=u.user)===null||s===void 0?void 0:s.nickname),"\u3011\uFF1F"),onOk:function(){Z(u)},onCancel:function(){},okText:m.formatMessage({id:"ok"}),cancelText:m.formatMessage({id:"cancel"})})},z=[].concat(G,[{title:m.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:50,render:function(u,s,E,O){return[!B(s)&&(0,f.jsx)("a",{onClick:function(){R(s)},children:"\u5173\u95ED"},"editable")]}}]),B=function(u){return u.status.indexOf("CLOSED")>-1},Z=function(){var C=T()(c()().mark(function u(s){var E,O;return c()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return console.log("handleCloseThread:",s),b.yw.loading(m.formatMessage({id:"closing",defaultMessage:"Closing"})),S.next=4,(0,F.Nm)(s);case 4:E=S.sent,console.log("handleCloseThread response:",s,E),E.code===200?(b.yw.destroy(),b.yw.success(m.formatMessage({id:"close.success",defaultMessage:"Close Success"})),(O=e.current)===null||O===void 0||O.reload()):(b.yw.destroy(),b.yw.error(E.message));case 7:case"end":return S.stop()}},u)}));return function(s){return C.apply(this,arguments)}}(),L=function(){var C=T()(c()().mark(function u(){var s;return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:console.log("handleExportExcel"),s=localStorage.getItem(k.LA),window.open("/api/v1/thread/export?uid="+a.uid+"pageNumber=0&pageSize=20&accessToken="+s);case 3:case"end":return O.stop()}},u)}));return function(){return C.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_.Z,{columns:z,actionRef:e,cardBordered:!0,request:function(){var C=T()(c()().mark(function u(s,E,O){var Y,S,X,U;return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("request:",s,E,O),Y=s.current,S=P()(s,re),X=v()({pageNumber:s.current-1,orgUid:a.uid},S),p.next=5,(0,F.fk)(X);case 5:return U=p.sent,console.log("getAllThreads response:",U,X),U.code===200||b.yw.error(U.message),p.abrupt("return",{data:U.data.content,success:!0,total:U.data.totalElements});case 9:case"end":return p.stop()}},u)}));return function(u,s,E){return C.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(u){console.log("page:",u)}},dateFormatter:"string",headerTitle:m.formatMessage({id:"thread",defaultMessage:"Thread"}),toolBarRender:function(){return[(0,f.jsx)(te.ZP,{icon:(0,f.jsx)($.Z,{}),type:"primary",onClick:L,children:m.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),W]})};x.Z=ae},73803:function(J,x,t){var o=t(85615),v=t(16854),y=t(86745);function P(){var M=(0,y.useIntl)(),c=function(d){return d&&d.startsWith(o.Vo)?M.formatMessage({id:d,defaultMessage:d}):d},D=function(d){return d!=null&&d.startsWith(o.Vo)?(0,v.aS)(M.formatMessage({id:d}),10):(0,v.aS)(d,10)};return{translateString:c,translateStringTranct:D}}x.Z=P},66309:function(J,x,t){t.d(x,{Z:function(){return m}});var o=t(67294),v=t(93967),y=t.n(v),P=t(98423),M=t(98787),c=t(69760),D=t(96159),T=t(45353),d=t(53124),A=t(85982),b=t(10274),F=t(14747),K=t(45503),H=t(27036);const k=e=>{const{paddingXXS:a,lineWidth:i,tagPaddingHorizontal:n,componentCls:r,calc:j}=e,h=j(n).sub(i).equal(),W=j(a).sub(i).equal();return{[r]:Object.assign(Object.assign({},(0,F.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:h,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,A.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${r}-close-icon`]:{marginInlineStart:W,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:h}}),[`${r}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},V=e=>{const{lineWidth:a,fontSizeIcon:i,calc:n}=e,r=e.fontSizeSM;return(0,K.TS)(e,{tagFontSize:r,tagLineHeight:(0,A.bf)(n(e.lineHeightSM).mul(r).equal()),tagIconSize:n(i).sub(n(a).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},$=e=>({defaultBg:new b.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var _=(0,H.I$)("Tag",e=>{const a=V(e);return k(a)},$),g=function(e,a){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i},l=o.forwardRef((e,a)=>{const{prefixCls:i,style:n,className:r,checked:j,onChange:h,onClick:W}=e,R=g(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:z,tag:B}=o.useContext(d.E_),Z=O=>{h==null||h(!j),W==null||W(O)},L=z("tag",i),[C,u,s]=_(L),E=y()(L,`${L}-checkable`,{[`${L}-checkable-checked`]:j},B==null?void 0:B.className,r,u,s);return C(o.createElement("span",Object.assign({},R,{ref:a,style:Object.assign(Object.assign({},n),B==null?void 0:B.style),className:E,onClick:Z})))}),te=t(98719);const ne=e=>(0,te.Z)(e,(a,i)=>{let{textColor:n,lightBorderColor:r,lightColor:j,darkColor:h}=i;return{[`${e.componentCls}${e.componentCls}-${a}`]:{color:n,background:j,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:h,borderColor:h},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var f=(0,H.bk)(["Tag","preset"],e=>{const a=V(e);return ne(a)},$);function re(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const G=(e,a,i)=>{const n=re(i);return{[`${e.componentCls}${e.componentCls}-${a}`]:{color:e[`color${i}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var ae=(0,H.bk)(["Tag","status"],e=>{const a=V(e);return[G(a,"success","Success"),G(a,"processing","Info"),G(a,"error","Error"),G(a,"warning","Warning")]},$),q=function(e,a){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i};const I=o.forwardRef((e,a)=>{const{prefixCls:i,className:n,rootClassName:r,style:j,children:h,icon:W,color:R,onClose:z,bordered:B=!0,visible:Z}=e,L=q(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:C,direction:u,tag:s}=o.useContext(d.E_),[E,O]=o.useState(!0),Y=(0,P.Z)(L,["closeIcon","closable"]);o.useEffect(()=>{Z!==void 0&&O(Z)},[Z]);const S=(0,M.o2)(R),X=(0,M.yT)(R),U=S||X,oe=Object.assign(Object.assign({backgroundColor:R&&!U?R:void 0},s==null?void 0:s.style),j),p=C("tag",i),[ce,_e,me]=_(p),ge=y()(p,s==null?void 0:s.className,{[`${p}-${R}`]:U,[`${p}-has-color`]:R&&!U,[`${p}-hidden`]:!E,[`${p}-rtl`]:u==="rtl",[`${p}-borderless`]:!B},n,r,_e,me),le=Q=>{Q.stopPropagation(),z==null||z(Q),!Q.defaultPrevented&&O(!1)},[,pe]=(0,c.Z)((0,c.w)(e),(0,c.w)(s),{closable:!1,closeIconRender:Q=>{const he=o.createElement("span",{className:`${p}-close-icon`,onClick:le},Q);return(0,D.wm)(Q,he,w=>({onClick:ue=>{var se;(se=w==null?void 0:w.onClick)===null||se===void 0||se.call(w,ue),le(ue)},className:y()(w==null?void 0:w.className,`${p}-close-icon`)}))}}),ve=typeof L.onClick=="function"||h&&h.type==="a",ie=W||null,fe=ie?o.createElement(o.Fragment,null,ie,h&&o.createElement("span",null,h)):h,de=o.createElement("span",Object.assign({},Y,{ref:a,className:ge,style:oe}),fe,pe,S&&o.createElement(f,{key:"preset",prefixCls:p}),X&&o.createElement(ae,{key:"status",prefixCls:p}));return ce(ve?o.createElement(T.Z,{component:"Tag"},de):de)});I.CheckableTag=l;var m=I}}]);
