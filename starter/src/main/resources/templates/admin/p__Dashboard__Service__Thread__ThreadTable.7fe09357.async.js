"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3537],{11475:function(I,p,e){e.d(p,{Z:function(){return l}});var o=e(1413),s=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},g=f,h=e(91146),i=function(O,u){return s.createElement(h.Z,(0,o.Z)((0,o.Z)({},O),{},{ref:u,icon:g}))},v=s.forwardRef(i),l=v},58638:function(I,p,e){e.d(p,{Z:function(){return l}});var o=e(1413),s=e(67294),f={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},g=f,h=e(91146),i=function(O,u){return s.createElement(h.Z,(0,o.Z)((0,o.Z)({},O),{},{ref:u,icon:g}))},v=s.forwardRef(i),l=v},14101:function(I,p,e){e.d(p,{Nm:function(){return U},fk:function(){return l}});var o=e(15009),s=e.n(o),f=e(97857),g=e.n(f),h=e(99289),i=e.n(h),v=e(86745);function l(a){return n.apply(this,arguments)}function n(){return n=i()(s()().mark(function a(d){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/v1/thread/org",{method:"GET",params:g()({},d)}));case 1:case"end":return t.stop()}},a)})),n.apply(this,arguments)}function O(a){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function a(d){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/thread/update",{method:"POST",data:_objectSpread({},d)}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}function U(a){return y.apply(this,arguments)}function y(){return y=i()(s()().mark(function a(d){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/v1/thread/close",{method:"POST",data:g()({},d)}));case 1:case"end":return t.stop()}},a)})),y.apply(this,arguments)}function W(a){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function a(d){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/thread/delete",{method:"POST",data:_objectSpread({},d)}));case 1:case"end":return t.stop()}},a)})),C.apply(this,arguments)}function K(a){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function a(d){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/thread/export",{method:"GET",params:_objectSpread({},d)}));case 1:case"end":return t.stop()}},a)})),R.apply(this,arguments)}},73803:function(I,p,e){var o=e(85615),s=e(66419),f=e(86745);function g(){var h=(0,f.useIntl)(),i=function(n){return n&&n.startsWith(o.Vo)?h.formatMessage({id:n,defaultMessage:n}):n},v=function(n){return n!=null&&n.startsWith(o.Vo)?(0,s.aS)(h.formatMessage({id:n}),10):(0,s.aS)(n,10)};return{translateString:i,translateStringTranct:v}}p.Z=g},54407:function(I,p,e){e.r(p);var o=e(97857),s=e.n(o),f=e(13769),g=e.n(f),h=e(15009),i=e.n(h),v=e(99289),l=e.n(v),n=e(5574),O=e.n(n),u=e(80049),U=e(14101),y=e(73803),W=e(87676),C=e(85615),K=e(11475),R=e(58638),a=e(43892),d=e(86745),M=e(85576),t=e(14726),k=e(67294),D=e(85893),Z=["current"],q=[{label:"\u7C7B\u578B1",value:"type1"},{label:"\u7C7B\u578B2",value:"type2"}],$=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u8BBF\u5BA2",dataIndex:"userNickname",render:function(L,A){var T;return(T=A.user)===null||T===void 0?void 0:T.nickname}},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0},{title:"\u672A\u8BFB\u6570",dataIndex:"unreadCount",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",copyable:!0,hideInSearch:!0},{title:"\u6765\u6E90",dataIndex:"client",hideInSearch:!0},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0}],G=function(){var L=(0,d.useIntl)(),A=(0,k.useRef)(),T=(0,W.u)(function(c){return c.orgCurrent}),z=(0,y.Z)(),F=z.translateString,N=M.Z.useModal(),S=O()(N,2),V=S[0],H=S[1],J=function(_){var r;V.confirm({title:"\u5173\u95ED\u63D0\u793A",icon:(0,D.jsx)(K.Z,{}),content:"\u786E\u8BA4\u8981\u5173\u95ED\u4F1A\u8BDD\u3010".concat(F(_==null||(r=_.user)===null||r===void 0?void 0:r.nickname),"\u3011\u5417\uFF1F"),onOk:function(){console.log("\u786E\u8BA4\u5173\u95ED"),X(_)},onCancel:function(){console.log("\u53D6\u6D88\u5173\u95ED")},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},Q=[].concat($,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(_,r,m,E){return[(0,D.jsx)("a",{onClick:function(){J(r)},children:"\u5173\u95ED"},"editable")]}}]),X=function(){var c=l()(i()().mark(function _(r){var m,E;return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return console.log("handleCloseThread:",r),u.yw.loading("\u6B63\u5728\u5173\u95ED\u4F1A\u8BDD..."),b.next=4,(0,U.Nm)(r);case 4:m=b.sent,console.log("handleCloseThread response:",r,m),m.code===200?(u.yw.destroy(),u.yw.success("\u5173\u95ED\u4F1A\u8BDD\u6210\u529F\uFF01"),(E=A.current)===null||E===void 0||E.reload()):(u.yw.destroy(),u.yw.error(m.message));case 7:case"end":return b.stop()}},_)}));return function(r){return c.apply(this,arguments)}}(),Y=function(){var c=l()(i()().mark(function _(){var r;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:console.log("handleExportExcel"),r=localStorage.getItem(C.LA),window.open("/api/v1/thread/export?uid="+T.uid+"pageNumber=0&pageSize=20&accessToken="+r);case 3:case"end":return E.stop()}},_)}));return function(){return c.apply(this,arguments)}}();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(a.Z,{columns:Q,actionRef:A,cardBordered:!0,request:function(){var c=l()(i()().mark(function _(r,m,E){var x,b,B,P;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("request:",r,m,E),x=r.current,b=g()(r,Z),B=s()({pageNumber:r.current-1,orgUid:T.uid},b),j.next=5,(0,U.fk)(B);case 5:return P=j.sent,console.log("getAllThreads response:",B,P),P.code===200||u.yw.error(P.message),j.abrupt("return",{data:P.data.content,success:!0,total:P.data.totalElements});case 9:case"end":return j.stop()}},_)}));return function(_,r,m){return c.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(_){console.log("page:",_)}},dateFormatter:"string",headerTitle:"\u4F1A\u8BDD\u5217\u8868",toolBarRender:function(){return[(0,D.jsx)(t.ZP,{icon:(0,D.jsx)(R.Z,{}),type:"primary",onClick:Y,children:L.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),H]})};p.default=G}}]);
