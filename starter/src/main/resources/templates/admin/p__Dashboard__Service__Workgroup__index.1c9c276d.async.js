"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9828],{63434:function(De,pe,r){var J=r(1413),v=r(91),ve=r(22270),o=r(84567),ce=r(67294),S=r(90789),re=r(32486),B=r(85893),a=["options","fieldProps","proFieldProps","valueEnum"],se=ce.forwardRef(function(w,z){var H=w.options,ue=w.fieldProps,L=w.proFieldProps,oe=w.valueEnum,de=(0,v.Z)(w,a);return(0,B.jsx)(re.Z,(0,J.Z)({ref:z,valueType:"checkbox",valueEnum:(0,ve.h)(oe,void 0),fieldProps:(0,J.Z)({options:H},ue),lightProps:(0,J.Z)({labelFormatter:function(){return(0,B.jsx)(re.Z,(0,J.Z)({ref:z,valueType:"checkbox",mode:"read",valueEnum:(0,ve.h)(oe,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,J.Z)({options:H},ue),proFieldProps:L},de))}},de.lightProps),proFieldProps:L},de))}),fe=ce.forwardRef(function(w,z){var H=w.fieldProps,ue=w.children;return(0,B.jsx)(o.Z,(0,J.Z)((0,J.Z)({ref:z},H),{},{children:ue}))}),k=(0,S.G)(fe,{valuePropName:"checked"}),K=k;K.Group=se,pe.Z=K},33725:function(De,pe,r){var J=r(1413),v=r(91),ve=r(86190),o=r(67294),ce=r(66758),S=r(32486),re=r(85893),B=["fieldProps","proFieldProps"],a=["fieldProps","proFieldProps"],se="time",fe=o.forwardRef(function(w,z){var H=w.fieldProps,ue=w.proFieldProps,L=(0,v.Z)(w,B),oe=(0,o.useContext)(ce.Z);return(0,re.jsx)(S.Z,(0,J.Z)({ref:z,fieldProps:(0,J.Z)({getPopupContainer:oe.getPopupContainer},H),valueType:"timeRange",proFieldProps:ue,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(X){return(0,ve.c)(X,"HH:mm:ss")}}},L))}),k=function(z){var H=z.fieldProps,ue=z.proFieldProps,L=(0,v.Z)(z,a),oe=(0,o.useContext)(ce.Z);return(0,re.jsx)(S.Z,(0,J.Z)({fieldProps:(0,J.Z)({getPopupContainer:oe.getPopupContainer},H),valueType:se,proFieldProps:ue,filedConfig:{customLightMode:!0,valueType:se}},L))},K=k;K.RangePicker=fe,pe.Z=K},3418:function(De,pe,r){r.d(pe,{Lr:function(){return ue},_t:function(){return a},sE:function(){return z},x_:function(){return K}});var J=r(15009),v=r.n(J),ve=r(97857),o=r.n(ve),ce=r(99289),S=r.n(ce),re=r(85615),B=r(86745);function a(X){return se.apply(this,arguments)}function se(){return se=S()(v()().mark(function X(ae){return v()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,B.request)("/api/v1/agent/query/org",{method:"GET",params:o()(o()({},ae),{},{client:re.bV})}));case 1:case"end":return G.stop()}},X)})),se.apply(this,arguments)}function fe(){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function X(){return _regeneratorRuntime().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",request("/api/v1/agent/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return ge.stop()}},X)})),k.apply(this,arguments)}function K(X){return w.apply(this,arguments)}function w(){return w=S()(v()().mark(function X(ae){return v()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,B.request)("/api/v1/agent/create",{method:"POST",data:o()(o()({},ae),{},{client:re.bV})}));case 1:case"end":return G.stop()}},X)})),w.apply(this,arguments)}function z(X){return H.apply(this,arguments)}function H(){return H=S()(v()().mark(function X(ae){return v()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,B.request)("/api/v1/agent/update",{method:"POST",data:o()(o()({},ae),{},{client:re.bV})}));case 1:case"end":return G.stop()}},X)})),H.apply(this,arguments)}function ue(X){return L.apply(this,arguments)}function L(){return L=S()(v()().mark(function X(ae){return v()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,B.request)("/api/v1/agent/delete",{method:"POST",data:o()(o()({},ae),{},{client:re.bV})}));case 1:case"end":return G.stop()}},X)})),L.apply(this,arguments)}function oe(X){return de.apply(this,arguments)}function de(){return de=_asyncToGenerator(_regeneratorRuntime().mark(function X(ae){return _regeneratorRuntime().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",request("/api/v1/agent/filter",{method:"GET",params:_objectSpread(_objectSpread({},ae),{},{client:HTTP_CLIENT})}));case 1:case"end":return G.stop()}},X)})),de.apply(this,arguments)}},35612:function(De,pe,r){r.d(pe,{$$:function(){return K},AW:function(){return fe},gk:function(){return a}});var J=r(15009),v=r.n(J),ve=r(97857),o=r.n(ve),ce=r(99289),S=r.n(ce),re=r(85615),B=r(86745);function a(z){return se.apply(this,arguments)}function se(){return se=S()(v()().mark(function z(H){return v()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,B.request)("/api/v1/worktime/create",{method:"POST",data:o()(o()({},H),{},{client:re.bV})}));case 1:case"end":return L.stop()}},z)})),se.apply(this,arguments)}function fe(z){return k.apply(this,arguments)}function k(){return k=S()(v()().mark(function z(H){return v()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,B.request)("/api/v1/worktime/update",{method:"POST",data:o()(o()({},H),{},{client:re.bV})}));case 1:case"end":return L.stop()}},z)})),k.apply(this,arguments)}function K(z){return w.apply(this,arguments)}function w(){return w=S()(v()().mark(function z(H){return v()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,B.request)("/api/v1/worktime/delete",{method:"POST",data:o()(o()({},H),{},{client:re.bV})}));case 1:case"end":return L.stop()}},z)})),w.apply(this,arguments)}},13426:function(De,pe,r){r.r(pe),r.d(pe,{default:function(){return Qr}});var J=r(21612),v=r(67294),ve=r(15009),o=r.n(ve),ce=r(99289),S=r.n(ce),re=r(5574),B=r.n(re),a=r(80049),se=r(3418),fe=r(97857),k=r.n(fe),K=r(85615),w=r(86745);function z(A){return H.apply(this,arguments)}function H(){return H=S()(o()().mark(function A(s){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,w.request)("/api/v1/workgroup/query/org",{method:"GET",params:k()(k()({},s),{},{client:K.bV})}));case 1:case"end":return c.stop()}},A)})),H.apply(this,arguments)}function ue(A){return L.apply(this,arguments)}function L(){return L=S()(o()().mark(function A(s){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,w.request)("/api/v1/workgroup/create",{method:"POST",data:k()(k()({},s),{},{client:K.bV})}));case 1:case"end":return c.stop()}},A)})),L.apply(this,arguments)}function oe(A){return de.apply(this,arguments)}function de(){return de=S()(o()().mark(function A(s){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,w.request)("/api/v1/workgroup/update",{method:"POST",data:k()(k()({},s),{},{client:K.bV})}));case 1:case"end":return c.stop()}},A)})),de.apply(this,arguments)}function X(A){return ae.apply(this,arguments)}function ae(){return ae=S()(o()().mark(function A(s){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,w.request)("/api/v1/workgroup/delete",{method:"POST",data:k()(k()({},s),{},{client:K.bV})}));case 1:case"end":return c.stop()}},A)})),ae.apply(this,arguments)}var ge=r(39825),G=r(30694),Ce=r(87676),le=r(18678),Le=r(11475),Ie=r(64789),Ae=r(85576),Ve=r(86250),he=r(14726),je=r(2487),Re=r(7134),Fe=r(73803),ne=r(34994),Me=r(5966),ye=r(64317),e=r(85893),Ke=function(s){var P=s.open,c=s.onClose,O=s.onSubmit,U=ne.A.useForm(),C=B()(U,1),j=C[0],N=(0,Fe.Z)(),T=N.translateString,Z=(0,Ce.u)(function(d){return d.currentOrg}),Q=(0,G.E)(function(d){return d.agentResult}),M=(0,v.useState)([]),h=B()(M,2),I=h[0],y=h[1],m=function(){console.log("handleOk"),j.validateFields().then(function(D){console.log("form values:",D);var W=j.getFieldValue("nickname"),g=j.getFieldValue("agents"),i={nickname:W,agentUids:g,orgUid:Z.uid};console.log("workgroup:",i),O(i)}).catch(function(D){console.log("Form errors:",D)})},q=function(){console.log("handleCancel"),c()},te=function(D){console.log("selected ".concat(D)),y(D)};return(0,e.jsx)("div",{children:(0,e.jsx)(Ae.Z,{title:"\u521B\u5EFA\u6280\u80FD\u7EC4",open:P,onOk:m,onCancel:q,children:(0,e.jsxs)(ne.A,{form:j,name:"wgForm",submitter:{render:function(D,W){return(0,e.jsx)(e.Fragment,{})}},children:[(0,e.jsx)(Me.Z,{label:"\u6280\u80FD\u7EC4\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}]}),(0,e.jsx)(ye.Z,{name:"agents",label:"\u6210\u5458",options:Q.data.content.map(function(d){return{value:d.uid,label:T(d.nickname)}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:I,onChange:te}})]})})})},Ge=Ke,Ne=function(){var s=(0,w.useIntl)(),P=(0,v.useRef)(!1),c=(0,Fe.Z)(),O=c.translateStringTranct,U=(0,ge.Z)(),C=U.isDarkMode,j=(0,v.useState)(!1),N=B()(j,2),T=N[0],Z=N[1],Q=(0,Ce.u)(function(u){return u.currentOrg}),M=(0,G.E)(function(u){return u.setAgentResult}),h=(0,le.$)(function(u){return{workgroupResult:u.workgroupResult,currentWorkgroup:u.currentWorkgroup,setWorkgroupResult:u.setWorkgroupResult,insertWorkgroup:u.insertWorkgroup,setCurrentWorkgroup:u.setCurrentWorkgroup,deleteCurrentWorkgroup:u.deleteCurrentWorkgroup}}),I=h.workgroupResult,y=h.currentWorkgroup,m=h.setWorkgroupResult,q=h.insertWorkgroup,te=h.setCurrentWorkgroup,d=h.deleteCurrentWorkgroup,D=Ae.Z.useModal(),W=B()(D,2),g=W[0],i=W[1],n=function(t){g.confirm({title:s.formatMessage({id:"deleteTip"}),icon:(0,e.jsx)(Le.Z,{}),content:"".concat(s.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(t.nickname,"\u3011\uFF1F"),onOk:function(){f(t)},onCancel:function(){},okText:s.formatMessage({id:"ok"}),cancelText:s.formatMessage({id:"cancel"})})},f=function(){var u=S()(o()().mark(function t(b){var l;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return console.log("delete workgroup",b),a.yw.loading(s.formatMessage({id:"deleting",defaultMessage:"Deleting"})),F.next=4,X(b);case 4:l=F.sent,console.log("delete workgroup response",l),l.code===200?(a.yw.destroy(),a.yw.success(s.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),d(b.uid)):(a.yw.destroy(),a.yw.error(l.message));case 7:case"end":return F.stop()}},t)}));return function(b){return u.apply(this,arguments)}}(),E=function(){var u=S()(o()().mark(function t(){var b,l;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return b={pageNumber:0,pageSize:50,orgUid:Q.uid},F.next=3,(0,se._t)(b);case 3:l=F.sent,console.log("queryAgentsByOrg: ",l),l.code===200?M(l):a.yw.error(l.message);case 6:case"end":return F.stop()}},t)}));return function(){return u.apply(this,arguments)}}(),R=function(){var u=S()(o()().mark(function t(){var b,l;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!P.current){F.next=3;break}return console.log("isLoading: 1",P.current),F.abrupt("return");case 3:return P.current=!0,a.yw.loading("loading"),b={pageNumber:0,pageSize:50,orgUid:Q.uid},F.next=8,z(b);case 8:l=F.sent,console.log("getWorkgroups",l),l.code===200?(a.yw.destroy(),m(l)):(a.yw.destroy(),a.yw.error(l.message)),P.current=!1;case 12:case"end":return F.stop()}},t)}));return function(){return u.apply(this,arguments)}}();(0,v.useEffect)(function(){R(),E()},[]);var _=function(){Z(!0)},V=function(){var u=S()(o()().mark(function t(b){var l;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return console.log("handleSave",b),a.yw.loading(s.formatMessage({id:"creating",defaultMessage:"Creating"})),F.next=4,ue(b);case 4:l=F.sent,console.log("create workgroup:",l),l.code===200?(a.yw.destroy(),a.yw.success(s.formatMessage({id:"create.success",defaultMessage:"create success"})),Z(!1),q(l.data)):(a.yw.destroy(),Z(!1),a.yw.error(l.message));case 7:case"end":return F.stop()}},t)}));return function(b){return u.apply(this,arguments)}}(),ee=function(){Z(!1)},Y=function(t,b){te(t)},p=function(t,b){console.log("list on delete",t),n(t)},x=function(){_()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Ve.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,e.jsx)(he.ZP,{size:"small",type:"primary",icon:(0,e.jsx)(Ie.Z,{}),onClick:x,children:s.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,e.jsx)(he.ZP,{size:"small",onClick:R,children:s.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,e.jsx)(he.ZP,{onClick:function(){return n(y)},size:"small",danger:!0,disabled:y&&y.uid==="",children:s.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,e.jsx)(je.Z,{itemLayout:"horizontal",dataSource:I.data.content,renderItem:function(t,b){return(0,e.jsx)(je.Z.Item,{style:y.uid===t.uid?{backgroundColor:C?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return Y(t,b)},children:(0,e.jsx)(je.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,e.jsx)(Re.C,{src:t.avatar}),title:(0,e.jsx)(e.Fragment,{children:O(t.nickname)}),description:O(t.description)})})}}),(0,e.jsx)(Ge,{open:T,onClose:ee,onSubmit:V}),i]})},Qe=Ne,$e=r(48096),Pe=r(90672),xe=r(8232),ze=r(88484),He=r(66723),Je=function(){var s=ne.A.useForm(),P=B()(s,1),c=P[0],O=(0,w.useIntl)(),U=(0,Fe.Z)(),C=U.translateString,j=(0,G.E)(function(n){return n.agentResult}),N=(0,le.$)(function(n){return{currentWorkgroup:n.currentWorkgroup,setCurrentWorkgroup:n.setCurrentWorkgroup}}),T=N.currentWorkgroup,Z=N.setCurrentWorkgroup,Q=(0,v.useState)([]),M=B()(Q,2),h=M[0],I=M[1],y=(0,v.useState)(""),m=B()(y,2),q=m[0],te=m[1];(0,v.useEffect)(function(){var n=le.$.subscribe(function(f){var E;c.setFieldValue("nickname",C(f.currentWorkgroup.nickname)),c.setFieldValue("description",C(f.currentWorkgroup.description));var R=[];(E=f.currentWorkgroup.agents)===null||E===void 0||E.forEach(function(_){R.push(_.uid)}),I(R)});return n},[T]);var d=function(f){console.log("selected ".concat(f)),I(f)},D=function(f){console.log("handleUploadSuccess:",f),te(f)},W=function(f){console.log("handleUploadError:",f)},g=function(){var n=S()(o()().mark(function f(E){var R,_,V,ee,Y,p;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("onFinish",E),a.yw.loading("\u4FEE\u6539\u4E2D..."),Y=k()(k()(k()({},T),E),{},{avatar:q,agentUids:h,serviceSettings:k()(k()({},T.serviceSettings),{},{robotUid:(R=T.serviceSettings)===null||R===void 0||(R=R.robot)===null||R===void 0?void 0:R.uid,quickButtonUids:(_=T.serviceSettings)===null||_===void 0||(_=_.quickButtons)===null||_===void 0?void 0:_.map(function(t){return t.uid}),faqUids:(V=T.serviceSettings)===null||V===void 0||(V=V.faqs)===null||V===void 0?void 0:V.map(function(t){return t.uid}),worktimeUids:(ee=T.serviceSettings)===null||ee===void 0||(ee=ee.worktimes)===null||ee===void 0?void 0:ee.map(function(t){return t.uid})})}),console.log("workgroupObject:",Y),u.next=6,oe(Y);case 6:p=u.sent,console.log("updateWorkGroup response:",p),p.code===200?(a.yw.destroy(),a.yw.success(O.formatMessage({id:"update.success"})),Z(p.data)):(a.yw.destroy(),a.yw.error(p.message));case 9:case"end":return u.stop()}},f)}));return function(E){return n.apply(this,arguments)}}(),i=function(f){return Array.isArray(f)?f:f==null?void 0:f.fileList};return(0,v.useEffect)(function(){te(T==null?void 0:T.avatar)},[T]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ne.A,{form:c,style:{marginLeft:"100px",width:"300px"},onFinish:g,initialValues:{nickname:C(T.nickname),description:C(T.description)},children:[(0,e.jsx)(xe.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:i,label:O.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,e.jsxs)(He.G,{onSuccess:D,onError:W,children:[(0,e.jsx)(Re.C,{src:q}),(0,e.jsx)(he.ZP,{icon:(0,e.jsx)(ze.Z,{}),children:O.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,e.jsx)(Me.Z,{width:"md",name:"nickname",label:"\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6280\u80FD\u7EC4\u6635\u79F0"}]}),(0,e.jsx)(ye.Z,{name:"agents",label:"\u6210\u5458",width:"md",options:j.data.content.map(function(n){return{value:n.uid,label:C(n.nickname)}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:h,onChange:d},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458"}]}),(0,e.jsx)(Pe.Z,{width:"md",name:"description",label:"\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}]})]})})},Xe=Je,We=r(63434),Ye=r(31199),qe=function(){var s,P,c,O,U=ne.A.useForm(),C=B()(U,1),j=C[0],N=(0,w.useIntl)(),T=(0,Fe.Z)(),Z=T.translateString,Q=(0,v.useState)(!1),M=B()(Q,2),h=M[0],I=M[1],y=(0,le.$)(function(W){return{currentWorkgroup:W.currentWorkgroup,setCurrentWorkgroup:W.setCurrentWorkgroup}}),m=y.currentWorkgroup,q=y.setCurrentWorkgroup;(0,v.useEffect)(function(){var W=le.$.subscribe(function(g){var i,n,f,E,R,_;j.setFieldValue("welcomeTip",Z((i=g.currentWorkgroup)===null||i===void 0||(i=i.serviceSettings)===null||i===void 0?void 0:i.welcomeTip)),j.setFieldValue("topTip",Z((n=g.currentWorkgroup)===null||n===void 0||(n=n.serviceSettings)===null||n===void 0?void 0:n.topTip)),j.setFieldValue("showTopTip",(f=g.currentWorkgroup)===null||f===void 0||(f=f.serviceSettings)===null||f===void 0?void 0:f.showTopTip),j.setFieldValue("leavemsgTip",Z((E=g.currentWorkgroup)===null||E===void 0||(E=E.serviceSettings)===null||E===void 0?void 0:E.leavemsgTip)),j.setFieldValue("autoCloseMin",(R=g.currentWorkgroup)===null||R===void 0||(R=R.serviceSettings)===null||R===void 0?void 0:R.autoCloseMin),j.setFieldValue("showLogo",(_=g.currentWorkgroup)===null||_===void 0||(_=_.serviceSettings)===null||_===void 0?void 0:_.showLogo)});return W},[m]),(0,v.useEffect)(function(){I(m==null?void 0:m.serviceSettings.showTopTip)},[m]);var te=function(g){console.log("onShowTopTipChange = ".concat(g.target.checked)),I(g.target.checked)},d=function(g){console.log("onShowLogoChange = ".concat(g.target.checked))},D=function(){var W=S()(o()().mark(function g(i){var n,f,E,R,_,V;return o()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return console.log("onFinish:",i," showTopTip:",h),_=k()(k()({},m),{},{serviceSettings:k()(k()({},m.serviceSettings),{},{topTip:(i==null?void 0:i.topTip)||"",showTopTip:h,welcomeTip:(i==null?void 0:i.welcomeTip)||"",leavemsgTip:(i==null?void 0:i.leavemsgTip)||"",autoCloseMin:(i==null?void 0:i.autoCloseMin)||25,showLogo:(i==null?void 0:i.showLogo)||!0,robotUid:(n=m.serviceSettings)===null||n===void 0||(n=n.robot)===null||n===void 0?void 0:n.uid,quickButtonUids:(f=m.serviceSettings)===null||f===void 0||(f=f.quickButtons)===null||f===void 0?void 0:f.map(function(p){return p.uid}),faqUids:(E=m.serviceSettings)===null||E===void 0||(E=E.faqs)===null||E===void 0?void 0:E.map(function(p){return p.uid}),worktimeUids:(R=m.serviceSettings)===null||R===void 0||(R=R.worktimes)===null||R===void 0?void 0:R.map(function(p){return p.uid})}),agentUids:m.agents.map(function(p){return p.uid})}),console.log("workgroupObject:",_),a.yw.loading("\u66F4\u65B0\u4E2D..."),Y.next=6,oe(_);case 6:V=Y.sent,console.log("updateWorkGroup response:",V),V.code===200?(a.yw.destroy(),a.yw.success(N.formatMessage({id:"update.success"})),q(V.data)):(a.yw.destroy(),a.yw.error(V.message));case 9:case"end":return Y.stop()}},g)}));return function(i){return W.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ne.A,{form:j,style:{marginLeft:"100px"},onFinish:D,initialValues:{topTip:Z(m==null||(s=m.serviceSettings)===null||s===void 0?void 0:s.topTip),showTopTip:m==null||(P=m.serviceSettings)===null||P===void 0?void 0:P.showTopTip,welcomeTip:Z(m==null||(c=m.serviceSettings)===null||c===void 0?void 0:c.welcomeTip),leavemsgTip:Z(m==null||(O=m.serviceSettings)===null||O===void 0?void 0:O.leavemsgTip),autoCloseMin:m==null?void 0:m.serviceSettings.autoCloseMin,showLogo:m==null?void 0:m.serviceSettings.showLogo},children:[(0,e.jsx)(We.Z,{name:"showTopTip",width:"md",label:"\u663E\u793A\u7F6E\u9876\u8BED",fieldProps:{onChange:te}}),h&&(0,e.jsx)(Pe.Z,{width:"md",name:"topTip",label:"\u7F6E\u9876\u8BED"}),(0,e.jsx)(Pe.Z,{width:"md",name:"welcomeTip",label:"\u6B22\u8FCE\u8BED"}),(0,e.jsx)(Pe.Z,{width:"md",name:"leavemsgTip",label:"\u79BB\u7EBF\u7559\u8A00\u63D0\u793A"}),(0,e.jsx)(Ye.Z,{width:"md",name:"autoCloseMin",label:"\u65E0\u65B0\u6D88\u606F\u4F1A\u8BDD\u81EA\u52A8\u5173\u95ED\u65F6\u957F(\u5355\u4F4D\uFF1A\u5206\u949F)",min:1}),(0,e.jsx)(We.Z,{name:"showLogo",width:"md",label:"\u663E\u793ALogo",fieldProps:{onChange:d}})]})})},er=qe,rr=r(19632),nr=r.n(rr),tr=r(37326),ur=r(55895),or=r(33725),sr=r(27484),Ee=r.n(sr),Be=r(35612),ar=r(10285),ir=r.n(ar),lr=r(76545);Ee().extend(ir());var we="HH:mm:ss",dr=function(){var s,P,c,O,U,C=ne.A.useForm(),j=B()(C,1),N=j[0],T=(0,v.useRef)(!1),Z=(0,v.useRef)(),Q=(0,w.useIntl)(),M=(0,le.$)(function(p){return{currentWorkgroup:p.currentWorkgroup,setCurrentWorkgroup:p.setCurrentWorkgroup}}),h=M.currentWorkgroup,I=M.setCurrentWorkgroup,y=(0,tr.V)(function(p){return{robotResult:p.robotResult,setRobotResult:p.setRobotResult}}),m=y.robotResult,q=y.setRobotResult,te=(0,Ce.u)(function(p){return p.currentOrg}),d=(0,Fe.Z)(),D=d.translateString,W=(0,v.useState)([]),g=B()(W,2),i=g[0],n=g[1];(0,v.useEffect)(function(){var p;n((h==null||(p=h.serviceSettings)===null||p===void 0?void 0:p.worktimes)||[]);var x=le.$.subscribe(function(u){var t,b,l,$,F;N.setFieldValue("defaultRobot",(t=u.currentWorkgroup)===null||t===void 0||(t=t.serviceSettings)===null||t===void 0?void 0:t.defaultRobot),N.setFieldValue("offlineRobot",(b=u.currentWorkgroup)===null||b===void 0||(b=b.serviceSettings)===null||b===void 0?void 0:b.offlineRobot),N.setFieldValue("nonWorktimeRobot",(l=u.currentWorkgroup)===null||l===void 0||(l=l.serviceSettings)===null||l===void 0?void 0:l.nonWorktimeRobot),N.setFieldValue("robotUid",($=u.currentWorkgroup)===null||$===void 0||($=$.serviceSettings)===null||$===void 0||($=$.robot)===null||$===void 0?void 0:$.uid),n(((F=u.currentWorkgroup)===null||F===void 0||(F=F.serviceSettings)===null||F===void 0?void 0:F.worktimes)||[])});return x},[h]);var f=function(){var p=S()(o()().mark(function x(){var u,t;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!T.current){l.next=3;break}return console.log("isLoading: 1",T.current),l.abrupt("return");case 3:return T.current=!0,a.yw.loading("loading"),u={pageNumber:0,pageSize:50,orgUid:te.uid},l.next=8,(0,lr.p0)(u);case 8:t=l.sent,console.log("queryRobotsByOrg: ",t),t.code===200?q(t):a.yw.error(t.message),T.current=!1,a.yw.destroy();case 13:case"end":return l.stop()}},x)}));return function(){return p.apply(this,arguments)}}();(0,v.useEffect)(function(){var p;((p=m.data)===null||p===void 0||(p=p.content)===null||p===void 0?void 0:p.length)===0&&f()},[m]);var E=function(x){console.log("checked = ".concat(x))},R=function(){var p=S()(o()().mark(function x(u){var t,b,l,$,F,ie;return o()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return console.log("onFinish:",u),$=(t=Z.current)===null||t===void 0?void 0:t.getList(),console.log("worktimes: ",$),a.yw.loading("\u6B63\u5728\u4FEE\u6539..."),F=k()(k()({},h),{},{agentUids:h.agents.map(function(me){return me.uid}),serviceSettings:k()(k()({},h.serviceSettings),{},{defaultRobot:u.defaultRobot,offlineRobot:u.offlineRobot,nonWorktimeRobot:u.nonWorktimeRobot,robotUid:u.robotUid,worktimeUids:i.map(function(me){return me==null?void 0:me.uid}),quickButtonUids:(b=h.serviceSettings)===null||b===void 0||(b=b.quickButtons)===null||b===void 0?void 0:b.map(function(me){return me.uid}),faqUids:(l=h.serviceSettings)===null||l===void 0||(l=l.faqs)===null||l===void 0?void 0:l.map(function(me){return me.uid})})}),console.log("workgroupObject:",F),be.next=8,oe(F);case 8:ie=be.sent,console.log("updateWorkGroup response:",ie),ie.code===200?(a.yw.destroy(),a.yw.success(Q.formatMessage({id:"update.success"})),I(ie.data)):(a.yw.destroy(),a.yw.error(ie.message));case 11:case"end":return be.stop()}},x)}));return function(u){return p.apply(this,arguments)}}(),_=function(){var x=[];return i.map(function(u){x.push({worktime:[Ee()(u.startTime,we),Ee()(u.endTime,we)]})}),x},V=function(){var p=S()(o()().mark(function x(u,t,b){var l,$,F;return o()().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return console.log("onWorktimeChange:",b,t),$={uid:(l=i[b])===null||l===void 0?void 0:l.uid,startTime:t[0],endTime:t[1]},ke.next=4,(0,Be.AW)($);case 4:F=ke.sent,console.log("updateWorktime response:",F),F.code===200||a.yw.error(F.message);case 7:case"end":return ke.stop()}},x)}));return function(u,t,b){return p.apply(this,arguments)}}(),ee=function(){var p=S()(o()().mark(function x(){var u,t;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("createWorktime"),u={startTime:"00:00:00",endTime:"23:59:59"},l.next=4,(0,Be.gk)(u);case 4:t=l.sent,console.log("createWorktime response:",t),t.code===200?n([].concat(nr()(i),[t.data])):a.yw.error(t.message);case 7:case"end":return l.stop()}},x)}));return function(){return p.apply(this,arguments)}}(),Y=function(){var p=S()(o()().mark(function x(u){var t,b,l,$;return o()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return console.log("deleteWorktime:",u,(t=i[u])===null||t===void 0?void 0:t.uid),l={uid:(b=i[u])===null||b===void 0?void 0:b.uid},ie.next=4,(0,Be.$$)(l);case 4:$=ie.sent,console.log("deleteWorktime response:",$),$.code===200?n(i.filter(function(ke,be){return be!==u})):a.yw.error($.message);case 7:case"end":return ie.stop()}},x)}));return function(u){return p.apply(this,arguments)}}();return(0,v.useEffect)(function(){console.log("worktimes:",i),N.setFieldValue("worktimes",_())},[i]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ne.A,{form:N,style:{marginLeft:"100px"},initialValues:{defaultRobot:h==null||(s=h.serviceSettings)===null||s===void 0?void 0:s.defaultRobot,offlineRobot:h==null||(P=h.serviceSettings)===null||P===void 0?void 0:P.offlineRobot,nonWorktimeRobot:h==null||(c=h.serviceSettings)===null||c===void 0?void 0:c.nonWorktimeRobot,robotUid:h==null||(O=h.serviceSettings)===null||O===void 0||(O=O.robot)===null||O===void 0?void 0:O.uid},onFinish:R,children:[(0,e.jsx)(We.Z,{name:"defaultRobot",width:"md",label:"\u9ED8\u8BA4\u542F\u7528\u673A\u5668\u4EBA"}),(0,e.jsx)(We.Z,{name:"offlineRobot",width:"md",label:"\u65E0\u5BA2\u670D\u5728\u7EBF\u65F6\u542F\u7528\u673A\u5668\u4EBA"}),(0,e.jsx)(We.Z,{name:"nonWorktimeRobot",width:"md",label:"\u975E\u5DE5\u4F5C\u65F6\u95F4\u542F\u7528\u673A\u5668\u4EBA"}),(0,e.jsx)(ur.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\uFF0C\u652F\u6301\u591A\u4E2A",creatorRecord:{worktime:[Ee()("00:00:00",we),Ee()("23:59:59",we)]},initialValue:_(),creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664"},itemRender:function(x){var u=x.listDom,t=x.action;return(0,e.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[u,t]})},min:1,max:4,actionRef:Z,actionGuard:{beforeAddRow:function(){var p=S()(o()().mark(function u(t,b,l){return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return console.log("beforeAddRow:",t,b),F.next=3,ee();case 3:return F.abrupt("return",new Promise(function(ie){ie(!0)}));case 4:case"end":return F.stop()}},u)}));function x(u,t,b){return p.apply(this,arguments)}return x}(),beforeRemoveRow:function(){var p=S()(o()().mark(function u(t,b){return o()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return console.log("beforeRemoveRow:",t),$.next=3,Y(t);case 3:return $.abrupt("return",new Promise(function(F){if(t===0){F(!1);return}F(!0)}));case 4:case"end":return $.stop()}},u)}));function x(u,t){return p.apply(this,arguments)}return x}()},children:function(x,u,t){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(or.Z.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(l,$){V(l,$,u)},format:we}},"worktime")})}}),(0,e.jsx)(ye.Z,{name:"robotUid",label:"\u673A\u5668\u4EBA",width:"md",options:m.data.content.map(function(p){return{value:p.uid,label:D(p.nickname)}}),fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u673A\u5668\u4EBA",value:h==null||(U=h.serviceSettings)===null||U===void 0||(U=U.robot)===null||U===void 0?void 0:U.uid,onChange:E}})]})})},cr=dr,_e=r(1413),gr=r(91),pr=r(22270),Oe=r(78045),vr=r(90789),mr=r(32486),fr=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],hr=v.forwardRef(function(A,s){var P=A.fieldProps,c=A.options,O=A.radioType,U=A.layout,C=A.proFieldProps,j=A.valueEnum,N=(0,gr.Z)(A,fr);return(0,e.jsx)(mr.Z,(0,_e.Z)((0,_e.Z)({valueType:O==="button"?"radioButton":"radio",ref:s,valueEnum:(0,pr.h)(j,void 0)},N),{},{fieldProps:(0,_e.Z)({options:c,layout:U},P),proFieldProps:C,filedConfig:{customLightMode:!0}}))}),Fr=v.forwardRef(function(A,s){var P=A.fieldProps,c=A.children;return(0,e.jsx)(Oe.ZP,(0,_e.Z)((0,_e.Z)({},P),{},{ref:s,children:c}))}),kr=(0,vr.G)(Fr,{valuePropName:"checked",ignoreWidth:!0}),Se=kr;Se.Group=hr,Se.Button=Oe.ZP.Button,Se.displayName="ProFormComponent";var br=Se,Wr=function(){var s=xe.Z.useForm(),P=B()(s,1),c=P[0],O=(0,w.useIntl)(),U=(0,le.$)(function(D){return{currentWorkgroup:D.currentWorkgroup,setCurrentWorkgroup:D.setCurrentWorkgroup}}),C=U.currentWorkgroup,j=U.setCurrentWorkgroup,N=(0,v.useState)(!1),T=B()(N,2),Z=T[0],Q=T[1],M=(0,v.useState)(K.Jx),h=B()(M,2),I=h[0],y=h[1];(0,v.useEffect)(function(){var D=le.$.subscribe(function(W){c.setFieldValue("recent",W.currentWorkgroup.recent),c.setFieldValue("routeType",W.currentWorkgroup.routeType)});return D},[C]),(0,v.useEffect)(function(){Q(C.recent),y(C.routeType)},[]);var m=function(W){console.log("checked = ".concat(W.target.checked)),Q(W.target.checked)},q=function(W){console.log("radio checked",W.target.value),y(W.target.value)},te=function(W,g){return[(0,e.jsx)(he.ZP,{type:"primary",onClick:function(){var n;(n=W.form)===null||n===void 0||n.submit()},children:"\u4FDD\u5B58"},"submit")]},d=function(){var D=S()(o()().mark(function W(g){var i,n,f,E,R,_;return o()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return console.log("onFinish:",g),a.yw.loading("\u6B63\u5728\u4FEE\u6539..."),R=k()(k()(k()({},C),{},{agentUids:C.agents.map(function(Y){return Y.uid})},g),{},{serviceSettings:k()(k()({},C.serviceSettings),{},{robotUid:(i=C.serviceSettings)===null||i===void 0||(i=i.robot)===null||i===void 0?void 0:i.uid,quickButtonUids:(n=C.serviceSettings)===null||n===void 0||(n=n.quickButtons)===null||n===void 0?void 0:n.map(function(Y){return Y.uid}),faqUids:(f=C.serviceSettings)===null||f===void 0||(f=f.faqs)===null||f===void 0?void 0:f.map(function(Y){return Y.uid}),worktimeUids:(E=C.serviceSettings)===null||E===void 0||(E=E.worktimes)===null||E===void 0?void 0:E.map(function(Y){return Y.uid})})}),console.log("workgroupObject:",R),ee.next=6,oe(R);case 6:_=ee.sent,console.log("updateWorkGroup response:",_),_.code===200?(a.yw.destroy(),a.yw.success(O.formatMessage({id:"update.success"})),j(_.data)):(a.yw.destroy(),a.yw.error(_.message));case 9:case"end":return ee.stop()}},W)}));return function(g){return D.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ne.A,{form:c,style:{marginLeft:"100px"},initialValues:{recent:C==null?void 0:C.recent,routeType:C==null?void 0:C.routeType},submitter:{render:te},onFinish:d,children:[(0,e.jsx)(We.Z,{name:"recent",label:"\u719F\u5BA2\u4F18\u5148",fieldProps:{onChange:m}}),(0,e.jsx)(br.Group,{name:"routeType",label:"\u8DEF\u7531\u7C7B\u578B",options:[{label:"\u8F6E\u8BE2",value:K.Jx},{label:"\u5F53\u65E5\u63A5\u5F85\u6700\u5C11\u4F18\u5148",value:K.C},{label:"\u9971\u548C\u5EA6\u6700\u4F4E\u4F18\u5148",value:K.Vd},{label:"\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148",value:K.Q2}],fieldProps:{value:I,onChange:q}}),(0,e.jsxs)(ne.A.Item,{children:[I===K.Jx&&(0,e.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u4E0A\u7EBF\u65F6\u95F4\u8FDB\u5165\u961F\u5217\u8F6E\u6D41\u5206\u914D\u3002\u6CE8\u610F\uFF1A\u5F53\u5BA2\u670D\u7F51\u7EDC\u4E0D\u7A33\u5B9A\u6389\u7EBF\u91CD\u8FDE\u4E4B\u540E\uFF0C\u4F1A\u91CD\u65B0\u6392\u5230\u961F\u5217\u672B\u5C3E"}),I===K.C&&(0,e.jsx)("p",{children:"\u6839\u636E\u5F53\u65E5(0\u70B9\u5F00\u59CB)\u5BA2\u670D\u63A5\u5F85\u603B\u6570\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u5BA2\u670D\u4E0A\u73ED\u65F6\u95F4\u4E0D\u7EDF\u4E00\uFF0C\u665A\u767B\u5F55\u8005\u767B\u5F55\u540E\u4F1A\u96C6\u4E2D\u6536\u5230\u5206\u914D\u65B0\u5BA2\uFF0C\u76F4\u5230\u8DDF\u5176\u4ED6\u5728\u7EBF\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\u4E3A\u6B62"}),I===K.Vd&&(0,e.jsx)("p",{children:"\u6839\u636E\uFF08\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF-\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6570\u91CF\uFF09\u4E4B\u5DEE\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5927\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u6BCF\u4E2A\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\uFF0C\u5219\u6B64\u65B9\u6CD5\u8DDF\u2019\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148\u2018\u6548\u679C\u4E00\u6837"}),I===K.Q2&&(0,e.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u4F1A\u53D7\u5230\u5BA2\u670D\u63A5\u5F85\u901F\u5EA6\u7684\u5F71\u54CD\uFF0C\u63A5\u5F85\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u5BA2\u670D\u624B\u52A8\u7ED3\u675F\u4F1A\u8BDD\u6709\u5229\u4E8E\u52A0\u901F\u5206\u914D\u65B0\u5BA2"})]})]})})},Cr=Wr,yr=function(){var s=(0,w.useAccess)();return s.canDebug&&console.log("leaveMsg canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(w.Access,{accessible:s.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(w.FormattedMessage,{id:K.h5})}),children:"leave msg"})})})},Er=yr,wr=r(9465),Ue=r(48489),Te=r(40056),Ze=r(96074),_r=function(){var s,P,c=ne.A.useForm(),O=B()(c,1),U=O[0],C=(0,w.useIntl)(),j=(0,Fe.Z)(),N=j.translateString,T=(0,Ce.u)(function(d){return d.currentOrg}),Z=(0,v.useState)(),Q=B()(Z,2),M=Q[0],h=Q[1],I=(0,le.$)(function(d){return{currentWorkgroup:d.currentWorkgroup,setCurrentWorkgroup:d.setCurrentWorkgroup}}),y=I.currentWorkgroup,m=I.setCurrentWorkgroup,q=function(){var d=S()(o()().mark(function D(){var W,g;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.yw.loading(C.formatMessage({id:"loading",defaultMessage:"Loading"})),W={pageNumber:0,pageSize:50,orgUid:T.uid},n.next=4,(0,wr.qL)(W);case 4:g=n.sent,console.log("getAllQuickbuttons response:",W,g),a.yw.destroy(),g.code===200?h(g):a.yw.error(g.message);case 8:case"end":return n.stop()}},D)}));return function(){return d.apply(this,arguments)}}();(0,v.useEffect)(function(){q()},[T]),(0,v.useEffect)(function(){var d;U.setFieldValue("quickButtonUids",y==null||(d=y.serviceSettings)===null||d===void 0||(d=d.quickButtons)===null||d===void 0?void 0:d.map(function(D){return D.uid}))},[y]);var te=function(){var d=S()(o()().mark(function D(W){var g,i,n,f,E;return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return console.log("onFinish",W),f=k()(k()({},y),{},{serviceSettings:k()(k()({},y.serviceSettings),{},{robotUid:(g=y.serviceSettings)===null||g===void 0||(g=g.robot)===null||g===void 0?void 0:g.uid,quickButtonUids:W.quickButtonUids,faqUids:(i=y.serviceSettings)===null||i===void 0||(i=i.faqs)===null||i===void 0?void 0:i.map(function(V){return V.uid}),worktimeUids:(n=y.serviceSettings)===null||n===void 0||(n=n.worktimes)===null||n===void 0?void 0:n.map(function(V){return V.uid})}),agentUids:y.agents.map(function(V){return V.uid})}),console.log("workgroupObject:",f),_.next=5,oe(f);case 5:E=_.sent,console.log("updateWorkGroup response:",E),E.code===200?(a.yw.destroy(),a.yw.success(C.formatMessage({id:"update.success"})),m(E.data)):(a.yw.destroy(),a.yw.error(E.message));case 8:case"end":return _.stop()}},D)}));return function(W){return d.apply(this,arguments)}}();return(0,e.jsxs)("div",{children:[(0,e.jsx)(Te.Z,{message:"\u8BF7\u5148\u5230 \u77E5\u8BC6\u5E93 -> \u5FEB\u6377\u6309\u94AE -> \u65B0\u5EFA\uFF0C\u521B\u5EFA\u5FEB\u6377\u6309\u94AE\u4E4B\u540E\uFF0C\u518D\u6765\u6DFB\u52A0",type:"success",action:(0,e.jsx)(he.ZP,{type:"link",icon:(0,e.jsx)(Ue.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/")},children:C.formatMessage({id:"setting.helpdoc"})})}),(0,e.jsx)(Te.Z,{message:"\u63D0\u4EA4\u4E4B\u540E\uFF0C\u5BF9\u65B0\u4F1A\u8BDD\u7ACB\u5373\u751F\u6548\u3002\u5BF9\u4E8E\u8FDB\u884C\u4E2D\u4F1A\u8BDD\uFF0C\u9700\u8981\u5173\u95ED\u4E4B\u540E\uFF0C\u91CD\u65B0\u8FDB\u5165\u624D\u4F1A\u751F\u6548",type:"warning",style:{marginTop:10}}),(0,e.jsx)(Ze.Z,{}),(0,e.jsx)(ne.A,{form:U,layout:"vertical",initialValues:{quickButtonUids:y==null||(s=y.serviceSettings)===null||s===void 0||(s=s.quickButtons)===null||s===void 0?void 0:s.map(function(d){return d.uid})},onFinish:te,children:(0,e.jsx)(ye.Z,{name:"quickButtonUids",width:"md",label:C.formatMessage({id:"quickbutton"}),options:M==null||(P=M.data)===null||P===void 0?void 0:P.content.map(function(d){return{label:N(d.title),value:d.uid}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,e.jsx)(w.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})})]})},Dr=_r,Pr=r(52688),Sr=function(){var s,P=(0,w.useIntl)(),c=ne.A.useForm(),O=B()(c,1),U=O[0],C=(0,le.$)(function(Z){return{currentWorkgroup:Z.currentWorkgroup,setCurrentWorkgroup:Z.setCurrentWorkgroup}}),j=C.currentWorkgroup,N=C.setCurrentWorkgroup;(0,v.useEffect)(function(){var Z=le.$.subscribe(function(Q){var M;U.setFieldValue("showRateBtn",(M=Q.currentWorkgroup)===null||M===void 0||(M=M.serviceSettings)===null||M===void 0?void 0:M.showRateBtn)});return Z},[j]);var T=function(){var Z=S()(o()().mark(function Q(M){var h,I;return o()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("handleShowRateSwitchChange:",M),h=k()(k()({},j),{},{agentUids:j.agents.map(function(q){return q.uid}),serviceSettings:k()(k()({},j.serviceSettings),{},{showRateBtn:M})}),console.log("workgroupObject:",h),m.next=5,oe(h);case 5:I=m.sent,console.log("updateWorkGroup response:",I),I.code===200?(a.yw.destroy(),a.yw.success(P.formatMessage({id:"update.success"})),N(I.data)):(a.yw.destroy(),a.yw.error(I.message));case 8:case"end":return m.stop()}},Q)}));return function(M){return Z.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ne.A,{form:U,submitter:{render:!1},initialValues:{showRateBtn:j==null||(s=j.serviceSettings)===null||s===void 0?void 0:s.showRateBtn},children:(0,e.jsx)(Pr.Z,{width:"md",name:"showRateBtn",label:"\u662F\u5426\u663E\u793A\u8BC4\u4EF7\u6309\u94AE",fieldProps:{onChange:T}})})})},Tr=Sr,jr=r(40401),Br=function(){var s,P,c=ne.A.useForm(),O=B()(c,1),U=O[0],C=(0,w.useIntl)(),j=(0,Fe.Z)(),N=j.translateString,T=(0,Ce.u)(function(d){return d.currentOrg}),Z=(0,v.useState)(),Q=B()(Z,2),M=Q[0],h=Q[1],I=(0,le.$)(function(d){return{currentWorkgroup:d.currentWorkgroup,setCurrentWorkgroup:d.setCurrentWorkgroup}}),y=I.currentWorkgroup,m=I.setCurrentWorkgroup,q=function(){var d=S()(o()().mark(function D(){var W,g;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.yw.loading(C.formatMessage({id:"loading",defaultMessage:"Loading"})),W={pageNumber:0,pageSize:50,orgUid:T.uid},n.next=4,(0,jr.pf)(W);case 4:g=n.sent,console.log("getAllFaqs response:",W,g),a.yw.destroy(),g.code===200?h(g):a.yw.error(g.message);case 8:case"end":return n.stop()}},D)}));return function(){return d.apply(this,arguments)}}();(0,v.useEffect)(function(){q()},[T]),(0,v.useEffect)(function(){var d;U.setFieldValue("faqUids",(y==null||(d=y.serviceSettings)===null||d===void 0?void 0:d.faqs.map(function(D){return D.uid}))||[])},[y]);var te=function(){var d=S()(o()().mark(function D(W){var g,i,n,f,E;return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return console.log("onFinish",W),f=k()(k()({},y),{},{serviceSettings:k()(k()({},y.serviceSettings),{},{robotUid:(g=y.serviceSettings)===null||g===void 0||(g=g.robot)===null||g===void 0?void 0:g.uid,quickButtonUids:(i=y.serviceSettings)===null||i===void 0?void 0:i.quickButtons.map(function(V){return V.uid}),faqUids:W.faqUids,worktimeUids:(n=y.serviceSettings)===null||n===void 0||(n=n.worktimes)===null||n===void 0?void 0:n.map(function(V){return V.uid})}),agentUids:y.agents.map(function(V){return V.uid})}),console.log("workgroupObject:",f),_.next=5,oe(f);case 5:E=_.sent,console.log("updateWorkGroup response:",E),E.code===200?(a.yw.destroy(),a.yw.success(C.formatMessage({id:"update.success"})),m(E.data)):(a.yw.destroy(),a.yw.error(E.message));case 8:case"end":return _.stop()}},D)}));return function(W){return d.apply(this,arguments)}}();return(0,e.jsxs)("div",{children:[(0,e.jsx)(Te.Z,{message:"\u8BF7\u5148\u5230 \u77E5\u8BC6\u5E93 -> \u5E38\u89C1\u95EE\u9898 -> \u65B0\u5EFA\uFF0C\u521B\u5EFA\u5E38\u89C1\u95EE\u9898\u4E4B\u540E\uFF0C\u518D\u6765\u6DFB\u52A0",type:"success",action:(0,e.jsx)(he.ZP,{type:"link",icon:(0,e.jsx)(Ue.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/")},children:C.formatMessage({id:"setting.helpdoc"})})}),(0,e.jsx)(Te.Z,{message:"\u63D0\u4EA4\u4E4B\u540E\uFF0C\u5BF9\u65B0\u4F1A\u8BDD\u7ACB\u5373\u751F\u6548\u3002\u5BF9\u4E8E\u8FDB\u884C\u4E2D\u4F1A\u8BDD\uFF0C\u9700\u8981\u5173\u95ED\u4E4B\u540E\uFF0C\u91CD\u65B0\u8FDB\u5165\u624D\u4F1A\u751F\u6548",type:"warning",style:{marginTop:10}}),(0,e.jsx)(Ze.Z,{}),(0,e.jsx)(ne.A,{form:U,layout:"vertical",initialValues:{faqUids:(y==null||(s=y.serviceSettings)===null||s===void 0?void 0:s.faqs.map(function(d){return d.uid}))||[]},onFinish:te,children:(0,e.jsx)(ye.Z,{name:"faqUids",width:"md",label:C.formatMessage({id:"menu.knowledge.faq"}),options:M==null||(P=M.data)===null||P===void 0?void 0:P.content.map(function(d){return{label:N(d.title),value:d.uid}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,e.jsx)(w.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})})]})},Ar=Br,Rr=[{key:"quickbutton",label:(0,e.jsx)(w.FormattedMessage,{id:"menu.knowledge.quickbutton",defaultMessage:"QuickButton"}),children:(0,e.jsx)(Dr,{})},{key:"faq",label:(0,e.jsx)(w.FormattedMessage,{id:"menu.knowledge.faq",defaultMessage:"FAQ"}),children:(0,e.jsx)(Ar,{})},{key:"rate",label:"\u8BC4\u4EF7\u8BBE\u7F6E",children:(0,e.jsx)(Tr,{})},{key:"leaveMsg",label:"\u7559\u8A00\u8BBE\u7F6E",children:(0,e.jsx)(Er,{})}],Mr=function(){var s=(0,w.useIntl)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)($e.Z,{tabPosition:"left",items:Rr})})},$r=Mr,xr=r(36649),Or=r(45106),Ur=r(34937),Zr=r(60478),Lr=function(){var s=(0,w.useIntl)(),P=(0,v.useState)([]),c=B()(P,2),O=c[0],U=c[1],C=function(T){console.log(T)},j=[{key:"basic",label:s.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(Xe,{})},{key:"serviceSettings",label:s.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,e.jsx)(er,{})},{key:"robot",label:s.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,e.jsx)(cr,{})},{key:"route",label:s.formatMessage({id:"pages.workgroup.tab.route",defaultMessage:"Route"}),children:(0,e.jsx)(Cr,{})},{key:"advanced",label:s.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,e.jsx)($r,{})},{key:"channel",label:s.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(xr.Z,{type:K.aZ})},{key:"channelsocial",label:"\u793E\u4EA4\u6E20\u9053",children:(0,e.jsx)(Or.Z,{type:K.aZ})},{key:"channelshop",label:"\u7535\u5546\u6E20\u9053",children:(0,e.jsx)(Zr.Z,{type:K.aZ})},{key:"channelforeign",label:"\u6D77\u5916\u6E20\u9053",children:(0,e.jsx)(Ur.Z,{type:K.aZ})}];return(0,v.useEffect)(function(){U(j)},[]),(0,e.jsx)($e.Z,{defaultActiveKey:"1",items:O,onChange:C})},Ir=Lr,Vr=r(77154),Kr=J.Z.Sider,Gr=J.Z.Content,Nr=function(){var s=(0,Vr.Z)(),P=s.leftSiderStyle,c=s.leftSiderWidth;return(0,e.jsxs)(J.Z,{children:[(0,e.jsx)(Kr,{width:c,style:P,children:(0,e.jsx)(Qe,{})}),(0,e.jsx)(J.Z,{children:(0,e.jsx)(Gr,{children:(0,e.jsx)(Ir,{})})})]})},Qr=Nr}}]);
