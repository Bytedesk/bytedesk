"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[331],{59908:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(11757),o=t(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},u=t(54183),i=function(e,n){return o.createElement(u.Z,(0,r.Z)({},e,{ref:n,icon:a}))};var s=o.forwardRef(i)},72614:function(e,n,t){t.d(n,{W5:function(){return m},n1:function(){return v},p0:function(){return p},u7:function(){return d},zl:function(){return y}});var r=t(90819),o=t.n(r),a=t(73193),u=t.n(a),i=t(89933),s=t.n(i),c=t(55735),l=t(30921);function d(e){return f.apply(this,arguments)}function f(){return(f=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/workgroup/query/org",{method:"GET",params:u()(u()({},n),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/workgroup/create",{method:"POST",data:u()(u()({},n),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/workgroup/update",{method:"POST",data:u()(u()({},n),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return(w=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/workgroup/update/avatar",{method:"POST",data:u()(u()({},n),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=s()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/v1/workgroup/delete",{method:"POST",data:u()(u()({},n),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},51990:function(e,n,t){var r=t(73193),o=t.n(r),a=t(84176),u=t.n(a),i=t(86803),s=t(23864),c=t(44521),l=t(55735),d=t(30921),f=t(83905),p=(t(26286),t(28977)),g=t.n(p),m=t(44194),h=t(31549),v=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];n.Z=function(e){var n=e.placeholder,t=e.defaultValue,r=e.value,a=e.style,p=e.toolbarKeys,w=e.onChange,y=(e.options,u()(e,v)),k=((0,d.useIntl)(),(0,s.Z)().isDarkMode),x=(0,m.useRef)(null),b=(0,m.useRef)(null);return(0,m.useEffect)((function(){if(x.current){if(!b.current){var e=new f.cW({element:x.current,theme:k?"dark":"light",placeholder:n,content:t,toolbarKeys:p,image:{uploadUrl:(0,c.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(l.LA8)},uploader:function(e,n,t,r){console.log("uploader:",e,n,t,r);var a=g()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,u=new FormData;return u.append("file",e),u.append("file_name",a),u.append("file_type",e.type),u.append("is_avatar","false"),u.append("kb_type",l.bE7),u.append("category_uid",""),u.append("kb_uid",""),u.append("client",l.bVn),new Promise((function(e,r){fetch(n,{method:"POST",headers:o()({Accept:"application/json"},t),body:u}).then((function(e){return e.json()})).then((function(n){if(console.log("upload data:",n),200===n.code){i.yw.destroy(),i.yw.success("".concat(a," 上传成功"));var t={errorCode:0,data:{src:n.data.fileUrl,alt:a}};e(t)}else i.yw.destroy(),i.yw.error("".concat(a," 上传失败"))})).catch((function(e){r(e)}))}))}},video:{uploadUrl:(0,c.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(l.LA8)},uploader:function(e,n,t,r){console.log("uploader:",e,n,t,r);var a=g()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,u=new FormData;return u.append("file",e),u.append("file_name",a),u.append("file_type",e.type),u.append("is_avatar","false"),u.append("kb_type",l.bE7),u.append("category_uid",""),u.append("kb_uid",""),u.append("client",l.bVn),new Promise((function(e,r){fetch(n,{method:"POST",headers:o()({Accept:"application/json"},t),body:u}).then((function(e){return e.json()})).then((function(n){if(console.log("upload data:",n),200===n.code){i.yw.destroy(),i.yw.success("".concat(a," 上传成功"));var t={errorCode:0,data:{src:n.data.fileUrl,poster:"https://www.weiyuai.cn/avatars/video_poster.png"}};e(t)}else i.yw.destroy(),i.yw.error("".concat(a," 上传失败"))})).catch((function(e){r(e)}))}))}},attachment:{uploadUrl:(0,c.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(l.LA8)},uploader:function(e,n,t,r){console.log("uploader:",e,n,t,r);var a=g()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,u=new FormData;return u.append("file",e),u.append("file_name",a),u.append("file_type",e.type),u.append("is_avatar","false"),u.append("kb_type",l.bE7),u.append("category_uid",""),u.append("kb_uid",""),u.append("client",l.bVn),new Promise((function(e,r){fetch(n,{method:"POST",headers:o()({Accept:"application/json"},t),body:u}).then((function(e){return e.json()})).then((function(n){if(console.log("upload data:",n),200===n.code){i.yw.destroy(),i.yw.success("".concat(a," 上传成功"));var t={errorCode:0,data:{href:n.data.fileUrl,fileName:a}};e(t)}else i.yw.destroy(),i.yw.error("".concat(a," 上传失败"))})).catch((function(e){r(e)}))}))}},onChange:function(e){"function"==typeof w&&w(e.getHtml(),e.getMarkdown())}});b.current=e}return function(){b.current&&(b.current.destroy(),b.current=null)}}}),[]),(0,m.useEffect)((function(){b.current&&r!==b.current.getHtml()&&b.current.setContent(r||"")}),[r]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",o()(o()({ref:x},y),{},{style:o()({height:"100%"},a)}))})}},82211:function(e,n,t){t(44194);var r=t(8247),o=t(45178),a=t(5724),u=t(54518),i=t(7785),s=t(42909),c=t(53038),l=t(81360),d=t(99980),f=t(66329),p=t(30634),g=t(31549);n.Z=function(e){var n=e.type,t=[{key:"web",label:"Web",children:(0,g.jsx)(p.Z,{type:n})},{key:"react",label:"React",children:(0,g.jsx)(s.Z,{type:n})},{key:"vue",label:"Vue",children:(0,g.jsx)(f.Z,{type:n})},{key:"svelte",label:"Svelte",children:(0,g.jsx)(l.Z,{type:n})},{key:"vanilla",label:"Vanilla",children:(0,g.jsx)(d.Z,{type:n})},{key:"ios",label:"iOS",children:(0,g.jsx)(o.Z,{type:n})},{key:"android",label:"Android",children:(0,g.jsx)(i.Z,{type:n})},{key:"uniapp",label:"Uniapp",children:(0,g.jsx)(a.Z,{type:n})},{key:"flutter",label:"Flutter",children:(0,g.jsx)(u.Z,{type:n})}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{type:n}),(0,g.jsx)(r.Z,{tabPosition:"left",items:t})]})}},53038:function(e,n,t){var r=t(30921),o=t(31549);n.Z=function(e){e.type,(0,r.useIntl)();return(0,o.jsx)(o.Fragment,{})}},6631:function(e,n,t){t.d(n,{G:function(){return f}});var r=t(73193),o=t.n(r),a=(t(44194),t(30348)),u=t(55735),i=t(28977),s=t.n(i),c=t(86803),l=t(44521),d=t(31549),f=function(e){var n=e.children,t=e.onSuccess,r=e.onError,i={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:u.IrL,category_uid:"",kb_uid:"",client:u.bVn},f={name:"file",accept:"image/*",action:(0,l.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(u.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var n=s()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;i.file=e,i.file_name=n,i.file_type=e.type,console.log("beforeUpload",i)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var n=e.file.response.data.fileUrl;t(n),c.yw.success("".concat(e.file.name," 上传成功"))}else r(e.file),c.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(c.yw.error("".concat(e.file.name," 上传失败")),r(e.file))}};return(0,d.jsx)(a.Z,o()(o()({},f),{},{children:n}))}},76750:function(e,n,t){var r=t(55735),o=t(65461),a=t(30921);n.Z=function(){var e=(0,a.useIntl)();return{translateString:function(n){return null==n?n:n&&n.startsWith(r.VoP)?e.formatMessage({id:n,defaultMessage:n}):n},translateStringTranct:function(n){return null==n?n:null!=n&&n.startsWith(r.VoP)||null!=n&&n.startsWith("ROLE_")?(0,o.aS)(e.formatMessage({id:n,defaultMessage:n}),10):(0,o.aS)(n,10)}}}},62168:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var r=t(75574),o=t(44194),a=t(90819),u=t.n(a),i=t(89933),s=t.n(i),c=t(45332),l=t.n(c),d=t(86803),f=t(73193),p=t.n(f),g=t(55735),m=t(30921);function h(e){return v.apply(this,arguments)}function v(){return(v=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/unified/query/org",{method:"GET",params:p()(p()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return y=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/unified/create",{method:"POST",data:p()(p()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function k(e){return x.apply(this,arguments)}function x(){return(x=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/unified/update",{method:"POST",data:p()(p()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return M.apply(this,arguments)}function M(){return(M=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/unified/update/avatar",{method:"POST",data:p()(p()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return C.apply(this,arguments)}function C(){return C=s()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/unified/delete",{method:"POST",data:p()(p()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var U=t(23864),Z=t(40612),R=t(60795),S=t(15722),W=t(82669),A=t(53530),F=t(27487),_=t(75365),V=t(9452),P=t(84288),I=t(76750),D=t(95490),T=t(69169),O=t(4499),E=t(84881),q=t(31549),Y=function(e){var n=e.open,t=e.onClose,r=e.onSubmit,a=T.A.useForm(),u=l()(a,1)[0],i=(0,I.Z)().translateString,s=(0,Z.u)((function(e){return e.currentOrg})),c=(0,D.$)((function(e){return e.workgroupResult})),d=(0,o.useState)([]),f=l()(d,2),p=f[0],m=f[1];return(0,q.jsx)("div",{children:(0,q.jsx)(A.Z,{title:"创建统一入口",open:n,forceRender:!0,onOk:function(){console.log("handleOk"),u.validateFields().then((function(e){console.log("form values:",e);var n={nickname:u.getFieldValue("nickname"),workgroupUids:u.getFieldValue("workgroups"),type:g.vPY,orgUid:null==s?void 0:s.uid};console.log("unified:",n),r(n)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){console.log("handleCancel"),t()},children:(0,q.jsxs)(T.A,{form:u,name:"wgForm",submitter:{render:function(e,n){return(0,q.jsx)(q.Fragment,{})}},children:[(0,q.jsx)(O.Z,{label:"统一入口昵称",name:"nickname",rules:[{required:!0,message:"请输入昵称!"}]}),(0,q.jsx)(E.Z,{name:"workgroups",label:"成员",options:c.data.content.map((function(e){return{value:e.uid,label:i(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"请选择成员",value:p,onChange:function(e){console.log("selected ".concat(e)),m(e)}}})]})})})},z=t(72614),H=function(){var e=(0,m.useIntl)(),n=(0,o.useRef)(!1),t=(0,I.Z)().translateStringTranct,r=(0,U.Z)().isDarkMode,a=(0,o.useState)(!1),i=l()(a,2),c=i[0],f=i[1],p=(0,Z.u)((function(e){return e.currentOrg})),g=(0,R.F)((function(e){return{unifiedResult:e.unifiedResult,currentUnified:e.currentUnified,setUnifiedResult:e.setUnifiedResult,insertUnified:e.insertUnified,setCurrentUnified:e.setCurrentUnified,deleteCurrentUnified:e.deleteCurrentUnified}})),v=g.unifiedResult,y=g.currentUnified,k=g.setUnifiedResult,x=g.insertUnified,b=g.setCurrentUnified,M=g.deleteCurrentUnified,C=(0,D.$)((function(e){return{workgroupResult:e.workgroupResult,currentWorkgroup:e.currentWorkgroup,setWorkgroupResult:e.setWorkgroupResult,insertWorkgroup:e.insertWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup,deleteCurrentWorkgroup:e.deleteCurrentWorkgroup}})),T=(C.workgroupResult,C.currentWorkgroup),O=C.setWorkgroupResult,E=(C.insertWorkgroup,C.setCurrentWorkgroup),H=(C.deleteCurrentWorkgroup,A.Z.useModal()),L=l()(H,2),N=L[0],$=L[1],B=function(){var n=s()(u()().mark((function n(t){var r;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete unified",t),d.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),n.next=4,j(t);case 4:r=n.sent,console.log("delete unified response",r),200===r.code?(d.yw.destroy(),d.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),M(t.uid)):(d.yw.destroy(),d.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),G=function(){var e=s()(u()().mark((function e(){var t,r,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,d.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==p?void 0:p.uid},e.next=8,h(t);case 8:r=e.sent,console.log("getUnifies",r,y),200===r.code?(d.yw.destroy(),k(r),null===y&&(null==v||null===(o=v.data)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.length)>0&&b(v.data.content[0])):(d.yw.destroy(),d.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=s()(u()().mark((function e(){var n,t,r,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={pageNumber:0,pageSize:50,orgUid:null==p?void 0:p.uid},e.next=3,(0,z.u7)(n);case 3:t=e.sent,console.log("getWorkgroups",t),200===t.code?(d.yw.destroy(),O(t),null===T&&(null==t||null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&E(null==t||null===(o=t.data)||void 0===o?void 0:o.content[0])):(d.yw.destroy(),d.yw.error(t.message));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){G(),K()}),[]);var J=function(){var n=s()(u()().mark((function n(t){var r;return u()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("handleSave",t),d.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating"})),n.next=4,w(t);case 4:r=n.sent,console.log("create unified:",r),200===r.code?(d.yw.destroy(),d.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),f(!1),x(r.data)):(d.yw.destroy(),f(!1),d.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(F.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,q.jsx)(_.ZP,{size:"small",type:"primary",icon:(0,q.jsx)(W.Z,{}),onClick:function(){f(!0)},children:e.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,q.jsx)(_.ZP,{size:"small",onClick:G,children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,q.jsx)(_.ZP,{onClick:function(){return function(n){N.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,q.jsx)(S.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(n.nickname,"】？"),onOk:function(){B(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(y)},size:"small",danger:!0,disabled:y&&""===y.uid,children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,q.jsx)(V.Z,{itemLayout:"horizontal",dataSource:v.data.content,renderItem:function(e,n){return(0,q.jsx)(V.Z.Item,{style:y.uid===e.uid?{backgroundColor:r?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){b(e)},children:(0,q.jsx)(V.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,q.jsx)(P.C,{src:e.avatar}),title:(0,q.jsx)(q.Fragment,{children:t(e.nickname)}),description:t(e.description)})},e.uid)}}),(0,q.jsx)(Y,{open:c,onClose:function(){f(!1)},onSubmit:J}),$]})},L=t(8247),N=t(32350),$=t(59908),B=t(6631),G=function(){var e,n,t=T.A.useForm(),r=l()(t,1)[0],a=(0,m.useIntl)(),i=(0,I.Z)().translateString,c=(0,D.$)((function(e){return e.workgroupResult})),f=(0,R.F)((function(e){return{currentUnified:e.currentUnified,setCurrentUnified:e.setCurrentUnified}})),g=f.currentUnified,h=f.setCurrentUnified,v=(0,o.useState)((null===(e=g.workgroups)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]),w=l()(v,2),y=w[0],x=w[1],M=(0,o.useState)(""),j=l()(M,2),C=j[0],U=j[1];(0,o.useEffect)((function(){if(g){var e,n;r.setFieldValue("nickname",i(null==g?void 0:g.nickname)),r.setFieldValue("description",i(null==g?void 0:g.description)),r.setFieldsValue({workgroups:null==g||null===(e=g.workgroups)||void 0===e?void 0:e.map((function(e){return e.uid}))});var t=[];null===(n=g.workgroups)||void 0===n||n.forEach((function(e){t.push(e.uid)})),x(t)}}),[g]);var Z=function(){var e=s()(u()().mark((function e(n){var t,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",n),U(n),t=p()(p()({},g),{},{avatar:n}),e.next=5,b(t);case 5:r=e.sent,console.log("updateAvatar response:",r),200===r.code?(d.yw.success(a.formatMessage({id:"update.success"})),h(r.data)):(d.yw.destroy(),d.yw.error(r.message));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=s()(u()().mark((function e(n){var t,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish",n),d.yw.loading(a.formatMessage({id:"updating"})),t=p()(p()(p()({},g),n),{},{avatar:C,workgroupUids:y}),console.log("unifiedObject:",t),e.next=6,k(t);case 6:r=e.sent,console.log("updateWorkGroup response:",r),200===r.code?(d.yw.destroy(),d.yw.success(a.formatMessage({id:"update.success"})),h(r.data)):(d.yw.destroy(),d.yw.error(r.message));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){U(null==g?void 0:g.avatar)}),[g]),(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(T.A,{form:r,style:{marginLeft:"20px"},onFinish:S,children:[(0,q.jsx)(T.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:a.formatMessage({id:"avatar"}),children:(0,q.jsxs)(B.G,{onSuccess:Z,onError:function(e){console.log("handleUploadError:",e),d.yw.error(e)},children:[(0,q.jsx)(P.C,{src:C}),(0,q.jsx)(_.ZP,{icon:(0,q.jsx)($.Z,{}),children:a.formatMessage({id:"upload"})})]},"avatar")}),(0,q.jsx)(O.Z,{width:"md",name:"nickname",label:a.formatMessage({id:"nickname"}),rules:[{required:!0,message:a.formatMessage({id:"please.input.nickname"})}]}),(0,q.jsx)("span",{children:"支持展示所有技能组，提供给用户选择"}),(0,q.jsx)(E.Z,{name:"workgroups",label:a.formatMessage({id:"members"}),tooltip:a.formatMessage({id:"please.create.workgroups.tooltip"}),width:"md",initialValue:null===(n=g.workgroups)||void 0===n?void 0:n.map((function(e){return e.uid})),options:c.data.content.map((function(e){return{value:e.uid,label:i(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:a.formatMessage({id:"please.select.members"}),onChange:function(e){console.log("selected ".concat(e)),x(e)}},rules:[{required:!0,message:a.formatMessage({id:"please.select.members"})}]}),(0,q.jsx)(N.Z,{width:"md",name:"description",label:a.formatMessage({id:"description"}),rules:[{required:!0,message:a.formatMessage({id:"please.input.description"})}]})]})})},K=t(82211),J=t(65461),Q=t(51990),X=function(){var e=T.A.useForm(),n=l()(e,1)[0],t=(0,m.useIntl)(),r=(0,I.Z)().translateString,a=(0,R.F)((function(e){return{currentUnified:e.currentUnified,setCurrentUnified:e.setCurrentUnified}})),i=a.currentUnified,c=a.setCurrentUnified,f=(0,o.useState)(""),g=l()(f,2),h=g[0],v=g[1];(0,o.useEffect)((function(){i&&v(r(null==i?void 0:i.welcomeTip)||"")}),[i]);var w=function(){var e=s()(u()().mark((function e(n){var r,o,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(t.formatMessage({id:"updating"})),o=p()(p()(p()({},i),n),{},{welcomeTip:h,workgroupUids:null==i||null===(r=i.workgroups)||void 0===r?void 0:r.map((function(e){return e.uid}))}),console.log("unifiedObject:",o),e.next=5,k(o);case 5:a=e.sent,console.log("updateWorkGroup response:",a),200===a.code?(d.yw.destroy(),d.yw.success(t.formatMessage({id:"update.success"})),c(a.data)):(d.yw.destroy(),d.yw.error(a.message));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,q.jsx)(T.A,{form:n,onFinish:w,style:{marginLeft:"20px"},children:(0,q.jsx)(T.A.Item,{name:"welcomeTip",label:t.formatMessage({id:"agent.settings.welcome.tip"}),tooltip:t.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:t.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,q.jsx)(Q.Z,{placeholder:t.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:h,toolbarKeys:(0,J.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){v(e)}})})})},ee=function(){var e=(0,m.useIntl)(),n=(0,o.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,q.jsx)(G,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,q.jsx)(X,{})},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,q.jsx)(K.Z,{type:g.RB4})}]}),[e]);return(0,q.jsx)(L.Z,{defaultActiveKey:"basic",items:n})},ne=t(96865),te=r.Z.Sider,re=r.Z.Content,oe=function(){var e=(0,ne.Z)(),n=e.leftSiderStyle,t=e.leftSiderWidth;return(0,q.jsxs)(r.Z,{children:[(0,q.jsx)(te,{width:t,style:n,children:(0,q.jsx)(H,{})}),(0,q.jsx)(r.Z,{children:(0,q.jsx)(re,{children:(0,q.jsx)(ee,{})})})]})}},1902:function(e,n,t){t.d(n,{E:function(){return d}});var r=t(73193),o=t.n(r),a=t(76711),u=t.n(a),i=t(55735),s=t(44435),c=t(83642),l=t(83890),d=(0,s.Ue)()((0,c.mW)((0,c.tJ)((0,l.n)((function(e,n){return{agentResult:{data:{content:[]}},currentAgent:{uid:"",orgUid:""},insertAgent:function(n){e((function(e){e.agentResult.data.content.unshift(n)}))},updateAgent:function(n){e((function(e){var t=e.agentResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t[r]=n:console.warn("Agent with uid ".concat(n.uid," not found."))}))},setAgentResult:function(t){var r;(e({agentResult:t}),""===n().currentAgent.uid)&&((null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentAgent:t.data.content[0]}))},setCurrentAgent:function(t){var r=n().agentResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var i=[].concat(u()(r.slice(0,a)),[t],u()(r.slice(a+1))),s=o()(o()({},n().agentResult),{},{data:{content:i}});e({agentResult:s,currentAgent:t})}else console.warn("Agent with the specified uid not found."),e({currentAgent:t})},deleteCurrentAgent:function(t){var r=n().agentResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({agentResult:o()(o()({},n().agentResult),{},{data:{content:[].concat(u()(r.slice(0,a)),u()(r.slice(a+1)))}})}):console.warn("Agent not found in cache:",t),n().currentAgent.uid===t&&e({currentAgent:{uid:"",orgUid:""}})},deleteAgentCache:function(){return e({},!0)}}})),{name:i.zzK})))},95490:function(e,n,t){t.d(n,{$:function(){return d}});var r=t(73193),o=t.n(r),a=t(76711),u=t.n(a),i=t(55735),s=t(44435),c=t(83642),l=t(83890),d=(0,s.Ue)()((0,c.mW)((0,c.tJ)((0,l.n)((function(e,n){return{workgroupResult:{data:{content:[]}},currentWorkgroup:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},insertWorkgroup:function(n){e((function(e){e.workgroupResult.data.content.unshift(n)}))},updateWorkgroup:function(n){e((function(e){var t=e.workgroupResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t[r]=n:console.warn("Workgroup with uid ".concat(n.uid," not found."))}))},deleteWorkgroup:function(n){e((function(e){var t=e.workgroupResult.data.content,r=t.findIndex((function(e){return e.uid===n.uid}));-1!==r?t.splice(r,1):console.warn("Workgroup with uid ".concat(n.uid," not found."))}))},setWorkgroupResult:function(t){var r;(e({workgroupResult:t}),""===n().currentWorkgroup.uid)&&((null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentWorkgroup:t.data.content[0]}))},setCurrentWorkgroup:function(t){var r=n().workgroupResult.data.content,a=r.findIndex((function(e){return e.uid===t.uid}));if(-1!==a){var i=[].concat(u()(r.slice(0,a)),[t],u()(r.slice(a+1))),s=o()(o()({},n().workgroupResult),{},{data:{content:i}});e({workgroupResult:s,currentWorkgroup:t})}else console.warn("Workgroup with the specified uid not found."),e({currentWorkgroup:t})},deleteCurrentWorkgroup:function(t){var r=n().workgroupResult.data.content,a=r.findIndex((function(e){return e.uid===t}));-1!==a?e({workgroupResult:o()(o()({},n().workgroupResult),{},{data:{content:[].concat(u()(r.slice(0,a)),u()(r.slice(a+1)))}})}):console.warn("Workgroup not found in cache:",t),n().currentWorkgroup.uid===t&&e({currentWorkgroup:{uid:"",orgUid:""}})},deleteWorkgroupCache:function(){return e({},!0)}}})),{name:i.b6l})))}}]);