"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9584],{69753:function(te,F,e){var f=e(1413),m=e(67294),S=e(49495),P=e(89099),i=function(R,u){return m.createElement(P.Z,(0,f.Z)((0,f.Z)({},R),{},{ref:u,icon:S.Z}))},O=m.forwardRef(i);F.Z=O},11475:function(te,F,e){e.d(F,{Z:function(){return R}});var f=e(1413),m=e(67294),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},P=S,i=e(89099),O=function(I,y){return m.createElement(i.Z,(0,f.Z)((0,f.Z)({},I),{},{ref:y,icon:P}))},T=m.forwardRef(O),R=T},58638:function(te,F,e){e.d(F,{Z:function(){return R}});var f=e(1413),m=e(67294),S={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},P=S,i=e(89099),O=function(I,y){return m.createElement(i.Z,(0,f.Z)((0,f.Z)({},I),{},{ref:y,icon:P}))},T=m.forwardRef(O),R=T},57546:function(te,F,e){e.d(F,{Z:function(){return R}});var f=e(1413),m=e(67294),S={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},P=S,i=e(89099),O=function(I,y){return m.createElement(i.Z,(0,f.Z)((0,f.Z)({},I),{},{ref:y,icon:P}))},T=m.forwardRef(O),R=T},64082:function(te,F,e){e.d(F,{Z:function(){return R}});var f=e(1413),m=e(67294),S={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},P=S,i=e(89099),O=function(I,y){return m.createElement(i.Z,(0,f.Z)((0,f.Z)({},I),{},{ref:y,icon:P}))},T=m.forwardRef(O),R=T},64317:function(te,F,e){var f=e(1413),m=e(91),S=e(22270),P=e(67294),i=e(66758),O=e(24809),T=e(85893),R=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],I=function(x,ae){var J=x.fieldProps,V=x.children,L=x.params,ne=x.proFieldProps,Y=x.mode,G=x.valueEnum,K=x.request,M=x.showSearch,c=x.options,r=(0,m.Z)(x,R),s=(0,P.useContext)(i.Z);return(0,T.jsx)(O.Z,(0,f.Z)((0,f.Z)({valueEnum:(0,S.h)(G),request:K,params:L,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({options:c,mode:Y,showSearch:M,getPopupContainer:s.getPopupContainer},J),ref:ae,proFieldProps:ne},r),{},{children:V}))},y=P.forwardRef(function(n,x){var ae=n.fieldProps,J=n.children,V=n.params,L=n.proFieldProps,ne=n.mode,Y=n.valueEnum,G=n.request,K=n.options,M=(0,m.Z)(n,u),c=(0,f.Z)({options:K,mode:ne||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},ae),r=(0,P.useContext)(i.Z);return(0,T.jsx)(O.Z,(0,f.Z)((0,f.Z)({valueEnum:(0,S.h)(Y),request:G,params:V,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({getPopupContainer:r.getPopupContainer},c),ref:x,proFieldProps:L},M),{},{children:J}))}),Z=P.forwardRef(I),B=y,h=Z;h.SearchSelect=B,h.displayName="ProFormComponent",F.Z=h},90672:function(te,F,e){var f=e(1413),m=e(91),S=e(67294),P=e(24809),i=e(85893),O=["fieldProps","proFieldProps"],T=function(u,I){var y=u.fieldProps,Z=u.proFieldProps,B=(0,m.Z)(u,O);return(0,i.jsx)(P.Z,(0,f.Z)({ref:I,valueType:"textarea",fieldProps:y,proFieldProps:Z},B))};F.Z=S.forwardRef(T)},68256:function(te,F,e){var f=e(97857),m=e.n(f),S=e(5574),P=e.n(S),i=e(85576),O=e(67294),T=e(64082),R=e(64121),u=e(27484),I=e.n(u),y=e(85615),Z=e(80049),B=e(38302),h=e(89102),n=e(85893),x=R.Z.Dragger,ae=function(V){var L=V.type,ne=V.acceptType,Y=V.isModalOpen,G=V.handleOk,K=V.handleCancel,M=(0,B.j)(function(N){return N.currentKbase}),c=(0,h.v)(function(N){return N.currentCategory}),r=(0,O.useState)("\u5F53\u524D\u652F\u6301\u4E0A\u4F20pdf/txt/markdown/docx\u7B49"),s=P()(r,2),g=s[0],p=s[1],w=(0,O.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:L,category_uid:(c==null?void 0:c.uid)==="all"?"":(c==null?void 0:c.uid)||"",kb_uid:(M==null?void 0:M.uid)||"",client:y.bVn}),k=P()(w,2),D=k[0],X=k[1],ie=function(E){var re=I()(new Date).format("YYYYMMDDHHmmss")+"_"+E.name,z=new FormData;z.append("file",E),z.append("file_name",re),z.append("file_type",E.type),z.append("is_avatar","false"),z.append("kb_type",L),z.append("category_uid",(c==null?void 0:c.uid)==="all"?"":(c==null?void 0:c.uid)||""),z.append("kb_uid",(M==null?void 0:M.uid)||""),z.append("client",y.bVn),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(y.LA8)},body:z}).then(function(le){return le.json()}).then(function(le){console.log("upload data:",le),le.code===200?(Z.yw.destroy(),Z.yw.success("".concat(re," \u4E0A\u4F20\u6210\u529F")),G()):(Z.yw.destroy(),Z.yw.error("".concat(re," \u4E0A\u4F20\u5931\u8D25")),K())})},q={name:"file",accept:ne,action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(y.LA8)},data:D,showUploadList:!1,beforeUpload:function(E){console.log("beforeUpload",E);var re=I()(new Date).format("YYMMDDHHmmss")+"_"+E.name;D.file=E,D.file_name=re,D.file_type=E.type,D.kb_type=L,D.category_uid=(c==null?void 0:c.uid)==="all"?"":c==null?void 0:c.uid,D.kb_uid=M==null?void 0:M.uid,console.log("beforeUpload",D)},onChange:function(E){E.file.status==="uploading"&&Z.yw.loading("".concat(E.file.name," \u4E0A\u4F20\u4E2D")),E.file.status==="done"?(console.log("response: ",E.file.response),E.file.response.code===200?(Z.yw.destroy(),Z.yw.success("".concat(E.file.name," \u4E0A\u4F20\u6210\u529F")),G()):(Z.yw.destroy(),Z.yw.error("".concat(E.file.name," \u4E0A\u4F20\u5931\u8D25")),K())):E.file.status==="error"&&(Z.yw.error("".concat(E.file.name," \u4E0A\u4F20\u5931\u8D25")),K())},onDrop:function(E){console.log("Dropped files",E.dataTransfer.files),ie(E.dataTransfer.files[0])}},ue=(0,O.useState)(q),de=P()(ue,2),$=de[0],ye=de[1];return(0,O.useEffect)(function(){L!=y.QPQ&&(q.accept="application/vnd.ms-excel",ye(q),p("\u5F53\u524D\u652F\u6301\u4E0A\u4F20excel\u6587\u4EF6")),X(m()(m()({},D),{},{kb_type:L,category_uid:(c==null?void 0:c.uid)==="all"?"":c==null?void 0:c.uid,kb_uid:M==null?void 0:M.uid}))},[L,c,M]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.Z,{title:"\u4E0A\u4F20\u6587\u4EF6",open:Y,onOk:G,onCancel:K,children:(0,n.jsxs)(x,m()(m()({},$),{},{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(T.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u81F3\u6B64\u5904\u5B9E\u73B0\u4E0A\u4F20"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:g})]}))})})};F.Z=ae},29286:function(te,F,e){e.r(F),e.d(F,{default:function(){return Ne}});var f=e(77154),m=e(21612),S=e(52670),P=e(97857),i=e.n(P),O=e(13769),T=e.n(O),R=e(15009),u=e.n(R),I=e(99289),y=e.n(I),Z=e(5574),B=e.n(Z),h=e(80049),n=e(85615),x=e(86745);function ae(Q){return J.apply(this,arguments)}function J(){return J=y()(u()().mark(function Q(d){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,x.request)("/api/v1/quickreply/query/org",{method:"GET",params:i()(i()({},d),{},{client:n.bVn})}));case 1:case"end":return o.stop()}},Q)})),J.apply(this,arguments)}function V(Q){return L.apply(this,arguments)}function L(){return L=y()(u()().mark(function Q(d){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,x.request)("/api/v1/quickreply/create",{method:"POST",data:i()(i()({},d),{},{client:n.bVn})}));case 1:case"end":return o.stop()}},Q)})),L.apply(this,arguments)}function ne(Q){return Y.apply(this,arguments)}function Y(){return Y=y()(u()().mark(function Q(d){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,x.request)("/api/v1/quickreply/update",{method:"POST",data:i()(i()({},d),{},{client:n.bVn})}));case 1:case"end":return o.stop()}},Q)})),Y.apply(this,arguments)}function G(Q){return K.apply(this,arguments)}function K(){return K=y()(u()().mark(function Q(d){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,x.request)("/api/v1/quickreply/delete",{method:"POST",data:i()(i()({},d),{},{client:n.bVn})}));case 1:case"end":return o.stop()}},Q)})),K.apply(this,arguments)}var M=e(87676),c=e(51042),r=e(57546),s=e(58638),g=e(69753),p=e(57482),w=e(86738),k=e(14726),D=e(67294),X=e(89102),ie=e(38302),q=e(34994),ue=e(64317),de=e(5966),$=e(90672),ye=e(85265),N=e(42075),E=e(64121),re=e(64082),z=e(27484),le=e.n(z),Oe=e(73803),l=e(85893),he=E.Z.Dragger,Ke=function(d){var j=d.isEdit,o=d.quickreply,Ee=d.open,ce=d.onClose,Se=d.onSubmit,Ie=q.A.useForm(),Me=B()(Ie,1),se=Me[0],je=(0,Oe.Z)(),Ue=je.translateString,pe=(0,M.u)(function(t){return t.currentOrg}),_=(0,ie.j)(function(t){return t.currentKbase}),fe=(0,X.v)(function(t){return t.categorySelectOptions}),Re=(0,D.useState)(),xe=B()(Re,2),oe=xe[0],W=xe[1],H=(0,D.useState)(n.PYi),be=B()(H,2),Fe=be[0],Ze=be[1],De=(0,D.useState)(".png,.jpg,.jpeg"),Ae=B()(De,2),we=Ae[0],ve=Ae[1],Be=(0,D.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:"type",category_uid:"",kb_uid:(_==null?void 0:_.uid)||"",client:n.bVn}),Te=B()(Be,2),ee=Te[0],We=Te[1];(0,D.useEffect)(function(){j?se.setFieldsValue({type:o==null?void 0:o.type,title:o==null?void 0:o.title,content:o==null?void 0:o.content,categoryUid:o==null?void 0:o.categoryUid,kbUid:_==null?void 0:_.uid}):se.resetFields()},[Ee]);var _e=function(a){console.log("category selected ".concat(a)),W(a)},Le=function(a){console.log("type selected ".concat(a)),Ze(a),a===n.Qm?ve(".png,.jpg,.jpeg,.gif,.bmp"):a===n.tVi?ve(".mp4,.avi,.mov,.wmv"):a===n.Yu1?ve(".mp3,.wav,.flac"):a===n.Qn&&ve(".doc,.xls,.ppt,.pdf,.docx,.txt,.csv,.xlsx,.rtf,.zip,.7z,.tar,.gz,.rar,.iso")},Ce=function(){console.log("handleSubmit"),se.validateFields().then(function(a){console.log(a),Se(i()(i()(i()({},o),a),{},{kbUid:_==null?void 0:_.uid,orgUid:pe==null?void 0:pe.uid}))}).catch(function(a){console.log("Form errors:",a),h.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})},v=function(a){var U=le()(new Date).format("YYYYMMDDHHmmss")+"_"+a.name,A=new FormData;A.append("file",a),A.append("file_name",U),A.append("file_type",a.type),A.append("is_avatar","false"),A.append("kb_type",n.YjS),A.append("category_uid",oe||""),A.append("kb_uid",(_==null?void 0:_.uid)||""),A.append("client",n.bVn),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(n.LA8)},body:A}).then(function(b){return b.json()}).then(function(b){if(console.log("upload data:",b),b.code===200){var Pe=b.data;se.setFieldValue("content",Pe),h.yw.destroy(),h.yw.success("".concat(U," \u4E0A\u4F20\u6210\u529F"))}else h.yw.destroy(),h.yw.error("".concat(U," \u4E0A\u4F20\u5931\u8D25"))})},C={name:"file",accept:we,action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(n.LA8)},data:ee,showUploadList:!1,beforeUpload:function(a){console.log("beforeUpload",a);var U=le()(new Date).format("YYMMDDHHmmss")+"_"+a.name;ee.file=a,ee.file_name=U,ee.file_type=a.type,ee.kb_type=n.YjS,ee.category_uid=oe||"",ee.kb_uid=_==null?void 0:_.uid,console.log("beforeUpload",ee)},onChange:function(a){if(a.file.status==="uploading"&&h.yw.loading("".concat(a.file.name," \u4E0A\u4F20\u4E2D")),a.file.status==="done")if(console.log("response: ",a.file.response),a.file.response.code===200){var U=a.file.response.data;se.setFieldValue("content",U),h.yw.destroy(),h.yw.success("".concat(a.file.name," \u4E0A\u4F20\u6210\u529F"))}else h.yw.destroy(),h.yw.error("".concat(a.file.name," \u4E0A\u4F20\u5931\u8D25"));else a.file.status==="error"&&h.yw.error("".concat(a.file.name," \u4E0A\u4F20\u5931\u8D25"))},onDrop:function(a){console.log("Dropped files",a.dataTransfer.files),v(a.dataTransfer.files[0])}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ye.Z,{title:j?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:ce,open:Ee,extra:(0,l.jsxs)(N.Z,{children:[(0,l.jsx)(k.ZP,{onClick:ce,children:"\u53D6\u6D88"}),(0,l.jsx)(k.ZP,{onClick:Ce,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,l.jsxs)(q.A,{form:se,initialValues:i()({},o),submitter:{render:function(){return null}},children:[(0,l.jsx)(ue.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:fe.map(function(t){return{value:t.value,label:Ue(t.label)}}),fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:_e}}),(0,l.jsx)(ue.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:n.PYi},{label:"\u56FE\u7247",value:n.Qm},{label:"\u89C6\u9891",value:n.tVi},{label:"\u97F3\u9891",value:n.Yu1},{label:"\u6587\u4EF6",value:n.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:Le}}),(0,l.jsx)(de.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,l.jsx)($.Z,{label:"\u5185\u5BB9",name:"content"}),Fe!=n.PYi&&(0,l.jsxs)(he,i()(i()({},C),{},{children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(re.Z,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"})]}))]})})})},Qe=Ke,Ve=e(68256),$e=["current"],ze=function(){var d=(0,x.useIntl)(),j=(0,D.useRef)(),o=(0,D.useState)(!0),Ee=B()(o,2),ce=Ee[0],Se=Ee[1],Ie=(0,D.useState)(),Me=B()(Ie,2),se=Me[0],je=Me[1],Ue=(0,D.useState)(!1),pe=B()(Ue,2),_=pe[0],fe=pe[1],Re=(0,Oe.Z)(),xe=Re.translateString,oe=(0,M.u)(function(v){return v.currentOrg}),W=(0,ie.j)(function(v){return v.currentKbase}),H=(0,X.v)(function(v){return v.currentCategory}),be=(0,D.useState)(!1),Fe=B()(be,2),Ze=Fe[0],De=Fe[1],Ae=function(){var v=y()(u()().mark(function C(t){var a;return u()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log(t),A.next=3,G(t);case 3:a=A.sent,console.log("delete response:",a),a.code===200?(j==null||j.current.reload(),h.yw.success(d.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):h.yw.error(d.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return A.stop()}},C)}));return function(t){return v.apply(this,arguments)}}(),we=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,l.jsx)(x.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"title",copyable:!0,render:function(C,t){return xe(t==null?void 0:t.title)}},{title:(0,l.jsx)(x.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",render:function(C,t){return xe(t==null?void 0:t.content)}},{title:(0,l.jsx)(x.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0,render:function(C,t){return(0,l.jsx)(l.Fragment,{children:d.formatMessage({id:t==null?void 0:t.type,defaultMessage:t==null?void 0:t.type})})}},{title:(0,l.jsx)(x.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:d.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(C,t,a,U){return[(0,l.jsx)("a",{onClick:function(){Be(t)},children:d.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,l.jsx)(w.Z,{title:d.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(d.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(t==null?void 0:t.title,"\u3011\uFF1F"),onConfirm:function(){return Ae(t)},okText:d.formatMessage({id:"ok"}),cancelText:d.formatMessage({id:"cancel"}),children:(0,l.jsx)(k.ZP,{size:"small",type:"link",danger:!0,children:d.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}],ve=function(){je(void 0),Se(!1),fe(!0)},Be=function(C){je(C),Se(!0),fe(!0)},Te=function(){var v=y()(u()().mark(function C(t){var a,U;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(console.log("handleSubmitDrawer",t),ce?h.yw.loading(d.formatMessage({id:"updating"})):h.yw.loading(d.formatMessage({id:"creating"})),!ce){b.next=8;break}return b.next=5,ne(t);case 5:b.t0=b.sent,b.next=11;break;case 8:return b.next=10,V(t);case 10:b.t0=b.sent;case 11:a=b.t0,console.log("createQuickreply response:",t,a),a.code===200?(h.yw.destroy(),h.yw.loading(d.formatMessage({id:"create.success"})),fe(!1),(U=j.current)===null||U===void 0||U.reloadAndRest()):(h.yw.destroy(),h.yw.error(a.message));case 14:case"end":return b.stop()}},C)}));return function(t){return v.apply(this,arguments)}}(),ee=function(){var v=y()(u()().mark(function C(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:De(!0);case 1:case"end":return a.stop()}},C)}));return function(){return v.apply(this,arguments)}}(),We=function(){var v=y()(u()().mark(function C(){var t;return u()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:console.log("handleExport"),t=localStorage.getItem(n.LA8),window.open("/api/v1/quickreply/export?categoryUid="+(H==null?void 0:H.uid)+"&kbUid="+(W==null?void 0:W.uid)+"&orgUid="+(oe==null?void 0:oe.uid)+"&pageNumber=0&pageSize=20&accessToken="+t);case 3:case"end":return U.stop()}},C)}));return function(){return v.apply(this,arguments)}}();(0,D.useEffect)(function(){var v;(v=j.current)===null||v===void 0||v.reloadAndRest()},[W,H]);var _e=function(){console.log("handleUploadDragSubmit"),De(!1),j==null||j.current.reload()},Le=function(){console.log("handleUploadDragCancel"),De(!1),j==null||j.current.reload()},Ce=(0,D.useMemo)(function(){return(W==null?void 0:W.type)===n._FS?(W==null?void 0:W.uid)==="":!0},[W]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.Z,{columns:we,actionRef:j,cardBordered:!0,request:function(){var v=y()(u()().mark(function C(t,a,U){var A,b,Pe,me;return u()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return console.log("request:",t,a,U),h.yw.loading(d.formatMessage({id:"loading",defaultMessage:"Loading"})),A=t.current,b=T()(t,$e),Pe=i()({pageNumber:t.current-1,categoryUid:(H==null?void 0:H.uid)==="all"?"":H==null?void 0:H.uid,kbUid:W==null?void 0:W.uid,orgUid:oe==null?void 0:oe.uid},b),ge.next=6,ae(Pe);case 6:return me=ge.sent,console.log("getAllQuickreplys response:",Pe,me),h.yw.destroy(),me.code===200||h.yw.error(me.message),ge.abrupt("return",{data:me.data.content,success:!0,total:me.data.totalElements});case 11:case"end":return ge.stop()}},C)}));return function(C,t,a){return v.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(C){console.log("page:",C)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u56DE\u590D",toolBarRender:function(){return[(0,l.jsx)(k.ZP,{icon:(0,l.jsx)(c.Z,{}),type:"primary",onClick:ve,disabled:Ce,children:d.formatMessage({id:"create",defaultMessage:"Create"})},"button"),(0,l.jsx)(k.ZP,{icon:(0,l.jsx)(r.Z,{}),type:"primary",onClick:ee,disabled:Ce,children:d.formatMessage({id:"import",defaultMessage:"Import"})},"button"),(0,l.jsx)(k.ZP,{icon:(0,l.jsx)(s.Z,{}),type:"primary",onClick:We,disabled:Ce,children:d.formatMessage({id:"export",defaultMessage:"Export"})},"button"),(0,l.jsx)(k.ZP,{icon:(0,l.jsx)(g.Z,{}),type:"link",onClick:function(){window.open("https://www.weiyuai.cn/download/excel/quick_reply.xlsx")},children:d.formatMessage({id:"download.template",defaultMessage:"Download Template"})},"download")]}}),(0,l.jsx)(Qe,{isEdit:ce,open:_,quickreply:se,onClose:function(){return fe(!1)},onSubmit:Te}),(0,l.jsx)(Ve.Z,{type:n._FS,acceptType:".xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",isModalOpen:Ze,handleOk:_e,handleCancel:Le})]})},ke=ze,He=m.Z.Sider,Ye=m.Z.Content,Ge=function(){var d=(0,f.Z)(),j=d.leftSiderStyle,o=d.contentStyle;return(0,l.jsx)("div",{children:(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(He,{style:j,children:(0,l.jsx)(S.Z,{type:n._FS})}),(0,l.jsx)(m.Z,{children:(0,l.jsx)(Ye,{style:o,children:(0,l.jsx)(ke,{})})})]})})},Ne=Ge},86250:function(te,F,e){e.d(F,{Z:function(){return c}});var f=e(67294),m=e(93967),S=e.n(m),P=e(98423),i=e(98065),O=e(53124),T=e(27036),R=e(45503);const u=["wrap","nowrap","wrap-reverse"],I=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],y=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Z=(r,s)=>{const g=s.wrap===!0?"wrap":s.wrap;return{[`${r}-wrap-${g}`]:g&&u.includes(g)}},B=(r,s)=>{const g={};return y.forEach(p=>{g[`${r}-align-${p}`]=s.align===p}),g[`${r}-align-stretch`]=!s.align&&!!s.vertical,g},h=(r,s)=>{const g={};return I.forEach(p=>{g[`${r}-justify-${p}`]=s.justify===p}),g};function n(r,s){return S()(Object.assign(Object.assign(Object.assign({},Z(r,s)),B(r,s)),h(r,s)))}var x=n;const ae=r=>{const{componentCls:s}=r;return{[s]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},J=r=>{const{componentCls:s}=r;return{[s]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},V=r=>{const{componentCls:s}=r,g={};return u.forEach(p=>{g[`${s}-wrap-${p}`]={flexWrap:p}}),g},L=r=>{const{componentCls:s}=r,g={};return y.forEach(p=>{g[`${s}-align-${p}`]={alignItems:p}}),g},ne=r=>{const{componentCls:s}=r,g={};return I.forEach(p=>{g[`${s}-justify-${p}`]={justifyContent:p}}),g},Y=()=>({});var G=(0,T.I$)("Flex",r=>{const{paddingXS:s,padding:g,paddingLG:p}=r,w=(0,R.TS)(r,{flexGapSM:s,flexGap:g,flexGapLG:p});return[ae(w),J(w),V(w),L(w),ne(w)]},Y,{resetStyle:!1}),K=function(r,s){var g={};for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&s.indexOf(p)<0&&(g[p]=r[p]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(r);w<p.length;w++)s.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(r,p[w])&&(g[p[w]]=r[p[w]]);return g},c=f.forwardRef((r,s)=>{const{prefixCls:g,rootClassName:p,className:w,style:k,flex:D,gap:X,children:ie,vertical:q=!1,component:ue="div"}=r,de=K(r,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:$,direction:ye,getPrefixCls:N}=f.useContext(O.E_),E=N("flex",g),[re,z,le]=G(E),Oe=q!=null?q:$==null?void 0:$.vertical,l=S()(w,p,$==null?void 0:$.className,E,z,le,x(E,r),{[`${E}-rtl`]:ye==="rtl",[`${E}-gap-${X}`]:(0,i.n)(X),[`${E}-vertical`]:Oe}),he=Object.assign(Object.assign({},$==null?void 0:$.style),k);return D&&(he.flex=D),X&&!(0,i.n)(X)&&(he.gap=X),re(f.createElement(ue,Object.assign({ref:s,className:l,style:he},(0,P.Z)(de,["justify","wrap","align"])),ie))})}}]);
