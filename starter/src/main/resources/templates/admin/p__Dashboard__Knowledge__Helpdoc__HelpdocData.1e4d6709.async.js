"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7235],{51042:function(q,S,e){var d=e(1413),P=e(67294),D=e(42110),a=e(91146),x=function(l,E){return P.createElement(a.Z,(0,d.Z)((0,d.Z)({},l),{},{ref:E,icon:D.Z}))},T=P.forwardRef(x);S.Z=T},64317:function(q,S,e){var d=e(1413),P=e(91),D=e(22270),a=e(67294),x=e(66758),T=e(43889),F=e(85893),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],C=function(p,R){var V=p.fieldProps,M=p.children,G=p.params,A=p.proFieldProps,Y=p.mode,I=p.valueEnum,H=p.request,N=p.showSearch,Q=p.options,B=(0,P.Z)(p,l),Z=(0,a.useContext)(x.Z);return(0,F.jsx)(T.Z,(0,d.Z)((0,d.Z)({valueEnum:(0,D.h)(I),request:H,params:G,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({options:Q,mode:Y,showSearch:N,getPopupContainer:Z.getPopupContainer},V),ref:R,proFieldProps:A},B),{},{children:M}))},$=a.forwardRef(function(c,p){var R=c.fieldProps,V=c.children,M=c.params,G=c.proFieldProps,A=c.mode,Y=c.valueEnum,I=c.request,H=c.options,N=(0,P.Z)(c,E),Q=(0,d.Z)({options:H,mode:A||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},R),B=(0,a.useContext)(x.Z);return(0,F.jsx)(T.Z,(0,d.Z)((0,d.Z)({valueEnum:(0,D.h)(Y),request:I,params:M,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({getPopupContainer:B.getPopupContainer},Q),ref:p,proFieldProps:G},N),{},{children:V}))}),O=a.forwardRef(C),i=$,v=O;v.SearchSelect=i,v.displayName="ProFormComponent",S.Z=v},90672:function(q,S,e){var d=e(1413),P=e(91),D=e(67294),a=e(43889),x=e(85893),T=["fieldProps","proFieldProps"],F=function(E,C){var $=E.fieldProps,O=E.proFieldProps,i=(0,P.Z)(E,T);return(0,x.jsx)(a.Z,(0,d.Z)({ref:C,valueType:"textarea",fieldProps:$,proFieldProps:O},i))};S.Z=D.forwardRef(F)},10384:function(q,S,e){e.r(S),e.d(S,{default:function(){return De}});var d=e(77154),P=e(21612),D=e(97857),a=e.n(D),x=e(13769),T=e.n(x),F=e(15009),l=e.n(F),E=e(99289),C=e.n(E),$=e(5574),O=e.n($),i=e(80049),v=e(85615),c=e(86745);function p(s){return R.apply(this,arguments)}function R(){return R=C()(l()().mark(function s(n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/v1/helpdoc/query/org",{method:"GET",params:a()(a()({},n),{},{client:v.bV})}));case 1:case"end":return r.stop()}},s)})),R.apply(this,arguments)}function V(s){return M.apply(this,arguments)}function M(){return M=C()(l()().mark(function s(n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/v1/helpdoc/create",{method:"POST",data:a()(a()({},n),{},{client:v.bV})}));case 1:case"end":return r.stop()}},s)})),M.apply(this,arguments)}function G(s){return A.apply(this,arguments)}function A(){return A=C()(l()().mark(function s(n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/v1/helpdoc/update",{method:"POST",data:a()(a()({},n),{},{client:v.bV})}));case 1:case"end":return r.stop()}},s)})),A.apply(this,arguments)}function Y(s){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function s(n){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/helpdoc/delete",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return r.stop()}},s)})),I.apply(this,arguments)}var H=e(87676),N=e(51042),Q=e(43892),B=e(14726),Z=e(67294),oe=e(89102),se=e(34994),le=e(64317),ue=e(5966),de=e(90672),ie=e(8232),ce=e(85265),pe=e(42075),t=e(85893),ve=function(n){var g=n.isEdit,r=n.helpdoc,w=n.open,z=n.onClose,_=n.onSubmit,X=ie.Z.useForm(),ee=O()(X,1),b=ee[0],J=(0,H.u)(function(m){return m.orgCurrent}),k=(0,oe.v)(function(m){return m.categorySelectOptions});(0,Z.useEffect)(function(){if(g){var m;b.setFieldsValue({type:r==null?void 0:r.type,title:r==null?void 0:r.title,content:r==null?void 0:r.content,categoryUid:r==null||(m=r.category)===null||m===void 0?void 0:m.uid})}else b.resetFields()},[w]);var re=function(h){console.log("category selected ".concat(h))},W=function(h){console.log("type selected ".concat(h))},te=function(){console.log("handleSubmit"),b.validateFields().then(function(h){console.log(h),_(a()(a()(a()({},r),h),{},{orgUid:J==null?void 0:J.uid}))}).catch(function(h){console.log("Form errors:",h),i.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ce.Z,{title:g?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:z,open:w,extra:(0,t.jsxs)(pe.Z,{children:[(0,t.jsx)(B.ZP,{onClick:z,children:"\u53D6\u6D88"}),(0,t.jsx)(B.ZP,{onClick:te,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,t.jsxs)(se.A,{form:b,initialValues:a()({},r),submitter:{render:function(){return null}},children:[(0,t.jsx)(le.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:k,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:re}}),(0,t.jsx)(le.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:v.PY},{label:"\u56FE\u7247",value:v.Qm},{label:"\u89C6\u9891",value:v.tV},{label:"\u97F3\u9891",value:v.ai},{label:"\u6587\u4EF6",value:v.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:W}}),(0,t.jsx)(ue.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,t.jsx)(de.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},me=ve,he=["current"],fe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"title",copyable:!0},{title:"\u5185\u5BB9",dataIndex:"content"},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0},{title:"\u5206\u7C7B",dataIndex:"category",hideInSearch:!0,render:function(n,g){var r;return(r=g.category)===null||r===void 0?void 0:r.name}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],Pe=function(){var n=(0,Z.useRef)(),g=(0,Z.useState)(!0),r=O()(g,2),w=r[0],z=r[1],_=(0,Z.useState)(),X=O()(_,2),ee=X[0],b=X[1],J=(0,Z.useState)(!1),k=O()(J,2),re=k[0],W=k[1],te=(0,H.u)(function(o){return o.orgCurrent}),m=[].concat(fe,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(y,f,j,U){return[(0,t.jsx)("a",{onClick:function(){xe(f)},children:"\u4FEE\u6539"},"editable")]}}]),h=(0,oe.v)(function(o){return o.currentCategory}),je=function(){b(void 0),z(!1),W(!0)},xe=function(y){b(y),z(!0),W(!0)},Te=function(){var o=C()(l()().mark(function y(f){var j,U;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(console.log("handleSubmitDrawer",f),w?i.yw.loading("\u6B63\u5728\u4FEE\u6539\u5E2E\u52A9\u6587\u6863"):i.yw.loading("\u6B63\u5728\u521B\u5EFA\u5E2E\u52A9\u6587\u6863"),!w){u.next=8;break}return u.next=5,G(f);case 5:u.t0=u.sent,u.next=11;break;case 8:return u.next=10,V(f);case 10:u.t0=u.sent;case 11:j=u.t0,console.log("createHelpdoc response:",f,j),j.code===200?(i.yw.destroy(),i.yw.success("\u5E2E\u52A9\u6587\u6863\u521B\u5EFA\u6210\u529F"),W(!1),(U=n.current)===null||U===void 0||U.reloadAndRest()):(i.yw.destroy(),i.yw.error(j.message));case 14:case"end":return u.stop()}},y)}));return function(f){return o.apply(this,arguments)}}(),Oe=function(){W(!1)};(0,Z.useEffect)(function(){var o;console.log("currentCategory:",h),(o=n.current)===null||o===void 0||o.reloadAndRest()},[h]);var Ze=function(){console.log("handleRichEditor"),window.open("/admin/doceditor")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Z,{columns:m,actionRef:n,cardBordered:!0,request:function(){var o=C()(l()().mark(function y(f,j,U){var ne,u,ae,L;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return console.log("request:",f,j,U),i.yw.loading("\u6B63\u5728\u52A0\u8F7D\u5E2E\u52A9\u6587\u6863"),ne=f.current,u=T()(f,he),ae=a()({pageNumber:f.current-1,orgUid:te.uid,categoryUid:h.uid==="all"?"":h.uid},u),K.next=6,p(ae);case 6:return L=K.sent,console.log("getAllHelpdocs response:",ae,L),i.yw.destroy(),L.code===200||i.yw.error(L.message),K.abrupt("return",{data:L.data.content,success:!0,total:L.data.totalElements});case 11:case"end":return K.stop()}},y)}));return function(y,f,j){return o.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(y){console.log("page:",y)}},dateFormatter:"string",headerTitle:"\u5E2E\u52A9\u6587\u6863",toolBarRender:function(){return[(0,t.jsx)(B.ZP,{icon:(0,t.jsx)(N.Z,{}),type:"primary",onClick:Ze,children:"\u521B\u5EFA"},"button")]}}),(0,t.jsx)(me,{isEdit:w,open:re,helpdoc:ee,onClose:Oe,onSubmit:Te})]})},ge=Pe,ye=e(52670),Ee=P.Z.Sider,Ce=P.Z.Content,Se=function(){var n=(0,d.Z)(),g=n.leftSiderStyle,r=n.contentStyle;return(0,t.jsx)("div",{children:(0,t.jsxs)(P.Z,{children:[(0,t.jsx)(Ee,{style:g,children:(0,t.jsx)(ye.Z,{type:v.yv})}),(0,t.jsx)(P.Z,{children:(0,t.jsx)(Ce,{style:r,children:(0,t.jsx)(ge,{})})})]})})},De=Se}}]);
