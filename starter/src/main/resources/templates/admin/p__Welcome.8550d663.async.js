"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185],{61124:function(t,e,s){s.d(e,{Kq:function(){return u},RL:function(){return j}});var i=s(90819),a=s.n(i),n=s(73193),r=s.n(n),l=s(89933),o=s.n(l),c=s(77667),d=s(74698);function u(t){return x.apply(this,arguments)}function x(){return(x=o()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/org/create",{method:"POST",data:r()(r()({},e),{},{client:c.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return g.apply(this,arguments)}function g(){return(g=o()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/org/update",{method:"POST",data:r()(r()({},e),{},{client:c.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},62538:function(t,e,s){s.r(e),s.d(e,{default:function(){return xt}});var i=s(90819),a=s.n(i),n=s(89933),r=s.n(n),l=s(45332),o=s.n(l),c=s(89756),d=s(61124),u=s(40431),x=s(77667),j=s(74828),g=s(74698),m=s(6115),h=s(50373),p=s(44194),f=s(97293),y=s(73193),Z=s.n(y),v=s(18938),F=s(45571),M=s(16774),w=s(77316),b=s(92289),k=s(44391),S=s(65799),T=s(65502),I=s(69228),A=s(51338),R=s(89796),C=s(98840),q=s(69560),z=s(53380),P=s(71952),O=s(97146),D=s(94637),K=s(41352),V=s(26020),E=s(12117),L=s(31549),G=function(){var t=(0,g.useIntl)(),e=(0,g.useAccess)(),s=(0,p.useState)([{time:"00:00",human:45,bot:78},{time:"01:00",human:52,bot:85},{time:"02:00",human:38,bot:68}]),i=o()(s,2),n=i[0],l=(i[1],{data:n,xField:"time",yField:"value",seriesField:"type",legend:{position:"top"},smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},xAxis:{title:{text:t.formatMessage({id:"statistic.chart.time"})}},yAxis:{title:{text:t.formatMessage({id:"statistic.chart.value"})}}}),c={data:[{type:"问题解答",value:458},{type:"业务办理",value:284},{type:"信息查询",value:326}],angleField:"value",colorField:"type",radius:.8,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},d={data:[{time:"00:00",value:12,type:"待处理"},{time:"01:00",value:15,type:"待处理"}],xField:"time",yField:"value",seriesField:"type",color:["#1890ff","#2fc25b","#facc14"],legend:{position:"top"}};(0,p.useEffect)((function(){var t=setInterval((function(){u()}),3e4);return function(){return clearInterval(t)}}),[]);var u=function(){var t=r()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=23,j=15,m=45,h=128,f=45,y=4.5,G=56,H=1560,Q=85.6,U=15.4,W=8.5,B={totalArticles:1580,todayViews:256,hitRate:85.6,unmatchedQuestions:15,updatedToday:8,categoryDist:[{category:"产品文档",count:580},{category:"常见问题",count:420},{category:"操作指南",count:380}],recentUpdates:[{title:"新功能使用说明",time:"2024-01-23 10:30"},{title:"常见问题更新",time:"2024-01-23 09:15"}],searchKeywords:[{keyword:"配置教程",count:89},{keyword:"价格方案",count:76}]},N={data:B.categoryDist,angleField:"count",colorField:"category",radius:.8,label:{type:"outer",content:"{name} {percentage}"}},J=23,X=45,Y=156,$=3,_={high:12,medium:28,low:35},tt=4.2,et=15,st=120;return(0,L.jsxs)(g.Access,{accessible:e.canDebug(),children:[(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:6,children:(0,L.jsxs)(M.Z,{children:[(0,L.jsx)(w.Z,{title:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(C.Z,{}),(0,L.jsx)(g.FormattedMessage,{id:"statistic.today.total.sessions"})]}),value:h+H,suffix:(0,L.jsx)(g.FormattedMessage,{id:"statistic.unit.sessions"}),valueStyle:{color:"#1890ff"}}),(0,L.jsx)("div",{style:{marginTop:8},children:(0,L.jsx)(b.Z,{percent:Math.round(H/(h+H)*100),size:"small",format:function(t){return"机器人占比 ".concat(t,"%")}})})]})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsxs)(M.Z,{children:[(0,L.jsx)(w.Z,{title:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(q.Z,{}),(0,L.jsx)(g.FormattedMessage,{id:"statistic.today.bot.resolveRate"})]}),value:Q,suffix:"%",valueStyle:{color:Q>=80?"#3f8600":"#cf1322"}}),(0,L.jsx)("div",{style:{marginTop:8},children:(0,L.jsx)(b.Z,{percent:Q,size:"small",status:Q>=80?"success":"exception"})})]})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsxs)(M.Z,{children:[(0,L.jsx)(w.Z,{title:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.Z,{}),(0,L.jsx)(g.FormattedMessage,{id:"statistic.today.satisfaction"})]}),value:y,suffix:"/5",valueStyle:{color:y>=4?"#3f8600":"#cf1322"}}),(0,L.jsx)(k.Z,{disabled:!0,defaultValue:Math.round(y),style:{marginTop:8}})]})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsxs)(M.Z,{children:[(0,L.jsx)(w.Z,{title:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(P.Z,{}),(0,L.jsx)(g.FormattedMessage,{id:"statistic.today.avgResponseTime"})]}),value:f,suffix:"s",valueStyle:{color:f<=30?"#3f8600":"#cf1322"}}),(0,L.jsx)(b.Z,{percent:100-f/60*100,size:"small",status:f<=30?"success":"exception",style:{marginTop:8}})]})})]}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.realtime.monitor"}),style:{marginTop:16},children:(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:12,children:(0,L.jsxs)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.human.status"}),children:[(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.human.online"}),value:j,prefix:(0,L.jsx)(O.Z,{style:{color:"#52c41a"}})})}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.human.queue"}),value:x,prefix:(0,L.jsx)(C.Z,{style:{color:x>10?"#f5222d":"#1890ff"}})})}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(w.Z,{title:"正在接待",value:m,prefix:(0,L.jsx)(z.Z,{})})})]}),(0,L.jsx)(S.Z,{style:{margin:"12px 0"}}),(0,L.jsx)("div",{style:{height:200},children:(0,L.jsx)(A.Z,Z()({},l))})]})}),(0,L.jsx)(F.Z,{span:12,children:(0,L.jsxs)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.bot.status"}),children:[(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(w.Z,{title:"并发会话",value:G,prefix:(0,L.jsx)(q.Z,{})})}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(w.Z,{title:"转人工率",value:U,suffix:"%",valueStyle:{color:U>20?"#f5222d":"#52c41a"}})}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(w.Z,{title:"未知问题率",value:W,suffix:"%",valueStyle:{color:W>10?"#f5222d":"#52c41a"}})})]}),(0,L.jsx)(S.Z,{style:{margin:"12px 0"}}),(0,L.jsx)("div",{style:{height:200},children:(0,L.jsx)(R.Z,Z()({},c))})]})})]})}),(0,L.jsxs)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.title"}),style:{marginTop:16},children:[(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.total"}),value:B.totalArticles,prefix:(0,L.jsx)(D.Z,{})})}),(0,L.jsxs)(F.Z,{span:6,children:[(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.hitRate"}),value:B.hitRate,suffix:"%",valueStyle:{color:B.hitRate>=80?"#3f8600":"#cf1322"}}),(0,L.jsx)(b.Z,{percent:B.hitRate,size:"small"})]}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.unmatched"}),value:B.unmatchedQuestions,valueStyle:{color:B.unmatchedQuestions>20?"#cf1322":"#3f8600"}})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.updated"}),value:B.updatedToday,suffix:(0,L.jsx)(g.FormattedMessage,{id:"statistic.unit.articles"})})})]}),(0,L.jsx)(v.Z,{style:{marginTop:16},children:(0,L.jsx)(F.Z,{span:24,children:(0,L.jsx)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.category"}),children:(0,L.jsx)(R.Z,Z()({},N))})})}),(0,L.jsx)(v.Z,{style:{marginTop:16},children:(0,L.jsx)(F.Z,{span:24,children:(0,L.jsx)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.knowledge.recent"}),children:(0,L.jsx)(T.Z,{size:"small",dataSource:B.recentUpdates,renderItem:function(t){return(0,L.jsx)(T.Z.Item,{extra:t.time,children:t.title})}})})})})]}),(0,L.jsxs)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.overview"}),style:{marginTop:16},children:[(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:6,children:(0,L.jsxs)(M.Z,{type:"inner",children:[(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.pending"}),value:J,valueStyle:{color:J>20?"#f5222d":"#1890ff"},prefix:(0,L.jsx)(K.Z,{})}),(0,L.jsx)(b.Z,{percent:J/(J+X+Y)*100,size:"small",status:J>20?"exception":"active"})]})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(M.Z,{type:"inner",children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.processing"}),value:X,prefix:(0,L.jsx)(V.Z,{spin:!0}),valueStyle:{color:"#1890ff"}})})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(M.Z,{type:"inner",children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.completed"}),value:Y,prefix:(0,L.jsx)(E.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(M.Z,{type:"inner",children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.timeout"}),value:$,prefix:(0,L.jsx)(P.Z,{}),valueStyle:{color:$>0?"#f5222d":"#52c41a"}})})})]}),(0,L.jsxs)(v.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority"}),children:(0,L.jsxs)(v.Z,{gutter:[8,8],children:[(0,L.jsxs)(F.Z,{span:8,children:[(0,L.jsx)(I.Z,{color:"red",text:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority.high"})}),(0,L.jsx)("div",{children:_.high})]}),(0,L.jsxs)(F.Z,{span:8,children:[(0,L.jsx)(I.Z,{color:"orange",text:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority.medium"})}),(0,L.jsx)("div",{children:_.medium})]}),(0,L.jsxs)(F.Z,{span:8,children:[(0,L.jsx)(I.Z,{color:"blue",text:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority.low"})}),(0,L.jsx)("div",{children:_.low})]})]})})}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsxs)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.response"}),children:[(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.firstResponseTime"}),value:et,suffix:(0,L.jsx)(g.FormattedMessage,{id:"statistic.unit.minutes"}),valueStyle:{color:et<=30?"#52c41a":"#f5222d"}}),(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.resolveTime"}),value:st,suffix:(0,L.jsx)(g.FormattedMessage,{id:"statistic.unit.minutes"}),style:{marginTop:8}})]})}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsxs)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.satisfaction"}),children:[(0,L.jsx)(w.Z,{value:tt,suffix:"/5",precision:1}),(0,L.jsx)(k.Z,{disabled:!0,value:Math.round(tt),style:{marginTop:8}})]})})]}),(0,L.jsx)(v.Z,{style:{marginTop:16},children:(0,L.jsx)(F.Z,{span:24,children:(0,L.jsx)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.ticket.trend"}),children:(0,L.jsx)(A.Z,Z()({},d))})})})]})]})},H=s(50646),Q=s(111),U=s(54663),W=s(30450),B=s(41525),N=s(37470),J=H.default.RangePicker,X=f.Z.TabPane,Y=function(){var t=(0,g.useIntl)(),e=(0,g.useAccess)(),s=(0,p.useState)("week"),i=o()(s,2),n=i[0],l=i[1],c=(0,p.useState)(["",""]),d=o()(c,2),u=(d[0],d[1]),x=[{label:t.formatMessage({id:"statistic.time.today"}),value:"today"},{label:t.formatMessage({id:"statistic.time.week"}),value:"week"},{label:t.formatMessage({id:"statistic.time.month"}),value:"month"},{label:t.formatMessage({id:"statistic.time.custom"}),value:"custom"}],j={byTime:[{date:"2024-01-01",human:156,bot:423,total:579},{date:"2024-01-02",human:178,bot:445,total:623}],byChannel:[{channel:"Web",count:3580},{channel:"Mobile",count:2860},{channel:"WeChat",count:1920},{channel:"API",count:980}],byGroup:[{group:"售前组",count:2580},{group:"售后组",count:1860},{group:"技术组",count:1520}]},m={workload:[{agent:"张三",sessions:156,messages:1280,tickets:45,onlineHours:7.5}],quality:[{agent:"张三",responseTime:25,satisfaction:4.5,resolveRate:92.5,timeoutRate:3.2}]},h={distribution:{location:[{region:"华东",count:3580},{region:"华南",count:2860},{region:"华北",count:1920}],device:[{type:"PC",count:4580},{type:"Mobile",count:3860},{type:"Tablet",count:920}],time:[{hour:"09:00",count:256},{hour:"10:00",count:358}]},behavior:{questions:[{question:"如何修改密码",count:258},{question:"产品价格咨询",count:236}],paths:[{path:"首页>产品>咨询",count:1580},{path:"搜索>咨询",count:980}],duration:[{range:"0-1分钟",count:1580},{range:"1-5分钟",count:2360}]}},y={data:j.byTime,xField:"date",yField:"value",seriesField:"type",smooth:!0},w=function(){var t=r()(a()().mark((function t(e,s){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),b=[{title:t.formatMessage({id:"statistic.agent.name"}),dataIndex:"agent"},{title:t.formatMessage({id:"statistic.agent.sessions"}),dataIndex:"sessions"},{title:t.formatMessage({id:"statistic.agent.messages"}),dataIndex:"messages"},{title:t.formatMessage({id:"statistic.agent.tickets"}),dataIndex:"tickets"},{title:t.formatMessage({id:"statistic.agent.onlineHours"}),dataIndex:"onlineHours"}],k=[{title:t.formatMessage({id:"statistic.agent.name"}),dataIndex:"agent"},{title:t.formatMessage({id:"statistic.agent.responseTime"}),dataIndex:"responseTime"},{title:t.formatMessage({id:"statistic.agent.satisfaction"}),dataIndex:"satisfaction"},{title:t.formatMessage({id:"statistic.agent.resolveRate"}),dataIndex:"resolveRate"},{title:t.formatMessage({id:"statistic.agent.timeoutRate"}),dataIndex:"timeoutRate"}];return(0,L.jsxs)(g.Access,{accessible:e.canDebug(),children:[(0,L.jsx)(M.Z,{children:(0,L.jsxs)(Q.Z,{children:[(0,L.jsx)(U.ZP.Group,{options:x,value:n,onChange:function(t){return e=t.target.value,l(e),void w(e);var e}}),"custom"===n&&(0,L.jsx)(J,{onChange:function(t,e){t&&(u([e[0],e[1]]),w("custom",e))}})]})}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.session.title"}),style:{marginTop:16},children:(0,L.jsxs)(f.Z,{defaultActiveKey:"trend",children:[(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.session.trend"}),children:(0,L.jsx)(A.Z,Z()({},y))},"trend"),(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.session.channel"}),children:(0,L.jsx)(R.Z,Z()({data:j.byChannel},{angleField:"count",colorField:"channel",radius:.8,label:{type:"outer",content:"{name} {percentage}"}}))},"channel"),(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.session.group"}),children:(0,L.jsx)(B.Z,Z()({data:j.byGroup},{xField:"group",yField:"count",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}}}))},"group")]})}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.agent.title"}),style:{marginTop:16},children:(0,L.jsxs)(f.Z,{defaultActiveKey:"workload",children:[(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.agent.workload"}),children:(0,L.jsx)(W.Z,{dataSource:m.workload,columns:b})},"workload"),(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.agent.quality"}),children:(0,L.jsx)(W.Z,{dataSource:m.quality,columns:k})},"quality")]})}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.bot.title"}),style:{marginTop:16},children:(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:12,children:(0,L.jsx)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.bot.usage"}),children:(0,L.jsx)(N.Z,Z()({},{xField:"date",yField:"count",seriesField:"type",smooth:!0}))})}),(0,L.jsx)(F.Z,{span:12,children:(0,L.jsx)(M.Z,{type:"inner",title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.bot.performance"}),children:(0,L.jsx)(A.Z,Z()({},{xField:"date",yField:"value",seriesField:"metric"}))})})]})}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.user.title"}),style:{marginTop:16},children:(0,L.jsxs)(f.Z,{defaultActiveKey:"distribution",children:[(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.user.distribution"}),children:(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(R.Z,Z()({data:h.distribution.location},{angleField:"count",colorField:"region",radius:.8}))}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(R.Z,Z()({data:h.distribution.device},{angleField:"count",colorField:"type",radius:.8}))}),(0,L.jsx)(F.Z,{span:8,children:(0,L.jsx)(B.Z,Z()({data:h.distribution.time},{xField:"hour",yField:"count"}))})]})},"distribution"),(0,L.jsx)(X,{tab:(0,L.jsx)(g.FormattedMessage,{id:"statistic.history.user.behavior"})},"behavior")]})})]})},$=s(42614),_=s(71625),tt=s(53436),et=s(73702),st=s(97416),it=s(92974),at=s(67444),nt=s(83890),rt=function(){var t=(0,g.useIntl)(),e=(0,g.useAccess)(),s=(0,p.useState)(5),i=o()(s,2),n=(i[0],i[1],(0,p.useState)(!1)),l=o()(n,2),c=(l[0],l[1]),d={summary:{total:8,critical:2,warning:3,info:3,resolved:12},metrics:{queueLength:{current:25,threshold:20,status:"error"},responseTime:{current:45,threshold:30,status:"warning"},botAccuracy:{current:82,threshold:85,status:"warning"},onlineAgents:{current:3,threshold:5,status:"critical"}},activeAlerts:[{id:1,type:"critical",metric:"queueLength",message:"等待队列超过阈值",time:"2024-01-23 14:30:25",value:25,threshold:20}],trends:{hourly:[{time:"13:00",alerts:2},{time:"14:00",alerts:5}]}},u={percent:.75,range:{color:["#ff4d4f","#ffa940","#52c41a"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{formatter:function(){return t.formatMessage({id:"statistic.warning.health"})},style:{fontSize:"16px"}},content:{formatter:function(t){var e=t.percent;return"".concat((100*e).toFixed(0),"%")}}}},x={data:d.trends.hourly,xField:"time",yField:"alerts",smooth:!0,areaStyle:{fill:"l(270) 0:#fff 1:#ff4d4f"}},j=[{title:t.formatMessage({id:"statistic.warning.type"}),dataIndex:"type",render:function(t){var e="critical"===t?"red":"warning"===t?"orange":"blue";return(0,L.jsx)($.Z,{color:e,children:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.level.".concat(t)})})}},{title:t.formatMessage({id:"statistic.warning.metric"}),dataIndex:"metric",render:function(t){return(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.metric.".concat(t)})}},{title:t.formatMessage({id:"statistic.warning.value"}),dataIndex:"value"},{title:t.formatMessage({id:"statistic.warning.threshold"}),dataIndex:"threshold"},{title:t.formatMessage({id:"statistic.warning.time"}),dataIndex:"time"}];(0,p.useEffect)((function(){m();var t=setInterval(m,3e4);return function(){return clearInterval(t)}}),[]);var m=function(){var e=r()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c(!0)}catch(e){_.ZP.error(t.formatMessage({id:"statistic.loading.failed"}))}finally{c(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,L.jsxs)(g.Access,{accessible:e.canDebug(),children:[(0,L.jsxs)(v.Z,{gutter:[16,16],children:[(0,L.jsx)(F.Z,{span:6,children:(0,L.jsxs)(M.Z,{children:[(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.active"}),value:d.summary.total,valueStyle:{color:d.summary.total>5?"#ff4d4f":"#1890ff"},prefix:(0,L.jsx)(it.Z,{})}),(0,L.jsx)(b.Z,{percent:d.summary.total/20*100,status:d.summary.total>5?"exception":"active",size:"small"})]})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(M.Z,{children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.critical"}),value:d.summary.critical,valueStyle:{color:"#ff4d4f"},prefix:(0,L.jsx)(K.Z,{})})})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(M.Z,{children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.warning"}),value:d.summary.warning,valueStyle:{color:"#faad14"},prefix:(0,L.jsx)(at.Z,{})})})}),(0,L.jsx)(F.Z,{span:6,children:(0,L.jsx)(M.Z,{children:(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.resolved"}),value:d.summary.resolved,valueStyle:{color:"#52c41a"},prefix:(0,L.jsx)(E.Z,{})})})})]}),(0,L.jsxs)(v.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,L.jsx)(F.Z,{span:12,children:(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.metrics"}),children:(0,L.jsx)(v.Z,{gutter:[16,16],children:Object.entries(d.metrics).map((function(e){var s=o()(e,2),i=s[0],a=s[1];return(0,L.jsx)(F.Z,{span:12,children:(0,L.jsxs)(M.Z,{type:"inner",children:[(0,L.jsx)(w.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.metric.".concat(i)}),value:a.current,valueStyle:{color:"error"===a.status?"#ff4d4f":"#faad14"},suffix:(0,L.jsx)(tt.Z,{title:"".concat(t.formatMessage({id:"statistic.warning.threshold"}),": ").concat(a.threshold),children:(0,L.jsx)(I.Z,{status:a.status})})}),(0,L.jsx)(b.Z,{percent:a.current/a.threshold*100,status:"error"===a.status?"exception":"active",size:"small"})]})},i)}))})})}),(0,L.jsx)(F.Z,{span:12,children:(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.health.monitor"}),children:(0,L.jsx)(st.Z,Z()({},u))})})]}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.trend"}),style:{marginTop:16},children:(0,L.jsx)(A.Z,Z()({},x))}),(0,L.jsx)(M.Z,{title:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.active.list"}),style:{marginTop:16},extra:(0,L.jsxs)(Q.Z,{children:[(0,L.jsx)(et.ZP,{type:"primary",icon:(0,L.jsx)(nt.Z,{}),children:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.acknowledge"})}),(0,L.jsx)(et.ZP,{icon:(0,L.jsx)(V.Z,{}),children:(0,L.jsx)(g.FormattedMessage,{id:"statistic.warning.refresh"})})]}),children:(0,L.jsx)(W.Z,{columns:j,dataSource:d.activeAlerts,rowKey:"id"})})]})},lt=s(62076),ot=m.Z.Content,ct=function(t){console.log(t)},dt=[{key:"today",label:"今日实时",children:(0,L.jsx)(G,{})},{key:"history",label:"历史数据",children:(0,L.jsx)(Y,{})},{key:"warn",label:"预警数据",children:(0,L.jsx)(rt,{})}],ut={marginLeft:20,marginTop:10,marginRight:20},xt=function(){var t=(0,g.useNavigate)(),e=((0,g.useModel)("@@initialState").initialState||{}).userInfo,s=(0,u.u)((function(t){return t.setCurrentOrg})),i=(0,p.useState)(!1),n=o()(i,2),l=n[0],y=n[1],Z=(0,p.useState)(""),v=o()(Z,2),F=v[0],M=v[1],w=(0,p.useState)(!1),b=o()(w,2),k=b[0],S=b[1],T=(0,p.useState)(!1),I=o()(T,2),A=I[0],R=I[1],C=function(){var t=r()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:if(null!==(null==e?void 0:e.currentOrganization)&&void 0!==(null==e?void 0:e.currentOrganization)){t.next=6;break}return console.log("before initOrganization",e),(null==e?void 0:e.platform)===x.Ogg&&R(!0),t.abrupt("return");case 6:console.log("after initOrganization"),s(null==e?void 0:e.currentOrganization);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=r()(a()().mark((function t(){var i,n,r;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==F){t.next=3;break}return c.yw.error("请输入组织名称"),t.abrupt("return");case 3:return y(!0),c.yw.loading("创建组织中，请稍后..."),i=null!=e&&e.mobile?null==e?void 0:e.mobile:null==e?void 0:e.email,n={name:F,code:i,logo:"https://www.weiyuai.cn/logo.png",description:F+"description"},t.next=9,(0,d.Kq)(n);case 9:r=t.sent,console.log("createOrg response:",r),200===r.code?(y(!1),s(r.data),c.yw.destroy(),c.yw.success("创建组织成功"),R(!1),window.location.reload()):(y(!1),c.yw.destroy(),c.yw.error(r.message));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,p.useEffect)((function(){C(),null!=e&&e.emailVerified||null!=e&&e.mobileVerified||(console.log("before verifyAccount",e),c.yw.error("请先验证邮箱和手机号"),t("/setting/certification")),(0,j.Bc)()&&console.log("weiyuaiSaas")}),[e]),(0,L.jsx)(m.Z,{children:(0,L.jsxs)(ot,{style:ut,children:[(0,L.jsx)(f.Z,{defaultActiveKey:"today",items:dt,onChange:ct}),(0,L.jsxs)(lt.Z,{title:"未发现所在组织",open:A,onOk:q,onCancel:function(){c.yw.error("请创建或加入组织")},maskClosable:!1,footer:[(0,L.jsx)(et.ZP,{type:"primary",onClick:function(){R(!1)},disabled:!0,children:"加入已有组织(即将上线)"},"join"),(0,L.jsx)(et.ZP,{type:"primary",loading:l,onClick:function(){k?q():(S(!0),y(!1))},children:"创建组织"},"create")],children:[(0,L.jsx)("p",{children:"您需要创建或加入已有组织"}),k&&(0,L.jsx)(h.Z,{placeholder:"请输入组织名称",value:F,onChange:function(t){return M(t.target.value)},onPressEnter:q})]})]})})}}}]);