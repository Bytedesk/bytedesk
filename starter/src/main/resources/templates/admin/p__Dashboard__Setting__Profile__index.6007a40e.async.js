"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{73803:function(x,g,e){var t=e(85615),i=e(66419),D=e(86745);function l(){var p=(0,D.useIntl)(),c=function(r){return r&&r.startsWith(t.Vo)?p.formatMessage({id:r,defaultMessage:r}):r},U=function(r){return r!=null&&r.startsWith(t.Vo)?(0,i.aS)(p.formatMessage({id:r}),10):(0,i.aS)(r,10)};return{translateString:c,translateStringTranct:U}}g.Z=l},5486:function(x,g,e){e.r(g);var t=e(15009),i=e.n(t),D=e(97857),l=e.n(D),p=e(99289),c=e.n(p),U=e(5574),f=e.n(U),r=e(67294),W=e(8232),F=e(7134),M=e(14726),R=e(85576),I=e(34994),E=e(5966),O=e(90672),K=e(86745),A=e(88484),n=e(60247),h=e(16761),a=e(80049),o=e(66723),b=e(73803),d=e(66419),s=e(85893),B={labelCol:{span:8},wrapperCol:{span:8}},N=function(){var T=(0,K.useIntl)(),z=W.Z.useForm(),Z=f()(z,1),w=Z[0],j=(0,b.Z)(),V=j.translateString,$=(0,n.L)(function(P){return{userInfo:P.userInfo,setUserInfo:P.setUserInfo}}),m=$.userInfo,Y=$.setUserInfo,S=(0,r.useState)(""),L=f()(S,2),J=L[0],Q=L[1],k=(0,r.useState)(!1),X=f()(k,2),q=X[0],H=X[1],ee=function(){H(!0)},se=function(){H(!1)},ne=function(){H(!1)},ae=function(_){console.log("handleUploadSuccess:",_),Q(_)},re=function(_){console.log("handleUploadError:",_)},te=function(){var P=c()(i()().mark(function _(C){var y,v;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return y=l()(l()(l()({},m),C),{},{avatar:J}),console.log(y),u.next=4,(0,h.ck)(y);case 4:v=u.sent,console.log("updateProfile response:",v),v.code===200?(a.yw.success("\u4FEE\u6539\u6210\u529F"),v.data.username!==m.username?(0,d.NZ)():Y(v.data)):a.yw.error(v.message);case 7:case"end":return u.stop()}},_)}));return function(C){return P.apply(this,arguments)}}(),oe=function(_){return Array.isArray(_)?_:_==null?void 0:_.fileList};return(0,r.useEffect)(function(){m&&Q(m.avatar)},[m]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I.A,l()(l()({},B),{},{form:w,onFinish:te,initialValues:{username:m.username,nickname:m.nickname,email:m.email,mobile:m.mobile,description:V(m.description)},children:[(0,s.jsx)(I.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:oe,label:T.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,s.jsxs)(o.G,{onSuccess:ae,onError:re,children:[(0,s.jsx)(F.C,{src:J}),(0,s.jsx)(M.ZP,{icon:(0,s.jsx)(A.Z,{}),children:T.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,s.jsx)(E.Z,{name:"username",label:"\u767B\u5F55\u7528\u6237\u540D(\u4FEE\u6539\u7528\u6237\u540D\u4E4B\u540E\uFF0C\u9700\u8981\u91CD\u65B0\u767B\u5F55)",rules:[{required:!0}]}),(0,s.jsx)(E.Z.Password,{name:"password",label:"\u767B\u5F55\u5BC6\u7801",children:(0,s.jsx)(M.ZP,{onClick:ee,children:T.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"})})}),(0,s.jsx)(E.Z,{name:"nickname",label:"\u6635\u79F0",rules:[{required:!0}]}),(0,s.jsx)(E.Z,{name:"email",label:m.emailVerified?"\u90AE\u7BB1(\u5DF2\u9A8C\u8BC1)":"\u90AE\u7BB1(\u672A\u9A8C\u8BC1)",rules:[{type:"email"}],disabled:!0}),(0,s.jsx)(E.Z,{name:"mobile",label:m.mobileVerified?"\u624B\u673A\u53F7(\u5DF2\u9A8C\u8BC1)":"\u624B\u673A\u53F7(\u672A\u9A8C\u8BC1)",disabled:!0}),(0,s.jsx)(O.Z,{name:"description",label:"\u63CF\u8FF0"})]})),(0,s.jsx)(R.Z,{title:T.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"}),open:q,footer:null,onCancel:ne,children:(0,s.jsxs)(I.A,{initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},onFinish:function(){var P=c()(i()().mark(function _(C){var y,v;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(console.log("changePassword:",C),!(C.newPassword.trim().length<6)){u.next=4;break}return a.yw.error("password length should not be less than 6"),u.abrupt("return");case 4:if(C.newPassword===C.confirmPassword){u.next=7;break}return a.yw.error("New password and confirm password do not match"),u.abrupt("return");case 7:return y={oldPassword:C.oldPassword,newPassword:C.newPassword},u.next=10,(0,h.Cp)(y);case 10:v=u.sent,console.log("changePassword response:",v),v.code===200?(a.yw.success("Password changed successfully!"),se()):a.yw.error(v.message);case 13:case"end":return u.stop()}},_)}));return function(_){return P.apply(this,arguments)}}(),children:[(0,s.jsx)(E.Z.Password,{name:"oldPassword",label:"\u539F\u5BC6\u7801"}),(0,s.jsx)(E.Z.Password,{name:"newPassword",label:"\u65B0\u5BC6\u7801"}),(0,s.jsx)(E.Z.Password,{name:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801"})]})})]})};g.default=N},60247:function(x,g,e){e.d(g,{L:function(){return p}});var t=e(85615),i=e(64529),D=e(782),l=e(71381),p=(0,i.Ue)()((0,D.mW)((0,D.tJ)((0,l.n)(function(c,U){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(r){c({userInfo:r})},setDeviceUid:function(r){c({deviceUid:r})},deleteUserInfo:function(){return c({},!0)}}}),{name:t.Em})))},66723:function(x,g,e){e.d(g,{G:function(){return W}});var t=e(97857),i=e.n(t),D=e(67294),l=e(66476),p=e(85615),c=e(27484),U=e.n(c),f=e(80049),r=e(85893),W=function(M){var R=M.children,I=M.onSuccess,E=M.onError,O={file:null,file_name:"test.png",file_type:"image/png"},K={name:"file",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(p.LA)},data:O,showUploadList:!1,beforeUpload:function(n){console.log("beforeUpload",n);var h=U()(new Date).format("YYYYMMDDHHmmss")+"_"+n.name;O.file=n,O.file_name=h,O.file_type=n.type,console.log("beforeUpload",O)},onChange:function(n){if(n.file.status!=="uploading"&&console.log(n.file,n.fileList),n.file.status==="done"){var h=n.file.response.data;console.log("url: ",h),I(h),f.yw.success("".concat(n.file.name," \u4E0A\u4F20\u6210\u529F"))}else n.file.status==="error"&&(f.yw.error("".concat(n.file.name," \u4E0A\u4F20\u5931\u8D25")),E(n.file))}};return(0,r.jsx)(l.Z,i()(i()({},K),{},{children:R}))}},85576:function(x,g,e){e.d(g,{Z:function(){return h}});var t=e(56080),i=e(38657),D=e(56745),l=e(67294),p=e(93967),c=e.n(p),U=e(31058),f=e(8745),r=e(53124),W=e(35792),F=e(32409),M=e(4941),R=e(71194),I=function(a,o){var b={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&o.indexOf(d)<0&&(b[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,d=Object.getOwnPropertySymbols(a);s<d.length;s++)o.indexOf(d[s])<0&&Object.prototype.propertyIsEnumerable.call(a,d[s])&&(b[d[s]]=a[d[s]]);return b};const E=a=>{const{prefixCls:o,className:b,closeIcon:d,closable:s,type:B,title:N,children:G,footer:T}=a,z=I(a,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:Z}=l.useContext(r.E_),w=Z(),j=o||Z("modal"),V=(0,W.Z)(w),[$,m,Y]=(0,R.ZP)(j,V),S=`${j}-confirm`;let L={};return B?L={closable:s!=null?s:!1,title:"",footer:"",children:l.createElement(F.O,Object.assign({},a,{prefixCls:j,confirmPrefixCls:S,rootPrefixCls:w,content:G}))}:L={closable:s!=null?s:!0,title:N,footer:T!==null&&l.createElement(M.$,Object.assign({},a)),children:G},$(l.createElement(U.s,Object.assign({prefixCls:j,className:c()(m,`${j}-pure-panel`,B&&S,B&&`${S}-${B}`,b,Y,V)},z,{closeIcon:(0,M.b)(j,d),closable:s},L)))};var O=(0,f.i)(E),K=e(94423);function A(a){return(0,t.ZP)((0,t.uW)(a))}const n=D.Z;n.useModal=K.Z,n.info=function(o){return(0,t.ZP)((0,t.cw)(o))},n.success=function(o){return(0,t.ZP)((0,t.vq)(o))},n.error=function(o){return(0,t.ZP)((0,t.AQ)(o))},n.warning=A,n.warn=A,n.confirm=function(o){return(0,t.ZP)((0,t.Au)(o))},n.destroyAll=function(){for(;i.Z.length;){const o=i.Z.pop();o&&o()}},n.config=t.ai,n._InternalPanelDoNotUseOrYouWillBeFired=O;var h=n}}]);
