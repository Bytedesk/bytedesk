"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3562],{76469:function(e,t,n){n.d(t,{$l:function(){return f},gf:function(){return m},lg:function(){return g},p0:function(){return d}});var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(64453),c=n(45234);function d(e){return v.apply(this,arguments)}function v(){return(v=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},96433:function(e,t,n){n.d(t,{Yg:function(){return m},kh:function(){return g},pf:function(){return d},y:function(){return f}});var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(64453),c=n(45234);function d(e){return v.apply(this,arguments)}function v(){return(v=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},75693:function(e,t,n){n.d(t,{H:function(){return d}});var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(64453),c=n(45234);function d(e){return v.apply(this,arguments)}function v(){return(v=l()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/vip/invoice/query/org",{method:"GET",params:r()(r()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},33778:function(e,t,n){var s=n(64453),i=n(45234),o=n(52676);t.Z=function(e){e.type;var t=(0,i.useAccess)();return t.canDebug&&console.log("TabBlack canDebug"),(0,o.jsx)("div",{children:(0,o.jsx)("p",{children:(0,o.jsx)(i.Access,{accessible:t.canDebug(),fallback:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.FormattedMessage,{id:s.h5w})}),children:"黑名单访客、黑名单ip/ip段"})})})}},27066:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(76469),p=n(1705),f=n(80501),h=n(64978),m=n(58659),w=n(64453),q=n(43393),F=n(99755),y=n(45234),k=n(75271),S=n(52676);t.Z=function(e){var t=e.type,n=(0,y.useIntl)(),s=q.A.useForm(),o=c()(s,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,x=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=x.currentAgent,U=x.setCurrentAgent,C=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=C.currentWorkgroup,Z=C.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(t===w._X4)o.setFieldsValue({showCaptcha:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showCaptcha});else if(t===w.Njn){var n;o.setFieldsValue({showCaptcha:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showCaptcha})}else if(t===w.aZD){var s;o.setFieldsValue({showCaptcha:null==A||null===(s=A.serviceSettings)||void 0===s?void 0:s.showCaptcha})}}),[a,j,A]);var M=function(){var e=l()(i()().mark((function e(s){var o,u,l,c,f,h,m,q,F,y,k,S,x,C,M,R,W,T,I,P,V,O,E,N,D;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleCaptchaSubmit:",s),t!==w._X4){e.next=11;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showCaptcha:s.showCaptcha,faqUids:null==j||null===(o=j.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(c=a.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),b(m.data)):(d.yw.destroy(),d.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return M=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showCaptcha:s.showCaptcha,faqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),robotUid:null==j||null===(F=j.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==j||null===(k=j.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null==j||null===(C=j.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",M),e.next=16,(0,v.sE)(M);case 16:R=e.sent,console.log("updateAgent response:",R),200===R.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),U(R.data)):(d.yw.destroy(),d.yw.error(R.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return N=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showCaptcha:s.showCaptcha,faqUids:null==j||null===(W=j.serviceSettings)||void 0===W||null===(W=W.faqs)||void 0===W?void 0:W.map((function(e){return e.uid})),robotUid:null===(T=A.serviceSettings)||void 0===T||null===(T=T.robot)||void 0===T?void 0:T.uid,quickFaqUids:null===(I=A.serviceSettings)||void 0===I||null===(I=I.quickFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(V=A.serviceSettings)||void 0===V||null===(V=V.hotFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),worktimeUids:null===(E=A.serviceSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",N),e.next=26,(0,p.W5)(N);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),Z(D.data)):(d.yw.destroy(),d.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,S.jsx)("div",{children:(0,S.jsx)(q.A,{form:o,onFinish:M,children:(0,S.jsx)(F.Z,{width:"md",name:"showCaptcha",label:n.formatMessage({id:"showCaptcha",defaultMessage:"Show Captcha"})})})})}},16548:function(e,t,n){var s=n(26068),i=n.n(s),o=n(90228),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(96433),g=n(76469),p=n(92785),f=n(64978),h=n(65098),m=n(42452),w=n(92710),q=n(43393),F=n(99755),y=n(6817),k=n(45234),S=n(20679),b=n(42502),x=n(7283),j=n(75271),U=n(80501),C=n(58659),A=n(64453),Z=n(81113),M=n(1705),R=n(52676);t.Z=function(e){var t,n=e.type,s=q.A.useForm(),o=c()(s,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),W=(0,p.Z)().translateString,T=(0,h.u)((function(e){return e.currentOrg})),I=(0,j.useState)(),P=c()(I,2),V=P[0],O=P[1],E=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=E.currentRobot,D=E.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),B=H.currentAgent,G=H.setCurrentAgent,L=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=L.currentWorkgroup,$=L.setCurrentWorkgroup,X=function(){var e=l()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:T.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?O(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){X()}),[T]),(0,j.useEffect)((function(){var e,t;if(n===A._X4)o.setFieldsValue({showFaqs:null==N||null===(e=N.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==N||null===(t=N.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))});else if(n===A.Njn){var s,i;o.setFieldsValue({showFaqs:null==B||null===(s=B.serviceSettings)||void 0===s?void 0:s.showFaqs,faqUids:null==B||null===(i=B.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid}))})}else if(n===A.aZD){var r,u;o.setFieldsValue({showFaqs:null==_||null===(r=_.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==_||null===(u=_.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[N,B,_]);var Q=function(){var e=l()(r()().mark((function e(t){var s,o,l,a,c,v,p,f,h,m,w,q,F,y,k,S,b,x,j,U,C,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==A._X4){e.next=11;break}return c=i()(i()({},N),{},{serviceSettings:i()(i()({},N.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==N||null===(o=N.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),D(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==A.Njn){e.next=21;break}return F=i()(i()({},B),{},{serviceSettings:i()(i()({},null==B?void 0:B.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,robotUid:null==B||null===(p=B.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==B||null===(f=B.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==B||null===(h=B.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==B||null===(m=B.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(w=B.serviceSettings)||void 0===w||null===(w=w.shortcutFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),worktimeUids:null==B||null===(q=B.serviceSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:i()({},B.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,Z.sE)(F);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),G(y.data)):(d.yw.destroy(),d.yw.error(y.message)),e.next=29;break;case 21:if(n!==A.aZD){e.next=29;break}return C=i()(i()({},_),{},{serviceSettings:i()(i()({},_.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,robotUid:null===(k=_.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(S=_.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==_||null===(b=_.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==_||null===(x=_.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(j=_.serviceSettings)||void 0===j||null===(j=j.shortcutFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),worktimeUids:null===(U=_.serviceSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:_.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,M.W5)(C);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),$(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(S.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(b.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(A.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(x.Z,{}),(0,R.jsxs)(q.A,{form:o,layout:"vertical",onFinish:Q,children:[(0,R.jsx)(F.Z,{label:"是否显示常见问题",name:"showFaqs",fieldProps:{onChange:z}}),(0,R.jsx)(q.A.Item,{children:(0,R.jsx)(b.ZP,{icon:(0,R.jsx)(w.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(y.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faq"}),options:null==V||null===(t=V.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},20395:function(e,t,n){var s=n(26068),i=n.n(s),o=n(90228),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(96433),g=n(76469),p=n(92785),f=n(64978),h=n(65098),m=n(42452),w=n(92710),q=n(43393),F=n(99755),y=n(6817),k=n(45234),S=n(20679),b=n(42502),x=n(7283),j=n(75271),U=n(80501),C=n(58659),A=n(64453),Z=n(81113),M=n(1705),R=n(52676);t.Z=function(e){var t,n=e.type,s=q.A.useForm(),o=c()(s,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),W=(0,p.Z)().translateString,T=(0,h.u)((function(e){return e.currentOrg})),I=(0,j.useState)(),P=c()(I,2),V=P[0],O=P[1],E=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=E.currentRobot,D=E.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),B=H.currentAgent,G=H.setCurrentAgent,L=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=L.currentWorkgroup,$=L.setCurrentWorkgroup,X=function(){var e=l()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:T.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?O(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){X()}),[T]),(0,j.useEffect)((function(){var e,t;if(n===A._X4)o.setFieldsValue({showGuessFaqs:null==N||null===(e=N.serviceSettings)||void 0===e?void 0:e.showGuessFaqs,guessFaqUids:null==N||null===(t=N.serviceSettings)||void 0===t||null===(t=t.guessFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))});else if(n===A.Njn){var s,i;o.setFieldsValue({showGuessFaqs:null==B||null===(s=B.serviceSettings)||void 0===s?void 0:s.showGuessFaqs,guessFaqUids:null==B||null===(i=B.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid}))})}else if(n===A.aZD){var r,u;o.setFieldsValue({showGuessFaqs:null==_||null===(r=_.serviceSettings)||void 0===r?void 0:r.showGuessFaqs,guessFaqUids:null==_||null===(u=_.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[N,B,_]);var Q=function(){var e=l()(r()().mark((function e(t){var s,o,l,a,c,v,p,f,h,m,w,q,F,y,k,S,b,x,j,U,C,R,W;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==A._X4){e.next=11;break}return c=i()(i()({},N),{},{serviceSettings:i()(i()({},N.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==N||null===(o=N.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),D(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==A.Njn){e.next=21;break}return F=i()(i()({},B),{},{serviceSettings:i()(i()({},null==B?void 0:B.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,robotUid:null==B||null===(p=B.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==B||null===(f=B.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==B||null===(h=B.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==B||null===(m=B.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(w=B.serviceSettings)||void 0===w||null===(w=w.shortcutFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),worktimeUids:null==B||null===(q=B.serviceSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:i()({},B.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,Z.sE)(F);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),G(y.data)):(d.yw.destroy(),d.yw.error(y.message)),e.next=29;break;case 21:if(n!==A.aZD){e.next=29;break}return R=i()(i()({},_),{},{serviceSettings:i()(i()({},_.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,robotUid:null===(k=_.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(S=_.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),faqUids:null==_||null===(b=_.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==_||null===(x=_.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(j=_.serviceSettings)||void 0===j||null===(j=j.shortcutFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),worktimeUids:null===(U=_.serviceSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:null===(C=_.agents)||void 0===C?void 0:C.map((function(e){return e.uid}))}),console.log("workgroupObject:",R),e.next=26,(0,M.W5)(R);case 26:W=e.sent,console.log("updateWorkGroup response:",W),200===W.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),$(W.data)):(d.yw.destroy(),d.yw.error(W.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqGuess handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(S.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(b.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(A.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(x.Z,{}),(0,R.jsxs)(q.A,{form:o,layout:"vertical",onFinish:Q,children:[(0,R.jsx)(F.Z,{label:"是否显示猜你想问",name:"showGuessFaqs",fieldProps:{onChange:z}}),(0,R.jsx)(q.A.Item,{children:(0,R.jsx)(b.ZP,{icon:(0,R.jsx)(w.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(y.Z,{name:"guessFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqGuess"}),options:null==V||null===(t=V.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},61575:function(e,t,n){var s=n(26068),i=n.n(s),o=n(90228),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(96433),g=n(76469),p=n(92785),f=n(64978),h=n(65098),m=n(42452),w=n(92710),q=n(43393),F=n(99755),y=n(6817),k=n(45234),S=n(20679),b=n(42502),x=n(7283),j=n(75271),U=n(80501),C=n(58659),A=n(64453),Z=n(81113),M=n(1705),R=n(52676);t.Z=function(e){var t,n=e.type,s=q.A.useForm(),o=c()(s,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),W=(0,p.Z)().translateString,T=(0,h.u)((function(e){return e.currentOrg})),I=(0,j.useState)(),P=c()(I,2),V=P[0],O=P[1],E=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=E.currentRobot,D=E.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),B=H.currentAgent,G=H.setCurrentAgent,L=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=L.currentWorkgroup,$=L.setCurrentWorkgroup,X=function(){var e=l()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:T.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?O(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){X()}),[T]),(0,j.useEffect)((function(){var e;if(n===A._X4)o.setFieldsValue({showHotFaqs:null==N?void 0:N.serviceSettings.showHotFaqs,hotFaqUids:(null==N||null===(e=N.serviceSettings)||void 0===e||null===(e=e.hotFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]});else if(n===A.Njn){var t;o.setFieldsValue({showHotFaqs:null==B?void 0:B.serviceSettings.showHotFaqs,hotFaqUids:(null==B||null===(t=B.serviceSettings)||void 0===t||null===(t=t.hotFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]})}else if(n===A.aZD){var s;o.setFieldsValue({showHotFaqs:null==_?void 0:_.serviceSettings.showHotFaqs,hotFaqUids:(null==_||null===(s=_.serviceSettings)||void 0===s||null===(s=s.hotFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})))||[]})}}),[N,B,_]);var Q=function(){var e=l()(r()().mark((function e(t){var s,o,l,a,c,v,p,f,h,m,w,q,F,y,k,S,b,x,j,U,C,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==A._X4){e.next=11;break}return c=i()(i()({},N),{},{serviceSettings:i()(i()({},N.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==N||null===(o=N.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),D(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==A.Njn){e.next=21;break}return F=i()(i()({},B),{},{serviceSettings:i()(i()({},null==B?void 0:B.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,robotUid:null==B||null===(p=B.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==B||null===(f=B.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==B||null===(h=B.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null==B||null===(m=B.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(w=B.serviceSettings)||void 0===w||null===(w=w.shortcutFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),worktimeUids:null==B||null===(q=B.serviceSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:i()({},B.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,Z.sE)(F);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),G(y.data)):(d.yw.destroy(),d.yw.error(y.message)),e.next=29;break;case 21:if(n!==A.aZD){e.next=29;break}return C=i()(i()({},_),{},{serviceSettings:i()(i()({},_.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,robotUid:null===(k=_.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(S=_.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),faqUids:null==_||null===(b=_.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==_||null===(x=_.serviceSettings)||void 0===x||null===(x=x.guessFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(j=_.serviceSettings)||void 0===j||null===(j=j.shortcutFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),worktimeUids:null===(U=_.serviceSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:_.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,M.W5)(C);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),$(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqHots handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(S.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(b.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(A.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(x.Z,{}),(0,R.jsxs)(q.A,{form:o,layout:"vertical",onFinish:Q,children:[(0,R.jsx)(F.Z,{label:"是否显示热门问题",name:"showHotFaqs",fieldProps:{onChange:z}}),(0,R.jsx)(q.A.Item,{children:(0,R.jsx)(b.ZP,{icon:(0,R.jsx)(w.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(y.Z,{name:"hotFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqHot"}),options:null==V||null===(t=V.data)||void 0===t?void 0:t.content.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},61714:function(e,t,n){var s=n(26068),i=n.n(s),o=n(90228),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(96433),g=n(76469),p=n(92785),f=n(64978),h=n(65098),m=n(42452),w=n(92710),q=n(43393),F=n(99755),y=n(6817),k=n(45234),S=n(20679),b=n(42502),x=n(7283),j=n(75271),U=n(80501),C=n(58659),A=n(64453),Z=n(81113),M=n(1705),R=n(52676);t.Z=function(e){var t,n=e.type,s=q.A.useForm(),o=c()(s,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),W=(0,p.Z)().translateString,T=(0,h.u)((function(e){return e.currentOrg})),I=(0,j.useState)(),P=c()(I,2),V=P[0],O=P[1],E=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=E.currentRobot,D=E.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),B=H.currentAgent,G=H.setCurrentAgent,L=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=L.currentWorkgroup,$=L.setCurrentWorkgroup,X=function(){var e=l()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:T.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?O(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){X()}),[T]),(0,j.useEffect)((function(){var e,t;if(n===A._X4)o.setFieldsValue({showQuickFaqs:null==N||null===(e=N.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==N||null===(t=N.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))});else if(n===A.Njn){var s,i;o.setFieldsValue({showQuickFaqs:null==B||null===(s=B.serviceSettings)||void 0===s?void 0:s.showQuickFaqs,quickFaqUids:null==B||null===(i=B.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid}))})}else if(n===A.aZD){var r,u;o.setFieldsValue({showQuickFaqs:null==_||null===(r=_.serviceSettings)||void 0===r?void 0:r.showQuickFaqs,quickFaqUids:null==_||null===(u=_.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[N,B,_]);var Q=function(){var e=l()(r()().mark((function e(t){var s,o,l,a,c,v,p,f,h,m,w,q,F,y,k,S,b,x,j,U,C,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==A._X4){e.next=11;break}return c=i()(i()({},N),{},{serviceSettings:i()(i()({},N.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==N||null===(o=N.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),D(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==A.Njn){e.next=21;break}return F=i()(i()({},B),{},{serviceSettings:i()(i()({},null==B?void 0:B.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,robotUid:null==B||null===(p=B.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,faqUids:null==B||null===(f=B.serviceSettings)||void 0===f||null===(f=f.faqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==B||null===(h=B.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==B||null===(m=B.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(w=B.serviceSettings)||void 0===w||null===(w=w.shortcutFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),worktimeUids:null==B||null===(q=B.serviceSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:i()({},B.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,Z.sE)(F);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),G(y.data)):(d.yw.destroy(),d.yw.error(y.message)),e.next=29;break;case 21:if(n!==A.aZD){e.next=29;break}return C=i()(i()({},_),{},{serviceSettings:i()(i()({},_.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,robotUid:null===(k=_.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,faqUids:null===(S=_.serviceSettings)||void 0===S||null===(S=S.faqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==_||null===(b=_.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==_||null===(x=_.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(j=_.serviceSettings)||void 0===j||null===(j=j.shortcutFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),worktimeUids:null===(U=_.serviceSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:_.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,M.W5)(C);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),$(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(S.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(b.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(A.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(x.Z,{}),(0,R.jsxs)(q.A,{form:o,layout:"vertical",onFinish:Q,children:[(0,R.jsx)(F.Z,{label:"是否显示快捷按钮",name:"showQuickFaqs",fieldProps:{onChange:z}}),(0,R.jsx)(q.A.Item,{children:(0,R.jsx)(b.ZP,{icon:(0,R.jsx)(w.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(y.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.quickbutton"}),options:null==V||null===(t=V.data)||void 0===t?void 0:t.content.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},3013:function(e,t,n){var s=n(26068),i=n.n(s),o=n(90228),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(96433),g=n(76469),p=n(92785),f=n(64978),h=n(65098),m=n(42452),w=n(92710),q=n(43393),F=n(99755),y=n(6817),k=n(45234),S=n(20679),b=n(42502),x=n(7283),j=n(75271),U=n(80501),C=n(58659),A=n(64453),Z=n(81113),M=n(1705),R=n(52676);t.Z=function(e){var t,n=e.type,s=q.A.useForm(),o=c()(s,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),W=(0,p.Z)().translateString,T=(0,h.u)((function(e){return e.currentOrg})),I=(0,j.useState)(),P=c()(I,2),V=P[0],O=P[1],E=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),N=E.currentRobot,D=E.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),B=H.currentAgent,G=H.setCurrentAgent,L=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),_=L.currentWorkgroup,$=L.setCurrentWorkgroup,X=function(){var e=l()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:T.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?O(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){X()}),[T]),(0,j.useEffect)((function(){var e,t;if(n===A._X4)o.setFieldsValue({showshortcutFaqs:null==N||null===(e=N.serviceSettings)||void 0===e?void 0:e.showshortcutFaqs,shortcutFaqUids:(null==N||null===(t=N.serviceSettings)||void 0===t||null===(t=t.shortcutFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]});else if(n===A.Njn){var s,i;o.setFieldsValue({showshortcutFaqs:null==B||null===(s=B.serviceSettings)||void 0===s?void 0:s.showshortcutFaqs,shortcutFaqUids:(null==B||null===(i=B.serviceSettings)||void 0===i||null===(i=i.shortcutFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})))||[]})}else if(n===A.aZD){var r,u;o.setFieldsValue({showshortcutFaqs:null==_||null===(r=_.serviceSettings)||void 0===r?void 0:r.showshortcutFaqs,shortcutFaqUids:(null==_||null===(u=_.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})))||[]})}}),[N,B,_]);var Q=function(){var e=l()(r()().mark((function e(t){var s,o,l,a,c,v,p,f,h,m,w,q,F,y,k,S,b,x,j,U,C,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t,n),n!==A._X4){e.next=11;break}return c=i()(i()({},N),{},{serviceSettings:i()(i()({},N.serviceSettings),{},{showshortcutFaqs:t.showshortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==N||null===(s=N.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==N||null===(o=N.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==N||null===(l=N.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==N||null===(a=N.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),D(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==A.Njn){e.next=21;break}return F=i()(i()({},B),{},{serviceSettings:i()(i()({},null==B?void 0:B.serviceSettings),{},{showshortcutFaqs:t.showshortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,robotUid:null==B||null===(p=B.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==B||null===(f=B.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==B||null===(h=B.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==B||null===(m=B.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),faqUids:null==B||null===(w=B.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),worktimeUids:null==B||null===(q=B.serviceSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:i()({},B.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,Z.sE)(F);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),G(y.data)):(d.yw.destroy(),d.yw.error(y.message)),e.next=29;break;case 21:if(n!==A.aZD){e.next=29;break}return C=i()(i()({},_),{},{serviceSettings:i()(i()({},_.serviceSettings),{},{showshortcutFaqs:t.showshortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,robotUid:null===(k=_.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(S=_.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),faqUids:null==_||null===(b=_.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==_||null===(x=_.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==_||null===(j=_.serviceSettings)||void 0===j||null===(j=j.guessFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),worktimeUids:null===(U=_.serviceSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:_.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,M.W5)(C);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),$(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqShortcut handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(S.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(b.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(A.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(x.Z,{}),(0,R.jsxs)(q.A,{form:o,layout:"vertical",onFinish:Q,children:[(0,R.jsx)(F.Z,{label:"是否显示快捷路径",name:"showshortcutFaqs",fieldProps:{onChange:z}}),(0,R.jsx)(q.A.Item,{children:(0,R.jsx)(b.ZP,{icon:(0,R.jsx)(w.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(y.Z,{name:"shortcutFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqShortcut"}),options:null==V||null===(t=V.data)||void 0===t?void 0:t.content.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},95297:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(76469),p=n(1705),f=n(80501),h=n(64978),m=n(58659),w=n(64453),q=n(43393),F=n(99755),y=n(45234),k=n(75271),S=n(52676);t.Z=function(e){var t=e.type,n=(0,y.useIntl)(),s=q.A.useForm(),o=c()(s,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,x=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=x.currentAgent,U=x.setCurrentAgent,C=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=C.currentWorkgroup,Z=C.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(t===w._X4)o.setFieldsValue({showHistory:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showHistory});else if(t===w.Njn){var n;o.setFieldsValue({showHistory:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showHistory})}else if(t===w.aZD){var s;o.setFieldsValue({showHistory:null==A||null===(s=A.serviceSettings)||void 0===s?void 0:s.showHistory})}}),[a,j,A]);var M=function(){var e=l()(i()().mark((function e(s){var o,u,l,c,f,h,m,q,F,y,k,S,x,C,M,R,W,T,I,P,V,O,E,N,D;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleHistorySubmit:",s),console.log("onFinish",s),t!==w._X4){e.next=12;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showHistory:s.showHistory,faqUids:null==j||null===(o=j.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(c=a.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=7,(0,g.$l)(h);case 7:m=e.sent,console.log("updateRobot response:",m),200===m.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),b(m.data)):(d.yw.destroy(),d.yw.error(m.message)),e.next=30;break;case 12:if(t!==w.Njn){e.next=22;break}return M=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showHistory:s.showHistory,faqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),robotUid:null==j||null===(F=j.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==j||null===(k=j.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null==j||null===(C=j.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",M),e.next=17,(0,v.sE)(M);case 17:R=e.sent,console.log("updateAgent response:",R),200===R.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),U(R.data)):(d.yw.destroy(),d.yw.error(R.message)),e.next=30;break;case 22:if(t!==w.aZD){e.next=30;break}return N=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showHistory:s.showHistory,faqUids:null==j||null===(W=j.serviceSettings)||void 0===W||null===(W=W.faqs)||void 0===W?void 0:W.map((function(e){return e.uid})),robotUid:null===(T=A.serviceSettings)||void 0===T||null===(T=T.robot)||void 0===T?void 0:T.uid,quickFaqUids:null===(I=A.serviceSettings)||void 0===I||null===(I=I.quickFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(V=A.serviceSettings)||void 0===V||null===(V=V.hotFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),worktimeUids:null===(E=A.serviceSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",N),e.next=27,(0,p.W5)(N);case 27:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),Z(D.data)):(d.yw.destroy(),d.yw.error(D.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,S.jsx)("div",{children:(0,S.jsx)(q.A,{form:o,onFinish:M,children:(0,S.jsx)(F.Z,{width:"md",name:"showHistory",label:n.formatMessage({id:"showHistory",defaultMessage:"Show History"})})})})}},27028:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(76469),p=n(1705),f=n(80501),h=n(64978),m=n(58659),w=n(64453),q=n(43393),F=n(99755),y=n(45234),k=n(75271),S=n(52676);t.Z=function(e){var t=e.type,n=(0,y.useIntl)(),s=q.A.useForm(),o=c()(s,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,x=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=x.currentAgent,U=x.setCurrentAgent,C=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=C.currentWorkgroup,Z=C.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(t===w._X4)o.setFieldsValue({showInputAssociation:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showInputAssociation});else if(t===w.Njn){var n;o.setFieldsValue({showInputAssociation:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showInputAssociation})}else if(t===w.aZD){var s;o.setFieldsValue({showInputAssociation:null==A||null===(s=A.serviceSettings)||void 0===s?void 0:s.showInputAssociation})}}),[a,j,A]);var M=function(){var e=l()(i()().mark((function e(s){var o,u,l,c,f,h,m,q,F,y,k,S,x,C,M,R,W,T,I,P,V,O,E,N,D;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleInputAssociationSubmit:",s),t!==w._X4){e.next=11;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showInputAssociation:s.showInputAssociation,faqUids:null==j||null===(o=j.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(c=a.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),b(m.data)):(d.yw.destroy(),d.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return M=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showInputAssociation:s.showInputAssociation,faqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),robotUid:null==j||null===(F=j.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==j||null===(k=j.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null==j||null===(C=j.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",M),e.next=16,(0,v.sE)(M);case 16:R=e.sent,console.log("updateAgent response:",R),200===R.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),U(R.data)):(d.yw.destroy(),d.yw.error(R.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return N=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showInputAssociation:s.showInputAssociation,faqUids:null==j||null===(W=j.serviceSettings)||void 0===W||null===(W=W.faqs)||void 0===W?void 0:W.map((function(e){return e.uid})),robotUid:null===(T=A.serviceSettings)||void 0===T||null===(T=T.robot)||void 0===T?void 0:T.uid,quickFaqUids:null===(I=A.serviceSettings)||void 0===I||null===(I=I.quickFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(V=A.serviceSettings)||void 0===V||null===(V=V.hotFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),worktimeUids:null===(E=A.serviceSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",N),e.next=26,(0,p.W5)(N);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),Z(D.data)):(d.yw.destroy(),d.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,S.jsx)("div",{children:(0,S.jsx)(q.A,{form:o,onFinish:M,children:(0,S.jsx)(F.Z,{width:"md",name:"showInputAssociation",label:n.formatMessage({id:"showInputAssociation",defaultMessage:"Show Input Association"})})})})}},64604:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(1705),p=n(80501),f=n(58659),h=n(64453),m=n(43393),w=n(99755),q=n(45234),F=n(75271),y=n(52676);t.Z=function(e){var t=e.type,n=(0,q.useIntl)(),s=(0,q.useAccess)(),o=m.A.useForm(),u=c()(o,1)[0],a=(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),k=a.currentAgent,S=a.setCurrentAgent,b=(0,f.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),x=b.currentWorkgroup,j=b.setCurrentWorkgroup;(0,F.useEffect)((function(){var e;if(t===h.Njn)u.setFieldsValue({showPreForm:null==k||null===(e=k.serviceSettings)||void 0===e?void 0:e.showPreForm});else if(t===h.aZD){var n;u.setFieldsValue({showPreForm:null==x||null===(n=x.serviceSettings)||void 0===n?void 0:n.showPreForm})}}),[k,x]);var U=function(){var e=l()(i()().mark((function e(s){var o,u,l,a,c,p,f,m,w,q,F,y,b,U,C,A,Z,M;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",s),t!==h.Njn){e.next=11;break}return m=r()(r()({},k),{},{serviceSettings:r()(r()({},null==k?void 0:k.serviceSettings),{},{showPreForm:s.showPreForm,faqUids:null==k||null===(o=k.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),robotUid:null==k||null===(u=k.serviceSettings)||void 0===u||null===(u=u.robot)||void 0===u?void 0:u.uid,quickFaqUids:null==k||null===(l=k.serviceSettings)||void 0===l||null===(l=l.quickFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==k||null===(a=k.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==k||null===(c=k.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==k||null===(p=k.serviceSettings)||void 0===p||null===(p=p.shortcutFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),worktimeUids:null==k||null===(f=k.serviceSettings)||void 0===f||null===(f=f.worktimes)||void 0===f?void 0:f.map((function(e){return e.uid}))}),autoReplySettings:r()({},k.autoReplySettings)}),console.log("agentObject:",m),e.next=6,(0,v.sE)(m);case 6:w=e.sent,console.log("updateAgent response:",w),200===w.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),S(w.data)):(d.yw.destroy(),d.yw.error(w.message)),e.next=19;break;case 11:if(t!==h.aZD){e.next=19;break}return Z=r()(r()({},x),{},{serviceSettings:r()(r()({},x.serviceSettings),{},{showPreForm:s.showPreForm,faqUids:null==k||null===(q=k.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),robotUid:null===(F=x.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null===(y=x.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==x||null===(b=x.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==x||null===(U=x.serviceSettings)||void 0===U||null===(U=U.hotFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(C=x.serviceSettings)||void 0===C||null===(C=C.shortcutFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),worktimeUids:null===(A=x.serviceSettings)||void 0===A||null===(A=A.worktimes)||void 0===A?void 0:A.map((function(e){return e.uid}))}),agentUids:x.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",Z),e.next=16,(0,g.W5)(Z);case 16:M=e.sent,console.log("updateWorkGroup response:",M),200===M.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),j(M.data)):(d.yw.destroy(),d.yw.error(M.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsx)(q.Access,{accessible:s.canDebug(),fallback:(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(q.FormattedMessage,{id:h.h5w})}),children:(0,y.jsx)(m.A,{form:u,onFinish:U,children:(0,y.jsx)(w.Z,{width:"md",name:"enabled",label:n.formatMessage({id:"leavemsg.enabled",defaultMessage:"Leave Message Enabled"})})})})})}},67585:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(76469),p=n(1705),f=n(80501),h=n(64978),m=n(58659),w=n(64453),q=n(43393),F=n(99755),y=n(45234),k=n(75271),S=n(52676);t.Z=function(e){var t=e.type,n=(0,y.useIntl)(),s=q.A.useForm(),o=c()(s,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,x=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=x.currentAgent,U=x.setCurrentAgent,C=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=C.currentWorkgroup,Z=C.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(t===w._X4)o.setFieldsValue({showPreForm:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showPreForm});else if(t===w.Njn){var n;o.setFieldsValue({showPreForm:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showPreForm})}else if(t===w.aZD){var s;o.setFieldsValue({showPreForm:null==A||null===(s=A.serviceSettings)||void 0===s?void 0:s.showPreForm})}}),[a,j,A]);var M=function(){var e=l()(i()().mark((function e(s){var o,u,l,c,f,h,m,q,F,y,k,S,x,C,M,R,W,T,I,P,V,O,E,N,D;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",s),t!==w._X4){e.next=11;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showPreForm:s.showPreForm,faqUids:null==j||null===(o=j.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(c=a.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),b(m.data)):(d.yw.destroy(),d.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return M=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showPreForm:s.showPreForm,faqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),robotUid:null==j||null===(F=j.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==j||null===(k=j.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null==j||null===(C=j.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",M),e.next=16,(0,v.sE)(M);case 16:R=e.sent,console.log("updateAgent response:",R),200===R.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),U(R.data)):(d.yw.destroy(),d.yw.error(R.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return N=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showPreForm:s.showPreForm,faqUids:null==j||null===(W=j.serviceSettings)||void 0===W||null===(W=W.faqs)||void 0===W?void 0:W.map((function(e){return e.uid})),robotUid:null===(T=A.serviceSettings)||void 0===T||null===(T=T.robot)||void 0===T?void 0:T.uid,quickFaqUids:null===(I=A.serviceSettings)||void 0===I||null===(I=I.quickFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(V=A.serviceSettings)||void 0===V||null===(V=V.hotFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),worktimeUids:null===(E=A.serviceSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",N),e.next=26,(0,p.W5)(N);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),Z(D.data)):(d.yw.destroy(),d.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,S.jsx)("div",{children:(0,S.jsx)(q.A,{form:o,onFinish:M,children:(0,S.jsx)(F.Z,{width:"md",name:"showPreForm",label:n.formatMessage({id:"showPreForm",defaultMessage:"Show PreForm"})})})})}},32700:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(1705),p=n(80501),f=n(58659),h=n(64453),m=n(43393),w=n(99755),q=n(45234),F=n(75271),y=n(52676);t.Z=function(e){var t=e.type,n=(0,q.useIntl)(),s=m.A.useForm(),o=c()(s,1)[0],u=(0,F.useState)(!1),a=c()(u,2),k=(a[0],a[1],(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}}))),S=k.currentAgent,b=k.setCurrentAgent,x=(0,f.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),j=x.currentWorkgroup,U=x.setCurrentWorkgroup;(0,F.useEffect)((function(){var e;if(t===h.Njn)o.setFieldValue("showRateBtn",null==S||null===(e=S.serviceSettings)||void 0===e?void 0:e.showRateBtn);else if(t===h.aZD){var n;o.setFieldValue("showRateBtn",null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showRateBtn)}}),[S,j]);var C=function(){var e=l()(i()().mark((function e(s){var o,u,l,a,c,p,f,m,w,q,F,y,k,x,C,A,Z,M;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleShowRateSwitchChange:",s),t!==h.Njn){e.next=11;break}return m=r()(r()({},S),{},{serviceSettings:r()(r()({},null==S?void 0:S.serviceSettings),{},{showRateBtn:s,robotUid:null==S||null===(o=S.serviceSettings)||void 0===o||null===(o=o.robot)||void 0===o?void 0:o.uid,quickFaqUids:null==S||null===(u=S.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),faqUids:null==S||null===(l=S.serviceSettings)||void 0===l||null===(l=l.faqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==S||null===(a=S.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==S||null===(c=S.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==S||null===(p=S.serviceSettings)||void 0===p||null===(p=p.shortcutFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),worktimeUids:null==S||null===(f=S.serviceSettings)||void 0===f||null===(f=f.worktimes)||void 0===f?void 0:f.map((function(e){return e.uid}))}),autoReplySettings:r()({},S.autoReplySettings)}),console.log("agentObject:",m),e.next=6,(0,v.sE)(m);case 6:w=e.sent,console.log("updateAgent response:",w),200===w.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),b(w.data)):(d.yw.destroy(),d.yw.error(w.message)),e.next=19;break;case 11:if(t!==h.aZD){e.next=19;break}return Z=r()(r()({},j),{},{serviceSettings:r()(r()({},j.serviceSettings),{},{showRateBtn:s,robotUid:null===(q=j.serviceSettings)||void 0===q||null===(q=q.robot)||void 0===q?void 0:q.uid,quickFaqUids:null===(F=j.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),faqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==j||null===(k=j.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null===(x=j.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(C=j.serviceSettings)||void 0===C||null===(C=C.shortcutFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),worktimeUids:null===(A=j.serviceSettings)||void 0===A||null===(A=A.worktimes)||void 0===A?void 0:A.map((function(e){return e.uid}))}),agentUids:j.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",Z),e.next=16,(0,g.W5)(Z);case 16:M=e.sent,console.log("updateWorkGroup response:",M),200===M.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),U(M.data)):(d.yw.destroy(),d.yw.error(M.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(m.A,{form:o,submitter:{render:!1},children:[(0,y.jsx)(w.Z,{width:"md",name:"showRateBtn",label:"访客端是否显示评价按钮",fieldProps:{onChange:C}}),!1]})})}},42947:function(e,t,n){n.d(t,{Z:function(){return D}});var s=n(15558),i=n.n(s),o=n(26068),r=n.n(o),u=n(90228),l=n.n(u),a=n(87999),c=n.n(a),d=n(48305),v=n.n(d),g=n(37240),p=n(81113),f=n(92785),h=n(80501),m=n(43393),w=n(43591),q=n(80381),F=n(46418),y=n(6817),k=n(75271),S=n(16483),b=n.n(S),x=n(64453),j=n(45234);function U(e){return C.apply(this,arguments)}function C(){return(C=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/worktime/create",{method:"POST",data:r()(r()({},t),{},{client:x.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return Z.apply(this,arguments)}function Z(){return(Z=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/worktime/update",{method:"POST",data:r()(r()({},t),{},{client:x.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return R.apply(this,arguments)}function R(){return(R=c()(l()().mark((function e(t){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/worktime/delete",{method:"POST",data:r()(r()({},t),{},{client:x.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=n(30156),T=n.n(W),I=n(65098),P=n(76469),V=n(58659),O=n(1705),E=n(52676);b().extend(T());var N="HH:mm:ss",D=function(e){var t=e.type,n=m.A.useForm(),s=v()(n,1)[0],o=(0,j.useIntl)(),u=(0,k.useRef)(!1),a=(0,k.useRef)(),d=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),S=d.currentAgent,C=d.setCurrentAgent,Z=(0,V.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),R=Z.currentWorkgroup,W=Z.setCurrentWorkgroup,T=(0,k.useState)([]),D=v()(T,2),H=D[0],B=D[1],G=(0,I.u)((function(e){return e.currentOrg})),L=(0,f.Z)().translateString,_=(0,k.useState)([]),$=v()(_,2),X=$[0],Q=$[1];(0,k.useEffect)((function(){var e,n,i,o,r;if(t===x.Njn)Q(null==S||null===(e=S.serviceSettings)||void 0===e?void 0:e.worktimes),s.setFieldValue("defaultRobot",null==S||null===(n=S.serviceSettings)||void 0===n?void 0:n.defaultRobot),s.setFieldValue("offlineRobot",null==S||null===(i=S.serviceSettings)||void 0===i?void 0:i.offlineRobot),s.setFieldValue("nonWorktimeRobot",null==S||null===(o=S.serviceSettings)||void 0===o?void 0:o.nonWorktimeRobot),s.setFieldValue("robotUid",null==S||null===(r=S.serviceSettings)||void 0===r||null===(r=r.robot)||void 0===r?void 0:r.uid);else if(t===x.aZD){var u,l,a,c,d;Q(null==R||null===(u=R.serviceSettings)||void 0===u?void 0:u.worktimes),s.setFieldValue("defaultRobot",null==R||null===(l=R.serviceSettings)||void 0===l?void 0:l.defaultRobot),s.setFieldValue("offlineRobot",null==R||null===(a=R.serviceSettings)||void 0===a?void 0:a.offlineRobot),s.setFieldValue("nonWorktimeRobot",null==R||null===(c=R.serviceSettings)||void 0===c?void 0:c.nonWorktimeRobot),s.setFieldValue("robotUid",null==R||null===(d=R.serviceSettings)||void 0===d||null===(d=d.robot)||void 0===d?void 0:d.uid)}}),[S,R]);var z=function(){var e=c()(l()().mark((function e(){var t,n,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.current){e.next=3;break}return console.log("isLoading: 1",u.current),e.abrupt("return");case 3:return u.current=!0,g.yw.loading("loading"),t={pageNumber:0,pageSize:50,type:x.f4h,orgUid:G.uid},e.next=8,(0,P.p0)(t);case 8:n=e.sent,console.log("queryRobotsByOrg: ",n),200===n.code?B(null===(s=n.data)||void 0===s?void 0:s.content):g.yw.error(n.message),u.current=!1,g.yw.destroy();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){z()}),[]);var J,K,Y=function(){var e=c()(l()().mark((function e(n){var s,i,u,a,c,d,v,f,h,m,w,q,F,y,k;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",n),g.yw.loading(o.formatMessage({id:"updating",defaultMessage:"updating"})),t!==x.Njn){e.next=12;break}return d=r()(r()({},S),{},{serviceSettings:r()(r()({},S.serviceSettings),{},{defaultRobot:n.defaultRobot,offlineRobot:n.offlineRobot,nonWorktimeRobot:n.nonWorktimeRobot,robotUid:n.robotUid,worktimeUids:X.map((function(e){return null==e?void 0:e.uid})),quickFaqUids:null===(s=S.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null===(i=S.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==S||null===(u=S.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==S||null===(a=S.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==S||null===(c=S.serviceSettings)||void 0===c||null===(c=c.shortcutFaqs)||void 0===c?void 0:c.map((function(e){return e.uid}))}),maxThreadCount:(null==n?void 0:n.maxThreadCount)||10,autoReplySettings:r()({},S.autoReplySettings)}),console.log("agentObject:",d),e.next=7,(0,p.sE)(d);case 7:v=e.sent,console.log("updateAgent response:",v),200===v.code?(g.yw.destroy(),g.yw.success(o.formatMessage({id:"update.success"})),C(v.data)):(g.yw.destroy(),g.yw.error(v.message)),e.next=20;break;case 12:if(t!==x.aZD){e.next=20;break}return y=r()(r()({},R),{},{serviceSettings:r()(r()({},R.serviceSettings),{},{defaultRobot:n.defaultRobot,offlineRobot:n.offlineRobot,nonWorktimeRobot:n.nonWorktimeRobot,robotUid:n.robotUid,worktimeUids:X.map((function(e){return null==e?void 0:e.uid})),quickFaqUids:null===(f=R.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null===(h=R.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),guessFaqUids:null==R||null===(m=R.serviceSettings)||void 0===m||null===(m=m.guessFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),hotFaqUids:null==R||null===(w=R.serviceSettings)||void 0===w||null===(w=w.hotFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(q=R.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),agentUids:null==R||null===(F=R.agents)||void 0===F?void 0:F.map((function(e){return e.uid}))}),console.log("workgroupObject:",y),e.next=17,(0,O.W5)(y);case 17:k=e.sent,console.log("updateWorkGroup response:",k),200===k.code?(g.yw.destroy(),g.yw.success(o.formatMessage({id:"update.success"})),W(k.data)):(g.yw.destroy(),g.yw.error(k.message));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=[];return X.map((function(t){e.push({worktime:[b()(t.startTime,N),b()(t.endTime,N)]})})),e},te=function(){var e=c()(l()().mark((function e(t,n,s){var i,o,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onWorktimeChange:",s,n),o={uid:null===(i=X[s])||void 0===i?void 0:i.uid,startTime:n[0],endTime:n[1]},e.next=4,A(o);case 4:r=e.sent,console.log("updateWorktime response:",r),200===r.code||g.yw.error(r.message);case 7:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),ne=function(){var e=c()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("createWorktime"),t={startTime:"00:00:00",endTime:"23:59:59"},e.next=4,U(t);case 4:n=e.sent,console.log("createWorktime response:",n),200===n.code?Q([].concat(i()(X),[n.data])):g.yw.error(n.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=c()(l()().mark((function e(t){var n,s,i,o;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWorktime:",t,null===(n=X[t])||void 0===n?void 0:n.uid),i={uid:null===(s=X[t])||void 0===s?void 0:s.uid},e.next=4,M(i);case 4:o=e.sent,console.log("deleteWorktime response:",o),200===o.code?Q(X.filter((function(e,n){return n!==t}))):g.yw.error(o.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.useEffect)((function(){console.log("worktimes:",X),s.setFieldValue("worktimes",ee())}),[X]),(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(m.A,{form:s,style:{marginLeft:"100px"},onFinish:Y,children:[(0,E.jsx)(w.Z,{name:"defaultRobot",width:"md",label:"默认启用机器人"}),(0,E.jsx)(w.Z,{name:"offlineRobot",width:"md",label:"无客服在线时启用机器人"}),(0,E.jsx)(w.Z,{name:"nonWorktimeRobot",width:"md",label:"非工作时间启用机器人"}),(0,E.jsx)(q.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"工作时间区间，支持多个",creatorRecord:{worktime:[b()("00:00:00",N),b()("23:59:59",N)]},initialValue:ee(),creatorButtonProps:{creatorButtonText:"添加",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"删除"},itemRender:function(e){var t=e.listDom,n=e.action;return(0,E.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[t,n]})},min:1,max:4,actionRef:a,actionGuard:{beforeAddRow:(K=c()(l()().mark((function e(t,n,s){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("beforeAddRow:",t,n),e.next=3,ne();case 3:return e.abrupt("return",new Promise((function(e){e(!0)})));case 4:case"end":return e.stop()}}),e)}))),function(e,t,n){return K.apply(this,arguments)}),beforeRemoveRow:(J=c()(l()().mark((function e(t,n){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("beforeRemoveRow:",t),e.next=3,se(t);case 3:return e.abrupt("return",new Promise((function(e){e(0!==t)})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return J.apply(this,arguments)})},children:function(e,t,n){return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(F.Z.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(e,n){te(e,n,t)},format:N}},"worktime")})}}),(0,E.jsx)(y.Z,{name:"robotUid",label:"客服机器人",width:"md",options:H.map((function(e){return{value:e.uid,label:L(e.nickname)}})),fieldProps:{allowClear:!0,placeholder:"请选择客服机器人"}})]})})}},32998:function(e,t,n){var s=n(90228),i=n.n(s),o=n(26068),r=n.n(o),u=n(87999),l=n.n(u),a=n(48305),c=n.n(a),d=n(37240),v=n(81113),g=n(76469),p=n(1705),f=n(92785),h=n(80501),m=n(64978),w=n(58659),q=n(64453),F=n(43393),y=n(43591),k=n(65012),S=n(75149),b=n(45234),x=n(75271),j=n(52676);t.Z=function(e){var t=e.type,n=F.A.useForm(),s=c()(n,1)[0],o=(0,b.useIntl)(),u=(0,f.Z)().translateString,a=(0,x.useState)(!1),U=c()(a,2),C=U[0],A=U[1],Z=(0,m.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),M=Z.currentRobot,R=Z.setCurrentRobot,W=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),T=W.currentAgent,I=W.setCurrentAgent,P=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),V=P.currentWorkgroup,O=P.setCurrentWorkgroup;(0,x.useEffect)((function(){var e,n,i,o,r,l;if(t===q._X4)s.setFieldValue("welcomeTip",u(null==M||null===(e=M.serviceSettings)||void 0===e?void 0:e.welcomeTip)),s.setFieldValue("topTip",u(null==M||null===(n=M.serviceSettings)||void 0===n?void 0:n.topTip)),s.setFieldValue("showTopTip",null==M||null===(i=M.serviceSettings)||void 0===i?void 0:i.showTopTip),s.setFieldValue("leavemsgTip",u(null==M||null===(o=M.serviceSettings)||void 0===o?void 0:o.leavemsgTip)),s.setFieldValue("autoCloseMin",null==M||null===(r=M.serviceSettings)||void 0===r?void 0:r.autoCloseMin),s.setFieldValue("showLogo",null==M||null===(l=M.serviceSettings)||void 0===l?void 0:l.showLogo);else if(t===q.Njn){var a,c,d,v,g,p;s.setFieldValue("welcomeTip",u(null==T||null===(a=T.serviceSettings)||void 0===a?void 0:a.welcomeTip)),s.setFieldValue("topTip",u(null==T||null===(c=T.serviceSettings)||void 0===c?void 0:c.topTip)),s.setFieldValue("showTopTip",null==T||null===(d=T.serviceSettings)||void 0===d?void 0:d.showTopTip),s.setFieldValue("leavemsgTip",u(null==T||null===(v=T.serviceSettings)||void 0===v?void 0:v.leavemsgTip)),s.setFieldValue("autoCloseMin",null==T||null===(g=T.serviceSettings)||void 0===g?void 0:g.autoCloseMin),s.setFieldValue("showLogo",null==T||null===(p=T.serviceSettings)||void 0===p?void 0:p.showLogo),s.setFieldValue("maxThreadCount",null==T?void 0:T.maxThreadCount)}else if(t===q.aZD){var f,h,m,w,F,y;s.setFieldValue("welcomeTip",u(null==V||null===(f=V.serviceSettings)||void 0===f?void 0:f.welcomeTip)),s.setFieldValue("topTip",u(null==V||null===(h=V.serviceSettings)||void 0===h?void 0:h.topTip)),s.setFieldValue("showTopTip",null==V||null===(m=V.serviceSettings)||void 0===m?void 0:m.showTopTip),s.setFieldValue("leavemsgTip",u(null==V||null===(w=V.serviceSettings)||void 0===w?void 0:w.leavemsgTip)),s.setFieldValue("autoCloseMin",null==V||null===(F=V.serviceSettings)||void 0===F?void 0:F.autoCloseMin),s.setFieldValue("showLogo",null==V||null===(y=V.serviceSettings)||void 0===y?void 0:y.showLogo)}}),[M,T,V]),(0,x.useEffect)((function(){var e;A(null==T||null===(e=T.serviceSettings)||void 0===e?void 0:e.showTopTip)}),[T]);var E=function(){var e=l()(i()().mark((function e(n){var s,u,l,a,c,f,h,m,w,F,y,k,S,b,x,j,U,A,Z,W,P,E,N,D,H;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",n," showTopTip:",C),d.yw.loading(o.formatMessage({id:"updating"})),t!==q._X4){e.next=12;break}return f=r()(r()({},M),{},{serviceSettings:r()(r()({},M.serviceSettings),{},{topTip:(null==n?void 0:n.topTip)||"",showTopTip:C,welcomeTip:(null==n?void 0:n.welcomeTip)||"",leavemsgTip:(null==n?void 0:n.leavemsgTip)||"",autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(s=T.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==M||null===(u=M.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==M||null===(l=M.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==M||null===(a=M.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==M||null===(c=M.serviceSettings)||void 0===c||null===(c=c.shortcutFaqs)||void 0===c?void 0:c.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,g.$l)(f);case 7:h=e.sent,console.log("updateRobot response:",h),200===h.code?(d.yw.destroy(),d.yw.success(o.formatMessage({id:"update.success"})),R(h.data)):(d.yw.destroy(),d.yw.error(h.message)),e.next=30;break;case 12:if(t!==q.Njn){e.next=22;break}return x=r()(r()({},T),{},{serviceSettings:r()(r()({},T.serviceSettings),{},{topTip:(null==n?void 0:n.topTip)||"",showTopTip:C,welcomeTip:(null==n?void 0:n.welcomeTip)||"",leavemsgTip:(null==n?void 0:n.leavemsgTip)||"",autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,robotUid:null===(m=T.serviceSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid,quickFaqUids:null===(w=T.serviceSettings)||void 0===w||null===(w=w.quickFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),faqUids:null===(F=T.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==T||null===(y=T.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==T||null===(k=T.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==T||null===(S=T.serviceSettings)||void 0===S||null===(S=S.shortcutFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),worktimeUids:null===(b=T.serviceSettings)||void 0===b||null===(b=b.worktimes)||void 0===b?void 0:b.map((function(e){return e.uid}))}),autoReplySettings:r()({},T.autoReplySettings),maxThreadCount:(null==n?void 0:n.maxThreadCount)||10}),console.log("agentObject:",x),e.next=17,(0,v.sE)(x);case 17:j=e.sent,console.log("updateAgent response:",j),200===j.code?(d.yw.destroy(),d.yw.success(o.formatMessage({id:"update.success"})),I(j.data)):(d.yw.destroy(),d.yw.error(j.message)),e.next=30;break;case 22:if(t!==q.aZD){e.next=30;break}return D=r()(r()({},V),{},{serviceSettings:r()(r()({},V.serviceSettings),{},{topTip:(null==n?void 0:n.topTip)||"",showTopTip:C,welcomeTip:(null==n?void 0:n.welcomeTip)||"",leavemsgTip:(null==n?void 0:n.leavemsgTip)||"",autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,robotUid:null===(U=V.serviceSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid,quickFaqUids:null===(A=V.serviceSettings)||void 0===A||null===(A=A.quickFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),faqUids:null===(Z=V.serviceSettings)||void 0===Z||null===(Z=Z.faqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),guessFaqUids:null==V||null===(W=V.serviceSettings)||void 0===W||null===(W=W.guessFaqs)||void 0===W?void 0:W.map((function(e){return e.uid})),hotFaqUids:null==V||null===(P=V.serviceSettings)||void 0===P||null===(P=P.hotFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),shortcutFaqUids:null==V||null===(E=V.serviceSettings)||void 0===E||null===(E=E.shortcutFaqs)||void 0===E?void 0:E.map((function(e){return e.uid})),worktimeUids:null===(N=V.serviceSettings)||void 0===N||null===(N=N.worktimes)||void 0===N?void 0:N.map((function(e){return e.uid}))}),agentUids:V.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",D),e.next=27,(0,p.W5)(D);case 27:H=e.sent,console.log("updateWorkGroup response:",H),200===H.code?(d.yw.destroy(),d.yw.success(o.formatMessage({id:"update.success"})),O(H.data)):(d.yw.destroy(),d.yw.error(H.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)(F.A,{form:s,onFinish:E,style:{marginLeft:"100px"},children:[(0,j.jsx)(y.Z,{name:"showTopTip",width:"md",label:"显示置顶语/公告",fieldProps:{onChange:function(e){var t;console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==T||null===(t=T.serviceSettings)||void 0===t?void 0:t.showTopTip)),A(e.target.checked)}}}),C&&(0,j.jsx)(k.Z,{width:"md",name:"topTip",label:"置顶语"}),(0,j.jsx)(k.Z,{width:"md",name:"welcomeTip",label:"欢迎语"}),t!=q._X4&&(0,j.jsx)(k.Z,{width:"md",name:"leavemsgTip",label:"离线留言提示"}),(0,j.jsx)(S.Z,{width:"md",name:"autoCloseMin",label:"无新消息会话自动关闭时长(单位：分钟)",min:1}),t===q.Njn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{children:"1. 同时最大接待数量，超出数量默认进入排队队列"}),(0,j.jsx)("p",{children:"2. 0为所有访客默认进入排队队列，需要客服手动接入"}),(0,j.jsx)("p",{children:"3. 当接待数量小于最大接待数量时，会话自动接入，优先接入排队队列中会话"}),(0,j.jsx)(S.Z,{width:"md",name:"maxThreadCount",label:"同时最大接待数量",min:0})]}),(0,j.jsx)(y.Z,{name:"showLogo",width:"md",label:"显示Logo",tooltip:"只有付费会员可以去掉Logo",fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}},39485:function(e,t,n){n(75271);var s=n(14604),i=n(45234),o=n(78935),r=n(48912),u=n(52516),l=n(84713),a=n(4971),c=n(31360),d=n(79341),v=n(52676);t.Z=function(e){var t=e.type,n=((0,i.useIntl)(),[{key:"whatsapp",label:"Whatsapp",children:(0,v.jsx)(u.Z,{})},{key:"telegram",label:"Telegram",children:(0,v.jsx)(r.Z,{})},{key:"facebook",label:"Facebook",children:(0,v.jsx)(d.Z,{})},{key:"Line",label:"Line",children:(0,v.jsx)(l.Z,{})},{key:"shopify",label:"Shopify",children:(0,v.jsx)(a.Z,{})},{key:"lazada",label:"Lazada",children:(0,v.jsx)(c.Z,{})}]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Z,{type:t}),(0,v.jsx)(s.Z,{tabPosition:"left",items:n})]})}},84555:function(e,t,n){n(75271);var s=n(14604),i=n(38424),o=n(32509),r=n(44001),u=n(75664),l=n(85832),a=n(45234),c=n(91814),d=n(78935),v=n(52676);t.Z=function(e){var t=e.type,n=((0,a.useIntl)(),[{key:"web",label:"Web",children:(0,v.jsx)(i.Z,{type:t})},{key:"react",label:"React",children:(0,v.jsx)(c.Z,{type:t})},{key:"ios",label:"iOS",children:(0,v.jsx)(o.Z,{type:t})},{key:"android",label:"Android",children:(0,v.jsx)(l.Z,{type:t})},{key:"uniapp",label:"Uniapp",children:(0,v.jsx)(r.Z,{type:t})},{key:"flutter",label:"Flutter",children:(0,v.jsx)(u.Z,{type:t})}]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{type:t}),(0,v.jsx)(s.Z,{tabPosition:"left",items:n})]})}},75034:function(e,t,n){n(75271);var s=n(14604),i=n(45234),o=n(78935),r=n(35091),u=n(29034),l=n(8777),a=n(37701),c=n(52676);t.Z=function(e){var t=e.type,n=((0,i.useIntl)(),[{key:"pdd",label:"拼多多",children:(0,c.jsx)(r.Z,{})},{key:"jd",label:"京东",children:(0,c.jsx)(a.Z,{})},{key:"qianniu",label:"千牛",children:(0,c.jsx)(u.Z,{})},{key:"doudian",label:"抖店",children:(0,c.jsx)(l.Z,{})}]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.Z,{type:t}),(0,c.jsx)(s.Z,{tabPosition:"left",items:n})]})}},68777:function(e,t,n){n.d(t,{Z:function(){return ee}});var s=n(75271),i=n(14604),o=n(45234),r=n(42845),u=n(78935),l=n(12621),a=n(40115),c=n(3472),d=n(82088),v=n(153),g=n(90228),p=n.n(g),f=n(26068),h=n.n(f),m=n(67825),w=n.n(m),q=n(87999),F=n.n(q),y=n(48305),k=n.n(y),S=n(92710),b=n(7283),x=n(8591),j=n(23942),U=n(42502),C=n(37240),A=n(65098),Z=n(15161),M=n(75693),R=n(76749),W=n(64453),T=n(52676),I=["current"],P=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,T.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],V=function(e){var t=e.type,n=(0,o.useAccess)(),i=(0,s.useState)(!1),r=k()(i,2),u=r[0],l=r[1],a=((0,o.useIntl)(),(0,s.useRef)()),c=(0,A.u)((function(e){return e.currentOrg})),d=[].concat(P),v=function(){l(!0)};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{children:"通过h5方式集成"}),(0,T.jsx)(R.Z,{type:t}),(0,T.jsx)("br",{}),(0,T.jsx)(b.Z,{}),(0,T.jsxs)(o.Access,{accessible:n.canDebug(),fallback:(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(o.FormattedMessage,{id:W.h5w})}),children:[(0,T.jsxs)(x.Z,{title:"Basic Modal",open:u,onOk:function(){l(!1)},onCancel:function(){l(!1)},children:[(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."})]}),(0,T.jsx)(Z.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=F()(p()().mark((function e(t,n,s){var i,o,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,s),t.current,i=w()(t,I),o=h()({pageNumber:t.current-1,orgUid:c.uid},i),e.next=5,(0,M.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信小程序",toolBarRender:function(){return[(0,T.jsxs)(j.Z,{children:[(0,T.jsx)(U.ZP,{type:"primary",onClick:v,children:"添加微信小程序"}),(0,T.jsx)(U.ZP,{icon:(0,T.jsx)(S.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信小程序对接文档"})]})]}})]})]})},O=["current"],E=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,T.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],N=function(e){e.type;var t=(0,o.useAccess)(),n=(0,s.useState)(!1),i=k()(n,2),r=i[0],u=i[1],l=((0,o.useIntl)(),(0,s.useRef)()),a=(0,A.u)((function(e){return e.currentOrg})),c=[].concat(E),d=function(){u(!0)};return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(o.FormattedMessage,{id:W.h5w})}),children:[(0,T.jsxs)(x.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."})]}),(0,T.jsx)(Z.Z,{columns:c,actionRef:l,cardBordered:!0,request:function(){var e=F()(p()().mark((function e(t,n,s){var i,o,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,s),t.current,i=w()(t,O),o=h()({pageNumber:t.current-1,orgUid:a.uid},i),e.next=5,(0,M.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定企业微信",toolBarRender:function(){return[(0,T.jsxs)(j.Z,{children:[(0,T.jsx)(U.ZP,{type:"primary",onClick:d,children:"添加企业微信"}),(0,T.jsx)(U.ZP,{icon:(0,T.jsx)(S.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"企业微信对接文档"})]})]}})]})})},D=n(65060),H=n(40141),B=n(33693),G=n(88758),L=["current"],_=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,T.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"appId",defaultMessage:"AppId"}),dataIndex:"appId",copyable:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"url",defaultMessage:"Url"}),dataIndex:"url",copyable:!0,hideInSearch:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"token",defaultMessage:"Token"}),dataIndex:"token",copyable:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"encryptMode",defaultMessage:"EncryptMode"}),dataIndex:"encryptMode",copyable:!0,hideInSearch:!0,render:function(e,t){switch(t.encryptMode){case"PLAINTEXT":return(0,T.jsx)("span",{children:"明文模式"});case"COMPATIBLE":return(0,T.jsx)("span",{children:"兼容模式"});case"SAFE":return(0,T.jsx)("span",{children:"安全模式"});default:return(0,T.jsx)("span",{children:"未知"})}}},{title:(0,T.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],$=function(e){var t=e.type,n=(0,s.useState)(!1),i=k()(n,2),r=i[0],u=i[1],l=(0,s.useState)({}),a=k()(l,2),c=a[0],d=a[1],v=(0,s.useState)(!1),g=k()(v,2),f=g[0],m=g[1],q=(0,o.useIntl)(),y=(0,s.useRef)(),M=(0,A.u)((function(e){return e.currentOrg})),W=x.Z.useModal(),I=k()(W,2),P=I[0],V=I[1],O=[].concat(_,[{title:q.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,s){return[(0,T.jsx)("a",{onClick:function(){m(!0),d(t),u(!0)},children:q.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,T.jsx)(U.ZP,{type:"link",onClick:function(){return e=t,void P.confirm({title:q.formatMessage({id:"deleteTip"}),icon:(0,T.jsx)(D.Z,{}),content:"".concat(q.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.name,"】？"),onOk:function(){E(e)},onCancel:function(){},okText:q.formatMessage({id:"ok"}),cancelText:q.formatMessage({id:"cancel"})});var e},danger:!0,children:q.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}]),E=function(){var e=F()(p()().mark((function e(t){var n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWechatMp:",t),e.next=3,(0,G.ul)(t);case 3:n=e.sent,console.log("deleteMember:",n),200===n.code?(C.yw.success(q.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),y.current.reload()):C.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=F()(p()().mark((function e(t){var n,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G._Z)(t);case 2:n=e.sent,console.log("handleCreateWechatMp response:",n),200===n.code?(null===(s=y.current)||void 0===s||s.reload(),u(!1)):C.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=F()(p()().mark((function e(t){var n,s;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=null==c?void 0:c.uid,e.next=3,(0,G.sS)(t);case 3:n=e.sent,console.log("handleUpdateWechatMp response:",n),200===n.code?(null===(s=y.current)||void 0===s||s.reload(),u(!1)):C.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){u(!0),m(!1),d({})};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{children:"通过自定义菜单方式集成"}),(0,T.jsx)(R.Z,{type:t}),(0,T.jsx)("br",{}),(0,T.jsx)(b.Z,{}),(0,T.jsx)(Z.Z,{columns:O,actionRef:y,cardBordered:!0,request:function(){var e=F()(p()().mark((function e(t,n,s){var i,o,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,s),t.current,i=w()(t,L),o=h()({pageNumber:t.current-1,orgUid:M.uid},i),e.next=5,(0,G.aq)(o);case 5:return r=e.sent,console.log("queryWechatMpByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定公众号",toolBarRender:function(){return[(0,T.jsxs)(j.Z,{children:[(0,T.jsx)(U.ZP,{type:"primary",onClick:X,icon:(0,T.jsx)(H.Z,{}),children:"添加微信公众号"}),!1,(0,T.jsx)(U.ZP,{icon:(0,T.jsx)(S.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechatmp")},children:"微信公众号对接文档"})]})]}}),V,r&&(0,T.jsx)(B.Z,{isEdit:f,open:r,wechatmp:c,onClose:function(){u(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),f?$(e):N(e)}})]})},X=["current"],Q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,T.jsx)(o.FormattedMessage,{id:"amount",defaultMessage:"Amount"}),dataIndex:"amount",hideInSearch:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"state",defaultMessage:"State"}),dataIndex:"state",copyable:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",copyable:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],z=function(e){e.type;var t=(0,o.useAccess)(),n=(0,s.useState)(!1),i=k()(n,2),r=i[0],u=i[1],l=((0,o.useIntl)(),(0,s.useRef)()),a=(0,A.u)((function(e){return e.currentOrg})),c=[].concat(Q),d=function(){u(!0)};return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(o.FormattedMessage,{id:W.h5w})}),children:[(0,T.jsxs)(x.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."})]}),(0,T.jsx)(Z.Z,{columns:c,actionRef:l,cardBordered:!0,request:function(){var e=F()(p()().mark((function e(t,n,s){var i,o,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,s),t.current,i=w()(t,X),o=h()({pageNumber:t.current-1,orgUid:a.uid},i),e.next=5,(0,M.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信",toolBarRender:function(){return[(0,T.jsxs)(j.Z,{children:[(0,T.jsx)(U.ZP,{type:"primary",onClick:d,children:"添加微信"}),(0,T.jsx)(U.ZP,{icon:(0,T.jsx)(S.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信对接文档"})]})]}})]})})},J=["current"],K=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,T.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,T.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],Y=function(e){e.type;var t=(0,o.useAccess)(),n=(0,s.useState)(!1),i=k()(n,2),r=i[0],u=i[1],l=((0,o.useIntl)(),(0,s.useRef)()),a=(0,A.u)((function(e){return e.currentOrg})),c=[].concat(K),d=function(){u(!0)};return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(o.FormattedMessage,{id:W.h5w})}),children:[(0,T.jsxs)(x.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."}),(0,T.jsx)("p",{children:"Some contents..."})]}),(0,T.jsx)(Z.Z,{columns:c,actionRef:l,cardBordered:!0,request:function(){var e=F()(p()().mark((function e(t,n,s){var i,o,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,s),t.current,i=w()(t,J),o=h()({pageNumber:t.current-1,orgUid:a.uid},i),e.next=5,(0,M.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||C.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信客服",toolBarRender:function(){return[(0,T.jsxs)(j.Z,{children:[(0,T.jsx)(U.ZP,{type:"primary",onClick:d,children:"添加微信客服"}),(0,T.jsx)(U.ZP,{icon:(0,T.jsx)(S.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信客服对接文档"})]})]}})]})})},ee=function(e){var t=e.type,n=((0,o.useIntl)(),[{key:"wechat",label:"微信",children:(0,T.jsx)(z,{type:t})},{key:"wechat-mp",label:"微信公众号",children:(0,T.jsx)($,{type:t})},{key:"wechat-mini",label:"微信小程序",children:(0,T.jsx)(V,{type:t})},{key:"wechat-com",label:"企业微信",children:(0,T.jsx)(N,{type:t})},{key:"wechat-kefu",label:"微信客服",children:(0,T.jsx)(Y,{type:t})},{key:"douyin",label:"抖音",children:(0,T.jsx)(v.Z,{})},{key:"xiaohongshu",label:"小红书",children:(0,T.jsx)(d.Z,{})},{key:"baidu",label:"百度",children:(0,T.jsx)(c.Z,{})},{key:"weibo",label:"微博",children:(0,T.jsx)(a.Z,{})},{key:"bili",label:"哔哩哔哩",children:(0,T.jsx)(l.Z,{})},{key:"zhihu",label:"知乎",children:(0,T.jsx)(r.Z,{})}]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.Z,{type:t}),(0,T.jsx)(i.Z,{tabPosition:"left",items:n})]})}},78935:function(e,t,n){var s=n(64453),i=n(42452),o=n(45234),r=n(20679),u=n(42502),l=n(7283),a=n(52676);t.Z=function(e){var t=e.type,n=(0,o.useIntl)();return(0,a.jsxs)(a.Fragment,{children:[t===s.aZD&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{message:"多客服技能组，此处客服代码会将所有访客按照路由规则转接给此技能组中客服成员",type:"success",action:(0,a.jsx)(u.ZP,{type:"link",icon:(0,a.jsx)(i.Z,{}),onClick:function(){return window.open(s.VPj)},children:n.formatMessage({id:"setting.helpcenter"})})}),(0,a.jsx)(l.Z,{})]}),t===s.Njn&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{message:"一对一客服，此处客服代码会将所有访客都转接给此客服账号",type:"success"}),(0,a.jsx)(l.Z,{})]})]})}},77705:function(e,t,n){n.d(t,{G:function(){return v}});var s=n(26068),i=n.n(s),o=(n(75271),n(30224)),r=n(64453),u=n(16483),l=n.n(u),a=n(37240),c=n(49437),d=n(52676),v=function(e){var t=e.children,n=e.onSuccess,s=e.onError,u={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,c.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:u,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;u.file=e,u.file_name=t,u.file_type=e.type,console.log("beforeUpload",u)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data;n(t),a.yw.success("".concat(e.file.name," 上传成功"))}else s(e.file),a.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(a.yw.error("".concat(e.file.name," 上传失败")),s(e.file))}};return(0,d.jsx)(o.Z,i()(i()({},v),{},{children:t}))}}}]);