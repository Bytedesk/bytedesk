"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5522],{8085:function(e,t,n){n.d(t,{$T:function(){return p},A:function(){return v},Hf:function(){return m},P6:function(){return g},gx:function(){return f}});var r=n(90228),u=n.n(r),o=n(26068),s=n.n(o),a=n(87999),c=n.n(a),i=n(96677),d=n(18735);function f(e){return l.apply(this,arguments)}function l(){return(l=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/query/org",{method:"GET",params:s()(s()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/query/user",{method:"GET",params:s()(s()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return(x=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/create",{method:"POST",data:s()(s()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/update",{method:"POST",data:s()(s()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/delete",{method:"POST",data:s()(s()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21544:function(e,t,n){var r=n(93454);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},11211:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(21544),u=n(43650),o=n(75271),s=n(90228),a=n.n(s),c=n(87999),i=n.n(c),d=n(48305),f=n.n(d),l=n(59153),p=n(8085),h=n(21483),g=n(51781),x=n(93061),m=n(18735),y=n(52676),v=function(){var e=(0,m.useIntl)(),t=(0,g.L)((function(e){return e.userInfo})),n=(0,o.useRef)(),r=(0,o.useState)(1),u=f()(r,2),s=u[0],c=u[1],d=(0,o.useState)(10),v=f()(d,2),b=v[0],k=v[1],w=(0,h.K)((function(e){return{courseResult:e.courseResult,setCourseResult:e.setCourseResult}})),R=w.courseResult,C=w.setCourseResult,S=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,y.jsx)(m.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"name",copyable:!0},{title:(0,y.jsx)(m.FormattedMessage,{id:"category",defaultMessage:"Category"}),key:"category",render:function(e,t){return"分类"}},{title:"发布人",copyable:!0,editable:!1,renderText:function(e,t,n,r){var u;return null===(u=t.user)||void 0===u?void 0:u.nickname}},{title:(0,y.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),key:"published",render:function(e,t){return t.published?"已发布":"未发布"}},{title:(0,y.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",editable:!1,sorter:!0,hideInSearch:!0},{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,r){return[(0,y.jsx)("a",{onClick:function(){console.log("edit record:",t)},children:"修改"},"editable")]}}],T=function(){var e=i()(a()().mark((function e(){var n,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={pageNumber:s-1,pageSize:b},null==t||!t.superUser){e.next=7;break}return e.next=4,(0,p.gx)(n);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,p.$T)(n);case 9:e.t0=e.sent;case 10:r=e.t0,console.log("getAllCourses response:",n,r),200===r.code?C(r):l.yw.error(r.message);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){T()}),[]),(0,o.useEffect)((function(){T()}),[s,b]),(0,o.useEffect)((function(){console.log("courseResult:",R),n.current.reload()}),[R]),(0,y.jsx)(x.Z,{columns:S,actionRef:n,cardBordered:!0,request:function(){var e=i()(a()().mark((function e(t,n,r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,r),c(t.current),k(t.pageSize),e.abrupt("return",Promise.resolve({data:R.data.content,success:!0,total:R.data.totalElements}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:b,showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"管理类别",toolBarRender:function(){return[]}})},b=(u.Z.Sider,u.Z.Content),k=function(){var e=(0,r.Z)().contentStyle;return(0,y.jsx)(u.Z,{children:(0,y.jsx)(u.Z,{children:(0,y.jsx)(b,{style:e,children:(0,y.jsx)(v,{})})})})}},21483:function(e,t,n){n.d(t,{K:function(){return a}});var r=n(96677),u=n(52315),o=n(4938),s=n(13657),a=(0,u.Ue)()((0,o.mW)((0,o.tJ)((0,s.n)((function(e,t){return{courseResult:{data:{content:[]}},insertCourseResult:function(t){e((function(e){e.courseResult.data.content.unshift(t)}))},updateCourseResult:function(t){e((function(e){var n=e.courseResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:console.warn("Course with uid ".concat(t.uid," not found."))}))},deleteCourseResult:function(t){e((function(e){var n=e.courseResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n.splice(r,1):console.warn("Course with uid ".concat(t.uid," not found."))}))},setCourseResult:function(t){e({courseResult:t})},deleteCourseCache:function(){return e({},!0)}}})),{name:r.vCH})))}}]);