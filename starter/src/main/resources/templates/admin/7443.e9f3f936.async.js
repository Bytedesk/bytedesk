"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7443],{13253:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(43314),n(85702),n(61017),n(77667),n(82045),n(44194),n(31549)},9750:function(e,t,n){var o=n(90819),i=n.n(o),s=n(73193),r=n.n(s),u=n(89933),l=n.n(u),a=n(45332),d=n.n(a),g=n(89756),c=n(81153),v=n(43314),p=n(85702),m=n(61017),f=n(77667),h=n(5728),w=n(31806),S=n(82045),q=n(44194),b=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),o=h.A.useForm(),s=d()(o,1)[0],u=(0,q.useState)(!1),a=d()(u,2),M=(a[0],a[1],(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}}))),k=M.currentAgent,F=M.setCurrentAgent,x=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),y=x.currentWorkgroup,T=x.setCurrentWorkgroup;(0,q.useEffect)((function(){var e;if(t===f.Njn)s.setFieldValue("showRateBtn",null==k||null===(e=k.serviceSettings)||void 0===e?void 0:e.showRateBtn);else if(t===f.aZD){var n;s.setFieldValue("showRateBtn",null==y||null===(n=y.serviceSettings)||void 0===n?void 0:n.showRateBtn)}}),[k,y]);var C=function(){var e=l()(i()().mark((function e(o){var s,u,l,a,d,p,m,h,w,S,q,b,M,x,C,U,j,A;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleShowRateSwitchChange:",o),t!==f.Njn){e.next=11;break}return h=r()(r()({},k),{},{serviceSettings:r()(r()({},null==k?void 0:k.serviceSettings),{},{showRateBtn:o,quickFaqUids:null==k||null===(s=k.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==k||null===(u=k.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==k||null===(l=k.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==k||null===(a=k.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==k||null===(d=k.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),robotSettings:r()(r()({},k.robotSettings),{},{robotUid:null==k||null===(p=k.robotSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid}),leaveMsgSettings:r()(r()({},k.leaveMsgSettings),{},{worktimeUids:null==k||null===(m=k.leaveMsgSettings)||void 0===m||null===(m=m.worktimes)||void 0===m?void 0:m.map((function(e){return e.uid}))}),autoReplySettings:r()({},k.autoReplySettings)}),console.log("agentObject:",h),e.next=6,(0,c.sE)(h);case 6:w=e.sent,console.log("updateAgent response:",w),200===w.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),F(w.data)):(g.yw.destroy(),g.yw.error(w.message)),e.next=19;break;case 11:if(t!==f.aZD){e.next=19;break}return j=r()(r()({},y),{},{serviceSettings:r()(r()({},y.serviceSettings),{},{showRateBtn:o,quickFaqUids:null===(S=y.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),faqUids:null==y||null===(q=y.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==y||null===(b=y.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null===(M=y.serviceSettings)||void 0===M||null===(M=M.hotFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),shortcutFaqUids:null==y||null===(x=y.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:r()(r()({},y.robotSettings),{},{robotUid:null==y||null===(C=y.robotSettings)||void 0===C||null===(C=C.robot)||void 0===C?void 0:C.uid}),leaveMsgSettings:r()(r()({},y.leaveMsgSettings),{},{worktimeUids:null==y||null===(U=y.leaveMsgSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=16,(0,v.W5)(j);case 16:A=e.sent,console.log("updateWorkGroup response:",A),200===A.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),T(A.data)):(g.yw.destroy(),g.yw.error(A.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(h.A,{form:s,submitter:{render:!1},children:[(0,b.jsx)(w.Z,{width:"md",name:"showRateBtn",label:n.formatMessage({id:"rate.show.button"}),tooltip:n.formatMessage({id:"rate.show.button.tooltip"}),fieldProps:{onChange:C}}),!1]})})}},3321:function(e,t,n){var o=n(90819),i=n.n(o),s=n(73193),r=n.n(s),u=n(89933),l=n.n(u),a=n(45332),d=n.n(a),g=n(89756),c=n(81153),v=n(63833),p=n(43314),m=n(1780),f=n(85702),h=n(3245),w=n(61017),S=n(77667),q=n(5728),b=n(2724),M=n(80067),k=n(82045),F=n(44194),x=n(60029),y=n(74828),T=n(31549);t.Z=function(e){var t=e.type,n=q.A.useForm(),o=d()(n,1)[0],s=(0,k.useIntl)(),u=(0,m.Z)().translateString,a=(0,F.useState)(!1),C=d()(a,2),U=C[0],j=C[1],A=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),R=A.currentRobot,Z=A.setCurrentRobot,W=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),L=W.currentAgent,D=W.setCurrentAgent,V=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),B=V.currentWorkgroup,N=V.setCurrentWorkgroup,E=(0,F.useState)(""),I=d()(E,2),O=I[0],X=I[1],_=(0,F.useState)(""),K=d()(_,2),P=K[0],$=K[1],G=(0,F.useState)(""),z=d()(G,2),H=z[0],J=z[1],Q=function(e){var n;if(console.log("setFormValues:",e),X(u(null==e?void 0:e.welcomeTip)),J(u(null==e?void 0:e.topTip)),j(null==e?void 0:e.showTopTip),o.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),o.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),o.setFieldValue("showLogo",null==e?void 0:e.showLogo),t===S.Njn)$(u(null==L||null===(n=L.leaveMsgSettings)||void 0===n?void 0:n.leaveMsgTip));else if(t===S.aZD){var i;$(u(null==B||null===(i=B.leaveMsgSettings)||void 0===i?void 0:i.leaveMsgTip))}};(0,F.useEffect)((function(){t===S._X4?Q(null==R?void 0:R.serviceSettings):t===S.Njn?(Q(null==L?void 0:L.serviceSettings),o.setFieldValue("maxThreadCount",null==L?void 0:L.maxThreadCount)):t===S.aZD&&Q(null==B?void 0:B.serviceSettings)}),[R,L,B]);var Y=function(){var e=l()(i()().mark((function e(n){var o,u,l,a,d,m,f,h,w,q,b,M,k,F,x,y,T,C,j,A,W,V,E,I,X;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",n," showTopTip:",U),g.yw.loading(s.formatMessage({id:"updating"})),t!==S._X4){e.next=12;break}return m=r()(r()({},R),{},{serviceSettings:r()(r()({},R.serviceSettings),{},{topTip:H,showTopTip:U,welcomeTip:O,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(o=L.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==R||null===(u=R.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==R||null===(l=R.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==R||null===(a=R.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(d=R.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",m),e.next=7,(0,v.$l)(m);case 7:f=e.sent,console.log("updateRobot response:",f),200===f.code?(g.yw.destroy(),g.yw.success(s.formatMessage({id:"update.success"})),Z(f.data)):(g.yw.destroy(),g.yw.error(f.message)),e.next=30;break;case 12:if(t!==S.Njn){e.next=22;break}return x=r()(r()({},L),{},{serviceSettings:r()(r()({},L.serviceSettings),{},{topTip:H,showTopTip:U,welcomeTip:O,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(h=L.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null===(w=L.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==L||null===(q=L.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(M=L.serviceSettings)||void 0===M||null===(M=M.shortcutFaqs)||void 0===M?void 0:M.map((function(e){return e.uid}))}),leaveMsgSettings:r()(r()({},L.leaveMsgSettings),{},{leaveMsgTip:P,worktimeUids:null===(k=L.leaveMsgSettings)||void 0===k||null===(k=k.worktimes)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:r()(r()({},L.robotSettings),{},{robotUid:null===(F=L.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),maxThreadCount:(null==n?void 0:n.maxThreadCount)||10}),console.log("agentObject:",x),e.next=17,(0,c.sE)(x);case 17:y=e.sent,console.log("updateAgent response:",y),200===y.code?(g.yw.destroy(),g.yw.success(s.formatMessage({id:"update.success"})),D(y.data)):(g.yw.destroy(),g.yw.error(y.message)),e.next=30;break;case 22:if(t!==S.aZD){e.next=30;break}return I=r()(r()({},B),{},{serviceSettings:r()(r()({},B.serviceSettings),{},{topTip:H,showTopTip:U,welcomeTip:O,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(T=B.serviceSettings)||void 0===T||null===(T=T.quickFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),faqUids:null===(C=B.serviceSettings)||void 0===C||null===(C=C.faqs)||void 0===C?void 0:C.map((function(e){return e.uid})),guessFaqUids:null==B||null===(j=B.serviceSettings)||void 0===j||null===(j=j.guessFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),hotFaqUids:null==B||null===(A=B.serviceSettings)||void 0===A||null===(A=A.hotFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(W=B.serviceSettings)||void 0===W||null===(W=W.shortcutFaqs)||void 0===W?void 0:W.map((function(e){return e.uid}))}),leaveMsgSettings:r()(r()({},B.leaveMsgSettings),{},{leaveMsgTip:P,worktimeUids:null===(V=B.leaveMsgSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),robotSettings:r()(r()({},L.robotSettings),{},{robotUid:null===(E=L.robotSettings)||void 0===E||null===(E=E.robot)||void 0===E?void 0:E.uid}),agentUids:B.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",I),e.next=27,(0,p.W5)(I);case 27:X=e.sent,console.log("updateWorkGroup response:",X),200===X.code?(g.yw.destroy(),g.yw.success(s.formatMessage({id:"update.success"})),N(X.data)):(g.yw.destroy(),g.yw.error(X.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)(q.A,{form:o,onFinish:Y,style:{marginLeft:"20px"},children:[(0,T.jsx)(b.Z,{name:"showTopTip",width:"md",label:s.formatMessage({id:"agent.settings.show.top.tip"}),fieldProps:{onChange:function(e){var n,o;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==L||null===(n=L.serviceSettings)||void 0===n?void 0:n.showTopTip)),j(e.target.checked),e.target.checked)if(t===S._X4)J(u(null==R||null===(o=R.serviceSettings)||void 0===o?void 0:o.topTip));else if(t===S.Njn){var i;J(u(null==L||null===(i=L.serviceSettings)||void 0===i?void 0:i.topTip))}else if(t===S.aZD){var s;J(u(null==B||null===(s=B.serviceSettings)||void 0===s?void 0:s.topTip))}}}}),U&&(0,T.jsx)(q.A.Item,{name:"topTip",label:s.formatMessage({id:"agent.settings.top.tip"}),rules:[{required:!0,message:s.formatMessage({id:"agent.settings.top.tip.required"})}],children:(0,T.jsx)(x.Z,{placeholder:s.formatMessage({id:"agent.settings.top.tip.placeholder"}),value:H,toolbarKeys:(0,y.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){J(e)}})}),(0,T.jsx)(q.A.Item,{name:"welcomeTip",label:s.formatMessage({id:"agent.settings.welcome.tip"}),tooltip:s.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:s.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,T.jsx)(x.Z,{placeholder:s.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:O,toolbarKeys:(0,y.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){X(e)}})}),t!=S._X4&&(0,T.jsx)(q.A.Item,{name:"leaveMsgTip",label:s.formatMessage({id:"agent.settings.leave.msg"}),rules:[{required:!0,message:s.formatMessage({id:"agent.settings.leave.msg.required"})}],children:(0,T.jsx)(x.Z,{placeholder:s.formatMessage({id:"agent.settings.leave.msg.placeholder"}),value:P,toolbarKeys:(0,y.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){$(e)}})}),(0,T.jsx)(M.Z,{width:"md",name:"autoCloseMin",label:s.formatMessage({id:"agent.settings.auto.close.time"}),tooltip:s.formatMessage({id:"agent.settings.auto.close.time.tooltip"}),min:1}),t===S.Njn&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{children:s.formatMessage({id:"agent.settings.max.thread.tip1"})}),(0,T.jsx)("p",{children:s.formatMessage({id:"agent.settings.max.thread.tip2"})}),(0,T.jsx)("p",{children:s.formatMessage({id:"agent.settings.max.thread.tip3"})}),(0,T.jsx)(M.Z,{width:"md",name:"maxThreadCount",label:s.formatMessage({id:"agent.settings.max.thread"}),min:0})]}),(0,T.jsx)(b.Z,{name:"showLogo",width:"md",label:s.formatMessage({id:"agent.settings.show.logo"}),tooltip:s.formatMessage({id:"agent.settings.show.logo.tooltip"}),fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}}}]);