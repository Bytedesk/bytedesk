"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9814],{88484:function(j,l,e){e.d(l,{Z:function(){return o}});var d=e(1413),t=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},r=g,m=e(89099),i=function(c,M){return t.createElement(m.Z,(0,d.Z)((0,d.Z)({},c),{},{ref:M,icon:r}))},E=t.forwardRef(i),o=E},90672:function(j,l,e){var d=e(1413),t=e(91),g=e(67294),r=e(24809),m=e(85893),i=["fieldProps","proFieldProps"],E=function(a,c){var M=a.fieldProps,v=a.proFieldProps,b=(0,t.Z)(a,i);return(0,m.jsx)(r.Z,(0,d.Z)({ref:c,valueType:"textarea",fieldProps:M,proFieldProps:v},b))};l.Z=g.forwardRef(E)},24172:function(j,l,e){e.d(l,{Kq:function(){return a},RL:function(){return M}});var d=e(15009),t=e.n(d),g=e(97857),r=e.n(g),m=e(99289),i=e.n(m),E=e(85615),o=e(86745);function a(s){return c.apply(this,arguments)}function c(){return c=i()(t()().mark(function s(p){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,o.request)("/api/v1/org/create",{method:"POST",data:r()(r()({},p),{},{client:E.bV})}));case 1:case"end":return _.stop()}},s)})),c.apply(this,arguments)}function M(s){return v.apply(this,arguments)}function v(){return v=i()(t()().mark(function s(p){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,o.request)("/api/v1/org/update",{method:"POST",data:r()(r()({},p),{},{client:E.bV})}));case 1:case"end":return _.stop()}},s)})),v.apply(this,arguments)}function b(s){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function s(p){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/v1/org/query",{method:"GET",params:_objectSpread(_objectSpread({},p),{},{client:HTTP_CLIENT})}));case 1:case"end":return _.stop()}},s)})),f.apply(this,arguments)}function T(s){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function s(p){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/v1/org/uid",{method:"GET",params:{uid:p,client:HTTP_CLIENT}}));case 1:case"end":return _.stop()}},s)})),O.apply(this,arguments)}},53004:function(j,l,e){e.d(l,{G:function(){return c}});var d=e(97857),t=e.n(d),g=e(67294),r=e(78367),m=e(85615),i=e(27484),E=e.n(i),o=e(80049),a=e(85893),c=function(v){var b=v.children,f=v.onSuccess,T=v.onError,O={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:"",category_uid:"",kb_uid:"",client:m.bV},s={name:"file",accept:"image/*",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(m.LA)},data:O,showUploadList:!1,beforeUpload:function(n){console.log("beforeUpload",n);var _=E()(new Date).format("YYYYMMDDHHmmss")+"_"+n.name;O.file=n,O.file_name=_,O.file_type=n.type,console.log("beforeUpload",O)},onChange:function(n){if(n.file.status!=="uploading"&&console.log("not uploading:",n.file),n.file.status==="done")if(console.log("response: ",n.file.response),n.file.response.code===200){var _=n.file.response.data;f(_),o.yw.success("".concat(n.file.name," \u4E0A\u4F20\u6210\u529F"))}else T(n.file),o.yw.error("".concat(n.file.name," \u4E0A\u4F20\u5931\u8D25"));else n.file.status==="error"&&(o.yw.error("".concat(n.file.name," \u4E0A\u4F20\u5931\u8D25")),T(n.file))}};return(0,a.jsx)(r.Z,t()(t()({},s),{},{children:b}))}},12828:function(j,l,e){e.r(l);var d=e(15009),t=e.n(d),g=e(97857),r=e.n(g),m=e(99289),i=e.n(m),E=e(5574),o=e.n(E),a=e(80049),c=e(24172),M=e(87676),v=e(53004),b=e(88484),f=e(34994),T=e(5966),O=e(90672),s=e(86745),p=e(8232),n=e(7134),_=e(14726),L=e(67294),D=e(85893),S=function(){var F=p.Z.useForm(),x=o()(F,1),Z=x[0],P=(0,s.useIntl)(),y=(0,M.u)(function(h){return{currentOrg:h.currentOrg,setCurrentOrg:h.setCurrentOrg}}),U=y.currentOrg,G=y.setCurrentOrg,V=(0,L.useState)(""),I=o()(V,2),B=I[0],W=I[1],z=function(u){console.log("handleUploadSuccess:",u),W(u)},$=function(u){console.log("handleUploadError:",u)},H=function(){var h=i()(t()().mark(function u(K){var R,A;return t()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return a.yw.loading({content:P.formatMessage({id:"saveing"}),key:"save",duration:0}),R=r()(r()(r()({},U),K),{},{logo:B}),console.log("orgObject:",R),C.next=5,(0,c.RL)(R);case 5:A=C.sent,console.log("updateOrg response:",A),A.code===200?(a.yw.destroy(),a.yw.success(P.formatMessage({id:"update.success"})),G(A.data)):(a.yw.destroy(),a.yw.error(A.message));case 8:case"end":return C.stop()}},u)}));return function(K){return h.apply(this,arguments)}}(),N=function(u){return Array.isArray(u)?u:u==null?void 0:u.fileList};return(0,L.useEffect)(function(){U&&W(U.logo)},[U]),(0,D.jsx)("div",{children:(0,D.jsxs)(f.A,{form:Z,initialValues:{name:U.name,description:U.description},onFinish:H,children:[(0,D.jsx)(p.Z.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:N,label:P.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,D.jsxs)(v.G,{onSuccess:z,onError:$,children:[(0,D.jsx)(n.C,{src:B}),(0,D.jsx)(_.ZP,{icon:(0,D.jsx)(b.Z,{}),children:P.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,D.jsx)(T.Z,{rules:[{required:!0,message:P.formatMessage({id:"name",defaultMessage:"Name"})}],label:P.formatMessage({id:"name",defaultMessage:"Name"}),name:"name",width:"md"}),(0,D.jsx)(O.Z,{rules:[{required:!0,message:P.formatMessage({id:"description",defaultMessage:"Description"})}],label:P.formatMessage({id:"description",defaultMessage:"Description"}),name:"description",width:"md"})]})})};l.default=S},87676:function(j,l,e){e.d(l,{u:function(){return m}});var d=e(85615),t=e(73445),g=e(782),r=e(18753),m=(0,t.Ue)()((0,g.mW)((0,g.tJ)((0,r.n)(function(i,E){return{currentOrg:{uid:"",name:"",description:""},setCurrentOrg:function(a){i({currentOrg:a})},deleteOrg:function(){return i({},!0)}}}),{name:d.eR})))}}]);
