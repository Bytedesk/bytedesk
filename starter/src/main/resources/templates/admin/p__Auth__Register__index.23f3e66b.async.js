"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1730],{42110:function(R,m){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};m.Z=e},87223:function(R,m,e){e.r(m);var P=e(15009),o=e.n(P),O=e(97857),f=e.n(O),p=e(99289),E=e.n(p),h=e(5574),M=e.n(h),U=e(98661),b=e(442),S=e(87547),y=e(94149),Z=e(24454),k=e(10915),z=e(68262),j=e(5966),$=e(16434),N=e(24556),l=e(86745),B=e(9361),H=e(38925),G=e(32983),V=e(14726),J=e(28459),Y=e(31418),I=e(67294),W=e(39825),_=e(80049),T=e(85615),Q=e(63998),X=e(73935),q=e(60247),K=e(66419),s=e(85893),ee=B.Z.defaultAlgorithm,se=B.Z.darkAlgorithm,ae=function(){var v=(0,N.l)(function(D){var A=D.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:A.borderRadius,":hover":{backgroundColor:A.colorBgTextHover}}});return(0,s.jsx)("div",{className:v,"data-lang":!0,children:l.SelectLang&&(0,s.jsx)(l.SelectLang,{})})},x=function(v){var D=v.content;return(0,s.jsx)(H.Z,{style:{marginBottom:24},message:D,type:"error",showIcon:!0})},ne=function(){var v=B.Z.useToken(),D=v.token,A=(0,W.Z)(),te=A.isDarkMode,w=(0,I.useRef)(),C=(0,l.useModel)("@@initialState"),Ee=C.initialState,Me=C.loading,he=C.refresh,ie=C.setInitialState,oe=(0,I.useState)(!1),F=M()(oe,2),_e=F[0],ue=F[1],le=(0,Q.t)(function(i){return i.setAccessToken}),de=(0,q.L)(function(i){return i.setUserInfo}),ge=(0,l.getLocale)();console.log("register page locale:",ge);var g=(0,l.useIntl)();(0,I.useEffect)(function(){var i=window.location.href;(0,K.qx)(K.Hw,i)&&ue(!0)},[]);var ce=function(){var i=E()(o()().mark(function t(a){return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:a&&(0,X.flushSync)(function(){ie(function(c){return f()(f()({},c),{},{userInfo:a})})});case 1:case"end":return u.stop()}},t)}));return function(a){return i.apply(this,arguments)}}(),me=function(){var i=E()(o()().mark(function t(a){var r,u,c;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,console.log("values:",a),_.yw.loading("\u6B63\u5728\u6CE8\u518C\uFF0C\u8BF7\u7A0D\u540E..."),d.next=5,(0,U.z2)(f()({},a));case 5:if(r=d.sent,console.log("registerResult:",r),r.code!==200){d.next=15;break}return _.yw.destroy(),_.yw.success(r.message),u={username:a.email,password:a.password,platform:T.iw},fe(u),d.abrupt("return");case 15:_.yw.destroy(),_.yw.error(r.message);case 17:d.next=24;break;case 19:d.prev=19,d.t0=d.catch(0),c=g.formatMessage({id:"pages.register.failure",defaultMessage:"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(d.t0),_.yw.error(c);case 24:case"end":return d.stop()}},t,null,[[0,19]])}));return function(a){return i.apply(this,arguments)}}(),fe=function(){var i=E()(o()().mark(function t(a){var r,u;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("handleSubmit values: ",a),_.yw.loading("\u6B63\u5728\u767B\u5F55..."),n.next=5,(0,U.x4)(f()({},a));case 5:r=n.sent,console.log("LoginResult:",r),r.code===200?(_.yw.destroy(),_.yw.success("\u767B\u5F55\u6210\u529F\uFF01"),ce(r.data.user),de(r.data.user),le(r.data.accessToken),l.history.push("/")):(_.yw.destroy(),_.yw.error(r.message)),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),u=g.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(n.t0),_.yw.error(u);case 15:case"end":return n.stop()}},t,null,[[0,10]])}));return function(a){return i.apply(this,arguments)}}(),pe=function(){setTimeout(function(){var t;console.log("endCaptchaTiming"),(t=w.current)===null||t===void 0||t.endTiming()},2)};return(0,s.jsxs)(k._Y,{hashed:!1,dark:te,children:[(0,s.jsx)(ae,{}),(0,s.jsx)("div",{style:{backgroundColor:D.colorBgContainer,textAlign:"center",height:"100vh",backgroundImage:"url('/admin/assets/images/bg-wide.png')"},children:_e?(0,s.jsxs)(z.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,s.jsx)("img",{alt:"logo",src:"/admin/icons/logo.png"}),title:(0,s.jsx)(l.FormattedMessage,{id:"app.title"}),subTitle:g.formatMessage({id:"pages.login.registerAccount"}),initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:g.formatMessage({id:"pages.login.register"})}},onFinish:function(){var i=E()(o()().mark(function t(a){var r;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("login values:",a),r={email:a.username,password:a.password,mobile:a.mobile,code:a.code,platform:T.iw},console.log("register info:",r),c.next=5,me(r);case 5:case"end":return c.stop()}},t)}));return function(t){return i.apply(this,arguments)}}(),children:[status==="error"&&(0,s.jsx)(x,{content:g.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),(0,s.jsx)(j.Z,{name:"username",fieldProps:{size:"large",prefix:(0,s.jsx)(S.Z,{})},placeholder:g.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u90AE\u7BB1"}),rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"})},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"},{max:50,message:"\u90AE\u7BB1\u4E0D\u5F97\u8D85\u8FC750\u5B57\u7B26"}]}),(0,s.jsx)(j.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(y.Z,{})},placeholder:g.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,s.jsx)(j.Z,{fieldProps:{size:"large",prefix:(0,s.jsx)(Z.Z,{})},name:"mobile",placeholder:g.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,s.jsx)($.Z,{fieldProps:{size:"large",prefix:(0,s.jsx)(y.Z,{})},captchaProps:{size:"large"},placeholder:g.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(t,a){return t?"".concat(a," ").concat(g.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):g.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},phoneName:"mobile",name:"code",rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],fieldRef:w,onGetCaptcha:function(){var i=E()(o()().mark(function t(a){var r,u;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a&&a.length===11)){n.next=13;break}return r={mobile:a,type:T.i_,platform:T.iw},n.next=4,(0,U.Y7)(r);case 4:if(u=n.sent,console.log("sendMobileCodeResult:",u),u.code===200){n.next=10;break}return _.yw.error(u.message),pe(),n.abrupt("return");case 10:_.yw.success(u.message),n.next=14;break;case 13:_.yw.error("\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF");case 14:case"end":return n.stop()}},t)}));return function(t){return i.apply(this,arguments)}}()}),status==="error"&&(0,s.jsx)(x,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),(0,s.jsx)("div",{style:{marginBottom:64},children:(0,s.jsx)("div",{style:{float:"right"},children:(0,s.jsx)(l.Link,{to:"/auth/login",children:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.submit",defaultMessage:"\u767B\u5F55 "})})})})]}):(0,s.jsx)("div",{style:{textAlign:"center",margin:"0 auto"},children:(0,s.jsx)(G.Z,{description:"only for vip users, please contact: 270580156@qq.com",children:(0,s.jsx)(V.ZP,{type:"primary",onClick:function(){window.open("http://www.weiyuai.cn")},children:"open weiyuai.cn"})})})}),(0,s.jsx)(b.$_,{})]})},re=function(){var v=(0,W.Z)(),D=v.isDarkMode;return(0,s.jsx)(J.ZP,{theme:{algorithm:D?se:ee},children:(0,s.jsxs)(Y.Z,{children:[(0,s.jsx)(_.ZP,{}),(0,s.jsx)(ne,{})]})})};m.default=re},63998:function(R,m,e){e.d(m,{t:function(){return f}});var P=e(64529),o=e(782),O=e(71381),f=(0,P.Ue)()((0,o.mW)((0,o.tJ)((0,O.n)(function(p,E){return{accessToken:"",setAccessToken:function(M){localStorage.setItem("ACCESS_TOKEN",M),p({accessToken:M})},getAccessToken:function(){return E().accessToken},removeAccessToken:function(){localStorage.removeItem("ACCESS_TOKEN"),p({accessToken:""})}}}),{name:"AUTH_STORE"})))},60247:function(R,m,e){e.d(m,{L:function(){return f}});var P=e(64529),o=e(782),O=e(71381),f=(0,P.Ue)()((0,o.mW)((0,o.tJ)((0,O.n)(function(p,E){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(M){p({userInfo:M})},setDeviceUid:function(M){p({deviceUid:M})},deleteUserInfo:function(){return p({},!0)}}}),{name:"USER_STORE"})))}}]);
