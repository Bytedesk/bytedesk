"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4325],{3212:function(e,n,r){var t=r(79482),o=r(75271),u=r(22800),i=r(7671),a=function(e,n){return o.createElement(i.Z,(0,t.Z)({},e,{ref:n,icon:u.Z}))},l=o.forwardRef(a);n.Z=l},7571:function(e,n,r){var t=r(94414);n.Z=function(){var e=(0,t.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},80294:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var t=r(90228),o=r.n(t),u=r(87999),i=r.n(u),a=r(26068),l=r.n(a),c=r(7571),s=r(64453),f=r(79475),d=r(11811),h=r(15226),p=(0,f.Ue)()((0,d.mW)((0,d.tJ)((0,h.n)((function(e,n){return{roles:[],currentRole:{label:"",key:""},setCurrentRole:function(r){var t=n().roles.find((function(e){return e.key===r}));e((function(e){e.currentRole=t}))},addRole:function(r){if(!n().roles.find((function(e){return e.key===r.uid}))){var t={label:r.displayName,key:r.uid};e((function(e){e.roles.push(t)}))}},deleteRoleCache:function(){return e({},!0)}}})),{name:s.uaR}))),y=r(16242),g=r(95208),m=r(75271),b=r(14604),k=r(52676),v=function(e){console.log(e)},x=[{key:"authority",label:"权限",children:"Content of Tab Pane 1"},{key:"member",label:"成员",children:"Content of Tab Pane 2"}],R=function(){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(b.Z,{defaultActiveKey:"1",items:x,onChange:v})})},Z=r(45234);function C(e){return w.apply(this,arguments)}function w(){return(w=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/api/v1/role/query/org",{method:"GET",params:l()(l()({},n),{},{client:s.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=r(589),j=r(37240),q=y.Z.Sider,E=y.Z.Content,M=function(){var e=(0,Z.useIntl)(),n=(0,c.Z)().leftSiderStyle,r=(0,S.u)((function(e){return e.currentOrg})),t=p((function(e){return{roles:e.roles,setCurrentRole:e.setCurrentRole,addRole:e.addRole}})),u=t.roles,a=t.setCurrentRole,s=t.addRole,f=u.map((function(n){var r=e.formatMessage({id:n.label,defaultMessage:n.label});return l()(l()({},n),{},{label:r})})),d=function(){var e=i()(o()().mark((function e(){var n,t,u,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading("正在获取角色列表..."),n={pageNumber:0,pageSize:20,orgUid:r.uid},e.next=4,C(n);case 4:if(t=e.sent,console.log("queryRoles response ",t),200===t.code)for(j.yw.destroy(),u=0;u<t.data.content.length;u++)i=t.data.content[u],s(i);else j.yw.destroy(),j.yw.error(t.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){d()}),[]);return(0,k.jsxs)(y.Z,{children:[(0,k.jsx)(q,{style:n,children:(0,k.jsx)(g.Z,{mode:"inline",onClick:function(e){console.log("menu click ",e.key),a(e.key)},items:f})}),(0,k.jsx)(y.Z,{children:(0,k.jsx)(E,{children:(0,k.jsx)(R,{})})})]})}}}]);