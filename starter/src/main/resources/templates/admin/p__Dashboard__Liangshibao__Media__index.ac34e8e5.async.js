"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3165],{77154:function(D,g,t){var y=t(39825);function o(){var s=(0,y.Z)(),c=s.isDarkMode,u={borderRight:c?"1px solid #333":"1px solid #ccc",background:c?"#141414":"#eee",width:260},S={background:c?"#141414":"#fff"},f={borderLeft:c?"1px solid #333":"1px solid #ccc",background:c?"#141414":"#eee"},h={minHeight:120};return{leftSiderStyle:u,headerStyle:S,rightSiderStyle:f,contentStyle:h}}g.Z=o},70628:function(D,g,t){t.r(g),t.d(g,{default:function(){return ne}});var y=t(77154),o=t(21612),s=t(67294),c=t(15009),u=t.n(c),S=t(99289),f=t.n(S),h=t(5574),x=t.n(h),W=t(80049),F=t(97857),M=t.n(F),G=t(85615),B=t(86745);function K(r){return C.apply(this,arguments)}function C(){return C=f()(u()().mark(function r(n){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/v1/media/query/org",{method:"GET",params:M()(M()({},n),{},{client:G.bV})}));case 1:case"end":return e.stop()}},r)})),C.apply(this,arguments)}function N(r){return j.apply(this,arguments)}function j(){return j=f()(u()().mark(function r(n){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/v1/media/query/user",{method:"GET",params:M()(M()({},n),{},{client:G.bV})}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function se(r){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/create",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:"web"})}));case 1:case"end":return e.stop()}},r)})),I.apply(this,arguments)}function le(r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/update",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:"web"})}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function de(r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/delete",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:"web"})}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function oe(r){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/filter",{method:"GET",params:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}var J=t(64529),L=t(782),H=t(71381),V=(0,J.Ue)()((0,L.mW)((0,L.tJ)((0,H.n)(function(r,n){return{mediaResult:{data:{content:[]}},setMediaResult:function(e){r({mediaResult:e})},deleteMediaCache:function(){return r({},!0)}}}),{name:"MEDIA_STORE"}))),Q=t(60247),X=t(66955),l=t(85893);function Y(r){return r.type==="image"?(0,l.jsx)(l.Fragment,{children:r.content.split(",").map(function(n,a){return(0,l.jsxs)("a",{href:n,target:"_blank",children:["\u67E5\u770B\u56FE\u7247 ",a+1]},a)})}):(0,l.jsx)("a",{href:r.content,target:"_blank",children:"\u64AD\u653E\u89C6\u9891"})}var q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0},{title:"\u7C7B\u578B",dataIndex:"type",render:function(n,a){return a.type==="image"?"\u56FE\u7247":"\u89C6\u9891"}},{title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0,render:function(n,a){return Y(a)}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(n,a,e,R){return[(0,l.jsx)("a",{onClick:function(){console.log("edit record:",a)},children:"\u7F16\u8F91"},"editable")]}}],_=function(){var n=(0,Q.L)(function(d){return d.userInfo}),a=(0,s.useRef)(),e=(0,s.useState)(1),R=x()(e,2),T=R[0],O=R[1],ae=(0,s.useState)(10),z=x()(ae,2),A=z[0],ue=z[1],Z=V(function(d){return{mediaResult:d.mediaResult,setMediaResult:d.setMediaResult}}),E=Z.mediaResult,ie=Z.setMediaResult,$=function(){var d=f()(u()().mark(function v(){var p,m;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(p={pageNumber:T-1,pageSize:A},!n.superUser){i.next=7;break}return i.next=4,K(p);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,N(p);case 9:i.t0=i.sent;case 10:m=i.t0,console.log("getAllMedias response:",p,m),m.code===200?ie(m):W.yw.error(m.message);case 13:case"end":return i.stop()}},v)}));return function(){return d.apply(this,arguments)}}();return(0,s.useEffect)(function(){$()},[]),(0,s.useEffect)(function(){$()},[T,A]),(0,s.useEffect)(function(){console.log("mediaResult:",E),a.current.reload()},[E]),(0,l.jsx)(X.Z,{columns:q,actionRef:a,cardBordered:!0,request:function(){var d=f()(u()().mark(function v(p,m,k){return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return console.log("request:",p,m,k),O(p.current),ue(p.pageSize),b.abrupt("return",Promise.resolve({data:E.data.content,success:!0,total:E.data.totalElements}));case 4:case"end":return b.stop()}},v)}));return function(v,p,m){return d.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:A,showQuickJumper:!0,onChange:function(v){console.log("page:",v)}},dateFormatter:"string",headerTitle:"\u89C6\u9891/\u56FE\u7247",toolBarRender:function(){return[]}})},ee=_,ce=o.Z.Sider,te=o.Z.Content,re=function(){var n=(0,y.Z)(),a=n.leftSiderStyle,e=n.contentStyle,R=function(O){console.log("menu click ",O)};return(0,l.jsx)(o.Z,{children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(te,{style:e,children:(0,l.jsx)(ee,{})})})})},ne=re},60247:function(D,g,t){t.d(g,{L:function(){return c}});var y=t(64529),o=t(782),s=t(71381),c=(0,y.Ue)()((0,o.mW)((0,o.tJ)((0,s.n)(function(u,S){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(h){u({userInfo:h})},setDeviceUid:function(h){u({deviceUid:h})},deleteUserInfo:function(){return u({},!0)}}}),{name:"USER_STORE"})))}}]);
