"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2647],{71417:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(98037),o=n(75271),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},l=n(58720),s=function(e,t){return o.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};var i=o.forwardRef(s)},65948:function(e,t,n){var r=n(98037),o=n(53162),a=n(34873),l=n(75271),s=n(24763),i=n(36795),u=n(52676),c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var n=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,g=e.mode,h=e.valueEnum,m=e.request,v=e.showSearch,x=e.options,y=(0,o.Z)(e,c),Z=(0,l.useContext)(s.Z);return(0,u.jsx)(i.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,a.h)(h),request:m,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:x,mode:g,showSearch:v,getPopupContainer:Z.getPopupContainer},n),ref:t,proFieldProps:f},y),{},{children:d}))},f=l.forwardRef((function(e,t){var n=e.fieldProps,c=e.children,p=e.params,f=e.proFieldProps,g=e.mode,h=e.valueEnum,m=e.request,v=e.options,x=(0,o.Z)(e,d),y=(0,r.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),Z=(0,l.useContext)(s.Z);return(0,u.jsx)(i.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,a.h)(h),request:m,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:Z.getPopupContainer},y),ref:t,proFieldProps:f},x),{},{children:c}))})),g=l.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",t.Z=g},9477:function(e,t,n){var r=n(99459),o=n(98037),a=n(53162),l=n(31998),s=n(52739),i=n(60281),u=n(71770),c=n(75271),d=n(36795),p=n(52676),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],h="text",m=function(e){var t=(0,l.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),n=(0,r.Z)(t,2),a=n[0],u=n[1];return(0,p.jsx)(s.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var n,r=t.getFieldValue(e.name||[]);return(0,p.jsx)(i.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return u(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(n=e.statusRender)||void 0===n?void 0:n.call(e,r),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:a,children:e.children}))}})},v=function(e){var t=e.fieldProps,n=e.proFieldProps,r=(0,a.Z)(e,f);return(0,p.jsx)(d.Z,(0,o.Z)({valueType:h,fieldProps:t,filedConfig:{valueType:h},proFieldProps:n},r))};v.Password=function(e){var t=e.fieldProps,n=e.proFieldProps,l=(0,a.Z)(e,g),s=(0,c.useState)(!1),i=(0,r.Z)(s,2),f=i[0],v=i[1];return null!=t&&t.statusRender&&l.name?(0,p.jsx)(m,{name:l.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:v,children:(0,p.jsx)("div",{children:(0,p.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,u.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var n;null==t||null===(n=t.onBlur)||void 0===n||n.call(t,e),v(!1)},onClick:function(e){var n;null==t||null===(n=t.onClick)||void 0===n||n.call(t,e),v(!0)}}),proFieldProps:n,filedConfig:{valueType:h}},l))})}):(0,p.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:t,proFieldProps:n,filedConfig:{valueType:h}},l))},v.displayName="ProFormComponent",t.Z=v},92996:function(e,t,n){var r=n(98037),o=n(53162),a=n(75271),l=n(36795),s=n(52676),i=["fieldProps","proFieldProps"],u=function(e,t){var n=e.fieldProps,a=e.proFieldProps,u=(0,o.Z)(e,i);return(0,s.jsx)(l.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:a},u))};t.Z=a.forwardRef(u)},98417:function(e,t,n){n.d(t,{BF:function(){return d},Vh:function(){return f},zZ:function(){return h}});var r=n(90228),o=n.n(r),a=n(26068),l=n.n(a),s=n(87999),i=n.n(s),u=n(96677),c=n(18735);function d(e){return p.apply(this,arguments)}function p(){return(p=i()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/blog/query/org",{method:"GET",params:l()(l()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=i()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/blog/create",{method:"POST",data:l()(l()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=i()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/blog/update",{method:"POST",data:l()(l()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},93384:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(21544),o=n(43650),a=n(26068),l=n.n(a),s=n(67825),i=n.n(s),u=n(90228),c=n.n(u),d=n(87999),p=n.n(d),f=n(48305),g=n.n(f),h=n(59153),m=n(98417),v=n(29244),x=n(65496),y=n(93061),Z=n(58439),w=n(75271),b=n(26092),P=n(96677),j=n(74730),C=n(65948),F=n(9477),S=n(92996),M=n(52739),T=n(86831),E=n(89620),O=n(52676),k=function(e){var t=e.isEdit,n=e.blog,r=e.open,o=e.onClose,a=e.onSubmit,s=M.Z.useForm(),i=g()(s,1)[0],u=(0,v.u)((function(e){return e.currentOrg})),c=(0,b.v)((function(e){return e.categorySelectOptions}));(0,w.useEffect)((function(){var e;t?i.setFieldsValue({type:null==n?void 0:n.type,title:null==n?void 0:n.title,content:null==n?void 0:n.content,categoryUid:null==n||null===(e=n.category)||void 0===e?void 0:e.uid}):i.resetFields()}),[r]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(T.Z,{title:t?"修改":"新建",onClose:o,open:r,extra:(0,O.jsxs)(E.Z,{children:[(0,O.jsx)(Z.ZP,{onClick:o,children:"取消"}),(0,O.jsx)(Z.ZP,{onClick:function(){console.log("handleSubmit"),i.validateFields().then((function(e){console.log(e),a(l()(l()(l()({},n),e),{},{orgUid:null==u?void 0:u.uid}))})).catch((function(e){console.log("Form errors:",e),h.yw.error("请检查表单填写")}))},type:"primary",children:"保存"})]}),children:(0,O.jsxs)(j.A,{form:i,initialValues:l()({},n),submitter:{render:function(){return null}},children:[(0,O.jsx)(C.Z,{label:"分类",name:"categoryUid",rules:[{required:!0,message:"请选择分类"}],options:c,fieldProps:{allowClear:!0,placeholder:"请选择分类",onChange:function(e){console.log("category selected ".concat(e))}}}),(0,O.jsx)(C.Z,{label:"类型",name:"type",rules:[{required:!0,message:"请选择类型"}],options:[{label:"文本",value:P.PYi},{label:"图片",value:P.Qm,disabled:!0},{label:"视频",value:P.tVi,disabled:!0},{label:"音频",value:P.Yu1,disabled:!0},{label:"文件",value:P.Qn,disabled:!0}],fieldProps:{allowClear:!0,placeholder:"请选择类型",onChange:function(e){console.log("type selected ".concat(e))}}}),(0,O.jsx)(F.Z,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题"}]}),(0,O.jsx)(S.Z,{label:"内容",name:"content"})]})})})},I=n(18735),$=["current"],q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,O.jsx)(I.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"title",copyable:!0},{title:(0,O.jsx)(I.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content"},{title:(0,O.jsx)(I.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,O.jsx)(I.FormattedMessage,{id:"category",defaultMessage:"Category"}),dataIndex:"category",hideInSearch:!0,render:function(e,t){var n;return null===(n=t.category)||void 0===n?void 0:n.name}},{title:(0,O.jsx)(I.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],R=function(){var e=(0,I.useIntl)(),t=(0,w.useRef)(),n=(0,w.useState)(!0),r=g()(n,2),o=r[0],a=r[1],s=(0,w.useState)(),u=g()(s,2),d=u[0],f=u[1],P=(0,w.useState)(!1),j=g()(P,2),C=j[0],F=j[1],S=(0,v.u)((function(e){return e.currentOrg})),M=[].concat(q,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(t,n,r,o){return[(0,O.jsx)("a",{onClick:function(){E(n)},children:e.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable")]}}]),T=(0,b.v)((function(e){return e.currentCategory})),E=function(e){f(e),a(!0),F(!0)},R=function(){var n=p()(c()().mark((function n(r){var a,l;return c()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("handleSubmitDrawer",r),o?h.yw.loading(e.formatMessage({id:"updating"})):h.yw.loading(e.formatMessage({id:"creating"})),!o){n.next=8;break}return n.next=5,(0,m.zZ)(r);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,(0,m.Vh)(r);case 10:n.t0=n.sent;case 11:a=n.t0,console.log("createBlog response:",r,a),200===a.code?(h.yw.destroy(),h.yw.loading(e.formatMessage({id:"create.success"})),F(!1),null===(l=t.current)||void 0===l||l.reloadAndRest()):(h.yw.destroy(),h.yw.error(a.message));case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();(0,w.useEffect)((function(){var e;console.log("currentCategory:",T),null===(e=t.current)||void 0===e||e.reloadAndRest()}),[T]);var V=function(){console.log("handleRichEditor"),window.open("/admin/doceditor")};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(y.Z,{columns:M,actionRef:t,cardBordered:!0,request:function(){var t=p()(c()().mark((function t(n,r,o){var a,s,u;return c()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("request:",n,r,o),h.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n.current,a=i()(n,$),s=l()({pageNumber:n.current-1,orgUid:S.uid,categoryUid:"all"===T.uid?"":T.uid},a),t.next=6,(0,m.BF)(s);case 6:return u=t.sent,console.log("getAllBlogs response:",s,u),h.yw.destroy(),200===u.code||h.yw.error(u.message),t.abrupt("return",{data:u.data.content,success:!0,total:u.data.totalElements});case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"AI生成，并同步到各大社交媒体",toolBarRender:function(){return[(0,O.jsx)(Z.ZP,{icon:(0,O.jsx)(x.Z,{}),type:"primary",onClick:V,children:e.formatMessage({id:"create",defaultMessage:"Create"})},"button")]}}),(0,O.jsx)(k,{isEdit:o,open:C,blog:d,onClose:function(){F(!1)},onSubmit:R})]})},V=n(92979),A=o.Z.Sider,N=o.Z.Content,B=function(){var e=(0,r.Z)(),t=e.leftSiderStyle,n=e.contentStyle;return(0,O.jsx)("div",{children:(0,O.jsxs)(o.Z,{children:[(0,O.jsx)(A,{style:t,children:(0,O.jsx)(V.Z,{type:P.qAy})}),(0,O.jsx)(o.Z,{children:(0,O.jsx)(N,{style:n,children:(0,O.jsx)(R,{})})})]})})}},8038:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(75271),o=n(82187),a=n.n(o),l=n(30454),s=n(99518),i=n(4166),u=n(10083),c=n(53557);const d=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],f=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return a()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&d.includes(n)}})(e,t)),((e,t)=>{const n={};return f.forEach((r=>{n[`${e}-align-${r}`]=t.align===r})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return p.forEach((r=>{n[`${e}-justify-${r}`]=t.justify===r})),n})(e,t)))};const h=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},m=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,n={};return d.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},x=e=>{const{componentCls:t}=e,n={};return f.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},y=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var Z=(0,u.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,o=(0,c.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[h(o),m(o),v(o),x(o),y(o)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const b=r.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:o,className:u,style:c,flex:d,gap:p,children:f,vertical:h=!1,component:m="div"}=e,v=w(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:x,direction:y,getPrefixCls:b}=r.useContext(i.E_),P=b("flex",n),[j,C,F]=Z(P),S=null!=h?h:null==x?void 0:x.vertical,M=a()(u,o,null==x?void 0:x.className,P,C,F,g(P,e),{[`${P}-rtl`]:"rtl"===y,[`${P}-gap-${p}`]:(0,s.n)(p),[`${P}-vertical`]:S}),T=Object.assign(Object.assign({},null==x?void 0:x.style),c);return d&&(T.flex=d),p&&!(0,s.n)(p)&&(T.gap=p),j(r.createElement(m,Object.assign({ref:t,className:M,style:T},(0,l.Z)(v,["justify","wrap","align"])),f))}));var P=b}}]);