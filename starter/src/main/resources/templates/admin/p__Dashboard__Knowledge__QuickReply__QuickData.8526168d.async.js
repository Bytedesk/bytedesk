"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1929],{51042:function(_,C,e){var c=e(1413),f=e(67294),S=e(42110),P=e(89099),o=function(A,l){return f.createElement(P.Z,(0,c.Z)((0,c.Z)({},A),{},{ref:l,icon:S.Z}))},D=f.forwardRef(o);C.Z=D},64317:function(_,C,e){var c=e(1413),f=e(91),S=e(22270),P=e(67294),o=e(66758),D=e(47897),O=e(85893),A=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],L=function(s,$){var Z=s.fieldProps,V=s.children,j=s.params,G=s.proFieldProps,F=s.mode,Y=s.valueEnum,R=s.request,I=s.showSearch,k=s.options,N=(0,f.Z)(s,A),z=(0,P.useContext)(o.Z);return(0,O.jsx)(D.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,S.h)(Y),request:R,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:k,mode:F,showSearch:I,getPopupContainer:z.getPopupContainer},Z),ref:$,proFieldProps:G},N),{},{children:V}))},E=P.forwardRef(function(a,s){var $=a.fieldProps,Z=a.children,V=a.params,j=a.proFieldProps,G=a.mode,F=a.valueEnum,Y=a.request,R=a.options,I=(0,f.Z)(a,l),k=(0,c.Z)({options:R,mode:G||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},$),N=(0,P.useContext)(o.Z);return(0,O.jsx)(D.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,S.h)(F),request:Y,params:V,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:N.getPopupContainer},k),ref:s,proFieldProps:j},I),{},{children:Z}))}),K=P.forwardRef(L),x=E,p=K;p.SearchSelect=x,p.displayName="ProFormComponent",C.Z=p},90672:function(_,C,e){var c=e(1413),f=e(91),S=e(67294),P=e(47897),o=e(85893),D=["fieldProps","proFieldProps"],O=function(l,L){var E=l.fieldProps,K=l.proFieldProps,x=(0,f.Z)(l,D);return(0,o.jsx)(P.Z,(0,c.Z)({ref:L,valueType:"textarea",fieldProps:E,proFieldProps:K},x))};C.Z=S.forwardRef(O)},18200:function(_,C,e){e.r(C),e.d(C,{default:function(){return De}});var c=e(77154),f=e(21612),S=e(52670),P=e(97857),o=e.n(P),D=e(13769),O=e.n(D),A=e(15009),l=e.n(A),L=e(99289),E=e.n(L),K=e(5574),x=e.n(K),p=e(80049),a=e(85615),s=e(86745);function $(i){return Z.apply(this,arguments)}function Z(){return Z=E()(l()().mark(function i(n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/v1/quickreply/query/org",{method:"GET",params:o()(o()({},n),{},{client:a.bV})}));case 1:case"end":return r.stop()}},i)})),Z.apply(this,arguments)}function V(i){return j.apply(this,arguments)}function j(){return j=E()(l()().mark(function i(n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/v1/quickreply/create",{method:"POST",data:o()(o()({},n),{},{client:a.bV})}));case 1:case"end":return r.stop()}},i)})),j.apply(this,arguments)}function G(i){return F.apply(this,arguments)}function F(){return F=E()(l()().mark(function i(n){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/v1/quickreply/update",{method:"POST",data:o()(o()({},n),{},{client:a.bV})}));case 1:case"end":return r.stop()}},i)})),F.apply(this,arguments)}function Y(i){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function i(n){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/quickreply/delete",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return r.stop()}},i)})),R.apply(this,arguments)}var I=e(87676),k=e(51042),N=e(1269),z=e(14726),B=e(67294),le=e(89102),se=e(34994),ue=e(64317),ie=e(5966),de=e(90672),ce=e(8232),pe=e(85265),ve=e(42075),t=e(85893),me=function(n){var y=n.isEdit,r=n.quickreply,Q=n.open,H=n.onClose,ee=n.onSubmit,X=ce.Z.useForm(),re=x()(X,1),M=re[0],J=(0,I.u)(function(v){return v.orgCurrent}),q=(0,le.v)(function(v){return v.categorySelectOptions});(0,B.useEffect)(function(){if(y){var v;M.setFieldsValue({type:r==null?void 0:r.type,title:r==null?void 0:r.title,content:r==null?void 0:r.content,categoryUid:r==null||(v=r.category)===null||v===void 0?void 0:v.uid})}else M.resetFields()},[Q]);var te=function(m){console.log("category selected ".concat(m))},W=function(m){console.log("type selected ".concat(m))},ne=function(){console.log("handleSubmit"),M.validateFields().then(function(m){console.log(m),ee(o()(o()(o()({},r),m),{},{orgUid:J==null?void 0:J.uid}))}).catch(function(m){console.log("Form errors:",m),p.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(pe.Z,{title:y?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:H,open:Q,extra:(0,t.jsxs)(ve.Z,{children:[(0,t.jsx)(z.ZP,{onClick:H,children:"\u53D6\u6D88"}),(0,t.jsx)(z.ZP,{onClick:ne,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,t.jsxs)(se.A,{form:M,initialValues:o()({},r),submitter:{render:function(){return null}},children:[(0,t.jsx)(ue.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:q,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:te}}),(0,t.jsx)(ue.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:a.PY},{label:"\u56FE\u7247",value:a.Qm},{label:"\u89C6\u9891",value:a.tV},{label:"\u97F3\u9891",value:a.ai},{label:"\u6587\u4EF6",value:a.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:W}}),(0,t.jsx)(ie.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,t.jsx)(de.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},he=me,fe=["current"],ye=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"title",copyable:!0},{title:"\u5185\u5BB9",dataIndex:"content"},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0},{title:"\u5206\u7C7B",dataIndex:"category",hideInSearch:!0,render:function(n,y){var r;return(r=y.category)===null||r===void 0?void 0:r.name}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],Pe=function(){var n=(0,B.useRef)(),y=(0,B.useState)(!0),r=x()(y,2),Q=r[0],H=r[1],ee=(0,B.useState)(),X=x()(ee,2),re=X[0],M=X[1],J=(0,B.useState)(!1),q=x()(J,2),te=q[0],W=q[1],ne=(0,I.u)(function(u){return u.orgCurrent}),v=[].concat(ye,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(g,h,T,b){return[(0,t.jsx)("a",{onClick:function(){Te(h)},children:"\u4FEE\u6539"},"editable")]}}]),m=(0,le.v)(function(u){return u.currentCategory}),xe=function(){M(void 0),H(!1),W(!0)},Te=function(g){M(g),H(!0),W(!0)},Oe=function(){var u=E()(l()().mark(function g(h){var T,b;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(console.log("handleSubmitDrawer",h),Q?p.yw.loading("\u6B63\u5728\u4FEE\u6539\u5FEB\u6377\u56DE\u590D"):p.yw.loading("\u6B63\u5728\u521B\u5EFA\u5FEB\u6377\u56DE\u590D"),!Q){d.next=8;break}return d.next=5,G(h);case 5:d.t0=d.sent,d.next=11;break;case 8:return d.next=10,V(h);case 10:d.t0=d.sent;case 11:T=d.t0,console.log("createQuickreply response:",h,T),T.code===200?(p.yw.destroy(),p.yw.success("\u5FEB\u6377\u56DE\u590D\u521B\u5EFA\u6210\u529F"),W(!1),(b=n.current)===null||b===void 0||b.reloadAndRest()):(p.yw.destroy(),p.yw.error(T.message));case 14:case"end":return d.stop()}},g)}));return function(h){return u.apply(this,arguments)}}(),Ze=function(){W(!1)};return(0,B.useEffect)(function(){var u;console.log("currentCategory:",m),(u=n.current)===null||u===void 0||u.reloadAndRest()},[m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{columns:v,actionRef:n,cardBordered:!0,request:function(){var u=E()(l()().mark(function g(h,T,b){var ae,d,oe,w;return l()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return console.log("request:",h,T,b),p.yw.loading("\u6B63\u5728\u52A0\u8F7D\u5FEB\u6377\u56DE\u590D"),ae=h.current,d=O()(h,fe),oe=o()({pageNumber:h.current-1,orgUid:ne.uid,categoryUid:m.uid==="all"?"":m.uid},d),U.next=6,$(oe);case 6:return w=U.sent,console.log("getAllQuickreplys response:",oe,w),p.yw.destroy(),w.code===200||p.yw.error(w.message),U.abrupt("return",{data:w.data.content,success:!0,total:w.data.totalElements});case 11:case"end":return U.stop()}},g)}));return function(g,h,T){return u.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(g){console.log("page:",g)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u56DE\u590D",toolBarRender:function(){return[(0,t.jsx)(z.ZP,{icon:(0,t.jsx)(k.Z,{}),type:"primary",onClick:xe,children:"\u521B\u5EFA"},"button")]}}),(0,t.jsx)(he,{isEdit:Q,open:te,quickreply:re,onClose:Ze,onSubmit:Oe})]})},ge=Pe,Ee=f.Z.Sider,Ce=f.Z.Content,Se=function(){var n=(0,c.Z)(),y=n.leftSiderStyle,r=n.contentStyle;return(0,t.jsx)("div",{children:(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(Ee,{style:y,children:(0,t.jsx)(S.Z,{type:a.dt})}),(0,t.jsx)(f.Z,{children:(0,t.jsx)(Ce,{style:r,children:(0,t.jsx)(ge,{})})})]})})},De=Se}}]);
