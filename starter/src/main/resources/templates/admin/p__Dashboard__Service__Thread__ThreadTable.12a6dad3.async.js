"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3537],{11475:function(I,p,e){e.d(p,{Z:function(){return l}});var o=e(1413),s=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},g=f,E=e(89099),i=function(M,u){return s.createElement(E.Z,(0,o.Z)((0,o.Z)({},M),{},{ref:u,icon:g}))},h=s.forwardRef(i),l=h},58638:function(I,p,e){e.d(p,{Z:function(){return l}});var o=e(1413),s=e(67294),f={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},g=f,E=e(89099),i=function(M,u){return s.createElement(E.Z,(0,o.Z)((0,o.Z)({},M),{},{ref:u,icon:g}))},h=s.forwardRef(i),l=h},14101:function(I,p,e){e.d(p,{Nm:function(){return U},fk:function(){return l}});var o=e(15009),s=e.n(o),f=e(97857),g=e.n(f),E=e(99289),i=e.n(E),h=e(86745);function l(a){return r.apply(this,arguments)}function r(){return r=i()(s()().mark(function a(d){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/v1/thread/org",{method:"GET",params:g()({},d)}));case 1:case"end":return n.stop()}},a)})),r.apply(this,arguments)}function M(a){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function a(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/thread/update",{method:"POST",data:_objectSpread({},d)}));case 1:case"end":return n.stop()}},a)})),u.apply(this,arguments)}function U(a){return b.apply(this,arguments)}function b(){return b=i()(s()().mark(function a(d){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/v1/thread/close",{method:"POST",data:g()({},d)}));case 1:case"end":return n.stop()}},a)})),b.apply(this,arguments)}function K(a){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function a(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/thread/delete",{method:"POST",data:_objectSpread({},d)}));case 1:case"end":return n.stop()}},a)})),y.apply(this,arguments)}function L(a){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function a(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/thread/export",{method:"GET",params:_objectSpread({},d)}));case 1:case"end":return n.stop()}},a)})),C.apply(this,arguments)}},73803:function(I,p,e){var o=e(85615),s=e(66419),f=e(86745);function g(){var E=(0,f.useIntl)(),i=function(r){return r&&r.startsWith(o.Vo)?E.formatMessage({id:r,defaultMessage:r}):r},h=function(r){return r!=null&&r.startsWith(o.Vo)?(0,s.aS)(E.formatMessage({id:r}),10):(0,s.aS)(r,10)};return{translateString:i,translateStringTranct:h}}p.Z=g},54407:function(I,p,e){e.r(p);var o=e(97857),s=e.n(o),f=e(13769),g=e.n(f),E=e(15009),i=e.n(E),h=e(99289),l=e.n(h),r=e(5574),M=e.n(r),u=e(80049),U=e(14101),b=e(73803),K=e(87676),y=e(85615),L=e(11475),C=e(58638),a=e(1269),d=e(85576),T=e(14726),n=e(67294),O=e(85893),w=["current"],X=[{label:"\u7C7B\u578B1",value:"type1"},{label:"\u7C7B\u578B2",value:"type2"}],Z=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u8BBF\u5BA2",dataIndex:"userNickname",render:function(B,A){var R;return(R=A.user)===null||R===void 0?void 0:R.nickname}},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0},{title:"\u672A\u8BFB\u6570",dataIndex:"unreadCount",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",copyable:!0,hideInSearch:!0},{title:"\u6765\u6E90",dataIndex:"client",hideInSearch:!0},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0}],$=function(){var B=(0,n.useRef)(),A=(0,K.u)(function(c){return c.orgCurrent}),R=(0,b.Z)(),G=R.translateString,F=d.Z.useModal(),S=M()(F,2),z=S[0],N=S[1],V=function(_){var t;z.confirm({title:"\u5173\u95ED\u63D0\u793A",icon:(0,O.jsx)(L.Z,{}),content:"\u786E\u8BA4\u8981\u5173\u95ED\u4F1A\u8BDD\u3010".concat(G(_==null||(t=_.user)===null||t===void 0?void 0:t.nickname),"\u3011\u5417\uFF1F"),onOk:function(){console.log("\u786E\u8BA4\u5173\u95ED"),J(_)},onCancel:function(){console.log("\u53D6\u6D88\u5173\u95ED")},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},H=[].concat(Z,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(_,t,m,v){return[(0,O.jsx)("a",{onClick:function(){V(t)},children:"\u5173\u95ED"},"editable")]}}]),J=function(){var c=l()(i()().mark(function _(t){var m,v;return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("handleCloseThread:",t),u.yw.loading("\u6B63\u5728\u5173\u95ED\u4F1A\u8BDD..."),D.next=4,(0,U.Nm)(t);case 4:m=D.sent,console.log("handleCloseThread response:",t,m),m.code===200?(u.yw.destroy(),u.yw.success("\u5173\u95ED\u4F1A\u8BDD\u6210\u529F\uFF01"),(v=B.current)===null||v===void 0||v.reload()):(u.yw.destroy(),u.yw.error(m.message));case 7:case"end":return D.stop()}},_)}));return function(t){return c.apply(this,arguments)}}(),Q=function(){var c=l()(i()().mark(function _(){var t;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:console.log("handleExportExcel"),t=localStorage.getItem(y.LA),window.open("/api/v1/thread/export?uid="+A.uid+"pageNumber=0&pageSize=20&accessToken="+t);case 3:case"end":return v.stop()}},_)}));return function(){return c.apply(this,arguments)}}();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(a.Z,{columns:H,actionRef:B,cardBordered:!0,request:function(){var c=l()(i()().mark(function _(t,m,v){var x,D,W,P;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("request:",t,m,v),x=t.current,D=g()(t,w),W=s()({pageNumber:t.current-1,orgUid:A.uid},D),j.next=5,(0,U.fk)(W);case 5:return P=j.sent,console.log("getAllThreads response:",W,P),P.code===200||u.yw.error(P.message),j.abrupt("return",{data:P.data.content,success:!0,total:P.data.totalElements});case 9:case"end":return j.stop()}},_)}));return function(_,t,m){return c.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(_){console.log("page:",_)}},dateFormatter:"string",headerTitle:"\u4F1A\u8BDD\u5217\u8868",toolBarRender:function(){return[(0,O.jsx)(T.ZP,{icon:(0,O.jsx)(C.Z,{}),type:"primary",onClick:Q,children:"\u5BFC\u51FA"},"button")]}}),N]})};p.default=$}}]);
