"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2701],{65060:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(13800),a=t(75271),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=t(45791),i=function(e,n){return a.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:o}))};var u=a.forwardRef(i)},25203:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(13800),a=t(75271),o={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},s=t(45791),i=function(e,n){return a.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:o}))};var u=a.forwardRef(i)},64826:function(e,n,t){var r=t(76314),a=t(13800),o=t(60323),s=t(6522),i=t(92813),u=t(54433),c=t(71770),l=t(75271),d=t(89755),p=t(52676),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],h="text",m=function(e){var n=(0,s.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),t=(0,r.Z)(n,2),o=t[0],c=t[1];return(0,p.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(n){var t,r=n.getFieldValue(e.name||[]);return(0,p.jsx)(u.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return c(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(t=e.statusRender)||void 0===t?void 0:t.call(e,r),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:o,children:e.children}))}})},v=function(e){var n=e.fieldProps,t=e.proFieldProps,r=(0,o.Z)(e,f);return(0,p.jsx)(d.Z,(0,a.Z)({valueType:h,fieldProps:n,filedConfig:{valueType:h},proFieldProps:t},r))};v.Password=function(e){var n=e.fieldProps,t=e.proFieldProps,s=(0,o.Z)(e,g),i=(0,l.useState)(!1),u=(0,r.Z)(i,2),f=u[0],v=u[1];return null!=n&&n.statusRender&&s.name?(0,p.jsx)(m,{name:s.name,statusRender:null==n?void 0:n.statusRender,popoverProps:null==n?void 0:n.popoverProps,strengthText:null==n?void 0:n.strengthText,open:f,onOpenChange:v,children:(0,p.jsx)("div",{children:(0,p.jsx)(d.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,c.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var t;null==n||null===(t=n.onBlur)||void 0===t||t.call(n,e),v(!1)},onClick:function(e){var t;null==n||null===(t=n.onClick)||void 0===t||t.call(n,e),v(!0)}}),proFieldProps:t,filedConfig:{valueType:h}},s))})}):(0,p.jsx)(d.Z,(0,a.Z)({valueType:"password",fieldProps:n,proFieldProps:t,filedConfig:{valueType:h}},s))},v.displayName="ProFormComponent",n.Z=v},83369:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var r=t(26068),a=t.n(r),o=t(67825),s=t.n(o),i=t(90228),u=t.n(i),c=t(87999),l=t.n(c),d=t(48305),p=t.n(d),f=t(37240),g=t(64453),h=t(45234);function m(e){return v.apply(this,arguments)}function v(){return(v=l()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/tag/query/org",{method:"GET",params:a()(a()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return(y=l()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/tag/create",{method:"POST",data:a()(a()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return w.apply(this,arguments)}function w(){return(w=l()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/tag/update",{method:"POST",data:a()(a()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return j.apply(this,arguments)}function j(){return(j=l()(u()().mark((function e(n){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/tag/delete",{method:"POST",data:a()(a()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=t(65098),T=t(65060),b=t(40141),P=t(25203),C=t(15161),F=t(8591),S=t(42502),E=t(75271),I=t(43393),O=t(64826),R=t(16993),V=t(52676),q=function(e){var n=e.isEdit,t=e.tag,r=e.open,o=e.onClose,s=e.onSubmit,i=I.A.useForm(),u=p()(i,1)[0],c=(0,k.u)((function(e){return e.currentOrg}));return(0,E.useEffect)((function(){n?u.setFieldsValue({name:null==t?void 0:t.name,encodeType:"安全模式"}):u.setFieldsValue({name:"",color:"red"})}),[n,t,u]),(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(R.Z,{title:"标签",onClose:o,open:r,children:(0,V.jsxs)(I.A,{form:u,name:"tagForm",onFinish:function(){console.log("handleSubmit"),u.validateFields().then((function(e){var n=a()(a()({},e),{},{orgUid:null==c?void 0:c.uid});console.log("submit",n),s(n)}))},children:[(0,V.jsx)(O.Z,{label:"名称",name:"name",rules:[{required:!0}]}),(0,V.jsx)(O.Z,{label:"颜色",name:"color",rules:[{required:!0}]})]})})})},A=["current"],B=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,V.jsx)(h.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"nickname",copyable:!0},{title:(0,V.jsx)(h.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0},{title:(0,V.jsx)(h.FormattedMessage,{id:"client",defaultMessage:"Client"}),dataIndex:"client",hideInSearch:!0},{title:(0,V.jsx)(h.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0}],z=function(){var e=(0,h.useIntl)(),n=(0,E.useRef)(),t=(0,k.u)((function(e){return e.currentOrg})),r=(0,E.useState)(!1),o=p()(r,2),i=o[0],c=o[1],d=(0,E.useState)({}),g=p()(d,2),v=g[0],y=g[1],w=(0,E.useState)(!1),j=p()(w,2),I=j[0],O=j[1],R=F.Z.useModal(),z=p()(R,2),N=z[0],D=(z[1],[].concat(B,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(n,t,r,a){return[(0,V.jsx)("a",{onClick:function(){O(!0),y(t),J()},children:e.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,V.jsx)(S.ZP,{type:"link",onClick:function(){return n=t,void N.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,V.jsx)(T.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(n.name,"】？"),onOk:function(){U(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})});var n},danger:!0,children:e.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}])),U=function(){var t=l()(u()().mark((function t(r){var a;return u()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("deleteTag:",r),t.next=3,M(r);case 3:a=t.sent,console.log("deleteMember:",a),200===a.code?(f.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),n.current.reload()):f.yw.error(a.message);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var e=l()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:r=e.sent,console.log("handleCreateTag response:",r),200===r.code?(null===(a=n.current)||void 0===a||a.reload(),c(!1)):f.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=l()(u()().mark((function e(t){var r,a;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=null==v?void 0:v.uid,e.next=3,Z(t);case 3:r=e.sent,console.log("handleUpdateTag response:",r),200===r.code?(null===(a=n.current)||void 0===a||a.reload(),c(!1)):f.yw.error(r.message);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){c(!0),O(!1),y({})},K=function(){console.log("handleExportExcel"),f.yw.warning("即将上线，敬请期待")};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(q,{isEdit:I,open:i,tag:v,onClose:function(){c(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),I?G(e):H(e)}}),(0,V.jsx)(C.Z,{columns:D,actionRef:n,cardBordered:!0,request:function(){var e=l()(u()().mark((function e(n,r,o){var i,c,l;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current,i=s()(n,A),c=a()({pageNumber:n.current-1,orgUid:t.uid},i),e.next=4,m(c);case 4:return l=e.sent,console.log("queryTagsByOrg response:",l,c),200===l.code||f.yw.error(l.message),e.abrupt("return",{data:l.data.content,success:!0,total:l.data.totalElements});case 8:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"标签列表",toolBarRender:function(){return[(0,V.jsx)(S.ZP,{type:"primary",icon:(0,V.jsx)(b.Z,{}),onClick:J,children:e.formatMessage({id:"create",defaultMessage:"Create"})}),(0,V.jsx)(S.ZP,{icon:(0,V.jsx)(P.Z,{}),type:"primary",onClick:K,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}})]})}}}]);