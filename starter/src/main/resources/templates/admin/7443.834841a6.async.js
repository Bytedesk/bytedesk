"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7443],{2724:function(e,o,i){var t=i(17082),n=i(51190),s=i(19753),l=i(19421),u=i(44194),r=i(79379),d=i(93288),a=i(31549),c=["options","fieldProps","proFieldProps","valueEnum"],v=u.forwardRef((function(e,o){var i=e.options,l=e.fieldProps,u=e.proFieldProps,r=e.valueEnum,v=(0,n.Z)(e,c);return(0,a.jsx)(d.Z,(0,t.Z)({ref:o,valueType:"checkbox",valueEnum:(0,s.h)(r,void 0),fieldProps:(0,t.Z)({options:i},l),lightProps:(0,t.Z)({labelFormatter:function(){return(0,a.jsx)(d.Z,(0,t.Z)({ref:o,valueType:"checkbox",mode:"read",valueEnum:(0,s.h)(r,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,t.Z)({options:i},l),proFieldProps:u},v))}},v.lightProps),proFieldProps:u},v))})),p=u.forwardRef((function(e,o){var i=e.fieldProps,n=e.children;return(0,a.jsx)(l.Z,(0,t.Z)((0,t.Z)({ref:o},i),{},{children:n}))})),g=(0,r.G)(p,{valuePropName:"checked"});g.Group=v,o.Z=g},13253:function(e,o,i){i(90819),i(73193),i(89933),i(45332),i(81153),i(43314),i(85702),i(61017),i(77667),i(82045),i(44194),i(31549)},9750:function(e,o,i){i(90819),i(73193),i(89933),i(45332),i(81153),i(43314),i(85702),i(61017),i(77667),i(82045),i(44194),i(31549)},3321:function(e,o,i){var t=i(90819),n=i.n(t),s=i(73193),l=i.n(s),u=i(89933),r=i.n(u),d=i(45332),a=i.n(d),c=i(89756),v=i(81153),p=i(63833),g=i(43314),f=i(1780),m=i(85702),h=i(3245),w=i(61017),T=i(77667),S=i(5728),b=i(2724),F=i(11607),q=i(80067),M=i(82045),k=i(44194),x=i(60029),C=i(74828),y=i(31549);o.Z=function(e){var o=e.type,i=S.A.useForm(),t=a()(i,1)[0],s=(0,M.useIntl)(),u=(0,f.Z)().translateString,d=(0,k.useState)(!1),Z=a()(d,2),j=Z[0],U=Z[1],L=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),P=L.currentRobot,R=L.setCurrentRobot,V=(0,m.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),A=V.currentAgent,W=V.setCurrentAgent,E=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),N=E.currentWorkgroup,D=E.setCurrentWorkgroup,X=(0,k.useState)(""),_=a()(X,2),G=_[0],O=_[1],I=function(e){O(u(null==e?void 0:e.welcomeTip)),t.setFieldValue("topTip",u(null==e?void 0:e.topTip)),t.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),t.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),t.setFieldValue("showLogo",null==e?void 0:e.showLogo)};(0,k.useEffect)((function(){if(o===T._X4)I(null==P?void 0:P.serviceSettings);else if(o===T.Njn){var e,i;I(null==A?void 0:A.serviceSettings),U(null==A||null===(e=A.serviceSettings)||void 0===e?void 0:e.showTopTip),t.setFieldValue("maxThreadCount",null==A?void 0:A.maxThreadCount),t.setFieldValue("leaveMsgTip",u(null==A||null===(i=A.leaveMsgSettings)||void 0===i?void 0:i.leaveMsgTip))}else if(o===T.aZD){var n;I(null==N?void 0:N.serviceSettings),t.setFieldValue("leaveMsgTip",u(null==N||null===(n=N.leaveMsgSettings)||void 0===n?void 0:n.leaveMsgTip))}}),[P,A,N]);var $=function(){var e=r()(n()().mark((function e(i){var t,u,r,d,a,f,m,h,w,S,b,F,q,M,k,x,C,y,Z,U,L,V,E,X,_;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",i," showTopTip:",j),c.yw.loading(s.formatMessage({id:"updating"})),o!==T._X4){e.next=12;break}return f=l()(l()({},P),{},{serviceSettings:l()(l()({},P.serviceSettings),{},{topTip:(null==i?void 0:i.topTip)||"",showTopTip:j,welcomeTip:G,autoCloseMin:(null==i?void 0:i.autoCloseMin)||25,showLogo:(null==i?void 0:i.showLogo)||!0,quickFaqUids:null===(t=A.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})),faqUids:null==P||null===(u=P.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==P||null===(r=P.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),hotFaqUids:null==P||null===(d=P.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==P||null===(a=P.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,p.$l)(f);case 7:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),R(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=30;break;case 12:if(o!==T.Njn){e.next=22;break}return k=l()(l()({},A),{},{serviceSettings:l()(l()({},A.serviceSettings),{},{topTip:(null==i?void 0:i.topTip)||"",showTopTip:j,welcomeTip:G,autoCloseMin:(null==i?void 0:i.autoCloseMin)||25,showLogo:(null==i?void 0:i.showLogo)||!0,quickFaqUids:null===(h=A.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null===(w=A.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==A||null===(S=A.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==A||null===(b=A.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(F=A.serviceSettings)||void 0===F||null===(F=F.shortcutFaqs)||void 0===F?void 0:F.map((function(e){return e.uid}))}),leaveMsgSettings:l()(l()({},A.leaveMsgSettings),{},{leaveMsgTip:(null==i?void 0:i.leaveMsgTip)||"",worktimeUids:null===(q=A.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:l()(l()({},A.robotSettings),{},{robotUid:null===(M=A.robotSettings)||void 0===M||null===(M=M.robot)||void 0===M?void 0:M.uid}),autoReplySettings:l()({},A.autoReplySettings),maxThreadCount:(null==i?void 0:i.maxThreadCount)||10}),console.log("agentObject:",k),e.next=17,(0,v.sE)(k);case 17:x=e.sent,console.log("updateAgent response:",x),200===x.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),W(x.data)):(c.yw.destroy(),c.yw.error(x.message)),e.next=30;break;case 22:if(o!==T.aZD){e.next=30;break}return X=l()(l()({},N),{},{serviceSettings:l()(l()({},N.serviceSettings),{},{topTip:(null==i?void 0:i.topTip)||"",showTopTip:j,welcomeTip:G,autoCloseMin:(null==i?void 0:i.autoCloseMin)||25,showLogo:(null==i?void 0:i.showLogo)||!0,quickFaqUids:null===(C=N.serviceSettings)||void 0===C||null===(C=C.quickFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),faqUids:null===(y=N.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==N||null===(Z=N.serviceSettings)||void 0===Z||null===(Z=Z.guessFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),hotFaqUids:null==N||null===(U=N.serviceSettings)||void 0===U||null===(U=U.hotFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),shortcutFaqUids:null==N||null===(L=N.serviceSettings)||void 0===L||null===(L=L.shortcutFaqs)||void 0===L?void 0:L.map((function(e){return e.uid}))}),leaveMsgSettings:l()(l()({},A.leaveMsgSettings),{},{leaveMsgTip:(null==i?void 0:i.leaveMsgTip)||"",worktimeUids:null===(V=A.leaveMsgSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),robotSettings:l()(l()({},A.robotSettings),{},{robotUid:null===(E=A.robotSettings)||void 0===E||null===(E=E.robot)||void 0===E?void 0:E.uid}),agentUids:N.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",X),e.next=27,(0,g.W5)(X);case 27:_=e.sent,console.log("updateWorkGroup response:",_),200===_.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),D(_.data)):(c.yw.destroy(),c.yw.error(_.message));case 30:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}();return(0,y.jsxs)(S.A,{form:t,onFinish:$,style:{marginLeft:"100px"},children:[(0,y.jsx)(b.Z,{name:"showTopTip",width:"md",label:"显示置顶语/公告",fieldProps:{onChange:function(e){var i,n;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==A||null===(i=A.serviceSettings)||void 0===i?void 0:i.showTopTip)),U(e.target.checked),e.target.checked)if(o===T._X4)t.setFieldValue("topTip",u(null==P||null===(n=P.serviceSettings)||void 0===n?void 0:n.topTip));else if(o===T.Njn){var s;t.setFieldValue("topTip",u(null==A||null===(s=A.serviceSettings)||void 0===s?void 0:s.topTip))}else if(o===T.aZD){var l;t.setFieldValue("topTip",u(null==N||null===(l=N.serviceSettings)||void 0===l?void 0:l.topTip))}}}}),j&&(0,y.jsx)(F.Z,{width:"md",name:"topTip",label:"置顶语"}),(0,y.jsx)(S.A.Item,{name:"welcomeTip",label:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),rules:[{required:!0,message:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}],children:(0,y.jsx)(x.Z,{placeholder:"welcomeTip content..",value:G,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e,o){O(e)}})}),o!=T._X4&&(0,y.jsx)(F.Z,{width:"md",name:"leaveMsgTip",label:"离线留言提示"}),(0,y.jsx)(q.Z,{width:"md",name:"autoCloseMin",label:"无新消息会话自动关闭时长(单位：分钟)",min:1}),o===T.Njn&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"1. 同时最大接待数量，超出数量默认进入排队队列"}),(0,y.jsx)("p",{children:"2. 0为所有访客默认进入排队队列，需要客服手动接入"}),(0,y.jsx)("p",{children:"3. 当接待数量小于最大接待数量时，会话自动接入，优先接入排队队列中会话"}),(0,y.jsx)(q.Z,{width:"md",name:"maxThreadCount",label:"同时最大接待数量",min:0})]}),(0,y.jsx)(b.Z,{name:"showLogo",width:"md",label:"显示Logo",tooltip:"只有付费会员可以去掉Logo",fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}}}]);