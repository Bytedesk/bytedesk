"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3340],{69753:function(me,I,e){var A=e(1413),p=e(67294),R=e(49495),c=e(89099),L=function(v,Q){return p.createElement(c.Z,(0,A.Z)((0,A.Z)({},v),{},{ref:Q,icon:R.Z}))},U=p.forwardRef(L);I.Z=U},58638:function(me,I,e){e.d(I,{Z:function(){return v}});var A=e(1413),p=e(67294),R={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},c=R,L=e(89099),U=function(C,K){return p.createElement(L.Z,(0,A.Z)((0,A.Z)({},C),{},{ref:K,icon:c}))},$=p.forwardRef(U),v=$},57546:function(me,I,e){e.d(I,{Z:function(){return v}});var A=e(1413),p=e(67294),R={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},c=R,L=e(89099),U=function(C,K){return p.createElement(L.Z,(0,A.Z)((0,A.Z)({},C),{},{ref:K,icon:c}))},$=p.forwardRef(U),v=$},91310:function(me,I,e){var A=e(15009),p=e.n(A),R=e(99289),c=e.n(R),L=e(85265),U=e(75658),$=e(98558),v=e(67294),Q=e(38302),C=e(73803),K=e(9361),y=e(39825),f=e(85615),s=e(85893),_=function(G){var ge=G.type,Z=G.open,k=G.onClose,re=(0,y.Z)(),de=re.isDarkMode,J=(0,C.Z)(),X=J.translateString,b=(0,v.useRef)(),d=(0,Q.j)(function(j){return j.currentKbase});(0,v.useEffect)(function(){var j;(j=b.current)===null||j===void 0||j.clearMessage()},[d]);var Ee=function(){var j=c()(p()().mark(function D(i){var h,g,B;return p()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("handleChat"),h=i[i.length-1],w.next=4,fetch("http://127.0.0.1:1001/visitor/api/v1/ai/ollama/chat?query=".concat(h==null?void 0:h.content,"&kbUid=").concat(d==null?void 0:d.uid),{method:"GET"});case 4:return g=w.sent,w.next=7,g.json();case 7:return B=w.sent,console.log("sendAiMessageStream response:",B),w.abrupt("return",new Response(B==null?void 0:B.data));case 10:case"end":return w.stop()}},D)}));return function(i){return j.apply(this,arguments)}}(),ue=function(){var j=c()(p()().mark(function D(i){return p()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:console.log("handleChatKeyword");case 1:case"end":return g.stop()}},D)}));return function(i){return j.apply(this,arguments)}}(),he=function(){var j=c()(p()().mark(function D(i){var h,g,B,V,w,le;return p()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return console.log("handleChatStream"),h=i[i.length-1],W.next=4,fetch("http://127.0.0.1:1001/visitor/api/v1/ai/ollama/chat/stream",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({query:h==null?void 0:h.content,kbUid:d==null?void 0:d.uid,stream:!0})});case 4:if(g=W.sent,!(!g.ok||!g.body)){W.next=7;break}throw new Error("HTTP error! status: ".concat(g.status));case 7:return B=g.body.getReader(),V=new TextDecoder("utf-8"),w=new TextEncoder,le=new ReadableStream({start:function(m){return c()(p()().mark(function q(){var x;return p()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:x=function(){B.read().then(function(oe){var Se=oe.done,Ae=oe.value;if(Se){m.close();return}var Ue=V.decode(Ae,{stream:!0}),Ke=Ue.replaceAll("data:","").replaceAll(`
`,"");m.enqueue(w.encode(Ke)),x()}).catch(function(oe){console.error("\u8BFB\u53D6\u6D41\u4E2D\u7684\u6570\u636E\u65F6\u53D1\u751F\u9519\u8BEF",oe),m.error(oe)})},x();case 2:case"end":return a.stop()}},q)}))()}}),W.abrupt("return",new Response(le));case 12:case"end":return W.stop()}},D)}));return function(i){return j.apply(this,arguments)}}();return(0,s.jsx)("div",{children:(0,s.jsx)(L.Z,{title:X(d==null?void 0:d.name),onClose:function(){k&&k()},open:Z,styles:{body:{padding:0}},children:(0,s.jsx)($.f6,{appearance:de?"dark":"light",theme:{algorithm:de?K.Z.darkAlgorithm:K.Z.defaultAlgorithm},children:(0,s.jsx)(U.j,{chatRef:b,helloMessage:"\u8BF7\u8F93\u5165\u4F60\u60F3\u95EE\u7684\u95EE\u9898",request:function(){var j=c()(p()().mark(function D(i){return p()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(console.log("messages:",i),!(i.length>0)){g.next=8;break}if(ge!==f.QPQ){g.next=6;break}return g.abrupt("return",he(i));case 6:if(ge!==f.jNC){g.next=8;break}return g.abrupt("return",ue(i));case 8:case"end":return g.stop()}},D)}));return function(D){return j.apply(this,arguments)}}()})})})})};I.Z=_},68256:function(me,I,e){var A=e(97857),p=e.n(A),R=e(5574),c=e.n(R),L=e(85576),U=e(67294),$=e(64082),v=e(64121),Q=e(27484),C=e.n(Q),K=e(85615),y=e(80049),f=e(38302),s=e(89102),_=e(85893),De=v.Z.Dragger,G=function(Z){var k=Z.type,re=Z.acceptType,de=Z.isModalOpen,J=Z.handleOk,X=Z.handleCancel,b=(0,f.j)(function(H){return H.currentKbase}),d=(0,s.v)(function(H){return H.currentCategory}),Ee=(0,U.useState)("\u5F53\u524D\u652F\u6301\u4E0A\u4F20pdf/txt/markdown/docx\u7B49"),ue=c()(Ee,2),he=ue[0],j=ue[1],D=(0,U.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:k,category_uid:(d==null?void 0:d.uid)==="all"?"":(d==null?void 0:d.uid)||"",kb_uid:(b==null?void 0:b.uid)||"",client:K.bVn}),i=c()(D,2),h=i[0],g=i[1],B=function(m){var q=C()(new Date).format("YYYYMMDDHHmmss")+"_"+m.name,x=new FormData;x.append("file",m),x.append("file_name",q),x.append("file_type",m.type),x.append("is_avatar","false"),x.append("kb_type",k),x.append("category_uid",(d==null?void 0:d.uid)==="all"?"":(d==null?void 0:d.uid)||""),x.append("kb_uid",(b==null?void 0:b.uid)||""),x.append("client",K.bVn),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(K.LA8)},body:x}).then(function(ae){return ae.json()}).then(function(ae){console.log("upload data:",ae),ae.code===200?(y.yw.destroy(),y.yw.success("".concat(q," \u4E0A\u4F20\u6210\u529F")),J()):(y.yw.destroy(),y.yw.error("".concat(q," \u4E0A\u4F20\u5931\u8D25")),X())})},V={name:"file",accept:re,action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(K.LA8)},data:h,showUploadList:!1,beforeUpload:function(m){console.log("beforeUpload",m);var q=C()(new Date).format("YYMMDDHHmmss")+"_"+m.name;h.file=m,h.file_name=q,h.file_type=m.type,h.kb_type=k,h.category_uid=(d==null?void 0:d.uid)==="all"?"":d==null?void 0:d.uid,h.kb_uid=b==null?void 0:b.uid,console.log("beforeUpload",h)},onChange:function(m){m.file.status==="uploading"&&y.yw.loading("".concat(m.file.name," \u4E0A\u4F20\u4E2D")),m.file.status==="done"?(console.log("response: ",m.file.response),m.file.response.code===200?(y.yw.destroy(),y.yw.success("".concat(m.file.name," \u4E0A\u4F20\u6210\u529F")),J()):(y.yw.destroy(),y.yw.error("".concat(m.file.name," \u4E0A\u4F20\u5931\u8D25")),X())):m.file.status==="error"&&(y.yw.error("".concat(m.file.name," \u4E0A\u4F20\u5931\u8D25")),X())},onDrop:function(m){console.log("Dropped files",m.dataTransfer.files),B(m.dataTransfer.files[0])}},w=(0,U.useState)(V),le=c()(w,2),Me=le[0],W=le[1];return(0,U.useEffect)(function(){k!=K.QPQ&&(V.accept="application/vnd.ms-excel",W(V),j("\u5F53\u524D\u652F\u6301\u4E0A\u4F20excel\u6587\u4EF6")),g(p()(p()({},h),{},{kb_type:k,category_uid:(d==null?void 0:d.uid)==="all"?"":d==null?void 0:d.uid,kb_uid:b==null?void 0:b.uid}))},[k,d,b]),(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(L.Z,{title:"\u4E0A\u4F20\u6587\u4EF6",open:de,onOk:J,onCancel:X,children:(0,_.jsxs)(De,p()(p()({},Me),{},{children:[(0,_.jsx)("p",{className:"ant-upload-drag-icon",children:(0,_.jsx)($.Z,{})}),(0,_.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u81F3\u6B64\u5904\u5B9E\u73B0\u4E0A\u4F20"}),(0,_.jsx)("p",{className:"ant-upload-hint",children:he})]}))})})};I.Z=G},73226:function(me,I,e){e.r(I),e.d(I,{default:function(){return Xe}});var A=e(77154),p=e(21612),R=e(97857),c=e.n(R),L=e(13769),U=e.n(L),$=e(15009),v=e.n($),Q=e(99289),C=e.n(Q),K=e(5574),y=e.n(K),f=e(80049),s=e(85615),_=e(86745);function De(F){return G.apply(this,arguments)}function G(){return G=C()(v()().mark(function F(l){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/v1/keyword/query/org",{method:"GET",params:c()(c()({},l),{},{client:s.bVn})}));case 1:case"end":return n.stop()}},F)})),G.apply(this,arguments)}function ge(F){return Z.apply(this,arguments)}function Z(){return Z=C()(v()().mark(function F(l){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/v1/keyword/create",{method:"POST",data:c()(c()({},l),{},{client:s.bVn})}));case 1:case"end":return n.stop()}},F)})),Z.apply(this,arguments)}function k(F){return re.apply(this,arguments)}function re(){return re=C()(v()().mark(function F(l){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/v1/keyword/update",{method:"POST",data:c()(c()({},l),{},{client:s.bVn})}));case 1:case"end":return n.stop()}},F)})),re.apply(this,arguments)}function de(F){return J.apply(this,arguments)}function J(){return J=C()(v()().mark(function F(l){return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/v1/keyword/delete",{method:"POST",data:c()(c()({},l),{},{client:s.bVn})}));case 1:case"end":return n.stop()}},F)})),J.apply(this,arguments)}var X=e(87676),b=e(51042),d=e(57546),Ee=e(58638),ue=e(69753),he=e(57482),j=e(86738),D=e(14726),i=e(67294),h=e(89102),g=e(38302),B=e(64082),V=e(34994),w=e(64317),le=e(5966),Me=e(90672),W=e(52688),H=e(85265),m=e(42075),q=e(43940),x=e(27484),ae=e.n(x),a=e(85893),Ve=function(l){var E=l.isEdit,n=l.keyword,ye=l.open,ie=l.onClose,Ce=l.onSubmit,Fe=V.A.useForm(),be=y()(Fe,1),te=be[0],ce=(0,X.u)(function(P){return P.currentOrg}),O=(0,g.j)(function(P){return P.currentKbase}),je=(0,h.v)(function(P){return P.categorySelectOptions}),Ie=(0,i.useState)(),se=y()(Ie,2),ee=se[0],T=se[1],ne=(0,i.useState)(s.PYi),we=y()(ne,2),Oe=we[0],Be=we[1],Re=(0,i.useState)(".png,.jpg,.jpeg"),Te=y()(Re,2),xe=Te[0],pe=Te[1],_e=(0,i.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:"type",category_uid:"",kb_uid:(O==null?void 0:O.uid)||"",client:s.bVn}),Pe=y()(_e,2),N=Pe[0],He=Pe[1];(0,i.useEffect)(function(){E?te.setFieldsValue({keyword:n==null?void 0:n.keywordList,reply:n==null?void 0:n.replyList,matchType:n==null?void 0:n.matchType,contentType:n==null?void 0:n.contentType,categoryUid:n==null?void 0:n.categoryUid,kbUid:O==null?void 0:O.uid,enabled:n==null?void 0:n.enabled}):te.resetFields()},[ye]);var Le=function(r){console.log("category selected ".concat(r)),T(r)},Ze=function(r){console.log("type selected ".concat(r)),Be(r),r===s.Qm?pe(".png,.jpg,.jpeg,.gif,.bmp"):r===s.tVi?pe(".mp4,.avi,.mov,.wmv"):r===s.Yu1?pe(".mp3,.wav,.flac"):r===s.Qn&&pe(".doc,.xls,.ppt,.pdf,.docx,.txt,.csv,.xlsx,.rtf,.zip,.7z,.tar,.gz,.rar,.iso")},ke=function(){console.log("handleSubmit"),te.validateFields().then(function(r){console.log(r),Ce(c()(c()(c()({},n),r),{},{keywordList:[r.keyword],replyList:[r.reply],kbUid:O==null?void 0:O.uid,orgUid:ce==null?void 0:ce.uid}))}).catch(function(r){console.log("Form errors:",r),f.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})},We=function(r){var o=ae()(new Date).format("YYYYMMDDHHmmss")+"_"+r.name,u=new FormData;u.append("file",r),u.append("file_name",o),u.append("file_type",r.type),u.append("is_avatar","false"),u.append("kb_type",s.YjS),u.append("category_uid",ee||""),u.append("kb_uid",(O==null?void 0:O.uid)||""),u.append("client",s.bVn),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},body:u}).then(function(t){return t.json()}).then(function(t){if(console.log("upload data:",t),t.code===200){var M=t.data;te.setFieldValue("reply",M),f.yw.destroy(),f.yw.success("".concat(o," \u4E0A\u4F20\u6210\u529F"))}else f.yw.destroy(),f.yw.error("".concat(o," \u4E0A\u4F20\u5931\u8D25"))})},Ye={name:"file",accept:xe,action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:N,showUploadList:!1,beforeUpload:function(r){console.log("beforeUpload",r);var o=ae()(new Date).format("YYMMDDHHmmss")+"_"+r.name;N.file=r,N.file_name=o,N.file_type=r.type,N.kb_type=s.YjS,N.category_uid=ee||"",N.kb_uid=O==null?void 0:O.uid,console.log("beforeUpload",N)},onChange:function(r){if(r.file.status==="uploading"&&f.yw.loading("".concat(r.file.name," \u4E0A\u4F20\u4E2D")),r.file.status==="done")if(console.log("response: ",r.file.response),r.file.response.code===200){var o=r.file.response.data;te.setFieldValue("reply",o),f.yw.destroy(),f.yw.success("".concat(r.file.name," \u4E0A\u4F20\u6210\u529F"))}else f.yw.destroy(),f.yw.error("".concat(r.file.name," \u4E0A\u4F20\u5931\u8D25"));else r.file.status==="error"&&f.yw.error("".concat(r.file.name," \u4E0A\u4F20\u5931\u8D25"))},onDrop:function(r){console.log("Dropped files",r.dataTransfer.files),We(r.dataTransfer.files[0])}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(H.Z,{title:E?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:ie,open:ye,extra:(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(D.ZP,{onClick:ie,children:"\u53D6\u6D88"}),(0,a.jsx)(D.ZP,{onClick:ke,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,a.jsxs)(V.A,{form:te,submitter:{render:function(){return null}},children:[(0,a.jsx)(w.Z,{label:"\u5339\u914D\u7C7B\u578B",name:"matchType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5339\u914D\u7C7B\u578B"}],options:[{label:"\u6A21\u7CCA\u5339\u914D",value:s.lEl},{label:"\u7CBE\u786E\u5339\u914D",value:s.TAc,disabled:!0},{label:"\u6B63\u5219\u5339\u914D",value:s.c7i,disabled:!0},{label:"\u5411\u91CF\u5339\u914D",value:s.sOn,disabled:!0},{label:"\u641C\u7D22\u5F15\u64CE\u5339\u914D",value:s.NDq,disabled:!0}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5339\u914D\u7C7B\u578B"}}),(0,a.jsx)(w.Z,{label:"\u5185\u5BB9\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:je,tooltip:"\u8BF7\u5148\uFF1A\u521B\u5EFA\u5206\u7C7B",fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:Le}}),(0,a.jsx)(w.Z,{label:"\u7C7B\u578B",name:"contentType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:s.PYi},{label:"\u56FE\u7247",value:s.Qm},{label:"\u89C6\u9891",value:s.tVi},{label:"\u97F3\u9891",value:s.Yu1},{label:"\u6587\u4EF6",value:s.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:Ze}}),(0,a.jsx)(le.Z,{label:"\u5173\u952E\u8BCD",name:"keyword",tooltip:"\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528 '|' \u5206\u5272",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF0C\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528 '|' \u5206\u5272",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF0C\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528 '|' \u5206\u5272 "}]}),(0,a.jsx)(Me.Z,{label:"\u56DE\u590D",name:"reply"}),(0,a.jsx)(W.Z,{label:"\u542F\u7528",name:"enabled",fieldProps:{defaultValue:!0}}),Oe!=s.PYi&&(0,a.jsxs)(q.Z,c()(c()({},Ye),{},{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(B.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"})]}))]})})})},oe=Ve,Se=e(91310),Ae=e(68256),Ue=["current"],Ke=function(){var l=(0,_.useIntl)(),E=(0,i.useRef)(),n=(0,i.useState)(!0),ye=y()(n,2),ie=ye[0],Ce=ye[1],Fe=(0,i.useState)(),be=y()(Fe,2),te=be[0],ce=be[1],O=(0,i.useState)(!1),je=y()(O,2),Ie=je[0],se=je[1],ee=(0,X.u)(function(o){return o.currentOrg}),T=(0,g.j)(function(o){return o.currentKbase}),ne=(0,h.v)(function(o){return o.currentCategory}),we=(0,i.useState)(!1),Oe=y()(we,2),Be=Oe[0],Re=Oe[1],Te=(0,i.useState)(!1),xe=y()(Te,2),pe=xe[0],_e=xe[1],Pe=function(){var o=C()(v()().mark(function u(t){var M;return v()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return console.log(t),z.next=3,de(t);case 3:M=z.sent,console.log("delete response:",M),M.code===200?(E==null||E.current.reload(),f.yw.success(l.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):f.yw.error(l.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return z.stop()}},u)}));return function(t){return o.apply(this,arguments)}}(),N=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,a.jsx)(_.FormattedMessage,{id:"keyword",defaultMessage:"Keyword"}),dataIndex:"keywordList",copyable:!0},{title:(0,a.jsx)(_.FormattedMessage,{id:"reply",defaultMessage:"Reply"}),dataIndex:"replyList",copyable:!0},{title:(0,a.jsx)(_.FormattedMessage,{id:"matchType",defaultMessage:"MatchType"}),dataIndex:"matchType",width:80,render:function(u,t){return l.formatMessage({id:t==null?void 0:t.matchType,defaultMessage:t==null?void 0:t.matchType})}},{title:(0,a.jsx)(_.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"contentType",hideInSearch:!0,width:50,render:function(u,t){return(0,a.jsx)(a.Fragment,{children:l.formatMessage({id:t==null?void 0:t.contentType,defaultMessage:t==null?void 0:t.contentType})})}},{title:(0,a.jsx)(_.FormattedMessage,{id:"enabled",defaultMessage:"Enabled"}),dataIndex:"enabled",width:80,render:function(u,t){return(0,a.jsx)(a.Fragment,{children:t!=null&&t.enabled?l.formatMessage({id:"yes",defaultMessage:"Yes"}):l.formatMessage({id:"no",defaultMessage:"No"})})}},{title:(0,a.jsx)(_.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:l.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(u,t,M,Y){return[(0,a.jsx)("a",{onClick:function(){Le(t)},children:l.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,a.jsx)(j.Z,{title:l.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(l.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(t==null?void 0:t.keywordList,"\u3011\uFF1F"),onConfirm:function(){return Pe(t)},okText:l.formatMessage({id:"ok"}),cancelText:l.formatMessage({id:"cancel"}),children:(0,a.jsx)(D.ZP,{size:"small",type:"link",danger:!0,children:l.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}],He=function(){ce(void 0),Ce(!1),se(!0)},Le=function(u){ce(u),Ce(!0),se(!0)},Ze=function(){var o=C()(v()().mark(function u(t){var M,Y;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(console.log("handleSubmitDrawer",t),ie?f.yw.loading(l.formatMessage({id:"updating"})):f.yw.loading(l.formatMessage({id:"creating"})),!ie){S.next=8;break}return S.next=5,k(t);case 5:S.t0=S.sent,S.next=11;break;case 8:return S.next=10,ge(t);case 10:S.t0=S.sent;case 11:M=S.t0,console.log("createKeyword response:",t,M),M.code===200?(f.yw.destroy(),f.yw.success(l.formatMessage({id:"create.success",defaultMessage:"create success"})),se(!1),(Y=E.current)===null||Y===void 0||Y.reloadAndRest()):(f.yw.destroy(),f.yw.error(M.message));case 14:case"end":return S.stop()}},u)}));return function(t){return o.apply(this,arguments)}}(),ke=function(){var o=C()(v()().mark(function u(){return v()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:_e(!0);case 1:case"end":return M.stop()}},u)}));return function(){return o.apply(this,arguments)}}(),We=function(){var o=C()(v()().mark(function u(){var t;return v()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:t=localStorage.getItem(s.LA8),window.open("/api/v1/keyword/export?categoryUid="+(ne==null?void 0:ne.uid)+"&kbUid="+(T==null?void 0:T.uid)+"&orgUid="+(ee==null?void 0:ee.uid)+"&pageNumber=0&pageSize=20&accessToken="+t);case 2:case"end":return Y.stop()}},u)}));return function(){return o.apply(this,arguments)}}();(0,i.useEffect)(function(){var o;(o=E.current)===null||o===void 0||o.reloadAndRest()},[T,ne]);var Ye=function(){console.log("handleUploadDragSubmit"),_e(!1),E==null||E.current.reload()},P=function(){console.log("handleUploadDragCancel"),_e(!1),E==null||E.current.reload()},r=(0,i.useMemo)(function(){return(T==null?void 0:T.type)===s.jNC?(T==null?void 0:T.uid)==="":!0},[T]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(he.Z,{columns:N,actionRef:E,cardBordered:!0,request:function(){var o=C()(v()().mark(function u(t,M,Y){var z,S,$e,ve;return v()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return console.log("request:",t,M,Y),f.yw.loading(l.formatMessage({id:"loading",defaultMessage:"Loading"})),z=t.current,S=U()(t,Ue),$e=c()({pageNumber:t.current-1,categoryUid:ne.uid==="all"?"":ne.uid,kbUid:T==null?void 0:T.uid,orgUid:ee==null?void 0:ee.uid},S),fe.next=6,De($e);case 6:return ve=fe.sent,console.log("getAllKeywords response:",$e,ve),f.yw.destroy(),ve.code===200||f.yw.error(ve.message),fe.abrupt("return",{data:ve.data.content,success:!0,total:ve.data.totalElements});case 11:case"end":return fe.stop()}},u)}));return function(u,t,M){return o.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(u){console.log("page:",u)}},dateFormatter:"string",headerTitle:l.formatMessage({id:"menu.knowledge.keyword",defaultMessage:"KEYWORD"}),toolBarRender:function(){return[(0,a.jsx)(D.ZP,{icon:(0,a.jsx)(b.Z,{}),type:"primary",onClick:He,disabled:r,children:l.formatMessage({id:"create",defaultMessage:"Create"})},"create"),(0,a.jsx)(D.ZP,{icon:(0,a.jsx)(d.Z,{}),type:"primary",onClick:ke,disabled:r,children:l.formatMessage({id:"import",defaultMessage:"Import"})},"import"),(0,a.jsx)(D.ZP,{icon:(0,a.jsx)(Ee.Z,{}),type:"primary",onClick:We,disabled:r,children:l.formatMessage({id:"export",defaultMessage:"Export"})},"export"),(0,a.jsx)(D.ZP,{icon:(0,a.jsx)(ue.Z,{}),type:"link",onClick:function(){window.open("https://www.weiyuai.cn/download/excel/keyword.xlsx")},children:l.formatMessage({id:"download.template",defaultMessage:"Download Template"})},"download")]}}),(0,a.jsx)(oe,{isEdit:ie,open:Ie,keyword:te,onClose:function(){return se(!1)},onSubmit:Ze}),(0,a.jsx)(Ae.Z,{type:s.jNC,acceptType:".xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",isModalOpen:pe,handleOk:Ye,handleCancel:P}),(0,a.jsx)(Se.Z,{type:s.jNC,open:Be,onClose:function(){return Re(!1)}})]})},Ne=Ke,ze=e(52670),Qe=p.Z.Sider,Ge=p.Z.Content,Je=function(){var l=(0,A.Z)(),E=l.leftSiderStyle,n=l.contentStyle;return(0,a.jsx)("div",{children:(0,a.jsxs)(p.Z,{children:[(0,a.jsx)(Qe,{style:E,children:(0,a.jsx)(ze.Z,{type:s.jNC})}),(0,a.jsx)(p.Z,{children:(0,a.jsx)(Ge,{style:n,children:(0,a.jsx)(Ne,{})})})]})})},Xe=Je}}]);
