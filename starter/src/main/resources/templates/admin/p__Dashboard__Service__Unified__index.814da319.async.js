"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[331],{5651:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(11757),a=t(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},i=t(54183),s=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:o}))};var c=a.forwardRef(s)},71529:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(11757),a=t(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},i=t(54183),s=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:o}))};var c=a.forwardRef(s)},82669:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(11757),a=t(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},i=t(54183),s=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:o}))};var c=a.forwardRef(s)},59908:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(11757),a=t(44194),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=t(54183),s=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:o}))};var c=a.forwardRef(s)},85954:function(e,n,t){var r=t(17082),a=t(73457),o=t(82308),i=t(99749),s=t(44194),c=t(69088),l=t(87413),u=t(31549),d=["options","fieldProps","proFieldProps","valueEnum"],f=s.forwardRef((function(e,n){var t=e.options,i=e.fieldProps,s=e.proFieldProps,c=e.valueEnum,f=(0,a.Z)(e,d);return(0,u.jsx)(l.Z,(0,r.Z)({ref:n,valueType:"checkbox",valueEnum:(0,o.h)(c,void 0),fieldProps:(0,r.Z)({options:t},i),lightProps:(0,r.Z)({labelFormatter:function(){return(0,u.jsx)(l.Z,(0,r.Z)({ref:n,valueType:"checkbox",mode:"read",valueEnum:(0,o.h)(c,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:t},i),proFieldProps:s},f))}},f.lightProps),proFieldProps:s},f))})),p=s.forwardRef((function(e,n){var t=e.fieldProps,a=e.children;return(0,u.jsx)(i.Z,(0,r.Z)((0,r.Z)({ref:n},t),{},{children:a}))})),m=(0,c.G)(p,{valuePropName:"checked"});m.Group=f,n.Z=m},48708:function(e,n,t){var r=t(17082),a=t(73457),o=t(44194),i=t(87413),s=t(31549),c=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],l=o.forwardRef((function(e,n){var t=e.fieldProps,o=e.unCheckedChildren,l=e.checkedChildren,u=e.proFieldProps,d=(0,a.Z)(e,c);return(0,s.jsx)(i.Z,(0,r.Z)({valueType:"switch",fieldProps:(0,r.Z)({unCheckedChildren:o,checkedChildren:l},t),ref:n,valuePropName:"checked",proFieldProps:u,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},d))}));n.Z=l},32350:function(e,n,t){var r=t(17082),a=t(73457),o=t(44194),i=t(87413),s=t(31549),c=["fieldProps","proFieldProps"],l=function(e,n){var t=e.fieldProps,o=e.proFieldProps,l=(0,a.Z)(e,c);return(0,s.jsx)(i.Z,(0,r.Z)({ref:n,valueType:"textarea",fieldProps:t,proFieldProps:o},l))};n.Z=o.forwardRef(l)},51990:function(e,n,t){var r=t(73193),a=t.n(r),o=t(84176),i=t.n(o),s=t(86803),c=t(23864),l=t(44521),u=t(55735),d=t(30921),f=t(83905),p=(t(26286),t(28977)),m=t.n(p),g=t(44194),h=t(31549),y=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];n.Z=function(e){var n=e.placeholder,t=e.defaultValue,r=e.value,o=e.style,p=e.toolbarKeys,v=e.onChange,w=(e.options,i()(e,y)),x=((0,d.useIntl)(),(0,c.Z)().isDarkMode),b=(0,g.useRef)(null),k=(0,g.useRef)(null);return(0,g.useEffect)((function(){if(b.current){if(!k.current){var e=new f.cW({element:b.current,theme:x?"dark":"light",placeholder:n,content:t,toolbarKeys:p,image:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(u.LA8)},uploader:function(e,n,t,r){console.log("uploader:",e,n,t,r);var o=m()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,i=new FormData;return i.append("file",e),i.append("file_name",o),i.append("file_type",e.type),i.append("is_avatar","false"),i.append("kb_type",u.bE7),i.append("category_uid",""),i.append("kb_uid",""),i.append("client",u.bVn),new Promise((function(e,r){fetch(n,{method:"POST",headers:a()({Accept:"application/json"},t),body:i}).then((function(e){return e.json()})).then((function(n){if(console.log("upload data:",n),200===n.code){s.yw.destroy(),s.yw.success("".concat(o," 上传成功"));var t={errorCode:0,data:{src:n.data.fileUrl,alt:o}};e(t)}else s.yw.destroy(),s.yw.error("".concat(o," 上传失败"))})).catch((function(e){r(e)}))}))}},video:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(u.LA8)},uploader:function(e,n,t,r){console.log("uploader:",e,n,t,r);var o=m()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,i=new FormData;return i.append("file",e),i.append("file_name",o),i.append("file_type",e.type),i.append("is_avatar","false"),i.append("kb_type",u.bE7),i.append("category_uid",""),i.append("kb_uid",""),i.append("client",u.bVn),new Promise((function(e,r){fetch(n,{method:"POST",headers:a()({Accept:"application/json"},t),body:i}).then((function(e){return e.json()})).then((function(n){if(console.log("upload data:",n),200===n.code){s.yw.destroy(),s.yw.success("".concat(o," 上传成功"));var t={errorCode:0,data:{src:n.data.fileUrl,poster:"https://www.weiyuai.cn/avatars/video_poster.png"}};e(t)}else s.yw.destroy(),s.yw.error("".concat(o," 上传失败"))})).catch((function(e){r(e)}))}))}},attachment:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(u.LA8)},uploader:function(e,n,t,r){console.log("uploader:",e,n,t,r);var o=m()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,i=new FormData;return i.append("file",e),i.append("file_name",o),i.append("file_type",e.type),i.append("is_avatar","false"),i.append("kb_type",u.bE7),i.append("category_uid",""),i.append("kb_uid",""),i.append("client",u.bVn),new Promise((function(e,r){fetch(n,{method:"POST",headers:a()({Accept:"application/json"},t),body:i}).then((function(e){return e.json()})).then((function(n){if(console.log("upload data:",n),200===n.code){s.yw.destroy(),s.yw.success("".concat(o," 上传成功"));var t={errorCode:0,data:{href:n.data.fileUrl,fileName:o}};e(t)}else s.yw.destroy(),s.yw.error("".concat(o," 上传失败"))})).catch((function(e){r(e)}))}))}},onChange:function(e){"function"==typeof v&&v(e.getHtml(),e.getMarkdown())}});k.current=e}return function(){k.current&&(k.current.destroy(),k.current=null)}}}),[]),(0,g.useEffect)((function(){k.current&&r!==k.current.getHtml()&&k.current.setContent(r||"")}),[r]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",a()(a()({ref:b},w),{},{style:a()({height:"100%"},o)}))})}},82211:function(e,n,t){t(44194);var r=t(8247),a=t(45178),o=t(5724),i=t(54518),s=t(7785),c=t(42909),l=t(53038),u=t(81360),d=t(99980),f=t(66329),p=t(30634),m=t(31549);n.Z=function(e){var n=e.type,t=[{key:"web",label:"Web",children:(0,m.jsx)(p.Z,{type:n})},{key:"react",label:"React",children:(0,m.jsx)(c.Z,{type:n})},{key:"vue",label:"Vue",children:(0,m.jsx)(f.Z,{type:n})},{key:"svelte",label:"Svelte",children:(0,m.jsx)(u.Z,{type:n})},{key:"vanilla",label:"Vanilla",children:(0,m.jsx)(d.Z,{type:n})},{key:"ios",label:"iOS",children:(0,m.jsx)(a.Z,{type:n})},{key:"android",label:"Android",children:(0,m.jsx)(s.Z,{type:n})},{key:"uniapp",label:"Uniapp",children:(0,m.jsx)(o.Z,{type:n})},{key:"flutter",label:"Flutter",children:(0,m.jsx)(i.Z,{type:n})}];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{type:n}),(0,m.jsx)(r.Z,{tabPosition:"left",items:t})]})}},53038:function(e,n,t){var r=t(30921),a=t(31549);n.Z=function(e){e.type,(0,r.useIntl)();return(0,a.jsx)(a.Fragment,{})}},6631:function(e,n,t){t.d(n,{G:function(){return f}});var r=t(73193),a=t.n(r),o=(t(44194),t(30348)),i=t(55735),s=t(28977),c=t.n(s),l=t(86803),u=t(44521),d=t(31549),f=function(e){var n=e.children,t=e.onSuccess,r=e.onError,s={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:i.IrL,category_uid:"",kb_uid:"",client:i.bVn},f={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(i.LA8)},data:s,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var n=c()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;s.file=e,s.file_name=n,s.file_type=e.type,console.log("beforeUpload",s)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var n=e.file.response.data.fileUrl;t(n),l.yw.success("".concat(e.file.name," 上传成功"))}else r(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),r(e.file))}};return(0,d.jsx)(o.Z,a()(a()({},f),{},{children:n}))}},62168:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var r=t(75574),a=t(44194),o=t(90819),i=t.n(o),s=t(89933),c=t.n(s),l=t(45332),u=t.n(l),d=t(86803),f=t(24170),p=t(73193),m=t.n(p),g=t(55735),h=t(30921);function y(e){return v.apply(this,arguments)}function v(){return(v=c()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/unified/query/org",{method:"GET",params:m()(m()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return x=c()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/unified/create",{method:"POST",data:m()(m()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function b(e){return k.apply(this,arguments)}function k(){return(k=c()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/unified/update",{method:"POST",data:m()(m()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return j.apply(this,arguments)}function j(){return(j=c()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/unified/update/avatar",{method:"POST",data:m()(m()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return C.apply(this,arguments)}function C(){return C=c()(i()().mark((function e(n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/unified/delete",{method:"POST",data:m()(m()({},n),{},{client:g.bVn})}));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var P=t(23864),U=t(1902),F=t(40612),S=t(60795),_=t(15722),O=t(82669),A=t(53530),E=t(27487),V=t(75365),L=t(9452),R=t(84288),D=t(76750),I=t(95490),z=t(69169),T=t(4499),H=t(84881),Y=t(31549),N=function(e){var n=e.open,t=e.onClose,r=e.onSubmit,o=z.A.useForm(),i=u()(o,1)[0],s=(0,D.Z)().translateString,c=(0,F.u)((function(e){return e.currentOrg})),l=(0,I.$)((function(e){return e.workgroupResult})),d=(0,a.useState)([]),f=u()(d,2),p=f[0],m=f[1];return(0,Y.jsx)("div",{children:(0,Y.jsx)(A.Z,{title:"创建统一入口",open:n,forceRender:!0,onOk:function(){console.log("handleOk"),i.validateFields().then((function(e){console.log("form values:",e);var n={nickname:i.getFieldValue("nickname"),workgroupUids:i.getFieldValue("workgroups"),type:g.vPY,orgUid:null==c?void 0:c.uid};console.log("unified:",n),r(n)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){console.log("handleCancel"),t()},children:(0,Y.jsxs)(z.A,{form:i,name:"wgForm",submitter:{render:function(e,n){return(0,Y.jsx)(Y.Fragment,{})}},children:[(0,Y.jsx)(T.Z,{label:"统一入口昵称",name:"nickname",rules:[{required:!0,message:"请输入昵称!"}]}),(0,Y.jsx)(H.Z,{name:"workgroups",label:"成员",options:l.data.content.map((function(e){return{value:e.uid,label:s(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"请选择成员",value:p,onChange:function(e){console.log("selected ".concat(e)),m(e)}}})]})})})},q=function(){var e=(0,h.useIntl)(),n=(0,a.useRef)(!1),t=(0,D.Z)().translateStringTranct,r=(0,P.Z)().isDarkMode,o=(0,a.useState)(!1),s=u()(o,2),l=s[0],p=s[1],m=(0,F.u)((function(e){return e.currentOrg})),g=(0,U.E)((function(e){return e.setAgentResult})),v=(0,S.F)((function(e){return{unifiedResult:e.unifiedResult,currentUnified:e.currentUnified,setUnifiedResult:e.setUnifiedResult,insertUnified:e.insertUnified,setCurrentUnified:e.setCurrentUnified,deleteCurrentUnified:e.deleteCurrentUnified}})),x=v.unifiedResult,b=v.currentUnified,k=v.setUnifiedResult,Z=v.insertUnified,j=v.setCurrentUnified,C=v.deleteCurrentUnified,I=A.Z.useModal(),z=u()(I,2),T=z[0],H=z[1],q=function(){var n=c()(i()().mark((function n(t){var r;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("delete unified",t),d.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),n.next=4,M(t);case 4:r=n.sent,console.log("delete unified response",r),200===r.code?(d.yw.destroy(),d.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),C(t.uid)):(d.yw.destroy(),d.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),B=function(){var e=c()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={pageNumber:0,pageSize:50,orgUid:null==m?void 0:m.uid},e.next=3,(0,f._t)(n);case 3:t=e.sent,console.log("queryAgentsByOrg: ",t),200===t.code?g(t):d.yw.error(t.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=c()(i()().mark((function e(){var t,r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,d.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==m?void 0:m.uid},e.next=8,y(t);case 8:r=e.sent,console.log("getUnifieds",r),200===r.code?(d.yw.destroy(),k(r),null===b&&(null==x||null===(a=x.data)||void 0===a||null===(a=a.content)||void 0===a?void 0:a.length)>0&&j(x.data.content[0])):(d.yw.destroy(),d.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){$(),B()}),[]);var W=function(){var n=c()(i()().mark((function n(t){var r;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("handleSave",t),d.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating"})),n.next=4,w(t);case 4:r=n.sent,console.log("create unified:",r),200===r.code?(d.yw.destroy(),d.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),p(!1),Z(r.data)):(d.yw.destroy(),p(!1),d.yw.error(r.message));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(E.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,Y.jsx)(V.ZP,{size:"small",type:"primary",icon:(0,Y.jsx)(O.Z,{}),onClick:function(){p(!0)},children:e.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,Y.jsx)(V.ZP,{size:"small",onClick:$,children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,Y.jsx)(V.ZP,{onClick:function(){return function(n){T.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,Y.jsx)(_.Z,{}),content:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(n.nickname,"】？"),onOk:function(){q(n)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(b)},size:"small",danger:!0,disabled:b&&""===b.uid,children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,Y.jsx)(L.Z,{itemLayout:"horizontal",dataSource:x.data.content,renderItem:function(e,n){return(0,Y.jsx)(L.Z.Item,{style:b.uid===e.uid?{backgroundColor:r?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){j(e)},children:(0,Y.jsx)(L.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,Y.jsx)(R.C,{src:e.avatar}),title:(0,Y.jsx)(Y.Fragment,{children:t(e.nickname)}),description:t(e.description)})},e.uid)}}),(0,Y.jsx)(N,{open:l,onClose:function(){p(!1)},onSubmit:W}),H]})},B=t(8247),$=t(32350),W=t(59908),G=t(6631),K=function(){var e,n,t=z.A.useForm(),r=u()(t,1)[0],o=(0,h.useIntl)(),s=(0,D.Z)().translateString,l=(0,I.$)((function(e){return e.workgroupResult})),f=(0,S.F)((function(e){return{currentUnified:e.currentUnified,setCurrentUnified:e.setCurrentUnified}})),p=f.currentUnified,g=f.setCurrentUnified,y=(0,a.useState)((null===(e=p.workgroups)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]),v=u()(y,2),w=v[0],x=v[1],k=(0,a.useState)(""),j=u()(k,2),M=j[0],C=j[1];(0,a.useEffect)((function(){if(p){var e;r.setFieldValue("nickname",s(null==p?void 0:p.nickname)),r.setFieldValue("description",s(null==p?void 0:p.description));var n=[];null===(e=p.workgroups)||void 0===e||e.forEach((function(e){n.push(e.uid)})),x(n)}}),[p]),(0,a.useEffect)((function(){p.workgroups&&(x(p.workgroups.map((function(e){return e.uid}))),r.setFieldsValue({workgroups:p.workgroups.map((function(e){return e.uid}))}))}),[p]);var P=function(){var e=c()(i()().mark((function e(n){var t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUploadSuccess:",n),C(n),t=m()(m()({},p),{},{avatar:n}),e.next=5,Z(t);case 5:r=e.sent,console.log("updateAvatar response:",r),200===r.code?(d.yw.success(o.formatMessage({id:"update.success"})),g(r.data)):(d.yw.destroy(),d.yw.error(r.message));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=c()(i()().mark((function e(n){var t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish",n),d.yw.loading(o.formatMessage({id:"updating"})),t=m()(m()(m()({},p),n),{},{avatar:M,workgroupUids:w}),console.log("unifiedObject:",t),e.next=6,b(t);case 6:r=e.sent,console.log("updateWorkGroup response:",r),200===r.code?(d.yw.destroy(),d.yw.success(o.formatMessage({id:"update.success"})),g(r.data)):(d.yw.destroy(),d.yw.error(r.message));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){C(null==p?void 0:p.avatar)}),[p]),(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(z.A,{form:r,style:{marginLeft:"20px"},onFinish:U,children:[(0,Y.jsx)(z.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:o.formatMessage({id:"avatar"}),children:(0,Y.jsxs)(G.G,{onSuccess:P,onError:function(e){console.log("handleUploadError:",e),d.yw.error(e)},children:[(0,Y.jsx)(R.C,{src:M}),(0,Y.jsx)(V.ZP,{icon:(0,Y.jsx)(W.Z,{}),children:o.formatMessage({id:"upload"})})]},"avatar")}),(0,Y.jsx)(T.Z,{width:"md",name:"nickname",label:o.formatMessage({id:"nickname"}),rules:[{required:!0,message:o.formatMessage({id:"please.input.nickname"})}]}),(0,Y.jsx)("span",{children:"支持展示所有技能组，提供给用户选择"}),(0,Y.jsx)(H.Z,{name:"workgroups",label:o.formatMessage({id:"members"}),tooltip:o.formatMessage({id:"please.create.workgroups.tooltip"}),width:"md",initialValue:null===(n=p.workgroups)||void 0===n?void 0:n.map((function(e){return e.uid})),options:l.data.content.map((function(e){return{value:e.uid,label:s(e.nickname)}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:o.formatMessage({id:"please.select.members"}),onChange:function(e){console.log("selected ".concat(e)),x(e)}},rules:[{required:!0,message:o.formatMessage({id:"please.select.members"})}]}),(0,Y.jsx)($.Z,{width:"md",name:"description",label:o.formatMessage({id:"description"}),rules:[{required:!0,message:o.formatMessage({id:"please.input.description"})}]})]})})},Q=t(82211),J=t(65461),X=t(51990),ee=function(e){e.type;var n=z.A.useForm(),t=u()(n,1)[0],r=(0,h.useIntl)(),o=((0,D.Z)().translateString,(0,a.useState)(!1)),s=u()(o,2),l=s[0],f=(s[1],(0,F.u)((function(e){return e.currentOrg})),(0,S.F)((function(e){return{currentUnified:e.currentUnified,setCurrentUnified:e.setCurrentUnified}}))),p=f.currentUnified,g=f.setCurrentUnified,y=(0,a.useState)(""),v=u()(y,2),w=v[0],x=v[1],k=(0,a.useState)(""),Z=u()(k,2),j=(Z[0],Z[1],(0,a.useState)("")),M=u()(j,2);M[0],M[1];(0,a.useEffect)((function(){}),[p]);var C=function(){var e=c()(i()().mark((function e(n){var t,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",n," showTopTip:",l),d.yw.loading(r.formatMessage({id:"updating"})),t=m()(m()({},p),{},{workgroupUids:p.agents.map((function(e){return e.uid}))}),console.log("unifiedObject:",t),e.next=6,b(t);case 6:a=e.sent,console.log("updateWorkGroup response:",a),200===a.code?(d.yw.destroy(),d.yw.success(r.formatMessage({id:"update.success"})),g(a.data)):(d.yw.destroy(),d.yw.error(a.message));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Y.jsx)(z.A,{form:t,onFinish:C,style:{marginLeft:"20px"},children:(0,Y.jsx)(z.A.Item,{name:"welcomeTip",label:r.formatMessage({id:"agent.settings.welcome.tip"}),tooltip:r.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:r.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,Y.jsx)(X.Z,{placeholder:r.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:w,toolbarKeys:(0,J.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){x(e)}})})})},ne=function(){var e=(0,h.useIntl)(),n=(0,a.useMemo)((function(){return[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,Y.jsx)(K,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,Y.jsx)(ee,{type:g.RB4})},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,Y.jsx)(Q.Z,{type:g.RB4})}]}),[e]);return(0,Y.jsx)(B.Z,{defaultActiveKey:"basic",items:n})},te=t(96865),re=r.Z.Sider,ae=r.Z.Content,oe=function(){var e=(0,te.Z)(),n=e.leftSiderStyle,t=e.leftSiderWidth;return(0,Y.jsxs)(r.Z,{children:[(0,Y.jsx)(re,{width:t,style:n,children:(0,Y.jsx)(q,{})}),(0,Y.jsx)(r.Z,{children:(0,Y.jsx)(ae,{children:(0,Y.jsx)(ne,{})})})]})}},53530:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(18960),a=t(31695),o=t(27710),i=t(44194),s=t(51865),c=t.n(s),l=t(24255),u=t(43037),d=t(37167),f=t(30829),p=t(78660),m=t(59348),g=t(6750),h=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t};var y=(0,u.i)((e=>{const{prefixCls:n,className:t,closeIcon:r,closable:a,type:o,title:s,children:u,footer:y}=e,v=h(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:w}=i.useContext(d.E_),x=w(),b=n||w("modal"),k=(0,f.Z)(x),[Z,j,M]=(0,g.ZP)(b,k),C=`${b}-confirm`;let P={};return P=o?{closable:null!=a&&a,title:"",footer:"",children:i.createElement(p.O,Object.assign({},e,{prefixCls:b,confirmPrefixCls:C,rootPrefixCls:x,content:u}))}:{closable:null==a||a,title:s,footer:null!==y&&i.createElement(m.$,Object.assign({},e)),children:u},Z(i.createElement(l.s,Object.assign({prefixCls:b,className:c()(j,`${b}-pure-panel`,o&&C,o&&`${C}-${o}`,t,M,k)},v,{closeIcon:(0,m.b)(b,r),closable:a},P)))})),v=t(75807);function w(e){return(0,r.ZP)((0,r.uW)(e))}const x=o.Z;x.useModal=v.Z,x.info=function(e){return(0,r.ZP)((0,r.cw)(e))},x.success=function(e){return(0,r.ZP)((0,r.vq)(e))},x.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},x.warning=w,x.warn=w,x.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},x.destroyAll=function(){for(;a.Z.length;){const e=a.Z.pop();e&&e()}},x.config=r.ai,x._InternalPanelDoNotUseOrYouWillBeFired=y;var b=x}}]);