"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7489],{62736:function(e,t,a){a.r(t);var r=a(30921),n=a(8247),u=a(48875),s=a(15678),i=a(31549);t.default=function(){var e=[{key:"list",label:(0,i.jsx)(r.FormattedMessage,{id:"queue.tab.list"}),children:(0,i.jsx)(u.Z,{})},{key:"member",label:(0,i.jsx)(r.FormattedMessage,{id:"queue.tab.member"}),children:(0,i.jsx)(s.default,{})}];return(0,i.jsx)(n.Z,{defaultActiveKey:"list",items:e})}},48875:function(e,t,a){a.d(t,{Z:function(){return F}});var r=a(73193),n=a.n(r),u=a(84176),s=a.n(u),i=a(90819),d=a.n(i),o=a(89933),c=a.n(o),l=a(45332),m=a.n(l),g=a(86803),p=a(55735),x=a(30921);function h(e){return f.apply(this,arguments)}function f(){return(f=c()(d()().mark((function e(t){return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.request)("/api/v1/queue/query/org",{method:"GET",params:n()(n()({},t),{},{client:p.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=a(76750),v=a(40612),q=a(44521),j=a(11090),y=a(72381),M=a(75365),S=a(44194),w=a(31549),I=["current","pageSize"],F=function(){var e=(0,x.useIntl)(),t=(0,S.useRef)(),a=((0,b.Z)().translateString,(0,S.useState)(1)),r=m()(a,2),u=r[0],i=r[1],o=(0,S.useState)(10),l=m()(o,2),f=l[0],F=l[1],k=(0,v.u)((function(e){return e.currentOrg})),N=["index","nickname","type","day","currentNumber","waitingNumber","servingNumber","servedNumber","avgWaitTime"],T=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.nickname"}),dataIndex:"nickname",copyable:!0},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.type"}),dataIndex:"type",hideInSearch:!0,render:function(e,t){switch(t.type){case p.VXt:return(0,w.jsx)(x.FormattedMessage,{id:"queue.type.workgroup"});case p.BOH:return(0,w.jsx)(x.FormattedMessage,{id:"queue.type.agent"});case p.aOw:return(0,w.jsx)(x.FormattedMessage,{id:"queue.type.robot"});default:return(0,w.jsx)(x.FormattedMessage,{id:"queue.type.unknown"})}}},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.day"}),dataIndex:"day",hideInSearch:!0},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.status"}),dataIndex:"status",hideInSearch:!0,render:function(e,t){switch(t.status){case"ACTIVE":return(0,w.jsx)(x.FormattedMessage,{id:"queue.status.active"});case"PAUSED":return(0,w.jsx)(x.FormattedMessage,{id:"queue.status.paused"});case"CLOSED":return(0,w.jsx)(x.FormattedMessage,{id:"queue.status.closed"});case"MAINTENANCE":return(0,w.jsx)(x.FormattedMessage,{id:"queue.status.maintenance"});default:return(0,w.jsx)(x.FormattedMessage,{id:"queue.status.unknown"})}}},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.currentNumber"}),dataIndex:"currentNumber",hideInSearch:!0},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.waitingNumber"}),dataIndex:"waitingNumber",hideInSearch:!0,render:function(t,a){return"".concat(a.waitingNumber).concat(e.formatMessage({id:"queue.number.unit"}))}},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.servingNumber"}),dataIndex:"servingNumber",hideInSearch:!0},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.servedNumber"}),dataIndex:"servedNumber",hideInSearch:!0},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.avgWaitTime"}),dataIndex:"avgWaitTime",hideInSearch:!0,render:function(t,a){return"".concat(a.avgWaitTime).concat(e.formatMessage({id:"queue.time.unit"}))}},{title:(0,w.jsx)(x.FormattedMessage,{id:"queue.avgSolveTime"}),dataIndex:"avgSolveTime",hideInSearch:!0}],E=function(){var e=c()(d()().mark((function e(){var t;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",u,f),t=localStorage.getItem(p.LA8),window.open((0,q.kG)()+"/api/v1/queue/export?"+new URLSearchParams({orgUid:(null==k?void 0:k.uid)||"",pageNumber:String(u-1),pageSize:String(f),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsx)(y.Z,{columns:T,actionRef:t,cardBordered:!0,request:function(){var e=c()(d()().mark((function e(t,a,r){var u,o,c,l,m;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,a,r),u=t.current,o=t.pageSize,c=s()(t,I),i(u),F(o),l=n()({pageNumber:u-1,pageSize:o,orgUid:null==k?void 0:k.uid},c),e.next=7,h(l);case 7:return m=e.sent,console.log("queryQueuesByOrg response:",l,m),200===m.code||g.yw.error(m.message),e.abrupt("return",{data:m.data.content,success:!0,total:m.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"queue.list"}),toolBarRender:function(){return[(0,w.jsx)(M.ZP,{icon:(0,w.jsx)(j.Z,{}),type:"primary",onClick:E,children:(0,w.jsx)(x.FormattedMessage,{id:"queue.export"})},"button")]},columnsState:{defaultValue:n()({},Object.fromEntries(T.map((function(e){return[e.dataIndex,{show:N.includes(e.dataIndex)}]})))),persistenceKey:"queue-table-columns",persistenceType:"localStorage"},options:{setting:{draggable:!0,checkable:!0,checkedReset:!0,extra:[(0,w.jsx)("a",{onClick:function(){var e,a;null===(e=t.current)||void 0===e||null===(a=e.reset)||void 0===a||a.call(e)},children:(0,w.jsx)(x.FormattedMessage,{id:"table.columns.reset"})},"reset")]}}})}}}]);