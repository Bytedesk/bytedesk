"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[730],{87223:function(I,h,e){e.r(h);var D=e(15009),i=e.n(D),O=e(97857),c=e.n(O),E=e(99289),f=e.n(E),v=e(5574),P=e.n(v),C=e(98661),F=e(61747),w=e(87547),L=e(94149),b=e(24454),S=e(10915),Z=e(68262),R=e(5966),k=e(16434),z=e(24556),l=e(86745),j=e(9361),$=e(38925),N=e(32983),G=e(14726),H=e(28459),J=e(31418),U=e(67294),y=e(39825),_=e(80049),V=e(85615),Y=e(63998),Q=e(73935),X=e(60247),s=e(85893),q=j.Z.defaultAlgorithm,ee=j.Z.darkAlgorithm,se=function(){var p=(0,z.l)(function(M){var T=M.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:T.borderRadius,":hover":{backgroundColor:T.colorBgTextHover}}});return(0,s.jsx)("div",{className:p,"data-lang":!0,children:l.SelectLang&&(0,s.jsx)(l.SelectLang,{})})},x=function(p){var M=p.content;return(0,s.jsx)($.Z,{style:{marginBottom:24},message:M,type:"error",showIcon:!0})},ne=function(){var p=j.Z.useToken(),M=p.token,T=(0,y.Z)(),re=T.isDarkMode,W=(0,U.useRef)(),A=(0,l.useModel)("@@initialState"),Ee=A.initialState,pe=A.loading,Me=A.refresh,te=A.setInitialState,oe=(0,U.useState)(!1),K=P()(oe,2),ie=K[0],_e=K[1],ue=(0,Y.t)(function(a){return a.setAccessToken}),le=(0,X.L)(function(a){return a.setUserInfo}),de=(0,l.getLocale)();console.log("register page locale:",de);var g=(0,l.useIntl)();(0,U.useEffect)(function(){var a=window.location.href;(a.indexOf("localhost")!==-1||a.indexOf("127.0.0.1")!==-1||a.indexOf("weiyu")!==-1||a.indexOf("kefux")!==-1||a.indexOf("bytedesk")!==-1)&&_e(!0)},[]);var ge=function(){var a=f()(i()().mark(function o(n){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n&&(0,Q.flushSync)(function(){te(function(m){return c()(c()({},m),{},{userInfo:n})})});case 1:case"end":return u.stop()}},o)}));return function(n){return a.apply(this,arguments)}}(),me=function(){var a=f()(i()().mark(function o(n){var t,u,m;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,console.log("values:",n),_.yw.loading("\u6B63\u5728\u6CE8\u518C\uFF0C\u8BF7\u7A0D\u540E..."),d.next=5,(0,C.z2)(c()({},n));case 5:if(t=d.sent,console.log("registerResult:",t),t.code!==200){d.next=15;break}return _.yw.destroy(),_.yw.success(t.message),u={username:n.email,password:n.password},ce(u),d.abrupt("return");case 15:_.yw.destroy(),_.yw.error(t.message);case 17:d.next=24;break;case 19:d.prev=19,d.t0=d.catch(0),m=g.formatMessage({id:"pages.register.failure",defaultMessage:"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(d.t0),_.yw.error(m);case 24:case"end":return d.stop()}},o,null,[[0,19]])}));return function(n){return a.apply(this,arguments)}}(),ce=function(){var a=f()(i()().mark(function o(n){var t,u;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("handleSubmit values: ",n),_.yw.loading("\u6B63\u5728\u767B\u5F55..."),r.next=5,(0,C.x4)(c()({},n));case 5:t=r.sent,console.log("LoginResult:",t),t.code===200?(_.yw.destroy(),_.yw.success("\u767B\u5F55\u6210\u529F\uFF01"),ue(t.data.access_token),ge(t.data.user),le(t.data.user),l.history.push("/")):(_.yw.destroy(),_.yw.error(t.message)),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(0),u=g.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(r.t0),_.yw.error(u);case 15:case"end":return r.stop()}},o,null,[[0,10]])}));return function(n){return a.apply(this,arguments)}}(),fe=function(){setTimeout(function(){var o;console.log("endCaptchaTiming"),(o=W.current)===null||o===void 0||o.endTiming()},2)};return(0,s.jsxs)(S._Y,{hashed:!1,dark:re,children:[(0,s.jsx)(se,{}),(0,s.jsx)("div",{style:{backgroundColor:M.colorBgContainer,textAlign:"center",height:"100vh",backgroundImage:"url('/admin/assets/images/bg-wide.png')"},children:ie?(0,s.jsxs)(Z.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,s.jsx)("img",{alt:"logo",src:"/admin/icons/logo.png"}),title:(0,s.jsx)(l.FormattedMessage,{id:"app.title"}),subTitle:g.formatMessage({id:"pages.login.registerAccount"}),initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:g.formatMessage({id:"pages.login.register"})}},onFinish:function(){var a=f()(i()().mark(function o(n){var t;return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("login values:",n),t={email:n.username,password:n.password,mobile:n.mobile,code:n.code},console.log("register info:",t),m.next=5,me(t);case 5:case"end":return m.stop()}},o)}));return function(o){return a.apply(this,arguments)}}(),children:[status==="error"&&(0,s.jsx)(x,{content:g.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),(0,s.jsx)(R.Z,{name:"username",fieldProps:{size:"large",prefix:(0,s.jsx)(w.Z,{})},placeholder:g.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u90AE\u7BB1"}),rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"})},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"},{max:50,message:"\u90AE\u7BB1\u4E0D\u5F97\u8D85\u8FC750\u5B57\u7B26"}]}),(0,s.jsx)(R.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(L.Z,{})},placeholder:g.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,s.jsx)(R.Z,{fieldProps:{size:"large",prefix:(0,s.jsx)(b.Z,{})},name:"mobile",placeholder:g.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,s.jsx)(k.Z,{fieldProps:{size:"large",prefix:(0,s.jsx)(L.Z,{})},captchaProps:{size:"large"},placeholder:g.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(o,n){return o?"".concat(n," ").concat(g.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):g.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},phoneName:"mobile",name:"code",rules:[{required:!0,message:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],fieldRef:W,onGetCaptcha:function(){var a=f()(i()().mark(function o(n){var t,u;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n&&n.length===11)){r.next=13;break}return t={mobile:n,type:V.i_},r.next=4,(0,C.Y7)(t);case 4:if(u=r.sent,console.log("sendMobileCodeResult:",u),u.code===200){r.next=10;break}return _.yw.error(u.message),fe(),r.abrupt("return");case 10:_.yw.success(u.message),r.next=14;break;case 13:_.yw.error("\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF");case 14:case"end":return r.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()}),status==="error"&&(0,s.jsx)(x,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),(0,s.jsx)("div",{style:{marginBottom:64},children:(0,s.jsx)("div",{style:{float:"right"},children:(0,s.jsx)(l.Link,{to:"/auth/login",children:(0,s.jsx)(l.FormattedMessage,{id:"pages.login.submit",defaultMessage:"\u767B\u5F55 "})})})})]}):(0,s.jsx)("div",{style:{textAlign:"center",margin:"0 auto"},children:(0,s.jsx)(N.Z,{description:"only for vip users, please contact: 270580156@qq.com",children:(0,s.jsx)(G.ZP,{type:"primary",onClick:function(){window.open("http://www.weiyuai.cn")},children:"open weiyuai.cn"})})})}),(0,s.jsx)(F.$_,{})]})},ae=function(){var p=(0,y.Z)(),M=p.isDarkMode;return(0,s.jsx)(H.ZP,{theme:{algorithm:M?ee:q},children:(0,s.jsxs)(J.Z,{children:[(0,s.jsx)(_.ZP,{}),(0,s.jsx)(ne,{})]})})};h.default=ae},63998:function(I,h,e){e.d(h,{t:function(){return c}});var D=e(64529),i=e(782),O=e(71381),c=(0,D.Ue)()((0,i.mW)((0,i.tJ)((0,O.n)(function(E,f){return{accessToken:"",setAccessToken:function(P){localStorage.setItem("ACCESS_TOKEN",P),E({accessToken:P})},getAccessToken:function(){return f().accessToken},removeAccessToken:function(){localStorage.removeItem("ACCESS_TOKEN"),E({accessToken:""})}}}),{name:"AUTH_STORE"})))},60247:function(I,h,e){e.d(h,{L:function(){return c}});var D=e(64529),i=e(782),O=e(71381),c=(0,D.Ue)()((0,i.mW)((0,i.tJ)((0,O.n)(function(E,f){return{userInfo:{uid:""},setUserInfo:function(P){E({userInfo:P})},deleteUserInfo:function(){return E({},!0)}}}),{name:"USER_STORE"})))}}]);
