"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[79],{51042:function(k,F,e){var i=e(1413),P=e(67294),S=e(42110),n=e(89099),D=function(l,E){return P.createElement(n.Z,(0,i.Z)((0,i.Z)({},l),{},{ref:E,icon:S.Z}))},x=P.forwardRef(D);F.Z=x},64317:function(k,F,e){var i=e(1413),P=e(91),S=e(22270),n=e(67294),D=e(66758),x=e(47897),j=e(85893),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],C=function(p,M){var G=p.fieldProps,R=p.children,Q=p.params,A=p.proFieldProps,Y=p.mode,I=p.valueEnum,b=p.request,N=p.showSearch,z=p.options,B=(0,P.Z)(p,l),T=(0,n.useContext)(D.Z);return(0,j.jsx)(x.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,S.h)(I),request:b,params:Q,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({options:z,mode:Y,showSearch:N,getPopupContainer:T.getPopupContainer},G),ref:M,proFieldProps:A},B),{},{children:R}))},V=n.forwardRef(function(c,p){var M=c.fieldProps,G=c.children,R=c.params,Q=c.proFieldProps,A=c.mode,Y=c.valueEnum,I=c.request,b=c.options,N=(0,P.Z)(c,E),z=(0,i.Z)({options:b,mode:A||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},M),B=(0,n.useContext)(D.Z);return(0,j.jsx)(x.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,S.h)(Y),request:I,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({getPopupContainer:B.getPopupContainer},z),ref:p,proFieldProps:Q},N),{},{children:G}))}),O=n.forwardRef(C),d=V,v=O;v.SearchSelect=d,v.displayName="ProFormComponent",F.Z=v},90672:function(k,F,e){var i=e(1413),P=e(91),S=e(67294),n=e(47897),D=e(85893),x=["fieldProps","proFieldProps"],j=function(E,C){var V=E.fieldProps,O=E.proFieldProps,d=(0,P.Z)(E,x);return(0,D.jsx)(n.Z,(0,i.Z)({ref:C,valueType:"textarea",fieldProps:V,proFieldProps:O},d))};F.Z=S.forwardRef(j)},81825:function(k,F,e){e.r(F),e.d(F,{default:function(){return Se}});var i=e(77154),P=e(21612),S=e(97857),n=e.n(S),D=e(13769),x=e.n(D),j=e(15009),l=e.n(j),E=e(99289),C=e.n(E),V=e(5574),O=e.n(V),d=e(80049),v=e(85615),c=e(86745);function p(s){return M.apply(this,arguments)}function M(){return M=C()(l()().mark(function s(a){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/v1/faq/query/org",{method:"GET",params:n()(n()({},a),{},{client:v.bV})}));case 1:case"end":return r.stop()}},s)})),M.apply(this,arguments)}function G(s){return R.apply(this,arguments)}function R(){return R=C()(l()().mark(function s(a){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/v1/faq/create",{method:"POST",data:n()(n()({},a),{},{client:v.bV})}));case 1:case"end":return r.stop()}},s)})),R.apply(this,arguments)}function Q(s){return A.apply(this,arguments)}function A(){return A=C()(l()().mark(function s(a){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/v1/faq/update",{method:"POST",data:n()(n()({},a),{},{client:v.bV})}));case 1:case"end":return r.stop()}},s)})),A.apply(this,arguments)}function Y(s){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function s(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/faq/delete",{method:"POST",data:_objectSpread(_objectSpread({},a),{},{client:HTTP_CLIENT})}));case 1:case"end":return r.stop()}},s)})),I.apply(this,arguments)}var b=e(87676),N=e(51042),z=e(1269),B=e(14726),T=e(67294),oe=e(89102),se=e(34994),le=e(64317),ue=e(5966),ie=e(90672),de=e(8232),ce=e(85265),pe=e(42075),t=e(85893),ve=function(a){var g=a.isEdit,r=a.quickreply,w=a.open,H=a.onClose,_=a.onSubmit,X=de.Z.useForm(),ee=O()(X,1),W=ee[0],J=(0,b.u)(function(m){return m.orgCurrent}),q=(0,oe.v)(function(m){return m.categorySelectOptions});(0,T.useEffect)(function(){if(g){var m;W.setFieldsValue({type:r==null?void 0:r.type,title:r==null?void 0:r.title,content:r==null?void 0:r.content,categoryUid:r==null||(m=r.category)===null||m===void 0?void 0:m.uid})}else W.resetFields()},[w]);var re=function(h){console.log("category selected ".concat(h))},U=function(h){console.log("type selected ".concat(h))},te=function(){console.log("handleSubmit"),W.validateFields().then(function(h){console.log(h),_(n()(n()(n()({},r),h),{},{orgUid:J==null?void 0:J.uid}))}).catch(function(h){console.log("Form errors:",h),d.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ce.Z,{title:g?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:H,open:w,extra:(0,t.jsxs)(pe.Z,{children:[(0,t.jsx)(B.ZP,{onClick:H,children:"\u53D6\u6D88"}),(0,t.jsx)(B.ZP,{onClick:te,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,t.jsxs)(se.A,{form:W,initialValues:n()({},r),submitter:{render:function(){return null}},children:[(0,t.jsx)(le.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:q,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:re}}),(0,t.jsx)(le.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:v.PY},{label:"\u56FE\u7247",value:v.Qm},{label:"\u89C6\u9891",value:v.tV},{label:"\u97F3\u9891",value:v.ai},{label:"\u6587\u4EF6",value:v.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:U}}),(0,t.jsx)(ue.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,t.jsx)(ie.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},me=ve,he=["current"],fe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"title",copyable:!0},{title:"\u5185\u5BB9",dataIndex:"content"},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0},{title:"\u5206\u7C7B",dataIndex:"category",hideInSearch:!0,render:function(a,g){var r;return(r=g.category)===null||r===void 0?void 0:r.name}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],Pe=function(){var a=(0,T.useRef)(),g=(0,T.useState)(!0),r=O()(g,2),w=r[0],H=r[1],_=(0,T.useState)(),X=O()(_,2),ee=X[0],W=X[1],J=(0,T.useState)(!1),q=O()(J,2),re=q[0],U=q[1],te=(0,b.u)(function(o){return o.orgCurrent}),m=[].concat(fe,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(y,f,Z,L){return[(0,t.jsx)("a",{onClick:function(){xe(f)},children:"\u4FEE\u6539"},"editable")]}}]),h=(0,oe.v)(function(o){return o.currentCategory}),De=function(){W(void 0),H(!1),U(!0)},xe=function(y){W(y),H(!0),U(!0)},Oe=function(){var o=C()(l()().mark(function y(f){var Z,L;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(console.log("handleSubmitDrawer",f),w?d.yw.loading("\u6B63\u5728\u4FEE\u6539\u5E38\u89C1\u95EE\u9898"):d.yw.loading("\u6B63\u5728\u521B\u5EFA\u5E38\u89C1\u95EE\u9898"),!w){u.next=8;break}return u.next=5,Q(f);case 5:u.t0=u.sent,u.next=11;break;case 8:return u.next=10,G(f);case 10:u.t0=u.sent;case 11:Z=u.t0,console.log("createFaq response:",f,Z),Z.code===200?(d.yw.destroy(),d.yw.success("\u5E38\u89C1\u95EE\u9898\u521B\u5EFA\u6210\u529F"),U(!1),(L=a.current)===null||L===void 0||L.reloadAndRest()):(d.yw.destroy(),d.yw.error(Z.message));case 14:case"end":return u.stop()}},y)}));return function(f){return o.apply(this,arguments)}}(),Te=function(){U(!1)};return(0,T.useEffect)(function(){var o;console.log("currentCategory:",h),(o=a.current)===null||o===void 0||o.reloadAndRest()},[h]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.Z,{columns:m,actionRef:a,cardBordered:!0,request:function(){var o=C()(l()().mark(function y(f,Z,L){var ae,u,ne,K;return l()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return console.log("request:",f,Z,L),d.yw.loading("\u6B63\u5728\u52A0\u8F7D\u5E38\u89C1\u95EE\u9898"),ae=f.current,u=x()(f,he),ne=n()({pageNumber:f.current-1,orgUid:te.uid,categoryUid:h.uid==="all"?"":h.uid},u),$.next=6,p(ne);case 6:return K=$.sent,console.log("getAllFaqs response:",ne,K),d.yw.destroy(),K.code===200||d.yw.error(K.message),$.abrupt("return",{data:K.data.content,success:!0,total:K.data.totalElements});case 11:case"end":return $.stop()}},y)}));return function(y,f,Z){return o.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(y){console.log("page:",y)}},dateFormatter:"string",headerTitle:"\u5E38\u89C1\u95EE\u9898",toolBarRender:function(){return[(0,t.jsx)(B.ZP,{icon:(0,t.jsx)(N.Z,{}),type:"primary",onClick:De,children:"\u521B\u5EFA"},"button")]}}),(0,t.jsx)(me,{isEdit:w,open:re,quickreply:ee,onClose:Te,onSubmit:Oe})]})},ge=Pe,ye=e(52670),Ee=P.Z.Sider,Ce=P.Z.Content,Fe=function(){var a=(0,i.Z)(),g=a.leftSiderStyle,r=a.contentStyle;return(0,t.jsx)("div",{children:(0,t.jsxs)(P.Z,{children:[(0,t.jsx)(Ee,{style:g,children:(0,t.jsx)(ye.Z,{type:v.OG})}),(0,t.jsx)(P.Z,{children:(0,t.jsx)(Ce,{style:r,children:(0,t.jsx)(ge,{})})})]})})},Se=Fe}}]);
