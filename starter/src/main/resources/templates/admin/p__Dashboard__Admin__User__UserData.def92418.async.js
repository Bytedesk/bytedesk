"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7586],{64317:function(K,O,e){var i=e(1413),l=e(91),g=e(22270),P=e(67294),h=e(66758),v=e(24809),D=e(85893),S=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],u=function(t,M){var A=t.fieldProps,n=t.children,r=t.params,y=t.proFieldProps,T=t.mode,B=t.valueEnum,F=t.request,Z=t.showSearch,x=t.options,o=(0,l.Z)(t,S),I=(0,P.useContext)(h.Z);return(0,D.jsx)(v.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,g.h)(B),request:F,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({options:x,mode:T,showSearch:Z,getPopupContainer:I.getPopupContainer},A),ref:M,proFieldProps:y},o),{},{children:n}))},p=P.forwardRef(function(a,t){var M=a.fieldProps,A=a.children,n=a.params,r=a.proFieldProps,y=a.mode,T=a.valueEnum,B=a.request,F=a.options,Z=(0,l.Z)(a,s),x=(0,i.Z)({options:F,mode:y||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},M),o=(0,P.useContext)(h.Z);return(0,D.jsx)(v.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,g.h)(T),request:B,params:n,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({getPopupContainer:o.getPopupContainer},x),ref:t,proFieldProps:r},Z),{},{children:A}))}),d=P.forwardRef(u),m=p,c=d;c.SearchSelect=m,c.displayName="ProFormComponent",O.Z=c},5966:function(K,O,e){var i=e(97685),l=e(1413),g=e(91),P=e(21770),h=e(8232),v=e(55241),D=e(97435),S=e(67294),s=e(24809),u=e(85893),p=["fieldProps","proFieldProps"],d=["fieldProps","proFieldProps"],m="text",c=function(n){var r=n.fieldProps,y=n.proFieldProps,T=(0,g.Z)(n,p);return(0,u.jsx)(s.Z,(0,l.Z)({valueType:m,fieldProps:r,filedConfig:{valueType:m},proFieldProps:y},T))},a=function(n){var r=(0,P.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),y=(0,i.Z)(r,2),T=y[0],B=y[1];return(0,u.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Z){var x,o=Z.getFieldValue(n.name||[]);return(0,u.jsx)(v.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(f){return f&&f.parentNode?f.parentNode:f},onOpenChange:function(f){return B(f)},content:(0,u.jsxs)("div",{style:{padding:"4px 0"},children:[(x=n.statusRender)===null||x===void 0?void 0:x.call(n,o),n.strengthText?(0,u.jsx)("div",{style:{marginTop:10},children:(0,u.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:T,children:n.children}))}})},t=function(n){var r=n.fieldProps,y=n.proFieldProps,T=(0,g.Z)(n,d),B=(0,S.useState)(!1),F=(0,i.Z)(B,2),Z=F[0],x=F[1];return r!=null&&r.statusRender&&T.name?(0,u.jsx)(a,{name:T.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:Z,onOpenChange:x,children:(0,u.jsx)("div",{children:(0,u.jsx)(s.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,D.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(I){var f;r==null||(f=r.onBlur)===null||f===void 0||f.call(r,I),x(!1)},onClick:function(I){var f;r==null||(f=r.onClick)===null||f===void 0||f.call(r,I),x(!0)}}),proFieldProps:y,filedConfig:{valueType:m}},T))})}):(0,u.jsx)(s.Z,(0,l.Z)({valueType:"password",fieldProps:r,proFieldProps:y,filedConfig:{valueType:m}},T))},M=c;M.Password=t,M.displayName="ProFormComponent",O.Z=M},90672:function(K,O,e){var i=e(1413),l=e(91),g=e(67294),P=e(24809),h=e(85893),v=["fieldProps","proFieldProps"],D=function(s,u){var p=s.fieldProps,d=s.proFieldProps,m=(0,l.Z)(s,v);return(0,h.jsx)(P.Z,(0,i.Z)({ref:u,valueType:"textarea",fieldProps:p,proFieldProps:d},m))};O.Z=g.forwardRef(D)},73803:function(K,O,e){var i=e(85615),l=e(66419),g=e(86745);function P(){var h=(0,g.useIntl)(),v=function(s){return s&&s.startsWith(i.Vo)?h.formatMessage({id:s,defaultMessage:s}):s},D=function(s){return s!=null&&s.startsWith(i.Vo)?(0,l.aS)(h.formatMessage({id:s}),10):(0,l.aS)(s,10)};return{translateString:v,translateStringTranct:D}}O.Z=P},48716:function(K,O,e){e.r(O),e.d(O,{default:function(){return pe}});var i=e(97857),l=e.n(i),g=e(13769),P=e.n(g),h=e(15009),v=e.n(h),D=e(99289),S=e.n(D),s=e(5574),u=e.n(s),p=e(80049),d=e(16761),m=e(51042),c=e(57482),a=e(14726),t=e(67294),M=e(89102),A=e(87676),n=e(85615),r=e(34994),y=e(64317),T=e(5966),B=e(90672),F=e(8232),Z=e(85265),x=e(42075),o=e(85893),I=function(_){var U=_.isEdit,J=_.quickreply,Y=_.open,H=_.onClose,X=_.onSubmit,Q=F.Z.useForm(),k=u()(Q,1),w=k[0],$=(0,A.u)(function(b){return b.currentOrg}),re=(0,M.v)(function(b){return b.categorySelectOptions});(0,t.useEffect)(function(){U||w.resetFields()},[Y]);var q=function(j){console.log("category selected ".concat(j))},te=function(j){console.log("type selected ".concat(j))},ee=function(){console.log("handleSubmit"),w.validateFields().then(function(j){console.log(j),X(l()(l()(l()({},J),j),{},{orgUid:$==null?void 0:$.uid}))}).catch(function(j){console.log("Form errors:",j),p.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(Z.Z,{title:U?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:H,open:Y,extra:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)(a.ZP,{onClick:H,children:"\u53D6\u6D88"}),(0,o.jsx)(a.ZP,{onClick:ee,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,o.jsxs)(r.A,{form:w,initialValues:l()({},J),submitter:{render:function(){return null}},children:[(0,o.jsx)(y.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:re,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:q}}),(0,o.jsx)(y.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:n.PY},{label:"\u56FE\u7247",value:n.Qm,disabled:!0},{label:"\u89C6\u9891",value:n.tV,disabled:!0},{label:"\u97F3\u9891",value:n.Yu,disabled:!0},{label:"\u6587\u4EF6",value:n.Qn,disabled:!0}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:te}}),(0,o.jsx)(T.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,o.jsx)(B.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},f=I,se=e(73803),le=e(86745),ie=["current"],ue=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u7528\u6237\u540D",dataIndex:"username",copyable:!0},{title:"\u6635\u79F0",dataIndex:"nickname",copyable:!0},{title:"\u90AE\u7BB1",dataIndex:"email",render:function(_,U){return U.email+(U.emailVerified?"(\u5DF2\u9A8C\u8BC1)":"(\u672A\u9A8C\u8BC1)")}},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",render:function(_,U){return U.mobile+(U.mobileVerified?"(\u5DF2\u9A8C\u8BC1)":"(\u672A\u9A8C\u8BC1)")}},{title:"\u6CE8\u518C\u65F6\u95F4",key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180}],de=function(){var _=(0,le.useIntl)(),U=(0,t.useRef)(),J=(0,se.Z)(),Y=J.translateString,H=(0,t.useState)(!0),X=u()(H,2),Q=X[0],k=X[1],w=(0,t.useState)(),$=u()(w,2),re=$[0],q=$[1],te=(0,t.useState)(!1),ee=u()(te,2),b=ee[0],j=ee[1],me=[].concat(ue,[{title:_.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(W,R,L,V){return[(0,o.jsx)("a",{onClick:function(){ge(R)},children:_.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable")]}}]),oe=(0,M.v)(function(E){return E.currentCategory}),Pe=function(){q(void 0),k(!1),j(!0)},ge=function(W){q(W),k(!0),j(!0)},fe=function(){var E=S()(v()().mark(function W(R){var L,V;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(console.log("handleSubmitDrawer",R),Q?p.yw.loading(_.formatMessage({id:"updating"})):p.yw.loading(_.formatMessage({id:"creating"})),!Q){C.next=8;break}return C.next=5,(0,d.Nq)(R);case 5:C.t0=C.sent,C.next=11;break;case 8:return C.next=10,(0,d.r4)(R);case 10:C.t0=C.sent;case 11:L=C.t0,console.log("createUser response:",R,L),L.code===200?(p.yw.destroy(),p.yw.loading(_.formatMessage({id:"create.success"})),j(!1),(V=U.current)===null||V===void 0||V.reloadAndRest()):(p.yw.destroy(),p.yw.error(L.message));case 14:case"end":return C.stop()}},W)}));return function(R){return E.apply(this,arguments)}}(),he=function(){j(!1)};return(0,t.useEffect)(function(){var E;console.log("currentCategory:",oe),(E=U.current)===null||E===void 0||E.reloadAndRest()},[oe]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Z,{columns:me,actionRef:U,cardBordered:!0,request:function(){var E=S()(v()().mark(function W(R,L,V){var ne,C,ae,z;return v()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return console.log("request:",R,L,V),p.yw.loading(_.formatMessage({id:"loading",defaultMessage:"Loading"})),ne=R.current,C=P()(R,ie),ae=l()({pageNumber:R.current-1},C),N.next=6,(0,d._9)(ae);case 6:return z=N.sent,console.log("getAllUsers response:",ae,z),p.yw.destroy(),z.code===200||p.yw.error(Y(z.message)),N.abrupt("return",{data:z.data.content,success:!0,total:z.data.totalElements});case 11:case"end":return N.stop()}},W)}));return function(W,R,L){return E.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(W){console.log("page:",W)}},dateFormatter:"string",headerTitle:"\u7528\u6237",toolBarRender:function(){return[(0,o.jsx)(a.ZP,{icon:(0,o.jsx)(m.Z,{}),type:"primary",onClick:Pe,children:_.formatMessage({id:"create",defaultMessage:"Create"})},"button")]}}),(0,o.jsx)(f,{isEdit:Q,open:b,quickreply:re,onClose:he,onSubmit:fe})]})},ce=de,ve=function(){return(0,o.jsx)("div",{children:(0,o.jsx)(ce,{})})},pe=ve},89102:function(K,O,e){e.d(O,{v:function(){return s}});var i=e(19632),l=e.n(i),g=e(97857),P=e.n(g),h=e(85615),v=e(73445),D=e(782),S=e(18753),s=(0,v.Ue)()((0,D.mW)((0,D.tJ)((0,S.n)(function(d,m){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:""},setCategoryResult:function(a){var t,M=p(a),A={uid:"all",name:"All"},n=P()(P()({},a),{},{data:{content:[A].concat(l()(a.data.content))}}),r=u(n);d({categoryResult:n,categoryTreeOptions:r,categorySelectOptions:M}),((t=a.data)===null||t===void 0||(t=t.content)===null||t===void 0?void 0:t.length)>0?d({currentCategory:a.data.content[0]}):d({currentCategory:{uid:""}})},setCurrentCategoryUid:function(a){var t=m().categoryResult.data.content.find(function(M){return M.uid===a});d({currentCategory:t})},deleteCategoryCache:function(){return d({},!0)}}}),{name:h.OM})));function u(d){var m=[];return d.data.content.forEach(function(c){var a={title:c.name,key:c.uid,children:[]};c.children&&Array.isArray(c.children)&&(a.children=c.children.map(function(t){return{title:t.name,key:t.uid,children:[]}})),m.push(a)}),m}function p(d){var m=[];return d.data.content.forEach(function(c){var a={label:c.name,value:c.uid};m.push(a)}),m}},87676:function(K,O,e){e.d(O,{u:function(){return h}});var i=e(85615),l=e(73445),g=e(782),P=e(18753),h=(0,l.Ue)()((0,g.mW)((0,g.tJ)((0,P.n)(function(v,D){return{currentOrg:{uid:"",name:"",description:""},setCurrentOrg:function(s){v({currentOrg:s})},deleteOrg:function(){return v({},!0)}}}),{name:i.eR})))}}]);
