"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{73803:function(G,E,e){var t=e(85615),f=e(66419),O=e(86745);function i(){var C=(0,O.useIntl)(),v=function(n){return n&&n.startsWith(t.Vo)?C.formatMessage({id:n,defaultMessage:n}):n},I=function(n){return n!=null&&n.startsWith(t.Vo)?(0,f.aS)(C.formatMessage({id:n}),10):(0,f.aS)(n,10)};return{translateString:v,translateStringTranct:I}}E.Z=i},22078:function(G,E,e){e.r(E),e.d(E,{default:function(){return H}});var t=e(15009),f=e.n(t),O=e(97857),i=e.n(O),C=e(99289),v=e.n(C),I=e(5574),g=e.n(I),n=e(67294),b=e(7134),R=e(14726),p=e(34994),P=e(5966),w=e(90672),Z=e(86745),U=e(88484),K=e(60247),y=e(16761),s=e(80049),A=e(66723),r=e(73803),o=e(66419),x=e(85576),a=e(85893),d=function(l){var B=l.open,h=l.onClose,S=(0,Z.useIntl)(),u=function(){h()},V=function(){h()};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x.Z,{title:S.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"}),open:B,footer:null,onCancel:V,children:(0,a.jsxs)(p.A,{initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},onFinish:function(){var T=v()(f()().mark(function D(c){var N,L;return f()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(console.log("changePassword:",c),!(c.newPassword.trim().length<6)){M.next=4;break}return s.yw.error("password length should not be less than 6"),M.abrupt("return");case 4:if(c.newPassword===c.confirmPassword){M.next=7;break}return s.yw.error("New password and confirm password do not match"),M.abrupt("return");case 7:return N={oldPassword:c.oldPassword,newPassword:c.newPassword},M.next=10,(0,y.Cp)(N);case 10:L=M.sent,console.log("changePassword response:",L),L.code===200?(s.yw.success("Password changed successfully!"),u()):s.yw.error(L.message);case 13:case"end":return M.stop()}},D)}));return function(D){return T.apply(this,arguments)}}(),children:[(0,a.jsx)(P.Z.Password,{name:"oldPassword",label:"\u539F\u5BC6\u7801(\u624B\u673A\u53F7\u76F4\u63A5\u767B\u5F55\u7528\u6237\uFF0C\u53EF\u4EE5\u7559\u7A7A)"}),(0,a.jsx)(P.Z.Password,{name:"newPassword",label:"\u65B0\u5BC6\u7801"}),(0,a.jsx)(P.Z.Password,{name:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801"})]})})})},F=d,Y={labelCol:{span:8},wrapperCol:{span:8}},z=function(){var l=(0,Z.useIntl)(),B=(0,r.Z)(),h=B.translateString,S=(0,K.L)(function(j){return{userInfo:j.userInfo,setUserInfo:j.setUserInfo}}),u=S.userInfo,V=S.setUserInfo,T=(0,n.useState)(""),D=g()(T,2),c=D[0],N=D[1],L=(0,n.useState)(!1),Q=g()(L,2),M=Q[0],k=Q[1],_=function(){k(!0)},ee=function(){k(!1)},ae=function(m){console.log("handleUploadSuccess:",m),N(m)},se=function(m){console.log("handleUploadError:",m)},ne=function(){var j=v()(f()().mark(function m(q){var X,W;return f()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return X=i()(i()(i()({},u),q),{},{avatar:c}),console.log(X),$.next=4,(0,y.ck)(X);case 4:W=$.sent,console.log("updateProfile response:",W),W.code===200?(s.yw.success(l.formatMessage({id:"update.success"})),W.data.username!==u.username?(0,o.NZ)():V(W.data)):s.yw.error(W.message);case 7:case"end":return $.stop()}},m)}));return function(q){return j.apply(this,arguments)}}(),re=function(m){return Array.isArray(m)?m:m==null?void 0:m.fileList};return(0,n.useEffect)(function(){u&&N(u.avatar)},[u]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.A,i()(i()({},Y),{},{onFinish:ne,initialValues:{username:u.username,nickname:u.nickname,email:u.email,mobile:u.mobile,description:h(u.description)},children:[(0,a.jsx)(p.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:re,label:l.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,a.jsxs)(A.G,{onSuccess:ae,onError:se,children:[(0,a.jsx)(b.C,{src:c}),(0,a.jsx)(R.ZP,{icon:(0,a.jsx)(U.Z,{}),children:l.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,a.jsx)(P.Z,{name:"username",label:l.formatMessage({id:"username.change.tip",defaultMessage:"Username"}),rules:[{required:!0}]}),(0,a.jsx)(R.ZP,{onClick:_,children:l.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"})}),(0,a.jsx)(P.Z,{name:"nickname",label:l.formatMessage({id:"nickname",defaultMessage:"Nickname"}),rules:[{required:!0}]}),(0,a.jsx)(P.Z,{name:"email",label:u.emailVerified?l.formatMessage({id:"email.verified",defaultMessage:"Email Verified"}):l.formatMessage({id:"email.unverified",defaultMessage:"email unverified"}),rules:[{type:"email"}],disabled:!0}),(0,a.jsx)(P.Z,{name:"mobile",label:u.mobileVerified?l.formatMessage({id:"mobile.verified",defaultMessage:"Mobile Verified"}):l.formatMessage({id:"mobile.unverified",defaultMessage:"mobile unverified"}),disabled:!0}),(0,a.jsx)(w.Z,{name:"description",label:l.formatMessage({id:"description",defaultMessage:"Description"})})]})),(0,a.jsx)(F,{open:M,onClose:ee})]})},H=z},60247:function(G,E,e){e.d(E,{L:function(){return C}});var t=e(85615),f=e(73445),O=e(782),i=e(71381),C=(0,f.Ue)()((0,O.mW)((0,O.tJ)((0,i.n)(function(v,I){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(n){v({userInfo:n})},setDeviceUid:function(n){v({deviceUid:n})},deleteUserInfo:function(){return v({},!0)}}}),{name:t.Em})))},66723:function(G,E,e){e.d(E,{G:function(){return b}});var t=e(97857),f=e.n(t),O=e(67294),i=e(66476),C=e(85615),v=e(27484),I=e.n(v),g=e(80049),n=e(85893),b=function(p){var P=p.children,w=p.onSuccess,Z=p.onError,U={file:null,file_name:"test.png",file_type:"image/png"},K={name:"file",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(C.LA)},data:U,showUploadList:!1,beforeUpload:function(s){console.log("beforeUpload",s);var A=I()(new Date).format("YYYYMMDDHHmmss")+"_"+s.name;U.file=s,U.file_name=A,U.file_type=s.type,console.log("beforeUpload",U)},onChange:function(s){if(s.file.status!=="uploading"&&console.log(s.file,s.fileList),s.file.status==="done"){var A=s.file.response.data;console.log("url: ",A),w(A),g.yw.success("".concat(s.file.name," \u4E0A\u4F20\u6210\u529F"))}else s.file.status==="error"&&(g.yw.error("".concat(s.file.name," \u4E0A\u4F20\u5931\u8D25")),Z(s.file))}};return(0,n.jsx)(i.Z,f()(f()({},K),{},{children:P}))}},85576:function(G,E,e){e.d(E,{Z:function(){return A}});var t=e(56080),f=e(38657),O=e(56745),i=e(67294),C=e(93967),v=e.n(C),I=e(31058),g=e(8745),n=e(53124),b=e(35792),R=e(32409),p=e(4941),P=e(71194),w=function(r,o){var x={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.indexOf(a)<0&&(x[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(r);d<a.length;d++)o.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(r,a[d])&&(x[a[d]]=r[a[d]]);return x};const Z=r=>{const{prefixCls:o,className:x,closeIcon:a,closable:d,type:F,title:Y,children:z,footer:H}=r,J=w(r,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:l}=i.useContext(n.E_),B=l(),h=o||l("modal"),S=(0,b.Z)(B),[u,V,T]=(0,P.ZP)(h,S),D=`${h}-confirm`;let c={};return F?c={closable:d!=null?d:!1,title:"",footer:"",children:i.createElement(R.O,Object.assign({},r,{prefixCls:h,confirmPrefixCls:D,rootPrefixCls:B,content:z}))}:c={closable:d!=null?d:!0,title:Y,footer:H!==null&&i.createElement(p.$,Object.assign({},r)),children:z},u(i.createElement(I.s,Object.assign({prefixCls:h,className:v()(V,`${h}-pure-panel`,F&&D,F&&`${D}-${F}`,x,T,S)},J,{closeIcon:(0,p.b)(h,a),closable:d},c)))};var U=(0,g.i)(Z),K=e(94423);function y(r){return(0,t.ZP)((0,t.uW)(r))}const s=O.Z;s.useModal=K.Z,s.info=function(o){return(0,t.ZP)((0,t.cw)(o))},s.success=function(o){return(0,t.ZP)((0,t.vq)(o))},s.error=function(o){return(0,t.ZP)((0,t.AQ)(o))},s.warning=y,s.warn=y,s.confirm=function(o){return(0,t.ZP)((0,t.Au)(o))},s.destroyAll=function(){for(;f.Z.length;){const o=f.Z.pop();o&&o()}},s.config=t.ai,s._InternalPanelDoNotUseOrYouWillBeFired=U;var A=s}}]);
