"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5522],{52398:function(e,t,n){n.d(t,{$T:function(){return p},A:function(){return y},Hf:function(){return x},P6:function(){return g},gx:function(){return f}});var r=n(90819),u=n.n(r),o=n(73193),a=n.n(o),s=n(89933),c=n.n(s),i=n(18850),d=n(79434);function f(e){return l.apply(this,arguments)}function l(){return(l=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/query/org",{method:"GET",params:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/query/user",{method:"GET",params:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/create",{method:"POST",data:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return m.apply(this,arguments)}function m(){return(m=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/update",{method:"POST",data:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=c()(u()().mark((function e(t){return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/course/delete",{method:"POST",data:a()(a()({},t),{},{client:i.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},66964:function(e,t,n){var r=n(39522);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},4091:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(66964),u=n(64476),o=n(44194),a=n(90819),s=n.n(a),c=n(89933),i=n.n(c),d=n(45332),f=n.n(d),l=n(32078),p=n(52398),h=n(72921),g=n(49189),v=n(52519),x=n(79434),m=n(31549),y=function(){var e=(0,x.useIntl)(),t=(0,g.L)((function(e){return e.userInfo})),n=(0,o.useRef)(),r=(0,o.useState)(1),u=f()(r,2),a=u[0],c=u[1],d=(0,o.useState)(10),y=f()(d,2),b=y[0],w=y[1],k=(0,h.K)((function(e){return{courseResult:e.courseResult,setCourseResult:e.setCourseResult}})),R=k.courseResult,C=k.setCourseResult,S=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,m.jsx)(x.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"name",copyable:!0},{title:(0,m.jsx)(x.FormattedMessage,{id:"category",defaultMessage:"Category"}),key:"category",render:function(e,t){return"分类"}},{title:"发布人",copyable:!0,editable:!1,renderText:function(e,t,n,r){var u;return null===(u=t.user)||void 0===u?void 0:u.nickname}},{title:(0,m.jsx)(x.FormattedMessage,{id:"status",defaultMessage:"Status"}),key:"published",render:function(e,t){return t.published?"已发布":"未发布"}},{title:(0,m.jsx)(x.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",editable:!1,sorter:!0,hideInSearch:!0},{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,r){return[(0,m.jsx)("a",{onClick:function(){console.log("edit record:",t)},children:"修改"},"editable")]}}],T=function(){var e=i()(s()().mark((function e(){var n,r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={pageNumber:a-1,pageSize:b},null==t||!t.superUser){e.next=7;break}return e.next=4,(0,p.gx)(n);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,p.$T)(n);case 9:e.t0=e.sent;case 10:r=e.t0,console.log("getAllCourses response:",n,r),200===r.code?C(r):l.yw.error(r.message);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){T()}),[]),(0,o.useEffect)((function(){T()}),[a,b]),(0,o.useEffect)((function(){console.log("courseResult:",R),n.current.reload()}),[R]),(0,m.jsx)(v.Z,{columns:S,actionRef:n,cardBordered:!0,request:function(){var e=i()(s()().mark((function e(t,n,r){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,r),c(t.current),w(t.pageSize),e.abrupt("return",Promise.resolve({data:R.data.content,success:!0,total:R.data.totalElements}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:b,showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"管理类别",toolBarRender:function(){return[]}})},b=(u.Z.Sider,u.Z.Content),w=function(){var e=(0,r.Z)().contentStyle;return(0,m.jsx)(u.Z,{children:(0,m.jsx)(u.Z,{children:(0,m.jsx)(b,{style:e,children:(0,m.jsx)(y,{})})})})}},72921:function(e,t,n){n.d(t,{K:function(){return s}});var r=n(18850),u=n(39701),o=n(83642),a=n(41617),s=(0,u.Ue)()((0,o.mW)((0,o.tJ)((0,a.n)((function(e,t){return{courseResult:{data:{content:[]}},insertCourseResult:function(t){e((function(e){e.courseResult.data.content.unshift(t)}))},updateCourseResult:function(t){e((function(e){var n=e.courseResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:console.warn("Course with uid ".concat(t.uid," not found."))}))},deleteCourseResult:function(t){e((function(e){var n=e.courseResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n.splice(r,1):console.warn("Course with uid ".concat(t.uid," not found."))}))},setCourseResult:function(t){e({courseResult:t})},deleteCourseCache:function(){return e({},!0)}}})),{name:r.vCH})))}}]);