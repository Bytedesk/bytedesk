"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1642],{63434:function(ve,oe,e){var z=e(1413),s=e(91),de=e(22270),_=e(84567),ue=e(67294),te=e(90789),u=e(32486),X=e(85893),R=["options","fieldProps","proFieldProps","valueEnum"],J=ue.forwardRef(function(U,j){var $=U.options,se=U.fieldProps,L=U.proFieldProps,me=U.valueEnum,le=(0,s.Z)(U,R);return(0,X.jsx)(u.Z,(0,z.Z)({ref:j,valueType:"checkbox",valueEnum:(0,de.h)(me,void 0),fieldProps:(0,z.Z)({options:$},se),lightProps:(0,z.Z)({labelFormatter:function(){return(0,X.jsx)(u.Z,(0,z.Z)({ref:j,valueType:"checkbox",mode:"read",valueEnum:(0,de.h)(me,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,z.Z)({options:$},se),proFieldProps:L},le))}},le.lightProps),proFieldProps:L},le))}),N=ue.forwardRef(function(U,j){var $=U.fieldProps,se=U.children;return(0,X.jsx)(_.Z,(0,z.Z)((0,z.Z)({ref:j},$),{},{children:se}))}),r=(0,te.G)(N,{valuePropName:"checked"}),Y=r;Y.Group=J,oe.Z=Y},33725:function(ve,oe,e){var z=e(1413),s=e(91),de=e(86190),_=e(67294),ue=e(66758),te=e(32486),u=e(85893),X=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],J="time",N=_.forwardRef(function(U,j){var $=U.fieldProps,se=U.proFieldProps,L=(0,s.Z)(U,X),me=(0,_.useContext)(ue.Z);return(0,u.jsx)(te.Z,(0,z.Z)({ref:j,fieldProps:(0,z.Z)({getPopupContainer:me.getPopupContainer},$),valueType:"timeRange",proFieldProps:se,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(P){return(0,de.c)(P,"HH:mm:ss")}}},L))}),r=function(j){var $=j.fieldProps,se=j.proFieldProps,L=(0,s.Z)(j,R),me=(0,_.useContext)(ue.Z);return(0,u.jsx)(te.Z,(0,z.Z)({fieldProps:(0,z.Z)({getPopupContainer:me.getPopupContainer},$),valueType:J,proFieldProps:se,filedConfig:{customLightMode:!0,valueType:J}},L))},Y=r;Y.RangePicker=N,oe.Z=Y},19054:function(ve,oe,e){var z=e(1413),s=e(91),de=e(67294),_=e(32486),ue=e(85893),te=["fieldProps","request","params","proFieldProps"],u=function(J,N){var r=J.fieldProps,Y=J.request,U=J.params,j=J.proFieldProps,$=(0,s.Z)(J,te);return(0,ue.jsx)(_.Z,(0,z.Z)({valueType:"treeSelect",fieldProps:r,ref:N,request:Y,params:U,filedConfig:{customLightMode:!0},proFieldProps:j},$))},X=de.forwardRef(u);oe.Z=X},952:function(ve,oe,e){var z=e(34994);oe.ZP=z.A},3418:function(ve,oe,e){e.d(oe,{Lr:function(){return se},_t:function(){return R},sE:function(){return j},x_:function(){return Y}});var z=e(15009),s=e.n(z),de=e(97857),_=e.n(de),ue=e(99289),te=e.n(ue),u=e(85615),X=e(86745);function R(P){return J.apply(this,arguments)}function J(){return J=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/agent/query/org",{method:"GET",params:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),J.apply(this,arguments)}function N(){return r.apply(this,arguments)}function r(){return r=_asyncToGenerator(_regeneratorRuntime().mark(function P(){return _regeneratorRuntime().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",request("/api/v1/agent/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return K.stop()}},P)})),r.apply(this,arguments)}function Y(P){return U.apply(this,arguments)}function U(){return U=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/agent/create",{method:"POST",data:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),U.apply(this,arguments)}function j(P){return $.apply(this,arguments)}function $(){return $=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/agent/update",{method:"POST",data:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),$.apply(this,arguments)}function se(P){return L.apply(this,arguments)}function L(){return L=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/agent/delete",{method:"POST",data:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),L.apply(this,arguments)}function me(P){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function P(q){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",request("/api/v1/agent/filter",{method:"GET",params:_objectSpread(_objectSpread({},q),{},{client:HTTP_CLIENT})}));case 1:case"end":return m.stop()}},P)})),le.apply(this,arguments)}},84125:function(ve,oe,e){e.d(oe,{D$:function(){return Y},EP:function(){return se},hS:function(){return j},z_:function(){return R}});var z=e(15009),s=e.n(z),de=e(97857),_=e.n(de),ue=e(99289),te=e.n(ue),u=e(85615),X=e(86745);function R(P){return J.apply(this,arguments)}function J(){return J=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/mem/query/org",{method:"GET",params:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),J.apply(this,arguments)}function N(){return r.apply(this,arguments)}function r(){return r=_asyncToGenerator(_regeneratorRuntime().mark(function P(){return _regeneratorRuntime().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",request("/api/v1/mem/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return K.stop()}},P)})),r.apply(this,arguments)}function Y(P){return U.apply(this,arguments)}function U(){return U=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/mem/create",{method:"POST",data:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),U.apply(this,arguments)}function j(P){return $.apply(this,arguments)}function $(){return $=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/mem/update",{method:"POST",data:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),$.apply(this,arguments)}function se(P){return L.apply(this,arguments)}function L(){return L=te()(s()().mark(function P(q){return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,X.request)("/api/v1/member/delete",{method:"POST",data:_()(_()({},q),{},{client:u.bV})}));case 1:case"end":return m.stop()}},P)})),L.apply(this,arguments)}function me(P){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function P(q){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",request("/api/v1/member/filter",{method:"GET",params:_objectSpread(_objectSpread({},q),{},{client:HTTP_CLIENT})}));case 1:case"end":return m.stop()}},P)})),le.apply(this,arguments)}},35612:function(ve,oe,e){e.d(oe,{$$:function(){return Y},AW:function(){return N},gk:function(){return R}});var z=e(15009),s=e.n(z),de=e(97857),_=e.n(de),ue=e(99289),te=e.n(ue),u=e(85615),X=e(86745);function R(j){return J.apply(this,arguments)}function J(){return J=te()(s()().mark(function j($){return s()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,X.request)("/api/v1/worktime/create",{method:"POST",data:_()(_()({},$),{},{client:u.bV})}));case 1:case"end":return L.stop()}},j)})),J.apply(this,arguments)}function N(j){return r.apply(this,arguments)}function r(){return r=te()(s()().mark(function j($){return s()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,X.request)("/api/v1/worktime/update",{method:"POST",data:_()(_()({},$),{},{client:u.bV})}));case 1:case"end":return L.stop()}},j)})),r.apply(this,arguments)}function Y(j){return U.apply(this,arguments)}function U(){return U=te()(s()().mark(function j($){return s()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,X.request)("/api/v1/worktime/delete",{method:"POST",data:_()(_()({},$),{},{client:u.bV})}));case 1:case"end":return L.stop()}},j)})),U.apply(this,arguments)}},9650:function(ve,oe,e){e.r(oe),e.d(oe,{default:function(){return jt}});var z=e(21612),s=e(67294),de=e(5574),_=e.n(de),ue=e(48096),te=e(15009),u=e.n(te),X=e(97857),R=e.n(X),J=e(99289),N=e.n(J),r=e(80049),Y=e(3418),U=e(73803),j=e(30694),$=e(85615),se=e(73445),L=e(782),me=e(71381),le=(0,se.Ue)()((0,L.mW)((0,L.tJ)((0,me.n)(function(ie,v){return{memberResult:{data:{content:[],totalElements:0}},insertMember:function(y){ie(function(k){var O=k.memberResult.data.content;O.unshift(y)})},updateMember:function(y){ie(function(k){var O=k.memberResult.data.content,Z=O.findIndex(function(w){return w.uid===y.uid});Z!==-1?O[Z]=y:console.warn("Member with uid ".concat(y.uid," not found."))})},deleteMember:function(y){ie(function(k){var O=k.memberResult.data.content,Z=O.findIndex(function(w){return w.uid===y.uid});Z!==-1?O.splice(Z,1):console.warn("Member with uid ".concat(y.uid," not found."))})},setMemberResult:function(y){ie({memberResult:y})},deleteMemberCache:function(){return ie({},!0)}}}),{name:$.PQ}))),P=e(66723),q=e(88484),K=e(34994),m=e(5966),Ee=e(90672),je=e(19054),ce=e(86745),Te=e(8232),Se=e(7134),fe=e(14726),t=e(85893),Be=function(){var v,S=Te.Z.useForm(),y=_()(S,1),k=y[0],O=(0,ce.useIntl)(),Z=(0,U.Z)(),w=Z.translateString,W=le(function(o){return o.memberResult}),Q=(0,j.E)(function(o){return{currentAgent:o.currentAgent,setCurrentAgent:o.setCurrentAgent}}),h=Q.currentAgent,H=Q.setCurrentAgent,I=(0,s.useState)(""),T=_()(I,2),l=T[0],i=T[1],D=function(n,B){B.title=n.nickname,B.value=n.uid},ee=(0,s.useMemo)(function(){for(var o=[],n=0;n<W.data.content.length;n++){var B={title:"",value:"",children:[]};D(W.data.content[n],B),o.push(B)}return o},[W]);(0,s.useEffect)(function(){var o=j.E.subscribe(function(n){k.setFieldValue("nickname",w(n.currentAgent.nickname)),k.setFieldValue("email",n.currentAgent.email),k.setFieldValue("mobile",n.currentAgent.mobile),k.setFieldValue("description",w(n.currentAgent.description))});return o},[h]);var ne=function(n){console.log("handleUploadSuccess:",n),i(n)},d=function(n){console.log("handleUploadError:",n)},M=function(n){console.log("onTreeSelectChange:",n);for(var B=0;B<W.data.content.length;B++){var F=W.data.content[B];F.uid===n&&(k.setFieldsValue({nickname:F.nickname}),k.setFieldsValue({email:F.email}),k.setFieldsValue({mobile:F.mobile}))}},g=function(){var o=N()(u()().mark(function n(B){var F,ae,G,re,ge;return u()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log("onFinish:",B),r.yw.loading(O.formatMessage({id:"updating"})),re=R()(R()(R()({},h),B),{},{avatar:l,serviceSettings:R()(R()({},h.serviceSettings),{},{robotUid:(F=h.serviceSettings)===null||F===void 0||(F=F.robot)===null||F===void 0?void 0:F.uid,quickButtonUids:(ae=h.serviceSettings)===null||ae===void 0||(ae=ae.quickButtons)===null||ae===void 0?void 0:ae.map(function(x){return x.uid}),worktimeUids:(G=h.serviceSettings)===null||G===void 0||(G=G.worktimes)===null||G===void 0?void 0:G.map(function(x){return x.uid})})}),console.log("agentObject:",re),A.next=6,(0,Y.sE)(re);case 6:ge=A.sent,console.log("updateAgent response:",ge),ge.code===200?(r.yw.destroy(),r.yw.success(O.formatMessage({id:"update.success"})),H(ge.data)):(r.yw.destroy(),r.yw.error(ge.message));case 9:case"end":return A.stop()}},n)}));return function(B){return o.apply(this,arguments)}}(),b=function(n){return Array.isArray(n)?n:n==null?void 0:n.fileList};return(0,s.useEffect)(function(){if(h){var o;i(h.avatar),k.setFieldValue("memberUid",h==null||(o=h.member)===null||o===void 0?void 0:o.uid)}},[h]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(K.A,{form:k,style:{marginLeft:"100px"},onFinish:g,initialValues:{nickname:w(h==null?void 0:h.nickname),email:h==null?void 0:h.email,mobile:h==null?void 0:h.mobile,description:w(h==null?void 0:h.description),memberUid:h==null||(v=h.member)===null||v===void 0?void 0:v.uid},children:[(0,t.jsx)(Te.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:b,label:O.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,t.jsxs)(P.G,{onSuccess:ne,onError:d,children:[(0,t.jsx)(Se.C,{src:l}),(0,t.jsx)(fe.ZP,{icon:(0,t.jsx)(q.Z,{}),children:O.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,t.jsx)(m.Z,{width:"md",name:"nickname",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u5BA2\u670D\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u670D\u6635\u79F0"}]}),(0,t.jsx)(m.Z,{width:"md",name:"email",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u90AE\u7BB1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,t.jsx)(m.Z,{width:"md",name:"mobile",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]}),(0,t.jsx)(Ee.Z,{width:"md",name:"description",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}]}),(0,t.jsx)(je.Z,{width:"md",name:"memberUid",label:"\u7ED1\u5B9A\u6210\u5458-\u7528\u4E8E\u8D26\u53F7\u767B\u5F55",fieldProps:{treeDefaultExpandAll:!0,treeData:ee,onChange:M},placeholder:"Please select",disabled:!0})]})})},Oe=Be,he=e(63434),we=e(31199),xe=function(){var v,S,y,k=Te.Z.useForm(),O=_()(k,1),Z=O[0],w=(0,U.Z)(),W=w.translateString,Q=(0,s.useState)(!1),h=_()(Q,2),H=h[0],I=h[1],T=(0,j.E)(function(d){return{currentAgent:d.currentAgent,setCurrentAgent:d.setCurrentAgent}}),l=T.currentAgent,i=T.setCurrentAgent;(0,s.useEffect)(function(){var d=j.E.subscribe(function(M){var g,b,o,n,B,F,ae;Z.setFieldValue("welcomeTip",W((g=M.currentAgent)===null||g===void 0||(g=g.serviceSettings)===null||g===void 0?void 0:g.welcomeTip)),Z.setFieldValue("topTip",W((b=M.currentAgent)===null||b===void 0||(b=b.serviceSettings)===null||b===void 0?void 0:b.topTip)),Z.setFieldValue("showTopTip",(o=M.currentAgent)===null||o===void 0||(o=o.serviceSettings)===null||o===void 0?void 0:o.showTopTip),Z.setFieldValue("leavemsgTip",W((n=M.currentAgent)===null||n===void 0||(n=n.serviceSettings)===null||n===void 0?void 0:n.leavemsgTip)),Z.setFieldValue("autoCloseMin",(B=M.currentAgent)===null||B===void 0||(B=B.serviceSettings)===null||B===void 0?void 0:B.autoCloseMin),Z.setFieldValue("showLogo",(F=M.currentAgent)===null||F===void 0||(F=F.serviceSettings)===null||F===void 0?void 0:F.showLogo),Z.setFieldValue("maxThreadCount",(ae=M.currentAgent)===null||ae===void 0?void 0:ae.maxThreadCount)});return d},[l]),(0,s.useEffect)(function(){var d;I(l==null||(d=l.serviceSettings)===null||d===void 0?void 0:d.showTopTip)},[l]);var D=function(M){var g;console.log("checked = ".concat(M.target.checked,", showTopTip:").concat(l==null||(g=l.serviceSettings)===null||g===void 0?void 0:g.showTopTip)),I(M.target.checked)},ee=function(M){console.log("onShowLogoChange = ".concat(M.target.checked))},ne=function(){var d=N()(u()().mark(function M(g){var b,o,n,B,F;return u()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log("onFinish:",g," showTopTip:",H),r.yw.loading("\u66F4\u65B0\u4E2D..."),B=R()(R()({},l),{},{serviceSettings:R()(R()({},l.serviceSettings),{},{topTip:(g==null?void 0:g.topTip)||"",showTopTip:H,welcomeTip:(g==null?void 0:g.welcomeTip)||"",leavemsgTip:(g==null?void 0:g.leavemsgTip)||"",autoCloseMin:(g==null?void 0:g.autoCloseMin)||25,showLogo:(g==null?void 0:g.showLogo)||!0,robotUid:(b=l.serviceSettings)===null||b===void 0||(b=b.robot)===null||b===void 0?void 0:b.uid,quickButtonUids:(o=l.serviceSettings)===null||o===void 0||(o=o.quickButtons)===null||o===void 0?void 0:o.map(function(re){return re.uid}),worktimeUids:(n=l.serviceSettings)===null||n===void 0||(n=n.worktimes)===null||n===void 0?void 0:n.map(function(re){return re.uid})}),maxThreadCount:(g==null?void 0:g.maxThreadCount)||10}),console.log("agentObject:",B),G.next=6,(0,Y.sE)(B);case 6:F=G.sent,console.log("updateAgent response:",F),F.code===200?(r.yw.destroy(),r.yw.success(intl.formatMessage({id:"update.success"})),i(F.data)):(r.yw.destroy(),r.yw.error(F.message));case 9:case"end":return G.stop()}},M)}));return function(g){return d.apply(this,arguments)}}();return(0,t.jsxs)(K.A,{form:Z,onFinish:ne,style:{marginLeft:"100px"},initialValues:{topTip:W(l==null||(v=l.serviceSettings)===null||v===void 0?void 0:v.topTip),showTopTip:l==null||(S=l.serviceSettings)===null||S===void 0?void 0:S.showTopTip,welcomeTip:W(l.serviceSettings.welcomeTip),leavemsgTip:W(l==null||(y=l.serviceSettings)===null||y===void 0?void 0:y.leavemsgTip),autoCloseMin:l==null?void 0:l.serviceSettings.autoCloseMin,showLogo:l==null?void 0:l.serviceSettings.showLogo,maxThreadCount:l==null?void 0:l.maxThreadCount},children:[(0,t.jsx)(he.Z,{name:"showTopTip",width:"md",label:"\u663E\u793A\u7F6E\u9876\u8BED",fieldProps:{onChange:D}}),H&&(0,t.jsx)(Ee.Z,{width:"md",name:"topTip",label:"\u7F6E\u9876\u8BED"}),(0,t.jsx)(Ee.Z,{width:"md",name:"welcomeTip",label:"\u6B22\u8FCE\u8BED"}),(0,t.jsx)(Ee.Z,{width:"md",name:"leavemsgTip",label:"\u79BB\u7EBF\u7559\u8A00\u63D0\u793A"}),(0,t.jsx)(we.Z,{width:"md",name:"autoCloseMin",label:"\u65E0\u65B0\u6D88\u606F\u4F1A\u8BDD\u81EA\u52A8\u5173\u95ED\u65F6\u957F(\u5355\u4F4D\uFF1A\u5206\u949F)",min:1}),(0,t.jsx)(we.Z,{width:"md",name:"maxThreadCount",label:"\u540C\u65F6\u6700\u5927\u63A5\u5F85\u6570\u91CF",min:1}),(0,t.jsx)(he.Z,{name:"showLogo",width:"md",label:"\u663E\u793ALogo",fieldProps:{onChange:ee}})]})},Ue=xe,$e=e(19632),Ze=e.n($e),Le=e(37326),We=e(55895),Ie=e(33725),Fe=e(64317),Ve=e(27484),_e=e.n(Ve),Ce=e(35612),Ke=e(10285),Ge=e.n(Ke),be=e(87676),Ne=e(76545);_e().extend(Ge());var Ae="HH:mm:ss",ze=function(){var v,S,y,k,O,Z=K.A.useForm(),w=_()(Z,1),W=w[0],Q=(0,ce.useIntl)(),h=(0,s.useRef)(!1),H=(0,s.useRef)(),I=(0,j.E)(function(A){return{currentAgent:A.currentAgent,setCurrentAgent:A.setCurrentAgent}}),T=I.currentAgent,l=I.setCurrentAgent,i=(0,Le.V)(function(A){return{robotResult:A.robotResult,setRobotResult:A.setRobotResult}}),D=i.robotResult,ee=i.setRobotResult,ne=(0,be.u)(function(A){return A.currentOrg}),d=(0,U.Z)(),M=d.translateString,g=(0,s.useState)([]),b=_()(g,2),o=b[0],n=b[1];(0,s.useEffect)(function(){var A;n(T==null||(A=T.serviceSettings)===null||A===void 0?void 0:A.worktimes);var x=j.E.subscribe(function(E){var a,p,c,f,V;W.setFieldValue("defaultRobot",(a=E.currentAgent)===null||a===void 0||(a=a.serviceSettings)===null||a===void 0?void 0:a.defaultRobot),W.setFieldValue("offlineRobot",(p=E.currentAgent)===null||p===void 0||(p=p.serviceSettings)===null||p===void 0?void 0:p.offlineRobot),W.setFieldValue("nonWorktimeRobot",(c=E.currentAgent)===null||c===void 0||(c=c.serviceSettings)===null||c===void 0?void 0:c.nonWorktimeRobot),W.setFieldValue("robotUid",(f=E.currentAgent)===null||f===void 0||(f=f.serviceSettings)===null||f===void 0||(f=f.robot)===null||f===void 0?void 0:f.uid),n((V=E.currentAgent)===null||V===void 0||(V=V.serviceSettings)===null||V===void 0?void 0:V.worktimes)});return x},[T]);var B=function(){var A=N()(u()().mark(function x(){var E,a;return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!h.current){c.next=3;break}return console.log("isLoading: 1",h.current),c.abrupt("return");case 3:return h.current=!0,r.yw.loading("loading"),E={pageNumber:0,pageSize:50,orgUid:ne.uid},c.next=8,(0,Ne.p0)(E);case 8:a=c.sent,console.log("queryRobotsByOrg: ",a),a.code===200?ee(a):r.yw.error(a.message),h.current=!1,r.yw.destroy();case 13:case"end":return c.stop()}},x)}));return function(){return A.apply(this,arguments)}}();(0,s.useEffect)(function(){var A;((A=D.data)===null||A===void 0||(A=A.content)===null||A===void 0?void 0:A.length)===0&&B()},[D]);var F=function(x){console.log("checked = ".concat(x))},ae=function(){var A=N()(u()().mark(function x(E){var a,p,c;return u()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return console.log("onFinish:",E),r.yw.loading(Q.formatMessage({id:"updating",defaultMessage:"updating"})),p=R()(R()({},T),{},{serviceSettings:R()(R()({},T.serviceSettings),{},{defaultRobot:E.defaultRobot,offlineRobot:E.offlineRobot,nonWorktimeRobot:E.nonWorktimeRobot,robotUid:E.robotUid,worktimeUids:o.map(function(C){return C==null?void 0:C.uid}),quickButtonUids:(a=T.serviceSettings)===null||a===void 0||(a=a.quickButtons)===null||a===void 0?void 0:a.map(function(C){return C.uid})}),maxThreadCount:(E==null?void 0:E.maxThreadCount)||10}),console.log("agentObject:",p),V.next=6,(0,Y.sE)(p);case 6:c=V.sent,console.log("updateAgent response:",c),c.code===200?(r.yw.destroy(),r.yw.success(Q.formatMessage({id:"update.success"})),l(c.data)):(r.yw.destroy(),r.yw.error(c.message));case 9:case"end":return V.stop()}},x)}));return function(E){return A.apply(this,arguments)}}(),G=function(){var x=[];return o.map(function(E){x.push({worktime:[_e()(E.startTime,Ae),_e()(E.endTime,Ae)]})}),x},re=function(){var A=N()(u()().mark(function x(E,a,p){var c,f,V;return u()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return console.log("onWorktimeChange:",p,a),f={uid:(c=o[p])===null||c===void 0?void 0:c.uid,startTime:a[0],endTime:a[1]},pe.next=4,(0,Ce.AW)(f);case 4:V=pe.sent,console.log("updateWorktime response:",V),V.code===200||r.yw.error(V.message);case 7:case"end":return pe.stop()}},x)}));return function(E,a,p){return A.apply(this,arguments)}}(),ge=function(){var A=N()(u()().mark(function x(){var E,a;return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("createWorktime"),E={startTime:"00:00:00",endTime:"23:59:59"},c.next=4,(0,Ce.gk)(E);case 4:a=c.sent,console.log("createWorktime response:",a),a.code===200?n([].concat(Ze()(o),[a.data])):r.yw.error(a.message);case 7:case"end":return c.stop()}},x)}));return function(){return A.apply(this,arguments)}}(),ye=function(){var A=N()(u()().mark(function x(E){var a,p,c,f;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log("deleteWorktime:",E,(a=o[E])===null||a===void 0?void 0:a.uid),c={uid:(p=o[E])===null||p===void 0?void 0:p.uid},C.next=4,(0,Ce.$$)(c);case 4:f=C.sent,console.log("deleteWorktime response:",f),f.code===200?n(o.filter(function(pe,St){return St!==E})):r.yw.error(f.message);case 7:case"end":return C.stop()}},x)}));return function(E){return A.apply(this,arguments)}}();return(0,s.useEffect)(function(){console.log("worktimes:",o),W.setFieldValue("worktimes",G())},[o]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(K.A,{form:W,style:{marginLeft:"100px"},initialValues:{defaultRobot:T==null||(v=T.serviceSettings)===null||v===void 0?void 0:v.defaultRobot,offlineRobot:T==null||(S=T.serviceSettings)===null||S===void 0?void 0:S.offlineRobot,nonWorktimeRobot:T==null||(y=T.serviceSettings)===null||y===void 0?void 0:y.nonWorktimeRobot,robotUid:T==null||(k=T.serviceSettings)===null||k===void 0||(k=k.robot)===null||k===void 0?void 0:k.uid},onFinish:ae,children:[(0,t.jsx)(he.Z,{name:"defaultRobot",width:"md",label:"\u9ED8\u8BA4\u542F\u7528\u673A\u5668\u4EBA"}),(0,t.jsx)(he.Z,{name:"offlineRobot",width:"md",label:"\u65E0\u5BA2\u670D\u5728\u7EBF\u65F6\u542F\u7528\u673A\u5668\u4EBA"}),(0,t.jsx)(he.Z,{name:"nonWorktimeRobot",width:"md",label:"\u975E\u5DE5\u4F5C\u65F6\u95F4\u542F\u7528\u673A\u5668\u4EBA"}),(0,t.jsx)(We.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\uFF0C\u652F\u6301\u591A\u4E2A",creatorRecord:{worktime:[_e()("00:00:00",Ae),_e()("23:59:59",Ae)]},initialValue:G(),creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664"},itemRender:function(x){var E=x.listDom,a=x.action;return(0,t.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[E,a]})},min:1,max:4,actionRef:H,actionGuard:{beforeAddRow:function(){var A=N()(u()().mark(function E(a,p,c){return u()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return console.log("beforeAddRow:",a,p),V.next=3,ge();case 3:return V.abrupt("return",new Promise(function(C){C(!0)}));case 4:case"end":return V.stop()}},E)}));function x(E,a,p){return A.apply(this,arguments)}return x}(),beforeRemoveRow:function(){var A=N()(u()().mark(function E(a,p){return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("beforeRemoveRow:",a),f.next=3,ye(a);case 3:return f.abrupt("return",new Promise(function(V){if(a===0){V(!1);return}V(!0)}));case 4:case"end":return f.stop()}},E)}));function x(E,a){return A.apply(this,arguments)}return x}()},children:function(x,E,a){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Ie.Z.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(c,f){re(c,f,E)},format:Ae}},"worktime")})}}),(0,t.jsx)(Fe.Z,{name:"robotUid",label:"\u673A\u5668\u4EBA",width:"md",options:D.data.content.map(function(A){return{value:A.uid,label:M(A.nickname)}}),fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u673A\u5668\u4EBA",value:T==null||(O=T.serviceSettings)===null||O===void 0||(O=O.robot)===null||O===void 0?void 0:O.uid,onChange:F}})]})})},Qe=ze,He=function(){var v=(0,ce.useAccess)();return v.canDebug&&console.log("leaveMsg canDebug"),(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:(0,t.jsx)(ce.Access,{accessible:v.canDebug(),fallback:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ce.FormattedMessage,{id:$.h5})}),children:"leave msg"})})})},Je=He,Xe=e(9465),Me=e(40056),De=e(96074),Ye=function(){var v,S,y=(0,ce.useIntl)(),k=(0,U.Z)(),O=k.translateString,Z=K.A.useForm(),w=_()(Z,1),W=w[0],Q=(0,be.u)(function(d){return d.currentOrg}),h=(0,s.useState)(),H=_()(h,2),I=H[0],T=H[1],l=(0,j.E)(function(d){return{currentAgent:d.currentAgent,setCurrentAgent:d.setCurrentAgent}}),i=l.currentAgent,D=l.setCurrentAgent,ee=function(){var d=N()(u()().mark(function M(){var g,b;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.yw.loading(y.formatMessage({id:"loading",defaultMessage:"Loading"})),g={pageNumber:0,pageSize:50,orgUid:Q.uid},n.next=4,(0,Xe.qL)(g);case 4:b=n.sent,console.log("getAllQuickbuttons response:",g,b),r.yw.destroy(),b.code===200?T(b):r.yw.error(b.message);case 8:case"end":return n.stop()}},M)}));return function(){return d.apply(this,arguments)}}();(0,s.useEffect)(function(){ee()},[Q]),(0,s.useEffect)(function(){var d;W.setFieldValue("quickButtonUids",(i==null||(d=i.serviceSettings)===null||d===void 0?void 0:d.quickButtons.map(function(M){return M.uid}))||[])},[i]);var ne=function(){var d=N()(u()().mark(function M(g){var b,o,n,B,F;return u()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log("onFinish",g),B=R()(R()({},i),{},{serviceSettings:R()(R()({},i.serviceSettings),{},{robotUid:(b=i.serviceSettings)===null||b===void 0||(b=b.robot)===null||b===void 0?void 0:b.uid,quickButtonUids:g.quickButtonUids,faqUids:i==null||(o=i.serviceSettings)===null||o===void 0||(o=o.faqs)===null||o===void 0?void 0:o.map(function(re){return re.uid}),worktimeUids:i==null||(n=i.serviceSettings)===null||n===void 0||(n=n.worktimes)===null||n===void 0?void 0:n.map(function(re){return re.uid})})}),console.log("agentObject:",B),G.next=5,(0,Y.sE)(B);case 5:F=G.sent,console.log("updateAgent response:",F),F.code===200?(r.yw.destroy(),r.yw.success(y.formatMessage({id:"update.success"})),D(F.data)):(r.yw.destroy(),r.yw.error(F.message));case 8:case"end":return G.stop()}},M)}));return function(g){return d.apply(this,arguments)}}();return(0,t.jsxs)("div",{children:[(0,t.jsx)(Me.Z,{message:y.formatMessage({id:"quickbutton.guide",defaultMessage:"Please goto Knowledge base -> QuickButton -> Create, then add quickbutton here"}),type:"success"}),(0,t.jsx)(De.Z,{}),(0,t.jsx)(K.A,{form:W,layout:"vertical",initialValues:{quickButtonUids:(i==null||(v=i.serviceSettings)===null||v===void 0?void 0:v.quickButtons.map(function(d){return d.uid}))||[]},onFinish:ne,children:(0,t.jsx)(Fe.Z,{name:"quickButtonUids",width:"md",label:y.formatMessage({id:"quickbutton",defaultMessage:"QuickButton"}),options:I==null||(S=I.data)===null||S===void 0?void 0:S.content.map(function(d){return{label:O(d.title),value:d.uid}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,t.jsx)(t.Fragment,{children:y.formatMessage({id:"choose",defaultMessage:"Please Choose"})})}})})]})},qe=Ye,et=e(40401),tt=e(48489),nt=function(){var v,S,y=K.A.useForm(),k=_()(y,1),O=k[0],Z=(0,ce.useIntl)(),w=(0,U.Z)(),W=w.translateString,Q=(0,be.u)(function(d){return d.currentOrg}),h=(0,s.useState)(),H=_()(h,2),I=H[0],T=H[1],l=(0,j.E)(function(d){return{currentAgent:d.currentAgent,setCurrentAgent:d.setCurrentAgent}}),i=l.currentAgent,D=l.setCurrentAgent,ee=function(){var d=N()(u()().mark(function M(){var g,b;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.yw.loading(Z.formatMessage({id:"loading",defaultMessage:"Loading"})),g={pageNumber:0,pageSize:50,orgUid:Q.uid},n.next=4,(0,et.pf)(g);case 4:b=n.sent,console.log("getAllFaqs response:",g,b),r.yw.destroy(),b.code===200?T(b):r.yw.error(b.message);case 8:case"end":return n.stop()}},M)}));return function(){return d.apply(this,arguments)}}();(0,s.useEffect)(function(){ee()},[Q]),(0,s.useEffect)(function(){var d;O.setFieldValue("faqUids",i==null||(d=i.serviceSettings)===null||d===void 0?void 0:d.faqs.map(function(M){return M.uid}))},[i]);var ne=function(){var d=N()(u()().mark(function M(g){var b,o,n,B,F;return u()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log("onFinish",g),B=R()(R()({},i),{},{serviceSettings:R()(R()({},i==null?void 0:i.serviceSettings),{},{robotUid:i==null||(b=i.serviceSettings)===null||b===void 0||(b=b.robot)===null||b===void 0?void 0:b.uid,quickButtonUids:i==null||(o=i.serviceSettings)===null||o===void 0?void 0:o.quickButtons.map(function(re){return re.uid}),faqUids:g.faqUids,worktimeUids:i==null||(n=i.serviceSettings)===null||n===void 0||(n=n.worktimes)===null||n===void 0?void 0:n.map(function(re){return re.uid})})}),console.log("agentObject:",B),G.next=5,(0,Y.sE)(B);case 5:F=G.sent,console.log("updateAgent response:",F),F.code===200?(r.yw.destroy(),r.yw.success(Z.formatMessage({id:"update.success"})),D(F.data)):(r.yw.destroy(),r.yw.error(F.message));case 8:case"end":return G.stop()}},M)}));return function(g){return d.apply(this,arguments)}}();return(0,t.jsxs)("div",{children:[(0,t.jsx)(Me.Z,{message:"\u8BF7\u5148\u5230 \u77E5\u8BC6\u5E93 -> \u5E38\u89C1\u95EE\u9898 -> \u65B0\u5EFA\uFF0C\u521B\u5EFA\u5E38\u89C1\u95EE\u9898\u4E4B\u540E\uFF0C\u518D\u6765\u6DFB\u52A0",type:"success",action:(0,t.jsx)(fe.ZP,{type:"link",icon:(0,t.jsx)(tt.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/")},children:Z.formatMessage({id:"setting.helpdoc"})})}),(0,t.jsx)(Me.Z,{message:"\u63D0\u4EA4\u4E4B\u540E\uFF0C\u5BF9\u65B0\u4F1A\u8BDD\u7ACB\u5373\u751F\u6548\u3002\u5BF9\u4E8E\u8FDB\u884C\u4E2D\u4F1A\u8BDD\uFF0C\u9700\u8981\u5173\u95ED\u4E4B\u540E\uFF0C\u91CD\u65B0\u8FDB\u5165\u624D\u4F1A\u751F\u6548",type:"warning",style:{marginTop:10}}),(0,t.jsx)(De.Z,{}),(0,t.jsx)(K.A,{form:O,layout:"vertical",initialValues:{faqUids:(i==null||(v=i.serviceSettings)===null||v===void 0?void 0:v.faqs.map(function(d){return d.uid}))||[]},onFinish:ne,children:(0,t.jsx)(Fe.Z,{name:"faqUids",width:"md",label:Z.formatMessage({id:"menu.knowledge.faq"}),options:I==null||(S=I.data)===null||S===void 0?void 0:S.content.map(function(d){return{label:W(d.title),value:d.uid}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,t.jsx)(ce.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})})]})},rt=nt,at=e(52688),st=function(){var v,S=(0,ce.useIntl)(),y=K.A.useForm(),k=_()(y,1),O=k[0],Z=(0,j.E)(function(h){return{currentAgent:h.currentAgent,setCurrentAgent:h.setCurrentAgent}}),w=Z.currentAgent,W=Z.setCurrentAgent;(0,s.useEffect)(function(){var h=j.E.subscribe(function(H){var I;O.setFieldValue("showRateBtn",(I=H.currentAgent)===null||I===void 0||(I=I.serviceSettings)===null||I===void 0?void 0:I.showRateBtn)});return h},[w]);var Q=function(){var h=N()(u()().mark(function H(I){var T,l;return u()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("handleShowRateSwitchChange:",I),T=R()(R()({},w),{},{serviceSettings:R()(R()({},w.serviceSettings),{},{showRateBtn:I})}),console.log("agentObject:",T),D.next=5,(0,Y.sE)(T);case 5:l=D.sent,console.log("updateAgent response:",l),l.code===200?(r.yw.destroy(),r.yw.success(S.formatMessage({id:"update.success"})),W(l.data)):(r.yw.destroy(),r.yw.error(l.message));case 8:case"end":return D.stop()}},H)}));return function(I){return h.apply(this,arguments)}}();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(K.A,{form:O,submitter:{render:!1},initialValues:{showRateBtn:w==null||(v=w.serviceSettings)===null||v===void 0?void 0:v.showRateBtn},children:(0,t.jsx)(at.Z,{width:"md",name:"showRateBtn",label:"\u662F\u5426\u663E\u793A\u8BC4\u4EF7\u6309\u94AE",fieldProps:{onChange:Q}})})})},it=st,ot=function(){var v=(0,ce.useIntl)(),S=[{key:"quickbutton",label:v.formatMessage({id:"quickbutton",defaultMessage:"QuickButton"}),children:(0,t.jsx)(qe,{})},{key:"faq",label:(0,t.jsx)(ce.FormattedMessage,{id:"menu.knowledge.faq",defaultMessage:"FAQ"}),children:(0,t.jsx)(rt,{})},{key:"rate",label:"\u8BC4\u4EF7\u8BBE\u7F6E",children:(0,t.jsx)(it,{})},{key:"leaveMsg",label:"\u7559\u8A00\u8BBE\u7F6E",children:(0,t.jsx)(Je,{})}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ue.Z,{tabPosition:"left",items:S})})},ut=ot,lt=e(36649),dt=e(45106),ct=e(34937),mt=e(60478),gt=function(){var v=(0,ce.useIntl)(),S=(0,s.useState)([]),y=_()(S,2),k=y[0],O=y[1],Z=function(Q){console.log(Q)},w=[{key:"basic",label:v.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,t.jsx)(Oe,{})},{key:"serviceSettings",label:v.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,t.jsx)(Ue,{})},{key:"robot",label:v.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,t.jsx)(Qe,{})},{key:"advanced",label:v.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,t.jsx)(ut,{})},{key:"channel",label:v.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,t.jsx)(lt.Z,{type:$.Nj})},{key:"channelsocial",label:"\u793E\u4EA4\u6E20\u9053",children:(0,t.jsx)(dt.Z,{type:$.Nj})},{key:"channelshop",label:"\u7535\u5546\u6E20\u9053",children:(0,t.jsx)(mt.Z,{type:$.Nj})},{key:"channelforeign",label:"\u6D77\u5916\u6E20\u9053",children:(0,t.jsx)(ct.Z,{type:$.Nj})}];return(0,s.useEffect)(function(){O(w)},[]),(0,t.jsx)(ue.Z,{defaultActiveKey:"1",items:k,onChange:Z})},vt=gt,pt=e(39825),ft=e(11475),ht=e(64789),Re=e(85576),_t=e(86250),Pe=e(2487),ke=e(952),bt=function(v){var S=v.open,y=v.onClose,k=v.onSubmit,O=ke.ZP.useForm(),Z=_()(O,1),w=Z[0],W=(0,be.u)(function(i){return i.currentOrg}),Q=le(function(i){return i.memberResult}),h=function(D,ee){ee.title=D.nickname,ee.value=D.uid},H=(0,s.useMemo)(function(){for(var i=[],D=0;D<Q.data.content.length;D++){var ee={title:"",value:"",children:[]};h(Q.data.content[D],ee),i.push(ee)}return i},[Q]),I=function(){console.log("handleOk"),w.validateFields().then(function(D){console.log("form values:",D);var ee=w.getFieldValue("nickname"),ne=w.getFieldValue("email"),d=w.getFieldValue("mobile"),M=w.getFieldValue("memberUid"),g={nickname:ee,email:ne,mobile:d,memberUid:M,orgUid:W.uid};console.log("agent:",g),k(g)}).catch(function(D){console.log("Form errors:",D)})},T=function(){console.log("handleCancel"),y()},l=function(D){console.log("onTreeSelectChange:",D);for(var ee=0;ee<Q.data.content.length;ee++){var ne=Q.data.content[ee];ne.uid===D&&(console.log("element:",ne),w.setFieldsValue({nickname:ne.nickname}),w.setFieldsValue({email:ne.email}),w.setFieldsValue({mobile:ne.mobile}))}};return(0,t.jsx)("div",{children:(0,t.jsx)(Re.Z,{title:"\u521B\u5EFA\u5BA2\u670D",open:S,onOk:I,onCancel:T,children:(0,t.jsxs)(ke.ZP,{form:w,name:"agentForm",style:{maxWidth:400},submitter:!1,children:[(0,t.jsx)(je.Z,{label:"\u7ED1\u5B9A\u6210\u5458",name:"memberUid",tooltip:"\u8BF7\u5148\u5230\u7EC4\u7EC7-\u300B\u6210\u5458-\u300B\u521B\u5EFA\u6210\u5458",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458!"}],fieldProps:{multiple:!1,treeDefaultExpandAll:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",onChange:l,treeData:H}}),(0,t.jsx)(m.Z,{label:"\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}]}),(0,t.jsx)(m.Z,{label:"\u90AE\u7BB1",name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"}]}),(0,t.jsx)(m.Z,{label:"\u624B\u673A\u53F7",name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]})]})})})},At=bt,Et=e(84125),yt=function(){var v=(0,ce.useIntl)(),S=(0,s.useRef)(!1),y=(0,U.Z)(),k=y.translateString,O=y.translateStringTranct,Z=(0,pt.Z)(),w=Z.isDarkMode,W=(0,s.useState)(!1),Q=_()(W,2),h=Q[0],H=Q[1],I=(0,be.u)(function(a){return a.currentOrg}),T=le(function(a){return a.setMemberResult}),l=(0,j.E)(function(a){return{agentResult:a.agentResult,currentAgent:a.currentAgent,insertAgent:a.insertAgent,setAgentResult:a.setAgentResult,setCurrentAgent:a.setCurrentAgent,deleteCurrentAgent:a.deleteCurrentAgent}}),i=l.agentResult,D=l.currentAgent,ee=l.insertAgent,ne=l.setAgentResult,d=l.setCurrentAgent,M=l.deleteCurrentAgent,g=Re.Z.useModal(),b=_()(g,2),o=b[0],n=b[1],B=function(p){o.confirm({title:v.formatMessage({id:"deleteTip"}),icon:(0,t.jsx)(ft.Z,{}),content:"".concat(v.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(k(p.nickname),"\u3011\uFF1F"),onOk:function(){F(p)},onCancel:function(){},okText:v.formatMessage({id:"ok"}),cancelText:v.formatMessage({id:"cancel"})})},F=function(){var a=N()(u()().mark(function p(c){var f;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log("delete agent",c),r.yw.loading(v.formatMessage({id:"deleting",defaultMessage:"Deleting"})),C.next=4,(0,Y.Lr)(c);case 4:f=C.sent,console.log("delete agent response",f),f.code===200?(r.yw.destroy(),r.yw.success(v.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),M(c.uid)):(r.yw.destroy(),r.yw.error(f.message));case 7:case"end":return C.stop()}},p)}));return function(c){return a.apply(this,arguments)}}(),ae=function(){var a=N()(u()().mark(function p(){var c,f;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!S.current){C.next=3;break}return console.log("isLoading: 1",S.current),C.abrupt("return");case 3:return S.current=!0,r.yw.loading("loading"),c={pageNumber:0,pageSize:50,orgUid:I.uid},C.next=8,(0,Y._t)(c);case 8:f=C.sent,console.log("queryAgentsByOrg: ",f),f.code===200?(r.yw.destroy(),ne(f)):(r.yw.destroy(),r.yw.error(f.message)),S.current=!1;case 12:case"end":return C.stop()}},p)}));return function(){return a.apply(this,arguments)}}(),G=function(){var a=N()(u()().mark(function p(){var c,f;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return c={pageNumber:0,pageSize:50,orgUid:I.uid},C.next=3,(0,Et.z_)(c);case 3:f=C.sent,console.log("queryAllMembers:",c,f),f.code===200?T(f):r.yw.error(f.message);case 6:case"end":return C.stop()}},p)}));return function(){return a.apply(this,arguments)}}();(0,s.useEffect)(function(){ae(),G()},[]);var re=function(){H(!0)},ge=function(){var a=N()(u()().mark(function p(c){var f;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log("save agent"),r.yw.loading(v.formatMessage({id:"creating",defaultMessage:"Creating"})),C.next=4,(0,Y.x_)(c);case 4:f=C.sent,console.log("create agent:",f),f.code===200?(r.yw.destroy(),r.yw.success(v.formatMessage({id:"create.success"})),ee(f.data),H(!1)):(r.yw.destroy(),H(!1),r.yw.error(f.message));case 7:case"end":return C.stop()}},p)}));return function(c){return a.apply(this,arguments)}}(),ye=function(){H(!1)},A=function(){re()},x=function(p,c){d(p)},E=function(p){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("span",{style:{color:"#999999",fontSize:12},children:[p.status===$.R&&"[\u63A5\u5F85]",p.status===$.tU&&"[\u5FD9\u788C]",p.status===$.LZ&&"[\u4E0B\u7EBF]",p.connected?"\u8FDE\u63A5":"\u65AD\u5F00"]})})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(_t.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,t.jsx)(fe.ZP,{size:"small",type:"primary",icon:(0,t.jsx)(ht.Z,{}),onClick:A,children:v.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,t.jsx)(fe.ZP,{size:"small",onClick:ae,children:v.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,t.jsx)(fe.ZP,{onClick:function(){return B(D)},size:"small",danger:!0,disabled:(D==null?void 0:D.uid)==="",children:v.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,t.jsx)(Pe.Z,{itemLayout:"horizontal",dataSource:i.data.content,renderItem:function(p,c){return(0,t.jsx)(Pe.Z.Item,{style:D.uid===p.uid?{backgroundColor:w?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return x(p,c)},children:(0,t.jsx)(Pe.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,t.jsx)(Se.C,{src:p.avatar}),title:(0,t.jsx)(t.Fragment,{children:O(p.nickname)}),description:E(p)})})}}),(0,t.jsx)(At,{open:h,onClose:ye,onSubmit:ge}),n]})},Tt=yt,Ft=e(77154),Ct=z.Z.Sider,Mt=z.Z.Content,Pt=function(){var v=(0,Ft.Z)(),S=v.leftSiderStyle,y=v.leftSiderWidth;return(0,s.useEffect)(function(){},[]),(0,t.jsxs)(z.Z,{children:[(0,t.jsx)(Ct,{width:y,style:S,children:(0,t.jsx)(Tt,{})}),(0,t.jsx)(z.Z,{children:(0,t.jsx)(Mt,{children:(0,t.jsx)(vt,{})})})]})},jt=Pt}}]);
