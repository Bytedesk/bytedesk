"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{73803:function(G,E,e){var t=e(85615),d=e(66419),O=e(86745);function l(){var C=(0,O.useIntl)(),m=function(s){return s&&s.startsWith(t.Vo)?C.formatMessage({id:s,defaultMessage:s}):s},I=function(s){return s!=null&&s.startsWith(t.Vo)?(0,d.aS)(C.formatMessage({id:s}),10):(0,d.aS)(s,10)};return{translateString:m,translateStringTranct:I}}E.Z=l},22078:function(G,E,e){e.r(E),e.d(E,{default:function(){return H}});var t=e(15009),d=e.n(t),O=e(97857),l=e.n(O),C=e(99289),m=e.n(C),I=e(5574),v=e.n(I),s=e(67294),R=e(7134),w=e(14726),p=e(34994),P=e(5966),b=e(90672),B=e(86745),U=e(88484),K=e(60247),y=e(16761),a=e(80049),A=e(66723),r=e(73803),o=e(66419),x=e(85576),n=e(85893),u=function(M){var Z=M.open,g=M.onClose,F=(0,B.useIntl)(),i=function(){g()},V=function(){g()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x.Z,{title:F.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"}),open:Z,footer:null,onCancel:V,children:(0,n.jsxs)(p.A,{initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},onFinish:function(){var S=m()(d()().mark(function D(f){var N,L;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(console.log("changePassword:",f),!(f.newPassword.trim().length<6)){h.next=4;break}return a.yw.error("password length should not be less than 6"),h.abrupt("return");case 4:if(f.newPassword===f.confirmPassword){h.next=7;break}return a.yw.error("New password and confirm password do not match"),h.abrupt("return");case 7:return N={oldPassword:f.oldPassword,newPassword:f.newPassword},h.next=10,(0,y.Cp)(N);case 10:L=h.sent,console.log("changePassword response:",L),L.code===200?(a.yw.success("Password changed successfully!"),i()):a.yw.error(L.message);case 13:case"end":return h.stop()}},D)}));return function(D){return S.apply(this,arguments)}}(),children:[(0,n.jsx)(P.Z.Password,{name:"oldPassword",label:"\u539F\u5BC6\u7801(\u624B\u673A\u53F7\u76F4\u63A5\u767B\u5F55\u7528\u6237\uFF0C\u53EF\u4EE5\u7559\u7A7A)"}),(0,n.jsx)(P.Z.Password,{name:"newPassword",label:"\u65B0\u5BC6\u7801"}),(0,n.jsx)(P.Z.Password,{name:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801"})]})})})},T=u,Y={labelCol:{span:8},wrapperCol:{span:8}},z=function(){var M=(0,B.useIntl)(),Z=(0,r.Z)(),g=Z.translateString,F=(0,K.L)(function(j){return{userInfo:j.userInfo,setUserInfo:j.setUserInfo}}),i=F.userInfo,V=F.setUserInfo,S=(0,s.useState)(""),D=v()(S,2),f=D[0],N=D[1],L=(0,s.useState)(!1),Q=v()(L,2),h=Q[0],k=Q[1],_=function(){k(!0)},ee=function(){k(!1)},ne=function(c){console.log("handleUploadSuccess:",c),N(c)},ae=function(c){console.log("handleUploadError:",c)},se=function(){var j=m()(d()().mark(function c(q){var X,W;return d()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return X=l()(l()(l()({},i),q),{},{avatar:f}),console.log(X),$.next=4,(0,y.ck)(X);case 4:W=$.sent,console.log("updateProfile response:",W),W.code===200?(a.yw.success(M.formatMessage({id:"update.success"})),W.data.username!==i.username?(0,o.NZ)():V(W.data)):a.yw.error(W.message);case 7:case"end":return $.stop()}},c)}));return function(q){return j.apply(this,arguments)}}(),re=function(c){return Array.isArray(c)?c:c==null?void 0:c.fileList};return(0,s.useEffect)(function(){i&&N(i.avatar)},[i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.A,l()(l()({},Y),{},{onFinish:se,initialValues:{username:i.username,nickname:i.nickname,email:i.email,mobile:i.mobile,description:g(i.description)},children:[(0,n.jsx)(p.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:re,label:M.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,n.jsxs)(A.G,{onSuccess:ne,onError:ae,children:[(0,n.jsx)(R.C,{src:f}),(0,n.jsx)(w.ZP,{icon:(0,n.jsx)(U.Z,{}),children:M.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,n.jsx)(P.Z,{name:"username",label:"\u767B\u5F55\u7528\u6237\u540D(\u4FEE\u6539\u7528\u6237\u540D\u4E4B\u540E\uFF0C\u9700\u8981\u91CD\u65B0\u767B\u5F55)",rules:[{required:!0}]}),(0,n.jsx)(w.ZP,{onClick:_,children:M.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"})}),(0,n.jsx)(P.Z,{name:"nickname",label:"\u6635\u79F0",rules:[{required:!0}]}),(0,n.jsx)(P.Z,{name:"email",label:i.emailVerified?"\u90AE\u7BB1(\u5DF2\u9A8C\u8BC1)":"\u90AE\u7BB1(\u5F85\u9A8C\u8BC1)",rules:[{type:"email"}],disabled:!0}),(0,n.jsx)(P.Z,{name:"mobile",label:i.mobileVerified?"\u624B\u673A\u53F7(\u5DF2\u9A8C\u8BC1)":"\u624B\u673A\u53F7(\u5F85\u9A8C\u8BC1)",disabled:!0}),(0,n.jsx)(b.Z,{name:"description",label:"\u63CF\u8FF0"})]})),(0,n.jsx)(T,{open:h,onClose:ee})]})},H=z},60247:function(G,E,e){e.d(E,{L:function(){return C}});var t=e(85615),d=e(64529),O=e(782),l=e(71381),C=(0,d.Ue)()((0,O.mW)((0,O.tJ)((0,l.n)(function(m,I){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(s){m({userInfo:s})},setDeviceUid:function(s){m({deviceUid:s})},deleteUserInfo:function(){return m({},!0)}}}),{name:t.Em})))},66723:function(G,E,e){e.d(E,{G:function(){return R}});var t=e(97857),d=e.n(t),O=e(67294),l=e(66476),C=e(85615),m=e(27484),I=e.n(m),v=e(80049),s=e(85893),R=function(p){var P=p.children,b=p.onSuccess,B=p.onError,U={file:null,file_name:"test.png",file_type:"image/png"},K={name:"file",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(C.LA)},data:U,showUploadList:!1,beforeUpload:function(a){console.log("beforeUpload",a);var A=I()(new Date).format("YYYYMMDDHHmmss")+"_"+a.name;U.file=a,U.file_name=A,U.file_type=a.type,console.log("beforeUpload",U)},onChange:function(a){if(a.file.status!=="uploading"&&console.log(a.file,a.fileList),a.file.status==="done"){var A=a.file.response.data;console.log("url: ",A),b(A),v.yw.success("".concat(a.file.name," \u4E0A\u4F20\u6210\u529F"))}else a.file.status==="error"&&(v.yw.error("".concat(a.file.name," \u4E0A\u4F20\u5931\u8D25")),B(a.file))}};return(0,s.jsx)(l.Z,d()(d()({},K),{},{children:P}))}},85576:function(G,E,e){e.d(E,{Z:function(){return A}});var t=e(56080),d=e(38657),O=e(56745),l=e(67294),C=e(93967),m=e.n(C),I=e(31058),v=e(8745),s=e(53124),R=e(35792),w=e(32409),p=e(4941),P=e(71194),b=function(r,o){var x={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&o.indexOf(n)<0&&(x[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(r);u<n.length;u++)o.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(r,n[u])&&(x[n[u]]=r[n[u]]);return x};const B=r=>{const{prefixCls:o,className:x,closeIcon:n,closable:u,type:T,title:Y,children:z,footer:H}=r,J=b(r,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:M}=l.useContext(s.E_),Z=M(),g=o||M("modal"),F=(0,R.Z)(Z),[i,V,S]=(0,P.ZP)(g,F),D=`${g}-confirm`;let f={};return T?f={closable:u!=null?u:!1,title:"",footer:"",children:l.createElement(w.O,Object.assign({},r,{prefixCls:g,confirmPrefixCls:D,rootPrefixCls:Z,content:z}))}:f={closable:u!=null?u:!0,title:Y,footer:H!==null&&l.createElement(p.$,Object.assign({},r)),children:z},i(l.createElement(I.s,Object.assign({prefixCls:g,className:m()(V,`${g}-pure-panel`,T&&D,T&&`${D}-${T}`,x,S,F)},J,{closeIcon:(0,p.b)(g,n),closable:u},f)))};var U=(0,v.i)(B),K=e(94423);function y(r){return(0,t.ZP)((0,t.uW)(r))}const a=O.Z;a.useModal=K.Z,a.info=function(o){return(0,t.ZP)((0,t.cw)(o))},a.success=function(o){return(0,t.ZP)((0,t.vq)(o))},a.error=function(o){return(0,t.ZP)((0,t.AQ)(o))},a.warning=y,a.warn=y,a.confirm=function(o){return(0,t.ZP)((0,t.Au)(o))},a.destroyAll=function(){for(;d.Z.length;){const o=d.Z.pop();o&&o()}},a.config=t.ai,a._InternalPanelDoNotUseOrYouWillBeFired=U;var A=a}}]);
