"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4744],{11984:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(17082),r=n(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},s=n(64423),a=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:i}))};var c=r.forwardRef(a)},50484:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(17082),r=n(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=n(64423),a=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:i}))};var c=r.forwardRef(a)},70458:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(17082),r=n(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=n(64423),a=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:i}))};var c=r.forwardRef(a)},69957:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(17082),r=n(44194),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=n(64423),a=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:i}))};var c=r.forwardRef(a)},8091:function(e,t,n){var o=n(17082),r=n(51190),i=n(19753),s=n(44194),a=n(84686),c=n(93288),l=n(31549),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var n=e.fieldProps,d=e.children,f=e.params,h=e.proFieldProps,p=e.mode,g=e.valueEnum,m=e.request,y=e.showSearch,v=e.options,x=(0,r.Z)(e,u),w=(0,s.useContext)(a.Z);return(0,l.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,i.h)(g),request:m,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:v,mode:p,showSearch:y,getPopupContainer:w.getPopupContainer},n),ref:t,proFieldProps:h},x),{},{children:d}))},h=s.forwardRef((function(e,t){var n=e.fieldProps,u=e.children,f=e.params,h=e.proFieldProps,p=e.mode,g=e.valueEnum,m=e.request,y=e.options,v=(0,r.Z)(e,d),x=(0,o.Z)({options:y,mode:p||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),w=(0,s.useContext)(a.Z);return(0,l.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,i.h)(g),request:m,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:w.getPopupContainer},x),ref:t,proFieldProps:h},v),{},{children:u}))})),p=s.forwardRef(f);p.SearchSelect=h,p.displayName="ProFormComponent",t.Z=p},11607:function(e,t,n){var o=n(17082),r=n(51190),i=n(44194),s=n(93288),a=n(31549),c=["fieldProps","proFieldProps"],l=function(e,t){var n=e.fieldProps,i=e.proFieldProps,l=(0,r.Z)(e,c);return(0,a.jsx)(s.Z,(0,o.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:i},l))};t.Z=i.forwardRef(l)},39666:function(){},635:function(e,t,n){n.d(t,{Aq:function(){return Tt},ZX:function(){return qt},HH:function(){return Se},a9:function(){return rn},Mw:function(){return dn},x$:function(){return At},tV:function(){return zt},yn:function(){return Y},Fb:function(){return X},_K:function(){return oe}});var o=n(31549);function r(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=r(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var i=n(22450),s=n(44194),a=n(19334);function c(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var l=n(56321);const u=(0,s.createContext)(null),d=u.Provider,f=i.Qj.error001();function h(e,t){const n=(0,s.useContext)(u);if(null===n)throw new Error(f);return(0,a.s)(n,e,t)}function p(){const e=(0,s.useContext)(u);if(null===e)throw new Error(f);return(0,s.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const g={display:"none"},m={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},y="react-flow__node-desc",v="react-flow__edge-desc",x=e=>e.ariaLiveMessage;function w({rfId:e}){const t=h(x);return(0,o.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:m,children:t})}function b({rfId:e,disableKeyboardA11y:t}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:`${y}-${e}`,style:g,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,o.jsx)("div",{id:`${v}-${e}`,style:g,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,o.jsx)(w,{rfId:e})]})}const S=e=>e.userSelectionActive?"none":"all";function C({position:e="top-left",children:t,className:n,style:i,...s}){const a=h(S),c=`${e}`.split("-");return(0,o.jsx)("div",{className:r(["react-flow__panel",n,...c]),style:{...i,pointerEvents:a},...s,children:t})}function E({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,o.jsx)(C,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const _=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},k=e=>e.id;function M(e,t){return c(e.selectedNodes.map(k),t.selectedNodes.map(k))&&c(e.selectedEdges.map(k),t.selectedEdges.map(k))}function N({onSelectionChange:e}){const t=p(),{selectedNodes:n,selectedEdges:o}=h(_,M);return(0,s.useEffect)((()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach((e=>e(r)))}),[n,o,e]),null}const P=e=>!!e.onSelectionChangeHandlers;function O({onSelectionChange:e}){const t=h(P);return e||t?(0,o.jsx)(N,{onSelectionChange:e}):null}const z=[0,0],I={x:0,y:0,zoom:1},D=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],A=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),R={translateExtent:i.k5,nodeOrigin:z,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function L(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=h(A,c),f=p();(0,s.useEffect)((()=>(u(e.defaultNodes,e.defaultEdges),()=>{g.current=R,l()})),[]);const g=(0,s.useRef)(R);return(0,s.useEffect)((()=>{for(const s of D){const c=e[s];c!==g.current[s]&&(void 0!==e[s]&&("nodes"===s?t(c):"edges"===s?n(c):"minZoom"===s?o(c):"maxZoom"===s?r(c):"translateExtent"===s?i(c):"nodeExtent"===s?a(c):"paneClickDistance"===s?d(c):"fitView"===s?f.setState({fitViewOnInit:c}):"fitViewOptions"===s?f.setState({fitViewOnInitOptions:c}):f.setState({[s]:c})))}g.current=e}),D.map((t=>e[t]))),null}function $(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const B="undefined"!=typeof document?document:null;function j(e=null,t={target:B,actInsideInputWithModifier:!0}){const[n,o]=(0,s.useState)(!1),r=(0,s.useRef)(!1),a=(0,s.useRef)(new Set([])),[c,l]=(0,s.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,s.useEffect)((()=>{const n=t?.target||B;if(null!==e){const e=e=>{r.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!r.current||r.current&&!t.actInsideInputWithModifier)&&(0,i.s$)(e))return!1;const n=T(e.code,l);a.current.add(e[n]),Z(c,a.current,!1)&&(e.preventDefault(),o(!0))},s=e=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&(0,i.s$)(e))return!1;const n=T(e.code,l);Z(c,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[n]),"Meta"===e.key&&a.current.clear(),r.current=!1},u=()=>{a.current.clear(),o(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",s),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",s),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}}),[e,o]),n}function Z(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function T(e,t){return t.includes(e)?"code":"key"}function V(e,t){const n=[],o=new Map,r=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{const e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}else r.push(t);for(const e of t){const t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const r={...e};for(const e of t)H(e,r);n.push(r)}return r.length&&r.forEach((e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})})),n}function H(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function X(e,t){return V(e,t)}function Y(e,t){return V(e,t)}function W(e,t){return{id:e,type:"select",selected:t}}function F(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(W(i.id,e)))}return o}function K({items:e=[],lookup:t}){const n=[],o=new Map(e.map((e=>[e.id,e])));for(const[o,r]of e.entries()){const e=t.get(r.id),i=e?.internals?.userNode??e;void 0!==i&&i!==r&&n.push({id:r.id,item:r,type:"replace"}),void 0===i&&n.push({item:r,type:"add",index:o})}for(const[e]of t){void 0===o.get(e)&&n.push({id:e,type:"remove"})}return n}function G(e){return{id:e.id,type:"remove"}}const q=e=>(0,i.Vt)(e);function Q(e){return(0,s.forwardRef)(e)}const U="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;function J(e){const[t,n]=(0,s.useState)(BigInt(0)),[o]=(0,s.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return U((()=>{const t=o.get();t.length&&(e(t),o.reset())}),[t]),o}const ee=(0,s.createContext)(null);function te({children:e}){const t=p(),n=J((0,s.useCallback)((e=>{const{nodes:n=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:s}=t.getState();let a=n;for(const t of e)a="function"==typeof t?t(a):t;r?o(a):i&&i(K({items:a,lookup:s}))}),[])),r=J((0,s.useCallback)((e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:s}=t.getState();let a=n;for(const t of e)a="function"==typeof t?t(a):t;r?o(a):i&&i(K({items:a,lookup:s}))}),[])),i=(0,s.useMemo)((()=>({nodeQueue:n,edgeQueue:r})),[]);return(0,o.jsx)(ee.Provider,{value:i,children:e})}const ne=e=>!!e.panZoom;function oe(){const e=(()=>{const e=p();return(0,s.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:s,domNode:a}=e.getState();if(!s||!a)return Promise.resolve(!1);const c=(0,i.J6)(n,t),{width:l,height:u}=(0,i.t_)(a);return(0,i.Qu)({nodes:c,width:l,height:u,minZoom:o,maxZoom:r,panZoom:s},t)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:s,panZoom:a}=e.getState(),c=void 0!==o?.zoom?o.zoom:s,l=r/2-t*c,u=i/2-n*c;return a?(await a.setViewport({x:l,y:u,zoom:c},{duration:o?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:s,maxZoom:a,panZoom:c}=e.getState(),l=(0,i.$i)(t,o,r,s,a,n?.padding??.1);return c?(await c.setViewport(l,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:s}=e.getState();if(!s)return t;const{x:a,y:c}=s.getBoundingClientRect(),l={x:t.x-a,y:t.y-c};return(0,i.m)(l,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:s}=o.getBoundingClientRect(),a=(0,i.oj)(t,n);return{x:a.x+r,y:a.y+s}}})),[])})(),t=p(),n=function(){const e=(0,s.useContext)(ee);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=h(ne),r=(0,s.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},s=e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState(),r=q(e)?e:n.get(e.id),s=r.parentId?(0,i.ZB)(r.position,r.measured,r.parentId,n,o):r.position,a={id:r.id,position:s,width:r.measured?.width??r.width,height:r.measured?.height??r.height,data:r.data};return(0,i.PS)(a)},a=(e,t,n={replace:!1})=>{o((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&q(e)?e:{...o,...e}}return o}))))},c=(e,t,n={replace:!1})=>{r((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&(r=e,(0,i.J3)(r))?e:{...o,...e}}var r;return o}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,s]=o;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:r,y:i,zoom:s}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:o,edges:r,onNodesDelete:s,onEdgesDelete:a,triggerNodeChanges:c,triggerEdgeChanges:l,onDelete:u,onBeforeDelete:d}=t.getState(),{nodes:f,edges:h}=await(0,i.WD)({nodesToRemove:e,edgesToRemove:n,nodes:o,edges:r,onBeforeDelete:d}),p=h.length>0,g=f.length>0;if(p){const e=h.map(G);a?.(h),l(e)}if(g){const e=f.map(G);s?.(f),c(e)}return(g||p)&&u?.({nodes:f,edges:h}),{deletedNodes:f,deletedEdges:h}},getIntersectingNodes:(e,n=!0,o)=>{const r=(0,i.J$)(e),a=r?e:s(e),c=void 0!==o;return a?(o||t.getState().nodes).filter((o=>{const s=t.getState().nodeLookup.get(o.id);if(s&&!r&&(o.id===e.id||!s.internals.positionAbsolute))return!1;const l=(0,i.PS)(c?o:s),u=(0,i.lp)(l,a);return n&&u>0||u>=a.width*a.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const o=(0,i.J$)(e)?e:s(e);if(!o)return!1;const r=(0,i.lp)(o,t);return n&&r>0||r>=o.width*o.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},updateEdge:c,updateEdgeData:(e,t,n={replace:!1})=>{c(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState();return(0,i.RX)(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:({type:e,id:n,nodeId:o})=>Array.from(t.getState().connectionLookup.get(`${o}-${e}-${n??null}`)?.values()??[])}}),[]);return(0,s.useMemo)((()=>({...r,...e,viewportInitialized:o})),[o])}const re=e=>e.selected,ie={actInsideInputWithModifier:!1},se="undefined"!=typeof window?window:void 0;const ae={position:"absolute",width:"100%",height:"100%",top:0,left:0},ce=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function le({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=i.IY.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:f,translateExtent:g,minZoom:m,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:x=!0,children:w,noWheelClassName:b,noPanClassName:S,onViewportChange:C,isControlledViewport:E,paneClickDistance:_}){const k=p(),M=(0,s.useRef)(null),{userSelectionActive:N,lib:P}=h(ce,c),O=j(v),z=(0,s.useRef)();!function(e){const t=p();(0,s.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=(0,i.t_)(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",i.Qj.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(M);const I=(0,s.useCallback)((e=>{C?.({x:e[0],y:e[1],zoom:e[2]}),E||k.setState({transform:e})}),[C,E]);return(0,s.useEffect)((()=>{if(M.current){z.current=(0,i.X6)({domNode:M.current,minZoom:m,maxZoom:y,translateExtent:g,viewport:f,paneClickDistance:_,onDraggingChange:e=>k.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=k.getState();o?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=k.getState();o?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=k.getState();o?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=z.current.getViewport();return k.setState({panZoom:z.current,transform:[e,t,n],domNode:M.current.closest(".react-flow")}),()=>{z.current?.destroy()}}}),[]),(0,s.useEffect)((()=>{z.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:O,preventScrolling:x,noPanClassName:S,userSelectionActive:N,noWheelClassName:b,lib:P,onTransformChange:I})}),[e,t,n,r,a,l,u,d,O,x,S,N,b,P,I]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:M,style:ae,children:w})}const ue=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function de(){const{userSelectionActive:e,userSelectionRect:t}=h(ue,c);return e&&t?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const fe=(e,t)=>n=>{n.target===t.current&&e?.(n)},he=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function pe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=i.oW.Full,panOnDrag:a,selectionOnDrag:l,onSelectionStart:u,onSelectionEnd:d,onPaneClick:f,onPaneContextMenu:g,onPaneScroll:m,onPaneMouseEnter:y,onPaneMouseMove:v,onPaneMouseLeave:x,children:w}){const b=(0,s.useRef)(null),S=p(),C=(0,s.useRef)(0),E=(0,s.useRef)(0),_=(0,s.useRef)(),k=(0,s.useRef)(new Map),{userSelectionActive:M,elementsSelectable:N,dragging:P}=h(he,c),O=N&&(e||M),z=(0,s.useRef)(!1),I=(0,s.useRef)(!1),D=e=>{z.current?z.current=!1:(f?.(e),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1}))},A=m?e=>m(e):void 0,R=!0===a||Array.isArray(a)&&a.includes(0);return(0,o.jsxs)("div",{className:r(["react-flow__pane",{draggable:R,dragging:P,selection:e}]),onClick:O?void 0:fe(D,b),onContextMenu:fe((e=>{Array.isArray(a)&&a?.includes(2)?e.preventDefault():g?.(e)}),b),onWheel:fe(A,b),onPointerEnter:O?void 0:y,onPointerDown:O?t=>{const{resetSelectedElements:n,domNode:o,edgeLookup:r}=S.getState();if(_.current=o?.getBoundingClientRect(),!N||!e||0!==t.button||t.target!==b.current||!_.current)return;t.target?.setPointerCapture?.(t.pointerId),I.current=!0,z.current=!1,k.current=new Map;for(const[e,t]of r)k.current.set(t.source,k.current.get(t.source)?.add(e)||new Set([e])),k.current.set(t.target,k.current.get(t.target)?.add(e)||new Set([e]));const{x:s,y:a}=(0,i.wv)(t.nativeEvent,_.current);n(),S.setState({userSelectionRect:{width:0,height:0,startX:s,startY:a,x:s,y:a}}),u?.(t)}:v,onPointerMove:O?e=>{const{userSelectionRect:t,edgeLookup:o,transform:r,nodeLookup:s,triggerNodeChanges:a,triggerEdgeChanges:c}=S.getState();if(!_.current||!t)return;z.current=!0;const{x:l,y:u}=(0,i.wv)(e.nativeEvent,_.current),{startX:d,startY:f}=t,h={startX:d,startY:f,x:l<d?l:d,y:u<f?u:f,width:Math.abs(l-d),height:Math.abs(u-f)},p=(0,i.f5)(s,h,r,n===i.oW.Partial,!0),g=new Set,m=new Set;for(const e of p){m.add(e.id);const t=k.current.get(e.id);if(t)for(const e of t)g.add(e)}if(C.current!==m.size){C.current=m.size;a(F(s,m,!0))}if(E.current!==g.size){E.current=g.size;c(F(o,g))}S.setState({userSelectionRect:h,userSelectionActive:!0,nodesSelectionActive:!1})}:v,onPointerUp:O?e=>{if(0!==e.button||!I.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:n}=S.getState();!M&&n&&e.target===b.current&&D?.(e),C.current>0&&S.setState({nodesSelectionActive:!0}),S.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,E.current=0,d?.(e),(t||l)&&(z.current=!1),I.current=!1}:void 0,onPointerLeave:x,ref:b,style:ae,children:[w,(0,o.jsx)(de,{})]})}function ge({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:c,onError:l}=t.getState(),u=c.get(e);u?(t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame((()=>o?.current?.blur()))):r([e])):l?.("012",i.Qj.error012(e))}function me({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:a,nodeClickDistance:c}){const l=p(),[u,d]=(0,s.useState)(!1),f=(0,s.useRef)();return(0,s.useEffect)((()=>{f.current=(0,i.oC)({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{ge({id:t,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})}),[]),(0,s.useEffect)((()=>{if(t)f.current?.destroy();else if(e.current)return f.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:a,nodeId:r,nodeClickDistance:c}),()=>{f.current?.destroy()}}),[n,o,t,a,e,r]),u}function ye(){const e=p();return(0,s.useCallback)((t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:s,onError:a,updateNodePositions:c,nodeLookup:l,nodeOrigin:u}=e.getState(),d=new Map,f=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(s),h=o?r[0]:5,p=o?r[1]:5,g=t.direction.x*h*t.factor,m=t.direction.y*p*t.factor;for(const[,e]of l){if(!f(e))continue;let t={x:e.internals.positionAbsolute.x+g,y:e.internals.positionAbsolute.y+m};o&&(t=(0,i._2)(t,r));const{position:s,positionAbsolute:c}=(0,i.q7)({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:u,onError:a});e.position=s,e.internals.positionAbsolute=c,d.set(e.id,e)}c(d)}),[])}const ve=(0,s.createContext)(null),xe=ve.Provider;ve.Consumer;const we=()=>(0,s.useContext)(ve),be=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Se=(0,s.memo)(Q((function({type:e="source",position:t=i.Ly.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:u,onConnect:d,children:f,className:g,onMouseDown:m,onTouchStart:y,...v},x){const w=u||null,b="target"===e,S=p(),C=we(),{connectOnClick:E,noPanClassName:_,rfId:k}=h(be,c),{connectingFrom:M,connectingTo:N,clickConnecting:P,isPossibleEndHandle:O,connectionInProcess:z,valid:I}=h(((e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:s,connection:a}=o,{fromHandle:c,toHandle:l,isValid:u}=a,d=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:c?.nodeId===e&&c?.id===t&&c?.type===n,connectingTo:d,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:s===i.jD.Strict?c?.type!==n:e!==c?.nodeId||t!==c?.id,connectionInProcess:!!c,valid:d&&u}})(C,w,e),c);C||S.getState().onError?.("010",i.Qj.error010());const D=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=S.getState(),r={...t,...e};if(o){const{edges:e,setEdges:t}=S.getState();t((0,i.Z_)(r,e))}n?.(r),d?.(r)},A=e=>{if(!C)return;const t=(0,i.N5)(e.nativeEvent);if(a&&(t&&0===e.button||!t)){const t=S.getState();i.Ql.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:b,handleId:w,nodeId:C,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:D,isValidConnection:n||t.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?m?.(e):y?.(e)};return(0,o.jsx)("div",{"data-handleid":w,"data-nodeid":C,"data-handlepos":t,"data-id":`${k}-${C}-${w}-${e}`,className:r(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,g,{source:!b,target:b,connectable:s,connectablestart:a,connectableend:l,clickconnecting:P,connectingfrom:M,connectingto:N,valid:I,connectionindicator:s&&(!z||O)&&(z?l:a)}]),onMouseDown:A,onTouchStart:A,onClick:E?t=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:s,connectionMode:c,isValidConnection:l,lib:u,rfId:d,nodeLookup:f,connection:h}=S.getState();if(!C||!s&&!a)return;if(!s)return o?.(t.nativeEvent,{nodeId:C,handleId:w,handleType:e}),void S.setState({connectionClickStartHandle:{nodeId:C,type:e,id:w}});const p=(0,i.S2)(t.target),g=n||l,{connection:m,isValid:y}=i.Ql.isValid(t.nativeEvent,{handle:{nodeId:C,id:w,type:e},connectionMode:c,fromNodeId:s.nodeId,fromHandleId:s.id||null,fromType:s.type,isValidConnection:g,flowId:d,doc:p,lib:u,nodeLookup:f});y&&m&&D(m);const v=structuredClone(h);delete v.inProgress,v.toPosition=v.toHandle?v.toHandle.position:null,r?.(t,v),S.setState({connectionClickStartHandle:null})}:void 0,ref:x,...v,children:f})})));const Ce={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Ee={input:function({data:e,isConnectable:t,sourcePosition:n=i.Ly.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(Se,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=i.Ly.Top,sourcePosition:r=i.Ly.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Se,{type:"target",position:n,isConnectable:t}),e?.label,(0,o.jsx)(Se,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=i.Ly.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Se,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}};const _e=e=>{const{width:t,height:n,x:o,y:r}=(0,i.W0)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,i.kE)(t)?t:null,height:(0,i.kE)(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function ke({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=p(),{width:a,height:l,transformString:u,userSelectionActive:d}=h(_e,c),f=ye(),g=(0,s.useRef)(null);if((0,s.useEffect)((()=>{n||g.current?.focus({preventScroll:!0})}),[n]),me({nodeRef:g}),d||!a||!l)return null;const m=e?t=>{const n=i.getState().nodes.filter((e=>e.selected));e(t,n)}:void 0;return(0,o.jsx)("div",{className:r(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:(0,o.jsx)("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(Ce,e.key)&&f({direction:Ce[e.key],factor:e.shiftKey?4:1})},style:{width:a,height:l}})})}const Me="undefined"!=typeof window?window:void 0,Ne=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Pe({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:c,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:g,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:S,zoomOnPinch:C,panOnScroll:E,panOnScrollSpeed:_,panOnScrollMode:k,zoomOnDoubleClick:M,panOnDrag:N,defaultViewport:P,translateExtent:O,minZoom:z,maxZoom:I,preventScrolling:D,onSelectionContextMenu:A,noWheelClassName:R,noPanClassName:L,disableKeyboardA11y:$,onViewportChange:B,isControlledViewport:Z}){const{nodesSelectionActive:T,userSelectionActive:V}=h(Ne),H=j(d,{target:Me}),X=j(x,{target:Me}),Y=X||N,W=X||E,F=f&&!0!==Y,K=H||V||F;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=p(),{deleteElements:o}=oe(),r=j(e,ie),i=j(t,{target:se});(0,s.useEffect)((()=>{if(r){const{edges:e,nodes:t}=n.getState();o({nodes:t.filter(re),edges:e.filter(re)}),n.setState({nodesSelectionActive:!1})}}),[r]),(0,s.useEffect)((()=>{n.setState({multiSelectionActive:i})}),[i])}({deleteKeyCode:u,multiSelectionKeyCode:v}),(0,o.jsx)(le,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:S,zoomOnPinch:C,panOnScroll:W,panOnScrollSpeed:_,panOnScrollMode:k,zoomOnDoubleClick:M,panOnDrag:!H&&Y,defaultViewport:P,translateExtent:O,minZoom:z,maxZoom:I,zoomActivationKeyCode:w,preventScrolling:D,noWheelClassName:R,noPanClassName:L,onViewportChange:B,isControlledViewport:Z,paneClickDistance:l,children:(0,o.jsxs)(pe,{onSelectionStart:m,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:c,panOnDrag:Y,isSelecting:!!K,selectionMode:g,selectionKeyPressed:H,selectionOnDrag:F,children:[e,T&&(0,o.jsx)(ke,{onSelectionContextMenu:A,noPanClassName:L,disableKeyboardA11y:$})]})})}Pe.displayName="FlowRenderer";const Oe=(0,s.memo)(Pe);function ze(e){return h((0,s.useCallback)((e=>t=>e?(0,i.f5)(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),c)}const Ie=e=>e.updateNodeInternals;function De({id:e,onClick:t,onMouseEnter:n,onMouseMove:a,onMouseLeave:l,onContextMenu:u,onDoubleClick:d,nodesDraggable:f,elementsSelectable:g,nodesConnectable:m,nodesFocusable:v,resizeObserver:x,noDragClassName:w,noPanClassName:b,disableKeyboardA11y:S,rfId:C,nodeTypes:E,nodeExtent:_,nodeClickDistance:k,onError:M}){const{node:N,internals:P,isParent:O}=h((t=>{const n=t.nodeLookup.get(e),o=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:o}}),c);let z=N.type||"default",I=E?.[z]||Ee[z];void 0===I&&(M?.("003",i.Qj.error003(z)),z="default",I=Ee.default);const D=!!(N.draggable||f&&void 0===N.draggable),A=!!(N.selectable||g&&void 0===N.selectable),R=!!(N.connectable||m&&void 0===N.connectable),L=!!(N.focusable||v&&void 0===N.focusable),$=p(),B=(0,i.nb)(N),j=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=p(),i=(0,s.useRef)(null),a=(0,s.useRef)(null),c=(0,s.useRef)(e.sourcePosition),l=(0,s.useRef)(e.targetPosition),u=(0,s.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,s.useEffect)((()=>{!i.current||e.hidden||d&&a.current===i.current||(a.current&&o?.unobserve(a.current),o?.observe(i.current),a.current=i.current)}),[d,e.hidden]),(0,s.useEffect)((()=>()=>{a.current&&(o?.unobserve(a.current),a.current=null)}),[]),(0,s.useEffect)((()=>{if(i.current){const n=u.current!==t,o=c.current!==e.sourcePosition,s=l.current!==e.targetPosition;(n||o||s)&&(u.current=t,c.current=e.sourcePosition,l.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:N,nodeType:z,hasDimensions:B,resizeObserver:x}),Z=me({nodeRef:j,disabled:N.hidden||!D,noDragClassName:w,handleSelector:N.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:k}),T=ye();if(N.hidden)return null;const V=(0,i.Rf)(N),H=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(N),X=A||D||t||n||a||l,Y=n?e=>n(e,{...P.userNode}):void 0,W=a?e=>a(e,{...P.userNode}):void 0,F=l?e=>l(e,{...P.userNode}):void 0,K=u?e=>u(e,{...P.userNode}):void 0,G=d?e=>d(e,{...P.userNode}):void 0;return(0,o.jsx)("div",{className:r(["react-flow__node",`react-flow__node-${z}`,{[b]:D},N.className,{selected:N.selected,selectable:A,parent:O,draggable:D,dragging:Z}]),ref:j,style:{zIndex:P.z,transform:`translate(${P.positionAbsolute.x}px,${P.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:B?"visible":"hidden",...N.style,...H},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Y,onMouseMove:W,onMouseLeave:F,onContextMenu:K,onClick:n=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=$.getState();A&&(!o||!D||r>0)&&ge({id:e,store:$,nodeRef:j}),t&&t(n,{...P.userNode})},onDoubleClick:G,onKeyDown:L?t=>{if(!(0,i.s$)(t.nativeEvent)&&!S)if(i.wQ.includes(t.key)&&A){const n="Escape"===t.key;ge({id:e,store:$,unselect:n,nodeRef:j})}else D&&N.selected&&Object.prototype.hasOwnProperty.call(Ce,t.key)&&($.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~P.positionAbsolute.x}, y: ${~~P.positionAbsolute.y}`}),T({direction:Ce[t.key],factor:t.shiftKey?4:1}))}:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":S?void 0:`${y}-${C}`,"aria-label":N.ariaLabel,children:(0,o.jsx)(xe,{value:e,children:(0,o.jsx)(I,{id:e,data:N.data,type:z,positionAbsoluteX:P.positionAbsolute.x,positionAbsoluteY:P.positionAbsolute.y,selected:N.selected,selectable:A,draggable:D,deletable:N.deletable??!0,isConnectable:R,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:Z,dragHandle:N.dragHandle,zIndex:P.z,parentId:N.parentId,...V})})})}const Ae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Re(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=h(Ae,c),l=ze(e.onlyRenderVisibleElements),u=function(){const e=h(Ie),[t]=(0,s.useState)((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,s.useEffect)((()=>()=>{t?.disconnect()}),[t]),t}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:ae,children:l.map((s=>(0,o.jsx)(De,{id:s,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},s)))})}Re.displayName="NodeRenderer";const Le=(0,s.memo)(Re);const $e={[i.QZ.Arrow]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[i.QZ.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const Be=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:c="strokeWidth",strokeWidth:l,orient:u="auto-start-reverse"})=>{const d=function(e){const t=p();return(0,s.useMemo)((()=>Object.prototype.hasOwnProperty.call($e,e)?$e[e]:(t.getState().onError?.("009",i.Qj.error009(e)),null)),[e])}(t);return d?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:u,refX:"0",refY:"0",children:(0,o.jsx)(d,{color:n,strokeWidth:l})}):null},je=({defaultColor:e,rfId:t})=>{const n=h((e=>e.edges)),r=h((e=>e.defaultEdgeOptions)),a=(0,s.useMemo)((()=>(0,i.n3)(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd})),[n,r,t,e]);return a.length?(0,o.jsx)("svg",{className:"react-flow__marker",children:(0,o.jsx)("defs",{children:a.map((e=>(0,o.jsx)(Be,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};je.displayName="MarkerDefinitions";var Ze=(0,s.memo)(je);function Te({x:e,y:t,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:c={},labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:d,className:f,...h}){const[p,g]=(0,s.useState)({x:1,y:0,width:0,height:0}),m=r(["react-flow__edge-textwrapper",f]),y=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(y.current){const e=y.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),void 0!==n&&n?(0,o.jsxs)("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:m,visibility:p.width?"visible":"hidden",...h,children:[a&&(0,o.jsx)("rect",{width:p.width+2*l[0],x:-l[0],y:-l[1],height:p.height+2*l[1],className:"react-flow__edge-textbg",style:c,rx:u,ry:u}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:y,style:i,children:n}),d]}):null}Te.displayName="EdgeText";const Ve=(0,s.memo)(Te);function He({id:e,path:t,labelX:n,labelY:s,label:a,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,className:m,interactionWidth:y=20}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{id:e,style:h,d:t,fill:"none",className:r(["react-flow__edge-path",m]),markerEnd:p,markerStart:g}),y&&(0,o.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),a&&(0,i.kE)(n)&&(0,i.kE)(s)?(0,o.jsx)(Ve,{x:n,y:s,label:a,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f}):null]})}function Xe({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===i.Ly.Left||e===i.Ly.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Ye({sourceX:e,sourceY:t,sourcePosition:n=i.Ly.Bottom,targetX:o,targetY:r,targetPosition:s=i.Ly.Top}){const[a,c]=Xe({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,u]=Xe({pos:s,x1:o,y1:r,x2:e,y2:t}),[d,f,h,p]=(0,i.lM)({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${o},${r}`,d,f,h,p]}function We(e){return(0,s.memo)((({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,sourcePosition:c=i.Ly.Bottom,targetPosition:l=i.Ly.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:x})=>{const[w,b,S]=Ye({sourceX:n,sourceY:r,sourcePosition:c,targetX:s,targetY:a,targetPosition:l}),C=e.isInternal?void 0:t;return(0,o.jsx)(He,{id:C,path:w,labelX:b,labelY:S,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:x})}))}const Fe=We({isInternal:!1}),Ke=We({isInternal:!0});function Ge(e){return(0,s.memo)((({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,sourcePosition:g=i.Ly.Bottom,targetPosition:m=i.Ly.Top,markerEnd:y,markerStart:v,pathOptions:x,interactionWidth:w})=>{const[b,S,C]=(0,i.OW)({sourceX:n,sourceY:r,sourcePosition:g,targetX:s,targetY:a,targetPosition:m,borderRadius:x?.borderRadius,offset:x?.offset}),E=e.isInternal?void 0:t;return(0,o.jsx)(He,{id:E,path:b,labelX:S,labelY:C,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:y,markerStart:v,interactionWidth:w})}))}Fe.displayName="SimpleBezierEdge",Ke.displayName="SimpleBezierEdgeInternal";const qe=Ge({isInternal:!1}),Qe=Ge({isInternal:!0});function Ue(e){return(0,s.memo)((({id:t,...n})=>{const r=e.isInternal?void 0:t;return(0,o.jsx)(qe,{...n,id:r,pathOptions:(0,s.useMemo)((()=>({borderRadius:0,offset:n.pathOptions?.offset})),[n.pathOptions?.offset])})}))}qe.displayName="SmoothStepEdge",Qe.displayName="SmoothStepEdgeInternal";const Je=Ue({isInternal:!1}),et=Ue({isInternal:!0});function tt(e){return(0,s.memo)((({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:y})=>{const[v,x,w]=(0,i.Hm)({sourceX:n,sourceY:r,targetX:s,targetY:a}),b=e.isInternal?void 0:t;return(0,o.jsx)(He,{id:b,path:v,labelX:x,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:y})}))}Je.displayName="StepEdge",et.displayName="StepEdgeInternal";const nt=tt({isInternal:!1}),ot=tt({isInternal:!0});function rt(e){return(0,s.memo)((({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,sourcePosition:c=i.Ly.Bottom,targetPosition:l=i.Ly.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,pathOptions:x,interactionWidth:w})=>{const[b,S,C]=(0,i.OQ)({sourceX:n,sourceY:r,sourcePosition:c,targetX:s,targetY:a,targetPosition:l,curvature:x?.curvature}),E=e.isInternal?void 0:t;return(0,o.jsx)(He,{id:E,path:b,labelX:S,labelY:C,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:w})}))}nt.displayName="StraightEdge",ot.displayName="StraightEdgeInternal";const it=rt({isInternal:!1}),st=rt({isInternal:!0});it.displayName="BezierEdge",st.displayName="BezierEdgeInternal";const at={default:st,straight:ot,step:et,smoothstep:Qe,simplebezier:Ke},ct={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},lt=(e,t,n)=>n===i.Ly.Left?e-t:n===i.Ly.Right?e+t:e,ut=(e,t,n)=>n===i.Ly.Top?e-t:n===i.Ly.Bottom?e+t:e,dt="react-flow__edgeupdater";function ft({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:s,onMouseEnter:a,onMouseOut:c,type:l}){return(0,o.jsx)("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:c,className:r([dt,`${dt}-${l}`]),cx:lt(t,i,e),cy:ut(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function ht({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:a,targetY:c,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,setReconnecting:g,setUpdateHover:m}){const y=p(),v=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:r,isValidConnection:s,connectionMode:a,connectionRadius:c,lib:l,onConnectStart:u,onConnectEnd:p,cancelConnection:m,nodeLookup:v,rfId:x,panBy:w,updateConnection:b}=y.getState(),S="target"===t.type;g(!0),f?.(e,n,t.type);i.Ql.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:a,connectionRadius:c,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:S,edgeUpdaterType:t.type,lib:l,flowId:x,cancelConnection:m,panBy:w,isValidConnection:s,onConnect:e=>d?.(n,e),onConnectStart:u,onConnectEnd:p,onReconnectEnd:(e,o)=>{g(!1),h?.(e,n,t.type,o)},updateConnection:b,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},x=()=>m(!0),w=()=>m(!1);return(0,o.jsxs)(o.Fragment,{children:[(!0===e||"source"===e)&&(0,o.jsx)(ft,{position:l,centerX:r,centerY:s,radius:t,onMouseDown:e=>v(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:x,onMouseOut:w,type:"source"}),(!0===e||"target"===e)&&(0,o.jsx)(ft,{position:u,centerX:a,centerY:c,radius:t,onMouseDown:e=>v(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:x,onMouseOut:w,type:"target"})]})}function pt({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:a,onClick:l,onDoubleClick:u,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:m,reconnectRadius:y,onReconnect:x,onReconnectStart:w,onReconnectEnd:b,rfId:S,edgeTypes:C,noPanClassName:E,onError:_,disableKeyboardA11y:k}){let M=h((t=>t.edgeLookup.get(e)));const N=h((e=>e.defaultEdgeOptions));M=N?{...N,...M}:M;let P=M.type||"default",O=C?.[P]||at[P];void 0===O&&(_?.("011",i.Qj.error011(P)),P="default",O=at.default);const z=!!(M.focusable||t&&void 0===M.focusable),I=void 0!==x&&(M.reconnectable||n&&void 0===M.reconnectable),D=!!(M.selectable||a&&void 0===M.selectable),A=(0,s.useRef)(null),[R,L]=(0,s.useState)(!1),[$,B]=(0,s.useState)(!1),j=p(),{zIndex:Z,sourceX:T,sourceY:V,targetX:H,targetY:X,sourcePosition:Y,targetPosition:W}=h((0,s.useCallback)((t=>{const n=t.nodeLookup.get(M.source),o=t.nodeLookup.get(M.target);if(!n||!o)return{zIndex:M.zIndex,...ct};const r=(0,i.JU)({id:e,sourceNode:n,targetNode:o,sourceHandle:M.sourceHandle||null,targetHandle:M.targetHandle||null,connectionMode:t.connectionMode,onError:_});return{zIndex:(0,i.xx)({selected:M.selected,zIndex:M.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:t.elevateEdgesOnSelect}),...r||ct}}),[M.source,M.target,M.sourceHandle,M.targetHandle,M.selected,M.zIndex]),c),F=(0,s.useMemo)((()=>M.markerStart?`url('#${(0,i.dW)(M.markerStart,S)}')`:void 0),[M.markerStart,S]),K=(0,s.useMemo)((()=>M.markerEnd?`url('#${(0,i.dW)(M.markerEnd,S)}')`:void 0),[M.markerEnd,S]);if(M.hidden||null===T||null===V||null===H||null===X)return null;const G=u?e=>{u(e,{...M})}:void 0,q=d?e=>{d(e,{...M})}:void 0,Q=f?e=>{f(e,{...M})}:void 0,U=g?e=>{g(e,{...M})}:void 0,J=m?e=>{m(e,{...M})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:Z},children:(0,o.jsxs)("g",{className:r(["react-flow__edge",`react-flow__edge-${P}`,M.className,E,{selected:M.selected,animated:M.animated,inactive:!D&&!l,updating:R,selectable:D}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:o,multiSelectionActive:r}=j.getState();D&&(j.setState({nodesSelectionActive:!1}),M.selected&&r?(o({nodes:[],edges:[M]}),A.current?.blur()):n([e])),l&&l(t,M)},onDoubleClick:G,onContextMenu:q,onMouseEnter:Q,onMouseMove:U,onMouseLeave:J,onKeyDown:z?t=>{if(!k&&i.wQ.includes(t.key)&&D){const{unselectNodesAndEdges:n,addSelectedEdges:o}=j.getState();"Escape"===t.key?(A.current?.blur(),n({edges:[M]})):o([e])}}:void 0,tabIndex:z?0:void 0,role:z?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===M.ariaLabel?void 0:M.ariaLabel||`Edge from ${M.source} to ${M.target}`,"aria-describedby":z?`${v}-${S}`:void 0,ref:A,children:[!$&&(0,o.jsx)(O,{id:e,source:M.source,target:M.target,type:M.type,selected:M.selected,animated:M.animated,selectable:D,deletable:M.deletable??!0,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,sourceX:T,sourceY:V,targetX:H,targetY:X,sourcePosition:Y,targetPosition:W,data:M.data,style:M.style,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerStart:F,markerEnd:K,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth}),I&&(0,o.jsx)(ht,{edge:M,isReconnectable:I,reconnectRadius:y,onReconnect:x,onReconnectStart:w,onReconnectEnd:b,sourceX:T,sourceY:V,targetX:H,targetY:X,sourcePosition:Y,targetPosition:W,setUpdateHover:L,setReconnecting:B})]})})}const gt=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function mt({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:a,onReconnect:l,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:g,reconnectRadius:m,onEdgeDoubleClick:y,onReconnectStart:v,onReconnectEnd:x,disableKeyboardA11y:w}){const{edgesFocusable:b,edgesReconnectable:S,elementsSelectable:C,onError:E}=h(gt,c),_=(k=t,h((0,s.useCallback)((e=>{if(!k)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&(0,i.RY)({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[k]),c));var k;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(Ze,{defaultColor:e,rfId:n}),_.map((e=>(0,o.jsx)(pt,{id:e,edgesFocusable:b,edgesReconnectable:S,elementsSelectable:C,noPanClassName:a,onReconnect:l,onContextMenu:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onClick:g,reconnectRadius:m,onDoubleClick:y,onReconnectStart:v,onReconnectEnd:x,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:w},e)))]})}mt.displayName="EdgeRenderer";const yt=(0,s.memo)(mt),vt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function xt({children:e}){const t=h(vt);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const wt=e=>e.panZoom?.syncViewport;function bt(e){return e.connection.inProgress?{...e.connection,to:(0,i.m)(e.connection.to,e.transform)}:{...e.connection}}function St(e){const t=function(e){if(e)return t=>{const n=bt(t);return e(n)};return bt}(e);return h(t,c)}const Ct=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Et({containerStyle:e,style:t,type:n,component:s}){const{nodesConnectable:a,width:l,height:u,isValid:d,inProgress:f}=h(Ct,c);return!!(l&&a&&f)?(0,o.jsx)("svg",{style:e,width:l,height:u,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:r(["react-flow__connection",(0,i.Zp)(d)]),children:(0,o.jsx)(_t,{style:t,type:n,CustomComponent:s,isValid:d})})}):null}const _t=({style:e,type:t=i.t8.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:a,fromNode:c,fromHandle:l,fromPosition:u,to:d,toNode:f,toHandle:h,toPosition:p}=St();if(!s)return;if(n)return(0,o.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:c,fromHandle:l,fromX:a.x,fromY:a.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:p,connectionStatus:(0,i.Zp)(r),toNode:f,toHandle:h});let g="";const m={sourceX:a.x,sourceY:a.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:p};switch(t){case i.t8.Bezier:[g]=(0,i.OQ)(m);break;case i.t8.SimpleBezier:[g]=Ye(m);break;case i.t8.Step:[g]=(0,i.OW)({...m,borderRadius:0});break;case i.t8.SmoothStep:[g]=(0,i.OW)(m);break;default:[g]=(0,i.Hm)(m)}return(0,o.jsx)("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};_t.displayName="ConnectionLine";const kt={};function Mt(e=kt){(0,s.useRef)(e),p();(0,s.useEffect)((()=>{0}),[e])}function Nt({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:m,onSelectionEnd:y,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:S,selectionOnDrag:C,selectionMode:E,multiSelectionKeyCode:_,panActivationKeyCode:k,zoomActivationKeyCode:M,deleteKeyCode:N,onlyRenderVisibleElements:P,elementsSelectable:O,defaultViewport:z,translateExtent:I,minZoom:D,maxZoom:A,preventScrolling:R,defaultMarkerColor:L,zoomOnScroll:$,zoomOnPinch:B,panOnScroll:j,panOnScrollSpeed:Z,panOnScrollMode:T,zoomOnDoubleClick:V,panOnDrag:H,onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:W,onPaneMouseLeave:F,onPaneScroll:K,onPaneContextMenu:G,paneClickDistance:q,nodeClickDistance:Q,onEdgeContextMenu:U,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:te,reconnectRadius:ne,onReconnect:re,onReconnectStart:ie,onReconnectEnd:se,noDragClassName:ae,noWheelClassName:ce,noPanClassName:le,disableKeyboardA11y:ue,nodeExtent:de,rfId:fe,viewport:he,onViewportChange:pe}){return Mt(e),Mt(t),p(),(0,s.useRef)(!1),(0,s.useEffect)((()=>{}),[]),function(e){const t=oe(),n=(0,s.useRef)(!1);(0,s.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(n),function(e){const t=h(wt),n=p();(0,s.useEffect)((()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(he),(0,o.jsx)(Oe,{onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:W,onPaneMouseLeave:F,onPaneContextMenu:G,onPaneScroll:K,paneClickDistance:q,deleteKeyCode:N,selectionKeyCode:S,selectionOnDrag:C,selectionMode:E,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:_,panActivationKeyCode:k,zoomActivationKeyCode:M,elementsSelectable:O,zoomOnScroll:$,zoomOnPinch:B,zoomOnDoubleClick:V,panOnScroll:j,panOnScrollSpeed:Z,panOnScrollMode:T,panOnDrag:H,defaultViewport:z,translateExtent:I,minZoom:D,maxZoom:A,onSelectionContextMenu:g,preventScrolling:R,noDragClassName:ae,noWheelClassName:ce,noPanClassName:le,disableKeyboardA11y:ue,onViewportChange:pe,isControlledViewport:!!he,children:(0,o.jsxs)(xt,{children:[(0,o.jsx)(yt,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:c,onReconnect:re,onReconnectStart:ie,onReconnectEnd:se,onlyRenderVisibleElements:P,onEdgeContextMenu:U,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:te,reconnectRadius:ne,defaultMarkerColor:L,noPanClassName:le,disableKeyboardA11y:ue,rfId:fe}),(0,o.jsx)(Et,{style:x,type:v,component:w,containerStyle:b}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(Le,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:Q,onlyRenderVisibleElements:P,noPanClassName:le,noDragClassName:ae,disableKeyboardA11y:ue,nodeExtent:de,rfId:fe}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Nt.displayName="GraphView";const Pt=(0,s.memo)(Nt),Ot=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:s,fitView:a,nodeOrigin:c,nodeExtent:l}={})=>{const u=new Map,d=new Map,f=new Map,h=new Map,p=o??t??[],g=n??e??[],m=c??[0,0],y=l??i.k5;(0,i.be)(f,h,p),(0,i.yF)(g,u,d,{nodeOrigin:m,nodeExtent:y,elevateNodesOnSelect:!1});let v=[0,0,1];if(a&&r&&s){const e=(0,i.W0)(u,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=(0,i.$i)(e,r,s,.5,2,.1);v=[t,n,o]}return{rfId:"1",width:0,height:0,transform:v,nodes:g,nodeLookup:u,parentLookup:d,edges:p,edgeLookup:h,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:i.k5,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:i.jD.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...i.Ky},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:i.Ki,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}};function zt({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:c,initialHeight:l,fitView:u,nodeOrigin:f,nodeExtent:h,children:p}){const[g]=(0,s.useState)((()=>(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:s,fitView:c,nodeOrigin:l,nodeExtent:u})=>(0,a.F)(((a,d)=>({...Ot({nodes:e,edges:t,width:r,height:s,fitView:c,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:o}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:o,elevateNodesOnSelect:r}=d();(0,i.yF)(e,t,n,{nodeOrigin:o,nodeExtent:u,elevateNodesOnSelect:r,checkEquality:!0}),a({nodes:e})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=d();(0,i.be)(t,n,e),a({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=d();t(e),a({hasDefaultNodes:!0})}if(t){const{setEdges:e}=d();e(t),a({hasDefaultEdges:!0})}},updateNodeInternals:(e,t={triggerFitView:!0})=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,fitViewOnInit:s,fitViewDone:c,fitViewOnInitOptions:l,domNode:u,nodeOrigin:f,nodeExtent:h,debug:p,fitViewSync:g}=d(),{changes:m,updatedInternals:y}=(0,i.B1)(e,o,r,u,f,h);if(y){if((0,i.VV)(o,r,{nodeOrigin:f,nodeExtent:h}),t.triggerFitView){let e=c;!c&&s&&(e=g({...l,nodes:l?.nodes})),a({fitViewDone:e})}else a({});m?.length>0&&(p&&console.log("React Flow: trigger node changes",m),n?.(m))}},updateNodePositions:(e,t=!1)=>{const n=[],o=[];for(const[r,i]of e){const e={id:r,type:"position",position:i.position,dragging:t};i?.expandParent&&i?.parentId&&e.position&&(n.push({id:r,parentId:i.parentId,rect:{...i.internals.positionAbsolute,width:i.measured.width,height:i.measured.height}}),e.position.x=Math.max(0,e.position.x),e.position.y=Math.max(0,e.position.y)),o.push(e)}if(n.length>0){const{nodeLookup:e,parentLookup:t,nodeOrigin:r}=d(),s=(0,i.so)(n,e,t,r);o.push(...s)}d().triggerNodeChanges(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=d();e?.length&&(r&&n(X(e,o)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=d();e?.length&&(r&&n(Y(e,o)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=d();t?r(e.map((e=>W(e,!0)))):(r(F(o,new Set([...e]),!0)),i(F(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=d();t?i(e.map((e=>W(e,!0)))):(i(F(n,new Set([...e]))),r(F(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:s}=d(),a=t||n,c=(e||o).map((e=>{const t=r.get(e.id);return t&&(t.selected=!1),W(e.id,!1)})),l=a.map((e=>W(e.id,!1)));i(c),s(l)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=d();t?.setScaleExtent([e,n]),a({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=d();t?.setScaleExtent([n,e]),a({maxZoom:e})},setTranslateExtent:e=>{d().panZoom?.setTranslateExtent(e),a({translateExtent:e})},setPaneClickDistance:e=>{d().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o}=d(),r=t.reduce(((e,t)=>t.selected?[...e,W(t.id,!1)]:e),[]),i=e.reduce(((e,t)=>t.selected?[...e,W(t.id,!1)]:e),[]);n(r),o(i)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:s,nodeExtent:c}=d();e[0][0]===c[0][0]&&e[0][1]===c[0][1]&&e[1][0]===c[1][0]&&e[1][1]===c[1][1]||((0,i.yF)(t,n,o,{nodeOrigin:r,nodeExtent:e,elevateNodesOnSelect:s,checkEquality:!1}),a({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:o,panZoom:r,translateExtent:s}=d();return(0,i.hO)({delta:e,panZoom:r,transform:t,translateExtent:s,width:n,height:o})},fitView:e=>{const{panZoom:t,width:n,height:o,minZoom:r,maxZoom:s,nodeLookup:a}=d();if(!t)return Promise.resolve(!1);const c=(0,i.J6)(a,e);return(0,i.Qu)({nodes:c,width:n,height:o,panZoom:t,minZoom:r,maxZoom:s},e)},fitViewSync:e=>{const{panZoom:t,width:n,height:o,minZoom:r,maxZoom:s,nodeLookup:a}=d();if(!t)return!1;const c=(0,i.J6)(a,e);return(0,i.Qu)({nodes:c,width:n,height:o,panZoom:t,minZoom:r,maxZoom:s},e),c.size>0},cancelConnection:()=>{a({connection:{...i.Ky}})},updateConnection:e=>{a({connection:e})},reset:()=>a({...Ot()})})),Object.is))({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:c,height:l,fitView:u,nodeOrigin:f,nodeExtent:h})));return(0,o.jsx)(d,{value:g,children:(0,o.jsx)(te,{children:p})})}function It({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:c,fitView:l,nodeOrigin:d,nodeExtent:f}){return(0,s.useContext)(u)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(zt,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:c,fitView:l,nodeOrigin:d,nodeExtent:f,children:e})}const Dt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var At=Q((function({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:c,nodeTypes:l,edgeTypes:u,onNodeClick:d,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:g,onMoveEnd:m,onConnect:y,onConnectStart:v,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:S,onNodeMouseEnter:C,onNodeMouseMove:_,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:N,onNodeDragStart:P,onNodeDrag:D,onNodeDragStop:A,onNodesDelete:R,onEdgesDelete:B,onDelete:j,onSelectionChange:Z,onSelectionDragStart:T,onSelectionDrag:V,onSelectionDragStop:H,onSelectionContextMenu:X,onSelectionStart:Y,onSelectionEnd:W,onBeforeDelete:F,connectionMode:K,connectionLineType:G=i.t8.Bezier,connectionLineStyle:q,connectionLineComponent:Q,connectionLineContainerStyle:U,deleteKeyCode:J="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:te=!1,selectionMode:ne=i.oW.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:re=((0,i.Q5)()?"Meta":"Control"),zoomActivationKeyCode:ie=((0,i.Q5)()?"Meta":"Control"),snapToGrid:se,snapGrid:ae,onlyRenderVisibleElements:ce=!1,selectNodesOnDrag:le,nodesDraggable:ue,nodesConnectable:de,nodesFocusable:fe,nodeOrigin:he=z,edgesFocusable:pe,edgesReconnectable:ge,elementsSelectable:me=!0,defaultViewport:ye=I,minZoom:ve=.5,maxZoom:xe=2,translateExtent:we=i.k5,preventScrolling:be=!0,nodeExtent:Se,defaultMarkerColor:Ce="#b1b1b7",zoomOnScroll:Ee=!0,zoomOnPinch:_e=!0,panOnScroll:ke=!1,panOnScrollSpeed:Me=.5,panOnScrollMode:Ne=i.IY.Free,zoomOnDoubleClick:Pe=!0,panOnDrag:Oe=!0,onPaneClick:ze,onPaneMouseEnter:Ie,onPaneMouseMove:De,onPaneMouseLeave:Ae,onPaneScroll:Re,onPaneContextMenu:Le,paneClickDistance:$e=0,nodeClickDistance:Be=0,children:je,onReconnect:Ze,onReconnectStart:Te,onReconnectEnd:Ve,onEdgeContextMenu:He,onEdgeDoubleClick:Xe,onEdgeMouseEnter:Ye,onEdgeMouseMove:We,onEdgeMouseLeave:Fe,reconnectRadius:Ke=10,onNodesChange:Ge,onEdgesChange:qe,noDragClassName:Qe="nodrag",noWheelClassName:Ue="nowheel",noPanClassName:Je="nopan",fitView:et,fitViewOptions:tt,connectOnClick:nt,attributionPosition:ot,proOptions:rt,defaultEdgeOptions:it,elevateNodesOnSelect:st,elevateEdgesOnSelect:at,disableKeyboardA11y:ct=!1,autoPanOnConnect:lt,autoPanOnNodeDrag:ut,autoPanSpeed:dt,connectionRadius:ft,isValidConnection:ht,onError:pt,style:gt,id:mt,nodeDragThreshold:yt,viewport:vt,onViewportChange:xt,width:wt,height:bt,colorMode:St="light",debug:Ct,...Et},_t){const kt=mt||"1",Mt=function(e){const[t,n]=(0,s.useState)("system"===e?null:e);return(0,s.useEffect)((()=>{if("system"!==e)return void n(e);const t=$(),o=()=>n(t?.matches?"dark":"light");return o(),t?.addEventListener("change",o),()=>{t?.removeEventListener("change",o)}}),[e]),null!==t?t:$()?.matches?"dark":"light"}(St);return(0,o.jsx)("div",{...Et,style:{...gt,...Dt},ref:_t,className:r(["react-flow",c,Mt]),"data-testid":"rf__wrapper",id:mt,children:(0,o.jsxs)(It,{nodes:e,edges:t,width:wt,height:bt,fitView:et,nodeOrigin:he,nodeExtent:Se,children:[(0,o.jsx)(Pt,{onInit:h,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:C,onNodeMouseMove:_,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:N,nodeTypes:l,edgeTypes:u,connectionLineType:G,connectionLineStyle:q,connectionLineComponent:Q,connectionLineContainerStyle:U,selectionKeyCode:ee,selectionOnDrag:te,selectionMode:ne,deleteKeyCode:J,multiSelectionKeyCode:re,panActivationKeyCode:oe,zoomActivationKeyCode:ie,onlyRenderVisibleElements:ce,defaultViewport:ye,translateExtent:we,minZoom:ve,maxZoom:xe,preventScrolling:be,zoomOnScroll:Ee,zoomOnPinch:_e,zoomOnDoubleClick:Pe,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Ne,panOnDrag:Oe,onPaneClick:ze,onPaneMouseEnter:Ie,onPaneMouseMove:De,onPaneMouseLeave:Ae,onPaneScroll:Re,onPaneContextMenu:Le,paneClickDistance:$e,nodeClickDistance:Be,onSelectionContextMenu:X,onSelectionStart:Y,onSelectionEnd:W,onReconnect:Ze,onReconnectStart:Te,onReconnectEnd:Ve,onEdgeContextMenu:He,onEdgeDoubleClick:Xe,onEdgeMouseEnter:Ye,onEdgeMouseMove:We,onEdgeMouseLeave:Fe,reconnectRadius:Ke,defaultMarkerColor:Ce,noDragClassName:Qe,noWheelClassName:Ue,noPanClassName:Je,rfId:kt,disableKeyboardA11y:ct,nodeExtent:Se,viewport:vt,onViewportChange:xt}),(0,o.jsx)(L,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:y,onConnectStart:v,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:S,nodesDraggable:ue,nodesConnectable:de,nodesFocusable:fe,edgesFocusable:pe,edgesReconnectable:ge,elementsSelectable:me,elevateNodesOnSelect:st,elevateEdgesOnSelect:at,minZoom:ve,maxZoom:xe,nodeExtent:Se,onNodesChange:Ge,onEdgesChange:qe,snapToGrid:se,snapGrid:ae,connectionMode:K,translateExtent:we,connectOnClick:nt,defaultEdgeOptions:it,fitView:et,fitViewOptions:tt,onNodesDelete:R,onEdgesDelete:B,onDelete:j,onNodeDragStart:P,onNodeDrag:D,onNodeDragStop:A,onSelectionDrag:V,onSelectionDragStart:T,onSelectionDragStop:H,onMove:p,onMoveStart:g,onMoveEnd:m,noPanClassName:Je,nodeOrigin:he,rfId:kt,autoPanOnConnect:lt,autoPanOnNodeDrag:ut,autoPanSpeed:dt,onError:pt,connectionRadius:ft,isValidConnection:ht,selectNodesOnDrag:le,nodeDragThreshold:yt,onBeforeDelete:F,paneClickDistance:$e,debug:Ct}),(0,o.jsx)(O,{onSelectionChange:Z}),je,(0,o.jsx)(E,{proOptions:rt,position:ot}),(0,o.jsx)(b,{rfId:kt,disableKeyboardA11y:ct})]})})}));function Rt({dimensions:e,lineWidth:t,variant:n,className:i}){return(0,o.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:r(["react-flow__background-pattern",n,i])})}function Lt({radius:e,className:t}){return(0,o.jsx)("circle",{cx:e,cy:e,r:e,className:r(["react-flow__background-pattern","dots",t])})}var $t;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}($t||($t={}));const Bt={[$t.Dots]:1,[$t.Lines]:1,[$t.Cross]:6},jt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Zt({id:e,variant:t=$t.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=0,color:u,bgColor:d,style:f,className:p,patternClassName:g}){const m=(0,s.useRef)(null),{transform:y,patternId:v}=h(jt,c),x=i||Bt[t],w=t===$t.Dots,b=t===$t.Cross,S=Array.isArray(n)?n:[n,n],C=[S[0]*y[2]||1,S[1]*y[2]||1],E=x*y[2],_=Array.isArray(l)?l:[l,l],k=b?[E,E]:C,M=[_[0]*y[2]||1+k[0]/2,_[1]*y[2]||1+k[1]/2],N=`${v}${e||""}`;return(0,o.jsxs)("svg",{className:r(["react-flow__background",p]),style:{...f,...ae,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:m,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:N,x:y[0]%C[0],y:y[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:w?(0,o.jsx)(Lt,{radius:E/2,className:g}):(0,o.jsx)(Rt,{dimensions:k,lineWidth:a,variant:t,className:g})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}Zt.displayName="Background";const Tt=(0,s.memo)(Zt);function Vt(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ht(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function Xt(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Yt(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Wt(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ft({children:e,className:t,...n}){return(0,o.jsx)("button",{type:"button",className:r(["react-flow__controls-button",t]),...n,children:e})}const Kt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Gt({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:l,onFitView:u,onInteractiveChange:d,className:f,children:g,position:m="bottom-left",orientation:y="vertical","aria-label":v="React Flow controls"}){const x=p(),{isInteractive:w,minZoomReached:b,maxZoomReached:S}=h(Kt,c),{zoomIn:E,zoomOut:_,fitView:k}=oe(),M="horizontal"===y?"horizontal":"vertical";return(0,o.jsxs)(C,{className:r(["react-flow__controls",M,f]),position:m,style:e,"data-testid":"rf__controls","aria-label":v,children:[t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ft,{onClick:()=>{E(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:S,children:(0,o.jsx)(Vt,{})}),(0,o.jsx)(Ft,{onClick:()=>{_(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:(0,o.jsx)(Ht,{})})]}),n&&(0,o.jsx)(Ft,{className:"react-flow__controls-fitview",onClick:()=>{k(s),u?.()},title:"fit view","aria-label":"fit view",children:(0,o.jsx)(Xt,{})}),i&&(0,o.jsx)(Ft,{className:"react-flow__controls-interactive",onClick:()=>{x.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),d?.(!w)},title:"toggle interactivity","aria-label":"toggle interactivity",children:w?(0,o.jsx)(Wt,{}):(0,o.jsx)(Yt,{})}),g]})}Gt.displayName="Controls";const qt=(0,s.memo)(Gt);const Qt=(0,s.memo)((function({id:e,x:t,y:n,width:i,height:s,style:a,color:c,strokeColor:l,strokeWidth:u,className:d,borderRadius:f,shapeRendering:h,selected:p,onClick:g}){const{background:m,backgroundColor:y}=a||{},v=c||m||y;return(0,o.jsx)("rect",{className:r(["react-flow__minimap-node",{selected:p},d]),x:t,y:n,rx:f,ry:f,width:i,height:s,style:{fill:v,stroke:l,strokeWidth:u},shapeRendering:h,onClick:g?t=>g(t,e):void 0})})),Ut=e=>e.nodes.map((e=>e.id)),Jt=e=>e instanceof Function?e:()=>e;const en=(0,s.memo)((function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:a,shapeRendering:l,NodeComponent:u,onClick:d}){const{node:f,x:p,y:g,width:m,height:y}=h((t=>{const n=t.nodeLookup.get(e),{x:o,y:r}=n.internals.positionAbsolute,{width:s,height:a}=(0,i.Rf)(n);return{node:n,x:o,y:r,width:s,height:a}}),c);return f&&!f.hidden&&(0,i.nb)(f)?(0,o.jsx)(u,{x:p,y:g,width:m,height:y,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:s,strokeColor:n(f),strokeWidth:a,shapeRendering:l,onClick:d,id:f.id}):null}));var tn=(0,s.memo)((function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Qt,onClick:a}){const l=h(Ut,c),u=Jt(t),d=Jt(e),f=Jt(n),p="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:l.map((e=>(0,o.jsx)(en,{id:e,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:a,shapeRendering:p},e)))})}));const nn=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?(0,i.oI)((0,i.W0)(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function on({style:e,className:t,nodeStrokeColor:n,nodeColor:a,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:g,maskColor:m,maskStrokeColor:y,maskStrokeWidth:v,position:x="bottom-right",onClick:w,onNodeClick:b,pannable:S=!1,zoomable:E=!1,ariaLabel:_="React Flow mini map",inversePan:k,zoomStep:M=10,offsetScale:N=5}){const P=p(),O=(0,s.useRef)(null),{boundingRect:z,viewBB:I,rfId:D,panZoom:A,translateExtent:R,flowWidth:L,flowHeight:$}=h(nn,c),B=e?.width??200,j=e?.height??150,Z=z.width/B,T=z.height/j,V=Math.max(Z,T),H=V*B,X=V*j,Y=N*V,W=z.x-(H-z.width)/2-Y,F=z.y-(X-z.height)/2-Y,K=H+2*Y,G=X+2*Y,q=`react-flow__minimap-desc-${D}`,Q=(0,s.useRef)(0),U=(0,s.useRef)();Q.current=V,(0,s.useEffect)((()=>{if(O.current&&A)return U.current=(0,i.FD)({domNode:O.current,panZoom:A,getTransform:()=>P.getState().transform,getViewScale:()=>Q.current}),()=>{U.current?.destroy()}}),[A]),(0,s.useEffect)((()=>{U.current?.update({translateExtent:R,width:L,height:$,inversePan:k,pannable:S,zoomStep:M,zoomable:E})}),[S,E,k,M,R,L,$]);const J=w?e=>{const[t,n]=U.current?.pointer(e)||[0,0];w(e,{x:t,y:n})}:void 0,ee=b?(0,s.useCallback)(((e,t)=>{const n=P.getState().nodeLookup.get(t);b(e,n)}),[]):void 0;return(0,o.jsx)(C,{position:x,style:{...e,"--xy-minimap-background-color-props":"string"==typeof g?g:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof m?m:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof y?y:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof v?v*V:void 0,"--xy-minimap-node-background-color-props":"string"==typeof a?a:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"string"==typeof d?d:void 0},className:r(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:B,height:j,viewBox:`${W} ${F} ${K} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:O,onClick:J,children:[_&&(0,o.jsx)("title",{id:q,children:_}),(0,o.jsx)(tn,{onClick:ee,nodeColor:a,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:f}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${W-Y},${F-Y}h${K+2*Y}v${G+2*Y}h${-K-2*Y}z\n        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}on.displayName="MiniMap";const rn=(0,s.memo)(on);(0,s.memo)((function({nodeId:e,position:t,variant:n=i.pB.Handle,className:a,style:c={},children:l,color:u,minWidth:d=10,minHeight:f=10,maxWidth:h=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:m=!1,shouldResize:y,onResizeStart:v,onResize:x,onResizeEnd:w}){const b=we(),S="string"==typeof e?e:b,C=p(),E=(0,s.useRef)(null),_=n===i.pB.Line?"right":"bottom-right",k=t??_,M=(0,s.useRef)(null);(0,s.useEffect)((()=>{if(E.current&&S)return M.current||(M.current=(0,i.Cz)({domNode:E.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=C.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:s}=C.getState(),a=[],c={x:e.x,y:e.y},l=o.get(S);if(l&&l.expandParent&&l.parentId){const t=l.origin??s,n=e.width??l.measured.width,u=e.height??l.measured.height,d={id:l.id,parentId:l.parentId,rect:{width:n,height:u,...(0,i.ZB)({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:u},l.parentId,o,t)}},f=(0,i.so)([d],o,r,s);a.push(...f),c.x=e.x?Math.max(t[0]*n,e.x):void 0,c.y=e.y?Math.max(t[1]*u,e.y):void 0}if(void 0!==c.x&&void 0!==c.y){const e={id:S,type:"position",position:{...c}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:S,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};a.push(t)}for(const e of t){const t={...e,type:"position"};a.push(t)}n(a)},onEnd:()=>{const e={id:S,type:"dimensions",resizing:!1};C.getState().triggerNodeChanges([e])}})),M.current.update({controlPosition:k,boundaries:{minWidth:d,minHeight:f,maxWidth:h,maxHeight:g},keepAspectRatio:m,onResizeStart:v,onResize:x,onResizeEnd:w,shouldResize:y}),()=>{M.current?.destroy()}}),[k,d,f,h,g,m,v,x,w,y]);const N=k.split("-"),P=n===i.pB.Line?"borderColor":"backgroundColor",O=u?{...c,[P]:u}:c;return(0,o.jsx)("div",{className:r(["react-flow__resize-control","nodrag",...N,n,a]),ref:E,style:O,children:l})}));const sn=e=>e.domNode?.querySelector(".react-flow__renderer");function an({children:e}){const t=h(sn);return t?(0,l.createPortal)(e,t):null}const cn=(e,t)=>e?.internals.positionAbsolute.x!==t?.internals.positionAbsolute.x||e?.internals.positionAbsolute.y!==t?.internals.positionAbsolute.y||e?.measured.width!==t?.measured.width||e?.measured.height!==t?.measured.height||e?.selected!==t?.selected||e?.internals.z!==t?.internals.z,ln=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,o]of e)if(cn(o,t.get(n)))return!1;return!0},un=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter((e=>e.selected)).length});function dn({nodeId:e,children:t,className:n,style:a,isVisible:l,position:u=i.Ly.Top,offset:d=10,align:f="center",...p}){const g=we(),m=h((0,s.useCallback)((t=>(Array.isArray(e)?e:[e||g||""]).reduce(((e,n)=>{const o=t.nodeLookup.get(n);return o&&e.set(o.id,o),e}),new Map)),[e,g]),ln),{x:y,y:v,zoom:x,selectedNodesCount:w}=h(un,c);if(!("boolean"==typeof l?l:1===m.size&&m.values().next().value.selected&&1===w)||!m.size)return null;const b=(0,i.W0)(m),S=Array.from(m.values()),C=Math.max(...S.map((e=>e.internals.z+1))),E={position:"absolute",transform:(0,i.ZJ)(b,{x:y,y:v,zoom:x},u,d,f),zIndex:C,...a};return(0,o.jsx)(an,{children:(0,o.jsx)("div",{style:E,className:r(["react-flow__node-toolbar",n]),...p,"data-id":S.reduce(((e,t)=>`${e}${t.id} `),"").trim(),children:t})})}},22450:function(e,t,n){n.d(t,{t8:function(){return on},jD:function(){return Jt},QZ:function(){return rn},IY:function(){return en},Ly:function(){return sn},pB:function(){return qo},oW:function(){return tn},oC:function(){return Ro},Ql:function(){return To},FD:function(){return Vo},X6:function(){return Go},Cz:function(){return rr},Z_:function(){return so},yF:function(){return _o},q7:function(){return vn},n3:function(){return xo},Ki:function(){return An},wQ:function(){return Ut},Qj:function(){return qt},ZB:function(){return Hn},Qu:function(){return yn},lM:function(){return Un},OQ:function(){return to},oI:function(){return On},Zp:function(){return cn},t_:function(){return Yn},JU:function(){return po},WD:function(){return xn},xx:function(){return oo},wv:function(){return qn},J6:function(){return mn},S2:function(){return Wn},W0:function(){return pn},dW:function(){return vo},Rf:function(){return Tn},ZJ:function(){return wo},RX:function(){return hn},f5:function(){return gn},lp:function(){return zn},OW:function(){return fo},Hm:function(){return ao},$i:function(){return Bn},so:function(){return No},k5:function(){return Qt},Ky:function(){return nn},J3:function(){return ln},RY:function(){return ro},s$:function(){return Kn},Q5:function(){return jn},N5:function(){return Gn},Vt:function(){return un},kE:function(){return Dn},J$:function(){return In},nb:function(){return Vn},PS:function(){return Nn},hO:function(){return Oo},m:function(){return Ln},oj:function(){return $n},_2:function(){return Rn},VV:function(){return Eo},be:function(){return zo},B1:function(){return Po}});var o=n(75998);function r(){}function i(e){return null==e?r:function(){return this.querySelector(e)}}function s(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function a(){return[]}function c(e){return null==e?a:function(){return this.querySelectorAll(e)}}function l(e){return function(){return this.matches(e)}}function u(e){return function(t){return t.matches(e)}}var d=Array.prototype.find;function f(){return this.firstElementChild}var h=Array.prototype.filter;function p(){return Array.from(this.children)}function g(e){return new Array(e.length)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function y(e){return function(){return e}}function v(e,t,n,o,r,i){for(var s,a=0,c=t.length,l=i.length;a<l;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new m(e,i[a]);for(;a<c;++a)(s=t[a])&&(r[a]=s)}function x(e,t,n,o,r,i,s){var a,c,l,u=new Map,d=t.length,f=i.length,h=new Array(d);for(a=0;a<d;++a)(c=t[a])&&(h[a]=l=s.call(c,c.__data__,a,t)+"",u.has(l)?r[a]=c:u.set(l,c));for(a=0;a<f;++a)l=s.call(e,i[a],a,i)+"",(c=u.get(l))?(o[a]=c,c.__data__=i[a],u.delete(l)):n[a]=new m(e,i[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(h[a])===c&&(r[a]=c)}function w(e){return e.__data__}function b(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function S(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var C="http://www.w3.org/1999/xhtml",E={svg:"http://www.w3.org/2000/svg",xhtml:C,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),E.hasOwnProperty(t)?{space:E[t],local:e}:e}function k(e){return function(){this.removeAttribute(e)}}function M(e){return function(){this.removeAttributeNS(e.space,e.local)}}function N(e,t){return function(){this.setAttribute(e,t)}}function P(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function O(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function z(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function I(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function D(e){return function(){this.style.removeProperty(e)}}function A(e,t,n){return function(){this.style.setProperty(e,t,n)}}function R(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function L(e,t){return e.style.getPropertyValue(t)||I(e).getComputedStyle(e,null).getPropertyValue(t)}function $(e){return function(){delete this[e]}}function B(e,t){return function(){this[e]=t}}function j(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Z(e){return e.trim().split(/^|\s+/)}function T(e){return e.classList||new V(e)}function V(e){this._node=e,this._names=Z(e.getAttribute("class")||"")}function H(e,t){for(var n=T(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function X(e,t){for(var n=T(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Y(e){return function(){H(this,e)}}function W(e){return function(){X(this,e)}}function F(e,t){return function(){(t.apply(this,arguments)?H:X)(this,e)}}function K(){this.textContent=""}function G(e){return function(){this.textContent=e}}function q(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Q(){this.innerHTML=""}function U(e){return function(){this.innerHTML=e}}function J(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ee(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ne(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===C&&t.documentElement.namespaceURI===C?t.createElement(e):t.createElementNS(n,e)}}function oe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function re(e){var t=_(e);return(t.local?oe:ne)(t)}function ie(){return null}function se(){var e=this.parentNode;e&&e.removeChild(this)}function ae(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ce(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function le(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ue(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function de(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function fe(e,t,n){var o=I(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function he(e,t){return function(){return fe(this,e,t)}}function pe(e,t){return function(){return fe(this,e,t.apply(this,arguments))}}V.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ge=[null];function me(e,t){this._groups=e,this._parents=t}function ye(){return new me([[document.documentElement]],ge)}me.prototype=ye.prototype={constructor:me,select:function(e){"function"!=typeof e&&(e=i(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s,a,c=t[r],l=c.length,u=o[r]=new Array(l),d=0;d<l;++d)(s=c[d])&&(a=e.call(s,s.__data__,d,c))&&("__data__"in s&&(a.__data__=s.__data__),u[d]=a);return new me(o,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return s(e.apply(this,arguments))}}(e):c(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,d=0;d<u;++d)(a=l[d])&&(o.push(e.call(a,a.__data__,d,l)),r.push(a));return new me(o,r)},selectChild:function(e){return this.select(null==e?f:function(e){return function(){return d.call(this.children,e)}}("function"==typeof e?e:u(e)))},selectChildren:function(e){return this.selectAll(null==e?p:function(e){return function(){return h.call(this.children,e)}}("function"==typeof e?e:u(e)))},filter:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,s=t[r],a=s.length,c=o[r]=[],u=0;u<a;++u)(i=s[u])&&e.call(i,i.__data__,u,s)&&c.push(i);return new me(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,w);var n=t?x:v,o=this._parents,r=this._groups;"function"!=typeof e&&(e=y(e));for(var i=r.length,s=new Array(i),a=new Array(i),c=new Array(i),l=0;l<i;++l){var u=o[l],d=r[l],f=d.length,h=b(e.call(u,u&&u.__data__,l,o)),p=h.length,g=a[l]=new Array(p),m=s[l]=new Array(p),S=c[l]=new Array(f);n(u,d,g,m,S,h,t);for(var C,E,_=0,k=0;_<p;++_)if(C=g[_]){for(_>=k&&(k=_+1);!(E=m[k])&&++k<p;);C._next=E||null}}return(s=new me(s,o))._enter=a,s._exit=c,s},enter:function(){return new me(this._enter||this._groups.map(g),this._parents)},exit:function(){return new me(this._exit||this._groups.map(g),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),c=0;c<s;++c)for(var l,u=n[c],d=o[c],f=u.length,h=a[c]=new Array(f),p=0;p<f;++p)(l=u[p]||d[p])&&(h[p]=l);for(;c<r;++c)a[c]=n[c];return new me(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,s=r[i];--i>=0;)(o=r[i])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=S);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s,a=n[i],c=a.length,l=r[i]=new Array(c),u=0;u<c;++u)(s=a[u])&&(l[u]=s);l.sort(t)}return new me(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],s=0,a=i.length;s<a;++s)(r=i[s])&&e.call(r,r.__data__,s,i);return this},attr:function(e,t){var n=_(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?M:k:"function"==typeof t?n.local?z:O:n.local?P:N)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?D:"function"==typeof t?R:A)(e,t,null==n?"":n)):L(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?$:"function"==typeof t?j:B)(e,t)):this.node()[e]},classed:function(e,t){var n=Z(e+"");if(arguments.length<2){for(var o=T(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?F:t?Y:W)(n,t))},text:function(e){return arguments.length?this.each(null==e?K:("function"==typeof e?q:G)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Q:("function"==typeof e?J:U)(e)):this.node().innerHTML},raise:function(){return this.each(ee)},lower:function(){return this.each(te)},append:function(e){var t="function"==typeof e?e:re(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:re(e),o=null==t?ie:"function"==typeof t?t:i(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(se)},clone:function(e){return this.select(e?ce:ae)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=le(e+""),s=i.length;if(!(arguments.length<2)){for(a=t?de:ue,o=0;o<s;++o)this.each(a(i[o],t,n));return this}var a=this.node().__on;if(a)for(var c,l=0,u=a.length;l<u;++l)for(o=0,c=a[l];o<s;++o)if((r=i[o]).type===c.type&&r.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?pe:he)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,s=r.length;i<s;++i)(o=r[i])&&(yield o)}};var ve=ye;function xe(e){return"string"==typeof e?new me([[document.querySelector(e)]],[document.documentElement]):new me([[e]],ge)}function we(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const be={passive:!1},Se={capture:!0,passive:!1};function Ce(e){e.stopImmediatePropagation()}function Ee(e){e.preventDefault(),e.stopImmediatePropagation()}function _e(e){var t=e.document.documentElement,n=xe(e).on("dragstart.drag",Ee,Se);"onselectstart"in t?n.on("selectstart.drag",Ee,Se):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ke(e,t){var n=e.document.documentElement,o=xe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ee,Se),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Me=e=>()=>e;function Ne(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function Pe(e){return!e.ctrlKey&&!e.button}function Oe(){return this.parentNode}function ze(e,t){return null==t?{x:e.x,y:e.y}:t}function Ie(){return navigator.maxTouchPoints||"ontouchstart"in this}function De(){var e,t,n,r,i=Pe,s=Oe,a=ze,c=Ie,l={},u=(0,o.Z)("start","drag","end"),d=0,f=0;function h(e){e.on("mousedown.drag",p).filter(c).on("touchstart.drag",y).on("touchmove.drag",v,be).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(o,a){if(!r&&i.call(this,o,a)){var c=w(this,s.call(this,o,a),o,a,"mouse");c&&(xe(o.view).on("mousemove.drag",g,Se).on("mouseup.drag",m,Se),_e(o.view),Ce(o),n=!1,e=o.clientX,t=o.clientY,c("start",o))}}function g(o){if(Ee(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>f}l.mouse("drag",o)}function m(e){xe(e.view).on("mousemove.drag mouseup.drag",null),ke(e.view,n),Ee(e),l.mouse("end",e)}function y(e,t){if(i.call(this,e,t)){var n,o,r=e.changedTouches,a=s.call(this,e,t),c=r.length;for(n=0;n<c;++n)(o=w(this,a,e,t,r[n].identifier,r[n]))&&(Ce(e),o("start",e,r[n]))}}function v(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=l[o[t].identifier])&&(Ee(e),n("drag",e,o[t]))}function x(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(n=l[o[t].identifier])&&(Ce(e),n("end",e,o[t]))}function w(e,t,n,o,r,i){var s,c,f,p=u.copy(),g=we(i||n,t);if(null!=(f=a.call(e,new Ne("beforestart",{sourceEvent:n,target:h,identifier:r,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),o)))return s=f.x-g[0]||0,c=f.y-g[1]||0,function n(i,a,u){var m,y=g;switch(i){case"start":l[r]=n,m=d++;break;case"end":delete l[r],--d;case"drag":g=we(u||a,t),m=d}p.call(i,e,new Ne(i,{sourceEvent:a,subject:f,target:h,identifier:r,active:m,x:g[0]+s,y:g[1]+c,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:p}),o)}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:Me(!!e),h):i},h.container=function(e){return arguments.length?(s="function"==typeof e?e:Me(e),h):s},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:Me(e),h):a},h.touchable=function(e){return arguments.length?(c="function"==typeof e?e:Me(!!e),h):c},h.on=function(){var e=u.on.apply(u,arguments);return e===u?h:e},h.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,h):Math.sqrt(f)},h}Ne.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ae(e){return((e=Math.exp(e))+1/e)/2}var Re=function e(t,n,o){function r(e,r){var i,s,a=e[0],c=e[1],l=e[2],u=r[0],d=r[1],f=r[2],h=u-a,p=d-c,g=h*h+p*p;if(g<1e-12)s=Math.log(f/l)/t,i=function(e){return[a+e*h,c+e*p,l*Math.exp(t*e*s)]};else{var m=Math.sqrt(g),y=(f*f-l*l+o*g)/(2*l*n*m),v=(f*f-l*l-o*g)/(2*f*n*m),x=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(v*v+1)-v);s=(w-x)/t,i=function(e){var o,r=e*s,i=Ae(x),u=l/(n*m)*(i*(o=t*r+x,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(x));return[a+u*h,c+u*p,l*i/Ae(t*r+x)]}}return i.duration=1e3*s*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4),Le=n(18856);function $e(e,t,n){var o=new Le.B7;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}var Be=(0,o.Z)("start","end","cancel","interrupt"),je=[];function Ze(e,t,n,o,r,i){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(i){var l,u,d,f;if(1!==n.state)return c();for(l in r)if((f=r[l]).name===n.name){if(3===f.state)return $e(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[l])}if($e((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(o[++u]=f);o.length=u+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),i=-1,s=o.length;++i<s;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=(0,Le.HT)(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:Be,tween:je,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function Te(e,t){var n=He(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ve(e,t){var n=He(e,t);if(n.state>3)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xe(e,t){var n,o,r,i=e.__transition,s=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):s=!1;s&&delete e.__transition}}function Ye(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var We,Fe=180/Math.PI,Ke={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ge(e,t,n,o,r,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Fe,skewX:Math.atan(c)*Fe,scaleX:s,scaleY:a}}function qe(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,s){var a=[],c=[];return i=e(i),s=e(s),function(e,o,r,i,s,a){if(e!==r||o!==i){var c=s.push("translate(",null,t,null,n);a.push({i:c-4,x:Ye(e,r)},{i:c-2,x:Ye(o,i)})}else(r||i)&&s.push("translate("+r+t+i+n)}(i.translateX,i.translateY,s.translateX,s.translateY,a,c),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:Ye(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,s.rotate,a,c),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:Ye(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,s.skewX,a,c),function(e,t,n,o,i,s){if(e!==n||t!==o){var a=i.push(r(i)+"scale(",null,",",null,")");s.push({i:a-4,x:Ye(e,n)},{i:a-2,x:Ye(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,s.scaleX,s.scaleY,a,c),i=s=null,function(e){for(var t,n=-1,o=c.length;++n<o;)a[(t=c[n]).i]=t.x(e);return a.join("")}}}var Qe=qe((function(e){var t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ke:Ge(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ue=qe((function(e){return null==e?Ke:(We||(We=document.createElementNS("http://www.w3.org/2000/svg","g")),We.setAttribute("transform",e),(e=We.transform.baseVal.consolidate())?Ge((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ke)}),", ",")",")");function Je(e,t){var n,o;return function(){var r=Ve(this,e),i=r.tween;if(i!==n)for(var s=0,a=(o=n=i).length;s<a;++s)if(o[s].name===t){(o=o.slice()).splice(s,1);break}r.tween=o}}function et(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=Ve(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}i.tween=r}}function tt(e,t,n){var o=e._id;return e.each((function(){var e=Ve(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return He(e,o).value[t]}}var nt=n(15089),ot=n(94333),rt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,it=new RegExp(rt.source,"g");function st(e,t){var n,o,r,i=rt.lastIndex=it.lastIndex=0,s=-1,a=[],c=[];for(e+="",t+="";(n=rt.exec(e))&&(o=it.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:Ye(n,o)})),i=it.lastIndex;return i<t.length&&(r=t.slice(i),a[s]?a[s]+=r:a[++s]=r),a.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,o=0;o<t;++o)a[(n=c[o]).i]=n.x(e);return a.join("")})}function at(e,t){var n;return("number"==typeof t?Ye:t instanceof nt.ZP?ot.ZP:(n=(0,nt.ZP)(t))?(t=n,ot.ZP):st)(e,t)}function ct(e){return function(){this.removeAttribute(e)}}function lt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ut(e,t,n){var o,r,i=n+"";return function(){var s=this.getAttribute(e);return s===i?null:s===o?r:r=t(o=s,n)}}function dt(e,t,n){var o,r,i=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?r:r=t(o=s,n)}}function ft(e,t,n){var o,r,i;return function(){var s,a,c=n(this);if(null!=c)return(s=this.getAttribute(e))===(a=c+"")?null:s===o&&a===r?i:(r=a,i=t(o=s,c));this.removeAttribute(e)}}function ht(e,t,n){var o,r,i;return function(){var s,a,c=n(this);if(null!=c)return(s=this.getAttributeNS(e.space,e.local))===(a=c+"")?null:s===o&&a===r?i:(r=a,i=t(o=s,c));this.removeAttributeNS(e.space,e.local)}}function pt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mt(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&gt(e,r)),n}return r._value=t,r}function yt(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&pt(e,r)),n}return r._value=t,r}function vt(e,t){return function(){Te(this,e).delay=+t.apply(this,arguments)}}function xt(e,t){return t=+t,function(){Te(this,e).delay=t}}function wt(e,t){return function(){Ve(this,e).duration=+t.apply(this,arguments)}}function bt(e,t){return t=+t,function(){Ve(this,e).duration=t}}function St(e,t){if("function"!=typeof t)throw new Error;return function(){Ve(this,e).ease=t}}function Ct(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Te:Ve;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}var Et=ve.prototype.constructor;function _t(e){return function(){this.style.removeProperty(e)}}function kt(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Mt(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&kt(e,i,n)),o}return i._value=t,i}function Nt(e){return function(t){this.textContent=e.call(this,t)}}function Pt(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Nt(o)),t}return o._value=e,o}var Ot=0;function zt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function It(){return++Ot}var Dt=ve.prototype;zt.prototype=function(e){return ve().transition(e)}.prototype={constructor:zt,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=i(e));for(var o=this._groups,r=o.length,s=new Array(r),a=0;a<r;++a)for(var c,l,u=o[a],d=u.length,f=s[a]=new Array(d),h=0;h<d;++h)(c=u[h])&&(l=e.call(c,c.__data__,h,u))&&("__data__"in c&&(l.__data__=c.__data__),f[h]=l,Ze(f[h],t,n,h,f,He(c,n)));return new zt(s,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=c(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l,u=o[a],d=u.length,f=0;f<d;++f)if(l=u[f]){for(var h,p=e.call(l,l.__data__,f,u),g=He(l,n),m=0,y=p.length;m<y;++m)(h=p[m])&&Ze(h,t,n,m,p,g);i.push(p),s.push(l)}return new zt(i,s,t,n)},selectChild:Dt.selectChild,selectChildren:Dt.selectChildren,filter:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,s=t[r],a=s.length,c=o[r]=[],u=0;u<a;++u)(i=s[u])&&e.call(i,i.__data__,u,s)&&c.push(i);return new zt(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var c,l=t[a],u=n[a],d=l.length,f=s[a]=new Array(d),h=0;h<d;++h)(c=l[h]||u[h])&&(f[h]=c);for(;a<o;++a)s[a]=t[a];return new zt(s,this._parents,this._name,this._id)},selection:function(){return new Et(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=It(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s,a=o[i],c=a.length,l=0;l<c;++l)if(s=a[l]){var u=He(s,t);Ze(s,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new zt(o,this._parents,e,n)},call:Dt.call,nodes:Dt.nodes,node:Dt.node,size:Dt.size,empty:Dt.empty,each:Dt.each,on:function(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(Ct(n,e,t))},attr:function(e,t){var n=_(e),o="transform"===n?Ue:at;return this.attrTween(e,"function"==typeof t?(n.local?ht:ft)(n,o,tt(this,"attr."+e,t)):null==t?(n.local?lt:ct)(n):(n.local?dt:ut)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=_(e);return this.tween(n,(o.local?mt:yt)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Qe:at;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=L(this,e),s=(this.style.removeProperty(e),L(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}(e,o)).on("end.style."+e,_t(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var s=L(this,e),a=n(this),c=a+"";return null==a&&(this.style.removeProperty(e),c=a=L(this,e)),s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a))}}(e,o,tt(this,"style."+e,t))).each(function(e,t){var n,o,r,i,s="style."+t,a="end."+s;return function(){var c=Ve(this,e),l=c.on,u=null==c.value[s]?i||(i=_t(t)):void 0;l===n&&r===u||(o=(n=l).copy()).on(a,r=u),c.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var s=L(this,e);return s===i?null:s===o?r:r=t(o=s,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,Mt(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(tt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Pt(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=He(this.node(),n).tween,i=0,s=r.length;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?Je:et)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?vt:xt)(t,e)):He(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?wt:bt)(t,e)):He(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(St(t,e)):He(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Ve(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,s){var a={value:s},c={value:function(){0==--r&&i()}};n.each((function(){var n=Ve(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:Dt[Symbol.iterator]};var At={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Rt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}ve.prototype.interrupt=function(e){return this.each((function(){Xe(this,e)}))},ve.prototype.transition=function(e){var t,n;e instanceof zt?(t=e._id,e=e._name):(t=It(),(n=At).time=(0,Le.zO)(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s,a=o[i],c=a.length,l=0;l<c;++l)(s=a[l])&&Ze(s,e,t,l,a,n||Rt(s,t));return new zt(o,this._parents,e,t)};var Lt=e=>()=>e;function $t(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Bt(e,t,n){this.k=e,this.x=t,this.y=n}Bt.prototype={constructor:Bt,scale:function(e){return 1===e?this:new Bt(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Bt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jt=new Bt(1,0,0);function Zt(e){for(;!e.__zoom;)if(!(e=e.parentNode))return jt;return e.__zoom}function Tt(e){e.stopImmediatePropagation()}function Vt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ht(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Xt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Yt(){return this.__zoom||jt}function Wt(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ft(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kt(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Gt(){var e,t,n,r=Ht,i=Xt,s=Kt,a=Wt,c=Ft,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,f=Re,h=(0,o.Z)("start","zoom","end"),p=500,g=0,m=10;function y(e){e.property("__zoom",Yt).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",k).filter(c).on("touchstart.zoom",M).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Bt(t,e.x,e.y)}function x(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Bt(e.k,o,r)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,o){e.on("start.zoom",(function(){S(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,r=arguments,s=S(e,r).event(o),a=i.apply(e,r),c=null==n?w(a):"function"==typeof n?n.apply(e,r):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,d="function"==typeof t?t.apply(e,r):t,h=f(u.invert(c).concat(l/u.k),d.invert(c).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=l/t[2];e=new Bt(n,c[0]-t[0]*n,c[1]-t[1]*n)}s.zoom(null,e)}}))}function S(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function E(e,...t){if(r.apply(this,arguments)){var n=S(this,t).event(e),o=this.__zoom,i=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,a.apply(this,arguments)))),c=we(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=o.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(o.k===i)return;n.mouse=[c,o.invert(c)],Xe(this),n.start()}Vt(e),n.wheel=setTimeout(d,150),n.zoom("mouse",s(x(v(o,i),n.mouse[0],n.mouse[1]),n.extent,u))}function d(){n.wheel=null,n.end()}}function _(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=S(this,t,!0).event(e),a=xe(e.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",h,!0),c=we(e,o),l=e.clientX,d=e.clientY;_e(e.view),Tt(e),i.mouse=[c,this.__zoom.invert(c)],Xe(this),i.start()}function f(e){if(Vt(e),!i.moved){var t=e.clientX-l,n=e.clientY-d;i.moved=t*t+n*n>g}i.event(e).zoom("mouse",s(x(i.that.__zoom,i.mouse[0]=we(e,o),i.mouse[1]),i.extent,u))}function h(e){a.on("mousemove.zoom mouseup.zoom",null),ke(e.view,i.moved),Vt(e),i.event(e).end()}}function k(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,o=we(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(o),c=n.k*(e.shiftKey?.5:2),l=s(x(v(n,c),o,a),i.apply(this,t),u);Vt(e),d>0?xe(this).transition().duration(d).call(b,l,o,e):xe(this).call(y.transform,l,o,e)}}function M(n,...o){if(r.apply(this,arguments)){var i,s,a,c,l=n.touches,u=l.length,d=S(this,o,n.changedTouches.length===u).event(n);for(Tt(n),s=0;s<u;++s)c=[c=we(a=l[s],this),this.__zoom.invert(c),a.identifier],d.touch0?d.touch1||d.touch0[2]===c[2]||(d.touch1=c,d.taps=0):(d.touch0=c,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=c[0],e=setTimeout((function(){e=null}),p)),Xe(this),d.start())}}function N(e,...t){if(this.__zooming){var n,o,r,i,a=S(this,t).event(e),c=e.changedTouches,l=c.length;for(Vt(e),n=0;n<l;++n)r=we(o=c[n],this),a.touch0&&a.touch0[2]===o.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===o.identifier&&(a.touch1[0]=r);if(o=a.that.__zoom,a.touch1){var d=a.touch0[0],f=a.touch0[1],h=a.touch1[0],p=a.touch1[1],g=(g=h[0]-d[0])*g+(g=h[1]-d[1])*g,m=(m=p[0]-f[0])*m+(m=p[1]-f[1])*m;o=v(o,Math.sqrt(g/m)),r=[(d[0]+h[0])/2,(d[1]+h[1])/2],i=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],i=a.touch0[1]}a.zoom("touch",s(x(o,r,i),a.extent,u))}}function P(e,...o){if(this.__zooming){var r,i,s=S(this,o).event(e),a=e.changedTouches,c=a.length;for(Tt(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),r=0;r<c;++r)i=a[r],s.touch0&&s.touch0[2]===i.identifier?delete s.touch0:s.touch1&&s.touch1[2]===i.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(i=we(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<m)){var l=xe(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return y.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",Yt),e!==r?b(e,t,n,o):r.interrupt().each((function(){S(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,o){y.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,o)},y.scaleTo=function(e,t,n,o){y.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,r=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,a=o.invert(r),c="function"==typeof t?t.apply(this,arguments):t;return s(x(v(o,c),r,a),e,u)}),n,o)},y.translateBy=function(e,t,n,o){y.transform(e,(function(){return s(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)}),null,o)},y.translateTo=function(e,t,n,o,r){y.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==o?w(e):"function"==typeof o?o.apply(this,arguments):o;return s(jt.translate(a[0],a[1]).scale(r.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)}),o,r)},C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=xe(this.that).datum();h.call(e,this.that,new $t(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:h}),t)}},y.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Lt(+e),y):a},y.filter=function(e){return arguments.length?(r="function"==typeof e?e:Lt(!!e),y):r},y.touchable=function(e){return arguments.length?(c="function"==typeof e?e:Lt(!!e),y):c},y.extent=function(e){return arguments.length?(i="function"==typeof e?e:Lt([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):i},y.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],y):[l[0],l[1]]},y.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],y):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},y.constrain=function(e){return arguments.length?(s=e,y):s},y.duration=function(e){return arguments.length?(d=+e,y):d},y.interpolate=function(e){return arguments.length?(f=e,y):f},y.on=function(){var e=h.on.apply(h,arguments);return e===h?y:e},y.clickDistance=function(e){return arguments.length?(g=(e=+e)*e,y):Math.sqrt(g)},y.tapDistance=function(e){return arguments.length?(m=+e,y):m},y}Zt.prototype=Bt.prototype;const qt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Qt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ut=["Enter"," ","Escape"];var Jt,en,tn;!function(e){e.Strict="strict",e.Loose="loose"}(Jt||(Jt={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(en||(en={})),function(e){e.Partial="partial",e.Full="full"}(tn||(tn={}));const nn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var on,rn,sn;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(on||(on={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(rn||(rn={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(sn||(sn={}));const an={[sn.Left]:sn.Right,[sn.Right]:sn.Left,[sn.Top]:sn.Bottom,[sn.Bottom]:sn.Top};function cn(e){return null===e?null:e?"valid":"invalid"}const ln=e=>"id"in e&&"source"in e&&"target"in e,un=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),dn=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),fn=(e,t=[0,0])=>{const{width:n,height:o}=Tn(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},hn=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const o="string"==typeof n;let r=t.nodeLookup||o?void 0:n;t.nodeLookup&&(r=o?t.nodeLookup.get(n):dn(n)?n:t.nodeLookup.get(n.id));const i=r?Pn(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return _n(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Mn(n)},pn=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Pn(e);n=_n(n,t)}})),Mn(n)},gn=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const a={...Ln(t,[n,o,r]),width:t.width/r,height:t.height/r},c=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:o=!1}=t;if(s&&!n||o)continue;const r=e.width??t.width??t.initialWidth??null,l=e.height??t.height??t.initialHeight??null,u=zn(a,Nn(t)),d=(r??0)*(l??0),f=i&&u>0;(!t.internals.handleBounds||f||u>=d||t.dragging)&&c.push(t)}return c};function mn(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!(e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden))||o&&!o.has(e.id)||n.set(e.id,e)})),n}async function yn({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(0===e.size)return Promise.resolve(!1);const a=pn(e),c=Bn(a,t,n,s?.minZoom??r,s?.maxZoom??i,s?.padding??.1);return await o.setViewport(c,{duration:s?.duration}),Promise.resolve(!0)}function vn({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:l}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??o;let d=r;if("parent"!==s.extent||s.expandParent)a&&Zn(s.extent)&&(d=[[s.extent[0][0]+c,s.extent[0][1]+l],[s.extent[1][0]+c,s.extent[1][1]+l]]);else if(a){const e=a.measured.width,t=a.measured.height;e&&t&&(d=[[c,l],[c+e,l+t]])}else i?.("005",qt.error005());const f=Zn(d)?bn(t,d,s.measured):t;return{position:{x:f.x-c+s.measured.width*u[0],y:f.y-l+s.measured.height*u[1]},positionAbsolute:f}}async function xn({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map((e=>e.id))),s=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&s.find((t=>t.id===e.parentId));(t||n)&&s.push(e)}const a=new Set(t.map((e=>e.id))),c=o.filter((e=>!1!==e.deletable)),l=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(s,c),u=l;for(const e of c){a.has(e.id)&&!u.find((t=>t.id===e.id))&&u.push(e)}if(!r)return{edges:u,nodes:s};const d=await r({nodes:s,edges:u});return"boolean"==typeof d?d?{edges:u,nodes:s}:{edges:[],nodes:[]}:d}const wn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),bn=(e={x:0,y:0},t,n)=>({x:wn(e.x,t[0][0],t[1][0]-(n?.width??0)),y:wn(e.y,t[0][1],t[1][1]-(n?.height??0))});function Sn(e,t,n){const{width:o,height:r}=Tn(n),{x:i,y:s}=n.internals.positionAbsolute;return bn(e,[[i,s],[i+o,s+r]],t)}const Cn=(e,t,n)=>e<t?wn(Math.abs(e-t),1,t)/t:e>n?-wn(Math.abs(e-n),1,t)/t:0,En=(e,t,n=15,o=40)=>[Cn(e.x,o,t.width-o)*n,Cn(e.y,o,t.height-o)*n],_n=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),kn=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Mn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Nn=(e,t=[0,0])=>{const{x:n,y:o}=dn(e)?e.internals.positionAbsolute:fn(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Pn=(e,t=[0,0])=>{const{x:n,y:o}=dn(e)?e.internals.positionAbsolute:fn(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},On=(e,t)=>Mn(_n(kn(e),kn(t))),zn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},In=e=>Dn(e.width)&&Dn(e.height)&&Dn(e.x)&&Dn(e.y),Dn=e=>!isNaN(e)&&isFinite(e),An=(e,t)=>{0},Rn=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ln=({x:e,y:t},[n,o,r],i=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-o)/r};return i?Rn(a,s):a},$n=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Bn=(e,t,n,o,r,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),l=wn(c,o,r);return{x:t/2-(e.x+e.width/2)*l,y:n/2-(e.y+e.height/2)*l,zoom:l}},jn=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function Zn(e){return void 0!==e&&"parent"!==e}function Tn(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Vn(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function Hn(e,t={width:0,height:0},n,o,r){const i={...e},s=o.get(n);if(s){const e=s.origin||r;i.x+=s.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function Xn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=qn(e),a=Ln({x:i-(r?.left??0),y:s-(r?.top??0)},o),{x:c,y:l}=n?Rn(a,t):a;return{xSnapped:c,ySnapped:l,...a}}const Yn=e=>({width:e.offsetWidth,height:e.offsetHeight}),Wn=e=>e.getRootNode?.()||window?.document,Fn=["INPUT","SELECT","TEXTAREA"];function Kn(e){const t=e.composedPath?.()?.[0]||e.target;return Fn.includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}const Gn=e=>"clientX"in e,qn=(e,t)=>{const n=Gn(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Qn=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...Yn(t)}})):null};function Un({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=.125*e+.375*r+.375*s+.125*n,l=.125*t+.375*i+.375*a+.125*o;return[c,l,Math.abs(c-e),Math.abs(l-t)]}function Jn(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function eo({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case sn.Left:return[t-Jn(t-o,i),n];case sn.Right:return[t+Jn(o-t,i),n];case sn.Top:return[t,n-Jn(n-r,i)];case sn.Bottom:return[t,n+Jn(r-n,i)]}}function to({sourceX:e,sourceY:t,sourcePosition:n=sn.Bottom,targetX:o,targetY:r,targetPosition:i=sn.Top,curvature:s=.25}){const[a,c]=eo({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[l,u]=eo({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[d,f,h,p]=Un({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${o},${r}`,d,f,h,p]}function no({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2;return[i,o<t?o+s:o-s,r,s]}function oo({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?s:0)}function ro({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=_n(Pn(e),Pn(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return zn(s,Mn(i))>0}const io=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,so=(e,t)=>{if(!e.source||!e.target)return An("006",qt.error006()),t;let n;return n=ln(e)?{...e}:{...e,id:io(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function ao({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,a]=no({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}const co={[sn.Left]:{x:-1,y:0},[sn.Right]:{x:1,y:0},[sn.Top]:{x:0,y:-1},[sn.Bottom]:{x:0,y:1}},lo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function uo({source:e,sourcePosition:t=sn.Bottom,target:n,targetPosition:o=sn.Top,center:r,offset:i}){const s=co[t],a=co[o],c={x:e.x+s.x*i,y:e.y+s.y*i},l={x:n.x+a.x*i,y:n.y+a.y*i},u=(({source:e,sourcePosition:t=sn.Bottom,target:n})=>t===sn.Left||t===sn.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:c,sourcePosition:t,target:l}),d=0!==u.x?"x":"y",f=u[d];let h,p,g=[];const m={x:0,y:0},y={x:0,y:0},[v,x,w,b]=no({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]==-1){h=r.x??v,p=r.y??x;const e=[{x:h,y:c.y},{x:h,y:l.y}],t=[{x:c.x,y:p},{x:l.x,y:p}];g=s[d]===f?"x"===d?e:t:"x"===d?t:e}else{const r=[{x:c.x,y:l.y}],u=[{x:l.x,y:c.y}];if(g="x"===d?s.x===f?u:r:s.y===f?r:u,t===o){const t=Math.abs(e[d]-n[d]);if(t<=i){const o=Math.min(i-1,i-t);s[d]===f?m[d]=(c[d]>e[d]?-1:1)*o:y[d]=(l[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=s[d]===a[e],n=c[e]>l[e],o=c[e]<l[e];(1===s[d]&&(!t&&n||t&&o)||1!==s[d]&&(!t&&o||t&&n))&&(g="x"===d?r:u)}const v={x:c.x+m.x,y:c.y+m.y},x={x:l.x+y.x,y:l.y+y.y};Math.max(Math.abs(v.x-g[0].x),Math.abs(x.x-g[0].x))>=Math.max(Math.abs(v.y-g[0].y),Math.abs(x.y-g[0].y))?(h=(v.x+x.x)/2,p=g[0].y):(h=g[0].x,p=(v.y+x.y)/2)}return[[e,{x:c.x+m.x,y:c.y+m.y},...g,{x:l.x+y.x,y:l.y+y.y},n],h,p,w,b]}function fo({sourceX:e,sourceY:t,sourcePosition:n=sn.Bottom,targetX:o,targetY:r,targetPosition:i=sn.Top,borderRadius:s=5,centerX:a,centerY:c,offset:l=20}){const[u,d,f,h,p]=uo({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:c},offset:l}),g=u.reduce(((e,t,n)=>{let o="";return o=n>0&&n<u.length-1?function(e,t,n,o){const r=Math.min(lo(e,t)/2,lo(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s)return`L ${i+r*(e.x<n.x?-1:1)},${s}Q ${i},${s} ${i},${s+r*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${i},${s+r*(e.y<n.y?-1:1)}Q ${i},${s} ${i+r*a},${s}`}(u[n-1],t,u[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),"");return[g,d,f,h,p]}function ho(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function po(e){const{sourceNode:t,targetNode:n}=e;if(!ho(t)||!ho(n))return null;const o=t.internals.handleBounds||go(t.handles),r=n.internals.handleBounds||go(n.handles),i=yo(o?.source??[],e.sourceHandle),s=yo(e.connectionMode===Jt.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",qt.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||sn.Bottom,c=s?.position||sn.Top,l=mo(t,i,a),u=mo(n,s,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:c}}function go(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function mo(e,t,n=sn.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Tn(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case sn.Top:return{x:r+s/2,y:i};case sn.Right:return{x:r+s,y:i+a/2};case sn.Bottom:return{x:r+s/2,y:i+a};case sn.Left:return{x:r,y:i+a/2}}}function yo(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function vo(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function xo(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce(((e,s)=>([s.markerStart||o,s.markerEnd||r].forEach((o=>{if(o&&"object"==typeof o){const r=vo(o,t);i.has(r)||(e.push({id:r,color:o.color||n,...o}),i.add(r))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}function wo(e,t,n,o,r){let i=.5;"start"===r?i=0:"end"===r&&(i=1);let s=[(e.x+e.width*i)*t.zoom+t.x,e.y*t.zoom+t.y-o],a=[-100*i,-100];switch(n){case sn.Right:s=[(e.x+e.width)*t.zoom+t.x+o,(e.y+e.height*i)*t.zoom+t.y],a=[0,-100*i];break;case sn.Bottom:s[1]=(e.y+e.height)*t.zoom+t.y+o,a[1]=0;break;case sn.Left:s=[e.x*t.zoom+t.x-o,(e.y+e.height*i)*t.zoom+t.y],a=[-100,-100*i]}return`translate(${s[0]}px, ${s[1]}px) translate(${a[0]}%, ${a[1]}%)`}const bo={nodeOrigin:[0,0],nodeExtent:Qt,elevateNodesOnSelect:!0,defaults:{}},So={...bo,checkEquality:!0};function Co(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function Eo(e,t,n){const o=Co(bo,n);for(const n of e.values())if(n.parentId)ko(n,e,t,o);else{const e=fn(n,o.nodeOrigin),t=Zn(n.extent)?n.extent:o.nodeExtent,r=bn(e,t,Tn(n));n.internals.positionAbsolute=r}}function _o(e,t,n,o){const r=Co(So,o),i=new Map(t),s=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const a of e){let e=i.get(a.id);if(r.checkEquality&&a===e?.internals.userNode)t.set(a.id,e);else{const n=fn(a,r.nodeOrigin),o=Zn(a.extent)?a.extent:r.nodeExtent,i=bn(n,o,Tn(a));e={...r.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:i,handleBounds:a.measured?e?.internals.handleBounds:void 0,z:Mo(a,s),userNode:a}},t.set(a.id,e)}a.parentId&&ko(e,t,n,o)}}function ko(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=Co(bo,o),a=e.parentId,c=t.get(a);if(!c)return void console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const l=r?1e3:0,{x:u,y:d,z:f}=function(e,t,n,o,r){const{x:i,y:s}=t.internals.positionAbsolute,a=Tn(e),c=fn(e,n),l=Zn(e.extent)?bn(c,e.extent,a):c;let u=bn({x:i+l.x,y:s+l.y},o,a);"parent"===e.extent&&(u=Sn(u,a,t));const d=Mo(e,r),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}(e,c,i,s,l),{positionAbsolute:h}=e.internals,p=u!==h.x||d!==h.y;(p||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:p?{x:u,y:d}:h,z:f})}function Mo(e,t){return(Dn(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function No(e,t,n,o=[0,0]){const r=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const o=i.get(n.parentId)?.expandedRect??Nn(e),r=On(o,n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach((({expandedRect:t,parent:i},s)=>{const a=i.internals.positionAbsolute,c=Tn(i),l=i.origin??o,u=t.x<a.x?Math.round(Math.abs(a.x-t.x)):0,d=t.y<a.y?Math.round(Math.abs(a.y-t.y)):0,f=Math.max(c.width,Math.round(t.width)),h=Math.max(c.height,Math.round(t.height)),p=(f-c.width)*l[0],g=(h-c.height)*l[1];(u>0||d>0||p||g)&&(r.push({id:s,type:"position",position:{x:i.position.x-u+p,y:i.position.y-d+g}}),n.get(s)?.forEach((t=>{e.some((e=>e.id===t.id))||r.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+d}})}))),(c.width<t.width||c.height<t.height||u||d)&&r.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:f+(u?l[0]*u-p:0),height:h+(d?l[1]*d-g:0)}})})),r}function Po(e,t,n,o,r,i){const s=o?.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],l=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const o of e.values()){const e=t.get(o.id);if(e)if(e.hidden)e.internals={...e.internals,handleBounds:void 0},a=!0;else{const s=Yn(o.nodeElement),l=e.measured.width!==s.width||e.measured.height!==s.height;if(!(!s.width||!s.height||!l&&e.internals.handleBounds&&!o.force)){const f=o.nodeElement.getBoundingClientRect(),h=Zn(e.extent)?e.extent:i;let{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=Sn(p,s,t.get(e.parentId)):h&&(p=bn(p,h,s)),e.measured=s,e.internals={...e.internals,positionAbsolute:p,handleBounds:{source:Qn("source",o.nodeElement,f,u,e.id),target:Qn("target",o.nodeElement,f,u,e.id)}},e.parentId&&ko(e,t,n,{nodeOrigin:r}),a=!0,l&&(c.push({id:e.id,type:"dimensions",dimensions:s}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:Nn(e,r)}))}}}if(d.length>0){const e=No(d,t,n,r);c.push(...e)}return{changes:c,updatedInternals:a}}async function Oo({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function zo(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:s=null}=o,a=`${n}-source-${i}`,c=`${r}-target-${s}`,l=e.get(a)||new Map,u=e.get(c)||new Map,d={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:s};t.set(o.id,o),e.set(a,l.set(`${r}-${s}`,d)),e.set(c,u.set(`${n}-${i}`,d))}}function Io(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Io(n,t))}function Do(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Ao({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&r.push({...t,position:i.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function Ro({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,a=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,h=!1;return{update:function({noDragClassName:p,handleSelector:g,domNode:m,isSelectable:y,nodeId:v,nodeClickDistance:x=0}){function w({x:e,y:n},r){const{nodeLookup:s,nodeExtent:c,snapGrid:l,snapToGrid:u,nodeOrigin:d,onNodeDrag:f,onSelectionDrag:h,onError:p,updateNodePositions:g}=t();i={x:e,y:n};let m=!1,y={x:0,y:0,x2:0,y2:0};if(a.size>1&&c){const e=pn(a);y=kn(e)}for(const[t,o]of a){if(!s.has(t))continue;let r={x:e-o.distance.x,y:n-o.distance.y};u&&(r=Rn(r,l));let i=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];if(a.size>1&&c&&!o.extent){const{positionAbsolute:e}=o.internals,t=e.x-y.x+c[0][0],n=e.x+o.measured.width-y.x2+c[1][0];i=[[t,e.y-y.y+c[0][1]],[n,e.y+o.measured.height-y.y2+c[1][1]]]}const{position:f,positionAbsolute:h}=vn({nodeId:t,nextPosition:r,nodeLookup:s,nodeExtent:i,nodeOrigin:d,onError:p});m=m||o.position.x!==f.x||o.position.y!==f.y,o.position=f,o.internals.positionAbsolute=h}if(m&&(g(a,!0),r&&(o||f||!v&&h))){const[e,t]=Ao({nodeId:v,dragItems:a,nodeLookup:s});o?.(r,a,e,t),f?.(r,e,t),v||h?.(r,t)}}async function b(){if(!u)return;const{transform:e,panBy:n,autoPanSpeed:o}=t(),[r,a]=En(l,u,o);0===r&&0===a||(i.x=(i.x??0)-r/e[2],i.y=(i.y??0)-a/e[2],await n({x:r,y:a})&&w(i,null)),s=requestAnimationFrame(b)}function S(o){const{nodeLookup:r,multiSelectionActive:s,nodesDraggable:c,transform:l,snapGrid:f,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:x}=t();d=!0,p&&y||s||!v||r.get(v)?.selected||x(),y&&p&&v&&e?.(v);const w=Xn(o.sourceEvent,{transform:l,snapGrid:f,snapToGrid:h,containerBounds:u});if(i=w,a=function(e,t,n,o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!Io(s,e))&&(s.draggable||t&&void 0===s.draggable)){const t=e.get(i);t&&r.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return r}(r,c,w,v),a.size>0&&(n||g||!v&&m)){const[e,t]=Ao({nodeId:v,dragItems:a,nodeLookup:r});n?.(o.sourceEvent,a,e,t),g?.(o.sourceEvent,e,t),v||m?.(o.sourceEvent,t)}}f=xe(m);const C=De().clickDistance(x).on("start",(e=>{const{domNode:n,nodeDragThreshold:o,transform:r,snapGrid:s,snapToGrid:a}=t();u=n?.getBoundingClientRect()||null,h=!1,0===o&&S(e);const c=Xn(e.sourceEvent,{transform:r,snapGrid:s,snapToGrid:a,containerBounds:u});i=c,l=qn(e.sourceEvent,u)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:o,snapGrid:r,snapToGrid:s,nodeDragThreshold:f,nodeLookup:p}=t(),g=Xn(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:s,containerBounds:u});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||v&&!p.has(v))&&(h=!0),!h){if(!c&&n&&d&&(c=!0,b()),!d){const t=g.xSnapped-(i.x??0),n=g.ySnapped-(i.y??0);Math.sqrt(t*t+n*n)>f&&S(e)}(i.x!==g.xSnapped||i.y!==g.ySnapped)&&a&&d&&(l=qn(e.sourceEvent,u),w(g,e.sourceEvent))}})).on("end",(e=>{if(d&&!h&&(c=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:i,onSelectionDragStop:s}=t();if(o(a,!1),r||i||!v&&s){const[t,o]=Ao({nodeId:v,dragItems:a,nodeLookup:n,dragging:!1});r?.(e.sourceEvent,a,t,o),i?.(e.sourceEvent,t,o),v||s?.(e.sourceEvent,o)}}})).filter((e=>{const t=e.target;return!e.button&&(!p||!Do(t,`.${p}`,m))&&(!g||Do(t,g,m))}));f.call(C)},destroy:function(){f?.on(".drag",null)}}}function Lo(e,t,n,o){let r=[],i=1/0;const s=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())zn(r,Nn(e))>0&&o.push(e);return o}(e,n,t+250);for(const n of s){const s=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const a of s){if(o.nodeId===a.nodeId&&o.type===a.type&&o.id===a.id)continue;const{x:s,y:c}=mo(n,a,a.position,!0),l=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(c-e.y,2));l>t||(l<i?(r=[{...a,x:s,y:c}],i=l):l===i&&r.push({...a,x:s,y:c}))}}if(!r.length)return null;if(r.length>1){const e="source"===o.type?"target":"source";return r.find((t=>t.type===e))??r[0]}return r[0]}function $o(e,t,n,o,r,i=!1){const s=o.get(e);if(!s)return null;const a="strict"===r?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],c=(n?a?.find((e=>e.id===n)):a?.[0])??null;return c&&i?{...c,...mo(s,c,c.position,!0)}:c}function Bo(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const jo=()=>!0;function Zo(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:c,isValidConnection:l=jo,nodeLookup:u}){const d="target"===i,f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:p}=qn(e),g=s.elementFromPoint(h,p),m=g?.classList.contains(`${a}-flow__handle`)?g:f,y={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const e=Bo(void 0,m),t=m.getAttribute("data-nodeid"),i=m.getAttribute("data-handleid"),s=m.classList.contains("connectable"),a=m.classList.contains("connectableend");if(!t||!e)return y;const c={source:d?t:o,sourceHandle:d?i:r,target:d?o:t,targetHandle:d?r:i};y.connection=c;const f=s&&a&&(n===Jt.Strict?d&&"source"===e||!d&&"target"===e:t!==o||i!==r);y.isValid=f&&l(c),y.toHandle=$o(t,e,i,u,n,!1)}return y}const To={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:g,onConnectEnd:m,isValidConnection:y=jo,onReconnectEnd:v,updateConnection:x,getTransform:w,getFromHandle:b,autoPanSpeed:S}){const C=Wn(e.target);let E,_=0;const{x:k,y:M}=qn(e),N=C?.elementFromPoint(k,M),P=Bo(i,N),O=a?.getBoundingClientRect();if(!O||!P)return;const z=$o(r,P,o,c,t);if(!z)return;let I=qn(e,O),D=!1,A=null,R=!1,L=null;function $(){if(!u||!O)return;const[e,t]=En(I,O,S);f({x:e,y:t}),_=requestAnimationFrame($)}const B={...z,nodeId:r,type:P,position:z.position},j=c.get(r),Z={inProgress:!0,isValid:null,from:mo(j,B,sn.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:j,to:I,toHandle:null,toPosition:an[B.position],toNode:null};x(Z);let T=Z;function V(e){if(!b()||!B)return void H(e);const i=w();I=qn(e,O),E=Lo(Ln(I,i,!1,[1,1]),n,c,B),D||($(),D=!0);const a=Zo(e,{handle:E,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:y,doc:C,lib:l,flowId:d,nodeLookup:c});L=a.handleDomNode,A=a.connection,R=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!E,a.isValid);const u={...T,isValid:R,to:E&&R?$n({x:E.x,y:E.y},i):I,toHandle:a.toHandle,toPosition:R&&a.toHandle?a.toHandle.position:an[B.position],toNode:a.toHandle?c.get(a.toHandle.nodeId):null};R&&E&&T.toHandle&&u.toHandle&&T.toHandle.type===u.toHandle.type&&T.toHandle.nodeId===u.toHandle.nodeId&&T.toHandle.id===u.toHandle.id&&T.to.x===u.to.x&&T.to.y===u.to.y||(x(u),T=u)}function H(e){(E||L)&&A&&R&&g?.(A);const{inProgress:t,...n}=T,o={...n,toPosition:T.toHandle?T.toPosition:null};m?.(e,o),i&&v?.(e,o),h(),cancelAnimationFrame(_),D=!1,R=!1,A=null,L=null,C.removeEventListener("mousemove",V),C.removeEventListener("mouseup",H),C.removeEventListener("touchmove",V),C.removeEventListener("touchend",H)}p?.(e,{nodeId:r,handleId:o,handleType:P}),C.addEventListener("mousemove",V),C.addEventListener("mouseup",H),C.addEventListener("touchmove",V),C.addEventListener("touchend",H)},isValid:Zo};function Vo({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=xe(e);return{update:function({translateExtent:e,width:i,height:s,zoomStep:a=10,pannable:c=!0,zoomable:l=!0,inversePan:u=!1}){let d=[0,0];const f=Gt().on("start",(e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])})).on("zoom",c?r=>{const a=n();if("mousemove"!==r.sourceEvent.type&&"touchmove"!==r.sourceEvent.type||!t)return;const c=[r.sourceEvent.clientX??r.sourceEvent.touches[0].clientX,r.sourceEvent.clientY??r.sourceEvent.touches[0].clientY],l=[c[0]-d[0],c[1]-d[1]];d=c;const f=o()*Math.max(a[2],Math.log(a[2]))*(u?-1:1),h={x:a[0]-l[0]*f,y:a[1]-l[1]*f},p=[[0,0],[i,s]];t.setViewportConstrained({x:h.x,y:h.y,zoom:a[2]},p,e)}:null).on("zoom.wheel",l?e=>{const o=n();if("wheel"!==e.sourceEvent.type||!t)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*a,i=o[2]*Math.pow(2,r);t.scaleTo(i)}:null);r.call(f,{})},destroy:function(){r.on("zoom",null)},pointer:we}}const Ho=e=>({x:e.x,y:e.y,zoom:e.k}),Xo=({x:e,y:t,zoom:n})=>jt.translate(e,t).scale(n),Yo=(e,t)=>e.target.closest(`.${t}`),Wo=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Fo=(e,t=0,n=(()=>{}))=>{const o="number"==typeof t&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Ko=e=>{const t=e.ctrlKey&&jn()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function Go({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Gt().clickDistance(!Dn(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),h=xe(e).call(f);v({x:i.x,y:i.y,zoom:wn(i.zoom,t,n)},[[0,0],[d.width,d.height]],r);const p=h.on("wheel.zoom"),g=h.on("dblclick.zoom");function m(e,t){return h?new Promise((n=>{f?.transform(Fo(h,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function y(){f.on("zoom",null)}async function v(e,t,n){const o=Xo(e),r=f?.constrain()(o,t,n);return r&&await m(r),new Promise((e=>e(r)))}return f.wheelDelta(Ko),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:r,panOnDrag:i,panOnScrollMode:d,panOnScrollSpeed:m,preventScrolling:v,zoomOnPinch:x,zoomOnScroll:w,zoomOnDoubleClick:b,zoomActivationKeyPressed:S,lib:C,onTransformChange:E}){o&&!u.isZoomingOrPanning&&y();const _=r&&!S&&!o?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Yo(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&s){const e=we(u),t=Ko(u),r=d*Math.pow(2,t);return void o.scaleTo(n,r,e,u)}const f=1===u.deltaMode?20:1;let h=r===en.Vertical?0:u.deltaX*f,p=r===en.Horizontal?0:u.deltaY*f;!jn()&&u.shiftKey&&r!==en.Vertical&&(h=u.deltaY*f,p=0),o.translateBy(n,-h/d*i,-p/d*i,{internal:!0});const g=Ho(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a?.(u,g)),e.isPanScrolling&&(c?.(u,g),e.panScrollTimeout=setTimeout((()=>{l?.(u,g),e.isPanScrolling=!1}),150))}}({zoomPanValues:u,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:d,panOnScrollSpeed:m,zoomOnPinch:x,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&"wheel"===o.type&&!o.ctrlKey||Yo(o,e))return null;o.preventDefault(),n.call(this,o,r)}}({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:p});if(h.on("wheel.zoom",_,{passive:!1}),!o){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=Ho(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,"mousedown"===o.sourceEvent?.type&&t(!0),n&&n?.(o.sourceEvent,r)}}({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:a});f.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!(!n||!Wo(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,Ho(i.transform))}}({zoomPanValues:u,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:s,onTransformChange:E});f.on("zoom",t);const o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{var a,c;if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&Wo(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&(a=e.prevViewport,c=s.transform,a.x!==c.x||a.y!==c.y||a.zoom!==c.k))){const t=Ho(s.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{r?.(s.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:u,panOnDrag:i,panOnScroll:r,onPaneContextMenu:n,onPanZoomEnd:c,onDraggingChange:l});f.on("end",o)}const k=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:l}){return u=>{const d=e||t,f=n&&u.ctrlKey;if(1===u.button&&"mousedown"===u.type&&(Yo(u,`${l}-flow__node`)||Yo(u,`${l}-flow__edge`)))return!0;if(!(o||d||r||i||n))return!1;if(s)return!1;if(Yo(u,a)&&"wheel"===u.type)return!1;if(Yo(u,c)&&("wheel"!==u.type||r&&"wheel"===u.type&&!e))return!1;if(!n&&u.ctrlKey&&"wheel"===u.type)return!1;if(!n&&"touchstart"===u.type&&u.touches?.length>1)return u.preventDefault(),!1;if(!d&&!r&&!f&&"wheel"===u.type)return!1;if(!o&&("mousedown"===u.type||"touchstart"===u.type))return!1;if(Array.isArray(o)&&!o.includes(u.button)&&"mousedown"===u.type)return!1;const h=Array.isArray(o)&&o.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||"wheel"===u.type)&&h}}({zoomActivationKeyPressed:S,panOnDrag:i,zoomOnScroll:w,panOnScroll:r,zoomOnDoubleClick:b,zoomOnPinch:x,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:C});f.filter(k),b?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)},destroy:y,setViewport:async function(e,t){const n=Xo(e);return await m(n,t),new Promise((e=>e(n)))},setViewportConstrained:v,getViewport:function(){const e=h?Zt(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise((n=>{f?.scaleTo(Fo(h,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise((n=>{f?.scaleBy(Fo(h,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(h){const t=Xo(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||f?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Dn(e)||e<0?0:e;f?.clickDistance(t)}}}var qo;!function(e){e.Line="line",e.Handle="handle"}(qo||(qo={}));function Qo(e,t){return Math.max(0,t-e)}function Uo(e,t){return Math.max(0,e-t)}function Jo(e,t,n){return Math.max(0,t-e,e-n)}function er(e,t){return e?!t:t}const tr={width:0,height:0,x:0,y:0},nr={...tr,pointerX:0,pointerY:0,aspectRatio:1};function or(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,c=n[1]*s;return[[o-a,r-c],[o+i-a,r+s-c]]}function rr({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=xe(e);return{update:function({controlPosition:e,boundaries:s,keepAspectRatio:a,onResizeStart:c,onResize:l,onResizeEnd:u,shouldResize:d}){let f={...tr},h={...nr};const p=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let g,m,y,v,x=null,w=[];const b=De().on("start",(e=>{const{nodeLookup:o,transform:r,snapGrid:i,snapToGrid:s,nodeOrigin:a,paneDomNode:l}=n();if(g=o.get(t),!g)return;x=l?.getBoundingClientRect()??null;const{xSnapped:u,ySnapped:d}=Xn(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:s,containerBounds:x});f={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},h={...f,pointerX:u,pointerY:d,aspectRatio:f.width/f.height},m=void 0,g.parentId&&("parent"===g.extent||g.expandParent)&&(m=o.get(g.parentId),y=m&&"parent"===g.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(m):void 0),w=[],v=void 0;for(const[e,n]of o)if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=or(n,g,n.origin??a);v=v?[[Math.min(e[0][0],v[0][0]),Math.min(e[0][1],v[0][1])],[Math.max(e[1][0],v[1][0]),Math.max(e[1][1],v[1][1])]]:e}c?.(e,{...f})})).on("drag",(e=>{const{transform:t,snapGrid:r,snapToGrid:i,nodeOrigin:c}=n(),u=Xn(e.sourceEvent,{transform:t,snapGrid:r,snapToGrid:i,containerBounds:x}),b=[];if(!g)return;const{x:S,y:C,width:E,height:_}=f,k={},M=g.origin??c,{width:N,height:P,x:O,y:z}=function(e,t,n,o,r,i,s,a){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:h,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:v}=o,{x:x,y:w,width:b,height:S,aspectRatio:C}=e;let E=Math.floor(u?h-e.pointerX:0),_=Math.floor(d?p-e.pointerY:0);const k=b+(c?-E:E),M=S+(l?-_:_),N=-i[0]*b,P=-i[1]*S;let O=Jo(k,g,m),z=Jo(M,y,v);if(s){let e=0,t=0;c&&E<0?e=Qo(x+E+N,s[0][0]):!c&&E>0&&(e=Uo(x+k+N,s[1][0])),l&&_<0?t=Qo(w+_+P,s[0][1]):!l&&_>0&&(t=Uo(w+M+P,s[1][1])),O=Math.max(O,e),z=Math.max(z,t)}if(a){let e=0,t=0;c&&E>0?e=Uo(x+E,a[0][0]):!c&&E<0&&(e=Qo(x+k,a[1][0])),l&&_>0?t=Uo(w+_,a[0][1]):!l&&_<0&&(t=Qo(w+M,a[1][1])),O=Math.max(O,e),z=Math.max(z,t)}if(r){if(u){const e=Jo(k/C,y,v)*C;if(O=Math.max(O,e),s){let e=0;e=!c&&!l||c&&!l&&f?Uo(w+P+k/C,s[1][1])*C:Qo(w+P+(c?E:-E)/C,s[0][1])*C,O=Math.max(O,e)}if(a){let e=0;e=!c&&!l||c&&!l&&f?Qo(w+k/C,a[1][1])*C:Uo(w+(c?E:-E)/C,a[0][1])*C,O=Math.max(O,e)}}if(d){const e=Jo(M*C,g,m)/C;if(z=Math.max(z,e),s){let e=0;e=!c&&!l||l&&!c&&f?Uo(x+M*C+N,s[1][0])/C:Qo(x+(l?_:-_)*C+N,s[0][0])/C,z=Math.max(z,e)}if(a){let e=0;e=!c&&!l||l&&!c&&f?Qo(x+M*C,a[1][0])/C:Uo(x+(l?_:-_)*C,a[0][0])/C,z=Math.max(z,e)}}}_+=_<0?z:-z,E+=E<0?O:-O,r&&(f?k>M*C?_=(er(c,l)?-E:E)/C:E=(er(c,l)?-_:_)*C:u?(_=E/C,l=c):(E=_*C,c=l));const I=c?x+E:x,D=l?w+_:w;return{width:b+(c?-E:E),height:S+(l?-_:_),x:i[0]*E*(c?-1:1)+I,y:i[1]*_*(l?-1:1)+D}}(h,p,u,s,a,M,y,v),I=N!==E,D=P!==_,A=O!==S&&I,R=z!==C&&D;if(!(A||R||I||D))return;if((A||R||1===M[0]||1===M[1])&&(k.x=A?O:f.x,k.y=R?z:f.y,f.x=k.x,f.y=k.y,w.length>0)){const e=O-S,t=z-C;for(const n of w)n.position={x:n.position.x-e+M[0]*(N-E),y:n.position.y-t+M[1]*(P-_)},b.push(n)}if((I||D)&&(k.width=I?N:f.width,k.height=D?P:f.height,f.width=k.width,f.height=k.height),m&&g.expandParent){const e=M[0]*(k.width??0);k.x&&k.x<e&&(f.x=e,h.x=h.x-(k.x-e));const t=M[1]*(k.height??0);k.y&&k.y<t&&(f.y=t,h.y=h.y-(k.y-t))}const L=function({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const s=e-t,a=n-o,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(c[0]=-1*c[0]),a&&i&&(c[1]=-1*c[1]),c}({width:f.width,prevWidth:E,height:f.height,prevHeight:_,affectsX:p.affectsX,affectsY:p.affectsY}),$={...f,direction:L},B=d?.(e,$);!1!==B&&(l?.(e,$),o(k,b))})).on("end",(e=>{u?.(e,{...f}),r?.()}));i.call(b)},destroy:function(){i.on(".drag",null)}}}},93982:function(e,t,n){n.d(t,{Z:function(){return $}});var o=n(44194),r=n(34229),i=n(85793),s=n(25175),a=n(81180),c=n(14876),l=n(51865),u=n.n(l),d=n(85628),f=n(24758),h=n(38726),p=n(65441),g=n(19735),m=n(29664),y=n(35912),v=n(2645);const x=(e,t,n,o,r)=>({background:e,border:`${(0,m.bf)(o.lineWidth)} ${o.lineType} ${t}`,[`${r}-icon`]:{color:n}}),w=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:o,marginSM:r,fontSize:i,fontSizeLG:s,lineHeight:a,borderRadiusLG:c,motionEaseInOutCirc:l,withDescriptionIconSize:u,colorText:d,colorTextHeading:f,withDescriptionPadding:h,defaultPadding:p}=e;return{[t]:Object.assign(Object.assign({},(0,y.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:c,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:i,lineHeight:a},"&-message":{color:f},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${l}, opacity ${n} ${l},\n        padding-top ${n} ${l}, padding-bottom ${n} ${l},\n        margin-bottom ${n} ${l}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:h,[`${t}-icon`]:{marginInlineEnd:r,fontSize:u,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:f,fontSize:s},[`${t}-description`]:{display:"block",color:d}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},b=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:i,colorWarningBorder:s,colorWarningBg:a,colorError:c,colorErrorBorder:l,colorErrorBg:u,colorInfo:d,colorInfoBorder:f,colorInfoBg:h}=e;return{[t]:{"&-success":x(r,o,n,e,t),"&-info":x(h,f,d,e,t),"&-warning":x(a,s,i,e,t),"&-error":Object.assign(Object.assign({},x(u,l,c,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},S=e=>{const{componentCls:t,iconCls:n,motionDurationMid:o,marginXS:r,fontSizeIcon:i,colorIcon:s,colorIconHover:a}=e;return{[t]:{"&-action":{marginInlineStart:r},[`${t}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:i,lineHeight:(0,m.bf)(i),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:s,transition:`color ${o}`,"&:hover":{color:a}}},"&-close-text":{color:s,transition:`color ${o}`,"&:hover":{color:a}}}}};var C=(0,v.I$)("Alert",(e=>[w(e),b(e),S(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}))),E=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const _={success:r.Z,info:c.Z,error:i.Z,warning:a.Z},k=e=>{const{icon:t,prefixCls:n,type:r}=e,i=_[r]||null;return t?(0,p.wm)(t,o.createElement("span",{className:`${n}-icon`},t),(()=>({className:u()(`${n}-icon`,{[t.props.className]:t.props.className})}))):o.createElement(i,{className:`${n}-icon`})},M=e=>{const{isClosable:t,prefixCls:n,closeIcon:r,handleClose:i,ariaProps:a}=e,c=!0===r||void 0===r?o.createElement(s.Z,null):r;return t?o.createElement("button",Object.assign({type:"button",onClick:i,className:`${n}-close-icon`,tabIndex:0},a),c):null},N=o.forwardRef(((e,t)=>{const{description:n,prefixCls:r,message:i,banner:s,className:a,rootClassName:c,style:l,onMouseEnter:p,onMouseLeave:m,onClick:y,afterClose:v,showIcon:x,closable:w,closeText:b,closeIcon:S,action:_,id:N}=e,P=E(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[O,z]=o.useState(!1);const I=o.useRef(null);o.useImperativeHandle(t,(()=>({nativeElement:I.current})));const{getPrefixCls:D,direction:A,alert:R}=o.useContext(g.E_),L=D("alert",r),[$,B,j]=C(L),Z=t=>{var n;z(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},T=o.useMemo((()=>void 0!==e.type?e.type:s?"warning":"info"),[e.type,s]),V=o.useMemo((()=>!("object"!=typeof w||!w.closeIcon)||(!!b||("boolean"==typeof w?w:!1!==S&&null!=S||!!(null==R?void 0:R.closable)))),[b,S,w,null==R?void 0:R.closable]),H=!(!s||void 0!==x)||x,X=u()(L,`${L}-${T}`,{[`${L}-with-description`]:!!n,[`${L}-no-icon`]:!H,[`${L}-banner`]:!!s,[`${L}-rtl`]:"rtl"===A},null==R?void 0:R.className,a,c,j,B),Y=(0,f.Z)(P,{aria:!0,data:!0}),W=o.useMemo((()=>{var e,t;return"object"==typeof w&&w.closeIcon?w.closeIcon:b||(void 0!==S?S:"object"==typeof(null==R?void 0:R.closable)&&(null===(e=null==R?void 0:R.closable)||void 0===e?void 0:e.closeIcon)?null===(t=null==R?void 0:R.closable)||void 0===t?void 0:t.closeIcon:null==R?void 0:R.closeIcon)}),[S,w,b,null==R?void 0:R.closeIcon]),F=o.useMemo((()=>{const e=null!=w?w:null==R?void 0:R.closable;if("object"==typeof e){const{closeIcon:t}=e;return E(e,["closeIcon"])}return{}}),[w,null==R?void 0:R.closable]);return $(o.createElement(d.ZP,{visible:!O,motionName:`${L}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:v},((t,r)=>{let{className:s,style:a}=t;return o.createElement("div",Object.assign({id:N,ref:(0,h.sQ)(I,r),"data-show":!O,className:u()(X,s),style:Object.assign(Object.assign(Object.assign({},null==R?void 0:R.style),l),a),onMouseEnter:p,onMouseLeave:m,onClick:y,role:"alert"},Y),H?o.createElement(k,{description:n,icon:e.icon,prefixCls:L,type:T}):null,o.createElement("div",{className:`${L}-content`},i?o.createElement("div",{className:`${L}-message`},i):null,n?o.createElement("div",{className:`${L}-description`},n):null),_?o.createElement("div",{className:`${L}-action`},_):null,o.createElement(M,{isClosable:V,prefixCls:L,closeIcon:W,handleClose:Z,ariaProps:F}))})))}));var P=N,O=n(74592),z=n(32099),I=n(67019),D=n(14755);let A=function(e){function t(){var e;return(0,O.Z)(this,t),(e=(0,I.Z)(this,t,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,D.Z)(t,e),(0,z.Z)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:n,children:r}=this.props,{error:i,info:s}=this.state,a=(null==s?void 0:s.componentStack)||null,c=void 0===e?(i||"").toString():e,l=void 0===t?a:t;return i?o.createElement(P,{id:n,type:"error",message:c,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},l)}):r}}])}(o.Component);var R=A;const L=P;L.ErrorBoundary=R;var $=L},80093:function(e,t,n){n.d(t,{Z:function(){return C}});var o=n(44194),r=n(51865),i=n.n(r),s=n(82252),a=n(74511),c=n(19735),l=n(2645),u=n(53681);const d=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],h=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var p=function(e,t){return i()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&d.includes(n)}})(e,t)),((e,t)=>{const n={};return h.forEach((o=>{n[`${e}-align-${o}`]=t.align===o})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return f.forEach((o=>{n[`${e}-justify-${o}`]=t.justify===o})),n})(e,t)))};const g=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},m=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},y=e=>{const{componentCls:t}=e,n={};return d.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},v=e=>{const{componentCls:t}=e,n={};return h.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},x=e=>{const{componentCls:t}=e,n={};return f.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var w=(0,l.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:o}=e,r=(0,u.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:o});return[g(r),m(r),y(r),v(r),x(r)]}),(()=>({})),{resetStyle:!1}),b=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const S=o.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:r,className:l,style:u,flex:d,gap:f,children:h,vertical:g=!1,component:m="div"}=e,y=b(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:v,direction:x,getPrefixCls:S}=o.useContext(c.E_),C=S("flex",n),[E,_,k]=w(C),M=null!=g?g:null==v?void 0:v.vertical,N=i()(l,r,null==v?void 0:v.className,C,_,k,p(C,e),{[`${C}-rtl`]:"rtl"===x,[`${C}-gap-${f}`]:(0,a.n)(f),[`${C}-vertical`]:M}),P=Object.assign(Object.assign({},null==v?void 0:v.style),u);return d&&(P.flex=d),f&&!(0,a.n)(f)&&(P.gap=f),E(o.createElement(m,Object.assign({ref:t,className:N,style:P},(0,s.Z)(y,["justify","wrap","align"])),h))}));var C=S},83730:function(e,t,n){n.d(t,{Z:function(){return b}});var o=n(62347),r=n(75286),i=n(20908),s=n(44194),a=n(51865),c=n.n(a),l=n(24255),u=n(95244),d=n(19735),f=n(54353),h=n(23482),p=n(5616),g=n(21979),m=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};var y=(0,u.i)((e=>{const{prefixCls:t,className:n,closeIcon:o,closable:r,type:i,title:a,children:u,footer:y}=e,v=m(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:x}=s.useContext(d.E_),w=x(),b=t||x("modal"),S=(0,f.Z)(w),[C,E,_]=(0,g.ZP)(b,S),k=`${b}-confirm`;let M={};return M=i?{closable:null!=r&&r,title:"",footer:"",children:s.createElement(h.O,Object.assign({},e,{prefixCls:b,confirmPrefixCls:k,rootPrefixCls:w,content:u}))}:{closable:null==r||r,title:a,footer:null!==y&&s.createElement(p.$,Object.assign({},e)),children:u},C(s.createElement(l.s,Object.assign({prefixCls:b,className:c()(E,`${b}-pure-panel`,i&&k,i&&`${k}-${i}`,n,_,S)},v,{closeIcon:(0,p.b)(b,o),closable:r},M)))})),v=n(93703);function x(e){return(0,o.ZP)((0,o.uW)(e))}const w=i.Z;w.useModal=v.Z,w.info=function(e){return(0,o.ZP)((0,o.cw)(e))},w.success=function(e){return(0,o.ZP)((0,o.vq)(e))},w.error=function(e){return(0,o.ZP)((0,o.AQ)(e))},w.warning=x,w.warn=x,w.confirm=function(e){return(0,o.ZP)((0,o.Au)(e))},w.destroyAll=function(){for(;r.Z.length;){const e=r.Z.pop();e&&e()}},w.config=o.ai,w._InternalPanelDoNotUseOrYouWillBeFired=y;var b=w},19334:function(e,t,n){n.d(t,{F:function(){return d},s:function(){return l}});var o=n(44194),r=n(81136),i=n(11884);const{useDebugValue:s}=o,{useSyncExternalStoreWithSelector:a}=r,c=e=>e;function l(e,t=c,n){const o=a(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return s(o),o}const u=(e,t)=>{const n=(0,i.M)(e),o=(e,o=t)=>l(n,e,o);return Object.assign(o,n),o},d=(e,t)=>e?u(e,t):u}}]);