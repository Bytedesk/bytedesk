"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9814],{79619:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(13800),a=n(75271),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=n(45791),i=function(e,r){return a.createElement(s.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:r,icon:o}))};var c=a.forwardRef(i)},17310:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(79482),a=n(75271),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},s=n(7671),i=function(e,r){return a.createElement(s.Z,(0,t.Z)({},e,{ref:r,icon:o}))};var c=a.forwardRef(i)},65012:function(e,r,n){var t=n(13800),a=n(60323),o=n(75271),s=n(89755),i=n(52676),c=["fieldProps","proFieldProps"],l=function(e,r){var n=e.fieldProps,o=e.proFieldProps,l=(0,a.Z)(e,c);return(0,i.jsx)(s.Z,(0,t.Z)({ref:r,valueType:"textarea",fieldProps:n,proFieldProps:o},l))};r.Z=o.forwardRef(l)},97986:function(e,r,n){n.d(r,{Kq:function(){return d},RL:function(){return p}});var t=n(90228),a=n.n(t),o=n(26068),s=n.n(o),i=n(87999),c=n.n(i),l=n(64453),u=n(45234);function d(e){return f.apply(this,arguments)}function f(){return(f=c()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/org/create",{method:"POST",data:s()(s()({},r),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=c()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/org/update",{method:"POST",data:s()(s()({},r),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},77705:function(e,r,n){n.d(r,{G:function(){return f}});var t=n(26068),a=n.n(t),o=(n(75271),n(30224)),s=n(64453),i=n(16483),c=n.n(i),l=n(37240),u=n(49437),d=n(52676),f=function(e){var r=e.children,n=e.onSuccess,t=e.onError,i={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:s.IrL,category_uid:"",kb_uid:"",client:s.bVn},f={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var r=c()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;i.file=e,i.file_name=r,i.file_type=e.type,console.log("beforeUpload",i)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var r=e.file.response.data;n(r),l.yw.success("".concat(e.file.name," 上传成功"))}else t(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),t(e.file))}};return(0,d.jsx)(o.Z,a()(a()({},f),{},{children:r}))}},87202:function(e,r,n){n.r(r);var t=n(90228),a=n.n(t),o=n(26068),s=n.n(o),i=n(87999),c=n.n(i),l=n(48305),u=n.n(l),d=n(37240),f=n(97986),p=n(65098),g=n(77705),m=n(79619),h=n(43393),v=n(64826),w=n(65012),y=n(45234),x=n(92813),b=n(29132),M=n(42502),Z=n(79485),j=n(75271),k=n(49437),P=n(74592),C=n(52676);r.default=function(){var e=x.Z.useForm(),r=u()(e,1)[0],n=(0,y.useIntl)(),t=(0,p.u)((function(e){return{currentOrg:e.currentOrg,setCurrentOrg:e.setCurrentOrg}})),o=t.currentOrg,i=t.setCurrentOrg,l=(0,j.useState)(""),O=u()(l,2),A=O[0],L=O[1],V=function(){var e=c()(a()().mark((function e(r){var t,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading({content:n.formatMessage({id:"saveing"}),key:"save",duration:0}),t=s()(s()(s()({},o),r),{},{logo:A}),console.log("orgObject:",t),e.next=5,(0,f.RL)(t);case 5:c=e.sent,console.log("updateOrg response:",c),200===c.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),i(c.data)):(d.yw.destroy(),d.yw.error(c.message));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){o&&L(o.logo)}),[o]);return(0,C.jsxs)("div",{children:[(0,C.jsxs)(h.A,{form:r,initialValues:{name:o.name,description:o.description},onFinish:V,children:[(0,C.jsx)(x.Z.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,C.jsxs)(g.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),L(e)},onError:function(e){console.log("handleUploadError:",e)},children:[(0,C.jsx)(b.C,{src:A}),(0,C.jsx)(M.ZP,{icon:(0,C.jsx)(m.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,C.jsx)(v.Z,{rules:[{required:!0,message:n.formatMessage({id:"name",defaultMessage:"Name"})}],label:n.formatMessage({id:"name",defaultMessage:"Name"}),name:"name",width:"md"}),(0,C.jsx)(w.Z,{rules:[{required:!0,message:n.formatMessage({id:"description",defaultMessage:"Description"})}],label:n.formatMessage({id:"description",defaultMessage:"Description"}),name:"description",width:"md"})]}),(0,C.jsxs)("div",{id:"myqrcode",children:[(0,C.jsx)(Z.Z,{style:{marginTop:"40px"},errorLevel:"H",value:(0,k.G3)(),icon:(0,P.hX)()}),(0,C.jsx)(M.ZP,{type:"primary",onClick:function(){console.log("downloadQRCode"),window.open("https://www.weiyuai.cn/download.html")},style:{marginTop:"20px"},children:"使用微语App扫码加入组织"})]})]})}}}]);