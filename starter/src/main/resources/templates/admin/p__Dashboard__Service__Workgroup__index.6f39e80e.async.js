"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9828],{63434:function(be,ve,e){var X=e(1413),d=e(91),me=e(22270),t=e(84567),pe=e(67294),E=e(90789),te=e(83606),b=e(85893),s=["options","fieldProps","proFieldProps","valueEnum"],se=pe.forwardRef(function(F,ee){var Y=F.options,H=F.fieldProps,D=F.proFieldProps,ie=F.valueEnum,O=(0,d.Z)(F,s);return(0,b.jsx)(te.Z,(0,X.Z)({ref:ee,valueType:"checkbox",valueEnum:(0,me.h)(ie,void 0),fieldProps:(0,X.Z)({options:Y},H),lightProps:(0,X.Z)({labelFormatter:function(){return(0,b.jsx)(te.Z,(0,X.Z)({ref:ee,valueType:"checkbox",mode:"read",valueEnum:(0,me.h)(ie,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,X.Z)({options:Y},H),proFieldProps:D},O))}},O.lightProps),proFieldProps:D},O))}),he=pe.forwardRef(function(F,ee){var Y=F.fieldProps,H=F.children;return(0,b.jsx)(t.Z,(0,X.Z)((0,X.Z)({ref:ee},Y),{},{children:H}))}),h=(0,E.G)(he,{valuePropName:"checked"}),M=h;M.Group=se,ve.Z=M},52688:function(be,ve,e){var X=e(1413),d=e(91),me=e(67294),t=e(83606),pe=e(85893),E=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],te=me.forwardRef(function(b,s){var se=b.fieldProps,he=b.unCheckedChildren,h=b.checkedChildren,M=b.proFieldProps,F=(0,d.Z)(b,E);return(0,pe.jsx)(t.Z,(0,X.Z)({valueType:"switch",fieldProps:(0,X.Z)({unCheckedChildren:he,checkedChildren:h},se),ref:s,valuePropName:"checked",proFieldProps:M,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},F))});ve.Z=te},33725:function(be,ve,e){var X=e(1413),d=e(91),me=e(86190),t=e(67294),pe=e(66758),E=e(83606),te=e(85893),b=["fieldProps","proFieldProps"],s=["fieldProps","proFieldProps"],se="time",he=t.forwardRef(function(F,ee){var Y=F.fieldProps,H=F.proFieldProps,D=(0,d.Z)(F,b),ie=(0,t.useContext)(pe.Z);return(0,te.jsx)(E.Z,(0,X.Z)({ref:ee,fieldProps:(0,X.Z)({getPopupContainer:ie.getPopupContainer},Y),valueType:"timeRange",proFieldProps:H,filedConfig:{valueType:"timeRange",customLightMode:!0,lightFilterLabelFormatter:function(ue){return(0,me.c)(ue,"HH:mm:ss")}}},D))}),h=function(ee){var Y=ee.fieldProps,H=ee.proFieldProps,D=(0,d.Z)(ee,s),ie=(0,t.useContext)(pe.Z);return(0,te.jsx)(E.Z,(0,X.Z)({fieldProps:(0,X.Z)({getPopupContainer:ie.getPopupContainer},Y),valueType:se,proFieldProps:H,filedConfig:{customLightMode:!0,valueType:se}},D))},M=h;M.RangePicker=he,ve.Z=M},3418:function(be,ve,e){e.d(ve,{Lr:function(){return H},_t:function(){return s},sE:function(){return ee},x_:function(){return M}});var X=e(15009),d=e.n(X),me=e(97857),t=e.n(me),pe=e(99289),E=e.n(pe),te=e(85615),b=e(86745);function s(ue){return se.apply(this,arguments)}function se(){return se=E()(d()().mark(function ue(fe){return d()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,b.request)("/api/v1/agent/query/org",{method:"GET",params:t()(t()({},fe),{},{client:te.bV})}));case 1:case"end":return N.stop()}},ue)})),se.apply(this,arguments)}function he(){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function ue(){return _regeneratorRuntime().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.abrupt("return",request("/api/v1/agent/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return _e.stop()}},ue)})),h.apply(this,arguments)}function M(ue){return F.apply(this,arguments)}function F(){return F=E()(d()().mark(function ue(fe){return d()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,b.request)("/api/v1/agent/create",{method:"POST",data:t()(t()({},fe),{},{client:te.bV})}));case 1:case"end":return N.stop()}},ue)})),F.apply(this,arguments)}function ee(ue){return Y.apply(this,arguments)}function Y(){return Y=E()(d()().mark(function ue(fe){return d()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,b.request)("/api/v1/agent/update",{method:"POST",data:t()(t()({},fe),{},{client:te.bV})}));case 1:case"end":return N.stop()}},ue)})),Y.apply(this,arguments)}function H(ue){return D.apply(this,arguments)}function D(){return D=E()(d()().mark(function ue(fe){return d()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,b.request)("/api/v1/agent/delete",{method:"POST",data:t()(t()({},fe),{},{client:te.bV})}));case 1:case"end":return N.stop()}},ue)})),D.apply(this,arguments)}function ie(ue){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function ue(fe){return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",request("/api/v1/agent/filter",{method:"GET",params:_objectSpread(_objectSpread({},fe),{},{client:HTTP_CLIENT})}));case 1:case"end":return N.stop()}},ue)})),O.apply(this,arguments)}},40401:function(be,ve,e){e.d(ve,{kh:function(){return he},pf:function(){return s},y:function(){return M}});var X=e(15009),d=e.n(X),me=e(97857),t=e.n(me),pe=e(99289),E=e.n(pe),te=e(85615),b=e(86745);function s(H){return se.apply(this,arguments)}function se(){return se=E()(d()().mark(function H(D){return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,b.request)("/api/v1/faq/query/org",{method:"GET",params:t()(t()({},D),{},{client:te.bV})}));case 1:case"end":return O.stop()}},H)})),se.apply(this,arguments)}function he(H){return h.apply(this,arguments)}function h(){return h=E()(d()().mark(function H(D){return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,b.request)("/api/v1/faq/create",{method:"POST",data:t()(t()({},D),{},{client:te.bV})}));case 1:case"end":return O.stop()}},H)})),h.apply(this,arguments)}function M(H){return F.apply(this,arguments)}function F(){return F=E()(d()().mark(function H(D){return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,b.request)("/api/v1/faq/update",{method:"POST",data:t()(t()({},D),{},{client:te.bV})}));case 1:case"end":return O.stop()}},H)})),F.apply(this,arguments)}function ee(H){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime().mark(function H(D){return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",request("/api/v1/faq/delete",{method:"POST",data:_objectSpread(_objectSpread({},D),{},{client:HTTP_CLIENT})}));case 1:case"end":return O.stop()}},H)})),Y.apply(this,arguments)}},35612:function(be,ve,e){e.d(ve,{$$:function(){return M},AW:function(){return he},gk:function(){return s}});var X=e(15009),d=e.n(X),me=e(97857),t=e.n(me),pe=e(99289),E=e.n(pe),te=e(85615),b=e(86745);function s(ee){return se.apply(this,arguments)}function se(){return se=E()(d()().mark(function ee(Y){return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,b.request)("/api/v1/worktime/create",{method:"POST",data:t()(t()({},Y),{},{client:te.bV})}));case 1:case"end":return D.stop()}},ee)})),se.apply(this,arguments)}function he(ee){return h.apply(this,arguments)}function h(){return h=E()(d()().mark(function ee(Y){return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,b.request)("/api/v1/worktime/update",{method:"POST",data:t()(t()({},Y),{},{client:te.bV})}));case 1:case"end":return D.stop()}},ee)})),h.apply(this,arguments)}function M(ee){return F.apply(this,arguments)}function F(){return F=E()(d()().mark(function ee(Y){return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,b.request)("/api/v1/worktime/delete",{method:"POST",data:t()(t()({},Y),{},{client:te.bV})}));case 1:case"end":return D.stop()}},ee)})),F.apply(this,arguments)}},88486:function(be,ve,e){e.r(ve),e.d(ve,{default:function(){return Hr}});var X=e(21612),d=e(67294),me=e(15009),t=e.n(me),pe=e(99289),E=e.n(pe),te=e(5574),b=e.n(te),s=e(80049),se=e(3418),he=e(97857),h=e.n(he),M=e(85615),F=e(86745);function ee(S){return Y.apply(this,arguments)}function Y(){return Y=E()(t()().mark(function S(i){return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,F.request)("/api/v1/workgroup/query/org",{method:"GET",params:h()(h()({},i),{},{client:M.bV})}));case 1:case"end":return k.stop()}},S)})),Y.apply(this,arguments)}function H(S){return D.apply(this,arguments)}function D(){return D=E()(t()().mark(function S(i){return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,F.request)("/api/v1/workgroup/create",{method:"POST",data:h()(h()({},i),{},{client:M.bV})}));case 1:case"end":return k.stop()}},S)})),D.apply(this,arguments)}function ie(S){return O.apply(this,arguments)}function O(){return O=E()(t()().mark(function S(i){return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,F.request)("/api/v1/workgroup/update",{method:"POST",data:h()(h()({},i),{},{client:M.bV})}));case 1:case"end":return k.stop()}},S)})),O.apply(this,arguments)}function ue(S){return fe.apply(this,arguments)}function fe(){return fe=E()(t()().mark(function S(i){return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,F.request)("/api/v1/workgroup/delete",{method:"POST",data:h()(h()({},i),{},{client:M.bV})}));case 1:case"end":return k.stop()}},S)})),fe.apply(this,arguments)}var _e=e(39825),N=e(30694),Ee=e(87676),ge=e(18678),Ke=e(11475),Ve=e(64789),Me=e(85576),Ge=e(86250),ke=e(14726),Re=e(2487),Oe=e(7134),Fe=e(73803),de=e(34994),$e=e(5966),We=e(64317),r=e(85893),Ne=function(i){var P=i.open,k=i.onClose,Z=i.onSubmit,R=de.A.useForm(),W=b()(R,1),T=W[0],Q=(0,Fe.Z)(),B=Q.translateString,$=(0,Ee.u)(function(re){return re.orgCurrent}),q=(0,N.E)(function(re){return re.agentResult}),K=(0,d.useState)([]),_=b()(K,2),V=_[0],oe=_[1],v=function(){console.log("handleOk"),T.validateFields().then(function(G){console.log("form values:",G);var j=T.getFieldValue("nickname"),U=T.getFieldValue("agents"),n={nickname:j,agentUids:U,orgUid:$.uid};console.log("workgroup:",n),Z(n)}).catch(function(G){console.log("Form errors:",G)})},ae=function(){console.log("handleCancel"),k()},x=function(G){console.log("selected ".concat(G)),oe(G)};return(0,r.jsx)("div",{children:(0,r.jsx)(Me.Z,{title:"\u521B\u5EFA\u6280\u80FD\u7EC4",open:P,onOk:v,onCancel:ae,children:(0,r.jsxs)(de.A,{form:T,name:"wgForm",submitter:{render:function(G,j){return(0,r.jsx)(r.Fragment,{})}},children:[(0,r.jsx)($e.Z,{label:"\u6280\u80FD\u7EC4\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}]}),(0,r.jsx)(We.Z,{name:"agents",label:"\u6210\u5458",options:q.data.content.map(function(re){return{value:re.uid,label:B(re.nickname)}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:V,onChange:x}})]})})})},Qe=Ne,ze=function(){var i=(0,F.useIntl)(),P=(0,d.useRef)(!1),k=(0,Fe.Z)(),Z=k.translateStringTranct,R=(0,_e.Z)(),W=R.isDarkMode,T=(0,d.useState)(!1),Q=b()(T,2),B=Q[0],$=Q[1],q=(0,Ee.u)(function(A){return A.orgCurrent}),K=(0,N.E)(function(A){return A.setAgentResult}),_=(0,ge.$)(function(A){return{workgroupResult:A.workgroupResult,currentWorkgroup:A.currentWorkgroup,setWorkgroupResult:A.setWorkgroupResult,insertWorkgroup:A.insertWorkgroup,setCurrentWorkgroup:A.setCurrentWorkgroup,deleteCurrentWorkgroup:A.deleteCurrentWorkgroup}}),V=_.workgroupResult,oe=_.currentWorkgroup,v=_.setWorkgroupResult,ae=_.insertWorkgroup,x=_.setCurrentWorkgroup,re=_.deleteCurrentWorkgroup,G=Me.Z.useModal(),j=b()(G,2),U=j[0],n=j[1],u=function(o){U.confirm({title:i.formatMessage({id:"deleteTip"}),icon:(0,r.jsx)(Ke.Z,{}),content:"".concat(i.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(o.nickname,"\u3011\uFF1F"),onOk:function(){l(o)},onCancel:function(){},okText:i.formatMessage({id:"ok"}),cancelText:i.formatMessage({id:"cancel"})})},l=function(){var A=E()(t()().mark(function o(g){var a;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("delete workgroup",g),s.yw.loading(i.formatMessage({id:"deleting",defaultMessage:"Deleting"})),f.next=4,ue(g);case 4:a=f.sent,console.log("delete workgroup response",a),a.code===200?(s.yw.destroy(),s.yw.success(i.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),re(g.uid)):(s.yw.destroy(),s.yw.error(a.message));case 7:case"end":return f.stop()}},o)}));return function(g){return A.apply(this,arguments)}}(),c=function(){var A=E()(t()().mark(function o(){var g,a;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g={pageNumber:0,pageSize:50,orgUid:q.uid},f.next=3,(0,se._t)(g);case 3:a=f.sent,console.log("queryAgentsByOrg: ",a),a.code===200?K(a):s.yw.error(a.message);case 6:case"end":return f.stop()}},o)}));return function(){return A.apply(this,arguments)}}(),p=function(){var A=E()(t()().mark(function o(){var g,a;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!P.current){f.next=3;break}return console.log("isLoading: 1",P.current),f.abrupt("return");case 3:return P.current=!0,s.yw.loading("loading"),g={pageNumber:0,pageSize:50,orgUid:q.uid},f.next=8,ee(g);case 8:a=f.sent,console.log("getWorkgroups",a),a.code===200?(s.yw.destroy(),v(a)):(s.yw.destroy(),s.yw.error(a.message)),P.current=!1;case 12:case"end":return f.stop()}},o)}));return function(){return A.apply(this,arguments)}}();(0,d.useEffect)(function(){p(),c()},[]);var m=function(){$(!0)},L=function(){var A=E()(t()().mark(function o(g){var a;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("handleSave",g),s.yw.loading(i.formatMessage({id:"creating",defaultMessage:"Creating"})),f.next=4,H(g);case 4:a=f.sent,console.log("create workgroup:",a),a.code===200?(s.yw.destroy(),s.yw.success(i.formatMessage({id:"create.success",defaultMessage:"create success"})),$(!1),ae(a.data)):(s.yw.destroy(),$(!1),s.yw.error(a.message));case 7:case"end":return f.stop()}},o)}));return function(g){return A.apply(this,arguments)}}(),y=function(){$(!1)},J=function(o,g){x(o)},z=function(o,g){console.log("list on delete",o),u(o)},ce=function(){m()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Ge.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,r.jsx)(ke.ZP,{size:"small",type:"primary",icon:(0,r.jsx)(Ve.Z,{}),onClick:ce,children:i.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,r.jsx)(ke.ZP,{size:"small",onClick:p,children:i.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,r.jsx)(ke.ZP,{onClick:function(){return u(oe)},size:"small",danger:!0,disabled:oe&&oe.uid==="",children:i.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,r.jsx)(Re.Z,{itemLayout:"horizontal",dataSource:V.data.content,renderItem:function(o,g){return(0,r.jsx)(Re.Z.Item,{style:oe.uid===o.uid?{backgroundColor:W?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return J(o,g)},children:(0,r.jsx)(Re.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,r.jsx)(Oe.C,{src:o.avatar}),title:(0,r.jsx)(r.Fragment,{children:Z(o.nickname)}),description:Z(o.description)})})}}),(0,r.jsx)(Qe,{open:B,onClose:y,onSubmit:L}),n]})},He=ze,xe=e(48096),je=e(90672),Ue=e(8232),Je=e(88484),Xe=e(66723),Ye=function(){var i=de.A.useForm(),P=b()(i,1),k=P[0],Z=(0,F.useIntl)(),R=(0,Fe.Z)(),W=R.translateString,T=(0,N.E)(function(u){return u.agentResult}),Q=(0,ge.$)(function(u){return{currentWorkgroup:u.currentWorkgroup,setCurrentWorkgroup:u.setCurrentWorkgroup}}),B=Q.currentWorkgroup,$=Q.setCurrentWorkgroup,q=(0,d.useState)([]),K=b()(q,2),_=K[0],V=K[1],oe=(0,d.useState)(""),v=b()(oe,2),ae=v[0],x=v[1];(0,d.useEffect)(function(){var u=ge.$.subscribe(function(l){var c;k.setFieldValue("nickname",W(l.currentWorkgroup.nickname)),k.setFieldValue("description",W(l.currentWorkgroup.description));var p=[];(c=l.currentWorkgroup.agents)===null||c===void 0||c.forEach(function(m){p.push(m.uid)}),V(p)});return u},[B]);var re=function(l){console.log("selected ".concat(l)),V(l)},G=function(l){console.log("handleUploadSuccess:",l),x(l)},j=function(l){console.log("handleUploadError:",l)},U=function(){var u=E()(t()().mark(function l(c){var p,m,L,y,J,z;return t()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log("onFinish",c),s.yw.loading("\u4FEE\u6539\u4E2D..."),J=h()(h()(h()({},B),c),{},{avatar:ae,agentUids:_,serviceSettings:h()(h()({},B.serviceSettings),{},{robotUid:(p=B.serviceSettings)===null||p===void 0||(p=p.robot)===null||p===void 0?void 0:p.uid,quickButtonUids:(m=B.serviceSettings)===null||m===void 0||(m=m.quickButtons)===null||m===void 0?void 0:m.map(function(o){return o.uid}),faqUids:(L=B.serviceSettings)===null||L===void 0||(L=L.faqs)===null||L===void 0?void 0:L.map(function(o){return o.uid}),worktimeUids:(y=B.serviceSettings)===null||y===void 0||(y=y.worktimes)===null||y===void 0?void 0:y.map(function(o){return o.uid})})}),console.log("workgroupObject:",J),A.next=6,ie(J);case 6:z=A.sent,console.log("updateWorkGroup response:",z),z.code===200?(s.yw.destroy(),s.yw.success(Z.formatMessage({id:"update.success"})),$(z.data)):(s.yw.destroy(),s.yw.error(z.message));case 9:case"end":return A.stop()}},l)}));return function(c){return u.apply(this,arguments)}}(),n=function(l){return Array.isArray(l)?l:l==null?void 0:l.fileList};return(0,d.useEffect)(function(){x(B==null?void 0:B.avatar)},[B]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(de.A,{form:k,style:{marginLeft:"100px",width:"300px"},onFinish:U,initialValues:{nickname:W(B.nickname),description:W(B.description)},children:[(0,r.jsx)(Ue.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:n,label:Z.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,r.jsxs)(Xe.G,{onSuccess:G,onError:j,children:[(0,r.jsx)(Oe.C,{src:ae}),(0,r.jsx)(ke.ZP,{icon:(0,r.jsx)(Je.Z,{}),children:Z.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,r.jsx)($e.Z,{width:"md",name:"nickname",label:"\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6280\u80FD\u7EC4\u6635\u79F0"}]}),(0,r.jsx)(We.Z,{name:"agents",label:"\u6210\u5458",width:"md",options:T.data.content.map(function(u){return{value:u.uid,label:W(u.nickname)}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:_,onChange:re},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458"}]}),(0,r.jsx)(je.Z,{width:"md",name:"description",label:"\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}]})]})})},qe=Ye,Ce=e(63434),er=e(31199),rr=function(){var i,P,k,Z,R=de.A.useForm(),W=b()(R,1),T=W[0],Q=(0,F.useIntl)(),B=(0,Fe.Z)(),$=B.translateString,q=(0,d.useState)(!1),K=b()(q,2),_=K[0],V=K[1],oe=(0,ge.$)(function(j){return{currentWorkgroup:j.currentWorkgroup,setCurrentWorkgroup:j.setCurrentWorkgroup}}),v=oe.currentWorkgroup,ae=oe.setCurrentWorkgroup;(0,d.useEffect)(function(){var j=ge.$.subscribe(function(U){var n,u,l,c,p,m;T.setFieldValue("welcomeTip",$((n=U.currentWorkgroup)===null||n===void 0||(n=n.serviceSettings)===null||n===void 0?void 0:n.welcomeTip)),T.setFieldValue("topTip",$((u=U.currentWorkgroup)===null||u===void 0||(u=u.serviceSettings)===null||u===void 0?void 0:u.topTip)),T.setFieldValue("showTopTip",(l=U.currentWorkgroup)===null||l===void 0||(l=l.serviceSettings)===null||l===void 0?void 0:l.showTopTip),T.setFieldValue("leavemsgTip",$((c=U.currentWorkgroup)===null||c===void 0||(c=c.serviceSettings)===null||c===void 0?void 0:c.leavemsgTip)),T.setFieldValue("autoCloseMin",(p=U.currentWorkgroup)===null||p===void 0||(p=p.serviceSettings)===null||p===void 0?void 0:p.autoCloseMin),T.setFieldValue("showLogo",(m=U.currentWorkgroup)===null||m===void 0||(m=m.serviceSettings)===null||m===void 0?void 0:m.showLogo)});return j},[v]),(0,d.useEffect)(function(){V(v==null?void 0:v.serviceSettings.showTopTip)},[v]);var x=function(U){console.log("onShowTopTipChange = ".concat(U.target.checked)),V(U.target.checked)},re=function(U){console.log("onShowLogoChange = ".concat(U.target.checked))},G=function(){var j=E()(t()().mark(function U(n){var u,l,c,p,m,L;return t()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return console.log("onFinish:",n," showTopTip:",_),m=h()(h()({},v),{},{serviceSettings:h()(h()({},v.serviceSettings),{},{topTip:(n==null?void 0:n.topTip)||"",showTopTip:_,welcomeTip:(n==null?void 0:n.welcomeTip)||"",leavemsgTip:(n==null?void 0:n.leavemsgTip)||"",autoCloseMin:(n==null?void 0:n.autoCloseMin)||25,showLogo:(n==null?void 0:n.showLogo)||!0,robotUid:(u=v.serviceSettings)===null||u===void 0||(u=u.robot)===null||u===void 0?void 0:u.uid,quickButtonUids:(l=v.serviceSettings)===null||l===void 0||(l=l.quickButtons)===null||l===void 0?void 0:l.map(function(z){return z.uid}),faqUids:(c=v.serviceSettings)===null||c===void 0||(c=c.faqs)===null||c===void 0?void 0:c.map(function(z){return z.uid}),worktimeUids:(p=v.serviceSettings)===null||p===void 0||(p=p.worktimes)===null||p===void 0?void 0:p.map(function(z){return z.uid})}),agentUids:v.agents.map(function(z){return z.uid})}),console.log("workgroupObject:",m),s.yw.loading("\u66F4\u65B0\u4E2D..."),J.next=6,ie(m);case 6:L=J.sent,console.log("updateWorkGroup response:",L),L.code===200?(s.yw.destroy(),s.yw.success(Q.formatMessage({id:"update.success"})),ae(L.data)):(s.yw.destroy(),s.yw.error(L.message));case 9:case"end":return J.stop()}},U)}));return function(n){return j.apply(this,arguments)}}();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(de.A,{form:T,style:{marginLeft:"100px"},onFinish:G,initialValues:{topTip:$(v==null||(i=v.serviceSettings)===null||i===void 0?void 0:i.topTip),showTopTip:v==null||(P=v.serviceSettings)===null||P===void 0?void 0:P.showTopTip,welcomeTip:$(v==null||(k=v.serviceSettings)===null||k===void 0?void 0:k.welcomeTip),leavemsgTip:$(v==null||(Z=v.serviceSettings)===null||Z===void 0?void 0:Z.leavemsgTip),autoCloseMin:v==null?void 0:v.serviceSettings.autoCloseMin,showLogo:v==null?void 0:v.serviceSettings.showLogo},children:[(0,r.jsx)(Ce.Z,{name:"showTopTip",width:"md",label:"\u663E\u793A\u7F6E\u9876\u8BED",fieldProps:{onChange:x}}),_&&(0,r.jsx)(je.Z,{width:"md",name:"topTip",label:"\u7F6E\u9876\u8BED"}),(0,r.jsx)(je.Z,{width:"md",name:"welcomeTip",label:"\u6B22\u8FCE\u8BED"}),(0,r.jsx)(je.Z,{width:"md",name:"leavemsgTip",label:"\u79BB\u7EBF\u7559\u8A00\u63D0\u793A"}),(0,r.jsx)(er.Z,{width:"md",name:"autoCloseMin",label:"\u65E0\u65B0\u6D88\u606F\u4F1A\u8BDD\u81EA\u52A8\u5173\u95ED\u65F6\u957F(\u5355\u4F4D\uFF1A\u5206\u949F)",min:1}),(0,r.jsx)(Ce.Z,{name:"showLogo",width:"md",label:"\u663E\u793ALogo",fieldProps:{onChange:re}})]})})},nr=rr,tr=e(19632),or=e.n(tr),ur=e(37326),sr=e(55895),ar=e(33725),ir=e(27484),ye=e.n(ir),Ae=e(35612),lr=e(10285),dr=e.n(lr),cr=e(76545);ye().extend(dr());var De="HH:mm:ss",pr=function(){var i,P,k,Z,R,W=de.A.useForm(),T=b()(W,1),Q=T[0],B=(0,d.useRef)(!1),$=(0,d.useRef)(),q=(0,F.useIntl)(),K=(0,ge.$)(function(o){return{currentWorkgroup:o.currentWorkgroup,setCurrentWorkgroup:o.setCurrentWorkgroup}}),_=K.currentWorkgroup,V=K.setCurrentWorkgroup,oe=(0,ur.V)(function(o){return{robotResult:o.robotResult,setRobotResult:o.setRobotResult}}),v=oe.robotResult,ae=oe.setRobotResult,x=(0,Ee.u)(function(o){return o.orgCurrent}),re=(0,Fe.Z)(),G=re.translateString,j=(0,d.useState)([]),U=b()(j,2),n=U[0],u=U[1];(0,d.useEffect)(function(){var o;u(_==null||(o=_.serviceSettings)===null||o===void 0||(o=o.worktimes)===null||o===void 0?void 0:o.map(function(a){return a==null?void 0:a.uid}));var g=ge.$.subscribe(function(a){var C,f,I,w,ne;Q.setFieldValue("defaultRobot",(C=a.currentWorkgroup)===null||C===void 0||(C=C.serviceSettings)===null||C===void 0?void 0:C.defaultRobot),Q.setFieldValue("offlineRobot",(f=a.currentWorkgroup)===null||f===void 0||(f=f.serviceSettings)===null||f===void 0?void 0:f.offlineRobot),Q.setFieldValue("nonWorktimeRobot",(I=a.currentWorkgroup)===null||I===void 0||(I=I.serviceSettings)===null||I===void 0?void 0:I.nonWorktimeRobot),Q.setFieldValue("robotUid",(w=a.currentWorkgroup)===null||w===void 0||(w=w.serviceSettings)===null||w===void 0||(w=w.robot)===null||w===void 0?void 0:w.uid),u((ne=a.currentWorkgroup)===null||ne===void 0||(ne=ne.serviceSettings)===null||ne===void 0||(ne=ne.worktimes)===null||ne===void 0?void 0:ne.map(function(le){return le==null?void 0:le.uid}))});return g},[_]);var l=function(){var o=E()(t()().mark(function g(){var a,C;return t()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!B.current){I.next=3;break}return console.log("isLoading: 1",B.current),I.abrupt("return");case 3:return B.current=!0,s.yw.loading("loading"),a={pageNumber:0,pageSize:50,orgUid:x.uid},I.next=8,(0,cr.p0)(a);case 8:C=I.sent,console.log("queryRobotsByOrg: ",C),C.code===200?ae(C):s.yw.error(C.message),B.current=!1,s.yw.destroy();case 13:case"end":return I.stop()}},g)}));return function(){return o.apply(this,arguments)}}();(0,d.useEffect)(function(){var o;((o=v.data)===null||o===void 0||(o=o.content)===null||o===void 0?void 0:o.length)===0&&l()},[v]);var c=function(g){console.log("onDefaultRobotChange checked = ".concat(g.target.checked))},p=function(g){console.log("onOfflineRobotChange checked = ".concat(g.target.checked))},m=function(g){console.log("onNonWorktimeRobotChange checked = ".concat(g.target.checked))},L=function(g){console.log("checked = ".concat(g))},y=function(){var o=E()(t()().mark(function g(a){var C,f,I,w,ne,le;return t()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return console.log("onFinish:",a),w=(C=$.current)===null||C===void 0?void 0:C.getList(),console.log("worktimes: ",w),s.yw.loading("\u6B63\u5728\u4FEE\u6539..."),ne=h()(h()({},_),{},{agentUids:_.agents.map(function(Te){return Te.uid}),serviceSettings:h()(h()({},_.serviceSettings),{},{defaultRobot:a.defaultRobot,offlineRobot:a.offlineRobot,nonWorktimeRobot:a.nonWorktimeRobot,robotUid:a.robotUid,worktimeUids:n,quickButtonUids:(f=_.serviceSettings)===null||f===void 0||(f=f.quickButtons)===null||f===void 0?void 0:f.map(function(Te){return Te.uid}),faqUids:(I=_.serviceSettings)===null||I===void 0||(I=I.faqs)===null||I===void 0?void 0:I.map(function(Te){return Te.uid})})}),console.log("workgroupObject:",ne),Pe.next=8,ie(ne);case 8:le=Pe.sent,console.log("updateWorkGroup response:",le),le.code===200?(s.yw.destroy(),s.yw.success(q.formatMessage({id:"update.success"})),V(le.data)):(s.yw.destroy(),s.yw.error(le.message));case 11:case"end":return Pe.stop()}},g)}));return function(a){return o.apply(this,arguments)}}(),J=function(){var g,a=[];return _==null||(g=_.serviceSettings)===null||g===void 0||(g=g.worktimes)===null||g===void 0||g.map(function(C){a.push({worktime:[ye()(C.startTime,De),ye()(C.endTime,De)]})}),a},z=function(){var o=E()(t()().mark(function g(a,C,f){var I,w;return t()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return console.log("onWorktimeChange:",f,C),I={uid:n[f],startTime:C[0],endTime:C[1]},le.next=4,(0,Ae.AW)(I);case 4:w=le.sent,console.log("updateWorktime response:",w),w.code===200||s.yw.error("\u4FEE\u6539\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return le.stop()}},g)}));return function(a,C,f){return o.apply(this,arguments)}}(),ce=function(){var o=E()(t()().mark(function g(){var a,C,f;return t()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("createWorktime"),a={startTime:"00:00:00",endTime:"23:59:59"},w.next=4,(0,Ae.gk)(a);case 4:C=w.sent,console.log("createWorktime response:",C),C.code===200?u([].concat(or()(n),[(f=C.data)===null||f===void 0?void 0:f.uid])):s.yw.error("\u6DFB\u52A0\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return w.stop()}},g)}));return function(){return o.apply(this,arguments)}}(),A=function(){var o=E()(t()().mark(function g(a){var C,f;return t()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("deleteWorktime:",a,n[a]),C={uid:n[a]},w.next=4,(0,Ae.$$)(C);case 4:f=w.sent,console.log("deleteWorktime response:",f),f.code===200?u(n.filter(function(ne,le){return le!==a})):s.yw.error("\u5220\u9664\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return w.stop()}},g)}));return function(a){return o.apply(this,arguments)}}();return(0,d.useEffect)(function(){console.log("worktimeUids:",n)},[n]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(de.A,{form:Q,style:{marginLeft:"100px"},initialValues:{defaultRobot:_==null||(i=_.serviceSettings)===null||i===void 0?void 0:i.defaultRobot,offlineRobot:_==null||(P=_.serviceSettings)===null||P===void 0?void 0:P.offlineRobot,nonWorktimeRobot:_==null||(k=_.serviceSettings)===null||k===void 0?void 0:k.nonWorktimeRobot,robotUid:_==null||(Z=_.serviceSettings)===null||Z===void 0||(Z=Z.robot)===null||Z===void 0?void 0:Z.uid},onFinish:y,children:[(0,r.jsx)(Ce.Z,{name:"defaultRobot",width:"md",label:"\u9ED8\u8BA4\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:c}}),(0,r.jsx)(Ce.Z,{name:"offlineRobot",width:"md",label:"\u65E0\u5BA2\u670D\u5728\u7EBF\u65F6\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:p}}),(0,r.jsx)(Ce.Z,{name:"nonWorktimeRobot",width:"md",label:"\u975E\u5DE5\u4F5C\u65F6\u95F4\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:m}}),(0,r.jsx)(sr.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\uFF0C\u652F\u6301\u591A\u4E2A",creatorRecord:{worktime:[ye()("00:00:00",De),ye()("23:59:59",De)]},initialValue:J(),creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664"},itemRender:function(g){var a=g.listDom,C=g.action;return(0,r.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[a,C]})},min:1,max:4,actionRef:$,actionGuard:{beforeAddRow:function(){var o=E()(t()().mark(function a(C,f,I){return t()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return console.log("beforeAddRow:",C,f),ne.next=3,ce();case 3:return ne.abrupt("return",new Promise(function(le){le(!0)}));case 4:case"end":return ne.stop()}},a)}));function g(a,C,f){return o.apply(this,arguments)}return g}(),beforeRemoveRow:function(){var o=E()(t()().mark(function a(C,f){return t()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("beforeRemoveRow:",C),w.next=3,A(C);case 3:return w.abrupt("return",new Promise(function(ne){if(C===0){ne(!1);return}ne(!0)}));case 4:case"end":return w.stop()}},a)}));function g(a,C){return o.apply(this,arguments)}return g}()},children:function(g,a,C){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ar.Z.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(I,w){z(I,w,a)},format:De}},"worktime")})}}),(0,r.jsx)(We.Z,{name:"robotUid",label:"\u673A\u5668\u4EBA",width:"md",options:v.data.content.map(function(o){return{value:o.uid,label:G(o.nickname)}}),fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u673A\u5668\u4EBA",value:_==null||(R=_.serviceSettings)===null||R===void 0||(R=R.robot)===null||R===void 0?void 0:R.uid,onChange:L}})]})})},gr=pr,we=e(1413),vr=e(91),mr=e(22270),Ze=e(78045),fr=e(90789),hr=e(83606),_r=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],kr=d.forwardRef(function(S,i){var P=S.fieldProps,k=S.options,Z=S.radioType,R=S.layout,W=S.proFieldProps,T=S.valueEnum,Q=(0,vr.Z)(S,_r);return(0,r.jsx)(hr.Z,(0,we.Z)((0,we.Z)({valueType:Z==="button"?"radioButton":"radio",ref:i,valueEnum:(0,mr.h)(T,void 0)},Q),{},{fieldProps:(0,we.Z)({options:k,layout:R},P),proFieldProps:W,filedConfig:{customLightMode:!0}}))}),Fr=d.forwardRef(function(S,i){var P=S.fieldProps,k=S.children;return(0,r.jsx)(Ze.ZP,(0,we.Z)((0,we.Z)({},P),{},{ref:i,children:k}))}),br=(0,fr.G)(Fr,{valuePropName:"checked",ignoreWidth:!0}),Se=br;Se.Group=kr,Se.Button=Ze.ZP.Button,Se.displayName="ProFormComponent";var Cr=Se,Er=function(){var i=Ue.Z.useForm(),P=b()(i,1),k=P[0],Z=(0,F.useIntl)(),R=(0,ge.$)(function(G){return{currentWorkgroup:G.currentWorkgroup,setCurrentWorkgroup:G.setCurrentWorkgroup}}),W=R.currentWorkgroup,T=R.setCurrentWorkgroup,Q=(0,d.useState)(!1),B=b()(Q,2),$=B[0],q=B[1],K=(0,d.useState)(M.Jx),_=b()(K,2),V=_[0],oe=_[1];(0,d.useEffect)(function(){var G=ge.$.subscribe(function(j){k.setFieldValue("recent",j.currentWorkgroup.recent),k.setFieldValue("routeType",j.currentWorkgroup.routeType)});return G},[W]),(0,d.useEffect)(function(){q(W.recent),oe(W.routeType)},[]);var v=function(j){console.log("checked = ".concat(j.target.checked)),q(j.target.checked)},ae=function(j){console.log("radio checked",j.target.value),oe(j.target.value)},x=function(j,U){return[(0,r.jsx)(ke.ZP,{type:"primary",onClick:function(){var u;(u=j.form)===null||u===void 0||u.submit()},children:"\u4FDD\u5B58"},"submit")]},re=function(){var G=E()(t()().mark(function j(U){var n,u,l,c,p,m;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log("onFinish:",U),s.yw.loading("\u6B63\u5728\u4FEE\u6539..."),p=h()(h()(h()({},W),{},{agentUids:W.agents.map(function(J){return J.uid})},U),{},{serviceSettings:h()(h()({},W.serviceSettings),{},{robotUid:(n=W.serviceSettings)===null||n===void 0||(n=n.robot)===null||n===void 0?void 0:n.uid,quickButtonUids:(u=W.serviceSettings)===null||u===void 0||(u=u.quickButtons)===null||u===void 0?void 0:u.map(function(J){return J.uid}),faqUids:(l=W.serviceSettings)===null||l===void 0||(l=l.faqs)===null||l===void 0?void 0:l.map(function(J){return J.uid}),worktimeUids:(c=W.serviceSettings)===null||c===void 0||(c=c.worktimes)===null||c===void 0?void 0:c.map(function(J){return J.uid})})}),console.log("workgroupObject:",p),y.next=6,ie(p);case 6:m=y.sent,console.log("updateWorkGroup response:",m),m.code===200?(s.yw.destroy(),s.yw.success(Z.formatMessage({id:"update.success"})),T(m.data)):(s.yw.destroy(),s.yw.error(m.message));case 9:case"end":return y.stop()}},j)}));return function(U){return G.apply(this,arguments)}}();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(de.A,{form:k,style:{marginLeft:"100px"},initialValues:{recent:W==null?void 0:W.recent,routeType:W==null?void 0:W.routeType},submitter:{render:x},onFinish:re,children:[(0,r.jsx)(Ce.Z,{name:"recent",label:"\u719F\u5BA2\u4F18\u5148",fieldProps:{onChange:v}}),(0,r.jsx)(Cr.Group,{name:"routeType",label:"\u8DEF\u7531\u7C7B\u578B",options:[{label:"\u8F6E\u8BE2",value:M.Jx},{label:"\u5F53\u65E5\u63A5\u5F85\u6700\u5C11\u4F18\u5148",value:M.C},{label:"\u9971\u548C\u5EA6\u6700\u4F4E\u4F18\u5148",value:M.Vd},{label:"\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148",value:M.Q2}],fieldProps:{value:V,onChange:ae}}),(0,r.jsxs)(de.A.Item,{children:[V===M.Jx&&(0,r.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u4E0A\u7EBF\u65F6\u95F4\u8FDB\u5165\u961F\u5217\u8F6E\u6D41\u5206\u914D\u3002\u6CE8\u610F\uFF1A\u5F53\u5BA2\u670D\u7F51\u7EDC\u4E0D\u7A33\u5B9A\u6389\u7EBF\u91CD\u8FDE\u4E4B\u540E\uFF0C\u4F1A\u91CD\u65B0\u6392\u5230\u961F\u5217\u672B\u5C3E"}),V===M.C&&(0,r.jsx)("p",{children:"\u6839\u636E\u5F53\u65E5(0\u70B9\u5F00\u59CB)\u5BA2\u670D\u63A5\u5F85\u603B\u6570\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u5BA2\u670D\u4E0A\u73ED\u65F6\u95F4\u4E0D\u7EDF\u4E00\uFF0C\u665A\u767B\u5F55\u8005\u767B\u5F55\u540E\u4F1A\u96C6\u4E2D\u6536\u5230\u5206\u914D\u65B0\u5BA2\uFF0C\u76F4\u5230\u8DDF\u5176\u4ED6\u5728\u7EBF\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\u4E3A\u6B62"}),V===M.Vd&&(0,r.jsx)("p",{children:"\u6839\u636E\uFF08\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF-\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6570\u91CF\uFF09\u4E4B\u5DEE\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5927\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u6BCF\u4E2A\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\uFF0C\u5219\u6B64\u65B9\u6CD5\u8DDF\u2019\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148\u2018\u6548\u679C\u4E00\u6837"}),V===M.Q2&&(0,r.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u4F1A\u53D7\u5230\u5BA2\u670D\u63A5\u5F85\u901F\u5EA6\u7684\u5F71\u54CD\uFF0C\u63A5\u5F85\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u5BA2\u670D\u624B\u52A8\u7ED3\u675F\u4F1A\u8BDD\u6709\u5229\u4E8E\u52A0\u901F\u5206\u914D\u65B0\u5BA2"})]})]})})},Wr=Er,yr=function(){var i=(0,F.useAccess)();return i.canDebug&&console.log("leaveMsg canDebug"),(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:(0,r.jsx)(F.Access,{accessible:i.canDebug(),fallback:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(F.FormattedMessage,{id:M.h5})}),children:"leave msg"})})})},Dr=yr,wr=e(9465),Le=e(48489),Be=e(40056),Ie=e(96074),Pr=function(){var i,P=de.A.useForm(),k=b()(P,1),Z=k[0],R=(0,F.useIntl)(),W=(0,Fe.Z)(),T=W.translateString,Q=(0,Ee.u)(function(n){return n.orgCurrent}),B=(0,d.useState)(),$=b()(B,2),q=$[0],K=$[1],_=(0,d.useState)([]),V=b()(_,2),oe=V[0],v=V[1],ae=(0,ge.$)(function(n){return{currentWorkgroup:n.currentWorkgroup,setCurrentWorkgroup:n.setCurrentWorkgroup}}),x=ae.currentWorkgroup,re=ae.setCurrentWorkgroup,G=function(){var n=E()(t()().mark(function u(){var l,c,p,m;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return s.yw.loading(R.formatMessage({id:"loading",defaultMessage:"Loading"})),c={pageNumber:0,pageSize:50,orgUid:Q.uid},y.next=4,(0,wr.qL)(c);case 4:p=y.sent,console.log("getAllQuickbuttons response:",c,p),s.yw.destroy(),p.code===200?K(p):s.yw.error(p.message),m=[],(l=x.serviceSettings)===null||l===void 0||l.quickButtons.forEach(function(J){m.push(J.uid)}),v(m);case 11:case"end":return y.stop()}},u)}));return function(){return n.apply(this,arguments)}}();(0,d.useEffect)(function(){G()},[Q]),(0,d.useEffect)(function(){var n,u=[];(n=x.serviceSettings)===null||n===void 0||n.quickButtons.forEach(function(c){u.push(c.uid)}),v(u);var l=ge.$.subscribe(function(c){var p,m=[];(p=c.currentWorkgroup.serviceSettings)===null||p===void 0||p.quickButtons.forEach(function(L){m.push(L.uid)}),v(m)});return l},[x]);var j=function(){var n=E()(t()().mark(function u(l){var c,p,m,L,y;return t()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return console.log("onFinish",l),L=h()(h()({},x),{},{serviceSettings:h()(h()({},x.serviceSettings),{},{robotUid:(c=x.serviceSettings)===null||c===void 0||(c=c.robot)===null||c===void 0?void 0:c.uid,quickButtonUids:l.quickbutton,faqUids:(p=x.serviceSettings)===null||p===void 0||(p=p.faqs)===null||p===void 0?void 0:p.map(function(ce){return ce.uid}),worktimeUids:(m=x.serviceSettings)===null||m===void 0||(m=m.worktimes)===null||m===void 0?void 0:m.map(function(ce){return ce.uid})}),agentUids:x.agents.map(function(ce){return ce.uid})}),console.log("workgroupObject:",L),z.next=5,ie(L);case 5:y=z.sent,console.log("updateWorkGroup response:",y),y.code===200?(s.yw.destroy(),s.yw.success(R.formatMessage({id:"update.success"})),re(y.data)):(s.yw.destroy(),s.yw.error(y.message));case 8:case"end":return z.stop()}},u)}));return function(l){return n.apply(this,arguments)}}(),U=function(u){console.log("selected ".concat(u)),v(u)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(Be.Z,{message:"\u8BF7\u5148\u5230 \u77E5\u8BC6\u5E93 -> \u5FEB\u6377\u6309\u94AE -> \u65B0\u5EFA\uFF0C\u521B\u5EFA\u5FEB\u6377\u6309\u94AE\u4E4B\u540E\uFF0C\u518D\u6765\u6DFB\u52A0",type:"success",action:(0,r.jsx)(ke.ZP,{type:"link",icon:(0,r.jsx)(Le.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/")},children:R.formatMessage({id:"setting.helpdoc"})})}),(0,r.jsx)(Be.Z,{message:"\u63D0\u4EA4\u4E4B\u540E\uFF0C\u5BF9\u65B0\u4F1A\u8BDD\u7ACB\u5373\u751F\u6548\u3002\u5BF9\u4E8E\u8FDB\u884C\u4E2D\u4F1A\u8BDD\uFF0C\u9700\u8981\u5173\u95ED\u4E4B\u540E\uFF0C\u91CD\u65B0\u8FDB\u5165\u624D\u4F1A\u751F\u6548",type:"warning",style:{marginTop:10}}),(0,r.jsx)(Ie.Z,{}),(0,r.jsx)(de.A,{form:Z,layout:"vertical",initialValues:{},onFinish:j,children:(0,r.jsx)(We.Z,{name:"quickbutton",width:"md",label:R.formatMessage({id:"quickbutton"}),options:q==null||(i=q.data)===null||i===void 0?void 0:i.content.map(function(n){return{label:T(n.title),value:n.uid}}),fieldProps:{mode:"multiple",onChange:U,allowClear:!0,value:oe,placeholder:(0,r.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})})]})},Tr=Pr,jr=e(52688),Sr=function(){var i,P=(0,F.useIntl)(),k=de.A.useForm(),Z=b()(k,1),R=Z[0],W=(0,ge.$)(function($){return{currentWorkgroup:$.currentWorkgroup,setCurrentWorkgroup:$.setCurrentWorkgroup}}),T=W.currentWorkgroup,Q=W.setCurrentWorkgroup;(0,d.useEffect)(function(){var $=ge.$.subscribe(function(q){var K;R.setFieldValue("showRateBtn",(K=q.currentWorkgroup)===null||K===void 0||(K=K.serviceSettings)===null||K===void 0?void 0:K.showRateBtn)});return $},[T]);var B=function(){var $=E()(t()().mark(function q(K){var _,V;return t()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("handleShowRateSwitchChange:",K),_=h()(h()({},T),{},{agentUids:T.agents.map(function(ae){return ae.uid}),serviceSettings:h()(h()({},T.serviceSettings),{},{showRateBtn:K})}),console.log("workgroupObject:",_),v.next=5,ie(_);case 5:V=v.sent,console.log("updateWorkGroup response:",V),V.code===200?(s.yw.destroy(),s.yw.success(P.formatMessage({id:"update.success"})),Q(V.data)):(s.yw.destroy(),s.yw.error(V.message));case 8:case"end":return v.stop()}},q)}));return function(K){return $.apply(this,arguments)}}();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(de.A,{form:R,submitter:{render:!1},initialValues:{showRateBtn:T==null||(i=T.serviceSettings)===null||i===void 0?void 0:i.showRateBtn},children:(0,r.jsx)(jr.Z,{width:"md",name:"showRateBtn",label:"\u662F\u5426\u663E\u793A\u8BC4\u4EF7\u6309\u94AE",fieldProps:{onChange:B}})})})},Br=Sr,Rr=e(40401),Ar=function(){var i,P=de.A.useForm(),k=b()(P,1),Z=k[0],R=(0,F.useIntl)(),W=(0,Fe.Z)(),T=W.translateString,Q=(0,Ee.u)(function(n){return n.orgCurrent}),B=(0,d.useState)(),$=b()(B,2),q=$[0],K=$[1],_=(0,d.useState)([]),V=b()(_,2),oe=V[0],v=V[1],ae=(0,ge.$)(function(n){return{currentWorkgroup:n.currentWorkgroup,setCurrentWorkgroup:n.setCurrentWorkgroup}}),x=ae.currentWorkgroup,re=ae.setCurrentWorkgroup,G=function(){var n=E()(t()().mark(function u(){var l,c,p,m;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return s.yw.loading(R.formatMessage({id:"loading",defaultMessage:"Loading"})),c={pageNumber:0,pageSize:50,orgUid:Q.uid},y.next=4,(0,Rr.pf)(c);case 4:p=y.sent,console.log("getAllFaqs response:",c,p),s.yw.destroy(),p.code===200?K(p):s.yw.error(p.message),m=[],(l=x.serviceSettings)===null||l===void 0||l.faqs.forEach(function(J){m.push(J.uid)}),v(m);case 11:case"end":return y.stop()}},u)}));return function(){return n.apply(this,arguments)}}();(0,d.useEffect)(function(){G()},[Q]),(0,d.useEffect)(function(){var n,u=[];(n=x.serviceSettings)===null||n===void 0||n.faqs.forEach(function(c){u.push(c.uid)}),v(u);var l=ge.$.subscribe(function(c){var p;console.log("TabFaq useWorkgroupStore:",c);var m=[];(p=c.currentWorkgroup.serviceSettings)===null||p===void 0||p.faqs.forEach(function(L){m.push(L.uid)}),v(m)});return l},[x]);var j=function(){var n=E()(t()().mark(function u(l){var c,p,m,L,y;return t()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return console.log("onFinish",l),L=h()(h()({},x),{},{serviceSettings:h()(h()({},x.serviceSettings),{},{robotUid:(c=x.serviceSettings)===null||c===void 0||(c=c.robot)===null||c===void 0?void 0:c.uid,quickButtonUids:(p=x.serviceSettings)===null||p===void 0?void 0:p.quickButtons.map(function(ce){return ce.uid}),faqUids:l.faq,worktimeUids:(m=x.serviceSettings)===null||m===void 0||(m=m.worktimes)===null||m===void 0?void 0:m.map(function(ce){return ce.uid})}),agentUids:x.agents.map(function(ce){return ce.uid})}),console.log("workgroupObject:",L),z.next=5,ie(L);case 5:y=z.sent,console.log("updateWorkGroup response:",y),y.code===200?(s.yw.destroy(),s.yw.success(R.formatMessage({id:"update.success"})),re(y.data)):(s.yw.destroy(),s.yw.error(y.message));case 8:case"end":return z.stop()}},u)}));return function(l){return n.apply(this,arguments)}}(),U=function(u){console.log("selected ".concat(u)),v(u)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(Be.Z,{message:"\u8BF7\u5148\u5230 \u77E5\u8BC6\u5E93 -> \u5E38\u89C1\u95EE\u9898 -> \u65B0\u5EFA\uFF0C\u521B\u5EFA\u5E38\u89C1\u95EE\u9898\u4E4B\u540E\uFF0C\u518D\u6765\u6DFB\u52A0",type:"success",action:(0,r.jsx)(ke.ZP,{type:"link",icon:(0,r.jsx)(Le.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/")},children:R.formatMessage({id:"setting.helpdoc"})})}),(0,r.jsx)(Be.Z,{message:"\u63D0\u4EA4\u4E4B\u540E\uFF0C\u5BF9\u65B0\u4F1A\u8BDD\u7ACB\u5373\u751F\u6548\u3002\u5BF9\u4E8E\u8FDB\u884C\u4E2D\u4F1A\u8BDD\uFF0C\u9700\u8981\u5173\u95ED\u4E4B\u540E\uFF0C\u91CD\u65B0\u8FDB\u5165\u624D\u4F1A\u751F\u6548",type:"warning",style:{marginTop:10}}),(0,r.jsx)(Ie.Z,{}),(0,r.jsx)(de.A,{form:Z,layout:"vertical",initialValues:{},onFinish:j,children:(0,r.jsx)(We.Z,{name:"faq",width:"md",label:R.formatMessage({id:"menu.knowledge.faq"}),options:q==null||(i=q.data)===null||i===void 0?void 0:i.content.map(function(n){return{label:T(n.title),value:n.uid}}),fieldProps:{mode:"multiple",onChange:U,allowClear:!0,value:oe,placeholder:(0,r.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})})]})},Mr=Ar,Or=[{key:"quickbutton",label:(0,r.jsx)(F.FormattedMessage,{id:"menu.knowledge.quickbutton",defaultMessage:"QuickButton"}),children:(0,r.jsx)(Tr,{})},{key:"faq",label:(0,r.jsx)(F.FormattedMessage,{id:"menu.knowledge.faq",defaultMessage:"FAQ"}),children:(0,r.jsx)(Mr,{})},{key:"rate",label:"\u8BC4\u4EF7\u8BBE\u7F6E",children:(0,r.jsx)(Br,{})},{key:"leaveMsg",label:"\u7559\u8A00\u8BBE\u7F6E",children:(0,r.jsx)(Dr,{})}],$r=function(){var i=(0,F.useIntl)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(xe.Z,{tabPosition:"left",items:Or})})},xr=$r,Ur=e(36649),Zr=e(45106),Lr=e(71422),Ir=e(20283),Kr=function(){var i=(0,F.useIntl)(),P=(0,d.useState)([]),k=b()(P,2),Z=k[0],R=k[1],W=function(B){console.log(B)},T=[{key:"basic",label:i.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,r.jsx)(qe,{})},{key:"serviceSettings",label:i.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,r.jsx)(nr,{})},{key:"robot",label:i.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,r.jsx)(gr,{})},{key:"route",label:i.formatMessage({id:"pages.workgroup.tab.route",defaultMessage:"Route"}),children:(0,r.jsx)(Wr,{})},{key:"advanced",label:i.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,r.jsx)(xr,{})},{key:"channel",label:i.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,r.jsx)(Ur.Z,{type:M.aZ})},{key:"channelsocial",label:"\u793E\u4EA4\u6E20\u9053",children:(0,r.jsx)(Zr.Z,{type:M.aZ})},{key:"channelshop",label:"\u7535\u5546\u6E20\u9053",children:(0,r.jsx)(Ir.Z,{type:M.aZ})},{key:"channelforeign",label:"\u6D77\u5916\u6E20\u9053",children:(0,r.jsx)(Lr.Z,{type:M.aZ})}];return(0,d.useEffect)(function(){R(T)},[]),(0,r.jsx)(xe.Z,{defaultActiveKey:"1",items:Z,onChange:W})},Vr=Kr,Gr=e(77154),Nr=X.Z.Sider,Qr=X.Z.Content,zr=function(){var i=(0,Gr.Z)(),P=i.leftSiderStyle,k=i.leftSiderWidth;return(0,r.jsxs)(X.Z,{children:[(0,r.jsx)(Nr,{width:k,style:P,children:(0,r.jsx)(He,{})}),(0,r.jsx)(X.Z,{children:(0,r.jsx)(Qr,{children:(0,r.jsx)(Vr,{})})})]})},Hr=zr}}]);
