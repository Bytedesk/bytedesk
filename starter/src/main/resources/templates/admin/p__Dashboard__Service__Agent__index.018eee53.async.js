"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1642],{19054:function(Ae,te,t){var G=t(1413),o=t(91),pe=t(67294),v=t(24809),ie=t(85893),Z=["fieldProps","request","params","proFieldProps"],h=function(x,W){var d=x.fieldProps,z=x.request,I=x.params,re=x.proFieldProps,l=(0,o.Z)(x,Z);return(0,ie.jsx)(v.Z,(0,G.Z)({valueType:"treeSelect",fieldProps:d,ref:W,request:z,params:I,filedConfig:{customLightMode:!0},proFieldProps:re},l))},B=pe.forwardRef(h);te.Z=B},952:function(Ae,te,t){var G=t(34994);te.ZP=G.A},36497:function(Ae,te,t){t.d(te,{O9:function(){return W},ZG:function(){return z},bN:function(){return re},p1:function(){return M}});var G=t(15009),o=t.n(G),pe=t(97857),v=t.n(pe),ie=t(99289),Z=t.n(ie),h=t(85615),B=t(86745);function M(A){return x.apply(this,arguments)}function x(){return x=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/autoreply/query/org",{method:"GET",params:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),x.apply(this,arguments)}function W(A){return d.apply(this,arguments)}function d(){return d=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/autoreply/create",{method:"POST",data:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),d.apply(this,arguments)}function z(A){return I.apply(this,arguments)}function I(){return I=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/autoreply/update",{method:"POST",data:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),I.apply(this,arguments)}function re(A){return l.apply(this,arguments)}function l(){return l=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/autoreply/delete",{method:"POST",data:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),l.apply(this,arguments)}},10411:function(Ae,te,t){t.d(te,{AP:function(){return M},_J:function(){return re},t5:function(){return z},v_:function(){return W}});var G=t(15009),o=t.n(G),pe=t(97857),v=t.n(pe),ie=t(99289),Z=t.n(ie),h=t(85615),B=t(86745);function M(A){return x.apply(this,arguments)}function x(){return x=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/kbase/query/org",{method:"GET",params:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),x.apply(this,arguments)}function W(A){return d.apply(this,arguments)}function d(){return d=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/kbase/create",{method:"POST",data:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),d.apply(this,arguments)}function z(A){return I.apply(this,arguments)}function I(){return I=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/kbase/update",{method:"POST",data:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),I.apply(this,arguments)}function re(A){return l.apply(this,arguments)}function l(){return l=Z()(o()().mark(function A(R){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,B.request)("/api/v1/kbase/delete",{method:"POST",data:v()(v()({},R),{},{client:h.bVn})}));case 1:case"end":return c.stop()}},A)})),l.apply(this,arguments)}},84125:function(Ae,te,t){t.d(te,{D$:function(){return z},EP:function(){return A},hS:function(){return re},z_:function(){return M}});var G=t(15009),o=t.n(G),pe=t(97857),v=t.n(pe),ie=t(99289),Z=t.n(ie),h=t(85615),B=t(86745);function M(w){return x.apply(this,arguments)}function x(){return x=Z()(o()().mark(function w(ne){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,B.request)("/api/v1/mem/query/org",{method:"GET",params:v()(v()({},ne),{},{client:h.bVn})}));case 1:case"end":return y.stop()}},w)})),x.apply(this,arguments)}function W(){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function w(){return _regeneratorRuntime().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",request("/api/v1/mem/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return L.stop()}},w)})),d.apply(this,arguments)}function z(w){return I.apply(this,arguments)}function I(){return I=Z()(o()().mark(function w(ne){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,B.request)("/api/v1/mem/create",{method:"POST",data:v()(v()({},ne),{},{client:h.bVn})}));case 1:case"end":return y.stop()}},w)})),I.apply(this,arguments)}function re(w){return l.apply(this,arguments)}function l(){return l=Z()(o()().mark(function w(ne){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,B.request)("/api/v1/mem/update",{method:"POST",data:v()(v()({},ne),{},{client:h.bVn})}));case 1:case"end":return y.stop()}},w)})),l.apply(this,arguments)}function A(w){return R.apply(this,arguments)}function R(){return R=Z()(o()().mark(function w(ne){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,B.request)("/api/v1/member/delete",{method:"POST",data:v()(v()({},ne),{},{client:h.bVn})}));case 1:case"end":return y.stop()}},w)})),R.apply(this,arguments)}function ue(w){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function w(ne){return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",request("/api/v1/member/filter",{method:"GET",params:_objectSpread(_objectSpread({},ne),{},{client:HTTP_CLIENT})}));case 1:case"end":return y.stop()}},w)})),c.apply(this,arguments)}},45480:function(Ae,te,t){t.r(te),t.d(te,{default:function(){return Mt}});var G=t(21612),o=t(67294),pe=t(5574),v=t.n(pe),ie=t(11941),Z=t(15009),h=t.n(Z),B=t(97857),M=t.n(B),x=t(99289),W=t.n(x),d=t(80049),z=t(3418),I=t(73803),re=t(30694),l=t(85615),A=t(73445),R=t(782),ue=t(18753),c=(0,A.Ue)()((0,R.mW)((0,R.tJ)((0,ue.n)(function(ae,p){return{memberResult:{data:{content:[],totalElements:0}},insertMember:function(_){ae(function(S){var E=S.memberResult.data.content;E.unshift(_)})},updateMember:function(_){ae(function(S){var E=S.memberResult.data.content,K=E.findIndex(function(T){return T.uid===_.uid});K!==-1?E[K]=_:console.warn("Member with uid ".concat(_.uid," not found."))})},deleteMember:function(_){ae(function(S){var E=S.memberResult.data.content,K=E.findIndex(function(T){return T.uid===_.uid});K!==-1?E.splice(K,1):console.warn("Member with uid ".concat(_.uid," not found."))})},setMemberResult:function(_){ae({memberResult:_})},deleteMemberCache:function(){return ae({},!0)}}}),{name:l.PQL}))),w=t(53004),ne=t(88484),L=t(34994),y=t(5966),Ce=t(90672),Fe=t(19054),k=t(86745),Ue=t(8232),Re=t(7134),he=t(14726),e=t(85893),Oe=function(){var p,f=L.A.useForm(),_=v()(f,1),S=_[0],E=(0,k.useIntl)(),K=(0,I.Z)(),T=K.translateString,V=c(function(P){return P.memberResult}),H=(0,re.E)(function(P){return{currentAgent:P.currentAgent,setCurrentAgent:P.setCurrentAgent}}),a=H.currentAgent,oe=H.setCurrentAgent,fe=(0,o.useState)(""),Q=v()(fe,2),q=Q[0],$=Q[1],C=function(j,U){U.title=j.nickname,U.value=j.uid},D=(0,o.useMemo)(function(){for(var P=[],j=0;j<V.data.content.length;j++){var U={title:"",value:"",children:[]};C(V.data.content[j],U),P.push(U)}return P},[V]);(0,o.useEffect)(function(){a&&S.setFieldsValue({nickname:T(a==null?void 0:a.nickname),email:a==null?void 0:a.email,mobile:a==null?void 0:a.mobile,description:T(a==null?void 0:a.description)})},[a]);var J=function(j){console.log("handleUploadSuccess:",j),$(j)},be=function(j){console.log("handleUploadError:",j)},ye=function(j){console.log("onTreeSelectChange:",j);for(var U=0;U<V.data.content.length;U++){var N=V.data.content[U];N.uid===j&&(S.setFieldsValue({nickname:N.nickname}),S.setFieldsValue({email:N.email}),S.setFieldsValue({mobile:N.mobile}))}},n=function(){var P=W()(h()().mark(function j(U){var N,se,de,ce,me,ve,ge,g,b;return h()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("onFinish:",U),d.yw.loading(E.formatMessage({id:"updating"})),g=M()(M()(M()({},a),U),{},{avatar:q,serviceSettings:M()(M()({},a.serviceSettings),{},{robotUid:a==null||(N=a.serviceSettings)===null||N===void 0||(N=N.robot)===null||N===void 0?void 0:N.uid,quickFaqUids:a==null||(se=a.serviceSettings)===null||se===void 0||(se=se.quickFaqs)===null||se===void 0?void 0:se.map(function(i){return i.uid}),faqUids:a==null||(de=a.serviceSettings)===null||de===void 0||(de=de.faqs)===null||de===void 0?void 0:de.map(function(i){return i.uid}),guessFaqUids:a==null||(ce=a.serviceSettings)===null||ce===void 0||(ce=ce.guessFaqs)===null||ce===void 0?void 0:ce.map(function(i){return i.uid}),hotFaqUids:a==null||(me=a.serviceSettings)===null||me===void 0||(me=me.hotFaqs)===null||me===void 0?void 0:me.map(function(i){return i.uid}),shortcutFaqUids:a==null||(ve=a.serviceSettings)===null||ve===void 0||(ve=ve.shortcutFaqs)===null||ve===void 0?void 0:ve.map(function(i){return i.uid}),worktimeUids:a==null||(ge=a.serviceSettings)===null||ge===void 0||(ge=ge.worktimes)===null||ge===void 0?void 0:ge.map(function(i){return i.uid})}),autoReplySettings:M()({},a.autoReplySettings)}),console.log("agentObject:",g),r.next=6,(0,z.sE)(g);case 6:b=r.sent,console.log("updateAgent response:",b),b.code===200?(d.yw.destroy(),d.yw.success(E.formatMessage({id:"update.success"})),oe(b.data)):(d.yw.destroy(),d.yw.error(b.message));case 9:case"end":return r.stop()}},j)}));return function(U){return P.apply(this,arguments)}}(),_e=function(j){return Array.isArray(j)?j:j==null?void 0:j.fileList};return(0,o.useEffect)(function(){if(a){var P;$(a.avatar),S.setFieldValue("memberUid",a==null||(P=a.member)===null||P===void 0?void 0:P.uid)}},[a]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(L.A,{form:S,style:{marginLeft:"100px"},onFinish:n,initialValues:{nickname:T(a==null?void 0:a.nickname),email:a==null?void 0:a.email,mobile:a==null?void 0:a.mobile,description:T(a==null?void 0:a.description),memberUid:a==null||(p=a.member)===null||p===void 0?void 0:p.uid},children:[(0,e.jsx)(Ue.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:_e,label:E.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,e.jsxs)(w.G,{onSuccess:J,onError:be,children:[(0,e.jsx)(Re.C,{src:q}),(0,e.jsx)(he.ZP,{icon:(0,e.jsx)(ne.Z,{}),children:E.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,e.jsx)(y.Z,{width:"md",name:"nickname",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u5BA2\u670D\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u670D\u6635\u79F0"}]}),(0,e.jsx)(y.Z,{width:"md",name:"email",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u90AE\u7BB1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,e.jsx)(y.Z,{width:"md",name:"mobile",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]}),(0,e.jsx)(Ce.Z,{width:"md",name:"description",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}]}),(0,e.jsx)(Fe.Z,{width:"md",name:"memberUid",label:"\u7ED1\u5B9A\u6210\u5458-\u7528\u4E8E\u8D26\u53F7\u767B\u5F55",fieldProps:{treeDefaultExpandAll:!0,treeData:D,onChange:ye},placeholder:"Please select",disabled:!0})]})})},xe=Oe,ke=t(40056),Ze=t(79964),Be=t(50748),we=t(99072),Ie=t(9025),Le=t(63772),Ke=t(23035),$e=t(51364),We=t(64423),Ne=t(54050),Ve=t(36497),Ge=t(10411),Se=t(87676),Ee=t(87603),ze=t(52688),Me=t(64317),He=function(p){var f,_=p.type,S=(0,k.useIntl)(),E=(0,k.useNavigate)(),K=L.A.useForm(),T=v()(K,1),V=T[0],H=(0,I.Z)(),a=H.translateString,oe=(0,o.useState)(),fe=v()(oe,2),Q=fe[0],q=fe[1],$=(0,o.useState)(),C=v()($,2),D=C[0],J=C[1],be=(0,Se.u)(function(g){return g.currentOrg}),ye=(0,re.E)(function(g){return{currentAgent:g.currentAgent,setCurrentAgent:g.setCurrentAgent}}),n=ye.currentAgent,_e=ye.setCurrentAgent,P=(0,o.useState)(l.DST),j=v()(P,2),U=j[0],N=j[1],se=function(){var g=W()(h()().mark(function b(){var s,r;return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return d.yw.loading(S.formatMessage({id:"loading",defaultMessage:"Loading"})),s={pageNumber:0,pageSize:50,orgUid:be.uid},u.next=4,(0,Ve.p1)(s);case 4:r=u.sent,console.log("getAutoReplys response:",s,r),d.yw.destroy(),r.code===200?q(r):d.yw.error(r.message);case 8:case"end":return u.stop()}},b)}));return function(){return g.apply(this,arguments)}}();(0,o.useEffect)(function(){se()},[]);var de=function(){var g=W()(h()().mark(function b(){var s,r;return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return d.yw.loading(S.formatMessage({id:"loading",defaultMessage:"Loading"})),s={pageNumber:0,pageSize:50,type:U===l.PZ1?l.jNC:l.QPQ,orgUid:be.uid},u.next=4,(0,Ge.AP)(s);case 4:r=u.sent,console.log("getKeywordBase response:",s,r),d.yw.destroy(),r.code===200?J(r):d.yw.error(r.message);case 8:case"end":return u.stop()}},b)}));return function(){return g.apply(this,arguments)}}();(0,o.useEffect)(function(){de()},[U]),(0,o.useEffect)(function(){if(_===l.Njn){var g,b,s,r,i,u,O,m;N(n==null||(g=n.autoReplySettings)===null||g===void 0?void 0:g.autoReplyType),V.setFieldsValue({enabled:n==null||(b=n.autoReplySettings)===null||b===void 0?void 0:b.enabled,autoReplyType:n==null||(s=n.autoReplySettings)===null||s===void 0?void 0:s.autoReplyType,autoReplyUid:n==null||(r=n.autoReplySettings)===null||r===void 0?void 0:r.autoReplyUid,autoReplyContentType:n==null||(i=n.autoReplySettings)===null||i===void 0?void 0:i.autoReplyContentType,autoReplyContent:n==null||(u=n.autoReplySettings)===null||u===void 0?void 0:u.autoReplyContent,kbUid:n==null||(O=n.autoReplySettings)===null||O===void 0?void 0:O.kbUid}),V.setFieldValue("autoReplyUid",n==null||(m=n.autoReplySettings)===null||m===void 0?void 0:m.autoReplyContent)}},[n]);var ce=function(b,s){console.log("handleAutoReplyTypeChange:",b),N(b)},me=function(b,s){var r;console.log("handleAutoReplySelectChange:",b),Q==null||(r=Q.data.content)===null||r===void 0||r.forEach(function(i){i.uid===b&&V.setFieldsValue({autoReplyContentType:i.type,autoReplyContent:i.content})})},ve=function(){var g=W()(h()().mark(function b(s){var r,i,u,O,m,Y,X,je,le;return h()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(console.log("handleAutoReplySubmit:",s),_!==l.Njn){ee.next=9;break}return je=M()(M()({},n),{},{serviceSettings:M()(M()({},n==null?void 0:n.serviceSettings),{},{robotUid:n==null||(r=n.serviceSettings)===null||r===void 0||(r=r.robot)===null||r===void 0?void 0:r.uid,quickFaqUids:n==null||(i=n.serviceSettings)===null||i===void 0||(i=i.quickFaqs)===null||i===void 0?void 0:i.map(function(F){return F.uid}),faqUids:n==null||(u=n.serviceSettings)===null||u===void 0||(u=u.faqs)===null||u===void 0?void 0:u.map(function(F){return F.uid}),guessFaqUids:n==null||(O=n.serviceSettings)===null||O===void 0||(O=O.guessFaqs)===null||O===void 0?void 0:O.map(function(F){return F.uid}),hotFaqUids:n==null||(m=n.serviceSettings)===null||m===void 0||(m=m.hotFaqs)===null||m===void 0?void 0:m.map(function(F){return F.uid}),shortcutFaqUids:n==null||(Y=n.serviceSettings)===null||Y===void 0||(Y=Y.shortcutFaqs)===null||Y===void 0?void 0:Y.map(function(F){return F.uid}),worktimeUids:n==null||(X=n.serviceSettings)===null||X===void 0||(X=X.worktimes)===null||X===void 0?void 0:X.map(function(F){return F.uid})}),autoReplySettings:M()(M()({},n.autoReplySettings),{},{enabled:s.enabled,autoReplyType:s.autoReplyType,autoReplyUid:s.autoReplyUid,autoReplyContentType:s.autoReplyContentType,autoReplyContent:s.autoReplyContent,kbUid:s.kbUid})}),console.log("agentObject:",je),ee.next=6,(0,z.sE)(je);case 6:le=ee.sent,console.log("updateAgent response:",le),le.code===200?(d.yw.destroy(),d.yw.success(S.formatMessage({id:"update.success"})),_e(le.data)):(d.yw.destroy(),d.yw.error(le.message));case 9:case"end":return ee.stop()}},b)}));return function(s){return g.apply(this,arguments)}}(),ge=function(){var g=W()(h()().mark(function b(s){var r,i,u,O,m,Y,X,je,le;return h()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(console.log("handleAutoReplyEnabledChange:",s),_!==l.Njn){ee.next=9;break}return je=M()(M()({},n),{},{serviceSettings:M()(M()({},n==null?void 0:n.serviceSettings),{},{robotUid:n==null||(r=n.serviceSettings)===null||r===void 0||(r=r.robot)===null||r===void 0?void 0:r.uid,quickFaqUids:n==null||(i=n.serviceSettings)===null||i===void 0||(i=i.quickFaqs)===null||i===void 0?void 0:i.map(function(F){return F.uid}),faqUids:n==null||(u=n.serviceSettings)===null||u===void 0||(u=u.faqs)===null||u===void 0?void 0:u.map(function(F){return F.uid}),guessFaqUids:n==null||(O=n.serviceSettings)===null||O===void 0||(O=O.guessFaqs)===null||O===void 0?void 0:O.map(function(F){return F.uid}),hotFaqUids:n==null||(m=n.serviceSettings)===null||m===void 0||(m=m.hotFaqs)===null||m===void 0?void 0:m.map(function(F){return F.uid}),shortcutFaqUids:n==null||(Y=n.serviceSettings)===null||Y===void 0||(Y=Y.shortcutFaqs)===null||Y===void 0?void 0:Y.map(function(F){return F.uid}),worktimeUids:n==null||(X=n.serviceSettings)===null||X===void 0||(X=X.worktimes)===null||X===void 0?void 0:X.map(function(F){return F.uid})}),autoReplySettings:M()(M()({},n.autoReplySettings),{},{enabled:s})}),console.log("agentObject:",je),ee.next=6,(0,z.sE)(je);case 6:le=ee.sent,console.log("updateAgent response:",le),le.code===200?(d.yw.destroy(),d.yw.success(S.formatMessage({id:"update.success"})),_e(le.data)):(d.yw.destroy(),d.yw.error(le.message));case 9:case"end":return ee.stop()}},b)}));return function(s){return g.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(L.A,{form:V,onFinish:ve,children:[(0,e.jsx)(ze.Z,{width:"md",name:"enabled",label:"\u662F\u5426\u542F\u7528\u81EA\u52A8\u56DE\u590D",fieldProps:{onChange:ge}}),(0,e.jsx)(Me.Z,{width:"md",name:"autoReplyType",label:"\u81EA\u52A8\u56DE\u590D\u7C7B\u578B",options:[{label:"\u56FA\u5B9A\u56DE\u590D",value:l.DST},{label:"\u5173\u952E\u5B57\u5339\u914D",value:l.PZ1},{label:"\u5927\u6A21\u578B\u56DE\u590D",value:l.PcP}],fieldProps:{onChange:function(b,s){ce(b,s)}}}),U===l.DST&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.A.Item,{children:(0,e.jsx)(he.ZP,{icon:(0,e.jsx)(Ee.Z,{}),onClick:function(){E("/kb/autoreply/data")},children:"\u6DFB\u52A0\u56FA\u5B9A\u56DE\u590D\u5185\u5BB9"},"github")}),(0,e.jsx)(Me.Z,{width:"md",name:"autoReplyUid",label:"\u9009\u62E9\u56FA\u5B9A\u56DE\u590D\u5185\u5BB9",options:Q==null||(f=Q.data)===null||f===void 0?void 0:f.content.map(function(g){return{label:a(g.content),value:g.uid}}),fieldProps:{onChange:function(b,s){me(b,s)}}}),(0,e.jsx)(Me.Z,{width:"md",name:"autoReplyContentType",label:"\u56FA\u5B9A\u56DE\u590D\u7C7B\u578B",options:[{label:"\u6587\u672C",value:l.PYi},{label:"\u56FE\u7247",value:l.Qm},{label:"\u89C6\u9891",value:l.tVi},{label:"\u97F3\u9891",value:l.Yu1},{label:"\u6587\u4EF6",value:l.Qn}],disabled:!0}),(0,e.jsx)(Ce.Z,{width:"md",name:"autoReplyContent",label:"\u56FA\u5B9A\u56DE\u590D\u5185\u5BB9",disabled:!0})]}),U===l.PZ1&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.A.Item,{children:(0,e.jsx)(he.ZP,{icon:(0,e.jsx)(Ee.Z,{}),onClick:function(){E("/kb/keyword/data")},children:"\u6DFB\u52A0\u5173\u952E\u8BCD\u77E5\u8BC6\u5E93"},"github")}),(0,e.jsx)(Me.Z,{width:"md",name:"kbUid",label:"\u9009\u62E9\u5173\u952E\u8BCD\u77E5\u8BC6\u5E93",options:D==null?void 0:D.data.content.map(function(g){return{label:a(g.name),value:g.uid}})})]}),U===l.PcP&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.A.Item,{children:(0,e.jsx)(he.ZP,{icon:(0,e.jsx)(Ee.Z,{}),onClick:function(){E("/kb/llm/data")},children:"\u6DFB\u52A0\u5927\u6A21\u578B\u77E5\u8BC6\u5E93"},"github")}),(0,e.jsx)(Me.Z,{width:"md",name:"kbUid",label:"\u9009\u62E9\u5927\u6A21\u578B\u77E5\u8BC6\u5E93\u5E93",options:D==null?void 0:D.data.content.map(function(g){return{label:a(g.name),value:g.uid}})})]})]})})},Qe=He,qe=t(73453),Je=t(48489),Ye=t(91116),Xe=t(35791),et=function(){var p=(0,k.useIntl)(),f=(0,o.useMemo)(function(){return!0},[]),_=[{key:"faq",label:(0,e.jsx)(k.FormattedMessage,{id:"menu.knowledge.faq",defaultMessage:"FAQ"}),children:(0,e.jsx)(Ze.Z,{type:l.Njn}),disabled:f},{key:"quickFaqs",label:(0,e.jsx)(k.FormattedMessage,{id:"menu.knowledge.quickbutton",defaultMessage:"QuickButton"}),children:(0,e.jsx)($e.Z,{type:l.Njn}),disabled:f},{key:"faqGuess",label:(0,e.jsx)(k.FormattedMessage,{id:"menu.knowledge.faqGuess",defaultMessage:"FaqGuess"}),children:(0,e.jsx)(We.Z,{type:l.Njn}),disabled:f},{key:"faqHot",label:(0,e.jsx)(k.FormattedMessage,{id:"menu.knowledge.faqHot",defaultMessage:"FaqHot"}),children:(0,e.jsx)(Be.Z,{type:l.Njn}),disabled:f},{key:"faqShortcut",label:(0,e.jsx)(k.FormattedMessage,{id:"menu.knowledge.faqShortcut",defaultMessage:"FaqShortcut"}),children:(0,e.jsx)(we.Z,{type:l.Njn}),disabled:f},{key:"rate",label:(0,e.jsx)(k.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,e.jsx)(Le.Z,{type:l.Njn}),disabled:f},{key:"autoreply",label:(0,e.jsx)(k.FormattedMessage,{id:"autoreply",defaultMessage:"Auto Reply"}),children:(0,e.jsx)(Qe,{type:l.Njn}),disabled:f},{key:"leaveMsg",label:(0,e.jsx)(k.FormattedMessage,{id:"leavemsg",defaultMessage:"Leave Msg"}),children:(0,e.jsx)(Ie.Z,{type:l.Njn}),disabled:f},{key:"survey",label:(0,e.jsx)(k.FormattedMessage,{id:"survey",defaultMessage:"Survey"}),children:(0,e.jsx)(Xe.Z,{type:l.Njn}),disabled:f},{key:"history",label:(0,e.jsx)(k.FormattedMessage,{id:"history",defaultMessage:"History"}),children:(0,e.jsx)(qe.Z,{type:l.Njn}),disabled:f},{key:"inputassociation",label:(0,e.jsx)(k.FormattedMessage,{id:"inputassociation",defaultMessage:"Input Association"}),children:(0,e.jsx)(Ye.Z,{type:l.Njn}),disabled:f},{key:"black",label:(0,e.jsx)(k.FormattedMessage,{id:"black",defaultMessage:"Black"}),children:(0,e.jsx)(Ne.Z,{type:l.Njn}),disabled:f},{key:"antiharassment",label:(0,e.jsx)(k.FormattedMessage,{id:"antiharassment",defaultMessage:"Anti Harassment"}),children:(0,e.jsx)(Ke.Z,{type:l.Njn}),disabled:f}],S=(0,o.useState)([]),E=v()(S,2),K=E[0],T=E[1];return(0,o.useEffect)(function(){T(_)},[]),(0,e.jsxs)(e.Fragment,{children:[f&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ke.Z,{message:"\u4F01\u4E1A\u7248-\u9AD8\u7EA7\u529F\u80FD",style:{marginBottom:20},type:"warning",action:(0,e.jsx)(he.ZP,{type:"link",icon:(0,e.jsx)(Je.Z,{}),onClick:function(){return window.open(l.rVq)},children:p.formatMessage({id:"setting.helpdoc"})})})}),(0,e.jsx)(ie.Z,{tabPosition:"left",items:K})]})},tt=et,nt=t(36649),at=t(16737),rt=t(31207),st=t(22268),lt=t(99606),it=t(59518),ut=function(){var p=(0,k.useIntl)(),f=(0,o.useState)([]),_=v()(f,2),S=_[0],E=_[1],K=[{key:"basic",label:p.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(xe,{})},{key:"serviceSettings",label:p.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,e.jsx)(it.Z,{type:l.Njn})},{key:"robot",label:p.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,e.jsx)(lt.Z,{type:l.Njn})},{key:"advanced",label:p.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,e.jsx)(tt,{})},{key:"channel",label:p.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(nt.Z,{type:l.Njn})},{key:"channelsocial",label:p.formatMessage({id:"channelsocial",defaultMessage:"Social Channel"}),children:(0,e.jsx)(at.Z,{type:l.Njn})},{key:"channelshop",label:p.formatMessage({id:"channelshop",defaultMessage:"Shop Channel"}),children:(0,e.jsx)(st.Z,{type:l.Njn})},{key:"channelforeign",label:p.formatMessage({id:"channelforeign",defaultMessage:"Foreign Channel"}),children:(0,e.jsx)(rt.Z,{type:l.Njn})}];return(0,o.useEffect)(function(){E(K)},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.Z,{defaultActiveKey:"basic",items:S})})},ot=ut,dt=t(39825),ct=t(11475),mt=t(64789),De=t(85576),vt=t(86250),Te=t(2487),Pe=t(952),gt=function(p){var f=p.open,_=p.onClose,S=p.onSubmit,E=Pe.ZP.useForm(),K=v()(E,1),T=K[0],V=(0,Se.u)(function($){return $.currentOrg}),H=c(function($){return $.memberResult}),a=function(C,D){D.title=C.nickname,D.value=C.uid},oe=(0,o.useMemo)(function(){for(var $=[],C=0;C<H.data.content.length;C++){var D={title:"",value:"",children:[]};a(H.data.content[C],D),$.push(D)}return $},[H]),fe=function(){console.log("handleOk"),T.validateFields().then(function(C){console.log("form values:",C);var D=T.getFieldValue("nickname"),J=T.getFieldValue("email"),be=T.getFieldValue("mobile"),ye=T.getFieldValue("memberUid"),n={nickname:D,email:J,mobile:be,memberUid:ye,orgUid:V.uid};console.log("agent:",n),S(n)}).catch(function(C){console.log("Form errors:",C)})},Q=function(){console.log("handleCancel"),_()},q=function(C){console.log("onTreeSelectChange:",C);for(var D=0;D<H.data.content.length;D++){var J=H.data.content[D];J.uid===C&&(console.log("element:",J),T.setFieldsValue({nickname:J.nickname}),T.setFieldsValue({email:J.email}),T.setFieldsValue({mobile:J.mobile}))}};return(0,e.jsx)("div",{children:(0,e.jsx)(De.Z,{title:"\u521B\u5EFA\u5BA2\u670D",open:f,forceRender:!0,onOk:fe,onCancel:Q,children:(0,e.jsxs)(Pe.ZP,{form:T,name:"agentForm",style:{maxWidth:400},submitter:!1,children:[(0,e.jsx)(Fe.Z,{label:"\u7ED1\u5B9A\u6210\u5458",name:"memberUid",tooltip:"\u8BF7\u5148\u5230\u7EC4\u7EC7-\u300B\u6210\u5458-\u300B\u521B\u5EFA\u6210\u5458",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458!"}],fieldProps:{multiple:!1,treeDefaultExpandAll:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",onChange:q,treeData:oe}}),(0,e.jsx)(y.Z,{label:"\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}]}),(0,e.jsx)(y.Z,{label:"\u90AE\u7BB1",name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"}]}),(0,e.jsx)(y.Z,{label:"\u624B\u673A\u53F7",name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]})]})})})},pt=gt,ft=t(84125),ht=function(){var p=(0,k.useIntl)(),f=(0,o.useRef)(!1),_=(0,I.Z)(),S=_.translateString,E=_.translateStringTranct,K=(0,dt.Z)(),T=K.isDarkMode,V=(0,o.useState)(!1),H=v()(V,2),a=H[0],oe=H[1],fe=(0,Se.u)(function(s){return s.currentOrg}),Q=c(function(s){return s.setMemberResult}),q=(0,re.E)(function(s){return{agentResult:s.agentResult,currentAgent:s.currentAgent,insertAgent:s.insertAgent,setAgentResult:s.setAgentResult,setCurrentAgent:s.setCurrentAgent,deleteCurrentAgent:s.deleteCurrentAgent}}),$=q.agentResult,C=q.currentAgent,D=q.insertAgent,J=q.setAgentResult,be=q.setCurrentAgent,ye=q.deleteCurrentAgent,n=De.Z.useModal(),_e=v()(n,2),P=_e[0],j=_e[1],U=function(r){P.confirm({title:p.formatMessage({id:"deleteTip"}),icon:(0,e.jsx)(ct.Z,{}),content:"".concat(p.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(S(r.nickname),"\u3011\uFF1F"),onOk:function(){N(r)},onCancel:function(){},okText:p.formatMessage({id:"ok"}),cancelText:p.formatMessage({id:"cancel"})})},N=function(){var s=W()(h()().mark(function r(i){var u;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("delete agent",i),d.yw.loading(p.formatMessage({id:"deleting",defaultMessage:"Deleting"})),m.next=4,(0,z.Lr)(i);case 4:u=m.sent,console.log("delete agent response",u),u.code===200?(d.yw.destroy(),d.yw.success(p.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),ye(i.uid)):(d.yw.destroy(),d.yw.error(u.message));case 7:case"end":return m.stop()}},r)}));return function(i){return s.apply(this,arguments)}}(),se=function(){var s=W()(h()().mark(function r(){var i,u;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!f.current){m.next=3;break}return console.log("isLoading: 1",f.current),m.abrupt("return");case 3:return f.current=!0,d.yw.loading("loading"),i={pageNumber:0,pageSize:50,orgUid:fe.uid},m.next=8,(0,z._t)(i);case 8:u=m.sent,console.log("queryAgentsByOrg: ",u),u.code===200?(d.yw.destroy(),J(u)):(d.yw.destroy(),d.yw.error(u.message)),f.current=!1;case 12:case"end":return m.stop()}},r)}));return function(){return s.apply(this,arguments)}}(),de=function(){var s=W()(h()().mark(function r(){var i,u;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return i={pageNumber:0,pageSize:50,orgUid:fe.uid},m.next=3,(0,ft.z_)(i);case 3:u=m.sent,console.log("queryAllMembers:",i,u),u.code===200?Q(u):d.yw.error(u.message);case 6:case"end":return m.stop()}},r)}));return function(){return s.apply(this,arguments)}}();(0,o.useEffect)(function(){se(),de()},[]);var ce=function(){oe(!0)},me=function(){var s=W()(h()().mark(function r(i){var u;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("save agent"),d.yw.loading(p.formatMessage({id:"creating",defaultMessage:"Creating"})),m.next=4,(0,z.x_)(i);case 4:u=m.sent,console.log("create agent:",u),u.code===200?(d.yw.destroy(),d.yw.success(p.formatMessage({id:"create.success"})),D(u.data),oe(!1)):(d.yw.destroy(),oe(!1),d.yw.error(u.message));case 7:case"end":return m.stop()}},r)}));return function(i){return s.apply(this,arguments)}}(),ve=function(){oe(!1)},ge=function(){ce()},g=function(r,i){be(r)},b=function(r){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("span",{style:{color:"#999999",fontSize:12},children:[r.status===l.Ra4&&"[\u2705\u63A5\u5F85]",r.status===l.tU$&&"[\u5FD9\u788C]",r.status===l.LZ1&&"[\u4E0B\u7EBF]",r.connected?"\u2705\u8FDE\u63A5":"\u274C\u65AD\u5F00"]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(vt.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,e.jsx)(he.ZP,{size:"small",type:"primary",icon:(0,e.jsx)(mt.Z,{}),onClick:ge,children:p.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,e.jsx)(he.ZP,{size:"small",onClick:se,children:p.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,e.jsx)(he.ZP,{onClick:function(){return U(C)},size:"small",danger:!0,disabled:(C==null?void 0:C.uid)==="",children:p.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,e.jsx)(Te.Z,{itemLayout:"horizontal",dataSource:$.data.content,renderItem:function(r,i){return(0,e.jsx)(Te.Z.Item,{style:C.uid===r.uid?{backgroundColor:T?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return g(r,i)},children:(0,e.jsx)(Te.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,e.jsx)(Re.C,{src:r.avatar}),title:(0,e.jsx)(e.Fragment,{children:E(r.nickname)}),description:b(r)})})}}),(0,e.jsx)(pt,{open:a,onClose:ve,onSubmit:me}),j]})},bt=ht,yt=t(77154),_t=G.Z.Sider,jt=G.Z.Content,At=function(){var p=(0,yt.Z)(),f=p.leftSiderStyle,_=p.leftSiderWidth;return(0,o.useEffect)(function(){},[]),(0,e.jsxs)(G.Z,{children:[(0,e.jsx)(_t,{width:_,style:f,children:(0,e.jsx)(bt,{})}),(0,e.jsx)(G.Z,{children:(0,e.jsx)(jt,{children:(0,e.jsx)(ot,{})})})]})},Mt=At}}]);
