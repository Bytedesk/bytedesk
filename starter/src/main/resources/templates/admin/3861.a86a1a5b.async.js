"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3861],{76469:function(e,n,t){t.d(n,{$l:function(){return f},gf:function(){return m},lg:function(){return g},p0:function(){return c}});var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(64453),d=t(45234);function c(e){return v.apply(this,arguments)}function v(){return(v=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return q.apply(this,arguments)}function q(){return(q=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},96433:function(e,n,t){t.d(n,{Yg:function(){return m},kh:function(){return g},pf:function(){return c},y:function(){return f}});var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(64453),d=t(45234);function c(e){return v.apply(this,arguments)}function v(){return(v=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return q.apply(this,arguments)}function q(){return(q=l()(s()().mark((function e(n){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},n),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},33778:function(e,n,t){var i=t(64453),s=t(45234),o=t(52676);n.Z=function(e){e.type;var n=(0,s.useAccess)();return n.canDebug&&console.log("TabBlack canDebug"),(0,o.jsx)("div",{children:(0,o.jsx)("p",{children:(0,o.jsx)(s.Access,{accessible:n.canDebug(),fallback:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(s.FormattedMessage,{id:i.h5w})}),children:"黑名单访客、黑名单ip/ip段"})})})}},27066:function(e,n,t){var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(81113),g=t(76469),p=t(1705),f=t(80501),h=t(64978),m=t(11868),q=t(64453),w=t(43393),F=t(99755),S=t(45234),k=t(75271),y=t(52676);n.Z=function(e){var n=e.type,t=(0,S.useIntl)(),i=w.A.useForm(),o=d()(i,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,U=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),x=U.currentAgent,C=U.setCurrentAgent,j=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=j.currentWorkgroup,R=j.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(n===q._X4)o.setFieldsValue({showCaptcha:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showCaptcha});else if(n===q.Njn){var t;o.setFieldsValue({showCaptcha:null==x||null===(t=x.serviceSettings)||void 0===t?void 0:t.showCaptcha})}else if(n===q.aZD){var i;o.setFieldsValue({showCaptcha:null==A||null===(i=A.serviceSettings)||void 0===i?void 0:i.showCaptcha})}}),[a,x,A]);var Z=function(){var e=l()(s()().mark((function e(i){var o,u,l,d,f,h,m,w,F,S,k,y,U,j,Z,M,T,W,V,P,O,E,H,I,N;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleCaptchaSubmit:",i),n!==q._X4){e.next=11;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showCaptcha:i.showCaptcha,faqUids:null==x||null===(o=x.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(d=a.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),b(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(n!==q.Njn){e.next=21;break}return Z=r()(r()({},x),{},{serviceSettings:r()(r()({},null==x?void 0:x.serviceSettings),{},{showCaptcha:i.showCaptcha,faqUids:null==x||null===(w=x.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),robotUid:null==x||null===(F=x.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==x||null===(S=x.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==x||null===(k=x.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==x||null===(y=x.serviceSettings)||void 0===y||null===(y=y.hotFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(U=x.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),worktimeUids:null==x||null===(j=x.serviceSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),autoReplySettings:r()({},x.autoReplySettings)}),console.log("agentObject:",Z),e.next=16,(0,v.sE)(Z);case 16:M=e.sent,console.log("updateAgent response:",M),200===M.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),C(M.data)):(c.yw.destroy(),c.yw.error(M.message)),e.next=29;break;case 21:if(n!==q.aZD){e.next=29;break}return I=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showCaptcha:i.showCaptcha,faqUids:null==x||null===(T=x.serviceSettings)||void 0===T||null===(T=T.faqs)||void 0===T?void 0:T.map((function(e){return e.uid})),robotUid:null===(W=A.serviceSettings)||void 0===W||null===(W=W.robot)||void 0===W?void 0:W.uid,quickFaqUids:null===(V=A.serviceSettings)||void 0===V||null===(V=V.quickFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.hotFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(E=A.serviceSettings)||void 0===E||null===(E=E.shortcutFaqs)||void 0===E?void 0:E.map((function(e){return e.uid})),worktimeUids:null===(H=A.serviceSettings)||void 0===H||null===(H=H.worktimes)||void 0===H?void 0:H.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",I),e.next=26,(0,p.W5)(I);case 26:N=e.sent,console.log("updateWorkGroup response:",N),200===N.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),R(N.data)):(c.yw.destroy(),c.yw.error(N.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsx)(w.A,{form:o,onFinish:Z,children:(0,y.jsx)(F.Z,{width:"md",name:"showCaptcha",label:t.formatMessage({id:"showCaptcha",defaultMessage:"Show Captcha"})})})})}},16548:function(e,n,t){var i=t(26068),s=t.n(i),o=t(90228),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(96433),g=t(76469),p=t(92785),f=t(64978),h=t(65098),m=t(42452),q=t(92710),w=t(43393),F=t(99755),S=t(6817),k=t(45234),y=t(20679),b=t(42502),U=t(7283),x=t(75271),C=t(80501),j=t(11868),A=t(64453),R=t(81113),Z=t(1705),M=t(52676);n.Z=function(e){var n,t=e.type,i=w.A.useForm(),o=d()(i,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),T=(0,p.Z)().translateString,W=(0,h.u)((function(e){return e.currentOrg})),V=(0,x.useState)(),P=d()(V,2),O=P[0],E=P[1],H=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),I=H.currentRobot,N=H.setCurrentRobot,_=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),G=_.currentAgent,D=_.setCurrentAgent,L=(0,j.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=L.currentWorkgroup,X=L.setCurrentWorkgroup,Q=function(){var e=l()(r()().mark((function e(){var n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,orgUid:W.uid},e.next=4,(0,v.pf)(n);case 4:t=e.sent,console.log("getAllFaqs response:",n,t),c.yw.destroy(),200===t.code?E(t):c.yw.error(t.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){Q()}),[W]),(0,x.useEffect)((function(){var e,n;if(t===A._X4)o.setFieldsValue({showFaqs:null==I||null===(e=I.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==I||null===(n=I.serviceSettings)||void 0===n||null===(n=n.faqs)||void 0===n?void 0:n.map((function(e){return e.uid}))});else if(t===A.Njn){var i,s;o.setFieldsValue({showFaqs:null==G||null===(i=G.serviceSettings)||void 0===i?void 0:i.showFaqs,faqUids:null==G||null===(s=G.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid}))})}else if(t===A.aZD){var r,u;o.setFieldsValue({showFaqs:null==$||null===(r=$.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==$||null===(u=$.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[I,G,$]);var z=function(){var e=l()(r()().mark((function e(n){var i,o,l,a,d,v,p,f,h,m,q,w,F,S,k,y,b,U,x,C,j,M;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",n),t!==A._X4){e.next=11;break}return d=s()(s()({},I),{},{serviceSettings:s()(s()({},I.serviceSettings),{},{showFaqs:n.showFaqs,faqUids:n.faqUids,quickFaqUids:null==I||null===(i=I.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==I||null===(o=I.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==I||null===(l=I.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(a=I.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),N(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(t!==A.Njn){e.next=21;break}return F=s()(s()({},G),{},{serviceSettings:s()(s()({},null==G?void 0:G.serviceSettings),{},{showFaqs:n.showFaqs,faqUids:n.faqUids,robotUid:null==G||null===(p=G.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==G||null===(f=G.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==G||null===(h=G.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==G||null===(m=G.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==G||null===(q=G.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),worktimeUids:null==G||null===(w=G.serviceSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),autoReplySettings:s()({},G.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,R.sE)(F);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),D(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(t!==A.aZD){e.next=29;break}return j=s()(s()({},$),{},{serviceSettings:s()(s()({},$.serviceSettings),{},{showFaqs:n.showFaqs,faqUids:n.faqUids,robotUid:null===(k=$.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(y=$.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==$||null===(b=$.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==$||null===(U=$.serviceSettings)||void 0===U||null===(U=U.hotFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(x=$.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null===(C=$.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),agentUids:$.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=26,(0,Z.W5)(j);case 26:M=e.sent,console.log("updateWorkGroup response:",M),200===M.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(M.data)):(c.yw.destroy(),c.yw.error(M.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=l()(r()().mark((function e(n){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,M.jsx)(b.ZP,{type:"link",icon:(0,M.jsx)(m.Z,{}),onClick:function(){return window.open(A.rVq)},children:u.formatMessage({id:"setting.helpdoc"})})}),(0,M.jsx)(U.Z,{}),(0,M.jsxs)(w.A,{form:o,layout:"vertical",onFinish:z,children:[(0,M.jsx)(F.Z,{label:"是否显示常见问题",name:"showFaqs",fieldProps:{onChange:Y}}),(0,M.jsx)(w.A.Item,{children:(0,M.jsx)(b.ZP,{icon:(0,M.jsx)(q.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,M.jsx)(S.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faq"}),options:null==O||null===(n=O.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.map((function(e){return{label:T(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},20395:function(e,n,t){var i=t(26068),s=t.n(i),o=t(90228),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(96433),g=t(76469),p=t(92785),f=t(64978),h=t(65098),m=t(42452),q=t(92710),w=t(43393),F=t(99755),S=t(6817),k=t(45234),y=t(20679),b=t(42502),U=t(7283),x=t(75271),C=t(80501),j=t(11868),A=t(64453),R=t(81113),Z=t(1705),M=t(52676);n.Z=function(e){var n,t=e.type,i=w.A.useForm(),o=d()(i,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),T=(0,p.Z)().translateString,W=(0,h.u)((function(e){return e.currentOrg})),V=(0,x.useState)(),P=d()(V,2),O=P[0],E=P[1],H=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),I=H.currentRobot,N=H.setCurrentRobot,_=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),G=_.currentAgent,D=_.setCurrentAgent,L=(0,j.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=L.currentWorkgroup,X=L.setCurrentWorkgroup,Q=function(){var e=l()(r()().mark((function e(){var n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,orgUid:W.uid},e.next=4,(0,v.pf)(n);case 4:t=e.sent,console.log("getAllFaqs response:",n,t),c.yw.destroy(),200===t.code?E(t):c.yw.error(t.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){Q()}),[W]),(0,x.useEffect)((function(){var e,n;if(t===A._X4)o.setFieldsValue({showGuessFaqs:null==I||null===(e=I.serviceSettings)||void 0===e?void 0:e.showGuessFaqs,guessFaqUids:null==I||null===(n=I.serviceSettings)||void 0===n||null===(n=n.guessFaqs)||void 0===n?void 0:n.map((function(e){return e.uid}))});else if(t===A.Njn){var i,s;o.setFieldsValue({showGuessFaqs:null==G||null===(i=G.serviceSettings)||void 0===i?void 0:i.showGuessFaqs,guessFaqUids:null==G||null===(s=G.serviceSettings)||void 0===s||null===(s=s.guessFaqs)||void 0===s?void 0:s.map((function(e){return e.uid}))})}else if(t===A.aZD){var r,u;o.setFieldsValue({showGuessFaqs:null==$||null===(r=$.serviceSettings)||void 0===r?void 0:r.showGuessFaqs,guessFaqUids:null==$||null===(u=$.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[I,G,$]);var z=function(){var e=l()(r()().mark((function e(n){var i,o,l,a,d,v,p,f,h,m,q,w,F,S,k,y,b,U,x,C,j,M,T;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",n),t!==A._X4){e.next=11;break}return d=s()(s()({},I),{},{serviceSettings:s()(s()({},I.serviceSettings),{},{showGuessFaqs:n.showGuessFaqs,guessFaqUids:n.guessFaqUids,quickFaqUids:null==I||null===(i=I.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==I||null===(o=I.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==I||null===(l=I.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(a=I.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),N(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(t!==A.Njn){e.next=21;break}return F=s()(s()({},G),{},{serviceSettings:s()(s()({},null==G?void 0:G.serviceSettings),{},{showGuessFaqs:n.showGuessFaqs,guessFaqUids:n.guessFaqUids,robotUid:null==G||null===(p=G.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==G||null===(f=G.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==G||null===(h=G.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==G||null===(m=G.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==G||null===(q=G.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),worktimeUids:null==G||null===(w=G.serviceSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),autoReplySettings:s()({},G.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,R.sE)(F);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),D(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(t!==A.aZD){e.next=29;break}return M=s()(s()({},$),{},{serviceSettings:s()(s()({},$.serviceSettings),{},{showGuessFaqs:n.showGuessFaqs,guessFaqUids:n.guessFaqUids,robotUid:null===(k=$.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(y=$.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),faqUids:null==$||null===(b=$.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==$||null===(U=$.serviceSettings)||void 0===U||null===(U=U.hotFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(x=$.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null===(C=$.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),agentUids:null===(j=$.agents)||void 0===j?void 0:j.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,Z.W5)(M);case 26:T=e.sent,console.log("updateWorkGroup response:",T),200===T.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(T.data)):(c.yw.destroy(),c.yw.error(T.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=l()(r()().mark((function e(n){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqGuess handleChange",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,M.jsx)(b.ZP,{type:"link",icon:(0,M.jsx)(m.Z,{}),onClick:function(){return window.open(A.rVq)},children:u.formatMessage({id:"setting.helpdoc"})})}),(0,M.jsx)(U.Z,{}),(0,M.jsxs)(w.A,{form:o,layout:"vertical",onFinish:z,children:[(0,M.jsx)(F.Z,{label:"是否显示猜你想问",name:"showGuessFaqs",fieldProps:{onChange:Y}}),(0,M.jsx)(w.A.Item,{children:(0,M.jsx)(b.ZP,{icon:(0,M.jsx)(q.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,M.jsx)(S.Z,{name:"guessFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqGuess"}),options:null==O||null===(n=O.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.map((function(e){return{label:T(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},61575:function(e,n,t){var i=t(26068),s=t.n(i),o=t(90228),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(96433),g=t(76469),p=t(92785),f=t(64978),h=t(65098),m=t(42452),q=t(92710),w=t(43393),F=t(99755),S=t(6817),k=t(45234),y=t(20679),b=t(42502),U=t(7283),x=t(75271),C=t(80501),j=t(11868),A=t(64453),R=t(81113),Z=t(1705),M=t(52676);n.Z=function(e){var n,t=e.type,i=w.A.useForm(),o=d()(i,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),T=(0,p.Z)().translateString,W=(0,h.u)((function(e){return e.currentOrg})),V=(0,x.useState)(),P=d()(V,2),O=P[0],E=P[1],H=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),I=H.currentRobot,N=H.setCurrentRobot,_=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),G=_.currentAgent,D=_.setCurrentAgent,L=(0,j.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=L.currentWorkgroup,X=L.setCurrentWorkgroup,Q=function(){var e=l()(r()().mark((function e(){var n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,orgUid:W.uid},e.next=4,(0,v.pf)(n);case 4:t=e.sent,console.log("getAllFaqs response:",n,t),c.yw.destroy(),200===t.code?E(t):c.yw.error(t.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){Q()}),[W]),(0,x.useEffect)((function(){var e;if(t===A._X4)o.setFieldsValue({showHotFaqs:null==I?void 0:I.serviceSettings.showHotFaqs,hotFaqUids:(null==I||null===(e=I.serviceSettings)||void 0===e||null===(e=e.hotFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]});else if(t===A.Njn){var n;o.setFieldsValue({showHotFaqs:null==G?void 0:G.serviceSettings.showHotFaqs,hotFaqUids:(null==G||null===(n=G.serviceSettings)||void 0===n||null===(n=n.hotFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})))||[]})}else if(t===A.aZD){var i;o.setFieldsValue({showHotFaqs:null==$?void 0:$.serviceSettings.showHotFaqs,hotFaqUids:(null==$||null===(i=$.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})))||[]})}}),[I,G,$]);var z=function(){var e=l()(r()().mark((function e(n){var i,o,l,a,d,v,p,f,h,m,q,w,F,S,k,y,b,U,x,C,j,M;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",n),t!==A._X4){e.next=11;break}return d=s()(s()({},I),{},{serviceSettings:s()(s()({},I.serviceSettings),{},{showHotFaqs:n.showHotFaqs,hotFaqUids:n.hotFaqUids,quickFaqUids:null==I||null===(i=I.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==I||null===(o=I.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==I||null===(l=I.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(a=I.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),N(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(t!==A.Njn){e.next=21;break}return F=s()(s()({},G),{},{serviceSettings:s()(s()({},null==G?void 0:G.serviceSettings),{},{showHotFaqs:n.showHotFaqs,hotFaqUids:n.hotFaqUids,robotUid:null==G||null===(p=G.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==G||null===(f=G.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==G||null===(h=G.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null==G||null===(m=G.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==G||null===(q=G.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),worktimeUids:null==G||null===(w=G.serviceSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),autoReplySettings:s()({},G.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,R.sE)(F);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),D(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(t!==A.aZD){e.next=29;break}return j=s()(s()({},$),{},{serviceSettings:s()(s()({},$.serviceSettings),{},{showHotFaqs:n.showHotFaqs,hotFaqUids:n.hotFaqUids,robotUid:null===(k=$.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(y=$.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),faqUids:null==$||null===(b=$.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==$||null===(U=$.serviceSettings)||void 0===U||null===(U=U.guessFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(x=$.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null===(C=$.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),agentUids:$.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=26,(0,Z.W5)(j);case 26:M=e.sent,console.log("updateWorkGroup response:",M),200===M.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(M.data)):(c.yw.destroy(),c.yw.error(M.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=l()(r()().mark((function e(n){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqHots handleChange",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,M.jsx)(b.ZP,{type:"link",icon:(0,M.jsx)(m.Z,{}),onClick:function(){return window.open(A.rVq)},children:u.formatMessage({id:"setting.helpdoc"})})}),(0,M.jsx)(U.Z,{}),(0,M.jsxs)(w.A,{form:o,layout:"vertical",onFinish:z,children:[(0,M.jsx)(F.Z,{label:"是否显示热门问题",name:"showHotFaqs",fieldProps:{onChange:Y}}),(0,M.jsx)(w.A.Item,{children:(0,M.jsx)(b.ZP,{icon:(0,M.jsx)(q.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,M.jsx)(S.Z,{name:"hotFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqHot"}),options:null==O||null===(n=O.data)||void 0===n?void 0:n.content.map((function(e){return{label:T(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},61714:function(e,n,t){var i=t(26068),s=t.n(i),o=t(90228),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(96433),g=t(76469),p=t(92785),f=t(64978),h=t(65098),m=t(42452),q=t(92710),w=t(43393),F=t(99755),S=t(6817),k=t(45234),y=t(20679),b=t(42502),U=t(7283),x=t(75271),C=t(80501),j=t(11868),A=t(64453),R=t(81113),Z=t(1705),M=t(52676);n.Z=function(e){var n,t=e.type,i=w.A.useForm(),o=d()(i,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),T=(0,p.Z)().translateString,W=(0,h.u)((function(e){return e.currentOrg})),V=(0,x.useState)(),P=d()(V,2),O=P[0],E=P[1],H=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),I=H.currentRobot,N=H.setCurrentRobot,_=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),G=_.currentAgent,D=_.setCurrentAgent,L=(0,j.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=L.currentWorkgroup,X=L.setCurrentWorkgroup,Q=function(){var e=l()(r()().mark((function e(){var n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,orgUid:W.uid},e.next=4,(0,v.pf)(n);case 4:t=e.sent,console.log("getAllFaqs response:",n,t),c.yw.destroy(),200===t.code?E(t):c.yw.error(t.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){Q()}),[W]),(0,x.useEffect)((function(){var e,n;if(t===A._X4)o.setFieldsValue({showQuickFaqs:null==I||null===(e=I.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==I||null===(n=I.serviceSettings)||void 0===n||null===(n=n.quickFaqs)||void 0===n?void 0:n.map((function(e){return e.uid}))});else if(t===A.Njn){var i,s;o.setFieldsValue({showQuickFaqs:null==G||null===(i=G.serviceSettings)||void 0===i?void 0:i.showQuickFaqs,quickFaqUids:null==G||null===(s=G.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid}))})}else if(t===A.aZD){var r,u;o.setFieldsValue({showQuickFaqs:null==$||null===(r=$.serviceSettings)||void 0===r?void 0:r.showQuickFaqs,quickFaqUids:null==$||null===(u=$.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[I,G,$]);var z=function(){var e=l()(r()().mark((function e(n){var i,o,l,a,d,v,p,f,h,m,q,w,F,S,k,y,b,U,x,C,j,M;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",n),t!==A._X4){e.next=11;break}return d=s()(s()({},I),{},{serviceSettings:s()(s()({},I.serviceSettings),{},{showQuickFaqs:n.showQuickFaqs,quickFaqUids:n.quickFaqUids,faqUids:null==I||null===(i=I.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==I||null===(o=I.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==I||null===(l=I.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(a=I.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),N(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(t!==A.Njn){e.next=21;break}return F=s()(s()({},G),{},{serviceSettings:s()(s()({},null==G?void 0:G.serviceSettings),{},{showQuickFaqs:n.showQuickFaqs,quickFaqUids:n.quickFaqUids,robotUid:null==G||null===(p=G.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,faqUids:null==G||null===(f=G.serviceSettings)||void 0===f||null===(f=f.faqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==G||null===(h=G.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==G||null===(m=G.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),shortcutFaqUids:null==G||null===(q=G.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),worktimeUids:null==G||null===(w=G.serviceSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),autoReplySettings:s()({},G.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,R.sE)(F);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),D(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(t!==A.aZD){e.next=29;break}return j=s()(s()({},$),{},{serviceSettings:s()(s()({},$.serviceSettings),{},{showQuickFaqs:n.showQuickFaqs,quickFaqUids:n.quickFaqUids,robotUid:null===(k=$.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,faqUids:null===(y=$.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==$||null===(b=$.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==$||null===(U=$.serviceSettings)||void 0===U||null===(U=U.hotFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(x=$.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null===(C=$.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),agentUids:$.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=26,(0,Z.W5)(j);case 26:M=e.sent,console.log("updateWorkGroup response:",M),200===M.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(M.data)):(c.yw.destroy(),c.yw.error(M.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=l()(r()().mark((function e(n){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,M.jsx)(b.ZP,{type:"link",icon:(0,M.jsx)(m.Z,{}),onClick:function(){return window.open(A.rVq)},children:u.formatMessage({id:"setting.helpdoc"})})}),(0,M.jsx)(U.Z,{}),(0,M.jsxs)(w.A,{form:o,layout:"vertical",onFinish:z,children:[(0,M.jsx)(F.Z,{label:"是否显示快捷按钮",name:"showQuickFaqs",fieldProps:{onChange:Y}}),(0,M.jsx)(w.A.Item,{children:(0,M.jsx)(b.ZP,{icon:(0,M.jsx)(q.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,M.jsx)(S.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.quickbutton"}),options:null==O||null===(n=O.data)||void 0===n?void 0:n.content.map((function(e){return{label:T(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},3013:function(e,n,t){var i=t(26068),s=t.n(i),o=t(90228),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(96433),g=t(76469),p=t(92785),f=t(64978),h=t(65098),m=t(42452),q=t(92710),w=t(43393),F=t(99755),S=t(6817),k=t(45234),y=t(20679),b=t(42502),U=t(7283),x=t(75271),C=t(80501),j=t(11868),A=t(64453),R=t(81113),Z=t(1705),M=t(52676);n.Z=function(e){var n,t=e.type,i=w.A.useForm(),o=d()(i,1)[0],u=(0,k.useIntl)(),a=(0,k.useNavigate)(),T=(0,p.Z)().translateString,W=(0,h.u)((function(e){return e.currentOrg})),V=(0,x.useState)(),P=d()(V,2),O=P[0],E=P[1],H=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),I=H.currentRobot,N=H.setCurrentRobot,_=(0,C.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),G=_.currentAgent,D=_.setCurrentAgent,L=(0,j.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),$=L.currentWorkgroup,X=L.setCurrentWorkgroup,Q=function(){var e=l()(r()().mark((function e(){var n,t;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,orgUid:W.uid},e.next=4,(0,v.pf)(n);case 4:t=e.sent,console.log("getAllFaqs response:",n,t),c.yw.destroy(),200===t.code?E(t):c.yw.error(t.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){Q()}),[W]),(0,x.useEffect)((function(){var e,n;if(t===A._X4)o.setFieldsValue({showshortcutFaqs:null==I||null===(e=I.serviceSettings)||void 0===e?void 0:e.showshortcutFaqs,shortcutFaqUids:(null==I||null===(n=I.serviceSettings)||void 0===n||null===(n=n.shortcutFaqs)||void 0===n?void 0:n.map((function(e){return e.uid})))||[]});else if(t===A.Njn){var i,s;o.setFieldsValue({showshortcutFaqs:null==G||null===(i=G.serviceSettings)||void 0===i?void 0:i.showshortcutFaqs,shortcutFaqUids:(null==G||null===(s=G.serviceSettings)||void 0===s||null===(s=s.shortcutFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})))||[]})}else if(t===A.aZD){var r,u;o.setFieldsValue({showshortcutFaqs:null==$||null===(r=$.serviceSettings)||void 0===r?void 0:r.showshortcutFaqs,shortcutFaqUids:(null==$||null===(u=$.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})))||[]})}}),[I,G,$]);var z=function(){var e=l()(r()().mark((function e(n){var i,o,l,a,d,v,p,f,h,m,q,w,F,S,k,y,b,U,x,C,j,M;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",n,t),t!==A._X4){e.next=11;break}return d=s()(s()({},I),{},{serviceSettings:s()(s()({},I.serviceSettings),{},{showshortcutFaqs:n.showshortcutFaqs,shortcutFaqUids:n.shortcutFaqUids,quickFaqUids:null==I||null===(i=I.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==I||null===(o=I.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==I||null===(l=I.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==I||null===(a=I.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),N(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(t!==A.Njn){e.next=21;break}return F=s()(s()({},G),{},{serviceSettings:s()(s()({},null==G?void 0:G.serviceSettings),{},{showshortcutFaqs:n.showshortcutFaqs,shortcutFaqUids:n.shortcutFaqUids,robotUid:null==G||null===(p=G.serviceSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid,quickFaqUids:null==G||null===(f=G.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==G||null===(h=G.serviceSettings)||void 0===h||null===(h=h.guessFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),hotFaqUids:null==G||null===(m=G.serviceSettings)||void 0===m||null===(m=m.hotFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),faqUids:null==G||null===(q=G.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),worktimeUids:null==G||null===(w=G.serviceSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),autoReplySettings:s()({},G.autoReplySettings)}),console.log("agentObject:",F),e.next=16,(0,R.sE)(F);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),D(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(t!==A.aZD){e.next=29;break}return j=s()(s()({},$),{},{serviceSettings:s()(s()({},$.serviceSettings),{},{showshortcutFaqs:n.showshortcutFaqs,shortcutFaqUids:n.shortcutFaqUids,robotUid:null===(k=$.serviceSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid,quickFaqUids:null===(y=$.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),faqUids:null==$||null===(b=$.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==$||null===(U=$.serviceSettings)||void 0===U||null===(U=U.hotFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),guessFaqUids:null==$||null===(x=$.serviceSettings)||void 0===x||null===(x=x.guessFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),worktimeUids:null===(C=$.serviceSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),agentUids:$.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=26,(0,Z.W5)(j);case 26:M=e.sent,console.log("updateWorkGroup response:",M),200===M.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),X(M.data)):(c.yw.destroy(),c.yw.error(M.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=l()(r()().mark((function e(n){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqShortcut handleChange",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,M.jsx)(b.ZP,{type:"link",icon:(0,M.jsx)(m.Z,{}),onClick:function(){return window.open(A.rVq)},children:u.formatMessage({id:"setting.helpdoc"})})}),(0,M.jsx)(U.Z,{}),(0,M.jsxs)(w.A,{form:o,layout:"vertical",onFinish:z,children:[(0,M.jsx)(F.Z,{label:"是否显示快捷路径",name:"showshortcutFaqs",fieldProps:{onChange:Y}}),(0,M.jsx)(w.A.Item,{children:(0,M.jsx)(b.ZP,{icon:(0,M.jsx)(q.Z,{}),onClick:function(){a("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,M.jsx)(S.Z,{name:"shortcutFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqShortcut"}),options:null==O||null===(n=O.data)||void 0===n?void 0:n.content.map((function(e){return{label:T(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,M.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},95297:function(e,n,t){var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(81113),g=t(76469),p=t(1705),f=t(80501),h=t(64978),m=t(11868),q=t(64453),w=t(43393),F=t(99755),S=t(45234),k=t(75271),y=t(52676);n.Z=function(e){var n=e.type,t=(0,S.useIntl)(),i=w.A.useForm(),o=d()(i,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,U=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),x=U.currentAgent,C=U.setCurrentAgent,j=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=j.currentWorkgroup,R=j.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(n===q._X4)o.setFieldsValue({showHistory:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showHistory});else if(n===q.Njn){var t;o.setFieldsValue({showHistory:null==x||null===(t=x.serviceSettings)||void 0===t?void 0:t.showHistory})}else if(n===q.aZD){var i;o.setFieldsValue({showHistory:null==A||null===(i=A.serviceSettings)||void 0===i?void 0:i.showHistory})}}),[a,x,A]);var Z=function(){var e=l()(s()().mark((function e(i){var o,u,l,d,f,h,m,w,F,S,k,y,U,j,Z,M,T,W,V,P,O,E,H,I,N;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleHistorySubmit:",i),console.log("onFinish",i),n!==q._X4){e.next=12;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showHistory:i.showHistory,faqUids:null==x||null===(o=x.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(d=a.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=7,(0,g.$l)(h);case 7:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),b(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=30;break;case 12:if(n!==q.Njn){e.next=22;break}return Z=r()(r()({},x),{},{serviceSettings:r()(r()({},null==x?void 0:x.serviceSettings),{},{showHistory:i.showHistory,faqUids:null==x||null===(w=x.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),robotUid:null==x||null===(F=x.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==x||null===(S=x.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==x||null===(k=x.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==x||null===(y=x.serviceSettings)||void 0===y||null===(y=y.hotFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(U=x.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),worktimeUids:null==x||null===(j=x.serviceSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),autoReplySettings:r()({},x.autoReplySettings)}),console.log("agentObject:",Z),e.next=17,(0,v.sE)(Z);case 17:M=e.sent,console.log("updateAgent response:",M),200===M.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),C(M.data)):(c.yw.destroy(),c.yw.error(M.message)),e.next=30;break;case 22:if(n!==q.aZD){e.next=30;break}return I=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showHistory:i.showHistory,faqUids:null==x||null===(T=x.serviceSettings)||void 0===T||null===(T=T.faqs)||void 0===T?void 0:T.map((function(e){return e.uid})),robotUid:null===(W=A.serviceSettings)||void 0===W||null===(W=W.robot)||void 0===W?void 0:W.uid,quickFaqUids:null===(V=A.serviceSettings)||void 0===V||null===(V=V.quickFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.hotFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(E=A.serviceSettings)||void 0===E||null===(E=E.shortcutFaqs)||void 0===E?void 0:E.map((function(e){return e.uid})),worktimeUids:null===(H=A.serviceSettings)||void 0===H||null===(H=H.worktimes)||void 0===H?void 0:H.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",I),e.next=27,(0,p.W5)(I);case 27:N=e.sent,console.log("updateWorkGroup response:",N),200===N.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),R(N.data)):(c.yw.destroy(),c.yw.error(N.message));case 30:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsx)(w.A,{form:o,onFinish:Z,children:(0,y.jsx)(F.Z,{width:"md",name:"showHistory",label:t.formatMessage({id:"showHistory",defaultMessage:"Show History"})})})})}},27028:function(e,n,t){var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(81113),g=t(76469),p=t(1705),f=t(80501),h=t(64978),m=t(11868),q=t(64453),w=t(43393),F=t(99755),S=t(45234),k=t(75271),y=t(52676);n.Z=function(e){var n=e.type,t=(0,S.useIntl)(),i=w.A.useForm(),o=d()(i,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,U=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),x=U.currentAgent,C=U.setCurrentAgent,j=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=j.currentWorkgroup,R=j.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(n===q._X4)o.setFieldsValue({showInputAssociation:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showInputAssociation});else if(n===q.Njn){var t;o.setFieldsValue({showInputAssociation:null==x||null===(t=x.serviceSettings)||void 0===t?void 0:t.showInputAssociation})}else if(n===q.aZD){var i;o.setFieldsValue({showInputAssociation:null==A||null===(i=A.serviceSettings)||void 0===i?void 0:i.showInputAssociation})}}),[a,x,A]);var Z=function(){var e=l()(s()().mark((function e(i){var o,u,l,d,f,h,m,w,F,S,k,y,U,j,Z,M,T,W,V,P,O,E,H,I,N;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleInputAssociationSubmit:",i),n!==q._X4){e.next=11;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==x||null===(o=x.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(d=a.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),b(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(n!==q.Njn){e.next=21;break}return Z=r()(r()({},x),{},{serviceSettings:r()(r()({},null==x?void 0:x.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==x||null===(w=x.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),robotUid:null==x||null===(F=x.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==x||null===(S=x.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==x||null===(k=x.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==x||null===(y=x.serviceSettings)||void 0===y||null===(y=y.hotFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(U=x.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),worktimeUids:null==x||null===(j=x.serviceSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),autoReplySettings:r()({},x.autoReplySettings)}),console.log("agentObject:",Z),e.next=16,(0,v.sE)(Z);case 16:M=e.sent,console.log("updateAgent response:",M),200===M.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),C(M.data)):(c.yw.destroy(),c.yw.error(M.message)),e.next=29;break;case 21:if(n!==q.aZD){e.next=29;break}return I=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==x||null===(T=x.serviceSettings)||void 0===T||null===(T=T.faqs)||void 0===T?void 0:T.map((function(e){return e.uid})),robotUid:null===(W=A.serviceSettings)||void 0===W||null===(W=W.robot)||void 0===W?void 0:W.uid,quickFaqUids:null===(V=A.serviceSettings)||void 0===V||null===(V=V.quickFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.hotFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(E=A.serviceSettings)||void 0===E||null===(E=E.shortcutFaqs)||void 0===E?void 0:E.map((function(e){return e.uid})),worktimeUids:null===(H=A.serviceSettings)||void 0===H||null===(H=H.worktimes)||void 0===H?void 0:H.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",I),e.next=26,(0,p.W5)(I);case 26:N=e.sent,console.log("updateWorkGroup response:",N),200===N.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),R(N.data)):(c.yw.destroy(),c.yw.error(N.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsx)(w.A,{form:o,onFinish:Z,children:(0,y.jsx)(F.Z,{width:"md",name:"showInputAssociation",label:t.formatMessage({id:"showInputAssociation",defaultMessage:"Show Input Association"})})})})}},67585:function(e,n,t){var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(81113),g=t(76469),p=t(1705),f=t(80501),h=t(64978),m=t(11868),q=t(64453),w=t(43393),F=t(99755),S=t(45234),k=t(75271),y=t(52676);n.Z=function(e){var n=e.type,t=(0,S.useIntl)(),i=w.A.useForm(),o=d()(i,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),a=u.currentRobot,b=u.setCurrentRobot,U=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),x=U.currentAgent,C=U.setCurrentAgent,j=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),A=j.currentWorkgroup,R=j.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(n===q._X4)o.setFieldsValue({showPreForm:null==a||null===(e=a.serviceSettings)||void 0===e?void 0:e.showPreForm});else if(n===q.Njn){var t;o.setFieldsValue({showPreForm:null==x||null===(t=x.serviceSettings)||void 0===t?void 0:t.showPreForm})}else if(n===q.aZD){var i;o.setFieldsValue({showPreForm:null==A||null===(i=A.serviceSettings)||void 0===i?void 0:i.showPreForm})}}),[a,x,A]);var Z=function(){var e=l()(s()().mark((function e(i){var o,u,l,d,f,h,m,w,F,S,k,y,U,j,Z,M,T,W,V,P,O,E,H,I,N;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),n!==q._X4){e.next=11;break}return h=r()(r()({},a),{},{serviceSettings:r()(r()({},a.serviceSettings),{},{showPreForm:i.showPreForm,faqUids:null==x||null===(o=x.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==a||null===(u=a.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==a||null===(l=a.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==a||null===(d=a.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==a||null===(f=a.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),b(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(n!==q.Njn){e.next=21;break}return Z=r()(r()({},x),{},{serviceSettings:r()(r()({},null==x?void 0:x.serviceSettings),{},{showPreForm:i.showPreForm,faqUids:null==x||null===(w=x.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),robotUid:null==x||null===(F=x.serviceSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid,quickFaqUids:null==x||null===(S=x.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==x||null===(k=x.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),hotFaqUids:null==x||null===(y=x.serviceSettings)||void 0===y||null===(y=y.hotFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(U=x.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),worktimeUids:null==x||null===(j=x.serviceSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),autoReplySettings:r()({},x.autoReplySettings)}),console.log("agentObject:",Z),e.next=16,(0,v.sE)(Z);case 16:M=e.sent,console.log("updateAgent response:",M),200===M.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),C(M.data)):(c.yw.destroy(),c.yw.error(M.message)),e.next=29;break;case 21:if(n!==q.aZD){e.next=29;break}return I=r()(r()({},A),{},{serviceSettings:r()(r()({},A.serviceSettings),{},{showPreForm:i.showPreForm,faqUids:null==x||null===(T=x.serviceSettings)||void 0===T||null===(T=T.faqs)||void 0===T?void 0:T.map((function(e){return e.uid})),robotUid:null===(W=A.serviceSettings)||void 0===W||null===(W=W.robot)||void 0===W?void 0:W.uid,quickFaqUids:null===(V=A.serviceSettings)||void 0===V||null===(V=V.quickFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),guessFaqUids:null==A||null===(P=A.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==A||null===(O=A.serviceSettings)||void 0===O||null===(O=O.hotFaqs)||void 0===O?void 0:O.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(E=A.serviceSettings)||void 0===E||null===(E=E.shortcutFaqs)||void 0===E?void 0:E.map((function(e){return e.uid})),worktimeUids:null===(H=A.serviceSettings)||void 0===H||null===(H=H.worktimes)||void 0===H?void 0:H.map((function(e){return e.uid}))}),agentUids:A.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",I),e.next=26,(0,p.W5)(I);case 26:N=e.sent,console.log("updateWorkGroup response:",N),200===N.code?(c.yw.destroy(),c.yw.success(t.formatMessage({id:"update.success"})),R(N.data)):(c.yw.destroy(),c.yw.error(N.message));case 29:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsx)(w.A,{form:o,onFinish:Z,children:(0,y.jsx)(F.Z,{width:"md",name:"showPreForm",label:t.formatMessage({id:"showPreForm",defaultMessage:"Show PreForm"})})})})}},32998:function(e,n,t){var i=t(90228),s=t.n(i),o=t(26068),r=t.n(o),u=t(87999),l=t.n(u),a=t(48305),d=t.n(a),c=t(37240),v=t(81113),g=t(76469),p=t(1705),f=t(92785),h=t(80501),m=t(64978),q=t(11868),w=t(64453),F=t(43393),S=t(43591),k=t(65012),y=t(75149),b=t(45234),U=t(75271),x=t(52676);n.Z=function(e){var n=e.type,t=F.A.useForm(),i=d()(t,1)[0],o=(0,b.useIntl)(),u=(0,f.Z)().translateString,a=(0,U.useState)(!1),C=d()(a,2),j=C[0],A=C[1],R=(0,m.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Z=R.currentRobot,M=R.setCurrentRobot,T=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),W=T.currentAgent,V=T.setCurrentAgent,P=(0,q.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),O=P.currentWorkgroup,E=P.setCurrentWorkgroup;(0,U.useEffect)((function(){var e,t,s,o,r,l;if(n===w._X4)i.setFieldValue("welcomeTip",u(null==Z||null===(e=Z.serviceSettings)||void 0===e?void 0:e.welcomeTip)),i.setFieldValue("topTip",u(null==Z||null===(t=Z.serviceSettings)||void 0===t?void 0:t.topTip)),i.setFieldValue("showTopTip",null==Z||null===(s=Z.serviceSettings)||void 0===s?void 0:s.showTopTip),i.setFieldValue("leavemsgTip",u(null==Z||null===(o=Z.serviceSettings)||void 0===o?void 0:o.leavemsgTip)),i.setFieldValue("autoCloseMin",null==Z||null===(r=Z.serviceSettings)||void 0===r?void 0:r.autoCloseMin),i.setFieldValue("showLogo",null==Z||null===(l=Z.serviceSettings)||void 0===l?void 0:l.showLogo);else if(n===w.Njn){var a,d,c,v,g,p;i.setFieldValue("welcomeTip",u(null==W||null===(a=W.serviceSettings)||void 0===a?void 0:a.welcomeTip)),i.setFieldValue("topTip",u(null==W||null===(d=W.serviceSettings)||void 0===d?void 0:d.topTip)),i.setFieldValue("showTopTip",null==W||null===(c=W.serviceSettings)||void 0===c?void 0:c.showTopTip),i.setFieldValue("leavemsgTip",u(null==W||null===(v=W.serviceSettings)||void 0===v?void 0:v.leavemsgTip)),i.setFieldValue("autoCloseMin",null==W||null===(g=W.serviceSettings)||void 0===g?void 0:g.autoCloseMin),i.setFieldValue("showLogo",null==W||null===(p=W.serviceSettings)||void 0===p?void 0:p.showLogo),i.setFieldValue("maxThreadCount",null==W?void 0:W.maxThreadCount)}else if(n===w.aZD){var f,h,m,q,F,S;i.setFieldValue("welcomeTip",u(null==O||null===(f=O.serviceSettings)||void 0===f?void 0:f.welcomeTip)),i.setFieldValue("topTip",u(null==O||null===(h=O.serviceSettings)||void 0===h?void 0:h.topTip)),i.setFieldValue("showTopTip",null==O||null===(m=O.serviceSettings)||void 0===m?void 0:m.showTopTip),i.setFieldValue("leavemsgTip",u(null==O||null===(q=O.serviceSettings)||void 0===q?void 0:q.leavemsgTip)),i.setFieldValue("autoCloseMin",null==O||null===(F=O.serviceSettings)||void 0===F?void 0:F.autoCloseMin),i.setFieldValue("showLogo",null==O||null===(S=O.serviceSettings)||void 0===S?void 0:S.showLogo)}}),[Z,W,O]),(0,U.useEffect)((function(){var e;A(null==W||null===(e=W.serviceSettings)||void 0===e?void 0:e.showTopTip)}),[W]);var H=function(){var e=l()(s()().mark((function e(t){var i,u,l,a,d,f,h,m,q,F,S,k,y,b,U,x,C,A,R,T,P,H,I,N,_;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",t," showTopTip:",j),c.yw.loading(o.formatMessage({id:"updating"})),n!==w._X4){e.next=12;break}return f=r()(r()({},Z),{},{serviceSettings:r()(r()({},Z.serviceSettings),{},{topTip:(null==t?void 0:t.topTip)||"",showTopTip:j,welcomeTip:(null==t?void 0:t.welcomeTip)||"",leavemsgTip:(null==t?void 0:t.leavemsgTip)||"",autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,quickFaqUids:null===(i=W.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==Z||null===(u=Z.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(l=Z.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(a=Z.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(d=Z.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,g.$l)(f);case 7:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(o.formatMessage({id:"update.success"})),M(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=30;break;case 12:if(n!==w.Njn){e.next=22;break}return U=r()(r()({},W),{},{serviceSettings:r()(r()({},W.serviceSettings),{},{topTip:(null==t?void 0:t.topTip)||"",showTopTip:j,welcomeTip:(null==t?void 0:t.welcomeTip)||"",leavemsgTip:(null==t?void 0:t.leavemsgTip)||"",autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,robotUid:null===(m=W.serviceSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid,quickFaqUids:null===(q=W.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),faqUids:null===(F=W.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==W||null===(S=W.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==W||null===(k=W.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(y=W.serviceSettings)||void 0===y||null===(y=y.shortcutFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),worktimeUids:null===(b=W.serviceSettings)||void 0===b||null===(b=b.worktimes)||void 0===b?void 0:b.map((function(e){return e.uid}))}),autoReplySettings:r()({},W.autoReplySettings),maxThreadCount:(null==t?void 0:t.maxThreadCount)||10}),console.log("agentObject:",U),e.next=17,(0,v.sE)(U);case 17:x=e.sent,console.log("updateAgent response:",x),200===x.code?(c.yw.destroy(),c.yw.success(o.formatMessage({id:"update.success"})),V(x.data)):(c.yw.destroy(),c.yw.error(x.message)),e.next=30;break;case 22:if(n!==w.aZD){e.next=30;break}return N=r()(r()({},O),{},{serviceSettings:r()(r()({},O.serviceSettings),{},{topTip:(null==t?void 0:t.topTip)||"",showTopTip:j,welcomeTip:(null==t?void 0:t.welcomeTip)||"",leavemsgTip:(null==t?void 0:t.leavemsgTip)||"",autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,robotUid:null===(C=O.serviceSettings)||void 0===C||null===(C=C.robot)||void 0===C?void 0:C.uid,quickFaqUids:null===(A=O.serviceSettings)||void 0===A||null===(A=A.quickFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),faqUids:null===(R=O.serviceSettings)||void 0===R||null===(R=R.faqs)||void 0===R?void 0:R.map((function(e){return e.uid})),guessFaqUids:null==O||null===(T=O.serviceSettings)||void 0===T||null===(T=T.guessFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),hotFaqUids:null==O||null===(P=O.serviceSettings)||void 0===P||null===(P=P.hotFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),shortcutFaqUids:null==O||null===(H=O.serviceSettings)||void 0===H||null===(H=H.shortcutFaqs)||void 0===H?void 0:H.map((function(e){return e.uid})),worktimeUids:null===(I=O.serviceSettings)||void 0===I||null===(I=I.worktimes)||void 0===I?void 0:I.map((function(e){return e.uid}))}),agentUids:O.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",N),e.next=27,(0,p.W5)(N);case 27:_=e.sent,console.log("updateWorkGroup response:",_),200===_.code?(c.yw.destroy(),c.yw.success(o.formatMessage({id:"update.success"})),E(_.data)):(c.yw.destroy(),c.yw.error(_.message));case 30:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsxs)(F.A,{form:i,onFinish:H,style:{marginLeft:"100px"},children:[(0,x.jsx)(S.Z,{name:"showTopTip",width:"md",label:"显示置顶语/公告",fieldProps:{onChange:function(e){var n;console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==W||null===(n=W.serviceSettings)||void 0===n?void 0:n.showTopTip)),A(e.target.checked)}}}),j&&(0,x.jsx)(k.Z,{width:"md",name:"topTip",label:"置顶语"}),(0,x.jsx)(k.Z,{width:"md",name:"welcomeTip",label:"欢迎语"}),n!=w._X4&&(0,x.jsx)(k.Z,{width:"md",name:"leavemsgTip",label:"离线留言提示"}),(0,x.jsx)(y.Z,{width:"md",name:"autoCloseMin",label:"无新消息会话自动关闭时长(单位：分钟)",min:1}),n===w.Njn&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{children:"1. 同时最大接待数量，超出数量默认进入排队队列"}),(0,x.jsx)("p",{children:"2. 0为所有访客默认进入排队队列，需要客服手动接入"}),(0,x.jsx)("p",{children:"3. 当接待数量小于最大接待数量时，会话自动接入，优先接入排队队列中会话"}),(0,x.jsx)(y.Z,{width:"md",name:"maxThreadCount",label:"同时最大接待数量",min:0})]}),(0,x.jsx)(S.Z,{name:"showLogo",width:"md",label:"显示Logo",tooltip:"只有付费会员可以去掉Logo",fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}},77705:function(e,n,t){t.d(n,{G:function(){return v}});var i=t(26068),s=t.n(i),o=(t(75271),t(30224)),r=t(64453),u=t(16483),l=t.n(u),a=t(37240),d=t(49437),c=t(52676),v=function(e){var n=e.children,t=e.onSuccess,i=e.onError,u={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,d.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:u,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var n=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;u.file=e,u.file_name=n,u.file_type=e.type,console.log("beforeUpload",u)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var n=e.file.response.data;t(n),a.yw.success("".concat(e.file.name," 上传成功"))}else i(e.file),a.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(a.yw.error("".concat(e.file.name," 上传失败")),i(e.file))}};return(0,c.jsx)(o.Z,s()(s()({},v),{},{children:n}))}}}]);