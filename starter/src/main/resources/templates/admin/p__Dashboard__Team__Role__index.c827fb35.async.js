"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4325],{77154:function(e,n,r){var t=r(39825);n.Z=function(){var e=(0,t.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},31317:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var t=r(15009),o=r.n(t),u=r(99289),i=r.n(u),l=r(97857),a=r.n(l),c=r(77154),s=r(85615),f=r(73445),d=r(782),h=r(18753),p=(0,f.Ue)()((0,d.mW)((0,d.tJ)((0,h.n)((function(e,n){return{roles:[],currentRole:{label:"",key:""},setCurrentRole:function(r){var t=n().roles.find((function(e){return e.key===r}));e((function(e){e.currentRole=t}))},addRole:function(r){if(!n().roles.find((function(e){return e.key===r.uid}))){var t={label:r.displayName,key:r.uid};e((function(e){e.roles.push(t)}))}},deleteRoleCache:function(){return e({},!0)}}})),{name:s.uaR}))),y=r(21612),g=r(50136),b=r(67294),k=r(11941),m=r(85893),v=function(e){console.log(e)},x=[{key:"authority",label:"权限",children:"Content of Tab Pane 1"},{key:"member",label:"成员",children:"Content of Tab Pane 2"}],R=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(k.Z,{defaultActiveKey:"1",items:x,onChange:v})})},C=r(86745);function S(e){return w.apply(this,arguments)}function w(){return(w=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/v1/role/query/org",{method:"GET",params:a()(a()({},n),{},{client:s.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=r(87676),j=r(80049),q=y.Z.Sider,M=y.Z.Content,T=function(){var e=(0,C.useIntl)(),n=(0,c.Z)().leftSiderStyle,r=(0,Z.u)((function(e){return e.currentOrg})),t=p((function(e){return{roles:e.roles,setCurrentRole:e.setCurrentRole,addRole:e.addRole}})),u=t.roles,l=t.setCurrentRole,s=t.addRole,f=u.map((function(n){var r=e.formatMessage({id:n.label,defaultMessage:n.label});return a()(a()({},n),{},{label:r})})),d=function(){var e=i()(o()().mark((function e(){var n,t,u,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.yw.loading("正在获取角色列表..."),n={pageNumber:0,pageSize:20,orgUid:r.uid},e.next=4,S(n);case 4:if(t=e.sent,console.log("queryRoles response ",t),200===t.code)for(j.yw.destroy(),u=0;u<t.data.content.length;u++)i=t.data.content[u],s(i);else j.yw.destroy(),j.yw.error(t.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,b.useEffect)((function(){d()}),[]);return(0,m.jsxs)(y.Z,{children:[(0,m.jsx)(q,{style:n,children:(0,m.jsx)(g.Z,{mode:"inline",onClick:function(e){console.log("menu click ",e.key),l(e.key)},items:f})}),(0,m.jsx)(y.Z,{children:(0,m.jsx)(M,{children:(0,m.jsx)(R,{})})})]})}}}]);