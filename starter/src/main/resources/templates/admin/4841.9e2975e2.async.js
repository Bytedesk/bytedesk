"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4841],{11475:function(J,A,e){e.d(A,{Z:function(){return E}});var y=e(1413),a=e(67294),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},i=D,M=e(89099),_=function(p,W){return a.createElement(M.Z,(0,y.Z)((0,y.Z)({},p),{},{ref:W,icon:i}))},h=a.forwardRef(_),E=h},5966:function(J,A,e){var y=e(97685),a=e(1413),D=e(91),i=e(21770),M=e(8232),_=e(55241),h=e(97435),E=e(67294),g=e(47897),p=e(85893),W=["fieldProps","proFieldProps"],d=["fieldProps","proFieldProps"],O="text",v=function(c){var s=c.fieldProps,u=c.proFieldProps,f=(0,D.Z)(c,W);return(0,p.jsx)(g.Z,(0,a.Z)({valueType:O,fieldProps:s,filedConfig:{valueType:O},proFieldProps:u},f))},x=function(c){var s=(0,i.Z)(c.open||!1,{value:c.open,onChange:c.onOpenChange}),u=(0,y.Z)(s,2),f=u[0],b=u[1];return(0,p.jsx)(M.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Y){var w,n=Y.getFieldValue(c.name||[]);return(0,p.jsx)(_.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(t){return t&&t.parentNode?t.parentNode:t},onOpenChange:b,content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[(w=c.statusRender)===null||w===void 0?void 0:w.call(c,n),c.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:c.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},c.popoverProps),{},{open:f,children:c.children}))}})},R=function(c){var s=c.fieldProps,u=c.proFieldProps,f=(0,D.Z)(c,d),b=(0,E.useState)(!1),l=(0,y.Z)(b,2),Y=l[0],w=l[1];return s!=null&&s.statusRender&&f.name?(0,p.jsx)(x,{name:f.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:Y,onOpenChange:w,children:(0,p.jsx)("div",{children:(0,p.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,h.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(r){var t;s==null||(t=s.onBlur)===null||t===void 0||t.call(s,r),w(!1)},onClick:function(r){var t;s==null||(t=s.onClick)===null||t===void 0||t.call(s,r),w(!0)}}),proFieldProps:u,filedConfig:{valueType:O}},f))})}):(0,p.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:s,proFieldProps:u,filedConfig:{valueType:O}},f))},U=v;U.Password=R,U.displayName="ProFormComponent",A.Z=U},30300:function(J,A,e){e.d(A,{FU:function(){return g},O7:function(){return c},k4:function(){return W},yr:function(){return O}});var y=e(15009),a=e.n(y),D=e(97857),i=e.n(D),M=e(99289),_=e.n(M),h=e(85615),E=e(86745);function g(u){return p.apply(this,arguments)}function p(){return p=_()(a()().mark(function u(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.request)("/api/v1/category/query/org",{method:"GET",params:i()(i()({},f),{},{client:h.bV})}));case 1:case"end":return l.stop()}},u)})),p.apply(this,arguments)}function W(u){return d.apply(this,arguments)}function d(){return d=_()(a()().mark(function u(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.request)("/api/v1/category/create",{method:"POST",data:i()(i()({},f),{},{client:h.bV})}));case 1:case"end":return l.stop()}},u)})),d.apply(this,arguments)}function O(u){return v.apply(this,arguments)}function v(){return v=_()(a()().mark(function u(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.request)("/api/v1/category/update",{method:"POST",data:i()(i()({},f),{},{client:h.bV})}));case 1:case"end":return l.stop()}},u)})),v.apply(this,arguments)}function x(u){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function u(f){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/v1/category/delete",{method:"POST",data:_objectSpread(_objectSpread({},f),{},{client:HTTP_CLIENT})}));case 1:case"end":return l.stop()}},u)})),R.apply(this,arguments)}function U(u){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function u(f){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/v1/category/all",{method:"GET",params:_objectSpread(_objectSpread({},f),{},{client:HTTP_CLIENT})}));case 1:case"end":return l.stop()}},u)})),m.apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return s=_()(a()().mark(function u(){return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,E.request)("/visitor/api/v1/category/query",{method:"GET",params:{client:h.bV}}));case 1:case"end":return b.stop()}},u)})),s.apply(this,arguments)}},52670:function(J,A,e){e.d(A,{Z:function(){return w}});var y=e(15009),a=e.n(y),D=e(99289),i=e.n(D),M=e(5574),_=e.n(M),h=e(11475),E=e(85576),g=e(86250),p=e(14726),W=e(66593),d=e(80049),O=e(87676),v=e(34994),x=e(5966),R=e(8232),U=e(67294),m=e(85893),c=function(r){var t=r.open,o=r.type,C=r.isEdit,$=r.category,K=r.onCancel,G=r.onSubmit,q=R.Z.useForm(),N=_()(q,1),L=N[0],z=(0,O.u)(function(H){return H.orgCurrent});(0,U.useEffect)(function(){C?L.setFieldsValue({name:$==null?void 0:$.name}):L.resetFields()},[t]);var I=function(){L.validateFields().then(function(){var X=i()(a()().mark(function Z(k){var V;return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:console.log("handleSaveDep:",k),V={uid:C?$==null?void 0:$.uid:"",name:k.name,type:o,orgUid:z==null?void 0:z.uid},G(V);case 3:case"end":return Q.stop()}},Z)}));return function(Z){return X.apply(this,arguments)}}()).catch(function(X){console.log("Failed:",X),d.yw.error("\u521B\u5EFA\u5206\u7C7B\u5931\u8D25")})};return(0,m.jsx)("div",{children:(0,m.jsx)(E.Z,{title:"\u65B0\u5EFA\u5206\u7C7B",open:t,onOk:I,onCancel:K,children:(0,m.jsx)(v.A,{form:L,name:"categoryForm",initialValues:{name:""},submitter:{render:function(){return null}},children:(0,m.jsx)(x.Z,{label:"\u5206\u7C7B\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0!"}]})})})})},s=c,u=e(30300),f=e(89102),b=e(73803),l=e(86745),Y=function(r){var t=r.type,o=(0,U.useState)(!1),C=_()(o,2),$=C[0],K=C[1],G=(0,l.useIntl)(),q=(0,U.useState)(!0),N=_()(q,2),L=N[0],z=N[1],I=(0,U.useState)(),H=_()(I,2),X=H[0],Z=H[1],k=(0,O.u)(function(P){return P.orgCurrent}),V=(0,f.v)(function(P){return{categoryTreeOptions:P.categoryTreeOptions,setCategoryResult:P.setCategoryResult,currentCategory:P.currentCategory,setCurrentCategoryUid:P.setCurrentCategoryUid}}),ne=V.categoryTreeOptions,Q=V.setCategoryResult,S=V.currentCategory,ee=V.setCurrentCategoryUid,oe=E.Z.useModal(),re=_()(oe,2),se=re[0],le=re[1],ie=(0,b.Z)(),ue=ie.translateString,de=function(T){se.confirm({title:"\u5220\u9664\u63D0\u793A",icon:(0,m.jsx)(h.Z,{}),content:"\u786E\u8BA4\u8981\u5220\u9664\u5206\u7C7B\u3010".concat(ue(T.name),"\u3011\u5417\uFF1F"),onOk:function(){console.log("\u786E\u8BA4\u5220\u9664"),fe(T)},onCancel:function(){console.log("\u53D6\u6D88\u5220\u9664")},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},ce=function(){K(!1)},ge=function(){console.log("new dep"),z(!1),Z(void 0),K(!0)},pe=function(){var P=i()(a()().mark(function T(F){var B;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(console.log("handleSubmit: ",F),L?d.yw.loading("\u4FEE\u6539\u4E2D..."):d.yw.loading("\u521B\u5EFA\u4E2D..."),!L){j.next=8;break}return j.next=5,(0,u.yr)(F);case 5:j.t0=j.sent,j.next=11;break;case 8:return j.next=10,(0,u.k4)(F);case 10:j.t0=j.sent;case 11:B=j.t0,console.log("createCategory response: ",B),B.code===200?(d.yw.destroy(),L?d.yw.success("\u4FEE\u6539\u6210\u529F"):d.yw.success("\u521B\u5EFA\u6210\u529F"),K(!1),ae()):(d.yw.destroy(),d.yw.error(B.message));case 14:case"end":return j.stop()}},T)}));return function(F){return P.apply(this,arguments)}}(),ae=function(){var P=i()(a()().mark(function T(){var F,B;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("getCategories"),d.yw.loading("\u52A0\u8F7D\u4E2D..."),F={pageNumber:0,pageSize:50,type:t,orgUid:k.uid},j.next=5,(0,u.FU)(F);case 5:B=j.sent,console.log("queryCategories response: ",B),B.code===200?(Q(B),d.yw.destroy()):(d.yw.destroy(),d.yw.error(B.message));case 8:case"end":return j.stop()}},T)}));return function(){return P.apply(this,arguments)}}(),me=function(){var P=i()(a()().mark(function T(){return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:console.log("handleEditCategory: ",S),z(!0),Z(S),K(!0);case 4:case"end":return B.stop()}},T)}));return function(){return P.apply(this,arguments)}}(),fe=function(){var P=i()(a()().mark(function T(F){return a()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:console.log("handleDeleteCategory: ",F);case 1:case"end":return te.stop()}},T)}));return function(F){return P.apply(this,arguments)}}();(0,U.useEffect)(function(){ae()},[]);var _e=function(T,F){console.log("selected",T,F),T.length!==0&&ee(T[0].toString())};return(0,m.jsxs)("div",{children:[(0,m.jsxs)(g.Z,{gap:"small",wrap:"wrap",style:{marginBottom:5},children:[(0,m.jsx)(p.ZP,{type:"primary",size:"small",onClick:ge,children:"\u521B\u5EFA\u5206\u7C7B"}),(S==null?void 0:S.uid)!==""&&(S==null?void 0:S.uid)!=="all"&&(0,m.jsx)(p.ZP,{size:"small",onClick:me,children:"\u7F16\u8F91"}),(S==null?void 0:S.uid)!==""&&(S==null?void 0:S.uid)!=="all"&&(0,m.jsx)(p.ZP,{onClick:function(){return de(S)},size:"small",style:{float:"right"},danger:!0,children:G.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,m.jsx)(W.Z,{defaultSelectedKeys:[S.uid],onSelect:_e,treeData:ne,blockNode:!0}),(0,m.jsx)(s,{open:$,type:t,isEdit:L,category:X,onCancel:ce,onSubmit:pe}),le]})},w=Y},77154:function(J,A,e){var y=e(39825);function a(){var D=(0,y.Z)(),i=D.isDarkMode,M={borderRight:i?"1px solid #333":"1px solid #ccc",background:i?"#141414":"#f5f5f5",width:260},_={background:i?"#141414":"#fff"},h={borderLeft:i?"1px solid #333":"1px solid #ccc",background:i?"#141414":"#f5f5f5"},E={minHeight:120,background:i?"#141414":"#f5f5f5"};return{leftSiderStyle:M,headerStyle:_,rightSiderStyle:h,contentStyle:E}}A.Z=a},73803:function(J,A,e){var y=e(85615),a=e(66419),D=e(86745);function i(){var M=(0,D.useIntl)(),_=function(g){return g&&g.startsWith(y.Vo)?M.formatMessage({id:g,defaultMessage:g}):g},h=function(g){return g!=null&&g.startsWith(y.Vo)?(0,a.aS)(M.formatMessage({id:g}),10):(0,a.aS)(g,10)};return{translateString:_,translateStringTranct:h}}A.Z=i},89102:function(J,A,e){e.d(A,{v:function(){return g}});var y=e(19632),a=e.n(y),D=e(97857),i=e.n(D),M=e(85615),_=e(64529),h=e(782),E=e(71381),g=(0,_.Ue)()((0,h.mW)((0,h.tJ)((0,E.n)(function(d,O){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:""},setCategoryResult:function(x){var R=W(x),U={uid:"all",name:"\u5168\u90E8"},m=i()(i()({},x),{},{data:{content:[U].concat(a()(x.data.content))}}),c=p(m);d({categoryResult:m,categoryTreeOptions:c,categorySelectOptions:R})},setCurrentCategoryUid:function(x){var R=O().categoryResult.data.content.find(function(U){return U.uid===x});d({currentCategory:R})},deleteCategoryCache:function(){return d({},!0)}}}),{name:M.OM})));function p(d){var O=[];return d.data.content.forEach(function(v){var x={title:v.name,key:v.uid,children:[]};v.children&&Array.isArray(v.children)&&(x.children=v.children.map(function(R){return{title:R.name,key:R.uid,children:[]}})),O.push(x)}),O}function W(d){var O=[];return d.data.content.forEach(function(v){var x={label:v.name,value:v.uid};O.push(x)}),O}},86250:function(J,A,e){e.d(A,{Z:function(){return w}});var y=e(67294),a=e(93967),D=e.n(a),i=e(98423),M=e(98065),_=e(53124),h=e(91945),E=e(45503);const g=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],W=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],d=(n,r)=>{const t={};return g.forEach(o=>{t[`${n}-wrap-${o}`]=r.wrap===o}),t},O=(n,r)=>{const t={};return W.forEach(o=>{t[`${n}-align-${o}`]=r.align===o}),t[`${n}-align-stretch`]=!r.align&&!!r.vertical,t},v=(n,r)=>{const t={};return p.forEach(o=>{t[`${n}-justify-${o}`]=r.justify===o}),t};function x(n,r){return D()(Object.assign(Object.assign(Object.assign({},d(n,r)),O(n,r)),v(n,r)))}var R=x;const U=n=>{const{componentCls:r}=n;return{[r]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},m=n=>{const{componentCls:r}=n;return{[r]:{"&-gap-small":{gap:n.flexGapSM},"&-gap-middle":{gap:n.flexGap},"&-gap-large":{gap:n.flexGapLG}}}},c=n=>{const{componentCls:r}=n,t={};return g.forEach(o=>{t[`${r}-wrap-${o}`]={flexWrap:o}}),t},s=n=>{const{componentCls:r}=n,t={};return W.forEach(o=>{t[`${r}-align-${o}`]={alignItems:o}}),t},u=n=>{const{componentCls:r}=n,t={};return p.forEach(o=>{t[`${r}-justify-${o}`]={justifyContent:o}}),t},f=()=>({});var b=(0,h.I$)("Flex",n=>{const{paddingXS:r,padding:t,paddingLG:o}=n,C=(0,E.TS)(n,{flexGapSM:r,flexGap:t,flexGapLG:o});return[U(C),m(C),c(C),s(C),u(C)]},f,{resetStyle:!1}),l=function(n,r){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,o=Object.getOwnPropertySymbols(n);C<o.length;C++)r.indexOf(o[C])<0&&Object.prototype.propertyIsEnumerable.call(n,o[C])&&(t[o[C]]=n[o[C]]);return t},w=y.forwardRef((n,r)=>{const{prefixCls:t,rootClassName:o,className:C,style:$,flex:K,gap:G,children:q,vertical:N=!1,component:L="div"}=n,z=l(n,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:I,direction:H,getPrefixCls:X}=y.useContext(_.E_),Z=X("flex",t),[k,V,ne]=b(Z),Q=N!=null?N:I==null?void 0:I.vertical,S=D()(C,o,I==null?void 0:I.className,Z,V,ne,R(Z,n),{[`${Z}-rtl`]:H==="rtl",[`${Z}-gap-${G}`]:(0,M.n)(G),[`${Z}-vertical`]:Q}),ee=Object.assign(Object.assign({},I==null?void 0:I.style),$);return K&&(ee.flex=K),G&&!(0,M.n)(G)&&(ee.gap=G),k(y.createElement(L,Object.assign({ref:r,className:S,style:ee},(0,i.Z)(z,["justify","wrap","align"])),q))})}}]);
