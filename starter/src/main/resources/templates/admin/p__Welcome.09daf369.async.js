"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185],{17208:function(e,t,s){s.d(t,{Kq:function(){return u},RL:function(){return m}});var i=s(90819),a=s.n(i),r=s(73193),n=s.n(r),o=s(89933),l=s.n(o),d=s(55735),c=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/create",{method:"POST",data:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/update",{method:"POST",data:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60150:function(e,t,s){s.d(t,{RU:function(){return u},xL:function(){return m}});var i=s(90819),a=s.n(i),r=s(73193),n=s.n(r),o=s(89933),l=s.n(o),d=s(55735),c=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/service/statistic/query/date",{method:"GET",params:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/service/statistic/calculate",{method:"POST",data:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},19822:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var i=s(45332),a=s.n(i),r=s(40612),n=s(55735),o=s(65461),l=s(30921),d=s(44194),c=s(90819),u=s.n(c),x=s(89933),m=s.n(x),f=s(98123),g=s(44781),v=s(62673),p=s(3849),j=s(67402),h=s(88996),y=s(75365),Z=s(88201),M=s(5602),w=s(59485),F=s(7875),b=s(61107),k=s(80556),S=s(58791),T=s(58368),C=s(59145),R=s(48004),O=s(93689),P=s(429),I=s(27995),Y=s(24429),A=s(34545),q=s(25640),E=s(52294),U=s(86803),D=s(1902),W=s(95490),B=s(24170),V=s(76750),z=s(72614),H=s(28977),N=s.n(H),G=s(5939),$=s(24562),L=s(21499),_=s(89717),K=s(10737),Q=s(60150),J=s(32327),X=s(44521),ee=s(31549),te=J.Z.Title,se=f.default.RangePicker,ie=g.Z.Option,ae=function(){var e,t,s=(0,l.useIntl)(),i=(0,V.Z)().translateStringTranct,o=(0,d.useState)(N()().startOf("day")),c=a()(o,2),x=c[0],f=c[1],H=(0,d.useState)(N()().endOf("day")),J=a()(H,2),ae=J[0],re=J[1],ne=(0,d.useState)("today"),oe=a()(ne,2),le=oe[0],de=oe[1],ce=(0,d.useState)(n.AOk),ue=a()(ce,2),xe=ue[0],me=ue[1],fe=(0,d.useState)(),ge=a()(fe,2),ve=ge[0],pe=ge[1],je=(0,d.useState)(),he=a()(je,2),ye=he[0],Ze=he[1],Me=(0,r.u)((function(e){return e.currentOrg})),we=(0,D.E)((function(e){return e})),Fe=we.agentResult,be=we.setAgentResult,ke=(0,W.$)((function(e){return e})),Se=ke.workgroupResult,Te=ke.setWorkgroupResult,Ce=(0,d.useState)(),Re=a()(Ce,2),Oe=Re[0],Pe=Re[1],Ie=(0,d.useState)(n.OwA),Ye=a()(Ie,2),Ae=Ye[0],qe=Ye[1],Ee=(0,d.useState)(!1),Ue=a()(Ee,2),De=(Ue[0],Ue[1]),We=[{label:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}],Be=[{type:s.formatMessage({id:"service.statistic.status.online"}),value:8},{type:s.formatMessage({id:"service.statistic.status.busy"}),value:5},{type:s.formatMessage({id:"service.statistic.status.away"}),value:2},{type:s.formatMessage({id:"service.statistic.status.offline"}),value:3}],Ve=[{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.agent"}),dataIndex:"name",key:"name"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.onlineTime"}),dataIndex:"onlineTime",key:"onlineTime"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.sessionCount"}),dataIndex:"sessionCount",key:"sessionCount"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.avgResponseTime"}),dataIndex:"avgResponseTime",key:"avgResponseTime"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.avgSessionTime"}),dataIndex:"avgSessionTime",key:"avgSessionTime"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.satisfaction"}),dataIndex:"satisfaction",key:"satisfaction"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.workingHours"}),dataIndex:"workingHours",key:"workingHours"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.transferRate"}),dataIndex:"transferRate",key:"transferRate"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.firstResolutionRate"}),dataIndex:"firstResolutionRate",key:"firstResolutionRate"},{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.table.overdueCount"}),dataIndex:"overdueCount",key:"overdueCount"}];(0,d.useEffect)((function(){if("custom"===le)f(x),re(ae),qe(n.dd4);else{var e=N()();"today"===le?(f(e),re(e),qe(n.OwA)):"yesterday"===le?(f(e.subtract(1,"day")),re(e.subtract(1,"day")),qe(n.OwA)):"week"===le?(f(e.startOf("week")),re(e.endOf("week")),qe(n.dd4)):"lastWeek"===le?(f(e.subtract(1,"week").startOf("week")),re(e.subtract(1,"week").endOf("week")),qe(n.dd4)):"month"===le&&(f(e.startOf("month")),re(e.endOf("month")),qe(n.dd4))}}),[le]);var ze=function(){var e=m()(u()().mark((function e(){var t,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==Me?void 0:Me.uid},e.next=4,(0,z.u7)(t);case 4:s=e.sent,console.log("fetchAllWorkgroups: ",s),200===s.code?(U.yw.destroy(),Te(s),s.data.content.length>0&&Ze(s.data.content[0].uid)):(U.yw.destroy(),U.yw.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=m()(u()().mark((function e(){var t,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==Me?void 0:Me.uid},e.next=4,(0,B._t)(t);case 4:s=e.sent,console.log("fetchAllAgents: ",s),200===s.code?(U.yw.destroy(),be(s),s.data.content.length>0&&pe(s.data.content[0].uid)):(U.yw.destroy(),U.yw.error(i(s.message))),console.log("queryAllAgents response",s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=m()(u()().mark((function e(){var t,i;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return De(!0),e.prev=1,U.yw.loading("loading"),t={type:xe,statisticStartTime:null==x?void 0:x.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==ae?void 0:ae.format("YYYY-MM-DD 23:59:59"),workgroupUid:ye,agentUid:ve,orgUid:null==Me?void 0:Me.uid},e.next=6,(0,Q.RU)(t);case 6:i=e.sent,console.log("queryStatisticServicesByOrg response",i,t),200===i.code?(U.yw.destroy(),Pe(i.data)):(U.yw.destroy(),U.yw.error(i.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),U.yw.error(s.formatMessage({id:"ticket.message.operation.failed"}));case 14:return e.prev=14,De(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=m()(u()().mark((function e(){var t,s;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.yw.loading("loading"),t={type:xe,statisticStartTime:null==x?void 0:x.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==ae?void 0:ae.format("YYYY-MM-DD 23:59:59"),workgroupUid:ye,agentUid:ve,orgUid:null==Me?void 0:Me.uid},e.next=4,(0,Q.RU)(t);case 4:s=e.sent,console.log("queryStatisticServicesByOrg response",s,t),200===s.code?U.yw.destroy():(U.yw.destroy(),U.yw.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){ze(),He()}),[]),(0,d.useEffect)((function(){Ne()}),[xe,ve,ye]),(0,d.useEffect)((function(){Ge()}),[Ae,xe,ve,ye]),(0,d.useEffect)((function(){Ne()}),[x,ae]),(0,ee.jsxs)("div",{style:{padding:16},children:[(0,ee.jsx)(v.Z,{style:{marginBottom:16},children:(0,ee.jsxs)(p.Z,{direction:"vertical",style:{width:"100%"},children:[(0,ee.jsxs)(p.Z,{wrap:!0,children:[(0,ee.jsx)(j.ZP.Group,{value:le,onChange:function(e){return de(e.target.value)},children:We.map((function(e){return(0,ee.jsx)(j.ZP.Button,{value:e.value,children:e.label},e.value)}))}),"custom"===le&&(0,ee.jsx)(se,{value:[x,ae],onChange:function(e){f(e[0]),re(e[1])}})]}),(0,ee.jsxs)(p.Z,{wrap:!0,children:[(0,ee.jsxs)(g.Z,{placeholder:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.type"}),style:{width:200},value:xe,onChange:function(e){return me(e)},children:[(0,ee.jsx)(ie,{value:n.AOk,children:(0,ee.jsx)(l.FormattedMessage,{id:"i18n.all"})}),(0,ee.jsx)(ie,{value:n.pHh,children:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.agent"})}),(0,ee.jsx)(ie,{value:n.ti4,children:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.workgroup"})})]}),xe===n.pHh&&(0,ee.jsx)(g.Z,{placeholder:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.agent"}),style:{width:200},value:ve,onChange:function(e){return pe(e)},children:null===(e=Fe.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(e){return(0,ee.jsx)(ie,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),xe===n.ti4&&(0,ee.jsx)(g.Z,{placeholder:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.department"}),style:{width:200},value:ye,onChange:function(e){return Ze(e)},children:null===(t=Se.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return(0,ee.jsx)(ie,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),(0,ee.jsx)(h.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.export"}),children:(0,ee.jsx)(y.ZP,{icon:(0,ee.jsx)(b.Z,{}),onClick:function(){var e=localStorage.getItem(n.LA8);window.open((0,X.kG)()+"/api/v1/service/statistic/export?"+new URLSearchParams({type:xe,statisticStartTime:null==x?void 0:x.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==ae?void 0:ae.format("YYYY-MM-DD 23:59:59"),workgroupUid:ye,agentUid:ve,orgUid:null==Me?void 0:Me.uid,accessToken:e||""}).toString())},children:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.export"})})}),(0,ee.jsx)(h.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.refresh"}),children:(0,ee.jsx)(y.ZP,{icon:(0,ee.jsx)(k.Z,{}),onClick:function(){return Ne()},children:(0,ee.jsx)(l.FormattedMessage,{id:"ticket.statistic.filter.refresh"})})}),!1]})]})}),(0,ee.jsxs)(Z.Z,{gutter:24,children:[(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.onlineAgentCount"}),value:(null==Oe?void 0:Oe.onlineAgentCount)||0,prefix:(0,ee.jsx)(S.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.offlineAgentCount"}),value:(null==Oe?void 0:Oe.offlineAgentCount)||0,prefix:(0,ee.jsx)(T.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.queuingThreadCount"}),value:(null==Oe?void 0:Oe.queuingThreadCount)||0,prefix:(0,ee.jsx)(S.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.currentThreadCount"}),value:(null==Oe?void 0:Oe.currentThreadCount)||0,prefix:(0,ee.jsx)(C.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.session"})})})})]}),(0,ee.jsxs)(Z.Z,{gutter:24,style:{marginTop:24},children:[(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.maxResponseTime"}),value:(null==Oe?void 0:Oe.maxResponseTime)||0,prefix:(0,ee.jsx)(R.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.minResponseTime"}),value:(null==Oe?void 0:Oe.minResponseTime)||0,prefix:(0,ee.jsx)(R.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.avgFirstResponseTime"}),value:(null==Oe?void 0:Oe.avgFirstResponseTime)||0,prefix:(0,ee.jsx)(R.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.avgWaitingTime"}),value:(null==Oe?void 0:Oe.avgWaitingTime)||0,prefix:(0,ee.jsx)(R.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.seconds"})})})})]}),(0,ee.jsxs)(Z.Z,{gutter:24,style:{marginTop:24},children:[(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.totalIncomingThreads"}),value:(null==Oe?void 0:Oe.totalIncomingThreads)||0,prefix:(0,ee.jsx)(C.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.acceptedThreadCount"}),value:(null==Oe?void 0:Oe.acceptedThreadCount)||0,prefix:(0,ee.jsx)(O.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.acceptRate"}),value:(null==Oe?void 0:Oe.acceptRate)||0,prefix:(0,ee.jsx)(O.Z,{}),suffix:"%"})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.firstSolveRate"}),value:(null==Oe?void 0:Oe.firstSolveRate)||0,prefix:(0,ee.jsx)(P.Z,{}),suffix:"%"})})})]}),(0,ee.jsxs)(Z.Z,{gutter:24,style:{marginTop:24},children:[(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.robotThreadCount"}),value:(null==Oe?void 0:Oe.robotThreadCount)||0,prefix:(0,ee.jsx)(I.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.robotToHumanCount"}),value:(null==Oe?void 0:Oe.robotToHumanCount)||0,prefix:(0,ee.jsx)(Y.Z,{}),suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.robotSolveRate"}),value:(null==Oe?void 0:Oe.robotSolveRate)||0,prefix:(0,ee.jsx)(O.Z,{}),suffix:"%"})})}),(0,ee.jsx)(M.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ee.jsx)(v.Z,{bordered:!1,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.transferRate"}),value:(null==Oe?void 0:Oe.transferRate)||0,prefix:(0,ee.jsx)(A.Z,{}),suffix:"%"})})})]}),(0,ee.jsxs)(v.Z,{style:{marginTop:24},children:[(0,ee.jsx)(te,{level:4,children:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.sessionDuration"})}),(0,ee.jsxs)(Z.Z,{gutter:24,children:[(0,ee.jsx)(M.Z,{span:8,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.duration.within5min"}),value:(null==Oe?void 0:Oe.durationWithin5Min)||0,suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.sessions"})})}),(0,ee.jsx)(M.Z,{span:8,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.duration.within15min"}),value:(null==Oe?void 0:Oe.durationWithin15Min)||0,suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.sessions"})})}),(0,ee.jsx)(M.Z,{span:8,children:(0,ee.jsx)(w.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.duration.over15min"}),value:(null==Oe?void 0:Oe.durationOver15Min)||0,suffix:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.unit.sessions"})})})]})]}),(0,ee.jsxs)(Z.Z,{gutter:[16,16],style:{marginTop:24},children:[(0,ee.jsx)(M.Z,{span:12,children:(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.trend"}),extra:(0,ee.jsxs)(j.ZP.Group,{defaultValue:"day",children:[(0,ee.jsx)(j.ZP.Button,{value:"day",children:"日"}),(0,ee.jsx)(j.ZP.Button,{value:"week",children:"周"}),(0,ee.jsx)(j.ZP.Button,{value:"month",children:"月"})]}),children:(0,ee.jsx)(G.Z,{data:[{date:"2024-01-01",type:"总会话数",count:120},{date:"2024-01-02",type:"总会话数",count:132},{date:"2024-01-01",type:"已评价",count:89},{date:"2024-01-02",type:"已评价",count:98}],xField:"date",yField:"count",seriesField:"type",animation:{appear:{duration:1e3}}})})}),(0,ee.jsx)(M.Z,{span:12,children:(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.distribution"}),children:(0,ee.jsx)($.Z,{data:Be,angleField:"value",colorField:"type",radius:.8,label:{style:{fontSize:12,fill:"#666"},autoRotate:!0},tooltip:{showTitle:!1,formatter:function(e){return{name:e.type||"",value:e.value?"".concat(e.value,"人"):""}}},legend:{position:"bottom",itemWidth:100},interactions:[{type:"element-active"}],animation:{appear:{duration:1e3}},height:300})})})]}),(0,ee.jsxs)(Z.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,ee.jsx)(M.Z,{span:12,children:(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.peakHours"}),children:(0,ee.jsx)(L.Z,{data:[{hour:"09:00",day:"周一",value:28},{hour:"10:00",day:"周一",value:35}],xField:"hour",yField:"day",colorField:"value",animation:!1,legend:{position:"right"},tooltip:{title:"会话数",formatter:function(e){return{name:"".concat(e.day," ").concat(e.hour),value:e.value}}}})})}),(0,ee.jsx)(M.Z,{span:12,children:(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.ranking"}),extra:(0,ee.jsxs)(g.Z,{defaultValue:"sessions",style:{width:120},children:[(0,ee.jsx)(ie,{value:"sessions",children:"会话量"}),(0,ee.jsx)(ie,{value:"satisfaction",children:"满意度"}),(0,ee.jsx)(ie,{value:"response",children:"响应时间"})]}),children:(0,ee.jsx)(_.Z,{data:[{agent:"客服A",sessions:156,satisfaction:4.8},{agent:"客服B",sessions:142,satisfaction:4.7}],xField:"agent",yField:"sessions",label:{position:"top"},animation:{appear:{duration:1e3}}})})})]}),(0,ee.jsxs)(Z.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,ee.jsx)(M.Z,{span:12,children:(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.comparison"}),extra:(0,ee.jsxs)(p.Z,{children:[(0,ee.jsxs)(g.Z,{defaultValue:"sessions",style:{width:120},children:[(0,ee.jsx)(ie,{value:"sessions",children:"会话量"}),(0,ee.jsx)(ie,{value:"satisfaction",children:"满意度"}),(0,ee.jsx)(ie,{value:"response",children:"响应时间"})]}),(0,ee.jsxs)(j.ZP.Group,{defaultValue:"mom",children:[(0,ee.jsx)(j.ZP.Button,{value:"mom",children:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.comparison.mom"})}),(0,ee.jsx)(j.ZP.Button,{value:"yoy",children:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.comparison.yoy"})})]})]}),children:(0,ee.jsx)(_.Z,{data:[{date:"2024-01",type:"本期",metric:"会话量",value:1200},{date:"2024-01",type:"环比",metric:"会话量",value:1150},{date:"2024-01",type:"同比",metric:"会话量",value:980}],xField:"type",yField:"value",seriesField:"metric",isGroup:!0,columnStyle:{radius:[4,4,0,0]},label:{position:"top"}})})}),(0,ee.jsx)(M.Z,{span:12,children:(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.quality"}),children:(0,ee.jsx)(K.Z,{data:[[{date:"2024-01-01",value:92,type:"实际"},{date:"2024-01-02",value:93,type:"实际"},{date:"2024-01-03",value:95,type:"实际"},{date:"2024-01-04",value:94,type:"实际"},{date:"2024-01-05",value:96,type:"实际"}],[{date:"2024-01-01",target:95},{date:"2024-01-02",target:95},{date:"2024-01-03",target:95},{date:"2024-01-04",target:95},{date:"2024-01-05",target:95}]],xField:"date",yField:["value","target"],geometryOptions:[{geometry:"column",columnStyle:{radius:[4,4,0,0]}},{geometry:"line",lineStyle:{lineWidth:2}}],legend:{itemName:{formatter:function(e){return"value"===e?s.formatMessage({id:"service.statistic.quality.actual"}):s.formatMessage({id:"service.statistic.quality.target"})}}},yAxis:{value:{min:80,max:100},target:{min:80,max:100}},tooltip:{formatter:function(e){return{name:e.target?s.formatMessage({id:"service.statistic.quality.target"}):s.formatMessage({id:"service.statistic.quality.actual"}),value:e.target||e.value}}},animation:{appear:{duration:1e3}}})})})]}),(0,ee.jsx)(v.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.performance"}),style:{marginTop:24},extra:(0,ee.jsxs)(p.Z,{children:[(0,ee.jsx)(h.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.export.excel"}),children:(0,ee.jsx)(y.ZP,{icon:(0,ee.jsx)(q.Z,{})})}),(0,ee.jsx)(h.Z,{title:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.export.pdf"}),children:(0,ee.jsx)(y.ZP,{icon:(0,ee.jsx)(E.Z,{})})})]}),children:(0,ee.jsx)(F.Z,{columns:Ve,dataSource:[],scroll:{x:!0},size:"small",locale:{emptyText:(0,ee.jsx)(l.FormattedMessage,{id:"service.statistic.tips.noData"})}})})]})},re=s(53530),ne=s(52288),oe=s(17208),le=function(e){var t=e.open,s=e.onClose,i=e.onSuccess,r=(0,l.useIntl)(),n=((0,l.useModel)("@@initialState").initialState||{}).userInfo,o=(0,d.useState)(!1),c=a()(o,2),x=c[0],f=c[1],g=(0,d.useState)(""),v=a()(g,2),p=v[0],j=v[1],h=(0,d.useState)(!1),Z=a()(h,2),M=Z[0],w=Z[1],F=function(){var e=m()(u()().mark((function e(){var t,a,o;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==p){e.next=3;break}return U.yw.error(r.formatMessage({id:"welcome.message.org.name.required"})),e.abrupt("return");case 3:return f(!0),U.yw.loading(r.formatMessage({id:"welcome.message.org.creating"})),t=null!=n&&n.mobile?null==n?void 0:n.mobile:null==n?void 0:n.email,a={name:p,code:t,logo:"https://www.weiyuai.cn/logo.png",description:p+"description"},e.prev=7,e.next=10,(0,oe.Kq)(a);case 10:200===(o=e.sent).code?(f(!1),U.yw.destroy(),U.yw.success(r.formatMessage({id:"welcome.message.create.success"})),i(o.data),s()):(f(!1),U.yw.destroy(),U.yw.error(r.formatMessage({id:"welcome.message.create.failed"}))),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),f(!1),U.yw.destroy(),U.yw.error(r.formatMessage({id:"welcome.message.create.failed"}));case 19:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();return(0,ee.jsxs)(re.Z,{title:r.formatMessage({id:"welcome.modal.title"}),closable:!1,open:t,onCancel:function(){U.yw.error(r.formatMessage({id:"welcome.message.org.required"}))},maskClosable:!1,footer:[(0,ee.jsx)(y.ZP,{type:"primary",onClick:function(){s()},disabled:!0,children:r.formatMessage({id:"welcome.modal.join"})},"join"),(0,ee.jsx)(y.ZP,{type:"primary",loading:x,onClick:function(){M?F():(w(!0),f(!1))},children:r.formatMessage({id:"welcome.modal.create"})},"create")],children:[(0,ee.jsx)("p",{children:r.formatMessage({id:"welcome.modal.description"})}),M&&(0,ee.jsx)(ne.Z,{placeholder:r.formatMessage({id:"welcome.modal.input.placeholder"}),value:p,onChange:function(e){return j(e.target.value)},onPressEnter:F,autoFocus:!0})]})},de=function(e){var t=e.open,s=e.onClose,i=(0,l.useIntl)(),a=(0,l.useNavigate)(),r=function(){localStorage.setItem("skipVerification","true"),s()};return(0,ee.jsx)(re.Z,{title:i.formatMessage({id:"welcome.verify.modal.title",defaultMessage:"账号验证提示"}),open:t,onCancel:r,footer:[(0,ee.jsx)(y.ZP,{onClick:r,children:i.formatMessage({id:"welcome.verify.later",defaultMessage:"稍后验证"})},"later"),(0,ee.jsx)(y.ZP,{type:"primary",onClick:function(){s(),a("/setting/certification")},children:i.formatMessage({id:"welcome.verify.now",defaultMessage:"立即验证"})},"now")],children:(0,ee.jsx)("p",{children:i.formatMessage({id:"welcome.verify.modal.description",defaultMessage:"您的邮箱和手机号尚未验证，为保障账号安全，建议您尽快完成验证。"})})})},ce=function(){var e=((0,l.useModel)("@@initialState").initialState||{}).userInfo,t=(0,r.u)((function(e){return e.setCurrentOrg})),s=(0,d.useState)(!1),i=a()(s,2),c=i[0],u=i[1],x=(0,d.useState)(!1),m=a()(x,2),f=m[0],g=m[1];return(0,d.useEffect)((function(){!function(){if(e){if(!e.currentOrganization)return console.log("before initOrganization",e),void(e.platform===n.Ogg&&u(!0));console.log("after initOrganization"),t(e.currentOrganization)}}(),"true"!==localStorage.getItem("skipVerification")&&(!e||e.emailVerified||e.mobileVerified||g(!0)),(0,o.Bc)()&&console.log("weiyuaiSaas")}),[e]),(0,ee.jsxs)("div",{children:[(0,ee.jsx)(ae,{}),(0,ee.jsx)(le,{open:c,onClose:function(){return u(!1)},onSuccess:function(e){t(e),window.location.reload()}}),(0,ee.jsx)(de,{open:f,onClose:function(){return g(!1)}})]})}},53530:function(e,t,s){s.d(t,{Z:function(){return Z}});var i=s(18960),a=s(31695),r=s(27710),n=s(44194),o=s(51865),l=s.n(o),d=s(24255),c=s(43037),u=s(37167),x=s(30829),m=s(78660),f=s(59348),g=s(6750),v=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s};var p=(0,c.i)((e=>{const{prefixCls:t,className:s,closeIcon:i,closable:a,type:r,title:o,children:c,footer:p}=e,j=v(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:h}=n.useContext(u.E_),y=h(),Z=t||h("modal"),M=(0,x.Z)(y),[w,F,b]=(0,g.ZP)(Z,M),k=`${Z}-confirm`;let S={};return S=r?{closable:null!=a&&a,title:"",footer:"",children:n.createElement(m.O,Object.assign({},e,{prefixCls:Z,confirmPrefixCls:k,rootPrefixCls:y,content:c}))}:{closable:null==a||a,title:o,footer:null!==p&&n.createElement(f.$,Object.assign({},e)),children:c},w(n.createElement(d.s,Object.assign({prefixCls:Z,className:l()(F,`${Z}-pure-panel`,r&&k,r&&`${k}-${r}`,s,b,M)},j,{closeIcon:(0,f.b)(Z,i),closable:a},S)))})),j=s(75807);function h(e){return(0,i.ZP)((0,i.uW)(e))}const y=r.Z;y.useModal=j.Z,y.info=function(e){return(0,i.ZP)((0,i.cw)(e))},y.success=function(e){return(0,i.ZP)((0,i.vq)(e))},y.error=function(e){return(0,i.ZP)((0,i.AQ)(e))},y.warning=h,y.warn=h,y.confirm=function(e){return(0,i.ZP)((0,i.Au)(e))},y.destroyAll=function(){for(;a.Z.length;){const e=a.Z.pop();e&&e()}},y.config=i.ai,y._InternalPanelDoNotUseOrYouWillBeFired=p;var Z=y}}]);