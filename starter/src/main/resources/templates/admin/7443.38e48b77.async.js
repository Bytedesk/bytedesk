"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7443],{13253:function(e,o,i){i(90819),i(73193),i(89933),i(45332),i(81153),i(43314),i(85702),i(61017),i(77667),i(82045),i(44194),i(31549)},9750:function(e,o,i){i(90819),i(73193),i(89933),i(45332),i(81153),i(43314),i(85702),i(61017),i(77667),i(82045),i(44194),i(31549)},3321:function(e,o,i){var t=i(90819),n=i.n(t),s=i(73193),l=i.n(s),u=i(89933),r=i.n(u),a=i(45332),d=i.n(a),c=i(89756),v=i(81153),g=i(63833),p=i(43314),m=i(1780),f=i(85702),h=i(3245),w=i(61017),T=i(77667),S=i(5728),b=i(2724),F=i(11607),q=i(80067),M=i(82045),k=i(44194),x=i(60029),C=i(74828),y=i(31549);o.Z=function(e){var o=e.type,i=S.A.useForm(),t=d()(i,1)[0],s=(0,M.useIntl)(),u=(0,m.Z)().translateString,a=(0,k.useState)(!1),j=d()(a,2),U=j[0],L=j[1],Z=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),V=Z.currentRobot,A=Z.setCurrentRobot,R=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),W=R.currentAgent,D=R.setCurrentAgent,N=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),X=N.currentWorkgroup,_=N.setCurrentWorkgroup,E=(0,k.useState)(""),O=d()(E,2),I=O[0],P=O[1],$=function(e){P(u(null==e?void 0:e.welcomeTip)),t.setFieldValue("topTip",u(null==e?void 0:e.topTip)),t.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),t.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),t.setFieldValue("showLogo",null==e?void 0:e.showLogo)};(0,k.useEffect)((function(){if(o===T._X4)$(null==V?void 0:V.serviceSettings);else if(o===T.Njn){var e,i;$(null==W?void 0:W.serviceSettings),L(null==W||null===(e=W.serviceSettings)||void 0===e?void 0:e.showTopTip),t.setFieldValue("maxThreadCount",null==W?void 0:W.maxThreadCount),t.setFieldValue("leaveMsgTip",u(null==W||null===(i=W.leaveMsgSettings)||void 0===i?void 0:i.leaveMsgTip))}else if(o===T.aZD){var n;$(null==X?void 0:X.serviceSettings),t.setFieldValue("leaveMsgTip",u(null==X||null===(n=X.leaveMsgSettings)||void 0===n?void 0:n.leaveMsgTip))}}),[V,W,X]);var G=function(){var e=r()(n()().mark((function e(i){var t,u,r,a,d,m,f,h,w,S,b,F,q,M,k,x,C,y,j,L,Z,R,N,E,O;return n()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",i," showTopTip:",U),c.yw.loading(s.formatMessage({id:"updating"})),o!==T._X4){e.next=12;break}return m=l()(l()({},V),{},{serviceSettings:l()(l()({},V.serviceSettings),{},{topTip:(null==i?void 0:i.topTip)||"",showTopTip:U,welcomeTip:I,autoCloseMin:(null==i?void 0:i.autoCloseMin)||25,showLogo:(null==i?void 0:i.showLogo)||!0,quickFaqUids:null===(t=W.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})),faqUids:null==V||null===(u=V.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==V||null===(r=V.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),hotFaqUids:null==V||null===(a=V.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==V||null===(d=V.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",m),e.next=7,(0,g.$l)(m);case 7:f=e.sent,console.log("updateRobot response:",f),200===f.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),A(f.data)):(c.yw.destroy(),c.yw.error(f.message)),e.next=30;break;case 12:if(o!==T.Njn){e.next=22;break}return k=l()(l()({},W),{},{serviceSettings:l()(l()({},W.serviceSettings),{},{topTip:(null==i?void 0:i.topTip)||"",showTopTip:U,welcomeTip:I,autoCloseMin:(null==i?void 0:i.autoCloseMin)||25,showLogo:(null==i?void 0:i.showLogo)||!0,quickFaqUids:null===(h=W.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null===(w=W.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==W||null===(S=W.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==W||null===(b=W.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(F=W.serviceSettings)||void 0===F||null===(F=F.shortcutFaqs)||void 0===F?void 0:F.map((function(e){return e.uid}))}),leaveMsgSettings:l()(l()({},W.leaveMsgSettings),{},{leaveMsgTip:(null==i?void 0:i.leaveMsgTip)||"",worktimeUids:null===(q=W.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:l()(l()({},W.robotSettings),{},{robotUid:null===(M=W.robotSettings)||void 0===M||null===(M=M.robot)||void 0===M?void 0:M.uid}),autoReplySettings:l()({},W.autoReplySettings),maxThreadCount:(null==i?void 0:i.maxThreadCount)||10}),console.log("agentObject:",k),e.next=17,(0,v.sE)(k);case 17:x=e.sent,console.log("updateAgent response:",x),200===x.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),D(x.data)):(c.yw.destroy(),c.yw.error(x.message)),e.next=30;break;case 22:if(o!==T.aZD){e.next=30;break}return E=l()(l()({},X),{},{serviceSettings:l()(l()({},X.serviceSettings),{},{topTip:(null==i?void 0:i.topTip)||"",showTopTip:U,welcomeTip:I,autoCloseMin:(null==i?void 0:i.autoCloseMin)||25,showLogo:(null==i?void 0:i.showLogo)||!0,quickFaqUids:null===(C=X.serviceSettings)||void 0===C||null===(C=C.quickFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),faqUids:null===(y=X.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==X||null===(j=X.serviceSettings)||void 0===j||null===(j=j.guessFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),hotFaqUids:null==X||null===(L=X.serviceSettings)||void 0===L||null===(L=L.hotFaqs)||void 0===L?void 0:L.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(Z=X.serviceSettings)||void 0===Z||null===(Z=Z.shortcutFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid}))}),leaveMsgSettings:l()(l()({},W.leaveMsgSettings),{},{leaveMsgTip:(null==i?void 0:i.leaveMsgTip)||"",worktimeUids:null===(R=W.leaveMsgSettings)||void 0===R||null===(R=R.worktimes)||void 0===R?void 0:R.map((function(e){return e.uid}))}),robotSettings:l()(l()({},W.robotSettings),{},{robotUid:null===(N=W.robotSettings)||void 0===N||null===(N=N.robot)||void 0===N?void 0:N.uid}),agentUids:X.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",E),e.next=27,(0,p.W5)(E);case 27:O=e.sent,console.log("updateWorkGroup response:",O),200===O.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),_(O.data)):(c.yw.destroy(),c.yw.error(O.message));case 30:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}();return(0,y.jsxs)(S.A,{form:t,onFinish:G,style:{marginLeft:"100px"},children:[(0,y.jsx)(b.Z,{name:"showTopTip",width:"md",label:"显示置顶语/公告",fieldProps:{onChange:function(e){var i,n;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==W||null===(i=W.serviceSettings)||void 0===i?void 0:i.showTopTip)),L(e.target.checked),e.target.checked)if(o===T._X4)t.setFieldValue("topTip",u(null==V||null===(n=V.serviceSettings)||void 0===n?void 0:n.topTip));else if(o===T.Njn){var s;t.setFieldValue("topTip",u(null==W||null===(s=W.serviceSettings)||void 0===s?void 0:s.topTip))}else if(o===T.aZD){var l;t.setFieldValue("topTip",u(null==X||null===(l=X.serviceSettings)||void 0===l?void 0:l.topTip))}}}}),U&&(0,y.jsx)(F.Z,{width:"md",name:"topTip",label:"置顶语"}),(0,y.jsx)(S.A.Item,{name:"welcomeTip",label:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),rules:[{required:!0,message:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}],children:(0,y.jsx)(x.Z,{placeholder:"welcomeTip content..",value:I,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e,o){P(e)}})}),o!=T._X4&&(0,y.jsx)(F.Z,{width:"md",name:"leaveMsgTip",label:"离线留言提示"}),(0,y.jsx)(q.Z,{width:"md",name:"autoCloseMin",label:"无新消息会话自动关闭时长(单位：分钟)",min:1}),o===T.Njn&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"1. 同时最大接待数量，超出数量默认进入排队队列"}),(0,y.jsx)("p",{children:"2. 0为所有访客默认进入排队队列，需要客服手动接入"}),(0,y.jsx)("p",{children:"3. 当接待数量小于最大接待数量时，会话自动接入，优先接入排队队列中会话"}),(0,y.jsx)(q.Z,{width:"md",name:"maxThreadCount",label:"同时最大接待数量",min:0})]}),(0,y.jsx)(b.Z,{name:"showLogo",width:"md",label:"显示Logo",tooltip:"只有付费会员可以去掉Logo",fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}}}]);