"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185],{17208:function(t,e,s){s.d(e,{Kq:function(){return u},RL:function(){return m}});var i=s(90819),a=s.n(i),r=s(73193),n=s.n(r),o=s(89933),c=s.n(o),l=s(90069),d=s(30921);function u(t){return x.apply(this,arguments)}function x(){return(x=c()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/org/create",{method:"POST",data:n()(n()({},e),{},{client:l.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return g.apply(this,arguments)}function g(){return(g=c()(a()().mark((function t(e){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/v1/org/update",{method:"POST",data:n()(n()({},e),{},{client:l.bVn})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},8803:function(t,e,s){s.r(e),s.d(e,{default:function(){return xt}});var i=s(90819),a=s.n(i),r=s(89933),n=s.n(r),o=s(45332),c=s.n(o),l=s(86803),d=s(17208),u=s(40612),x=s(90069),m=s(65461),g=s(30921),j=s(75574),p=s(52288),f=s(44194),h=s(67639),Z=s(73193),y=s.n(Z),v=s(88201),M=s(5602),b=s(62673),F=s(59485),w=s(95454),k=s(86824),S=s(38775),T=s(9452),I=s(40269),R=s(51338),A=s(89796),C=s(98840),q=s(69560),z=s(53380),P=s(71952),D=s(97146),O=s(94637),K=s(41352),U=s(26020),H=s(12117),V=s(11101),Q=s(31549),E=function(){var t=(0,g.useIntl)(),e=(0,g.useAccess)(),s=(0,f.useState)([{time:"00:00",value:45,type:t.formatMessage({id:"statistic.data.type.human"})},{time:"00:00",value:78,type:t.formatMessage({id:"statistic.data.type.bot"})}]),i=c()(s,2),r=i[0],o=(i[1],{data:r,xField:"time",yField:"value",seriesField:"type",legend:{position:"top"},smooth:!0,animation:{appear:{animation:"path-in",duration:1e3}},xAxis:{title:{text:t.formatMessage({id:"statistic.chart.axis.time"})}},yAxis:{title:{text:t.formatMessage({id:"statistic.chart.axis.count"})}}}),l={data:[{type:t.formatMessage({id:"statistic.bot.distribution.qa"}),value:458},{type:t.formatMessage({id:"statistic.bot.distribution.business"}),value:284},{type:t.formatMessage({id:"statistic.bot.distribution.query"}),value:326}],angleField:"value",colorField:"type",radius:.8,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},d={data:[{time:"00:00",value:12,type:t.formatMessage({id:"statistic.ticket.status.pending"})},{time:"01:00",value:15,type:t.formatMessage({id:"statistic.ticket.status.processing"})}],xField:"time",yField:"value",seriesField:"type",color:["#1890ff","#2fc25b","#facc14"],legend:{position:"top"}};(0,f.useEffect)((function(){var t=setInterval((function(){u()}),3e4);return function(){return clearInterval(t)}}),[]);var u=function(){var t=n()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=23,m=15,j=45,p=128,h=45,Z=4.5,E={concurrentUsers:56,totalServed:1280,totalSessions:1560,apiCalls:25600,tokenUsage:128e3,apiResponseTime:.8,tokenCost:1580.5,kbHitRate:78.9,unknownQuestions:[{question:t.formatMessage({id:"statistic.bot.unknown.config"}),count:5},{question:t.formatMessage({id:"statistic.bot.unknown.integration"}),count:3}]},L=85.6,G=4.2,W=15.4,B={totalArticles:1580,todayViews:256,hitRate:85.6,unmatchedQuestions:15,updatedToday:8,categoryDist:[{category:"产品文档",count:580},{category:"常见问题",count:420},{category:"操作指南",count:380}],recentUpdates:[{title:"新功能使用说明",time:"2024-01-23 10:30"},{title:"常见问题更新",time:"2024-01-23 09:15"}],searchKeywords:[{keyword:"配置教程",count:89},{keyword:"价格方案",count:76}]},N={data:B.categoryDist,angleField:"count",colorField:"category",radius:.8,label:{type:"outer",content:"{name} {percentage}"}},J=23,X=45,Y=156,$=3,_={high:12,medium:28,low:35},tt=4.2,et=15,st=120;return(0,Q.jsxs)(g.Access,{accessible:e.canDebug(),fallback:(0,Q.jsx)(g.FormattedMessage,{id:"service.statistic.noAccess"}),children:[(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsxs)(b.Z,{children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(C.Z,{}),(0,Q.jsx)(g.FormattedMessage,{id:"statistic.today.total.sessions"})]}),value:p+E.totalSessions,suffix:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.unit.sessions"}),valueStyle:{color:"#1890ff"}}),(0,Q.jsx)("div",{style:{marginTop:8},children:(0,Q.jsx)(w.Z,{percent:Math.round(E.totalSessions/(p+E.totalSessions)*100),size:"small",format:function(e){return t.formatMessage({id:"statistic.bot.ratio.format"},{percent:e})}})})]})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsxs)(b.Z,{children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(q.Z,{}),(0,Q.jsx)(g.FormattedMessage,{id:"statistic.today.bot.resolveRate"})]}),value:L,suffix:"%",valueStyle:{color:L>=80?"#3f8600":"#cf1322"}}),(0,Q.jsx)("div",{style:{marginTop:8},children:(0,Q.jsx)(w.Z,{percent:L,size:"small",status:L>=80?"success":"exception"})})]})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsxs)(b.Z,{children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(z.Z,{}),(0,Q.jsx)(g.FormattedMessage,{id:"statistic.today.satisfaction"})]}),value:Z,suffix:"/5",valueStyle:{color:Z>=4?"#3f8600":"#cf1322"}}),(0,Q.jsx)(k.Z,{disabled:!0,defaultValue:Math.round(Z),style:{marginTop:8}})]})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsxs)(b.Z,{children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(P.Z,{}),(0,Q.jsx)(g.FormattedMessage,{id:"statistic.today.avgResponseTime"})]}),value:h,suffix:"s",valueStyle:{color:h<=30?"#3f8600":"#cf1322"}}),(0,Q.jsx)(w.Z,{percent:100-h/60*100,size:"small",status:h<=30?"success":"exception",style:{marginTop:8}})]})})]}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.realtime.monitor"}),style:{marginTop:16},children:(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsxs)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.human.status"}),children:[(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.human.online"}),value:m,prefix:(0,Q.jsx)(D.Z,{style:{color:"#52c41a"}})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.human.queue"}),value:x,prefix:(0,Q.jsx)(C.Z,{style:{color:x>10?"#f5222d":"#1890ff"}})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.service.serving"}),value:j,prefix:(0,Q.jsx)(z.Z,{})})})]}),(0,Q.jsx)(S.Z,{style:{margin:"12px 0"}}),(0,Q.jsx)("div",{style:{height:200},children:(0,Q.jsx)(R.Z,y()({},o))})]})}),(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsxs)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.bot.status"}),children:[(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.concurrent"},{count:E.concurrentUsers}),value:E.concurrentUsers})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.served"},{count:E.totalServed}),value:E.totalServed})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.sessions"},{count:E.totalSessions}),value:E.totalSessions})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.api.calls"},{count:E.apiCalls}),value:E.apiCalls})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.token.usage"},{count:E.tokenUsage}),value:E.tokenUsage})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.api.response"},{time:E.apiResponseTime}),value:E.apiResponseTime})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.token.cost"},{cost:E.tokenCost}),value:E.tokenCost})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:t.formatMessage({id:"statistic.bot.status.kb.hitrate"},{rate:E.kbHitRate}),value:E.kbHitRate})})]}),(0,Q.jsx)(S.Z,{style:{margin:"12px 0"}}),(0,Q.jsx)("div",{style:{height:200},children:(0,Q.jsx)(A.Z,y()({},l))})]})})]})}),(0,Q.jsxs)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.title"}),style:{marginTop:16},children:[(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.total"}),value:B.totalArticles,prefix:(0,Q.jsx)(O.Z,{})})}),(0,Q.jsxs)(M.Z,{span:6,children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.hitRate"}),value:B.hitRate,suffix:"%",valueStyle:{color:B.hitRate>=80?"#3f8600":"#cf1322"}}),(0,Q.jsx)(w.Z,{percent:B.hitRate,size:"small"})]}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.unmatched"}),value:B.unmatchedQuestions,valueStyle:{color:B.unmatchedQuestions>20?"#cf1322":"#3f8600"}})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.updated"}),value:B.updatedToday,suffix:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.unit.articles"})})})]}),(0,Q.jsx)(v.Z,{style:{marginTop:16},children:(0,Q.jsx)(M.Z,{span:24,children:(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.category"}),children:(0,Q.jsx)(A.Z,y()({},N))})})}),(0,Q.jsx)(v.Z,{style:{marginTop:16},children:(0,Q.jsx)(M.Z,{span:24,children:(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.knowledge.recent"}),children:(0,Q.jsx)(T.Z,{size:"small",dataSource:B.recentUpdates,renderItem:function(t){return(0,Q.jsx)(T.Z.Item,{extra:t.time,children:t.title})}})})})})]}),(0,Q.jsxs)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.overview"}),style:{marginTop:16},children:[(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsxs)(b.Z,{type:"inner",children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.pending"}),value:J,valueStyle:{color:J>20?"#f5222d":"#1890ff"},prefix:(0,Q.jsx)(K.Z,{})}),(0,Q.jsx)(w.Z,{percent:J/(J+X+Y)*100,size:"small",status:J>20?"exception":"active"})]})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{type:"inner",children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.processing"}),value:X,prefix:(0,Q.jsx)(U.Z,{spin:!0}),valueStyle:{color:"#1890ff"}})})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{type:"inner",children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.completed"}),value:Y,prefix:(0,Q.jsx)(H.Z,{}),valueStyle:{color:"#52c41a"}})})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{type:"inner",children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.timeout"}),value:$,prefix:(0,Q.jsx)(P.Z,{}),valueStyle:{color:$>0?"#f5222d":"#52c41a"}})})})]}),(0,Q.jsxs)(v.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority"}),children:(0,Q.jsxs)(v.Z,{gutter:[8,8],children:[(0,Q.jsxs)(M.Z,{span:8,children:[(0,Q.jsx)(I.Z,{color:"red",text:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority.high"})}),(0,Q.jsx)("div",{children:_.high})]}),(0,Q.jsxs)(M.Z,{span:8,children:[(0,Q.jsx)(I.Z,{color:"orange",text:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority.medium"})}),(0,Q.jsx)("div",{children:_.medium})]}),(0,Q.jsxs)(M.Z,{span:8,children:[(0,Q.jsx)(I.Z,{color:"blue",text:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.priority.low"})}),(0,Q.jsx)("div",{children:_.low})]})]})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsxs)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.response"}),children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.firstResponseTime"}),value:et,suffix:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.unit.minutes"}),valueStyle:{color:et<=30?"#52c41a":"#f5222d"}}),(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.resolveTime"}),value:st,suffix:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.unit.minutes"}),style:{marginTop:8}})]})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsxs)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.satisfaction"}),children:[(0,Q.jsx)(F.Z,{value:tt,suffix:"/5",precision:1}),(0,Q.jsx)(k.Z,{disabled:!0,value:Math.round(tt),style:{marginTop:8}})]})})]}),(0,Q.jsx)(v.Z,{style:{marginTop:16},children:(0,Q.jsx)(M.Z,{span:24,children:(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.ticket.trend"}),children:(0,Q.jsx)(R.Z,y()({},d))})})})]}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.bot.unknown.title"}),style:{marginTop:16},children:(0,Q.jsx)(T.Z,{header:(0,Q.jsx)("div",{children:t.formatMessage({id:"statistic.bot.unknown.title"})}),dataSource:E.unknownQuestions,renderItem:function(t){return(0,Q.jsxs)(T.Z.Item,{children:[(0,Q.jsx)("span",{children:t.question}),(0,Q.jsx)("span",{children:t.count})]})}})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.service.ratio"}),value:92,suffix:t.formatMessage({id:"statistic.service.percentage"},{value:92}),valueStyle:{color:"#3f8600"}})})}),(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.bot.performance.title"}),children:(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.bot.performance.resolve"}),value:L,suffix:t.formatMessage({id:"statistic.service.percentage"},{value:L}),prefix:(0,Q.jsx)(H.Z,{style:{color:"#52c41a"}})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.bot.performance.transfer"}),value:W,suffix:t.formatMessage({id:"statistic.service.percentage"},{value:W}),prefix:(0,Q.jsx)(U.Z,{style:{color:"#faad14"}})})}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.bot.performance.satisfaction"}),value:G,suffix:"/5",prefix:(0,Q.jsx)(V.Z,{style:{color:"#1890ff"}})})})]})})]})},L=s(51365),G=s(3849),W=s(67402),B=s(55551),N=s(41525),J=s(37470),X=L.default.RangePicker,Y=h.Z.TabPane,$=function(){var t=(0,g.useIntl)(),e=(0,g.useAccess)(),s=(0,f.useState)("week"),i=c()(s,2),r=i[0],o=i[1],l=(0,f.useState)(["",""]),d=c()(l,2),u=(d[0],d[1]),x=[{label:t.formatMessage({id:"statistic.time.today"}),value:"today"},{label:t.formatMessage({id:"statistic.time.week"}),value:"week"},{label:t.formatMessage({id:"statistic.time.month"}),value:"month"},{label:t.formatMessage({id:"statistic.time.custom"}),value:"custom"}],m={byTime:[{date:"2024-01-01",human:156,bot:423,total:579},{date:"2024-01-02",human:178,bot:445,total:623}],byChannel:[{channel:"Web",count:3580},{channel:"Mobile",count:2860},{channel:"WeChat",count:1920},{channel:"API",count:980}],byGroup:[{group:"售前组",count:2580},{group:"售后组",count:1860},{group:"技术组",count:1520}]},j={workload:[{agent:"张三",sessions:156,messages:1280,tickets:45,onlineHours:7.5}],quality:[{agent:"张三",responseTime:25,satisfaction:4.5,resolveRate:92.5,timeoutRate:3.2}]},p={distribution:{location:[{region:"华东",count:3580},{region:"华南",count:2860},{region:"华北",count:1920}],device:[{type:"PC",count:4580},{type:"Mobile",count:3860},{type:"Tablet",count:920}],time:[{hour:"09:00",count:256},{hour:"10:00",count:358}]},behavior:{questions:[{question:"如何修改密码",count:258},{question:"产品价格咨询",count:236}],paths:[{path:"首页>产品>咨询",count:1580},{path:"搜索>咨询",count:980}],duration:[{range:"0-1分钟",count:1580},{range:"1-5分钟",count:2360}]}},Z={data:m.byTime,xField:"date",yField:"value",seriesField:"type",smooth:!0},F=function(){var t=n()(a()().mark((function t(e,s){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),w=[{title:t.formatMessage({id:"statistic.agent.name"}),dataIndex:"agent"},{title:t.formatMessage({id:"statistic.agent.sessions"}),dataIndex:"sessions"},{title:t.formatMessage({id:"statistic.agent.messages"}),dataIndex:"messages"},{title:t.formatMessage({id:"statistic.agent.tickets"}),dataIndex:"tickets"},{title:t.formatMessage({id:"statistic.agent.onlineHours"}),dataIndex:"onlineHours"}],k=[{title:t.formatMessage({id:"statistic.agent.name"}),dataIndex:"agent"},{title:t.formatMessage({id:"statistic.agent.responseTime"}),dataIndex:"responseTime"},{title:t.formatMessage({id:"statistic.agent.satisfaction"}),dataIndex:"satisfaction"},{title:t.formatMessage({id:"statistic.agent.resolveRate"}),dataIndex:"resolveRate"},{title:t.formatMessage({id:"statistic.agent.timeoutRate"}),dataIndex:"timeoutRate"}];return(0,Q.jsxs)(g.Access,{accessible:e.canDebug(),fallback:(0,Q.jsx)(g.FormattedMessage,{id:"service.statistic.noAccess"}),children:[(0,Q.jsx)(b.Z,{children:(0,Q.jsxs)(G.Z,{children:[(0,Q.jsx)(W.ZP.Group,{options:x,value:r,onChange:function(t){return e=t.target.value,o(e),void F(e);var e}}),"custom"===r&&(0,Q.jsx)(X,{onChange:function(t,e){t&&(u([e[0],e[1]]),F("custom",e))}})]})}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.session.title"}),style:{marginTop:16},children:(0,Q.jsxs)(h.Z,{defaultActiveKey:"trend",children:[(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.session.trend"}),children:(0,Q.jsx)(R.Z,y()({},Z))},"trend"),(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.session.channel"}),children:(0,Q.jsx)(A.Z,y()({data:m.byChannel},{angleField:"count",colorField:"channel",radius:.8,label:{type:"outer",content:"{name} {percentage}"}}))},"channel"),(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.session.group"}),children:(0,Q.jsx)(N.Z,y()({data:m.byGroup},{xField:"group",yField:"count",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}}}))},"group")]})}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.agent.title"}),style:{marginTop:16},children:(0,Q.jsxs)(h.Z,{defaultActiveKey:"workload",children:[(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.agent.workload"}),children:(0,Q.jsx)(B.Z,{dataSource:j.workload,columns:w})},"workload"),(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.agent.quality"}),children:(0,Q.jsx)(B.Z,{dataSource:j.quality,columns:k})},"quality")]})}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.bot.title"}),style:{marginTop:16},children:(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.bot.usage"}),children:(0,Q.jsx)(J.Z,y()({},{xField:"date",yField:"count",seriesField:"type",smooth:!0}))})}),(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsx)(b.Z,{type:"inner",title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.bot.performance"}),children:(0,Q.jsx)(R.Z,y()({},{xField:"date",yField:"value",seriesField:"metric"}))})})]})}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.user.title"}),style:{marginTop:16},children:(0,Q.jsxs)(h.Z,{defaultActiveKey:"distribution",children:[(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.user.distribution"}),children:(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(A.Z,y()({data:p.distribution.location},{angleField:"count",colorField:"region",radius:.8}))}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(A.Z,y()({data:p.distribution.device},{angleField:"count",colorField:"type",radius:.8}))}),(0,Q.jsx)(M.Z,{span:8,children:(0,Q.jsx)(N.Z,y()({data:p.distribution.time},{xField:"hour",yField:"count"}))})]})},"distribution"),(0,Q.jsx)(Y,{tab:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.history.user.behavior"})},"behavior")]})})]})},_=s(29266),tt=s(72608),et=s(88996),st=s(75365),it=s(97416),at=s(92974),rt=s(67444),nt=s(83890),ot=function(){var t=(0,g.useIntl)(),e=(0,g.useAccess)(),s=(0,f.useState)(5),i=c()(s,2),r=(i[0],i[1],(0,f.useState)(!1)),o=c()(r,2),l=(o[0],o[1]),d={summary:{total:8,critical:2,warning:3,info:3,resolved:12},metrics:{queueLength:{current:25,threshold:20,status:"error"},responseTime:{current:45,threshold:30,status:"warning"},botAccuracy:{current:82,threshold:85,status:"warning"},onlineAgents:{current:3,threshold:5,status:"critical"}},activeAlerts:[{id:1,type:"critical",metric:"queueLength",message:"等待队列超过阈值",time:"2024-01-23 14:30:25",value:25,threshold:20}],trends:{hourly:[{time:"13:00",alerts:2},{time:"14:00",alerts:5}]}},u={percent:.75,range:{color:["#ff4d4f","#ffa940","#52c41a"]},indicator:{pointer:{style:{stroke:"#D0D0D0"}},pin:{style:{stroke:"#D0D0D0"}}},statistic:{title:{formatter:function(){return t.formatMessage({id:"statistic.warning.health"})},style:{fontSize:"16px"}},content:{formatter:function(t){var e=t.percent;return"".concat((100*e).toFixed(0),"%")}}}},x={data:d.trends.hourly,xField:"time",yField:"alerts",smooth:!0,areaStyle:{fill:"l(270) 0:#fff 1:#ff4d4f"}},m=[{title:t.formatMessage({id:"statistic.warning.type"}),dataIndex:"type",render:function(t){var e="critical"===t?"red":"warning"===t?"orange":"blue";return(0,Q.jsx)(_.Z,{color:e,children:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.level.".concat(t)})})}},{title:t.formatMessage({id:"statistic.warning.metric"}),dataIndex:"metric",render:function(t){return(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.metric.".concat(t)})}},{title:t.formatMessage({id:"statistic.warning.value"}),dataIndex:"value"},{title:t.formatMessage({id:"statistic.warning.threshold"}),dataIndex:"threshold"},{title:t.formatMessage({id:"statistic.warning.time"}),dataIndex:"time"}];(0,f.useEffect)((function(){j();var t=setInterval(j,3e4);return function(){return clearInterval(t)}}),[]);var j=function(){var e=n()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{l(!0)}catch(e){tt.ZP.error(t.formatMessage({id:"statistic.loading.failed"}))}finally{l(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Q.jsxs)(g.Access,{accessible:e.canDebug(),fallback:(0,Q.jsx)(g.FormattedMessage,{id:"service.statistic.noAccess"}),children:[(0,Q.jsxs)(v.Z,{gutter:[16,16],children:[(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsxs)(b.Z,{children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.active"}),value:d.summary.total,valueStyle:{color:d.summary.total>5?"#ff4d4f":"#1890ff"},prefix:(0,Q.jsx)(at.Z,{})}),(0,Q.jsx)(w.Z,{percent:d.summary.total/20*100,status:d.summary.total>5?"exception":"active",size:"small"})]})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.critical"}),value:d.summary.critical,valueStyle:{color:"#ff4d4f"},prefix:(0,Q.jsx)(K.Z,{})})})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.warning"}),value:d.summary.warning,valueStyle:{color:"#faad14"},prefix:(0,Q.jsx)(rt.Z,{})})})}),(0,Q.jsx)(M.Z,{span:6,children:(0,Q.jsx)(b.Z,{children:(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.resolved"}),value:d.summary.resolved,valueStyle:{color:"#52c41a"},prefix:(0,Q.jsx)(H.Z,{})})})})]}),(0,Q.jsxs)(v.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.metrics"}),children:(0,Q.jsx)(v.Z,{gutter:[16,16],children:Object.entries(d.metrics).map((function(e){var s=c()(e,2),i=s[0],a=s[1];return(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsxs)(b.Z,{type:"inner",children:[(0,Q.jsx)(F.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.metric.".concat(i)}),value:a.current,valueStyle:{color:"error"===a.status?"#ff4d4f":"#faad14"},suffix:(0,Q.jsx)(et.Z,{title:"".concat(t.formatMessage({id:"statistic.warning.threshold"}),": ").concat(a.threshold),children:(0,Q.jsx)(I.Z,{status:a.status})})}),(0,Q.jsx)(w.Z,{percent:a.current/a.threshold*100,status:"error"===a.status?"exception":"active",size:"small"})]})},i)}))})})}),(0,Q.jsx)(M.Z,{span:12,children:(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.health.monitor"}),children:(0,Q.jsx)(it.Z,y()({},u))})})]}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.trend"}),style:{marginTop:16},children:(0,Q.jsx)(R.Z,y()({},x))}),(0,Q.jsx)(b.Z,{title:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.active.list"}),style:{marginTop:16},extra:(0,Q.jsxs)(G.Z,{children:[(0,Q.jsx)(st.ZP,{type:"primary",icon:(0,Q.jsx)(nt.Z,{}),children:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.acknowledge"})}),(0,Q.jsx)(st.ZP,{icon:(0,Q.jsx)(U.Z,{}),children:(0,Q.jsx)(g.FormattedMessage,{id:"statistic.warning.refresh"})})]}),children:(0,Q.jsx)(B.Z,{columns:m,dataSource:d.activeAlerts,rowKey:"id"})})]})},ct=s(53530),lt=j.Z.Content,dt=function(t){console.log(t)},ut={marginLeft:20,marginTop:10,marginRight:20},xt=function(){var t=(0,g.useIntl)(),e=(0,g.useNavigate)(),s=((0,g.useModel)("@@initialState").initialState||{}).userInfo,i=(0,u.u)((function(t){return t.setCurrentOrg})),r=(0,f.useState)(!1),o=c()(r,2),Z=o[0],y=o[1],v=(0,f.useState)(""),M=c()(v,2),b=M[0],F=M[1],w=(0,f.useState)(!1),k=c()(w,2),S=k[0],T=k[1],I=(0,f.useState)(!1),R=c()(I,2),A=R[0],C=R[1],q=function(){var t=n()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=s){t.next=2;break}return t.abrupt("return");case 2:if(null!==(null==s?void 0:s.currentOrganization)&&void 0!==(null==s?void 0:s.currentOrganization)){t.next=6;break}return console.log("before initOrganization",s),(null==s?void 0:s.platform)===x.Ogg&&C(!0),t.abrupt("return");case 6:console.log("after initOrganization"),i(null==s?void 0:s.currentOrganization);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=function(){var e=n()(a()().mark((function e(){var r,n,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==b){e.next=3;break}return l.yw.error(t.formatMessage({id:"welcome.message.org.name.required"})),e.abrupt("return");case 3:return y(!0),l.yw.loading(t.formatMessage({id:"welcome.message.org.creating"})),r=null!=s&&s.mobile?null==s?void 0:s.mobile:null==s?void 0:s.email,n={name:b,code:r,logo:"https://www.weiyuai.cn/logo.png",description:b+"description"},e.prev=7,e.next=10,(0,d.Kq)(n);case 10:200===(o=e.sent).code?(y(!1),i(o.data),l.yw.destroy(),l.yw.success(t.formatMessage({id:"welcome.message.create.success"})),C(!1),window.location.reload()):(y(!1),l.yw.destroy(),l.yw.error(t.formatMessage({id:"welcome.message.create.failed"}))),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),y(!1),l.yw.destroy(),l.yw.error(t.formatMessage({id:"welcome.message.create.failed"}));case 19:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){q(),null!=s&&s.emailVerified||null!=s&&s.mobileVerified||(l.yw.warning(t.formatMessage({id:"welcome.message.verify.email"})),l.yw.warning(t.formatMessage({id:"welcome.message.verify.mobile"})),e("/account/certification")),(0,m.Bc)()&&console.log("weiyuaiSaas")}),[s]);var P=[{key:"today",label:t.formatMessage({id:"statistic.tab.today"}),children:(0,Q.jsx)(E,{})},{key:"history",label:t.formatMessage({id:"statistic.tab.history"}),children:(0,Q.jsx)($,{})},{key:"warn",label:t.formatMessage({id:"statistic.tab.warning"}),children:(0,Q.jsx)(ot,{})}];return(0,Q.jsx)(j.Z,{children:(0,Q.jsxs)(lt,{style:ut,children:[(0,Q.jsx)(h.Z,{defaultActiveKey:"today",items:P,onChange:dt}),(0,Q.jsxs)(ct.Z,{title:t.formatMessage({id:"welcome.modal.title"}),closable:!1,open:A,onOk:z,onCancel:function(){l.yw.error(t.formatMessage({id:"welcome.message.org.required"}))},maskClosable:!1,footer:[(0,Q.jsx)(st.ZP,{type:"primary",onClick:function(){C(!1)},disabled:!0,children:t.formatMessage({id:"welcome.modal.join"})},"join"),(0,Q.jsx)(st.ZP,{type:"primary",loading:Z,onClick:function(){S?z():(T(!0),y(!1))},children:t.formatMessage({id:"welcome.modal.create"})},"create")],children:[(0,Q.jsx)("p",{children:t.formatMessage({id:"welcome.modal.description"})}),S&&(0,Q.jsx)(p.Z,{placeholder:t.formatMessage({id:"welcome.modal.input.placeholder"}),value:b,onChange:function(t){return F(t.target.value)},onPressEnter:z})]})]})})}}}]);