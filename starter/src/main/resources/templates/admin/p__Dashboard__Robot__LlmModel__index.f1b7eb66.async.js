"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2520],{21544:function(e,n,r){var t=r(93454);n.Z=function(){var e=(0,t.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},51038:function(e,n,r){var t=r(96677),l=r(94388),i=r(18735);n.Z=function(){var e=(0,i.useIntl)();return{translateString:function(n){return n&&n.startsWith(t.VoP)?e.formatMessage({id:n,defaultMessage:n}):n},translateStringTranct:function(n){return null!=n&&n.startsWith(t.VoP)||null!=n&&n.startsWith("ROLE_")?(0,l.aS)(e.formatMessage({id:n,defaultMessage:n}),10):(0,l.aS)(n,10)}}}},74408:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(21544),l=r(43650),i=r(90228),o=r.n(i),u=r(87999),d=r.n(u),a=r(48305),c=r.n(a),s=r(59153),m=r(26068),f=r.n(m),v=r(96677),h=r(18735);function p(e){return g.apply(this,arguments)}function g(){return(g=d()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/ai/model/query/org",{method:"GET",params:f()(f()({},n),{},{client:v.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=r(15558),L=r.n(x),j=r(52315),y=r(4938),k=r(13657),M=(0,j.Ue)()((0,y.mW)((0,y.tJ)((0,k.n)((function(e,n){return{llmmodelResult:{data:{content:[]}},currentLlmModel:{uid:"",nickname:""},insertLlmModel:function(n){e((function(e){e.llmmodelResult.data.content.unshift(n)}))},setLlmModelResult:function(r){e({llmmodelResult:r});var t,l=n().currentLlmModel;""!==l.uid&&void 0!==l||(null===(t=r.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmModel:r.data.content[0]})},setCurrentLlmModel:function(r){var t=n().llmmodelResult.data.content,l=t.findIndex((function(e){return e.uid===r.uid}));if(-1!==l){var i=[].concat(L()(t.slice(0,l)),[r],L()(t.slice(l+1))),o=f()(f()({},n().llmmodelResult),{},{data:{content:i}});e({llmmodelResult:o,currentLlmModel:r})}else e({currentLlmModel:r})},deleteCurrentLlmModel:function(r){var t=n().llmmodelResult.data.content,l=t.findIndex((function(e){return e.uid===r}));-1!==l?e({llmmodelResult:f()(f()({},n().llmmodelResult),{},{data:{content:[].concat(L()(t.slice(0,l)),L()(t.slice(l+1)))}})}):console.warn("LlmModel not found in cache:",r),n().currentLlmModel.uid===r&&e({currentLlmModel:{uid:""}})},deleteLlmModelCache:function(){return e({},!0)}}})),{name:v.O4M}))),Z=(0,j.Ue)()((0,y.mW)((0,y.tJ)((0,k.n)((function(e,n){return{llmproviderResult:{data:{content:[]}},currentLlmProvider:{uid:"",nickname:""},insertLlmProvider:function(n){e((function(e){e.llmproviderResult.data.content.unshift(n)}))},setLlmProviderResult:function(r){e({llmproviderResult:r});var t,l=n().currentLlmProvider;""!==l.uid&&void 0!==l||(null===(t=r.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmProvider:r.data.content[0]})},setCurrentLlmProvider:function(r){var t=n().llmproviderResult.data.content,l=t.findIndex((function(e){return e.uid===r.uid}));if(-1!==l){var i=[].concat(L()(t.slice(0,l)),[r],L()(t.slice(l+1))),o=f()(f()({},n().llmproviderResult),{},{data:{content:i}});e({llmproviderResult:o,currentLlmProvider:r})}else e({currentLlmProvider:r})},deleteCurrentLlmProvider:function(r){var t=n().llmproviderResult.data.content,l=t.findIndex((function(e){return e.uid===r}));-1!==l?e({llmproviderResult:f()(f()({},n().llmproviderResult),{},{data:{content:[].concat(L()(t.slice(0,l)),L()(t.slice(l+1)))}})}):console.warn("LlmProvider not found in cache:",r),n().currentLlmProvider.uid===r&&e({currentLlmProvider:{uid:""}})},deleteLlmProviderCache:function(){return e({},!0)}}})),{name:v.O4M}))),P=r(42526),S=r(56192),b=r(8038),R=r(91286),C=r(89620),w=r(40980),I=r(58439),T=r(9593),O=r(62601),U=r(75271),W=r(31101),q=r(93454),z=r(51038),E=r(52676),F=W.Z.Title,V=W.Z.Link,_=function(){var e=(0,q.Z)().isDarkMode,n=(0,z.Z)(),r=n.translateString,t=(n.translateStringTranct,Z((function(e){return e.currentLlmProvider}))),l=(0,U.useState)(),i=c()(l,2),u=i[0],a=i[1],m=(0,U.useState)([]),f=c()(m,2),v=f[0],h=f[1],g=M((function(e){return{currentLlmModel:e.currentLlmModel,setCurrentLlmModel:e.setCurrentLlmModel}})),x=g.currentLlmModel,L=g.setCurrentLlmModel,j=function(){var e=d()(o()().mark((function e(){var n,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmModels"),n={pageNumber:0,pageSize:20,provider:null==t?void 0:t.name},e.next=4,p(n);case 4:r=e.sent,console.log("queryLlmModelsByOrg",r),200===r.code?a(r):(console.log("error",r),s.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,U.useEffect)((function(){if(null!=u&&u.data.content){var e=u.data.content.reduce((function(e,n){var r=n.category;return e[r]||(e[r]=[]),e[r].push(n),e}),{});h(e)}else h([])}),[u]),(0,U.useEffect)((function(){console.log("currentLlmProvider",t),j()}),[t]);return(0,E.jsxs)("div",{style:{width:"50%",margin:"auto",marginTop:50},children:[(0,E.jsxs)(b.Z,{align:"center",children:[(0,E.jsx)(R.Z,{offsetTop:50,children:(0,E.jsx)(F,{children:null==t?void 0:t.nickname})}),(0,E.jsx)(V,{target:"_blank",href:null==t?void 0:t.webUrl,children:(0,E.jsx)(P.Z,{style:{marginLeft:"8px",color:"var(--color-text)",fontSize:"12px"}})})]}),(0,E.jsx)(F,{level:3,style:{marginTop:20},children:"API秘钥"}),(0,E.jsxs)(C.Z.Compact,{style:{width:"100%",marginTop:5},children:[(0,E.jsx)(w.Z.Password,{defaultValue:null==t?void 0:t.apiKey}),(0,E.jsx)(I.ZP,{onClick:function(){return s.yw.info("TODO: 即将上线")},children:"保存"})]}),(0,E.jsx)(V,{href:null==t?void 0:t.apiKeyUrl,target:"_blank",children:"点这里获取秘钥"}),(0,E.jsx)(I.ZP,{style:{marginLeft:20},size:"small",children:"检测秘钥是否有效"}),(0,E.jsx)(F,{level:3,style:{marginTop:20},children:"API地址"}),(0,E.jsx)(w.Z,{value:null==t?void 0:t.apiUrl,disabled:!0}),(0,E.jsx)(F,{level:3,style:{marginTop:20},children:"模型列表"}),Object.keys(v).map((function(n,t){return(0,E.jsxs)("div",{children:[(0,E.jsx)(T.Z,{}),(0,E.jsx)(F,{level:4,style:{marginTop:20},children:n}),(0,E.jsx)(O.Z,{itemLayout:"horizontal",dataSource:v[n],renderItem:function(n,t){return(0,E.jsx)(O.Z.Item,{style:(null==x?void 0:x.uid)===n.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){L(n)},children:(0,E.jsx)(O.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,E.jsx)(E.Fragment,{children:(null==x?void 0:x.uid)===n.uid?(0,E.jsxs)("span",{style:{color:"green"},children:[(0,E.jsx)(S.Z,{})," 默认模型"]}):null}),title:(0,E.jsx)(E.Fragment,{children:r(null==n?void 0:n.nickname)})})},t)}},t)]},t)})),(0,E.jsx)(T.Z,{}),(0,E.jsxs)(b.Z,{align:"center",children:["查看",(0,E.jsxs)(V,{href:null==t?void 0:t.docsUrl,target:"_blank",children:[null==t?void 0:t.nickname," 文档"]}),"和",(0,E.jsx)(V,{href:null==t?void 0:t.modelsUrl,target:"_blank",children:"模型"}),"获取更多详情"]})]})};function D(e){return A.apply(this,arguments)}function A(){return(A=d()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/api/v1/ai/provider/query/org",{method:"GET",params:f()(f()({},n),{},{client:v.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=r(14458),G=function(){var e=(0,q.Z)().isDarkMode,n=(0,U.useState)([]),r=c()(n,2),t=r[0],l=r[1],i=((0,h.useIntl)(),(0,U.useRef)(!1),(0,z.Z)()),u=(i.translateString,i.translateStringTranct),a=Z((function(e){return{currentLlmProvider:e.currentLlmProvider,setCurrentLlmProvider:e.setCurrentLlmProvider}})),m=a.currentLlmProvider,f=a.setCurrentLlmProvider,v=function(){var e=d()(o()().mark((function e(){var n,r,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmProviders"),n={pageNumber:0,pageSize:50},e.next=4,D(n);case 4:r=e.sent,console.log("queryLlmProvidersByOrg: ",r),200===r.code?l(null==r||null===(t=r.data)||void 0===t?void 0:t.content):s.yw.error(r.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,U.useEffect)((function(){v()}),[]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(O.Z,{itemLayout:"horizontal",dataSource:t,renderItem:function(n,r){return(0,E.jsx)(O.Z.Item,{style:(null==m?void 0:m.uid)===n.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){f(n)},children:(0,E.jsx)(O.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,E.jsx)(B.C,{src:n.avatar}),title:(0,E.jsx)(E.Fragment,{children:u(null==n?void 0:n.nickname)})})})}})})},J=l.Z.Sider,K=l.Z.Content,N=function(){var e=(0,t.Z)(),n=(e.headerStyle,e.leftSiderStyle),r=e.leftSiderWidth,i=e.contentStyle;return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(l.Z,{children:[(0,E.jsx)(J,{style:n,width:r,children:(0,E.jsx)(G,{})}),(0,E.jsx)(l.Z,{children:(0,E.jsx)(K,{style:i,children:(0,E.jsx)(_,{})})})]})})}}}]);