"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3868],{69408:function(e,t,r){r.r(t),r.d(t,{default:function(){return H}});var a=r(8247),n=r(21182),s=r(73193),o=r.n(s),d=r(84176),i=r.n(d),u=r(90819),c=r.n(u),l=r(89933),p=r.n(l),g=r(45332),f=r.n(g),h=r(86803),m=r(30921);function x(e){return v.apply(this,arguments)}function v(){return(v=p()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/thread/invite/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=r(76750),M=r(40612),S=r(55735),b=r(44521),k=r(11090),w=r(81947),I=r(53530),j=r(75365),A=r(44194),F=r(28977),T=r.n(F),E=r(31549),R=["current","pageSize"],Z=function(){var e=(0,m.useIntl)(),t=(0,A.useRef)(),r=(0,A.useState)(1),a=f()(r,2),n=a[0],s=a[1],d=(0,A.useState)(10),u=f()(d,2),l=u[0],g=u[1],v=(0,M.u)((function(e){return e.currentOrg})),F=(0,y.Z)().translateString,Z=I.Z.useModal(),q=f()(Z,2),z=(q[0],q[1]),N=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,E.jsx)(m.FormattedMessage,{id:"sender",defaultMessage:"Sender"}),dataIndex:"sender",copyable:!0,render:function(e,t,r,a){var n;return F(null===(n=t.sender)||void 0===n?void 0:n.nickname)}},{title:(0,E.jsx)(m.FormattedMessage,{id:"receiver",defaultMessage:"Receiver"}),dataIndex:"receiverNickname",copyable:!0,render:function(e,t,r,a){var n;return F(null===(n=t.receiver)||void 0===n?void 0:n.nickname)}},{title:(0,E.jsx)(m.FormattedMessage,{id:"note",defaultMessage:"Note"}),dataIndex:"note",hideInSearch:!0,copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0,copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0,copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return T()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],Y=[].concat(N),B=function(){var e=p()(c()().mark((function e(){var t;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,l),t=localStorage.getItem(S.LA8),window.open((0,b.kG)()+"/api/v1/thread/transfer/export?"+new URLSearchParams({orgUid:(null==v?void 0:v.uid)||"",pageNumber:String(n-1),pageSize:String(l),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(w.Z,{columns:Y,actionRef:t,cardBordered:!0,request:function(){var e=p()(c()().mark((function e(t,r,a){var n,d,u,l,p;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,r,a),n=t.current,d=t.pageSize,u=i()(t,R),s(n),g(d),l=o()({pageNumber:n-1,pageSize:d,orgUid:null==v?void 0:v.uid},u),e.next=7,x(l);case 7:return p=e.sent,console.log("getAllThreadInvites response:",p,l),200===p.code||h.yw.error(p.message),e.abrupt("return",{data:p.data.content,success:!0,total:p.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"thread",defaultMessage:"ThreadInvite"}),toolBarRender:function(){return[(0,E.jsx)(j.ZP,{icon:(0,E.jsx)(k.Z,{}),type:"primary",onClick:B,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),z]})};function q(e){return z.apply(this,arguments)}function z(){return(z=p()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/thread/transfer/query/org",{method:"GET",params:o()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=["current","pageSize"],Y=function(){var e=(0,m.useIntl)(),t=(0,A.useRef)(),r=(0,A.useState)(1),a=f()(r,2),n=a[0],s=a[1],d=(0,A.useState)(10),u=f()(d,2),l=u[0],g=u[1],x=(0,M.u)((function(e){return e.currentOrg})),v=(0,y.Z)().translateString,F=I.Z.useModal(),R=f()(F,2),Z=(R[0],R[1]),z=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,E.jsx)(m.FormattedMessage,{id:"sender",defaultMessage:"Sender"}),dataIndex:"senderNickname",copyable:!0,render:function(e,t,r,a){var n;return v(null===(n=t.sender)||void 0===n?void 0:n.nickname)}},{title:(0,E.jsx)(m.FormattedMessage,{id:"receiver",defaultMessage:"Receiver"}),dataIndex:"receiverNickname",copyable:!0,render:function(e,t,r,a){var n;return v(null===(n=t.receiver)||void 0===n?void 0:n.nickname)}},{title:(0,E.jsx)(m.FormattedMessage,{id:"note",defaultMessage:"Note"}),dataIndex:"note",hideInSearch:!0,copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0,copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0,copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return T()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],Y=[].concat(z),B=function(){var e=p()(c()().mark((function e(){var t;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,l),t=localStorage.getItem(S.LA8),window.open((0,b.kG)()+"/api/v1/thread/transfer/export?"+new URLSearchParams({orgUid:(null==x?void 0:x.uid)||"",pageNumber:String(n-1),pageSize:String(l),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(w.Z,{columns:Y,actionRef:t,cardBordered:!0,request:function(){var e=p()(c()().mark((function e(t,r,a){var n,d,u,l,p;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,r,a),n=t.current,d=t.pageSize,u=i()(t,N),s(n),g(d),l=o()({pageNumber:n-1,pageSize:d,orgUid:null==x?void 0:x.uid},u),e.next=7,q(l);case 7:return p=e.sent,console.log("getAllThreadTransfers response:",p,l),200===p.code||h.yw.error(p.message),e.abrupt("return",{data:p.data.content,success:!0,total:p.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"thread",defaultMessage:"ThreadTransfer"}),toolBarRender:function(){return[(0,E.jsx)(j.ZP,{icon:(0,E.jsx)(k.Z,{}),type:"primary",onClick:B,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),Z]})};function B(e){return C.apply(this,arguments)}function C(){return(C=p()(c()().mark((function e(t){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/v1/vip/rate/query/org",{method:"GET",params:o()(o()({},t),{},{client:S.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=["current","pageSize"],D=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,E.jsx)(m.FormattedMessage,{id:"score",defaultMessage:"Score"}),dataIndex:"score"},{title:(0,E.jsx)(m.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"comment",copyable:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,E.jsx)(m.FormattedMessage,{id:"agent",defaultMessage:"agent"}),dataIndex:"agent",hideInSearch:!0,render:function(e,t,r,a){return JSON.parse(t.thread.agent).nickname}},{title:(0,E.jsx)(m.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,render:function(e,t,r,a){return T()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],G=function(){var e=(0,m.useIntl)(),t=(0,A.useRef)(),r=(0,A.useState)(1),a=f()(r,2),n=a[0],s=a[1],d=(0,A.useState)(10),u=f()(d,2),l=u[0],g=u[1],x=(0,M.u)((function(e){return e.currentOrg})),v=[].concat(D,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(t,r,a,n){return[(0,E.jsx)("a",{onClick:function(){},children:e.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable")]}}]),y=function(){var e=p()(c()().mark((function e(){var t;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",n,l),t=localStorage.getItem(S.LA8),window.open((0,b.kG)()+"/api/v1/rate/export?"+new URLSearchParams({orgUid:(null==x?void 0:x.uid)||"",pageNumber:String(n-1),pageSize:String(l),accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsx)("div",{style:{padding:"16px"},children:(0,E.jsx)(w.Z,{columns:v,actionRef:t,cardBordered:!0,request:function(){var e=p()(c()().mark((function e(t,r,a){var n,d,u,l,p;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.current,d=t.pageSize,u=i()(t,U),s(n),g(d),l=o()({pageNumber:n-1,pageSize:d,orgUid:null==x?void 0:x.uid},u),e.next=6,B(l);case 6:return p=e.sent,console.log("queryRatesByOrgUid response:",p.data,l),200===p.code||h.yw.error(p.message),e.abrupt("return",{data:p.data.content,success:!0,total:p.data.totalElements});case 10:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"评价记录",toolBarRender:function(){return[(0,E.jsx)(j.ZP,{icon:(0,E.jsx)(k.Z,{}),type:"primary",onClick:y,children:e.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}})})},H=function(){var e=(0,m.useIntl)(),t=[{key:"thread",label:e.formatMessage({id:"thread.tab.all"}),children:(0,E.jsx)(n.Z,{type:S.Nqz})},{key:"rate",label:e.formatMessage({id:"thread.tab.rate"}),children:(0,E.jsx)(G,{})},{key:"transfer",label:e.formatMessage({id:"thread.tab.transfer"}),children:(0,E.jsx)(Y,{})},{key:"invite",label:e.formatMessage({id:"thread.tab.invite"}),children:(0,E.jsx)(Z,{})}];return(0,E.jsx)(a.Z,{defaultActiveKey:"thread",items:t})}}}]);