"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1929],{51042:function(ee,S,e){var p=e(1413),f=e(67294),D=e(42110),P=e(91146),u=function(I,s){return f.createElement(P.Z,(0,p.Z)((0,p.Z)({},I),{},{ref:s,icon:D.Z}))},T=f.forwardRef(u);S.Z=T},64317:function(ee,S,e){var p=e(1413),f=e(91),D=e(22270),P=e(67294),u=e(66758),T=e(43889),O=e(85893),I=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],L=function(i,$){var Z=i.fieldProps,V=i.children,j=i.params,G=i.proFieldProps,F=i.mode,Y=i.valueEnum,R=i.request,A=i.showSearch,k=i.options,N=(0,f.Z)(i,I),z=(0,P.useContext)(u.Z);return(0,O.jsx)(T.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,D.h)(Y),request:R,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({options:k,mode:F,showSearch:A,getPopupContainer:z.getPopupContainer},Z),ref:$,proFieldProps:G},N),{},{children:V}))},C=P.forwardRef(function(a,i){var $=a.fieldProps,Z=a.children,V=a.params,j=a.proFieldProps,G=a.mode,F=a.valueEnum,Y=a.request,R=a.options,A=(0,f.Z)(a,s),k=(0,p.Z)({options:R,mode:G||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},$),N=(0,P.useContext)(u.Z);return(0,O.jsx)(T.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,D.h)(F),request:Y,params:V,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({getPopupContainer:N.getPopupContainer},k),ref:i,proFieldProps:j},A),{},{children:Z}))}),K=P.forwardRef(L),x=C,v=K;v.SearchSelect=x,v.displayName="ProFormComponent",S.Z=v},90672:function(ee,S,e){var p=e(1413),f=e(91),D=e(67294),P=e(43889),u=e(85893),T=["fieldProps","proFieldProps"],O=function(s,L){var C=s.fieldProps,K=s.proFieldProps,x=(0,f.Z)(s,T);return(0,u.jsx)(P.Z,(0,p.Z)({ref:L,valueType:"textarea",fieldProps:C,proFieldProps:K},x))};S.Z=D.forwardRef(O)},18200:function(ee,S,e){e.r(S),e.d(S,{default:function(){return Te}});var p=e(77154),f=e(21612),D=e(52670),P=e(97857),u=e.n(P),T=e(13769),O=e.n(T),I=e(15009),s=e.n(I),L=e(99289),C=e.n(L),K=e(5574),x=e.n(K),v=e(80049),a=e(85615),i=e(86745);function $(m){return Z.apply(this,arguments)}function Z(){return Z=C()(s()().mark(function m(o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/quickreply/query/org",{method:"GET",params:u()(u()({},o),{},{client:a.bV})}));case 1:case"end":return r.stop()}},m)})),Z.apply(this,arguments)}function V(m){return j.apply(this,arguments)}function j(){return j=C()(s()().mark(function m(o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/quickreply/create",{method:"POST",data:u()(u()({},o),{},{client:a.bV})}));case 1:case"end":return r.stop()}},m)})),j.apply(this,arguments)}function G(m){return F.apply(this,arguments)}function F(){return F=C()(s()().mark(function m(o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/quickreply/update",{method:"POST",data:u()(u()({},o),{},{client:a.bV})}));case 1:case"end":return r.stop()}},m)})),F.apply(this,arguments)}function Y(m){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function m(o){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/quickreply/delete",{method:"POST",data:_objectSpread(_objectSpread({},o),{},{client:HTTP_CLIENT})}));case 1:case"end":return r.stop()}},m)})),R.apply(this,arguments)}var A=e(87676),k=e(51042),N=e(43892),z=e(14726),B=e(67294),ue=e(89102),ie=e(34994),se=e(64317),de=e(5966),ce=e(90672),pe=e(8232),ve=e(85265),me=e(42075),t=e(85893),he=function(o){var g=o.isEdit,r=o.quickreply,Q=o.open,H=o.onClose,re=o.onSubmit,X=pe.Z.useForm(),te=x()(X,1),M=te[0],J=(0,A.u)(function(d){return d.orgCurrent}),q=(0,ue.v)(function(d){return d.categorySelectOptions});(0,B.useEffect)(function(){if(g){var d;M.setFieldsValue({type:r==null?void 0:r.type,title:r==null?void 0:r.title,content:r==null?void 0:r.content,categoryUid:r==null||(d=r.category)===null||d===void 0?void 0:d.uid})}else M.resetFields()},[Q]);var ne=function(E){console.log("category selected ".concat(E))},W=function(E){console.log("type selected ".concat(E))},ae=function(){console.log("handleSubmit"),M.validateFields().then(function(E){console.log(E),re(u()(u()(u()({},r),E),{},{orgUid:J==null?void 0:J.uid}))}).catch(function(E){console.log("Form errors:",E),v.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ve.Z,{title:g?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:H,open:Q,extra:(0,t.jsxs)(me.Z,{children:[(0,t.jsx)(z.ZP,{onClick:H,children:"\u53D6\u6D88"}),(0,t.jsx)(z.ZP,{onClick:ae,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,t.jsxs)(ie.A,{form:M,initialValues:u()({},r),submitter:{render:function(){return null}},children:[(0,t.jsx)(se.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:q,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:ne}}),(0,t.jsx)(se.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:a.PY},{label:"\u56FE\u7247",value:a.Qm},{label:"\u89C6\u9891",value:a.tV},{label:"\u97F3\u9891",value:a.ai},{label:"\u6587\u4EF6",value:a.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:W}}),(0,t.jsx)(de.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,t.jsx)(ce.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},fe=he,ye=e(73803),Pe=["current"],ge=function(){var o=(0,B.useRef)(),g=(0,B.useState)(!0),r=x()(g,2),Q=r[0],H=r[1],re=(0,B.useState)(),X=x()(re,2),te=X[0],M=X[1],J=(0,B.useState)(!1),q=x()(J,2),ne=q[0],W=q[1],ae=(0,ye.Z)(),d=ae.translateString,E=(0,A.u)(function(l){return l.orgCurrent}),_=(0,ue.v)(function(l){return l.currentCategory}),xe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u540D\u79F0",dataIndex:"title",copyable:!0,render:function(h,n){return d(n==null?void 0:n.title)}},{title:"\u5185\u5BB9",dataIndex:"content",render:function(h,n){return d(n==null?void 0:n.content)}},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0},{title:"\u5206\u7C7B",dataIndex:"category",hideInSearch:!0,render:function(h,n){var y;return d((y=n.category)===null||y===void 0?void 0:y.name)}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(h,n,y,b){return[(0,t.jsx)("a",{onClick:function(){Ze(n)},children:"\u4FEE\u6539"},"editable")]}}],Oe=function(){M(void 0),H(!1),W(!0)},Ze=function(h){M(h),H(!0),W(!0)},je=function(){var l=C()(s()().mark(function h(n){var y,b;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(console.log("handleSubmitDrawer",n),Q?v.yw.loading("\u6B63\u5728\u4FEE\u6539\u5FEB\u6377\u56DE\u590D"):v.yw.loading("\u6B63\u5728\u521B\u5EFA\u5FEB\u6377\u56DE\u590D"),!Q){c.next=8;break}return c.next=5,G(n);case 5:c.t0=c.sent,c.next=11;break;case 8:return c.next=10,V(n);case 10:c.t0=c.sent;case 11:y=c.t0,console.log("createQuickreply response:",n,y),y.code===200?(v.yw.destroy(),v.yw.success("\u5FEB\u6377\u56DE\u590D\u521B\u5EFA\u6210\u529F"),W(!1),(b=o.current)===null||b===void 0||b.reloadAndRest()):(v.yw.destroy(),v.yw.error(y.message));case 14:case"end":return c.stop()}},h)}));return function(n){return l.apply(this,arguments)}}(),Fe=function(){W(!1)};return(0,B.useEffect)(function(){var l;console.log("currentCategory:",_),(l=o.current)===null||l===void 0||l.reloadAndRest()},[_]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{columns:xe,actionRef:o,cardBordered:!0,request:function(){var l=C()(s()().mark(function h(n,y,b){var oe,c,le,w;return s()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return console.log("request:",n,y,b),v.yw.loading("\u6B63\u5728\u52A0\u8F7D\u5FEB\u6377\u56DE\u590D"),oe=n.current,c=O()(n,Pe),le=u()({pageNumber:n.current-1,orgUid:E.uid,categoryUid:_.uid==="all"?"":_.uid},c),U.next=6,$(le);case 6:return w=U.sent,console.log("getAllQuickreplys response:",le,w),v.yw.destroy(),w.code===200||v.yw.error(w.message),U.abrupt("return",{data:w.data.content,success:!0,total:w.data.totalElements});case 11:case"end":return U.stop()}},h)}));return function(h,n,y){return l.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(h){console.log("page:",h)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u56DE\u590D",toolBarRender:function(){return[(0,t.jsx)(z.ZP,{icon:(0,t.jsx)(k.Z,{}),type:"primary",onClick:Oe,children:"\u521B\u5EFA"},"button")]}}),(0,t.jsx)(fe,{isEdit:Q,open:ne,quickreply:te,onClose:Fe,onSubmit:je})]})},Ee=ge,Ce=f.Z.Sider,Se=f.Z.Content,De=function(){var o=(0,p.Z)(),g=o.leftSiderStyle,r=o.contentStyle;return(0,t.jsx)("div",{children:(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(Ce,{style:g,children:(0,t.jsx)(D.Z,{type:a.dt})}),(0,t.jsx)(f.Z,{children:(0,t.jsx)(Se,{style:r,children:(0,t.jsx)(Ee,{})})})]})})},Te=De}}]);
