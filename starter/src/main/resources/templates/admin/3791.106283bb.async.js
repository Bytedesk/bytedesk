"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3791],{66916:function(e,t,n){n.d(t,{$l:function(){return m},JT:function(){return S},gf:function(){return q},lg:function(){return g},n1:function(){return y},p0:function(){return c},s9:function(){return f}});var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),a=n(89933),u=n.n(a),l=n(55735),d=n(30921);function c(e){return v.apply(this,arguments)}function v(){return(v=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return(x=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update/avatar",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return b.apply(this,arguments)}function b(){return(b=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return k.apply(this,arguments)}function k(){return(k=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},99885:function(e,t,n){n.d(t,{Yg:function(){return m},kh:function(){return g},pf:function(){return c},y:function(){return f}});var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),a=n(89933),u=n.n(a),l=n(55735),d=n(30921);function c(e){return v.apply(this,arguments)}function v(){return(v=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},69842:function(e,t,n){n.d(t,{H:function(){return c}});var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),a=n(89933),u=n.n(a),l=n(55735),d=n(30921);function c(e){return v.apply(this,arguments)}function v(){return(v=u()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/vip/invoice/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},43705:function(e,t,n){var i=n(73193),o=n.n(i),s=n(90819),r=n.n(s),a=n(89933),u=n.n(a),l=n(45332),d=n.n(l),c=n(86803),v=n(99885),g=n(66916),p=n(76750),f=n(66310),h=n(40612),m=n(56691),w=n(5651),y=n(69169),x=n(48708),S=n(84881),b=n(30921),q=n(32943),k=n(75365),F=n(38775),j=n(3849),C=n(44194),U=n(1902),M=n(95490),Z=n(55735),T=n(24170),A=n(72614),I=n(11184),P=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),s=d()(i,1)[0],a=(0,b.useIntl)(),l=(0,b.useNavigate)(),R=(0,p.Z)().translateString,L=(0,I.M)(),W=L.config,_=L.updateConfig,N=(0,h.u)((function(e){return e.currentOrg})),O=(0,C.useState)(),V=d()(O,2),D=V[0],E=V[1],B=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=B.currentRobot,Y=B.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),z=H.currentAgent,$=H.setCurrentAgent,Q=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),K=Q.currentWorkgroup,G=Q.setCurrentWorkgroup,J=(0,C.useMemo)((function(){return n===Z._X4?{chatType:Z.xtN,chatSid:X.uid}:n===Z.Njn?{chatType:Z.scI,chatSid:z.uid}:n===Z.aZD?{chatType:Z.vPY,chatSid:K.uid}:{chatType:Z.xtN,chatSid:""}}),[n,X,z,K]),ee=J.chatType,te=J.chatSid,ne=function(){var e=u()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(a.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==N?void 0:N.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?E(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,C.useEffect)((function(){ne()}),[]),(0,C.useEffect)((function(){var e,t,i;if(n===Z._X4)s.setFieldsValue({showFaqs:null==X||null===(e=X.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==X||null===(t=X.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),null!=X&&null!==(i=X.serviceSettings)&&void 0!==i&&i.showFaqs?_(o()(o()({},W),{},{window:o()(o()({},W.window),{},{width:680}),chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})})):_(o()(o()({},W),{},{window:o()(o()({},W.window),{},{width:380}),chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})}));else if(n===Z.Njn){var r,a,u;s.setFieldsValue({showFaqs:null==z||null===(r=z.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==z||null===(a=z.serviceSettings)||void 0===a||null===(a=a.faqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),null!=z&&null!==(u=z.serviceSettings)&&void 0!==u&&u.showFaqs?_(o()(o()({},W),{},{window:o()(o()({},W.window),{},{width:680}),chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})})):_(o()(o()({},W),{},{window:o()(o()({},W.window),{},{width:380}),chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})}))}else if(n===Z.aZD){var l,d,c;s.setFieldsValue({showFaqs:null==K||null===(l=K.serviceSettings)||void 0===l?void 0:l.showFaqs,faqUids:null==K||null===(d=K.serviceSettings)||void 0===d||null===(d=d.faqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),null!=K&&null!==(c=K.serviceSettings)&&void 0!==c&&c.showFaqs?_(o()(o()({},W),{},{window:o()(o()({},W.window),{},{width:680}),chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})})):_(o()(o()({},W),{},{window:o()(o()({},W.window),{},{width:380}),chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})}))}}),[X,z,K,ee,te]);var ie=function(){var e=u()(r()().mark((function e(t){var i,s,u,l,d,v,p,f,h,m,w,y,x,S,b,q,k,F,j,C,U,M,I,P,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==Z._X4){e.next=11;break}return v=o()(o()({},X),{},{serviceSettings:o()(o()({},X.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,welcomeFaqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.welcomeFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),quickFaqUids:null==X||null===(s=X.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==X||null===(u=X.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(d=X.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",v),e.next=6,(0,g.$l)(v);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),Y(p.data)):(c.yw.destroy(),c.yw.error(p.message)),e.next=29;break;case 11:if(n!==Z.Njn){e.next=21;break}return b=o()(o()({},z),{},{serviceSettings:o()(o()({},null==z?void 0:z.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,welcomeFaqUids:null==z||null===(f=z.serviceSettings)||void 0===f||null===(f=f.welcomeFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),quickFaqUids:null==z||null===(h=z.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),guessFaqUids:null==z||null===(m=z.serviceSettings)||void 0===m||null===(m=m.guessFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),hotFaqUids:null==z||null===(w=z.serviceSettings)||void 0===w||null===(w=w.hotFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),shortcutFaqUids:null==z||null===(y=z.serviceSettings)||void 0===y||null===(y=y.shortcutFaqs)||void 0===y?void 0:y.map((function(e){return e.uid}))}),messageLeaveSettings:o()(o()({},z.messageLeaveSettings),{},{worktimeUids:null==z||null===(x=z.messageLeaveSettings)||void 0===x||null===(x=x.worktimes)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:o()(o()({},z.robotSettings),{},{robotUid:null==z||null===(S=z.robotSettings)||void 0===S||null===(S=S.robot)||void 0===S?void 0:S.uid}),autoReplySettings:o()({},z.autoReplySettings)}),console.log("agentObject:",b),e.next=16,(0,T.sE)(b);case 16:q=e.sent,console.log("updateAgent response:",q),200===q.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),$(q.data)):(c.yw.destroy(),c.yw.error(q.message)),e.next=29;break;case 21:if(n!==Z.aZD){e.next=29;break}return P=o()(o()({},K),{},{serviceSettings:o()(o()({},K.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,welcomeFaqUids:null==K||null===(k=K.serviceSettings)||void 0===k||null===(k=k.welcomeFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),quickFaqUids:null==K||null===(F=K.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==K||null===(j=K.serviceSettings)||void 0===j||null===(j=j.guessFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),hotFaqUids:null==K||null===(C=K.serviceSettings)||void 0===C||null===(C=C.hotFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),shortcutFaqUids:null==K||null===(U=K.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},K.robotSettings),{},{robotUid:null==K||null===(M=K.robotSettings)||void 0===M||null===(M=M.robot)||void 0===M?void 0:M.uid}),messageLeaveSettings:o()(o()({},K.messageLeaveSettings),{},{worktimeUids:null==K||null===(I=K.messageLeaveSettings)||void 0===I||null===(I=I.worktimes)||void 0===I?void 0:I.map((function(e){return e.uid}))}),agentUids:K.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",P),e.next=26,(0,A.W5)(P);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),G(R.data)):(c.yw.destroy(),c.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{children:[(0,P.jsx)(q.Z,{message:a.formatMessage({id:"faq.create.first"}),type:"success",action:(0,P.jsx)(k.ZP,{type:"link",icon:(0,P.jsx)(m.Z,{}),onClick:function(){return window.open(Z.VPj)},children:a.formatMessage({id:"setting.helpcenter"})})}),(0,P.jsx)(F.Z,{}),(0,P.jsxs)(y.A,{form:s,layout:"vertical",onFinish:ie,children:[(0,P.jsx)(x.Z,{label:a.formatMessage({id:"faq.show.faqs"}),name:"showFaqs",fieldProps:{onChange:oe}}),(0,P.jsx)(y.A.Item,{children:(0,P.jsx)(k.ZP,{type:"primary",icon:(0,P.jsx)(w.Z,{}),onClick:function(){l("/kb/llm/data")},children:a.formatMessage({id:"faq.add.faqs"})},"github")}),(0,P.jsx)(S.Z,{name:"faqUids",width:"md",label:a.formatMessage({id:"menu.kbase.faq"}),options:null==D||null===(t=D.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:R(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,P.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,P.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:a.formatMessage({id:"chat.window.show"})}),(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:a.formatMessage({id:"chat.window.hide"})})]})]})}},71469:function(e,t,n){var i=n(73193),o=n.n(i),s=n(90819),r=n.n(s),a=n(89933),u=n.n(a),l=n(45332),d=n.n(l),c=n(86803),v=n(99885),g=n(66916),p=n(76750),f=n(66310),h=n(40612),m=n(56691),w=n(5651),y=n(69169),x=n(48708),S=n(84881),b=n(30921),q=n(32943),k=n(75365),F=n(38775),j=n(3849),C=n(44194),U=n(1902),M=n(95490),Z=n(55735),T=n(24170),A=n(72614),I=n(11184),P=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),s=d()(i,1)[0],a=(0,b.useIntl)(),l=(0,b.useNavigate)(),R=(0,p.Z)().translateString,L=(0,I.M)(),W=L.config,_=L.updateConfig,N=(0,h.u)((function(e){return e.currentOrg})),O=(0,C.useState)(),V=d()(O,2),D=V[0],E=V[1],B=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=B.currentRobot,Y=B.setCurrentRobot,H=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),z=H.currentAgent,$=H.setCurrentAgent,Q=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),K=Q.currentWorkgroup,G=Q.setCurrentWorkgroup,J=(0,C.useMemo)((function(){return n===Z._X4?{chatType:Z.xtN,chatSid:X.uid}:n===Z.Njn?{chatType:Z.scI,chatSid:z.uid}:n===Z.aZD?{chatType:Z.vPY,chatSid:K.uid}:{chatType:Z.xtN,chatSid:""}}),[n,X,z,K]),ee=J.chatType,te=J.chatSid,ne=function(){var e=u()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(a.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==N?void 0:N.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?E(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,C.useEffect)((function(){ne()}),[N]),(0,C.useEffect)((function(){var e,t;if(n===Z._X4)s.setFieldsValue({showQuickFaqs:null==X||null===(e=X.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==X||null===(t=X.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),_(o()(o()({},W),{},{chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})}));else if(n===Z.Njn){var i,r;s.setFieldsValue({showQuickFaqs:null==z||null===(i=z.serviceSettings)||void 0===i?void 0:i.showQuickFaqs,quickFaqUids:null==z||null===(r=z.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),_(o()(o()({},W),{},{chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})}))}else if(n===Z.aZD){var a,u;s.setFieldsValue({showQuickFaqs:null==K||null===(a=K.serviceSettings)||void 0===a?void 0:a.showQuickFaqs,quickFaqUids:null==K||null===(u=K.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),_(o()(o()({},W),{},{chatConfig:o()(o()({},W.chatConfig),{},{org:null==N?void 0:N.uid,t:ee,sid:te})}))}}),[X,z,K,ee,te]);var ie=function(){var e=u()(r()().mark((function e(t){var i,s,u,l,d,v,p,f,h,m,w,y,x,S,b,q,k,F,j,C,U,M,I,P,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==Z._X4){e.next=11;break}return v=o()(o()({},X),{},{serviceSettings:o()(o()({},X.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,welcomeFaqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.welcomeFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==X||null===(s=X.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==X||null===(u=X.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(d=X.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",v),e.next=6,(0,g.$l)(v);case 6:p=e.sent,console.log("updateRobot response:",p),200===p.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),Y(p.data)):(c.yw.destroy(),c.yw.error(p.message)),e.next=29;break;case 11:if(n!==Z.Njn){e.next=21;break}return b=o()(o()({},z),{},{serviceSettings:o()(o()({},null==z?void 0:z.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,welcomeFaqUids:null==z||null===(f=z.serviceSettings)||void 0===f||null===(f=f.welcomeFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==z||null===(h=z.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),guessFaqUids:null==z||null===(m=z.serviceSettings)||void 0===m||null===(m=m.guessFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),hotFaqUids:null==z||null===(w=z.serviceSettings)||void 0===w||null===(w=w.hotFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),shortcutFaqUids:null==z||null===(y=z.serviceSettings)||void 0===y||null===(y=y.shortcutFaqs)||void 0===y?void 0:y.map((function(e){return e.uid}))}),robotSettings:o()(o()({},z.robotSettings),{},{robotUid:null==z||null===(x=z.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),messageLeaveSettings:o()(o()({},z.messageLeaveSettings),{},{worktimeUids:null==z||null===(S=z.messageLeaveSettings)||void 0===S||null===(S=S.worktimes)||void 0===S?void 0:S.map((function(e){return e.uid}))}),autoReplySettings:o()({},z.autoReplySettings)}),console.log("agentObject:",b),e.next=16,(0,T.sE)(b);case 16:q=e.sent,console.log("updateAgent response:",q),200===q.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),$(q.data)):(c.yw.destroy(),c.yw.error(q.message)),e.next=29;break;case 21:if(n!==Z.aZD){e.next=29;break}return P=o()(o()({},K),{},{serviceSettings:o()(o()({},K.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,welcomeFaqUids:null==K||null===(k=K.serviceSettings)||void 0===k||null===(k=k.welcomeFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),faqUids:null===(F=K.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==K||null===(j=K.serviceSettings)||void 0===j||null===(j=j.guessFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),hotFaqUids:null==K||null===(C=K.serviceSettings)||void 0===C||null===(C=C.hotFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),shortcutFaqUids:null==K||null===(U=K.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},K.robotSettings),{},{robotUid:null==K||null===(M=K.robotSettings)||void 0===M||null===(M=M.robot)||void 0===M?void 0:M.uid}),messageLeaveSettings:o()(o()({},K.messageLeaveSettings),{},{worktimeUids:null==K||null===(I=K.messageLeaveSettings)||void 0===I||null===(I=I.worktimes)||void 0===I?void 0:I.map((function(e){return e.uid}))}),agentUids:K.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",P),e.next=26,(0,A.W5)(P);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),G(R.data)):(c.yw.destroy(),c.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=u()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{children:[(0,P.jsx)(q.Z,{message:a.formatMessage({id:"faq.create.first"}),type:"success",action:(0,P.jsx)(k.ZP,{type:"link",icon:(0,P.jsx)(m.Z,{}),onClick:function(){return window.open(Z.VPj)},children:a.formatMessage({id:"setting.helpcenter"})})}),(0,P.jsx)(F.Z,{}),(0,P.jsxs)(y.A,{form:s,layout:"vertical",onFinish:ie,children:[(0,P.jsx)(x.Z,{label:a.formatMessage({id:"faq.show.quick.buttons"}),name:"showQuickFaqs",fieldProps:{onChange:oe}}),(0,P.jsx)(y.A.Item,{children:(0,P.jsx)(k.ZP,{type:"primary",icon:(0,P.jsx)(w.Z,{}),onClick:function(){l("/kb/llm/data")},children:a.formatMessage({id:"faq.add.quick.buttons"})},"github")}),(0,P.jsx)(S.Z,{name:"quickFaqUids",width:"md",label:a.formatMessage({id:"menu.kbase.quickbutton"}),options:null==D||null===(t=D.data)||void 0===t?void 0:t.content.map((function(e){return{label:R(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,P.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,P.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:a.formatMessage({id:"show.chat.window"})}),(0,P.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:a.formatMessage({id:"hide.chat.window"})})]})]})}},50796:function(e,t,n){var i=n(90819),o=n.n(i),s=n(73193),r=n.n(s),a=n(89933),u=n.n(a),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(1902),h=n(66310),m=n(95490),w=n(55735),y=n(69169),x=n(48708),S=n(30921),b=n(44194),q=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),i=y.A.useForm(),s=d()(i,1)[0],a=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),l=a.currentRobot,k=a.setCurrentRobot,F=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=F.currentAgent,C=F.setCurrentAgent,U=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),M=U.currentWorkgroup,Z=U.setCurrentWorkgroup;(0,b.useEffect)((function(){var e;if(t===w._X4)s.setFieldsValue({showInputAssociation:null==l||null===(e=l.serviceSettings)||void 0===e?void 0:e.showInputAssociation});else if(t===w.Njn){var n;s.setFieldsValue({showInputAssociation:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showInputAssociation})}else if(t===w.aZD){var i;s.setFieldsValue({showInputAssociation:null==M||null===(i=M.serviceSettings)||void 0===i?void 0:i.showInputAssociation})}}),[l,j,M]);var T=function(){var e=u()(o()().mark((function e(i){var s,a,u,d,f,h,m,y,x,S,b,q,F,U,T,A,I,P,R,L,W,_,N,O,V;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleInputAssociationSubmit:",i),t!==w._X4){e.next=11;break}return h=r()(r()({},l),{},{serviceSettings:r()(r()({},l.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(s=j.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),quickFaqUids:null==l||null===(a=l.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==l||null===(u=l.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==l||null===(d=l.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==l||null===(f=l.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),k(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return T=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),quickFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==j||null===(b=j.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:r()(r()({},j.robotSettings),{},{robotUid:null==j||null===(F=j.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),messageLeaveSettings:r()(r()({},j.messageLeaveSettings),{},{worktimeUids:null==j||null===(U=j.messageLeaveSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",T),e.next=16,(0,v.sE)(T);case 16:A=e.sent,console.log("updateAgent response:",A),200===A.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),C(A.data)):(c.yw.destroy(),c.yw.error(A.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return O=r()(r()({},M),{},{serviceSettings:r()(r()({},M.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(I=j.serviceSettings)||void 0===I||null===(I=I.faqs)||void 0===I?void 0:I.map((function(e){return e.uid})),quickFaqUids:null===(P=M.serviceSettings)||void 0===P||null===(P=P.quickFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),guessFaqUids:null==M||null===(R=M.serviceSettings)||void 0===R||null===(R=R.guessFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),hotFaqUids:null==M||null===(L=M.serviceSettings)||void 0===L||null===(L=L.hotFaqs)||void 0===L?void 0:L.map((function(e){return e.uid})),shortcutFaqUids:null==M||null===(W=M.serviceSettings)||void 0===W||null===(W=W.shortcutFaqs)||void 0===W?void 0:W.map((function(e){return e.uid}))}),robotSettings:r()(r()({},M.robotSettings),{},{robotUid:null==M||null===(_=M.robotSettings)||void 0===_||null===(_=_.robot)||void 0===_?void 0:_.uid}),messageLeaveSettings:r()(r()({},M.messageLeaveSettings),{},{worktimeUids:null==M||null===(N=M.messageLeaveSettings)||void 0===N||null===(N=N.worktimes)||void 0===N?void 0:N.map((function(e){return e.uid}))}),agentUids:M.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",O),e.next=26,(0,p.W5)(O);case 26:V=e.sent,console.log("updateWorkGroup response:",V),200===V.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),Z(V.data)):(c.yw.destroy(),c.yw.error(V.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,q.jsx)("div",{children:(0,q.jsx)(y.A,{form:s,onFinish:T,children:(0,q.jsx)(x.Z,{width:"md",name:"showInputAssociation",label:n.formatMessage({id:"showInputAssociation",defaultMessage:"Show Input Association"})})})})}},75808:function(e,t,n){var i=n(90819),o=n.n(i),s=n(89933),r=n.n(s),a=n(73193),u=n.n(a),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(1902),h=n(66310),m=n(95490),w=n(55735),y=n(69169),x=n(48708),S=n(32350),b=n(30921),q=n(44194),k=n(11184),F=n(3849),j=n(75365),C=n(31549);t.Z=function(e){var t=e.type,n=(0,b.useIntl)(),i=y.A.useForm(),s=d()(i,1)[0],a=(0,k.M)(),l=a.config,U=a.updateConfig,M=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Z=M.currentRobot,T=M.setCurrentRobot,A=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),I=A.currentAgent,P=A.setCurrentAgent,R=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=R.currentWorkgroup,W=R.setCurrentWorkgroup,_=(0,q.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:Z.uid}:t===w.Njn?{chatType:w.scI,chatSid:I.uid}:t===w.aZD?{chatType:w.vPY,chatSid:L.uid}:{chatType:w.xtN,chatSid:""}}),[t,Z,I,L]),N=_.chatType,O=_.chatSid;(0,q.useEffect)((function(){var e,n,i,o,r,a;if(t===w._X4)s.setFieldsValue({autoPopup:null==Z||null===(e=Z.serviceSettings)||void 0===e?void 0:e.autoPopup,showInvite:null==Z||null===(n=Z.inviteSettings)||void 0===n?void 0:n.show,inviteText:null==Z||null===(i=Z.inviteSettings)||void 0===i?void 0:i.text}),U(u()(u()({},l),{},{autoPopup:null==Z||null===(o=Z.serviceSettings)||void 0===o?void 0:o.autoPopup,inviteConfig:{show:null==Z||null===(r=Z.inviteSettings)||void 0===r?void 0:r.show,text:null==Z||null===(a=Z.inviteSettings)||void 0===a?void 0:a.text},chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O})}));else if(t===w.Njn){var d,c,v,g,p,f;s.setFieldsValue({autoPopup:null==I||null===(d=I.serviceSettings)||void 0===d?void 0:d.autoPopup,showInvite:null==I||null===(c=I.inviteSettings)||void 0===c?void 0:c.show,inviteText:null==I||null===(v=I.inviteSettings)||void 0===v?void 0:v.text}),U(u()(u()({},l),{},{autoPopup:null==I||null===(g=I.serviceSettings)||void 0===g?void 0:g.autoPopup,inviteConfig:{show:null==I||null===(p=I.inviteSettings)||void 0===p?void 0:p.show,text:null==I||null===(f=I.inviteSettings)||void 0===f?void 0:f.text},chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O})}))}else if(t===w.aZD){var h,m,y,x,S,b;s.setFieldsValue({autoPopup:null==L||null===(h=L.serviceSettings)||void 0===h?void 0:h.autoPopup,showInvite:null==L||null===(m=L.inviteSettings)||void 0===m?void 0:m.show,inviteText:null==L||null===(y=L.inviteSettings)||void 0===y?void 0:y.text}),U(u()(u()({},l),{},{autoPopup:null==L||null===(x=L.serviceSettings)||void 0===x?void 0:x.autoPopup,inviteConfig:{show:null==L||null===(S=L.inviteSettings)||void 0===S?void 0:S.show,text:null==L||null===(b=L.inviteSettings)||void 0===b?void 0:b.text},chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O})}))}}),[Z,I,L,N,O]);var V=function(){var e=r()(o()().mark((function e(i){var s,r,a,l,d,f,h,m,y,x,S,b,q,k,F,j,C,U,M,A,R,_,N,O,V,D,E,B;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),t!==w._X4){e.next=11;break}return h=u()(u()({},Z),{},{serviceSettings:u()(u()({},Z.serviceSettings),{},{autoPopup:i.autoPopup,welcomeFaqUids:null==Z||null===(s=Z.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==Z||null===(r=Z.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==Z||null===(a=Z.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(l=Z.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(d=Z.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(f=Z.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))}),inviteSettings:u()(u()({},Z.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return C=u()(u()({},I),{},{serviceSettings:u()(u()({},null==I?void 0:I.serviceSettings),{},{autoPopup:i.autoPopup,welcomeFaqUids:null==I||null===(y=I.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),faqUids:null==I||null===(x=I.serviceSettings)||void 0===x||null===(x=x.faqs)||void 0===x?void 0:x.map((function(e){return e.uid})),quickFaqUids:null==I||null===(S=I.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==I||null===(b=I.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==I||null===(q=I.serviceSettings)||void 0===q||null===(q=q.hotFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(k=I.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:u()(u()({},I.robotSettings),{},{robotUid:null==I||null===(F=I.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),messageLeaveSettings:u()(u()({},I.messageLeaveSettings),{},{worktimeUids:null==I||null===(j=I.messageLeaveSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),autoReplySettings:u()({},I.autoReplySettings),inviteSettings:u()(u()({},I.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",C),e.next=16,(0,v.sE)(C);case 16:U=e.sent,console.log("updateAgent response:",U),200===U.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),P(U.data)):(c.yw.destroy(),c.yw.error(U.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return E=u()(u()({},L),{},{serviceSettings:u()(u()({},L.serviceSettings),{},{autoPopup:i.autoPopup,welcomeFaqUids:null==L||null===(M=L.serviceSettings)||void 0===M||null===(M=M.faqs)||void 0===M?void 0:M.map((function(e){return e.uid})),faqUids:null==L||null===(A=L.serviceSettings)||void 0===A||null===(A=A.faqs)||void 0===A?void 0:A.map((function(e){return e.uid})),quickFaqUids:null===(R=L.serviceSettings)||void 0===R||null===(R=R.quickFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),guessFaqUids:null==L||null===(_=L.serviceSettings)||void 0===_||null===(_=_.guessFaqs)||void 0===_?void 0:_.map((function(e){return e.uid})),hotFaqUids:null==L||null===(N=L.serviceSettings)||void 0===N||null===(N=N.hotFaqs)||void 0===N?void 0:N.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(O=L.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid}))}),robotSettings:u()(u()({},L.robotSettings),{},{robotUid:null==L||null===(V=L.robotSettings)||void 0===V||null===(V=V.robot)||void 0===V?void 0:V.uid}),messageLeaveSettings:u()(u()({},L.messageLeaveSettings),{},{worktimeUids:null==L||null===(D=L.messageLeaveSettings)||void 0===D||null===(D=D.worktimes)||void 0===D?void 0:D.map((function(e){return e.uid}))}),inviteSettings:u()(u()({},L.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:L.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",E),e.next=26,(0,p.W5)(E);case 26:B=e.sent,console.log("updateWorkGroup response:",B),200===B.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),W(B.data)):(c.yw.destroy(),c.yw.error(B.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)("div",{children:[(0,C.jsxs)(y.A,{form:s,onFinish:V,children:[(0,C.jsx)(x.Z,{width:"md",name:"autoPopup",label:n.formatMessage({id:"autoPopup",defaultMessage:"Auto Popup"})}),(0,C.jsx)(x.Z,{width:"md",name:"showInvite",label:n.formatMessage({id:"showInvite",defaultMessage:"Show Invite"})}),(0,C.jsx)(S.Z,{width:"md",name:"inviteText",label:n.formatMessage({id:"inviteText",defaultMessage:"Invite Text"})})]}),(0,C.jsxs)(F.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,C.jsx)(j.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,C.jsx)(j.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},54166:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(24170),n(66916),n(72614),n(1902),n(66310),n(95490),n(55735),n(30921),n(44194),n(31549)},40836:function(e,t,n){var i=n(90819),o=n.n(i),s=n(89933),r=n.n(s),a=n(73193),u=n.n(a),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(1902),h=n(66310),m=n(95490),w=n(55735),y=n(69169),x=n(48708),S=n(32350),b=n(30921),q=n(44194),k=n(3849),F=n(75365),j=n(11184),C=n(31549);t.Z=function(e){var t=e.type,n=(0,b.useIntl)(),i=y.A.useForm(),s=d()(i,1)[0],a=(0,j.M)(),l=a.config,U=a.updateConfig,M=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),Z=M.currentRobot,T=M.setCurrentRobot,A=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),I=A.currentAgent,P=A.setCurrentAgent,R=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=R.currentWorkgroup,W=R.setCurrentWorkgroup,_=(0,q.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:Z.uid}:t===w.Njn?{chatType:w.scI,chatSid:I.uid}:t===w.aZD?{chatType:w.vPY,chatSid:L.uid}:{chatType:w.xtN,chatSid:""}}),[t,Z,I,L]),N=_.chatType,O=_.chatSid;(0,q.useEffect)((function(){if(t===w._X4){var e,n,i=null==Z||null===(e=Z.serviceSettings)||void 0===e?void 0:e.showRightIframe;s.setFieldsValue({showRightIframe:i,rightIframeUrl:null==Z||null===(n=Z.serviceSettings)||void 0===n?void 0:n.rightIframeUrl}),U(i?u()(u()({},l),{},{chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O}),window:u()(u()({},l.window),{},{width:680})}):u()(u()({},l),{},{chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O}),window:u()(u()({},l.window),{},{width:380})}))}else if(t===w.Njn){var o,r,a=null==I||null===(o=I.serviceSettings)||void 0===o?void 0:o.showRightIframe;s.setFieldsValue({showRightIframe:a,rightIframeUrl:null==I||null===(r=I.serviceSettings)||void 0===r?void 0:r.rightIframeUrl}),U(a?u()(u()({},l),{},{chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O}),window:u()(u()({},l.window),{},{width:680})}):u()(u()({},l),{},{chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O}),window:u()(u()({},l.window),{},{width:380})}))}else if(t===w.aZD){var d,c,v=null==L||null===(d=L.serviceSettings)||void 0===d?void 0:d.showRightIframe;s.setFieldsValue({showRightIframe:v,rightIframeUrl:null==L||null===(c=L.serviceSettings)||void 0===c?void 0:c.rightIframeUrl}),U(v?u()(u()({},l),{},{chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O}),window:u()(u()({},l.window),{},{width:680})}):u()(u()({},l),{},{chatConfig:u()(u()({},l.chatConfig),{},{t:N,sid:O}),window:u()(u()({},l.window),{},{width:380})}))}}),[Z,I,L,N,O]);var V=function(){var e=r()(o()().mark((function e(i){var s,r,a,l,d,f,h,m,y,x,S,b,q,k,F,j,C,U,M,A,R,_,N,O,V,D,E,B,X;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleRightSubmit:",i),t!==w._X4){e.next=11;break}return h=u()(u()({},Z),{},{serviceSettings:u()(u()({},Z.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,welcomeFaqUids:null==Z||null===(s=Z.serviceSettings)||void 0===s||null===(s=s.welcomeFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==Z||null===(r=Z.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==Z||null===(a=Z.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(l=Z.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(d=Z.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(f=Z.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return C=u()(u()({},I),{},{serviceSettings:u()(u()({},null==I?void 0:I.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,welcomeFaqUids:null==I||null===(y=I.serviceSettings)||void 0===y||null===(y=y.welcomeFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),faqUids:null==I||null===(x=I.serviceSettings)||void 0===x||null===(x=x.faqs)||void 0===x?void 0:x.map((function(e){return e.uid})),quickFaqUids:null==I||null===(S=I.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),guessFaqUids:null==I||null===(b=I.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==I||null===(q=I.serviceSettings)||void 0===q||null===(q=q.hotFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(k=I.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:u()(u()({},I.robotSettings),{},{robotUid:null==I||null===(F=I.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),messageLeaveSettings:u()(u()({},I.messageLeaveSettings),{},{worktimeUids:null==I||null===(j=I.messageLeaveSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),autoReplySettings:u()({},I.autoReplySettings)}),console.log("agentObject:",C),e.next=16,(0,v.sE)(C);case 16:U=e.sent,console.log("updateAgent response:",U),200===U.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),P(U.data)):(c.yw.destroy(),c.yw.error(U.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return B=u()(u()({},L),{},{serviceSettings:u()(u()({},L.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,welcomeFaqUids:null==L||null===(M=L.serviceSettings)||void 0===M||null===(M=M.welcomeFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),faqUids:null==L||null===(A=L.serviceSettings)||void 0===A||null===(A=A.faqs)||void 0===A?void 0:A.map((function(e){return e.uid})),quickFaqUids:null==L||null===(R=L.serviceSettings)||void 0===R||null===(R=R.quickFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),guessFaqUids:null==L||null===(_=L.serviceSettings)||void 0===_||null===(_=_.guessFaqs)||void 0===_?void 0:_.map((function(e){return e.uid})),hotFaqUids:null==L||null===(N=L.serviceSettings)||void 0===N||null===(N=N.hotFaqs)||void 0===N?void 0:N.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(O=L.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid}))}),robotSettings:u()(u()({},L.robotSettings),{},{robotUid:null==L||null===(V=L.robotSettings)||void 0===V||null===(V=V.robot)||void 0===V?void 0:V.uid}),messageLeaveSettings:u()(u()({},L.messageLeaveSettings),{},{worktimeUids:null==L||null===(D=L.messageLeaveSettings)||void 0===D||null===(D=D.worktimes)||void 0===D?void 0:D.map((function(e){return e.uid}))}),agentUids:null==L||null===(E=L.agents)||void 0===E?void 0:E.map((function(e){return e.uid}))}),console.log("workgroupObject:",B),e.next=26,(0,p.W5)(B);case 26:X=e.sent,console.log("updateWorkGroup response:",X),200===X.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),W(X.data)):(c.yw.destroy(),c.yw.error(X.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)("div",{children:[(0,C.jsxs)(y.A,{form:s,onFinish:V,children:[(0,C.jsx)(x.Z,{width:"md",name:"showRightIframe",label:n.formatMessage({id:"showRightIframe"})}),(0,C.jsx)(S.Z,{width:"md",name:"rightIframeUrl",label:n.formatMessage({id:"rightIframeUrl"})})]}),(0,C.jsxs)(k.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,C.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,C.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},14238:function(e,t,n){var i=n(73193),o=n.n(i),s=n(90819),r=n.n(s),a=n(89933),u=n.n(a),l=n(45332),d=n.n(l),c=n(86803),v=n(24170),g=n(66916),p=n(72614),f=n(76750),h=n(1902),m=n(66310),w=n(95490),y=n(55735),x=n(69169),S=n(85954),b=n(84881),q=n(79907),k=n(30921),F=n(44194),j=n(51990),C=n(65461),U=n(40612),M=n(99885),Z=n(31549);t.Z=function(e){var t,n=e.type,i=x.A.useForm(),s=d()(i,1)[0],a=(0,k.useIntl)(),l=(0,f.Z)().translateString,T=(0,F.useState)(!1),A=d()(T,2),I=A[0],P=A[1],R=(0,U.u)((function(e){return e.currentOrg})),L=(0,F.useState)(),W=d()(L,2),_=W[0],N=W[1],O=(0,m.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),V=O.currentRobot,D=O.setCurrentRobot,E=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),B=E.currentAgent,X=E.setCurrentAgent,Y=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),H=Y.currentWorkgroup,z=Y.setCurrentWorkgroup,$=(0,F.useState)(""),Q=d()($,2),K=Q[0],G=Q[1],J=(0,F.useState)(""),ee=d()(J,2),te=ee[0],ne=ee[1],ie=(0,F.useState)(""),oe=d()(ie,2),se=oe[0],re=oe[1],ae=(0,F.useState)(""),ue=d()(ae,2),le=ue[0],de=ue[1],ce=(0,F.useState)(""),ve=d()(ce,2),ge=ve[0],pe=ve[1],fe=(0,F.useState)(!1),he=d()(fe,2),me=he[0],we=he[1],ye=(0,F.useState)(""),xe=d()(ye,2),Se=xe[0],be=xe[1],qe=function(){var e=u()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(a.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:null==R?void 0:R.uid},e.next=4,(0,M.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?N(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,F.useEffect)((function(){qe()}),[]);var ke=function(e){var t;if(console.log("setFormValues:",e),G(l(null==e?void 0:e.welcomeTip)),re(l(null==e?void 0:e.topTip)),de(l(null==e?void 0:e.agentCloseTip)),pe(l(null==e?void 0:e.autoCloseTip)),P(null==e?void 0:e.showTopTip),we(null==e?void 0:e.showUnknownAnswer),be(l(null==e?void 0:e.unknownAnswer)),s.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),s.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),s.setFieldValue("showLogo",null==e?void 0:e.showLogo),s.setFieldValue("showUnknownAnswer",null==e?void 0:e.showUnknownAnswer),s.setFieldValue("welcomeFaqUids",null==e||null===(t=e.welcomeFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))),n===y._X4);else if(n===y.Njn){var i;ne(l(null==B||null===(i=B.messageLeaveSettings)||void 0===i?void 0:i.messageLeaveTip))}else if(n===y.aZD){var o;ne(l(null==H||null===(o=H.messageLeaveSettings)||void 0===o?void 0:o.messageLeaveTip))}};(0,F.useEffect)((function(){n===y._X4?ke(null==V?void 0:V.serviceSettings):n===y.Njn?(ke(null==B?void 0:B.serviceSettings),s.setFieldValue("maxThreadCount",null==B?void 0:B.maxThreadCount)):n===y.aZD&&ke(null==H?void 0:H.serviceSettings)}),[V,B,H]);var Fe=function(){var e=u()(r()().mark((function e(t){var i,s,u,l,d,f,h,m,w,x,S,b,q,k,F,j,C,U,M,Z,T,A,P,R,L;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",t," showTopTip:",I),c.yw.loading(a.formatMessage({id:"updating"})),n!==y._X4){e.next=12;break}return f=o()(o()({},V),{},{serviceSettings:o()(o()({},V.serviceSettings),{},{topTip:se,showTopTip:I,welcomeTip:K,autoCloseTip:ge,autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,showUnknownAnswer:me,unknownAnswer:Se,welcomeFaqUids:null==t?void 0:t.welcomeFaqUids,quickFaqUids:null===(i=B.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==V||null===(s=V.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==V||null===(u=V.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==V||null===(l=V.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==V||null===(d=V.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,g.$l)(f);case 7:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),D(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=30;break;case 12:if(n!==y.Njn){e.next=22;break}return F=o()(o()({},B),{},{serviceSettings:o()(o()({},B.serviceSettings),{},{topTip:se,showTopTip:I,welcomeTip:K,agentCloseTip:le,autoCloseTip:ge,autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,showUnknownAnswer:me,unknownAnswer:Se,welcomeFaqUids:null==t?void 0:t.welcomeFaqUids,quickFaqUids:null===(m=B.serviceSettings)||void 0===m||null===(m=m.quickFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),faqUids:null===(w=B.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==B||null===(x=B.serviceSettings)||void 0===x||null===(x=x.guessFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),hotFaqUids:null==B||null===(S=B.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(b=B.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),messageLeaveSettings:o()(o()({},B.messageLeaveSettings),{},{messageLeaveTip:te,worktimeUids:null===(q=B.messageLeaveSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:o()(o()({},B.robotSettings),{},{robotUid:null===(k=B.robotSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid}),maxThreadCount:(null==t?void 0:t.maxThreadCount)||10}),console.log("agentObject:",F),e.next=17,(0,v.sE)(F);case 17:j=e.sent,console.log("updateAgent response:",j),200===j.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),X(j.data)):(c.yw.destroy(),c.yw.error(j.message)),e.next=30;break;case 22:if(n!==y.aZD){e.next=30;break}return R=o()(o()({},H),{},{serviceSettings:o()(o()({},H.serviceSettings),{},{topTip:se,showTopTip:I,welcomeTip:K,autoCloseTip:ge,autoCloseMin:(null==t?void 0:t.autoCloseMin)||25,showLogo:(null==t?void 0:t.showLogo)||!0,showUnknownAnswer:me,unknownAnswer:Se,welcomeFaqUids:null==t?void 0:t.welcomeFaqUids,quickFaqUids:null===(C=H.serviceSettings)||void 0===C||null===(C=C.quickFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),faqUids:null===(U=H.serviceSettings)||void 0===U||null===(U=U.faqs)||void 0===U?void 0:U.map((function(e){return e.uid})),guessFaqUids:null==H||null===(M=H.serviceSettings)||void 0===M||null===(M=M.guessFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),hotFaqUids:null==H||null===(Z=H.serviceSettings)||void 0===Z||null===(Z=Z.hotFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),shortcutFaqUids:null==H||null===(T=H.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),messageLeaveSettings:o()(o()({},H.messageLeaveSettings),{},{messageLeaveTip:te,worktimeUids:null===(A=H.messageLeaveSettings)||void 0===A||null===(A=A.worktimes)||void 0===A?void 0:A.map((function(e){return e.uid}))}),robotSettings:o()(o()({},H.robotSettings),{},{robotUid:null===(P=H.robotSettings)||void 0===P||null===(P=P.robot)||void 0===P?void 0:P.uid}),agentUids:H.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",R),e.next=27,(0,p.W5)(R);case 27:L=e.sent,console.log("updateWorkGroup response:",L),200===L.code?(c.yw.destroy(),c.yw.success(a.formatMessage({id:"update.success"})),z(L.data)):(c.yw.destroy(),c.yw.error(L.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(x.A,{form:s,onFinish:Fe,style:{marginLeft:"20px"},children:[(0,Z.jsx)(S.Z,{name:"showTopTip",width:"md",label:a.formatMessage({id:"agent.settings.show.top.tip"}),fieldProps:{onChange:function(e){var t,i;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==B||null===(t=B.serviceSettings)||void 0===t?void 0:t.showTopTip)),P(e.target.checked),e.target.checked)if(n===y._X4)re(l(null==V||null===(i=V.serviceSettings)||void 0===i?void 0:i.topTip));else if(n===y.Njn){var o;re(l(null==B||null===(o=B.serviceSettings)||void 0===o?void 0:o.topTip))}else if(n===y.aZD){var s;re(l(null==H||null===(s=H.serviceSettings)||void 0===s?void 0:s.topTip))}}}}),I&&(0,Z.jsx)(x.A.Item,{name:"topTip",label:a.formatMessage({id:"agent.settings.top.tip"}),rules:[{required:!0,message:a.formatMessage({id:"agent.settings.top.tip.required"})}],children:(0,Z.jsx)(j.Z,{placeholder:a.formatMessage({id:"agent.settings.top.tip.placeholder"}),value:se,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){re(e)}})}),(0,Z.jsx)(x.A.Item,{name:"welcomeTip",label:a.formatMessage({id:"agent.settings.welcome.tip"}),tooltip:a.formatMessage({id:"agent.settings.welcome.tip"}),rules:[{required:!0,message:a.formatMessage({id:"agent.settings.welcome.tip.required"})}],children:(0,Z.jsx)(j.Z,{placeholder:a.formatMessage({id:"agent.settings.welcome.tip.placeholder"}),value:K,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){G(e)}})}),(0,Z.jsx)(b.Z,{name:"welcomeFaqUids",width:"md",label:a.formatMessage({id:"menu.kbase.faq.welcome"}),options:null==_||null===(t=_.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:l(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,Z.jsx)(k.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}}),n!=y._X4&&(0,Z.jsx)(x.A.Item,{name:"messageLeaveTip",label:a.formatMessage({id:"agent.settings.leave.msg"}),rules:[{required:!0,message:a.formatMessage({id:"agent.settings.leave.msg.required"})}],children:(0,Z.jsx)(j.Z,{placeholder:a.formatMessage({id:"agent.settings.leave.msg.placeholder"}),value:te,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){ne(e)}})}),(0,Z.jsx)(q.Z,{width:"md",name:"autoCloseMin",label:a.formatMessage({id:"agent.settings.auto.close.time"}),tooltip:a.formatMessage({id:"agent.settings.auto.close.time.tooltip"}),min:1}),n===y.Njn&&(0,Z.jsx)(x.A.Item,{name:"agentCloseTip",label:a.formatMessage({id:"agent.settings.agent.close.tip"}),tooltip:a.formatMessage({id:"agent.settings.agent.close.tip.tooltip"}),rules:[{required:!0,message:a.formatMessage({id:"agent.settings.agent.close.tip.required"})}],children:(0,Z.jsx)(j.Z,{placeholder:a.formatMessage({id:"agent.settings.agent.close.tip.placeholder"}),value:le,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){de(e)}})}),(0,Z.jsx)(x.A.Item,{name:"autoCloseTip",label:a.formatMessage({id:"agent.settings.auto.close.tip"}),tooltip:a.formatMessage({id:"agent.settings.auto.close.tip.tooltip"}),rules:[{required:!0,message:a.formatMessage({id:"agent.settings.auto.close.tip.required"})}],children:(0,Z.jsx)(j.Z,{placeholder:a.formatMessage({id:"agent.settings.auto.close.tip.placeholder"}),value:ge,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){pe(e)}})}),n===y._X4&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(S.Z,{name:"showUnknownAnswer",width:"md",label:a.formatMessage({id:"agent.settings.show.unknown.answer",defaultMessage:"启用未知问题固定回复"}),fieldProps:{onChange:function(e){var t;if(console.log("checked = ".concat(e.target.checked)),we(e.target.checked),e.target.checked)if(n===y._X4)be(l(null==V||null===(t=V.serviceSettings)||void 0===t?void 0:t.unknownAnswer));else if(n===y.Njn){var i;be(l(null==B||null===(i=B.serviceSettings)||void 0===i?void 0:i.unknownAnswer))}else if(n===y.aZD){var o;be(l(null==H||null===(o=H.serviceSettings)||void 0===o?void 0:o.unknownAnswer))}}}}),me&&(0,Z.jsx)(x.A.Item,{name:"unknownAnswer",label:a.formatMessage({id:"agent.settings.unknown.answer",defaultMessage:"未知问题固定回复"}),rules:[{required:!0,message:a.formatMessage({id:"agent.settings.unknown.answer.required",defaultMessage:"请输入未知问题固定回复"})}],children:(0,Z.jsx)(j.Z,{placeholder:a.formatMessage({id:"agent.settings.unknown.answer.placeholder",defaultMessage:"请输入未知问题固定回复"}),value:Se,toolbarKeys:(0,C.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){be(e)}})})]}),n===y.Njn&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("p",{children:a.formatMessage({id:"agent.settings.max.thread.tip1"})}),(0,Z.jsx)("p",{children:a.formatMessage({id:"agent.settings.max.thread.tip2"})}),(0,Z.jsx)("p",{children:a.formatMessage({id:"agent.settings.max.thread.tip3"})}),(0,Z.jsx)(q.Z,{width:"md",name:"maxThreadCount",label:a.formatMessage({id:"agent.settings.max.thread"}),min:0})]}),(0,Z.jsx)(S.Z,{name:"showLogo",width:"md",label:a.formatMessage({id:"agent.settings.show.logo"}),tooltip:a.formatMessage({id:"agent.settings.show.logo.tooltip"}),fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}},98473:function(e,t,n){var i=n(76711),o=n.n(i),s=n(90819),r=n.n(s),a=n(89933),u=n.n(a),l=n(73193),d=n.n(l),c=n(45332),v=n.n(c),g=n(86803),p=n(24170),f=n(66916),h=n(72614),m=n(1902),w=n(66310),y=n(95490),x=n(55735),S=n(69169),b=n(48708),q=n(32350),k=n(79907),F=n(30921),j=n(44194),C=n(11184),U=n(32327),M=n(71738),Z=n(44781),T=n(16309),A=n(78819),I=n(52288),P=n(29266),R=n(3849),L=n(75365),W=n(62673),_=n(38775),N=n(7875),O=n(53530),V=n(59304),D=n(54881),E=n(25482),B=n(31549),X=(U.Z.Text,M.Z.Panel,Z.Z.Option),Y="no_response",H="keyword_match",z="visit_count",$="page_stay",Q="time_range",K=[{label:"无响应触发",value:Y},{label:"关键词匹配触发",value:H},{label:"访问次数触发",value:z},{label:"页面停留触发",value:$},{label:"时间范围触发",value:Q},{label:"自动引导",value:"auto_guide"},{label:"排队提醒",value:"queue_remind"}];t.Z=function(e){var t=e.type,n=(0,F.useIntl)(),i=S.A.useForm(),s=v()(i,1)[0],a=(0,C.M)(),l=a.config,c=a.updateConfig,U=(0,j.useState)([]),M=v()(U,2),G=M[0],J=M[1],ee=(0,j.useState)(!1),te=v()(ee,2),ne=te[0],ie=te[1],oe=(0,j.useState)(null),se=v()(oe,2),re=(se[0],se[1]),ae=T.Z.useForm(),ue=v()(ae,1)[0],le=(0,j.useState)(null),de=v()(le,2),ce=de[0],ve=de[1],ge=(0,w.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),pe=ge.currentRobot,fe=ge.setCurrentRobot,he=(0,m.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),me=he.currentAgent,we=he.setCurrentAgent,ye=(0,y.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),xe=ye.currentWorkgroup,Se=ye.setCurrentWorkgroup,be=(0,j.useMemo)((function(){return t===x._X4?{chatType:x.xtN,chatSid:pe.uid}:t===x.Njn?{chatType:x.scI,chatSid:me.uid}:t===x.aZD?{chatType:x.vPY,chatSid:xe.uid}:{chatType:x.xtN,chatSid:""}}),[t,pe,me,xe]),qe=be.chatType,ke=be.chatSid;(0,j.useEffect)((function(){if(t===x._X4){var e,n,i,o,r,a,u,v,g,p,f,h,m,w,y=null!=pe&&null!==(e=pe.serviceSettings)&&void 0!==e&&e.triggerConditions&&(null===(n=JSON.parse(null==pe||null===(i=pe.serviceSettings)||void 0===i?void 0:i.triggerConditions))||void 0===n?void 0:n.conditions)||[];s.setFieldsValue({autoPopup:null==pe||null===(o=pe.serviceSettings)||void 0===o?void 0:o.autoPopup,showInvite:null==pe||null===(r=pe.inviteSettings)||void 0===r?void 0:r.show,inviteText:null==pe||null===(a=pe.inviteSettings)||void 0===a?void 0:a.text,enableProactiveTrigger:null==pe||null===(u=pe.serviceSettings)||void 0===u?void 0:u.enableProactiveTrigger,noResponseTimeout:(null==pe||null===(v=pe.serviceSettings)||void 0===v?void 0:v.noResponseTimeout)||300,proactiveMessage:null==pe||null===(g=pe.serviceSettings)||void 0===g?void 0:g.proactiveMessage,maxProactiveCount:(null==pe||null===(p=pe.serviceSettings)||void 0===p?void 0:p.maxProactiveCount)||3,proactiveInterval:(null==pe||null===(f=pe.serviceSettings)||void 0===f?void 0:f.proactiveInterval)||600}),J(y),c(d()(d()({},l),{},{autoPopup:null==pe||null===(h=pe.serviceSettings)||void 0===h?void 0:h.autoPopup,inviteConfig:{show:null==pe||null===(m=pe.inviteSettings)||void 0===m?void 0:m.show,text:null==pe||null===(w=pe.inviteSettings)||void 0===w?void 0:w.text},chatConfig:d()(d()({},l.chatConfig),{},{t:qe,sid:ke})}))}else if(t===x.Njn){var S,b,q,k,F,j,C,U,M,Z,T,A,I,P,R=null!=me&&null!==(S=me.serviceSettings)&&void 0!==S&&S.triggerConditions&&(null===(b=JSON.parse(null==me||null===(q=me.serviceSettings)||void 0===q?void 0:q.triggerConditions))||void 0===b?void 0:b.conditions)||[];s.setFieldsValue({autoPopup:null==me||null===(k=me.serviceSettings)||void 0===k?void 0:k.autoPopup,showInvite:null==me||null===(F=me.inviteSettings)||void 0===F?void 0:F.show,inviteText:null==me||null===(j=me.inviteSettings)||void 0===j?void 0:j.text,enableProactiveTrigger:null==me||null===(C=me.serviceSettings)||void 0===C?void 0:C.enableProactiveTrigger,noResponseTimeout:(null==me||null===(U=me.serviceSettings)||void 0===U?void 0:U.noResponseTimeout)||300,proactiveMessage:null==me||null===(M=me.serviceSettings)||void 0===M?void 0:M.proactiveMessage,maxProactiveCount:(null==me||null===(Z=me.serviceSettings)||void 0===Z?void 0:Z.maxProactiveCount)||3,proactiveInterval:(null==me||null===(T=me.serviceSettings)||void 0===T?void 0:T.proactiveInterval)||600}),J(R),c(d()(d()({},l),{},{autoPopup:null==me||null===(A=me.serviceSettings)||void 0===A?void 0:A.autoPopup,inviteConfig:{show:null==me||null===(I=me.inviteSettings)||void 0===I?void 0:I.show,text:null==me||null===(P=me.inviteSettings)||void 0===P?void 0:P.text},chatConfig:d()(d()({},l.chatConfig),{},{t:qe,sid:ke})}))}else if(t===x.aZD){var L,W,_,N,O,V,D,E,B,X,Y,H,z,$,Q=null!=xe&&null!==(L=xe.serviceSettings)&&void 0!==L&&L.triggerConditions&&(null===(W=JSON.parse(null==xe||null===(_=xe.serviceSettings)||void 0===_?void 0:_.triggerConditions))||void 0===W?void 0:W.conditions)||[];s.setFieldsValue({autoPopup:null==xe||null===(N=xe.serviceSettings)||void 0===N?void 0:N.autoPopup,showInvite:null==xe||null===(O=xe.inviteSettings)||void 0===O?void 0:O.show,inviteText:null==xe||null===(V=xe.inviteSettings)||void 0===V?void 0:V.text,enableProactiveTrigger:null==xe||null===(D=xe.serviceSettings)||void 0===D?void 0:D.enableProactiveTrigger,noResponseTimeout:(null==xe||null===(E=xe.serviceSettings)||void 0===E?void 0:E.noResponseTimeout)||300,proactiveMessage:null==xe||null===(B=xe.serviceSettings)||void 0===B?void 0:B.proactiveMessage,maxProactiveCount:(null==xe||null===(X=xe.serviceSettings)||void 0===X?void 0:X.maxProactiveCount)||3,proactiveInterval:(null==xe||null===(Y=xe.serviceSettings)||void 0===Y?void 0:Y.proactiveInterval)||600}),J(Q),c(d()(d()({},l),{},{autoPopup:null==xe||null===(H=xe.serviceSettings)||void 0===H?void 0:H.autoPopup,inviteConfig:{show:null==xe||null===(z=xe.inviteSettings)||void 0===z?void 0:z.show,text:null==xe||null===($=xe.inviteSettings)||void 0===$?void 0:$.text},chatConfig:d()(d()({},l.chatConfig),{},{t:qe,sid:ke})}))}}),[pe,me,xe,qe,ke]);var Fe=function(){var e=u()(r()().mark((function e(i){var o,s,a,u,l,c,v,m,w,y,S,b,q,k,F,j,C,U,M,Z,T,A,I,P,R,L,W,_,N;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),o=JSON.stringify({conditions:G}),t!==x._X4){e.next=12;break}return m=d()(d()({},pe),{},{serviceSettings:d()(d()({},pe.serviceSettings),{},{autoPopup:i.autoPopup,enableProactiveTrigger:i.enableProactiveTrigger,noResponseTimeout:i.noResponseTimeout,proactiveMessage:i.proactiveMessage,maxProactiveCount:i.maxProactiveCount,proactiveInterval:i.proactiveInterval,triggerConditions:o,welcomeFaqUids:null==pe||null===(s=pe.serviceSettings)||void 0===s||null===(s=s.welcomeFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==pe||null===(a=pe.serviceSettings)||void 0===a||null===(a=a.faqs)||void 0===a?void 0:a.map((function(e){return e.uid})),quickFaqUids:null==pe||null===(u=pe.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==pe||null===(l=pe.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==pe||null===(c=pe.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==pe||null===(v=pe.serviceSettings)||void 0===v||null===(v=v.shortcutFaqs)||void 0===v?void 0:v.map((function(e){return e.uid}))}),inviteSettings:d()(d()({},pe.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",m),e.next=7,(0,f.$l)(m);case 7:w=e.sent,console.log("updateRobot response:",w),200===w.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),fe(w.data)):(g.yw.destroy(),g.yw.error(w.message)),e.next=30;break;case 12:if(t!==x.Njn){e.next=22;break}return U=d()(d()({},me),{},{serviceSettings:d()(d()({},null==me?void 0:me.serviceSettings),{},{autoPopup:i.autoPopup,enableProactiveTrigger:i.enableProactiveTrigger,noResponseTimeout:i.noResponseTimeout,proactiveMessage:i.proactiveMessage,maxProactiveCount:i.maxProactiveCount,proactiveInterval:i.proactiveInterval,triggerConditions:o,welcomeFaqUids:null==me||null===(y=me.serviceSettings)||void 0===y||null===(y=y.welcomeFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),faqUids:null==me||null===(S=me.serviceSettings)||void 0===S||null===(S=S.faqs)||void 0===S?void 0:S.map((function(e){return e.uid})),quickFaqUids:null==me||null===(b=me.serviceSettings)||void 0===b||null===(b=b.quickFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==me||null===(q=me.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null==me||null===(k=me.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==me||null===(F=me.serviceSettings)||void 0===F||null===(F=F.shortcutFaqs)||void 0===F?void 0:F.map((function(e){return e.uid}))}),robotSettings:d()(d()({},me.robotSettings),{},{robotUid:null==me||null===(j=me.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),messageLeaveSettings:d()(d()({},me.messageLeaveSettings),{},{worktimeUids:null==me||null===(C=me.messageLeaveSettings)||void 0===C||null===(C=C.worktimes)||void 0===C?void 0:C.map((function(e){return e.uid}))}),autoReplySettings:d()({},me.autoReplySettings),inviteSettings:d()(d()({},me.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",U),e.next=17,(0,p.sE)(U);case 17:M=e.sent,console.log("updateAgent response:",M),200===M.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),we(M.data)):(g.yw.destroy(),g.yw.error(M.message)),e.next=30;break;case 22:if(t!==x.aZD){e.next=30;break}return _=d()(d()({},xe),{},{serviceSettings:d()(d()({},xe.serviceSettings),{},{autoPopup:i.autoPopup,enableProactiveTrigger:i.enableProactiveTrigger,noResponseTimeout:i.noResponseTimeout,proactiveMessage:i.proactiveMessage,maxProactiveCount:i.maxProactiveCount,proactiveInterval:i.proactiveInterval,triggerConditions:o,welcomeFaqUids:null==xe||null===(Z=xe.serviceSettings)||void 0===Z||null===(Z=Z.welcomeFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),faqUids:null==xe||null===(T=xe.serviceSettings)||void 0===T||null===(T=T.faqs)||void 0===T?void 0:T.map((function(e){return e.uid})),quickFaqUids:null===(A=xe.serviceSettings)||void 0===A||null===(A=A.quickFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),guessFaqUids:null==xe||null===(I=xe.serviceSettings)||void 0===I||null===(I=I.guessFaqs)||void 0===I?void 0:I.map((function(e){return e.uid})),hotFaqUids:null==xe||null===(P=xe.serviceSettings)||void 0===P||null===(P=P.hotFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),shortcutFaqUids:null==xe||null===(R=xe.serviceSettings)||void 0===R||null===(R=R.shortcutFaqs)||void 0===R?void 0:R.map((function(e){return e.uid}))}),robotSettings:d()(d()({},xe.robotSettings),{},{robotUid:null==xe||null===(L=xe.robotSettings)||void 0===L||null===(L=L.robot)||void 0===L?void 0:L.uid}),messageLeaveSettings:d()(d()({},xe.messageLeaveSettings),{},{worktimeUids:null==xe||null===(W=xe.messageLeaveSettings)||void 0===W||null===(W=W.worktimes)||void 0===W?void 0:W.map((function(e){return e.uid}))}),inviteSettings:d()(d()({},xe.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:xe.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",_),e.next=27,(0,h.W5)(_);case 27:N=e.sent,console.log("updateWorkGroup response:",N),200===N.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),Se(N.data)):(g.yw.destroy(),g.yw.error(N.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=[{title:"触发类型",dataIndex:"type",key:"type",render:function(e){var t=K.find((function(t){return t.value===e}));return t?t.label:e}},{title:"触发条件",dataIndex:"type",key:"condition",render:function(e,t){switch(e){case Y:return"".concat(t.timeout||300,"秒无响应");case H:return t.keywords?t.keywords.map((function(e,t){return(0,B.jsx)(P.Z,{color:"blue",children:e},t)})):null;case z:return"访问次数 >= ".concat(t.threshold||3);case $:return"页面停留 ".concat(t.timeout||300,"秒");case Q:return"时间范围 ".concat(t.start||"09:00"," - ").concat(t.end||"18:00");default:return"-"}}},{title:"触发消息",dataIndex:"message",key:"message",ellipsis:!0},{title:"操作",key:"action",render:function(e,t,n){return(0,B.jsxs)(R.Z,{children:[(0,B.jsx)(L.ZP,{type:"text",icon:(0,B.jsx)(V.Z,{}),onClick:function(){return function(e,t){var n;re(e),ve(t),ue.setFieldsValue({type:e.type,message:e.message,timeout:e.timeout,keywords:null===(n=e.keywords)||void 0===n?void 0:n.join(", "),threshold:e.threshold,start:e.start,end:e.end}),ie(!0)}(t,n)}}),(0,B.jsx)(L.ZP,{type:"text",danger:!0,icon:(0,B.jsx)(D.Z,{}),onClick:function(){return function(e){var t=o()(G);t.splice(e,1),J(t)}(n)}})]})}}];return(0,B.jsxs)("div",{children:[(0,B.jsxs)(S.A,{form:s,onFinish:Fe,children:[(0,B.jsxs)(W.Z,{title:"主动触发设置",children:[(0,B.jsx)(b.Z,{width:"md",name:"enableProactiveTrigger",label:"启用主动触发"}),(0,B.jsx)(S.A.Group,{children:(0,B.jsx)(q.Z,{width:"md",name:"proactiveMessage",label:"主动发送的消息内容",placeholder:"例如：您好，看起来您有一段时间没有互动了。请问还需要帮助吗？"})}),(0,B.jsxs)(S.A.Group,{children:[(0,B.jsx)(k.Z,{width:"xs",name:"noResponseTimeout",label:"无响应超时时间(秒)",min:1,fieldProps:{addonAfter:"秒"}}),(0,B.jsx)(k.Z,{width:"xs",name:"maxProactiveCount",label:"最大主动触发次数",min:1,fieldProps:{addonAfter:"次"}}),(0,B.jsx)(k.Z,{width:"xs",name:"proactiveInterval",label:"触发间隔(秒)",min:1,fieldProps:{addonAfter:"秒"}})]})]}),(0,B.jsx)(_.Z,{}),(0,B.jsx)(W.Z,{title:"触发条件配置",extra:(0,B.jsx)(L.ZP,{type:"primary",icon:(0,B.jsx)(E.Z,{}),onClick:function(){re(null),ve(null),ue.resetFields(),ie(!0)},children:"添加条件"}),children:(0,B.jsx)(N.Z,{columns:je,dataSource:G,rowKey:function(e,t){return(null==t?void 0:t.toString())||"0"},pagination:!1})})]}),(0,B.jsxs)(R.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,B.jsx)(L.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,B.jsx)(L.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]}),(0,B.jsx)(O.Z,{title:null!==ce?"编辑触发条件":"添加触发条件",open:ne,onOk:function(){ue.validateFields().then((function(e){var t=e.keywords;t&&"string"==typeof t&&(t=t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})));var n={type:e.type,message:e.message,timeout:e.type===Y||e.type===$?e.timeout:void 0,keywords:e.type===H?t:void 0,threshold:e.type===z?e.threshold:void 0,start:e.type===Q?e.start:void 0,end:e.type===Q?e.end:void 0};if(null!==ce){var i=o()(G);i[ce]=n,J(i)}else J([].concat(o()(G),[n]));ie(!1),ue.resetFields()}))},onCancel:function(){return ie(!1)},width:600,children:(0,B.jsxs)(T.Z,{form:ue,layout:"vertical",initialValues:{type:Y,timeout:300,message:"您好，需要帮助吗？"},children:[(0,B.jsx)(T.Z.Item,{name:"type",label:"触发类型",rules:[{required:!0,message:"请选择触发类型"}],children:(0,B.jsx)(Z.Z,{children:K.map((function(e){return(0,B.jsx)(X,{value:e.value,children:e.label},e.value)}))})}),function(){switch(ue.getFieldValue("type")){case Y:return(0,B.jsx)(T.Z.Item,{name:"timeout",label:"无响应超时时间(秒)",rules:[{required:!0,message:"请输入超时时间"}],children:(0,B.jsx)(A.Z,{min:1})});case H:return(0,B.jsx)(T.Z.Item,{name:"keywords",label:"关键词列表(逗号分隔)",rules:[{required:!0,message:"请输入关键词"}],children:(0,B.jsx)(I.Z,{placeholder:"例如: 价格, 费用, 多少钱"})});case z:return(0,B.jsx)(T.Z.Item,{name:"threshold",label:"访问次数阈值",rules:[{required:!0,message:"请输入访问次数"}],children:(0,B.jsx)(A.Z,{min:1})});case $:return(0,B.jsx)(T.Z.Item,{name:"timeout",label:"页面停留时间(秒)",rules:[{required:!0,message:"请输入停留时间"}],children:(0,B.jsx)(A.Z,{min:1})});case Q:return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(T.Z.Item,{name:"start",label:"开始时间",rules:[{required:!0,message:"请输入开始时间"}],children:(0,B.jsx)(I.Z,{placeholder:"格式: HH:mm, 例如: 09:00"})}),(0,B.jsx)(T.Z.Item,{name:"end",label:"结束时间",rules:[{required:!0,message:"请输入结束时间"}],children:(0,B.jsx)(I.Z,{placeholder:"格式: HH:mm, 例如: 18:00"})})]});default:return null}}(),(0,B.jsx)(T.Z.Item,{name:"message",label:"触发消息",rules:[{required:!0,message:"请输入触发后发送的消息"}],children:(0,B.jsx)(I.Z.TextArea,{rows:3,placeholder:"触发条件满足后发送给用户的消息"})})]})})]})}},51990:function(e,t,n){var i=n(73193),o=n.n(i),s=n(84176),r=n.n(s),a=n(86803),u=n(23864),l=n(44521),d=n(55735),c=n(30921),v=n(83905),g=(n(26286),n(28977)),p=n.n(g),f=n(44194),h=n(31549),m=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];t.Z=function(e){var t=e.placeholder,n=e.defaultValue,i=e.value,s=e.style,g=e.toolbarKeys,w=e.onChange,y=(e.options,r()(e,m)),x=((0,c.useIntl)(),(0,u.Z)().isDarkMode),S=(0,f.useRef)(null),b=(0,f.useRef)(null);return(0,f.useEffect)((function(){if(S.current){if(!b.current){var e=new v.cW({element:S.current,theme:x?"dark":"light",placeholder:t,content:n,toolbarKeys:g,image:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(d.LA8)},uploader:function(e,t,n,i){console.log("uploader:",e,t,n,i);var s=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,r=new FormData;return r.append("file",e),r.append("file_name",s),r.append("file_type",e.type),r.append("is_avatar","false"),r.append("kb_type",d.bE7),r.append("category_uid",""),r.append("kb_uid",""),r.append("client",d.bVn),new Promise((function(e,i){fetch(t,{method:"POST",headers:o()({Accept:"application/json"},n),body:r}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){a.yw.destroy(),a.yw.success("".concat(s," 上传成功"));var n={errorCode:0,data:{src:t.data.fileUrl,alt:s}};e(n)}else a.yw.destroy(),a.yw.error("".concat(s," 上传失败"))})).catch((function(e){i(e)}))}))}},video:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(d.LA8)},uploader:function(e,t,n,i){console.log("uploader:",e,t,n,i);var s=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,r=new FormData;return r.append("file",e),r.append("file_name",s),r.append("file_type",e.type),r.append("is_avatar","false"),r.append("kb_type",d.bE7),r.append("category_uid",""),r.append("kb_uid",""),r.append("client",d.bVn),new Promise((function(e,i){fetch(t,{method:"POST",headers:o()({Accept:"application/json"},n),body:r}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){a.yw.destroy(),a.yw.success("".concat(s," 上传成功"));var n={errorCode:0,data:{src:t.data.fileUrl,poster:"https://www.weiyuai.cn/avatars/video_poster.png"}};e(n)}else a.yw.destroy(),a.yw.error("".concat(s," 上传失败"))})).catch((function(e){i(e)}))}))}},attachment:{uploadUrl:(0,l.M$)(),uploadFormName:"file",uploadHeaders:{Authorization:"Bearer "+localStorage.getItem(d.LA8)},uploader:function(e,t,n,i){console.log("uploader:",e,t,n,i);var s=p()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name,r=new FormData;return r.append("file",e),r.append("file_name",s),r.append("file_type",e.type),r.append("is_avatar","false"),r.append("kb_type",d.bE7),r.append("category_uid",""),r.append("kb_uid",""),r.append("client",d.bVn),new Promise((function(e,i){fetch(t,{method:"POST",headers:o()({Accept:"application/json"},n),body:r}).then((function(e){return e.json()})).then((function(t){if(console.log("upload data:",t),200===t.code){a.yw.destroy(),a.yw.success("".concat(s," 上传成功"));var n={errorCode:0,data:{href:t.data.fileUrl,fileName:s}};e(n)}else a.yw.destroy(),a.yw.error("".concat(s," 上传失败"))})).catch((function(e){i(e)}))}))}},onChange:function(e){"function"==typeof w&&w(e.getHtml(),e.getMarkdown())}});b.current=e}return function(){b.current&&(b.current.destroy(),b.current=null)}}}),[]),(0,f.useEffect)((function(){b.current&&i!==b.current.getHtml()&&b.current.setContent(i||"")}),[i]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",o()(o()({ref:S},y),{},{style:o()({height:"100%"},s)}))})}},55930:function(e,t,n){n.d(t,{Z:function(){return p}});n(44194);var i=n(8247),o=n(30921),s=n(53038),r=n(76432),a=n(29897),u=n(6897),l=n(75574),d=n(79686),c=n(31549),v=(l.Z.Sider,l.Z.Content,function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{})})}),g=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{})})},p=function(e){var t=e.type,n=((0,o.useIntl)(),[{key:"whatsapp",label:"Whatsapp",children:(0,c.jsx)(a.Z,{})},{key:"telegram",label:"Telegram",children:(0,c.jsx)(r.Z,{})},{key:"facebook",label:"Facebook",children:(0,c.jsx)(v,{})},{key:"Line",label:"Line",children:(0,c.jsx)(u.Z,{})},{key:"wordpress",label:"Wordpress",children:(0,c.jsx)(g,{})}]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.Z,{type:t}),(0,c.jsx)(i.Z,{tabPosition:"left",items:n})]})}},82211:function(e,t,n){n(44194);var i=n(8247),o=n(45178),s=n(5724),r=n(54518),a=n(7785),u=n(42909),l=n(53038),d=n(81360),c=n(99980),v=n(66329),g=n(30634),p=n(31549);t.Z=function(e){var t=e.type,n=[{key:"web",label:"Web",children:(0,p.jsx)(g.Z,{type:t})},{key:"react",label:"React",children:(0,p.jsx)(u.Z,{type:t})},{key:"vue",label:"Vue",children:(0,p.jsx)(v.Z,{type:t})},{key:"svelte",label:"Svelte",children:(0,p.jsx)(d.Z,{type:t})},{key:"vanilla",label:"Vanilla",children:(0,p.jsx)(c.Z,{type:t})},{key:"ios",label:"iOS",children:(0,p.jsx)(o.Z,{type:t})},{key:"android",label:"Android",children:(0,p.jsx)(a.Z,{type:t})},{key:"uniapp",label:"Uniapp",children:(0,p.jsx)(s.Z,{type:t})},{key:"flutter",label:"Flutter",children:(0,p.jsx)(r.Z,{type:t})}];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.Z,{type:t}),(0,p.jsx)(i.Z,{tabPosition:"left",items:n})]})}},73170:function(e,t,n){n.d(t,{Z:function(){return w}});n(44194);var i=n(8247),o=n(30921),s=n(53038),r=n(44574),a=n(10354),u=n(51103),l=n(75262),d=n(62476),c=n(15025),v=n(79686),g=n(31549),p=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},f=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},h=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},m=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},w=function(e){var t=e.type,n=(0,o.useIntl)(),v=[{key:"pdd",label:n.formatMessage({id:"channel.shop.pdd"}),children:(0,g.jsx)(r.Z,{})},{key:"jd",label:n.formatMessage({id:"channel.shop.jd"}),children:(0,g.jsx)(l.Z,{})},{key:"qianniu",label:n.formatMessage({id:"channel.shop.qianniu"}),children:(0,g.jsx)(a.Z,{})},{key:"doudian",label:n.formatMessage({id:"channel.shop.doudian"}),children:(0,g.jsx)(u.Z,{})},{key:"shopify",label:"Shopify",children:(0,g.jsx)(d.Z,{})},{key:"lazada",label:"Lazada",children:(0,g.jsx)(c.Z,{})},{key:"woocommerce",label:"Woocommerce",children:(0,g.jsx)(p,{})},{key:"opencart",label:"Opencart",children:(0,g.jsx)(f,{})},{key:"magento",label:"Magento",children:(0,g.jsx)(h,{})},{key:"prestashop",label:"Prestashop",children:(0,g.jsx)(m,{})}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.Z,{type:t}),(0,g.jsx)(i.Z,{tabPosition:"left",items:v})]})}},9389:function(e,t,n){n.d(t,{Z:function(){return Q}});var i=n(44194),o=n(8247),s=n(30921),r=n(11452),a=n(53038),u=n(36378),l=n(53300),d=n(21325),c=n(79176),v=n(13161),g=n(90819),p=n.n(g),f=n(73193),h=n.n(f),m=n(84176),w=n.n(m),y=n(89933),x=n.n(y),S=n(45332),b=n.n(S),q=n(5651),k=n(38775),F=n(53530),j=n(3849),C=n(75365),U=n(86803),M=n(40612),Z=n(81947),T=n(69842),A=n(55735),I=n(31549),P=["current"],R=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(s.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],L=function(e){e.type;var t=(0,s.useAccess)(),n=(0,i.useState)(!1),o=b()(n,2),r=o[0],a=o[1],u=((0,s.useIntl)(),(0,i.useRef)()),l=(0,M.u)((function(e){return e.currentOrg})),d=[].concat(R),c=function(){a(!0)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{children:"通过h5方式集成"}),(0,I.jsx)(k.Z,{}),(0,I.jsxs)(s.Access,{accessible:t.canDebug(),fallback:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(s.FormattedMessage,{id:A.h5w})}),children:[(0,I.jsxs)(F.Z,{title:"Basic Modal",open:r,onOk:function(){a(!1)},onCancel:function(){a(!1)},children:[(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."})]}),(0,I.jsx)(Z.Z,{columns:d,actionRef:u,cardBordered:!0,request:function(){var e=x()(p()().mark((function e(t,n,i){var o,s,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,o=w()(t,P),s=h()({pageNumber:t.current-1,orgUid:null==l?void 0:l.uid},o),e.next=5,(0,T.H)(s);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信小程序",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(C.ZP,{type:"primary",onClick:c,children:"添加微信小程序"}),(0,I.jsx)(C.ZP,{icon:(0,I.jsx)(q.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信小程序对接文档"})]})]}})]})]})},W=["current"],_=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(s.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],N=function(e){e.type;var t=(0,s.useAccess)(),n=(0,i.useState)(!1),o=b()(n,2),r=o[0],a=o[1],u=((0,s.useIntl)(),(0,i.useRef)()),l=(0,M.u)((function(e){return e.currentOrg})),d=[].concat(_),c=function(){a(!0)};return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(s.Access,{accessible:t.canDebug(),fallback:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(s.FormattedMessage,{id:A.h5w})}),children:[(0,I.jsxs)(F.Z,{title:"Basic Modal",open:r,onOk:function(){a(!1)},onCancel:function(){a(!1)},children:[(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."})]}),(0,I.jsx)(Z.Z,{columns:d,actionRef:u,cardBordered:!0,request:function(){var e=x()(p()().mark((function e(t,n,i){var o,s,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,o=w()(t,W),s=h()({pageNumber:t.current-1,orgUid:null==l?void 0:l.uid},o),e.next=5,(0,T.H)(s);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定企业微信",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(C.ZP,{type:"primary",onClick:c,children:"添加企业微信"}),(0,I.jsx)(C.ZP,{icon:(0,I.jsx)(q.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"企业微信对接文档"})]})]}})]})})},O=n(15722),V=n(25482),D=n(63289),E=n(40803),B=["current"],X=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(s.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"appId",defaultMessage:"AppId"}),dataIndex:"appId",copyable:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"url",defaultMessage:"Url"}),dataIndex:"url",copyable:!0,hideInSearch:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"token",defaultMessage:"Token"}),dataIndex:"token",copyable:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"encryptMode",defaultMessage:"EncryptMode"}),dataIndex:"encryptMode",copyable:!0,hideInSearch:!0,render:function(e,t){switch(t.encryptMode){case"PLAINTEXT":return(0,I.jsx)("span",{children:"明文模式"});case"COMPATIBLE":return(0,I.jsx)("span",{children:"兼容模式"});case"SAFE":return(0,I.jsx)("span",{children:"安全模式"});default:return(0,I.jsx)("span",{children:"未知"})}}},{title:(0,I.jsx)(s.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],Y=function(e){e.type;var t=(0,i.useState)(!1),n=b()(t,2),o=n[0],r=n[1],a=(0,i.useState)({}),u=b()(a,2),l=u[0],d=u[1],c=(0,i.useState)(!1),v=b()(c,2),g=v[0],f=v[1],m=(0,s.useIntl)(),y=(0,i.useRef)(),S=(0,M.u)((function(e){return e.currentOrg})),T=F.Z.useModal(),A=b()(T,2),P=A[0],R=A[1],L=[].concat(X,[{title:m.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,i){return[(0,I.jsx)("a",{onClick:function(){f(!0),d(t),r(!0)},children:m.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,I.jsx)(C.ZP,{type:"link",onClick:function(){return e=t,void P.confirm({title:m.formatMessage({id:"deleteTip"}),icon:(0,I.jsx)(O.Z,{}),content:"".concat(m.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.name,"】？"),onOk:function(){W(e)},onCancel:function(){},okText:m.formatMessage({id:"ok"}),cancelText:m.formatMessage({id:"cancel"})});var e},danger:!0,children:m.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}]),W=function(){var e=x()(p()().mark((function e(t){var n;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWechatMp:",t),e.next=3,(0,E.ul)(t);case 3:n=e.sent,console.log("deleteMember:",n),200===n.code?(U.yw.success(m.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),y.current.reload()):U.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=x()(p()().mark((function e(t){var n,i;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E._Z)(t);case 2:n=e.sent,console.log("handleCreateWechatMp response:",n),200===n.code?(null===(i=y.current)||void 0===i||i.reload(),r(!1)):U.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=x()(p()().mark((function e(t){var n,i;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=null==l?void 0:l.uid,e.next=3,(0,E.sS)(t);case 3:n=e.sent,console.log("handleUpdateWechatMp response:",n),200===n.code?(null===(i=y.current)||void 0===i||i.reload(),r(!1)):U.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){r(!0),f(!1),d({})};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{children:"通过自定义菜单方式集成"}),(0,I.jsx)(k.Z,{}),(0,I.jsx)(Z.Z,{columns:L,actionRef:y,cardBordered:!0,request:function(){var e=x()(p()().mark((function e(t,n,i){var o,s,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,o=w()(t,B),s=h()({pageNumber:t.current-1,orgUid:null==S?void 0:S.uid},o),e.next=5,(0,E.aq)(s);case 5:return r=e.sent,console.log("queryWechatMpByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定公众号",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(C.ZP,{type:"primary",onClick:Y,icon:(0,I.jsx)(V.Z,{}),children:"添加微信公众号"}),!1,(0,I.jsx)(C.ZP,{icon:(0,I.jsx)(q.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechatmp")},children:"微信公众号对接文档"})]})]}}),R,o&&(0,I.jsx)(D.Z,{isEdit:g,open:o,wechatmp:l,onClose:function(){r(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),g?N(e):_(e)}})]})},H=["current"],z=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(s.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(s.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],$=function(e){e.type;var t=(0,s.useAccess)(),n=(0,i.useState)(!1),o=b()(n,2),r=o[0],a=o[1],u=((0,s.useIntl)(),(0,i.useRef)()),l=(0,M.u)((function(e){return e.currentOrg})),d=[].concat(z),c=function(){a(!0)};return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(s.Access,{accessible:t.canDebug(),fallback:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(s.FormattedMessage,{id:A.h5w})}),children:[(0,I.jsxs)(F.Z,{title:"Basic Modal",open:r,onOk:function(){a(!1)},onCancel:function(){a(!1)},children:[(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."})]}),(0,I.jsx)(Z.Z,{columns:d,actionRef:u,cardBordered:!0,request:function(){var e=x()(p()().mark((function e(t,n,i){var o,s,r;return p()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,o=w()(t,H),s=h()({pageNumber:t.current-1,orgUid:null==l?void 0:l.uid},o),e.next=5,(0,T.H)(s);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信客服",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(C.ZP,{type:"primary",onClick:c,children:"添加微信客服"}),(0,I.jsx)(C.ZP,{icon:(0,I.jsx)(q.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信客服对接文档"})]})]}})]})})},Q=function(e){var t=e.type,n=(0,s.useIntl)(),i=[{key:"wechat-mp",label:n.formatMessage({id:"channel.social.wechat.mp"}),children:(0,I.jsx)(Y,{type:t})},{key:"wechat-mini",label:n.formatMessage({id:"channel.social.wechat.mini"}),children:(0,I.jsx)(L,{type:t})},{key:"wechat-com",label:n.formatMessage({id:"channel.social.wechat.work"}),children:(0,I.jsx)(N,{type:t})},{key:"wechat-kefu",label:n.formatMessage({id:"channel.social.wechat.kefu"}),children:(0,I.jsx)($,{type:t})},{key:"douyin",label:n.formatMessage({id:"channel.social.douyin"}),children:(0,I.jsx)(v.Z,{})},{key:"xiaohongshu",label:n.formatMessage({id:"channel.social.xiaohongshu"}),children:(0,I.jsx)(c.Z,{})},{key:"baidu",label:n.formatMessage({id:"channel.social.baidu"}),children:(0,I.jsx)(d.Z,{})},{key:"weibo",label:n.formatMessage({id:"channel.social.weibo"}),children:(0,I.jsx)(l.Z,{})},{key:"bili",label:n.formatMessage({id:"channel.social.bilibili"}),children:(0,I.jsx)(u.Z,{})},{key:"zhihu",label:n.formatMessage({id:"channel.social.zhihu"}),children:(0,I.jsx)(r.Z,{})}];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.Z,{type:t}),(0,I.jsx)(o.Z,{tabPosition:"left",items:i})]})}},53038:function(e,t,n){var i=n(30921),o=n(31549);t.Z=function(e){e.type,(0,i.useIntl)();return(0,o.jsx)(o.Fragment,{})}},6631:function(e,t,n){n.d(t,{G:function(){return v}});var i=n(73193),o=n.n(i),s=(n(44194),n(30348)),r=n(55735),a=n(28977),u=n.n(a),l=n(86803),d=n(44521),c=n(31549),v=function(e){var t=e.children,n=e.onSuccess,i=e.onError,a={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,d.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:a,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=u()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;a.file=e,a.file_name=t,a.file_type=e.type,console.log("beforeUpload",a)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data.fileUrl;n(t),l.yw.success("".concat(e.file.name," 上传成功"))}else i(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),i(e.file))}};return(0,c.jsx)(s.Z,o()(o()({},v),{},{children:t}))}}}]);