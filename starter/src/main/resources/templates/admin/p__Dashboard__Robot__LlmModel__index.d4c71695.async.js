"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2520],{7571:function(e,n,r){var t=r(94414);n.Z=function(){var e=(0,t.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},55750:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(7571),l=r(16242),i=r(90228),o=r.n(i),u=r(87999),d=r.n(u),c=r(48305),a=r.n(c),s=r(37240),m=r(26068),f=r.n(m),v=r(64453),p=r(45234);function h(e){return x.apply(this,arguments)}function x(){return(x=d()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/ai/model/query/org",{method:"GET",params:f()(f()({},n),{},{client:v.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=r(15558),L=r.n(g),j=r(79475),y=r(11811),k=r(15226),Z=(0,j.Ue)()((0,y.mW)((0,y.tJ)((0,k.n)((function(e,n){return{llmmodelResult:{data:{content:[]}},currentLlmModel:{uid:"",nickname:""},insertLlmModel:function(n){e((function(e){e.llmmodelResult.data.content.unshift(n)}))},setLlmModelResult:function(r){e({llmmodelResult:r});var t,l=n().currentLlmModel;""!==l.uid&&void 0!==l||(null===(t=r.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmModel:r.data.content[0]})},setCurrentLlmModel:function(r){var t=n().llmmodelResult.data.content,l=t.findIndex((function(e){return e.uid===r.uid}));if(-1!==l){var i=[].concat(L()(t.slice(0,l)),[r],L()(t.slice(l+1))),o=f()(f()({},n().llmmodelResult),{},{data:{content:i}});e({llmmodelResult:o,currentLlmModel:r})}else e({currentLlmModel:r})},deleteCurrentLlmModel:function(r){var t=n().llmmodelResult.data.content,l=t.findIndex((function(e){return e.uid===r}));-1!==l?e({llmmodelResult:f()(f()({},n().llmmodelResult),{},{data:{content:[].concat(L()(t.slice(0,l)),L()(t.slice(l+1)))}})}):console.warn("LlmModel not found in cache:",r),n().currentLlmModel.uid===r&&e({currentLlmModel:{uid:""}})},deleteLlmModelCache:function(){return e({},!0)}}})),{name:v.O4M}))),M=(0,j.Ue)()((0,y.mW)((0,y.tJ)((0,k.n)((function(e,n){return{llmproviderResult:{data:{content:[]}},currentLlmProvider:{uid:"",nickname:""},insertLlmProvider:function(n){e((function(e){e.llmproviderResult.data.content.unshift(n)}))},setLlmProviderResult:function(r){e({llmproviderResult:r});var t,l=n().currentLlmProvider;""!==l.uid&&void 0!==l||(null===(t=r.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&e({currentLlmProvider:r.data.content[0]})},setCurrentLlmProvider:function(r){var t=n().llmproviderResult.data.content,l=t.findIndex((function(e){return e.uid===r.uid}));if(-1!==l){var i=[].concat(L()(t.slice(0,l)),[r],L()(t.slice(l+1))),o=f()(f()({},n().llmproviderResult),{},{data:{content:i}});e({llmproviderResult:o,currentLlmProvider:r})}else e({currentLlmProvider:r})},deleteCurrentLlmProvider:function(r){var t=n().llmproviderResult.data.content,l=t.findIndex((function(e){return e.uid===r}));-1!==l?e({llmproviderResult:f()(f()({},n().llmproviderResult),{},{data:{content:[].concat(L()(t.slice(0,l)),L()(t.slice(l+1)))}})}):console.warn("LlmProvider not found in cache:",r),n().currentLlmProvider.uid===r&&e({currentLlmProvider:{uid:""}})},deleteLlmProviderCache:function(){return e({},!0)}}})),{name:v.O4M}))),P=r(25203),S=r(3473),b=r(85867),C=r(35062),R=r(23942),w=r(25139),I=r(42502),T=r(7283),O=r(94455),U=r(75271),q=r(25248),z=r(94414),E=r(92785),F=r(52676),D=q.Z.Title,W=q.Z.Link,_=function(){var e=(0,z.Z)().isDarkMode,n=(0,E.Z)(),r=n.translateString,t=(n.translateStringTranct,M((function(e){return e.currentLlmProvider}))),l=(0,U.useState)(),i=a()(l,2),u=i[0],c=i[1],m=(0,U.useState)([]),f=a()(m,2),v=f[0],p=f[1],x=Z((function(e){return{currentLlmModel:e.currentLlmModel,setCurrentLlmModel:e.setCurrentLlmModel}})),g=x.currentLlmModel,L=x.setCurrentLlmModel,j=function(){var e=d()(o()().mark((function e(){var n,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmModels"),n={pageNumber:0,pageSize:20,provider:null==t?void 0:t.name},e.next=4,h(n);case 4:r=e.sent,console.log("queryLlmModelsByOrg",r),200===r.code?c(r):(console.log("error",r),s.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,U.useEffect)((function(){if(null!=u&&u.data.content){var e=u.data.content.reduce((function(e,n){var r=n.category;return e[r]||(e[r]=[]),e[r].push(n),e}),{});p(e)}else p([])}),[u]),(0,U.useEffect)((function(){console.log("currentLlmProvider",t),j()}),[t]);return(0,F.jsxs)("div",{style:{width:"50%",margin:"auto",marginTop:50},children:[(0,F.jsxs)(b.Z,{align:"center",children:[(0,F.jsx)(C.Z,{offsetTop:50,children:(0,F.jsx)(D,{children:null==t?void 0:t.nickname})}),(0,F.jsx)(W,{target:"_blank",href:null==t?void 0:t.webUrl,children:(0,F.jsx)(P.Z,{style:{marginLeft:"8px",color:"var(--color-text)",fontSize:"12px"}})})]}),(0,F.jsx)(D,{level:3,style:{marginTop:20},children:"API秘钥"}),(0,F.jsxs)(R.Z.Compact,{style:{width:"100%",marginTop:5},children:[(0,F.jsx)(w.Z.Password,{defaultValue:null==t?void 0:t.apiKey}),(0,F.jsx)(I.ZP,{onClick:function(){return s.yw.info("TODO: 即将上线")},children:"保存"})]}),(0,F.jsx)(W,{href:null==t?void 0:t.apiKeyUrl,target:"_blank",children:"点这里获取秘钥"}),(0,F.jsx)(I.ZP,{style:{marginLeft:20},size:"small",children:"检测秘钥是否有效"}),(0,F.jsx)(D,{level:3,style:{marginTop:20},children:"API地址"}),(0,F.jsx)(w.Z,{value:null==t?void 0:t.apiUrl,disabled:!0}),(0,F.jsx)(D,{level:3,style:{marginTop:20},children:"模型列表"}),Object.keys(v).map((function(n,t){return(0,F.jsxs)("div",{children:[(0,F.jsx)(T.Z,{}),(0,F.jsx)(D,{level:4,style:{marginTop:20},children:n}),(0,F.jsx)(O.Z,{itemLayout:"horizontal",dataSource:v[n],renderItem:function(n,t){return(0,F.jsx)(O.Z.Item,{style:(null==g?void 0:g.uid)===n.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){L(n)},children:(0,F.jsx)(O.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,F.jsx)(F.Fragment,{children:(null==g?void 0:g.uid)===n.uid?(0,F.jsxs)("span",{style:{color:"green"},children:[(0,F.jsx)(S.Z,{})," 默认模型"]}):null}),title:(0,F.jsx)(F.Fragment,{children:r(null==n?void 0:n.nickname)})})},t)}},t)]},t)})),(0,F.jsx)(T.Z,{}),(0,F.jsxs)(b.Z,{align:"center",children:["查看",(0,F.jsxs)(W,{href:null==t?void 0:t.docsUrl,target:"_blank",children:[null==t?void 0:t.nickname," 文档"]}),"和",(0,F.jsx)(W,{href:null==t?void 0:t.modelsUrl,target:"_blank",children:"模型"}),"获取更多详情"]})]})};function V(e){return A.apply(this,arguments)}function A(){return(A=d()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/v1/ai/provider/query/org",{method:"GET",params:f()(f()({},n),{},{client:v.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=r(29132),G=function(){var e=(0,z.Z)().isDarkMode,n=(0,U.useState)([]),r=a()(n,2),t=r[0],l=r[1],i=((0,p.useIntl)(),(0,U.useRef)(!1),(0,E.Z)()),u=(i.translateString,i.translateStringTranct),c=M((function(e){return{currentLlmProvider:e.currentLlmProvider,setCurrentLlmProvider:e.setCurrentLlmProvider}})),m=c.currentLlmProvider,f=c.setCurrentLlmProvider,v=function(){var e=d()(o()().mark((function e(){var n,r,t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getLlmProviders"),n={pageNumber:0,pageSize:50},e.next=4,V(n);case 4:r=e.sent,console.log("queryLlmProvidersByOrg: ",r),200===r.code?l(null==r||null===(t=r.data)||void 0===t?void 0:t.content):s.yw.error(r.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,U.useEffect)((function(){v()}),[]);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(O.Z,{itemLayout:"horizontal",dataSource:t,renderItem:function(n,r){return(0,F.jsx)(O.Z.Item,{style:(null==m?void 0:m.uid)===n.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){f(n)},children:(0,F.jsx)(O.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,F.jsx)(B.C,{src:n.avatar}),title:(0,F.jsx)(F.Fragment,{children:u(null==n?void 0:n.nickname)}),description:null==n?void 0:n.status})})}})})},J=l.Z.Sider,K=l.Z.Content,N=function(){var e=(0,t.Z)(),n=(e.headerStyle,e.leftSiderStyle),r=e.leftSiderWidth,i=e.contentStyle;return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(l.Z,{children:[(0,F.jsx)(J,{style:n,width:r,children:(0,F.jsx)(G,{})}),(0,F.jsx)(l.Z,{children:(0,F.jsx)(K,{style:i,children:(0,F.jsx)(_,{})})})]})})}}}]);