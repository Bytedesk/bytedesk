"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9828],{52887:function(Qu,X,e){e.r(X),e.d(X,{default:function(){return Uu}});var O=e(21612),W=e(67294),eu=e(15009),d=e.n(eu),nu=e(99289),A=e.n(nu),tu=e(5574),j=e.n(tu),ou=e(3418),au=e(97857),I=e.n(au),Z=e(86745);function su(i){return U.apply(this,arguments)}function U(){return U=A()(d()().mark(function i(t){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,Z.request)("/api/v1/workgroup/query",{method:"GET",params:I()(I()({},t),{},{client:"web"})}));case 1:case"end":return r.stop()}},i)})),U.apply(this,arguments)}function iu(i){return V.apply(this,arguments)}function V(){return V=A()(d()().mark(function i(t){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,Z.request)("/api/v1/workgroup/create",{method:"POST",data:I()(I()({},t),{},{client:"web"})}));case 1:case"end":return r.stop()}},i)})),V.apply(this,arguments)}function Hu(i){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function i(t){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/workgroup/update",{method:"POST",data:{wid:t.uid,nickname:t.nickname,avatar:t.avatar,description:t.description,client:"web"}}));case 1:case"end":return r.stop()}},i)})),z.apply(this,arguments)}function Xu(i){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function i(t){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/workgroup/delete",{method:"POST",data:{wid:t,client:"web"}}));case 1:case"end":return r.stop()}},i)})),N.apply(this,arguments)}var lu=e(39825),Y=e(30694),cu=e(87676),du=e(19632),pu=e.n(du),gu=e(64529),q=e(782),fu=e(71381),y=(0,gu.Ue)()((0,q.mW)((0,q.tJ)((0,fu.n)(function(i,t){return{workgroups:[],currentWorkgroup:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},setWorkgroups:function(){var l=A()(d()().mark(function v(o){return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t().currentWorkgroup.uid===""?i({workgroups:o,currentWorkgroup:o[0]}):i({workgroups:o});case 1:case"end":return c.stop()}},v)}));function r(v){return l.apply(this,arguments)}return r}(),createWorkgroup:function(){var l=A()(d()().mark(function v(o){var m;return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,iu(o);case 2:m=p.sent,console.log("create workgroup:",m),i({workgroups:[m.data].concat(pu()(t().workgroups)),currentWorkgroup:m.data});case 5:case"end":return p.stop()}},v)}));function r(v){return l.apply(this,arguments)}return r}(),setCurrentWorkgroup:function(r){i({currentWorkgroup:r})},deleteWorkgroup:function(){return i({},!0)}}}),{name:"WORKGROUP_STORE"}))),hu=e(64789),_=e(96365),w=e(8232),mu=e(86250),L=e(14726),J=e(2487),uu=e(7134),vu=e(85576),u=e(85893),Fu=_.Z.Search,Cu=function(){var t=w.Z.useForm(),l=j()(t,1),r=l[0],v=(0,lu.Z)(),o=v.isDarkMode,m=(0,W.useState)(!1),c=j()(m,2),p=c[0],n=c[1],C=(0,cu.u)(function(g){return g.orgCurrent}),a=(0,Y.E)(function(g){return g.setAgents}),s=y(function(g){return{workgroups:g.workgroups,currentWorkgroup:g.currentWorkgroup,setWorkgroups:g.setWorkgroups,createWorkgroup:g.createWorkgroup,setCurrentWorkgroup:g.setCurrentWorkgroup}}),F=s.workgroups,T=s.currentWorkgroup,E=s.setWorkgroups,Q=s.createWorkgroup,B=s.setCurrentWorkgroup,x=function(){var g=A()(d()().mark(function f(){var D,h;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return D={pageNumber:0,pageSize:10,orgUid:C.uid},k.next=3,(0,ou.W)(D);case 3:h=k.sent,console.log("get agents",h),h.code===200&&h.data.content.length>0&&a(h.data.content);case 6:case"end":return k.stop()}},f)}));return function(){return g.apply(this,arguments)}}(),M=function(){var g=A()(d()().mark(function f(){var D,h;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return D={pageNumber:0,pageSize:10,orgUid:C.uid},k.next=3,su(D);case 3:h=k.sent,console.log("getWorkgroups",h),h.code===200&&h.data.content.length>0&&E(h.data.content);case 6:case"end":return k.stop()}},f)}));return function(){return g.apply(this,arguments)}}();(0,W.useEffect)(function(){M(),x()},[]);var H=function(){n(!0)},b=function(){var g=A()(d()().mark(function f(){var D,h;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:D=r.getFieldValue("nickname"),h={nickname:D,orgUid:C.uid},Q(h),n(!1);case 4:case"end":return k.stop()}},f)}));return function(){return g.apply(this,arguments)}}(),Vu=function(){n(!1)},zu=function(f,D){B(f)},Nu=function(f,D){console.log("list on delete",f)},Ju=function(){H()},Ku=function(f,D,h){return console.log(h==null?void 0:h.source,f)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Fu,{placeholder:"input search text",onSearch:Ku,style:{width:200}}),(0,u.jsx)(mu.Z,{gap:"small",wrap:"wrap",children:(0,u.jsx)(L.ZP,{type:"primary",size:"small",icon:(0,u.jsx)(hu.Z,{}),onClick:Ju,children:"\u521B\u5EFA\u6280\u80FD\u7EC4"})}),(0,u.jsx)(J.Z,{itemLayout:"horizontal",dataSource:F,renderItem:function(f,D){return(0,u.jsx)(J.Z.Item,{style:T.uid===f.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},actions:T.uid===f.uid?[(0,u.jsx)("a",{onClick:function(){return Nu(f,D)},children:"\u5220\u9664"},"list-delete")]:[],onClick:function(){return zu(f,D)},children:(0,u.jsx)(J.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,u.jsx)(uu.C,{src:f.avatar}),title:f.nickname})})}}),(0,u.jsx)(vu.Z,{title:"\u521B\u5EFA\u6280\u80FD\u7EC4",open:p,onOk:b,onCancel:Vu,children:(0,u.jsx)(w.Z,{form:r,name:"wgForm",style:{maxWidth:400},children:(0,u.jsx)(w.Z.Item,{label:"\u6280\u80FD\u7EC4\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}],children:(0,u.jsx)(_.Z,{})})})})]})},ku=Cu,Du=e(48096),S=e(34994),P=e(62370),Wu=e(77636),Eu=e(5966),G=e(90672),xu=e(83863),Au=function(){var t=w.Z.useForm(),l=j()(t,1),r=l[0],v=(0,Y.E)(function(a){return a.agents}),o=y(function(a){return a.currentWorkgroup}),m=(0,W.useState)([]),c=j()(m,2),p=c[0],n=c[1];(0,W.useEffect)(function(){var a=y.subscribe(function(s){var F;r.setFieldValue("nickname",s.currentWorkgroup.nickname),r.setFieldValue("avatar",s.currentWorkgroup.avatar),r.setFieldValue("description",s.currentWorkgroup.description);var T=[];(F=s.currentWorkgroup.agents)===null||F===void 0||F.forEach(function(E){T.push(E.uid)}),n(T)});return a},[o]);var C=function(s){console.log("selected ".concat(s)),n(s)};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(S.A,{form:r,style:{marginLeft:"100px",width:"300px"},onFinish:function(){var a=A()(d()().mark(function s(F){return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:console.log("onFinish:",F);case 1:case"end":return E.stop()}},s)}));return function(s){return a.apply(this,arguments)}}(),initialValues:{nickname:o.nickname,description:o.description},children:[(0,u.jsxs)(P.Z,{name:"avatar",label:"\u5934\u50CF",children:[(0,u.jsx)(uu.C,{src:o.avatar}),(0,u.jsx)(Wu.Z,{})]}),(0,u.jsx)(Eu.Z,{width:"md",name:"nickname",label:"\u6280\u80FD\u7EC4\u6635\u79F0"}),(0,u.jsx)(P.Z,{name:"agents",label:"\u6210\u5458",children:(0,u.jsx)(xu.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:p,onChange:C,options:v.map(function(a){return{value:a.uid,label:a.nickname}})})}),(0,u.jsx)(G.Z,{width:"md",name:"description",label:"\u63CF\u8FF0"})]})})},ju=Au,K=e(84567),yu=function(){var t=w.Z.useForm(),l=j()(t,1),r=l[0],v=(0,Z.useIntl)(),o=(0,W.useState)(!1),m=j()(o,2),c=m[0],p=m[1],n=y(function(a){return a.currentWorkgroup});(0,W.useEffect)(function(){var a=y.subscribe(function(s){});return a},[n]);var C=function(s){n.showTopTip=s.target.checked,console.log("checked = ".concat(s.target.checked,", showTopTip:").concat(n.showTopTip)),p(s.target.checked)};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(S.A,{form:r,style:{marginLeft:"100px"},onFinish:function(){var a=A()(d()().mark(function s(F){return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:console.log("onFinish:",F);case 1:case"end":return E.stop()}},s)}));return function(s){return a.apply(this,arguments)}}(),initialValues:{welcomeTip:n==null?void 0:n.welcomeTip,topTip:n==null?void 0:n.topTip,showTopTip:n==null?void 0:n.showTopTip},children:[(0,u.jsx)(G.Z,{width:"md",name:"welcomeTip",label:"\u6B22\u8FCE\u8BED"}),(0,u.jsx)(P.Z,{children:(0,u.jsx)(K.Z,{onChange:C,name:"showTopTip",children:"\u663E\u793A\u7F6E\u9876\u8BED"})}),c&&(0,u.jsx)(G.Z,{width:"md",name:"topTip",label:"\u7F6E\u9876\u8BED"})]})})},Bu=yu,Tu=e(80049),bu=function(){var t=w.Z.useForm(),l=j()(t,1),r=l[0],v=y(function(n){return n.currentWorkgroup}),o=(0,W.useMemo)(function(){return"http://localhost:9006/?t=2&sid="+v.uid+"&"},[v]);(0,W.useEffect)(function(){var n=y.subscribe(function(C){console.log("currentWorkgroup code:",C.currentWorkgroup),r.setFieldValue("code","http://localhost:9006/?t=2&sid="+C.currentWorkgroup.uid+"&")});return n},[v]);var m=function(){window.open(o)},c=function(){navigator.clipboard.writeText(o),Tu.yw.info("code copyied into clicpboard")},p=function(C,a){return[(0,u.jsx)(L.ZP,{type:"primary",onClick:function(){var F;(F=C.form)===null||F===void 0||F.submit(),m()},children:"\u6253\u5F00"},"submit"),(0,u.jsx)(L.ZP,{onClick:function(){c()},children:"\u590D\u5236"},"reset")]};return(0,u.jsx)(S.A,{form:r,style:{marginLeft:"100px"},submitter:{render:p},initialValues:{code:o},children:(0,u.jsx)(G.Z,{width:"md",name:"code",label:"\u5BA2\u670D\u4EE3\u7801"})})},wu=bu,Zu=function(){var t=w.Z.useForm(),l=j()(t,1),r=l[0],v=(0,Z.useIntl)(),o=y(function(c){return c.currentWorkgroup});(0,W.useEffect)(function(){var c=y.subscribe(function(p){});return c},[o]);var m=function(p){o.defaultRobot=p.target.checked,console.log("checked = ".concat(p.target.checked,", defaultRobot:").concat(o.defaultRobot))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.A,{form:r,style:{marginLeft:"100px"},initialValues:{defaultRobot:o.defaultRobot},onFinish:function(){var c=A()(d()().mark(function p(n){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:console.log("onFinish:",n);case 1:case"end":return a.stop()}},p)}));return function(p){return c.apply(this,arguments)}}(),children:(0,u.jsx)(P.Z,{children:(0,u.jsx)(K.Z,{onChange:m,name:"defaultRobot",children:"\u9ED8\u8BA4\u542F\u7528\u673A\u5668\u4EBA"})})})})},Su=Zu,R=e(85615),$=e(78045),Ru=function(){var t=w.Z.useForm(),l=j()(t,1),r=l[0],v=(0,Z.useIntl)(),o=y(function(B){return B.currentWorkgroup}),m=(0,W.useState)(!1),c=j()(m,2),p=c[0],n=c[1],C=(0,W.useState)(R.Jx),a=j()(C,2),s=a[0],F=a[1];(0,W.useEffect)(function(){var B=y.subscribe(function(x){});return B},[o]),(0,W.useEffect)(function(){n(o.recent),F(o.routeType)},[]);var T=function(x){console.log("checked = ".concat(x.target.checked)),n(x.target.checked)},E=function(x){console.log("radio checked",x.target.value),F(x.target.value)},Q=function(x,M){return[(0,u.jsx)(L.ZP,{type:"primary",onClick:function(){var b;(b=x.form)===null||b===void 0||b.submit()},children:"\u4FDD\u5B58"},"submit")]};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(S.A,{form:r,style:{marginLeft:"100px"},initialValues:{},submitter:{render:Q},onFinish:function(){var B=A()(d()().mark(function x(M){return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:console.log("onFinish:",M);case 1:case"end":return b.stop()}},x)}));return function(x){return B.apply(this,arguments)}}(),children:[(0,u.jsx)(P.Z,{children:(0,u.jsx)(K.Z,{onChange:T,value:p,children:"\u719F\u5BA2\u4F18\u5148"})}),(0,u.jsxs)(S.A.Item,{children:[(0,u.jsxs)($.ZP.Group,{onChange:E,value:s,children:[(0,u.jsx)($.ZP,{value:R.Jx,children:"\u8F6E\u8BE2"}),(0,u.jsx)($.ZP,{value:R.C,children:"\u5F53\u65E5\u63A5\u5F85\u6700\u5C11\u4F18\u5148"}),(0,u.jsx)($.ZP,{value:R.Vd,children:"\u9971\u548C\u5EA6\u6700\u4F4E\u4F18\u5148"}),(0,u.jsx)($.ZP,{value:R.Q2,children:"\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148"}),(0,u.jsx)($.ZP,{value:R.Su,disabled:!0,children:"\u5E7F\u64AD"})]}),(0,u.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u767B\u5F55\u65F6\u95F4\u8FDB\u5165\u961F\u5217\u8F6E\u6D41\u5206\u914D\u3002\u6CE8\u610F\uFF1A\u5F53\u5BA2\u670D\u7F51\u7EDC\u4E0D\u7A33\u5B9A\u6389\u7EBF\u91CD\u8FDE\u4E4B\u540E\uFF0C\u4F1A\u91CD\u65B0\u6392\u5230\u961F\u5217\u672B\u5C3E"}),(0,u.jsx)("p",{children:"\u6839\u636E\u5F53\u65E5(0\u70B9\u5F00\u59CB)\u5BA2\u670D\u63A5\u5F85\u603B\u6570\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u5BA2\u670D\u4E0A\u73ED\u65F6\u95F4\u4E0D\u7EDF\u4E00\uFF0C\u665A\u767B\u5F55\u8005\u767B\u5F55\u540E\u4F1A\u96C6\u4E2D\u6536\u5230\u5206\u914D\u65B0\u5BA2\uFF0C\u76F4\u5230\u8DDF\u5176\u4ED6\u5728\u7EBF\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\u4E3A\u6B62"}),(0,u.jsx)("p",{children:"\u6839\u636E\uFF08\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF-\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6570\u91CF\uFF09\u4E4B\u5DEE\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5927\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u6BCF\u4E2A\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\uFF0C\u5219\u6B64\u65B9\u6CD5\u8DDF\u2019\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148\u2018\u6548\u679C\u4E00\u6837"}),(0,u.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u4F1A\u53D7\u5230\u5BA2\u670D\u63A5\u5F85\u901F\u5EA6\u7684\u5F71\u54CD\uFF0C\u63A5\u5F85\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u5BA2\u670D\u624B\u52A8\u7ED3\u675F\u4F1A\u8BDD\u6709\u5229\u4E8E\u52A0\u901F\u5206\u914D\u65B0\u5BA2"})]})]})})},$u=Ru,Pu=function(){var t=(0,Z.useIntl)(),l=function(o){console.log(o)},r=[{key:"basic",label:t.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,u.jsx)(ju,{})},{key:"tip",label:"\u6B22\u8FCE\u8BED",children:(0,u.jsx)(Bu,{})},{key:"robot",label:"\u673A\u5668\u4EBA",children:(0,u.jsx)(Su,{})},{key:"route",label:"\u8DEF\u7531\u914D\u7F6E",children:(0,u.jsx)($u,{})},{key:"code",label:"\u5BA2\u670D\u4EE3\u7801",children:(0,u.jsx)(wu,{})}];return(0,u.jsx)(Du.Z,{defaultActiveKey:"1",items:r,onChange:l})},Ou=Pu,Iu=e(77154),Lu=O.Z.Sider,Gu=O.Z.Content,Mu=function(){var t=(0,Iu.Z)(),l=t.leftSiderStyle,r=t.contentStyle;return(0,u.jsxs)(O.Z,{children:[(0,u.jsx)(Lu,{style:l,children:(0,u.jsx)(ku,{})}),(0,u.jsx)(O.Z,{children:(0,u.jsx)(Gu,{children:(0,u.jsx)(Ou,{})})})]})},Uu=Mu}}]);
