"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7443],{13253:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(43314),n(85702),n(61017),n(77667),n(82045),n(44194),n(31549)},9750:function(e,t,n){var o=n(90819),i=n.n(o),s=n(73193),u=n.n(s),r=n(89933),l=n.n(r),a=n(45332),d=n.n(a),c=n(89756),v=n(81153),g=n(43314),p=n(85702),f=n(61017),h=n(77667),m=n(5728),w=n(31806),S=n(82045),q=n(44194),b=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),o=m.A.useForm(),s=d()(o,1)[0],r=(0,q.useState)(!1),a=d()(r,2),k=(a[0],a[1],(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}}))),F=k.currentAgent,T=k.setCurrentAgent,x=(0,f.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),y=x.currentWorkgroup,M=x.setCurrentWorkgroup;(0,q.useEffect)((function(){var e;if(t===h.Njn)s.setFieldValue("showRateBtn",null==F||null===(e=F.serviceSettings)||void 0===e?void 0:e.showRateBtn);else if(t===h.aZD){var n;s.setFieldValue("showRateBtn",null==y||null===(n=y.serviceSettings)||void 0===n?void 0:n.showRateBtn)}}),[F,y]);var C=function(){var e=l()(i()().mark((function e(o){var s,r,l,a,d,p,f,m,w,S,q,b,k,x,C,U,j,A;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleShowRateSwitchChange:",o),t!==h.Njn){e.next=11;break}return m=u()(u()({},F),{},{serviceSettings:u()(u()({},null==F?void 0:F.serviceSettings),{},{showRateBtn:o,quickFaqUids:null==F||null===(s=F.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==F||null===(r=F.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==F||null===(l=F.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==F||null===(a=F.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==F||null===(d=F.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),robotSettings:u()(u()({},F.robotSettings),{},{robotUid:null==F||null===(p=F.robotSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid}),leaveMsgSettings:u()(u()({},F.leaveMsgSettings),{},{worktimeUids:null==F||null===(f=F.leaveMsgSettings)||void 0===f||null===(f=f.worktimes)||void 0===f?void 0:f.map((function(e){return e.uid}))}),autoReplySettings:u()({},F.autoReplySettings)}),console.log("agentObject:",m),e.next=6,(0,v.sE)(m);case 6:w=e.sent,console.log("updateAgent response:",w),200===w.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(w.data)):(c.yw.destroy(),c.yw.error(w.message)),e.next=19;break;case 11:if(t!==h.aZD){e.next=19;break}return j=u()(u()({},y),{},{serviceSettings:u()(u()({},y.serviceSettings),{},{showRateBtn:o,quickFaqUids:null===(S=y.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),faqUids:null==y||null===(q=y.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==y||null===(b=y.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null===(k=y.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==y||null===(x=y.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:u()(u()({},y.robotSettings),{},{robotUid:null==y||null===(C=y.robotSettings)||void 0===C||null===(C=C.robot)||void 0===C?void 0:C.uid}),leaveMsgSettings:u()(u()({},y.leaveMsgSettings),{},{worktimeUids:null==y||null===(U=y.leaveMsgSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=16,(0,g.W5)(j);case 16:A=e.sent,console.log("updateWorkGroup response:",A),200===A.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),M(A.data)):(c.yw.destroy(),c.yw.error(A.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(m.A,{form:s,submitter:{render:!1},children:[(0,b.jsx)(w.Z,{width:"md",name:"showRateBtn",label:"访客端是否显示评价按钮",fieldProps:{onChange:C}}),!1]})})}},3321:function(e,t,n){var o=n(90819),i=n.n(o),s=n(73193),u=n.n(s),r=n(89933),l=n.n(r),a=n(45332),d=n.n(a),c=n(89756),v=n(81153),g=n(63833),p=n(43314),f=n(1780),h=n(85702),m=n(3245),w=n(61017),S=n(77667),q=n(5728),b=n(2724),k=n(80067),F=n(82045),T=n(44194),x=n(60029),y=n(74828),M=n(31549);t.Z=function(e){var t=e.type,n=q.A.useForm(),o=d()(n,1)[0],s=(0,F.useIntl)(),r=(0,f.Z)().translateString,a=(0,T.useState)(!1),C=d()(a,2),U=C[0],j=C[1],A=(0,m.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),R=A.currentRobot,Z=A.setCurrentRobot,W=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),L=W.currentAgent,D=W.setCurrentAgent,V=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),B=V.currentWorkgroup,N=V.setCurrentWorkgroup,E=(0,T.useState)(""),I=d()(E,2),O=I[0],X=I[1],_=(0,T.useState)(""),K=d()(_,2),P=K[0],$=K[1],G=(0,T.useState)(""),z=d()(G,2),H=z[0],J=z[1],Q=function(e){var n;if(console.log("setFormValues:",e),X(r(null==e?void 0:e.welcomeTip)),J(r(null==e?void 0:e.topTip)),j(null==e?void 0:e.showTopTip),o.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),o.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),o.setFieldValue("showLogo",null==e?void 0:e.showLogo),t===S.Njn)$(r(null==L||null===(n=L.leaveMsgSettings)||void 0===n?void 0:n.leaveMsgTip));else if(t===S.aZD){var i;$(r(null==B||null===(i=B.leaveMsgSettings)||void 0===i?void 0:i.leaveMsgTip))}};(0,T.useEffect)((function(){t===S._X4?Q(null==R?void 0:R.serviceSettings):t===S.Njn?(Q(null==L?void 0:L.serviceSettings),o.setFieldValue("maxThreadCount",null==L?void 0:L.maxThreadCount)):t===S.aZD&&Q(null==B?void 0:B.serviceSettings)}),[R,L,B]);var Y=function(){var e=l()(i()().mark((function e(n){var o,r,l,a,d,f,h,m,w,q,b,k,F,T,x,y,M,C,j,A,W,V,E,I,X;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",n," showTopTip:",U),c.yw.loading(s.formatMessage({id:"updating"})),t!==S._X4){e.next=12;break}return f=u()(u()({},R),{},{serviceSettings:u()(u()({},R.serviceSettings),{},{topTip:H,showTopTip:U,welcomeTip:O,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(o=L.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==R||null===(r=R.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==R||null===(l=R.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==R||null===(a=R.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==R||null===(d=R.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,g.$l)(f);case 7:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),Z(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=30;break;case 12:if(t!==S.Njn){e.next=22;break}return x=u()(u()({},L),{},{serviceSettings:u()(u()({},L.serviceSettings),{},{topTip:H,showTopTip:U,welcomeTip:O,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(m=L.serviceSettings)||void 0===m||null===(m=m.quickFaqs)||void 0===m?void 0:m.map((function(e){return e.uid})),faqUids:null===(w=L.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==L||null===(q=L.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(k=L.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),leaveMsgSettings:u()(u()({},L.leaveMsgSettings),{},{leaveMsgTip:P,worktimeUids:null===(F=L.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),robotSettings:u()(u()({},L.robotSettings),{},{robotUid:null===(T=L.robotSettings)||void 0===T||null===(T=T.robot)||void 0===T?void 0:T.uid}),maxThreadCount:(null==n?void 0:n.maxThreadCount)||10}),console.log("agentObject:",x),e.next=17,(0,v.sE)(x);case 17:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),D(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=30;break;case 22:if(t!==S.aZD){e.next=30;break}return I=u()(u()({},B),{},{serviceSettings:u()(u()({},B.serviceSettings),{},{topTip:H,showTopTip:U,welcomeTip:O,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(M=B.serviceSettings)||void 0===M||null===(M=M.quickFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),faqUids:null===(C=B.serviceSettings)||void 0===C||null===(C=C.faqs)||void 0===C?void 0:C.map((function(e){return e.uid})),guessFaqUids:null==B||null===(j=B.serviceSettings)||void 0===j||null===(j=j.guessFaqs)||void 0===j?void 0:j.map((function(e){return e.uid})),hotFaqUids:null==B||null===(A=B.serviceSettings)||void 0===A||null===(A=A.hotFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),shortcutFaqUids:null==B||null===(W=B.serviceSettings)||void 0===W||null===(W=W.shortcutFaqs)||void 0===W?void 0:W.map((function(e){return e.uid}))}),leaveMsgSettings:u()(u()({},B.leaveMsgSettings),{},{leaveMsgTip:P,worktimeUids:null===(V=B.leaveMsgSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),robotSettings:u()(u()({},L.robotSettings),{},{robotUid:null===(E=L.robotSettings)||void 0===E||null===(E=E.robot)||void 0===E?void 0:E.uid}),agentUids:B.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",I),e.next=27,(0,p.W5)(I);case 27:X=e.sent,console.log("updateWorkGroup response:",X),200===X.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),N(X.data)):(c.yw.destroy(),c.yw.error(X.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)(q.A,{form:o,onFinish:Y,style:{marginLeft:"20px"},children:[(0,M.jsx)(b.Z,{name:"showTopTip",width:"md",label:"显示置顶语/公告",fieldProps:{onChange:function(e){var n,o;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==L||null===(n=L.serviceSettings)||void 0===n?void 0:n.showTopTip)),j(e.target.checked),e.target.checked)if(t===S._X4)J(r(null==R||null===(o=R.serviceSettings)||void 0===o?void 0:o.topTip));else if(t===S.Njn){var i;J(r(null==L||null===(i=L.serviceSettings)||void 0===i?void 0:i.topTip))}else if(t===S.aZD){var s;J(r(null==B||null===(s=B.serviceSettings)||void 0===s?void 0:s.topTip))}}}}),U&&(0,M.jsx)(q.A.Item,{name:"topTip",label:"置顶语",rules:[{required:!0,message:"请输入置顶语"}],children:(0,M.jsx)(x.Z,{placeholder:"请输入置顶语...",value:H,toolbarKeys:(0,y.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){J(e)}})}),(0,M.jsx)(q.A.Item,{name:"welcomeTip",label:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),rules:[{required:!0,message:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}],children:(0,M.jsx)(x.Z,{placeholder:"welcomeTip content..",value:O,toolbarKeys:(0,y.eD)(),style:{height:"200px",width:"600px"},onChange:function(e,t){X(e)}})}),t!=S._X4&&(0,M.jsx)(q.A.Item,{name:"leaveMsgTip",label:"离线留言提示",rules:[{required:!0,message:"请输入离线留言提示"}],children:(0,M.jsx)(x.Z,{placeholder:"请输入离线留言提示...",value:P,toolbarKeys:(0,y.eD)(),style:{height:"200px",width:"600px"},onChange:function(e){$(e)}})}),(0,M.jsx)(k.Z,{width:"md",name:"autoCloseMin",label:"无新消息会话自动关闭时长(单位：分钟)",min:1}),t===S.Njn&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("p",{children:"1. 同时最大接待数量，超出数量默认进入排队队列"}),(0,M.jsx)("p",{children:"2. 0为所有访客默认进入排队队列，需要客服手动接入"}),(0,M.jsx)("p",{children:"3. 当接待数量小于最大接待数量时，会话自动接入，优先接入排队队列中会话"}),(0,M.jsx)(k.Z,{width:"md",name:"maxThreadCount",label:"同时最大接待数量",min:0})]}),(0,M.jsx)(b.Z,{name:"showLogo",width:"md",label:"显示Logo",tooltip:"只有付费会员可以去掉Logo",fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}}}]);