"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1642],{19054:function(Se,be,t){var ve=t(1413),x=t(91),he=t(67294),ie=t(43889),E=t(85893),ge=["fieldProps","request","params","proFieldProps"],U=function(ae,H){var A=ae.fieldProps,ue=ae.request,ce=ae.params,_=ae.proFieldProps,J=(0,x.Z)(ae,ge);return(0,E.jsx)(ie.Z,(0,ve.Z)({valueType:"treeSelect",fieldProps:A,ref:H,request:ue,params:ce,filedConfig:{customLightMode:!0},proFieldProps:_},J))},me=he.forwardRef(U);be.Z=me},84125:function(Se,be,t){t.d(be,{D$:function(){return ue},EP:function(){return we},hS:function(){return _},z_:function(){return K}});var ve=t(15009),x=t.n(ve),he=t(97857),ie=t.n(he),E=t(99289),ge=t.n(E),U=t(85615),me=t(86745);function K(N){return ae.apply(this,arguments)}function ae(){return ae=ge()(x()().mark(function N(oe){return x()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,me.request)("/api/v1/mem/query/org",{method:"GET",params:ie()(ie()({},oe),{},{client:U.bV})}));case 1:case"end":return M.stop()}},N)})),ae.apply(this,arguments)}function H(){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function N(){return _regeneratorRuntime().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",request("/api/v1/mem/query",{method:"GET",params:{client:HTTP_CLIENT}}));case 1:case"end":return G.stop()}},N)})),A.apply(this,arguments)}function ue(N){return ce.apply(this,arguments)}function ce(){return ce=ge()(x()().mark(function N(oe){return x()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,me.request)("/api/v1/mem/create",{method:"POST",data:ie()(ie()({},oe),{},{client:U.bV})}));case 1:case"end":return M.stop()}},N)})),ce.apply(this,arguments)}function _(N){return J.apply(this,arguments)}function J(){return J=ge()(x()().mark(function N(oe){return x()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,me.request)("/api/v1/mem/update",{method:"POST",data:ie()(ie()({},oe),{},{client:U.bV})}));case 1:case"end":return M.stop()}},N)})),J.apply(this,arguments)}function we(N){return Ae.apply(this,arguments)}function Ae(){return Ae=ge()(x()().mark(function N(oe){return x()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,me.request)("/api/v1/member/delete",{method:"POST",data:ie()(ie()({},oe),{},{client:U.bV})}));case 1:case"end":return M.stop()}},N)})),Ae.apply(this,arguments)}function Ze(N){return fe.apply(this,arguments)}function fe(){return fe=_asyncToGenerator(_regeneratorRuntime().mark(function N(oe){return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",request("/api/v1/member/filter",{method:"GET",params:_objectSpread(_objectSpread({},oe),{},{client:HTTP_CLIENT})}));case 1:case"end":return M.stop()}},N)})),fe.apply(this,arguments)}},44318:function(Se,be,t){t.r(be),t.d(be,{default:function(){return Hn}});var ve=t(21612),x=t(67294),he=t(96087),ie=t(15009),E=t.n(ie),ge=t(97857),U=t.n(ge),me=t(99289),K=t.n(me),ae=t(5574),H=t.n(ae),A=t(80049),ue=t(3418),ce=t(73803),_=t(30694),J=t(85615),we=t(64529),Ae=t(782),Ze=t(71381),fe=(0,we.Ue)()((0,Ae.mW)((0,Ae.tJ)((0,Ze.n)(function(i,r){return{memberResult:{data:{content:[],totalElements:0}},insertMember:function(n){i(function(C){var y=C.memberResult.data.content;y.unshift(n)})},updateMember:function(n){i(function(C){var y=C.memberResult.data.content,Z=y.findIndex(function(S){return S.uid===n.uid});Z!==-1?y[Z]=n:console.warn("Member with uid ".concat(n.uid," not found."))})},deleteMember:function(n){i(function(C){var y=C.memberResult.data.content,Z=y.findIndex(function(S){return S.uid===n.uid});Z!==-1?y.splice(Z,1):console.warn("Member with uid ".concat(n.uid," not found."))})},setMemberResult:function(n){i({memberResult:n})},deleteMemberCache:function(){return i({},!0)}}}),{name:J.PQ}))),N=t(66723),oe=t(88484),G=t(34994),M=t(5966),Ce=t(90672),Ue=t(19054),Y=t(86745),se=t(8232),De=t(7134),F=t(14726),e=t(85893),Ve=function(){var r,s=se.Z.useForm(),n=H()(s,1),C=n[0],y=(0,Y.useIntl)(),Z=(0,ce.Z)(),S=Z.translateString,D=fe(function(g){return g.memberResult}),w=(0,_.E)(function(g){return{currentAgent:g.currentAgent,setCurrentAgent:g.setCurrentAgent}}),h=w.currentAgent,Q=w.setCurrentAgent,p=(0,x.useState)(""),I=H()(p,2),v=I[0],B=I[1],R=function(l,b){b.title=l.nickname,b.value=l.uid},W=(0,x.useMemo)(function(){for(var g=[],l=0;l<D.data.content.length;l++){var b={title:"",value:"",children:[]};R(D.data.content[l],b),g.push(b)}return g},[D]);(0,x.useEffect)(function(){var g=_.E.subscribe(function(l){C.setFieldValue("nickname",S(l.currentAgent.nickname)),C.setFieldValue("email",l.currentAgent.email),C.setFieldValue("mobile",l.currentAgent.mobile),C.setFieldValue("description",S(l.currentAgent.description))});return g},[h]);var X=function(l){console.log("handleUploadSuccess:",l),B(l)},O=function(l){console.log("handleUploadError:",l)},L=function(l){console.log("onTreeSelectChange:",l);for(var b=0;b<D.data.content.length;b++){var k=D.data.content[b];k.uid===l&&(C.setFieldsValue({nickname:k.nickname}),C.setFieldsValue({email:k.email}),C.setFieldsValue({mobile:k.mobile}))}},c=function(){var g=K()(E()().mark(function l(b){var k,$,V,z,le;return E()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return console.log("onFinish:",b),A.yw.loading("\u6B63\u5728\u4FEE\u6539"),z=U()(U()(U()({},h),b),{},{avatar:v,serviceSettings:U()(U()({},h.serviceSettings),{},{robotUid:(k=h.serviceSettings)===null||k===void 0||(k=k.robot)===null||k===void 0?void 0:k.uid,quickButtonUids:($=h.serviceSettings)===null||$===void 0||($=$.quickButtons)===null||$===void 0?void 0:$.map(function(pe){return pe.uid}),worktimeUids:(V=h.serviceSettings)===null||V===void 0||(V=V.worktimes)===null||V===void 0?void 0:V.map(function(pe){return pe.uid})})}),console.log("agentObject:",z),de.next=6,(0,ue.sE)(z);case 6:le=de.sent,console.log("updateAgent response:",le),le.code===200?(A.yw.destroy(),A.yw.success(y.formatMessage({id:"update.success"})),Q(le.data)):(A.yw.destroy(),A.yw.error(le.message));case 9:case"end":return de.stop()}},l)}));return function(b){return g.apply(this,arguments)}}(),j=function(l){return Array.isArray(l)?l:l==null?void 0:l.fileList};return(0,x.useEffect)(function(){if(h){var g;B(h.avatar),C.setFieldValue("memberUid",h==null||(g=h.member)===null||g===void 0?void 0:g.uid)}},[h]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(G.A,{form:C,style:{marginLeft:"100px"},onFinish:c,initialValues:{nickname:S(h==null?void 0:h.nickname),email:h==null?void 0:h.email,mobile:h==null?void 0:h.mobile,description:S(h==null?void 0:h.description),memberUid:h==null||(r=h.member)===null||r===void 0?void 0:r.uid},children:[(0,e.jsx)(se.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:j,label:y.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,e.jsxs)(N.G,{onSuccess:X,onError:O,children:[(0,e.jsx)(De.C,{src:v}),(0,e.jsx)(F.ZP,{icon:(0,e.jsx)(oe.Z,{}),children:y.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,e.jsx)(M.Z,{width:"md",name:"nickname",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u5BA2\u670D\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u670D\u6635\u79F0"}]}),(0,e.jsx)(M.Z,{width:"md",name:"email",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u90AE\u7BB1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,e.jsx)(M.Z,{width:"md",name:"mobile",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}]}),(0,e.jsx)(Ce.Z,{width:"md",name:"description",label:"\u5BA2\u670D\u5361\u7247-\u5C55\u793A\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}]}),(0,e.jsx)(Ue.Z,{width:"md",name:"memberUid",label:"\u7ED1\u5B9A\u6210\u5458-\u7528\u4E8E\u8D26\u53F7\u767B\u5F55",fieldProps:{treeDefaultExpandAll:!0,treeData:W,onChange:L},placeholder:"Please select",disabled:!0})]})})},We=Ve,je=t(63434),Pe=t(31199),Ie=function(){var r,s,n,C=se.Z.useForm(),y=H()(C,1),Z=y[0],S=(0,ce.Z)(),D=S.translateString,w=(0,x.useState)(!1),h=H()(w,2),Q=h[0],p=h[1],I=(0,_.E)(function(O){return{currentAgent:O.currentAgent,setCurrentAgent:O.setCurrentAgent}}),v=I.currentAgent,B=I.setCurrentAgent;(0,x.useEffect)(function(){var O=_.E.subscribe(function(L){var c,j,g,l,b,k,$;Z.setFieldValue("welcomeTip",D((c=L.currentAgent)===null||c===void 0||(c=c.serviceSettings)===null||c===void 0?void 0:c.welcomeTip)),Z.setFieldValue("topTip",D((j=L.currentAgent)===null||j===void 0||(j=j.serviceSettings)===null||j===void 0?void 0:j.topTip)),Z.setFieldValue("showTopTip",(g=L.currentAgent)===null||g===void 0||(g=g.serviceSettings)===null||g===void 0?void 0:g.showTopTip),Z.setFieldValue("leavemsgTip",D((l=L.currentAgent)===null||l===void 0||(l=l.serviceSettings)===null||l===void 0?void 0:l.leavemsgTip)),Z.setFieldValue("autoCloseMin",(b=L.currentAgent)===null||b===void 0||(b=b.serviceSettings)===null||b===void 0?void 0:b.autoCloseMin),Z.setFieldValue("showLogo",(k=L.currentAgent)===null||k===void 0||(k=k.serviceSettings)===null||k===void 0?void 0:k.showLogo),Z.setFieldValue("maxThreadCount",($=L.currentAgent)===null||$===void 0?void 0:$.maxThreadCount)});return O},[v]),(0,x.useEffect)(function(){var O;p(v==null||(O=v.serviceSettings)===null||O===void 0?void 0:O.showTopTip)},[v]);var R=function(L){var c;console.log("checked = ".concat(L.target.checked,", showTopTip:").concat(v==null||(c=v.serviceSettings)===null||c===void 0?void 0:c.showTopTip)),p(L.target.checked)},W=function(L){console.log("onShowLogoChange = ".concat(L.target.checked))},X=function(){var O=K()(E()().mark(function L(c){var j,g,l,b,k;return E()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return console.log("onFinish:",c," showTopTip:",Q),A.yw.loading("\u66F4\u65B0\u4E2D..."),b=U()(U()({},v),{},{serviceSettings:U()(U()({},v.serviceSettings),{},{topTip:(c==null?void 0:c.topTip)||"",showTopTip:Q,welcomeTip:(c==null?void 0:c.welcomeTip)||"",leavemsgTip:(c==null?void 0:c.leavemsgTip)||"",autoCloseMin:(c==null?void 0:c.autoCloseMin)||25,showLogo:(c==null?void 0:c.showLogo)||!0,robotUid:(j=v.serviceSettings)===null||j===void 0||(j=j.robot)===null||j===void 0?void 0:j.uid,quickButtonUids:(g=v.serviceSettings)===null||g===void 0||(g=g.quickButtons)===null||g===void 0?void 0:g.map(function(z){return z.uid}),worktimeUids:(l=v.serviceSettings)===null||l===void 0||(l=l.worktimes)===null||l===void 0?void 0:l.map(function(z){return z.uid})}),maxThreadCount:(c==null?void 0:c.maxThreadCount)||10}),console.log("agentObject:",b),V.next=6,(0,ue.sE)(b);case 6:k=V.sent,console.log("updateAgent response:",k),k.code===200?(A.yw.destroy(),A.yw.success(intl.formatMessage({id:"update.success"})),B(k.data)):(A.yw.destroy(),A.yw.error(k.message));case 9:case"end":return V.stop()}},L)}));return function(c){return O.apply(this,arguments)}}();return(0,e.jsxs)(G.A,{form:Z,onFinish:X,style:{marginLeft:"100px"},initialValues:{topTip:D(v==null||(r=v.serviceSettings)===null||r===void 0?void 0:r.topTip),showTopTip:v==null||(s=v.serviceSettings)===null||s===void 0?void 0:s.showTopTip,welcomeTip:D(v.serviceSettings.welcomeTip),leavemsgTip:D(v==null||(n=v.serviceSettings)===null||n===void 0?void 0:n.leavemsgTip),autoCloseMin:v==null?void 0:v.serviceSettings.autoCloseMin,showLogo:v==null?void 0:v.serviceSettings.showLogo,maxThreadCount:v==null?void 0:v.maxThreadCount},children:[(0,e.jsx)(je.Z,{name:"showTopTip",width:"md",label:"\u663E\u793A\u7F6E\u9876\u8BED",fieldProps:{onChange:R}}),Q&&(0,e.jsx)(Ce.Z,{width:"md",name:"topTip",label:"\u7F6E\u9876\u8BED"}),(0,e.jsx)(Ce.Z,{width:"md",name:"welcomeTip",label:"\u6B22\u8FCE\u8BED"}),(0,e.jsx)(Ce.Z,{width:"md",name:"leavemsgTip",label:"\u79BB\u7EBF\u7559\u8A00\u63D0\u793A"}),(0,e.jsx)(Pe.Z,{width:"md",name:"autoCloseMin",label:"\u65E0\u65B0\u6D88\u606F\u4F1A\u8BDD\u81EA\u52A8\u5173\u95ED\u65F6\u957F(\u5355\u4F4D\uFF1A\u5206\u949F)",min:1}),(0,e.jsx)(Pe.Z,{width:"md",name:"maxThreadCount",label:"\u540C\u65F6\u6700\u5927\u63A5\u5F85\u6570\u91CF",min:1}),(0,e.jsx)(je.Z,{name:"showLogo",width:"md",label:"\u663E\u793ALogo",fieldProps:{onChange:W}})]})},ze=Ie,Ke=t(19632),Ne=t.n(Ke),q=t(37326),Ge=t(55895),Qe=t(33725),Me=t(64317),He=t(27484),ke=t.n(He),Te=t(35612),_e=t(10285),Je=t.n(_e),Fe=t(87676),Xe=t(76545);ke().extend(Je());var xe="HH:mm:ss",Ye=function(){var r,s,n,C,y,Z=G.A.useForm(),S=H()(Z,1),D=S[0],w=(0,x.useRef)(!1),h=(0,x.useRef)(),Q=(0,_.E)(function(f){return{currentAgent:f.currentAgent,setCurrentAgent:f.setCurrentAgent}}),p=Q.currentAgent,I=Q.setCurrentAgent,v=(0,q.V)(function(f){return{robotResult:f.robotResult,setRobotResult:f.setRobotResult}}),B=v.robotResult,R=v.setRobotResult,W=(0,Fe.u)(function(f){return f.orgCurrent}),X=(0,ce.Z)(),O=X.translateString,L=(0,x.useState)([]),c=H()(L,2),j=c[0],g=c[1];(0,x.useEffect)(function(){var f;g(p==null||(f=p.serviceSettings)===null||f===void 0||(f=f.worktimes)===null||f===void 0?void 0:f.map(function(o){return o==null?void 0:o.uid}));var a=_.E.subscribe(function(o){var u,m,T,d,P;D.setFieldValue("defaultRobot",(u=o.currentAgent)===null||u===void 0||(u=u.serviceSettings)===null||u===void 0?void 0:u.defaultRobot),D.setFieldValue("offlineRobot",(m=o.currentAgent)===null||m===void 0||(m=m.serviceSettings)===null||m===void 0?void 0:m.offlineRobot),D.setFieldValue("nonWorktimeRobot",(T=o.currentAgent)===null||T===void 0||(T=T.serviceSettings)===null||T===void 0?void 0:T.nonWorktimeRobot),D.setFieldValue("robotUid",(d=o.currentAgent)===null||d===void 0||(d=d.serviceSettings)===null||d===void 0||(d=d.robot)===null||d===void 0?void 0:d.uid),g(p==null||(P=p.serviceSettings)===null||P===void 0||(P=P.worktimes)===null||P===void 0?void 0:P.map(function(ee){return ee==null?void 0:ee.uid}))});return a},[p]);var l=function(){var f=K()(E()().mark(function a(){var o,u;return E()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!w.current){T.next=3;break}return console.log("isLoading: 1",w.current),T.abrupt("return");case 3:return w.current=!0,A.yw.loading("loading"),o={pageNumber:0,pageSize:50,orgUid:W.uid},T.next=8,(0,Xe.p0)(o);case 8:u=T.sent,console.log("queryRobotsByOrg: ",u),u.code===200?R(u):A.yw.error(u.message),w.current=!1,A.yw.destroy();case 13:case"end":return T.stop()}},a)}));return function(){return f.apply(this,arguments)}}();(0,x.useEffect)(function(){var f;((f=B.data)===null||f===void 0||(f=f.content)===null||f===void 0?void 0:f.length)===0&&l()},[B]);var b=function(a){console.log("onDefaultRobotChange checked = ".concat(a.target.checked))},k=function(a){console.log("onOfflineRobotChange checked = ".concat(a.target.checked))},$=function(a){console.log("onNonWorktimeRobotChange checked = ".concat(a.target.checked))},V=function(a){console.log("checked = ".concat(a))},z=function(){var f=K()(E()().mark(function a(o){var u,m,T;return E()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.log("onFinish:",o),A.yw.loading("\u66F4\u65B0\u4E2D..."),m=U()(U()({},p),{},{serviceSettings:U()(U()({},p.serviceSettings),{},{defaultRobot:o.defaultRobot,offlineRobot:o.offlineRobot,nonWorktimeRobot:o.nonWorktimeRobot,robotUid:o.robotUid,worktimeUids:j,quickButtonUids:(u=p.serviceSettings)===null||u===void 0||(u=u.quickButtons)===null||u===void 0?void 0:u.map(function(ee){return ee.uid})}),maxThreadCount:(o==null?void 0:o.maxThreadCount)||10}),console.log("agentObject:",m),P.next=6,(0,ue.sE)(m);case 6:T=P.sent,console.log("updateAgent response:",T),T.code===200?(A.yw.destroy(),A.yw.success(intl.formatMessage({id:"update.success"})),I(T.data)):(A.yw.destroy(),A.yw.error(T.message));case 9:case"end":return P.stop()}},a)}));return function(o){return f.apply(this,arguments)}}(),le=function(){var a,o=[];return p==null||(a=p.serviceSettings)===null||a===void 0||(a=a.worktimes)===null||a===void 0||a.map(function(u){o.push({worktime:[ke()(u.startTime,xe),ke()(u.endTime,xe)]})}),o},ye=function(){var f=K()(E()().mark(function a(o,u,m){var T,d;return E()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return console.log("onWorktimeChange:",m,u),T={uid:j[m],startTime:u[0],endTime:u[1]},ee.next=4,(0,Te.AW)(T);case 4:d=ee.sent,console.log("updateWorktime response:",d),d.code===200||A.yw.error("\u4FEE\u6539\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return ee.stop()}},a)}));return function(o,u,m){return f.apply(this,arguments)}}(),de=function(){var f=K()(E()().mark(function a(){var o,u,m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("createWorktime"),o={startTime:"00:00:00",endTime:"23:59:59"},d.next=4,(0,Te.gk)(o);case 4:u=d.sent,console.log("createWorktime response:",u),u.code===200?g([].concat(Ne()(j),[(m=u.data)===null||m===void 0?void 0:m.uid])):A.yw.error("\u6DFB\u52A0\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return d.stop()}},a)}));return function(){return f.apply(this,arguments)}}(),pe=function(){var f=K()(E()().mark(function a(o){var u,m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("deleteWorktime:",o,j[o]),u={uid:j[o]},d.next=4,(0,Te.$$)(u);case 4:m=d.sent,console.log("deleteWorktime response:",m),m.code===200?g(j.filter(function(P,ee){return ee!==o})):A.yw.error("\u5220\u9664\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return d.stop()}},a)}));return function(o){return f.apply(this,arguments)}}();return(0,x.useEffect)(function(){console.log("worktimeUids:",j)},[j]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(G.A,{form:D,style:{marginLeft:"100px"},initialValues:{defaultRobot:p==null||(r=p.serviceSettings)===null||r===void 0?void 0:r.defaultRobot,offlineRobot:p==null||(s=p.serviceSettings)===null||s===void 0?void 0:s.offlineRobot,nonWorktimeRobot:p==null||(n=p.serviceSettings)===null||n===void 0?void 0:n.nonWorktimeRobot,robotUid:p==null||(C=p.serviceSettings)===null||C===void 0||(C=C.robot)===null||C===void 0?void 0:C.uid},onFinish:z,children:[(0,e.jsx)(je.Z,{name:"defaultRobot",width:"md",label:"\u9ED8\u8BA4\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:b}}),(0,e.jsx)(je.Z,{name:"offlineRobot",width:"md",label:"\u65E0\u5BA2\u670D\u5728\u7EBF\u65F6\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:k}}),(0,e.jsx)(je.Z,{name:"nonWorktimeRobot",width:"md",label:"\u975E\u5DE5\u4F5C\u65F6\u95F4\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:$}}),(0,e.jsx)(Ge.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\uFF0C\u652F\u6301\u591A\u4E2A",creatorRecord:{worktime:[ke()("00:00:00",xe),ke()("23:59:59",xe)]},initialValue:le(),creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664"},itemRender:function(a){var o=a.listDom,u=a.action;return(0,e.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[o,u]})},min:1,max:4,actionRef:h,actionGuard:{beforeAddRow:function(){var f=K()(E()().mark(function o(u,m,T){return E()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.log("beforeAddRow:",u,m),P.next=3,de();case 3:return P.abrupt("return",new Promise(function(ee){ee(!0)}));case 4:case"end":return P.stop()}},o)}));function a(o,u,m){return f.apply(this,arguments)}return a}(),beforeRemoveRow:function(){var f=K()(E()().mark(function o(u,m){return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("beforeRemoveRow:",u),d.next=3,pe(u);case 3:return d.abrupt("return",new Promise(function(P){if(u===0){P(!1);return}P(!0)}));case 4:case"end":return d.stop()}},o)}));function a(o,u){return f.apply(this,arguments)}return a}()},children:function(a,o,u){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Qe.Z.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(T,d){ye(T,d,o)},format:xe}},"worktime")})}}),(0,e.jsx)(Me.Z,{name:"robotUid",label:"\u673A\u5668\u4EBA",width:"md",options:B.data.content.map(function(f){return{value:f.uid,label:O(f.nickname)}}),fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u673A\u5668\u4EBA",value:p==null||(y=p.serviceSettings)===null||y===void 0||(y=y.robot)===null||y===void 0?void 0:y.uid,onChange:V}})]})})},qe=Ye,Le=t(40056),Be=t(96074),ne=t(45360),re=t(71230),te=t(42075),en=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},nn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},rn=function(){var r=se.Z.useForm(),s=H()(r,1),n=s[0],C=(0,_.E)(function(w){return w.currentAgent}),y=(0,x.useMemo)(function(){return"http://localhost:9003/chat?t="+J.es+"&sid="+C.uid+"&"},[C]);(0,x.useEffect)(function(){var w=_.E.subscribe(function(h){console.log("currentAgent code:",h.currentAgent),n.setFieldValue("code","http://localhost:9003/chat?t="+J.es+"&sid="+h.currentAgent.uid+"&")});return w},[C]);var Z=function(){window.open(y)},S=function(){navigator.clipboard.writeText(y),A.yw.info("code copyied into clicpboard")},D=function(h,Q){return[(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){var I;(I=h.form)===null||I===void 0||I.submit(),Z()},children:"\u6253\u5F00"},"submit"),(0,e.jsx)(F.ZP,{onClick:function(){S()},children:"\u590D\u5236"},"reset")]};return(0,e.jsx)(G.A,{form:n,style:{marginLeft:"100px"},submitter:{render:D},initialValues:{code:y},children:(0,e.jsx)(Ce.Z,{width:"md",name:"code",label:"H5\u5BA2\u670D\u4EE3\u7801"})})},tn=rn,on=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},an=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},un=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Oe=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},sn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},ln=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},cn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},dn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},vn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},gn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},mn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},hn=function(){var r=se.Z.useForm(),s=H()(r,1),n=s[0],C=(0,_.E)(function(w){return w.currentAgent}),y=(0,x.useMemo)(function(){return"http://localhost:9003/chat?t="+J.es+"&sid="+C.uid+"&"},[C]);(0,x.useEffect)(function(){var w=_.E.subscribe(function(h){console.log("currentAgent code:",h.currentAgent),n.setFieldValue("code","http://localhost:9003/chat?t="+J.es+"&sid="+h.currentAgent.uid+"&")});return w},[C]);var Z=function(){window.open(y)},S=function(){navigator.clipboard.writeText(y),A.yw.info("code copyied into clicpboard")},D=function(h,Q){return[(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){var I;(I=h.form)===null||I===void 0||I.submit(),Z()},children:"\u6253\u5F00"},"submit"),(0,e.jsx)(F.ZP,{onClick:function(){S()},children:"\u590D\u5236"},"reset")]};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.A,{form:n,style:{marginLeft:"100px"},submitter:{render:D},initialValues:{code:y},children:(0,e.jsx)(Ce.Z,{width:"md",name:"code",label:"Web\u5BA2\u670D\u4EE3\u7801"})})})},fn=hn,pn=function(){var i=(0,q.V)(function(n){return n.currentRobot}),r=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),ne.ZP.success("\u590D\u5236\u6210\u529F")},s=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(F.ZP,{onClick:r,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(F.ZP,{onClick:s,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},bn=[{key:"web",label:"Web",children:(0,e.jsx)(fn,{})},{key:"h5",label:"H5",children:(0,e.jsx)(tn,{})},{key:"ios",label:"iOS",children:(0,e.jsx)(en,{})},{key:"android",label:"Android",children:(0,e.jsx)(an,{})},{key:"uniapp",label:"Uniapp",children:(0,e.jsx)(nn,{})},{key:"flutter",label:"Flutter",children:(0,e.jsx)(on,{})},{key:"mp",label:"\u5FAE\u4FE1\u516C\u4F17\u53F7",children:(0,e.jsx)(un,{})},{key:"mini",label:"\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F",children:(0,e.jsx)(Oe,{})},{key:"mpcom",label:"\u4F01\u4E1A\u5FAE\u4FE1",children:(0,e.jsx)(Oe,{})},{key:"douyin",label:"\u6296\u97F3",children:(0,e.jsx)(sn,{})},{key:"baidu",label:"\u767E\u5EA6",children:(0,e.jsx)(mn,{})},{key:"weibo",label:"\u5FAE\u535A",children:(0,e.jsx)(gn,{})},{key:"facebook",label:"Facebook",children:(0,e.jsx)(vn,{})},{key:"Line",label:"Line",children:(0,e.jsx)(pn,{})},{key:"whatsapp",label:"Whatsapp",children:(0,e.jsx)(dn,{})},{key:"shopify",label:"Shopify",children:(0,e.jsx)(cn,{})},{key:"lazada",label:"Lazada",children:(0,e.jsx)(ln,{})}],An=function(){var r=(0,Y.useIntl)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Le.Z,{message:"\u4E00\u5BF9\u4E00\u5BA2\u670D\uFF0C\u6B64\u5904\u5BA2\u670D\u4EE3\u7801\u4F1A\u5C06\u6240\u6709\u8BBF\u5BA2\u5BF9\u8BDD\u8BF7\u6C42\u8F6C\u63A5\u7ED9\u6B64\u5BA2\u670D\u8D26\u53F7",type:"success"}),(0,e.jsx)(Be.Z,{}),(0,e.jsx)(he.Z,{tabPosition:"left",items:bn})]})},Cn=An,jn=function(){var r=(0,Y.useAccess)();return r.canDebug&&console.log("Form canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(Y.Access,{accessible:r.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.FormattedMessage,{id:J.h5})}),children:"can debug"})})})},kn=jn,xn=function(){var r=(0,Y.useAccess)();return r.canDebug&&console.log("leaveMsg canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(Y.Access,{accessible:r.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.FormattedMessage,{id:J.h5})}),children:"leave msg"})})})},Fn=xn,yn=t(9465),wn=function(){var r,s=(0,Y.useIntl)(),n=G.A.useForm(),C=H()(n,1),y=C[0],Z=(0,Fe.u)(function(c){return c.orgCurrent}),S=(0,x.useState)(),D=H()(S,2),w=D[0],h=D[1],Q=(0,x.useState)([]),p=H()(Q,2),I=p[0],v=p[1],B=(0,_.E)(function(c){return{currentAgent:c.currentAgent,setCurrentAgent:c.setCurrentAgent}}),R=B.currentAgent,W=B.setCurrentAgent,X=function(){var c=K()(E()().mark(function j(){var g,l,b,k;return E()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return A.yw.loading("\u52A0\u8F7D\u4E2D"),l={pageNumber:0,pageSize:50,orgUid:Z.uid},V.next=4,(0,yn.qL)(l);case 4:b=V.sent,console.log("getAllQuickbuttons response:",l,b),A.yw.destroy(),b.code===200?h(b):A.yw.error(b.message),k=[],(g=R.serviceSettings)===null||g===void 0||g.quickButtons.forEach(function(z){k.push(z.uid)}),v(k);case 11:case"end":return V.stop()}},j)}));return function(){return c.apply(this,arguments)}}();(0,x.useEffect)(function(){X()},[Z]),(0,x.useEffect)(function(){var c,j=[];(c=R.serviceSettings)===null||c===void 0||c.quickButtons.forEach(function(l){j.push(l.uid)}),v(j);var g=_.E.subscribe(function(l){var b;console.log("TabQuickButton useAgentStore:",l);var k=[];(b=l.currentAgent.serviceSettings)===null||b===void 0||b.quickButtons.forEach(function($){k.push($.uid)}),v(k)});return g},[R]);var O=function(){var c=K()(E()().mark(function j(g){var l,b,k,$;return E()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return console.log("onFinish",g),k=U()(U()({},R),{},{serviceSettings:U()(U()({},R.serviceSettings),{},{robotUid:(l=R.serviceSettings)===null||l===void 0||(l=l.robot)===null||l===void 0?void 0:l.uid,quickButtonUids:g.quickbutton,worktimeUids:(b=R.serviceSettings)===null||b===void 0||(b=b.worktimes)===null||b===void 0?void 0:b.map(function(le){return le.uid})})}),console.log("agentObject:",k),z.next=5,(0,ue.sE)(k);case 5:$=z.sent,console.log("updateAgent response:",$),$.code===200?(A.yw.destroy(),A.yw.success(s.formatMessage({id:"update.success"})),W($.data)):(A.yw.destroy(),A.yw.error($.message));case 8:case"end":return z.stop()}},j)}));return function(g){return c.apply(this,arguments)}}(),L=function(j){console.log("selected ".concat(j)),v(j)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Le.Z,{message:s.formatMessage({id:"quickbutton.guide",defaultMessage:"Please goto Knowledge base -> QuickButton -> Create, then add quickbutton here"}),type:"success"}),(0,e.jsx)(Be.Z,{}),(0,e.jsx)(G.A,{form:y,layout:"vertical",initialValues:{},onFinish:O,children:(0,e.jsx)(Me.Z,{name:"quickbutton",width:"md",label:s.formatMessage({id:"quickbutton",defaultMessage:"QuickButton"}),options:w==null||(r=w.data)===null||r===void 0?void 0:r.content.map(function(c){return{label:c.title,value:c.uid}}),fieldProps:{mode:"multiple",onChange:L,allowClear:!0,value:I,placeholder:(0,e.jsx)(e.Fragment,{children:s.formatMessage({id:"choose",defaultMessage:"Please Choose"})})}})})]})},Tn=wn,En=function(){var r=(0,Y.useAccess)();return r.canDebug&&console.log("rate canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(Y.Access,{accessible:r.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.FormattedMessage,{id:J.h5})}),children:"rate"})})})},Rn=En,Sn=function(){var r=(0,Y.useIntl)(),s=[{key:"quickbutton",label:r.formatMessage({id:"quickbutton",defaultMessage:"QuickButton"}),children:(0,e.jsx)(Tn,{})},{key:"leaveMsg",label:"\u7559\u8A00\u8BBE\u7F6E",children:(0,e.jsx)(Fn,{})},{key:"rate",label:"\u8BC4\u4EF7\u8BBE\u7F6E",children:(0,e.jsx)(Rn,{})},{key:"form",label:"\u8BE2\u524D\u95EE\u5377",children:(0,e.jsx)(kn,{})}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(he.Z,{tabPosition:"left",items:s})})},Zn=Sn,Dn=function(){var r=(0,Y.useIntl)(),s=function(y){console.log(y)},n=[{key:"basic",label:r.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(We,{})},{key:"serviceSettings",label:r.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,e.jsx)(ze,{})},{key:"robot",label:r.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,e.jsx)(qe,{})},{key:"advanced",label:r.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,e.jsx)(Zn,{})},{key:"channel",label:r.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(Cn,{})}];return(0,e.jsx)(he.Z,{defaultActiveKey:"1",items:n,onChange:s})},Pn=Dn,Mn=t(39825),Ln=t(11475),Bn=t(64789),$e=t(85576),On=t(86250),Ee=t(2487),$n=t(17572),Re=t(55102),Un=function(r){var s=r.open,n=r.onClose,C=r.onSubmit,y=se.Z.useForm(),Z=H()(y,1),S=Z[0],D=(0,Fe.u)(function(B){return B.orgCurrent}),w=fe(function(B){return B.memberResult}),h=function(R,W){W.title=R.nickname,W.value=R.uid},Q=(0,x.useMemo)(function(){for(var B=[],R=0;R<w.data.content.length;R++){var W={title:"",value:"",children:[]};h(w.data.content[R],W),B.push(W)}return B},[w]),p=function(){console.log("handleOk"),S.validateFields().then(function(R){console.log("form values:",R);var W=S.getFieldValue("nickname"),X=S.getFieldValue("email"),O=S.getFieldValue("mobile"),L=S.getFieldValue("memberUid"),c={nickname:W,email:X,mobile:O,memberUid:L,orgUid:D.uid};console.log("agent:",c),C(c)}).catch(function(R){console.log("Form errors:",R)})},I=function(){console.log("handleCancel"),n()},v=function(R){console.log("onTreeSelectChange:",R);for(var W=0;W<w.data.content.length;W++){var X=w.data.content[W];X.uid===R&&(S.setFieldsValue({nickname:X.nickname}),S.setFieldsValue({email:X.email}),S.setFieldsValue({mobile:X.mobile}))}};return(0,e.jsx)("div",{children:(0,e.jsx)($e.Z,{title:"\u521B\u5EFA\u5BA2\u670D",open:s,onOk:p,onCancel:I,children:(0,e.jsxs)(se.Z,{form:S,name:"agentForm",style:{maxWidth:400},children:[(0,e.jsx)(se.Z.Item,{label:"\u7ED1\u5B9A\u6210\u5458",name:"memberUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458!"}],children:(0,e.jsx)($n.Z,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u9009\u62E9\u7ED1\u5B9A\u6210\u5458",allowClear:!0,treeDefaultExpandAll:!0,onChange:v,treeData:Q})}),(0,e.jsx)(se.Z.Item,{label:"\u5BA2\u670D\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}],children:(0,e.jsx)(Re.Z,{})}),(0,e.jsx)(se.Z.Item,{label:"\u90AE\u7BB1",name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},function(B){var R=B.getFieldValue;return{validator:function(X,O){if(!O||typeof O!="string")return Promise.resolve();var L=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return L.test(O)?Promise.resolve():Promise.reject(new Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740!"))}}}],children:(0,e.jsx)(Re.Z,{})}),(0,e.jsx)(se.Z.Item,{label:"\u624B\u673A\u53F7",name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7!"}],children:(0,e.jsx)(Re.Z,{})})]})})})},Vn=Un,Wn=t(84125),In=function(){var r=(0,Y.useIntl)(),s=(0,x.useRef)(!1),n=(0,ce.Z)(),C=n.translateString,y=n.translateStringTranct,Z=(0,Mn.Z)(),S=Z.isDarkMode,D=(0,x.useState)(!1),w=H()(D,2),h=w[0],Q=w[1],p=(0,Fe.u)(function(a){return a.orgCurrent}),I=fe(function(a){return a.setMemberResult}),v=(0,_.E)(function(a){return{agentResult:a.agentResult,currentAgent:a.currentAgent,insertAgent:a.insertAgent,setAgentResult:a.setAgentResult,setCurrentAgent:a.setCurrentAgent,deleteCurrentAgent:a.deleteCurrentAgent}}),B=v.agentResult,R=v.currentAgent,W=v.insertAgent,X=v.setAgentResult,O=v.setCurrentAgent,L=v.deleteCurrentAgent,c=$e.Z.useModal(),j=H()(c,2),g=j[0],l=j[1],b=function(o){g.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,e.jsx)(Ln.Z,{}),content:"\u786E\u8BA4\u8981\u5220\u9664\u5BA2\u670D\u3010".concat(C(o.nickname),"\u3011\u5417\uFF1F"),onOk:function(){console.log("\u786E\u8BA4\u5220\u9664"),k(o)},onCancel:function(){console.log("\u53D6\u6D88\u5220\u9664")},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})})},k=function(){var a=K()(E()().mark(function o(u){var m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("delete agent",u),d.next=3,(0,ue.Lr)(u);case 3:m=d.sent,console.log("delete agent response",m),m.code===200?(A.yw.success("\u5220\u9664\u5BA2\u670D\u6210\u529F"),L(u.uid)):A.yw.error("\u5220\u9664\u5BA2\u670D\u5931\u8D25");case 6:case"end":return d.stop()}},o)}));return function(u){return a.apply(this,arguments)}}(),$=function(){var a=K()(E()().mark(function o(){var u,m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!s.current){d.next=3;break}return console.log("isLoading: 1",s.current),d.abrupt("return");case 3:return s.current=!0,A.yw.loading("loading"),u={pageNumber:0,pageSize:50,orgUid:p.uid},d.next=8,(0,ue._t)(u);case 8:m=d.sent,console.log("queryAgentsByOrg: ",m),m.code===200?X(m):A.yw.error(m.message),s.current=!1,A.yw.destroy();case 13:case"end":return d.stop()}},o)}));return function(){return a.apply(this,arguments)}}(),V=function(){var a=K()(E()().mark(function o(){var u,m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u={pageNumber:0,pageSize:50,orgUid:p.uid},d.next=3,(0,Wn.z_)(u);case 3:m=d.sent,console.log("queryAllMembers:",u,m),m.code===200?I(m):A.yw.error(m.message);case 6:case"end":return d.stop()}},o)}));return function(){return a.apply(this,arguments)}}();(0,x.useEffect)(function(){$(),V()},[]);var z=function(){Q(!0)},le=function(){var a=K()(E()().mark(function o(u){var m,T;return E()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.log("save agent"),P.next=3,(0,ue.x_)(u);case 3:m=P.sent,console.log("create agent:",m),m.code===200?(T=m.data,W(T),Q(!1)):A.yw.error(m.message);case 6:case"end":return P.stop()}},o)}));return function(u){return a.apply(this,arguments)}}(),ye=function(){Q(!1)},de=function(){z()},pe=function(o,u){O(o)},f=function(o){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("span",{style:{color:"#999999",fontSize:12},children:[o.status===J.R&&"[\u63A5\u5F85]",o.status===J.tU&&"[\u5FD9\u788C]",o.status===J.LZ&&"[\u4E0B\u7EBF]",o.connected?"\u8FDE\u63A5":"\u65AD\u5F00"]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(On.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,e.jsx)(F.ZP,{size:"small",type:"primary",icon:(0,e.jsx)(Bn.Z,{}),onClick:de,children:r.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,e.jsx)(F.ZP,{size:"small",onClick:$,children:r.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,e.jsx)(F.ZP,{onClick:function(){return b(R)},size:"small",danger:!0,disabled:(R==null?void 0:R.uid)==="",children:r.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,e.jsx)(Ee.Z,{itemLayout:"horizontal",dataSource:B.data.content,renderItem:function(o,u){return(0,e.jsx)(Ee.Z.Item,{style:R.uid===o.uid?{backgroundColor:S?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return pe(o,u)},children:(0,e.jsx)(Ee.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,e.jsx)(De.C,{src:o.avatar}),title:(0,e.jsx)(e.Fragment,{children:y(o.nickname)}),description:f(o)})})}}),(0,e.jsx)(Vn,{open:h,onClose:ye,onSubmit:le}),l]})},zn=In,Kn=t(77154),Nn=ve.Z.Sider,Gn=ve.Z.Content,Qn=function(){var r=(0,Kn.Z)(),s=r.leftSiderStyle,n=r.contentStyle;return(0,x.useEffect)(function(){},[]),(0,e.jsxs)(ve.Z,{children:[(0,e.jsx)(Nn,{width:250,style:s,children:(0,e.jsx)(zn,{})}),(0,e.jsx)(ve.Z,{children:(0,e.jsx)(Gn,{children:(0,e.jsx)(Pn,{})})})]})},Hn=Qn}}]);
