"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[6130],{69753:function(Q,b,e){var i=e(1413),l=e(67294),P=e(49495),f=e(89099),g=function(C,y){return l.createElement(f.Z,(0,i.Z)((0,i.Z)({},C),{},{ref:y,icon:P.Z}))},h=l.forwardRef(g);b.Z=h},11475:function(Q,b,e){e.d(b,{Z:function(){return C}});var i=e(1413),l=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},f=P,g=e(89099),h=function(M,_){return l.createElement(g.Z,(0,i.Z)((0,i.Z)({},M),{},{ref:_,icon:f}))},O=l.forwardRef(h),C=O},58638:function(Q,b,e){e.d(b,{Z:function(){return C}});var i=e(1413),l=e(67294),P={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},f=P,g=e(89099),h=function(M,_){return l.createElement(g.Z,(0,i.Z)((0,i.Z)({},M),{},{ref:_,icon:f}))},O=l.forwardRef(h),C=O},57546:function(Q,b,e){e.d(b,{Z:function(){return C}});var i=e(1413),l=e(67294),P={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},f=P,g=e(89099),h=function(M,_){return l.createElement(g.Z,(0,i.Z)((0,i.Z)({},M),{},{ref:_,icon:f}))},O=l.forwardRef(h),C=O},64082:function(Q,b,e){e.d(b,{Z:function(){return C}});var i=e(1413),l=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},f=P,g=e(89099),h=function(M,_){return l.createElement(g.Z,(0,i.Z)((0,i.Z)({},M),{},{ref:_,icon:f}))},O=l.forwardRef(h),C=O},64317:function(Q,b,e){var i=e(1413),l=e(91),P=e(22270),f=e(67294),g=e(66758),h=e(24809),O=e(85893),C=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],y=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],M=function(j,T){var $=j.fieldProps,B=j.children,d=j.params,k=j.proFieldProps,q=j.mode,L=j.valueEnum,S=j.request,U=j.showSearch,c=j.options,a=(0,l.Z)(j,C),s=(0,f.useContext)(g.Z);return(0,O.jsx)(h.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,P.h)(L),request:S,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({options:c,mode:q,showSearch:U,getPopupContainer:s.getPopupContainer},$),ref:T,proFieldProps:k},a),{},{children:B}))},_=f.forwardRef(function(E,j){var T=E.fieldProps,$=E.children,B=E.params,d=E.proFieldProps,k=E.mode,q=E.valueEnum,L=E.request,S=E.options,U=(0,l.Z)(E,y),c=(0,i.Z)({options:S,mode:k||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},T),a=(0,f.useContext)(g.Z);return(0,O.jsx)(h.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,P.h)(q),request:L,params:B,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({getPopupContainer:a.getPopupContainer},c),ref:j,proFieldProps:d},U),{},{children:$}))}),A=f.forwardRef(M),F=_,u=A;u.SearchSelect=F,u.displayName="ProFormComponent",b.Z=u},90672:function(Q,b,e){var i=e(1413),l=e(91),P=e(67294),f=e(24809),g=e(85893),h=["fieldProps","proFieldProps"],O=function(y,M){var _=y.fieldProps,A=y.proFieldProps,F=(0,l.Z)(y,h);return(0,g.jsx)(f.Z,(0,i.Z)({ref:M,valueType:"textarea",fieldProps:_,proFieldProps:A},F))};b.Z=P.forwardRef(O)},36497:function(Q,b,e){e.d(b,{O9:function(){return _},ZG:function(){return F},bN:function(){return E},p1:function(){return y}});var i=e(15009),l=e.n(i),P=e(97857),f=e.n(P),g=e(99289),h=e.n(g),O=e(85615),C=e(86745);function y(T){return M.apply(this,arguments)}function M(){return M=h()(l()().mark(function T($){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("/api/v1/autoreply/query/org",{method:"GET",params:f()(f()({},$),{},{client:O.bVn})}));case 1:case"end":return d.stop()}},T)})),M.apply(this,arguments)}function _(T){return A.apply(this,arguments)}function A(){return A=h()(l()().mark(function T($){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("/api/v1/autoreply/create",{method:"POST",data:f()(f()({},$),{},{client:O.bVn})}));case 1:case"end":return d.stop()}},T)})),A.apply(this,arguments)}function F(T){return u.apply(this,arguments)}function u(){return u=h()(l()().mark(function T($){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("/api/v1/autoreply/update",{method:"POST",data:f()(f()({},$),{},{client:O.bVn})}));case 1:case"end":return d.stop()}},T)})),u.apply(this,arguments)}function E(T){return j.apply(this,arguments)}function j(){return j=h()(l()().mark(function T($){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("/api/v1/autoreply/delete",{method:"POST",data:f()(f()({},$),{},{client:O.bVn})}));case 1:case"end":return d.stop()}},T)})),j.apply(this,arguments)}},68256:function(Q,b,e){var i=e(97857),l=e.n(i),P=e(5574),f=e.n(P),g=e(85576),h=e(67294),O=e(64082),C=e(64121),y=e(27484),M=e.n(y),_=e(85615),A=e(80049),F=e(38302),u=e(89102),E=e(85893),j=C.Z.Dragger,T=function(B){var d=B.type,k=B.acceptType,q=B.isModalOpen,L=B.handleOk,S=B.handleCancel,U=(0,F.j)(function(G){return G.currentKbase}),c=(0,u.v)(function(G){return G.currentCategory}),a=(0,h.useState)("\u5F53\u524D\u652F\u6301\u4E0A\u4F20pdf/txt/markdown/docx\u7B49"),s=f()(a,2),v=s[0],p=s[1],Z=(0,h.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:d,category_uid:(c==null?void 0:c.uid)==="all"?"":(c==null?void 0:c.uid)||"",kb_uid:(U==null?void 0:U.uid)||"",client:_.bVn}),se=f()(Z,2),z=se[0],ee=se[1],ve=function(m){var te=M()(new Date).format("YYYYMMDDHHmmss")+"_"+m.name,Y=new FormData;Y.append("file",m),Y.append("file_name",te),Y.append("file_type",m.type),Y.append("is_avatar","false"),Y.append("kb_type",d),Y.append("category_uid",(c==null?void 0:c.uid)==="all"?"":(c==null?void 0:c.uid)||""),Y.append("kb_uid",(U==null?void 0:U.uid)||""),Y.append("client",_.bVn),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(_.LA8)},body:Y}).then(function(ne){return ne.json()}).then(function(ne){console.log("upload data:",ne),ne.code===200?(A.yw.destroy(),A.yw.success("".concat(te," \u4E0A\u4F20\u6210\u529F")),L()):(A.yw.destroy(),A.yw.error("".concat(te," \u4E0A\u4F20\u5931\u8D25")),S())})},J={name:"file",accept:k,action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(_.LA8)},data:z,showUploadList:!1,beforeUpload:function(m){console.log("beforeUpload",m);var te=M()(new Date).format("YYMMDDHHmmss")+"_"+m.name;z.file=m,z.file_name=te,z.file_type=m.type,z.kb_type=d,z.category_uid=(c==null?void 0:c.uid)==="all"?"":c==null?void 0:c.uid,z.kb_uid=U==null?void 0:U.uid,console.log("beforeUpload",z)},onChange:function(m){m.file.status==="uploading"&&A.yw.loading("".concat(m.file.name," \u4E0A\u4F20\u4E2D")),m.file.status==="done"?(console.log("response: ",m.file.response),m.file.response.code===200?(A.yw.destroy(),A.yw.success("".concat(m.file.name," \u4E0A\u4F20\u6210\u529F")),L()):(A.yw.destroy(),A.yw.error("".concat(m.file.name," \u4E0A\u4F20\u5931\u8D25")),S())):m.file.status==="error"&&(A.yw.error("".concat(m.file.name," \u4E0A\u4F20\u5931\u8D25")),S())},onDrop:function(m){console.log("Dropped files",m.dataTransfer.files),ve(m.dataTransfer.files[0])}},n=(0,h.useState)(J),ie=f()(n,2),H=ie[0],me=ie[1];return(0,h.useEffect)(function(){d!=_.QPQ&&(J.accept="application/vnd.ms-excel",me(J),p("\u5F53\u524D\u652F\u6301\u4E0A\u4F20excel\u6587\u4EF6")),ee(l()(l()({},z),{},{kb_type:d,category_uid:(c==null?void 0:c.uid)==="all"?"":c==null?void 0:c.uid,kb_uid:U==null?void 0:U.uid}))},[d,c,U]),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(g.Z,{title:"\u4E0A\u4F20\u6587\u4EF6",open:q,onOk:L,onCancel:S,children:(0,E.jsxs)(j,l()(l()({},H),{},{children:[(0,E.jsx)("p",{className:"ant-upload-drag-icon",children:(0,E.jsx)(O.Z,{})}),(0,E.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u81F3\u6B64\u5904\u5B9E\u73B0\u4E0A\u4F20"}),(0,E.jsx)("p",{className:"ant-upload-hint",children:v})]}))})})};b.Z=T},99967:function(Q,b,e){e.r(b),e.d(b,{default:function(){return $e}});var i=e(77154),l=e(21612),P=e(52670),f=e(97857),g=e.n(f),h=e(13769),O=e.n(h),C=e(15009),y=e.n(C),M=e(99289),_=e.n(M),A=e(5574),F=e.n(A),u=e(80049),E=e(36497),j=e(87676),T=e(51042),$=e(57546),B=e(58638),d=e(69753),k=e(57482),q=e(86738),L=e(14726),S=e(67294),U=e(89102),c=e(38302),a=e(85615),s=e(64082),v=e(34994),p=e(64317),Z=e(90672),se=e(85265),z=e(42075),ee=e(43940),ve=e(27484),J=e.n(ve),n=e(85893),ie=function(D){var w=D.isEdit,V=D.autoreply,ye=D.open,ue=D.onClose,Ee=D.onSubmit,be=v.A.useForm(),De=F()(be,1),re=De[0],de=(0,j.u)(function(r){return r.currentOrg}),W=(0,c.j)(function(r){return r.currentKbase}),xe=(0,U.v)(function(r){return r.categorySelectOptions}),Ae=(0,S.useState)(),le=F()(Ae,2),Oe=le[0],Te=le[1],oe=(0,S.useState)(a.PYi),K=F()(oe,2),N=K[0],Ue=K[1],Pe=(0,S.useState)(".png,.jpg,.jpeg"),Ce=F()(Pe,2),he=Ce[0],ce=Ce[1],Ie=(0,S.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:"type",category_uid:"",kb_uid:(W==null?void 0:W.uid)||"",client:a.bVn}),Me=F()(Ie,2),X=Me[0],We=Me[1];(0,S.useEffect)(function(){w?re.setFieldsValue({type:V==null?void 0:V.type,content:V==null?void 0:V.content,categoryUid:V==null?void 0:V.categoryUid,kbUid:W==null?void 0:W.uid}):re.resetFields()},[ye]);var Re=function(t){console.log("category selected ".concat(t)),Te(t)},Fe=function(t){console.log("type selected ".concat(t)),Ue(t),t===a.Qm?ce(".png,.jpg,.jpeg,.gif,.bmp"):t===a.tVi?ce(".mp4,.avi,.mov,.wmv"):t===a.Yu1?ce(".mp3,.wav,.flac"):t===a.Qn&&ce(".doc,.xls,.ppt,.pdf,.docx,.txt,.csv,.xlsx,.rtf,.zip,.7z,.tar,.gz,.rar,.iso")},Ze=function(){console.log("handleSubmit"),re.validateFields().then(function(t){console.log(t),Ee(g()(g()(g()({},V),t),{},{kbUid:W==null?void 0:W.uid,orgUid:de==null?void 0:de.uid}))}).catch(function(t){console.log("Form errors:",t),u.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})},Be=function(t){var o=J()(new Date).format("YYYYMMDDHHmmss")+"_"+t.name,x=new FormData;x.append("file",t),x.append("file_name",o),x.append("file_type",t.type),x.append("is_avatar","false"),x.append("kb_type",a.YjS),x.append("category_uid",Oe||""),x.append("kb_uid",(W==null?void 0:W.uid)||""),x.append("client",a.bVn),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(a.LA8)},body:x}).then(function(R){return R.json()}).then(function(R){if(console.log("upload data:",R),R.code===200){var ae=R.data;re.setFieldValue("content",ae),u.yw.destroy(),u.yw.success("".concat(o," \u4E0A\u4F20\u6210\u529F"))}else u.yw.destroy(),u.yw.error("".concat(o," \u4E0A\u4F20\u5931\u8D25"))})},_e={name:"file",accept:he,action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(a.LA8)},data:X,showUploadList:!1,beforeUpload:function(t){console.log("beforeUpload",t);var o=J()(new Date).format("YYMMDDHHmmss")+"_"+t.name;X.file=t,X.file_name=o,X.file_type=t.type,X.kb_type=a.YjS,X.category_uid=Oe||"",X.kb_uid=W==null?void 0:W.uid,console.log("beforeUpload",X)},onChange:function(t){if(t.file.status==="uploading"&&u.yw.loading("".concat(t.file.name," \u4E0A\u4F20\u4E2D")),t.file.status==="done")if(console.log("response: ",t.file.response),t.file.response.code===200){var o=t.file.response.data;re.setFieldValue("content",o),u.yw.destroy(),u.yw.success("".concat(t.file.name," \u4E0A\u4F20\u6210\u529F"))}else u.yw.destroy(),u.yw.error("".concat(t.file.name," \u4E0A\u4F20\u5931\u8D25"));else t.file.status==="error"&&u.yw.error("".concat(t.file.name," \u4E0A\u4F20\u5931\u8D25"))},onDrop:function(t){console.log("Dropped files",t.dataTransfer.files),Be(t.dataTransfer.files[0])}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(se.Z,{title:w?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:ue,open:ye,extra:(0,n.jsxs)(z.Z,{children:[(0,n.jsx)(L.ZP,{onClick:ue,children:"\u53D6\u6D88"}),(0,n.jsx)(L.ZP,{onClick:Ze,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,n.jsxs)(v.A,{form:re,initialValues:g()({},V),submitter:{render:function(){return null}},children:[(0,n.jsx)(p.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:xe,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:Re}}),(0,n.jsx)(p.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:a.PYi},{label:"\u56FE\u7247",value:a.Qm},{label:"\u89C6\u9891",value:a.tVi},{label:"\u97F3\u9891",value:a.Yu1},{label:"\u6587\u4EF6",value:a.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:Fe}}),(0,n.jsx)(Z.Z,{label:"\u5185\u5BB9",name:"content"}),N!=a.PYi&&(0,n.jsxs)(ee.Z,g()(g()({},_e),{},{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(s.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"})]}))]})})})},H=ie,me=e(73803),G=e(86745),m=e(68256),te=["current"],Y=function(){var D=(0,G.useIntl)(),w=(0,S.useRef)(),V=(0,S.useState)(!0),ye=F()(V,2),ue=ye[0],Ee=ye[1],be=(0,S.useState)(),De=F()(be,2),re=De[0],de=De[1],W=(0,S.useState)(!1),xe=F()(W,2),Ae=xe[0],le=xe[1],Oe=(0,me.Z)(),Te=Oe.translateString,oe=(0,j.u)(function(r){return r.currentOrg}),K=(0,c.j)(function(r){return r.currentKbase}),N=(0,U.v)(function(r){return r.currentCategory}),Ue=(0,S.useState)(!1),Pe=F()(Ue,2),Ce=Pe[0],he=Pe[1],ce=function(){var r=_()(y()().mark(function t(o){var x,R;return y()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return console.log(o),I.next=3,(0,E.bN)(o);case 3:x=I.sent,console.log("delete response:",x),x.code===200?(w==null||(R=w.current)===null||R===void 0||R.reload(),u.yw.success(D.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):u.yw.error(D.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return I.stop()}},t)}));return function(o){return r.apply(this,arguments)}}(),Ie=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,n.jsx)(G.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",render:function(t,o){return Te(o==null?void 0:o.content)}},{title:(0,n.jsx)(G.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0,render:function(t,o){return(0,n.jsx)(n.Fragment,{children:D.formatMessage({id:o==null?void 0:o.type,defaultMessage:o==null?void 0:o.type})})}},{title:(0,n.jsx)(G.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:D.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(t,o,x,R){return[(0,n.jsx)("a",{onClick:function(){X(o)},children:D.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,n.jsx)(q.Z,{title:D.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(D.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(o==null?void 0:o.content,"\u3011\uFF1F"),onConfirm:function(){return ce(o)},okText:D.formatMessage({id:"ok"}),cancelText:D.formatMessage({id:"cancel"}),children:(0,n.jsx)(L.ZP,{size:"small",type:"link",danger:!0,children:D.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}],Me=function(){de(void 0),Ee(!1),le(!0)},X=function(t){de(t),Ee(!0),le(!0)},We=function(){var r=_()(y()().mark(function t(o){var x,R;return y()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(console.log("handleSubmitDrawer",o),ue?u.yw.loading(D.formatMessage({id:"updating"})):u.yw.loading(D.formatMessage({id:"creating"})),!ue){I.next=8;break}return I.next=5,(0,E.ZG)(o);case 5:I.t0=I.sent,I.next=11;break;case 8:return I.next=10,(0,E.O9)(o);case 10:I.t0=I.sent;case 11:x=I.t0,console.log("createQuickreply response:",o,x),x.code===200?(u.yw.destroy(),u.yw.loading(D.formatMessage({id:"create.success"})),le(!1),(R=w.current)===null||R===void 0||R.reload()):(u.yw.destroy(),u.yw.error(x.message));case 14:case"end":return I.stop()}},t)}));return function(o){return r.apply(this,arguments)}}(),Re=function(){var r=_()(y()().mark(function t(){return y()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:he(!0);case 1:case"end":return x.stop()}},t)}));return function(){return r.apply(this,arguments)}}(),Fe=function(){var r=_()(y()().mark(function t(){var o;return y()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:console.log("handleExport"),o=localStorage.getItem(a.LA8),window.open("/api/v1/autoreply/export?categoryUid="+(N==null?void 0:N.uid)+"&kbUid="+(K==null?void 0:K.uid)+"&orgUid="+(oe==null?void 0:oe.uid)+"&pageNumber=0&pageSize=20&accessToken="+o);case 3:case"end":return R.stop()}},t)}));return function(){return r.apply(this,arguments)}}();(0,S.useEffect)(function(){var r;(r=w.current)===null||r===void 0||r.reload()},[K,N]);var Ze=function(){var t;console.log("handleUploadDragSubmit"),he(!1),w==null||(t=w.current)===null||t===void 0||t.reload()},Be=function(){var t;console.log("handleUploadDragCancel"),he(!1),w==null||(t=w.current)===null||t===void 0||t.reload()},_e=(0,S.useMemo)(function(){return(K==null?void 0:K.type)===a.WvL?(K==null?void 0:K.uid)==="":!0},[K]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.Z,{columns:Ie,actionRef:w,cardBordered:!0,request:function(){var r=_()(y()().mark(function t(o,x,R){var ae,I,Ke,Le,pe;return y()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return console.log("request:",o,x,R),u.yw.loading(D.formatMessage({id:"loading",defaultMessage:"Loading"})),ae=o.current,I=ae===void 0?1:ae,Ke=O()(o,te),Le=g()({pageNumber:I-1,categoryUid:(N==null?void 0:N.uid)==="all"?"":N==null?void 0:N.uid,kbUid:K==null?void 0:K.uid,orgUid:oe==null?void 0:oe.uid},Ke),fe.next=6,(0,E.p1)(Le);case 6:return pe=fe.sent,console.log("queryAutoReplysByOrg response:",Le,pe),u.yw.destroy(),pe.code===200||u.yw.error(pe.message),fe.abrupt("return",{data:pe.data.content,success:!0,total:pe.data.totalElements});case 11:case"end":return fe.stop()}},t)}));return function(t,o,x){return r.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(t){console.log("page:",t)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u56DE\u590D",toolBarRender:function(){return[(0,n.jsx)(L.ZP,{icon:(0,n.jsx)(T.Z,{}),type:"primary",onClick:Me,disabled:_e,children:D.formatMessage({id:"create",defaultMessage:"Create"})},"button"),(0,n.jsx)(L.ZP,{icon:(0,n.jsx)($.Z,{}),type:"primary",onClick:Re,disabled:_e,children:D.formatMessage({id:"import",defaultMessage:"Import"})},"button"),(0,n.jsx)(L.ZP,{icon:(0,n.jsx)(B.Z,{}),type:"primary",onClick:Fe,disabled:_e,children:D.formatMessage({id:"export",defaultMessage:"Export"})},"button"),(0,n.jsx)(L.ZP,{icon:(0,n.jsx)(d.Z,{}),type:"link",onClick:function(){window.open("https://www.weiyuai.cn/download/excel/auto_reply.xlsx")},children:D.formatMessage({id:"download.template",defaultMessage:"Download Template"})},"download")]}}),(0,n.jsx)(H,{isEdit:ue,open:Ae,autoreply:re,onClose:function(){return le(!1)},onSubmit:We}),(0,n.jsx)(m.Z,{type:a.WvL,acceptType:".xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",isModalOpen:Ce,handleOk:Ze,handleCancel:Be})]})},ne=Y,je=l.Z.Sider,Se=l.Z.Content,ge=function(){var D=(0,i.Z)(),w=D.leftSiderStyle,V=D.contentStyle;return(0,n.jsx)("div",{children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(je,{style:w,children:(0,n.jsx)(P.Z,{type:a.WvL})}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(Se,{style:V,children:(0,n.jsx)(ne,{})})})]})})},$e=ge},86250:function(Q,b,e){e.d(b,{Z:function(){return c}});var i=e(67294),l=e(93967),P=e.n(l),f=e(98423),g=e(98065),h=e(53124),O=e(27036),C=e(45503);const y=["wrap","nowrap","wrap-reverse"],M=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],_=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],A=(a,s)=>{const v=s.wrap===!0?"wrap":s.wrap;return{[`${a}-wrap-${v}`]:v&&y.includes(v)}},F=(a,s)=>{const v={};return _.forEach(p=>{v[`${a}-align-${p}`]=s.align===p}),v[`${a}-align-stretch`]=!s.align&&!!s.vertical,v},u=(a,s)=>{const v={};return M.forEach(p=>{v[`${a}-justify-${p}`]=s.justify===p}),v};function E(a,s){return P()(Object.assign(Object.assign(Object.assign({},A(a,s)),F(a,s)),u(a,s)))}var j=E;const T=a=>{const{componentCls:s}=a;return{[s]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},$=a=>{const{componentCls:s}=a;return{[s]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},B=a=>{const{componentCls:s}=a,v={};return y.forEach(p=>{v[`${s}-wrap-${p}`]={flexWrap:p}}),v},d=a=>{const{componentCls:s}=a,v={};return _.forEach(p=>{v[`${s}-align-${p}`]={alignItems:p}}),v},k=a=>{const{componentCls:s}=a,v={};return M.forEach(p=>{v[`${s}-justify-${p}`]={justifyContent:p}}),v},q=()=>({});var L=(0,O.I$)("Flex",a=>{const{paddingXS:s,padding:v,paddingLG:p}=a,Z=(0,C.TS)(a,{flexGapSM:s,flexGap:v,flexGapLG:p});return[T(Z),$(Z),B(Z),d(Z),k(Z)]},q,{resetStyle:!1}),S=function(a,s){var v={};for(var p in a)Object.prototype.hasOwnProperty.call(a,p)&&s.indexOf(p)<0&&(v[p]=a[p]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,p=Object.getOwnPropertySymbols(a);Z<p.length;Z++)s.indexOf(p[Z])<0&&Object.prototype.propertyIsEnumerable.call(a,p[Z])&&(v[p[Z]]=a[p[Z]]);return v},c=i.forwardRef((a,s)=>{const{prefixCls:v,rootClassName:p,className:Z,style:se,flex:z,gap:ee,children:ve,vertical:J=!1,component:n="div"}=a,ie=S(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:H,direction:me,getPrefixCls:G}=i.useContext(h.E_),m=G("flex",v),[te,Y,ne]=L(m),je=J!=null?J:H==null?void 0:H.vertical,Se=P()(Z,p,H==null?void 0:H.className,m,Y,ne,j(m,a),{[`${m}-rtl`]:me==="rtl",[`${m}-gap-${ee}`]:(0,g.n)(ee),[`${m}-vertical`]:je}),ge=Object.assign(Object.assign({},H==null?void 0:H.style),se);return z&&(ge.flex=z),ee&&!(0,g.n)(ee)&&(ge.gap=ee),te(i.createElement(n,Object.assign({ref:s,className:Se,style:ge},(0,f.Z)(ie,["justify","wrap","align"])),ve))})}}]);
