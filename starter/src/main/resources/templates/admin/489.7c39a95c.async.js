"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[489],{63833:function(e,t,n){n.d(t,{$l:function(){return m},JT:function(){return y},gf:function(){return S},lg:function(){return g},p0:function(){return c},s9:function(){return p}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(77667),d=n(82045);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return f.apply(this,arguments)}function f(){return(f=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return q.apply(this,arguments)}function q(){return(q=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return x.apply(this,arguments)}function x(){return(x=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},62639:function(e,t,n){n.d(t,{Yg:function(){return m},kh:function(){return g},pf:function(){return c},y:function(){return p}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(77667),d=n(82045);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return f.apply(this,arguments)}function f(){return(f=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},440:function(e,t,n){n.d(t,{H:function(){return c}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(77667),d=n(82045);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/vip/invoice/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89875:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),m=n(16655),w=n(11984),y=n(5728),q=n(31806),S=n(8091),x=n(82045),b=n(93982),F=n(12265),k=n(72434),j=n(62599),M=n(44194),U=n(85702),Z=n(61017),C=n(77667),P=n(81153),A=n(43314),I=n(14731),R=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,I.M)(),N=W.config,O=W.updateConfig,V=(0,h.u)((function(e){return e.currentOrg})),E=(0,M.useState)(),D=d()(E,2),_=D[0],B=D[1],G=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=G.currentRobot,H=G.setCurrentRobot,z=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),$=z.currentAgent,Q=z.setCurrentAgent,L=(0,Z.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,K=L.setCurrentWorkgroup,J=(0,M.useMemo)((function(){return n===C._X4?{chatType:C.xtN,chatSid:X.uid}:n===C.Njn?{chatType:C.scI,chatSid:$.uid}:n===C.aZD?{chatType:C.vPY,chatSid:Y.uid}:{chatType:C.xtN,chatSid:""}}),[n,X,$,Y]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[V]),(0,M.useEffect)((function(){var e,t,i;if(n===C._X4)o.setFieldsValue({showFaqs:null==X||null===(e=X.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==X||null===(t=X.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),null!=X&&null!==(i=X.serviceSettings)&&void 0!==i&&i.showFaqs?O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:680}),chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})})):O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:380}),chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}));else if(n===C.Njn){var r,u,a;o.setFieldsValue({showFaqs:null==$||null===(r=$.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==$||null===(u=$.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),null!=$&&null!==(a=$.serviceSettings)&&void 0!==a&&a.showFaqs?O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:680}),chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})})):O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:380}),chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}else if(n===C.aZD){var l,d,c;o.setFieldsValue({showFaqs:null==Y||null===(l=Y.serviceSettings)||void 0===l?void 0:l.showFaqs,faqUids:null==Y||null===(d=Y.serviceSettings)||void 0===d||null===(d=d.faqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),null!=Y&&null!==(c=Y.serviceSettings)&&void 0!==c&&c.showFaqs?O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:680}),chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})})):O(s()(s()({},N),{},{window:s()(s()({},N.window),{},{width:380}),chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}}),[X,$,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,f,p,h,m,w,y,q,S,x,b,F,k,j,M,U,Z;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return d=s()(s()({},X),{},{serviceSettings:s()(s()({},X.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==X||null===(o=X.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==X||null===(a=X.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return q=s()(s()({},$),{},{serviceSettings:s()(s()({},null==$?void 0:$.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==$||null===(f=$.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==$||null===(p=$.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==$||null===(h=$.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(m=$.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),leaveMsgSettings:s()(s()({},$.leaveMsgSettings),{},{worktimeUids:null==$||null===(w=$.leaveMsgSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),robotSettings:s()(s()({},$.robotSettings),{},{robotUid:null==$||null===(y=$.robotSettings)||void 0===y||null===(y=y.robot)||void 0===y?void 0:y.uid}),autoReplySettings:s()({},$.autoReplySettings)}),console.log("agentObject:",q),e.next=16,(0,P.sE)(q);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Q(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return U=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.hotFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",U),e.next=26,(0,A.W5)(U);case 26:Z=e.sent,console.log("updateWorkGroup response:",Z),200===Z.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(Z.data)):(c.yw.destroy(),c.yw.error(Z.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(b.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,R.jsx)(F.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(k.Z,{}),(0,R.jsxs)(y.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,R.jsx)(q.Z,{label:u.formatMessage({id:"faq.show.faqs"}),name:"showFaqs",fieldProps:{onChange:se}}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:u.formatMessage({id:"faq.add.faqs"})},"github")}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){c.yw.warning(u.formatMessage({id:"faq.generate.coming.soon"}))},children:u.formatMessage({id:"faq.generate.ai"})},"agi")}),(0,R.jsx)(S.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faq"}),options:null==_||null===(t=_.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,R.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},10187:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),m=n(16655),w=n(11984),y=n(5728),q=n(31806),S=n(8091),x=n(82045),b=n(93982),F=n(12265),k=n(72434),j=n(62599),M=n(44194),U=n(85702),Z=n(61017),C=n(77667),P=n(81153),A=n(43314),I=n(14731),R=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,I.M)(),N=W.config,O=W.updateConfig,V=(0,h.u)((function(e){return e.currentOrg})),E=(0,M.useState)(),D=d()(E,2),_=D[0],B=D[1],G=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=G.currentRobot,H=G.setCurrentRobot,z=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),$=z.currentAgent,Q=z.setCurrentAgent,L=(0,Z.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,K=L.setCurrentWorkgroup,J=(0,M.useMemo)((function(){return n===C._X4?{chatType:C.xtN,chatSid:X.uid}:n===C.Njn?{chatType:C.scI,chatSid:$.uid}:n===C.aZD?{chatType:C.vPY,chatSid:Y.uid}:{chatType:C.xtN,chatSid:""}}),[n,X,$,Y]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[V]),(0,M.useEffect)((function(){var e,t;if(n===C._X4)o.setFieldsValue({showGuessFaqs:null==X||null===(e=X.serviceSettings)||void 0===e?void 0:e.showGuessFaqs,guessFaqUids:null==X||null===(t=X.serviceSettings)||void 0===t||null===(t=t.guessFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}));else if(n===C.Njn){var i,r;o.setFieldsValue({showGuessFaqs:null==$||null===(i=$.serviceSettings)||void 0===i?void 0:i.showGuessFaqs,guessFaqUids:null==$||null===(r=$.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}else if(n===C.aZD){var u,a;o.setFieldsValue({showGuessFaqs:null==Y||null===(u=Y.serviceSettings)||void 0===u?void 0:u.showGuessFaqs,guessFaqUids:null==Y||null===(a=Y.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}}),[X,$,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,f,p,h,m,w,y,q,S,x,b,F,k,j,M,U,Z,I;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return d=s()(s()({},X),{},{serviceSettings:s()(s()({},X.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==X||null===(o=X.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==X||null===(a=X.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return q=s()(s()({},$),{},{serviceSettings:s()(s()({},null==$?void 0:$.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==$||null===(f=$.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==$||null===(p=$.serviceSettings)||void 0===p||null===(p=p.faqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==$||null===(h=$.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(m=$.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},$.robotSettings),{},{robotUid:null==$||null===(w=$.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},$.leaveMsgSettings),{},{worktimeUids:null==$||null===(y=$.leaveMsgSettings)||void 0===y||null===(y=y.worktimes)||void 0===y?void 0:y.map((function(e){return e.uid}))}),autoReplySettings:s()({},$.autoReplySettings)}),console.log("agentObject:",q),e.next=16,(0,P.sE)(q);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Q(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return Z=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.hotFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:null===(U=Y.agents)||void 0===U?void 0:U.map((function(e){return e.uid}))}),console.log("workgroupObject:",Z),e.next=26,(0,A.W5)(Z);case 26:I=e.sent,console.log("updateWorkGroup response:",I),200===I.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(I.data)):(c.yw.destroy(),c.yw.error(I.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqGuess handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(b.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,R.jsx)(F.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(k.Z,{}),(0,R.jsxs)(y.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,R.jsx)(q.Z,{label:u.formatMessage({id:"faq.show.guess"}),name:"showGuessFaqs",fieldProps:{onChange:se}}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:u.formatMessage({id:"faq.add.guess"})},"github")}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){c.yw.warning("TODO: 即将上线，敬请期待")},children:u.formatMessage({id:"faq.generate.guess"})},"agi")}),(0,R.jsx)(S.Z,{name:"guessFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqGuess"}),options:null==_||null===(t=_.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,R.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},18874:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),m=n(16655),w=n(11984),y=n(5728),q=n(31806),S=n(8091),x=n(82045),b=n(93982),F=n(12265),k=n(72434),j=n(62599),M=n(44194),U=n(85702),Z=n(61017),C=n(77667),P=n(81153),A=n(43314),I=n(14731),R=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,I.M)(),N=W.config,O=W.updateConfig,V=(0,h.u)((function(e){return e.currentOrg})),E=(0,M.useState)(),D=d()(E,2),_=D[0],B=D[1],G=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=G.currentRobot,H=G.setCurrentRobot,z=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),$=z.currentAgent,Q=z.setCurrentAgent,L=(0,Z.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,K=L.setCurrentWorkgroup,J=(0,M.useMemo)((function(){return n===C._X4?{chatType:C.xtN,chatSid:X.uid}:n===C.Njn?{chatType:C.scI,chatSid:$.uid}:n===C.aZD?{chatType:C.vPY,chatSid:Y.uid}:{chatType:C.xtN,chatSid:""}}),[n,X,$,Y]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[V]),(0,M.useEffect)((function(){var e;if(n===C._X4)o.setFieldsValue({showHotFaqs:null==X?void 0:X.serviceSettings.showHotFaqs,hotFaqUids:(null==X||null===(e=X.serviceSettings)||void 0===e||null===(e=e.hotFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}));else if(n===C.Njn){var t;o.setFieldsValue({showHotFaqs:null==$?void 0:$.serviceSettings.showHotFaqs,hotFaqUids:(null==$||null===(t=$.serviceSettings)||void 0===t||null===(t=t.hotFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}else if(n===C.aZD){var i;o.setFieldsValue({showHotFaqs:null==Y?void 0:Y.serviceSettings.showHotFaqs,hotFaqUids:(null==Y||null===(i=Y.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}}),[X,$,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,f,p,h,m,w,y,q,S,x,b,F,k,j,M,U,Z;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return d=s()(s()({},X),{},{serviceSettings:s()(s()({},X.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==X||null===(o=X.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==X||null===(a=X.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return q=s()(s()({},$),{},{serviceSettings:s()(s()({},null==$?void 0:$.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==$||null===(f=$.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==$||null===(p=$.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),faqUids:null==$||null===(h=$.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(m=$.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},$.robotSettings),{},{robotUid:null==$||null===(w=$.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},$.leaveMsgSettings),{},{worktimeUids:null==$||null===(y=$.leaveMsgSettings)||void 0===y||null===(y=y.worktimes)||void 0===y?void 0:y.map((function(e){return e.uid}))}),autoReplySettings:s()({},$.autoReplySettings)}),console.log("agentObject:",q),e.next=16,(0,P.sE)(q);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Q(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return U=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.guessFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",U),e.next=26,(0,A.W5)(U);case 26:Z=e.sent,console.log("updateWorkGroup response:",Z),200===Z.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(Z.data)):(c.yw.destroy(),c.yw.error(Z.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqHots handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(b.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,R.jsx)(F.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(k.Z,{}),(0,R.jsxs)(y.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,R.jsx)(q.Z,{label:u.formatMessage({id:"faq.show.hot"}),name:"showHotFaqs",fieldProps:{onChange:se}}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:u.formatMessage({id:"faq.add.hot"})},"github")}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){c.yw.warning(u.formatMessage({id:"faq.generate.hot"}))},children:u.formatMessage({id:"faq.generate.hot"})},"agi")}),(0,R.jsx)(S.Z,{name:"hotFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqHot"}),options:null==_||null===(t=_.data)||void 0===t?void 0:t.content.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,R.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},90588:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),m=n(16655),w=n(11984),y=n(5728),q=n(31806),S=n(8091),x=n(82045),b=n(93982),F=n(12265),k=n(72434),j=n(62599),M=n(44194),U=n(85702),Z=n(61017),C=n(77667),P=n(81153),A=n(43314),I=n(14731),R=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,I.M)(),N=W.config,O=W.updateConfig,V=(0,h.u)((function(e){return e.currentOrg})),E=(0,M.useState)(),D=d()(E,2),_=D[0],B=D[1],G=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=G.currentRobot,H=G.setCurrentRobot,z=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),$=z.currentAgent,Q=z.setCurrentAgent,L=(0,Z.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,K=L.setCurrentWorkgroup,J=(0,M.useMemo)((function(){return n===C._X4?{chatType:C.xtN,chatSid:X.uid}:n===C.Njn?{chatType:C.scI,chatSid:$.uid}:n===C.aZD?{chatType:C.vPY,chatSid:Y.uid}:{chatType:C.xtN,chatSid:""}}),[n,X,$,Y]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[V]),(0,M.useEffect)((function(){var e,t;if(n===C._X4)o.setFieldsValue({showQuickFaqs:null==X||null===(e=X.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==X||null===(t=X.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}));else if(n===C.Njn){var i,r;o.setFieldsValue({showQuickFaqs:null==$||null===(i=$.serviceSettings)||void 0===i?void 0:i.showQuickFaqs,quickFaqUids:null==$||null===(r=$.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}else if(n===C.aZD){var u,a;o.setFieldsValue({showQuickFaqs:null==Y||null===(u=Y.serviceSettings)||void 0===u?void 0:u.showQuickFaqs,quickFaqUids:null==Y||null===(a=Y.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}}),[X,$,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,f,p,h,m,w,y,q,S,x,b,F,k,j,M,U,Z;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return d=s()(s()({},X),{},{serviceSettings:s()(s()({},X.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==X||null===(o=X.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==X||null===(a=X.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return q=s()(s()({},$),{},{serviceSettings:s()(s()({},null==$?void 0:$.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==$||null===(f=$.serviceSettings)||void 0===f||null===(f=f.faqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==$||null===(p=$.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==$||null===(h=$.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==$||null===(m=$.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},$.robotSettings),{},{robotUid:null==$||null===(w=$.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},$.leaveMsgSettings),{},{worktimeUids:null==$||null===(y=$.leaveMsgSettings)||void 0===y||null===(y=y.worktimes)||void 0===y?void 0:y.map((function(e){return e.uid}))}),autoReplySettings:s()({},$.autoReplySettings)}),console.log("agentObject:",q),e.next=16,(0,P.sE)(q);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Q(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return U=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.faqs)||void 0===x?void 0:x.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.hotFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),shortcutFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.shortcutFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",U),e.next=26,(0,A.W5)(U);case 26:Z=e.sent,console.log("updateWorkGroup response:",Z),200===Z.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(Z.data)):(c.yw.destroy(),c.yw.error(Z.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(b.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,R.jsx)(F.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(k.Z,{}),(0,R.jsxs)(y.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,R.jsx)(q.Z,{label:u.formatMessage({id:"faq.show.quick.buttons"}),name:"showQuickFaqs",fieldProps:{onChange:se}}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:u.formatMessage({id:"faq.add.quick.buttons"})},"github")}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){c.yw.warning("TODO: 即将上线，敬请期待")},children:u.formatMessage({id:"faq.generate.quick.buttons"})},"agi")}),(0,R.jsx)(S.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.quickbutton"}),options:null==_||null===(t=_.data)||void 0===t?void 0:t.content.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,R.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"show.chat.window"})}),(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"hide.chat.window"})})]})]})}},66772:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),m=n(16655),w=n(11984),y=n(5728),q=n(31806),S=n(8091),x=n(82045),b=n(93982),F=n(12265),k=n(72434),j=n(62599),M=n(44194),U=n(85702),Z=n(61017),C=n(77667),P=n(81153),A=n(43314),I=n(14731),R=n(31549);t.Z=function(e){var t,n=e.type,i=y.A.useForm(),o=d()(i,1)[0],u=(0,x.useIntl)(),l=(0,x.useNavigate)(),T=(0,f.Z)().translateString,W=(0,I.M)(),N=W.config,O=W.updateConfig,V=(0,h.u)((function(e){return e.currentOrg})),E=(0,M.useState)(),D=d()(E,2),_=D[0],B=D[1],G=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),X=G.currentRobot,H=G.setCurrentRobot,z=(0,U.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),$=z.currentAgent,Q=z.setCurrentAgent,L=(0,Z.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Y=L.currentWorkgroup,K=L.setCurrentWorkgroup,J=(0,M.useMemo)((function(){return n===C._X4?{chatType:C.xtN,chatSid:X.uid}:n===C.Njn?{chatType:C.scI,chatSid:$.uid}:n===C.aZD?{chatType:C.vPY,chatSid:Y.uid}:{chatType:C.xtN,chatSid:""}}),[n,X,$,Y]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?B(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,M.useEffect)((function(){ne()}),[V]),(0,M.useEffect)((function(){var e,t;if(n===C._X4)o.setFieldsValue({showShortcutFaqs:null==X||null===(e=X.serviceSettings)||void 0===e?void 0:e.showShortcutFaqs,shortcutFaqUids:(null==X||null===(t=X.serviceSettings)||void 0===t||null===(t=t.shortcutFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}));else if(n===C.Njn){var i,r;o.setFieldsValue({showShortcutFaqs:null==$||null===(i=$.serviceSettings)||void 0===i?void 0:i.showShortcutFaqs,shortcutFaqUids:(null==$||null===(r=$.serviceSettings)||void 0===r||null===(r=r.shortcutFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}else if(n===C.aZD){var u,a;o.setFieldsValue({showShortcutFaqs:null==Y||null===(u=Y.serviceSettings)||void 0===u?void 0:u.showShortcutFaqs,shortcutFaqUids:(null==Y||null===(a=Y.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})))||[]}),O(s()(s()({},N),{},{chatParams:s()(s()({},N.chatParams),{},{org:null==V?void 0:V.uid,t:ee,sid:te})}))}}),[X,$,Y,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,f,p,h,m,w,y,q,S,x,b,F,k,j,M,U,Z;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t,n),n!==C._X4){e.next=11;break}return d=s()(s()({},X),{},{serviceSettings:s()(s()({},X.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==X||null===(i=X.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==X||null===(o=X.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==X||null===(a=X.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==X||null===(l=X.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return q=s()(s()({},$),{},{serviceSettings:s()(s()({},null==$?void 0:$.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==$||null===(f=$.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==$||null===(p=$.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==$||null===(h=$.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null==$||null===(m=$.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},$.robotSettings),{},{robotUid:null==$||null===(w=$.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},$.leaveMsgSettings),{},{worktimeUids:null==$||null===(y=$.leaveMsgSettings)||void 0===y||null===(y=y.worktimes)||void 0===y?void 0:y.map((function(e){return e.uid}))}),autoReplySettings:s()({},$.autoReplySettings)}),console.log("agentObject:",q),e.next=16,(0,P.sE)(q);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Q(S.data)):(c.yw.destroy(),c.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return U=s()(s()({},Y),{},{serviceSettings:s()(s()({},Y.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null===(x=Y.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null==Y||null===(b=Y.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==Y||null===(F=Y.serviceSettings)||void 0===F||null===(F=F.hotFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==Y||null===(k=Y.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Y.robotSettings),{},{robotUid:null==Y||null===(j=Y.robotSettings)||void 0===j||null===(j=j.robot)||void 0===j?void 0:j.uid}),leaveMsgSettings:s()(s()({},Y.leaveMsgSettings),{},{worktimeUids:null==Y||null===(M=Y.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),agentUids:Y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",U),e.next=26,(0,A.W5)(U);case 26:Z=e.sent,console.log("updateWorkGroup response:",Z),200===Z.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(Z.data)):(c.yw.destroy(),c.yw.error(Z.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqShortcut handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(b.Z,{message:u.formatMessage({id:"faq.create.first"}),type:"success",action:(0,R.jsx)(F.ZP,{type:"link",icon:(0,R.jsx)(m.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(k.Z,{}),(0,R.jsxs)(y.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,R.jsx)(q.Z,{label:u.formatMessage({id:"faq.show.shortcut"}),name:"showShortcutFaqs",fieldProps:{onChange:se}}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:u.formatMessage({id:"faq.add.shortcut"})},"github")}),(0,R.jsx)(y.A.Item,{children:(0,R.jsx)(F.ZP,{type:"primary",icon:(0,R.jsx)(w.Z,{}),onClick:function(){c.yw.warning(u.formatMessage({id:"faq.generate.shortcut"}))},children:u.formatMessage({id:"faq.generate.shortcut"})},"agi")}),(0,R.jsx)(S.Z,{name:"shortcutFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqShortcut"}),options:null==_||null===(t=_.data)||void 0===t?void 0:t.content.map((function(e){return{label:T(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(x.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,R.jsxs)(j.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"chat.window.show"})}),(0,R.jsx)(F.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"chat.window.hide"})})]})]})}},64859:function(e,t,n){var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(81153),g=n(63833),f=n(43314),p=n(85702),h=n(3245),m=n(61017),w=n(77667),y=n(5728),q=n(31806),S=n(82045),x=n(44194),b=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),i=y.A.useForm(),o=d()(i,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),l=u.currentRobot,F=u.setCurrentRobot,k=(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),j=k.currentAgent,M=k.setCurrentAgent,U=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Z=U.currentWorkgroup,C=U.setCurrentWorkgroup;(0,x.useEffect)((function(){var e;if(t===w._X4)o.setFieldsValue({showInputAssociation:null==l||null===(e=l.serviceSettings)||void 0===e?void 0:e.showInputAssociation});else if(t===w.Njn){var n;o.setFieldsValue({showInputAssociation:null==j||null===(n=j.serviceSettings)||void 0===n?void 0:n.showInputAssociation})}else if(t===w.aZD){var i;o.setFieldsValue({showInputAssociation:null==Z||null===(i=Z.serviceSettings)||void 0===i?void 0:i.showInputAssociation})}}),[l,j,Z]);var P=function(){var e=a()(s()().mark((function e(i){var o,u,a,d,p,h,m,y,q,S,x,b,k,U,P,A,I,R,T,W,N,O,V,E,D;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleInputAssociationSubmit:",i),t!==w._X4){e.next=11;break}return h=r()(r()({},l),{},{serviceSettings:r()(r()({},l.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(o=j.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==l||null===(u=l.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==l||null===(a=l.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==l||null===(d=l.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==l||null===(p=l.serviceSettings)||void 0===p||null===(p=p.shortcutFaqs)||void 0===p?void 0:p.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),F(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return P=r()(r()({},j),{},{serviceSettings:r()(r()({},null==j?void 0:j.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(y=j.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),quickFaqUids:null==j||null===(q=j.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==j||null===(S=j.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==j||null===(x=j.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==j||null===(b=j.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),robotSettings:r()(r()({},j.robotSettings),{},{robotUid:null==j||null===(k=j.robotSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid}),leaveMsgSettings:r()(r()({},j.leaveMsgSettings),{},{worktimeUids:null==j||null===(U=j.leaveMsgSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),autoReplySettings:r()({},j.autoReplySettings)}),console.log("agentObject:",P),e.next=16,(0,v.sE)(P);case 16:A=e.sent,console.log("updateAgent response:",A),200===A.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),M(A.data)):(c.yw.destroy(),c.yw.error(A.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return E=r()(r()({},Z),{},{serviceSettings:r()(r()({},Z.serviceSettings),{},{showInputAssociation:i.showInputAssociation,faqUids:null==j||null===(I=j.serviceSettings)||void 0===I||null===(I=I.faqs)||void 0===I?void 0:I.map((function(e){return e.uid})),quickFaqUids:null===(R=Z.serviceSettings)||void 0===R||null===(R=R.quickFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),guessFaqUids:null==Z||null===(T=Z.serviceSettings)||void 0===T||null===(T=T.guessFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),hotFaqUids:null==Z||null===(W=Z.serviceSettings)||void 0===W||null===(W=W.hotFaqs)||void 0===W?void 0:W.map((function(e){return e.uid})),shortcutFaqUids:null==Z||null===(N=Z.serviceSettings)||void 0===N||null===(N=N.shortcutFaqs)||void 0===N?void 0:N.map((function(e){return e.uid}))}),robotSettings:r()(r()({},Z.robotSettings),{},{robotUid:null==Z||null===(O=Z.robotSettings)||void 0===O||null===(O=O.robot)||void 0===O?void 0:O.uid}),leaveMsgSettings:r()(r()({},Z.leaveMsgSettings),{},{worktimeUids:null==Z||null===(V=Z.leaveMsgSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),agentUids:Z.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",E),e.next=26,(0,f.W5)(E);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),C(D.data)):(c.yw.destroy(),c.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)("div",{children:(0,b.jsx)(y.A,{form:o,onFinish:P,children:(0,b.jsx)(q.Z,{width:"md",name:"showInputAssociation",label:n.formatMessage({id:"showInputAssociation",defaultMessage:"Show Input Association"})})})})}},34890:function(e,t,n){var i=n(90819),s=n.n(i),o=n(89933),r=n.n(o),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(81153),g=n(63833),f=n(43314),p=n(85702),h=n(3245),m=n(61017),w=n(77667),y=n(5728),q=n(31806),S=n(11607),x=n(82045),b=n(44194),F=n(14731),k=n(62599),j=n(12265),M=n(31549);t.Z=function(e){var t=e.type,n=(0,x.useIntl)(),i=y.A.useForm(),o=d()(i,1)[0],u=(0,F.M)(),l=u.config,U=u.updateConfig,Z=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),C=Z.currentRobot,P=Z.setCurrentRobot,A=(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),I=A.currentAgent,R=A.setCurrentAgent,T=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),W=T.currentWorkgroup,N=T.setCurrentWorkgroup,O=(0,b.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:C.uid}:t===w.Njn?{chatType:w.scI,chatSid:I.uid}:t===w.aZD?{chatType:w.vPY,chatSid:W.uid}:{chatType:w.xtN,chatSid:""}}),[t,C,I,W]),V=O.chatType,E=O.chatSid;(0,b.useEffect)((function(){var e,n,i,s,r,u;if(t===w._X4)o.setFieldsValue({autoPopup:null==C||null===(e=C.serviceSettings)||void 0===e?void 0:e.autoPopup,showInvite:null==C||null===(n=C.inviteSettings)||void 0===n?void 0:n.show,inviteText:null==C||null===(i=C.inviteSettings)||void 0===i?void 0:i.text}),U(a()(a()({},l),{},{autoPopup:null==C||null===(s=C.serviceSettings)||void 0===s?void 0:s.autoPopup,inviteParams:{show:null==C||null===(r=C.inviteSettings)||void 0===r?void 0:r.show,text:null==C||null===(u=C.inviteSettings)||void 0===u?void 0:u.text},chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E})}));else if(t===w.Njn){var d,c,v,g,f,p;o.setFieldsValue({autoPopup:null==I||null===(d=I.serviceSettings)||void 0===d?void 0:d.autoPopup,showInvite:null==I||null===(c=I.inviteSettings)||void 0===c?void 0:c.show,inviteText:null==I||null===(v=I.inviteSettings)||void 0===v?void 0:v.text}),U(a()(a()({},l),{},{autoPopup:null==I||null===(g=I.serviceSettings)||void 0===g?void 0:g.autoPopup,inviteParams:{show:null==I||null===(f=I.inviteSettings)||void 0===f?void 0:f.show,text:null==I||null===(p=I.inviteSettings)||void 0===p?void 0:p.text},chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E})}))}else if(t===w.aZD){var h,m,y,q,S,x;o.setFieldsValue({autoPopup:null==W||null===(h=W.serviceSettings)||void 0===h?void 0:h.autoPopup,showInvite:null==W||null===(m=W.inviteSettings)||void 0===m?void 0:m.show,inviteText:null==W||null===(y=W.inviteSettings)||void 0===y?void 0:y.text}),U(a()(a()({},l),{},{autoPopup:null==W||null===(q=W.serviceSettings)||void 0===q?void 0:q.autoPopup,inviteParams:{show:null==W||null===(S=W.inviteSettings)||void 0===S?void 0:S.show,text:null==W||null===(x=W.inviteSettings)||void 0===x?void 0:x.text},chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E})}))}}),[C,I,W,V,E]);var D=function(){var e=r()(s()().mark((function e(i){var o,r,u,l,d,p,h,m,y,q,S,x,b,F,k,j,M,U,Z,A,T,O,V,E,D;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),t!==w._X4){e.next=11;break}return p=a()(a()({},C),{},{serviceSettings:a()(a()({},C.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==C||null===(o=C.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==C||null===(r=C.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==C||null===(u=C.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==C||null===(l=C.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==C||null===(d=C.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},C.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",p),e.next=6,(0,g.$l)(p);case 6:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),P(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return k=a()(a()({},I),{},{serviceSettings:a()(a()({},null==I?void 0:I.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==I||null===(m=I.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==I||null===(y=I.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==I||null===(q=I.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null==I||null===(S=I.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(x=I.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:a()(a()({},I.robotSettings),{},{robotUid:null==I||null===(b=I.robotSettings)||void 0===b||null===(b=b.robot)||void 0===b?void 0:b.uid}),leaveMsgSettings:a()(a()({},I.leaveMsgSettings),{},{worktimeUids:null==I||null===(F=I.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:a()({},I.autoReplySettings),inviteSettings:a()(a()({},I.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",k),e.next=16,(0,v.sE)(k);case 16:j=e.sent,console.log("updateAgent response:",j),200===j.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),R(j.data)):(c.yw.destroy(),c.yw.error(j.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return E=a()(a()({},W),{},{serviceSettings:a()(a()({},W.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==W||null===(M=W.serviceSettings)||void 0===M||null===(M=M.faqs)||void 0===M?void 0:M.map((function(e){return e.uid})),quickFaqUids:null===(U=W.serviceSettings)||void 0===U||null===(U=U.quickFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),guessFaqUids:null==W||null===(Z=W.serviceSettings)||void 0===Z||null===(Z=Z.guessFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),hotFaqUids:null==W||null===(A=W.serviceSettings)||void 0===A||null===(A=A.hotFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(T=W.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),robotSettings:a()(a()({},W.robotSettings),{},{robotUid:null==W||null===(O=W.robotSettings)||void 0===O||null===(O=O.robot)||void 0===O?void 0:O.uid}),leaveMsgSettings:a()(a()({},W.leaveMsgSettings),{},{worktimeUids:null==W||null===(V=W.leaveMsgSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},W.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:W.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",E),e.next=26,(0,f.W5)(E);case 26:D=e.sent,console.log("updateWorkGroup response:",D),200===D.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),N(D.data)):(c.yw.destroy(),c.yw.error(D.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsxs)(y.A,{form:o,onFinish:D,children:[(0,M.jsx)(q.Z,{width:"md",name:"autoPopup",label:n.formatMessage({id:"autoPopup",defaultMessage:"Auto Popup"})}),(0,M.jsx)(q.Z,{width:"md",name:"showInvite",label:n.formatMessage({id:"showInvite",defaultMessage:"Show Invite"})}),(0,M.jsx)(S.Z,{width:"md",name:"inviteText",label:n.formatMessage({id:"inviteText",defaultMessage:"Invite Text"})})]}),(0,M.jsxs)(k.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,M.jsx)(j.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,M.jsx)(j.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},28243:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(63833),n(43314),n(85702),n(3245),n(61017),n(77667),n(82045),n(44194),n(31549)},26469:function(e,t,n){var i=n(90819),s=n.n(i),o=n(89933),r=n.n(o),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(81153),g=n(63833),f=n(43314),p=n(85702),h=n(3245),m=n(61017),w=n(77667),y=n(5728),q=n(31806),S=n(11607),x=n(82045),b=n(44194),F=n(62599),k=n(12265),j=n(14731),M=n(31549);t.Z=function(e){var t=e.type,n=(0,x.useIntl)(),i=y.A.useForm(),o=d()(i,1)[0],u=(0,j.M)(),l=u.config,U=u.updateConfig,Z=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),C=Z.currentRobot,P=Z.setCurrentRobot,A=(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),I=A.currentAgent,R=A.setCurrentAgent,T=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),W=T.currentWorkgroup,N=T.setCurrentWorkgroup,O=(0,b.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:C.uid}:t===w.Njn?{chatType:w.scI,chatSid:I.uid}:t===w.aZD?{chatType:w.vPY,chatSid:W.uid}:{chatType:w.xtN,chatSid:""}}),[t,C,I,W]),V=O.chatType,E=O.chatSid;(0,b.useEffect)((function(){if(t===w._X4){var e,n,i=null==C||null===(e=C.serviceSettings)||void 0===e?void 0:e.showRightIframe;o.setFieldsValue({showRightIframe:i,rightIframeUrl:null==C||null===(n=C.serviceSettings)||void 0===n?void 0:n.rightIframeUrl}),U(i?a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.Njn){var s,r,u=null==I||null===(s=I.serviceSettings)||void 0===s?void 0:s.showRightIframe;o.setFieldsValue({showRightIframe:u,rightIframeUrl:null==I||null===(r=I.serviceSettings)||void 0===r?void 0:r.rightIframeUrl}),U(u?a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.aZD){var d,c,v=null==W||null===(d=W.serviceSettings)||void 0===d?void 0:d.showRightIframe;o.setFieldsValue({showRightIframe:v,rightIframeUrl:null==W||null===(c=W.serviceSettings)||void 0===c?void 0:c.rightIframeUrl}),U(v?a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:V,sid:E}),window:a()(a()({},l.window),{},{width:380})}))}}),[C,I,W,V,E]);var D=function(){var e=r()(s()().mark((function e(i){var o,r,u,l,d,p,h,m,y,q,S,x,b,F,k,j,M,U,Z,A,T,O,V,E,D,_;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleRightSubmit:",i),t!==w._X4){e.next=11;break}return p=a()(a()({},C),{},{serviceSettings:a()(a()({},C.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==C||null===(o=C.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==C||null===(r=C.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==C||null===(u=C.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==C||null===(l=C.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==C||null===(d=C.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",p),e.next=6,(0,g.$l)(p);case 6:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),P(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return k=a()(a()({},I),{},{serviceSettings:a()(a()({},null==I?void 0:I.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==I||null===(m=I.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==I||null===(y=I.serviceSettings)||void 0===y||null===(y=y.quickFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==I||null===(q=I.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null==I||null===(S=I.serviceSettings)||void 0===S||null===(S=S.hotFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),shortcutFaqUids:null==I||null===(x=I.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:a()(a()({},I.robotSettings),{},{robotUid:null==I||null===(b=I.robotSettings)||void 0===b||null===(b=b.robot)||void 0===b?void 0:b.uid}),leaveMsgSettings:a()(a()({},I.leaveMsgSettings),{},{worktimeUids:null==I||null===(F=I.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:a()({},I.autoReplySettings)}),console.log("agentObject:",k),e.next=16,(0,v.sE)(k);case 16:j=e.sent,console.log("updateAgent response:",j),200===j.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),R(j.data)):(c.yw.destroy(),c.yw.error(j.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return D=a()(a()({},W),{},{serviceSettings:a()(a()({},W.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==W||null===(M=W.serviceSettings)||void 0===M||null===(M=M.faqs)||void 0===M?void 0:M.map((function(e){return e.uid})),quickFaqUids:null==W||null===(U=W.serviceSettings)||void 0===U||null===(U=U.quickFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),guessFaqUids:null==W||null===(Z=W.serviceSettings)||void 0===Z||null===(Z=Z.guessFaqs)||void 0===Z?void 0:Z.map((function(e){return e.uid})),hotFaqUids:null==W||null===(A=W.serviceSettings)||void 0===A||null===(A=A.hotFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(T=W.serviceSettings)||void 0===T||null===(T=T.shortcutFaqs)||void 0===T?void 0:T.map((function(e){return e.uid}))}),robotSettings:a()(a()({},W.robotSettings),{},{robotUid:null==W||null===(O=W.robotSettings)||void 0===O||null===(O=O.robot)||void 0===O?void 0:O.uid}),leaveMsgSettings:a()(a()({},W.leaveMsgSettings),{},{worktimeUids:null==W||null===(V=W.leaveMsgSettings)||void 0===V||null===(V=V.worktimes)||void 0===V?void 0:V.map((function(e){return e.uid}))}),agentUids:null==W||null===(E=W.agents)||void 0===E?void 0:E.map((function(e){return e.uid}))}),console.log("workgroupObject:",D),e.next=26,(0,f.W5)(D);case 26:_=e.sent,console.log("updateWorkGroup response:",_),200===_.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),N(_.data)):(c.yw.destroy(),c.yw.error(_.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{children:[(0,M.jsxs)(y.A,{form:o,onFinish:D,children:[(0,M.jsx)(q.Z,{width:"md",name:"showRightIframe",label:n.formatMessage({id:"showRightIframe"})}),(0,M.jsx)(S.Z,{width:"md",name:"rightIframeUrl",label:n.formatMessage({id:"rightIframeUrl"})})]}),(0,M.jsxs)(F.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,M.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,M.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},60029:function(e,t,n){var i=n(73193),s=n.n(i),o=n(84176),r=n.n(o),u=n(89756),a=n(74145),l=n(82045),d=n(72909),c=(n(79520),n(44194)),v=n(31549),g=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];t.Z=function(e){var t=e.placeholder,n=e.defaultValue,i=e.value,o=e.style,f=e.toolbarKeys,p=e.onChange,h=(e.options,r()(e,g)),m=(0,l.useIntl)(),w=(0,a.Z)().isDarkMode,y=(0,c.useRef)(null),q=(0,c.useRef)(null);return(0,c.useEffect)((function(){if(y.current){if(!q.current){var e=new d.cW({element:y.current,theme:w?"dark":"light",placeholder:t,content:n,toolbarKeys:f,image:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(m.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},video:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(m.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},attachment:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(m.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},onChange:function(e){"function"==typeof p&&p(e.getHtml(),e.getMarkdown())}});q.current=e}return function(){q.current&&(q.current.destroy(),q.current=null)}}}),[]),(0,c.useEffect)((function(){q.current&&i!==q.current.getHtml()&&q.current.setContent(i||"")}),[i]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",s()(s()({ref:y},h),{},{style:s()({height:"100%"},o)}))})}},2561:function(e,t,n){n.d(t,{Z:function(){return f}});n(44194);var i=n(50571),s=n(82045),o=n(84330),r=n(81951),u=n(68925),a=n(20924),l=n(64476),d=n(89508),c=n(31549),v=(l.Z.Sider,l.Z.Content,function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{})})}),g=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{})})},f=function(e){var t=e.type,n=((0,s.useIntl)(),[{key:"whatsapp",label:"Whatsapp",children:(0,c.jsx)(u.Z,{})},{key:"telegram",label:"Telegram",children:(0,c.jsx)(r.Z,{})},{key:"facebook",label:"Facebook",children:(0,c.jsx)(v,{})},{key:"Line",label:"Line",children:(0,c.jsx)(a.Z,{})},{key:"wordpress",label:"Wordpress",children:(0,c.jsx)(g,{})}]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.Z,{type:t}),(0,c.jsx)(i.Z,{tabPosition:"left",items:n})]})}},82639:function(e,t,n){n(44194);var i=n(50571),s=n(82980),o=n(26727),r=n(33067),u=n(83440),a=n(53499),l=n(84330),d=n(8401),c=n(34077),v=n(96144),g=n(45831),f=n(31549);t.Z=function(e){var t=e.type,n=[{key:"web",label:"Web",children:(0,f.jsx)(g.Z,{type:t})},{key:"react",label:"React",children:(0,f.jsx)(a.Z,{type:t})},{key:"vue",label:"Vue",children:(0,f.jsx)(v.Z,{type:t})},{key:"svelte",label:"Svelte",children:(0,f.jsx)(d.Z,{type:t})},{key:"vanilla",label:"Vanilla",children:(0,f.jsx)(c.Z,{type:t})},{key:"ios",label:"iOS",children:(0,f.jsx)(s.Z,{type:t})},{key:"android",label:"Android",children:(0,f.jsx)(u.Z,{type:t})},{key:"uniapp",label:"Uniapp",children:(0,f.jsx)(o.Z,{type:t})},{key:"flutter",label:"Flutter",children:(0,f.jsx)(r.Z,{type:t})}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Z,{type:t}),(0,f.jsx)(i.Z,{tabPosition:"left",items:n})]})}},61562:function(e,t,n){n.d(t,{Z:function(){return w}});n(44194);var i=n(50571),s=n(82045),o=n(84330),r=n(9579),u=n(64352),a=n(60992),l=n(15192),d=n(37807),c=n(81167),v=n(89508),g=n(31549),f=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},p=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},h=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},m=function(){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{})})},w=function(e){var t=e.type,n=(0,s.useIntl)(),v=[{key:"pdd",label:n.formatMessage({id:"channel.shop.pdd"}),children:(0,g.jsx)(r.Z,{})},{key:"jd",label:n.formatMessage({id:"channel.shop.jd"}),children:(0,g.jsx)(l.Z,{})},{key:"qianniu",label:n.formatMessage({id:"channel.shop.qianniu"}),children:(0,g.jsx)(u.Z,{})},{key:"doudian",label:n.formatMessage({id:"channel.shop.doudian"}),children:(0,g.jsx)(a.Z,{})},{key:"shopify",label:"Shopify",children:(0,g.jsx)(d.Z,{})},{key:"lazada",label:"Lazada",children:(0,g.jsx)(c.Z,{})},{key:"woocommerce",label:"Woocommerce",children:(0,g.jsx)(f,{})},{key:"opencart",label:"Opencart",children:(0,g.jsx)(p,{})},{key:"magento",label:"Magento",children:(0,g.jsx)(h,{})},{key:"prestashop",label:"Prestashop",children:(0,g.jsx)(m,{})}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{type:t}),(0,g.jsx)(i.Z,{tabPosition:"left",items:v})]})}},36360:function(e,t,n){n.d(t,{Z:function(){return L}});var i=n(44194),s=n(50571),o=n(82045),r=n(48764),u=n(84330),a=n(20988),l=n(76457),d=n(41956),c=n(42685),v=n(2748),g=n(90819),f=n.n(g),p=n(73193),h=n.n(p),m=n(84176),w=n.n(m),y=n(89933),q=n.n(y),S=n(45332),x=n.n(S),b=n(11984),F=n(72434),k=n(83730),j=n(62599),M=n(12265),U=n(89756),Z=n(40431),C=n(52519),P=n(440),A=n(77667),I=n(31549),R=["current"],T=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],W=function(e){e.type;var t=(0,o.useAccess)(),n=(0,i.useState)(!1),s=x()(n,2),r=s[0],u=s[1],a=((0,o.useIntl)(),(0,i.useRef)()),l=(0,Z.u)((function(e){return e.currentOrg})),d=[].concat(T),c=function(){u(!0)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{children:"通过h5方式集成"}),(0,I.jsx)(F.Z,{}),(0,I.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(o.FormattedMessage,{id:A.h5w})}),children:[(0,I.jsxs)(k.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."})]}),(0,I.jsx)(C.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=q()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,R),o=h()({pageNumber:t.current-1,orgUid:l.uid},s),e.next=5,(0,P.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信小程序",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(M.ZP,{type:"primary",onClick:c,children:"添加微信小程序"}),(0,I.jsx)(M.ZP,{icon:(0,I.jsx)(b.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信小程序对接文档"})]})]}})]})]})},N=["current"],O=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],V=function(e){e.type;var t=(0,o.useAccess)(),n=(0,i.useState)(!1),s=x()(n,2),r=s[0],u=s[1],a=((0,o.useIntl)(),(0,i.useRef)()),l=(0,Z.u)((function(e){return e.currentOrg})),d=[].concat(O),c=function(){u(!0)};return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(o.FormattedMessage,{id:A.h5w})}),children:[(0,I.jsxs)(k.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."})]}),(0,I.jsx)(C.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=q()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,N),o=h()({pageNumber:t.current-1,orgUid:l.uid},s),e.next=5,(0,P.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定企业微信",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(M.ZP,{type:"primary",onClick:c,children:"添加企业微信"}),(0,I.jsx)(M.ZP,{icon:(0,I.jsx)(b.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"企业微信对接文档"})]})]}})]})})},E=n(50484),D=n(31816),_=n(51444),B=n(56746),G=["current"],X=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"appId",defaultMessage:"AppId"}),dataIndex:"appId",copyable:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"url",defaultMessage:"Url"}),dataIndex:"url",copyable:!0,hideInSearch:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"token",defaultMessage:"Token"}),dataIndex:"token",copyable:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"encryptMode",defaultMessage:"EncryptMode"}),dataIndex:"encryptMode",copyable:!0,hideInSearch:!0,render:function(e,t){switch(t.encryptMode){case"PLAINTEXT":return(0,I.jsx)("span",{children:"明文模式"});case"COMPATIBLE":return(0,I.jsx)("span",{children:"兼容模式"});case"SAFE":return(0,I.jsx)("span",{children:"安全模式"});default:return(0,I.jsx)("span",{children:"未知"})}}},{title:(0,I.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],H=function(e){e.type;var t=(0,i.useState)(!1),n=x()(t,2),s=n[0],r=n[1],u=(0,i.useState)({}),a=x()(u,2),l=a[0],d=a[1],c=(0,i.useState)(!1),v=x()(c,2),g=v[0],p=v[1],m=(0,o.useIntl)(),y=(0,i.useRef)(),S=(0,Z.u)((function(e){return e.currentOrg})),P=k.Z.useModal(),A=x()(P,2),R=A[0],T=A[1],W=[].concat(X,[{title:m.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(e,t,n,i){return[(0,I.jsx)("a",{onClick:function(){p(!0),d(t),r(!0)},children:m.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,I.jsx)(M.ZP,{type:"link",onClick:function(){return e=t,void R.confirm({title:m.formatMessage({id:"deleteTip"}),icon:(0,I.jsx)(E.Z,{}),content:"".concat(m.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.name,"】？"),onOk:function(){N(e)},onCancel:function(){},okText:m.formatMessage({id:"ok"}),cancelText:m.formatMessage({id:"cancel"})});var e},danger:!0,children:m.formatMessage({id:"delete",defaultMessage:"Delete"})},"delete")]}}]),N=function(){var e=q()(f()().mark((function e(t){var n;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteWechatMp:",t),e.next=3,(0,B.ul)(t);case 3:n=e.sent,console.log("deleteMember:",n),200===n.code?(U.yw.success(m.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),y.current.reload()):U.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=q()(f()().mark((function e(t){var n,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B._Z)(t);case 2:n=e.sent,console.log("handleCreateWechatMp response:",n),200===n.code?(null===(i=y.current)||void 0===i||i.reload(),r(!1)):U.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=q()(f()().mark((function e(t){var n,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=null==l?void 0:l.uid,e.next=3,(0,B.sS)(t);case 3:n=e.sent,console.log("handleUpdateWechatMp response:",n),200===n.code?(null===(i=y.current)||void 0===i||i.reload(),r(!1)):U.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){r(!0),p(!1),d({})};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("p",{children:"通过自定义菜单方式集成"}),(0,I.jsx)(F.Z,{}),(0,I.jsx)(C.Z,{columns:W,actionRef:y,cardBordered:!0,request:function(){var e=q()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,G),o=h()({pageNumber:t.current-1,orgUid:S.uid},s),e.next=5,(0,B.aq)(o);case 5:return r=e.sent,console.log("queryWechatMpByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定公众号",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(M.ZP,{type:"primary",onClick:H,icon:(0,I.jsx)(D.Z,{}),children:"添加微信公众号"}),!1,(0,I.jsx)(M.ZP,{icon:(0,I.jsx)(b.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechatmp")},children:"微信公众号对接文档"})]})]}}),T,s&&(0,I.jsx)(_.Z,{isEdit:g,open:s,wechatmp:l,onClose:function(){r(!1)},onSubmit:function(e){console.log("onDrawerSubmit:",e),g?V(e):O(e)}})]})},z=["current"],$=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,I.jsx)(o.FormattedMessage,{id:"name",defaultMessage:"Name"}),dataIndex:"name",hideInSearch:!0},{title:(0,I.jsx)(o.FormattedMessage,{id:"createdAt",defaultMessage:"createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0}],Q=function(e){e.type;var t=(0,o.useAccess)(),n=(0,i.useState)(!1),s=x()(n,2),r=s[0],u=s[1],a=((0,o.useIntl)(),(0,i.useRef)()),l=(0,Z.u)((function(e){return e.currentOrg})),d=[].concat($),c=function(){u(!0)};return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(o.Access,{accessible:t.canDebug(),fallback:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(o.FormattedMessage,{id:A.h5w})}),children:[(0,I.jsxs)(k.Z,{title:"Basic Modal",open:r,onOk:function(){u(!1)},onCancel:function(){u(!1)},children:[(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."}),(0,I.jsx)("p",{children:"Some contents..."})]}),(0,I.jsx)(C.Z,{columns:d,actionRef:a,cardBordered:!0,request:function(){var e=q()(f()().mark((function e(t,n,i){var s,o,r;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,n,i),t.current,s=w()(t,z),o=h()({pageNumber:t.current-1,orgUid:l.uid},s),e.next=5,(0,P.H)(o);case 5:return r=e.sent,console.log("queryInvoiceByOrg response:",r),200===r.code||U.yw.error(r.message),e.abrupt("return",{data:r.data.content,success:!0,total:r.data.totalElements});case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"绑定微信客服",toolBarRender:function(){return[(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(M.ZP,{type:"primary",onClick:c,children:"添加微信客服"}),(0,I.jsx)(M.ZP,{icon:(0,I.jsx)(b.Z,{}),onClick:function(){return window.open("https://www.weiyuai.cn/docs/zh-CN/docs/develop/visitor/social/wechat")},children:"微信客服对接文档"})]})]}})]})})},L=function(e){var t=e.type,n=(0,o.useIntl)(),i=[{key:"wechat-mp",label:n.formatMessage({id:"channel.social.wechat.mp"}),children:(0,I.jsx)(H,{type:t})},{key:"wechat-mini",label:n.formatMessage({id:"channel.social.wechat.mini"}),children:(0,I.jsx)(W,{type:t})},{key:"wechat-com",label:n.formatMessage({id:"channel.social.wechat.work"}),children:(0,I.jsx)(V,{type:t})},{key:"wechat-kefu",label:n.formatMessage({id:"channel.social.wechat.kefu"}),children:(0,I.jsx)(Q,{type:t})},{key:"douyin",label:n.formatMessage({id:"channel.social.douyin"}),children:(0,I.jsx)(v.Z,{})},{key:"xiaohongshu",label:n.formatMessage({id:"channel.social.xiaohongshu"}),children:(0,I.jsx)(c.Z,{})},{key:"baidu",label:n.formatMessage({id:"channel.social.baidu"}),children:(0,I.jsx)(d.Z,{})},{key:"weibo",label:n.formatMessage({id:"channel.social.weibo"}),children:(0,I.jsx)(l.Z,{})},{key:"bili",label:n.formatMessage({id:"channel.social.bilibili"}),children:(0,I.jsx)(a.Z,{})},{key:"zhihu",label:n.formatMessage({id:"channel.social.zhihu"}),children:(0,I.jsx)(r.Z,{})}];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{type:t}),(0,I.jsx)(s.Z,{tabPosition:"left",items:i})]})}},84330:function(e,t,n){var i=n(82045),s=n(31549);t.Z=function(e){e.type,(0,i.useIntl)();return(0,s.jsx)(s.Fragment,{})}},92349:function(e,t,n){n.d(t,{G:function(){return v}});var i=n(73193),s=n.n(i),o=(n(44194),n(17433)),r=n(77667),u=n(28977),a=n.n(u),l=n(89756),d=n(33934),c=n(31549),v=function(e){var t=e.children,n=e.onSuccess,i=e.onError,u={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,d.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:u,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=a()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;u.file=e,u.file_name=t,u.file_type=e.type,console.log("beforeUpload",u)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data;n(t),l.yw.success("".concat(e.file.name," 上传成功"))}else i(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),i(e.file))}};return(0,c.jsx)(o.Z,s()(s()({},v),{},{children:t}))}}}]);