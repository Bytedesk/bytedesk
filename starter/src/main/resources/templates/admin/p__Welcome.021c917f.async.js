"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8185],{17208:function(e,t,s){s.d(t,{Kq:function(){return u},RL:function(){return m}});var i=s(90819),a=s.n(i),r=s(73193),n=s.n(r),o=s(89933),l=s.n(o),d=s(55735),c=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/create",{method:"POST",data:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/org/update",{method:"POST",data:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},60150:function(e,t,s){s.d(t,{RU:function(){return u},xL:function(){return m}});var i=s(90819),a=s.n(i),r=s(73193),n=s.n(r),o=s(89933),l=s.n(o),d=s(55735),c=s(30921);function u(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/service/statistic/query/date",{method:"GET",params:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/service/statistic/calculate",{method:"POST",data:n()(n()({},t),{},{client:d.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},42987:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var i=s(90819),a=s.n(i),r=s(89933),n=s.n(r),o=s(45332),l=s.n(o),d=s(86803),c=s(17208),u=s(40612),x=s(55735),m=s(65461),f=s(30921),g=s(52288),v=s(44194),p=s(53530),j=s(75365),h=s(98123),y=s(44781),Z=s(62673),w=s(3849),M=s(67402),b=s(88996),F=s(88201),k=s(5602),T=s(59485),S=s(7875),O=s(61107),C=s(80556),R=s(58791),P=s(58368),Y=s(86994),A=s(48004),I=s(93689),q=s(429),E=s(27995),U=s(24429),D=s(34545),W=s(25640),B=s(52294),V=s(1902),z=s(95490),H=s(24170),N=s(76750),G=s(72614),$=s(28977),L=s.n($),_=s(5939),K=s(24562),Q=s(21499),J=s(89717),X=s(10737),ee=s(60150),te=s(32327),se=s(44521),ie=s(31549),ae=te.Z.Title,re=h.default.RangePicker,ne=y.Z.Option,oe=function(){var e,t,s=(0,f.useIntl)(),i=(0,N.Z)().translateStringTranct,r=(0,v.useState)(L()().startOf("day")),o=l()(r,2),c=o[0],m=o[1],g=(0,v.useState)(L()().endOf("day")),p=l()(g,2),h=p[0],$=p[1],te=(0,v.useState)("today"),oe=l()(te,2),le=oe[0],de=oe[1],ce=(0,v.useState)(x.AOk),ue=l()(ce,2),xe=ue[0],me=ue[1],fe=(0,v.useState)(),ge=l()(fe,2),ve=ge[0],pe=ge[1],je=(0,v.useState)(),he=l()(je,2),ye=he[0],Ze=he[1],we=(0,u.u)((function(e){return e.currentOrg})),Me=(0,V.E)((function(e){return e})),be=Me.agentResult,Fe=Me.setAgentResult,ke=(0,z.$)((function(e){return e})),Te=ke.workgroupResult,Se=ke.setWorkgroupResult,Oe=(0,v.useState)(),Ce=l()(Oe,2),Re=Ce[0],Pe=Ce[1],Ye=(0,v.useState)(x.OwA),Ae=l()(Ye,2),Ie=Ae[0],qe=Ae[1],Ee=(0,v.useState)(!1),Ue=l()(Ee,2),De=(Ue[0],Ue[1]),We=[{label:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.today"}),value:"today"},{label:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.yesterday"}),value:"yesterday"},{label:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.week"}),value:"week"},{label:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.lastWeek"}),value:"lastWeek"},{label:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.month"}),value:"month"},{label:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.timeRange.custom"}),value:"custom"}],Be=[{type:s.formatMessage({id:"service.statistic.status.online"}),value:8},{type:s.formatMessage({id:"service.statistic.status.busy"}),value:5},{type:s.formatMessage({id:"service.statistic.status.away"}),value:2},{type:s.formatMessage({id:"service.statistic.status.offline"}),value:3}],Ve=[{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.agent"}),dataIndex:"name",key:"name"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.onlineTime"}),dataIndex:"onlineTime",key:"onlineTime"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.sessionCount"}),dataIndex:"sessionCount",key:"sessionCount"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.avgResponseTime"}),dataIndex:"avgResponseTime",key:"avgResponseTime"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.avgSessionTime"}),dataIndex:"avgSessionTime",key:"avgSessionTime"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.satisfaction"}),dataIndex:"satisfaction",key:"satisfaction"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.workingHours"}),dataIndex:"workingHours",key:"workingHours"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.transferRate"}),dataIndex:"transferRate",key:"transferRate"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.firstResolutionRate"}),dataIndex:"firstResolutionRate",key:"firstResolutionRate"},{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.table.overdueCount"}),dataIndex:"overdueCount",key:"overdueCount"}];(0,v.useEffect)((function(){if("custom"===le)m(c),$(h),qe(x.dd4);else{var e=L()();"today"===le?(m(e),$(e),qe(x.OwA)):"yesterday"===le?(m(e.subtract(1,"day")),$(e.subtract(1,"day")),qe(x.OwA)):"week"===le?(m(e.startOf("week")),$(e.endOf("week")),qe(x.dd4)):"lastWeek"===le?(m(e.subtract(1,"week").startOf("week")),$(e.subtract(1,"week").endOf("week")),qe(x.dd4)):"month"===le&&(m(e.startOf("month")),$(e.endOf("month")),qe(x.dd4))}}),[le]);var ze=function(){var e=n()(a()().mark((function e(){var t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==we?void 0:we.uid},e.next=4,(0,G.u7)(t);case 4:s=e.sent,console.log("fetchAllWorkgroups: ",s),200===s.code?(d.yw.destroy(),Se(s),s.data.content.length>0&&Ze(s.data.content[0].uid)):(d.yw.destroy(),d.yw.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=n()(a()().mark((function e(){var t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading("loading"),t={pageNumber:0,pageSize:50,orgUid:null==we?void 0:we.uid},e.next=4,(0,H._t)(t);case 4:s=e.sent,console.log("fetchAllAgents: ",s),200===s.code?(d.yw.destroy(),Fe(s),s.data.content.length>0&&pe(s.data.content[0].uid)):(d.yw.destroy(),d.yw.error(i(s.message))),console.log("queryAllAgents response",s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=n()(a()().mark((function e(){var t,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return De(!0),e.prev=1,d.yw.loading("loading"),t={type:xe,statisticStartTime:null==c?void 0:c.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==h?void 0:h.format("YYYY-MM-DD 23:59:59"),workgroupUid:ye,agentUid:ve,orgUid:null==we?void 0:we.uid},e.next=6,(0,ee.RU)(t);case 6:i=e.sent,console.log("queryStatisticServicesByOrg response",i,t),200===i.code?(d.yw.destroy(),Pe(i.data)):(d.yw.destroy(),d.yw.error(i.message)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),d.yw.error(s.formatMessage({id:"ticket.message.operation.failed"}));case 14:return e.prev=14,De(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=n()(a()().mark((function e(){var t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading("loading"),t={type:xe,statisticStartTime:null==c?void 0:c.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==h?void 0:h.format("YYYY-MM-DD 23:59:59"),workgroupUid:ye,agentUid:ve,orgUid:null==we?void 0:we.uid},e.next=4,(0,ee.RU)(t);case 4:s=e.sent,console.log("queryStatisticServicesByOrg response",s,t),200===s.code?d.yw.destroy():(d.yw.destroy(),d.yw.error(s.message));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){ze(),He()}),[]),(0,v.useEffect)((function(){Ne()}),[xe,ve,ye]),(0,v.useEffect)((function(){Ge()}),[Ie,xe,ve,ye]),(0,v.useEffect)((function(){Ne()}),[c,h]),(0,ie.jsxs)("div",{style:{padding:16},children:[(0,ie.jsx)(Z.Z,{style:{marginBottom:16},children:(0,ie.jsxs)(w.Z,{direction:"vertical",style:{width:"100%"},children:[(0,ie.jsxs)(w.Z,{wrap:!0,children:[(0,ie.jsx)(M.ZP.Group,{value:le,onChange:function(e){return de(e.target.value)},children:We.map((function(e){return(0,ie.jsx)(M.ZP.Button,{value:e.value,children:e.label},e.value)}))}),"custom"===le&&(0,ie.jsx)(re,{value:[c,h],onChange:function(e){m(e[0]),$(e[1])}})]}),(0,ie.jsxs)(w.Z,{wrap:!0,children:[(0,ie.jsxs)(y.Z,{placeholder:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.type"}),style:{width:200},value:xe,onChange:function(e){return me(e)},children:[(0,ie.jsx)(ne,{value:x.AOk,children:(0,ie.jsx)(f.FormattedMessage,{id:"i18n.all"})}),(0,ie.jsx)(ne,{value:x.pHh,children:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.agent"})}),(0,ie.jsx)(ne,{value:x.ti4,children:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.workgroup"})})]}),xe===x.pHh&&(0,ie.jsx)(y.Z,{placeholder:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.agent"}),style:{width:200},value:ve,onChange:function(e){return pe(e)},children:null===(e=be.data)||void 0===e||null===(e=e.content)||void 0===e?void 0:e.map((function(e){return(0,ie.jsx)(ne,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),xe===x.ti4&&(0,ie.jsx)(y.Z,{placeholder:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.department"}),style:{width:200},value:ye,onChange:function(e){return Ze(e)},children:null===(t=Te.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return(0,ie.jsx)(ne,{value:null==e?void 0:e.uid,children:i(null==e?void 0:e.nickname)},null==e?void 0:e.uid)}))}),(0,ie.jsx)(b.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.export"}),children:(0,ie.jsx)(j.ZP,{icon:(0,ie.jsx)(O.Z,{}),onClick:function(){var e=localStorage.getItem(x.LA8);window.open((0,se.kG)()+"/api/v1/service/statistic/export?"+new URLSearchParams({type:xe,statisticStartTime:null==c?void 0:c.format("YYYY-MM-DD 00:00:00"),statisticEndTime:null==h?void 0:h.format("YYYY-MM-DD 23:59:59"),workgroupUid:ye,agentUid:ve,orgUid:null==we?void 0:we.uid,accessToken:e||""}).toString())},children:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.export"})})}),(0,ie.jsx)(b.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.refresh"}),children:(0,ie.jsx)(j.ZP,{icon:(0,ie.jsx)(C.Z,{}),onClick:function(){return Ne()},children:(0,ie.jsx)(f.FormattedMessage,{id:"ticket.statistic.filter.refresh"})})}),!1]})]})}),(0,ie.jsxs)(F.Z,{gutter:24,children:[(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.onlineAgentCount"}),value:(null==Re?void 0:Re.onlineAgentCount)||0,prefix:(0,ie.jsx)(R.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.offlineAgentCount"}),value:(null==Re?void 0:Re.offlineAgentCount)||0,prefix:(0,ie.jsx)(P.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.queuingThreadCount"}),value:(null==Re?void 0:Re.queuingThreadCount)||0,prefix:(0,ie.jsx)(R.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.person"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.currentThreadCount"}),value:(null==Re?void 0:Re.currentThreadCount)||0,prefix:(0,ie.jsx)(Y.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.session"})})})})]}),(0,ie.jsxs)(F.Z,{gutter:24,style:{marginTop:24},children:[(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.maxResponseTime"}),value:(null==Re?void 0:Re.maxResponseTime)||0,prefix:(0,ie.jsx)(A.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.minResponseTime"}),value:(null==Re?void 0:Re.minResponseTime)||0,prefix:(0,ie.jsx)(A.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.avgFirstResponseTime"}),value:(null==Re?void 0:Re.avgFirstResponseTime)||0,prefix:(0,ie.jsx)(A.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.seconds"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.avgWaitingTime"}),value:(null==Re?void 0:Re.avgWaitingTime)||0,prefix:(0,ie.jsx)(A.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.seconds"})})})})]}),(0,ie.jsxs)(F.Z,{gutter:24,style:{marginTop:24},children:[(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.totalIncomingThreads"}),value:(null==Re?void 0:Re.totalIncomingThreads)||0,prefix:(0,ie.jsx)(Y.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.acceptedThreadCount"}),value:(null==Re?void 0:Re.acceptedThreadCount)||0,prefix:(0,ie.jsx)(I.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.acceptRate"}),value:(null==Re?void 0:Re.acceptRate)||0,prefix:(0,ie.jsx)(I.Z,{}),suffix:"%"})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.firstSolveRate"}),value:(null==Re?void 0:Re.firstSolveRate)||0,prefix:(0,ie.jsx)(q.Z,{}),suffix:"%"})})})]}),(0,ie.jsxs)(F.Z,{gutter:24,style:{marginTop:24},children:[(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.robotThreadCount"}),value:(null==Re?void 0:Re.robotThreadCount)||0,prefix:(0,ie.jsx)(E.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.robotToHumanCount"}),value:(null==Re?void 0:Re.robotToHumanCount)||0,prefix:(0,ie.jsx)(U.Z,{}),suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.session"})})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.robotSolveRate"}),value:(null==Re?void 0:Re.robotSolveRate)||0,prefix:(0,ie.jsx)(I.Z,{}),suffix:"%"})})}),(0,ie.jsx)(k.Z,{xl:6,lg:12,md:12,sm:24,xs:24,children:(0,ie.jsx)(Z.Z,{bordered:!1,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.transferRate"}),value:(null==Re?void 0:Re.transferRate)||0,prefix:(0,ie.jsx)(D.Z,{}),suffix:"%"})})})]}),(0,ie.jsxs)(Z.Z,{style:{marginTop:24},children:[(0,ie.jsx)(ae,{level:4,children:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.sessionDuration"})}),(0,ie.jsxs)(F.Z,{gutter:24,children:[(0,ie.jsx)(k.Z,{span:8,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.duration.within5min"}),value:(null==Re?void 0:Re.durationWithin5Min)||0,suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.sessions"})})}),(0,ie.jsx)(k.Z,{span:8,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.duration.within15min"}),value:(null==Re?void 0:Re.durationWithin15Min)||0,suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.sessions"})})}),(0,ie.jsx)(k.Z,{span:8,children:(0,ie.jsx)(T.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.duration.over15min"}),value:(null==Re?void 0:Re.durationOver15Min)||0,suffix:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.unit.sessions"})})})]})]}),(0,ie.jsxs)(F.Z,{gutter:[16,16],style:{marginTop:24},children:[(0,ie.jsx)(k.Z,{span:12,children:(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.trend"}),extra:(0,ie.jsxs)(M.ZP.Group,{defaultValue:"day",children:[(0,ie.jsx)(M.ZP.Button,{value:"day",children:"日"}),(0,ie.jsx)(M.ZP.Button,{value:"week",children:"周"}),(0,ie.jsx)(M.ZP.Button,{value:"month",children:"月"})]}),children:(0,ie.jsx)(_.Z,{data:[{date:"2024-01-01",type:"总会话数",count:120},{date:"2024-01-02",type:"总会话数",count:132},{date:"2024-01-01",type:"已评价",count:89},{date:"2024-01-02",type:"已评价",count:98}],xField:"date",yField:"count",seriesField:"type",animation:{appear:{duration:1e3}}})})}),(0,ie.jsx)(k.Z,{span:12,children:(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.distribution"}),children:(0,ie.jsx)(K.Z,{data:Be,angleField:"value",colorField:"type",radius:.8,label:{style:{fontSize:12,fill:"#666"},autoRotate:!0},tooltip:{showTitle:!1,formatter:function(e){return{name:e.type||"",value:e.value?"".concat(e.value,"人"):""}}},legend:{position:"bottom",itemWidth:100},interactions:[{type:"element-active"}],animation:{appear:{duration:1e3}},height:300})})})]}),(0,ie.jsxs)(F.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(k.Z,{span:12,children:(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.peakHours"}),children:(0,ie.jsx)(Q.Z,{data:[{hour:"09:00",day:"周一",value:28},{hour:"10:00",day:"周一",value:35}],xField:"hour",yField:"day",colorField:"value",animation:!1,legend:{position:"right"},tooltip:{title:"会话数",formatter:function(e){return{name:"".concat(e.day," ").concat(e.hour),value:e.value}}}})})}),(0,ie.jsx)(k.Z,{span:12,children:(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.ranking"}),extra:(0,ie.jsxs)(y.Z,{defaultValue:"sessions",style:{width:120},children:[(0,ie.jsx)(ne,{value:"sessions",children:"会话量"}),(0,ie.jsx)(ne,{value:"satisfaction",children:"满意度"}),(0,ie.jsx)(ne,{value:"response",children:"响应时间"})]}),children:(0,ie.jsx)(J.Z,{data:[{agent:"客服A",sessions:156,satisfaction:4.8},{agent:"客服B",sessions:142,satisfaction:4.7}],xField:"agent",yField:"sessions",label:{position:"top"},animation:{appear:{duration:1e3}}})})})]}),(0,ie.jsxs)(F.Z,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(k.Z,{span:12,children:(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.comparison"}),extra:(0,ie.jsxs)(w.Z,{children:[(0,ie.jsxs)(y.Z,{defaultValue:"sessions",style:{width:120},children:[(0,ie.jsx)(ne,{value:"sessions",children:"会话量"}),(0,ie.jsx)(ne,{value:"satisfaction",children:"满意度"}),(0,ie.jsx)(ne,{value:"response",children:"响应时间"})]}),(0,ie.jsxs)(M.ZP.Group,{defaultValue:"mom",children:[(0,ie.jsx)(M.ZP.Button,{value:"mom",children:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.comparison.mom"})}),(0,ie.jsx)(M.ZP.Button,{value:"yoy",children:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.comparison.yoy"})})]})]}),children:(0,ie.jsx)(J.Z,{data:[{date:"2024-01",type:"本期",metric:"会话量",value:1200},{date:"2024-01",type:"环比",metric:"会话量",value:1150},{date:"2024-01",type:"同比",metric:"会话量",value:980}],xField:"type",yField:"value",seriesField:"metric",isGroup:!0,columnStyle:{radius:[4,4,0,0]},label:{position:"top"}})})}),(0,ie.jsx)(k.Z,{span:12,children:(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.quality"}),children:(0,ie.jsx)(X.Z,{data:[[{date:"2024-01-01",value:92,type:"实际"},{date:"2024-01-02",value:93,type:"实际"},{date:"2024-01-03",value:95,type:"实际"},{date:"2024-01-04",value:94,type:"实际"},{date:"2024-01-05",value:96,type:"实际"}],[{date:"2024-01-01",target:95},{date:"2024-01-02",target:95},{date:"2024-01-03",target:95},{date:"2024-01-04",target:95},{date:"2024-01-05",target:95}]],xField:"date",yField:["value","target"],geometryOptions:[{geometry:"column",columnStyle:{radius:[4,4,0,0]}},{geometry:"line",lineStyle:{lineWidth:2}}],legend:{itemName:{formatter:function(e){return"value"===e?s.formatMessage({id:"service.statistic.quality.actual"}):s.formatMessage({id:"service.statistic.quality.target"})}}},yAxis:{value:{min:80,max:100},target:{min:80,max:100}},tooltip:{formatter:function(e){return{name:e.target?s.formatMessage({id:"service.statistic.quality.target"}):s.formatMessage({id:"service.statistic.quality.actual"}),value:e.target||e.value}}},animation:{appear:{duration:1e3}}})})})]}),(0,ie.jsx)(Z.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.performance"}),style:{marginTop:24},extra:(0,ie.jsxs)(w.Z,{children:[(0,ie.jsx)(b.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.export.excel"}),children:(0,ie.jsx)(j.ZP,{icon:(0,ie.jsx)(W.Z,{})})}),(0,ie.jsx)(b.Z,{title:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.export.pdf"}),children:(0,ie.jsx)(j.ZP,{icon:(0,ie.jsx)(B.Z,{})})})]}),children:(0,ie.jsx)(S.Z,{columns:Ve,dataSource:[],scroll:{x:!0},size:"small",locale:{emptyText:(0,ie.jsx)(f.FormattedMessage,{id:"service.statistic.tips.noData"})}})})]})},le=function(){var e=(0,f.useIntl)(),t=(0,f.useNavigate)(),s=((0,f.useModel)("@@initialState").initialState||{}).userInfo,i=(0,u.u)((function(e){return e.setCurrentOrg})),r=(0,v.useState)(!1),o=l()(r,2),h=o[0],y=o[1],Z=(0,v.useState)(""),w=l()(Z,2),M=w[0],b=w[1],F=(0,v.useState)(!1),k=l()(F,2),T=k[0],S=k[1],O=(0,v.useState)(!1),C=l()(O,2),R=C[0],P=C[1],Y=function(){var e=n()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=s){e.next=2;break}return e.abrupt("return");case 2:if(null!==(null==s?void 0:s.currentOrganization)&&void 0!==(null==s?void 0:s.currentOrganization)){e.next=6;break}return console.log("before initOrganization",s),(null==s?void 0:s.platform)===x.Ogg&&P(!0),e.abrupt("return");case 6:console.log("after initOrganization"),i(null==s?void 0:s.currentOrganization);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=n()(a()().mark((function t(){var r,n,o;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==M){t.next=3;break}return d.yw.error(e.formatMessage({id:"welcome.message.org.name.required"})),t.abrupt("return");case 3:return y(!0),d.yw.loading(e.formatMessage({id:"welcome.message.org.creating"})),r=null!=s&&s.mobile?null==s?void 0:s.mobile:null==s?void 0:s.email,n={name:M,code:r,logo:"https://www.weiyuai.cn/logo.png",description:M+"description"},t.prev=7,t.next=10,(0,c.Kq)(n);case 10:200===(o=t.sent).code?(y(!1),i(o.data),d.yw.destroy(),d.yw.success(e.formatMessage({id:"welcome.message.create.success"})),P(!1),window.location.reload()):(y(!1),d.yw.destroy(),d.yw.error(e.formatMessage({id:"welcome.message.create.failed"}))),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(7),y(!1),d.yw.destroy(),d.yw.error(e.formatMessage({id:"welcome.message.create.failed"}));case 19:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(){return t.apply(this,arguments)}}();return(0,v.useEffect)((function(){Y(),null!=s&&s.emailVerified||null!=s&&s.mobileVerified||(d.yw.warning(e.formatMessage({id:"welcome.message.verify.email"})),d.yw.warning(e.formatMessage({id:"welcome.message.verify.mobile"})),t("/setting/certification")),(0,m.Bc)()&&console.log("weiyuaiSaas")}),[s]),(0,ie.jsxs)("div",{children:[(0,ie.jsx)(oe,{}),(0,ie.jsxs)(p.Z,{title:e.formatMessage({id:"welcome.modal.title"}),closable:!1,open:R,onOk:A,onCancel:function(){d.yw.error(e.formatMessage({id:"welcome.message.org.required"}))},maskClosable:!1,footer:[(0,ie.jsx)(j.ZP,{type:"primary",onClick:function(){P(!1)},disabled:!0,children:e.formatMessage({id:"welcome.modal.join"})},"join"),(0,ie.jsx)(j.ZP,{type:"primary",loading:h,onClick:function(){T?A():(S(!0),y(!1))},children:e.formatMessage({id:"welcome.modal.create"})},"create")],children:[(0,ie.jsx)("p",{children:e.formatMessage({id:"welcome.modal.description"})}),T&&(0,ie.jsx)(g.Z,{placeholder:e.formatMessage({id:"welcome.modal.input.placeholder"}),value:M,onChange:function(e){return b(e.target.value)},onPressEnter:A})]})]})}},53530:function(e,t,s){s.d(t,{Z:function(){return Z}});var i=s(18960),a=s(31695),r=s(27710),n=s(44194),o=s(51865),l=s.n(o),d=s(24255),c=s(43037),u=s(37167),x=s(30829),m=s(78660),f=s(59348),g=s(6750),v=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s};var p=(0,c.i)((e=>{const{prefixCls:t,className:s,closeIcon:i,closable:a,type:r,title:o,children:c,footer:p}=e,j=v(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:h}=n.useContext(u.E_),y=h(),Z=t||h("modal"),w=(0,x.Z)(y),[M,b,F]=(0,g.ZP)(Z,w),k=`${Z}-confirm`;let T={};return T=r?{closable:null!=a&&a,title:"",footer:"",children:n.createElement(m.O,Object.assign({},e,{prefixCls:Z,confirmPrefixCls:k,rootPrefixCls:y,content:c}))}:{closable:null==a||a,title:o,footer:null!==p&&n.createElement(f.$,Object.assign({},e)),children:c},M(n.createElement(d.s,Object.assign({prefixCls:Z,className:l()(b,`${Z}-pure-panel`,r&&k,r&&`${k}-${r}`,s,F,w)},j,{closeIcon:(0,f.b)(Z,i),closable:a},T)))})),j=s(75807);function h(e){return(0,i.ZP)((0,i.uW)(e))}const y=r.Z;y.useModal=j.Z,y.info=function(e){return(0,i.ZP)((0,i.cw)(e))},y.success=function(e){return(0,i.ZP)((0,i.vq)(e))},y.error=function(e){return(0,i.ZP)((0,i.AQ)(e))},y.warning=h,y.warn=h,y.confirm=function(e){return(0,i.ZP)((0,i.Au)(e))},y.destroyAll=function(){for(;a.Z.length;){const e=a.Z.pop();e&&e()}},y.config=i.ai,y._InternalPanelDoNotUseOrYouWillBeFired=p;var Z=y}}]);