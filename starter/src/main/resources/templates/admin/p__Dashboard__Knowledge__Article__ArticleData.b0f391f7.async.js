"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5957],{11475:function(X,A,e){e.d(A,{Z:function(){return D}});var p=e(1413),o=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},m=g,j=e(89099),P=function(i,W){return o.createElement(j.Z,(0,p.Z)((0,p.Z)({},i),{},{ref:W,icon:m}))},M=o.forwardRef(P),D=M},55287:function(X,A,e){var p=e(1413),o=e(67294),g=e(5717),m=e(89099),j=function(D,x){return o.createElement(m.Z,(0,p.Z)((0,p.Z)({},D),{},{ref:x,icon:g.Z}))},P=o.forwardRef(j);A.Z=P},64317:function(X,A,e){var p=e(1413),o=e(91),g=e(22270),m=e(67294),j=e(66758),P=e(24809),M=e(85893),D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],x=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],i=function(f,h){var O=f.fieldProps,u=f.children,t=f.params,I=f.proFieldProps,C=f.mode,S=f.valueEnum,K=f.request,N=f.showSearch,b=f.options,n=(0,o.Z)(f,D),a=(0,m.useContext)(j.Z);return(0,M.jsx)(P.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,g.h)(S),request:K,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({options:b,mode:C,showSearch:N,getPopupContainer:a.getPopupContainer},O),ref:h,proFieldProps:I},n),{},{children:u}))},W=m.forwardRef(function(d,f){var h=d.fieldProps,O=d.children,u=d.params,t=d.proFieldProps,I=d.mode,C=d.valueEnum,S=d.request,K=d.options,N=(0,o.Z)(d,x),b=(0,p.Z)({options:K,mode:I||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},h),n=(0,m.useContext)(j.Z);return(0,M.jsx)(P.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,g.h)(C),request:S,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({getPopupContainer:n.getPopupContainer},b),ref:f,proFieldProps:t},N),{},{children:O}))}),R=m.forwardRef(i),U=W,T=R;T.SearchSelect=U,T.displayName="ProFormComponent",A.Z=T},5966:function(X,A,e){var p=e(97685),o=e(1413),g=e(91),m=e(21770),j=e(8232),P=e(55241),M=e(97435),D=e(67294),x=e(24809),i=e(85893),W=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],U="text",T=function(u){var t=u.fieldProps,I=u.proFieldProps,C=(0,g.Z)(u,W);return(0,i.jsx)(x.Z,(0,o.Z)({valueType:U,fieldProps:t,filedConfig:{valueType:U},proFieldProps:I},C))},d=function(u){var t=(0,m.Z)(u.open||!1,{value:u.open,onChange:u.onOpenChange}),I=(0,p.Z)(t,2),C=I[0],S=I[1];return(0,i.jsx)(j.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(N){var b,n=N.getFieldValue(u.name||[]);return(0,i.jsx)(P.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return S(r)},content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(b=u.statusRender)===null||b===void 0?void 0:b.call(u,n),u.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:u.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},u.popoverProps),{},{open:C,children:u.children}))}})},f=function(u){var t=u.fieldProps,I=u.proFieldProps,C=(0,g.Z)(u,R),S=(0,D.useState)(!1),K=(0,p.Z)(S,2),N=K[0],b=K[1];return t!=null&&t.statusRender&&C.name?(0,i.jsx)(d,{name:C.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:N,onOpenChange:b,children:(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,M.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(a){var r;t==null||(r=t.onBlur)===null||r===void 0||r.call(t,a),b(!1)},onClick:function(a){var r;t==null||(r=t.onClick)===null||r===void 0||r.call(t,a),b(!0)}}),proFieldProps:I,filedConfig:{valueType:U}},C))})}):(0,i.jsx)(x.Z,(0,o.Z)({valueType:"password",fieldProps:t,proFieldProps:I,filedConfig:{valueType:U}},C))},h=T;h.Password=f,h.displayName="ProFormComponent",A.Z=h},90672:function(X,A,e){var p=e(1413),o=e(91),g=e(67294),m=e(24809),j=e(85893),P=["fieldProps","proFieldProps"],M=function(x,i){var W=x.fieldProps,R=x.proFieldProps,U=(0,o.Z)(x,P);return(0,j.jsx)(m.Z,(0,p.Z)({ref:i,valueType:"textarea",fieldProps:W,proFieldProps:R},U))};A.Z=g.forwardRef(M)},85022:function(X,A,e){e.d(A,{Az:function(){return x},Xc:function(){return U},jX:function(){return d},tu:function(){return W}});var p=e(15009),o=e.n(p),g=e(97857),m=e.n(g),j=e(99289),P=e.n(j),M=e(85615),D=e(86745);function x(h){return i.apply(this,arguments)}function i(){return i=P()(o()().mark(function h(O){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/v1/article/query/org",{method:"GET",params:m()(m()({},O),{},{client:M.bVn})}));case 1:case"end":return t.stop()}},h)})),i.apply(this,arguments)}function W(h){return R.apply(this,arguments)}function R(){return R=P()(o()().mark(function h(O){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/v1/article/create",{method:"POST",data:m()(m()({},O),{},{client:M.bVn})}));case 1:case"end":return t.stop()}},h)})),R.apply(this,arguments)}function U(h){return T.apply(this,arguments)}function T(){return T=P()(o()().mark(function h(O){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/v1/article/update",{method:"POST",data:m()(m()({},O),{},{client:M.bVn})}));case 1:case"end":return t.stop()}},h)})),T.apply(this,arguments)}function d(h){return f.apply(this,arguments)}function f(){return f=P()(o()().mark(function h(O){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/v1/article/delete",{method:"POST",data:m()(m()({},O),{},{client:M.bVn})}));case 1:case"end":return t.stop()}},h)})),f.apply(this,arguments)}},28765:function(X,A,e){e.r(A),e.d(A,{default:function(){return fe}});var p=e(77154),o=e(21612),g=e(85615),m=e(52670),j=e(97857),P=e.n(j),M=e(13769),D=e.n(M),x=e(15009),i=e.n(x),W=e(99289),R=e.n(W),U=e(5574),T=e.n(U),d=e(80049),f=e(85022),h=e(87676),O=e(55287),u=e(51042),t=e(57482),I=e(86738),C=e(14726),S=e(67294),K=e(89102),N=e(34994),b=e(64317),n=e(5966),a=e(90672),r=e(8232),s=e(85265),Z=e(42075),l=e(85893),ae=function(c){var L=c.isEdit,_=c.helpdoc,re=c.open,k=c.onClose,Ee=c.onSubmit,ge=r.Z.useForm(),oe=T()(ge,1),q=oe[0],se=(0,h.u)(function(V){return V.currentOrg}),he=(0,K.v)(function(V){return V.categorySelectOptions});(0,S.useEffect)(function(){L?q.setFieldsValue({type:_==null?void 0:_.type,title:_==null?void 0:_.title,content:_==null?void 0:_.contentHtml}):q.resetFields()},[re]);var ie=function(v){console.log("category selected ".concat(v))},Pe=function(v){console.log("type selected ".concat(v))},ue=function(){console.log("handleSubmit"),q.validateFields().then(function(v){console.log(v),Ee(P()(P()(P()({},_),v),{},{orgUid:se==null?void 0:se.uid}))}).catch(function(v){console.log("Form errors:",v),d.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.Z,{title:L?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:k,open:re,extra:(0,l.jsxs)(Z.Z,{children:[(0,l.jsx)(C.ZP,{onClick:k,children:"\u53D6\u6D88"}),(0,l.jsx)(C.ZP,{onClick:ue,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,l.jsxs)(N.A,{form:q,initialValues:P()({},_),submitter:{render:function(){return null}},children:[(0,l.jsx)(b.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:he,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:ie}}),(0,l.jsx)(b.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:g.PYi},{label:"\u56FE\u7247",value:g.Qm,disabled:!0},{label:"\u89C6\u9891",value:g.tVi,disabled:!0},{label:"\u97F3\u9891",value:g.Yu1,disabled:!0},{label:"\u6587\u4EF6",value:g.Qn,disabled:!0}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:Pe}}),(0,l.jsx)(n.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,l.jsx)(a.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},J=ae,Y=e(86745),ne=e(38302),de=["current"],ce=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,l.jsx)(Y.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"title",copyable:!0},{title:(0,l.jsx)(Y.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,l.jsx)(Y.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",hideInSearch:!0,width:180}],$=function(){var c=(0,Y.useIntl)(),L=(0,S.useRef)(),_=(0,S.useState)(!0),re=T()(_,2),k=re[0],Ee=re[1],ge=(0,S.useState)(),oe=T()(ge,2),q=oe[0],se=oe[1],he=(0,S.useState)(!1),ie=T()(he,2),Pe=ie[0],ue=ie[1],V=(0,h.u)(function(y){return y.currentOrg}),v=(0,ne.j)(function(y){return y.currentKbase}),Q=(0,K.v)(function(y){return y.currentCategory}),_e=function(F){console.log("handlePreviewArticle",F),window.open("".concat("","/article/").concat(v==null?void 0:v.uid,"/").concat(F==null?void 0:F.uid))},Me=function(){var y=R()(i()().mark(function F(E){var w;return i()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log(E),G.next=3,(0,f.jX)(E);case 3:w=G.sent,console.log("delete response:",w),w.code===200?(L==null||L.current.reload(),d.yw.success(c.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):d.yw.error(c.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return G.stop()}},F)}));return function(E){return y.apply(this,arguments)}}(),Oe=[].concat(ce,[{title:c.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:150,render:function(F,E,w,H){return[(0,l.jsx)("a",{onClick:function(){Ce()},children:c.formatMessage({id:"edit",defaultMessage:"Edit"})},"edit"),(0,l.jsx)("a",{onClick:function(){_e(E)},children:c.formatMessage({id:"preview",defaultMessage:"Preview"})},"preview"),(0,l.jsx)(I.Z,{title:c.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(c.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(E==null?void 0:E.title,"\u3011\uFF1F"),onConfirm:function(){return Me(E)},okText:c.formatMessage({id:"ok"}),cancelText:c.formatMessage({id:"cancel"}),children:(0,l.jsx)(C.ZP,{size:"small",type:"link",danger:!0,children:c.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}]),je=function(){var y=R()(i()().mark(function F(E){var w,H;return i()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(console.log("handleSubmitDrawer",E),k?d.yw.loading(c.formatMessage({id:"updating"})):d.yw.loading(c.formatMessage({id:"creating"})),!k){B.next=8;break}return B.next=5,(0,f.Xc)(E);case 5:B.t0=B.sent,B.next=11;break;case 8:return B.next=10,(0,f.tu)(E);case 10:B.t0=B.sent;case 11:w=B.t0,console.log("createArticle response:",E,w),w.code===200?(d.yw.destroy(),d.yw.loading(c.formatMessage({id:"create.success"})),ue(!1),(H=L.current)===null||H===void 0||H.reloadAndRest()):(d.yw.destroy(),d.yw.error(w.message));case 14:case"end":return B.stop()}},F)}));return function(E){return y.apply(this,arguments)}}(),De=function(){ue(!1)};(0,S.useEffect)(function(){var y;(y=L.current)===null||y===void 0||y.reloadAndRest()},[v,Q]);var Se=function(){console.log("handlePreviewKbase"),window.open("".concat("","/kbase/").concat(v==null?void 0:v.uid))},Ce=function(){console.log("handleCreateArticle"),window.open("/admin/doceditor")},xe=(0,S.useMemo)(function(){return(v==null?void 0:v.type)===g.bjp?(v==null?void 0:v.uid)==="":!0},[v]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.Z,{columns:Oe,actionRef:L,cardBordered:!0,request:function(){var y=R()(i()().mark(function F(E,w,H){var G,B,ye,ee;return i()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return console.log("request:",E,w,H),d.yw.loading(c.formatMessage({id:"loading",defaultMessage:"Loading"})),G=E.current,B=D()(E,de),ye=P()({pageNumber:E.current-1,categoryUid:(Q==null?void 0:Q.uid)==="all"?"":Q==null?void 0:Q.uid,kbUid:v==null?void 0:v.uid,orgUid:V==null?void 0:V.uid},B),te.next=6,(0,f.Az)(ye);case 6:return ee=te.sent,console.log("getAllArticles response:",ye,ee),d.yw.destroy(),ee.code===200||d.yw.error(ee.message),te.abrupt("return",{data:ee.data.content,success:!0,total:ee.data.totalElements});case 11:case"end":return te.stop()}},F)}));return function(F,E,w){return y.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(F){console.log("page:",F)}},dateFormatter:"string",headerTitle:"\u5E2E\u52A9\u6587\u6863",toolBarRender:function(){return[(0,l.jsx)(C.ZP,{icon:(0,l.jsx)(O.Z,{}),type:"primary",onClick:Se,disabled:xe,children:c.formatMessage({id:"preview",defaultMessage:"Preview"})},"button"),(0,l.jsx)(C.ZP,{icon:(0,l.jsx)(u.Z,{}),type:"primary",onClick:Ce,disabled:xe,children:c.formatMessage({id:"create",defaultMessage:"Create"})},"button")]}}),(0,l.jsx)(J,{isEdit:k,open:Pe,helpdoc:q,onClose:De,onSubmit:je})]})},pe=$,ve=o.Z.Sider,z=o.Z.Content,me=function(){var c=(0,p.Z)(),L=c.leftSiderStyle,_=c.contentStyle;return(0,l.jsx)("div",{children:(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(ve,{style:L,children:(0,l.jsx)(m.Z,{type:g.bjp})}),(0,l.jsx)(o.Z,{children:(0,l.jsx)(z,{style:_,children:(0,l.jsx)(pe,{})})})]})})},fe=me},86250:function(X,A,e){e.d(A,{Z:function(){return b}});var p=e(67294),o=e(93967),g=e.n(o),m=e(98423),j=e(98065),P=e(53124),M=e(27036),D=e(45503);const x=["wrap","nowrap","wrap-reverse"],i=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],W=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],R=(n,a)=>{const r=a.wrap===!0?"wrap":a.wrap;return{[`${n}-wrap-${r}`]:r&&x.includes(r)}},U=(n,a)=>{const r={};return W.forEach(s=>{r[`${n}-align-${s}`]=a.align===s}),r[`${n}-align-stretch`]=!a.align&&!!a.vertical,r},T=(n,a)=>{const r={};return i.forEach(s=>{r[`${n}-justify-${s}`]=a.justify===s}),r};function d(n,a){return g()(Object.assign(Object.assign(Object.assign({},R(n,a)),U(n,a)),T(n,a)))}var f=d;const h=n=>{const{componentCls:a}=n;return{[a]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},O=n=>{const{componentCls:a}=n;return{[a]:{"&-gap-small":{gap:n.flexGapSM},"&-gap-middle":{gap:n.flexGap},"&-gap-large":{gap:n.flexGapLG}}}},u=n=>{const{componentCls:a}=n,r={};return x.forEach(s=>{r[`${a}-wrap-${s}`]={flexWrap:s}}),r},t=n=>{const{componentCls:a}=n,r={};return W.forEach(s=>{r[`${a}-align-${s}`]={alignItems:s}}),r},I=n=>{const{componentCls:a}=n,r={};return i.forEach(s=>{r[`${a}-justify-${s}`]={justifyContent:s}}),r},C=()=>({});var S=(0,M.I$)("Flex",n=>{const{paddingXS:a,padding:r,paddingLG:s}=n,Z=(0,D.TS)(n,{flexGapSM:a,flexGap:r,flexGapLG:s});return[h(Z),O(Z),u(Z),t(Z),I(Z)]},C,{resetStyle:!1}),K=function(n,a){var r={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&a.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,s=Object.getOwnPropertySymbols(n);Z<s.length;Z++)a.indexOf(s[Z])<0&&Object.prototype.propertyIsEnumerable.call(n,s[Z])&&(r[s[Z]]=n[s[Z]]);return r},b=p.forwardRef((n,a)=>{const{prefixCls:r,rootClassName:s,className:Z,style:l,flex:ae,gap:J,children:Y,vertical:ne=!1,component:de="div"}=n,ce=K(n,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:$,direction:pe,getPrefixCls:ve}=p.useContext(P.E_),z=ve("flex",r),[me,fe,le]=S(z),c=ne!=null?ne:$==null?void 0:$.vertical,L=g()(Z,s,$==null?void 0:$.className,z,fe,le,f(z,n),{[`${z}-rtl`]:pe==="rtl",[`${z}-gap-${J}`]:(0,j.n)(J),[`${z}-vertical`]:c}),_=Object.assign(Object.assign({},$==null?void 0:$.style),l);return ae&&(_.flex=ae),J&&!(0,j.n)(J)&&(_.gap=J),me(p.createElement(de,Object.assign({ref:a,className:L,style:_},(0,m.Z)(ce,["justify","wrap","align"])),Y))})}}]);
