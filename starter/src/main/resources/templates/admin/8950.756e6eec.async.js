"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8950],{67560:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(24170),n(72614),n(1902),n(95490),n(55735),n(30921),n(44194),n(31549)},28578:function(e,t,n){var i=n(90819),s=n.n(i),o=n(73193),u=n.n(o),r=n(89933),l=n.n(r),a=n(45332),d=n.n(a),c=n(86803),v=n(24170),g=n(72614),f=n(1902),m=n(95490),p=n(55735),S=n(69169),w=n(48708),h=n(30921),q=n(44194),k=n(31549);t.Z=function(e){var t=e.type,n=(0,h.useIntl)(),i=S.A.useForm(),o=d()(i,1)[0],r=(0,q.useState)(!1),a=d()(r,2),F=(a[0],a[1],(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}}))),b=F.currentAgent,U=F.setCurrentAgent,y=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),C=y.currentWorkgroup,R=y.setCurrentWorkgroup;(0,q.useEffect)((function(){var e;if(t===p.Njn)o.setFieldValue("showRateBtn",null==b||null===(e=b.serviceSettings)||void 0===e?void 0:e.showRateBtn);else if(t===p.aZD){var n;o.setFieldValue("showRateBtn",null==C||null===(n=C.serviceSettings)||void 0===n?void 0:n.showRateBtn)}}),[b,C]);var x=function(){var e=l()(s()().mark((function e(i){var o,r,l,a,d,f,m,S,w,h,q,k,F,y,x,A,W,j,B,L;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleShowRateSwitchChange:",i),t!==p.Njn){e.next=11;break}return w=u()(u()({},b),{},{serviceSettings:u()(u()({},null==b?void 0:b.serviceSettings),{},{showRateBtn:i,welcomeFaqUids:null==b||null===(o=b.serviceSettings)||void 0===o||null===(o=o.welcomeFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==b||null===(r=b.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null==b||null===(l=b.serviceSettings)||void 0===l||null===(l=l.faqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==b||null===(a=b.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==b||null===(d=b.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==b||null===(f=b.serviceSettings)||void 0===f||null===(f=f.shortcutFaqs)||void 0===f?void 0:f.map((function(e){return e.uid}))}),robotSettings:u()(u()({},b.robotSettings),{},{robotUid:null==b||null===(m=b.robotSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid}),messageLeaveSettings:u()(u()({},b.messageLeaveSettings),{},{worktimeUids:null==b||null===(S=b.messageLeaveSettings)||void 0===S||null===(S=S.worktimes)||void 0===S?void 0:S.map((function(e){return e.uid}))}),autoReplySettings:u()({},b.autoReplySettings)}),console.log("agentObject:",w),e.next=6,(0,v.sE)(w);case 6:h=e.sent,console.log("updateAgent response:",h),200===h.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),U(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=19;break;case 11:if(t!==p.aZD){e.next=19;break}return B=u()(u()({},C),{},{serviceSettings:u()(u()({},C.serviceSettings),{},{showRateBtn:i,welcomeFaqUids:null==C||null===(q=C.serviceSettings)||void 0===q||null===(q=q.welcomeFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),quickFaqUids:null===(k=C.serviceSettings)||void 0===k||null===(k=k.quickFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),faqUids:null==C||null===(F=C.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==C||null===(y=C.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null===(x=C.serviceSettings)||void 0===x||null===(x=x.hotFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),shortcutFaqUids:null==C||null===(A=C.serviceSettings)||void 0===A||null===(A=A.shortcutFaqs)||void 0===A?void 0:A.map((function(e){return e.uid}))}),robotSettings:u()(u()({},C.robotSettings),{},{robotUid:null==C||null===(W=C.robotSettings)||void 0===W||null===(W=W.robot)||void 0===W?void 0:W.uid}),messageLeaveSettings:u()(u()({},C.messageLeaveSettings),{},{worktimeUids:null==C||null===(j=C.messageLeaveSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:C.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",B),e.next=16,(0,g.W5)(B);case 16:L=e.sent,console.log("updateWorkGroup response:",L),200===L.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),R(L.data)):(c.yw.destroy(),c.yw.error(L.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(S.A,{form:o,submitter:{render:!1},children:[(0,k.jsx)(w.Z,{width:"md",name:"showRateBtn",label:n.formatMessage({id:"rate.show.button"}),tooltip:n.formatMessage({id:"rate.show.button.tooltip"}),fieldProps:{onChange:x}}),!1]})})}}}]);