"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7193],{16303:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(73193),r=a.n(n),s=a(84176),d=a.n(s),i=a(90819),o=a.n(i),u=a(89933),l=a.n(u),c=a(45332),f=a.n(c),p=a(86803),g=a(30921);function m(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/v1/upload/query/org",{method:"GET",params:r()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/v1/upload/delete",{method:"POST",data:r()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=a(40612),y=(a(44521),a(55735),a(72381)),v=a(61355),k=a(75365),I=a(28977),S=a.n(I),j=a(44194),T=a(31549),F=["current","pageSize"],b=function(){var e=(0,g.useIntl)(),t=(0,j.useRef)(),a=((0,g.useNavigate)(),(0,j.useState)(1)),n=f()(a,2),s=(n[0],n[1]),i=(0,j.useState)(10),u=f()(i,2),c=(u[0],u[1]),h=(0,w.u)((function(e){return e.currentOrg})),x=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,T.jsx)(g.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"nickname",render:function(e,t){return(0,T.jsx)(T.Fragment,{children:(a=null==t?void 0:t.user,n=JSON.parse(a),null==n?void 0:n.nickname)});var a,n}},{title:(0,T.jsx)(g.FormattedMessage,{id:"fileName",defaultMessage:"fileName"}),dataIndex:"fileName",width:100},{title:(0,T.jsx)(g.FormattedMessage,{id:"fileType",defaultMessage:"fileType"}),dataIndex:"fileType",hideInSearch:!0,width:100},{title:(0,T.jsx)(g.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",width:100,hideInSearch:!0},{title:(0,T.jsx)(g.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",width:100,hideInSearch:!0},{title:(0,T.jsx)(g.FormattedMessage,{id:"client",defaultMessage:"Client"}),dataIndex:"client",width:100,hideInSearch:!0},{title:(0,T.jsx)(g.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",width:180,hideInSearch:!0,render:function(e,t,a,n){return S()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}}],I=function(){var a=l()(o()().mark((function a(n){var r;return o()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),a.next=3,M(n);case 3:r=a.sent,console.log("delete response:",r),200===r.code?(null==t||t.current.reload(),p.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):p.yw.error(e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),b=[].concat(x,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:150,render:function(t,a,n,r){return[(0,T.jsx)("a",{onClick:function(){var e=null==a?void 0:a.fileUrl,t=encodeURIComponent(e);window.open(decodeURIComponent(t))},children:e.formatMessage({id:"open",defaultMessage:"Open"})},"editable"),(0,T.jsx)(v.Z,{title:e.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(e.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(null==a?void 0:a.fileName,"】？"),onConfirm:function(){return I(a)},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"}),children:(0,T.jsx)(k.ZP,{size:"small",type:"link",danger:!0,children:e.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}]);return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(y.Z,{columns:b,actionRef:t,cardBordered:!0,style:{padding:16},request:function(){var e=l()(o()().mark((function e(t,a,n){var i,u,l,f,g;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request:",t,a,n),i=t.current,u=t.pageSize,l=d()(t,F),s(i),c(u),f=r()({pageNumber:i-1,pageSize:u,categoryUid:"",kbUid:"",orgUid:null==h?void 0:h.uid},l),e.next=7,m(f);case 7:return g=e.sent,console.log("getAllUploads response:",g,f),200===g.code||p.yw.error(g.message),e.abrupt("return",{data:g.data.content,success:!0,total:g.data.totalElements});case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:"文档",toolBarRender:function(){return[]}})})}}}]);