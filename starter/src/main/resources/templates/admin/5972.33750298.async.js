"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5972],{63833:function(e,t,n){n.d(t,{$l:function(){return q},JT:function(){return F},gf:function(){return S},lg:function(){return g},p0:function(){return d},s9:function(){return p}});var s=n(90819),o=n.n(s),i=n(73193),r=n.n(i),u=n(89933),a=n.n(u),l=n(77667),c=n(82045);function d(e){return v.apply(this,arguments)}function v(){return(v=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return f.apply(this,arguments)}function f(){return(f=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/create/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return m.apply(this,arguments)}function m(){return(m=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return w.apply(this,arguments)}function w(){return(w=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/update/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return b.apply(this,arguments)}function b(){return(b=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},62639:function(e,t,n){n.d(t,{Yg:function(){return q},kh:function(){return g},pf:function(){return d},y:function(){return p}});var s=n(90819),o=n.n(s),i=n(73193),r=n.n(i),u=n(89933),a=n.n(u),l=n(77667),c=n(82045);function d(e){return v.apply(this,arguments)}function v(){return(v=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return f.apply(this,arguments)}function f(){return(f=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return m.apply(this,arguments)}function m(){return(m=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},440:function(e,t,n){n.d(t,{H:function(){return d}});var s=n(90819),o=n.n(s),i=n(73193),r=n.n(i),u=n(89933),a=n.n(u),l=n(77667),c=n(82045);function d(e){return v.apply(this,arguments)}function v(){return(v=a()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/v1/vip/invoice/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},57545:function(e,t,n){var s=n(90819),o=n.n(s),i=n(73193),r=n.n(i),u=n(89933),a=n.n(u),l=n(45332),c=n.n(l),d=n(89756),v=n(81153),g=n(63833),f=n(43314),p=n(85702),h=n(3245),q=n(61017),m=n(77667),F=n(5728),w=n(31806),S=n(82045),b=n(44194),y=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),s=F.A.useForm(),i=c()(s,1)[0],u=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),l=u.currentRobot,k=u.setCurrentRobot,U=(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),x=U.currentAgent,j=U.setCurrentAgent,M=(0,q.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),C=M.currentWorkgroup,Z=M.setCurrentWorkgroup;(0,b.useEffect)((function(){var e;if(t===m._X4)i.setFieldsValue({showCaptcha:null==l||null===(e=l.serviceSettings)||void 0===e?void 0:e.showCaptcha});else if(t===m.Njn){var n;i.setFieldsValue({showCaptcha:null==x||null===(n=x.serviceSettings)||void 0===n?void 0:n.showCaptcha})}else if(t===m.aZD){var s;i.setFieldsValue({showCaptcha:null==C||null===(s=C.serviceSettings)||void 0===s?void 0:s.showCaptcha})}}),[l,x,C]);var A=function(){var e=a()(o()().mark((function e(s){var i,u,a,c,p,h,q,F,w,S,b,y,U,M,A,R,W,V,P,E,O,G,N,_,H;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleCaptchaSubmit:",s),t!==m._X4){e.next=11;break}return h=r()(r()({},l),{},{serviceSettings:r()(r()({},l.serviceSettings),{},{showCaptcha:s.showCaptcha,faqUids:null==x||null===(i=x.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),quickFaqUids:null==l||null===(u=l.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==l||null===(a=l.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==l||null===(c=l.serviceSettings)||void 0===c||null===(c=c.hotFaqs)||void 0===c?void 0:c.map((function(e){return e.uid})),shortcutFaqUids:null==l||null===(p=l.serviceSettings)||void 0===p||null===(p=p.shortcutFaqs)||void 0===p?void 0:p.map((function(e){return e.uid}))})}),console.log("robotObject:",h),e.next=6,(0,g.$l)(h);case 6:q=e.sent,console.log("updateRobot response:",q),200===q.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),k(q.data)):(d.yw.destroy(),d.yw.error(q.message)),e.next=29;break;case 11:if(t!==m.Njn){e.next=21;break}return A=r()(r()({},x),{},{serviceSettings:r()(r()({},null==x?void 0:x.serviceSettings),{},{showCaptcha:s.showCaptcha,faqUids:null==x||null===(F=x.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),quickFaqUids:null==x||null===(w=x.serviceSettings)||void 0===w||null===(w=w.quickFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==x||null===(S=x.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==x||null===(b=x.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==x||null===(y=x.serviceSettings)||void 0===y||null===(y=y.shortcutFaqs)||void 0===y?void 0:y.map((function(e){return e.uid}))}),robotSettings:r()(r()({},x.robotSettings),{},{robotUid:null==x||null===(U=x.robotSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid}),leaveMsgSettings:r()(r()({},x.leaveMsgSettings),{},{worktimeUids:null==x||null===(M=x.leaveMsgSettings)||void 0===M||null===(M=M.worktimes)||void 0===M?void 0:M.map((function(e){return e.uid}))}),autoReplySettings:r()({},x.autoReplySettings)}),console.log("agentObject:",A),e.next=16,(0,v.sE)(A);case 16:R=e.sent,console.log("updateAgent response:",R),200===R.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),j(R.data)):(d.yw.destroy(),d.yw.error(R.message)),e.next=29;break;case 21:if(t!==m.aZD){e.next=29;break}return _=r()(r()({},C),{},{serviceSettings:r()(r()({},C.serviceSettings),{},{showCaptcha:s.showCaptcha,faqUids:null==x||null===(W=x.serviceSettings)||void 0===W||null===(W=W.faqs)||void 0===W?void 0:W.map((function(e){return e.uid})),quickFaqUids:null===(V=C.serviceSettings)||void 0===V||null===(V=V.quickFaqs)||void 0===V?void 0:V.map((function(e){return e.uid})),guessFaqUids:null==C||null===(P=C.serviceSettings)||void 0===P||null===(P=P.guessFaqs)||void 0===P?void 0:P.map((function(e){return e.uid})),hotFaqUids:null==C||null===(E=C.serviceSettings)||void 0===E||null===(E=E.hotFaqs)||void 0===E?void 0:E.map((function(e){return e.uid})),shortcutFaqUids:null==C||null===(O=C.serviceSettings)||void 0===O||null===(O=O.shortcutFaqs)||void 0===O?void 0:O.map((function(e){return e.uid}))}),robotSettings:r()(r()({},C.robotSettings),{},{robotUid:null==C||null===(G=C.robotSettings)||void 0===G||null===(G=G.robot)||void 0===G?void 0:G.uid}),leaveMsgSettings:r()(r()({},C.leaveMsgSettings),{},{worktimeUids:null==C||null===(N=C.leaveMsgSettings)||void 0===N||null===(N=N.worktimes)||void 0===N?void 0:N.map((function(e){return e.uid}))}),agentUids:C.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",_),e.next=26,(0,f.W5)(_);case 26:H=e.sent,console.log("updateWorkGroup response:",H),200===H.code?(d.yw.destroy(),d.yw.success(n.formatMessage({id:"update.success"})),Z(H.data)):(d.yw.destroy(),d.yw.error(H.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{children:(0,y.jsx)(F.A,{form:i,onFinish:A,children:(0,y.jsx)(w.Z,{width:"md",name:"showCaptcha",label:n.formatMessage({id:"showCaptcha",defaultMessage:"Show Captcha"})})})})}},89875:function(e,t,n){var s=n(73193),o=n.n(s),i=n(90819),r=n.n(i),u=n(89933),a=n.n(u),l=n(45332),c=n.n(l),d=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),q=n(16655),m=n(11984),F=n(5728),w=n(31806),S=n(8091),b=n(82045),y=n(93982),k=n(12265),U=n(72434),x=n(44194),j=n(85702),M=n(61017),C=n(77667),Z=n(81153),A=n(43314),R=n(31549);t.Z=function(e){var t,n=e.type,s=F.A.useForm(),i=c()(s,1)[0],u=(0,b.useIntl)(),l=(0,b.useNavigate)(),W=(0,f.Z)().translateString,V=(0,h.u)((function(e){return e.currentOrg})),P=(0,x.useState)(),E=c()(P,2),O=E[0],G=E[1],N=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=N.currentRobot,H=N.setCurrentRobot,D=(0,j.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),T=D.currentAgent,I=D.setCurrentAgent,$=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Q=$.currentWorkgroup,X=$.setCurrentWorkgroup,L=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?G(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){L()}),[V]),(0,x.useEffect)((function(){var e,t;if(n===C._X4)i.setFieldsValue({showFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))});else if(n===C.Njn){var s,o;i.setFieldsValue({showFaqs:null==T||null===(s=T.serviceSettings)||void 0===s?void 0:s.showFaqs,faqUids:null==T||null===(o=T.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid}))})}else if(n===C.aZD){var r,u;i.setFieldsValue({showFaqs:null==Q||null===(r=Q.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==Q||null===(u=Q.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[_,T,Q]);var z=function(){var e=a()(r()().mark((function e(t){var s,i,a,l,c,v,f,p,h,q,m,F,w,S,b,y,k,U,x,j,M,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return c=o()(o()({},_),{},{serviceSettings:o()(o()({},_.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==_||null===(s=_.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return w=o()(o()({},T),{},{serviceSettings:o()(o()({},null==T?void 0:T.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==T||null===(f=T.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==T||null===(p=T.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==T||null===(h=T.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==T||null===(q=T.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),leaveMsgSettings:o()(o()({},T.leaveMsgSettings),{},{worktimeUids:null==T||null===(m=T.leaveMsgSettings)||void 0===m||null===(m=m.worktimes)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:o()(o()({},T.robotSettings),{},{robotUid:null==T||null===(F=T.robotSettings)||void 0===F||null===(F=F.robot)||void 0===F?void 0:F.uid}),autoReplySettings:o()({},T.autoReplySettings)}),console.log("agentObject:",w),e.next=16,(0,Z.sE)(w);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),I(S.data)):(d.yw.destroy(),d.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return M=o()(o()({},Q),{},{serviceSettings:o()(o()({},Q.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null===(b=Q.serviceSettings)||void 0===b||null===(b=b.quickFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(y=Q.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(k=Q.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(U=Q.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},Q.robotSettings),{},{robotUid:null==Q||null===(x=Q.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),leaveMsgSettings:o()(o()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(j=Q.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:Q.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,A.W5)(M);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),X(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(k.ZP,{type:"link",icon:(0,R.jsx)(q.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(U.Z,{}),(0,R.jsxs)(F.A,{form:i,layout:"vertical",onFinish:z,children:[(0,R.jsx)(w.Z,{label:"是否显示常见问题",name:"showFaqs",fieldProps:{onChange:Y}}),(0,R.jsx)(F.A.Item,{children:(0,R.jsx)(k.ZP,{icon:(0,R.jsx)(m.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(S.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faq"}),options:null==O||null===(t=O.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},10187:function(e,t,n){var s=n(73193),o=n.n(s),i=n(90819),r=n.n(i),u=n(89933),a=n.n(u),l=n(45332),c=n.n(l),d=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),q=n(16655),m=n(11984),F=n(5728),w=n(31806),S=n(8091),b=n(82045),y=n(93982),k=n(12265),U=n(72434),x=n(44194),j=n(85702),M=n(61017),C=n(77667),Z=n(81153),A=n(43314),R=n(31549);t.Z=function(e){var t,n=e.type,s=F.A.useForm(),i=c()(s,1)[0],u=(0,b.useIntl)(),l=(0,b.useNavigate)(),W=(0,f.Z)().translateString,V=(0,h.u)((function(e){return e.currentOrg})),P=(0,x.useState)(),E=c()(P,2),O=E[0],G=E[1],N=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=N.currentRobot,H=N.setCurrentRobot,D=(0,j.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),T=D.currentAgent,I=D.setCurrentAgent,$=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Q=$.currentWorkgroup,X=$.setCurrentWorkgroup,L=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?G(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){L()}),[V]),(0,x.useEffect)((function(){var e,t;if(n===C._X4)i.setFieldsValue({showGuessFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showGuessFaqs,guessFaqUids:null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.guessFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))});else if(n===C.Njn){var s,o;i.setFieldsValue({showGuessFaqs:null==T||null===(s=T.serviceSettings)||void 0===s?void 0:s.showGuessFaqs,guessFaqUids:null==T||null===(o=T.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid}))})}else if(n===C.aZD){var r,u;i.setFieldsValue({showGuessFaqs:null==Q||null===(r=Q.serviceSettings)||void 0===r?void 0:r.showGuessFaqs,guessFaqUids:null==Q||null===(u=Q.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[_,T,Q]);var z=function(){var e=a()(r()().mark((function e(t){var s,i,a,l,c,v,f,p,h,q,m,F,w,S,b,y,k,U,x,j,M,R,W;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return c=o()(o()({},_),{},{serviceSettings:o()(o()({},_.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==_||null===(s=_.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return w=o()(o()({},T),{},{serviceSettings:o()(o()({},null==T?void 0:T.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==T||null===(f=T.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==T||null===(p=T.serviceSettings)||void 0===p||null===(p=p.faqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==T||null===(h=T.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==T||null===(q=T.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:o()(o()({},T.robotSettings),{},{robotUid:null==T||null===(m=T.robotSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid}),leaveMsgSettings:o()(o()({},T.leaveMsgSettings),{},{worktimeUids:null==T||null===(F=T.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:o()({},T.autoReplySettings)}),console.log("agentObject:",w),e.next=16,(0,Z.sE)(w);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),I(S.data)):(d.yw.destroy(),d.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return R=o()(o()({},Q),{},{serviceSettings:o()(o()({},Q.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null===(b=Q.serviceSettings)||void 0===b||null===(b=b.quickFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),faqUids:null==Q||null===(y=Q.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(k=Q.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(U=Q.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},Q.robotSettings),{},{robotUid:null==Q||null===(x=Q.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),leaveMsgSettings:o()(o()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(j=Q.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:null===(M=Q.agents)||void 0===M?void 0:M.map((function(e){return e.uid}))}),console.log("workgroupObject:",R),e.next=26,(0,A.W5)(R);case 26:W=e.sent,console.log("updateWorkGroup response:",W),200===W.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),X(W.data)):(d.yw.destroy(),d.yw.error(W.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqGuess handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(k.ZP,{type:"link",icon:(0,R.jsx)(q.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(U.Z,{}),(0,R.jsxs)(F.A,{form:i,layout:"vertical",onFinish:z,children:[(0,R.jsx)(w.Z,{label:"是否显示猜你想问",name:"showGuessFaqs",fieldProps:{onChange:Y}}),(0,R.jsx)(F.A.Item,{children:(0,R.jsx)(k.ZP,{icon:(0,R.jsx)(m.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(S.Z,{name:"guessFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqGuess"}),options:null==O||null===(t=O.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},18874:function(e,t,n){var s=n(73193),o=n.n(s),i=n(90819),r=n.n(i),u=n(89933),a=n.n(u),l=n(45332),c=n.n(l),d=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),q=n(16655),m=n(11984),F=n(5728),w=n(31806),S=n(8091),b=n(82045),y=n(93982),k=n(12265),U=n(72434),x=n(44194),j=n(85702),M=n(61017),C=n(77667),Z=n(81153),A=n(43314),R=n(31549);t.Z=function(e){var t,n=e.type,s=F.A.useForm(),i=c()(s,1)[0],u=(0,b.useIntl)(),l=(0,b.useNavigate)(),W=(0,f.Z)().translateString,V=(0,h.u)((function(e){return e.currentOrg})),P=(0,x.useState)(),E=c()(P,2),O=E[0],G=E[1],N=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=N.currentRobot,H=N.setCurrentRobot,D=(0,j.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),T=D.currentAgent,I=D.setCurrentAgent,$=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Q=$.currentWorkgroup,X=$.setCurrentWorkgroup,L=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?G(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){L()}),[V]),(0,x.useEffect)((function(){var e;if(n===C._X4)i.setFieldsValue({showHotFaqs:null==_?void 0:_.serviceSettings.showHotFaqs,hotFaqUids:(null==_||null===(e=_.serviceSettings)||void 0===e||null===(e=e.hotFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]});else if(n===C.Njn){var t;i.setFieldsValue({showHotFaqs:null==T?void 0:T.serviceSettings.showHotFaqs,hotFaqUids:(null==T||null===(t=T.serviceSettings)||void 0===t||null===(t=t.hotFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]})}else if(n===C.aZD){var s;i.setFieldsValue({showHotFaqs:null==Q?void 0:Q.serviceSettings.showHotFaqs,hotFaqUids:(null==Q||null===(s=Q.serviceSettings)||void 0===s||null===(s=s.hotFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})))||[]})}}),[_,T,Q]);var z=function(){var e=a()(r()().mark((function e(t){var s,i,a,l,c,v,f,p,h,q,m,F,w,S,b,y,k,U,x,j,M,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return c=o()(o()({},_),{},{serviceSettings:o()(o()({},_.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==_||null===(s=_.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return w=o()(o()({},T),{},{serviceSettings:o()(o()({},null==T?void 0:T.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==T||null===(f=T.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==T||null===(p=T.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),faqUids:null==T||null===(h=T.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==T||null===(q=T.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:o()(o()({},T.robotSettings),{},{robotUid:null==T||null===(m=T.robotSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid}),leaveMsgSettings:o()(o()({},T.leaveMsgSettings),{},{worktimeUids:null==T||null===(F=T.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:o()({},T.autoReplySettings)}),console.log("agentObject:",w),e.next=16,(0,Z.sE)(w);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),I(S.data)):(d.yw.destroy(),d.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return M=o()(o()({},Q),{},{serviceSettings:o()(o()({},Q.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null===(b=Q.serviceSettings)||void 0===b||null===(b=b.quickFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),faqUids:null==Q||null===(y=Q.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(k=Q.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(U=Q.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},Q.robotSettings),{},{robotUid:null==Q||null===(x=Q.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),leaveMsgSettings:o()(o()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(j=Q.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:Q.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,A.W5)(M);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),X(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqHots handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(k.ZP,{type:"link",icon:(0,R.jsx)(q.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(U.Z,{}),(0,R.jsxs)(F.A,{form:i,layout:"vertical",onFinish:z,children:[(0,R.jsx)(w.Z,{label:"是否显示热门问题",name:"showHotFaqs",fieldProps:{onChange:Y}}),(0,R.jsx)(F.A.Item,{children:(0,R.jsx)(k.ZP,{icon:(0,R.jsx)(m.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(S.Z,{name:"hotFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqHot"}),options:null==O||null===(t=O.data)||void 0===t?void 0:t.content.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},90588:function(e,t,n){var s=n(73193),o=n.n(s),i=n(90819),r=n.n(i),u=n(89933),a=n.n(u),l=n(45332),c=n.n(l),d=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),q=n(16655),m=n(11984),F=n(5728),w=n(31806),S=n(8091),b=n(82045),y=n(93982),k=n(12265),U=n(72434),x=n(44194),j=n(85702),M=n(61017),C=n(77667),Z=n(81153),A=n(43314),R=n(31549);t.Z=function(e){var t,n=e.type,s=F.A.useForm(),i=c()(s,1)[0],u=(0,b.useIntl)(),l=(0,b.useNavigate)(),W=(0,f.Z)().translateString,V=(0,h.u)((function(e){return e.currentOrg})),P=(0,x.useState)(),E=c()(P,2),O=E[0],G=E[1],N=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=N.currentRobot,H=N.setCurrentRobot,D=(0,j.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),T=D.currentAgent,I=D.setCurrentAgent,$=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Q=$.currentWorkgroup,X=$.setCurrentWorkgroup,L=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?G(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){L()}),[V]),(0,x.useEffect)((function(){var e,t;if(n===C._X4)i.setFieldsValue({showQuickFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))});else if(n===C.Njn){var s,o;i.setFieldsValue({showQuickFaqs:null==T||null===(s=T.serviceSettings)||void 0===s?void 0:s.showQuickFaqs,quickFaqUids:null==T||null===(o=T.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid}))})}else if(n===C.aZD){var r,u;i.setFieldsValue({showQuickFaqs:null==Q||null===(r=Q.serviceSettings)||void 0===r?void 0:r.showQuickFaqs,quickFaqUids:null==Q||null===(u=Q.serviceSettings)||void 0===u||null===(u=u.quickFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))})}}),[_,T,Q]);var z=function(){var e=a()(r()().mark((function e(t){var s,i,a,l,c,v,f,p,h,q,m,F,w,S,b,y,k,U,x,j,M,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==C._X4){e.next=11;break}return c=o()(o()({},_),{},{serviceSettings:o()(o()({},_.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==_||null===(s=_.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return w=o()(o()({},T),{},{serviceSettings:o()(o()({},null==T?void 0:T.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==T||null===(f=T.serviceSettings)||void 0===f||null===(f=f.faqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==T||null===(p=T.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==T||null===(h=T.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==T||null===(q=T.serviceSettings)||void 0===q||null===(q=q.shortcutFaqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:o()(o()({},T.robotSettings),{},{robotUid:null==T||null===(m=T.robotSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid}),leaveMsgSettings:o()(o()({},T.leaveMsgSettings),{},{worktimeUids:null==T||null===(F=T.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:o()({},T.autoReplySettings)}),console.log("agentObject:",w),e.next=16,(0,Z.sE)(w);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),I(S.data)):(d.yw.destroy(),d.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return M=o()(o()({},Q),{},{serviceSettings:o()(o()({},Q.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null===(b=Q.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(y=Q.serviceSettings)||void 0===y||null===(y=y.guessFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(k=Q.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(U=Q.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},Q.robotSettings),{},{robotUid:null==Q||null===(x=Q.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),leaveMsgSettings:o()(o()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(j=Q.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:Q.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,A.W5)(M);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),X(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(k.ZP,{type:"link",icon:(0,R.jsx)(q.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(U.Z,{}),(0,R.jsxs)(F.A,{form:i,layout:"vertical",onFinish:z,children:[(0,R.jsx)(w.Z,{label:"是否显示快捷按钮",name:"showQuickFaqs",fieldProps:{onChange:Y}}),(0,R.jsx)(F.A.Item,{children:(0,R.jsx)(k.ZP,{icon:(0,R.jsx)(m.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(S.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.quickbutton"}),options:null==O||null===(t=O.data)||void 0===t?void 0:t.content.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},66772:function(e,t,n){var s=n(73193),o=n.n(s),i=n(90819),r=n.n(i),u=n(89933),a=n.n(u),l=n(45332),c=n.n(l),d=n(89756),v=n(62639),g=n(63833),f=n(1780),p=n(3245),h=n(40431),q=n(16655),m=n(11984),F=n(5728),w=n(31806),S=n(8091),b=n(82045),y=n(93982),k=n(12265),U=n(72434),x=n(44194),j=n(85702),M=n(61017),C=n(77667),Z=n(81153),A=n(43314),R=n(31549);t.Z=function(e){var t,n=e.type,s=F.A.useForm(),i=c()(s,1)[0],u=(0,b.useIntl)(),l=(0,b.useNavigate)(),W=(0,f.Z)().translateString,V=(0,h.u)((function(e){return e.currentOrg})),P=(0,x.useState)(),E=c()(P,2),O=E[0],G=E[1],N=(0,p.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),_=N.currentRobot,H=N.setCurrentRobot,D=(0,j.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),T=D.currentAgent,I=D.setCurrentAgent,$=(0,M.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),Q=$.currentWorkgroup,X=$.setCurrentWorkgroup,L=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:V.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),d.yw.destroy(),200===n.code?G(n):d.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){L()}),[V]),(0,x.useEffect)((function(){var e,t;if(n===C._X4)i.setFieldsValue({showShortcutFaqs:null==_||null===(e=_.serviceSettings)||void 0===e?void 0:e.showShortcutFaqs,shortcutFaqUids:(null==_||null===(t=_.serviceSettings)||void 0===t||null===(t=t.shortcutFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]});else if(n===C.Njn){var s,o;i.setFieldsValue({showShortcutFaqs:null==T||null===(s=T.serviceSettings)||void 0===s?void 0:s.showShortcutFaqs,shortcutFaqUids:(null==T||null===(o=T.serviceSettings)||void 0===o||null===(o=o.shortcutFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})))||[]})}else if(n===C.aZD){var r,u;i.setFieldsValue({showShortcutFaqs:null==Q||null===(r=Q.serviceSettings)||void 0===r?void 0:r.showShortcutFaqs,shortcutFaqUids:(null==Q||null===(u=Q.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})))||[]})}}),[_,T,Q]);var z=function(){var e=a()(r()().mark((function e(t){var s,i,a,l,c,v,f,p,h,q,m,F,w,S,b,y,k,U,x,j,M,R;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t,n),n!==C._X4){e.next=11;break}return c=o()(o()({},_),{},{serviceSettings:o()(o()({},_.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==_||null===(s=_.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==_||null===(i=_.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==_||null===(a=_.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==_||null===(l=_.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",c),e.next=6,(0,g.$l)(c);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),H(v.data)):(d.yw.destroy(),d.yw.error(v.message)),e.next=29;break;case 11:if(n!==C.Njn){e.next=21;break}return w=o()(o()({},T),{},{serviceSettings:o()(o()({},null==T?void 0:T.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==T||null===(f=T.serviceSettings)||void 0===f||null===(f=f.quickFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),guessFaqUids:null==T||null===(p=T.serviceSettings)||void 0===p||null===(p=p.guessFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),hotFaqUids:null==T||null===(h=T.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null==T||null===(q=T.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid}))}),robotSettings:o()(o()({},T.robotSettings),{},{robotUid:null==T||null===(m=T.robotSettings)||void 0===m||null===(m=m.robot)||void 0===m?void 0:m.uid}),leaveMsgSettings:o()(o()({},T.leaveMsgSettings),{},{worktimeUids:null==T||null===(F=T.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),autoReplySettings:o()({},T.autoReplySettings)}),console.log("agentObject:",w),e.next=16,(0,Z.sE)(w);case 16:S=e.sent,console.log("updateAgent response:",S),200===S.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),I(S.data)):(d.yw.destroy(),d.yw.error(S.message)),e.next=29;break;case 21:if(n!==C.aZD){e.next=29;break}return M=o()(o()({},Q),{},{serviceSettings:o()(o()({},Q.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null===(b=Q.serviceSettings)||void 0===b||null===(b=b.quickFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),faqUids:null==Q||null===(y=Q.serviceSettings)||void 0===y||null===(y=y.faqs)||void 0===y?void 0:y.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(k=Q.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(U=Q.serviceSettings)||void 0===U||null===(U=U.guessFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:o()(o()({},Q.robotSettings),{},{robotUid:null==Q||null===(x=Q.robotSettings)||void 0===x||null===(x=x.robot)||void 0===x?void 0:x.uid}),leaveMsgSettings:o()(o()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(j=Q.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:Q.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,A.W5)(M);case 26:R=e.sent,console.log("updateWorkGroup response:",R),200===R.code?(d.yw.destroy(),d.yw.success(u.formatMessage({id:"update.success"})),X(R.data)):(d.yw.destroy(),d.yw.error(R.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqShortcut handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsx)(y.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,R.jsx)(k.ZP,{type:"link",icon:(0,R.jsx)(q.Z,{}),onClick:function(){return window.open(C.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,R.jsx)(U.Z,{}),(0,R.jsxs)(F.A,{form:i,layout:"vertical",onFinish:z,children:[(0,R.jsx)(w.Z,{label:"是否显示快捷路径",name:"showShortcutFaqs",fieldProps:{onChange:Y}}),(0,R.jsx)(F.A.Item,{children:(0,R.jsx)(k.ZP,{icon:(0,R.jsx)(m.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,R.jsx)(S.Z,{name:"shortcutFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqShortcut"}),options:null==O||null===(t=O.data)||void 0===t?void 0:t.content.map((function(e){return{label:W(e.title),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,R.jsx)(b.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]})]})}},40574:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(63833),n(43314),n(85702),n(3245),n(61017),n(77667),n(82045),n(44194),n(31549)},64859:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(63833),n(43314),n(85702),n(3245),n(61017),n(77667),n(82045),n(44194),n(31549)},28243:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(63833),n(43314),n(85702),n(3245),n(61017),n(77667),n(82045),n(44194),n(31549)},60029:function(e,t,n){var s=n(73193),o=n.n(s),i=n(84176),r=n.n(i),u=n(89756),a=n(74145),l=n(82045),c=n(72909),d=(n(79520),n(44194)),v=n(31549),g=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];t.Z=function(e){var t=e.placeholder,n=e.defaultValue,s=e.value,i=e.style,f=e.toolbarKeys,p=e.onChange,h=(e.options,r()(e,g)),q=(0,l.useIntl)(),m=(0,a.Z)().isDarkMode,F=(0,d.useRef)(null),w=(0,d.useRef)(null);return(0,d.useEffect)((function(){if(F.current){if(!w.current){var e=new c.cW({element:F.current,theme:m?"dark":"light",placeholder:t,content:n,toolbarKeys:f,image:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(q.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},video:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(q.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},attachment:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(q.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},onChange:function(e){"function"==typeof p&&p(e.getHtml(),e.getMarkdown())}});w.current=e}return function(){w.current&&(w.current.destroy(),w.current=null)}}}),[]),(0,d.useEffect)((function(){w.current&&s!==w.current.getHtml()&&w.current.setContent(s||"")}),[s]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",o()(o()({ref:F},h),{},{style:o()({height:"100%"},i)}))})}},89242:function(e,t,n){n(44194),n(82045),n(84330),n(81951),n(68925),n(20924),n(302),n(81167),n(85401),n(31549)},82639:function(e,t,n){n(44194);var s=n(50571),o=n(48543),i=n(82980),r=n(26727),u=n(33067),a=n(83440),l=n(82045),c=n(19685),d=n(84330),v=n(31549);t.Z=function(e){var t=e.type,n=((0,l.useIntl)(),[{key:"web",label:"Web",children:(0,v.jsx)(o.Z,{type:t})},{key:"react",label:"React",children:(0,v.jsx)(c.Z,{type:t})},{key:"ios",label:"iOS",children:(0,v.jsx)(i.Z,{type:t})},{key:"android",label:"Android",children:(0,v.jsx)(a.Z,{type:t})},{key:"uniapp",label:"Uniapp",children:(0,v.jsx)(r.Z,{type:t})},{key:"flutter",label:"Flutter",children:(0,v.jsx)(u.Z,{type:t})}]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{type:t}),(0,v.jsx)(s.Z,{tabPosition:"left",items:n})]})}},19743:function(e,t,n){n(44194),n(82045),n(84330),n(9579),n(64352),n(60992),n(15192),n(31549)},93030:function(e,t,n){n(44194);var s=n(82045),o=(n(48764),n(84330),n(20988),n(76457),n(41956),n(42685),n(2748),n(90819),n(73193),n(84176),n(89933),n(45332),n(40431),n(440),n(69427),n(77667),n(31549));s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,n(51444),n(56746),s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage,s.FormattedMessage},84330:function(e,t,n){var s=n(77667),o=n(16655),i=n(82045),r=n(93982),u=n(12265),a=n(72434),l=n(31549);t.Z=function(e){var t=e.type,n=(0,i.useIntl)();return(0,l.jsxs)(l.Fragment,{children:[t===s.aZD&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{message:"多客服技能组，此处客服代码会将所有访客按照路由规则转接给此技能组中客服成员",type:"success",action:(0,l.jsx)(u.ZP,{type:"link",icon:(0,l.jsx)(o.Z,{}),onClick:function(){return window.open(s.VPj)},children:n.formatMessage({id:"setting.helpcenter"})})}),(0,l.jsx)(a.Z,{})]}),t===s.Njn&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{message:"一对一客服，此处客服代码会将所有访客都转接给此客服账号",type:"success"}),(0,l.jsx)(a.Z,{})]})]})}},92349:function(e,t,n){n.d(t,{G:function(){return v}});var s=n(73193),o=n.n(s),i=(n(44194),n(17433)),r=n(77667),u=n(28977),a=n.n(u),l=n(89756),c=n(33934),d=n(31549),v=function(e){var t=e.children,n=e.onSuccess,s=e.onError,u={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,c.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:u,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=a()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;u.file=e,u.file_name=t,u.file_type=e.type,console.log("beforeUpload",u)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data;n(t),l.yw.success("".concat(e.file.name," 上传成功"))}else s(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),s(e.file))}};return(0,d.jsx)(i.Z,o()(o()({},v),{},{children:t}))}}}]);