"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4841],{11475:function(H,U,e){e.d(U,{Z:function(){return P}});var y=e(1413),a=e(67294),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},u=j,D=e(91146),f=function(p,I){return a.createElement(D.Z,(0,y.Z)((0,y.Z)({},p),{},{ref:I,icon:u}))},E=a.forwardRef(f),P=E},5966:function(H,U,e){var y=e(97685),a=e(1413),j=e(91),u=e(21770),D=e(8232),f=e(55241),E=e(97435),P=e(67294),g=e(43889),p=e(85893),I=["fieldProps","proFieldProps"],M=["fieldProps","proFieldProps"],d="text",m=function(o){var s=o.fieldProps,c=o.proFieldProps,_=(0,j.Z)(o,I);return(0,p.jsx)(g.Z,(0,a.Z)({valueType:d,fieldProps:s,filedConfig:{valueType:d},proFieldProps:c},_))},S=function(o){var s=(0,u.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),c=(0,y.Z)(s,2),_=c[0],R=c[1];return(0,p.jsx)(D.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(X){var L,n=X.getFieldValue(o.name||[]);return(0,p.jsx)(f.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(t){return t&&t.parentNode?t.parentNode:t},onOpenChange:function(t){return R(t)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[(L=o.statusRender)===null||L===void 0?void 0:L.call(o,n),o.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:_,children:o.children}))}})},x=function(o){var s=o.fieldProps,c=o.proFieldProps,_=(0,j.Z)(o,M),R=(0,P.useState)(!1),i=(0,y.Z)(R,2),X=i[0],L=i[1];return s!=null&&s.statusRender&&_.name?(0,p.jsx)(S,{name:_.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:X,onOpenChange:L,children:(0,p.jsx)("div",{children:(0,p.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,E.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(r){var t;s==null||(t=s.onBlur)===null||t===void 0||t.call(s,r),L(!1)},onClick:function(r){var t;s==null||(t=s.onClick)===null||t===void 0||t.call(s,r),L(!0)}}),proFieldProps:c,filedConfig:{valueType:d}},_))})}):(0,p.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:s,proFieldProps:c,filedConfig:{valueType:d}},_))},W=m;W.Password=x,W.displayName="ProFormComponent",U.Z=W},30300:function(H,U,e){e.d(U,{FU:function(){return g},O7:function(){return o},k4:function(){return I},yr:function(){return d}});var y=e(15009),a=e.n(y),j=e(97857),u=e.n(j),D=e(99289),f=e.n(D),E=e(85615),P=e(86745);function g(c){return p.apply(this,arguments)}function p(){return p=f()(a()().mark(function c(_){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,P.request)("/api/v1/category/query/org",{method:"GET",params:u()(u()({},_),{},{client:E.bV})}));case 1:case"end":return i.stop()}},c)})),p.apply(this,arguments)}function I(c){return M.apply(this,arguments)}function M(){return M=f()(a()().mark(function c(_){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,P.request)("/api/v1/category/create",{method:"POST",data:u()(u()({},_),{},{client:E.bV})}));case 1:case"end":return i.stop()}},c)})),M.apply(this,arguments)}function d(c){return m.apply(this,arguments)}function m(){return m=f()(a()().mark(function c(_){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,P.request)("/api/v1/category/update",{method:"POST",data:u()(u()({},_),{},{client:E.bV})}));case 1:case"end":return i.stop()}},c)})),m.apply(this,arguments)}function S(c){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function c(_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/v1/category/delete",{method:"POST",data:_objectSpread(_objectSpread({},_),{},{client:HTTP_CLIENT})}));case 1:case"end":return i.stop()}},c)})),x.apply(this,arguments)}function W(c){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function c(_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/v1/category/all",{method:"GET",params:_objectSpread(_objectSpread({},_),{},{client:HTTP_CLIENT})}));case 1:case"end":return i.stop()}},c)})),b.apply(this,arguments)}function o(){return s.apply(this,arguments)}function s(){return s=f()(a()().mark(function c(){return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,P.request)("/visitor/api/v1/category/query",{method:"GET",params:{client:E.bV}}));case 1:case"end":return R.stop()}},c)})),s.apply(this,arguments)}},52670:function(H,U,e){e.d(U,{Z:function(){return L}});var y=e(15009),a=e.n(y),j=e(99289),u=e.n(j),D=e(5574),f=e.n(D),E=e(11475),P=e(85576),g=e(86250),p=e(14726),I=e(66593),M=e(83062),d=e(80049),m=e(73803),S=e(87676),x=e(34994),W=e(5966),b=e(67294),o=e(85893),s=function(r){var t=r.open,l=r.type,C=r.isEdit,w=r.category,K=r.onCancel,G=r.onSubmit,ee=x.A.useForm(),z=f()(ee,1),$=z[0],Q=(0,m.Z)(),B=Q.translateString,k=(0,S.u)(function(Z){return Z.orgCurrent});(0,b.useEffect)(function(){C?$.setFieldsValue({name:B(w==null?void 0:w.name)}):$.resetFields()},[t]);var te=function(){$.validateFields().then(function(){var J=u()(a()().mark(function V(Y){var q;return a()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:console.log("handleSaveDep:",Y),q={uid:C?w==null?void 0:w.uid:"",name:Y.name,type:l,orgUid:k==null?void 0:k.uid},G(q);case 3:case"end":return N.stop()}},V)}));return function(V){return J.apply(this,arguments)}}()).catch(function(J){console.log("Failed:",J),d.yw.error("\u521B\u5EFA\u5206\u7C7B\u5931\u8D25")})};return(0,o.jsx)("div",{children:(0,o.jsx)(P.Z,{title:"\u65B0\u5EFA\u5206\u7C7B",open:t,onOk:te,onCancel:K,children:(0,o.jsx)(x.A,{form:$,name:"categoryForm",initialValues:{name:""},submitter:!1,children:(0,o.jsx)(W.Z,{label:"\u5206\u7C7B\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0!"}]})})})})},c=s,_=e(30300),R=e(89102),i=e(86745),X=function(r){var t=r.type,l=(0,b.useState)(!1),C=f()(l,2),w=C[0],K=C[1],G=(0,i.useIntl)(),ee=(0,b.useState)(!0),z=f()(ee,2),$=z[0],Q=z[1],B=(0,b.useState)(),k=f()(B,2),te=k[0],Z=k[1],J=(0,S.u)(function(h){return h.orgCurrent}),V=(0,R.v)(function(h){return{categoryTreeOptions:h.categoryTreeOptions,setCategoryResult:h.setCategoryResult,currentCategory:h.currentCategory,setCurrentCategoryUid:h.setCurrentCategoryUid}}),Y=V.categoryTreeOptions,q=V.setCategoryResult,O=V.currentCategory,N=V.setCurrentCategoryUid,le=P.Z.useModal(),re=f()(le,2),ie=re[0],ue=re[1],ae=(0,m.Z)(),oe=ae.translateString,de=ae.translateStringTranct,ce=function(v){ie.confirm({title:"\u5220\u9664\u63D0\u793A",icon:(0,o.jsx)(E.Z,{}),content:"\u786E\u8BA4\u8981\u5220\u9664\u5206\u7C7B\u3010".concat(oe(v.name),"\u3011\u5417\uFF1F"),onOk:function(){console.log("\u786E\u8BA4\u5220\u9664"),me(v)},onCancel:function(){console.log("\u53D6\u6D88\u5220\u9664")},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},ge=function(){K(!1)},pe=function(){console.log("new dep"),Q(!1),Z(void 0),K(!0)},_e=function(){var h=u()(a()().mark(function v(A){var F;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(console.log("handleSubmit: ",A),$?d.yw.loading("\u4FEE\u6539\u4E2D..."):d.yw.loading("\u521B\u5EFA\u4E2D..."),!$){T.next=8;break}return T.next=5,(0,_.yr)(A);case 5:T.t0=T.sent,T.next=11;break;case 8:return T.next=10,(0,_.k4)(A);case 10:T.t0=T.sent;case 11:F=T.t0,console.log("createCategory response: ",F),F.code===200?(d.yw.destroy(),$?d.yw.success("\u4FEE\u6539\u6210\u529F"):d.yw.success("\u521B\u5EFA\u6210\u529F"),K(!1),se()):(d.yw.destroy(),d.yw.error(F.message));case 14:case"end":return T.stop()}},v)}));return function(A){return h.apply(this,arguments)}}(),se=function(){var h=u()(a()().mark(function v(){var A,F;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return console.log("getCategories"),d.yw.loading("\u52A0\u8F7D\u4E2D..."),A={pageNumber:0,pageSize:50,type:t,orgUid:J.uid},T.next=5,(0,_.FU)(A);case 5:F=T.sent,console.log("queryCategories response: ",F),F.code===200?(q(F),d.yw.destroy()):(d.yw.destroy(),d.yw.error(F.message));case 8:case"end":return T.stop()}},v)}));return function(){return h.apply(this,arguments)}}(),fe=function(){var h=u()(a()().mark(function v(){return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:console.log("handleEditCategory: ",O),Q(!0),Z(O),K(!0);case 4:case"end":return F.stop()}},v)}));return function(){return h.apply(this,arguments)}}(),me=function(){var h=u()(a()().mark(function v(A){return a()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:console.log("handleDeleteCategory: ",A);case 1:case"end":return ne.stop()}},v)}));return function(A){return h.apply(this,arguments)}}();(0,b.useEffect)(function(){se()},[]);var ve=function(v,A){console.log("selected",v,A),v.length!==0&&N(v[0].toString())};return(0,o.jsxs)("div",{children:[(0,o.jsxs)(g.Z,{gap:"small",wrap:"wrap",style:{marginBottom:5},children:[(0,o.jsx)(p.ZP,{type:"primary",size:"small",onClick:pe,children:"\u521B\u5EFA\u5206\u7C7B"}),(O==null?void 0:O.uid)!==""&&(O==null?void 0:O.uid)!=="all"&&(0,o.jsx)(p.ZP,{size:"small",onClick:fe,children:"\u7F16\u8F91"}),(O==null?void 0:O.uid)!==""&&(O==null?void 0:O.uid)!=="all"&&(0,o.jsx)(p.ZP,{onClick:function(){return ce(O)},size:"small",style:{float:"right"},danger:!0,children:G.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,o.jsx)(I.Z,{defaultSelectedKeys:[O.uid],onSelect:ve,treeData:Y,blockNode:!0,titleRender:function(v){return(0,o.jsx)(M.Z,{title:oe(v.title),children:de(v.title)})}}),(0,o.jsx)(c,{open:w,type:t,isEdit:$,category:te,onCancel:ge,onSubmit:_e}),ue]})},L=X},77154:function(H,U,e){var y=e(39825);function a(){var j=(0,y.Z)(),u=j.isDarkMode,D={borderRight:u?"1px solid #333":"1px solid #ccc",background:u?"#141414":"#f5f5f5"},f={background:u?"#141414":"#fff"},E={borderLeft:u?"1px solid #333":"1px solid #ccc",background:u?"#141414":"#f5f5f5"},P={minHeight:120,background:u?"#141414":"#f5f5f5"};return{leftSiderStyle:D,headerStyle:f,rightSiderStyle:E,contentStyle:P}}U.Z=a},73803:function(H,U,e){var y=e(85615),a=e(66419),j=e(86745);function u(){var D=(0,j.useIntl)(),f=function(g){return g&&g.startsWith(y.Vo)?D.formatMessage({id:g,defaultMessage:g}):g},E=function(g){return g!=null&&g.startsWith(y.Vo)?(0,a.aS)(D.formatMessage({id:g}),10):(0,a.aS)(g,10)};return{translateString:f,translateStringTranct:E}}U.Z=u},89102:function(H,U,e){e.d(U,{v:function(){return g}});var y=e(19632),a=e.n(y),j=e(97857),u=e.n(j),D=e(85615),f=e(64529),E=e(782),P=e(71381),g=(0,f.Ue)()((0,E.mW)((0,E.tJ)((0,P.n)(function(M,d){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:""},setCategoryResult:function(S){var x=I(S),W={uid:"all",name:"\u5168\u90E8"},b=u()(u()({},S),{},{data:{content:[W].concat(a()(S.data.content))}}),o=p(b);M({categoryResult:b,categoryTreeOptions:o,categorySelectOptions:x})},setCurrentCategoryUid:function(S){var x=d().categoryResult.data.content.find(function(W){return W.uid===S});M({currentCategory:x})},deleteCategoryCache:function(){return M({},!0)}}}),{name:D.OM})));function p(M){var d=[];return M.data.content.forEach(function(m){var S={title:m.name,key:m.uid,children:[]};m.children&&Array.isArray(m.children)&&(S.children=m.children.map(function(x){return{title:x.name,key:x.uid,children:[]}})),d.push(S)}),d}function I(M){var d=[];return M.data.content.forEach(function(m){var S={label:m.name,value:m.uid};d.push(S)}),d}},86250:function(H,U,e){e.d(U,{Z:function(){return L}});var y=e(67294),a=e(93967),j=e.n(a),u=e(98423),D=e(98065),f=e(53124),E=e(56023),P=e(45503);const g=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],I=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],M=(n,r)=>{const t=r.wrap===!0?"wrap":r.wrap;return{[`${n}-wrap-${t}`]:t&&g.includes(t)}},d=(n,r)=>{const t={};return I.forEach(l=>{t[`${n}-align-${l}`]=r.align===l}),t[`${n}-align-stretch`]=!r.align&&!!r.vertical,t},m=(n,r)=>{const t={};return p.forEach(l=>{t[`${n}-justify-${l}`]=r.justify===l}),t};function S(n,r){return j()(Object.assign(Object.assign(Object.assign({},M(n,r)),d(n,r)),m(n,r)))}var x=S;const W=n=>{const{componentCls:r}=n;return{[r]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},b=n=>{const{componentCls:r}=n;return{[r]:{"&-gap-small":{gap:n.flexGapSM},"&-gap-middle":{gap:n.flexGap},"&-gap-large":{gap:n.flexGapLG}}}},o=n=>{const{componentCls:r}=n,t={};return g.forEach(l=>{t[`${r}-wrap-${l}`]={flexWrap:l}}),t},s=n=>{const{componentCls:r}=n,t={};return I.forEach(l=>{t[`${r}-align-${l}`]={alignItems:l}}),t},c=n=>{const{componentCls:r}=n,t={};return p.forEach(l=>{t[`${r}-justify-${l}`]={justifyContent:l}}),t},_=()=>({});var R=(0,E.I$)("Flex",n=>{const{paddingXS:r,padding:t,paddingLG:l}=n,C=(0,P.TS)(n,{flexGapSM:r,flexGap:t,flexGapLG:l});return[W(C),b(C),o(C),s(C),c(C)]},_,{resetStyle:!1}),i=function(n,r){var t={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.indexOf(l)<0&&(t[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,l=Object.getOwnPropertySymbols(n);C<l.length;C++)r.indexOf(l[C])<0&&Object.prototype.propertyIsEnumerable.call(n,l[C])&&(t[l[C]]=n[l[C]]);return t},L=y.forwardRef((n,r)=>{const{prefixCls:t,rootClassName:l,className:C,style:w,flex:K,gap:G,children:ee,vertical:z=!1,component:$="div"}=n,Q=i(n,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:B,direction:k,getPrefixCls:te}=y.useContext(f.E_),Z=te("flex",t),[J,V,Y]=R(Z),q=z!=null?z:B==null?void 0:B.vertical,O=j()(C,l,B==null?void 0:B.className,Z,V,Y,x(Z,n),{[`${Z}-rtl`]:k==="rtl",[`${Z}-gap-${G}`]:(0,D.n)(G),[`${Z}-vertical`]:q}),N=Object.assign(Object.assign({},B==null?void 0:B.style),w);return K&&(N.flex=K),G&&!(0,D.n)(G)&&(N.gap=G),J(y.createElement($,Object.assign({ref:r,className:O,style:N},(0,u.Z)(Q,["justify","wrap","align"])),ee))})}}]);
