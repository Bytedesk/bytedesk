"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2701],{24172:function(b,c,e){e.d(c,{Kq:function(){return j},RL:function(){return M}});var f=e(15009),t=e.n(f),O=e(97857),a=e.n(O),v=e(99289),_=e.n(v),g=e(85615),u=e(86745);function j(o){return h.apply(this,arguments)}function h(){return h=_()(t()().mark(function o(d){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/v1/org/create",{method:"POST",data:a()(a()({},d),{},{client:g.bV})}));case 1:case"end":return n.stop()}},o)})),h.apply(this,arguments)}function M(o){return m.apply(this,arguments)}function m(){return m=_()(t()().mark(function o(d){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/v1/org/update",{method:"POST",data:a()(a()({},d),{},{client:g.bV})}));case 1:case"end":return n.stop()}},o)})),m.apply(this,arguments)}function D(o){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function o(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/org/query",{method:"GET",params:_objectSpread(_objectSpread({},d),{},{client:HTTP_CLIENT})}));case 1:case"end":return n.stop()}},o)})),E.apply(this,arguments)}function S(o){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function o(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/org/uid",{method:"GET",params:{uid:d,client:HTTP_CLIENT}}));case 1:case"end":return n.stop()}},o)})),i.apply(this,arguments)}},77154:function(b,c,e){var f=e(39825);function t(){var O=(0,f.Z)(),a=O.isDarkMode,v={borderRight:a?"1px solid #333":"1px solid #ccc",background:a?"#141414":"#f5f5f5",width:260},_={background:a?"#141414":"#fff"},g={borderLeft:a?"1px solid #333":"1px solid #ccc",background:a?"#141414":"#f5f5f5"},u={minHeight:120,background:a?"#141414":"#f5f5f5"};return{leftSiderStyle:v,headerStyle:_,rightSiderStyle:g,contentStyle:u}}c.Z=t},75779:function(b,c,e){e.r(c),e.d(c,{default:function(){return Q}});var f=e(77154),t=e(21612),O=e(68508),a=e(67294),v=e(15009),_=e.n(v),g=e(97857),u=e.n(g),j=e(99289),h=e.n(j),M=e(5574),m=e.n(M),D=e(80049),E=e(24172),S=e(87676),i=e(66723),o=e(88484),d=e(34994),r=e(5966),n=e(90672),Z=e(86745),K=e(8232),G=e(7134),H=e(14726),s=e(85893),$=function(){var P=K.Z.useForm(),A=m()(P,1),L=A[0],U=(0,Z.useIntl)(),R=(0,S.u)(function(y){return{orgCurrent:y.orgCurrent,setOrgCurrent:y.setOrgCurrent}}),p=R.orgCurrent,w=R.setOrgCurrent,k=(0,a.useState)(""),x=m()(k,2),B=x[0],W=x[1],q=function(l){console.log("handleUploadSuccess:",l),W(l)},ee=function(l){console.log("handleUploadError:",l)},ne=function(){var y=h()(_()().mark(function l(F){var I,T;return _()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return I=u()(u()(u()({},p),F),{},{logo:B}),console.log("orgObject:",I),C.next=4,(0,E.RL)(I);case 4:T=C.sent,console.log("updateOrg response:",T),T.code===200?(D.yw.success("\u4FEE\u6539\u6210\u529F"),w(T.data)):D.yw.error("\u4FEE\u6539\u5931\u8D25");case 7:case"end":return C.stop()}},l)}));return function(F){return y.apply(this,arguments)}}(),re=function(l){return Array.isArray(l)?l:l==null?void 0:l.fileList};return(0,a.useEffect)(function(){p&&W(p.logo)},[p]),(0,s.jsx)("div",{children:(0,s.jsxs)(d.A,{form:L,initialValues:{name:p.name,description:p.description},onFinish:ne,children:[(0,s.jsx)(K.Z.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:re,label:U.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,s.jsxs)(i.G,{onSuccess:q,onError:ee,children:[(0,s.jsx)(G.C,{src:B}),(0,s.jsx)(H.ZP,{icon:(0,s.jsx)(o.Z,{}),children:U.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,s.jsx)(r.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],label:"\u540D\u79F0",name:"name",width:"md"}),(0,s.jsx)(n.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],label:"\u63CF\u8FF0",name:"description",width:"md"})]})})},V=$,te=t.Z.Header,ae=t.Z.Footer,Y=t.Z.Sider,z=t.Z.Content,N=[{label:"\u57FA\u672C\u4FE1\u606F",key:"basic"}],J=function(){var P=(0,f.Z)(),A=P.leftSiderStyle,L=P.contentStyle,U=function(p){console.log("menu click ",p.key)};return(0,s.jsxs)(t.Z,{children:[(0,s.jsx)(Y,{style:A,children:(0,s.jsx)(O.Z,{mode:"inline",onClick:U,defaultSelectedKeys:["basic"],defaultOpenKeys:["basic"],items:N})}),(0,s.jsx)(t.Z,{children:(0,s.jsx)(z,{style:L,children:(0,s.jsx)(V,{})})})]})},Q=J},66723:function(b,c,e){e.d(c,{G:function(){return h}});var f=e(97857),t=e.n(f),O=e(67294),a=e(66476),v=e(85615),_=e(27484),g=e.n(_),u=e(80049),j=e(85893),h=function(m){var D=m.children,E=m.onSuccess,S=m.onError,i={file:null,file_name:"test.png",file_type:"image/png"},o={name:"file",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(v.LA)},data:i,showUploadList:!1,beforeUpload:function(r){console.log("beforeUpload",r);var n=g()(new Date).format("YYYYMMDDHHmmss")+"_"+r.name;i.file=r,i.file_name=n,i.file_type=r.type,console.log("beforeUpload",i)},onChange:function(r){if(r.file.status!=="uploading"&&console.log(r.file,r.fileList),r.file.status==="done"){var n=r.file.response.data;console.log("url: ",n),E(n),u.yw.success("".concat(r.file.name," \u4E0A\u4F20\u6210\u529F"))}else r.file.status==="error"&&(u.yw.error("".concat(r.file.name," \u4E0A\u4F20\u5931\u8D25")),S(r.file))}};return(0,j.jsx)(a.Z,t()(t()({},o),{},{children:D}))}}}]);
