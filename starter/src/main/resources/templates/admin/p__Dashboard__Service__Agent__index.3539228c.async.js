"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1642],{19054:function(e,t,n){var r=n(1413),a=n(91),s=n(67294),i=n(29258),u=n(85893),o=["fieldProps","request","params","proFieldProps"],l=function(e,t){var n=e.fieldProps,s=e.request,l=e.params,d=e.proFieldProps,c=(0,a.Z)(e,o);return(0,u.jsx)(i.Z,(0,r.Z)({valueType:"treeSelect",fieldProps:n,ref:t,request:s,params:l,filedConfig:{customLightMode:!0},proFieldProps:d},c))},d=s.forwardRef(l);t.Z=d},952:function(e,t,n){var r=n(34994);t.ZP=r.A},36497:function(e,t,n){n.d(t,{O9:function(){return f},ZG:function(){return m},bN:function(){return h},p1:function(){return c}});var r=n(15009),a=n.n(r),s=n(97857),i=n.n(s),u=n(99289),o=n.n(u),l=n(85615),d=n(86745);function c(e){return p.apply(this,arguments)}function p(){return(p=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/autoreply/query/org",{method:"GET",params:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/autoreply/create",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/autoreply/update",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return(y=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/autoreply/delete",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},10411:function(e,t,n){n.d(t,{AP:function(){return c},_J:function(){return h},t5:function(){return m},v_:function(){return f}});var r=n(15009),a=n.n(r),s=n(97857),i=n.n(s),u=n(99289),o=n.n(u),l=n(85615),d=n(86745);function c(e){return p.apply(this,arguments)}function p(){return(p=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/kbase/query/org",{method:"GET",params:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/kbase/create",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/kbase/update",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return(y=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/kbase/delete",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},84125:function(e,t,n){n.d(t,{D$:function(){return f},EP:function(){return h},hS:function(){return m},z_:function(){return c}});var r=n(15009),a=n.n(r),s=n(97857),i=n.n(s),u=n(99289),o=n.n(u),l=n(85615),d=n(86745);function c(e){return p.apply(this,arguments)}function p(){return(p=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/mem/query/org",{method:"GET",params:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/mem/create",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/mem/update",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return(y=o()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/member/delete",{method:"POST",data:i()(i()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},45480:function(e,t,n){n.r(t),n.d(t,{default:function(){return we}});var r=n(21612),a=n(67294),s=n(5574),i=n.n(s),u=n(11941),o=n(15009),l=n.n(o),d=n(97857),c=n.n(d),p=n(99289),f=n.n(p),g=n(80049),m=n(3418),v=n(73803),h=n(30694),y=n(85615),b=n(73445),x=n(782),j=n(18753),k=(0,b.Ue)()((0,x.mW)((0,x.tJ)((0,j.n)((function(e,t){return{memberResult:{data:{content:[],totalElements:0}},insertMember:function(t){e((function(e){e.memberResult.data.content.unshift(t)}))},updateMember:function(t){e((function(e){var n=e.memberResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n[r]=t:console.warn("Member with uid ".concat(t.uid," not found."))}))},deleteMember:function(t){e((function(e){var n=e.memberResult.data.content,r=n.findIndex((function(e){return e.uid===t.uid}));-1!==r?n.splice(r,1):console.warn("Member with uid ".concat(t.uid," not found."))}))},setMemberResult:function(t){e({memberResult:t})},deleteMemberCache:function(){return e({},!0)}}})),{name:y.PQL}))),w=n(53004),S=n(88484),M=n(34994),F=n(5966),Z=n(90672),q=n(19054),R=n(86745),C=n(8232),A=n(7134),U=n(14726),P=n(85893),T=function(){var e=M.A.useForm(),t=i()(e,1)[0],n=(0,R.useIntl)(),r=(0,v.Z)().translateString,s=k((function(e){return e.memberResult})),u=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),o=u.currentAgent,d=u.setCurrentAgent,p=(0,a.useState)(""),y=i()(p,2),b=y[0],x=y[1],j=(0,a.useMemo)((function(){for(var e,t,n=[],r=0;r<s.data.content.length;r++){var a={title:"",value:"",children:[]};e=s.data.content[r],(t=a).title=e.nickname,t.value=e.uid,n.push(a)}return n}),[s]);(0,a.useEffect)((function(){var e;o&&t.setFieldsValue({nickname:r(null==o?void 0:o.nickname),email:null==o?void 0:o.email,mobile:null==o?void 0:o.mobile,description:r(null==o?void 0:o.description),memberUid:null==o||null===(e=o.member)||void 0===e?void 0:e.uid})}),[o]);var T=function(){var e=f()(l()().mark((function e(t){var r,a,s,i,u,p,f,v,h;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),g.yw.loading(n.formatMessage({id:"updating"})),v=c()(c()(c()({},o),t),{},{avatar:b,serviceSettings:c()(c()({},o.serviceSettings),{},{robotUid:null==o||null===(r=o.serviceSettings)||void 0===r||null===(r=r.robot)||void 0===r?void 0:r.uid,quickFaqUids:null==o||null===(a=o.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),faqUids:null==o||null===(s=o.serviceSettings)||void 0===s||null===(s=s.faqs)||void 0===s?void 0:s.map((function(e){return e.uid})),guessFaqUids:null==o||null===(i=o.serviceSettings)||void 0===i||null===(i=i.guessFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),hotFaqUids:null==o||null===(u=o.serviceSettings)||void 0===u||null===(u=u.hotFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),shortcutFaqUids:null==o||null===(p=o.serviceSettings)||void 0===p||null===(p=p.shortcutFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),worktimeUids:null==o||null===(f=o.serviceSettings)||void 0===f||null===(f=f.worktimes)||void 0===f?void 0:f.map((function(e){return e.uid}))}),autoReplySettings:c()({},o.autoReplySettings)}),console.log("agentObject:",v),e.next=6,(0,m.sE)(v);case 6:h=e.sent,console.log("updateAgent response:",h),200===h.code?(g.yw.destroy(),g.yw.success(n.formatMessage({id:"update.success"})),d(h.data)):(g.yw.destroy(),g.yw.error(h.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e;o&&(x(o.avatar),t.setFieldValue("memberUid",null==o||null===(e=o.member)||void 0===e?void 0:e.uid))}),[o]),(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(M.A,{form:t,style:{marginLeft:"100px"},onFinish:T,children:[(0,P.jsx)(C.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,P.jsxs)(w.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),x(e)},onError:function(e){console.log("handleUploadError:",e)},children:[(0,P.jsx)(A.C,{src:b}),(0,P.jsx)(U.ZP,{icon:(0,P.jsx)(S.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,P.jsx)(F.Z,{width:"md",name:"nickname",label:"客服卡片-展示客服昵称",rules:[{required:!0,message:"请输入客服昵称"}]}),(0,P.jsx)(F.Z,{width:"md",name:"email",label:"客服卡片-展示邮箱",rules:[{required:!0,message:"请输入邮箱"}]}),(0,P.jsx)(F.Z,{width:"md",name:"mobile",label:"客服卡片-展示手机号",rules:[{required:!0,message:"请输入手机号"}]}),(0,P.jsx)(Z.Z,{width:"md",name:"description",label:"客服卡片-展示描述",rules:[{required:!0,message:"请输入描述"}]}),(0,P.jsx)(q.Z,{width:"md",name:"memberUid",label:"绑定成员-用于账号登录",fieldProps:{treeDefaultExpandAll:!0,treeData:j,onChange:function(e){console.log("onTreeSelectChange:",e);for(var n=0;n<s.data.content.length;n++){var r=s.data.content[n];r.uid===e&&(t.setFieldsValue({nickname:r.nickname}),t.setFieldsValue({email:r.email}),t.setFieldsValue({mobile:r.mobile}))}}},placeholder:"Please select",disabled:!0})]})})},N=n(38437),V=n(79964),E=n(50748),O=n(99072),I=n(9025),D=n(63772),L=n(23035),z=n(51364),G=n(64423),Q=n(54050),B=n(36497),_=n(10411),H=n(87676),W=n(87603),J=n(52688),K=n(64317),Y=function(e){var t,n=e.type,r=(0,R.useIntl)(),s=(0,R.useNavigate)(),u=M.A.useForm(),o=i()(u,1)[0],d=(0,v.Z)().translateString,p=(0,a.useState)(),b=i()(p,2),x=b[0],j=b[1],k=(0,a.useState)(),w=i()(k,2),S=w[0],F=w[1],q=(0,H.u)((function(e){return e.currentOrg})),C=(0,h.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),A=C.currentAgent,T=C.setCurrentAgent,N=(0,a.useState)(y.DST),V=i()(N,2),E=V[0],O=V[1],I=function(){var e=f()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:q.uid},e.next=4,(0,B.p1)(t);case 4:n=e.sent,console.log("getAutoReplys response:",t,n),g.yw.destroy(),200===n.code?j(n):g.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){I()}),[]);var D=function(){var e=f()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,type:E===y.PZ1?y.jNC:y.QPQ,orgUid:q.uid},e.next=4,(0,_.AP)(t);case 4:n=e.sent,console.log("getKeywordBase response:",t,n),g.yw.destroy(),200===n.code?F(n):g.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){D()}),[E]),(0,a.useEffect)((function(){var e,t,r,a,s,i,u,l;n===y.Njn&&(O(null==A||null===(e=A.autoReplySettings)||void 0===e?void 0:e.autoReplyType),o.setFieldsValue({enabled:null==A||null===(t=A.autoReplySettings)||void 0===t?void 0:t.enabled,autoReplyType:null==A||null===(r=A.autoReplySettings)||void 0===r?void 0:r.autoReplyType,autoReplyUid:null==A||null===(a=A.autoReplySettings)||void 0===a?void 0:a.autoReplyUid,autoReplyContentType:null==A||null===(s=A.autoReplySettings)||void 0===s?void 0:s.autoReplyContentType,autoReplyContent:null==A||null===(i=A.autoReplySettings)||void 0===i?void 0:i.autoReplyContent,kbUid:null==A||null===(u=A.autoReplySettings)||void 0===u?void 0:u.kbUid}),o.setFieldValue("autoReplyUid",null==A||null===(l=A.autoReplySettings)||void 0===l?void 0:l.autoReplyContent))}),[A]);var L=function(){var e=f()(l()().mark((function e(t){var a,s,i,u,o,d,p,f,v;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleAutoReplySubmit:",t),n!==y.Njn){e.next=9;break}return f=c()(c()({},A),{},{serviceSettings:c()(c()({},null==A?void 0:A.serviceSettings),{},{robotUid:null==A||null===(a=A.serviceSettings)||void 0===a||null===(a=a.robot)||void 0===a?void 0:a.uid,quickFaqUids:null==A||null===(s=A.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==A||null===(i=A.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==A||null===(u=A.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==A||null===(o=A.serviceSettings)||void 0===o||null===(o=o.hotFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(d=A.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),worktimeUids:null==A||null===(p=A.serviceSettings)||void 0===p||null===(p=p.worktimes)||void 0===p?void 0:p.map((function(e){return e.uid}))}),autoReplySettings:c()(c()({},A.autoReplySettings),{},{enabled:t.enabled,autoReplyType:t.autoReplyType,autoReplyUid:t.autoReplyUid,autoReplyContentType:t.autoReplyContentType,autoReplyContent:t.autoReplyContent,kbUid:t.kbUid})}),console.log("agentObject:",f),e.next=6,(0,m.sE)(f);case 6:v=e.sent,console.log("updateAgent response:",v),200===v.code?(g.yw.destroy(),g.yw.success(r.formatMessage({id:"update.success"})),T(v.data)):(g.yw.destroy(),g.yw.error(v.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=f()(l()().mark((function e(t){var a,s,i,u,o,d,p,f,v;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleAutoReplyEnabledChange:",t),n!==y.Njn){e.next=9;break}return f=c()(c()({},A),{},{serviceSettings:c()(c()({},null==A?void 0:A.serviceSettings),{},{robotUid:null==A||null===(a=A.serviceSettings)||void 0===a||null===(a=a.robot)||void 0===a?void 0:a.uid,quickFaqUids:null==A||null===(s=A.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==A||null===(i=A.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==A||null===(u=A.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==A||null===(o=A.serviceSettings)||void 0===o||null===(o=o.hotFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(d=A.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),worktimeUids:null==A||null===(p=A.serviceSettings)||void 0===p||null===(p=p.worktimes)||void 0===p?void 0:p.map((function(e){return e.uid}))}),autoReplySettings:c()(c()({},A.autoReplySettings),{},{enabled:t})}),console.log("agentObject:",f),e.next=6,(0,m.sE)(f);case 6:v=e.sent,console.log("updateAgent response:",v),200===v.code?(g.yw.destroy(),g.yw.success(r.formatMessage({id:"update.success"})),T(v.data)):(g.yw.destroy(),g.yw.error(v.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(M.A,{form:o,onFinish:L,children:[(0,P.jsx)(J.Z,{width:"md",name:"enabled",label:"是否启用自动回复",fieldProps:{onChange:z}}),(0,P.jsx)(K.Z,{width:"md",name:"autoReplyType",label:"自动回复类型",options:[{label:"固定回复",value:y.DST},{label:"关键字匹配",value:y.PZ1},{label:"大模型回复",value:y.PcP}],fieldProps:{onChange:function(e,t){!function(e,t){console.log("handleAutoReplyTypeChange:",e),O(e)}(e)}}}),E===y.DST&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(M.A.Item,{children:(0,P.jsx)(U.ZP,{icon:(0,P.jsx)(W.Z,{}),onClick:function(){s("/kb/autoreply/data")},children:"添加固定回复内容"},"github")}),(0,P.jsx)(K.Z,{width:"md",name:"autoReplyUid",label:"选择固定回复内容",options:null==x||null===(t=x.data)||void 0===t?void 0:t.content.map((function(e){return{label:d(e.content),value:e.uid}})),fieldProps:{onChange:function(e,t){!function(e,t){var n;console.log("handleAutoReplySelectChange:",e),null==x||null===(n=x.data.content)||void 0===n||n.forEach((function(t){t.uid===e&&o.setFieldsValue({autoReplyContentType:t.type,autoReplyContent:t.content})}))}(e)}}}),(0,P.jsx)(K.Z,{width:"md",name:"autoReplyContentType",label:"固定回复类型",options:[{label:"文本",value:y.PYi},{label:"图片",value:y.Qm},{label:"视频",value:y.tVi},{label:"音频",value:y.Yu1},{label:"文件",value:y.Qn}],disabled:!0}),(0,P.jsx)(Z.Z,{width:"md",name:"autoReplyContent",label:"固定回复内容",disabled:!0})]}),E===y.PZ1&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(M.A.Item,{children:(0,P.jsx)(U.ZP,{icon:(0,P.jsx)(W.Z,{}),onClick:function(){s("/kb/keyword/data")},children:"添加关键词知识库"},"github")}),(0,P.jsx)(K.Z,{width:"md",name:"kbUid",label:"选择关键词知识库",options:null==S?void 0:S.data.content.map((function(e){return{label:d(e.name),value:e.uid}}))})]}),E===y.PcP&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(M.A.Item,{children:(0,P.jsx)(U.ZP,{icon:(0,P.jsx)(W.Z,{}),onClick:function(){s("/kb/llm/data")},children:"添加大模型知识库"},"github")}),(0,P.jsx)(K.Z,{width:"md",name:"kbUid",label:"选择大模型知识库库",options:null==S?void 0:S.data.content.map((function(e){return{label:d(e.name),value:e.uid}}))})]})]})})},$=n(73453),X=n(48489),ee=n(91116),te=n(35791),ne=function(){var e=(0,R.useIntl)(),t=(0,a.useMemo)((function(){return!0}),[]),n=[{key:"faq",label:(0,P.jsx)(R.FormattedMessage,{id:"menu.knowledge.faq",defaultMessage:"FAQ"}),children:(0,P.jsx)(V.Z,{type:y.Njn}),disabled:t},{key:"quickFaqs",label:(0,P.jsx)(R.FormattedMessage,{id:"menu.knowledge.quickbutton",defaultMessage:"QuickButton"}),children:(0,P.jsx)(z.Z,{type:y.Njn}),disabled:t},{key:"faqGuess",label:(0,P.jsx)(R.FormattedMessage,{id:"menu.knowledge.faqGuess",defaultMessage:"FaqGuess"}),children:(0,P.jsx)(G.Z,{type:y.Njn}),disabled:t},{key:"faqHot",label:(0,P.jsx)(R.FormattedMessage,{id:"menu.knowledge.faqHot",defaultMessage:"FaqHot"}),children:(0,P.jsx)(E.Z,{type:y.Njn}),disabled:t},{key:"faqShortcut",label:(0,P.jsx)(R.FormattedMessage,{id:"menu.knowledge.faqShortcut",defaultMessage:"FaqShortcut"}),children:(0,P.jsx)(O.Z,{type:y.Njn}),disabled:t},{key:"rate",label:(0,P.jsx)(R.FormattedMessage,{id:"rate",defaultMessage:"Rate"}),children:(0,P.jsx)(D.Z,{type:y.Njn}),disabled:t},{key:"autoreply",label:(0,P.jsx)(R.FormattedMessage,{id:"autoreply",defaultMessage:"Auto Reply"}),children:(0,P.jsx)(Y,{type:y.Njn}),disabled:t},{key:"leaveMsg",label:(0,P.jsx)(R.FormattedMessage,{id:"leavemsg",defaultMessage:"Leave Msg"}),children:(0,P.jsx)(I.Z,{type:y.Njn}),disabled:t},{key:"survey",label:(0,P.jsx)(R.FormattedMessage,{id:"survey",defaultMessage:"Survey"}),children:(0,P.jsx)(te.Z,{type:y.Njn}),disabled:t},{key:"history",label:(0,P.jsx)(R.FormattedMessage,{id:"history",defaultMessage:"History"}),children:(0,P.jsx)($.Z,{type:y.Njn}),disabled:t},{key:"inputassociation",label:(0,P.jsx)(R.FormattedMessage,{id:"inputassociation",defaultMessage:"Input Association"}),children:(0,P.jsx)(ee.Z,{type:y.Njn}),disabled:t},{key:"black",label:(0,P.jsx)(R.FormattedMessage,{id:"black",defaultMessage:"Black"}),children:(0,P.jsx)(Q.Z,{type:y.Njn}),disabled:t},{key:"antiharassment",label:(0,P.jsx)(R.FormattedMessage,{id:"antiharassment",defaultMessage:"Anti Harassment"}),children:(0,P.jsx)(L.Z,{type:y.Njn}),disabled:t}],r=(0,a.useState)([]),s=i()(r,2),o=s[0],l=s[1];return(0,a.useEffect)((function(){l(n)}),[]),(0,P.jsxs)(P.Fragment,{children:[t&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(N.Z,{message:"企业版-高级功能",style:{marginBottom:20},type:"warning",action:(0,P.jsx)(U.ZP,{type:"link",icon:(0,P.jsx)(X.Z,{}),onClick:function(){return window.open(y.rVq)},children:e.formatMessage({id:"setting.helpdoc"})})})}),(0,P.jsx)(u.Z,{tabPosition:"left",items:o})]})},re=n(36649),ae=n(16737),se=n(31207),ie=n(22268),ue=n(99606),oe=n(59518),le=function(){var e=(0,R.useIntl)(),t=(0,a.useState)([]),n=i()(t,2),r=n[0],s=n[1],o=[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,P.jsx)(T,{})},{key:"serviceSettings",label:e.formatMessage({id:"pages.agent.service.settings",defaultMessage:"Service Settings"}),children:(0,P.jsx)(oe.Z,{type:y.Njn})},{key:"robot",label:e.formatMessage({id:"pages.agent.robot",defaultMessage:"Robot"}),children:(0,P.jsx)(ue.Z,{type:y.Njn})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,P.jsx)(ne,{})},{key:"channel",label:e.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,P.jsx)(re.Z,{type:y.Njn})},{key:"channelsocial",label:e.formatMessage({id:"channelsocial",defaultMessage:"Social Channel"}),children:(0,P.jsx)(ae.Z,{type:y.Njn})},{key:"channelshop",label:e.formatMessage({id:"channelshop",defaultMessage:"Shop Channel"}),children:(0,P.jsx)(ie.Z,{type:y.Njn})},{key:"channelforeign",label:e.formatMessage({id:"channelforeign",defaultMessage:"Foreign Channel"}),children:(0,P.jsx)(se.Z,{type:y.Njn})}];return(0,a.useEffect)((function(){s(o)}),[]),(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(u.Z,{defaultActiveKey:"basic",items:r})})},de=n(39825),ce=n(11475),pe=n(64789),fe=n(85576),ge=n(86250),me=n(2487),ve=n(952),he=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,s=ve.ZP.useForm(),u=i()(s,1)[0],o=(0,H.u)((function(e){return e.currentOrg})),l=k((function(e){return e.memberResult})),d=(0,a.useMemo)((function(){for(var e,t,n=[],r=0;r<l.data.content.length;r++){var a={title:"",value:"",children:[]};e=l.data.content[r],(t=a).title=e.nickname,t.value=e.uid,n.push(a)}return n}),[l]);return(0,P.jsx)("div",{children:(0,P.jsx)(fe.Z,{title:"创建客服",open:t,forceRender:!0,onOk:function(){console.log("handleOk"),u.validateFields().then((function(e){console.log("form values:",e);var t={nickname:u.getFieldValue("nickname"),email:u.getFieldValue("email"),mobile:u.getFieldValue("mobile"),memberUid:u.getFieldValue("memberUid"),orgUid:o.uid};console.log("agent:",t),r(t)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){console.log("handleCancel"),n()},children:(0,P.jsxs)(ve.ZP,{form:u,name:"agentForm",style:{maxWidth:400},submitter:!1,children:[(0,P.jsx)(q.Z,{label:"绑定成员",name:"memberUid",tooltip:"请先到组织-》成员-》创建成员",rules:[{required:!0,message:"请选择成员!"}],fieldProps:{multiple:!1,treeDefaultExpandAll:!0,placeholder:"请选择成员",onChange:function(e){console.log("onTreeSelectChange:",e);for(var t=0;t<l.data.content.length;t++){var n=l.data.content[t];n.uid===e&&(console.log("element:",n),u.setFieldsValue({nickname:n.nickname}),u.setFieldsValue({email:n.email}),u.setFieldsValue({mobile:n.mobile}))}},treeData:d}}),(0,P.jsx)(F.Z,{label:"昵称",name:"nickname",rules:[{required:!0,message:"请输入昵称!"}]}),(0,P.jsx)(F.Z,{label:"邮箱",name:"email",rules:[{required:!0,message:"请输入邮箱!"},{type:"email",message:"请输入正确的邮箱地址"}]}),(0,P.jsx)(F.Z,{label:"手机号",name:"mobile",rules:[{required:!0,message:"请输入手机号"}]})]})})})},ye=n(84125),be=function(){var e=(0,R.useIntl)(),t=(0,a.useRef)(!1),n=(0,v.Z)(),r=n.translateString,s=n.translateStringTranct,u=(0,de.Z)().isDarkMode,o=(0,a.useState)(!1),d=i()(o,2),c=d[0],p=d[1],b=(0,H.u)((function(e){return e.currentOrg})),x=k((function(e){return e.setMemberResult})),j=(0,h.E)((function(e){return{agentResult:e.agentResult,currentAgent:e.currentAgent,insertAgent:e.insertAgent,setAgentResult:e.setAgentResult,setCurrentAgent:e.setCurrentAgent,deleteCurrentAgent:e.deleteCurrentAgent}})),w=j.agentResult,S=j.currentAgent,M=j.insertAgent,F=j.setAgentResult,Z=j.setCurrentAgent,q=j.deleteCurrentAgent,C=fe.Z.useModal(),T=i()(C,2),N=T[0],V=T[1],E=function(){var t=f()(l()().mark((function t(n){var r;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("delete agent",n),g.yw.loading(e.formatMessage({id:"deleting",defaultMessage:"Deleting"})),t.next=4,(0,m.Lr)(n);case 4:r=t.sent,console.log("delete agent response",r),200===r.code?(g.yw.destroy(),g.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),q(n.uid)):(g.yw.destroy(),g.yw.error(r.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=f()(l()().mark((function e(){var n,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=3;break}return console.log("isLoading: 1",t.current),e.abrupt("return");case 3:return t.current=!0,g.yw.loading("loading"),n={pageNumber:0,pageSize:50,orgUid:b.uid},e.next=8,(0,m._t)(n);case 8:r=e.sent,console.log("queryAgentsByOrg: ",r),200===r.code?(g.yw.destroy(),F(r)):(g.yw.destroy(),g.yw.error(r.message)),t.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=f()(l()().mark((function e(){var t,n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,orgUid:b.uid},e.next=3,(0,ye.z_)(t);case 3:n=e.sent,console.log("queryAllMembers:",t,n),200===n.code?x(n):g.yw.error(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){O(),I()}),[]);var D=function(){var t=f()(l()().mark((function t(n){var r;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("save agent"),g.yw.loading(e.formatMessage({id:"creating",defaultMessage:"Creating"})),t.next=4,(0,m.x_)(n);case 4:r=t.sent,console.log("create agent:",r),200===r.code?(g.yw.destroy(),g.yw.success(e.formatMessage({id:"create.success"})),M(r.data),p(!1)):(g.yw.destroy(),p(!1),g.yw.error(r.message));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(ge.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,P.jsx)(U.ZP,{size:"small",type:"primary",icon:(0,P.jsx)(pe.Z,{}),onClick:function(){p(!0)},children:e.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,P.jsx)(U.ZP,{size:"small",onClick:O,children:e.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,P.jsx)(U.ZP,{onClick:function(){return function(t){N.confirm({title:e.formatMessage({id:"deleteTip"}),icon:(0,P.jsx)(ce.Z,{}),content:"".concat(e.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"【").concat(r(t.nickname),"】？"),onOk:function(){E(t)},onCancel:function(){},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"})})}(S)},size:"small",danger:!0,disabled:""===(null==S?void 0:S.uid),children:e.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,P.jsx)(me.Z,{itemLayout:"horizontal",dataSource:w.data.content,renderItem:function(e,t){return(0,P.jsx)(me.Z.Item,{style:S.uid===e.uid?{backgroundColor:u?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){Z(e)},children:(0,P.jsx)(me.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,P.jsx)(A.C,{src:e.avatar}),title:(0,P.jsx)(P.Fragment,{children:s(e.nickname)}),description:(n=e,(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("span",{style:{color:"#999999",fontSize:12},children:[n.status===y.Ra4&&"[✅接待]",n.status===y.tU$&&"[忙碌]",n.status===y.LZ1&&"[下线]",n.connected?"✅连接":"❌断开"]})}))})});var n}}),(0,P.jsx)(he,{open:c,onClose:function(){p(!1)},onSubmit:D}),V]})},xe=n(77154),je=r.Z.Sider,ke=r.Z.Content,we=function(){var e=(0,xe.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth;return(0,a.useEffect)((function(){}),[]),(0,P.jsxs)(r.Z,{children:[(0,P.jsx)(je,{width:n,style:t,children:(0,P.jsx)(be,{})}),(0,P.jsx)(r.Z,{children:(0,P.jsx)(ke,{children:(0,P.jsx)(le,{})})})]})}}}]);