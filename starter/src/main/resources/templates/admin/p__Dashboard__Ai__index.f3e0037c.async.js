"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2522],{11984:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},s=n(64423),i=function(e,t){return o.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};var l=o.forwardRef(i)},50484:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=n(64423),i=function(e,t){return o.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};var l=o.forwardRef(i)},70458:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=n(64423),i=function(e,t){return o.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};var l=o.forwardRef(i)},69957:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(17082),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=n(64423),i=function(e,t){return o.createElement(s.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};var l=o.forwardRef(i)},8091:function(e,t,n){var r=n(17082),o=n(51190),a=n(19753),s=n(44194),i=n(84686),l=n(5986),c=n(31549),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var n=e.fieldProps,d=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,b=e.showSearch,h=e.options,y=(0,o.Z)(e,u),x=(0,s.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,a.h)(m),request:v,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:h,mode:g,showSearch:b,getPopupContainer:x.getPopupContainer},n),ref:t,proFieldProps:p},y),{},{children:d}))},p=s.forwardRef((function(e,t){var n=e.fieldProps,u=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,b=e.options,h=(0,o.Z)(e,d),y=(0,r.Z)({options:b,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),x=(0,s.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,a.h)(m),request:v,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:x.getPopupContainer},y),ref:t,proFieldProps:p},h),{},{children:u}))})),g=s.forwardRef(f);g.SearchSelect=p,g.displayName="ProFormComponent",t.Z=g},11607:function(e,t,n){var r=n(17082),o=n(51190),a=n(44194),s=n(5986),i=n(31549),l=["fieldProps","proFieldProps"],c=function(e,t){var n=e.fieldProps,a=e.proFieldProps,c=(0,o.Z)(e,l);return(0,i.jsx)(s.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:a},c))};t.Z=a.forwardRef(c)},28947:function(e,t,n){n.d(t,{$l:function(){return b},JT:function(){return y},gf:function(){return w},lg:function(){return p},p0:function(){return d},s9:function(){return m}});var r=n(90819),o=n.n(r),a=n(73193),s=n.n(a),i=n(89933),l=n.n(i),c=n(18850),u=n(79434);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/query/org",{method:"GET",params:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create/prompt",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return(x=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update/prompt",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return M.apply(this,arguments)}function M(){return(M=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/delete",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},61949:function(e,t,n){n.d(t,{AP:function(){return d},_J:function(){return b},t5:function(){return m},v_:function(){return p}});var r=n(90819),o=n.n(r),a=n(73193),s=n.n(a),i=n(89933),l=n.n(i),c=n(18850),u=n(79434);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/query/org",{method:"GET",params:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/create",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/update",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/delete",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},11968:function(e,t,n){n.d(t,{G:function(){return f}});var r=n(73193),o=n.n(r),a=(n(44194),n(17433)),s=n(18850),i=n(28977),l=n.n(i),c=n(32078),u=n(66393),d=n(31549),f=function(e){var t=e.children,n=e.onSuccess,r=e.onError,i={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:s.IrL,category_uid:"",kb_uid:"",client:s.bVn},f={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;i.file=e,i.file_name=t,i.file_type=e.type,console.log("beforeUpload",i)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data;n(t),c.yw.success("".concat(e.file.name," 上传成功"))}else r(e.file),c.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(c.yw.error("".concat(e.file.name," 上传失败")),r(e.file))}};return(0,d.jsx)(a.Z,o()(o()({},f),{},{children:t}))}},66964:function(e,t,n){var r=n(39522);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},79720:function(e,t,n){var r=n(18850),o=n(23836),a=n(79434);t.Z=function(){var e=(0,a.useIntl)();return{translateString:function(t){return t&&t.startsWith(r.VoP)?e.formatMessage({id:t,defaultMessage:t}):t},translateStringTranct:function(t){return null!=t&&t.startsWith(r.VoP)||null!=t&&t.startsWith("ROLE_")?(0,o.aS)(e.formatMessage({id:t,defaultMessage:t}),10):(0,o.aS)(t,10)}}}},19050:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(64476),o=n(44194),a=n(90819),s=n.n(a),i=n(89933),l=n.n(i),c=n(45332),u=n.n(c),d=n(30264),f=n(83730),p=n(80093),g=n(12265),m=n(90136),v=n(21276),b=n(50484),h=n(70458),y=n(79434),x=n(39522),w=n(60346),M=n(18850),S=n(5728),Z=n(43688),j=n(8091),C=n(31549),k=function(e){var t=e.open,n=e.onClose,r=e.onSubmit,o=(0,y.useIntl)(),a=S.A.useForm(),s=u()(a,1)[0],i=(0,w.u)((function(e){return e.currentOrg}));return(0,C.jsx)("div",{children:(0,C.jsx)(f.Z,{title:o.formatMessage({id:"pages.robot.new",defaultMessage:"New"}),open:t,forceRender:!0,okText:o.formatMessage({id:"save",defaultMessage:"Save"}),onOk:function(){console.log("handleSaveRobot"),s.validateFields().then((function(e){console.log("handleSaveRobot values:",e);var t={nickname:e.nickname,type:e.type,orgUid:i.uid};console.log("robotObject:",t),r(t)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){n()},children:(0,C.jsxs)(S.A,{form:s,name:"basic",style:{maxWidth:400},submitter:!1,children:[(0,C.jsx)(Z.Z,{label:o.formatMessage({id:"nickname",defaultMessage:"Nickname"}),name:"nickname",rules:[{required:!0,message:o.formatMessage({id:"nickname",defaultMessage:"Nickname"})}]}),(0,C.jsx)(j.Z,{label:o.formatMessage({id:"type",defaultMessage:"Type"}),name:["type"],options:[{label:o.formatMessage({id:M.f4h,defaultMessage:"Service"}),value:M.f4h}],rules:[{required:!0,message:o.formatMessage({id:"choose",defaultMessage:"Choose"})}],fieldProps:{placeholder:o.formatMessage({id:"choose",defaultMessage:"Choose"}),onChange:function(e){console.log("onTreeSelectChange:",e)},allowClear:!0}})]})})})},R=n(28947),P=n(32078),$=n(79720),E=function(){var e=(0,x.Z)().isDarkMode,t=(0,y.useIntl)(),n=(0,o.useRef)(!1),r=(0,$.Z)(),a=r.translateString,i=r.translateStringTranct,c=(0,d.V)((function(e){return{robotResult:e.robotResult,currentRobot:e.currentRobot,insertRobot:e.insertRobot,deleteCurrentRobot:e.deleteCurrentRobot,setRobotResult:e.setRobotResult,setCurrentRobot:e.setCurrentRobot}})),S=c.robotResult,Z=c.currentRobot,j=c.insertRobot,E=c.deleteCurrentRobot,O=c.setRobotResult,I=c.setCurrentRobot,q=(0,w.u)((function(e){return e.currentOrg})),F=f.Z.useModal(),T=u()(F,2),N=T[0],V=T[1],L=function(){var e=l()(s()().mark((function e(n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),P.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,R.gf)(n);case 4:r=e.sent,console.log("delete robot response",r),200===r.code?(P.yw.destroy(),P.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),E(n.uid)):(P.yw.destroy(),P.yw.error(r.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(s()().mark((function e(){var t,r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,P.yw.loading("loading"),t={pageNumber:0,pageSize:50,level:M.K78,type:M.f4h,orgUid:null==q?void 0:q.uid},e.next=8,(0,R.p0)(t);case 8:r=e.sent,console.log("queryRobotsByOrg: ",r),200===r.code?(P.yw.destroy(),O(r)):(P.yw.destroy(),P.yw.error(r.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){z()}),[]);var U=(0,o.useState)(!1),A=u()(U,2),B=A[0],D=A[1],H=function(){var e=l()(s()().mark((function e(n){var r;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.yw.loading(t.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=3,(0,R.lg)(n);case 3:r=e.sent,console.log("handleSaveRobot response:",r),200===r.code?(P.yw.destroy(),P.yw.success(t.formatMessage({id:"create.success"})),j(r.data),D(!1)):(P.yw.destroy(),D(!1),P.yw.error(r.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){return t.formatMessage({id:null==e?void 0:e.type,defaultMessage:null==e?void 0:e.type})};return(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{style:{margin:10},children:(0,C.jsxs)(p.Z,{gap:"small",align:"flex-start",children:[(0,C.jsx)(g.ZP,{size:"small",type:"primary",icon:(0,C.jsx)(h.Z,{}),onClick:function(){D(!0)},children:t.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,C.jsx)(g.ZP,{size:"small",onClick:z,children:t.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,C.jsx)(g.ZP,{onClick:function(){return function(e){N.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,C.jsx)(b.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(a(e.nickname),"】？"),onOk:function(){L(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})}(Z)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==Z?void 0:Z.uid),children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),(0,C.jsx)(m.Z,{itemLayout:"horizontal",dataSource:S.data.content,renderItem:function(t,n){return(0,C.jsx)(m.Z.Item,{style:(null==Z?void 0:Z.uid)===t.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){I(t)},children:(0,C.jsx)(m.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,C.jsx)(v.C,{src:t.avatar}),title:(0,C.jsx)(C.Fragment,{children:i(null==t?void 0:t.nickname)}),description:W(t)})})}}),(0,C.jsx)(k,{open:B,onClose:function(){D(!1)},onSubmit:H}),V]})},O=n(50571),I=n(93982),q=n(73193),F=n.n(q),T=n(61949),N=n(11984),V=function(){var e=(0,y.useIntl)(),t=(0,y.useNavigate)(),n=S.A.useForm(),r=u()(n,1)[0],a=(0,$.Z)().translateString,i=(0,o.useState)(),c=u()(i,2),f=c[0],p=c[1],m=(0,w.u)((function(e){return e.currentOrg})),v=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),b=v.currentRobot,h=v.setCurrentRobot,x=function(){var t=l()(s()().mark((function t(){var n,r;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,type:M.QPQ,orgUid:m.uid},t.next=4,(0,T.AP)(n);case 4:r=t.sent,console.log("getKeywordBase response:",n,r),P.yw.destroy(),200===r.code?p(r):P.yw.error(r.message);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){x()}),[]),(0,o.useEffect)((function(){r.setFieldValue("kbUid",null==b?void 0:b.kbUid)}),[b]);var Z=function(){var t=l()(s()().mark((function t(n){var r,o,a,i,l,c,u;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onFinish values:",n),c=F()(F()({},b),{},{serviceSettings:F()(F()({},b.serviceSettings),{},{faqUids:null==b||null===(r=b.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),quickFaqUids:null==b||null===(o=b.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==b||null===(a=b.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==b||null===(i=b.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==b||null===(l=b.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))}),kbUid:n.kbUid}),console.log("robotObject:",c),t.next=5,(0,R.$l)(c);case 5:u=t.sent,console.log("updateRobot response:",u),200===u.code?(P.yw.destroy(),P.yw.success(e.formatMessage({id:"update.success"})),h(u.data)):(P.yw.destroy(),P.yw.error(u.message));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,C.jsx)("div",{children:(0,C.jsxs)(S.A,{form:r,onFinish:Z,children:[(0,C.jsx)(j.Z,{width:"md",name:"kbUid",label:"知识库",options:null==f?void 0:f.data.content.map((function(e){return{value:e.uid,label:a(e.name)}})),fieldProps:{onChange:function(e){console.log("kbUid:",e)}}}),(0,C.jsx)(S.A.Item,{children:(0,C.jsx)(g.ZP,{icon:(0,C.jsx)(N.Z,{}),onClick:function(){t("/kb/llm/data")},children:"添加大模型知识库"},"github")})]})})},L=n(16655),z=function(){var e=(0,y.useIntl)(),t=(0,o.useMemo)((function(){return!0}),[]),n=[{key:"kb",label:(0,C.jsx)(y.FormattedMessage,{id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,C.jsx)(V,{}),disabled:t}];return(0,C.jsxs)(C.Fragment,{children:[t&&(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(I.Z,{message:"企业版-高级功能",style:{marginBottom:20},type:"warning",action:(0,C.jsx)(g.ZP,{type:"link",icon:(0,C.jsx)(L.Z,{}),onClick:function(){return window.open(M.VPj)},children:e.formatMessage({id:"setting.helpcenter"})})})}),(0,C.jsx)(O.Z,{tabPosition:"left",items:n})]})},U=n(11968),A=n(69957),B=n(11607),D=n(47807),H=function(){var e=S.A.useForm(),t=u()(e,1)[0],n=(0,y.useIntl)(),r=(0,$.Z)().translateString,a=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),i=a.currentRobot,c=a.setCurrentRobot,f=(0,o.useState)(""),p=u()(f,2),m=p[0],b=p[1];(0,o.useEffect)((function(){var e;i&&(t.setFieldValue("nickname",r(null==i?void 0:i.nickname)),t.setFieldValue("welcomeTip",r(null==i||null===(e=i.serviceSettings)||void 0===e?void 0:e.welcomeTip)),t.setFieldValue("description",r(null==i?void 0:i.description)))}),[i]);var h=function(){var e=l()(s()().mark((function e(t){var r,o,a,l,u,d,f;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),P.yw.loading(n.formatMessage({id:"updating"})),d=F()(F()({},i),{},{serviceSettings:F()(F()({},i.serviceSettings),{},{welcomeTip:t.welcomeTip,quickFaqUids:null==i||null===(r=i.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),faqUids:null==i||null===(o=i.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==i||null===(a=i.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==i||null===(l=i.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==i||null===(u=i.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),nickname:t.nickname,description:t.description,avatar:m}),console.log("robotObject:",d),e.next=6,(0,R.$l)(d);case 6:f=e.sent,console.log("updateRobot response:",f),200===f.code?(P.yw.success(n.formatMessage({id:"update.success"})),c(f.data)):P.yw.error(f.message),P.yw.destroy();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){b(null==i?void 0:i.avatar)}),[i]),(0,C.jsxs)(S.A,{form:t,style:{marginLeft:"100px"},onFinish:h,children:[(0,C.jsx)(D.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:null==e?void 0:e.fileList},label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,C.jsxs)(U.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),b(e)},onError:function(e){console.log("handleUploadError:",e)},children:[(0,C.jsx)(v.C,{src:m}),(0,C.jsx)(g.ZP,{icon:(0,C.jsx)(A.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,C.jsx)(Z.Z,{width:"md",name:"nickname",label:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),tooltip:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),placeholder:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),rules:[{required:!0,message:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"})}]}),(0,C.jsx)(B.Z,{width:"md",name:"welcomeTip",label:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),placeholder:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),rules:[{required:!0,message:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}]}),(0,C.jsx)(B.Z,{width:"md",name:"description",label:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),rules:[{required:!0,message:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})}]})]})},W=function(e){var t=e.type;console.log("TabApi:",t);var n=(0,y.useAccess)();return n.canDebug&&console.log("TabApi canDebug"),(0,C.jsx)("div",{children:(0,C.jsx)("p",{children:(0,C.jsx)(y.Access,{accessible:n.canDebug(),fallback:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(y.FormattedMessage,{id:M.h5w})}),children:"开放api、权限控制、统计数据"})})})},_=function(){var e=(0,y.useIntl)(),t=(0,o.useState)([]),n=u()(t,2),r=n[0],a=n[1],s=[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,C.jsx)(H,{})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,C.jsx)(z,{})},{key:"tabApi",label:"API",children:(0,C.jsx)(W,{type:M._X4})}];return(0,o.useEffect)((function(){a(s)}),[]),(0,C.jsx)(O.Z,{defaultActiveKey:"basic",items:r})},G=n(66964),X=r.Z.Sider,Y=r.Z.Content,K=function(){var e=(0,G.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,o=e.contentStyle;return(0,C.jsxs)(r.Z,{children:[(0,C.jsx)(X,{width:n,style:t,children:(0,C.jsx)(E,{})}),(0,C.jsx)(r.Z,{children:(0,C.jsx)(Y,{style:o,children:(0,C.jsx)(_,{})})})]})}},30264:function(e,t,n){n.d(t,{V:function(){return d}});var r=n(73193),o=n.n(r),a=n(76711),s=n.n(a),i=n(18850),l=n(39701),c=n(83642),u=n(41617),d=(0,l.Ue)()((0,c.mW)((0,c.tJ)((0,u.n)((function(e,t){return{robotResult:{data:{content:[]}},currentRobot:{uid:"",nickname:""},insertRobot:function(t){e((function(e){e.robotResult.data.content.unshift(t)}))},setRobotResult:function(n){e({robotResult:n});var r,o=t().currentRobot;""!==o.uid&&void 0!==o||(null===(r=n.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length)>0&&e({currentRobot:n.data.content[0]})},setCurrentRobot:function(n){var r=t().robotResult.data.content,a=r.findIndex((function(e){return e.uid===n.uid}));if(-1!==a){var i=[].concat(s()(r.slice(0,a)),[n],s()(r.slice(a+1))),l=o()(o()({},t().robotResult),{},{data:{content:i}});e({robotResult:l,currentRobot:n})}else console.warn("Robot with the specified uid not found."),e({currentRobot:n})},deleteCurrentRobot:function(n){var r=t().robotResult.data.content,a=r.findIndex((function(e){return e.uid===n}));-1!==a?e({robotResult:o()(o()({},t().robotResult),{},{data:{content:[].concat(s()(r.slice(0,a)),s()(r.slice(a+1)))}})}):console.warn("Robot not found in cache:",n),t().currentRobot.uid===n&&e({currentRobot:{uid:""}})},deleteRobotCache:function(){return e({},!0)}}})),{name:i.Eis})))},93982:function(e,t,n){n.d(t,{Z:function(){return N}});var r=n(44194),o=n(34229),a=n(85793),s=n(25175),i=n(81180),l=n(14876),c=n(51865),u=n.n(c),d=n(85628),f=n(24758),p=n(38726),g=n(65441),m=n(19735),v=n(29664),b=n(35912),h=n(2645);const y=(e,t,n,r,o)=>({background:e,border:`${(0,v.bf)(r.lineWidth)} ${r.lineType} ${t}`,[`${o}-icon`]:{color:n}}),x=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:r,marginSM:o,fontSize:a,fontSizeLG:s,lineHeight:i,borderRadiusLG:l,motionEaseInOutCirc:c,withDescriptionIconSize:u,colorText:d,colorTextHeading:f,withDescriptionPadding:p,defaultPadding:g}=e;return{[t]:Object.assign(Object.assign({},(0,b.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:l,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:a,lineHeight:i},"&-message":{color:f},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${c}, opacity ${n} ${c},\n        padding-top ${n} ${c}, padding-bottom ${n} ${c},\n        margin-bottom ${n} ${c}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:p,[`${t}-icon`]:{marginInlineEnd:o,fontSize:u,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:r,color:f,fontSize:s},[`${t}-description`]:{display:"block",color:d}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},w=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:r,colorSuccessBg:o,colorWarning:a,colorWarningBorder:s,colorWarningBg:i,colorError:l,colorErrorBorder:c,colorErrorBg:u,colorInfo:d,colorInfoBorder:f,colorInfoBg:p}=e;return{[t]:{"&-success":y(o,r,n,e,t),"&-info":y(p,f,d,e,t),"&-warning":y(i,s,a,e,t),"&-error":Object.assign(Object.assign({},y(u,c,l,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},M=e=>{const{componentCls:t,iconCls:n,motionDurationMid:r,marginXS:o,fontSizeIcon:a,colorIcon:s,colorIconHover:i}=e;return{[t]:{"&-action":{marginInlineStart:o},[`${t}-close-icon`]:{marginInlineStart:o,padding:0,overflow:"hidden",fontSize:a,lineHeight:(0,v.bf)(a),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:s,transition:`color ${r}`,"&:hover":{color:i}}},"&-close-text":{color:s,transition:`color ${r}`,"&:hover":{color:i}}}}};var S=(0,h.I$)("Alert",(e=>[x(e),w(e),M(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}))),Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const j={success:o.Z,info:l.Z,error:a.Z,warning:i.Z},C=e=>{const{icon:t,prefixCls:n,type:o}=e,a=j[o]||null;return t?(0,g.wm)(t,r.createElement("span",{className:`${n}-icon`},t),(()=>({className:u()(`${n}-icon`,{[t.props.className]:t.props.className})}))):r.createElement(a,{className:`${n}-icon`})},k=e=>{const{isClosable:t,prefixCls:n,closeIcon:o,handleClose:a,ariaProps:i}=e,l=!0===o||void 0===o?r.createElement(s.Z,null):o;return t?r.createElement("button",Object.assign({type:"button",onClick:a,className:`${n}-close-icon`,tabIndex:0},i),l):null},R=r.forwardRef(((e,t)=>{const{description:n,prefixCls:o,message:a,banner:s,className:i,rootClassName:l,style:c,onMouseEnter:g,onMouseLeave:v,onClick:b,afterClose:h,showIcon:y,closable:x,closeText:w,closeIcon:M,action:j,id:R}=e,P=Z(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[$,E]=r.useState(!1);const O=r.useRef(null);r.useImperativeHandle(t,(()=>({nativeElement:O.current})));const{getPrefixCls:I,direction:q,alert:F}=r.useContext(m.E_),T=I("alert",o),[N,V,L]=S(T),z=t=>{var n;E(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},U=r.useMemo((()=>void 0!==e.type?e.type:s?"warning":"info"),[e.type,s]),A=r.useMemo((()=>!("object"!=typeof x||!x.closeIcon)||(!!w||("boolean"==typeof x?x:!1!==M&&null!=M||!!(null==F?void 0:F.closable)))),[w,M,x,null==F?void 0:F.closable]),B=!(!s||void 0!==y)||y,D=u()(T,`${T}-${U}`,{[`${T}-with-description`]:!!n,[`${T}-no-icon`]:!B,[`${T}-banner`]:!!s,[`${T}-rtl`]:"rtl"===q},null==F?void 0:F.className,i,l,L,V),H=(0,f.Z)(P,{aria:!0,data:!0}),W=r.useMemo((()=>{var e,t;return"object"==typeof x&&x.closeIcon?x.closeIcon:w||(void 0!==M?M:"object"==typeof(null==F?void 0:F.closable)&&(null===(e=null==F?void 0:F.closable)||void 0===e?void 0:e.closeIcon)?null===(t=null==F?void 0:F.closable)||void 0===t?void 0:t.closeIcon:null==F?void 0:F.closeIcon)}),[M,x,w,null==F?void 0:F.closeIcon]),_=r.useMemo((()=>{const e=null!=x?x:null==F?void 0:F.closable;if("object"==typeof e){const{closeIcon:t}=e;return Z(e,["closeIcon"])}return{}}),[x,null==F?void 0:F.closable]);return N(r.createElement(d.ZP,{visible:!$,motionName:`${T}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:h},((t,o)=>{let{className:s,style:i}=t;return r.createElement("div",Object.assign({id:R,ref:(0,p.sQ)(O,o),"data-show":!$,className:u()(D,s),style:Object.assign(Object.assign(Object.assign({},null==F?void 0:F.style),c),i),onMouseEnter:g,onMouseLeave:v,onClick:b,role:"alert"},H),B?r.createElement(C,{description:n,icon:e.icon,prefixCls:T,type:U}):null,r.createElement("div",{className:`${T}-content`},a?r.createElement("div",{className:`${T}-message`},a):null,n?r.createElement("div",{className:`${T}-description`},n):null),j?r.createElement("div",{className:`${T}-action`},j):null,r.createElement(k,{isClosable:A,prefixCls:T,closeIcon:W,handleClose:z,ariaProps:_}))})))}));var P=R,$=n(74592),E=n(32099),O=n(67019),I=n(14755);let q=function(e){function t(){var e;return(0,$.Z)(this,t),(e=(0,O.Z)(this,t,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,I.Z)(t,e),(0,E.Z)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:n,children:o}=this.props,{error:a,info:s}=this.state,i=(null==s?void 0:s.componentStack)||null,l=void 0===e?(a||"").toString():e,c=void 0===t?i:t;return a?r.createElement(P,{id:n,type:"error",message:l,description:r.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},c)}):o}}])}(r.Component);var F=q;const T=P;T.ErrorBoundary=F;var N=T},80093:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(44194),o=n(51865),a=n.n(o),s=n(82252),i=n(74511),l=n(19735),c=n(2645),u=n(53681);const d=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return a()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&d.includes(n)}})(e,t)),((e,t)=>{const n={};return p.forEach((r=>{n[`${e}-align-${r}`]=t.align===r})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return f.forEach((r=>{n[`${e}-justify-${r}`]=t.justify===r})),n})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},v=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},b=e=>{const{componentCls:t}=e,n={};return d.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},h=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},y=e=>{const{componentCls:t}=e,n={};return f.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var x=(0,c.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,o=(0,u.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[m(o),v(o),b(o),h(o),y(o)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const M=r.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:o,className:c,style:u,flex:d,gap:f,children:p,vertical:m=!1,component:v="div"}=e,b=w(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:h,direction:y,getPrefixCls:M}=r.useContext(l.E_),S=M("flex",n),[Z,j,C]=x(S),k=null!=m?m:null==h?void 0:h.vertical,R=a()(c,o,null==h?void 0:h.className,S,j,C,g(S,e),{[`${S}-rtl`]:"rtl"===y,[`${S}-gap-${f}`]:(0,i.n)(f),[`${S}-vertical`]:k}),P=Object.assign(Object.assign({},null==h?void 0:h.style),u);return d&&(P.flex=d),f&&!(0,i.n)(f)&&(P.gap=f),Z(r.createElement(v,Object.assign({ref:t,className:R,style:P},(0,s.Z)(b,["justify","wrap","align"])),p))}));var S=M},83730:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(62347),o=n(75286),a=n(20908),s=n(44194),i=n(51865),l=n.n(i),c=n(24255),u=n(95244),d=n(19735),f=n(54353),p=n(23482),g=n(5616),m=n(21979),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var b=(0,u.i)((e=>{const{prefixCls:t,className:n,closeIcon:r,closable:o,type:a,title:i,children:u,footer:b}=e,h=v(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:y}=s.useContext(d.E_),x=y(),w=t||y("modal"),M=(0,f.Z)(x),[S,Z,j]=(0,m.ZP)(w,M),C=`${w}-confirm`;let k={};return k=a?{closable:null!=o&&o,title:"",footer:"",children:s.createElement(p.O,Object.assign({},e,{prefixCls:w,confirmPrefixCls:C,rootPrefixCls:x,content:u}))}:{closable:null==o||o,title:i,footer:null!==b&&s.createElement(g.$,Object.assign({},e)),children:u},S(s.createElement(c.s,Object.assign({prefixCls:w,className:l()(Z,`${w}-pure-panel`,a&&C,a&&`${C}-${a}`,n,j,M)},h,{closeIcon:(0,g.b)(w,r),closable:o},k)))})),h=n(93703);function y(e){return(0,r.ZP)((0,r.uW)(e))}const x=a.Z;x.useModal=h.Z,x.info=function(e){return(0,r.ZP)((0,r.cw)(e))},x.success=function(e){return(0,r.ZP)((0,r.vq)(e))},x.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},x.warning=y,x.warn=y,x.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},x.destroyAll=function(){for(;o.Z.length;){const e=o.Z.pop();e&&e()}},x.config=r.ai,x._InternalPanelDoNotUseOrYouWillBeFired=b;var w=x},67019:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(42885),o=n(19567),a=n(27842);function s(e,t,n){return t=(0,r.Z)(t),(0,a.Z)(e,(0,o.Z)()?Reflect.construct(t,n||[],(0,r.Z)(e).constructor):t.apply(e,n))}}}]);