"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{73803:function(I,i,e){var u=e(85615),r=e(66419),E=e(86745);function t(){var d=(0,E.useIntl)(),l=function(_){return _&&_.startsWith(u.Vo)?d.formatMessage({id:_,defaultMessage:_}):_},v=function(_){return _!=null&&_.startsWith(u.Vo)?(0,r.aS)(d.formatMessage({id:_}),10):(0,r.aS)(_,10)};return{translateString:l,translateStringTranct:v}}i.Z=t},5486:function(I,i,e){e.r(i);var u=e(15009),r=e.n(u),E=e(97857),t=e.n(E),d=e(99289),l=e.n(d),v=e(5574),o=e.n(v),_=e(67294),p=e(8232),L=e(7134),O=e(14726),P=e(96365),A=e(34994),U=e(5966),D=e(90672),j=e(86745),C=e(88484),n=e(60247),f=e(16761),h=e(80049),S=e(66723),F=e(73803),s=e(85893),x={labelCol:{span:8},wrapperCol:{span:8}},Z=function(){var B=(0,j.useIntl)(),G=p.Z.useForm(),z=o()(G,1),V=z[0],Y=(0,F.Z)(),$=Y.translateString,W=(0,n.L)(function(M){return{userInfo:M.userInfo,setUserInfo:M.setUserInfo}}),m=W.userInfo,H=W.setUserInfo,J=(0,_.useState)(""),R=o()(J,2),K=R[0],b=R[1],N=function(a){console.log("handleUploadSuccess:",a),b(a)},Q=function(a){console.log("handleUploadError:",a)},X=function(){var M=l()(r()().mark(function a(y){var T,g;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return T=t()(t()(t()({},m),y),{},{avatar:K}),console.log(T),c.next=4,(0,f.ck)(T);case 4:g=c.sent,console.log("updateProfile response:",g),g.code===200?(h.yw.success("\u4FEE\u6539\u6210\u529F"),H(g.data)):h.yw.error("\u4FEE\u6539\u5931\u8D25");case 7:case"end":return c.stop()}},a)}));return function(y){return M.apply(this,arguments)}}(),k=function(a){return Array.isArray(a)?a:a==null?void 0:a.fileList};return(0,_.useEffect)(function(){m&&b(m.avatar)},[m]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(A.A,t()(t()({},x),{},{form:V,onFinish:X,initialValues:{nickname:m.nickname,email:m.email,mobile:m.mobile,description:$(m.description)},children:[(0,s.jsx)(p.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:k,label:B.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,s.jsxs)(S.G,{onSuccess:N,onError:Q,children:[(0,s.jsx)(L.C,{src:K}),(0,s.jsx)(O.ZP,{icon:(0,s.jsx)(C.Z,{}),children:B.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,s.jsx)(U.Z,{name:"nickname",label:"\u6635\u79F0",rules:[{required:!0}],children:(0,s.jsx)(P.Z,{})}),(0,s.jsx)(U.Z,{name:"email",label:"\u90AE\u7BB1",rules:[{type:"email"}],disabled:!0,children:(0,s.jsx)(P.Z,{})}),(0,s.jsx)(U.Z,{name:"mobile",label:"\u624B\u673A\u53F7",disabled:!0,children:(0,s.jsx)(P.Z,{})}),(0,s.jsx)(D.Z,{name:"description",label:"\u63CF\u8FF0",children:(0,s.jsx)(P.Z.TextArea,{})})]}))})};i.default=Z},60247:function(I,i,e){e.d(i,{L:function(){return d}});var u=e(85615),r=e(64529),E=e(782),t=e(71381),d=(0,r.Ue)()((0,E.mW)((0,E.tJ)((0,t.n)(function(l,v){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(_){l({userInfo:_})},setDeviceUid:function(_){l({deviceUid:_})},deleteUserInfo:function(){return l({},!0)}}}),{name:u.Em})))},66723:function(I,i,e){e.d(i,{G:function(){return p}});var u=e(97857),r=e.n(u),E=e(67294),t=e(66476),d=e(85615),l=e(27484),v=e.n(l),o=e(80049),_=e(85893),p=function(O){var P=O.children,A=O.onSuccess,U=O.onError,D={file:null,file_name:"test.png",file_type:"image/png"},j={name:"file",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(d.LA)},data:D,showUploadList:!1,beforeUpload:function(n){console.log("beforeUpload",n);var f=v()(new Date).format("YYYYMMDDHHmmss")+"_"+n.name;D.file=n,D.file_name=f,D.file_type=n.type,console.log("beforeUpload",D)},onChange:function(n){if(n.file.status!=="uploading"&&console.log(n.file,n.fileList),n.file.status==="done"){var f=n.file.response.data;console.log("url: ",f),A(f),o.yw.success("".concat(n.file.name," \u4E0A\u4F20\u6210\u529F"))}else n.file.status==="error"&&(o.yw.error("".concat(n.file.name," \u4E0A\u4F20\u5931\u8D25")),U(n.file))}};return(0,_.jsx)(t.Z,r()(r()({},j),{},{children:P}))}}}]);
