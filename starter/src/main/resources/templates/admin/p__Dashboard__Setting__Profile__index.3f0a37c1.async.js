"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9290],{88484:function(L,P,e){e.d(P,{Z:function(){return c}});var r=e(1413),o=e(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},l=p,v=e(89099),f=function(D,A){return o.createElement(v.Z,(0,r.Z)((0,r.Z)({},D),{},{ref:A,icon:l}))},M=o.forwardRef(f),c=M},90672:function(L,P,e){var r=e(1413),o=e(91),p=e(67294),l=e(24809),v=e(85893),f=["fieldProps","proFieldProps"],M=function(s,D){var A=s.fieldProps,O=s.proFieldProps,g=(0,o.Z)(s,f);return(0,v.jsx)(l.Z,(0,r.Z)({ref:D,valueType:"textarea",fieldProps:A,proFieldProps:O},g))};P.Z=p.forwardRef(M)},53004:function(L,P,e){e.d(P,{G:function(){return D}});var r=e(97857),o=e.n(r),p=e(67294),l=e(64121),v=e(85615),f=e(27484),M=e.n(f),c=e(80049),s=e(85893),D=function(O){var g=O.children,V=O.onSuccess,x=O.onError,I={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:"",category_uid:"",kb_uid:"",client:v.bVn},w={name:"file",accept:"image/*",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(v.LA8)},data:I,showUploadList:!1,beforeUpload:function(a){console.log("beforeUpload",a);var Z=M()(new Date).format("YYYYMMDDHHmmss")+"_"+a.name;I.file=a,I.file_name=Z,I.file_type=a.type,console.log("beforeUpload",I)},onChange:function(a){if(a.file.status!=="uploading"&&console.log("not uploading:",a.file),a.file.status==="done")if(console.log("response: ",a.file.response),a.file.response.code===200){var Z=a.file.response.data;V(Z),c.yw.success("".concat(a.file.name," \u4E0A\u4F20\u6210\u529F"))}else x(a.file),c.yw.error("".concat(a.file.name," \u4E0A\u4F20\u5931\u8D25"));else a.file.status==="error"&&(c.yw.error("".concat(a.file.name," \u4E0A\u4F20\u5931\u8D25")),x(a.file))}};return(0,s.jsx)(l.Z,o()(o()({},w),{},{children:g}))}},73803:function(L,P,e){var r=e(85615),o=e(66419),p=e(86745);function l(){var v=(0,p.useIntl)(),f=function(s){return s&&s.startsWith(r.VoP)?v.formatMessage({id:s,defaultMessage:s}):s},M=function(s){return s!=null&&s.startsWith(r.VoP)?(0,o.aS)(v.formatMessage({id:s}),10):(0,o.aS)(s,10)};return{translateString:f,translateStringTranct:M}}P.Z=l},22078:function(L,P,e){e.r(P),e.d(P,{default:function(){return H}});var r=e(15009),o=e.n(r),p=e(97857),l=e.n(p),v=e(99289),f=e.n(v),M=e(5574),c=e.n(M),s=e(67294),D=e(7134),A=e(14726),O=e(34994),g=e(5966),V=e(90672),x=e(86745),I=e(88484),w=e(60247),S=e(16761),a=e(80049),Z=e(53004),t=e(73803),i=e(66419),T=e(85576),n=e(85893),m=function(d){var R=d.open,C=d.onClose,F=(0,x.useIntl)(),u=function(){C()},N=function(){C()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(T.Z,{title:F.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"}),forceRender:!0,open:R,footer:null,onCancel:N,children:(0,n.jsxs)(O.A,{initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},onFinish:function(){var B=f()(o()().mark(function j(E){var z,b;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(console.log("changePassword:",E),!(E.newPassword.trim().length<6)){U.next=4;break}return a.yw.error("password length should not be less than 6"),U.abrupt("return");case 4:if(E.newPassword===E.confirmPassword){U.next=7;break}return a.yw.error("New password and confirm password do not match"),U.abrupt("return");case 7:return z={oldPassword:E.oldPassword,newPassword:E.newPassword},U.next=10,(0,S.Cp)(z);case 10:b=U.sent,console.log("changePassword response:",b),b.code===200?(a.yw.success("Password changed successfully!"),u()):a.yw.error(b.message);case 13:case"end":return U.stop()}},j)}));return function(j){return B.apply(this,arguments)}}(),children:[(0,n.jsx)(g.Z.Password,{name:"oldPassword",label:"\u539F\u5BC6\u7801(\u624B\u673A\u53F7\u76F4\u63A5\u767B\u5F55\u7528\u6237\uFF0C\u53EF\u4EE5\u7559\u7A7A)"}),(0,n.jsx)(g.Z.Password,{name:"newPassword",label:"\u65B0\u5BC6\u7801"}),(0,n.jsx)(g.Z.Password,{name:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801"})]})})})},W=m,Y={labelCol:{span:8},wrapperCol:{span:8}},G=function(){var d=(0,x.useIntl)(),R=(0,t.Z)(),C=R.translateString,F=(0,w.L)(function(y){return{userInfo:y.userInfo,setUserInfo:y.setUserInfo}}),u=F.userInfo,N=F.setUserInfo,B=(0,s.useState)(""),j=c()(B,2),E=j[0],z=j[1],b=(0,s.useState)(!1),Q=c()(b,2),U=Q[0],_=Q[1],q=function(){_(!0)},ee=function(){_(!1)},ae=function(h){console.log("handleUploadSuccess:",h),z(h)},ne=function(h){console.log("handleUploadError:",h)},se=function(){var y=f()(o()().mark(function h(k){var X,K;return o()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return X=l()(l()(l()({},u),k),{},{avatar:E}),console.log(X),$.next=4,(0,S.ck)(X);case 4:K=$.sent,console.log("updateProfile response:",K),K.code===200?(a.yw.success(d.formatMessage({id:"update.success"})),K.data.username!==u.username?(0,i.NZ)():N(K.data)):a.yw.error(K.message);case 7:case"end":return $.stop()}},h)}));return function(k){return y.apply(this,arguments)}}(),re=function(h){return Array.isArray(h)?h:h==null?void 0:h.fileList};return(0,s.useEffect)(function(){u&&z(u.avatar)},[u]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(O.A,l()(l()({},Y),{},{onFinish:se,initialValues:{uid:u.uid,username:u.username,nickname:u.nickname,email:u.email,mobile:u.mobile,description:C(u.description)},children:[(0,n.jsx)(g.Z,{name:"uid",label:"Uid",rules:[{required:!0}],readonly:!0}),(0,n.jsx)(O.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:re,label:d.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,n.jsxs)(Z.G,{onSuccess:ae,onError:ne,children:[(0,n.jsx)(D.C,{src:E}),(0,n.jsx)(A.ZP,{icon:(0,n.jsx)(I.Z,{}),children:d.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,n.jsx)(g.Z,{name:"username",label:d.formatMessage({id:"username.change.tip",defaultMessage:"Username"}),rules:[{required:!0}]}),(0,n.jsx)(A.ZP,{onClick:q,children:d.formatMessage({id:"pages.settings.reset.password",defaultMessage:"\u91CD\u7F6E\u5BC6\u7801"})}),(0,n.jsx)(g.Z,{name:"nickname",label:d.formatMessage({id:"nickname",defaultMessage:"Nickname"}),rules:[{required:!0}]}),(0,n.jsx)(g.Z,{name:"email",label:u.emailVerified?d.formatMessage({id:"email.verified",defaultMessage:"Email Verified"}):d.formatMessage({id:"email.unverified",defaultMessage:"email unverified"}),rules:[{type:"email"}],readonly:!0}),(0,n.jsx)(g.Z,{name:"mobile",label:u.mobileVerified?d.formatMessage({id:"mobile.verified",defaultMessage:"Mobile Verified"}):d.formatMessage({id:"mobile.unverified",defaultMessage:"mobile unverified"}),readonly:!0}),(0,n.jsx)(V.Z,{name:"description",label:d.formatMessage({id:"description",defaultMessage:"Description"})})]})),(0,n.jsx)(W,{open:U,onClose:ee})]})},H=G},60247:function(L,P,e){e.d(P,{L:function(){return v}});var r=e(85615),o=e(73445),p=e(782),l=e(18753),v=(0,o.Ue)()((0,p.mW)((0,p.tJ)((0,l.n)(function(f,M){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(s){f({userInfo:s})},setDeviceUid:function(s){f({deviceUid:s})},deleteUserInfo:function(){return f({},!0)}}}),{name:r.EmD})))},85576:function(L,P,e){e.d(P,{Z:function(){return Z}});var r=e(56080),o=e(38657),p=e(56745),l=e(67294),v=e(93967),f=e.n(v),M=e(40974),c=e(8745),s=e(53124),D=e(35792),A=e(32409),O=e(4941),g=e(71194),V=function(t,i){var T={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(T[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,n=Object.getOwnPropertySymbols(t);m<n.length;m++)i.indexOf(n[m])<0&&Object.prototype.propertyIsEnumerable.call(t,n[m])&&(T[n[m]]=t[n[m]]);return T};const x=t=>{const{prefixCls:i,className:T,closeIcon:n,closable:m,type:W,title:Y,children:G,footer:H}=t,J=V(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=l.useContext(s.E_),R=d(),C=i||d("modal"),F=(0,D.Z)(R),[u,N,B]=(0,g.ZP)(C,F),j=`${C}-confirm`;let E={};return W?E={closable:m!=null?m:!1,title:"",footer:"",children:l.createElement(A.O,Object.assign({},t,{prefixCls:C,confirmPrefixCls:j,rootPrefixCls:R,content:G}))}:E={closable:m!=null?m:!0,title:Y,footer:H!==null&&l.createElement(O.$,Object.assign({},t)),children:G},u(l.createElement(M.s,Object.assign({prefixCls:C,className:f()(N,`${C}-pure-panel`,W&&j,W&&`${j}-${W}`,T,B,F)},J,{closeIcon:(0,O.b)(C,n),closable:m},E)))};var I=(0,c.i)(x),w=e(94423);function S(t){return(0,r.ZP)((0,r.uW)(t))}const a=p.Z;a.useModal=w.Z,a.info=function(i){return(0,r.ZP)((0,r.cw)(i))},a.success=function(i){return(0,r.ZP)((0,r.vq)(i))},a.error=function(i){return(0,r.ZP)((0,r.AQ)(i))},a.warning=S,a.warn=S,a.confirm=function(i){return(0,r.ZP)((0,r.Au)(i))},a.destroyAll=function(){for(;o.Z.length;){const i=o.Z.pop();i&&i()}},a.config=r.ai,a._InternalPanelDoNotUseOrYouWillBeFired=I;var Z=a}}]);
