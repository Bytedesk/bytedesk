"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3165],{77154:function(x,g,t){var M=t(39825);function f(){var s=(0,M.Z)(),l=s.isDarkMode,i={borderRight:l?"1px solid #333":"1px solid #ccc",background:l?"#141414":"#f5f5f5"},p={background:l?"#141414":"#fff"},v={borderLeft:l?"1px solid #333":"1px solid #ccc",background:l?"#141414":"#f5f5f5"},y={minHeight:120,background:l?"#141414":"#f5f5f5"};return{leftSiderStyle:i,headerStyle:p,rightSiderStyle:v,contentStyle:y}}g.Z=f},70628:function(x,g,t){t.r(g),t.d(g,{default:function(){return ne}});var M=t(77154),f=t(21612),s=t(67294),l=t(15009),i=t.n(l),p=t(99289),v=t.n(p),y=t(5574),S=t.n(y),k=t(80049),N=t(97857),T=t.n(N),P=t(85615),B=t(86745);function K(r){return b.apply(this,arguments)}function b(){return b=v()(i()().mark(function r(n){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/v1/media/query/org",{method:"GET",params:T()(T()({},n),{},{client:P.bV})}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function F(r){return j.apply(this,arguments)}function j(){return j=v()(i()().mark(function r(n){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/v1/media/query/user",{method:"GET",params:T()(T()({},n),{},{client:P.bV})}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function se(r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/create",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function le(r){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/update",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function de(r){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/delete",{method:"POST",data:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}function oe(r){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/media/filter",{method:"GET",params:_objectSpread(_objectSpread({},n),{},{client:HTTP_CLIENT})}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}var H=t(64529),G=t(782),J=t(71381),V=(0,H.Ue)()((0,G.mW)((0,G.tJ)((0,J.n)(function(r,n){return{mediaResult:{data:{content:[]}},setMediaResult:function(e){r({mediaResult:e})},deleteMediaCache:function(){return r({},!0)}}}),{name:P.hS}))),Q=t(60247),X=t(96853),d=t(85893);function Y(r){return r.type==="image"?(0,d.jsx)(d.Fragment,{children:r.content.split(",").map(function(n,a){return(0,d.jsxs)("a",{href:n,target:"_blank",children:["\u67E5\u770B\u56FE\u7247 ",a+1]},a)})}):(0,d.jsx)("a",{href:r.content,target:"_blank",children:"\u64AD\u653E\u89C6\u9891"})}var q=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0},{title:"\u7C7B\u578B",dataIndex:"type",render:function(n,a){return a.type==="image"?"\u56FE\u7247":"\u89C6\u9891"}},{title:"\u5185\u5BB9",dataIndex:"content",ellipsis:!0,render:function(n,a){return Y(a)}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(n,a,e,R){return[(0,d.jsx)("a",{onClick:function(){console.log("edit record:",a)},children:"\u4FEE\u6539"},"editable")]}}],_=function(){var n=(0,Q.L)(function(o){return o.userInfo}),a=(0,s.useRef)(),e=(0,s.useState)(1),R=S()(e,2),E=R[0],L=R[1],ae=(0,s.useState)(10),z=S()(ae,2),w=z[0],ue=z[1],W=V(function(o){return{mediaResult:o.mediaResult,setMediaResult:o.setMediaResult}}),C=W.mediaResult,ie=W.setMediaResult,Z=function(){var o=v()(i()().mark(function h(){var c,m;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(c={pageNumber:E-1,pageSize:w},!n.superUser){u.next=7;break}return u.next=4,K(c);case 4:u.t0=u.sent,u.next=10;break;case 7:return u.next=9,F(c);case 9:u.t0=u.sent;case 10:m=u.t0,console.log("getAllMedias response:",c,m),m.code===200?ie(m):k.yw.error(m.message);case 13:case"end":return u.stop()}},h)}));return function(){return o.apply(this,arguments)}}();return(0,s.useEffect)(function(){Z()},[]),(0,s.useEffect)(function(){Z()},[E,w]),(0,s.useEffect)(function(){console.log("mediaResult:",C),a.current.reload()},[C]),(0,d.jsx)(X.Z,{columns:q,actionRef:a,cardBordered:!0,request:function(){var o=v()(i()().mark(function h(c,m,$){return i()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return console.log("request:",c,m,$),L(c.current),ue(c.pageSize),I.abrupt("return",Promise.resolve({data:C.data.content,success:!0,total:C.data.totalElements}));case 4:case"end":return I.stop()}},h)}));return function(h,c,m){return o.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:w,showQuickJumper:!0,onChange:function(h){console.log("page:",h)}},dateFormatter:"string",headerTitle:"\u89C6\u9891/\u56FE\u7247",toolBarRender:function(){return[]}})},ee=_,ce=f.Z.Sider,te=f.Z.Content,re=function(){var n=(0,M.Z)(),a=n.leftSiderStyle,e=n.contentStyle,R=function(L){console.log("menu click ",L)};return(0,d.jsx)(f.Z,{children:(0,d.jsx)(f.Z,{children:(0,d.jsx)(te,{style:e,children:(0,d.jsx)(ee,{})})})})},ne=re},60247:function(x,g,t){t.d(g,{L:function(){return i}});var M=t(85615),f=t(64529),s=t(782),l=t(71381),i=(0,f.Ue)()((0,s.mW)((0,s.tJ)((0,l.n)(function(p,v){return{userInfo:{uid:""},deviceUid:"",setUserInfo:function(S){p({userInfo:S})},setDeviceUid:function(S){p({deviceUid:S})},deleteUserInfo:function(){return p({},!0)}}}),{name:M.Em})))}}]);
