"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[6693],{50501:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(98037),r=n(75271),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},s=n(58720),i=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:a}))};var l=r.forwardRef(i)},71417:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(98037),r=n(75271),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=n(58720),i=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:a}))};var l=r.forwardRef(i)},85946:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(98037),r=n(75271),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=n(58720),i=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:a}))};var l=r.forwardRef(i)},35921:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(98037),r=n(75271),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=n(58720),i=function(e,t){return r.createElement(s.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:a}))};var l=r.forwardRef(i)},65948:function(e,t,n){var o=n(98037),r=n(53162),a=n(34873),s=n(75271),i=n(24763),l=n(36795),c=n(52676),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var n=e.fieldProps,d=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,b=e.showSearch,h=e.options,y=(0,r.Z)(e,u),x=(0,s.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,a.h)(m),request:v,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:h,mode:g,showSearch:b,getPopupContainer:x.getPopupContainer},n),ref:t,proFieldProps:p},y),{},{children:d}))},p=s.forwardRef((function(e,t){var n=e.fieldProps,u=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,b=e.options,h=(0,r.Z)(e,d),y=(0,o.Z)({options:b,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),x=(0,s.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,a.h)(m),request:v,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:x.getPopupContainer},y),ref:t,proFieldProps:p},h),{},{children:u}))})),g=s.forwardRef(f);g.SearchSelect=p,g.displayName="ProFormComponent",t.Z=g},92996:function(e,t,n){var o=n(98037),r=n(53162),a=n(75271),s=n(36795),i=n(52676),l=["fieldProps","proFieldProps"],c=function(e,t){var n=e.fieldProps,a=e.proFieldProps,c=(0,r.Z)(e,l);return(0,i.jsx)(s.Z,(0,o.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:a},c))};t.Z=a.forwardRef(c)},69375:function(e,t,n){n.d(t,{$l:function(){return m},gf:function(){return b},lg:function(){return p},p0:function(){return d}});var o=n(90228),r=n.n(o),a=n(26068),s=n.n(a),i=n(87999),l=n.n(i),c=n(96677),u=n(18735);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/query/org",{method:"GET",params:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/delete",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},81501:function(e,t,n){n.d(t,{AP:function(){return d},_J:function(){return b},t5:function(){return m},v_:function(){return p}});var o=n(90228),r=n.n(o),a=n(26068),s=n.n(a),i=n(87999),l=n.n(i),c=n(96677),u=n(18735);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/query/org",{method:"GET",params:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/create",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/update",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=l()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/kbase/delete",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},83811:function(e,t,n){n.d(t,{G:function(){return f}});var o=n(26068),r=n.n(o),a=(n(75271),n(26898)),s=n(96677),i=n(16483),l=n.n(i),c=n(59153),u=n(24229),d=n(52676),f=function(e){var t=e.children,n=e.onSuccess,o=e.onError,i={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:s.IrL,category_uid:"",kb_uid:"",client:s.bVn},f={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;i.file=e,i.file_name=t,i.file_type=e.type,console.log("beforeUpload",i)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data;n(t),c.yw.success("".concat(e.file.name," 上传成功"))}else o(e.file),c.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(c.yw.error("".concat(e.file.name," 上传失败")),o(e.file))}};return(0,d.jsx)(a.Z,r()(r()({},f),{},{children:t}))}},21544:function(e,t,n){var o=n(93454);t.Z=function(){var e=(0,o.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},51038:function(e,t,n){var o=n(96677),r=n(94388),a=n(18735);t.Z=function(){var e=(0,a.useIntl)();return{translateString:function(t){return t&&t.startsWith(o.VoP)?e.formatMessage({id:t,defaultMessage:t}):t},translateStringTranct:function(t){return null!=t&&t.startsWith(o.VoP)||null!=t&&t.startsWith("ROLE_")?(0,r.aS)(e.formatMessage({id:t,defaultMessage:t}),10):(0,r.aS)(t,10)}}}},63328:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var o=n(43650),r=n(75271),a=n(90228),s=n.n(a),i=n(87999),l=n.n(i),c=n(48305),u=n.n(c),d=n(22487),f=n(41258),p=n(8038),g=n(58439),m=n(62601),v=n(14458),b=n(71417),h=n(85946),y=n(18735),x=n(93454),w=n(29244),M=n(96677),S=n(74730),Z=n(9477),j=n(65948),C=n(52676),k=function(e){var t=e.open,n=e.onClose,o=e.onSubmit,r=(0,y.useIntl)(),a=S.A.useForm(),s=u()(a,1)[0],i=(0,w.u)((function(e){return e.currentOrg}));return(0,C.jsx)("div",{children:(0,C.jsx)(f.Z,{title:r.formatMessage({id:"pages.robot.new",defaultMessage:"New"}),open:t,forceRender:!0,okText:r.formatMessage({id:"save",defaultMessage:"Save"}),onOk:function(){console.log("handleSaveRobot"),s.validateFields().then((function(e){console.log("handleSaveRobot values:",e);var t={nickname:e.nickname,type:e.type,orgUid:i.uid};console.log("robotObject:",t),o(t)})).catch((function(e){console.log("Form errors:",e)}))},onCancel:function(){n()},children:(0,C.jsxs)(S.A,{form:s,name:"basic",style:{maxWidth:400},submitter:!1,children:[(0,C.jsx)(Z.Z,{label:r.formatMessage({id:"nickname",defaultMessage:"Nickname"}),name:"nickname",rules:[{required:!0,message:r.formatMessage({id:"nickname",defaultMessage:"Nickname"})}]}),(0,C.jsx)(j.Z,{label:r.formatMessage({id:"type",defaultMessage:"Type"}),name:["type"],options:[{label:r.formatMessage({id:M.f4h,defaultMessage:"Service"}),value:M.f4h},{label:r.formatMessage({id:M.wG_,defaultMessage:"Marketing"}),value:M.wG_,disabled:!0}],rules:[{required:!0,message:r.formatMessage({id:"choose",defaultMessage:"Choose"})}],fieldProps:{placeholder:r.formatMessage({id:"choose",defaultMessage:"Choose"}),onChange:function(e){console.log("onTreeSelectChange:",e)},allowClear:!0}})]})})})},R=n(69375),P=n(59153),$=n(51038),E=function(){var e=(0,x.Z)().isDarkMode,t=(0,y.useIntl)(),n=(0,r.useRef)(!1),o=(0,$.Z)(),a=o.translateString,i=o.translateStringTranct,c=(0,d.V)((function(e){return{robotResult:e.robotResult,currentRobot:e.currentRobot,insertRobot:e.insertRobot,deleteCurrentRobot:e.deleteCurrentRobot,setRobotResult:e.setRobotResult,setCurrentRobot:e.setCurrentRobot}})),S=c.robotResult,Z=c.currentRobot,j=c.insertRobot,E=c.deleteCurrentRobot,O=c.setRobotResult,I=c.setCurrentRobot,F=(0,w.u)((function(e){return e.currentOrg})),q=f.Z.useModal(),T=u()(q,2),N=T[0],V=T[1],L=function(){var e=l()(s()().mark((function e(n){var o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",n),P.yw.loading(t.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,R.gf)(n);case 4:o=e.sent,console.log("delete robot response",o),200===o.code?(P.yw.destroy(),P.yw.success(t.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),E(n.uid)):(P.yw.destroy(),P.yw.error(o.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=l()(s()().mark((function e(){var t,o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,P.yw.loading("loading"),t={pageNumber:0,pageSize:50,level:M.K78,orgUid:null==F?void 0:F.uid},e.next=8,(0,R.p0)(t);case 8:o=e.sent,console.log("queryRobotsByOrg: ",o),200===o.code?(P.yw.destroy(),O(o)):(P.yw.destroy(),P.yw.error(o.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){z()}),[]);var U=(0,r.useState)(!1),A=u()(U,2),B=A[0],D=A[1],H=function(){var e=l()(s()().mark((function e(n){var o;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.yw.loading(t.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=3,(0,R.lg)(n);case 3:o=e.sent,console.log("handleSaveRobot response:",o),200===o.code?(P.yw.destroy(),P.yw.success(t.formatMessage({id:"create.success"})),j(o.data),D(!1)):(P.yw.destroy(),D(!1),P.yw.error(o.message));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return t.formatMessage({id:null==e?void 0:e.type,defaultMessage:null==e?void 0:e.type})};return(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{style:{margin:10},children:(0,C.jsxs)(p.Z,{gap:"small",align:"flex-start",children:[(0,C.jsx)(g.ZP,{size:"small",type:"primary",icon:(0,C.jsx)(h.Z,{}),onClick:function(){D(!0)},children:t.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,C.jsx)(g.ZP,{size:"small",onClick:z,children:t.formatMessage({id:"refresh",defaultMessage:"Refresh"})}),(0,C.jsx)(g.ZP,{onClick:function(){return function(e){N.confirm({title:t.formatMessage({id:"deleteTip"}),icon:(0,C.jsx)(b.Z,{}),content:"".concat(t.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(a(e.nickname),"】？"),onOk:function(){L(e)},onCancel:function(){},okText:t.formatMessage({id:"ok"}),cancelText:t.formatMessage({id:"cancel"})})}(Z)},size:"small",style:{float:"right"},danger:!0,disabled:""===(null==Z?void 0:Z.uid),children:t.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]})}),(0,C.jsx)(m.Z,{itemLayout:"horizontal",dataSource:S.data.content,renderItem:function(t,n){return(0,C.jsx)(m.Z.Item,{style:(null==Z?void 0:Z.uid)===t.uid?{backgroundColor:e?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){I(t)},children:(0,C.jsx)(m.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,C.jsx)(v.C,{src:t.avatar}),title:(0,C.jsx)(C.Fragment,{children:i(null==t?void 0:t.nickname)}),description:_(t)})})}}),(0,C.jsx)(k,{open:B,onClose:function(){D(!1)},onSubmit:H}),V]})},O=n(75055),I=n(73465),F=n(26068),q=n.n(F),T=n(81501),N=n(50501),V=function(){var e=(0,y.useIntl)(),t=(0,y.useNavigate)(),n=S.A.useForm(),o=u()(n,1)[0],a=(0,$.Z)().translateString,i=(0,r.useState)(),c=u()(i,2),f=c[0],p=c[1],m=(0,w.u)((function(e){return e.currentOrg})),v=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),b=v.currentRobot,h=v.setCurrentRobot,x=function(){var t=l()(s()().mark((function t(){var n,o;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n={pageNumber:0,pageSize:50,type:M.QPQ,orgUid:m.uid},t.next=4,(0,T.AP)(n);case 4:o=t.sent,console.log("getKeywordBase response:",n,o),P.yw.destroy(),200===o.code?p(o):P.yw.error(o.message);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,r.useEffect)((function(){x()}),[]),(0,r.useEffect)((function(){o.setFieldValue("kbUid",null==b?void 0:b.kbUid)}),[b]);var Z=function(){var t=l()(s()().mark((function t(n){var o,r,a,i,l,c,u;return s()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onFinish values:",n),c=q()(q()({},b),{},{serviceSettings:q()(q()({},b.serviceSettings),{},{faqUids:null==b||null===(o=b.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==b||null===(r=b.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==b||null===(a=b.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==b||null===(i=b.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),shortcutFaqUids:null==b||null===(l=b.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))}),kbUid:n.kbUid}),console.log("robotObject:",c),t.next=5,(0,R.$l)(c);case 5:u=t.sent,console.log("updateRobot response:",u),200===u.code?(P.yw.destroy(),P.yw.success(e.formatMessage({id:"update.success"})),h(u.data)):(P.yw.destroy(),P.yw.error(u.message));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,C.jsx)("div",{children:(0,C.jsxs)(S.A,{form:o,onFinish:Z,children:[(0,C.jsx)(j.Z,{width:"md",name:"kbUid",label:"知识库",options:null==f?void 0:f.data.content.map((function(e){return{value:e.uid,label:a(e.name)}})),fieldProps:{onChange:function(e){console.log("kbUid:",e)}}}),(0,C.jsx)(S.A.Item,{children:(0,C.jsx)(g.ZP,{icon:(0,C.jsx)(N.Z,{}),onClick:function(){t("/kb/llm/data")},children:"添加大模型知识库"},"github")})]})})},L=n(51770),z=function(){var e=(0,y.useIntl)(),t=(0,r.useMemo)((function(){return!0}),[]),n=[{key:"kb",label:(0,C.jsx)(y.FormattedMessage,{id:"pages.robot.tab.kb",defaultMessage:"Knowledge Base"}),children:(0,C.jsx)(V,{}),disabled:t}];return(0,C.jsxs)(C.Fragment,{children:[t&&(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(I.Z,{message:"企业版-高级功能",style:{marginBottom:20},type:"warning",action:(0,C.jsx)(g.ZP,{type:"link",icon:(0,C.jsx)(L.Z,{}),onClick:function(){return window.open(M.VPj)},children:e.formatMessage({id:"setting.helpcenter"})})})}),(0,C.jsx)(O.Z,{tabPosition:"left",items:n})]})},U=n(83811),A=n(35921),B=n(92996),D=n(52739),H=function(){var e=S.A.useForm(),t=u()(e,1)[0],n=(0,y.useIntl)(),o=(0,$.Z)().translateString,a=(0,d.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),i=a.currentRobot,c=a.setCurrentRobot,f=(0,r.useState)(""),p=u()(f,2),m=p[0],b=p[1];(0,r.useEffect)((function(){var e;i&&(t.setFieldValue("nickname",o(null==i?void 0:i.nickname)),t.setFieldValue("welcomeTip",o(null==i||null===(e=i.serviceSettings)||void 0===e?void 0:e.welcomeTip)),t.setFieldValue("description",o(null==i?void 0:i.description)))}),[i]);var h=function(){var e=l()(s()().mark((function e(t){var o,r,a,l,u,d,f;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish:",t),P.yw.loading(n.formatMessage({id:"updating"})),d=q()(q()({},i),{},{serviceSettings:q()(q()({},i.serviceSettings),{},{welcomeTip:t.welcomeTip,quickFaqUids:null==i||null===(o=i.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==i||null===(r=i.serviceSettings)||void 0===r||null===(r=r.faqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==i||null===(a=i.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==i||null===(l=i.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==i||null===(u=i.serviceSettings)||void 0===u||null===(u=u.shortcutFaqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),nickname:t.nickname,description:t.description,avatar:m}),console.log("robotObject:",d),e.next=6,(0,R.$l)(d);case 6:f=e.sent,console.log("updateRobot response:",f),200===f.code?(P.yw.success(n.formatMessage({id:"update.success"})),c(f.data)):P.yw.error(f.message),P.yw.destroy();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){b(null==i?void 0:i.avatar)}),[i]),(0,C.jsxs)(S.A,{form:t,style:{marginLeft:"100px"},onFinish:h,children:[(0,C.jsx)(D.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return console.log("Upload event:",e),Array.isArray(e)?e:null==e?void 0:e.fileList},label:n.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,C.jsxs)(U.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e),b(e)},onError:function(e){console.log("handleUploadError:",e)},children:[(0,C.jsx)(v.C,{src:m}),(0,C.jsx)(g.ZP,{icon:(0,C.jsx)(A.Z,{}),children:n.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,C.jsx)(Z.Z,{width:"md",name:"nickname",label:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),tooltip:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),placeholder:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"}),rules:[{required:!0,message:n.formatMessage({id:"pages.robot.tab.title",defaultMessage:"Title"})}]}),(0,C.jsx)(B.Z,{width:"md",name:"welcomeTip",label:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),placeholder:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),rules:[{required:!0,message:n.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}]}),(0,C.jsx)(B.Z,{width:"md",name:"description",label:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),tooltip:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),placeholder:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"}),rules:[{required:!0,message:n.formatMessage({id:"pages.robot.tab.description",defaultMessage:"description"})}]})]})},_=function(e){var t=e.type;console.log("TabApi:",t);var n=(0,y.useAccess)();return n.canDebug&&console.log("TabApi canDebug"),(0,C.jsx)("div",{children:(0,C.jsx)("p",{children:(0,C.jsx)(y.Access,{accessible:n.canDebug(),fallback:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(y.FormattedMessage,{id:M.h5w})}),children:"开放api、权限控制、统计数据"})})})},G=function(){var e=(0,y.useIntl)(),t=(0,r.useState)([]),n=u()(t,2),o=n[0],a=n[1],s=[{key:"basic",label:e.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,C.jsx)(H,{})},{key:"advanced",label:e.formatMessage({id:"pages.robot.tab.advanced",defaultMessage:"Advanced"}),children:(0,C.jsx)(z,{})},{key:"tabapi",label:"API",children:(0,C.jsx)(_,{type:M._X4})}];return(0,r.useEffect)((function(){a(s)}),[]),(0,C.jsx)(O.Z,{defaultActiveKey:"basic",items:o})},W=n(21544),X=o.Z.Sider,Y=o.Z.Content,K=function(){var e=(0,W.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,r=e.contentStyle;return(0,C.jsxs)(o.Z,{children:[(0,C.jsx)(X,{width:n,style:t,children:(0,C.jsx)(E,{})}),(0,C.jsx)(o.Z,{children:(0,C.jsx)(Y,{style:r,children:(0,C.jsx)(G,{})})})]})}},22487:function(e,t,n){n.d(t,{V:function(){return d}});var o=n(26068),r=n.n(o),a=n(15558),s=n.n(a),i=n(96677),l=n(52315),c=n(4938),u=n(13657),d=(0,l.Ue)()((0,c.mW)((0,c.tJ)((0,u.n)((function(e,t){return{robotResult:{data:{content:[]}},currentRobot:{uid:"",nickname:""},insertRobot:function(t){e((function(e){e.robotResult.data.content.unshift(t)}))},setRobotResult:function(n){e({robotResult:n});var o,r=t().currentRobot;""!==r.uid&&void 0!==r||(null===(o=n.data)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.length)>0&&e({currentRobot:n.data.content[0]})},setCurrentRobot:function(n){var o=t().robotResult.data.content,a=o.findIndex((function(e){return e.uid===n.uid}));if(-1!==a){var i=[].concat(s()(o.slice(0,a)),[n],s()(o.slice(a+1))),l=r()(r()({},t().robotResult),{},{data:{content:i}});e({robotResult:l,currentRobot:n})}else console.warn("Robot with the specified uid not found."),e({currentRobot:n})},deleteCurrentRobot:function(n){var o=t().robotResult.data.content,a=o.findIndex((function(e){return e.uid===n}));-1!==a?e({robotResult:r()(r()({},t().robotResult),{},{data:{content:[].concat(s()(o.slice(0,a)),s()(o.slice(a+1)))}})}):console.warn("Robot not found in cache:",n),t().currentRobot.uid===n&&e({currentRobot:{uid:""}})},deleteRobotCache:function(){return e({},!0)}}})),{name:i.Eis})))},73465:function(e,t,n){n.d(t,{Z:function(){return N}});var o=n(75271),r=n(26282),a=n(16449),s=n(71232),i=n(76117),l=n(42250),c=n(82187),u=n.n(c),d=n(78878),f=n(91517),p=n(47486),g=n(77888),m=n(4166),v=n(98020),b=n(18796),h=n(10083);const y=(e,t,n,o,r)=>({background:e,border:`${(0,v.bf)(o.lineWidth)} ${o.lineType} ${t}`,[`${r}-icon`]:{color:n}}),x=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:o,marginSM:r,fontSize:a,fontSizeLG:s,lineHeight:i,borderRadiusLG:l,motionEaseInOutCirc:c,withDescriptionIconSize:u,colorText:d,colorTextHeading:f,withDescriptionPadding:p,defaultPadding:g}=e;return{[t]:Object.assign(Object.assign({},(0,b.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:l,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:a,lineHeight:i},"&-message":{color:f},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${c}, opacity ${n} ${c},\n        padding-top ${n} ${c}, padding-bottom ${n} ${c},\n        margin-bottom ${n} ${c}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:p,[`${t}-icon`]:{marginInlineEnd:r,fontSize:u,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:f,fontSize:s},[`${t}-description`]:{display:"block",color:d}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},w=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:a,colorWarningBorder:s,colorWarningBg:i,colorError:l,colorErrorBorder:c,colorErrorBg:u,colorInfo:d,colorInfoBorder:f,colorInfoBg:p}=e;return{[t]:{"&-success":y(r,o,n,e,t),"&-info":y(p,f,d,e,t),"&-warning":y(i,s,a,e,t),"&-error":Object.assign(Object.assign({},y(u,c,l,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},M=e=>{const{componentCls:t,iconCls:n,motionDurationMid:o,marginXS:r,fontSizeIcon:a,colorIcon:s,colorIconHover:i}=e;return{[t]:{"&-action":{marginInlineStart:r},[`${t}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:a,lineHeight:(0,v.bf)(a),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:s,transition:`color ${o}`,"&:hover":{color:i}}},"&-close-text":{color:s,transition:`color ${o}`,"&:hover":{color:i}}}}};var S=(0,h.I$)("Alert",(e=>[x(e),w(e),M(e)]),(e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}))),Z=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const j={success:r.Z,info:l.Z,error:a.Z,warning:i.Z},C=e=>{const{icon:t,prefixCls:n,type:r}=e,a=j[r]||null;return t?(0,g.wm)(t,o.createElement("span",{className:`${n}-icon`},t),(()=>({className:u()(`${n}-icon`,{[t.props.className]:t.props.className})}))):o.createElement(a,{className:`${n}-icon`})},k=e=>{const{isClosable:t,prefixCls:n,closeIcon:r,handleClose:a,ariaProps:i}=e,l=!0===r||void 0===r?o.createElement(s.Z,null):r;return t?o.createElement("button",Object.assign({type:"button",onClick:a,className:`${n}-close-icon`,tabIndex:0},i),l):null},R=o.forwardRef(((e,t)=>{const{description:n,prefixCls:r,message:a,banner:s,className:i,rootClassName:l,style:c,onMouseEnter:g,onMouseLeave:v,onClick:b,afterClose:h,showIcon:y,closable:x,closeText:w,closeIcon:M,action:j,id:R}=e,P=Z(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[$,E]=o.useState(!1);const O=o.useRef(null);o.useImperativeHandle(t,(()=>({nativeElement:O.current})));const{getPrefixCls:I,direction:F,alert:q}=o.useContext(m.E_),T=I("alert",r),[N,V,L]=S(T),z=t=>{var n;E(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},U=o.useMemo((()=>void 0!==e.type?e.type:s?"warning":"info"),[e.type,s]),A=o.useMemo((()=>!("object"!=typeof x||!x.closeIcon)||(!!w||("boolean"==typeof x?x:!1!==M&&null!=M||!!(null==q?void 0:q.closable)))),[w,M,x,null==q?void 0:q.closable]),B=!(!s||void 0!==y)||y,D=u()(T,`${T}-${U}`,{[`${T}-with-description`]:!!n,[`${T}-no-icon`]:!B,[`${T}-banner`]:!!s,[`${T}-rtl`]:"rtl"===F},null==q?void 0:q.className,i,l,L,V),H=(0,f.Z)(P,{aria:!0,data:!0}),_=o.useMemo((()=>{var e,t;return"object"==typeof x&&x.closeIcon?x.closeIcon:w||(void 0!==M?M:"object"==typeof(null==q?void 0:q.closable)&&(null===(e=null==q?void 0:q.closable)||void 0===e?void 0:e.closeIcon)?null===(t=null==q?void 0:q.closable)||void 0===t?void 0:t.closeIcon:null==q?void 0:q.closeIcon)}),[M,x,w,null==q?void 0:q.closeIcon]),G=o.useMemo((()=>{const e=null!=x?x:null==q?void 0:q.closable;if("object"==typeof e){const{closeIcon:t}=e;return Z(e,["closeIcon"])}return{}}),[x,null==q?void 0:q.closable]);return N(o.createElement(d.ZP,{visible:!$,motionName:`${T}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:h},((t,r)=>{let{className:s,style:i}=t;return o.createElement("div",Object.assign({id:R,ref:(0,p.sQ)(O,r),"data-show":!$,className:u()(D,s),style:Object.assign(Object.assign(Object.assign({},null==q?void 0:q.style),c),i),onMouseEnter:g,onMouseLeave:v,onClick:b,role:"alert"},H),B?o.createElement(C,{description:n,icon:e.icon,prefixCls:T,type:U}):null,o.createElement("div",{className:`${T}-content`},a?o.createElement("div",{className:`${T}-message`},a):null,n?o.createElement("div",{className:`${T}-description`},n):null),j?o.createElement("div",{className:`${T}-action`},j):null,o.createElement(k,{isClosable:A,prefixCls:T,closeIcon:_,handleClose:z,ariaProps:G}))})))}));var P=R,$=n(73779),E=n(71374),O=n(76082),I=n(45675);let F=function(e){function t(){var e;return(0,$.Z)(this,t),(e=(0,O.Z)(this,t,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,I.Z)(t,e),(0,E.Z)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:n,children:r}=this.props,{error:a,info:s}=this.state,i=(null==s?void 0:s.componentStack)||null,l=void 0===e?(a||"").toString():e,c=void 0===t?i:t;return a?o.createElement(P,{id:n,type:"error",message:l,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},c)}):r}}])}(o.Component);var q=F;const T=P;T.ErrorBoundary=q;var N=T},8038:function(e,t,n){n.d(t,{Z:function(){return S}});var o=n(75271),r=n(82187),a=n.n(r),s=n(30454),i=n(99518),l=n(4166),c=n(10083),u=n(53557);const d=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return a()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&d.includes(n)}})(e,t)),((e,t)=>{const n={};return p.forEach((o=>{n[`${e}-align-${o}`]=t.align===o})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return f.forEach((o=>{n[`${e}-justify-${o}`]=t.justify===o})),n})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},v=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},b=e=>{const{componentCls:t}=e,n={};return d.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},h=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},y=e=>{const{componentCls:t}=e,n={};return f.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var x=(0,c.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:o}=e,r=(0,u.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:o});return[m(r),v(r),b(r),h(r),y(r)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const M=o.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:r,className:c,style:u,flex:d,gap:f,children:p,vertical:m=!1,component:v="div"}=e,b=w(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:h,direction:y,getPrefixCls:M}=o.useContext(l.E_),S=M("flex",n),[Z,j,C]=x(S),k=null!=m?m:null==h?void 0:h.vertical,R=a()(c,r,null==h?void 0:h.className,S,j,C,g(S,e),{[`${S}-rtl`]:"rtl"===y,[`${S}-gap-${f}`]:(0,i.n)(f),[`${S}-vertical`]:k}),P=Object.assign(Object.assign({},null==h?void 0:h.style),u);return d&&(P.flex=d),f&&!(0,i.n)(f)&&(P.gap=f),Z(o.createElement(v,Object.assign({ref:t,className:R,style:P},(0,s.Z)(b,["justify","wrap","align"])),p))}));var S=M},41258:function(e,t,n){n.d(t,{Z:function(){return w}});var o=n(75422),r=n(7403),a=n(24882),s=n(75271),i=n(82187),l=n.n(i),c=n(94813),u=n(2302),d=n(4166),f=n(14082),p=n(16104),g=n(34442),m=n(54737),v=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};var b=(0,u.i)((e=>{const{prefixCls:t,className:n,closeIcon:o,closable:r,type:a,title:i,children:u,footer:b}=e,h=v(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:y}=s.useContext(d.E_),x=y(),w=t||y("modal"),M=(0,f.Z)(x),[S,Z,j]=(0,m.ZP)(w,M),C=`${w}-confirm`;let k={};return k=a?{closable:null!=r&&r,title:"",footer:"",children:s.createElement(p.O,Object.assign({},e,{prefixCls:w,confirmPrefixCls:C,rootPrefixCls:x,content:u}))}:{closable:null==r||r,title:i,footer:null!==b&&s.createElement(g.$,Object.assign({},e)),children:u},S(s.createElement(c.s,Object.assign({prefixCls:w,className:l()(Z,`${w}-pure-panel`,a&&C,a&&`${C}-${a}`,n,j,M)},h,{closeIcon:(0,g.b)(w,o),closable:r},k)))})),h=n(77004);function y(e){return(0,o.ZP)((0,o.uW)(e))}const x=a.Z;x.useModal=h.Z,x.info=function(e){return(0,o.ZP)((0,o.cw)(e))},x.success=function(e){return(0,o.ZP)((0,o.vq)(e))},x.error=function(e){return(0,o.ZP)((0,o.AQ)(e))},x.warning=y,x.warn=y,x.confirm=function(e){return(0,o.ZP)((0,o.Au)(e))},x.destroyAll=function(){for(;r.Z.length;){const e=r.Z.pop();e&&e()}},x.config=o.ai,x._InternalPanelDoNotUseOrYouWillBeFired=b;var w=x},76082:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(52601),r=n(95531),a=n(57520);function s(e,t,n){return t=(0,o.Z)(t),(0,a.Z)(e,(0,r.Z)()?Reflect.construct(t,n||[],(0,o.Z)(e).constructor):t.apply(e,n))}}}]);