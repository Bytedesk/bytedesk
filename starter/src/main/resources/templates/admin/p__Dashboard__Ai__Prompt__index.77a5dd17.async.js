"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1466],{15722:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(11757),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=n(54183),i=function(e,t){return o.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:a}))};var l=o.forwardRef(i)},82669:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(11757),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=n(54183),i=function(e,t){return o.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:a}))};var l=o.forwardRef(i)},59908:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(11757),o=n(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=n(54183),i=function(e,t){return o.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:a}))};var l=o.forwardRef(i)},84881:function(e,t,n){var r=n(17082),o=n(73457),a=n(82308),s=n(44194),i=n(63653),l=n(87413),c=n(31549),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var n=e.fieldProps,d=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,y=e.showSearch,h=e.options,x=(0,o.Z)(e,u),b=(0,s.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,a.h)(m),request:v,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:h,mode:g,showSearch:y,getPopupContainer:b.getPopupContainer},n),ref:t,proFieldProps:p},x),{},{children:d}))},p=s.forwardRef((function(e,t){var n=e.fieldProps,u=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,v=e.request,y=e.options,h=(0,o.Z)(e,d),x=(0,r.Z)({options:y,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),b=(0,s.useContext)(i.Z);return(0,c.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,a.h)(m),request:v,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:b.getPopupContainer},x),ref:t,proFieldProps:p},h),{},{children:u}))})),g=s.forwardRef(f);g.SearchSelect=p,g.displayName="ProFormComponent",t.Z=g},32350:function(e,t,n){var r=n(17082),o=n(73457),a=n(44194),s=n(87413),i=n(31549),l=["fieldProps","proFieldProps"],c=function(e,t){var n=e.fieldProps,a=e.proFieldProps,c=(0,o.Z)(e,l);return(0,i.jsx)(s.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:n,proFieldProps:a},c))};t.Z=a.forwardRef(c)},66916:function(e,t,n){n.d(t,{$l:function(){return y},JT:function(){return w},gf:function(){return Z},lg:function(){return p},n1:function(){return x},p0:function(){return d},s9:function(){return m}});var r=n(90819),o=n.n(r),a=n(73193),s=n.n(a),i=n(89933),l=n.n(i),c=n(55735),u=n(30921);function d(e){return f.apply(this,arguments)}function f(){return(f=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/query/org",{method:"GET",params:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/create/prompt",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return b.apply(this,arguments)}function b(){return(b=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update/avatar",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return C.apply(this,arguments)}function C(){return(C=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/update/prompt",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return k.apply(this,arguments)}function k(){return(k=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/robot/delete",{method:"POST",data:s()(s()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6631:function(e,t,n){n.d(t,{G:function(){return f}});var r=n(73193),o=n.n(r),a=(n(44194),n(30348)),s=n(55735),i=n(28977),l=n.n(i),c=n(86803),u=n(44521),d=n(31549),f=function(e){var t=e.children,n=e.onSuccess,r=e.onError,i={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:s.IrL,category_uid:"",kb_uid:"",client:s.bVn},f={name:"file",accept:"image/*",action:(0,u.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(s.LA8)},data:i,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=l()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;i.file=e,i.file_name=t,i.file_type=e.type,console.log("beforeUpload",i)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data.fileUrl;n(t),c.yw.success("".concat(e.file.name," 上传成功"))}else r(e.file),c.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(c.yw.error("".concat(e.file.name," 上传失败")),r(e.file))}};return(0,d.jsx)(a.Z,o()(o()({},f),{},{children:t}))}},7049:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(75574),o=n(96865),a=n(55735),s=n(90819),i=n.n(s),l=n(89933),c=n.n(l),u=n(45332),d=n.n(u),f=n(44194),p=n(53530),g=n(27487),m=n(75365),v=n(9452),y=n(23864),h=n(90838),x=n(32045),b=n(86803),w=n(40612),C=n(76750),Z=n(30921),k=n(15722),j=n(82669),P=n(78996),S=n(31549),M=function(e){var t,n=e.level,r=e.type,o=(0,y.Z)().isDarkMode,s=(0,Z.useIntl)(),l=(0,f.useState)(!0),u=d()(l,2),M=u[0],O=u[1],E=(0,w.u)((function(e){return e.currentOrg})),$=(0,C.Z)(),I=$.translateString,z=($.translateStringTranct,(0,f.useState)(!1)),F=d()(z,2),q=F[0],T=F[1],U=p.Z.useModal(),R=d()(U,2),V=R[0],L=R[1],N=(0,h.v)((function(e){return{categoryResult:e.categoryResult,currentCategory:e.currentCategory,setCategoryResult:e.setCategoryResult,setCurrentCategory:e.setCurrentCategory,insertCategory:e.insertCategory,upgradeCategory:e.upgradeCategory}})),D=N.categoryResult,A=N.currentCategory,B=N.setCategoryResult,G=N.setCurrentCategory,_=N.insertCategory,H=N.upgradeCategory,Q=function(){var e=c()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleEditCategory: ",A),O(!0),T(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=c()(i()().mark((function e(t){var n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDeleteCategory: ",t),n={uid:null==t?void 0:t.uid,orgUid:null==E?void 0:E.uid},e.next=4,(0,x.uu)(n);case 4:r=e.sent,console.log("deleteCategory: ",r),200===r.code?(b.yw.success(r.message),W()):b.yw.error(r.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=c()(i()().mark((function e(){var t,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("requestCategories",n,r),t={pageNumber:0,pageSize:100,orgUid:null==E?void 0:E.uid,level:n,type:r},e.next=4,(0,x.XS)(t);case 4:o=e.sent,console.log("queryCategoriesByOrg: ",o),200===o.code?B(o):b.yw.error(o.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){W()}),[]);var X=function(){var e=c()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSubmit: ",t),b.yw.loading(s.formatMessage({id:"creating"})),e.next=4,(0,x.k4)(t);case 4:n=e.sent,console.log("createCategory response: ",n),200===n.code?(b.yw.destroy(),b.yw.success(s.formatMessage({id:"create.success"})),_(n.data),T(!1)):(b.yw.destroy(),b.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=c()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleUpdateCategory: ",t),b.yw.loading(s.formatMessage({id:"updating"})),e.next=4,(0,x.yr)(t);case 4:n=e.sent,console.log("createCategory response: ",n),200===n.code?(b.yw.destroy(),b.yw.success(s.formatMessage({id:"update.success"})),H(n.data),T(!1)):(b.yw.destroy(),b.yw.error(n.message));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=c()(i()().mark((function e(t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleSubmit: ",t),M?J(t):X(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(g.Z,{gap:"small",wrap:"wrap",style:{marginBottom:5},children:[(0,S.jsx)(m.ZP,{type:"primary",size:"small",icon:(0,S.jsx)(j.Z,{}),onClick:function(){O(!1),T(!0)},children:s.formatMessage({id:"create"})}),""!==(null==A?void 0:A.uid)&&(null==A?void 0:A.uid)!==a.zBg&&(0,S.jsx)(m.ZP,{size:"small",onClick:Q,children:s.formatMessage({id:"pages.robot.edit"})}),""!==(null==A?void 0:A.uid)&&(null==A?void 0:A.uid)!==a.zBg&&(0,S.jsx)(m.ZP,{onClick:function(){return function(e){V.confirm({title:s.formatMessage({id:"deleteTip"}),icon:(0,S.jsx)(k.Z,{}),content:"".concat(s.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(I(e.name),"】？"),onOk:function(){Y(e)},onCancel:function(){},okText:s.formatMessage({id:"ok"}),cancelText:s.formatMessage({id:"cancel"})})}(A)},size:"small",style:{float:"right"},danger:!0,children:s.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,S.jsx)(v.Z,{itemLayout:"horizontal",dataSource:null==D||null===(t=D.data)||void 0===t?void 0:t.content,renderItem:function(e,t){return(0,S.jsx)(v.Z.Item,{style:(null==A?void 0:A.uid)===e.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return t=e,console.log("list on click",t),void G(t);var t},children:(0,S.jsx)(v.Z.Item.Meta,{style:{marginLeft:"10px"},title:I(e.name)})})}}),q&&(0,S.jsx)(P.Z,{open:q,level:n,type:r,isEdit:M,onCancel:function(){T(!1)},onSubmit:K}),L]})},O=n(73193),E=n.n(O),$=n(76711),I=n.n($),z=n(3849),F=n(66916),q=n(69169),T=n(84881),U=n(4499),R=n(32350),V=n(73442),L=n(84288),N=n(6631),D=n(59908),A=function(e){var t,n=e.isEdit,r=e.robot,o=e.open,s=e.level,i=e.onClose,l=e.onSubmit,c=q.A.useForm(),u=d()(c,1)[0],p=(0,Z.useIntl)(),g=(0,w.u)((function(e){return e.currentOrg})),v=(0,f.useState)("https://cdn.weiyuai.cn/assets/images/llm/provider/zhipu.png"),y=d()(v,2),x=y[0],k=(y[1],(0,f.useState)()),j=d()(k,2),P=j[0],M=j[1],O=(0,h.v)((function(e){return e.categoryResult})),E=(0,C.Z)(),$=E.translateString;E.translateStringTranct;(0,f.useEffect)((function(){if(n&&r&&u){var e,t;u.setFieldsValue({uid:null==r?void 0:r.uid,nickname:null==r?void 0:r.nickname,prompt:null==r||null===(e=r.llm)||void 0===e?void 0:e.prompt,description:null==r?void 0:r.description,categoryUid:null==r?void 0:r.categoryUid});var o=null==O||null===(t=O.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.find((function(e){return e.uid===(null==r?void 0:r.categoryUid)}));M(o)}else console.log("form resetFields"),u.resetFields()}),[r]);(0,f.useEffect)((function(){}),[r]);return(0,S.jsx)("div",{children:(0,S.jsx)(V.Z,{title:n?"编辑智能体":"新建智能体",width:650,onClose:i,open:o,extra:(0,S.jsxs)(z.Z,{children:[(0,S.jsx)(m.ZP,{onClick:i,children:"取消"}),(0,S.jsx)(m.ZP,{onClick:function(){console.log("handleSubmit"),u.validateFields().then((function(e){console.log("Form values:",e);var t={uid:n?null==r?void 0:r.uid:"",nickname:e.nickname,avatar:x,categoryUid:null==P?void 0:P.uid,llm:{prompt:e.prompt},description:e.description,type:a.Qeb,level:s,orgUid:null==g?void 0:g.uid};console.log("robotObject:",t),l(t)})).catch((function(e){console.log("Form errors:",e)}))},type:"primary",children:"保存"})]}),children:(0,S.jsxs)(q.A,{form:u,name:"model",submitter:!1,children:[(0,S.jsx)(T.Z,{label:"类别",name:"categoryUid",required:!0,options:null==O||null===(t=O.data)||void 0===t||null===(t=t.content)||void 0===t||null===(t=t.filter((function(e){return e.uid!==a.zBg})))||void 0===t?void 0:t.map((function(e){return{label:$(null==e?void 0:e.name),value:null==e?void 0:e.uid}})),fieldProps:{allowClear:!0,onChange:function(e){var t;console.log("handleChange:",e),M(null==O||null===(t=O.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.find((function(t){return t.uid===e})))}}}),(0,S.jsx)(U.Z,{label:"昵称",name:"nickname",required:!0}),(0,S.jsx)(q.A.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null==e?void 0:e.fileList},label:p.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,S.jsxs)(N.G,{onSuccess:function(e){console.log("handleUploadSuccess:",e)},onError:function(e){console.log("handleUploadError:",e),b.yw.error(e)},children:[(0,S.jsx)(L.C,{src:x}),(0,S.jsx)(m.ZP,{icon:(0,S.jsx)(D.Z,{}),children:p.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,S.jsx)(R.Z,{label:"提示语Prompt",name:"prompt",required:!0}),(0,S.jsx)(R.Z,{label:"简介描述",name:"description"})]})})})},B=n(25482),G=function(e){var t=e.level,n=(e.type,(0,f.useRef)(!1)),r=(0,Z.useIntl)(),o=(0,y.Z)().isDarkMode,s=(0,f.useState)(!0),l=d()(s,2),u=l[0],g=l[1],x=(0,C.Z)(),j=x.translateString,P=(x.translateStringTranct,(0,f.useState)(!1)),M=d()(P,2),O=M[0],$=M[1],q=(0,f.useState)(),T=d()(q,2),U=T[0],R=T[1],V=(0,f.useState)({}),L=d()(V,2),N=L[0],D=L[1],G=(0,h.v)((function(e){return e.currentCategory})),_=(0,w.u)((function(e){return e.currentOrg})),H=p.Z.useModal(),Q=d()(H,2),Y=Q[0],W=Q[1],X=function(){var e=c()(i()().mark((function e(t){var n,o,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete robot",t),b.yw.loading(r.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=4,(0,F.gf)(t);case 4:if(n=e.sent,console.log("delete robot response",n),200!==n.code){e.next=21;break}b.yw.destroy(),b.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),o=I()(null==U?void 0:U.data.content),e.t0=i()().keys(o);case 11:if((e.t1=e.t0()).done){e.next=18;break}if(a=e.t1.value,o[a].uid!==t.uid){e.next=16;break}return o.splice(Number(a),1),e.abrupt("break",18);case 16:e.next=11;break;case 18:R(E()(E()({},U),{},{data:{content:o}})),e.next=23;break;case 21:b.yw.destroy(),b.yw.error(n.message);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=c()(i()().mark((function e(){var r,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=3;break}return console.log("isLoading: 1",n.current),e.abrupt("return");case 3:return n.current=!0,b.yw.loading("loading"),r={pageNumber:0,pageSize:100,orgUid:null==_?void 0:_.uid,categoryUid:(null==G?void 0:G.uid)===a.zBg?"":null==G?void 0:G.uid,type:a.Qeb,level:t},e.next=8,(0,F.p0)(r);case 8:o=e.sent,console.log("getPlatformRobots queryRobotsByOrg: ",o),200===o.code?(b.yw.destroy(),R(o)):(b.yw.destroy(),b.yw.error(o.message)),n.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){J()}),[G]);var K=function(){var e=c()(i()().mark((function e(t){var n,o,a,s,l;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmit"),!u){e.next=24;break}return e.next=4,(0,F.JT)(t);case 4:if(n=e.sent,console.log("updatePromptRobot:",n),200!==n.code){e.next=21;break}b.yw.success(r.formatMessage({id:"update.success",defaultMessage:"update success"})),o=I()(null==U?void 0:U.data.content),e.t0=i()().keys(o);case 10:if((e.t1=e.t0()).done){e.next=17;break}if(a=e.t1.value,o[a].uid!==t.uid){e.next=15;break}return o[a]=null==n?void 0:n.data,e.abrupt("break",17);case 15:e.next=10;break;case 17:R(E()(E()({},U),{},{data:{content:o}})),$(!1),e.next=22;break;case 21:b.yw.error(n.message);case 22:e.next=29;break;case 24:return e.next=26,(0,F.s9)(t);case 26:s=e.sent,console.log("createPromptRobot:",s),200===s.code?(b.yw.success(r.formatMessage({id:"create.success",defaultMessage:"create success"})),(l=I()(null==U?void 0:U.data.content)).unshift(null==s?void 0:s.data),R(E()(E()({},U),{},{data:{content:l}})),$(!1)):b.yw.error(s.message);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){var n;console.log("list on delete",e,t),D(e),n=e,Y.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,S.jsx)(k.Z,{}),content:"".concat(r.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(j(n.nickname),"】？"),onOk:function(){X(n)},onCancel:function(){},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})})};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(z.Z,{children:(0,S.jsx)(m.ZP,{icon:(0,S.jsx)(B.Z,{}),type:"primary",onClick:function(){g(!1),$(!0)},children:"添加智能体"})}),(0,S.jsx)(v.Z,{itemLayout:"horizontal",dataSource:null==U?void 0:U.data.content,renderItem:function(e,t){var n;return(0,S.jsx)(v.Z.Item,{style:(null==N?void 0:N.uid)===e.uid?{backgroundColor:o?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return t=e,console.log("list on click",t),void D(t);var t},actions:[(0,S.jsx)(m.ZP,{type:"link",onClick:function(){return function(e,t){console.log("list on edit",e,t),g(!0),D(e),$(!0)}(e,t)},children:r.formatMessage({id:"pages.robot.edit",defaultMessage:"Edit"})},"edit"),(0,S.jsx)(m.ZP,{type:"link",onClick:function(){return ee(e,t)},children:r.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})},"delete")],children:(0,S.jsx)(v.Z.Item.Meta,{style:{marginLeft:"10px"},title:j(null==e?void 0:e.nickname)+(null!=e&&e.description?" - "+j(null==e?void 0:e.description):""),description:null==e||null===(n=e.llm)||void 0===n?void 0:n.prompt})},null==e?void 0:e.uid)}}),O&&(0,S.jsx)(A,{isEdit:u,robot:N,level:t,open:O,onClose:function(){return $(!1)},onSubmit:K}),W]})},_=r.Z.Sider,H=r.Z.Content,Q=function(){var e=(0,o.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,s=e.contentStyle;return(0,S.jsxs)(r.Z,{children:[(0,S.jsx)(_,{width:n,style:t,children:(0,S.jsx)(M,{level:a.whQ,type:a.Kvk})}),(0,S.jsx)(r.Z,{children:(0,S.jsx)(H,{style:s,children:(0,S.jsx)(G,{level:a.whQ})})})]})}},27487:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(44194),o=n(51865),a=n.n(o),s=n(97859),i=n(90899),l=n(37167),c=n(65759),u=n(77167);const d=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return a()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&d.includes(n)}})(e,t)),((e,t)=>{const n={};return p.forEach((r=>{n[`${e}-align-${r}`]=t.align===r})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return f.forEach((r=>{n[`${e}-justify-${r}`]=t.justify===r})),n})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},v=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},y=e=>{const{componentCls:t}=e,n={};return d.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},h=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},x=e=>{const{componentCls:t}=e,n={};return f.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var b=(0,c.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,o=(0,u.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[m(o),v(o),y(o),h(o),x(o)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const C=r.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:o,className:c,style:u,flex:d,gap:f,children:p,vertical:m=!1,component:v="div"}=e,y=w(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:h,direction:x,getPrefixCls:C}=r.useContext(l.E_),Z=C("flex",n),[k,j,P]=b(Z),S=null!=m?m:null==h?void 0:h.vertical,M=a()(c,o,null==h?void 0:h.className,Z,j,P,g(Z,e),{[`${Z}-rtl`]:"rtl"===x,[`${Z}-gap-${f}`]:(0,i.n)(f),[`${Z}-vertical`]:S}),O=Object.assign(Object.assign({},null==h?void 0:h.style),u);return d&&(O.flex=d),f&&!(0,i.n)(f)&&(O.gap=f),k(r.createElement(v,Object.assign({ref:t,className:M,style:O},(0,s.Z)(y,["justify","wrap","align"])),p))}));var Z=C},53530:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(18960),o=n(31695),a=n(27710),s=n(44194),i=n(51865),l=n.n(i),c=n(24255),u=n(43037),d=n(37167),f=n(30829),p=n(78660),g=n(59348),m=n(6750),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var y=(0,u.i)((e=>{const{prefixCls:t,className:n,closeIcon:r,closable:o,type:a,title:i,children:u,footer:y}=e,h=v(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:x}=s.useContext(d.E_),b=x(),w=t||x("modal"),C=(0,f.Z)(b),[Z,k,j]=(0,m.ZP)(w,C),P=`${w}-confirm`;let S={};return S=a?{closable:null!=o&&o,title:"",footer:"",children:s.createElement(p.O,Object.assign({},e,{prefixCls:w,confirmPrefixCls:P,rootPrefixCls:b,content:u}))}:{closable:null==o||o,title:i,footer:null!==y&&s.createElement(g.$,Object.assign({},e)),children:u},Z(s.createElement(c.s,Object.assign({prefixCls:w,className:l()(k,`${w}-pure-panel`,a&&P,a&&`${P}-${a}`,n,j,C)},h,{closeIcon:(0,g.b)(w,r),closable:o},S)))})),h=n(75807);function x(e){return(0,r.ZP)((0,r.uW)(e))}const b=a.Z;b.useModal=h.Z,b.info=function(e){return(0,r.ZP)((0,r.cw)(e))},b.success=function(e){return(0,r.ZP)((0,r.vq)(e))},b.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},b.warning=x,b.warn=x,b.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},b.destroyAll=function(){for(;o.Z.length;){const e=o.Z.pop();e&&e()}},b.config=r.ai,b._InternalPanelDoNotUseOrYouWillBeFired=y;var w=b}}]);