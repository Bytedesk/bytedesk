"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4841],{11475:function(H,A,e){e.d(A,{Z:function(){return O}});var y=e(1413),a=e(67294),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},u=j,D=e(91146),m=function(p,B){return a.createElement(D.Z,(0,y.Z)((0,y.Z)({},p),{},{ref:B,icon:u}))},P=a.forwardRef(m),O=P},5966:function(H,A,e){var y=e(97685),a=e(1413),j=e(91),u=e(21770),D=e(8232),m=e(55241),P=e(97435),O=e(67294),g=e(83606),p=e(85893),B=["fieldProps","proFieldProps"],x=["fieldProps","proFieldProps"],d="text",_=function(s){var o=s.fieldProps,c=s.proFieldProps,f=(0,j.Z)(s,B);return(0,p.jsx)(g.Z,(0,a.Z)({valueType:d,fieldProps:o,filedConfig:{valueType:d},proFieldProps:c},f))},T=function(s){var o=(0,u.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),c=(0,y.Z)(o,2),f=c[0],U=c[1];return(0,p.jsx)(D.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(X){var $,n=X.getFieldValue(s.name||[]);return(0,p.jsx)(m.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(t){return t&&t.parentNode?t.parentNode:t},onOpenChange:function(t){return U(t)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[($=s.statusRender)===null||$===void 0?void 0:$.call(s,n),s.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:f,children:s.children}))}})},b=function(s){var o=s.fieldProps,c=s.proFieldProps,f=(0,j.Z)(s,x),U=(0,O.useState)(!1),i=(0,y.Z)(U,2),X=i[0],$=i[1];return o!=null&&o.statusRender&&f.name?(0,p.jsx)(T,{name:f.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:X,onOpenChange:$,children:(0,p.jsx)("div",{children:(0,p.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,P.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(r){var t;o==null||(t=o.onBlur)===null||t===void 0||t.call(o,r),$(!1)},onClick:function(r){var t;o==null||(t=o.onClick)===null||t===void 0||t.call(o,r),$(!0)}}),proFieldProps:c,filedConfig:{valueType:d}},f))})}):(0,p.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:o,proFieldProps:c,filedConfig:{valueType:d}},f))},Z=_;Z.Password=b,Z.displayName="ProFormComponent",A.Z=Z},30300:function(H,A,e){e.d(A,{FU:function(){return g},O7:function(){return s},k4:function(){return B},yr:function(){return d}});var y=e(15009),a=e.n(y),j=e(97857),u=e.n(j),D=e(99289),m=e.n(D),P=e(85615),O=e(86745);function g(c){return p.apply(this,arguments)}function p(){return p=m()(a()().mark(function c(f){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/v1/category/query/org",{method:"GET",params:u()(u()({},f),{},{client:P.bV})}));case 1:case"end":return i.stop()}},c)})),p.apply(this,arguments)}function B(c){return x.apply(this,arguments)}function x(){return x=m()(a()().mark(function c(f){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/v1/category/create",{method:"POST",data:u()(u()({},f),{},{client:P.bV})}));case 1:case"end":return i.stop()}},c)})),x.apply(this,arguments)}function d(c){return _.apply(this,arguments)}function _(){return _=m()(a()().mark(function c(f){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/v1/category/update",{method:"POST",data:u()(u()({},f),{},{client:P.bV})}));case 1:case"end":return i.stop()}},c)})),_.apply(this,arguments)}function T(c){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function c(f){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/v1/category/delete",{method:"POST",data:_objectSpread(_objectSpread({},f),{},{client:HTTP_CLIENT})}));case 1:case"end":return i.stop()}},c)})),b.apply(this,arguments)}function Z(c){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function c(f){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/v1/category/all",{method:"GET",params:_objectSpread(_objectSpread({},f),{},{client:HTTP_CLIENT})}));case 1:case"end":return i.stop()}},c)})),R.apply(this,arguments)}function s(){return o.apply(this,arguments)}function o(){return o=m()(a()().mark(function c(){return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,O.request)("/visitor/api/v1/category/query",{method:"GET",params:{client:P.bV}}));case 1:case"end":return U.stop()}},c)})),o.apply(this,arguments)}},52670:function(H,A,e){e.d(A,{Z:function(){return $}});var y=e(15009),a=e.n(y),j=e(99289),u=e.n(j),D=e(5574),m=e.n(D),P=e(11475),O=e(85576),g=e(86250),p=e(14726),B=e(66593),x=e(83062),d=e(80049),_=e(73803),T=e(87676),b=e(34994),Z=e(5966),R=e(67294),s=e(85893),o=function(r){var t=r.open,l=r.type,h=r.isEdit,K=r.category,G=r.onCancel,C=r.onSubmit,ee=b.A.useForm(),z=m()(ee,1),w=z[0],Q=(0,_.Z)(),W=Q.translateString,k=(0,T.u)(function(L){return L.orgCurrent});(0,R.useEffect)(function(){h?w.setFieldsValue({name:W(K==null?void 0:K.name)}):w.resetFields()},[t]);var te=function(){w.validateFields().then(function(){var J=u()(a()().mark(function V(Y){var q;return a()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:console.log("handleSaveDep:",Y),q={uid:h?K==null?void 0:K.uid:"",name:Y.name,type:l,orgUid:k==null?void 0:k.uid},C(q);case 3:case"end":return N.stop()}},V)}));return function(V){return J.apply(this,arguments)}}()).catch(function(J){console.log("Failed:",J),d.yw.error("\u521B\u5EFA\u5206\u7C7B\u5931\u8D25")})};return(0,s.jsx)("div",{children:(0,s.jsx)(O.Z,{title:"\u65B0\u5EFA\u5206\u7C7B",open:t,onOk:te,onCancel:G,children:(0,s.jsx)(b.A,{form:w,name:"categoryForm",initialValues:{name:""},submitter:!1,children:(0,s.jsx)(Z.Z,{label:"\u5206\u7C7B\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0!"}]})})})})},c=o,f=e(30300),U=e(89102),i=e(86745),X=function(r){var t=r.type,l=(0,R.useState)(!1),h=m()(l,2),K=h[0],G=h[1],C=(0,i.useIntl)(),ee=(0,R.useState)(!0),z=m()(ee,2),w=z[0],Q=z[1],W=(0,R.useState)(),k=m()(W,2),te=k[0],L=k[1],J=(0,T.u)(function(E){return E.orgCurrent}),V=(0,U.v)(function(E){return{categoryTreeOptions:E.categoryTreeOptions,setCategoryResult:E.setCategoryResult,currentCategory:E.currentCategory,setCurrentCategoryUid:E.setCurrentCategoryUid}}),Y=V.categoryTreeOptions,q=V.setCategoryResult,S=V.currentCategory,N=V.setCurrentCategoryUid,le=O.Z.useModal(),re=m()(le,2),ie=re[0],ue=re[1],ae=(0,_.Z)(),se=ae.translateString,de=ae.translateStringTranct,ce=function(v){ie.confirm({title:C.formatMessage({id:"deleteTip"}),icon:(0,s.jsx)(P.Z,{}),content:"".concat(C.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(se(v.name),"\u3011\uFF1F"),onOk:function(){_e(v)},onCancel:function(){},okText:C.formatMessage({id:"ok"}),cancelText:C.formatMessage({id:"cancel"})})},ge=function(){G(!1)},pe=function(){Q(!1),L(void 0),G(!0)},fe=function(){var E=u()(a()().mark(function v(F){var I;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(console.log("handleSubmit: ",F),w?d.yw.loading(C.formatMessage({id:"updating"})):d.yw.loading(C.formatMessage({id:"creating"})),!w){M.next=8;break}return M.next=5,(0,f.yr)(F);case 5:M.t0=M.sent,M.next=11;break;case 8:return M.next=10,(0,f.k4)(F);case 10:M.t0=M.sent;case 11:I=M.t0,console.log("createCategory response: ",I),I.code===200?(d.yw.destroy(),w?d.yw.success(C.formatMessage({id:"update.success"})):d.yw.success(C.formatMessage({id:"create.success"})),G(!1),oe()):(d.yw.destroy(),d.yw.error(I.message));case 14:case"end":return M.stop()}},v)}));return function(F){return E.apply(this,arguments)}}(),oe=function(){var E=u()(a()().mark(function v(){var F,I;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return console.log("getCategories"),d.yw.success(C.formatMessage({id:"loading"})),F={pageNumber:0,pageSize:50,type:t,orgUid:J.uid},M.next=5,(0,f.FU)(F);case 5:I=M.sent,console.log("queryCategories response: ",I),I.code===200?(q(I),d.yw.destroy()):(d.yw.destroy(),d.yw.error(I.message));case 8:case"end":return M.stop()}},v)}));return function(){return E.apply(this,arguments)}}(),me=function(){var E=u()(a()().mark(function v(){return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:console.log("handleEditCategory: ",S),Q(!0),L(S),G(!0);case 4:case"end":return I.stop()}},v)}));return function(){return E.apply(this,arguments)}}(),_e=function(){var E=u()(a()().mark(function v(F){return a()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:console.log("handleDeleteCategory: ",F);case 1:case"end":return ne.stop()}},v)}));return function(F){return E.apply(this,arguments)}}();(0,R.useEffect)(function(){oe()},[]);var ve=function(v,F){console.log("selected",v,F),v.length!==0&&N(v[0].toString())};return(0,s.jsxs)("div",{children:[(0,s.jsxs)(g.Z,{gap:"small",wrap:"wrap",style:{marginBottom:5},children:[(0,s.jsx)(p.ZP,{type:"primary",size:"small",onClick:pe,children:C.formatMessage({id:"create"})}),(S==null?void 0:S.uid)!==""&&(S==null?void 0:S.uid)!=="all"&&(0,s.jsx)(p.ZP,{size:"small",onClick:me,children:C.formatMessage({id:"edit"})}),(S==null?void 0:S.uid)!==""&&(S==null?void 0:S.uid)!=="all"&&(0,s.jsx)(p.ZP,{onClick:function(){return ce(S)},size:"small",style:{float:"right"},danger:!0,children:C.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,s.jsx)(B.Z,{defaultSelectedKeys:[S.uid],onSelect:ve,treeData:Y,blockNode:!0,titleRender:function(v){return(0,s.jsx)(x.Z,{title:se(v.title),children:de(v.title)})}}),(0,s.jsx)(c,{open:K,type:t,isEdit:w,category:te,onCancel:ge,onSubmit:fe}),ue]})},$=X},77154:function(H,A,e){var y=e(39825);function a(){var j=(0,y.Z)(),u=j.isDarkMode,D=250,m={borderRight:u?"1px solid #333":"1px solid #ccc",background:u?"#141414":"#f5f5f5"},P={background:u?"#141414":"#fff"},O={borderLeft:u?"1px solid #333":"1px solid #ccc",background:u?"#141414":"#f5f5f5"},g={minHeight:120,background:u?"#141414":"#f5f5f5"};return{leftSiderStyle:m,leftSiderWidth:D,headerStyle:P,rightSiderStyle:O,contentStyle:g}}A.Z=a},73803:function(H,A,e){var y=e(85615),a=e(66419),j=e(86745);function u(){var D=(0,j.useIntl)(),m=function(g){return g&&g.startsWith(y.Vo)?D.formatMessage({id:g,defaultMessage:g}):g},P=function(g){return g!=null&&g.startsWith(y.Vo)?(0,a.aS)(D.formatMessage({id:g}),10):(0,a.aS)(g,10)};return{translateString:m,translateStringTranct:P}}A.Z=u},89102:function(H,A,e){e.d(A,{v:function(){return g}});var y=e(19632),a=e.n(y),j=e(97857),u=e.n(j),D=e(85615),m=e(73445),P=e(782),O=e(71381),g=(0,m.Ue)()((0,P.mW)((0,P.tJ)((0,O.n)(function(x,d){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:""},setCategoryResult:function(T){var b=B(T),Z={uid:"all",name:"All"},R=u()(u()({},T),{},{data:{content:[Z].concat(a()(T.data.content))}}),s=p(R);x({categoryResult:R,categoryTreeOptions:s,categorySelectOptions:b})},setCurrentCategoryUid:function(T){var b=d().categoryResult.data.content.find(function(Z){return Z.uid===T});x({currentCategory:b})},deleteCategoryCache:function(){return x({},!0)}}}),{name:D.OM})));function p(x){var d=[];return x.data.content.forEach(function(_){var T={title:_.name,key:_.uid,children:[]};_.children&&Array.isArray(_.children)&&(T.children=_.children.map(function(b){return{title:b.name,key:b.uid,children:[]}})),d.push(T)}),d}function B(x){var d=[];return x.data.content.forEach(function(_){var T={label:_.name,value:_.uid};d.push(T)}),d}},86250:function(H,A,e){e.d(A,{Z:function(){return $}});var y=e(67294),a=e(93967),j=e.n(a),u=e(98423),D=e(98065),m=e(53124),P=e(27036),O=e(45503);const g=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],B=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],x=(n,r)=>{const t=r.wrap===!0?"wrap":r.wrap;return{[`${n}-wrap-${t}`]:t&&g.includes(t)}},d=(n,r)=>{const t={};return B.forEach(l=>{t[`${n}-align-${l}`]=r.align===l}),t[`${n}-align-stretch`]=!r.align&&!!r.vertical,t},_=(n,r)=>{const t={};return p.forEach(l=>{t[`${n}-justify-${l}`]=r.justify===l}),t};function T(n,r){return j()(Object.assign(Object.assign(Object.assign({},x(n,r)),d(n,r)),_(n,r)))}var b=T;const Z=n=>{const{componentCls:r}=n;return{[r]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},R=n=>{const{componentCls:r}=n;return{[r]:{"&-gap-small":{gap:n.flexGapSM},"&-gap-middle":{gap:n.flexGap},"&-gap-large":{gap:n.flexGapLG}}}},s=n=>{const{componentCls:r}=n,t={};return g.forEach(l=>{t[`${r}-wrap-${l}`]={flexWrap:l}}),t},o=n=>{const{componentCls:r}=n,t={};return B.forEach(l=>{t[`${r}-align-${l}`]={alignItems:l}}),t},c=n=>{const{componentCls:r}=n,t={};return p.forEach(l=>{t[`${r}-justify-${l}`]={justifyContent:l}}),t},f=()=>({});var U=(0,P.I$)("Flex",n=>{const{paddingXS:r,padding:t,paddingLG:l}=n,h=(0,O.TS)(n,{flexGapSM:r,flexGap:t,flexGapLG:l});return[Z(h),R(h),s(h),o(h),c(h)]},f,{resetStyle:!1}),i=function(n,r){var t={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.indexOf(l)<0&&(t[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(n);h<l.length;h++)r.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(n,l[h])&&(t[l[h]]=n[l[h]]);return t},$=y.forwardRef((n,r)=>{const{prefixCls:t,rootClassName:l,className:h,style:K,flex:G,gap:C,children:ee,vertical:z=!1,component:w="div"}=n,Q=i(n,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:W,direction:k,getPrefixCls:te}=y.useContext(m.E_),L=te("flex",t),[J,V,Y]=U(L),q=z!=null?z:W==null?void 0:W.vertical,S=j()(h,l,W==null?void 0:W.className,L,V,Y,b(L,n),{[`${L}-rtl`]:k==="rtl",[`${L}-gap-${C}`]:(0,D.n)(C),[`${L}-vertical`]:q}),N=Object.assign(Object.assign({},W==null?void 0:W.style),K);return G&&(N.flex=G),C&&!(0,D.n)(C)&&(N.gap=C),J(y.createElement(w,Object.assign({ref:r,className:S,style:N},(0,u.Z)(Q,["justify","wrap","align"])),ee))})}}]);
