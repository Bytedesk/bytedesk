"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3340],{69753:function(de,R,e){var T=e(1413),d=e(67294),L=e(49495),i=e(89099),Z=function(u,z){return d.createElement(i.Z,(0,T.Z)((0,T.Z)({},u),{},{ref:z,icon:L.Z}))},x=d.forwardRef(Z);R.Z=x},58638:function(de,R,e){e.d(R,{Z:function(){return u}});var T=e(1413),d=e(67294),L={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},i=L,Z=e(89099),x=function(_,S){return d.createElement(Z.Z,(0,T.Z)((0,T.Z)({},_),{},{ref:S,icon:i}))},$=d.forwardRef(x),u=$},57546:function(de,R,e){e.d(R,{Z:function(){return u}});var T=e(1413),d=e(67294),L={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},i=L,Z=e(89099),x=function(_,S){return d.createElement(Z.Z,(0,T.Z)((0,T.Z)({},_),{},{ref:S,icon:i}))},$=d.forwardRef(x),u=$},91310:function(de,R,e){var T=e(15009),d=e.n(T),L=e(99289),i=e.n(L),Z=e(85265),x=e(75658),$=e(98558),u=e(67294),z=e(38302),_=e(73803),S=e(9361),y=e(39825),M=e(85615),c=e(85893),m=function(G){var ue=G.type,N=G.open,W=G.onClose,q=(0,y.Z)(),J=q.isDarkMode,V=(0,_.Z)(),E=V.translateString,s=(0,u.useRef)(),A=(0,z.j)(function(D){return D.currentKbase});(0,u.useEffect)(function(){var D;(D=s.current)===null||D===void 0||D.clearMessage()},[A]);var ie=function(){var D=i()(d()().mark(function h(l){var C,p,j;return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return console.log("handleChat"),C=l[l.length-1],w.next=4,fetch("http://127.0.0.1:1001/visitor/api/v1/ai/ollama/chat?query=".concat(C==null?void 0:C.content,"&kbUid=").concat(A==null?void 0:A.uid),{method:"GET"});case 4:return p=w.sent,w.next=7,p.json();case 7:return j=w.sent,console.log("sendAiMessageStream response:",j),w.abrupt("return",new Response(j==null?void 0:j.data));case 10:case"end":return w.stop()}},h)}));return function(l){return D.apply(this,arguments)}}(),ce=function(){var D=i()(d()().mark(function h(l){return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:console.log("handleChatKeyword");case 1:case"end":return p.stop()}},h)}));return function(l){return D.apply(this,arguments)}}(),pe=function(){var D=i()(d()().mark(function h(l){var C,p,j,Q,w,ae;return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return console.log("handleChatStream"),C=l[l.length-1],b.next=4,fetch("http://127.0.0.1:1001/visitor/api/v1/ai/ollama/chat/stream",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({query:C==null?void 0:C.content,kbUid:A==null?void 0:A.uid,stream:!0})});case 4:if(p=b.sent,!(!p.ok||!p.body)){b.next=7;break}throw new Error("HTTP error! status: ".concat(p.status));case 7:return j=p.body.getReader(),Q=new TextDecoder("utf-8"),w=new TextEncoder,ae=new ReadableStream({start:function(a){return i()(d()().mark(function I(){var H;return d()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:H=function(){j.read().then(function(ee){var Ee=ee.done,De=ee.value;if(Ee){a.close();return}var Me=Q.decode(De,{stream:!0}),be=Me.replaceAll("data:","").replaceAll(`
`,"");a.enqueue(w.encode(be)),H()}).catch(function(ee){console.error("\u8BFB\u53D6\u6D41\u4E2D\u7684\u6570\u636E\u65F6\u53D1\u751F\u9519\u8BEF",ee),a.error(ee)})},H();case 2:case"end":return ve.stop()}},I)}))()}}),b.abrupt("return",new Response(ae));case 12:case"end":return b.stop()}},h)}));return function(l){return D.apply(this,arguments)}}();return(0,c.jsx)("div",{children:(0,c.jsx)(Z.Z,{title:E(A==null?void 0:A.name),onClose:function(){W&&W()},open:N,styles:{body:{padding:0}},children:(0,c.jsx)($.f6,{appearance:J?"dark":"light",theme:{algorithm:J?S.Z.darkAlgorithm:S.Z.defaultAlgorithm},children:(0,c.jsx)(x.j,{chatRef:s,helloMessage:"\u8BF7\u8F93\u5165\u4F60\u60F3\u95EE\u7684\u95EE\u9898",request:function(){var D=i()(d()().mark(function h(l){return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(console.log("messages:",l),!(l.length>0)){p.next=8;break}if(ue!==M.QP){p.next=6;break}return p.abrupt("return",pe(l));case 6:if(ue!==M.jN){p.next=8;break}return p.abrupt("return",ce(l));case 8:case"end":return p.stop()}},h)}));return function(h){return D.apply(this,arguments)}}()})})})})};R.Z=m},68256:function(de,R,e){var T=e(97857),d=e.n(T),L=e(5574),i=e.n(L),Z=e(85576),x=e(67294),$=e(64082),u=e(78367),z=e(27484),_=e.n(z),S=e(85615),y=e(80049),M=e(38302),c=e(89102),m=e(85893),me=u.Z.Dragger,G=function(N){var W=N.type,q=N.isModalOpen,J=N.handleOk,V=N.handleCancel,E=(0,M.j)(function(b){return b.currentKbase}),s=(0,c.v)(function(b){return b.currentCategory}),A=(0,x.useState)("\u5F53\u524D\u652F\u6301\u4E0A\u4F20pdf/txt/markdown/docx\u7B49"),ie=i()(A,2),ce=ie[0],pe=ie[1],D=(0,x.useState)({file:null,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:W,category_uid:(s==null?void 0:s.uid)==="all"?"":s==null?void 0:s.uid,kb_uid:E==null?void 0:E.uid,client:S.bV}),h=i()(D,2),l=h[0],C=h[1],p=function(v){var a=_()(new Date).format("YYYYMMDDHHmmss")+"_"+v.name,I=new FormData;I.append("file",v),I.append("file_name",a),I.append("file_type",v.type),I.append("is_avatar","false"),I.append("kb_type",W),I.append("category_uid",(s==null?void 0:s.uid)==="all"?"":s==null?void 0:s.uid),I.append("kb_uid",E==null?void 0:E.uid),I.append("client",S.bV),fetch("/api/v1/upload/file",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem(S.LA)},body:I}).then(function(H){return H.json()}).then(function(H){console.log("upload data:",H),H.code===200?(y.yw.destroy(),y.yw.success("".concat(a," \u4E0A\u4F20\u6210\u529F")),J()):(y.yw.destroy(),y.yw.error("".concat(a," \u4E0A\u4F20\u5931\u8D25")),V())})},j={name:"file",accept:"application/pdf, text/plain, text/html, text/markdown, application/json, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.wordprocessingml.document",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(S.LA)},data:l,showUploadList:!1,beforeUpload:function(v){console.log("beforeUpload",v);var a=_()(new Date).format("YYMMDDHHmmss")+"_"+v.name;l.file=v,l.file_name=a,l.file_type=v.type,l.kb_type=W,l.category_uid=(s==null?void 0:s.uid)==="all"?"":s==null?void 0:s.uid,l.kb_uid=E==null?void 0:E.uid,console.log("beforeUpload",l)},onChange:function(v){v.file.status==="uploading"&&y.yw.loading("".concat(v.file.name," \u4E0A\u4F20\u4E2D")),v.file.status==="done"?(console.log("response: ",v.file.response),v.file.response.code===200?(y.yw.destroy(),y.yw.success("".concat(v.file.name," \u4E0A\u4F20\u6210\u529F")),J()):(y.yw.destroy(),y.yw.error("".concat(v.file.name," \u4E0A\u4F20\u5931\u8D25")),V())):v.file.status==="error"&&(y.yw.error("".concat(v.file.name," \u4E0A\u4F20\u5931\u8D25")),V())},onDrop:function(v){console.log("Dropped files",v.dataTransfer.files),p(v.dataTransfer.files[0])}},Q=(0,x.useState)(j),w=i()(Q,2),ae=w[0],he=w[1];return(0,x.useEffect)(function(){W!=S.QP&&(j.accept="application/vnd.ms-excel",he(j),pe("\u5F53\u524D\u652F\u6301\u4E0A\u4F20excel\u6587\u4EF6")),C(d()(d()({},l),{},{kb_type:W,category_uid:(s==null?void 0:s.uid)==="all"?"":s==null?void 0:s.uid,kb_uid:E==null?void 0:E.uid}))},[W,s,E]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(Z.Z,{title:"\u4E0A\u4F20\u6587\u4EF6",open:q,onOk:J,onCancel:V,children:(0,m.jsxs)(me,d()(d()({},ae),{},{children:[(0,m.jsx)("p",{className:"ant-upload-drag-icon",children:(0,m.jsx)($.Z,{})}),(0,m.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u81F3\u6B64\u5904\u5B9E\u73B0\u4E0A\u4F20"}),(0,m.jsx)("p",{className:"ant-upload-hint",children:ce})]}))})})};R.Z=G},73226:function(de,R,e){e.r(R),e.d(R,{default:function(){return Ke}});var T=e(77154),d=e(21612),L=e(97857),i=e.n(L),Z=e(13769),x=e.n(Z),$=e(15009),u=e.n($),z=e(99289),_=e.n(z),S=e(5574),y=e.n(S),M=e(80049),c=e(85615),m=e(86745);function me(U){return G.apply(this,arguments)}function G(){return G=_()(u()().mark(function U(r){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/v1/keyword/query/org",{method:"GET",params:i()(i()({},r),{},{client:c.bV})}));case 1:case"end":return t.stop()}},U)})),G.apply(this,arguments)}function ue(U){return N.apply(this,arguments)}function N(){return N=_()(u()().mark(function U(r){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/v1/keyword/create",{method:"POST",data:i()(i()({},r),{},{client:c.bV})}));case 1:case"end":return t.stop()}},U)})),N.apply(this,arguments)}function W(U){return q.apply(this,arguments)}function q(){return q=_()(u()().mark(function U(r){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/v1/keyword/update",{method:"POST",data:i()(i()({},r),{},{client:c.bV})}));case 1:case"end":return t.stop()}},U)})),q.apply(this,arguments)}function J(U){return V.apply(this,arguments)}function V(){return V=_()(u()().mark(function U(r){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/v1/keyword/delete",{method:"POST",data:i()(i()({},r),{},{client:c.bV})}));case 1:case"end":return t.stop()}},U)})),V.apply(this,arguments)}var E=e(87676),s=e(51042),A=e(57546),ie=e(58638),ce=e(69753),pe=e(57482),D=e(86738),h=e(14726),l=e(67294),C=e(89102),p=e(38302),j=e(34994),Q=e(64317),w=e(5966),ae=e(90672),he=e(52688),b=e(85265),v=e(42075),a=e(85893),I=function(r){var g=r.isEdit,t=r.keyword,fe=r.open,te=r.onClose,ge=r.onSubmit,Oe=j.A.useForm(),ye=y()(Oe,1),ne=ye[0],re=(0,E.u)(function(F){return F.currentOrg}),X=(0,p.j)(function(F){return F.currentKbase}),_e=(0,C.v)(function(F){return F.categorySelectOptions});(0,l.useEffect)(function(){g?ne.setFieldsValue({keyword:t==null?void 0:t.keywordList,reply:t==null?void 0:t.replyList,matchType:t==null?void 0:t.matchType,contentType:t==null?void 0:t.contentType,categoryUid:t==null?void 0:t.categoryUid,kbUid:X==null?void 0:X.uid,enabled:t==null?void 0:t.enabled}):ne.resetFields()},[fe]);var Ce=function(){console.log("handleSubmit"),ne.validateFields().then(function(B){console.log(B),ge(i()(i()(i()({},t),B),{},{keywordList:[B.keyword],replyList:[B.reply],kbUid:X==null?void 0:X.uid,orgUid:re==null?void 0:re.uid}))}).catch(function(B){console.log("Form errors:",B),M.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(b.Z,{title:g?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:te,open:fe,extra:(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(h.ZP,{onClick:te,children:"\u53D6\u6D88"}),(0,a.jsx)(h.ZP,{onClick:Ce,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,a.jsxs)(j.A,{form:ne,submitter:{render:function(){return null}},children:[(0,a.jsx)(Q.Z,{label:"\u5339\u914D\u7C7B\u578B",name:"matchType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5339\u914D\u7C7B\u578B"}],options:[{label:"\u6A21\u7CCA\u5339\u914D",value:c.lE},{label:"\u7CBE\u786E\u5339\u914D",value:c.TA,disabled:!0},{label:"\u6B63\u5219\u5339\u914D",value:c.c7,disabled:!0},{label:"\u5411\u91CF\u5339\u914D",value:c.sO,disabled:!0},{label:"\u641C\u7D22\u5F15\u64CE\u5339\u914D",value:c.ND,disabled:!0}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5339\u914D\u7C7B\u578B"}}),(0,a.jsx)(Q.Z,{label:"\u5185\u5BB9\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:_e,tooltip:"\u8BF7\u5148\uFF1A\u521B\u5EFA\u5206\u7C7B",fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B"}}),(0,a.jsx)(Q.Z,{label:"\u7C7B\u578B",name:"contentType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:c.PY},{label:"\u56FE\u7247",value:c.Qm,disabled:!0},{label:"\u89C6\u9891",value:c.tV,disabled:!0},{label:"\u97F3\u9891",value:c.Yu,disabled:!0},{label:"\u6587\u4EF6",value:c.Qn,disabled:!0}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"}}),(0,a.jsx)(w.Z,{label:"\u5173\u952E\u8BCD",name:"keyword",tooltip:"\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528 '|' \u5206\u5272",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF0C\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528 '|' \u5206\u5272",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\uFF0C\u591A\u4E2A\u5173\u952E\u8BCD\u4F7F\u7528 '|' \u5206\u5272 "}]}),(0,a.jsx)(ae.Z,{label:"\u56DE\u590D",name:"reply"}),(0,a.jsx)(he.Z,{label:"\u542F\u7528",name:"enabled",fieldProps:{defaultValue:!0}})]})})})},H=I,Te=e(91310),ve=e(68256),xe=["current"],ee=function(){var r=(0,m.useIntl)(),g=(0,l.useRef)(),t=(0,l.useState)(!0),fe=y()(t,2),te=fe[0],ge=fe[1],Oe=(0,l.useState)(),ye=y()(Oe,2),ne=ye[0],re=ye[1],X=(0,l.useState)(!1),_e=y()(X,2),Ce=_e[0],F=_e[1],B=(0,E.u)(function(o){return o.currentOrg}),K=(0,p.j)(function(o){return o.currentKbase}),le=(0,C.v)(function(o){return o.currentCategory}),Ie=(0,l.useState)(!1),Se=y()(Ie,2),Be=Se[0],Re=Se[1],Fe=(0,l.useState)(!1),Ae=y()(Fe,2),Le=Ae[0],we=Ae[1],Ze=function(){var o=_()(u()().mark(function f(n){var O;return u()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return console.log(n),Y.next=3,J(n);case 3:O=Y.sent,console.log("delete response:",O),O.code===200?(g==null||g.current.reload(),M.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):M.yw.error(r.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return Y.stop()}},f)}));return function(n){return o.apply(this,arguments)}}(),We=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,a.jsx)(m.FormattedMessage,{id:"keyword",defaultMessage:"Keyword"}),dataIndex:"keywordList",copyable:!0},{title:(0,a.jsx)(m.FormattedMessage,{id:"reply",defaultMessage:"Reply"}),dataIndex:"replyList",copyable:!0},{title:(0,a.jsx)(m.FormattedMessage,{id:"matchType",defaultMessage:"MatchType"}),dataIndex:"matchType",width:80,render:function(f,n){return r.formatMessage({id:n==null?void 0:n.matchType,defaultMessage:n==null?void 0:n.matchType})}},{title:(0,a.jsx)(m.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"contentType",hideInSearch:!0,width:50,render:function(f,n){return(0,a.jsx)(a.Fragment,{children:r.formatMessage({id:n==null?void 0:n.contentType,defaultMessage:n==null?void 0:n.contentType})})}},{title:(0,a.jsx)(m.FormattedMessage,{id:"enabled",defaultMessage:"Enabled"}),dataIndex:"enabled",width:80,render:function(f,n){return(0,a.jsx)(a.Fragment,{children:n!=null&&n.enabled?r.formatMessage({id:"yes",defaultMessage:"Yes"}):r.formatMessage({id:"no",defaultMessage:"No"})})}},{title:(0,a.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:r.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(f,n,O,k){return[(0,a.jsx)("a",{onClick:function(){$e(n)},children:r.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),(0,a.jsx)(D.Z,{title:r.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(r.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(n==null?void 0:n.keywordList,"\u3011\uFF1F"),onConfirm:function(){return Ze(n)},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"}),children:(0,a.jsx)(h.ZP,{size:"small",type:"link",danger:!0,children:r.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}],ke=function(){re(void 0),ge(!1),F(!0)},$e=function(f){re(f),ge(!0),F(!0)},Ne=function(){var o=_()(u()().mark(function f(n){var O,k;return u()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(console.log("handleSubmitDrawer",n),te?M.yw.loading(r.formatMessage({id:"updating"})):M.yw.loading(r.formatMessage({id:"creating"})),!te){P.next=8;break}return P.next=5,W(n);case 5:P.t0=P.sent,P.next=11;break;case 8:return P.next=10,ue(n);case 10:P.t0=P.sent;case 11:O=P.t0,console.log("createKeyword response:",n,O),O.code===200?(M.yw.destroy(),M.yw.success(r.formatMessage({id:"create.success",defaultMessage:"create success"})),F(!1),(k=g.current)===null||k===void 0||k.reloadAndRest()):(M.yw.destroy(),M.yw.error(O.message));case 14:case"end":return P.stop()}},f)}));return function(n){return o.apply(this,arguments)}}(),Ve=function(){var o=_()(u()().mark(function f(){return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:we(!0);case 1:case"end":return O.stop()}},f)}));return function(){return o.apply(this,arguments)}}(),He=function(){var o=_()(u()().mark(function f(){var n;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:n=localStorage.getItem(c.LA),window.open("/api/v1/keyword/export?categoryUid="+(le==null?void 0:le.uid)+"&kbUid="+(K==null?void 0:K.uid)+"&orgUid="+(B==null?void 0:B.uid)+"&pageNumber=0&pageSize=20&accessToken="+n);case 2:case"end":return k.stop()}},f)}));return function(){return o.apply(this,arguments)}}();(0,l.useEffect)(function(){var o;(o=g.current)===null||o===void 0||o.reloadAndRest()},[K,le]);var Ye=function(){console.log("handleUploadDragSubmit"),we(!1),g==null||g.current.reload()},ze=function(){console.log("handleUploadDragCancel"),we(!1),g==null||g.current.reload()},je=(0,l.useMemo)(function(){return(K==null?void 0:K.type)===c.jN?(K==null?void 0:K.uid)==="":!0},[K]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pe.Z,{columns:We,actionRef:g,cardBordered:!0,request:function(){var o=_()(u()().mark(function f(n,O,k){var Y,P,Pe,oe;return u()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return console.log("request:",n,O,k),M.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),Y=n.current,P=x()(n,xe),Pe=i()({pageNumber:n.current-1,categoryUid:le.uid==="all"?"":le.uid,kbUid:K==null?void 0:K.uid,orgUid:B==null?void 0:B.uid},P),se.next=6,me(Pe);case 6:return oe=se.sent,console.log("getAllKeywords response:",Pe,oe),M.yw.destroy(),oe.code===200||M.yw.error(oe.message),se.abrupt("return",{data:oe.data.content,success:!0,total:oe.data.totalElements});case 11:case"end":return se.stop()}},f)}));return function(f,n,O){return o.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(f){console.log("page:",f)}},dateFormatter:"string",headerTitle:r.formatMessage({id:"menu.knowledge.keyword",defaultMessage:"KEYWORD"}),toolBarRender:function(){return[(0,a.jsx)(h.ZP,{icon:(0,a.jsx)(s.Z,{}),type:"primary",onClick:ke,disabled:je,children:r.formatMessage({id:"create",defaultMessage:"Create"})},"create"),(0,a.jsx)(h.ZP,{icon:(0,a.jsx)(A.Z,{}),type:"primary",onClick:Ve,disabled:je,children:r.formatMessage({id:"import",defaultMessage:"Import"})},"import"),(0,a.jsx)(h.ZP,{icon:(0,a.jsx)(ie.Z,{}),type:"primary",onClick:He,disabled:je,children:r.formatMessage({id:"export",defaultMessage:"Export"})},"export"),(0,a.jsx)(h.ZP,{icon:(0,a.jsx)(ce.Z,{}),type:"link",onClick:function(){window.open("https://www.weiyuai.cn/download/excel/keyword.xlsx")},children:r.formatMessage({id:"download.template",defaultMessage:"Download Template"})},"download")]}}),(0,a.jsx)(H,{isEdit:te,open:Ce,keyword:ne,onClose:function(){return F(!1)},onSubmit:Ne}),(0,a.jsx)(ve.Z,{type:c.jN,isModalOpen:Le,handleOk:Ye,handleCancel:ze}),(0,a.jsx)(Te.Z,{type:c.jN,open:Be,onClose:function(){return Re(!1)}})]})},Ee=ee,De=e(52670),Me=d.Z.Sider,be=d.Z.Content,Ue=function(){var r=(0,T.Z)(),g=r.leftSiderStyle,t=r.contentStyle;return(0,a.jsx)("div",{children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(Me,{style:g,children:(0,a.jsx)(De.Z,{type:c.jN})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(be,{style:t,children:(0,a.jsx)(Ee,{})})})]})})},Ke=Ue}}]);
