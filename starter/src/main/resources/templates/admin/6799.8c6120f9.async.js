"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[6799],{63833:function(e,t,n){n.d(t,{$l:function(){return m},JT:function(){return q},gf:function(){return y},lg:function(){return g},p0:function(){return c},s9:function(){return f}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(77667),d=n(82045);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/create/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return S.apply(this,arguments)}function S(){return(S=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/update/prompt",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return F.apply(this,arguments)}function F(){return(F=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/robot/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},62639:function(e,t,n){n.d(t,{Yg:function(){return m},kh:function(){return g},pf:function(){return c},y:function(){return f}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(77667),d=n(82045);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/create",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/update",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return w.apply(this,arguments)}function w(){return(w=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/delete",{method:"POST",data:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},440:function(e,t,n){n.d(t,{H:function(){return c}});var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),a=n.n(u),l=n(77667),d=n(82045);function c(e){return v.apply(this,arguments)}function v(){return(v=a()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/vip/invoice/query/org",{method:"GET",params:r()(r()({},t),{},{client:l.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89875:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),p=n(1780),f=n(3245),h=n(40431),m=n(16655),w=n(11984),q=n(5728),S=n(31806),y=n(8091),F=n(82045),b=n(93982),k=n(12265),x=n(72434),U=n(62599),j=n(44194),M=n(85702),C=n(61017),P=n(77667),Z=n(81153),R=n(43314),A=n(14731),T=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,F.useIntl)(),l=(0,F.useNavigate)(),I=(0,p.Z)().translateString,W=(0,A.M)(),V=W.config,N=W.updateConfig,E=(0,h.u)((function(e){return e.currentOrg})),O=(0,j.useState)(),_=d()(O,2),G=_[0],D=_[1],X=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),H=X.currentRobot,$=X.setCurrentRobot,z=(0,M.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,Y=z.setCurrentAgent,B=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=B.currentWorkgroup,K=B.setCurrentWorkgroup,J=(0,j.useMemo)((function(){return n===P._X4?{chatType:P.xtN,chatSid:H.uid}:n===P.Njn?{chatType:P.scI,chatSid:Q.uid}:n===P.aZD?{chatType:P.vPY,chatSid:L.uid}:{chatType:P.xtN,chatSid:""}}),[n,H,Q,L]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:E.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?D(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){ne()}),[E]),(0,j.useEffect)((function(){var e,t,i;if(n===P._X4)o.setFieldsValue({showFaqs:null==H||null===(e=H.serviceSettings)||void 0===e?void 0:e.showFaqs,faqUids:null==H||null===(t=H.serviceSettings)||void 0===t||null===(t=t.faqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),null!=H&&null!==(i=H.serviceSettings)&&void 0!==i&&i.showFaqs?N(s()(s()({},V),{},{window:s()(s()({},V.window),{},{width:680}),chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})})):N(s()(s()({},V),{},{window:s()(s()({},V.window),{},{width:380}),chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===P.Njn){var r,u,a;o.setFieldsValue({showFaqs:null==Q||null===(r=Q.serviceSettings)||void 0===r?void 0:r.showFaqs,faqUids:null==Q||null===(u=Q.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid}))}),null!=Q&&null!==(a=Q.serviceSettings)&&void 0!==a&&a.showFaqs?N(s()(s()({},V),{},{window:s()(s()({},V.window),{},{width:680}),chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})})):N(s()(s()({},V),{},{window:s()(s()({},V.window),{},{width:380}),chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===P.aZD){var l,d,c;o.setFieldsValue({showFaqs:null==L||null===(l=L.serviceSettings)||void 0===l?void 0:l.showFaqs,faqUids:null==L||null===(d=L.serviceSettings)||void 0===d||null===(d=d.faqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),null!=L&&null!==(c=L.serviceSettings)&&void 0!==c&&c.showFaqs?N(s()(s()({},V),{},{window:s()(s()({},V.window),{},{width:680}),chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})})):N(s()(s()({},V),{},{window:s()(s()({},V.window),{},{width:380}),chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[H,Q,L,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,p,f,h,m,w,q,S,y,F,b,k,x,U,j,M,C;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==P._X4){e.next=11;break}return d=s()(s()({},H),{},{serviceSettings:s()(s()({},H.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==H||null===(i=H.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==H||null===(o=H.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==H||null===(a=H.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==H||null===(l=H.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==P.Njn){e.next=21;break}return S=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.quickFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.guessFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(w=Q.leaveMsgSettings)||void 0===w||null===(w=w.worktimes)||void 0===w?void 0:w.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(q=Q.robotSettings)||void 0===q||null===(q=q.robot)||void 0===q?void 0:q.uid}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,Z.sE)(S);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Y(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=29;break;case 21:if(n!==P.aZD){e.next=29;break}return M=s()(s()({},L),{},{serviceSettings:s()(s()({},L.serviceSettings),{},{showFaqs:t.showFaqs,faqUids:t.faqUids,quickFaqUids:null===(F=L.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==L||null===(k=L.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(x=L.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:s()(s()({},L.robotSettings),{},{robotUid:null==L||null===(U=L.robotSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid}),leaveMsgSettings:s()(s()({},L.leaveMsgSettings),{},{worktimeUids:null==L||null===(j=L.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:L.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,R.W5)(M);case 26:C=e.sent,console.log("updateWorkGroup response:",C),200===C.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(C.data)):(c.yw.destroy(),c.yw.error(C.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,T.jsx)(k.ZP,{type:"link",icon:(0,T.jsx)(m.Z,{}),onClick:function(){return window.open(P.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,T.jsx)(S.Z,{label:"是否显示常见问题",name:"showFaqs",fieldProps:{onChange:se}}),(0,T.jsx)(q.A.Item,{children:(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,T.jsx)(y.Z,{name:"faqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faq"}),options:null==G||null===(t=G.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(U.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"show.chat.window"})}),(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"hide.chat.window"})})]})]})}},10187:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),p=n(1780),f=n(3245),h=n(40431),m=n(16655),w=n(11984),q=n(5728),S=n(31806),y=n(8091),F=n(82045),b=n(93982),k=n(12265),x=n(72434),U=n(62599),j=n(44194),M=n(85702),C=n(61017),P=n(77667),Z=n(81153),R=n(43314),A=n(14731),T=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,F.useIntl)(),l=(0,F.useNavigate)(),I=(0,p.Z)().translateString,W=(0,A.M)(),V=W.config,N=W.updateConfig,E=(0,h.u)((function(e){return e.currentOrg})),O=(0,j.useState)(),_=d()(O,2),G=_[0],D=_[1],X=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),H=X.currentRobot,$=X.setCurrentRobot,z=(0,M.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,Y=z.setCurrentAgent,B=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=B.currentWorkgroup,K=B.setCurrentWorkgroup,J=(0,j.useMemo)((function(){return n===P._X4?{chatType:P.xtN,chatSid:H.uid}:n===P.Njn?{chatType:P.scI,chatSid:Q.uid}:n===P.aZD?{chatType:P.vPY,chatSid:L.uid}:{chatType:P.xtN,chatSid:""}}),[n,H,Q,L]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:E.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?D(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){ne()}),[E]),(0,j.useEffect)((function(){var e,t;if(n===P._X4)o.setFieldsValue({showGuessFaqs:null==H||null===(e=H.serviceSettings)||void 0===e?void 0:e.showGuessFaqs,guessFaqUids:null==H||null===(t=H.serviceSettings)||void 0===t||null===(t=t.guessFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===P.Njn){var i,r;o.setFieldsValue({showGuessFaqs:null==Q||null===(i=Q.serviceSettings)||void 0===i?void 0:i.showGuessFaqs,guessFaqUids:null==Q||null===(r=Q.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===P.aZD){var u,a;o.setFieldsValue({showGuessFaqs:null==L||null===(u=L.serviceSettings)||void 0===u?void 0:u.showGuessFaqs,guessFaqUids:null==L||null===(a=L.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[H,Q,L,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,p,f,h,m,w,q,S,y,F,b,k,x,U,j,M,C,A;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==P._X4){e.next=11;break}return d=s()(s()({},H),{},{serviceSettings:s()(s()({},H.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==H||null===(i=H.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==H||null===(o=H.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==H||null===(a=H.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==H||null===(l=H.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==P.Njn){e.next=21;break}return S=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.quickFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),faqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.faqs)||void 0===f?void 0:f.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,Z.sE)(S);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Y(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=29;break;case 21:if(n!==P.aZD){e.next=29;break}return C=s()(s()({},L),{},{serviceSettings:s()(s()({},L.serviceSettings),{},{showGuessFaqs:t.showGuessFaqs,guessFaqUids:t.guessFaqUids,quickFaqUids:null===(F=L.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),faqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==L||null===(k=L.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(x=L.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:s()(s()({},L.robotSettings),{},{robotUid:null==L||null===(U=L.robotSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid}),leaveMsgSettings:s()(s()({},L.leaveMsgSettings),{},{worktimeUids:null==L||null===(j=L.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:null===(M=L.agents)||void 0===M?void 0:M.map((function(e){return e.uid}))}),console.log("workgroupObject:",C),e.next=26,(0,R.W5)(C);case 26:A=e.sent,console.log("updateWorkGroup response:",A),200===A.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(A.data)):(c.yw.destroy(),c.yw.error(A.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqGuess handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,T.jsx)(k.ZP,{type:"link",icon:(0,T.jsx)(m.Z,{}),onClick:function(){return window.open(P.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,T.jsx)(S.Z,{label:"是否显示猜你想问",name:"showGuessFaqs",fieldProps:{onChange:se}}),(0,T.jsx)(q.A.Item,{children:(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,T.jsx)(y.Z,{name:"guessFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqGuess"}),options:null==G||null===(t=G.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(U.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:"显示聊天窗口"}),(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:"隐藏聊天窗口"})]})]})}},18874:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),p=n(1780),f=n(3245),h=n(40431),m=n(16655),w=n(11984),q=n(5728),S=n(31806),y=n(8091),F=n(82045),b=n(93982),k=n(12265),x=n(72434),U=n(62599),j=n(44194),M=n(85702),C=n(61017),P=n(77667),Z=n(81153),R=n(43314),A=n(14731),T=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,F.useIntl)(),l=(0,F.useNavigate)(),I=(0,p.Z)().translateString,W=(0,A.M)(),V=W.config,N=W.updateConfig,E=(0,h.u)((function(e){return e.currentOrg})),O=(0,j.useState)(),_=d()(O,2),G=_[0],D=_[1],X=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),H=X.currentRobot,$=X.setCurrentRobot,z=(0,M.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,Y=z.setCurrentAgent,B=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=B.currentWorkgroup,K=B.setCurrentWorkgroup,J=(0,j.useMemo)((function(){return n===P._X4?{chatType:P.xtN,chatSid:H.uid}:n===P.Njn?{chatType:P.scI,chatSid:Q.uid}:n===P.aZD?{chatType:P.vPY,chatSid:L.uid}:{chatType:P.xtN,chatSid:""}}),[n,H,Q,L]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:E.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?D(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){ne()}),[E]),(0,j.useEffect)((function(){var e;if(n===P._X4)o.setFieldsValue({showHotFaqs:null==H?void 0:H.serviceSettings.showHotFaqs,hotFaqUids:(null==H||null===(e=H.serviceSettings)||void 0===e||null===(e=e.hotFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[]}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===P.Njn){var t;o.setFieldsValue({showHotFaqs:null==Q?void 0:Q.serviceSettings.showHotFaqs,hotFaqUids:(null==Q||null===(t=Q.serviceSettings)||void 0===t||null===(t=t.hotFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===P.aZD){var i;o.setFieldsValue({showHotFaqs:null==L?void 0:L.serviceSettings.showHotFaqs,hotFaqUids:(null==L||null===(i=L.serviceSettings)||void 0===i||null===(i=i.hotFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})))||[]}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[H,Q,L,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,p,f,h,m,w,q,S,y,F,b,k,x,U,j,M,C;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==P._X4){e.next=11;break}return d=s()(s()({},H),{},{serviceSettings:s()(s()({},H.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==H||null===(i=H.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==H||null===(o=H.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==H||null===(a=H.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==H||null===(l=H.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==P.Njn){e.next=21;break}return S=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.quickFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.guessFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),faqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.faqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,Z.sE)(S);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Y(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=29;break;case 21:if(n!==P.aZD){e.next=29;break}return M=s()(s()({},L),{},{serviceSettings:s()(s()({},L.serviceSettings),{},{showHotFaqs:t.showHotFaqs,hotFaqUids:t.hotFaqUids,quickFaqUids:null===(F=L.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),faqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),guessFaqUids:null==L||null===(k=L.serviceSettings)||void 0===k||null===(k=k.guessFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(x=L.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:s()(s()({},L.robotSettings),{},{robotUid:null==L||null===(U=L.robotSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid}),leaveMsgSettings:s()(s()({},L.leaveMsgSettings),{},{worktimeUids:null==L||null===(j=L.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:L.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,R.W5)(M);case 26:C=e.sent,console.log("updateWorkGroup response:",C),200===C.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(C.data)):(c.yw.destroy(),c.yw.error(C.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqHots handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,T.jsx)(k.ZP,{type:"link",icon:(0,T.jsx)(m.Z,{}),onClick:function(){return window.open(P.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,T.jsx)(S.Z,{label:"是否显示热门问题",name:"showHotFaqs",fieldProps:{onChange:se}}),(0,T.jsx)(q.A.Item,{children:(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,T.jsx)(y.Z,{name:"hotFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqHot"}),options:null==G||null===(t=G.data)||void 0===t?void 0:t.content.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(U.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:"显示聊天窗口"}),(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:"隐藏聊天窗口"})]})]})}},90588:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),p=n(1780),f=n(3245),h=n(40431),m=n(16655),w=n(11984),q=n(5728),S=n(31806),y=n(8091),F=n(82045),b=n(93982),k=n(12265),x=n(72434),U=n(62599),j=n(44194),M=n(85702),C=n(61017),P=n(77667),Z=n(81153),R=n(43314),A=n(14731),T=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,F.useIntl)(),l=(0,F.useNavigate)(),I=(0,p.Z)().translateString,W=(0,A.M)(),V=W.config,N=W.updateConfig,E=(0,h.u)((function(e){return e.currentOrg})),O=(0,j.useState)(),_=d()(O,2),G=_[0],D=_[1],X=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),H=X.currentRobot,$=X.setCurrentRobot,z=(0,M.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,Y=z.setCurrentAgent,B=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=B.currentWorkgroup,K=B.setCurrentWorkgroup,J=(0,j.useMemo)((function(){return n===P._X4?{chatType:P.xtN,chatSid:H.uid}:n===P.Njn?{chatType:P.scI,chatSid:Q.uid}:n===P.aZD?{chatType:P.vPY,chatSid:L.uid}:{chatType:P.xtN,chatSid:""}}),[n,H,Q,L]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:E.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?D(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){ne()}),[E]),(0,j.useEffect)((function(){var e,t;if(n===P._X4)o.setFieldsValue({showQuickFaqs:null==H||null===(e=H.serviceSettings)||void 0===e?void 0:e.showQuickFaqs,quickFaqUids:null==H||null===(t=H.serviceSettings)||void 0===t||null===(t=t.quickFaqs)||void 0===t?void 0:t.map((function(e){return e.uid}))}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===P.Njn){var i,r;o.setFieldsValue({showQuickFaqs:null==Q||null===(i=Q.serviceSettings)||void 0===i?void 0:i.showQuickFaqs,quickFaqUids:null==Q||null===(r=Q.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid}))}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===P.aZD){var u,a;o.setFieldsValue({showQuickFaqs:null==L||null===(u=L.serviceSettings)||void 0===u?void 0:u.showQuickFaqs,quickFaqUids:null==L||null===(a=L.serviceSettings)||void 0===a||null===(a=a.quickFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[H,Q,L,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,p,f,h,m,w,q,S,y,F,b,k,x,U,j,M,C;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t),n!==P._X4){e.next=11;break}return d=s()(s()({},H),{},{serviceSettings:s()(s()({},H.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==H||null===(i=H.serviceSettings)||void 0===i||null===(i=i.faqs)||void 0===i?void 0:i.map((function(e){return e.uid})),guessFaqUids:null==H||null===(o=H.serviceSettings)||void 0===o||null===(o=o.guessFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),hotFaqUids:null==H||null===(a=H.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==H||null===(l=H.serviceSettings)||void 0===l||null===(l=l.shortcutFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==P.Njn){e.next=21;break}return S=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.faqs)||void 0===p?void 0:p.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.guessFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),shortcutFaqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.shortcutFaqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,Z.sE)(S);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Y(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=29;break;case 21:if(n!==P.aZD){e.next=29;break}return M=s()(s()({},L),{},{serviceSettings:s()(s()({},L.serviceSettings),{},{showQuickFaqs:t.showQuickFaqs,quickFaqUids:t.quickFaqUids,faqUids:null===(F=L.serviceSettings)||void 0===F||null===(F=F.faqs)||void 0===F?void 0:F.map((function(e){return e.uid})),guessFaqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.guessFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==L||null===(k=L.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),shortcutFaqUids:null==L||null===(x=L.serviceSettings)||void 0===x||null===(x=x.shortcutFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:s()(s()({},L.robotSettings),{},{robotUid:null==L||null===(U=L.robotSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid}),leaveMsgSettings:s()(s()({},L.leaveMsgSettings),{},{worktimeUids:null==L||null===(j=L.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:L.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,R.W5)(M);case 26:C=e.sent,console.log("updateWorkGroup response:",C),200===C.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(C.data)):(c.yw.destroy(),c.yw.error(C.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqs handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,T.jsx)(k.ZP,{type:"link",icon:(0,T.jsx)(m.Z,{}),onClick:function(){return window.open(P.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,T.jsx)(S.Z,{label:"是否显示快捷按钮",name:"showQuickFaqs",fieldProps:{onChange:se}}),(0,T.jsx)(q.A.Item,{children:(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,T.jsx)(y.Z,{name:"quickFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.quickbutton"}),options:null==G||null===(t=G.data)||void 0===t?void 0:t.content.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(U.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:u.formatMessage({id:"show.chat.window"})}),(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:u.formatMessage({id:"hide.chat.window"})})]})]})}},66772:function(e,t,n){var i=n(73193),s=n.n(i),o=n(90819),r=n.n(o),u=n(89933),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(62639),g=n(63833),p=n(1780),f=n(3245),h=n(40431),m=n(16655),w=n(11984),q=n(5728),S=n(31806),y=n(8091),F=n(82045),b=n(93982),k=n(12265),x=n(72434),U=n(62599),j=n(44194),M=n(85702),C=n(61017),P=n(77667),Z=n(81153),R=n(43314),A=n(14731),T=n(31549);t.Z=function(e){var t,n=e.type,i=q.A.useForm(),o=d()(i,1)[0],u=(0,F.useIntl)(),l=(0,F.useNavigate)(),I=(0,p.Z)().translateString,W=(0,A.M)(),V=W.config,N=W.updateConfig,E=(0,h.u)((function(e){return e.currentOrg})),O=(0,j.useState)(),_=d()(O,2),G=_[0],D=_[1],X=(0,f.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),H=X.currentRobot,$=X.setCurrentRobot,z=(0,M.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),Q=z.currentAgent,Y=z.setCurrentAgent,B=(0,C.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),L=B.currentWorkgroup,K=B.setCurrentWorkgroup,J=(0,j.useMemo)((function(){return n===P._X4?{chatType:P.xtN,chatSid:H.uid}:n===P.Njn?{chatType:P.scI,chatSid:Q.uid}:n===P.aZD?{chatType:P.vPY,chatSid:L.uid}:{chatType:P.xtN,chatSid:""}}),[n,H,Q,L]),ee=J.chatType,te=J.chatSid,ne=function(){var e=a()(r()().mark((function e(){var t,n;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.yw.loading(u.formatMessage({id:"loading",defaultMessage:"Loading"})),t={pageNumber:0,pageSize:50,orgUid:E.uid},e.next=4,(0,v.pf)(t);case 4:n=e.sent,console.log("getAllFaqs response:",t,n),c.yw.destroy(),200===n.code?D(n):c.yw.error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){ne()}),[E]),(0,j.useEffect)((function(){var e,t;if(n===P._X4)o.setFieldsValue({showShortcutFaqs:null==H||null===(e=H.serviceSettings)||void 0===e?void 0:e.showShortcutFaqs,shortcutFaqUids:(null==H||null===(t=H.serviceSettings)||void 0===t||null===(t=t.shortcutFaqs)||void 0===t?void 0:t.map((function(e){return e.uid})))||[]}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}));else if(n===P.Njn){var i,r;o.setFieldsValue({showShortcutFaqs:null==Q||null===(i=Q.serviceSettings)||void 0===i?void 0:i.showShortcutFaqs,shortcutFaqUids:(null==Q||null===(r=Q.serviceSettings)||void 0===r||null===(r=r.shortcutFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})))||[]}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}else if(n===P.aZD){var u,a;o.setFieldsValue({showShortcutFaqs:null==L||null===(u=L.serviceSettings)||void 0===u?void 0:u.showShortcutFaqs,shortcutFaqUids:(null==L||null===(a=L.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})))||[]}),N(s()(s()({},V),{},{chatParams:s()(s()({},V.chatParams),{},{org:null==E?void 0:E.uid,t:ee,sid:te})}))}}),[H,Q,L,ee,te]);var ie=function(){var e=a()(r()().mark((function e(t){var i,o,a,l,d,v,p,f,h,m,w,q,S,y,F,b,k,x,U,j,M,C;return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish",t,n),n!==P._X4){e.next=11;break}return d=s()(s()({},H),{},{serviceSettings:s()(s()({},H.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==H||null===(i=H.serviceSettings)||void 0===i||null===(i=i.quickFaqs)||void 0===i?void 0:i.map((function(e){return e.uid})),faqUids:null==H||null===(o=H.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),guessFaqUids:null==H||null===(a=H.serviceSettings)||void 0===a||null===(a=a.guessFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),hotFaqUids:null==H||null===(l=H.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid}))})}),console.log("robotObject:",d),e.next=6,(0,g.$l)(d);case 6:v=e.sent,console.log("updateRobot response:",v),200===v.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),$(v.data)):(c.yw.destroy(),c.yw.error(v.message)),e.next=29;break;case 11:if(n!==P.Njn){e.next=21;break}return S=s()(s()({},Q),{},{serviceSettings:s()(s()({},null==Q?void 0:Q.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null==Q||null===(p=Q.serviceSettings)||void 0===p||null===(p=p.quickFaqs)||void 0===p?void 0:p.map((function(e){return e.uid})),guessFaqUids:null==Q||null===(f=Q.serviceSettings)||void 0===f||null===(f=f.guessFaqs)||void 0===f?void 0:f.map((function(e){return e.uid})),hotFaqUids:null==Q||null===(h=Q.serviceSettings)||void 0===h||null===(h=h.hotFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null==Q||null===(m=Q.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid}))}),robotSettings:s()(s()({},Q.robotSettings),{},{robotUid:null==Q||null===(w=Q.robotSettings)||void 0===w||null===(w=w.robot)||void 0===w?void 0:w.uid}),leaveMsgSettings:s()(s()({},Q.leaveMsgSettings),{},{worktimeUids:null==Q||null===(q=Q.leaveMsgSettings)||void 0===q||null===(q=q.worktimes)||void 0===q?void 0:q.map((function(e){return e.uid}))}),autoReplySettings:s()({},Q.autoReplySettings)}),console.log("agentObject:",S),e.next=16,(0,Z.sE)(S);case 16:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),Y(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=29;break;case 21:if(n!==P.aZD){e.next=29;break}return M=s()(s()({},L),{},{serviceSettings:s()(s()({},L.serviceSettings),{},{showShortcutFaqs:t.showShortcutFaqs,shortcutFaqUids:t.shortcutFaqUids,quickFaqUids:null===(F=L.serviceSettings)||void 0===F||null===(F=F.quickFaqs)||void 0===F?void 0:F.map((function(e){return e.uid})),faqUids:null==L||null===(b=L.serviceSettings)||void 0===b||null===(b=b.faqs)||void 0===b?void 0:b.map((function(e){return e.uid})),hotFaqUids:null==L||null===(k=L.serviceSettings)||void 0===k||null===(k=k.hotFaqs)||void 0===k?void 0:k.map((function(e){return e.uid})),guessFaqUids:null==L||null===(x=L.serviceSettings)||void 0===x||null===(x=x.guessFaqs)||void 0===x?void 0:x.map((function(e){return e.uid}))}),robotSettings:s()(s()({},L.robotSettings),{},{robotUid:null==L||null===(U=L.robotSettings)||void 0===U||null===(U=U.robot)||void 0===U?void 0:U.uid}),leaveMsgSettings:s()(s()({},L.leaveMsgSettings),{},{worktimeUids:null==L||null===(j=L.leaveMsgSettings)||void 0===j||null===(j=j.worktimes)||void 0===j?void 0:j.map((function(e){return e.uid}))}),agentUids:L.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",M),e.next=26,(0,R.W5)(M);case 26:C=e.sent,console.log("updateWorkGroup response:",C),200===C.code?(c.yw.destroy(),c.yw.success(u.formatMessage({id:"update.success"})),K(C.data)):(c.yw.destroy(),c.yw.error(C.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=a()(r()().mark((function e(t){return r()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("TabFaqShortcut handleChange",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsx)(b.Z,{message:"请先到 知识库 -> 常见问题 -> 新建，创建常见问题之后，再来添加",type:"success",action:(0,T.jsx)(k.ZP,{type:"link",icon:(0,T.jsx)(m.Z,{}),onClick:function(){return window.open(P.VPj)},children:u.formatMessage({id:"setting.helpcenter"})})}),(0,T.jsx)(x.Z,{}),(0,T.jsxs)(q.A,{form:o,layout:"vertical",onFinish:ie,children:[(0,T.jsx)(S.Z,{label:"是否显示快捷路径",name:"showShortcutFaqs",fieldProps:{onChange:se}}),(0,T.jsx)(q.A.Item,{children:(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(w.Z,{}),onClick:function(){l("/kb/faq/data")},children:"添加常见问题"},"github")}),(0,T.jsx)(y.Z,{name:"shortcutFaqUids",width:"md",label:u.formatMessage({id:"menu.knowledge.faqShortcut"}),options:null==G||null===(t=G.data)||void 0===t?void 0:t.content.map((function(e){return{label:I(e.question),value:e.uid}})),fieldProps:{mode:"multiple",allowClear:!0,placeholder:(0,T.jsx)(F.FormattedMessage,{id:"choose",defaultMessage:"Choose"})}})]}),(0,T.jsxs)(U.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:"显示聊天窗口"}),(0,T.jsx)(k.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:"隐藏聊天窗口"})]})]})}},64859:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(63833),n(43314),n(85702),n(3245),n(61017),n(77667),n(82045),n(44194),n(31549)},34890:function(e,t,n){var i=n(90819),s=n.n(i),o=n(89933),r=n.n(o),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(81153),g=n(63833),p=n(43314),f=n(85702),h=n(3245),m=n(61017),w=n(77667),q=n(5728),S=n(31806),y=n(11607),F=n(82045),b=n(44194),k=n(14731),x=n(62599),U=n(12265),j=n(31549);t.Z=function(e){var t=e.type,n=(0,F.useIntl)(),i=q.A.useForm(),o=d()(i,1)[0],u=(0,k.M)(),l=u.config,M=u.updateConfig,C=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),P=C.currentRobot,Z=C.setCurrentRobot,R=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),A=R.currentAgent,T=R.setCurrentAgent,I=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),W=I.currentWorkgroup,V=I.setCurrentWorkgroup,N=(0,b.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:P.uid}:t===w.Njn?{chatType:w.scI,chatSid:A.uid}:t===w.aZD?{chatType:w.vPY,chatSid:W.uid}:{chatType:w.xtN,chatSid:""}}),[t,P,A,W]),E=N.chatType,O=N.chatSid;(0,b.useEffect)((function(){var e,n,i,s,r,u;if(t===w._X4)o.setFieldsValue({autoPopup:null==P||null===(e=P.serviceSettings)||void 0===e?void 0:e.autoPopup,showInvite:null==P||null===(n=P.inviteSettings)||void 0===n?void 0:n.show,inviteText:null==P||null===(i=P.inviteSettings)||void 0===i?void 0:i.text}),M(a()(a()({},l),{},{autoPopup:null==P||null===(s=P.serviceSettings)||void 0===s?void 0:s.autoPopup,inviteParams:{show:null==P||null===(r=P.inviteSettings)||void 0===r?void 0:r.show,text:null==P||null===(u=P.inviteSettings)||void 0===u?void 0:u.text},chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O})}));else if(t===w.Njn){var d,c,v,g,p,f;o.setFieldsValue({autoPopup:null==A||null===(d=A.serviceSettings)||void 0===d?void 0:d.autoPopup,showInvite:null==A||null===(c=A.inviteSettings)||void 0===c?void 0:c.show,inviteText:null==A||null===(v=A.inviteSettings)||void 0===v?void 0:v.text}),M(a()(a()({},l),{},{autoPopup:null==A||null===(g=A.serviceSettings)||void 0===g?void 0:g.autoPopup,inviteParams:{show:null==A||null===(p=A.inviteSettings)||void 0===p?void 0:p.show,text:null==A||null===(f=A.inviteSettings)||void 0===f?void 0:f.text},chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O})}))}else if(t===w.aZD){var h,m,q,S,y,F;o.setFieldsValue({autoPopup:null==W||null===(h=W.serviceSettings)||void 0===h?void 0:h.autoPopup,showInvite:null==W||null===(m=W.inviteSettings)||void 0===m?void 0:m.show,inviteText:null==W||null===(q=W.inviteSettings)||void 0===q?void 0:q.text}),M(a()(a()({},l),{},{autoPopup:null==W||null===(S=W.serviceSettings)||void 0===S?void 0:S.autoPopup,inviteParams:{show:null==W||null===(y=W.inviteSettings)||void 0===y?void 0:y.show,text:null==W||null===(F=W.inviteSettings)||void 0===F?void 0:F.text},chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O})}))}}),[P,A,W,E,O]);var _=function(){var e=r()(s()().mark((function e(i){var o,r,u,l,d,f,h,m,q,S,y,F,b,k,x,U,j,M,C,R,I,N,E,O,_;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handlePreFormSubmit:",i),t!==w._X4){e.next=11;break}return f=a()(a()({},P),{},{serviceSettings:a()(a()({},P.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==P||null===(o=P.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==P||null===(r=P.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==P||null===(u=P.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==P||null===(l=P.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==P||null===(d=P.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},P.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("robotObject:",f),e.next=6,(0,g.$l)(f);case 6:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),Z(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return x=a()(a()({},A),{},{serviceSettings:a()(a()({},null==A?void 0:A.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==A||null===(m=A.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==A||null===(q=A.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==A||null===(S=A.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==A||null===(y=A.serviceSettings)||void 0===y||null===(y=y.hotFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(F=A.serviceSettings)||void 0===F||null===(F=F.shortcutFaqs)||void 0===F?void 0:F.map((function(e){return e.uid}))}),robotSettings:a()(a()({},A.robotSettings),{},{robotUid:null==A||null===(b=A.robotSettings)||void 0===b||null===(b=b.robot)||void 0===b?void 0:b.uid}),leaveMsgSettings:a()(a()({},A.leaveMsgSettings),{},{worktimeUids:null==A||null===(k=A.leaveMsgSettings)||void 0===k||null===(k=k.worktimes)||void 0===k?void 0:k.map((function(e){return e.uid}))}),autoReplySettings:a()({},A.autoReplySettings),inviteSettings:a()(a()({},A.inviteSettings),{},{show:i.showInvite,text:i.inviteText})}),console.log("agentObject:",x),e.next=16,(0,v.sE)(x);case 16:U=e.sent,console.log("updateAgent response:",U),200===U.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(U.data)):(c.yw.destroy(),c.yw.error(U.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return O=a()(a()({},W),{},{serviceSettings:a()(a()({},W.serviceSettings),{},{autoPopup:i.autoPopup,faqUids:null==W||null===(j=W.serviceSettings)||void 0===j||null===(j=j.faqs)||void 0===j?void 0:j.map((function(e){return e.uid})),quickFaqUids:null===(M=W.serviceSettings)||void 0===M||null===(M=M.quickFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),guessFaqUids:null==W||null===(C=W.serviceSettings)||void 0===C||null===(C=C.guessFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),hotFaqUids:null==W||null===(R=W.serviceSettings)||void 0===R||null===(R=R.hotFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(I=W.serviceSettings)||void 0===I||null===(I=I.shortcutFaqs)||void 0===I?void 0:I.map((function(e){return e.uid}))}),robotSettings:a()(a()({},W.robotSettings),{},{robotUid:null==W||null===(N=W.robotSettings)||void 0===N||null===(N=N.robot)||void 0===N?void 0:N.uid}),leaveMsgSettings:a()(a()({},W.leaveMsgSettings),{},{worktimeUids:null==W||null===(E=W.leaveMsgSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),inviteSettings:a()(a()({},W.inviteSettings),{},{show:i.showInvite,text:i.inviteText}),agentUids:W.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",O),e.next=26,(0,p.W5)(O);case 26:_=e.sent,console.log("updateWorkGroup response:",_),200===_.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),V(_.data)):(c.yw.destroy(),c.yw.error(_.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{children:[(0,j.jsxs)(q.A,{form:o,onFinish:_,children:[(0,j.jsx)(S.Z,{width:"md",name:"autoPopup",label:n.formatMessage({id:"autoPopup",defaultMessage:"Auto Popup"})}),(0,j.jsx)(S.Z,{width:"md",name:"showInvite",label:n.formatMessage({id:"showInvite",defaultMessage:"Show Invite"})}),(0,j.jsx)(y.Z,{width:"md",name:"inviteText",label:n.formatMessage({id:"inviteText",defaultMessage:"Invite Text"})})]}),(0,j.jsxs)(x.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,j.jsx)(U.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,j.jsx)(U.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},28243:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(63833),n(43314),n(85702),n(3245),n(61017),n(77667),n(82045),n(44194),n(31549)},26469:function(e,t,n){var i=n(90819),s=n.n(i),o=n(89933),r=n.n(o),u=n(73193),a=n.n(u),l=n(45332),d=n.n(l),c=n(89756),v=n(81153),g=n(63833),p=n(43314),f=n(85702),h=n(3245),m=n(61017),w=n(77667),q=n(5728),S=n(31806),y=n(11607),F=n(82045),b=n(44194),k=n(62599),x=n(12265),U=n(14731),j=n(31549);t.Z=function(e){var t=e.type,n=(0,F.useIntl)(),i=q.A.useForm(),o=d()(i,1)[0],u=(0,U.M)(),l=u.config,M=u.updateConfig,C=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),P=C.currentRobot,Z=C.setCurrentRobot,R=(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),A=R.currentAgent,T=R.setCurrentAgent,I=(0,m.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),W=I.currentWorkgroup,V=I.setCurrentWorkgroup,N=(0,b.useMemo)((function(){return t===w._X4?{chatType:w.xtN,chatSid:P.uid}:t===w.Njn?{chatType:w.scI,chatSid:A.uid}:t===w.aZD?{chatType:w.vPY,chatSid:W.uid}:{chatType:w.xtN,chatSid:""}}),[t,P,A,W]),E=N.chatType,O=N.chatSid;(0,b.useEffect)((function(){if(t===w._X4){var e,n,i=null==P||null===(e=P.serviceSettings)||void 0===e?void 0:e.showRightIframe;o.setFieldsValue({showRightIframe:i,rightIframeUrl:null==P||null===(n=P.serviceSettings)||void 0===n?void 0:n.rightIframeUrl}),M(i?a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.Njn){var s,r,u=null==A||null===(s=A.serviceSettings)||void 0===s?void 0:s.showRightIframe;o.setFieldsValue({showRightIframe:u,rightIframeUrl:null==A||null===(r=A.serviceSettings)||void 0===r?void 0:r.rightIframeUrl}),M(u?a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O}),window:a()(a()({},l.window),{},{width:380})}))}else if(t===w.aZD){var d,c,v=null==W||null===(d=W.serviceSettings)||void 0===d?void 0:d.showRightIframe;o.setFieldsValue({showRightIframe:v,rightIframeUrl:null==W||null===(c=W.serviceSettings)||void 0===c?void 0:c.rightIframeUrl}),M(v?a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O}),window:a()(a()({},l.window),{},{width:680})}):a()(a()({},l),{},{chatParams:a()(a()({},l.chatParams),{},{t:E,sid:O}),window:a()(a()({},l.window),{},{width:380})}))}}),[P,A,W,E,O]);var _=function(){var e=r()(s()().mark((function e(i){var o,r,u,l,d,f,h,m,q,S,y,F,b,k,x,U,j,M,C,R,I,N,E,O,_,G;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleRightSubmit:",i),t!==w._X4){e.next=11;break}return f=a()(a()({},P),{},{serviceSettings:a()(a()({},P.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==P||null===(o=P.serviceSettings)||void 0===o||null===(o=o.faqs)||void 0===o?void 0:o.map((function(e){return e.uid})),quickFaqUids:null==P||null===(r=P.serviceSettings)||void 0===r||null===(r=r.quickFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),guessFaqUids:null==P||null===(u=P.serviceSettings)||void 0===u||null===(u=u.guessFaqs)||void 0===u?void 0:u.map((function(e){return e.uid})),hotFaqUids:null==P||null===(l=P.serviceSettings)||void 0===l||null===(l=l.hotFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),shortcutFaqUids:null==P||null===(d=P.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=6,(0,g.$l)(f);case 6:h=e.sent,console.log("updateRobot response:",h),200===h.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),Z(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=29;break;case 11:if(t!==w.Njn){e.next=21;break}return x=a()(a()({},A),{},{serviceSettings:a()(a()({},null==A?void 0:A.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==A||null===(m=A.serviceSettings)||void 0===m||null===(m=m.faqs)||void 0===m?void 0:m.map((function(e){return e.uid})),quickFaqUids:null==A||null===(q=A.serviceSettings)||void 0===q||null===(q=q.quickFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==A||null===(S=A.serviceSettings)||void 0===S||null===(S=S.guessFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),hotFaqUids:null==A||null===(y=A.serviceSettings)||void 0===y||null===(y=y.hotFaqs)||void 0===y?void 0:y.map((function(e){return e.uid})),shortcutFaqUids:null==A||null===(F=A.serviceSettings)||void 0===F||null===(F=F.shortcutFaqs)||void 0===F?void 0:F.map((function(e){return e.uid}))}),robotSettings:a()(a()({},A.robotSettings),{},{robotUid:null==A||null===(b=A.robotSettings)||void 0===b||null===(b=b.robot)||void 0===b?void 0:b.uid}),leaveMsgSettings:a()(a()({},A.leaveMsgSettings),{},{worktimeUids:null==A||null===(k=A.leaveMsgSettings)||void 0===k||null===(k=k.worktimes)||void 0===k?void 0:k.map((function(e){return e.uid}))}),autoReplySettings:a()({},A.autoReplySettings)}),console.log("agentObject:",x),e.next=16,(0,v.sE)(x);case 16:U=e.sent,console.log("updateAgent response:",U),200===U.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),T(U.data)):(c.yw.destroy(),c.yw.error(U.message)),e.next=29;break;case 21:if(t!==w.aZD){e.next=29;break}return _=a()(a()({},W),{},{serviceSettings:a()(a()({},W.serviceSettings),{},{showRightIframe:i.showRightIframe,rightIframeUrl:i.rightIframeUrl,faqUids:null==W||null===(j=W.serviceSettings)||void 0===j||null===(j=j.faqs)||void 0===j?void 0:j.map((function(e){return e.uid})),quickFaqUids:null==W||null===(M=W.serviceSettings)||void 0===M||null===(M=M.quickFaqs)||void 0===M?void 0:M.map((function(e){return e.uid})),guessFaqUids:null==W||null===(C=W.serviceSettings)||void 0===C||null===(C=C.guessFaqs)||void 0===C?void 0:C.map((function(e){return e.uid})),hotFaqUids:null==W||null===(R=W.serviceSettings)||void 0===R||null===(R=R.hotFaqs)||void 0===R?void 0:R.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(I=W.serviceSettings)||void 0===I||null===(I=I.shortcutFaqs)||void 0===I?void 0:I.map((function(e){return e.uid}))}),robotSettings:a()(a()({},W.robotSettings),{},{robotUid:null==W||null===(N=W.robotSettings)||void 0===N||null===(N=N.robot)||void 0===N?void 0:N.uid}),leaveMsgSettings:a()(a()({},W.leaveMsgSettings),{},{worktimeUids:null==W||null===(E=W.leaveMsgSettings)||void 0===E||null===(E=E.worktimes)||void 0===E?void 0:E.map((function(e){return e.uid}))}),agentUids:null==W||null===(O=W.agents)||void 0===O?void 0:O.map((function(e){return e.uid}))}),console.log("workgroupObject:",_),e.next=26,(0,p.W5)(_);case 26:G=e.sent,console.log("updateWorkGroup response:",G),200===G.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),V(G.data)):(c.yw.destroy(),c.yw.error(G.message));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{children:[(0,j.jsxs)(q.A,{form:o,onFinish:_,children:[(0,j.jsx)(S.Z,{width:"md",name:"showRightIframe",label:n.formatMessage({id:"showRightIframe"})}),(0,j.jsx)(y.Z,{width:"md",name:"rightIframeUrl",label:n.formatMessage({id:"rightIframeUrl"})})]}),(0,j.jsxs)(k.Z,{direction:"horizontal",style:{width:"100%",marginTop:10,marginBottom:10},children:[(0,j.jsx)(x.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.showChat()},children:n.formatMessage({id:"show.chat.window"})}),(0,j.jsx)(x.ZP,{type:"primary",onClick:function(){var e;null===(e=window.bytedesk)||void 0===e||e.hideChat()},children:n.formatMessage({id:"hide.chat.window"})})]})]})}},60029:function(e,t,n){var i=n(73193),s=n.n(i),o=n(84176),r=n.n(o),u=n(89756),a=n(74145),l=n(82045),d=n(72909),c=(n(79520),n(44194)),v=n(31549),g=["placeholder","defaultValue","value","style","toolbarKeys","onChange","options"];t.Z=function(e){var t=e.placeholder,n=e.defaultValue,i=e.value,o=e.style,p=e.toolbarKeys,f=e.onChange,h=(e.options,r()(e,g)),m=(0,l.useIntl)(),w=(0,a.Z)().isDarkMode,q=(0,c.useRef)(null),S=(0,c.useRef)(null);return(0,c.useEffect)((function(){if(q.current){if(!S.current){var e=new d.cW({element:q.current,theme:w?"dark":"light",placeholder:t,content:n,toolbarKeys:p,image:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(m.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},video:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(m.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},attachment:{uploaderEvent:{onUploadBefore:function(e,t,n){u.yw.warning(m.formatMessage({id:"i18n.under.development",defaultMessage:"Coming Soon"}))}}},onChange:function(e){"function"==typeof f&&f(e.getHtml(),e.getMarkdown())}});S.current=e}return function(){S.current&&(S.current.destroy(),S.current=null)}}}),[]),(0,c.useEffect)((function(){S.current&&i!==S.current.getHtml()&&S.current.setContent(i||"")}),[i]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",s()(s()({ref:q},h),{},{style:s()({height:"100%"},o)}))})}},89242:function(e,t,n){n(44194),n(82045),n(84330),n(81951),n(68925),n(20924),n(302),n(81167),n(85401),n(31549)},82639:function(e,t,n){n(44194);var i=n(50571),s=n(82980),o=n(26727),r=n(33067),u=n(83440),a=n(53499),l=n(84330),d=n(8401),c=n(34077),v=n(96144),g=n(45831),p=n(31549);t.Z=function(e){var t=e.type,n=[{key:"web",label:"Web",children:(0,p.jsx)(g.Z,{type:t})},{key:"react",label:"React",children:(0,p.jsx)(a.Z,{type:t})},{key:"vue",label:"Vue",children:(0,p.jsx)(v.Z,{type:t})},{key:"svelte",label:"Svelte",children:(0,p.jsx)(d.Z,{type:t})},{key:"vanilla",label:"Vanilla",children:(0,p.jsx)(c.Z,{type:t})},{key:"ios",label:"iOS",children:(0,p.jsx)(s.Z,{type:t})},{key:"android",label:"Android",children:(0,p.jsx)(u.Z,{type:t})},{key:"uniapp",label:"Uniapp",children:(0,p.jsx)(o.Z,{type:t})},{key:"flutter",label:"Flutter",children:(0,p.jsx)(r.Z,{type:t})}];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.Z,{type:t}),(0,p.jsx)(i.Z,{tabPosition:"left",items:n})]})}},19743:function(e,t,n){n(44194),n(82045),n(84330),n(9579),n(64352),n(60992),n(15192),n(31549)},93030:function(e,t,n){n(44194);var i=n(82045),s=(n(48764),n(84330),n(20988),n(76457),n(41956),n(42685),n(2748),n(90819),n(73193),n(84176),n(89933),n(45332),n(40431),n(440),n(77667),n(31549));i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,n(51444),n(56746),i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage,i.FormattedMessage},84330:function(e,t,n){var i=n(82045),s=n(31549);t.Z=function(e){e.type,(0,i.useIntl)();return(0,s.jsx)(s.Fragment,{})}},92349:function(e,t,n){n.d(t,{G:function(){return v}});var i=n(73193),s=n.n(i),o=(n(44194),n(17433)),r=n(77667),u=n(28977),a=n.n(u),l=n(89756),d=n(33934),c=n(31549),v=function(e){var t=e.children,n=e.onSuccess,i=e.onError,u={file:null,file_name:"test.png",file_type:"image/png",is_avatar:"true",kb_type:r.IrL,category_uid:"",kb_uid:"",client:r.bVn},v={name:"file",accept:"image/*",action:(0,d.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(r.LA8)},data:u,showUploadList:!1,beforeUpload:function(e){console.log("beforeUpload",e);var t=a()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;u.file=e,u.file_name=t,u.file_type=e.type,console.log("beforeUpload",u)},onChange:function(e){if("uploading"!==e.file.status&&console.log("not uploading:",e.file),"done"===e.file.status)if(console.log("response: ",e.file.response),200===e.file.response.code){var t=e.file.response.data;n(t),l.yw.success("".concat(e.file.name," 上传成功"))}else i(e.file),l.yw.error("".concat(e.file.name," 上传失败"));else"error"===e.file.status&&(l.yw.error("".concat(e.file.name," 上传失败")),i(e.file))}};return(0,c.jsx)(o.Z,s()(s()({},v),{},{children:t}))}}}]);