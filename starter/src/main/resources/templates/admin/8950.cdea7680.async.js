"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8950],{67560:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(24170),n(72614),n(1902),n(95490),n(55735),n(30921),n(44194),n(31549)},28578:function(e,t,n){var i=n(90819),s=n.n(i),o=n(73193),r=n.n(o),u=n(89933),l=n.n(u),a=n(45332),d=n.n(a),c=n(86803),v=n(24170),g=n(72614),f=n(1902),p=n(95490),S=n(55735),m=n(69169),h=n(48708),w=n(30921),k=n(44194),q=n(31549);t.Z=function(e){var t=e.type,n=(0,w.useIntl)(),i=m.A.useForm(),o=d()(i,1)[0],u=(0,k.useState)(!1),a=d()(u,2),b=(a[0],a[1],(0,f.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}}))),F=b.currentAgent,y=b.setCurrentAgent,U=(0,p.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),C=U.currentWorkgroup,M=U.setCurrentWorkgroup;(0,k.useEffect)((function(){var e;if(t===S.Njn)o.setFieldValue("showRateBtn",null==F||null===(e=F.serviceSettings)||void 0===e?void 0:e.showRateBtn);else if(t===S.aZD){var n;o.setFieldValue("showRateBtn",null==C||null===(n=C.serviceSettings)||void 0===n?void 0:n.showRateBtn)}}),[F,C]);var R=function(){var e=l()(s()().mark((function e(i){var o,u,l,a,d,f,p,m,h,w,k,q,b,U,R,x,A,W;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleShowRateSwitchChange:",i),t!==S.Njn){e.next=11;break}return m=r()(r()({},F),{},{serviceSettings:r()(r()({},null==F?void 0:F.serviceSettings),{},{showRateBtn:i,quickFaqUids:null==F||null===(o=F.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==F||null===(u=F.serviceSettings)||void 0===u||null===(u=u.faqs)||void 0===u?void 0:u.map((function(e){return e.uid})),guessFaqUids:null==F||null===(l=F.serviceSettings)||void 0===l||null===(l=l.guessFaqs)||void 0===l?void 0:l.map((function(e){return e.uid})),hotFaqUids:null==F||null===(a=F.serviceSettings)||void 0===a||null===(a=a.hotFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})),shortcutFaqUids:null==F||null===(d=F.serviceSettings)||void 0===d||null===(d=d.shortcutFaqs)||void 0===d?void 0:d.map((function(e){return e.uid}))}),robotSettings:r()(r()({},F.robotSettings),{},{robotUid:null==F||null===(f=F.robotSettings)||void 0===f||null===(f=f.robot)||void 0===f?void 0:f.uid}),leaveMsgSettings:r()(r()({},F.leaveMsgSettings),{},{worktimeUids:null==F||null===(p=F.leaveMsgSettings)||void 0===p||null===(p=p.worktimes)||void 0===p?void 0:p.map((function(e){return e.uid}))}),autoReplySettings:r()({},F.autoReplySettings)}),console.log("agentObject:",m),e.next=6,(0,v.sE)(m);case 6:h=e.sent,console.log("updateAgent response:",h),200===h.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),y(h.data)):(c.yw.destroy(),c.yw.error(h.message)),e.next=19;break;case 11:if(t!==S.aZD){e.next=19;break}return A=r()(r()({},C),{},{serviceSettings:r()(r()({},C.serviceSettings),{},{showRateBtn:i,quickFaqUids:null===(w=C.serviceSettings)||void 0===w||null===(w=w.quickFaqs)||void 0===w?void 0:w.map((function(e){return e.uid})),faqUids:null==C||null===(k=C.serviceSettings)||void 0===k||null===(k=k.faqs)||void 0===k?void 0:k.map((function(e){return e.uid})),guessFaqUids:null==C||null===(q=C.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null===(b=C.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==C||null===(U=C.serviceSettings)||void 0===U||null===(U=U.shortcutFaqs)||void 0===U?void 0:U.map((function(e){return e.uid}))}),robotSettings:r()(r()({},C.robotSettings),{},{robotUid:null==C||null===(R=C.robotSettings)||void 0===R||null===(R=R.robot)||void 0===R?void 0:R.uid}),leaveMsgSettings:r()(r()({},C.leaveMsgSettings),{},{worktimeUids:null==C||null===(x=C.leaveMsgSettings)||void 0===x||null===(x=x.worktimes)||void 0===x?void 0:x.map((function(e){return e.uid}))}),agentUids:C.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",A),e.next=16,(0,g.W5)(A);case 16:W=e.sent,console.log("updateWorkGroup response:",W),200===W.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),M(W.data)):(c.yw.destroy(),c.yw.error(W.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(m.A,{form:o,submitter:{render:!1},children:[(0,q.jsx)(h.Z,{width:"md",name:"showRateBtn",label:n.formatMessage({id:"rate.show.button"}),tooltip:n.formatMessage({id:"rate.show.button.tooltip"}),fieldProps:{onChange:R}}),!1]})})}}}]);