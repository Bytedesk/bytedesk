"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5714],{99885:function(e,t,n){n.d(t,{Yg:function(){return x},kh:function(){return p},pf:function(){return c},y:function(){return h}});var r=n(90819),a=n.n(r),i=n(73193),o=n.n(i),s=n(89933),l=n.n(s),u=n(55735),d=n(30921);function c(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/query/org",{method:"GET",params:o()(o()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/create",{method:"POST",data:o()(o()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/update",{method:"POST",data:o()(o()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return v.apply(this,arguments)}function v(){return(v=l()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/faq/delete",{method:"POST",data:o()(o()({},t),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2036:function(e,t,n){n.d(t,{H:function(){return i}});n(44194);var r=n(29078),a=n(31549),i=function(e){var t=e.content,n=r.Z.sanitize(t,{ALLOWED_TAGS:["p","div","span","h1","h2","h3","h4","h5","h6","ul","ol","li","a","strong","em","b","i","img","blockquote","code","pre"],ALLOWED_ATTR:["href","target","src","alt","style","class"]});return(0,a.jsx)("div",{className:"RichText",dangerouslySetInnerHTML:{__html:n}})}},17220:function(e,t,n){n(44194);var r=n(75365),a=n(54881),i=n(30921),o=n(31549);t.Z=function(e){var t,n,s=e.file,l=e.onDelete,u=e.showDelete,d=void 0===u||u,c=(0,i.useIntl)();return(0,o.jsxs)("div",{style:{position:"relative",width:"50px",height:"50px",border:"1px solid #f0f0f0",borderRadius:"4px",overflow:"hidden"},title:c.formatMessage({id:null!=s&&null!==(t=s.fileType)&&void 0!==t&&t.startsWith("image/")?"upload.preview.image":"upload.preview.file"}),children:[d&&(0,o.jsx)(r.ZP,{type:"text",size:"small",icon:(0,o.jsx)(a.Z,{}),onClick:function(){return l(s.uid)},style:{position:"absolute",top:0,right:0,padding:"2px",background:"rgba(255, 255, 255, 0.8)",border:"none",borderRadius:"0 4px 0 4px",zIndex:1}}),(0,o.jsx)("div",{onClick:function(){return window.open(s.fileUrl,"_blank")},style:{width:"100%",height:"100%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:null!=s&&null!==(n=s.fileType)&&void 0!==n&&n.startsWith("image/")?(0,o.jsx)("img",{src:null==s?void 0:s.fileUrl,alt:null==s?void 0:s.fileName,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,o.jsx)("div",{style:{fontSize:"12px",padding:"4px",textAlign:"center",wordBreak:"break-all",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.fileName})}),(0,o.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.5)",color:"#fff",fontSize:"10px",padding:"2px",textAlign:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.fileName})]},s.uid)}},27650:function(e,t,n){var r=n(76711),a=n.n(r),i=n(73193),o=n.n(i),s=n(45332),l=n.n(s),u=n(44194),d=n(42085),c=n(30348),f=n(53530),p=n(28977),g=n.n(p),h=n(55735),m=n(86803),x=n(44521),v=n(17220),y=n(30921),w=n(6397),b=n(31549),j=c.Z.Dragger;t.Z=function(e){var t=e.type,n=(e.acceptType,e.isModalOpen),r=e.attachments,i=e.handleSubmit,s=e.handleCancel,c=(0,y.useIntl)(),p=(0,w.j)((function(e){return e.currentKbase})),k=(0,u.useState)([]),M=l()(k,2),S=M[0],q=M[1],Z=(0,u.useState)({file:null,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:t,category_uid:"",kb_uid:null==p?void 0:p.uid,client:h.bVn}),C=l()(Z,2),D=C[0],I=C[1];(0,u.useEffect)((function(){console.log("UploadDrag currentKbase",p),p&&I((function(e){return o()(o()({},e),{},{kb_uid:null==p?void 0:p.uid})}))}),[p]);var F=(0,u.useMemo)((function(){return{name:"file",multiple:!0,action:(0,x.M$)(),headers:{Authorization:"Bearer "+localStorage.getItem(h.LA8)},data:D,showUploadList:!1,beforeUpload:function(e){var t=g()(new Date).format("YYYYMMDDHHmmss")+"_"+e.name;return I((function(n){return o()(o()({},n),{},{file:e,file_name:t,file_type:e.type,category_uid:""})})),!0},onChange:function(e){"uploading"===e.file.status&&m.yw.loading(c.formatMessage({id:"upload.uploading"},{filename:e.file.name})),"done"===e.file.status?200===e.file.response.code?(m.yw.destroy(),m.yw.success(c.formatMessage({id:"upload.success"},{filename:e.file.name})),q((function(t){return[].concat(a()(t),[e.file.response.data])}))):(m.yw.destroy(),m.yw.error(c.formatMessage({id:"upload.failed"},{filename:e.file.name}))):"error"===e.file.status&&m.yw.error(c.formatMessage({id:"upload.failed"},{filename:e.file.name}))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}}}),[D,c]);(0,u.useEffect)((function(){I((function(e){return o()(o()({},e),{},{kb_type:t,category_uid:""})})),r&&q(r.map((function(e){return e.upload})))}),[t]);var U=function(e){console.log("handleDelete",e),q((function(t){return t.filter((function(t){return t.uid!==e}))}))};return(0,b.jsxs)(f.Z,{title:c.formatMessage({id:"upload.modal.title"}),open:n,onOk:function(){i(S)},onCancel:s,children:[(0,b.jsxs)(j,o()(o()({},F),{},{children:[(0,b.jsx)("p",{className:"ant-upload-drag-icon",children:(0,b.jsx)(d.Z,{})}),(0,b.jsx)("p",{className:"ant-upload-text",children:c.formatMessage({id:"upload.drag.text"})}),(0,b.jsx)("p",{className:"ant-upload-hint",children:c.formatMessage({id:"upload.drag.hint"})})]})),(0,b.jsx)("div",{style:{marginTop:"16px",maxHeight:"200px",overflowY:"auto"},children:(0,b.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px"},children:S.map((function(e){return(0,b.jsx)(v.Z,{file:e,onDelete:U},e.uid)}))})})]})}},81421:function(e,t,n){n.r(t),n.d(t,{default:function(){return se}});var r=n(96865),a=n(75574),i=n(8377),o=n(55735),s=n(73193),l=n.n(s),u=n(84176),d=n.n(u),c=n(90819),f=n.n(c),p=n(89933),g=n.n(p),h=n(45332),m=n.n(h),x=n(86803),v=n(99885),y=n(40612),w=n(25482),b=n(30617),j=n(11090),k=n(61107),M=n(81947),S=n(29266),q=n(61355),Z=n(75365),C=n(44194),D=n(90838),I=n(30921),F=n(76750),U=n(6397),T=n(27650),P=n(44521),Y=n(28977),_=n.n(Y),A=n(2036),E=n(76711),z=n.n(E),L=n(69169),R=n(84881),H=n(4499),O=n(32350),V=n(62577),B=n(39755),N=n(79907),W=n(44190),K=n(48708),Q=n(73442),G=n(3849),$=n(38775),J=n(62673),X=n(52288),ee=n(31549),te=function(e){var t=e.isEdit,n=e.faq,r=e.open,a=e.onClose,i=e.onSubmit,s=L.A.useForm(),u=m()(s,1)[0],d=(0,C.useState)(""),c=m()(d,2),p=c[0],h=c[1],b=(0,y.u)((function(e){return e.currentOrg})),j=(0,U.j)((function(e){return e.currentKbase})),k=(0,D.v)((function(e){return e.categorySelectOptions})),M=(0,D.v)((function(e){return e.currentCategory})),q=(0,C.useState)(),I=m()(q,2),F=(I[0],I[1]),T=(0,C.useState)(o.PYi),P=m()(T,2),Y=(P[0],P[1],(0,C.useState)(".png,.jpg,.jpeg")),A=m()(Y,2),E=(A[0],A[1],(0,C.useState)({file:void 0,file_name:"test.pdf",file_type:"application/pdf",is_avatar:"false",kb_type:"type",category_uid:"",kb_uid:(null==j?void 0:j.uid)||"",client:o.bVn})),te=m()(E,2),ne=(te[0],te[1],(0,C.useState)([])),re=m()(ne,2),ae=re[0],ie=re[1],oe=(0,C.useState)(!1),se=m()(oe,2),le=se[0],ue=se[1],de=(0,C.useState)(""),ce=m()(de,2),fe=ce[0],pe=ce[1],ge=(0,C.useRef)(null),he=(0,C.useState)([]),me=m()(he,2),xe=(me[0],me[1]),ve=(0,C.useState)([]),ye=m()(ve,2),we=ye[0],be=ye[1],je=(0,C.useState)(!0),ke=m()(je,2),Me=ke[0],Se=ke[1];(0,C.useEffect)((function(){var e=function(){var e=g()(f()().mark((function e(){var t,r,a;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x.yw.loading("正在加载常见问题列表..."),t={pageNumber:0,pageSize:100,categoryUid:(null==M?void 0:M.uid)===o.zBg?"":null==M?void 0:M.uid,kbUid:null==j?void 0:j.uid,orgUid:null==b?void 0:b.uid},e.next=5,(0,v.pf)(t);case 5:r=e.sent,console.log("获取FAQ列表响应:",t,r),x.yw.destroy(),200===r.code?(a=r.data.content.map((function(e){return{label:e.question,value:e.uid}})),be(a.filter((function(e){return e.value!==(null==n?void 0:n.uid)})))):x.yw.error(r.message||"加载常见问题失败"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),x.yw.destroy(),x.yw.error("加载常见问题列表失败"),console.error("获取FAQ列表出错:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();r&&e()}),[r,null==j?void 0:j.uid,null==b?void 0:b.uid,null==M?void 0:M.uid]),(0,C.useEffect)((function(){var e,r,a;t?(u.setFieldsValue({type:null==n?void 0:n.type,question:null==n?void 0:n.question,answer:null==n?void 0:n.answer,categoryUid:null==n?void 0:n.categoryUid,kbUid:null==j?void 0:j.uid,answerList:(null==n?void 0:n.answerList)||[],enabled:!1!==(null==n?void 0:n.enabled),relatedFaqUids:(null==n||null===(e=n.relatedFaqs)||void 0===e?void 0:e.map((function(e){return e.uid})))||[],dateRange:null!=n&&n.startDate&&null!=n&&n.endDate?[_()(n.startDate),_()(n.endDate)]:void 0}),h((null==n?void 0:n.answer)||""),ie((null==n||null===(r=n.tagList)||void 0===r?void 0:r.filter((function(e){return""!==e})))||[]),xe((null==n||null===(a=n.relatedFaqs)||void 0===a?void 0:a.map((function(e){return e.uid})))||[]),Se(!1!==(null==n?void 0:n.enabled))):(u.setFieldsValue({type:o.PYi,question:"",answer:"",categoryUid:"",kbUid:null==j?void 0:j.uid,answerList:[],enabled:!0,relatedFaqUids:[],dateRange:void 0}),h(""),ie([]),xe([]),Se(!0))}),[n,r]),(0,C.useEffect)((function(){var e;le&&(null===(e=ge.current)||void 0===e||e.focus())}),[le]);var qe=function(){fe&&-1===ae.indexOf(fe)&&ie([].concat(z()(ae),[fe])),ue(!1),pe("")};return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(Q.Z,{title:t?"修改常见问题":"新建常见问题",width:650,onClose:a,open:r,extra:(0,ee.jsxs)(G.Z,{children:[(0,ee.jsx)(Z.ZP,{onClick:a,children:"取消"}),(0,ee.jsx)(Z.ZP,{onClick:function(){console.log("handleSubmit"),u.validateFields().then((function(e){console.log(e);var t=e.dateRange,r=null!=t&&t[0]?t[0].format("YYYY-MM-DDTHH:mm:ss"):void 0,a=null!=t&&t[1]?t[1].format("YYYY-MM-DDTHH:mm:ss"):void 0;i(l()(l()(l()({},n),e),{},{kbUid:null==j?void 0:j.uid,orgUid:null==b?void 0:b.uid,answer:p,tagList:ae,relatedFaqUids:e.relatedFaqUids.filter((function(e){return e!==n.uid})),startDate:r,endDate:a,enabled:e.enabled}))})).catch((function(e){console.log("Form errors:",e),x.yw.error("请检查表单填写")}))},type:"primary",children:"保存"})]}),children:(0,ee.jsxs)(L.A,{form:u,submitter:{render:function(){return null}},children:[(0,ee.jsx)(R.Z,{label:"分类",name:"categoryUid",rules:[{required:!0,message:"请选择分类"}],options:k,fieldProps:{allowClear:!0,placeholder:"请选择分类",onChange:function(e){console.log("category selected ".concat(e)),F(e)}}}),(0,ee.jsx)(R.Z,{label:"类型",name:"type",rules:[{required:!0,message:"请选择类型"}],options:[{label:"文本",value:o.PYi}],fieldProps:{allowClear:!0,placeholder:"请选择类型",onChange:function(e){}}}),(0,ee.jsx)(H.Z,{label:"问题",name:"question",rules:[{required:!0,message:"请输入问题"}]}),(0,ee.jsx)(O.Z,{label:"基础答案",name:"answer"}),(0,ee.jsxs)($.Z,{orientation:"left",children:["扩展答案列表",(0,ee.jsx)("a",{href:"https://www.weiyuai.cn/docs/zh-CN/docs/develop/server/kbase/viplevel",target:"_blank",children:"使用说明"})]}),(0,ee.jsx)(V.u,{name:"answerList",creatorButtonProps:{creatorButtonText:"添加答案",icon:(0,ee.jsx)(w.Z,{}),type:"dashed",block:!0},itemRender:function(e,t){var n=e.listDom,r=e.action,a=t.index;return(0,ee.jsx)(J.Z,{size:"small",style:{marginBottom:16},extra:r,children:n},a)},initialValue:[],copyIconProps:!1,itemContainerRender:function(e){return(0,ee.jsx)("div",{children:e})},children:(0,ee.jsxs)(B.UW,{children:[(0,ee.jsx)(N.Z,{name:"vipLevel",label:"VIP等级",rules:[{required:!0,message:"请输入VIP等级"}],placeholder:"输入VIP等级",min:1}),(0,ee.jsx)(O.Z,{name:"answer",label:"答案内容",rules:[{required:!0,message:"请输入答案内容"}],placeholder:"输入答案内容",fieldProps:{rows:3}})]})}),(0,ee.jsx)(R.Z,{name:"relatedFaqUids",label:"相关问题",mode:"multiple",options:we,fieldProps:{placeholder:"请选择相关问题"}}),(0,ee.jsx)(L.A.Item,{label:"标签",children:(0,ee.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[ae.map((function(e){return(0,ee.jsx)(S.Z,{closable:!0,onClose:function(){return t=e,n=ae.filter((function(e){return e!==t})),void ie(n);var t,n},children:e},e)})),le?(0,ee.jsx)(X.Z,{ref:ge,type:"text",size:"small",style:{width:78},value:fe,onChange:function(e){pe(e.target.value)},onBlur:qe,onPressEnter:qe}):(0,ee.jsxs)(S.Z,{onClick:function(){ue(!0)},style:{borderStyle:"dashed",cursor:"pointer"},children:[(0,ee.jsx)(w.Z,{})," 新标签"]})]})}),(0,ee.jsx)(W.Z,{name:"dateRange",label:"有效日期",fieldProps:{style:{width:"100%"}}}),(0,ee.jsx)(K.Z,{name:"enabled",label:"是否启用",fieldProps:{checked:Me,onChange:function(e){Se(e)}}})]})})})},ne=n(28425),re=["current","pageSize"],ae=function(){var e=(0,I.useIntl)(),t=(0,F.Z)().translateString,n=(0,C.useRef)(),r=(0,C.useState)(!0),a=m()(r,2),i=a[0],s=a[1],u=(0,C.useState)(),c=m()(u,2),p=c[0],h=c[1],Y=(0,C.useState)(!1),E=m()(Y,2),z=E[0],L=E[1],R=(0,C.useState)(1),H=m()(R,2),O=H[0],V=H[1],B=(0,C.useState)(10),N=m()(B,2),W=N[0],K=N[1],Q=(0,y.u)((function(e){return e.currentOrg})),G=(0,U.j)((function(e){return e.currentKbase})),$=(0,D.v)((function(e){return e.currentCategory})),J=(0,D.v)((function(e){return e.categorySelectOptions})),X=(0,C.useState)(!1),ae=m()(X,2),ie=ae[0],oe=ae[1],se=function(){var t=g()(f()().mark((function t(r){var a;return f()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r),t.next=3,(0,v.Yg)(r);case 3:a=t.sent,console.log("delete response:",a),200===a.code?(null==n||n.current.reload(),x.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):x.yw.error(e.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),le=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.question"}),dataIndex:"question",copyable:!0,fixed:"left",width:300,ellipsis:!0,search:!0},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.answer"}),dataIndex:"answer",width:400,ellipsis:!0,search:!0,render:function(e,t){return(0,ee.jsx)(A.H,{content:null==t?void 0:t.answer})}},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.type"}),dataIndex:"type",width:100,valueEnum:{text:{text:e.formatMessage({id:"faq.type.text"})},image:{text:e.formatMessage({id:"faq.type.image"})},video:{text:e.formatMessage({id:"faq.type.video"})},file:{text:e.formatMessage({id:"faq.type.file"})}}},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.clickCount"}),dataIndex:"clickCount",width:100,hideInSearch:!0,sorter:!0},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.upCount"}),dataIndex:"upCount",width:100,hideInSearch:!0,sorter:!0},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.downCount"}),dataIndex:"downCount",width:100,hideInSearch:!0,sorter:!0},{title:(0,ee.jsx)(I.FormattedMessage,{id:"category"}),dataIndex:"categoryUid",hideInSearch:!0,width:120,render:function(e,t){var n=J.find((function(e){return e.value===(null==t?void 0:t.categoryUid)}));return(0,ee.jsx)(S.Z,{color:"blue",children:(null==n?void 0:n.label)||"-"})},filters:J.map((function(e){return{text:e.label,value:e.value}})),filterMode:"tree"},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.isValid"}),dataIndex:"enabled",width:100,hideInSearch:!0,valueEnum:{true:{text:"有效",status:"Success"},false:{text:"无效",status:"Error"}}},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.startDate"}),dataIndex:"startDate",width:160,valueType:"dateTime",hideInSearch:!0,render:function(e,t){return t.startDate?_()(t.startDate).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.endDate"}),dataIndex:"endDate",width:160,valueType:"dateTime",hideInSearch:!0,render:function(e,t){return t.endDate?_()(t.endDate).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:(0,ee.jsx)(I.FormattedMessage,{id:"faq.updatedAt"}),dataIndex:"updatedAt",width:160,valueType:"dateTime",sorter:!0,hideInSearch:!0},{title:e.formatMessage({id:"actions"}),valueType:"option",key:"option",width:120,fixed:"right",render:function(t,n,r,a){return[(0,ee.jsx)("a",{onClick:function(){de(n)},children:e.formatMessage({id:"edit"})},"editable"),(0,ee.jsx)(q.Z,{title:e.formatMessage({id:"deleteTip"}),description:"".concat(e.formatMessage({id:"deleteAffirm"}),"【").concat(null==n?void 0:n.question,"】？"),onConfirm:function(){return se(n)},okText:e.formatMessage({id:"ok"}),cancelText:e.formatMessage({id:"cancel"}),children:(0,ee.jsx)(Z.ZP,{size:"small",type:"link",danger:!0,children:e.formatMessage({id:"delete"})})},"delete")]}}],ue=function(){h(void 0),s(!1),L(!0)},de=function(e){h(e),s(!0),L(!0)},ce=function(){var t=g()(f()().mark((function t(r){var a,o;return f()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("handleSubmitDrawer",r),i?x.yw.loading(e.formatMessage({id:"updating"})):x.yw.loading(e.formatMessage({id:"creating"})),!i){t.next=8;break}return t.next=5,(0,v.y)(r);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,(0,v.kh)(r);case 10:t.t0=t.sent;case 11:a=t.t0,console.log("createFaq response:",r,a),200===a.code?(x.yw.destroy(),x.yw.success(e.formatMessage({id:"create.success",defaultMessage:"create success"})),L(!1),null===(o=n.current)||void 0===o||o.reloadAndRest()):(x.yw.destroy(),x.yw.error(a.message));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fe=function(){var e=g()(f()().mark((function e(){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleImport"),oe(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,C.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.reloadAndRest()}),[G,$]);var pe=function(){var t=g()(f()().mark((function t(){return f()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ne.HK)(o.QPQ,null==Q?void 0:Q.uid,null==G?void 0:G.uid,{showLoading:!0,loadingMessage:e.formatMessage({id:"loading"}),errorMessage:e.formatMessage({id:"fetch.categories.error",defaultMessage:"Failed to fetch categories"})});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ge=function(){var e=g()(f()().mark((function e(){var t;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",O,W),t=localStorage.getItem(o.LA8),window.open((0,P.kG)()+"/api/v1/faq/export?"+new URLSearchParams({pageNumber:String(O-1),pageSize:String(W),categoryUid:(null==$?void 0:$.uid)===o.zBg?"":null==$?void 0:$.uid,kbUid:null==G?void 0:G.uid,orgUid:(null==Q?void 0:Q.uid)||"",accessToken:t||""}).toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(M.Z,{columns:le,actionRef:n,cardBordered:!0,request:function(){var t=g()(f()().mark((function t(n,r,a){var i,s,u,c,p;return f()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("request:",n,r,a),x.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),i=n.current,s=n.pageSize,u=d()(n,re),V(i),K(s),c=l()({pageNumber:i-1,pageSize:s,categoryUid:(null==$?void 0:$.uid)===o.zBg?"":null==$?void 0:$.uid,kbUid:null==G?void 0:G.uid,orgUid:null==Q?void 0:Q.uid},u),t.next=8,(0,v.pf)(c);case 8:return p=t.sent,console.log("getAllFaqs response:",c,p),x.yw.destroy(),200===p.code||x.yw.error(p.message),t.abrupt("return",{data:p.data.content,success:!0,total:p.data.totalElements});case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),scroll:{x:1800},rowKey:"uid",search:{labelWidth:"auto"},pagination:{pageSize:10,onChange:function(e,t){V(e),K(t)}},dateFormatter:"string",headerTitle:t(null==G?void 0:G.name)+" - 常见问题",tooltip:"所添加FAQ内容会自动添加到 '拆分' 列表中 ",toolBarRender:function(){return[(0,ee.jsx)(Z.ZP,{icon:(0,ee.jsx)(w.Z,{}),type:"primary",onClick:ue,children:e.formatMessage({id:"create"})},"create"),(0,ee.jsx)(Z.ZP,{icon:(0,ee.jsx)(b.Z,{}),type:"primary",onClick:fe,children:e.formatMessage({id:"import"})},"import"),(0,ee.jsx)(Z.ZP,{icon:(0,ee.jsx)(j.Z,{}),type:"primary",onClick:ge,children:e.formatMessage({id:"export"})},"export"),(0,ee.jsx)(Z.ZP,{icon:(0,ee.jsx)(k.Z,{}),type:"link",onClick:function(){return(0,P.IY)()},children:e.formatMessage({id:"download.template"})},"download")]},columnsState:{persistenceKey:"faq-table",defaultValue:{viewCount:{show:!1},clickCount:{show:!0},upCount:{show:!0},downCount:{show:!0},valid:{show:!0},startDate:{show:!1},endDate:{show:!1}}}}),z&&(0,ee.jsx)(te,{isEdit:i,open:z,faq:p,onClose:function(){return L(!1)},onSubmit:ce}),ie&&(0,ee.jsx)(T.Z,{type:o.bE7,isModalOpen:ie,handleSubmit:function(e){console.log("handleUploadDragSubmit",e),oe(!1),null==n||n.current.reload(),pe()},handleCancel:function(){console.log("handleUploadDragCancel"),oe(!1),null==n||n.current.reload()}})]})},ie=a.Z.Sider,oe=a.Z.Content,se=function(){var e=(0,r.Z)(),t=e.leftSiderStyle,n=e.contentStyle;return(0,ee.jsx)("div",{children:(0,ee.jsxs)(a.Z,{children:[(0,ee.jsx)(ie,{style:t,children:(0,ee.jsx)(i.Z,{type:o.bE7})}),(0,ee.jsx)(a.Z,{children:(0,ee.jsx)(oe,{style:n,children:(0,ee.jsx)(ae,{})})})]})})}}}]);