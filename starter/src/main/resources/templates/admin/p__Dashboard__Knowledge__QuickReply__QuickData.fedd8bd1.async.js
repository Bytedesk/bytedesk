"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1929],{51042:function(re,S,e){var c=e(1413),h=e(67294),M=e(42110),C=e(91146),u=function(R,i){return h.createElement(C.Z,(0,c.Z)((0,c.Z)({},R),{},{ref:i,icon:M.Z}))},D=h.forwardRef(u);S.Z=D},64317:function(re,S,e){var c=e(1413),h=e(91),M=e(22270),C=e(67294),u=e(66758),D=e(83606),T=e(85893),R=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],i=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],K=function(o,V){var j=o.fieldProps,G=o.children,O=o.params,k=o.proFieldProps,F=o.mode,J=o.valueEnum,Z=o.request,A=o.showSearch,N=o.options,Y=(0,h.Z)(o,R),z=(0,C.useContext)(u.Z);return(0,T.jsx)(D.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,M.h)(J),request:Z,params:O,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:N,mode:F,showSearch:A,getPopupContainer:z.getPopupContainer},j),ref:V,proFieldProps:k},Y),{},{children:G}))},E=C.forwardRef(function(l,o){var V=l.fieldProps,j=l.children,G=l.params,O=l.proFieldProps,k=l.mode,F=l.valueEnum,J=l.request,Z=l.options,A=(0,h.Z)(l,i),N=(0,c.Z)({options:Z,mode:k||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},V),Y=(0,C.useContext)(u.Z);return(0,T.jsx)(D.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,M.h)(F),request:J,params:G,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:Y.getPopupContainer},N),ref:o,proFieldProps:O},A),{},{children:j}))}),$=C.forwardRef(K),x=E,p=$;p.SearchSelect=x,p.displayName="ProFormComponent",S.Z=p},90672:function(re,S,e){var c=e(1413),h=e(91),M=e(67294),C=e(83606),u=e(85893),D=["fieldProps","proFieldProps"],T=function(i,K){var E=i.fieldProps,$=i.proFieldProps,x=(0,h.Z)(i,D);return(0,u.jsx)(C.Z,(0,c.Z)({ref:K,valueType:"textarea",fieldProps:E,proFieldProps:$},x))};S.Z=M.forwardRef(T)},18200:function(re,S,e){e.r(S),e.d(S,{default:function(){return De}});var c=e(77154),h=e(21612),M=e(52670),C=e(97857),u=e.n(C),D=e(13769),T=e.n(D),R=e(15009),i=e.n(R),K=e(99289),E=e.n(K),$=e(5574),x=e.n($),p=e(80049),l=e(85615),o=e(86745);function V(v){return j.apply(this,arguments)}function j(){return j=E()(i()().mark(function v(a){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/v1/quickreply/query/org",{method:"GET",params:u()(u()({},a),{},{client:l.bV})}));case 1:case"end":return r.stop()}},v)})),j.apply(this,arguments)}function G(v){return O.apply(this,arguments)}function O(){return O=E()(i()().mark(function v(a){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/v1/quickreply/create",{method:"POST",data:u()(u()({},a),{},{client:l.bV})}));case 1:case"end":return r.stop()}},v)})),O.apply(this,arguments)}function k(v){return F.apply(this,arguments)}function F(){return F=E()(i()().mark(function v(a){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/v1/quickreply/update",{method:"POST",data:u()(u()({},a),{},{client:l.bV})}));case 1:case"end":return r.stop()}},v)})),F.apply(this,arguments)}function J(v){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function v(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/quickreply/delete",{method:"POST",data:_objectSpread(_objectSpread({},a),{},{client:HTTP_CLIENT})}));case 1:case"end":return r.stop()}},v)})),Z.apply(this,arguments)}var A=e(87676),N=e(51042),Y=e(53719),z=e(14726),I=e(67294),se=e(89102),ie=e(34994),ue=e(64317),de=e(5966),ce=e(90672),pe=e(8232),ve=e(85265),me=e(42075),t=e(85893),fe=function(a){var g=a.isEdit,r=a.quickreply,H=a.open,B=a.onClose,X=a.onSubmit,te=pe.Z.useForm(),q=x()(te,1),Q=q[0],W=(0,A.u)(function(m){return m.orgCurrent}),ae=(0,se.v)(function(m){return m.categorySelectOptions});(0,I.useEffect)(function(){if(g){var m;Q.setFieldsValue({type:r==null?void 0:r.type,title:r==null?void 0:r.title,content:r==null?void 0:r.content,categoryUid:r==null||(m=r.category)===null||m===void 0?void 0:m.uid})}else Q.resetFields()},[H]);var _=function(y){console.log("category selected ".concat(y))},ne=function(y){console.log("type selected ".concat(y))},b=function(){console.log("handleSubmit"),Q.validateFields().then(function(y){console.log(y),X(u()(u()(u()({},r),y),{},{orgUid:W==null?void 0:W.uid}))}).catch(function(y){console.log("Form errors:",y),p.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ve.Z,{title:g?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:B,open:H,extra:(0,t.jsxs)(me.Z,{children:[(0,t.jsx)(z.ZP,{onClick:B,children:"\u53D6\u6D88"}),(0,t.jsx)(z.ZP,{onClick:b,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,t.jsxs)(ie.A,{form:Q,initialValues:u()({},r),submitter:{render:function(){return null}},children:[(0,t.jsx)(ue.Z,{label:"\u5206\u7C7B",name:"categoryUid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],options:ae,fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",onChange:_}}),(0,t.jsx)(ue.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u6587\u672C",value:l.PY},{label:"\u56FE\u7247",value:l.Qm},{label:"\u89C6\u9891",value:l.tV},{label:"\u97F3\u9891",value:l.Yu},{label:"\u6587\u4EF6",value:l.Qn}],fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:ne}}),(0,t.jsx)(de.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,t.jsx)(ce.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},he=fe,ge=e(73803),ye=["current"],Pe=function(){var a=(0,o.useIntl)(),g=(0,I.useRef)(),r=(0,I.useState)(!0),H=x()(r,2),B=H[0],X=H[1],te=(0,I.useState)(),q=x()(te,2),Q=q[0],W=q[1],ae=(0,I.useState)(!1),_=x()(ae,2),ne=_[0],b=_[1],m=(0,ge.Z)(),y=m.translateString,xe=(0,A.u)(function(s){return s.orgCurrent}),ee=(0,se.v)(function(s){return s.currentCategory}),Te=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,t.jsx)(o.FormattedMessage,{id:"title",defaultMessage:"Title"}),dataIndex:"title",copyable:!0,render:function(f,n){return y(n==null?void 0:n.title)}},{title:(0,t.jsx)(o.FormattedMessage,{id:"content",defaultMessage:"Content"}),dataIndex:"content",render:function(f,n){return y(n==null?void 0:n.content)}},{title:(0,t.jsx)(o.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,t.jsx)(o.FormattedMessage,{id:"category",defaultMessage:"Category"}),dataIndex:"category",hideInSearch:!0,render:function(f,n){var P;return y((P=n.category)===null||P===void 0?void 0:P.name)}},{title:(0,t.jsx)(o.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180},{title:a.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:100,render:function(f,n,P,w){return[(0,t.jsx)("a",{onClick:function(){Oe(n)},children:a.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable")]}}],je=function(){W(void 0),X(!1),b(!0)},Oe=function(f){W(f),X(!0),b(!0)},Fe=function(){var s=E()(i()().mark(function f(n){var P,w;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(console.log("handleSubmitDrawer",n),B?p.yw.loading(a.formatMessage({id:"updating"})):p.yw.loading(a.formatMessage({id:"creating"})),!B){d.next=8;break}return d.next=5,k(n);case 5:d.t0=d.sent,d.next=11;break;case 8:return d.next=10,G(n);case 10:d.t0=d.sent;case 11:P=d.t0,console.log("createQuickreply response:",n,P),P.code===200?(p.yw.destroy(),p.yw.loading(a.formatMessage({id:"create.success"})),b(!1),(w=g.current)===null||w===void 0||w.reloadAndRest()):(p.yw.destroy(),p.yw.error(P.message));case 14:case"end":return d.stop()}},f)}));return function(n){return s.apply(this,arguments)}}(),Ze=function(){b(!1)};return(0,I.useEffect)(function(){var s;console.log("currentCategory:",ee),(s=g.current)===null||s===void 0||s.reloadAndRest()},[ee]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.Z,{columns:Te,actionRef:g,cardBordered:!0,request:function(){var s=E()(i()().mark(function f(n,P,w){var oe,d,le,L;return i()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return console.log("request:",n,P,w),p.yw.loading(a.formatMessage({id:"loading",defaultMessage:"Loading"})),oe=n.current,d=T()(n,ye),le=u()({pageNumber:n.current-1,orgUid:xe.uid,categoryUid:ee.uid==="all"?"":ee.uid},d),U.next=6,V(le);case 6:return L=U.sent,console.log("getAllQuickreplys response:",le,L),p.yw.destroy(),L.code===200||p.yw.error(L.message),U.abrupt("return",{data:L.data.content,success:!0,total:L.data.totalElements});case 11:case"end":return U.stop()}},f)}));return function(f,n,P){return s.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(f){console.log("page:",f)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u56DE\u590D",toolBarRender:function(){return[(0,t.jsx)(z.ZP,{icon:(0,t.jsx)(N.Z,{}),type:"primary",onClick:je,children:a.formatMessage({id:"create",defaultMessage:"Create"})},"button")]}}),(0,t.jsx)(he,{isEdit:B,open:ne,quickreply:Q,onClose:Ze,onSubmit:Fe})]})},Ce=Pe,Ee=h.Z.Sider,Se=h.Z.Content,Me=function(){var a=(0,c.Z)(),g=a.leftSiderStyle,r=a.contentStyle;return(0,t.jsx)("div",{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(Ee,{style:g,children:(0,t.jsx)(M.Z,{type:l.dt})}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(Se,{style:r,children:(0,t.jsx)(Ce,{})})})]})})},De=Me}}]);
