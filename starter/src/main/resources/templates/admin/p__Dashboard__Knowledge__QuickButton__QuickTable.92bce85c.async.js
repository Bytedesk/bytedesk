"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2157],{51042:function(V,j,e){var l=e(1413),n=e(67294),E=e(42110),i=e(89099),b=function(g,m){return n.createElement(i.Z,(0,l.Z)((0,l.Z)({},g),{},{ref:m,icon:E.Z}))},p=n.forwardRef(b);j.Z=p},64317:function(V,j,e){var l=e(1413),n=e(91),E=e(22270),i=e(67294),b=e(66758),p=e(47897),f=e(85893),g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],s=function(u,a){var c=u.fieldProps,t=u.children,r=u.params,O=u.proFieldProps,P=u.mode,B=u.valueEnum,Z=u.request,o=u.showSearch,T=u.options,A=(0,n.Z)(u,g),W=(0,i.useContext)(b.Z);return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,E.h)(B),request:Z,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:T,mode:P,showSearch:o,getPopupContainer:W.getPopupContainer},c),ref:a,proFieldProps:O},A),{},{children:t}))},d=i.forwardRef(function(v,u){var a=v.fieldProps,c=v.children,t=v.params,r=v.proFieldProps,O=v.mode,P=v.valueEnum,B=v.request,Z=v.options,o=(0,n.Z)(v,m),T=(0,l.Z)({options:Z,mode:O||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},a),A=(0,i.useContext)(b.Z);return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,E.h)(P),request:B,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({getPopupContainer:A.getPopupContainer},T),ref:u,proFieldProps:r},o),{},{children:c}))}),D=i.forwardRef(s),C=d,S=D;S.SearchSelect=C,S.displayName="ProFormComponent",j.Z=S},5966:function(V,j,e){var l=e(97685),n=e(1413),E=e(91),i=e(21770),b=e(8232),p=e(55241),f=e(97435),g=e(67294),m=e(47897),s=e(85893),d=["fieldProps","proFieldProps"],D=["fieldProps","proFieldProps"],C="text",S=function(t){var r=t.fieldProps,O=t.proFieldProps,P=(0,E.Z)(t,d);return(0,s.jsx)(m.Z,(0,n.Z)({valueType:C,fieldProps:r,filedConfig:{valueType:C},proFieldProps:O},P))},v=function(t){var r=(0,i.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),O=(0,l.Z)(r,2),P=O[0],B=O[1];return(0,s.jsx)(b.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(o){var T,A=o.getFieldValue(t.name||[]);return(0,s.jsx)(p.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(h){return h&&h.parentNode?h.parentNode:h},onOpenChange:B,content:(0,s.jsxs)("div",{style:{padding:"4px 0"},children:[(T=t.statusRender)===null||T===void 0?void 0:T.call(t,A),t.strengthText?(0,s.jsx)("div",{style:{marginTop:10},children:(0,s.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},t.popoverProps),{},{open:P,children:t.children}))}})},u=function(t){var r=t.fieldProps,O=t.proFieldProps,P=(0,E.Z)(t,D),B=(0,g.useState)(!1),Z=(0,l.Z)(B,2),o=Z[0],T=Z[1];return r!=null&&r.statusRender&&P.name?(0,s.jsx)(v,{name:P.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:o,onOpenChange:T,children:(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,f.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(W){var h;r==null||(h=r.onBlur)===null||h===void 0||h.call(r,W),T(!1)},onClick:function(W){var h;r==null||(h=r.onClick)===null||h===void 0||h.call(r,W),T(!0)}}),proFieldProps:O,filedConfig:{valueType:C}},P))})}):(0,s.jsx)(m.Z,(0,n.Z)({valueType:"password",fieldProps:r,proFieldProps:O,filedConfig:{valueType:C}},P))},a=S;a.Password=u,a.displayName="ProFormComponent",j.Z=a},90672:function(V,j,e){var l=e(1413),n=e(91),E=e(67294),i=e(47897),b=e(85893),p=["fieldProps","proFieldProps"],f=function(m,s){var d=m.fieldProps,D=m.proFieldProps,C=(0,n.Z)(m,p);return(0,b.jsx)(i.Z,(0,l.Z)({ref:s,valueType:"textarea",fieldProps:d,proFieldProps:D},C))};j.Z=E.forwardRef(f)},9465:function(V,j,e){e.d(j,{Ck:function(){return C},qL:function(){return m},z4:function(){return d}});var l=e(15009),n=e.n(l),E=e(97857),i=e.n(E),b=e(99289),p=e.n(b),f=e(85615),g=e(86745);function m(a){return s.apply(this,arguments)}function s(){return s=p()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)("/api/v1/quickbutton/query/org",{method:"GET",params:i()(i()({},c),{},{client:f.bV})}));case 1:case"end":return r.stop()}},a)})),s.apply(this,arguments)}function d(a){return D.apply(this,arguments)}function D(){return D=p()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)("/api/v1/quickbutton/create",{method:"POST",data:i()(i()({},c),{},{client:f.bV})}));case 1:case"end":return r.stop()}},a)})),D.apply(this,arguments)}function C(a){return S.apply(this,arguments)}function S(){return S=p()(n()().mark(function a(c){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)("/api/v1/quickbutton/update",{method:"POST",data:i()(i()({},c),{},{client:f.bV})}));case 1:case"end":return r.stop()}},a)})),S.apply(this,arguments)}function v(a){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function a(c){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/v1/quickbutton/delete",{method:"POST",data:_objectSpread(_objectSpread({},c),{},{client:HTTP_CLIENT})}));case 1:case"end":return r.stop()}},a)})),u.apply(this,arguments)}},78163:function(V,j,e){e.r(j),e.d(j,{default:function(){return ne}});var l=e(97857),n=e.n(l),E=e(13769),i=e.n(E),b=e(15009),p=e.n(b),f=e(99289),g=e.n(f),m=e(5574),s=e.n(m),d=e(80049),D=e(9465),C=e(87676),S=e(51042),v=e(1269),u=e(14726),a=e(67294),c=e(34994),t=e(64317),r=e(5966),O=e(90672),P=e(8232),B=e(85265),Z=e(42075),o=e(85893),T=function(x){var z=x.isEdit,M=x.quickbutton,K=x.open,G=x.onClose,X=x.onSubmit,H=P.Z.useForm(),Y=s()(H,1),L=Y[0],N=(0,C.u)(function(k){return k.orgCurrent});(0,a.useEffect)(function(){z?L.setFieldsValue({type:M==null?void 0:M.type,title:M==null?void 0:M.title,content:M==null?void 0:M.content}):L.resetFields()},[K]);var J=function(){console.log("handleSubmit"),L.validateFields().then(function(I){console.log(I),X(n()(n()(n()({},M),I),{},{orgUid:N==null?void 0:N.uid}))}).catch(function(I){console.log("Form errors:",I),d.yw.error("\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199")})};return(0,o.jsx)("div",{children:(0,o.jsx)(B.Z,{title:z?"\u4FEE\u6539":"\u65B0\u5EFA",onClose:G,open:K,extra:(0,o.jsxs)(Z.Z,{children:[(0,o.jsx)(u.ZP,{onClick:G,children:"\u53D6\u6D88"}),(0,o.jsx)(u.ZP,{onClick:J,type:"primary",children:"\u4FDD\u5B58"})]}),children:(0,o.jsxs)(c.A,{form:L,initialValues:{},submitter:{render:function(){return null}},children:[(0,o.jsx)(t.Z,{label:"\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u95EE\u7B54",value:"qa"},{label:"\u7F51\u5740",value:"url"}]}),(0,o.jsx)(r.Z,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}),(0,o.jsx)(O.Z,{label:"\u5185\u5BB9",name:"content"})]})})})},A=T,W=["current"],h=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title"},{title:"\u5185\u5BB9",dataIndex:"content"},{title:"\u7C7B\u578B",dataIndex:"type",hideInSearch:!0,render:function(x){return x==="url"?(0,o.jsx)("span",{children:"\u94FE\u63A5"}):x==="qa"?(0,o.jsx)("span",{children:"\u6309\u94AE"}):x}},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180}],te=function(){var x=(0,a.useRef)(),z=(0,a.useState)(!0),M=s()(z,2),K=M[0],G=M[1],X=(0,a.useState)(),H=s()(X,2),Y=H[0],L=H[1],N=(0,a.useState)(!1),J=s()(N,2),k=J[0],I=J[1],oe=(0,C.u)(function(R){return R.orgCurrent}),ae=[].concat(h,[{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(F,y,U,w){return[(0,o.jsx)("a",{onClick:function(){ue(y)},children:"\u4FEE\u6539"},"editable")]}}]),se=function(){L(void 0),G(!1),I(!0)},ue=function(F){L(F),G(!0),I(!0)},le=function(){var R=g()(p()().mark(function F(y){var U,w;return p()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(console.log("handleSubmitDrawer",y),K?d.yw.loading("\u6B63\u5728\u4FEE\u6539\u5FEB\u6377\u6309\u94AE"):d.yw.loading("\u6B63\u5728\u521B\u5EFA\u5FEB\u6377\u6309\u94AE"),!K){_.next=8;break}return _.next=5,(0,D.Ck)(y);case 5:_.t0=_.sent,_.next=11;break;case 8:return _.next=10,(0,D.z4)(y);case 10:_.t0=_.sent;case 11:U=_.t0,console.log("createQuickbutton response:",y,U),U.code===200?(d.yw.destroy(),d.yw.success("\u5FEB\u6377\u6309\u94AE\u521B\u5EFA\u6210\u529F"),I(!1),(w=x.current)===null||w===void 0||w.reloadAndRest()):(d.yw.destroy(),d.yw.error(U.message));case 14:case"end":return _.stop()}},F)}));return function(y){return R.apply(this,arguments)}}(),ie=function(){I(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v.Z,{columns:ae,actionRef:x,cardBordered:!0,request:function(){var R=g()(p()().mark(function F(y,U,w){var q,_,ee,Q;return p()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return console.log("request:",y,U,w),d.yw.loading("\u52A0\u8F7D\u4E2D"),q=y.current,_=i()(y,W),ee=n()({pageNumber:y.current-1,orgUid:oe.uid},_),$.next=6,(0,D.qL)(ee);case 6:return Q=$.sent,console.log("getAllQuickbuttons response:",ee,Q),d.yw.destroy(),Q.code===200||d.yw.error(Q.message),$.abrupt("return",{data:Q.data.content,success:!0,total:Q.data.totalElements});case 11:case"end":return $.stop()}},F)}));return function(F,y,U){return R.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(F){console.log("page:",F)}},dateFormatter:"string",headerTitle:"\u5FEB\u6377\u6309\u94AE",toolBarRender:function(){return[(0,o.jsx)(u.ZP,{icon:(0,o.jsx)(S.Z,{}),type:"primary",onClick:se,children:"\u65B0\u5EFA"},"button")]}}),(0,o.jsx)(A,{isEdit:K,open:k,quickbutton:Y,onClose:ie,onSubmit:le})]})},ne=te}}]);
