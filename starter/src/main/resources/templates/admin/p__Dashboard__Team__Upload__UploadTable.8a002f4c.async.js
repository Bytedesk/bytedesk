"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1510],{91977:function(W,h,e){e.d(h,{HZ:function(){return A},RR:function(){return f},yL:function(){return j}});var P=e(15009),p=e.n(P),E=e(97857),g=e.n(E),U=e(99289),a=e.n(U),M=e(86745);function f(r){return i.apply(this,arguments)}function i(){return i=a()(p()().mark(function r(u){return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/v1/upload/query/org",{method:"GET",params:g()({},u)}));case 1:case"end":return t.stop()}},r)})),i.apply(this,arguments)}function j(r){return y.apply(this,arguments)}function y(){return y=a()(p()().mark(function r(u){return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/v1/upload/process",{method:"POST",data:g()({},u)}));case 1:case"end":return t.stop()}},r)})),y.apply(this,arguments)}function L(r){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/upload/update",{method:"POST",data:_objectSpread({},u)}));case 1:case"end":return t.stop()}},r)})),m.apply(this,arguments)}function A(r){return T.apply(this,arguments)}function T(){return T=a()(p()().mark(function r(u){return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/v1/upload/delete",{method:"POST",data:g()({},u)}));case 1:case"end":return t.stop()}},r)})),T.apply(this,arguments)}function K(r){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/upload/export",{method:"GET",params:_objectSpread({},u)}));case 1:case"end":return t.stop()}},r)})),_.apply(this,arguments)}},23074:function(W,h,e){e.r(h);var P=e(97857),p=e.n(P),E=e(13769),g=e.n(E),U=e(15009),a=e.n(U),M=e(99289),f=e.n(M),i=e(80049),j=e(91977),y=e(87676),L=e(57482),m=e(86745),A=e(86738),T=e(14726),K=e(67294),_=e(85893),r=["current"],u=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,_.jsx)(m.FormattedMessage,{id:"fileName",defaultMessage:"fileName"}),dataIndex:"fileName",width:350},{title:(0,_.jsx)(m.FormattedMessage,{id:"fileType",defaultMessage:"fileType"}),dataIndex:"fileType",hideInSearch:!0},{title:(0,_.jsx)(m.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",hideInSearch:!0},{title:(0,_.jsx)(m.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,_.jsx)(m.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",width:200,hideInSearch:!0}],b=function(){var o=(0,m.useIntl)(),v=(0,K.useRef)(),B=(0,y.u)(function(c){return c.currentOrg}),S=function(){var c=f()(a()().mark(function d(n){var l;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("process",n),s.next=3,(0,j.yL)(n);case 3:l=s.sent,console.log("process response",l),l.code===200?(v==null||v.current.reload(),i.yw.success(o.formatMessage({id:"process.success",defaultMessage:"Process Success"}))):i.yw.error(o.formatMessage({id:"process.fail",defaultMessage:"Process Error"}));case 6:case"end":return s.stop()}},d)}));return function(n){return c.apply(this,arguments)}}(),k=function(){var c=f()(a()().mark(function d(n){var l;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(n),s.next=3,(0,j.HZ)(n);case 3:l=s.sent,console.log("delete response:",l),l.code===200?(v==null||v.current.reload(),i.yw.success(o.formatMessage({id:"delete.success",defaultMessage:"Delete Success"}))):i.yw.error(o.formatMessage({id:"delete.error",defaultMessage:"Delete Error"}));case 6:case"end":return s.stop()}},d)}));return function(n){return c.apply(this,arguments)}}(),x=[].concat(u,[{title:o.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:150,render:function(d,n,l,C){return[(0,_.jsx)("a",{onClick:function(){var I=n==null?void 0:n.fileUrl,R=encodeURIComponent(I);window.open(decodeURIComponent(R))},children:o.formatMessage({id:"open",defaultMessage:"Open"})},"editable"),(0,_.jsx)(A.Z,{title:o.formatMessage({id:"deleteTip",defaultMessage:"Delete Tip"}),description:"".concat(o.formatMessage({id:"deleteAfirm",defaultMessage:"Delete"}),"\u3010").concat(n==null?void 0:n.fileName,"\u3011\uFF1F"),onConfirm:function(){return k(n)},okText:o.formatMessage({id:"ok"}),cancelText:o.formatMessage({id:"cancel"}),children:(0,_.jsx)(T.ZP,{size:"small",type:"link",danger:!0,children:o.formatMessage({id:"delete",defaultMessage:"Delete"})})},"delete")]}}]);return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(L.Z,{columns:x,actionRef:v,cardBordered:!0,request:function(){var c=f()(a()().mark(function d(n,l,C){var s,I,R,D;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log("request:",n,l,C),s=n.current,I=g()(n,r),R=p()({pageNumber:n.current-1,categoryUid:"",kbUid:"",orgUid:B==null?void 0:B.uid},I),O.next=5,(0,j.RR)(R);case 5:return D=O.sent,console.log("getAllUploads response:",D,R),D.code===200||i.yw.error(D.message),O.abrupt("return",{data:D.data.content,success:!0,total:D.data.totalElements});case 9:case"end":return O.stop()}},d)}));return function(d,n,l){return c.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(d){console.log("page:",d)}},dateFormatter:"string",headerTitle:"\u6587\u6863",toolBarRender:function(){return[]}})})};h.default=b},87676:function(W,h,e){e.d(h,{u:function(){return U}});var P=e(85615),p=e(73445),E=e(782),g=e(18753),U=(0,p.Ue)()((0,E.mW)((0,E.tJ)((0,g.n)(function(a,M){return{currentOrg:{uid:"",name:"",description:""},setCurrentOrg:function(i){a({currentOrg:i})},deleteOrg:function(){return a({},!0)}}}),{name:P.eRd})))}}]);
