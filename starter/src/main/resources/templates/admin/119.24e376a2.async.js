"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[119],{11475:function(I,M,e){e.d(M,{Z:function(){return m}});var l=e(1413),i=e(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},h=b,v=e(91146),o=function(D,u){return i.createElement(v.Z,(0,l.Z)((0,l.Z)({},D),{},{ref:u,icon:h}))},E=i.forwardRef(o),m=E},58638:function(I,M,e){e.d(M,{Z:function(){return m}});var l=e(1413),i=e(67294),b={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},h=b,v=e(91146),o=function(D,u){return i.createElement(v.Z,(0,l.Z)((0,l.Z)({},D),{},{ref:u,icon:h}))},E=i.forwardRef(o),m=E},14101:function(I,M,e){e.d(M,{Nm:function(){return U},fk:function(){return m}});var l=e(15009),i=e.n(l),b=e(97857),h=e.n(b),v=e(99289),o=e.n(v),E=e(86745);function m(a){return n.apply(this,arguments)}function n(){return n=o()(i()().mark(function a(_){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/v1/thread/org",{method:"GET",params:h()({},_)}));case 1:case"end":return t.stop()}},a)})),n.apply(this,arguments)}function D(a){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function a(_){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/thread/update",{method:"POST",data:_objectSpread({},_)}));case 1:case"end":return t.stop()}},a)})),u.apply(this,arguments)}function U(a){return C.apply(this,arguments)}function C(){return C=o()(i()().mark(function a(_){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/v1/thread/close",{method:"POST",data:h()({},_)}));case 1:case"end":return t.stop()}},a)})),C.apply(this,arguments)}function B(a){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function a(_){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/thread/delete",{method:"POST",data:_objectSpread({},_)}));case 1:case"end":return t.stop()}},a)})),y.apply(this,arguments)}function W(a){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function a(_){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/v1/thread/export",{method:"GET",params:_objectSpread({},_)}));case 1:case"end":return t.stop()}},a)})),R.apply(this,arguments)}},60119:function(I,M,e){var l=e(97857),i=e.n(l),b=e(13769),h=e.n(b),v=e(15009),o=e.n(v),E=e(99289),m=e.n(E),n=e(5574),D=e.n(n),u=e(80049),U=e(14101),C=e(73803),B=e(87676),y=e(85615),W=e(11475),R=e(58638),a=e(53719),_=e(86745),T=e(85576),t=e(14726),$=e(67294),c=e(85893),w=["current"],F=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,c.jsx)(_.FormattedMessage,{id:"nickname",defaultMessage:"Nickname"}),dataIndex:"userNickname",render:function(K,L){var d;return(d=L.user)===null||d===void 0?void 0:d.nickname}},{title:(0,c.jsx)(_.FormattedMessage,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInSearch:!0},{title:(0,c.jsx)(_.FormattedMessage,{id:"unreadCount",defaultMessage:"Unread Count"}),dataIndex:"unreadCount",hideInSearch:!0},{title:(0,c.jsx)(_.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",copyable:!0,hideInSearch:!0},{title:"\u6765\u6E90",dataIndex:"client",hideInSearch:!0},{title:(0,c.jsx)(_.FormattedMessage,{id:"updatedAt",defaultMessage:"updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0}],G=function(K){var L=K.type,d=(0,_.useIntl)(),S=(0,$.useRef)(),k=(0,B.u)(function(p){return p.orgCurrent}),N=(0,C.Z)(),V=N.translateString,H=T.Z.useModal(),Z=D()(H,2),J=Z[0],Q=Z[1],X=function(s){var r;J.confirm({title:d.formatMessage({id:"closeTip",defaultMessage:"Close Tip"}),icon:(0,c.jsx)(W.Z,{}),content:"".concat(d.formatMessage({id:"closeASure",defaultMessage:"closeASure"}),"\u3010").concat(V(s==null||(r=s.user)===null||r===void 0?void 0:r.nickname),"\u3011\uFF1F"),onOk:function(){q(s)},onCancel:function(){},okText:d.formatMessage({id:"ok"}),cancelText:d.formatMessage({id:"cancel"})})},Y=[].concat(F,[{title:d.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",render:function(s,r,g,f){return[(0,c.jsx)("a",{onClick:function(){X(r)},children:"\u5173\u95ED"},"editable")]}}]),q=function(){var p=m()(o()().mark(function s(r){var g,f;return o()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log("handleCloseThread:",r),u.yw.loading(d.formatMessage({id:"closing",defaultMessage:"Closing"})),O.next=4,(0,U.Nm)(r);case 4:g=O.sent,console.log("handleCloseThread response:",r,g),g.code===200?(u.yw.destroy(),u.yw.success(d.formatMessage({id:"close.success",defaultMessage:"Close Success"})),(f=S.current)===null||f===void 0||f.reload()):(u.yw.destroy(),u.yw.error(g.message));case 7:case"end":return O.stop()}},s)}));return function(r){return p.apply(this,arguments)}}(),ee=function(){var p=m()(o()().mark(function s(){var r;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:console.log("handleExportExcel"),r=localStorage.getItem(y.LA),window.open("/api/v1/thread/export?uid="+k.uid+"pageNumber=0&pageSize=20&accessToken="+r);case 3:case"end":return f.stop()}},s)}));return function(){return p.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.Z,{columns:Y,actionRef:S,cardBordered:!0,request:function(){var p=m()(o()().mark(function s(r,g,f){var x,O,A,j;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.log("request:",r,g,f),x=r.current,O=h()(r,w),A=i()({pageNumber:r.current-1,orgUid:k.uid},O),P.next=5,(0,U.fk)(A);case 5:return j=P.sent,console.log("getAllThreads response:",A,j),j.code===200||u.yw.error(j.message),P.abrupt("return",{data:j.data.content,success:!0,total:j.data.totalElements});case 9:case"end":return P.stop()}},s)}));return function(s,r,g){return p.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(s){console.log("page:",s)}},dateFormatter:"string",headerTitle:d.formatMessage({id:"thread",defaultMessage:"Thread"}),toolBarRender:function(){return[(0,c.jsx)(t.ZP,{icon:(0,c.jsx)(R.Z,{}),type:"primary",onClick:ee,children:d.formatMessage({id:"export",defaultMessage:"Export"})},"button")]}}),Q]})};M.Z=G},73803:function(I,M,e){var l=e(85615),i=e(66419),b=e(86745);function h(){var v=(0,b.useIntl)(),o=function(n){return n&&n.startsWith(l.Vo)?v.formatMessage({id:n,defaultMessage:n}):n},E=function(n){return n!=null&&n.startsWith(l.Vo)?(0,i.aS)(v.formatMessage({id:n}),10):(0,i.aS)(n,10)};return{translateString:o,translateStringTranct:E}}M.Z=h}}]);
