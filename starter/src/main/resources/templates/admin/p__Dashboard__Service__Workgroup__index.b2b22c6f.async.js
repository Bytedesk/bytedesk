"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9828],{19126:function(an,Ee,u){u.r(Ee),u.d(Ee,{default:function(){return tn}});var ge=u(21612),T=u(67294),Pe=u(15009),y=u.n(Pe),Le=u(99289),V=u.n(Le),Ue=u(5574),G=u.n(Ue),w=u(80049),Oe=u(3418),Me=u(97857),E=u.n(Me),U=u(85615),N=u(86745);function Ve(i){return ke.apply(this,arguments)}function ke(){return ke=V()(y()().mark(function i(o){return y()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,N.request)("/api/v1/workgroup/query/org",{method:"GET",params:E()(E()({},o),{},{client:U.bV})}));case 1:case"end":return r.stop()}},i)})),ke.apply(this,arguments)}function Ie(i){return Fe.apply(this,arguments)}function Fe(){return Fe=V()(y()().mark(function i(o){return y()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,N.request)("/api/v1/workgroup/create",{method:"POST",data:E()(E()({},o),{},{client:U.bV})}));case 1:case"end":return r.stop()}},i)})),Fe.apply(this,arguments)}function ue(i){return Ce.apply(this,arguments)}function Ce(){return Ce=V()(y()().mark(function i(o){return y()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,N.request)("/api/v1/workgroup/update",{method:"POST",data:E()(E()({},o),{},{client:U.bV})}));case 1:case"end":return r.stop()}},i)})),Ce.apply(this,arguments)}function Ge(i){return We.apply(this,arguments)}function We(){return We=V()(y()().mark(function i(o){return y()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,N.request)("/api/v1/workgroup/delete",{method:"POST",data:E()(E()({},o),{},{client:U.bV})}));case 1:case"end":return r.stop()}},i)})),We.apply(this,arguments)}var Ne=u(39825),be=u(30694),ve=u(87676),Qe=u(19632),te=u.n(Qe),ze=u(64529),Re=u(782),He=u(71381),H=(0,ze.Ue)()((0,Re.mW)((0,Re.tJ)((0,He.n)(function(i,o){return{workgroupResult:{data:{content:[]}},currentWorkgroup:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},insertWorkgroup:function(r){i(function(k){var d=k.workgroupResult.data.content;d.unshift(r)})},updateWorkgroup:function(r){i(function(k){var d=k.workgroupResult.data.content,C=d.findIndex(function(S){return S.uid===r.uid});C!==-1?d[C]=r:console.warn("Workgroup with uid ".concat(r.uid," not found."))})},deleteWorkgroup:function(r){i(function(k){var d=k.workgroupResult.data.content,C=d.findIndex(function(S){return S.uid===r.uid});C!==-1?d.splice(C,1):console.warn("Workgroup with uid ".concat(r.uid," not found."))})},setWorkgroupResult:function(r){i({workgroupResult:r});var k=o().currentWorkgroup;if(k.uid===""){var d;((d=r.data)===null||d===void 0||(d=d.content)===null||d===void 0?void 0:d.length)>0&&i({currentWorkgroup:r.data.content[0]})}},setCurrentWorkgroup:function(r){var k=o().workgroupResult.data.content,d=k.findIndex(function(B){return B.uid===r.uid});if(d!==-1){var C=[].concat(te()(k.slice(0,d)),[r],te()(k.slice(d+1))),S=E()(E()({},o().workgroupResult),{},{data:{content:C}});i({workgroupResult:S,currentWorkgroup:r})}else console.warn("Workgroup with the specified uid not found."),i({currentWorkgroup:r})},deleteCurrentWorkgroup:function(r){var k=o().workgroupResult.data.content,d=k.findIndex(function(C){return C.uid===r});d!==-1?i({workgroupResult:E()(E()({},o().workgroupResult),{},{data:{content:[].concat(te()(k.slice(0,d)),te()(k.slice(d+1)))}})}):console.warn("Workgroup not found in cache:",r),o().currentWorkgroup.uid===r&&i({currentWorkgroup:{uid:"",orgUid:""}})},deleteWorkgroupCache:function(){return i({},!0)}}}),{name:U.b6}))),Je=u(11475),Ke=u(64789),Ae=u(85576),Xe=u(86250),z=u(14726),we=u(2487),Te=u(7134),ie=u(73803),q=u(8232),Ye=u(96365),qe=u(83863),e=u(85893),_e=function(o){var f=o.open,r=o.onClose,k=o.onSubmit,d=q.Z.useForm(),C=G()(d,1),S=C[0],B=(0,ie.Z)(),W=B.translateString,$=(0,ve.u)(function(M){return M.orgCurrent}),I=(0,be.E)(function(M){return M.agentResult}),b=(0,T.useState)([]),A=G()(b,2),O=A[0],g=A[1],J=function(){console.log("handleOk"),S.validateFields().then(function(F){console.log("form values:",F);var m=S.getFieldValue("nickname"),v=S.getFieldValue("agents"),h={nickname:m,agentUids:v,orgUid:$.uid};console.log("workgroup:",h),k(h)}).catch(function(F){console.log("Form errors:",F)})},K=function(){console.log("handleCancel"),r()},X=function(F){console.log("selected ".concat(F)),g(F)};return(0,e.jsx)("div",{children:(0,e.jsx)(Ae.Z,{title:"\u521B\u5EFA\u6280\u80FD\u7EC4",open:f,onOk:J,onCancel:K,children:(0,e.jsxs)(q.Z,{form:S,name:"wgForm",style:{maxWidth:400},children:[(0,e.jsx)(q.Z.Item,{label:"\u6280\u80FD\u7EC4\u6635\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0!"}],children:(0,e.jsx)(Ye.Z,{})}),(0,e.jsx)(q.Z.Item,{label:"\u6240\u6709\u5BA2\u670D",name:"agents",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA2\u670D!"}],children:(0,e.jsx)(qe.Z,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:O,onChange:X,options:I.data.content.map(function(M){return{value:M.uid,label:W(M.nickname)}})})})]})})})},er=_e,rr=function(){var o=(0,N.useIntl)(),f=(0,T.useRef)(!1),r=(0,ie.Z)(),k=r.translateStringTranct,d=(0,Ne.Z)(),C=d.isDarkMode,S=(0,T.useState)(!1),B=G()(S,2),W=B[0],$=B[1],I=(0,ve.u)(function(n){return n.orgCurrent}),b=(0,be.E)(function(n){return n.setAgentResult}),A=H(function(n){return{workgroupResult:n.workgroupResult,currentWorkgroup:n.currentWorkgroup,setWorkgroupResult:n.setWorkgroupResult,insertWorkgroup:n.insertWorkgroup,setCurrentWorkgroup:n.setCurrentWorkgroup,deleteCurrentWorkgroup:n.deleteCurrentWorkgroup}}),O=A.workgroupResult,g=A.currentWorkgroup,J=A.setWorkgroupResult,K=A.insertWorkgroup,X=A.setCurrentWorkgroup,M=A.deleteCurrentWorkgroup,F=Ae.Z.useModal(),m=G()(F,2),v=m[0],h=m[1],l=function(a){v.confirm({title:"\u5220\u9664\u63D0\u793A",icon:(0,e.jsx)(Je.Z,{}),content:"\u786E\u8BA4\u8981\u5220\u9664\u5BA2\u670D\u3010".concat(a.nickname,"\u3011\u5417\uFF1F"),onOk:function(){console.log("\u786E\u8BA4\u5220\u9664"),c(a)},onCancel:function(){console.log("\u53D6\u6D88\u5220\u9664")},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"})},c=function(){var n=V()(y()().mark(function a(s){var t;return y()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("delete workgroup",s),p.next=3,Ge(s);case 3:t=p.sent,console.log("delete workgroup response",t),t.code===200?(w.yw.success("\u5220\u9664\u6280\u80FD\u7EC4\u6210\u529F"),M(s.uid)):w.yw.error("\u5220\u9664\u6280\u80FD\u7EC4\u5931\u8D25");case 6:case"end":return p.stop()}},a)}));return function(s){return n.apply(this,arguments)}}(),R=function(){var n=V()(y()().mark(function a(){var s,t;return y()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return s={pageNumber:0,pageSize:50,orgUid:I.uid},p.next=3,(0,Oe._t)(s);case 3:t=p.sent,console.log("queryAgentsByOrg: ",t),t.code===200?b(t):w.yw.error(t.message);case 6:case"end":return p.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),x=function(){var n=V()(y()().mark(function a(){var s,t;return y()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!f.current){p.next=3;break}return console.log("isLoading: 1",f.current),p.abrupt("return");case 3:return f.current=!0,w.yw.loading("loading"),s={pageNumber:0,pageSize:50,orgUid:I.uid},p.next=8,Ve(s);case 8:t=p.sent,console.log("getWorkgroups",t),t.code===200?J(t):w.yw.error(t.message),f.current=!1,w.yw.destroy();case 13:case"end":return p.stop()}},a)}));return function(){return n.apply(this,arguments)}}();(0,T.useEffect)(function(){x(),R()},[]);var L=function(){$(!0)},Z=function(){var n=V()(y()().mark(function a(s){var t;return y()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log("handleSave",s),p.next=3,Ie(s);case 3:t=p.sent,console.log("create workgroup:",t),t.code===200?(w.yw.success("\u521B\u5EFA\u6210\u529F"),K(t.data)):w.yw.error(t.message),$(!1);case 7:case"end":return p.stop()}},a)}));return function(s){return n.apply(this,arguments)}}(),Q=function(){$(!1)},re=function(a,s){X(a)},Se=function(a,s){console.log("list on delete",a),l(a)},ee=function(){L()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Xe.Z,{style:{margin:10},gap:"small",align:"flex-start",children:[(0,e.jsx)(z.ZP,{size:"small",type:"primary",icon:(0,e.jsx)(Ke.Z,{}),onClick:ee,children:o.formatMessage({id:"pages.robot.new",defaultMessage:"New"})}),(0,e.jsx)(z.ZP,{size:"small",onClick:x,children:"\u5237\u65B0"}),(0,e.jsx)(z.ZP,{onClick:function(){return l(g)},size:"small",danger:!0,disabled:g&&g.uid==="",children:o.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,e.jsx)(we.Z,{itemLayout:"horizontal",dataSource:O.data.content,renderItem:function(a,s){return(0,e.jsx)(we.Z.Item,{style:g.uid===a.uid?{backgroundColor:C?"#333333":"#dddddd",cursor:"pointer"}:{cursor:"pointer"},onClick:function(){return re(a,s)},children:(0,e.jsx)(we.Z.Item.Meta,{style:{marginLeft:"10px"},avatar:(0,e.jsx)(Te.C,{src:a.avatar}),title:(0,e.jsx)(e.Fragment,{children:k(a.nickname)}),description:k(a.description)})})}}),(0,e.jsx)(er,{open:W,onClose:Q,onSubmit:Z}),h]})},nr=rr,ye=u(48096),_=u(34994),or=u(5966),xe=u(64317),ne=u(90672),ur=u(88484),tr=u(66723),ir=function(){var o=q.Z.useForm(),f=G()(o,1),r=f[0],k=(0,N.useIntl)(),d=(0,ie.Z)(),C=d.translateString,S=(0,be.E)(function(l){return l.agentResult}),B=H(function(l){return{currentWorkgroup:l.currentWorkgroup,setCurrentWorkgroup:l.setCurrentWorkgroup}}),W=B.currentWorkgroup,$=B.setCurrentWorkgroup,I=(0,T.useState)([]),b=G()(I,2),A=b[0],O=b[1],g=(0,T.useState)(""),J=G()(g,2),K=J[0],X=J[1];(0,T.useEffect)(function(){var l=H.subscribe(function(c){var R;r.setFieldValue("nickname",C(c.currentWorkgroup.nickname)),r.setFieldValue("description",C(c.currentWorkgroup.description));var x=[];(R=c.currentWorkgroup.agents)===null||R===void 0||R.forEach(function(L){x.push(L.uid)}),O(x)});return l},[W]);var M=function(c){console.log("selected ".concat(c)),O(c)},F=function(c){console.log("handleUploadSuccess:",c),X(c)},m=function(c){console.log("handleUploadError:",c)},v=function(){var l=V()(y()().mark(function c(R){var x,L,Z,Q,re;return y()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return console.log("onFinish",R),w.yw.loading("\u4FEE\u6539\u4E2D..."),Q=E()(E()(E()({},W),R),{},{avatar:K,agentUids:A,serviceSettings:E()(E()({},W.serviceSettings),{},{robotUid:(x=W.serviceSettings)===null||x===void 0||(x=x.robot)===null||x===void 0?void 0:x.uid,quickButtonUids:(L=W.serviceSettings)===null||L===void 0||(L=L.quickButtons)===null||L===void 0?void 0:L.map(function(n){return n.uid}),worktimeUids:(Z=W.serviceSettings)===null||Z===void 0||(Z=Z.worktimes)===null||Z===void 0?void 0:Z.map(function(n){return n.uid})})}),console.log("workgroupObject:",Q),ee.next=6,ue(Q);case 6:re=ee.sent,console.log("updateWorkGroup response:",re),re.code===200?(w.yw.destroy(),w.yw.success("\u4FEE\u6539\u6210\u529F"),$(re.data)):(w.yw.destroy(),w.yw.error("\u4FEE\u6539\u5931\u8D25"));case 9:case"end":return ee.stop()}},c)}));return function(R){return l.apply(this,arguments)}}(),h=function(c){return Array.isArray(c)?c:c==null?void 0:c.fileList};return(0,T.useEffect)(function(){X(W==null?void 0:W.avatar)},[W]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.A,{form:r,style:{marginLeft:"100px",width:"300px"},onFinish:v,initialValues:{nickname:C(W.nickname),description:C(W.description)},children:[(0,e.jsx)(q.Z.Item,{name:"avatar",valuePropName:"fileList",getValueFromEvent:h,label:k.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,e.jsxs)(tr.G,{onSuccess:F,onError:m,children:[(0,e.jsx)(Te.C,{src:K}),(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ur.Z,{}),children:k.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,e.jsx)(or.Z,{width:"md",name:"nickname",label:"\u6280\u80FD\u7EC4\u6635\u79F0"}),(0,e.jsx)(xe.Z,{name:"agents",label:"\u6210\u5458",width:"md",options:S.data.content.map(function(l){return{value:l.uid,label:C(l.nickname)}}),fieldProps:{mode:"multiple",allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",value:A,onChange:M}}),(0,e.jsx)(ne.Z,{width:"md",name:"description",label:"\u63CF\u8FF0"})]})})},ar=ir,oe=u(63434),sr=u(31199),lr=function(){var o,f,r,k,d=q.Z.useForm(),C=G()(d,1),S=C[0],B=(0,ie.Z)(),W=B.translateString,$=(0,T.useState)(!1),I=G()($,2),b=I[0],A=I[1],O=H(function(F){return{currentWorkgroup:F.currentWorkgroup,setCurrentWorkgroup:F.setCurrentWorkgroup}}),g=O.currentWorkgroup,J=O.setCurrentWorkgroup;(0,T.useEffect)(function(){var F=H.subscribe(function(m){var v,h,l,c,R,x;S.setFieldValue("welcomeTip",W((v=m.currentWorkgroup)===null||v===void 0||(v=v.serviceSettings)===null||v===void 0?void 0:v.welcomeTip)),S.setFieldValue("topTip",W((h=m.currentWorkgroup)===null||h===void 0||(h=h.serviceSettings)===null||h===void 0?void 0:h.topTip)),S.setFieldValue("showTopTip",(l=m.currentWorkgroup)===null||l===void 0||(l=l.serviceSettings)===null||l===void 0?void 0:l.showTopTip),S.setFieldValue("leavemsgTip",W((c=m.currentWorkgroup)===null||c===void 0||(c=c.serviceSettings)===null||c===void 0?void 0:c.leavemsgTip)),S.setFieldValue("autoCloseMin",(R=m.currentWorkgroup)===null||R===void 0||(R=R.serviceSettings)===null||R===void 0?void 0:R.autoCloseMin),S.setFieldValue("showLogo",(x=m.currentWorkgroup)===null||x===void 0||(x=x.serviceSettings)===null||x===void 0?void 0:x.showLogo)});return F},[g]),(0,T.useEffect)(function(){A(g==null?void 0:g.serviceSettings.showTopTip)},[g]);var K=function(m){console.log("onShowTopTipChange = ".concat(m.target.checked)),A(m.target.checked)},X=function(m){console.log("onShowLogoChange = ".concat(m.target.checked))},M=function(){var F=V()(y()().mark(function m(v){var h,l,c,R,x;return y()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return console.log("onFinish:",v," showTopTip:",b),R=E()(E()({},g),{},{serviceSettings:E()(E()({},g.serviceSettings),{},{topTip:(v==null?void 0:v.topTip)||"",showTopTip:b,welcomeTip:(v==null?void 0:v.welcomeTip)||"",leavemsgTip:(v==null?void 0:v.leavemsgTip)||"",autoCloseMin:(v==null?void 0:v.autoCloseMin)||25,showLogo:(v==null?void 0:v.showLogo)||!0,robotUid:(h=g.serviceSettings)===null||h===void 0||(h=h.robot)===null||h===void 0?void 0:h.uid,quickButtonUids:(l=g.serviceSettings)===null||l===void 0||(l=l.quickButtons)===null||l===void 0?void 0:l.map(function(Q){return Q.uid}),worktimeUids:(c=g.serviceSettings)===null||c===void 0||(c=c.worktimes)===null||c===void 0?void 0:c.map(function(Q){return Q.uid})}),agentUids:g.agents.map(function(Q){return Q.uid})}),console.log("workgroupObject:",R),w.yw.loading("\u66F4\u65B0\u4E2D..."),Z.next=6,ue(R);case 6:x=Z.sent,console.log("updateWorkGroup response:",x),x.code===200?(w.yw.destroy(),w.yw.success("\u4FEE\u6539\u6210\u529F"),J(x.data)):(w.yw.destroy(),w.yw.error("\u4FEE\u6539\u5931\u8D25"));case 9:case"end":return Z.stop()}},m)}));return function(v){return F.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.A,{form:S,style:{marginLeft:"100px"},onFinish:M,initialValues:{topTip:W(g==null||(o=g.serviceSettings)===null||o===void 0?void 0:o.topTip),showTopTip:g==null||(f=g.serviceSettings)===null||f===void 0?void 0:f.showTopTip,welcomeTip:W(g==null||(r=g.serviceSettings)===null||r===void 0?void 0:r.welcomeTip),leavemsgTip:W(g==null||(k=g.serviceSettings)===null||k===void 0?void 0:k.leavemsgTip),autoCloseMin:g==null?void 0:g.serviceSettings.autoCloseMin,showLogo:g==null?void 0:g.serviceSettings.showLogo},children:[(0,e.jsx)(oe.Z,{name:"showTopTip",width:"md",label:"\u663E\u793A\u7F6E\u9876\u8BED",fieldProps:{onChange:K}}),b&&(0,e.jsx)(ne.Z,{width:"md",name:"topTip",label:"\u7F6E\u9876\u8BED"}),(0,e.jsx)(ne.Z,{width:"md",name:"welcomeTip",label:"\u6B22\u8FCE\u8BED"}),(0,e.jsx)(ne.Z,{width:"md",name:"leavemsgTip",label:"\u79BB\u7EBF\u7559\u8A00\u63D0\u793A"}),(0,e.jsx)(sr.Z,{width:"md",name:"autoCloseMin",label:"\u65E0\u65B0\u6D88\u606F\u4F1A\u8BDD\u81EA\u52A8\u5173\u95ED\u65F6\u957F(\u5355\u4F4D\uFF1A\u5206\u949F)",min:1}),(0,e.jsx)(oe.Z,{name:"showLogo",width:"md",label:"\u663E\u793ALogo",fieldProps:{onChange:X}})]})})},cr=lr,ae=u(37326),dr=u(55895),gr=u(33725),vr=u(27484),se=u.n(vr),je=u(35612),pr=u(10285),fr=u.n(pr),mr=u(76545);se().extend(fr());var le="HH:mm:ss",hr=function(){var o,f,r,k,d,C=_.A.useForm(),S=G()(C,1),B=S[0],W=(0,T.useRef)(!1),$=(0,T.useRef)(),I=H(function(n){return{currentWorkgroup:n.currentWorkgroup,setCurrentWorkgroup:n.setCurrentWorkgroup}}),b=I.currentWorkgroup,A=I.setCurrentWorkgroup,O=(0,ae.V)(function(n){return{robotResult:n.robotResult,setRobotResult:n.setRobotResult}}),g=O.robotResult,J=O.setRobotResult,K=(0,ve.u)(function(n){return n.orgCurrent}),X=(0,ie.Z)(),M=X.translateString,F=(0,T.useState)([]),m=G()(F,2),v=m[0],h=m[1];(0,T.useEffect)(function(){var n;h(b==null||(n=b.serviceSettings)===null||n===void 0||(n=n.worktimes)===null||n===void 0?void 0:n.map(function(s){return s==null?void 0:s.uid}));var a=H.subscribe(function(s){var t,D,p,j,P;B.setFieldValue("defaultRobot",(t=s.currentWorkgroup)===null||t===void 0||(t=t.serviceSettings)===null||t===void 0?void 0:t.defaultRobot),B.setFieldValue("offlineRobot",(D=s.currentWorkgroup)===null||D===void 0||(D=D.serviceSettings)===null||D===void 0?void 0:D.offlineRobot),B.setFieldValue("nonWorktimeRobot",(p=s.currentWorkgroup)===null||p===void 0||(p=p.serviceSettings)===null||p===void 0?void 0:p.nonWorktimeRobot),B.setFieldValue("robotUid",(j=s.currentWorkgroup)===null||j===void 0||(j=j.serviceSettings)===null||j===void 0||(j=j.robot)===null||j===void 0?void 0:j.uid),h((P=s.currentWorkgroup)===null||P===void 0||(P=P.serviceSettings)===null||P===void 0||(P=P.worktimes)===null||P===void 0?void 0:P.map(function(Y){return Y==null?void 0:Y.uid}))});return a},[b]);var l=function(){var n=V()(y()().mark(function a(){var s,t;return y()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!W.current){p.next=3;break}return console.log("isLoading: 1",W.current),p.abrupt("return");case 3:return W.current=!0,w.yw.loading("loading"),s={pageNumber:0,pageSize:50,orgUid:K.uid},p.next=8,(0,mr.p0)(s);case 8:t=p.sent,console.log("queryRobotsByOrg: ",t),t.code===200?J(t):w.yw.error(t.message),W.current=!1,w.yw.destroy();case 13:case"end":return p.stop()}},a)}));return function(){return n.apply(this,arguments)}}();(0,T.useEffect)(function(){var n;((n=g.data)===null||n===void 0||(n=n.content)===null||n===void 0?void 0:n.length)===0&&l()},[g]);var c=function(a){console.log("onDefaultRobotChange checked = ".concat(a.target.checked))},R=function(a){console.log("onOfflineRobotChange checked = ".concat(a.target.checked))},x=function(a){console.log("onNonWorktimeRobotChange checked = ".concat(a.target.checked))},L=function(a){console.log("checked = ".concat(a))},Z=function(){var n=V()(y()().mark(function a(s){var t,D,p,j,P;return y()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return console.log("onFinish:",s),p=(t=$.current)===null||t===void 0?void 0:t.getList(),console.log("worktimes: ",p),w.yw.loading("\u6B63\u5728\u4FEE\u6539..."),j=E()(E()({},b),{},{agentUids:b.agents.map(function(De){return De.uid}),serviceSettings:E()(E()({},b.serviceSettings),{},{defaultRobot:s.defaultRobot,offlineRobot:s.offlineRobot,nonWorktimeRobot:s.nonWorktimeRobot,robotUid:s.robotUid,worktimeUids:v,quickButtonUids:(D=b.serviceSettings)===null||D===void 0||(D=D.quickButtons)===null||D===void 0?void 0:D.map(function(De){return De.uid})})}),console.log("workgroupObject:",j),de.next=8,ue(j);case 8:P=de.sent,console.log("updateWorkGroup response:",P),P.code===200?(w.yw.destroy(),w.yw.success("\u4FEE\u6539\u6210\u529F"),A(P.data)):(w.yw.destroy(),w.yw.error("\u4FEE\u6539\u5931\u8D25"));case 11:case"end":return de.stop()}},a)}));return function(s){return n.apply(this,arguments)}}(),Q=function(){var a,s=[];return b==null||(a=b.serviceSettings)===null||a===void 0||(a=a.worktimes)===null||a===void 0||a.map(function(t){s.push({worktime:[se()(t.startTime,le),se()(t.endTime,le)]})}),s},re=function(){var n=V()(y()().mark(function a(s,t,D){var p,j;return y()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return console.log("onWorktimeChange:",D,t),p={uid:v[D],startTime:t[0],endTime:t[1]},Y.next=4,(0,je.AW)(p);case 4:j=Y.sent,console.log("updateWorktime response:",j),j.code===200||w.yw.error("\u4FEE\u6539\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return Y.stop()}},a)}));return function(s,t,D){return n.apply(this,arguments)}}(),Se=function(){var n=V()(y()().mark(function a(){var s,t,D;return y()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("createWorktime"),s={startTime:"00:00:00",endTime:"23:59:59"},j.next=4,(0,je.gk)(s);case 4:t=j.sent,console.log("createWorktime response:",t),t.code===200?h([].concat(te()(v),[(D=t.data)===null||D===void 0?void 0:D.uid])):w.yw.error("\u6DFB\u52A0\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return j.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),ee=function(){var n=V()(y()().mark(function a(s){var t,D;return y()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("deleteWorktime:",s,v[s]),t={uid:v[s]},j.next=4,(0,je.$$)(t);case 4:D=j.sent,console.log("deleteWorktime response:",D),D.code===200?h(v.filter(function(P,Y){return Y!==s})):w.yw.error("\u5220\u9664\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\u5931\u8D25");case 7:case"end":return j.stop()}},a)}));return function(s){return n.apply(this,arguments)}}();return(0,T.useEffect)(function(){console.log("worktimeUids:",v)},[v]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.A,{form:B,style:{marginLeft:"100px"},initialValues:{defaultRobot:b==null||(o=b.serviceSettings)===null||o===void 0?void 0:o.defaultRobot,offlineRobot:b==null||(f=b.serviceSettings)===null||f===void 0?void 0:f.offlineRobot,nonWorktimeRobot:b==null||(r=b.serviceSettings)===null||r===void 0?void 0:r.nonWorktimeRobot,robotUid:b==null||(k=b.serviceSettings)===null||k===void 0||(k=k.robot)===null||k===void 0?void 0:k.uid},onFinish:Z,children:[(0,e.jsx)(oe.Z,{name:"defaultRobot",width:"md",label:"\u9ED8\u8BA4\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:c}}),(0,e.jsx)(oe.Z,{name:"offlineRobot",width:"md",label:"\u65E0\u5BA2\u670D\u5728\u7EBF\u65F6\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:R}}),(0,e.jsx)(oe.Z,{name:"nonWorktimeRobot",width:"md",label:"\u975E\u5DE5\u4F5C\u65F6\u95F4\u542F\u7528\u673A\u5668\u4EBA",fieldProps:{onChange:x}}),(0,e.jsx)(dr.u,{name:"worktimes",style:{marginBlockEnd:0,width:"300px"},label:"\u5DE5\u4F5C\u65F6\u95F4\u533A\u95F4\uFF0C\u652F\u6301\u591A\u4E2A",creatorRecord:{worktime:[se()("00:00:00",le),se()("23:59:59",le)]},initialValue:Q(),creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0",icon:!1,style:{width:"unset"}},copyIconProps:!1,deleteIconProps:{tooltipText:"\u5220\u9664"},itemRender:function(a){var s=a.listDom,t=a.action;return(0,e.jsxs)("div",{style:{display:"inline-flex",marginInlineEnd:25},children:[s,t]})},min:1,max:4,actionRef:$,actionGuard:{beforeAddRow:function(){var n=V()(y()().mark(function s(t,D,p){return y()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.log("beforeAddRow:",t,D),P.next=3,Se();case 3:return P.abrupt("return",new Promise(function(Y){Y(!0)}));case 4:case"end":return P.stop()}},s)}));function a(s,t,D){return n.apply(this,arguments)}return a}(),beforeRemoveRow:function(){var n=V()(y()().mark(function s(t,D){return y()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("beforeRemoveRow:",t),j.next=3,ee(t);case 3:return j.abrupt("return",new Promise(function(P){if(t===0){P(!1);return}P(!0)}));case 4:case"end":return j.stop()}},s)}));function a(s,t){return n.apply(this,arguments)}return a}()},children:function(a,s,t){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(gr.Z.RangePicker,{width:"md",name:"worktime",fieldProps:{onChange:function(p,j){re(p,j,s)},format:le}},"worktime")})}}),(0,e.jsx)(xe.Z,{name:"robotUid",label:"\u673A\u5668\u4EBA",width:"md",options:g.data.content.map(function(n){return{value:n.uid,label:M(n.nickname)}}),fieldProps:{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u673A\u5668\u4EBA",value:b==null||(d=b.serviceSettings)===null||d===void 0||(d=d.robot)===null||d===void 0?void 0:d.uid,onChange:L}})]})})},kr=hr,ce=u(1413),Fr=u(91),Cr=u(22270),Be=u(78045),Wr=u(90789),br=u(47897),wr=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],yr=T.forwardRef(function(i,o){var f=i.fieldProps,r=i.options,k=i.radioType,d=i.layout,C=i.proFieldProps,S=i.valueEnum,B=(0,Fr.Z)(i,wr);return(0,e.jsx)(br.Z,(0,ce.Z)((0,ce.Z)({valueType:k==="button"?"radioButton":"radio",ref:o,valueEnum:(0,Cr.h)(S,void 0)},B),{},{fieldProps:(0,ce.Z)({options:r,layout:d},f),proFieldProps:C,filedConfig:{customLightMode:!0}}))}),xr=T.forwardRef(function(i,o){var f=i.fieldProps,r=i.children;return(0,e.jsx)(Be.ZP,(0,ce.Z)((0,ce.Z)({},f),{},{ref:o,children:r}))}),jr=(0,Wr.G)(xr,{valuePropName:"checked",ignoreWidth:!0}),pe=jr;pe.Group=yr,pe.Button=Be.ZP.Button,pe.displayName="ProFormComponent";var Sr=pe,Dr=function(){var o=q.Z.useForm(),f=G()(o,1),r=f[0],k=(0,N.useIntl)(),d=H(function(F){return{currentWorkgroup:F.currentWorkgroup,setCurrentWorkgroup:F.setCurrentWorkgroup}}),C=d.currentWorkgroup,S=d.setCurrentWorkgroup,B=(0,T.useState)(!1),W=G()(B,2),$=W[0],I=W[1],b=(0,T.useState)(U.Jx),A=G()(b,2),O=A[0],g=A[1];(0,T.useEffect)(function(){var F=H.subscribe(function(m){r.setFieldValue("recent",m.currentWorkgroup.recent),r.setFieldValue("routeType",m.currentWorkgroup.routeType)});return F},[C]),(0,T.useEffect)(function(){I(C.recent),g(C.routeType)},[]);var J=function(m){console.log("checked = ".concat(m.target.checked)),I(m.target.checked)},K=function(m){console.log("radio checked",m.target.value),g(m.target.value)},X=function(m,v){return[(0,e.jsx)(z.ZP,{type:"primary",onClick:function(){var l;(l=m.form)===null||l===void 0||l.submit()},children:"\u4FDD\u5B58"},"submit")]},M=function(){var F=V()(y()().mark(function m(v){var h,l,c,R,x;return y()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return console.log("onFinish:",v),w.yw.loading("\u6B63\u5728\u4FEE\u6539..."),R=E()(E()(E()({},C),{},{agentUids:C.agents.map(function(Q){return Q.uid})},v),{},{serviceSettings:E()(E()({},C.serviceSettings),{},{robotUid:(h=C.serviceSettings)===null||h===void 0||(h=h.robot)===null||h===void 0?void 0:h.uid,quickButtonUids:(l=C.serviceSettings)===null||l===void 0||(l=l.quickButtons)===null||l===void 0?void 0:l.map(function(Q){return Q.uid}),worktimeUids:(c=C.serviceSettings)===null||c===void 0||(c=c.worktimes)===null||c===void 0?void 0:c.map(function(Q){return Q.uid})})}),console.log("workgroupObject:",R),Z.next=6,ue(R);case 6:x=Z.sent,console.log("updateWorkGroup response:",x),x.code===200?(w.yw.destroy(),w.yw.success("\u4FEE\u6539\u6210\u529F"),S(x.data)):(w.yw.destroy(),w.yw.error("\u4FEE\u6539\u5931\u8D25"));case 9:case"end":return Z.stop()}},m)}));return function(v){return F.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.A,{form:r,style:{marginLeft:"100px"},initialValues:{recent:C==null?void 0:C.recent,routeType:C==null?void 0:C.routeType},submitter:{render:X},onFinish:M,children:[(0,e.jsx)(oe.Z,{name:"recent",label:"\u719F\u5BA2\u4F18\u5148",fieldProps:{onChange:J}}),(0,e.jsx)(Sr.Group,{name:"routeType",label:"\u8DEF\u7531\u7C7B\u578B",options:[{label:"\u8F6E\u8BE2",value:U.Jx},{label:"\u5F53\u65E5\u63A5\u5F85\u6700\u5C11\u4F18\u5148",value:U.C},{label:"\u9971\u548C\u5EA6\u6700\u4F4E\u4F18\u5148",value:U.Vd},{label:"\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148",value:U.Q2}],fieldProps:{value:O,onChange:K}}),(0,e.jsxs)(_.A.Item,{children:[O===U.Jx&&(0,e.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u4E0A\u7EBF\u65F6\u95F4\u8FDB\u5165\u961F\u5217\u8F6E\u6D41\u5206\u914D\u3002\u6CE8\u610F\uFF1A\u5F53\u5BA2\u670D\u7F51\u7EDC\u4E0D\u7A33\u5B9A\u6389\u7EBF\u91CD\u8FDE\u4E4B\u540E\uFF0C\u4F1A\u91CD\u65B0\u6392\u5230\u961F\u5217\u672B\u5C3E"}),O===U.C&&(0,e.jsx)("p",{children:"\u6839\u636E\u5F53\u65E5(0\u70B9\u5F00\u59CB)\u5BA2\u670D\u63A5\u5F85\u603B\u6570\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u5BA2\u670D\u4E0A\u73ED\u65F6\u95F4\u4E0D\u7EDF\u4E00\uFF0C\u665A\u767B\u5F55\u8005\u767B\u5F55\u540E\u4F1A\u96C6\u4E2D\u6536\u5230\u5206\u914D\u65B0\u5BA2\uFF0C\u76F4\u5230\u8DDF\u5176\u4ED6\u5728\u7EBF\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\u4E3A\u6B62"}),O===U.Vd&&(0,e.jsx)("p",{children:"\u6839\u636E\uFF08\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF-\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6570\u91CF\uFF09\u4E4B\u5DEE\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5927\u8005\u3002\u6CE8\u610F\uFF1A\u5047\u5982\u6BCF\u4E2A\u5BA2\u670D\u6700\u5927\u63A5\u5F85\u6570\u91CF\u76F8\u7B49\uFF0C\u5219\u6B64\u65B9\u6CD5\u8DDF\u2019\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u6700\u5C11\u4F18\u5148\u2018\u6548\u679C\u4E00\u6837"}),O===U.Q2&&(0,e.jsx)("p",{children:"\u6839\u636E\u5BA2\u670D\u5F53\u524D\u8FDB\u884C\u4E2D\u4F1A\u8BDD\u8FDB\u884C\u5206\u914D\uFF0C\u4F18\u5148\u5206\u914D\u7ED9\u6570\u91CF\u6700\u5C11\u8005\u3002\u6CE8\u610F\uFF1A\u5BA2\u670D\u63A5\u5F85\u6570\u91CF\u4F1A\u53D7\u5230\u5BA2\u670D\u63A5\u5F85\u901F\u5EA6\u7684\u5F71\u54CD\uFF0C\u63A5\u5F85\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u5BA2\u670D\u624B\u52A8\u7ED3\u675F\u4F1A\u8BDD\u6709\u5229\u4E8E\u52A0\u901F\u5206\u914D\u65B0\u5BA2"})]})]})})},Er=Dr,Ze=u(38925),$e=u(96074),Rr=function(){var o=q.Z.useForm(),f=G()(o,1),r=f[0],k=H(function(W){return W.currentWorkgroup}),d=(0,T.useMemo)(function(){return"http://www.weiyuai.cn/chat?t="+U.vP+"&sid="+k.uid+"&"},[k]);(0,T.useEffect)(function(){var W=H.subscribe(function($){console.log("currentWorkgroup code:",$.currentWorkgroup),r.setFieldValue("code","http://www.weiyuai.cn/chat?t="+U.vP+"&sid="+$.currentWorkgroup.uid+"&")});return W},[k]);var C=function(){window.open(d)},S=function(){navigator.clipboard.writeText(d),w.yw.info("code copyied into clicpboard")},B=function($,I){return[(0,e.jsx)(z.ZP,{type:"primary",onClick:function(){var A;(A=$.form)===null||A===void 0||A.submit(),C()},children:"\u6253\u5F00"},"submit"),(0,e.jsx)(z.ZP,{onClick:function(){S()},children:"\u590D\u5236"},"reset")]};return(0,e.jsx)(_.A,{form:r,style:{marginLeft:"100px"},submitter:{render:B},initialValues:{code:d},children:(0,e.jsx)(ne.Z,{width:"md",name:"code",label:"Web\u5BA2\u670D\u4EE3\u7801"})})},Ar=Rr,fe=u(45360),me=u(71230),he=u(42075),Tr=function(){var i=(0,ae.V)(function(r){return r.currentRobot}),o=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),fe.ZP.success("\u590D\u5236\u6210\u529F")},f=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(z.ZP,{onClick:o,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(z.ZP,{onClick:f,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Br=function(){var i=(0,ae.V)(function(r){return r.currentRobot}),o=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),fe.ZP.success("\u590D\u5236\u6210\u529F")},f=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(z.ZP,{onClick:o,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(z.ZP,{onClick:f,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Zr=function(){var o=q.Z.useForm(),f=G()(o,1),r=f[0],k=H(function(W){return W.currentWorkgroup}),d=(0,T.useMemo)(function(){return"http://www.weiyuai.cn/chat?t="+U.vP+"&sid="+k.uid+"&"},[k]);(0,T.useEffect)(function(){var W=H.subscribe(function($){console.log("currentWorkgroup code:",$.currentWorkgroup),r.setFieldValue("code","http://www.weiyuai.cn/chat?t="+U.vP+"&sid="+$.currentWorkgroup.uid+"&")});return W},[k]);var C=function(){window.open(d)},S=function(){navigator.clipboard.writeText(d),w.yw.info("code copyied into clicpboard")},B=function($,I){return[(0,e.jsx)(z.ZP,{type:"primary",onClick:function(){var A;(A=$.form)===null||A===void 0||A.submit(),C()},children:"\u6253\u5F00"},"submit"),(0,e.jsx)(z.ZP,{onClick:function(){S()},children:"\u590D\u5236"},"reset")]};return(0,e.jsx)(_.A,{form:r,style:{marginLeft:"100px"},submitter:{render:B},initialValues:{code:d},children:(0,e.jsx)(ne.Z,{width:"md",name:"code",label:"H5\u5BA2\u670D\u4EE3\u7801"})})},$r=Zr,Pr=function(){var i=(0,ae.V)(function(r){return r.currentRobot}),o=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),fe.ZP.success("\u590D\u5236\u6210\u529F")},f=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(z.ZP,{onClick:o,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(z.ZP,{onClick:f,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Lr=function(){var i=(0,ae.V)(function(r){return r.currentRobot}),o=function(){navigator.clipboard.writeText("/?rid="+i.uid+"&"),fe.ZP.success("\u590D\u5236\u6210\u529F")},f=function(){window.open("/?rid="+i.uid+"&")};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"/?rid="+i.uid+"&"})}),(0,e.jsx)("div",{style:{marginLeft:10},children:(0,e.jsxs)(he.Z,{children:[(0,e.jsx)(z.ZP,{onClick:o,children:"\u590D\u5236\u94FE\u63A5"}),(0,e.jsx)(z.ZP,{onClick:f,children:"\u6253\u5F00\u94FE\u63A5"})]})})]})})},Ur=[{key:"web",label:"Web",children:(0,e.jsx)(Ar,{})},{key:"h5",label:"H5",children:(0,e.jsx)($r,{})},{key:"ios",label:"iOS",children:(0,e.jsx)(Tr,{})},{key:"android",label:"Android",children:(0,e.jsx)(Lr,{})},{key:"uniapp",label:"Uniapp",children:(0,e.jsx)(Br,{})},{key:"flutter",label:"Flutter",children:(0,e.jsx)(Pr,{})}],Or=function(){var o=(0,N.useIntl)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ze.Z,{message:"\u591A\u5BA2\u670D\u6280\u80FD\u7EC4\uFF0C\u6B64\u5904\u5BA2\u670D\u4EE3\u7801\u4F1A\u5C06\u6240\u6709\u8BBF\u5BA2\u5BF9\u8BDD\u8BF7\u6C42\u6309\u7167\u8DEF\u7531\u89C4\u5219\u8F6C\u63A5\u7ED9\u6B64\u6280\u80FD\u7EC4\u4E2D\u5BA2\u670D\u6210\u5458",type:"success"}),(0,e.jsx)($e.Z,{}),(0,e.jsx)(ye.Z,{tabPosition:"left",items:Ur})]})},Mr=Or,Vr=function(){var o=(0,N.useAccess)();return o.canDebug&&console.log("form canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(N.Access,{accessible:o.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(N.FormattedMessage,{id:U.h5})}),children:"Form"})})})},Ir=Vr,Gr=function(){var o=(0,N.useAccess)();return o.canDebug&&console.log("leaveMsg canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(N.Access,{accessible:o.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(N.FormattedMessage,{id:U.h5})}),children:"leave msg"})})})},Nr=Gr,Qr=u(9465),zr=function(){var o,f=_.A.useForm(),r=G()(f,1),k=r[0],d=(0,ve.u)(function(F){return F.orgCurrent}),C=(0,T.useState)(),S=G()(C,2),B=S[0],W=S[1],$=(0,T.useState)([]),I=G()($,2),b=I[0],A=I[1],O=H(function(F){return{currentWorkgroup:F.currentWorkgroup,setCurrentWorkgroup:F.setCurrentWorkgroup}}),g=O.currentWorkgroup,J=O.setCurrentWorkgroup,K=function(){var F=V()(y()().mark(function m(){var v,h,l,c;return y()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return w.yw.loading("\u52A0\u8F7D\u4E2D"),h={pageNumber:0,pageSize:50,orgUid:d.uid},x.next=4,(0,Qr.qL)(h);case 4:l=x.sent,console.log("getAllQuickbuttons response:",h,l),w.yw.destroy(),l.code===200?W(l):w.yw.error(l.message),c=[],(v=g.serviceSettings)===null||v===void 0||v.quickButtons.forEach(function(L){c.push(L.uid)}),A(c);case 11:case"end":return x.stop()}},m)}));return function(){return F.apply(this,arguments)}}();(0,T.useEffect)(function(){K()},[d]),(0,T.useEffect)(function(){var F,m=[];(F=g.serviceSettings)===null||F===void 0||F.quickButtons.forEach(function(h){m.push(h.uid)}),A(m);var v=H.subscribe(function(h){var l;console.log("TabQuickButton useWorkgroupStore:",h);var c=[];(l=h.currentWorkgroup.serviceSettings)===null||l===void 0||l.quickButtons.forEach(function(R){c.push(R.uid)}),A(c)});return v},[g]);var X=function(){var F=V()(y()().mark(function m(v){var h,l,c,R;return y()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return console.log("onFinish",v),c=E()(E()({},g),{},{serviceSettings:E()(E()({},g.serviceSettings),{},{robotUid:(h=g.serviceSettings)===null||h===void 0||(h=h.robot)===null||h===void 0?void 0:h.uid,quickButtonUids:v.quickbutton,worktimeUids:(l=g.serviceSettings)===null||l===void 0||(l=l.worktimes)===null||l===void 0?void 0:l.map(function(Z){return Z.uid})}),agentUids:g.agents.map(function(Z){return Z.uid})}),console.log("workgroupObject:",c),L.next=5,ue(c);case 5:R=L.sent,console.log("updateWorkGroup response:",R),R.code===200?(w.yw.destroy(),w.yw.success("\u4FEE\u6539\u6210\u529F"),J(R.data)):(w.yw.destroy(),w.yw.error("\u4FEE\u6539\u5931\u8D25"));case 8:case"end":return L.stop()}},m)}));return function(v){return F.apply(this,arguments)}}(),M=function(m){console.log("selected ".concat(m)),A(m)};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ze.Z,{message:"\u8BF7\u5148\u5230 \u77E5\u8BC6\u5E93 -> \u5FEB\u6377\u6309\u94AE -> \u65B0\u5EFA\uFF0C\u521B\u5EFA\u5FEB\u6377\u6309\u94AE\u4E4B\u540E\uFF0C\u518D\u6765\u6DFB\u52A0",type:"success"}),(0,e.jsx)($e.Z,{}),(0,e.jsx)(_.A,{form:k,layout:"vertical",initialValues:{},onFinish:X,children:(0,e.jsx)(xe.Z,{name:"quickbutton",width:"md",label:"\u5FEB\u901F\u6309\u94AE",options:B==null||(o=B.data)===null||o===void 0?void 0:o.content.map(function(F){return{label:F.title,value:F.uid}}),fieldProps:{mode:"multiple",onChange:M,allowClear:!0,value:b,placeholder:"\u8BF7\u9009\u62E9"}})})]})},Hr=zr,Jr=function(){var o=(0,N.useAccess)();return o.canDebug&&console.log("rate canDebug"),(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:(0,e.jsx)(N.Access,{accessible:o.canDebug(),fallback:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(N.FormattedMessage,{id:U.h5})}),children:"rate"})})})},Kr=Jr,Xr=[{key:"quickbutton",label:"\u5FEB\u6377\u6309\u94AE",children:(0,e.jsx)(Hr,{})},{key:"leaveMsg",label:"\u7559\u8A00\u8BBE\u7F6E",children:(0,e.jsx)(Nr,{})},{key:"rate",label:"\u8BC4\u4EF7\u8BBE\u7F6E",children:(0,e.jsx)(Kr,{})},{key:"form",label:"\u8BE2\u524D\u95EE\u5377",children:(0,e.jsx)(Ir,{})}],Yr=function(){var o=(0,N.useIntl)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ye.Z,{tabPosition:"left",items:Xr})})},qr=Yr,_r=function(){var o=(0,N.useIntl)(),f=function(d){console.log(d)},r=[{key:"basic",label:o.formatMessage({id:"pages.robot.tab.basic",defaultMessage:"Basic"}),children:(0,e.jsx)(ar,{})},{key:"serviceSettings",label:"\u63A5\u5F85\u914D\u7F6E",children:(0,e.jsx)(cr,{})},{key:"robot",label:"\u673A\u5668\u4EBA",children:(0,e.jsx)(kr,{})},{key:"route",label:"\u8DEF\u7531\u914D\u7F6E",children:(0,e.jsx)(Er,{})},{key:"advanced",label:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(qr,{})},{key:"channel",label:o.formatMessage({id:"pages.robot.tab.channel",defaultMessage:"Channel"}),children:(0,e.jsx)(Mr,{})}];return(0,e.jsx)(ye.Z,{defaultActiveKey:"1",items:r,onChange:f})},en=_r,rn=u(77154),nn=ge.Z.Sider,on=ge.Z.Content,un=function(){var o=(0,rn.Z)(),f=o.leftSiderStyle,r=o.contentStyle;return(0,e.jsxs)(ge.Z,{children:[(0,e.jsx)(nn,{style:f,children:(0,e.jsx)(nr,{})}),(0,e.jsx)(ge.Z,{children:(0,e.jsx)(on,{children:(0,e.jsx)(en,{})})})]})},tn=un}}]);
