"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3088],{48708:function(e,r,t){var n=t(17082),a=t(73457),o=t(44194),s=t(87413),i=t(31549),l=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],u=o.forwardRef((function(e,r){var t=e.fieldProps,o=e.unCheckedChildren,u=e.checkedChildren,d=e.proFieldProps,c=(0,a.Z)(e,l);return(0,i.jsx)(s.Z,(0,n.Z)({valueType:"switch",fieldProps:(0,n.Z)({unCheckedChildren:o,checkedChildren:u},t),ref:r,valuePropName:"checked",proFieldProps:d,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},c))}));r.Z=u},4499:function(e,r,t){var n=t(42601),a=t(17082),o=t(73457),s=t(46015),i=t(16309),l=t(98036),u=t(36490),d=t(44194),c=t(87413),f=t(31549),g=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],m="text",h=function(e){var r=(0,s.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),t=(0,n.Z)(r,2),o=t[0],u=t[1];return(0,f.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(r){var t,n=r.getFieldValue(e.name||[]);return(0,f.jsx)(l.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return u(e)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[null===(t=e.statusRender)||void 0===t?void 0:t.call(e,n),e.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:o,children:e.children}))}})},v=function(e){var r=e.fieldProps,t=e.proFieldProps,n=(0,o.Z)(e,g);return(0,f.jsx)(c.Z,(0,a.Z)({valueType:m,fieldProps:r,filedConfig:{valueType:m},proFieldProps:t},n))};v.Password=function(e){var r=e.fieldProps,t=e.proFieldProps,s=(0,o.Z)(e,p),i=(0,d.useState)(!1),l=(0,n.Z)(i,2),g=l[0],v=l[1];return null!=r&&r.statusRender&&s.name?(0,f.jsx)(h,{name:s.name,statusRender:null==r?void 0:r.statusRender,popoverProps:null==r?void 0:r.popoverProps,strengthText:null==r?void 0:r.strengthText,open:g,onOpenChange:v,children:(0,f.jsx)("div",{children:(0,f.jsx)(c.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,u.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var t;null==r||null===(t=r.onBlur)||void 0===t||t.call(r,e),v(!1)},onClick:function(e){var t;null==r||null===(t=r.onClick)||void 0===t||t.call(r,e),v(!0)}}),proFieldProps:t,filedConfig:{valueType:m}},s))})}):(0,f.jsx)(c.Z,(0,a.Z)({valueType:"password",fieldProps:r,proFieldProps:t,filedConfig:{valueType:m}},s))},v.displayName="ProFormComponent",r.Z=v},81924:function(e,r,t){t.d(r,{AM:function(){return c},E9:function(){return g},Rd:function(){return b},fA:function(){return m},ul:function(){return v}});var n=t(90819),a=t.n(n),o=t(73193),s=t.n(o),i=t(89933),l=t.n(i),u=t(55735),d=t(30921);function c(e){return f.apply(this,arguments)}function f(){return(f=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/query/super",{method:"GET",params:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return p.apply(this,arguments)}function p(){return(p=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/query/org",{method:"GET",params:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/create",{method:"POST",data:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/update",{method:"POST",data:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/role/delete",{method:"POST",data:s()(s()({},r),{},{client:u.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},76750:function(e,r,t){var n=t(55735),a=t(65461),o=t(30921);r.Z=function(){var e=(0,o.useIntl)();return{translateString:function(r){return null==r?r:r&&(null!=r&&r.startsWith(n.VoP)||null!=r&&r.startsWith("ROLE_"))?e.formatMessage({id:r,defaultMessage:r}):r},translateStringTranct:function(r){return null==r?r:null!=r&&r.startsWith(n.VoP)||null!=r&&r.startsWith("ROLE_")?(0,a.aS)(e.formatMessage({id:r,defaultMessage:r}),10):(0,a.aS)(r,10)}}}},95104:function(e,r,t){t.r(r),t.d(r,{default:function(){return N}});var n=t(73193),a=t.n(n),o=t(84176),s=t.n(o),i=t(90819),l=t.n(i),u=t(89933),d=t.n(u),c=t(45332),f=t.n(c),g=t(86803),p=t(67318),m=t(81924),h=t(10162),v=t(81947),y=t(29266),b=t(3849),x=t(38775),C=t(61355),M=t(75365),w=t(44194),R=t(40612),k=t(69169),P=t(4499),j=t(48708),S=t(16309),Z=t(73442),O=t(30921),I=t(31549),T=function(e){var r=e.isEdit,t=e.user,n=e.open,o=e.onClose,s=e.onSubmit,i=S.Z.useForm(),l=f()(i,1)[0],u=(0,O.useIntl)(),d=(0,R.u)((function(e){return e.currentOrg}));(0,w.useEffect)((function(){r?l.setFieldsValue({username:null==t?void 0:t.username,nickname:null==t?void 0:t.nickname,email:null==t?void 0:t.email,emailVerified:null==t?void 0:t.emailVerified,mobile:null==t?void 0:t.mobile,mobileVerified:null==t?void 0:t.mobileVerified,enabled:null==t?void 0:t.enabled}):(l.resetFields(),l.setFieldsValue({enabled:!0}))}),[n]);return(0,I.jsx)(Z.Z,{title:r?(0,I.jsx)(O.FormattedMessage,{id:"pages.user.edit",defaultMessage:"Edit User"}):(0,I.jsx)(O.FormattedMessage,{id:"pages.user.create",defaultMessage:"Create User"}),onClose:o,open:n,width:600,extra:(0,I.jsxs)(b.Z,{children:[(0,I.jsx)(M.ZP,{onClick:o,children:(0,I.jsx)(O.FormattedMessage,{id:"pages.common.cancel"})}),(0,I.jsx)(M.ZP,{onClick:function(){l.validateFields().then((function(e){null==t||!t.superUser||!1!==e.enabled&&!1!==e.mobileVerified&&!1!==e.emailVerified?s(a()(a()(a()({},t),e),{},{orgUid:null==d?void 0:d.uid})):g.yw.error(u.formatMessage({id:"pages.user.superUser.notAllow"}))})).catch((function(e){console.log("Form errors:",e),g.yw.error(u.formatMessage({id:"pages.form.error"}))}))},type:"primary",children:(0,I.jsx)(O.FormattedMessage,{id:"pages.common.save"})})]}),children:(0,I.jsxs)(k.A,{form:l,submitter:!1,children:[(0,I.jsx)(P.Z,{name:"username",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.username"}),rules:[{required:!0,message:u.formatMessage({id:"pages.user.username.required"})}],disabled:r}),(0,I.jsx)(P.Z,{name:"nickname",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.nickname"}),rules:[{required:!0,message:u.formatMessage({id:"pages.user.nickname.required"})}]}),(0,I.jsx)(P.Z,{name:"email",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.email"}),rules:[{required:!0,message:u.formatMessage({id:"pages.user.email.required"})},{type:"email",message:u.formatMessage({id:"pages.user.email.invalid"})}]}),(0,I.jsx)(j.Z,{name:"emailVerified",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.email.verified"}),disabled:!r}),(0,I.jsx)(P.Z,{name:"mobile",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.mobile"}),rules:[{required:!0,message:u.formatMessage({id:"pages.user.mobile.required"})},{pattern:/^1[3-9]\d{9}$/,message:u.formatMessage({id:"pages.user.mobile.invalid"})}]}),(0,I.jsx)(j.Z,{name:"mobileVerified",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.mobile.verified"}),disabled:!r}),(0,I.jsx)(j.Z,{name:"enabled",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.enabled",defaultMessage:"Status"}),checkedChildren:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.status.enabled",defaultMessage:"启用"}),unCheckedChildren:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.status.disabled",defaultMessage:"禁用"}),disabled:!r}),!r&&(0,I.jsx)(P.Z.Password,{name:"password",label:(0,I.jsx)(O.FormattedMessage,{id:"pages.user.password"}),rules:[{required:!0,message:u.formatMessage({id:"pages.user.password.required"})}]})]})})},F=t(90838),$=t(78488),E=t(76750),B=t(28977),q=t.n(B),A=t(55735),U=["current"],z=function(){var e=(0,O.useIntl)(),r=(0,w.useRef)(),t=(0,E.Z)().translateString,n=(0,w.useState)(!0),o=f()(n,2),i=o[0],u=o[1],c=(0,w.useState)(),k=f()(c,2),P=k[0],j=k[1],S=(0,w.useState)(!1),Z=f()(S,2),B=Z[0],z=Z[1],N=(0,R.u)((function(e){return e.currentOrg})),V=(0,$.Z)((function(e){return{roleResult:e.roleResult,roleResultPlatform:e.roleResultPlatform,setRoleResult:e.setRoleResult,setRoleResultPlatform:e.setRoleResultPlatform}})),D=(V.roleResult,V.roleResultPlatform,V.setRoleResult),H=V.setRoleResultPlatform,W=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:e.formatMessage({id:"pages.user.username"}),dataIndex:"username",copyable:!0},{title:e.formatMessage({id:"pages.user.nickname"}),dataIndex:"nickname",copyable:!0},{title:e.formatMessage({id:"pages.user.email"}),dataIndex:"email",render:function(r,t){return t.email+(t.emailVerified?"(".concat(e.formatMessage({id:"pages.user.email.verified.yes"}),")"):"(".concat(e.formatMessage({id:"pages.user.email.verified.no"}),")"))}},{title:e.formatMessage({id:"pages.user.mobile"}),dataIndex:"mobile",render:function(r,t){return t.mobile+(t.mobileVerified?"(".concat(e.formatMessage({id:"pages.user.mobile.verified.yes"}),")"):"(".concat(e.formatMessage({id:"pages.user.mobile.verified.no"}),")"))}},{title:e.formatMessage({id:"pages.user.organization"}),dataIndex:"currentOrganization",hideInSearch:!0,render:function(e,r){return r.currentOrganization?(0,I.jsx)(y.Z,{color:"blue",children:r.currentOrganization.name||"-"}):"-"}},{title:e.formatMessage({id:"pages.user.roles"}),dataIndex:"currentRoles",hideInSearch:!0,render:function(e,r){return r.currentRoles&&r.currentRoles.length>0?(0,I.jsx)(b.Z,{wrap:!0,children:r.currentRoles.map((function(e,r){return(0,I.jsx)(y.Z,{color:"green",children:t(e.name)},r)}))}):null}},{title:e.formatMessage({id:"pages.user.description"}),dataIndex:"description",hideInSearch:!0,hideInTable:!0},{title:e.formatMessage({id:"pages.user.enabled"}),dataIndex:"enabled",hideInSearch:!0,render:function(r,t){return t.enabled?e.formatMessage({id:"pages.user.status.enabled",defaultMessage:"启用"}):e.formatMessage({id:"pages.user.status.disabled",defaultMessage:"禁用"})},valueEnum:{true:{text:e.formatMessage({id:"pages.user.status.enabled",defaultMessage:"启用"}),status:"Success"},false:{text:e.formatMessage({id:"pages.user.status.disabled",defaultMessage:"禁用"}),status:"Error"}}},{title:e.formatMessage({id:"pages.user.superUser"}),dataIndex:"superUser",hideInSearch:!0,render:function(r,t){return t.superUser?e.formatMessage({id:"pages.user.superUser.yes",defaultMessage:"是"}):e.formatMessage({id:"pages.user.superUser.no",defaultMessage:"否"})},valueEnum:{true:{text:e.formatMessage({id:"pages.user.superUser.yes",defaultMessage:"是"}),status:"Success"},false:{text:e.formatMessage({id:"pages.user.superUser.no",defaultMessage:"否"}),status:"Default"}}},{title:e.formatMessage({id:"pages.user.createdAt"}),key:"createdAt",dataIndex:"createdAt",sorter:!0,hideInSearch:!0,width:180,hideInTable:!0,render:function(e,r){return r.createdAt?q()(r.createdAt).format("YYYY-MM-DD HH:mm:ss"):""}},{title:e.formatMessage({id:"pages.user.updatedAt"}),key:"updatedAt",dataIndex:"updatedAt",sorter:!0,hideInSearch:!0,width:180,render:function(e,r){return r.updatedAt?q()(r.updatedAt).format("YYYY-MM-DD HH:mm:ss"):""}}],L=[].concat(W,[{title:e.formatMessage({id:"actions",defaultMessage:"Actions"}),valueType:"option",key:"option",width:120,fixed:"right",render:function(r,t,n,a){return[(0,I.jsx)("a",{onClick:function(){X(t)},children:e.formatMessage({id:"edit",defaultMessage:"Edit"})},"editable"),!t.superUser&&(0,I.jsxs)(w.Fragment,{children:[(0,I.jsx)(x.Z,{type:"vertical"},"divider"),(0,I.jsx)(C.Z,{title:e.formatMessage({id:"pages.common.deleteConfirm",defaultMessage:"Are you sure to delete {name}?"},{name:t.nickname||t.username}),onConfirm:function(){return J(t)},okText:e.formatMessage({id:"pages.common.ok",defaultMessage:"OK"}),cancelText:e.formatMessage({id:"pages.common.cancel",defaultMessage:"Cancel"}),children:(0,I.jsx)("a",{children:e.formatMessage({id:"pages.common.delete",defaultMessage:"Delete"})},"delete")},"delete")]},"delete-fragment")]}}]),Y=(0,F.v)((function(e){return e.currentCategory})),_=function(){j(void 0),u(!1),z(!0)},X=function(e){j(e),u(!0),z(!0)},J=function(){var n=d()(l()().mark((function n(a){var o,s;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a.superUser){n.next=3;break}return g.yw.error(e.formatMessage({id:"pages.user.superUser.notDelete"})),n.abrupt("return");case 3:return g.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n.prev=4,n.next=7,(0,p.h8)({uid:a.uid});case 7:o=n.sent,g.yw.destroy(),200===o.code?(g.yw.success(e.formatMessage({id:"delete.success",defaultMessage:"Delete successful"})),null===(s=r.current)||void 0===s||s.reloadAndRest()):g.yw.error(t(o.message)||e.formatMessage({id:"delete.error",defaultMessage:"Delete failed"})),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(4),g.yw.destroy(),g.yw.error(e.formatMessage({id:"delete.error",defaultMessage:"Delete failed"})),console.error("Delete user error:",n.t0);case 17:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}(),G=function(){var t=d()(l()().mark((function t(n){var a,o;return l()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("handleSubmitDrawer",n),i?g.yw.loading(e.formatMessage({id:"updating"})):g.yw.loading(e.formatMessage({id:"creating"})),!i){t.next=8;break}return t.next=5,(0,p.Nq)(n);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,(0,p.r4)(n);case 10:t.t0=t.sent;case 11:a=t.t0,console.log("createUser response:",n,a),200===a.code?(g.yw.destroy(),g.yw.loading(e.formatMessage({id:"create.success"})),z(!1),null===(o=r.current)||void 0===o||o.reloadAndRest()):(g.yw.destroy(),g.yw.error(a.message));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var r=d()(l()().mark((function r(){var t,n;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading..."})),t={pageNumber:0,pageSize:100,orgUid:null==N?void 0:N.uid},r.next=4,(0,m.E9)(t);case 4:n=r.sent,console.log("queryRolesByOrg response ",n),200===n.code?(g.yw.destroy(),D(n)):(g.yw.destroy(),g.yw.error(n.message));case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),Q=function(){var r=d()(l()().mark((function r(){var t,n;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading..."})),t={pageNumber:0,pageSize:100,level:A.Hxq},r.next=4,(0,m.AM)(t);case 4:n=r.sent,console.log("queryRolesBySuper response ",n),200===n.code?(g.yw.destroy(),H(n)):(g.yw.destroy(),g.yw.error(n.message));case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,w.useEffect)((function(){K(),Q()}),[]),(0,w.useEffect)((function(){var e;console.log("currentCategory:",Y),null===(e=r.current)||void 0===e||e.reloadAndRest()}),[Y]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.Z,{columns:L,actionRef:r,cardBordered:!0,request:function(){var r=d()(l()().mark((function r(n,o,i){var u,d,c;return l()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("request:",n,o,i),g.yw.loading(e.formatMessage({id:"loading",defaultMessage:"Loading"})),n.current,u=s()(n,U),d=a()({pageNumber:n.current-1},u),r.next=6,(0,p._9)(d);case 6:return c=r.sent,console.log("getAllUsers response:",d,c),g.yw.destroy(),200===c.code||g.yw.error(t(c.message)),r.abrupt("return",{data:c.data.content,success:!0,total:c.data.totalElements});case 11:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}(),rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"pages.user.list",defaultMessage:"用户列表"}),toolBarRender:function(){return[(0,I.jsx)(M.ZP,{icon:(0,I.jsx)(h.Z,{}),type:"primary",onClick:_,children:e.formatMessage({id:"pages.common.create",defaultMessage:"Create"})},"button")]}}),B&&(0,I.jsx)(T,{isEdit:i,open:B,user:P,onClose:function(){z(!1)},onSubmit:G})]})},N=function(){return(0,I.jsx)("div",{children:(0,I.jsx)(z,{})})}},90838:function(e,r,t){t.d(r,{v:function(){return c}});var n=t(76711),a=t.n(n),o=t(73193),s=t.n(o),i=t(55735),l=t(44435),u=t(83642),d=t(83890),c=(0,l.Ue)()((0,u.mW)((0,u.tJ)((0,d.n)((function(e,r){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:i.zBg,name:i.zBg},setCategoryResult:function(r){var t=function(e){var r=[];return e.data.content.forEach((function(e){var t={label:e.name,value:e.uid};r.push(t)})),r}(r),n={uid:i.zBg,name:i.zBg},o=s()(s()({},r),{},{data:{content:[n].concat(a()(r.data.content))}}),l=function(e){var r=[];return e.data.content.forEach((function(e){var t={title:e.name,key:e.uid,children:[]};e.children&&Array.isArray(e.children)&&(t.children=e.children.map((function(e){return{title:e.name,key:e.uid,children:[]}}))),r.push(t)})),r}(o);e({categoryResult:o,categoryTreeOptions:l,categorySelectOptions:t}),e({currentCategory:{uid:i.zBg,name:i.zBg}})},insertCategory:function(r){e((function(e){e.categoryResult.data.content.unshift(r)}))},upgradeCategory:function(r){e((function(e){var t=e.categoryResult.data.content,n=t.findIndex((function(e){return e.uid===r.uid}));-1!==n?t[n]=r:console.warn("Category with uid ".concat(r.uid," not found."))}))},setCurrentCategory:function(r){e({currentCategory:r})},resetDefaultCategory:function(){console.log("resetDefaultCategory"),e({currentCategory:{uid:i.zBg,name:i.zBg}})},setCurrentCategoryUid:function(t){var n=r().categoryResult.data.content.find((function(e){return e.uid===t}));e({currentCategory:n})},deleteCategoryCache:function(){return e({},!0)}}})),{name:i.OMm})))},78488:function(e,r,t){t.d(r,{Z:function(){return c}});var n=t(73193),a=t.n(n),o=t(76711),s=t.n(o),i=t(55735),l=t(44435),u=t(83642),d=t(83890),c=(0,l.Ue)()((0,u.mW)((0,u.tJ)((0,d.n)((function(e,r){return{currentRole:{uid:"",orgUid:"",authorities:[]},currentRolePlatform:{uid:"",orgUid:"",authorities:[]},roleResult:{data:{content:[]}},roleResultPlatform:{data:{content:[]}},insertRole:function(r){e((function(e){e.roleResult.data.content.unshift(r)}))},upgradeRole:function(r){e((function(e){var t=e.roleResult.data.content,n=t.findIndex((function(e){return e.uid===r.uid}));-1!==n?t[n]=r:console.warn("Role with uid ".concat(r.uid," not found."))}))},setRoleResult:function(t){var n;(e({roleResult:t}),""===r().currentRole.uid)&&((null===(n=t.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length)>0&&e({currentRole:t.data.content[0]}))},setRoleResultPlatform:function(t){var n;(e({roleResultPlatform:t}),""===r().currentRolePlatform.uid)&&((null===(n=t.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length)>0&&e({currentRolePlatform:t.data.content[0]}))},setCurrentRole:function(t){var n=r().roleResult.data.content,o=n.findIndex((function(e){return e.uid===t.uid}));if(-1!==o){var i=[].concat(s()(n.slice(0,o)),[t],s()(n.slice(o+1))),l=a()(a()({},r().roleResult),{},{data:{content:i}});e({roleResult:l,currentRole:t})}else console.warn("Role with the specified uid not found."),e({currentRole:t})},setCurrentRolePlatform:function(t){var n=r().roleResultPlatform.data.content,o=n.findIndex((function(e){return e.uid===t.uid}));if(-1!==o){var i=[].concat(s()(n.slice(0,o)),[t],s()(n.slice(o+1))),l=a()(a()({},r().roleResultPlatform),{},{data:{content:i}});e({roleResultPlatform:l,currentRolePlatform:t})}else console.warn("Role with the specified uid not found."),e({currentRolePlatform:t})},removeRole:function(t){var n=r().roleResult.data.content,o=n.findIndex((function(e){return e.uid===t}));-1!==o?e({roleResult:a()(a()({},r().roleResult),{},{data:{content:[].concat(s()(n.slice(0,o)),s()(n.slice(o+1)))}})}):console.warn("Role not found in cache:",t),r().currentRole.uid===t&&e({currentRole:{uid:"",orgUid:"",authorities:[]}})},deleteRoleCache:function(){return e({},!0)}}})),{name:i.uaR})))},29266:function(e,r,t){t.d(r,{Z:function(){return O}});var n=t(44194),a=t(51865),o=t.n(a),s=t(97859),i=t(63125),l=t(80314),u=t(79145),d=t(18011),c=t(37167),f=t(47825),g=t(87471),p=t(88874),m=t(77167),h=t(65759);const v=e=>{const{lineWidth:r,fontSizeIcon:t,calc:n}=e,a=e.fontSizeSM;return(0,m.IX)(e,{tagFontSize:a,tagLineHeight:(0,f.bf)(n(e.lineHeightSM).mul(a).equal()),tagIconSize:n(t).sub(n(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},y=e=>({defaultBg:new g.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var b=(0,h.I$)("Tag",(e=>(e=>{const{paddingXXS:r,lineWidth:t,tagPaddingHorizontal:n,componentCls:a,calc:o}=e,s=o(n).sub(t).equal(),i=o(r).sub(t).equal();return{[a]:Object.assign(Object.assign({},(0,p.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:s,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,f.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:i,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:s}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(v(e))),y),x=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t};const C=n.forwardRef(((e,r)=>{const{prefixCls:t,style:a,className:s,checked:i,onChange:l,onClick:u}=e,d=x(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:f,tag:g}=n.useContext(c.E_),p=f("tag",t),[m,h,v]=b(p),y=o()(p,`${p}-checkable`,{[`${p}-checkable-checked`]:i},null==g?void 0:g.className,s,h,v);return m(n.createElement("span",Object.assign({},d,{ref:r,style:Object.assign(Object.assign({},a),null==g?void 0:g.style),className:y,onClick:e=>{null==l||l(!i),null==u||u(e)}})))}));var M=C,w=t(85772);var R=(0,h.bk)(["Tag","preset"],(e=>(e=>(0,w.Z)(e,((r,t)=>{let{textColor:n,lightBorderColor:a,lightColor:o,darkColor:s}=t;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:n,background:o,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:s,borderColor:s},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(v(e))),y);const k=(e,r,t)=>{const n="string"!=typeof(a=t)?a:a.charAt(0).toUpperCase()+a.slice(1);var a;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${t}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var P=(0,h.bk)(["Tag","status"],(e=>{const r=v(e);return[k(r,"success","Success"),k(r,"processing","Info"),k(r,"error","Error"),k(r,"warning","Warning")]}),y),j=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t};const S=n.forwardRef(((e,r)=>{const{prefixCls:t,className:a,rootClassName:f,style:g,children:p,icon:m,color:h,onClose:v,bordered:y=!0,visible:x}=e,C=j(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:M,direction:w,tag:k}=n.useContext(c.E_),[S,Z]=n.useState(!0),O=(0,s.Z)(C,["closeIcon","closable"]);n.useEffect((()=>{void 0!==x&&Z(x)}),[x]);const I=(0,i.o2)(h),T=(0,i.yT)(h),F=I||T,$=Object.assign(Object.assign({backgroundColor:h&&!F?h:void 0},null==k?void 0:k.style),g),E=M("tag",t),[B,q,A]=b(E),U=o()(E,null==k?void 0:k.className,{[`${E}-${h}`]:F,[`${E}-has-color`]:h&&!F,[`${E}-hidden`]:!S,[`${E}-rtl`]:"rtl"===w,[`${E}-borderless`]:!y},a,f,q,A),z=e=>{e.stopPropagation(),null==v||v(e),e.defaultPrevented||Z(!1)},[,N]=(0,l.Z)((0,l.w)(e),(0,l.w)(k),{closable:!1,closeIconRender:e=>{const r=n.createElement("span",{className:`${E}-close-icon`,onClick:z},e);return(0,u.wm)(e,r,(e=>({onClick:r=>{var t;null===(t=null==e?void 0:e.onClick)||void 0===t||t.call(e,r),z(r)},className:o()(null==e?void 0:e.className,`${E}-close-icon`)})))}}),V="function"==typeof C.onClick||p&&"a"===p.type,D=m||null,H=D?n.createElement(n.Fragment,null,D,p&&n.createElement("span",null,p)):p,W=n.createElement("span",Object.assign({},O,{ref:r,className:U,style:$}),H,N,I&&n.createElement(R,{key:"preset",prefixCls:E}),T&&n.createElement(P,{key:"status",prefixCls:E}));return B(V?n.createElement(d.Z,{component:"Tag"},W):W)})),Z=S;Z.CheckableTag=M;var O=Z}}]);