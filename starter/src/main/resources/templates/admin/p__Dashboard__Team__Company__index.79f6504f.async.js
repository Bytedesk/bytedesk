"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2701],{24172:function(T,c,e){e.d(c,{Kq:function(){return D},RL:function(){return S}});var f=e(15009),t=e.n(f),j=e(97857),a=e.n(j),h=e(99289),m=e.n(h),g=e(85615),i=e(86745);function D(s){return y.apply(this,arguments)}function y(){return y=m()(t()().mark(function s(d){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/v1/org/create",{method:"POST",data:a()(a()({},d),{},{client:g.bV})}));case 1:case"end":return n.stop()}},s)})),y.apply(this,arguments)}function S(s){return _.apply(this,arguments)}function _(){return _=m()(t()().mark(function s(d){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/v1/org/update",{method:"POST",data:a()(a()({},d),{},{client:g.bV})}));case 1:case"end":return n.stop()}},s)})),_.apply(this,arguments)}function p(s){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function s(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/org/query",{method:"GET",params:_objectSpread(_objectSpread({},d),{},{client:HTTP_CLIENT})}));case 1:case"end":return n.stop()}},s)})),E.apply(this,arguments)}function P(s){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function s(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/v1/org/uid",{method:"GET",params:{uid:d,client:HTTP_CLIENT}}));case 1:case"end":return n.stop()}},s)})),u.apply(this,arguments)}},77154:function(T,c,e){var f=e(39825);function t(){var j=(0,f.Z)(),a=j.isDarkMode,h={borderRight:a?"1px solid #333":"1px solid #ccc",background:a?"#141414":"#f5f5f5"},m={background:a?"#141414":"#fff"},g={borderLeft:a?"1px solid #333":"1px solid #ccc",background:a?"#141414":"#f5f5f5"},i={minHeight:120,background:a?"#141414":"#f5f5f5"};return{leftSiderStyle:h,headerStyle:m,rightSiderStyle:g,contentStyle:i}}c.Z=t},75779:function(T,c,e){e.r(c),e.d(c,{default:function(){return J}});var f=e(77154),t=e(21612),j=e(82669),a=e(67294),h=e(15009),m=e.n(h),g=e(97857),i=e.n(g),D=e(99289),y=e.n(D),S=e(5574),_=e.n(S),p=e(80049),E=e(24172),P=e(87676),u=e(66723),s=e(88484),d=e(34994),r=e(5966),n=e(90672),Z=e(86745),K=e(8232),G=e(7134),H=e(14726),o=e(85893),$=function(){var U=K.Z.useForm(),A=_()(U,1),L=A[0],b=(0,Z.useIntl)(),R=(0,P.u)(function(O){return{orgCurrent:O.orgCurrent,setOrgCurrent:O.setOrgCurrent}}),v=R.orgCurrent,X=R.setOrgCurrent,w=(0,a.useState)(""),x=_()(w,2),B=x[0],W=x[1],q=function(l){console.log("handleUploadSuccess:",l),W(l)},ee=function(l){console.log("handleUploadError:",l)},ne=function(){var O=y()(m()().mark(function l(F){var I,C;return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return p.yw.loading({content:"\u6B63\u5728\u4FDD\u5B58...",key:"save",duration:0}),I=i()(i()(i()({},v),F),{},{logo:B}),console.log("orgObject:",I),M.next=5,(0,E.RL)(I);case 5:C=M.sent,console.log("updateOrg response:",C),C.code===200?(p.yw.destroy(),p.yw.success(b.formatMessage({id:"update.success"})),X(C.data)):(p.yw.destroy(),p.yw.error(C.message));case 8:case"end":return M.stop()}},l)}));return function(F){return O.apply(this,arguments)}}(),re=function(l){return Array.isArray(l)?l:l==null?void 0:l.fileList};return(0,a.useEffect)(function(){v&&W(v.logo)},[v]),(0,o.jsx)("div",{children:(0,o.jsxs)(d.A,{form:L,initialValues:{name:v.name,description:v.description},onFinish:ne,children:[(0,o.jsx)(K.Z.Item,{name:"logo",valuePropName:"fileList",getValueFromEvent:re,label:b.formatMessage({id:"pages.robot.tab.avatar",defaultMessage:"Avatar"}),children:(0,o.jsxs)(u.G,{onSuccess:q,onError:ee,children:[(0,o.jsx)(G.C,{src:B}),(0,o.jsx)(H.ZP,{icon:(0,o.jsx)(s.Z,{}),children:b.formatMessage({id:"pages.robot.upload",defaultMessage:"Upload"})})]},"avatar")}),(0,o.jsx)(r.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],label:"\u540D\u79F0",name:"name",width:"md"}),(0,o.jsx)(n.Z,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],label:"\u63CF\u8FF0",name:"description",width:"md"})]})})},V=$,te=t.Z.Header,ae=t.Z.Footer,Y=t.Z.Sider,z=t.Z.Content,N=[{label:"\u57FA\u672C\u4FE1\u606F",key:"basic"}],k=function(){var U=(0,f.Z)(),A=U.leftSiderStyle,L=U.contentStyle,b=function(v){console.log("menu click ",v.key)};return(0,o.jsxs)(t.Z,{children:[(0,o.jsx)(Y,{style:A,children:(0,o.jsx)(j.Z,{mode:"inline",onClick:b,defaultSelectedKeys:["basic"],defaultOpenKeys:["basic"],items:N})}),(0,o.jsx)(t.Z,{children:(0,o.jsx)(z,{style:L,children:(0,o.jsx)(V,{})})})]})},J=k},66723:function(T,c,e){e.d(c,{G:function(){return y}});var f=e(97857),t=e.n(f),j=e(67294),a=e(66476),h=e(85615),m=e(27484),g=e.n(m),i=e(80049),D=e(85893),y=function(_){var p=_.children,E=_.onSuccess,P=_.onError,u={file:null,file_name:"test.png",file_type:"image/png"},s={name:"file",action:"/api/v1/upload/file",headers:{Authorization:"Bearer "+localStorage.getItem(h.LA)},data:u,showUploadList:!1,beforeUpload:function(r){console.log("beforeUpload",r);var n=g()(new Date).format("YYYYMMDDHHmmss")+"_"+r.name;u.file=r,u.file_name=n,u.file_type=r.type,console.log("beforeUpload",u)},onChange:function(r){if(r.file.status!=="uploading"&&console.log(r.file,r.fileList),r.file.status==="done"){var n=r.file.response.data;console.log("url: ",n),E(n),i.yw.success("".concat(r.file.name," \u4E0A\u4F20\u6210\u529F"))}else r.file.status==="error"&&(i.yw.error("".concat(r.file.name," \u4E0A\u4F20\u5931\u8D25")),P(r.file))}};return(0,D.jsx)(a.Z,t()(t()({},s),{},{children:p}))}}}]);
