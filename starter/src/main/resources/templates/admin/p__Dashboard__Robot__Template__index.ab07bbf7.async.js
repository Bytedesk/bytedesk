"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7861],{59769:function(e,t,n){var r=n(2053),o=n(75271),i=n(22800),u=n(67604),c=function(e,t){return o.createElement(u.Z,(0,r.Z)({},e,{ref:t,icon:i.Z}))},l=o.forwardRef(c);t.Z=l},69375:function(e,t,n){n.d(t,{$l:function(){return v},gf:function(){return y},lg:function(){return p},p0:function(){return f}});var r=n(90228),o=n.n(r),i=n(26068),u=n.n(i),c=n(87999),l=n.n(c),a=n(96677),s=n(18735);function f(e){return d.apply(this,arguments)}function d(){return(d=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/robot/query/org",{method:"GET",params:u()(u()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/robot/create",{method:"POST",data:u()(u()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/robot/update",{method:"POST",data:u()(u()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/v1/robot/delete",{method:"POST",data:u()(u()({},t),{},{client:a.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21544:function(e,t,n){var r=n(93454);t.Z=function(){var e=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},leftSiderWidth:250,headerStyle:{background:e?"#141414":"#fff"},rightSiderStyle:{borderLeft:e?"1px solid #333":"1px solid #ccc",background:e?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:e?"#141414":"#f5f5f5",height:"100vh"}}}},13542:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(43650),o=n(91286),i=n(21544),u=n(94031),c=n(90228),l=n.n(c),a=n(87999),s=n.n(a),f=n(48305),d=n.n(f),p=n(59153),h=n(69375),v=n(96677),m=n(75271),y=n(96902),g=n(41258),x=n(58439),w=n(52676),b={},k=function(){var e,t=(0,m.useRef)(!1),n=(0,m.useState)(),r=d()(n,2),o=r[0],i=r[1],u=(0,m.useState)([]),c=d()(u,2),a=c[0],f=c[1],k=(0,m.useState)(),S=d()(k,2),Z=S[0],E=S[1],C=(0,m.useState)(!1),j=d()(C,2),R=j[0],O=j[1],T=function(){p.yw.info("TODO: 编辑"+(null==Z?void 0:Z.nickname)),O(!1)};(0,m.useEffect)((function(){if(console.log("robotResult: ",o),null!=o&&o.data.content){var e=o.data.content.reduce((function(e,t){var n=t.category;return e[n]||(e[n]=[]),e[n].push(t),e}),{});f(e)}else f([])}),[o]);var A=function(){var e=s()(l()().mark((function e(){var n,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=3;break}return console.log("isLoading: 1",t.current),e.abrupt("return");case 3:return t.current=!0,p.yw.loading("loading"),n={pageNumber:0,pageSize:100,level:v.Hxq},e.next=8,(0,h.p0)(n);case 8:r=e.sent,console.log("getPlatformRobots queryRobotsByOrg: ",r),200===r.code?(p.yw.destroy(),i(r)):(p.yw.destroy(),p.yw.error(r.message)),t.current=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){A()}),[]);var I={MINE:"我的",JOB:"工作",LANGUAGE:"语言",TOOL:"工具",WRITING:"写作"},N=function(e){console.log("handleCardClick: ",e.nickname),E(e),O(!0)};return(0,w.jsxs)(w.Fragment,{children:[Object.keys(a).map((function(e,t){var n=I[e]||e;return(0,w.jsx)(y.Z,{title:n,id:e,style:{marginBottom:20,cursor:"pointer"},children:a[e].map((function(e,t){var n=e.llm.prompt.length>20?"".concat(e.llm.prompt.slice(0,20),"..."):e.llm.prompt;return(0,w.jsxs)(y.Z.Grid,{style:b,onClick:function(){return N(e)},children:[e.avatar," ",e.nickname,(0,w.jsx)("p",{style:{color:"gray"},children:n})]},t)}))},t)})),(0,w.jsx)(g.Z,{title:null==Z?void 0:Z.nickname,open:R,onOk:function(){O(!1)},onCancel:function(){O(!1)},footer:function(e,t){var n=t.OkBtn,r=t.CancelBtn;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x.ZP,{onClick:T,children:"编辑"}),(0,w.jsx)(r,{}),(0,w.jsx)(n,{})]})},children:(0,w.jsx)("p",{children:null==Z||null===(e=Z.llm)||void 0===e?void 0:e.prompt})})]})},S=r.Z.Sider,Z=r.Z.Content,E=[{key:"grp",label:"分类",type:"group",children:[{key:"JOB",label:"工作"},{key:"LANGUAGE",label:"语言"},{key:"TOOL",label:"工具"},{key:"WRITING",label:"写作"},{key:"RAG",label:"知识库"}]}],C=function(){var e=(0,i.Z)(),t=e.leftSiderStyle,n=e.leftSiderWidth,c=e.contentStyle;return(0,w.jsxs)(r.Z,{children:[(0,w.jsx)(S,{width:n,style:t,children:(0,w.jsx)(o.Z,{offsetTop:50,children:(0,w.jsx)(u.Z,{onClick:function(e){console.log("click ",e),window.location.hash=e.key},defaultSelectedKeys:["job"],mode:"inline",items:E})})}),(0,w.jsx)(r.Z,{children:(0,w.jsx)(Z,{style:c,children:(0,w.jsx)(k,{})})})]})}},91286:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(75271),o=n(82187),i=n.n(o),u=n(74772),c=n(30454),l=n(35047),a=n(87564);var s=function(e){let t;const n=n=>()=>{t=null,e.apply(void 0,(0,l.Z)(n))},r=function(){if(null==t){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];t=(0,a.Z)(n(r))}};return r.cancel=()=>{a.Z.cancel(t),t=null},r},f=n(4166);var d=(0,n(10083).I$)("Affix",(e=>{const{componentCls:t}=e;return{[t]:{position:"fixed",zIndex:e.zIndexPopup}}}),(e=>({zIndexPopup:e.zIndexBase+10})));function p(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function h(e,t,n){if(void 0!==n&&Math.round(t.top)>Math.round(e.top)-n)return n+t.top}function v(e,t,n){if(void 0!==n&&Math.round(t.bottom)<Math.round(e.bottom)+n){return n+(window.innerHeight-t.bottom)}}const m=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function y(){return"undefined"!=typeof window?window:null}var g=r.forwardRef(((e,t)=>{var n;const{style:o,offsetTop:l,offsetBottom:a,prefixCls:g,className:x,rootClassName:w,children:b,target:k,onChange:S}=e,{getPrefixCls:Z,getTargetContainer:E}=r.useContext(f.E_),C=Z("affix",g),[j,R]=r.useState(!1),[O,T]=r.useState(),[A,I]=r.useState(),N=r.useRef(0),B=r.useRef(null),L=r.useRef(),G=r.useRef(null),P=r.useRef(null),z=r.useRef(null),q=null!==(n=null!=k?k:E)&&void 0!==n?n:y,M=void 0===a&&void 0===l?0:l,H=()=>{N.current=1,(()=>{if(1!==N.current||!P.current||!G.current||!q)return;const e=q();if(e){const t={status:0},n=p(G.current);if(0===n.top&&0===n.left&&0===n.width&&0===n.height)return;const r=p(e),o=h(n,r,M),i=v(n,r,a);void 0!==o?(t.affixStyle={position:"fixed",top:o,width:n.width,height:n.height},t.placeholderStyle={width:n.width,height:n.height}):void 0!==i&&(t.affixStyle={position:"fixed",bottom:i,width:n.width,height:n.height},t.placeholderStyle={width:n.width,height:n.height}),t.lastAffix=!!t.affixStyle,j!==t.lastAffix&&(null==S||S(t.lastAffix)),N.current=t.status,T(t.affixStyle),I(t.placeholderStyle),R(t.lastAffix)}})()},V=s((()=>{H()})),W=s((()=>{if(q&&O){const e=q();if(e&&G.current){const t=p(e),n=p(G.current),r=h(n,t,M),o=v(n,t,a);if(void 0!==r&&O.top===r||void 0!==o&&O.bottom===o)return}}H()})),D=()=>{const e=null==q?void 0:q();e&&(m.forEach((t=>{var n;L.current&&(null===(n=B.current)||void 0===n||n.removeEventListener(t,L.current)),null==e||e.addEventListener(t,W)})),B.current=e,L.current=W)};r.useImperativeHandle(t,(()=>({updatePosition:V}))),r.useEffect((()=>(z.current=setTimeout(D),()=>(()=>{z.current&&(clearTimeout(z.current),z.current=null);const e=null==q?void 0:q();m.forEach((t=>{var n;null==e||e.removeEventListener(t,W),L.current&&(null===(n=B.current)||void 0===n||n.removeEventListener(t,L.current))})),V.cancel(),W.cancel()})())),[]),r.useEffect((()=>{D()}),[k,O]),r.useEffect((()=>{V()}),[k,l,a]);const[F,J,U]=d(C),$=i()(w,J,C,U),K=i()({[$]:O});let _=(0,c.Z)(e,["prefixCls","offsetTop","offsetBottom","target","onChange","rootClassName"]);return F(r.createElement(u.Z,{onResize:V},r.createElement("div",Object.assign({style:o,className:x,ref:G},_),O&&r.createElement("div",{style:A,"aria-hidden":"true"}),r.createElement("div",{className:K,ref:P,style:O},r.createElement(u.Z,{onResize:V},b)))))}))}}]);