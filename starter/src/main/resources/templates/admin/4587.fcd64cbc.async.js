"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4587],{32045:function(n,e,t){t.d(e,{XS:function(){return l},k4:function(){return p},uu:function(){return b},yr:function(){return h}});var r=t(90819),a=t.n(r),u=t(73193),o=t.n(u),i=t(89933),c=t.n(i),s=t(55735),d=t(30921);function l(n){return f.apply(this,arguments)}function f(){return(f=c()(a()().mark((function n(e){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/api/v1/category/query/org",{method:"GET",params:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(n){return g.apply(this,arguments)}function g(){return(g=c()(a()().mark((function n(e){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/api/v1/category/create",{method:"POST",data:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n){return v.apply(this,arguments)}function v(){return(v=c()(a()().mark((function n(e){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/api/v1/category/update",{method:"POST",data:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(n){return y.apply(this,arguments)}function y(){return(y=c()(a()().mark((function n(e){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/api/v1/category/delete",{method:"POST",data:o()(o()({},e),{},{client:s.bVn})}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},78996:function(n,e,t){var r=t(90819),a=t.n(r),u=t(89933),o=t.n(u),i=t(45332),c=t.n(i),s=t(86803),d=t(76750),l=t(6397),f=t(40612),p=t(69169),g=t(4499),h=t(84881),v=t(53530),b=t(44194),y=t(90838),m=t(55735),k=t(31549);e.Z=function(n){var e,t=n.open,r=n.level,u=n.type,i=n.isEdit,C=n.onCancel,w=n.onSubmit,R=p.A.useForm(),S=c()(R,1)[0],K=(0,d.Z)().translateString,x=(0,f.u)((function(n){return n.currentOrg})),O=(0,l.j)((function(n){return n.kbaseResult})),U=(0,l.j)((function(n){return n.currentKbase})),j=(0,y.v)((function(n){return n.currentCategory}));(0,b.useEffect)((function(){i?S.setFieldsValue({name:K(null==j?void 0:j.name)}):S.resetFields(),S.setFieldsValue({kbUid:null==U?void 0:U.uid})}),[t,i]);var z=function(){S.validateFields().then(function(){var n=o()(a()().mark((function n(e){var t;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("handleSaveDep:",e),t={uid:i?null==j?void 0:j.uid:"",name:e.name,level:r,type:u,kbUid:e.kbUid,orgUid:null==x?void 0:x.uid},w(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.log("Failed:",n),s.yw.error("创建分类失败")}))};return(0,k.jsx)("div",{children:(0,k.jsx)(v.Z,{title:i?"编辑分类":"创建分类",open:t,forceRender:!0,onOk:z,onCancel:C,getContainer:!1,children:(0,k.jsxs)(p.A,{form:S,name:"categoryForm",submitter:!1,children:[(0,k.jsx)(g.Z,{label:"分类名称",name:"name",rules:[{required:!0,message:"请输入名称!"}],fieldProps:{onKeyDown:function(n){"Enter"===n.key&&z()},placeholder:"请输入分类名称"}}),u!==m.Kvk&&u!==m.hcJ&&(0,k.jsx)(h.Z,{name:"kbUid",label:"所属知识库",allowClear:!0,options:null==O||null===(e=O.data)||void 0===e?void 0:e.content.map((function(n){return{label:K(n.name),value:n.uid}}))})]})})})}},96865:function(n,e,t){var r=t(23864);e.Z=function(){var n=(0,r.Z)().isDarkMode;return{leftSiderStyle:{borderRight:n?"1px solid #333":"1px solid #ccc",background:n?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"},leftSiderWidth:250,headerStyle:{background:n?"#141414":"#fff"},rightSiderStyle:{borderLeft:n?"1px solid #333":"1px solid #ccc",background:n?"#141414":"#f5f5f5"},contentStyle:{minHeight:120,background:n?"#141414":"#f5f5f5",height:"100vh",overflow:"auto"}}}},76750:function(n,e,t){var r=t(55735),a=t(65461),u=t(30921);e.Z=function(){var n=(0,u.useIntl)();return{translateString:function(e){return null==e?e:e&&e.startsWith(r.VoP)?n.formatMessage({id:e,defaultMessage:e}):e},translateStringTranct:function(e){return null==e?e:null!=e&&e.startsWith(r.VoP)||null!=e&&e.startsWith("ROLE_")?(0,a.aS)(n.formatMessage({id:e,defaultMessage:e}),10):(0,a.aS)(e,10)}}}},90838:function(n,e,t){t.d(e,{v:function(){return l}});var r=t(76711),a=t.n(r),u=t(73193),o=t.n(u),i=t(55735),c=t(44435),s=t(83642),d=t(83890),l=(0,c.Ue)()((0,s.mW)((0,s.tJ)((0,d.n)((function(n,e){return{categoryResult:{data:{content:[]}},categoryTreeOptions:[],categorySelectOptions:[],currentCategory:{uid:i.zBg,name:i.zBg},setCategoryResult:function(e){var t=function(n){var e=[];return n.data.content.forEach((function(n){var t={label:n.name,value:n.uid};e.push(t)})),e}(e),r={uid:i.zBg,name:i.zBg},u=o()(o()({},e),{},{data:{content:[r].concat(a()(e.data.content))}}),c=function(n){var e=[];return n.data.content.forEach((function(n){var t={title:n.name,key:n.uid,children:[]};n.children&&Array.isArray(n.children)&&(t.children=n.children.map((function(n){return{title:n.name,key:n.uid,children:[]}}))),e.push(t)})),e}(u);n({categoryResult:u,categoryTreeOptions:c,categorySelectOptions:t}),n({currentCategory:{uid:i.zBg,name:i.zBg}})},insertCategory:function(e){n((function(n){n.categoryResult.data.content.unshift(e)}))},upgradeCategory:function(e){n((function(n){var t=n.categoryResult.data.content,r=t.findIndex((function(n){return n.uid===e.uid}));-1!==r?t[r]=e:console.warn("Category with uid ".concat(e.uid," not found."))}))},setCurrentCategory:function(e){n({currentCategory:e})},resetDefaultCategory:function(){console.log("resetDefaultCategory"),n({currentCategory:{uid:i.zBg,name:i.zBg}})},setCurrentCategoryUid:function(t){var r=e().categoryResult.data.content.find((function(n){return n.uid===t}));n({currentCategory:r})},deleteCategoryCache:function(){return n({},!0)}}})),{name:i.OMm})))},6397:function(n,e,t){t.d(e,{j:function(){return l}});var r=t(73193),a=t.n(r),u=t(76711),o=t.n(u),i=t(55735),c=t(44435),s=t(83642),d=t(83890),l=(0,c.Ue)()((0,s.mW)((0,s.tJ)((0,d.n)((function(n,e){return{currentKbase:{uid:"",orgUid:""},kbaseResult:{data:{content:[]}},insertKbase:function(e){n((function(n){n.kbaseResult.data.content.unshift(e)}))},updateKbase:function(e){n((function(n){var t=n.kbaseResult.data.content,r=t.findIndex((function(n){return n.uid===e.uid}));-1!==r?t[r]=e:console.warn("Kbase with uid ".concat(e.uid," not found."))}))},setKbaseResult:function(e){var t;n({kbaseResult:e}),(null===(t=e.data)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>0&&n({currentKbase:e.data.content[0]})},setCurrentKbase:function(t){var r=e().kbaseResult.data.content,u=r.findIndex((function(n){return n.uid===t.uid}));if(-1!==u){var i=[].concat(o()(r.slice(0,u)),[t],o()(r.slice(u+1))),c=a()(a()({},e().kbaseResult),{},{data:{content:i}});n({kbaseResult:c,currentKbase:t})}else console.warn("Kbase with the specified uid not found."),n({currentKbase:t})},removeKbase:function(t){var r=e().kbaseResult.data.content,u=r.findIndex((function(n){return n.uid===t}));-1!==u?n({kbaseResult:a()(a()({},e().kbaseResult),{},{data:{content:[].concat(o()(r.slice(0,u)),o()(r.slice(u+1)))}})}):console.warn("Kbase not found in cache:",t),e().currentKbase.uid===t&&n({currentKbase:{uid:"",orgUid:""}})},deleteKbaseCache:function(){return n({},!0)}}})),{name:i.wKE})))}}]);