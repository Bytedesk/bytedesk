"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[987,5106],{67444:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(17082),o=r(44194),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},i=r(64423),s=function(e,t){return o.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:a}))};var l=o.forwardRef(s)},47719:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(17082),o=r(44194),a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},i=r(64423),s=function(e,t){return o.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:a}))};var l=o.forwardRef(s)},84881:function(e,t,r){var n=r(17082),o=r(51190),a=r(82308),i=r(44194),s=r(63653),l=r(86001),c=r(31549),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],d=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=function(e,t){var r=e.fieldProps,d=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,h=e.request,v=e.showSearch,y=e.options,x=(0,o.Z)(e,u),k=(0,i.useContext)(s.Z);return(0,c.jsx)(l.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,a.h)(m),request:h,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:y,mode:g,showSearch:v,getPopupContainer:k.getPopupContainer},r),ref:t,proFieldProps:f},x),{},{children:d}))},f=i.forwardRef((function(e,t){var r=e.fieldProps,u=e.children,p=e.params,f=e.proFieldProps,g=e.mode,m=e.valueEnum,h=e.request,v=e.options,y=(0,o.Z)(e,d),x=(0,n.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),k=(0,i.useContext)(s.Z);return(0,c.jsx)(l.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,a.h)(m),request:h,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:k.getPopupContainer},x),ref:t,proFieldProps:f},y),{},{children:u}))})),g=i.forwardRef(p);g.SearchSelect=f,g.displayName="ProFormComponent",t.Z=g},4499:function(e,t,r){var n=r(42601),o=r(17082),a=r(51190),i=r(46015),s=r(3909),l=r(98036),c=r(36490),u=r(44194),d=r(86001),p=r(31549),f=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",h=function(e){var t=(0,i.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),r=(0,n.Z)(t,2),a=r[0],c=r[1];return(0,p.jsx)(s.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var r,n=t.getFieldValue(e.name||[]);return(0,p.jsx)(l.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return c(e)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[null===(r=e.statusRender)||void 0===r?void 0:r.call(e,n),e.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:a,children:e.children}))}})},v=function(e){var t=e.fieldProps,r=e.proFieldProps,n=(0,a.Z)(e,f);return(0,p.jsx)(d.Z,(0,o.Z)({valueType:m,fieldProps:t,filedConfig:{valueType:m},proFieldProps:r},n))};v.Password=function(e){var t=e.fieldProps,r=e.proFieldProps,i=(0,a.Z)(e,g),s=(0,u.useState)(!1),l=(0,n.Z)(s,2),f=l[0],v=l[1];return null!=t&&t.statusRender&&i.name?(0,p.jsx)(h,{name:i.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:f,onOpenChange:v,children:(0,p.jsx)("div",{children:(0,p.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,c.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var r;null==t||null===(r=t.onBlur)||void 0===r||r.call(t,e),v(!1)},onClick:function(e){var r;null==t||null===(r=t.onClick)||void 0===r||r.call(t,e),v(!0)}}),proFieldProps:r,filedConfig:{valueType:m}},i))})}):(0,p.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:t,proFieldProps:r,filedConfig:{valueType:m}},i))},v.displayName="ProFormComponent",t.Z=v},43314:function(e,t,r){r.d(t,{W5:function(){return m},p0:function(){return f},u7:function(){return d},zl:function(){return v}});var n=r(90819),o=r.n(n),a=r(73193),i=r.n(a),s=r(89933),l=r.n(s),c=r(77667),u=r(74698);function d(e){return p.apply(this,arguments)}function p(){return(p=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/workgroup/query/org",{method:"GET",params:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/workgroup/create",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/workgroup/update",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/workgroup/delete",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},47798:function(e,t,r){r.d(t,{N2:function(){return d},O:function(){return f}});var n=r(90819),o=r.n(n),a=r(73193),i=r.n(a),s=r(89933),l=r.n(s),c=r(77667),u=r(74698);function d(e){return p.apply(this,arguments)}function p(){return(p=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/query/org",{method:"GET",params:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=l()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/v1/ticket/update",{method:"POST",data:i()(i()({},t),{},{client:c.bVn})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},47227:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(90819),o=r.n(n),a=r(89933),i=r.n(a),s=r(45332),l=r.n(s),c=r(67444),u=r(53530),d=r(27487),p=r(75365),f=r(82962),g=r(88996),m=r(56913),h=r(44194),v=r(72272),y=r(40431),x=r(89756),k=r(26305),b=r(1780),w=r(74698),C=r(57024),j=r(77667),Z=r(31549),S=function(e){var t=e.type,r=(0,w.useIntl)(),n=(0,h.useState)(!0),a=l()(n,2),s=a[0],S=a[1],M=(0,y.u)((function(e){return e.currentOrg})),P=(0,C.j)((function(e){return e.currentKbase})),O=(0,h.useState)(!1),$=l()(O,2),I=$[0],T=$[1],F=(0,k.v)((function(e){return{categoryTreeOptions:e.categoryTreeOptions,setCategoryResult:e.setCategoryResult,currentCategory:e.currentCategory,setCurrentCategoryUid:e.setCurrentCategoryUid}})),E=F.categoryTreeOptions,R=F.setCategoryResult,N=F.currentCategory,W=F.setCurrentCategoryUid,q=(0,b.Z)(),z=q.translateString,U=q.translateStringTranct,B=u.Z.useModal(),V=l()(B,2),H=V[0],L=V[1],G=function(){var e=i()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleSubmit: ",t),s?x.yw.loading(r.formatMessage({id:"updating"})):x.yw.loading(r.formatMessage({id:"creating"})),!s){e.next=8;break}return e.next=5,(0,v.yr)(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,v.k4)(t);case 10:e.t0=e.sent;case 11:n=e.t0,console.log("createCategory response: ",n),200===n.code?(x.yw.destroy(),s?x.yw.success(r.formatMessage({id:"update.success"})):x.yw.success(r.formatMessage({id:"create.success"})),T(!1),A()):(x.yw.destroy(),x.yw.error(n.message));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=i()(o()().mark((function e(){var n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getCategories"),x.yw.success(r.formatMessage({id:"loading"})),n={pageNumber:0,pageSize:50,type:t,orgUid:null==M?void 0:M.uid},t!==j.hcJ&&(n.kbUid=null==P?void 0:P.uid),e.next=6,(0,v.XS)(n);case 6:a=e.sent,console.log("queryCategories response: ",a),200===a.code?(R(a),x.yw.destroy()):(x.yw.destroy(),x.yw.error(a.message));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=i()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleEditCategory: ",N),S(!0),T(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=i()(o()().mark((function e(t){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleDeleteCategory: ",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){t!==j.hcJ&&A()}),[P]),(0,h.useEffect)((function(){t===j.hcJ&&A()}),[]);return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(d.Z,{gap:"small",wrap:"wrap",style:{margin:5},children:[(0,Z.jsx)(p.ZP,{type:"primary",size:"small",onClick:function(){S(!1),T(!0)},children:r.formatMessage({id:"create"})}),(0,Z.jsx)(p.ZP,{size:"small",onClick:A,children:"刷新"}),""!==(null==N?void 0:N.uid)&&"all"!==(null==N?void 0:N.uid)&&(0,Z.jsx)(p.ZP,{size:"small",onClick:D,children:r.formatMessage({id:"edit"})}),""!==(null==N?void 0:N.uid)&&"all"!==(null==N?void 0:N.uid)&&(0,Z.jsx)(p.ZP,{onClick:function(){return function(e){H.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,Z.jsx)(c.Z,{}),content:"".concat(r.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(z(e.name),"】？"),onOk:function(){_(e)},onCancel:function(){},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})})}(N)},size:"small",style:{float:"right"},danger:!0,children:r.formatMessage({id:"pages.robot.delete",defaultMessage:"Delete"})})]}),(0,Z.jsx)(f.Z,{defaultSelectedKeys:[null==N?void 0:N.uid],onSelect:function(e,t){console.log("selected",e,t),0!==e.length&&W(e[0].toString())},treeData:E,blockNode:!0,titleRender:function(e){return(0,Z.jsx)(g.Z,{title:z(e.title),children:U(e.title)})}}),I&&(0,Z.jsx)(m.Z,{open:I,type:t,isEdit:s,onCancel:function(){T(!1)},onSubmit:G}),L]})}},96130:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(75574),o=r(73193),a=r.n(o),i=r(84176),s=r.n(i),l=r(10154),c=r.n(l),u=r(90819),d=r.n(u),p=r(89933),f=r.n(p),g=r(45332),m=r.n(g),h=r(89756),v=r(47798),y=r(40431),x=r(26305),k=r(72272),b=r(1780),w=r(77667),C=r(47719),j=r(19513),Z=r(74698),S=r(29266),M=r(75365),P=r(28977),O=r.n(P),$=r(44194),I=r(3909),T=r(73442),F=r(3849),E=r(52288),R=r(44781),N=r(61017),W=r(43314),q=r(31549),z=function(e){var t=e.visible,r=e.ticket,n=e.onClose,o=e.onSuccess,i=I.Z.useForm(),s=m()(i,1)[0],l=(0,Z.useIntl)(),c=(0,b.Z)().translateString,u=(0,y.u)((function(e){return e.currentOrg})),p=(0,x.v)((function(e){return e.categoryResult.data.content})),g=(0,N.$)(),k=g.workgroupResult,C=g.setWorkgroupResult,j=[{value:w.sM_,label:l.formatMessage({id:"ticket.status.new"})},{value:w.Yux,label:l.formatMessage({id:"ticket.status.assigned"})},{value:w.V9S,label:l.formatMessage({id:"ticket.status.in_progress"})},{value:w.pIN,label:l.formatMessage({id:"ticket.status.pending"})},{value:w._Pv,label:l.formatMessage({id:"ticket.status.on_hold"})},{value:w.yib,label:l.formatMessage({id:"ticket.status.reopened"})},{value:w.hwr,label:l.formatMessage({id:"ticket.status.resolved"})},{value:w.frw,label:l.formatMessage({id:"ticket.status.closed"})},{value:w.xw4,label:l.formatMessage({id:"ticket.status.cancelled"})}],S=[{value:w.JTO,label:l.formatMessage({id:"ticket.priority.lowest"})},{value:w.sbT,label:l.formatMessage({id:"ticket.priority.low"})},{value:w.GMZ,label:l.formatMessage({id:"ticket.priority.medium"})},{value:w.Bt2,label:l.formatMessage({id:"ticket.priority.high"})},{value:w._Xr,label:l.formatMessage({id:"ticket.priority.urgent"})},{value:w.Lx6,label:l.formatMessage({id:"ticket.priority.critical"})}],P=function(){var e=f()(d()().mark((function e(){var t,r;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,orgUid:u.uid},e.next=3,(0,W.u7)(t);case 3:200===(r=e.sent).code?C(r):h.yw.error(r.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,$.useEffect)((function(){t&&P()}),[t]);var O=k.data.content.reduce((function(e,t){var r;return null===(r=t.agents)||void 0===r||r.forEach((function(t){e.find((function(e){return e.uid===t.uid}))||e.push(t)})),e}),[]),z=p.filter((function(e){return"all"!==e.uid})),U=function(){var e=f()(d()().mark((function e(){var t,i;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.validateFields();case 3:return t=e.sent,h.yw.loading(l.formatMessage({id:"updating"})),e.next=7,(0,v.O)(a()(a()({},r),t));case 7:i=e.sent,console.log("updateTicket response",i),200===i.code?(h.yw.success(l.formatMessage({id:"update.success"})),o(),n()):h.yw.error(i.message),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Update failed:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return $.useEffect((function(){var e;t&&r&&s.setFieldsValue({title:r.title,description:r.description,status:r.status,priority:r.priority,categoryUid:r.categoryUid,assigneeUid:null===(e=r.assignee)||void 0===e?void 0:e.uid})}),[t,r]),(0,q.jsx)(T.Z,{title:l.formatMessage({id:"ticket.edit.title"}),width:600,open:t,onClose:n,extra:(0,q.jsxs)(F.Z,{children:[(0,q.jsx)(M.ZP,{onClick:n,children:(0,q.jsx)(Z.FormattedMessage,{id:"cancel"})}),(0,q.jsx)(M.ZP,{type:"primary",onClick:U,children:(0,q.jsx)(Z.FormattedMessage,{id:"save"})})]}),children:(0,q.jsxs)(I.Z,{form:s,layout:"vertical",children:[(0,q.jsx)(I.Z.Item,{name:"title",label:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.title"}),rules:[{required:!0}],children:(0,q.jsx)(E.Z,{})}),(0,q.jsx)(I.Z.Item,{name:"description",label:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.description"}),rules:[{required:!0}],children:(0,q.jsx)(E.Z.TextArea,{rows:4})}),(0,q.jsx)(I.Z.Item,{name:"categoryUid",label:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.category"}),rules:[{required:!0}],children:(0,q.jsx)(R.default,{children:z.map((function(e){return(0,q.jsx)(R.default.Option,{value:e.uid,children:c(e.name)},e.uid)}))})}),(0,q.jsx)(I.Z.Item,{name:"assigneeUid",label:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.assignee"}),rules:[{required:!0}],children:(0,q.jsx)(R.default,{children:O.map((function(e){return(0,q.jsx)(R.default.Option,{value:e.uid,children:e.nickname},e.uid)}))})}),(0,q.jsx)(I.Z.Item,{name:"status",label:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.status"}),rules:[{required:!0}],children:(0,q.jsx)(R.default,{options:j})}),(0,q.jsx)(I.Z.Item,{name:"priority",label:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.priority"}),rules:[{required:!0}],children:(0,q.jsx)(R.default,{options:S})})]})})},U=["current"],B=function(){var e=(0,Z.useIntl)(),t=(0,$.useRef)(),r=(0,y.u)((function(e){return e.currentOrg})),n=(0,b.Z)().translateString,o=(0,x.v)().setCategoryResult,i=(0,x.v)((function(e){return e.currentCategory})),l=(0,$.useState)(!1),u=m()(l,2),p=u[0],g=u[1],P=(0,$.useState)(),I=m()(P,2),T=I[0],F=I[1],E=function(){var e=f()(d()().mark((function e(){var t,n;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageNumber:0,pageSize:50,type:w.hcJ,orgUid:null==r?void 0:r.uid},e.next=3,(0,k.XS)(t);case 3:200===(n=e.sent).code?o(n):h.yw.error(n.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,$.useEffect)((function(){E()}),[]);var R=(0,x.v)((function(e){return e.categoryResult.data.content}));(0,$.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.reload()}),[null==i?void 0:i.uid]);var N=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.title"}),dataIndex:"title",copyable:!0,ellipsis:!0},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.description"}),dataIndex:"description",ellipsis:!0},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.status"}),dataIndex:"status",hideInSearch:!0,render:function(e,t){var r=c()(c()(c()(c()(c()(c()(c()(c()(c()({},w.sM_,"blue"),w.Yux,"cyan"),w.V9S,"processing"),w.pIN,"warning"),w._Pv,"orange"),w.yib,"volcano"),w.hwr,"success"),w.frw,"default"),w.xw4,"error");return(0,q.jsx)(S.Z,{color:r[t.status],children:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.status.".concat(t.status.toLowerCase())})})}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.priority"}),dataIndex:"priority",hideInSearch:!0,render:function(e,t){var r=c()(c()(c()(c()(c()(c()({},w.JTO,"default"),w.sbT,"blue"),w.GMZ,"orange"),w.Bt2,"volcano"),w._Xr,"red"),w.Lx6,"purple");return(0,q.jsx)(S.Z,{color:r[t.priority],children:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.priority.".concat(t.priority.toLowerCase())})})}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.assignee"}),dataIndex:"assignee",hideInSearch:!0,render:function(e,t,r,n){var o;return(0,q.jsx)(S.Z,{color:"blue",children:null===(o=t.assignee)||void 0===o?void 0:o.nickname})}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.reporter"}),dataIndex:"reporter",hideInSearch:!0,render:function(e,t,r,n){var o;return(0,q.jsx)(S.Z,{color:"red",children:null===(o=t.reporter)||void 0===o?void 0:o.nickname})}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.category"}),dataIndex:"categoryUid",hideInSearch:!0,render:function(t,r){var o=R.find((function(e){return e.uid===r.categoryUid}));return o?(0,q.jsx)(S.Z,{color:"green",children:n(o.name)}):(0,q.jsx)(S.Z,{color:"default",children:e.formatMessage({id:"uncategorized",defaultMessage:"Uncategorized"})})}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"createdAt"}),dataIndex:"createdAt",valueType:"dateTime",hideInSearch:!0,render:function(e,t,r,n){return O()(t.createdAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"updatedAt"}),dataIndex:"updatedAt",valueType:"dateTime",hideInSearch:!0,render:function(e,t,r,n){return O()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss")}},{title:(0,q.jsx)(Z.FormattedMessage,{id:"action"}),key:"option",dataIndex:"option",hideInSearch:!0,render:function(e,t){return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(M.ZP,{type:"link",onClick:function(){return F(t),void g(!0)},children:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.action.edit"})})})}}],W=function(){console.log("handleExportExcel"),h.yw.warning(e.formatMessage({id:"ticket.message.comingSoon"}))};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j.Z,{columns:N,actionRef:t,cardBordered:!0,columnsState:{defaultValue:{description:{show:!1},createdAt:{show:!1},reporter:{show:!1}},persistenceKey:"ticket-table-columns",persistenceType:"localStorage"},request:function(){var e=f()(d()().mark((function e(t,n,o){var l,c,u;return d()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current,l=s()(t,U),c=a()(a()({pageNumber:t.current-1,orgUid:r.uid},"all"!==(null==i?void 0:i.uid)&&{categoryUid:null==i?void 0:i.uid}),l),e.next=4,(0,v.N2)(c);case 4:return u=e.sent,console.log("queryTicketsByOrgUid response:",u,c),200===u.code||h.yw.error(u.message),e.abrupt("return",{data:u.data.content,success:!0,total:u.data.totalElements});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),editable:{type:"multiple"},rowKey:"uid",search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,onChange:function(e){console.log("page:",e)}},dateFormatter:"string",headerTitle:e.formatMessage({id:"ticket.list"}),toolBarRender:function(){return[(0,q.jsx)(M.ZP,{icon:(0,q.jsx)(C.Z,{}),type:"primary",onClick:W,children:(0,q.jsx)(Z.FormattedMessage,{id:"ticket.action.export"})},"button")]}}),(0,q.jsx)(z,{visible:p,ticket:T,onClose:function(){g(!1),F(void 0)},onSuccess:function(){var e;null===(e=t.current)||void 0===e||e.reload()}})]})},V=r(47227),H=r(93139),L=n.Z.Sider,G=n.Z.Content,A=function(){var e=(0,H.Z)(),t=e.leftSiderStyle,r=e.contentStyle;return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(n.Z,{children:[(0,q.jsx)(L,{style:t,width:250,children:(0,q.jsx)(V.Z,{type:w.hcJ})}),(0,q.jsx)(n.Z,{children:(0,q.jsx)(G,{style:r,children:(0,q.jsx)(B,{})})})]})})}},61017:function(e,t,r){r.d(t,{$:function(){return d}});var n=r(73193),o=r.n(n),a=r(76711),i=r.n(a),s=r(77667),l=r(39701),c=r(83642),u=r(41617),d=(0,l.Ue)()((0,c.mW)((0,c.tJ)((0,u.n)((function(e,t){return{workgroupResult:{data:{content:[]}},currentWorkgroup:{uid:"",nickname:"",avatar:"",description:"",orgUid:""},insertWorkgroup:function(t){e((function(e){e.workgroupResult.data.content.unshift(t)}))},updateWorkgroup:function(t){e((function(e){var r=e.workgroupResult.data.content,n=r.findIndex((function(e){return e.uid===t.uid}));-1!==n?r[n]=t:console.warn("Workgroup with uid ".concat(t.uid," not found."))}))},deleteWorkgroup:function(t){e((function(e){var r=e.workgroupResult.data.content,n=r.findIndex((function(e){return e.uid===t.uid}));-1!==n?r.splice(n,1):console.warn("Workgroup with uid ".concat(t.uid," not found."))}))},setWorkgroupResult:function(r){var n;(e({workgroupResult:r}),""===t().currentWorkgroup.uid)&&((null===(n=r.data)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.length)>0&&e({currentWorkgroup:r.data.content[0]}))},setCurrentWorkgroup:function(r){var n=t().workgroupResult.data.content,a=n.findIndex((function(e){return e.uid===r.uid}));if(-1!==a){var s=[].concat(i()(n.slice(0,a)),[r],i()(n.slice(a+1))),l=o()(o()({},t().workgroupResult),{},{data:{content:s}});e({workgroupResult:l,currentWorkgroup:r})}else console.warn("Workgroup with the specified uid not found."),e({currentWorkgroup:r})},deleteCurrentWorkgroup:function(r){var n=t().workgroupResult.data.content,a=n.findIndex((function(e){return e.uid===r}));-1!==a?e({workgroupResult:o()(o()({},t().workgroupResult),{},{data:{content:[].concat(i()(n.slice(0,a)),i()(n.slice(a+1)))}})}):console.warn("Workgroup not found in cache:",r),t().currentWorkgroup.uid===r&&e({currentWorkgroup:{uid:"",orgUid:""}})},deleteWorkgroupCache:function(){return e({},!0)}}})),{name:s.b6l})))},27487:function(e,t,r){r.d(t,{Z:function(){return C}});var n=r(44194),o=r(51865),a=r.n(o),i=r(97859),s=r(90899),l=r(37167),c=r(65759),u=r(77167);const d=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],f=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return a()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const r=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${r}`]:r&&d.includes(r)}})(e,t)),((e,t)=>{const r={};return f.forEach((n=>{r[`${e}-align-${n}`]=t.align===n})),r[`${e}-align-stretch`]=!t.align&&!!t.vertical,r})(e,t)),((e,t)=>{const r={};return p.forEach((n=>{r[`${e}-justify-${n}`]=t.justify===n})),r})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},h=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,r={};return d.forEach((e=>{r[`${t}-wrap-${e}`]={flexWrap:e}})),r},y=e=>{const{componentCls:t}=e,r={};return f.forEach((e=>{r[`${t}-align-${e}`]={alignItems:e}})),r},x=e=>{const{componentCls:t}=e,r={};return p.forEach((e=>{r[`${t}-justify-${e}`]={justifyContent:e}})),r};var k=(0,c.I$)("Flex",(e=>{const{paddingXS:t,padding:r,paddingLG:n}=e,o=(0,u.IX)(e,{flexGapSM:t,flexGap:r,flexGapLG:n});return[m(o),h(o),v(o),y(o),x(o)]}),(()=>({})),{resetStyle:!1}),b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const w=n.forwardRef(((e,t)=>{const{prefixCls:r,rootClassName:o,className:c,style:u,flex:d,gap:p,children:f,vertical:m=!1,component:h="div"}=e,v=b(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:y,direction:x,getPrefixCls:w}=n.useContext(l.E_),C=w("flex",r),[j,Z,S]=k(C),M=null!=m?m:null==y?void 0:y.vertical,P=a()(c,o,null==y?void 0:y.className,C,Z,S,g(C,e),{[`${C}-rtl`]:"rtl"===x,[`${C}-gap-${p}`]:(0,s.n)(p),[`${C}-vertical`]:M}),O=Object.assign(Object.assign({},null==y?void 0:y.style),u);return d&&(O.flex=d),p&&!(0,s.n)(p)&&(O.gap=p),j(n.createElement(h,Object.assign({ref:t,className:P,style:O},(0,i.Z)(v,["justify","wrap","align"])),f))}));var C=w},29266:function(e,t,r){r.d(t,{Z:function(){return $}});var n=r(44194),o=r(51865),a=r.n(o),i=r(97859),s=r(63125),l=r(80314),c=r(79145),u=r(18011),d=r(37167),p=r(3378),f=r(87471),g=r(88874),m=r(77167),h=r(65759);const v=e=>{const{lineWidth:t,fontSizeIcon:r,calc:n}=e,o=e.fontSizeSM;return(0,m.IX)(e,{tagFontSize:o,tagLineHeight:(0,p.bf)(n(e.lineHeightSM).mul(o).equal()),tagIconSize:n(r).sub(n(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},y=e=>({defaultBg:new f.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var x=(0,h.I$)("Tag",(e=>(e=>{const{paddingXXS:t,lineWidth:r,tagPaddingHorizontal:n,componentCls:o,calc:a}=e,i=a(n).sub(r).equal(),s=a(t).sub(r).equal();return{[o]:Object.assign(Object.assign({},(0,g.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,p.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:s,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(v(e))),y),k=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const b=n.forwardRef(((e,t)=>{const{prefixCls:r,style:o,className:i,checked:s,onChange:l,onClick:c}=e,u=k(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:f}=n.useContext(d.E_),g=p("tag",r),[m,h,v]=x(g),y=a()(g,`${g}-checkable`,{[`${g}-checkable-checked`]:s},null==f?void 0:f.className,i,h,v);return m(n.createElement("span",Object.assign({},u,{ref:t,style:Object.assign(Object.assign({},o),null==f?void 0:f.style),className:y,onClick:e=>{null==l||l(!s),null==c||c(e)}})))}));var w=b,C=r(85772);var j=(0,h.bk)(["Tag","preset"],(e=>(e=>(0,C.Z)(e,((t,r)=>{let{textColor:n,lightBorderColor:o,lightColor:a,darkColor:i}=r;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:n,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(v(e))),y);const Z=(e,t,r)=>{const n="string"!=typeof(o=r)?o:o.charAt(0).toUpperCase()+o.slice(1);var o;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${r}`],background:e[`color${n}Bg`],borderColor:e[`color${n}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var S=(0,h.bk)(["Tag","status"],(e=>{const t=v(e);return[Z(t,"success","Success"),Z(t,"processing","Info"),Z(t,"error","Error"),Z(t,"warning","Warning")]}),y),M=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const P=n.forwardRef(((e,t)=>{const{prefixCls:r,className:o,rootClassName:p,style:f,children:g,icon:m,color:h,onClose:v,bordered:y=!0,visible:k}=e,b=M(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:w,direction:C,tag:Z}=n.useContext(d.E_),[P,O]=n.useState(!0),$=(0,i.Z)(b,["closeIcon","closable"]);n.useEffect((()=>{void 0!==k&&O(k)}),[k]);const I=(0,s.o2)(h),T=(0,s.yT)(h),F=I||T,E=Object.assign(Object.assign({backgroundColor:h&&!F?h:void 0},null==Z?void 0:Z.style),f),R=w("tag",r),[N,W,q]=x(R),z=a()(R,null==Z?void 0:Z.className,{[`${R}-${h}`]:F,[`${R}-has-color`]:h&&!F,[`${R}-hidden`]:!P,[`${R}-rtl`]:"rtl"===C,[`${R}-borderless`]:!y},o,p,W,q),U=e=>{e.stopPropagation(),null==v||v(e),e.defaultPrevented||O(!1)},[,B]=(0,l.Z)((0,l.w)(e),(0,l.w)(Z),{closable:!1,closeIconRender:e=>{const t=n.createElement("span",{className:`${R}-close-icon`,onClick:U},e);return(0,c.wm)(e,t,(e=>({onClick:t=>{var r;null===(r=null==e?void 0:e.onClick)||void 0===r||r.call(e,t),U(t)},className:a()(null==e?void 0:e.className,`${R}-close-icon`)})))}}),V="function"==typeof b.onClick||g&&"a"===g.type,H=m||null,L=H?n.createElement(n.Fragment,null,H,g&&n.createElement("span",null,g)):g,G=n.createElement("span",Object.assign({},$,{ref:t,className:z,style:E}),L,B,I&&n.createElement(j,{key:"preset",prefixCls:R}),T&&n.createElement(S,{key:"status",prefixCls:R}));return N(V?n.createElement(u.Z,{component:"Tag"},G):G)})),O=P;O.CheckableTag=w;var $=O}}]);