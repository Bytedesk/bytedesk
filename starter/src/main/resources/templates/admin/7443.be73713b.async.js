"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7443],{13253:function(e,t,n){n(90819),n(73193),n(89933),n(45332),n(81153),n(43314),n(85702),n(61017),n(77667),n(82045),n(44194),n(31549)},9750:function(e,t,n){var o=n(90819),i=n.n(o),s=n(73193),u=n.n(s),l=n(89933),r=n.n(l),d=n(45332),a=n.n(d),c=n(89756),v=n(81153),g=n(43314),p=n(85702),f=n(61017),m=n(77667),h=n(5728),w=n(31806),S=n(82045),q=n(44194),T=n(31549);t.Z=function(e){var t=e.type,n=(0,S.useIntl)(),o=h.A.useForm(),s=a()(o,1)[0],l=(0,q.useState)(!1),d=a()(l,2),b=(d[0],d[1],(0,p.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}}))),F=b.currentAgent,k=b.setCurrentAgent,M=(0,f.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),y=M.currentWorkgroup,x=M.setCurrentWorkgroup;(0,q.useEffect)((function(){var e;if(t===m.Njn)s.setFieldValue("showRateBtn",null==F||null===(e=F.serviceSettings)||void 0===e?void 0:e.showRateBtn);else if(t===m.aZD){var n;s.setFieldValue("showRateBtn",null==y||null===(n=y.serviceSettings)||void 0===n?void 0:n.showRateBtn)}}),[F,y]);var C=function(){var e=r()(i()().mark((function e(o){var s,l,r,d,a,p,f,h,w,S,q,T,b,M,C,U,j,A;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleShowRateSwitchChange:",o),t!==m.Njn){e.next=11;break}return h=u()(u()({},F),{},{serviceSettings:u()(u()({},null==F?void 0:F.serviceSettings),{},{showRateBtn:o,quickFaqUids:null==F||null===(s=F.serviceSettings)||void 0===s||null===(s=s.quickFaqs)||void 0===s?void 0:s.map((function(e){return e.uid})),faqUids:null==F||null===(l=F.serviceSettings)||void 0===l||null===(l=l.faqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==F||null===(r=F.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),hotFaqUids:null==F||null===(d=F.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==F||null===(a=F.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))}),robotSettings:u()(u()({},F.robotSettings),{},{robotUid:null==F||null===(p=F.robotSettings)||void 0===p||null===(p=p.robot)||void 0===p?void 0:p.uid}),leaveMsgSettings:u()(u()({},F.leaveMsgSettings),{},{worktimeUids:null==F||null===(f=F.leaveMsgSettings)||void 0===f||null===(f=f.worktimes)||void 0===f?void 0:f.map((function(e){return e.uid}))}),autoReplySettings:u()({},F.autoReplySettings)}),console.log("agentObject:",h),e.next=6,(0,v.sE)(h);case 6:w=e.sent,console.log("updateAgent response:",w),200===w.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),k(w.data)):(c.yw.destroy(),c.yw.error(w.message)),e.next=19;break;case 11:if(t!==m.aZD){e.next=19;break}return j=u()(u()({},y),{},{serviceSettings:u()(u()({},y.serviceSettings),{},{showRateBtn:o,quickFaqUids:null===(S=y.serviceSettings)||void 0===S||null===(S=S.quickFaqs)||void 0===S?void 0:S.map((function(e){return e.uid})),faqUids:null==y||null===(q=y.serviceSettings)||void 0===q||null===(q=q.faqs)||void 0===q?void 0:q.map((function(e){return e.uid})),guessFaqUids:null==y||null===(T=y.serviceSettings)||void 0===T||null===(T=T.guessFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),hotFaqUids:null===(b=y.serviceSettings)||void 0===b||null===(b=b.hotFaqs)||void 0===b?void 0:b.map((function(e){return e.uid})),shortcutFaqUids:null==y||null===(M=y.serviceSettings)||void 0===M||null===(M=M.shortcutFaqs)||void 0===M?void 0:M.map((function(e){return e.uid}))}),robotSettings:u()(u()({},y.robotSettings),{},{robotUid:null==y||null===(C=y.robotSettings)||void 0===C||null===(C=C.robot)||void 0===C?void 0:C.uid}),leaveMsgSettings:u()(u()({},y.leaveMsgSettings),{},{worktimeUids:null==y||null===(U=y.leaveMsgSettings)||void 0===U||null===(U=U.worktimes)||void 0===U?void 0:U.map((function(e){return e.uid}))}),agentUids:y.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",j),e.next=16,(0,g.W5)(j);case 16:A=e.sent,console.log("updateWorkGroup response:",A),200===A.code?(c.yw.destroy(),c.yw.success(n.formatMessage({id:"update.success"})),x(A.data)):(c.yw.destroy(),c.yw.error(A.message));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(h.A,{form:s,submitter:{render:!1},children:[(0,T.jsx)(w.Z,{width:"md",name:"showRateBtn",label:"访客端是否显示评价按钮",fieldProps:{onChange:C}}),!1]})})}},3321:function(e,t,n){var o=n(90819),i=n.n(o),s=n(73193),u=n.n(s),l=n(89933),r=n.n(l),d=n(45332),a=n.n(d),c=n(89756),v=n(81153),g=n(63833),p=n(43314),f=n(1780),m=n(85702),h=n(3245),w=n(61017),S=n(77667),q=n(5728),T=n(2724),b=n(11607),F=n(80067),k=n(82045),M=n(44194),y=n(60029),x=n(74828),C=n(31549);t.Z=function(e){var t=e.type,n=q.A.useForm(),o=a()(n,1)[0],s=(0,k.useIntl)(),l=(0,f.Z)().translateString,d=(0,M.useState)(!1),U=a()(d,2),j=U[0],A=U[1],R=(0,h.V)((function(e){return{currentRobot:e.currentRobot,setCurrentRobot:e.setCurrentRobot}})),W=R.currentRobot,Z=R.setCurrentRobot,L=(0,m.E)((function(e){return{currentAgent:e.currentAgent,setCurrentAgent:e.setCurrentAgent}})),V=L.currentAgent,B=L.setCurrentAgent,D=(0,w.$)((function(e){return{currentWorkgroup:e.currentWorkgroup,setCurrentWorkgroup:e.setCurrentWorkgroup}})),E=D.currentWorkgroup,N=D.setCurrentWorkgroup,O=(0,M.useState)(""),X=a()(O,2),_=X[0],I=X[1],P=function(e){I(l(null==e?void 0:e.welcomeTip)),o.setFieldValue("topTip",l(null==e?void 0:e.topTip)),o.setFieldValue("showTopTip",null==e?void 0:e.showTopTip),o.setFieldValue("autoCloseMin",null==e?void 0:e.autoCloseMin),o.setFieldValue("showLogo",null==e?void 0:e.showLogo)};(0,M.useEffect)((function(){if(t===S._X4)P(null==W?void 0:W.serviceSettings);else if(t===S.Njn){var e,n;P(null==V?void 0:V.serviceSettings),A(null==V||null===(e=V.serviceSettings)||void 0===e?void 0:e.showTopTip),o.setFieldValue("maxThreadCount",null==V?void 0:V.maxThreadCount),o.setFieldValue("leaveMsgTip",l(null==V||null===(n=V.leaveMsgSettings)||void 0===n?void 0:n.leaveMsgTip))}else if(t===S.aZD){var i;P(null==E?void 0:E.serviceSettings),o.setFieldValue("leaveMsgTip",l(null==E||null===(i=E.leaveMsgSettings)||void 0===i?void 0:i.leaveMsgTip))}}),[W,V,E]);var $=function(){var e=r()(i()().mark((function e(n){var o,l,r,d,a,f,m,h,w,q,T,b,F,k,M,y,x,C,U,A,R,L,D,O,X;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onFinish:",n," showTopTip:",j),c.yw.loading(s.formatMessage({id:"updating"})),t!==S._X4){e.next=12;break}return f=u()(u()({},W),{},{serviceSettings:u()(u()({},W.serviceSettings),{},{topTip:(null==n?void 0:n.topTip)||"",showTopTip:j,welcomeTip:_,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(o=V.serviceSettings)||void 0===o||null===(o=o.quickFaqs)||void 0===o?void 0:o.map((function(e){return e.uid})),faqUids:null==W||null===(l=W.serviceSettings)||void 0===l||null===(l=l.faqs)||void 0===l?void 0:l.map((function(e){return e.uid})),guessFaqUids:null==W||null===(r=W.serviceSettings)||void 0===r||null===(r=r.guessFaqs)||void 0===r?void 0:r.map((function(e){return e.uid})),hotFaqUids:null==W||null===(d=W.serviceSettings)||void 0===d||null===(d=d.hotFaqs)||void 0===d?void 0:d.map((function(e){return e.uid})),shortcutFaqUids:null==W||null===(a=W.serviceSettings)||void 0===a||null===(a=a.shortcutFaqs)||void 0===a?void 0:a.map((function(e){return e.uid}))})}),console.log("robotObject:",f),e.next=7,(0,g.$l)(f);case 7:m=e.sent,console.log("updateRobot response:",m),200===m.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),Z(m.data)):(c.yw.destroy(),c.yw.error(m.message)),e.next=30;break;case 12:if(t!==S.Njn){e.next=22;break}return M=u()(u()({},V),{},{serviceSettings:u()(u()({},V.serviceSettings),{},{topTip:(null==n?void 0:n.topTip)||"",showTopTip:j,welcomeTip:_,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(h=V.serviceSettings)||void 0===h||null===(h=h.quickFaqs)||void 0===h?void 0:h.map((function(e){return e.uid})),faqUids:null===(w=V.serviceSettings)||void 0===w||null===(w=w.faqs)||void 0===w?void 0:w.map((function(e){return e.uid})),guessFaqUids:null==V||null===(q=V.serviceSettings)||void 0===q||null===(q=q.guessFaqs)||void 0===q?void 0:q.map((function(e){return e.uid})),hotFaqUids:null==V||null===(T=V.serviceSettings)||void 0===T||null===(T=T.hotFaqs)||void 0===T?void 0:T.map((function(e){return e.uid})),shortcutFaqUids:null==V||null===(b=V.serviceSettings)||void 0===b||null===(b=b.shortcutFaqs)||void 0===b?void 0:b.map((function(e){return e.uid}))}),leaveMsgSettings:u()(u()({},V.leaveMsgSettings),{},{leaveMsgTip:(null==n?void 0:n.leaveMsgTip)||"",worktimeUids:null===(F=V.leaveMsgSettings)||void 0===F||null===(F=F.worktimes)||void 0===F?void 0:F.map((function(e){return e.uid}))}),robotSettings:u()(u()({},V.robotSettings),{},{robotUid:null===(k=V.robotSettings)||void 0===k||null===(k=k.robot)||void 0===k?void 0:k.uid}),autoReplySettings:u()({},V.autoReplySettings),maxThreadCount:(null==n?void 0:n.maxThreadCount)||10}),console.log("agentObject:",M),e.next=17,(0,v.sE)(M);case 17:y=e.sent,console.log("updateAgent response:",y),200===y.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),B(y.data)):(c.yw.destroy(),c.yw.error(y.message)),e.next=30;break;case 22:if(t!==S.aZD){e.next=30;break}return O=u()(u()({},E),{},{serviceSettings:u()(u()({},E.serviceSettings),{},{topTip:(null==n?void 0:n.topTip)||"",showTopTip:j,welcomeTip:_,autoCloseMin:(null==n?void 0:n.autoCloseMin)||25,showLogo:(null==n?void 0:n.showLogo)||!0,quickFaqUids:null===(x=E.serviceSettings)||void 0===x||null===(x=x.quickFaqs)||void 0===x?void 0:x.map((function(e){return e.uid})),faqUids:null===(C=E.serviceSettings)||void 0===C||null===(C=C.faqs)||void 0===C?void 0:C.map((function(e){return e.uid})),guessFaqUids:null==E||null===(U=E.serviceSettings)||void 0===U||null===(U=U.guessFaqs)||void 0===U?void 0:U.map((function(e){return e.uid})),hotFaqUids:null==E||null===(A=E.serviceSettings)||void 0===A||null===(A=A.hotFaqs)||void 0===A?void 0:A.map((function(e){return e.uid})),shortcutFaqUids:null==E||null===(R=E.serviceSettings)||void 0===R||null===(R=R.shortcutFaqs)||void 0===R?void 0:R.map((function(e){return e.uid}))}),leaveMsgSettings:u()(u()({},V.leaveMsgSettings),{},{leaveMsgTip:(null==n?void 0:n.leaveMsgTip)||"",worktimeUids:null===(L=V.leaveMsgSettings)||void 0===L||null===(L=L.worktimes)||void 0===L?void 0:L.map((function(e){return e.uid}))}),robotSettings:u()(u()({},V.robotSettings),{},{robotUid:null===(D=V.robotSettings)||void 0===D||null===(D=D.robot)||void 0===D?void 0:D.uid}),agentUids:E.agents.map((function(e){return e.uid}))}),console.log("workgroupObject:",O),e.next=27,(0,p.W5)(O);case 27:X=e.sent,console.log("updateWorkGroup response:",X),200===X.code?(c.yw.destroy(),c.yw.success(s.formatMessage({id:"update.success"})),N(X.data)):(c.yw.destroy(),c.yw.error(X.message));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)(q.A,{form:o,onFinish:$,style:{marginLeft:"100px"},children:[(0,C.jsx)(T.Z,{name:"showTopTip",width:"md",label:"显示置顶语/公告",fieldProps:{onChange:function(e){var n,i;if(console.log("checked = ".concat(e.target.checked,", showTopTip:").concat(null==V||null===(n=V.serviceSettings)||void 0===n?void 0:n.showTopTip)),A(e.target.checked),e.target.checked)if(t===S._X4)o.setFieldValue("topTip",l(null==W||null===(i=W.serviceSettings)||void 0===i?void 0:i.topTip));else if(t===S.Njn){var s;o.setFieldValue("topTip",l(null==V||null===(s=V.serviceSettings)||void 0===s?void 0:s.topTip))}else if(t===S.aZD){var u;o.setFieldValue("topTip",l(null==E||null===(u=E.serviceSettings)||void 0===u?void 0:u.topTip))}}}}),j&&(0,C.jsx)(b.Z,{width:"md",name:"topTip",label:"置顶语"}),(0,C.jsx)(q.A.Item,{name:"welcomeTip",label:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),tooltip:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"}),rules:[{required:!0,message:s.formatMessage({id:"pages.robot.tab.welcomeTip",defaultMessage:"welcomeTip"})}],children:(0,C.jsx)(y.Z,{placeholder:"welcomeTip content..",value:_,toolbarKeys:(0,x.eD)(),style:{height:"200px",width:"600px"},onChange:function(e,t){I(e)}})}),t!=S._X4&&(0,C.jsx)(b.Z,{width:"md",name:"leaveMsgTip",label:"离线留言提示"}),(0,C.jsx)(F.Z,{width:"md",name:"autoCloseMin",label:"无新消息会话自动关闭时长(单位：分钟)",min:1}),t===S.Njn&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("p",{children:"1. 同时最大接待数量，超出数量默认进入排队队列"}),(0,C.jsx)("p",{children:"2. 0为所有访客默认进入排队队列，需要客服手动接入"}),(0,C.jsx)("p",{children:"3. 当接待数量小于最大接待数量时，会话自动接入，优先接入排队队列中会话"}),(0,C.jsx)(F.Z,{width:"md",name:"maxThreadCount",label:"同时最大接待数量",min:0})]}),(0,C.jsx)(T.Z,{name:"showLogo",width:"md",label:"显示Logo",tooltip:"只有付费会员可以去掉Logo",fieldProps:{onChange:function(e){console.log("onShowLogoChange = ".concat(e.target.checked))}},disabled:!0})]})}}}]);