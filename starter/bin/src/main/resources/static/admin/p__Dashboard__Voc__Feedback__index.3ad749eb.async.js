"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1824],{15722:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=n.forwardRef(i)},11090:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=n.forwardRef(i)},2484:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=n.forwardRef(i)},82669:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=n.forwardRef(i)},59908:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(83910),n=a(44194),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},o=a(54183),i=function(e,t){return n.createElement(o.Z,(0,r.Z)({},e,{ref:t,icon:s}))};var l=n.forwardRef(i)},68263:function(e,t,a){var r=a(94433),n=a(38956),s=a(37150),o=a(44194),i=a(85618),l=a(35865),d=a(31549),c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],f=function(e,t){var a=e.fieldProps,u=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,h=e.request,v=e.showSearch,A=e.options,x=(0,n.Z)(e,c),M=(0,o.useContext)(i.Z);return(0,d.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:h,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:A,mode:g,showSearch:v,getPopupContainer:M.getPopupContainer},a),ref:t,proFieldProps:p},x),{},{children:u}))},p=o.forwardRef((function(e,t){var a=e.fieldProps,c=e.children,f=e.params,p=e.proFieldProps,g=e.mode,m=e.valueEnum,h=e.request,v=e.options,A=(0,n.Z)(e,u),x=(0,r.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},a),M=(0,o.useContext)(i.Z);return(0,d.jsx)(l.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,s.h)(m),request:h,params:f,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:M.getPopupContainer},x),ref:t,proFieldProps:p},A),{},{children:c}))})),g=o.forwardRef(f);g.SearchSelect=p,g.displayName="ProFormComponent",t.Z=g},86684:function(e,t,a){var r=a(32906),n=a(94433),s=a(38956),o=a(81424),i=a(58867),l=a(31543),d=a(34573),c=a(44194),u=a(35865),f=a(31549),p=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],m="text",h=function(e){var t=(0,o.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),a=(0,r.Z)(t,2),s=a[0],d=a[1];return(0,f.jsx)(i.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var a,r=t.getFieldValue(e.name||[]);return(0,f.jsx)(l.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(e){return e&&e.parentNode?e.parentNode:e},onOpenChange:function(e){return d(e)},content:(0,f.jsxs)("div",{style:{padding:"4px 0"},children:[null===(a=e.statusRender)||void 0===a?void 0:a.call(e,r),e.strengthText?(0,f.jsx)("div",{style:{marginTop:10},children:(0,f.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:s,children:e.children}))}})},v=function(e){var t=e.fieldProps,a=e.proFieldProps,r=(0,s.Z)(e,p);return(0,f.jsx)(u.Z,(0,n.Z)({valueType:m,fieldProps:t,filedConfig:{valueType:m},proFieldProps:a},r))};v.Password=function(e){var t=e.fieldProps,a=e.proFieldProps,o=(0,s.Z)(e,g),i=(0,c.useState)(!1),l=(0,r.Z)(i,2),p=l[0],v=l[1];return null!=t&&t.statusRender&&o.name?(0,f.jsx)(h,{name:o.name,statusRender:null==t?void 0:t.statusRender,popoverProps:null==t?void 0:t.popoverProps,strengthText:null==t?void 0:t.strengthText,open:p,onOpenChange:v,children:(0,f.jsx)("div",{children:(0,f.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,d.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(e){var a;null==t||null===(a=t.onBlur)||void 0===a||a.call(t,e),v(!1)},onClick:function(e){var a;null==t||null===(a=t.onClick)||void 0===a||a.call(t,e),v(!0)}}),proFieldProps:a,filedConfig:{valueType:m}},o))})}):(0,f.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:t,proFieldProps:a,filedConfig:{valueType:m}},o))},v.displayName="ProFormComponent",t.Z=v},13847:function(e,t,a){var r=a(94433),n=a(38956),s=a(44194),o=a(35865),i=a(31549),l=["fieldProps","proFieldProps"],d=function(e,t){var a=e.fieldProps,s=e.proFieldProps,d=(0,n.Z)(e,l);return(0,i.jsx)(o.Z,(0,r.Z)({ref:t,valueType:"textarea",fieldProps:a,proFieldProps:s},d))};t.Z=s.forwardRef(d)},88:function(e,t,a){a.r(t),a.d(t,{default:function(){return de}});var r=a(85255),n=a(88449),s=a(6844),o=a(86567),i=a(84176),l=a.n(i),d=a(73193),c=a.n(d),u=a(90819),f=a.n(u),p=a(89933),g=a.n(p),m=a(45332),h=a.n(m),v=a(44194),A=a(46141),x=a(34759),M=a(66810),w=a(1691),y=a(3925),b=a(71277),k=a(93527),j=a(19736);function Z(e){return S.apply(this,arguments)}function S(){return(S=g()(f()().mark((function e(t){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/feedback/query/org",{method:"GET",params:c()({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return C.apply(this,arguments)}function C(){return(C=g()(f()().mark((function e(t){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/feedback/create",{method:"POST",data:c()(c()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return B.apply(this,arguments)}function B(){return(B=g()(f()().mark((function e(t){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/feedback/update",{method:"POST",data:c()(c()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return T.apply(this,arguments)}function T(){return(T=g()(f()().mark((function e(t){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/feedback/delete",{method:"POST",data:c()(c()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return F.apply(this,arguments)}function F(){return(F=g()(f()().mark((function e(t){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,j.request)("/api/v1/feedback/delete/all",{method:"POST",data:c()(c()({},t),{},{channel:s.XtJ})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=a(14888),Q=a(47598),O=a(76711),q=a.n(O),R=a(30064),G=a(86684),z=a(13847),L=a(5089),Y=a(61689),H=a(9428),N=a(87373),V=a(59908),J=a(31549),$=L.Z.Text,K=function(e){var t=e.isEdit,a=e.isViewMode,r=void 0!==a&&a,n=e.feedback,s=e.open,o=(e.level,e.onClose),i=e.onSubmit,l=R.A.useForm(),d=h()(l,1)[0],u=(0,j.useIntl)(),f=(0,U.u)((function(e){return e.currentOrg})),p=(0,v.useState)([]),g=h()(p,2),m=g[0],A=g[1];(0,v.useEffect)((function(){t&&n&&d?(d.setFieldsValue({uid:null==n?void 0:n.uid,title:null==n?void 0:n.title,content:null==n?void 0:n.content,imageUrl:null==n?void 0:n.imageUrl}),null!=n&&n.imageUrl?A([{uid:"-1",name:"feedback-image.jpg",status:"done",url:n.imageUrl}]):A([])):(console.log("form resetFields"),d.resetFields(),A([]))}),[n,d,t]);var M=function(){console.log("handleSubmit"),d.validateFields().then((function(e){var a;console.log("Form values:",e);var r,s="";m.length>0&&null!==(a=m[0].response)&&void 0!==a&&null!==(a=a.data)&&void 0!==a&&a.url?s=null===(r=m[0].response)||void 0===r?void 0:r.data.url:m.length>0&&m[0].url&&(s=m[0].url);var o={uid:t?null==n?void 0:n.uid:"",title:e.title,content:e.content,imageUrl:s,categoryUids:[],orgUid:null==f?void 0:f.uid};console.log("feedbackObject:",o),i(o)})).catch((function(e){console.log("Form errors:",e)}))},w={name:"file",action:"/api/v1/upload/image",headers:{authorization:"Bearer "+localStorage.getItem("access_token")},fileList:m,onChange:function(e){var t=q()(e.fileList);t=(t=t.slice(-1)).map((function(e){var t;e.response&&(e.url=null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.url);return e})),A(t)},maxCount:1,accept:"image/*"},b=r?u.formatMessage({id:"pages.feedback.drawer.view",defaultMessage:"查看反馈"}):t?u.formatMessage({id:"pages.feedback.drawer.edit",defaultMessage:"编辑反馈"}):u.formatMessage({id:"pages.feedback.drawer.create",defaultMessage:"新建反馈"});return(0,J.jsx)("div",{children:(0,J.jsx)(Y.Z,{title:b,width:650,onClose:o,open:s,extra:r?null:(0,J.jsxs)(H.Z,{children:[(0,J.jsx)(y.ZP,{onClick:o,children:u.formatMessage({id:"pages.feedback.drawer.cancel",defaultMessage:"取消"})}),(0,J.jsx)(y.ZP,{onClick:M,type:"primary",children:u.formatMessage({id:"pages.feedback.drawer.save",defaultMessage:"保存"})})]}),children:(0,J.jsxs)(R.A,{form:d,name:"feedback",submitter:!t&&!r&&{searchConfig:{resetText:u.formatMessage({id:"pages.feedback.drawer.cancel",defaultMessage:"取消"}),submitText:u.formatMessage({id:"pages.feedback.drawer.save",defaultMessage:"保存"})},onReset:o},onFinish:t||r?void 0:M,children:[(0,J.jsx)(G.Z,{label:u.formatMessage({id:"pages.feedback.drawer.title",defaultMessage:"标题"}),name:"title",required:!0,readonly:r,tooltip:u.formatMessage({id:"pages.feedback.drawer.title.tooltip",defaultMessage:"反馈标题"}),fieldProps:{placeholder:u.formatMessage({id:"pages.feedback.drawer.title.placeholder",defaultMessage:"请输入反馈标题"})}}),(0,J.jsx)(z.Z,{label:u.formatMessage({id:"pages.feedback.drawer.content",defaultMessage:"内容"}),name:"content",required:!0,readonly:r,fieldProps:{placeholder:u.formatMessage({id:"pages.feedback.drawer.content.placeholder",defaultMessage:"请输入反馈内容"}),rows:6},tooltip:u.formatMessage({id:"pages.feedback.drawer.content.tooltip",defaultMessage:"详细描述您的意见或建议"})}),(0,J.jsx)(R.A.Item,{label:u.formatMessage({id:"pages.feedback.drawer.image",defaultMessage:"图片"}),name:"imageUrl",tooltip:u.formatMessage({id:"pages.feedback.drawer.image.tooltip",defaultMessage:"可上传相关截图或图片"}),children:r?(0,J.jsx)("div",{children:null!=n&&n.imageUrl?(0,J.jsx)(x.Z,{width:200,src:n.imageUrl,placeholder:"加载中...",fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN..."}):(0,J.jsx)($,{type:"secondary",children:u.formatMessage({id:"pages.feedback.drawer.image.none",defaultMessage:"无图片"})})}):(0,J.jsx)(N.Z,c()(c()({},w),{},{children:(0,J.jsx)(y.ZP,{icon:(0,J.jsx)(V.Z,{}),children:u.formatMessage({id:"pages.feedback.drawer.image.upload",defaultMessage:"点击上传"})})}))})]})})})},X=a(15722),W=a(90297),_=a(10162),ee=a(11090),te=a(2484),ae=a(54881),re=a(86307),ne=a(96596),se=a.n(ne),oe=a(65819),ie=["current","pageSize","title","content"],le=function(e){var t=e.level,a=(0,v.useRef)(),r=(0,j.useIntl)(),n=(0,v.useState)(!0),o=h()(n,2),i=o[0],d=o[1],u=(0,v.useState)(1),p=h()(u,2),m=p[0],S=p[1],C=(0,v.useState)(10),B=h()(C,2),T=B[0],F=B[1],O=(0,v.useState)(!1),q=h()(O,2),R=q[0],G=q[1],z=(0,v.useState)({}),L=h()(z,2),Y=L[0],H=L[1],N=(0,U.u)((function(e){return e.currentOrg})),V=(0,Q.v)((function(e){return e.currentCategory})),$=A.Z.useModal(),ne=h()($,2),le=ne[0],de=ne[1],ce=(0,v.useState)(0),ue=h()(ce,2),fe=ue[0],pe=ue[1],ge=(0,v.useState)({}),me=h()(ge,2),he=me[0],ve=me[1],Ae=function(){le.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,J.jsx)(X.Z,{}),content:r.formatMessage({id:"deleteAllAffirm",defaultMessage:"Delete all feedback?"}),onOk:function(){Me()},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})})},xe=function(){var e=g()(f()().mark((function e(t){var n,s;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(r.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,D({uid:t.uid});case 3:200===(n=e.sent).code?(k.yw.destroy(),k.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),null===(s=a.current)||void 0===s||s.reload()):(k.yw.destroy(),k.yw.error(n.message));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=g()(f()().mark((function e(){var t,n;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(r.formatMessage({id:"deleting",defaultMessage:"Deleting"})),e.next=3,I({orgUid:null==N?void 0:N.uid});case 3:200===(t=e.sent).code?(k.yw.destroy(),k.yw.success(r.formatMessage({id:"delete.success",defaultMessage:"Delete success"})),null===(n=a.current)||void 0===n||n.reload()):(k.yw.destroy(),k.yw.error(t.message));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=g()(f()().mark((function e(t){var n,s,o,l;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}return k.yw.loading(r.formatMessage({id:"updating",defaultMessage:"Updating"})),e.next=4,E(t);case 4:200===(n=e.sent).code?(k.yw.success(r.formatMessage({id:"update.success",defaultMessage:"update success"})),null===(s=a.current)||void 0===s||s.reload(),G(!1)):k.yw.error(n.message),e.next=13;break;case 8:return k.yw.loading(r.formatMessage({id:"creating",defaultMessage:"Creating"})),e.next=11,P(t);case 11:200===(o=e.sent).code?(k.yw.success(r.formatMessage({id:"create.success",defaultMessage:"create success"})),null===(l=a.current)||void 0===l||l.reload(),G(!1)):k.yw.error(o.message);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=(0,v.useState)(!1),be=h()(ye,2),ke=be[0],je=be[1];(0,v.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.reload()}),[V]);var Ze=function(){var e=g()(f()().mark((function e(a,r,n){var o,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("handleExportExcel",a,r,n),o=localStorage.getItem(s.LA8),i=c()({orgUid:t===s.Hxq?"":null==N?void 0:N.uid,categoryUids:(null==V?void 0:V.uid)===s.zBg?"":null==V?void 0:V.uid,accessToken:o||"",exportType:a},he),"current"===a?(i.pageNumber=String(m-1),i.pageSize=String(T)):"all"===a?(i.pageNumber="0",i.pageSize="1000"):"range"===a&&void 0!==r&&void 0!==n&&(i.pageNumber=String(r),i.pageSize=String(n)),window.open((0,oe.kG)()+"/api/v1/feedback/export?"+new URLSearchParams(i).toString());case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),Se=function(e){for(var t=[],a=1e3,r=Math.ceil(e/a),n=function(){var r=s,n=s*a+1,o=Math.min((s+1)*a,e);t.push({key:"export-".concat(s),label:"".concat(n,"-").concat(o," (").concat(o-n+1,"条)"),onClick:function(){return Ze("range",r,a)}})},s=0;s<r;s++)n();return t},Pe=[{dataIndex:"index",valueType:"indexBorder",width:48,fixed:"left"},{title:r.formatMessage({id:"pages.feedback.title",defaultMessage:"标题"}),dataIndex:"title",hideInSearch:!1,fixed:"left",width:200,copyable:!0,ellipsis:!0,tooltip:r.formatMessage({id:"pages.feedback.title.tooltip",defaultMessage:"反馈标题"}),render:function(e,t){return t.title||"-"}},{title:r.formatMessage({id:"pages.feedback.content",defaultMessage:"内容"}),dataIndex:"content",ellipsis:!0,hideInSearch:!1,copyable:!0,width:300,tooltip:r.formatMessage({id:"pages.feedback.content.tooltip",defaultMessage:"反馈内容"}),render:function(e,t){return t.content||"-"}},{title:r.formatMessage({id:"pages.feedback.image",defaultMessage:"图片"}),dataIndex:"imageUrl",width:100,hideInSearch:!0,tooltip:r.formatMessage({id:"pages.feedback.image.tooltip",defaultMessage:"反馈图片"}),render:function(e,t){return t.imageUrl?(0,J.jsx)(x.Z,{width:60,height:60,src:t.imageUrl,placeholder:"加载中...",fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RnG4W+FgYxN..."}):"-"}},{title:r.formatMessage({id:"pages.feedback.categories",defaultMessage:"类别"}),dataIndex:"categoryUids",width:150,hideInSearch:!0,tooltip:r.formatMessage({id:"pages.feedback.categories.tooltip",defaultMessage:"反馈类别"}),render:function(e,t){return t.categoryUids&&t.categoryUids.length>0?(0,J.jsx)("div",{children:t.categoryUids.map((function(e,t){return(0,J.jsx)(M.Z,{color:"blue",children:e},t)}))}):"-"}},{title:r.formatMessage({id:"pages.feedback.createdAt",defaultMessage:"创建时间"}),dataIndex:"createdAt",valueType:"dateTime",sorter:!0,width:160,hideInSearch:!0,tooltip:r.formatMessage({id:"pages.feedback.createdAt.tooltip",defaultMessage:"反馈创建时间"}),render:function(e,t){return t.createdAt?se()(t.createdAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:r.formatMessage({id:"pages.feedback.updatedAt",defaultMessage:"更新时间"}),dataIndex:"updatedAt",valueType:"dateTime",sorter:!0,hideInSearch:!0,width:160,tooltip:r.formatMessage({id:"pages.feedback.updatedAt.tooltip",defaultMessage:"反馈最后更新时间"}),render:function(e,t){return t.updatedAt?se()(t.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:r.formatMessage({id:"actions",defaultMessage:"操作"}),dataIndex:"option",valueType:"option",width:120,fixed:"right",tooltip:r.formatMessage({id:"pages.feedback.actions.tooltip",defaultMessage:"可进行的操作"}),render:function(e,t){return[(0,J.jsx)(w.Z,{title:r.formatMessage({id:"pages.feedback.view",defaultMessage:"查看"}),children:(0,J.jsx)("a",{onClick:function(){return function(e){d(!0),je(!0),H(e),G(!0)}(t)},children:(0,J.jsx)(W.Z,{})})},"view"),(0,J.jsx)("a",{onClick:function(){return function(e){d(!0),je(!1),H(e),G(!0)}(t)},children:r.formatMessage({id:"pages.feedback.edit",defaultMessage:"Edit"})},"edit"),(0,J.jsx)("a",{onClick:function(){return e=t,void le.confirm({title:r.formatMessage({id:"deleteTip"}),icon:(0,J.jsx)(X.Z,{}),content:"".concat(r.formatMessage({id:"deleteAffirm",defaultMessage:"Delete"}),"【").concat(e.title,"】？"),onOk:function(){xe(e)},okText:r.formatMessage({id:"ok"}),cancelText:r.formatMessage({id:"cancel"})});var e},children:r.formatMessage({id:"pages.feedback.delete",defaultMessage:"Delete"})},"delete")]}}],Ce=function(){var e=g()(f()().mark((function e(a,n,o){var i,d,u,p,g,m,h,v,A,x;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.yw.loading(r.formatMessage({id:"loading",defaultMessage:"Loading"})),i=a.current,d=a.pageSize,u=a.title,p=a.content,g=l()(a,ie),S(i),F(d),ve(c()(c()({},g),{},{title:u,content:p})),m=void 0,h=void 0,n&&Object.keys(n).length>0&&(v=Object.keys(n)[0],m=v,h="ascend"===n[v]?"ascend":"descend"),A=c()({pageNumber:i-1,pageSize:d,orgUid:t===s.Hxq?"":null==N?void 0:N.uid,categoryUids:(null==V?void 0:V.uid)===s.zBg?[]:[(null==V?void 0:V.uid)||""],title:u,content:p,sortBy:m,sortDirection:h},g),e.next=11,Z(A);case 11:if(x=e.sent,console.log("queryFeedbacksByOrg response:",x,A),200!==x.code){e.next=19;break}return k.yw.destroy(),pe(null==x?void 0:x.data.totalElements),e.abrupt("return",{data:null==x?void 0:x.data.content,success:!0,total:null==x?void 0:x.data.totalElements});case 19:return k.yw.destroy(),k.yw.error(x.message),e.abrupt("return",{data:[],success:!1,total:0});case 22:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(re.Z,{columns:Pe,actionRef:a,cardBordered:!0,rowKey:"uid",scroll:{x:1e3},search:{labelWidth:"auto"},pagination:{showQuickJumper:!0,pageSize:10,onChange:function(e,t){S(e),F(t)}},dateFormatter:"string",headerTitle:r.formatMessage({id:"pages.feedback.list",defaultMessage:"意见反馈列表"}),toolBarRender:function(){var e=[(0,J.jsx)(y.ZP,{type:"primary",onClick:function(){d(!1),je(!1),H({}),G(!0)},icon:(0,J.jsx)(_.Z,{}),children:r.formatMessage({id:"pages.feedback.create",defaultMessage:"添加反馈"})},"create")],t=[{key:"export-current",icon:(0,J.jsx)(ee.Z,{}),label:r.formatMessage({id:"export.current",defaultMessage:"导出当前页"}),onClick:function(){return Ze("current")}}];return fe>0&&(fe<=1e3?t.push({key:"export-all",icon:(0,J.jsx)(ee.Z,{}),label:r.formatMessage({id:"export.all",defaultMessage:"导出全部"})+" (".concat(fe,"条)"),onClick:function(){return Ze("all")}}):t.push({key:"export-range",icon:(0,J.jsx)(ee.Z,{}),label:r.formatMessage({id:"export.range",defaultMessage:"分段导出"})+" (".concat(fe,"条)"),children:Se(fe)})),e.push((0,J.jsx)(b.Z,{menu:{items:t},placement:"bottom",children:(0,J.jsxs)(y.ZP,{type:"primary",icon:(0,J.jsx)(ee.Z,{}),children:[r.formatMessage({id:"export",defaultMessage:"导出"}),(0,J.jsx)(te.Z,{})]})},"export")),e.push((0,J.jsx)(y.ZP,{danger:!0,onClick:Ae,icon:(0,J.jsx)(ae.Z,{}),children:r.formatMessage({id:"pages.feedback.deleteAll",defaultMessage:"删除全部"})},"deleteAll")),e},request:Ce}),R&&(0,J.jsx)(K,{isEdit:i,isViewMode:ke,feedback:Y,level:t,open:R,onClose:function(){G(!1),je(!1)},onSubmit:we}),de]})},de=function(){var e=(0,n.Z)(),t=e.leftSiderStyle,a=(e.leftSiderWidth,e.contentStyle);return(0,J.jsxs)(r.Z,{style:{height:"100%"},children:[(0,J.jsx)(r.Z.Panel,{defaultSize:"20%",min:"10%",max:"40%",style:t,children:(0,J.jsx)(o.Z,{type:s.ohE,level:s.whQ,showKbase:!1})}),(0,J.jsx)(r.Z.Panel,{style:a,children:(0,J.jsx)(le,{level:s.whQ})})]})}},70984:function(e,t,a){a.d(t,{Z:function(){return b}});var r=a(44194),n=a(51865),s=a.n(n),o=a(34573),i=a(82640),l=a(76175),d=a(74083),c=a(77167);const u=["wrap","nowrap","wrap-reverse"],f=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],p=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var g=function(e,t){return s()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const a=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${a}`]:a&&u.includes(a)}})(e,t)),((e,t)=>{const a={};return p.forEach((r=>{a[`${e}-align-${r}`]=t.align===r})),a[`${e}-align-stretch`]=!t.align&&!!t.vertical,a})(e,t)),((e,t)=>{const a={};return f.forEach((r=>{a[`${e}-justify-${r}`]=t.justify===r})),a})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},h=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,a={};return u.forEach((e=>{a[`${t}-wrap-${e}`]={flexWrap:e}})),a},A=e=>{const{componentCls:t}=e,a={};return p.forEach((e=>{a[`${t}-align-${e}`]={alignItems:e}})),a},x=e=>{const{componentCls:t}=e,a={};return f.forEach((e=>{a[`${t}-justify-${e}`]={justifyContent:e}})),a};var M=(0,d.I$)("Flex",(e=>{const{paddingXS:t,padding:a,paddingLG:r}=e,n=(0,c.IX)(e,{flexGapSM:t,flexGap:a,flexGapLG:r});return[m(n),h(n),v(n),A(n),x(n)]}),(()=>({})),{resetStyle:!1}),w=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};const y=r.forwardRef(((e,t)=>{const{prefixCls:a,rootClassName:n,className:d,style:c,flex:u,gap:f,vertical:p=!1,component:m="div",children:h}=e,v=w(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component","children"]),{flex:A,direction:x,getPrefixCls:y}=r.useContext(l.E_),b=y("flex",a),[k,j,Z]=M(b),S=null!=p?p:null==A?void 0:A.vertical,P=s()(d,n,null==A?void 0:A.className,b,j,Z,g(b,e),{[`${b}-rtl`]:"rtl"===x,[`${b}-gap-${f}`]:(0,i.n)(f),[`${b}-vertical`]:S}),C=Object.assign(Object.assign({},null==A?void 0:A.style),c);return u&&(C.flex=u),f&&!(0,i.n)(f)&&(C.gap=f),k(r.createElement(m,Object.assign({ref:t,className:P,style:C},(0,o.Z)(v,["justify","wrap","align"])),h))}));var b=y}}]);